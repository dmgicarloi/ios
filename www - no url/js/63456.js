"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[63456],{63456:function(e,o,t){t.r(o),t.d(o,{default:function(){return de}});var n=t(8445),a=t.n(n),l=t(61758),r=t(58790),i={class:"q-card"},s={class:"row q-mx-sm wrap"},c={class:"row q-mx-sm"},u={class:"row justify-center flex-center fit"},d={class:"row"},f={class:"q-ma-xs"},m={class:"col q-ma-xs"},p={class:"col row"},h={class:"col row"};function b(e,o){var t=(0,l.g2)("sie-salones"),n=(0,l.g2)("sie-select"),b=(0,l.g2)("q-select"),v=(0,l.g2)("q-search"),g=(0,l.g2)("q-datetime"),E=(0,l.g2)("q-btn"),k=(0,l.g2)("q-td"),O=(0,l.g2)("q-tooltip"),S=(0,l.g2)("q-icon"),C=(0,l.g2)("q-download-file"),D=(0,l.g2)("q-table"),R=(0,l.g2)("q-list-header"),A=(0,l.g2)("q-list"),T=(0,l.g2)("sie-modal"),F=(0,l.g2)("q-input"),y=(0,l.g2)("q-field"),I=(0,l.g2)("q-toolbar"),V=(0,l.g2)("print"),$=(0,l.g2)("q-fab-action"),q=(0,l.g2)("q-fab"),_=(0,l.g2)("q-page-sticky"),M=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(M,{class:"column q-pa-md"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",i,[(0,l.Lk)("div",s,[(0,l.bF)(t,{class:"col-12 col-sm no-border",style:{padding:"0 !important"},modelValue:e.filtros.nemo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.filtros.nemo=o}),onSeleccionar:e.seleccionarSalon,label:e.$t("salon"),campos:["NEMO","NEMODES","INSTRUCOD","GRADOCOD","SECCIONCOD"],todos:!0},null,8,["modelValue","onSeleccionar","label"]),(0,l.bF)(n,{class:"col-sm",type:"outlined",modelValue:e.filtros.cursoSelect,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.filtros.cursoSelect=o}),options:e.cursos,label:"CURSONOM",val:"CURSOGRUPO",placeholder:"curso",onSelected:e.cargarInformacion},null,8,["modelValue","options","onSelected"]),(0,l.bF)(b,{class:"q-if-outlined",options:e.estadoJustificacion,multiple:"",chips:"",modelValue:e.filtros.estados,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.filtros.estados=o}),"float-label":"Estado",color:"secondary",onInput:e.cargarInformacion},null,8,["options","modelValue","onInput"])]),(0,l.Lk)("div",c,[(0,l.bF)(v,{class:"q-if-outlined col-12 col-sm",modelValue:e.filtros.alumno,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.filtros.alumno=o}),"float-label":"Alumno"},null,8,["modelValue"]),(0,l.bF)(g,{class:"q-if-outlined",modelValue:e.filtros.fIni,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.filtros.fIni=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechainicio"),onInput:e.cargarInformacion},null,8,["modelValue","float-label","onInput"]),(0,l.bF)(g,{class:"q-if-outlined",modelValue:e.filtros.fFin,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.filtros.fFin=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechafin"),onInput:e.cargarInformacion},null,8,["modelValue","float-label","onInput"])])]),(0,l.bF)(D,{class:"q-mt-xs",style:{height:"75vh"},data:e.data,columns:e.columns,"row-key":"ID",filter:e.filtros.alumno,selection:"multiple",selected:e.listSelect,"onUpdate:selected":o[6]||(o[6]=function(o){return e.listSelect=o})},{bottom:(0,l.k6)(function(o){return[(0,l.Lk)("div",u,[(0,l.bF)(E,{icon:"refresh",flat:"",dense:"",round:"",onClick:e.cargarInformacion},null,8,["onClick"])])]}),"body-cell-FECHA":(0,l.k6)(function(o){return[(0,l.bF)(k,{props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,r.v_)(e.date(o.row.FECHA,"DD/MM/YYYY")),1)]}),_:2},1032,["props"])]}),"body-cell-FH_REGISTRO":(0,l.k6)(function(o){return[(0,l.bF)(k,{props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,r.v_)(e.date(o.row.FH_REGISTRO,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"])]}),"body-cell-DETALLE":(0,l.k6)(function(e){return[(0,l.bF)(k,{props:e},{default:(0,l.k6)(function(){return[(0,l.bF)(S,{name:"info"},{default:(0,l.k6)(function(){return[(0,l.bF)(O,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",d,[o[21]||(o[21]=(0,l.Lk)("div",{class:"text-bold"},"Detalle:  ",-1)),(0,l.Lk)("span",null,(0,r.v_)(e.row.DETALLE),1)])]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["props"])]}),"body-cell-ESTADO":(0,l.k6)(function(o){return[(0,l.bF)(k,{props:o,style:(0,r.Tr)({"background-color":e.estados[o.row.ESTADO].color})},{default:(0,l.k6)(function(){return[(0,l.eW)((0,r.v_)(e.estados[o.row.ESTADO].abr),1),(0,l.bF)(O,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,r.v_)(e.estados[o.row.ESTADO].titulo),1)]}),_:2},1024)]}),_:2},1032,["props","style"])]}),"body-cell-NOMDOC":(0,l.k6)(function(o){return[(0,l.bF)(k,{props:o},{default:(0,l.k6)(function(){return[o.row.EXTENSION?((0,l.uX)(),(0,l.Wv)(C,{key:0,src:e.devuelveUrl(o.row),item:o.row,name:o.row.NOMDOC,extension:o.row.EXTENSION,inline:!1},null,8,["src","item","name","extension"])):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-ESTADOCOD":(0,l.k6)(function(o){return[(0,l.bF)(k,{class:"items-center",props:o},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",{class:"items-center asistencia",style:(0,r.Tr)({"background-color":e.estadoAsistencia[o.row.ESTADOCOD].color})},[(0,l.Lk)("span",null,(0,r.v_)(e.estadoAsistencia[o.row.ESTADOCOD].etk),1)],4)]}),_:2},1032,["props"])]}),_:1},8,["data","columns","filter","selected"]),(0,l.bF)(T,{modelValue:e.detalleAdicional,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.detalleAdicional=o})},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",f,[(0,l.bF)(A,null,{default:(0,l.k6)(function(){return[e.infoRechazados.length>0?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(R,null,{default:(0,l.k6)(function(){return a()(o[22]||(o[22]=[(0,l.eW)("Justificaciones Rechazadas",-1)]))}),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoRechazados,function(e){return(0,l.uX)(),(0,l.Wv)(A,{key:e.ID},{default:(0,l.k6)(function(){return[(0,l.eW)((0,r.v_)(e.NOMCOMP),1)]}),_:2},1024)}),128))],64)):(0,l.Q3)("v-if",!0),e.infoAceptados.length>0?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.bF)(R,null,{default:(0,l.k6)(function(){return a()(o[23]||(o[23]=[(0,l.eW)("Justificaciones Aceptadas",-1)]))}),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoRechazados,function(e){return(0,l.uX)(),(0,l.Wv)(A,{key:e.ID},{default:(0,l.k6)(function(){return[(0,l.eW)((0,r.v_)(e.NOMCOMP),1)]}),_:2},1024)}),128))],64)):(0,l.Q3)("v-if",!0)]}),_:1})])]}),_:1},8,["modelValue"]),(0,l.bF)(T,{modelValue:e.modalRechazar,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.modalRechazar=o}),title:"Rechazar Justificacion"},{footer:(0,l.k6)(function(){return[(0,l.bF)(I,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.bF)(E,{flat:"",color:"primary",label:"cancelar",onClick:o[15]||(o[15]=function(o){return e.modalRechazar=!1})}),(0,l.bF)(E,{color:"primary",label:"Rechazar",onClick:e.rechazarJustificacion},null,8,["onClick"])]}),_:1})]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",m,[(0,l.bF)(F,{class:"q-if-outlined",modelValue:e.dataRechazo.NOMCOMP,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.dataRechazo.NOMCOMP=o}),readonly:"","float-label":"Estudiante"},null,8,["modelValue"]),(0,l.Lk)("div",p,[(0,l.bF)(F,{class:"col q-if-outlined",modelValue:e.dataRechazo.NEMODES,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.dataRechazo.NEMODES=o}),readonly:"","float-label":"Salón"},null,8,["modelValue"]),(0,l.bF)(F,{class:"col q-if-outlined",modelValue:e.dataRechazo.FECHA,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.dataRechazo.FECHA=o}),readonly:"","float-label":"Fecha asistencia"},null,8,["modelValue"])]),(0,l.Lk)("div",h,[(0,l.bF)(F,{class:"col q-if-outlined",modelValue:e.dataRechazo.JUSTIFICACION,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.dataRechazo.JUSTIFICACION=o}),readonly:"","float-label":"Tipo de justificación"},null,8,["modelValue"]),(0,l.bF)(F,{class:"col q-if-outlined",modelValue:e.dataRechazo.FH_REGISTRO,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.dataRechazo.FH_REGISTRO=o}),readonly:"","float-label":"Fecha justificación"},null,8,["modelValue"])]),(0,l.bF)(F,{class:"q-if-outlined col",type:"textarea",rows:"3",readonly:"",modelValue:e.dataRechazo.DETALLE,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.dataRechazo.DETALLE=o}),"float-label":"Detalle de la justificación"},null,8,["modelValue"]),(0,l.bF)(y,{error:e.v$.dataRechazo.RECHAZO_DETALLE.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(F,{class:"q-if-outlined col",type:"textarea",rows:"3",modelValue:e.v$.dataRechazo.RECHAZO_DETALLE.$model,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.v$.dataRechazo.RECHAZO_DETALLE.$model=o}),"float-label":"Motivo del rechazo",maxlength:"300"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])])]}),_:1},8,["modelValue"]),e.openPrint?((0,l.uX)(),(0,l.Wv)(V,{key:0,open:e.openPrint,onCerrarModal:e.cerrarModal,sieInfo:e.sie,estados:e.estados},null,8,["open","onCerrarModal","sieInfo","estados"])):(0,l.Q3)("v-if",!0),(0,l.bF)(_,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[0===e.listSelect.length||3!==e.sie.ruta.nivel?((0,l.uX)(),(0,l.Wv)(E,{key:0,round:"",size:"lg",icon:"print",color:"secondary",onClick:o[17]||(o[17]=function(o){return e.openPrint=!0})},{default:(0,l.k6)(function(){return[(0,l.bF)(O,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,r.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1})):e.acceso?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e.listSelect.length>0?((0,l.uX)(),(0,l.Wv)(q,{key:0,color:"secondary",icon:"more_vert",direction:"up"},{default:(0,l.k6)(function(){return[(0,l.bF)($,{color:"secondary",icon:"done_all",onClick:o[18]||(o[18]=function(o){return e.aceptarJus("A")})},{default:(0,l.k6)(function(){return[(0,l.bF)(O,null,{default:(0,l.k6)(function(){return a()(o[24]||(o[24]=[(0,l.eW)("Aceptar",-1)]))}),_:1})]}),_:1}),1===e.listSelect.length?((0,l.uX)(),(0,l.Wv)($,{key:0,color:"secondary",icon:"call_missed",onClick:o[19]||(o[19]=function(o){return e.openModalRechazar(e.listSelect)})},{default:(0,l.k6)(function(){return[(0,l.bF)(O,null,{default:(0,l.k6)(function(){return a()(o[25]||(o[25]=[(0,l.eW)("Rechazar",-1)]))}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0),(0,l.bF)($,{color:"secondary",icon:"delete",onClick:e.eliminarJus},{default:(0,l.k6)(function(){return[(0,l.bF)(O,null,{default:(0,l.k6)(function(){return a()(o[26]||(o[26]=[(0,l.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,l.bF)($,{color:"secondary",icon:"print",onClick:o[20]||(o[20]=function(o){return e.openPrint=!0})},{default:(0,l.k6)(function(){return[(0,l.bF)(O,null,{default:(0,l.k6)(function(){return a()(o[27]||(o[27]=[(0,l.eW)("Imprimir",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0)],64)):(0,l.Q3)("v-if",!0)]}),_:1})]}),_:1})}var v=t(99550),g=t.n(v),E=(t(10239),t(50310),t(90095),t(83190),t(13715),t(83972)),k=t(6123),O=t(30545),S=t(88275),C=t(80660),D=t(57668),R=t(80340),A=t(34858),T=t(51082),F=t(81288),y=t(30640),I=t(93616),V=t(24974),$=t(65818),q=t(18105),_=t(982),M=t(82640),L=t(62006),z=t(69027),w={class:"row q-pa-md"},U={class:"col-xs-12 col-md-6 column"},Q={class:"row q-subheading text-weight-bold"},N={class:"col-xs-12 col-md-6"},H={class:"row"},x={class:"col-xs-12 q-py-md"},Y={class:"row"},P={class:"col-xs-12"},J={key:0,class:"row"},X={class:"col"},W={class:"col"},G={class:"col"},j={class:"row"},B={class:"col"},Z={class:"col-xs-6"},K={class:"column q-pa-xs q-mb-sm col",style:{border:"1px solid black !important","border-radius":"3px"}},ee={style:{"font-size":"0.8rem"}},oe={class:"col"};function te(e,o){var t=(0,l.g2)("q-btn"),n=(0,l.g2)("q-toolbar"),a=(0,l.g2)("q-radio"),i=(0,l.g2)("q-toggle"),s=(0,l.g2)("q-select"),c=(0,l.g2)("q-datetime"),u=(0,l.g2)("q-checkbox"),d=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(d,{class:"imprimir-modal",modelValue:e.impStat,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.impStat=o}),title:e.$t("imprimir"),ok:!1,footer:!0,onInput:e.modalCerrar},{footer:(0,l.k6)(function(){return[(0,l.bF)(n,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(t,{class:"q-mx-xs",icon:"file_pdf",label:"PDF",color:"primary",onClick:o[0]||(o[0]=function(o){return e.imprimir("pdf")})}),(0,l.bF)(t,{class:"q-mx-xs",icon:"file_excel",label:"EXCEL",color:"primary",onClick:o[1]||(o[1]=function(o){return e.imprimir("xls")})})])]}),_:1})]}),footerMobile:(0,l.k6)(function(){return[[7,8].indexOf(e.reporte)<0?((0,l.uX)(),(0,l.Wv)(t,{key:0,flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[2]||(o[2]=function(o){return e.imprimir("pdf")})})):(0,l.Q3)("v-if",!0),(0,l.bF)(t,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[3]||(o[3]=function(o){return e.imprimir("xls")})})]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",w,[(0,l.Lk)("div",U,[(0,l.Lk)("div",Q,(0,r.v_)(e.$t("botones.reportes")),1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.tipoReportes,function(t,n){return(0,l.uX)(),(0,l.Wv)(a,{key:n,class:"q-py-sm",modelValue:e.reporte,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.reporte=o}),val:t.value,label:t.label,onInput:e.resetFiltro},null,8,["modelValue","val","label","onInput"])}),128))]),(0,l.Lk)("div",N,[(0,l.Lk)("div",H,[(0,l.Lk)("div",x,[5!==e.reporte&&6!==e.reporte&&7!==e.reporte&&8!==e.reporte&&9!==e.reporte&&11!==e.reporte?((0,l.uX)(),(0,l.Wv)(i,{key:0,modelValue:e.filtroSalon,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.filtroSalon=o}),color:"secondary",label:"Por Salón","true-value":1,"false-value":0},null,8,["modelValue"])):(0,l.Q3)("v-if",!0)])]),(0,l.Lk)("div",Y,[(0,l.Lk)("div",P,[1==e.filtroSalon&&11!==e.reporte?((0,l.uX)(),(0,l.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.nemo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.nemo=o}),options:e.salonesReportes,placeholder:e.$t("salon"),error:e.v$.nemo.$error,"error-label":"Este campo es requerido",onBlur:e.v$.nemo.$touch,onInput:e.obtAlumnosPorSalon},null,8,["modelValue","options","placeholder","error","onBlur","onInput"])):(0,l.Q3)("v-if",!0)])]),1!==e.filtroSalon?((0,l.uX)(),(0,l.CE)("div",J,[(0,l.Lk)("div",X,[(0,l.bF)(s,{class:"q-if-outlined",modelValue:e.instrucod,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.instrucod=o}),options:e.niveles,"float-label":e.$t("ngs.nivel"),error:e.v$.instrucod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.instrucod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])]),(0,l.Lk)("div",W,[(0,l.bF)(s,{class:"q-if-outlined",modelValue:e.gradocod,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.gradocod=o}),options:e.grados,"float-label":e.$t("ngs.grado"),error:e.v$.gradocod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.gradocod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])]),(0,l.Lk)("div",G,[(0,l.bF)(s,{class:"q-if-outlined",modelValue:e.seccioncod,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.seccioncod=o}),options:e.secciones,"float-label":e.$t("ngs.seccion"),error:e.v$.seccioncod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.seccioncod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",j,[(0,l.Lk)("div",B,[(0,l.bF)(c,{class:"q-if-outlined",modelValue:e.fecini,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.fecini=o}),type:"date","float-label":e.$t([5,8,12].indexOf(e.reporte)>=0?"fecha":"desde"),format:"DD/MM/YYYY",error:e.v$.fecini.$error,"error-label":"Este campo es requerido",onBlur:e.v$.fecini.$touch},null,8,["modelValue","float-label","error","onBlur"])]),(0,l.Lk)("div",Z,[(0,l.bF)(c,{class:"q-if-outlined",modelValue:e.fecfin,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.fecfin=o}),type:"date","float-label":e.$t("hasta"),format:"DD/MM/YYYY",error:e.v$.fecfin.$error,"error-label":"Este campo es requerido",onBlur:e.v$.fecfin.$touch},null,8,["modelValue","float-label","error","onBlur"])])]),(0,l.Lk)("fieldset",K,[(0,l.Lk)("legend",ee,(0,r.v_)(e.$t("Estados"))+" :",1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.estados,function(t,n){return(0,l.uX)(),(0,l.CE)("div",oe,[(0,l.bF)(u,{modelValue:e.filtroEstado,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.filtroEstado=o}),label:t.titulo,val:n,color:"secondary"},null,8,["modelValue","label","val"])])}),256))])])])]}),_:1},8,["modelValue","title","onInput"])}t(30683),t(52133),t(6724),t(515),t(99637);var ne=t(13813),ae=(t(8261),t(33001),t(2819)),le={setup:function(){var e=(0,E.fG)();return{v$:e}},emits:["cerrarModal"],components:{sieSelect:I.A,sieModal:y.A,QDatetime:k.T5,QRadio:k.$,QToggle:k.c5,QSelect:k.Si,date:k.p6,QCheckbox:k.vZ,QToolbar:k.ZV,QBtn:k.Il},props:["open","sieInfo","estados"],data:function(){return{impStat:!0,salonesReportes:[],cursosReportesTemp:[],filtroSalon:1,nemo:null,reporte:1,niveles:[],preGrados:[],preSecciones:[],fecini:new Date((new Date).setDate(1)),fecfin:new Date,instrucod:"T",gradocod:"T",seccioncod:"T",filtroEstado:[0,1,2],filtro:{instrucod:"T",gradocod:"T",seccioncod:"T"},tipoReportes:[{label:"Listado de Justificaciones",value:1}]}},watch:{open:function(e){this.impStat=e}},methods:{modalCerrar:function(e){this.$emit("cerrarModal")},obtAlumnosPorSalon:function(e){var o=this;[5,6,9].indexOf(this.reporte)>=0&&C.$http.get("api/HyoSalonAl/obtAlumnosPorSalon",{params:{nemo:this.nemo}}).then(function(e){var t=e.json;t.length>0&&(o.alucod=null,o.alumnosReportes=t.map(function(e){return{label:e.NOMCOMP,value:e.ALUCOD}}))})},resetFiltro:function(){this.filtroSalon=1},imprimir:function(e){var o="/intranet/reporte-node/reporte",t=this.sieInfo.ano,n={};this.v$.$touch(),console.log(this.v$),this.v$.$error||(n["reporte"]=this.reporte,n["repcod"]="justificacionCurso",n["formato"]=e,n["ano"]=t,n["nemo"]=this.nemo,n["instrucod"]=this.instrucod,n["gradocod"]=this.gradocod,n["seccioncod"]=this.seccioncod,n["estados"]=this.filtroEstado,n["fecini"]=k.p6.formatDate(this.fecini,"DD/MM/YYYY"),n["fecfin"]=k.p6.formatDate(this.fecfin,"DD/MM/YYYY"),n["fIni"]=this.fecini,n["fFin"]=this.fecfin,1!==this.filtroSalon?delete n["nemo"]:(delete n["instrucod"],delete n["gradocod"],delete n["seccioncod"]),(0,ae.exportFilePhp)(n,o,"Resumen Justificacion por Curso"))}},validations:function(){var e={};return e["fecini"]={required:M.mw},e["fecfin"]={required:M.mw},1===this.filtroSalon?e["nemo"]={required:M.mw}:(e["instrucod"]={required:M.mw},e["gradocod"]={required:M.mw},e["seccioncod"]={required:M.mw}),e},mounted:function(){var e=this;C.$http.get("api/HyoSalones/listaSalones").then(function(o){var t=o.json;e.salonesReportes=[],t.forEach(function(o){var t=o.NEMODES,n=o.NEMO,a=o.INSTRUCOD,l=o.GRADOCOD;e.salonesReportes.push({label:t,value:n,instrucod:a,gradocod:l})})}),C.$http.get("api/HyoInstrus/obtGradosAsignados").then(function(o){var t=o.json;t.niveles.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=(0,ne.mapQ)(t.niveles,{label:"INSTRUDES",value:"INSTRUCOD"}),Object.keys(t.grados).forEach(function(e){t.grados[e]=(0,ne.mapQ)(t.grados[e],{label:"GRADODES",value:"GRADOCOD"})}),e.preGrados=t.grados,Object.keys(t.secciones).forEach(function(e){t.secciones[e]=(0,ne.mapQ)(t.secciones[e],{label:"SECCIONCOD",value:"SECCIONCOD"})}),e.preSecciones=t.secciones,e.instrucod=e.niveles[0].value}),C.$http.get("api/HyoAsignaprs/obtListaCursos",{params:{parametros:{instrucod:"T",gradocod:"T",seccioncod:"T",asignados:!0}}}).then(function(o){var t=o.json;e.cursosReportesTemp=t})},computed:{grados:function(){var e=[{label:"Todos",value:"T"}].concat(a()(this.preGrados[this.instrucod]||[]));return this.gradocod="T",e},secciones:function(){var e=[{label:"Todos",value:"T"}].concat(a()(this.preSecciones[this.instrucod+this.gradocod]||[]));return this.seccioncod="T",e}}},re=t(12807);const ie=(0,re.A)(le,[["render",te]]);var se=ie,ce={setup:function(){var e=(0,E.fG)();return{v$:e}},components:{sieSalones:S.Ay,QSelect:k.Si,sieUsuario:V.A,sieModal:y.A,sieVacio:R.A,QToggle:k.c5,QCheckbox:k.vZ,QBtnToggle:k.QL,sieSelect:I.A,QRadio:k.$,QClock:$.A,QTable:O.A,QTh:k.EJ,QTr:k.qh,QTd:k.Ef,QTableColumns:k.$s,virtualList:A.Ay,QPopupEdit:k.GT,QChip:k.wQ,sieDate:T.A,QFabAction:k.B$,QPageSticky:k._U,QFab:k.l6,QDatetime:k.T5,QDownloadFile:L.A,print:se,QPage:k.Tu,QSearch:k.Ks,QBtn:k.Il,QIcon:k.bP,QTooltip:k.nC,QList:k.Mb,QListHeader:k.XR,QInput:k.ie,QField:k.Om,QToolbar:k.ZV},data:function(){return{sie:(0,D["default"])(),acceso:(0,D["default"])().ruta.nivel>=2,nemo:null,data:[],filtros:{fIni:new Date((new Date).setDate(1)),fFin:new Date,nemo:"T",estados:[0],alumno:null,cursoSelect:"T"},preData:[],estadoAsistencia:{},listSelect:[],estados:[{titulo:"Pendiente",abr:"Pen",color:"#ffa50021"},{titulo:"Aceptado",abr:"Acep",color:"#0080002b"},{titulo:"Rechazado",abr:"Rech",color:"#ff000030"}],columns:[{name:"NOMCOMP",label:"Estudiante",field:"NOMCOMP",align:"left",sortable:!0},{name:"NEMODES",label:"Salón",field:"NEMODES",align:"left",sortable:!0},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left",sortable:!0},{name:"ESTADOCOD",label:"Asistencia",field:"ESTADOCOD",align:"center",sortable:!0},{name:"FECHA",label:"F. Asistencia",field:"FECHA",align:"left",sortable:!0},{name:"FH_REGISTRO",label:"F. Justificacion",field:"FH_REGISTRO",align:"left",sortable:!0},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"},{name:"JUSTIFICACION",label:"Justificación",field:"JUSTIFICACION",align:"center"},{name:"NOMDOC",label:"Archivo",field:"NOMDOC",align:"left"},{name:"DETALLE",label:"Detalle",field:"DETALLE",align:"center"}],estadoJustificacion:[{label:"Pendiente",value:0},{label:"Aceptado",value:1},{label:"Rechazado",value:2}],dataRechazo:{},preCursos:[],cursos:[{}],modalRechazar:!1,infoRechazados:[],infoAceptados:[],detalleAdicional:!1,openPrint:!1}},methods:{date:q.Ay,cerrarModal:function(){this.openPrint=!1},devuelveUrl:function(e){var o=e.ID,t=this.sie.api+"/HyoJustificacursos/archivo/"+o+"?access_token="+this.sie.token;return t},eliminarJus:function(){var e=this,o=[];this.listSelect.forEach(function(e){0===e.ESTADO&&["R","F"].indexOf(e.ESTADOCOD)>=0&&o.push(e.ID)}),o.length>0?(0,z.dialogDelete)().then(function(t){t&&C.$http.post("api/HyoJustificacursos/eliminarJustificacion",{ids:o}).then(function(o){var t=o.json;(0,_["default"])(e.$t("mensajes."+t.msg),t.tipo),"m0006.ok"===t.msg&&(e.cargarInformacion(),e.listSelect=[])})}):(0,z.dialogConfirm)({message:"No hay registros por eliminar",ok:"Si",cancel:!1})},openModalRechazar:function(e){var o=g()(e,1),t=o[0];0===t.ESTADO?(this.dataRechazo=t,this.dataRechazo.FH_REGISTRO=(0,q.Ay)(this.dataRechazo.FH_REGISTRO,"DD/MM/YYYY  HH:mm"),this.dataRechazo.FECHA=(0,q.Ay)(this.dataRechazo.FECHA,"DD/MM/YYYY"),this.dataRechazo.RECHAZO_DETALLE=null,this.modalRechazar=!0):(0,z.dialogConfirm)({message:"Solo se puede rechazar una justificacion pendiente",cancel:!1})},rechazarJustificacion:function(){var e=this;this.v$.dataRechazo.$touch(),this.v$.$invalid||(0,z.dialogConfirm)({title:"Está seguro de realizar este proceso? ",message:"Este proceso es irreversible",ok:"Si",cancel:"No"}).then(function(o){o&&C.$http.post("api/HyoJustificacursos/rechazarJustificacion",e.dataRechazo).then(function(o){var t=o.json;(0,_["default"])(e.$t("mensajes."+t.msg,t.type)),"m0001"===t.msg&&(e.modalRechazar=!1,e.cargarInformacion(),e.listSelect=[])})})},aceptarJus:function(){var e=this,o=[];this.infoAceptados=[],this.infoAcpetinfoRechazadosados=[],this.listSelect.forEach(function(t){if(["R","F"].indexOf(t.ESTADOCOD)>=0)switch(t.ESTADO){case 0:o.push(t);break;case 1:e.infoAceptados.push(t);break;case 2:e.infoRechazados.push(t);break}}),o.length>0?(0,z.dialogConfirm)({title:"Está seguro de realizar este proceso? ",message:"Este proceso es irreversible",ok:"Si",cancel:"No"}).then(function(t){t&&C.$http.post("api/HyoJustificacursos/aceptarJustificacion",{info:o}).then(function(o){var t=o.json;console.log(t.msg),"m0001"===t.msg&&(e.infoRechazados.length>0||e.infoAceptados.length>0?((0,z.dialogConfirm)({message:"Hay registros que no se procesaron",ok:e.$t("botones.verMas"),cancel:!1}).then(function(o){o&&(e.detalleAdicional=!0)}),e.cargarInformacion(),e.listSelect=[]):((0,_["default"])(e.$t("mensajes."+t.msg)),e.cargarInformacion(),e.listSelect=[]))})}):(0,z.dialogConfirm)({message:"No hay justificaciones por aprobar",ok:this.$t("botones.aceptar"),cancel:!1})},seleccionarSalon:function(e){var o=this;C.$http.post("api/HyoAsignaprs/getCursosPeriodos",{parametros:{simple:!0,nemo:e.NEMO}}).then(function(e){var t=e.json;t.cursos.forEach(function(e){e.CURSOGRUPO=e.CURSOCOD+e.GRUPOCOD}),o.preCursos=t.cursos,o.seleccionarTipo()})},seleccionarTipo:function(){this.cursos=a()(this.preCursos),this.cursos.unshift({CURSOCOD:"T",CURSONOM:"Todos",CURSOGRUPO:"T"}),this.filtros.cursoSelect="T",this.cargarInformacion()},cargarInformacion:function(){var e=this;this.filtros.cursoSelect&&this.filtros.estados.length>0&&C.$http.get("api/HyoJustificacursos/getDataAsistencia",{params:{parametros:this.filtros}}).then(function(o){var t=o.json;e.data=t})},filtrar:function(){},handleResize:function(){this.alto=window.innerHeight-105},cargaInicial:function(){}},computed:{maxLista:function(){var e=this.alto-200;return e/20},isGreater:function(){return(0,F.isGreater)()}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},validations:function(){var e={dataRechazo:{RECHAZO_DETALLE:{required:M.mw}}};return e},created:function(){var e=this;window.addEventListener("resize",this.handleResize),this.handleResize(),C.$http.get("api/HyoHorasisEstado/listarHorasisEstado",{params:{momento:1}}).then(function(o){var t=o.json;t.forEach(function(o){e.estadoAsistencia[o.ESTADOCOD]={},e.estadoAsistencia[o.ESTADOCOD].color=o.COLORHEXF,e.estadoAsistencia[o.ESTADOCOD].etk=o.ESTADOETI,e.estadoAsistencia[o.ESTADOCOD].descripcion=o.ESTADODES}),e.cargaInicial(),e.seleccionarTipo()})}};const ue=(0,re.A)(ce,[["render",b]]);var de=ue}}]);