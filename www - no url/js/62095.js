"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[62095],{62095:function(o,e,t){t.r(e),t.d(e,{default:function(){return j}});var i=t(61758),l=t(58790),a={class:"row"},n={class:"col col-sm-5 col-xs-12"},r={class:"col col-sm-5 col-xs-12"},s={class:"sie-select-general espacio_1"},u={class:"col col-sm-2 col-xs-12"},c={class:"sie-select-general espacio_1"},d={class:"row"},m={class:"col-md-6 col-sm-12 col-xs-12"},f={class:"col-md-4 col-sm-8 col-xs-12"},p={class:"col-md-2 col-sm-4 col-xs-12"},O={class:"row"},v={class:"col-md-2 col-xs-2 row justify-around"},h={class:"col-md-6 col-xs-10"},E={key:0},b={key:1},L={class:"col-sm-4 col-xs-12"},D={class:"row"},C={class:"col-6"},M={class:"row"},S={class:"row"};function k(o,e){var t=(0,i.g2)("sie-salones"),k=(0,i.g2)("sie-select"),A=(0,i.g2)("sie-vacio"),g=(0,i.g2)("q-input"),$=(0,i.g2)("sie-usuario"),I=(0,i.g2)("q-icon"),N=(0,i.g2)("q-field"),F=(0,i.g2)("q-option-group"),P=(0,i.g2)("q-btn"),U=(0,i.g2)("q-page-sticky"),y=(0,i.g2)("q-card"),V=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(V,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",a,[(0,i.Lk)("div",n,[(0,i.bF)(t,{modelValue:o.vmSalon,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.vmSalon=e}),onSeleccionar:o.retornarAlumnosSalon,todos:!1},null,8,["modelValue","onSeleccionar"])]),(0,i.Lk)("div",r,[(0,i.Lk)("div",s,[(0,i.bF)(k,{type:"outlined",modelValue:o.estudiante,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.estudiante=e}),options:o.dataAlumnos,label:"NOMCOMP",val:"ALUCOD",placeholder:"intranet.estudiantes",onSelected:o.getSelectedStudent},null,8,["modelValue","options","onSelected"])])]),(0,i.Lk)("div",u,[(0,i.Lk)("div",c,[(0,i.bF)(k,{type:"outlined",modelValue:o.currentPeriodo,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.currentPeriodo=e}),label:"label",val:"value",options:o.getPeriodo,placeholder:"Periodo",onInput:o.getData},null,8,["modelValue","options","onInput"])])])]),null===o.currentPeriodo?((0,i.uX)(),(0,i.Wv)(A,{key:0,class:"col scroll-y"})):((0,i.uX)(),(0,i.Wv)(y,{key:1,class:"col scroll-y marginCard"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",d,[(0,i.Lk)("div",m,[(0,i.bF)(g,{class:"q-if-outlined",modelValue:o.tutor,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.tutor=e}),"float-label":"Tutor(a)",readonly:!0},null,8,["modelValue"])]),(0,i.Lk)("div",f,[(0,i.bF)(g,{class:"q-if-outlined",modelValue:o.gradoSeccion,"onUpdate:modelValue":e[4]||(e[4]=function(e){return o.gradoSeccion=e}),"float-label":"Grado y Sección",readonly:!0},null,8,["modelValue"])]),(0,i.Lk)("div",p,[(0,i.bF)(g,{class:"q-if-outlined",modelValue:o.numeroOrden,"onUpdate:modelValue":e[5]||(e[5]=function(e){return o.numeroOrden=e}),"float-label":"Número de Orden",readonly:!0},null,8,["modelValue"])])]),e[12]||(e[12]=(0,i.Lk)("div",{class:"row"},[(0,i.Lk)("div",{class:"col"},[(0,i.Lk)("br"),(0,i.Lk)("div",{class:"titleRuler font-label bold"},"Estado del Alumno(a)"),(0,i.Lk)("br")])],-1)),(0,i.Lk)("div",O,[(0,i.Lk)("div",v,[(0,i.bF)($,{class:"photo sie-usuario-xl",alucod:o.showUsuCod},null,8,["alucod"])]),(0,i.Lk)("div",h,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.nNiveles,function(o,e){return(0,i.uX)(),(0,i.CE)("div",null,[o.ID_CONDICION==o.ID_CONDICION_ESTUDIOS||o.ID_CONDICION==o.ID_CONDICION_CONDUCTA?((0,i.uX)(),(0,i.CE)("p",E,[(0,i.bF)(I,{name:"check_box",color:"primary",size:"24px"}),(0,i.Lk)("span",null,(0,l.v_)(o.DESCRIPCION),1)])):((0,i.uX)(),(0,i.CE)("p",b,[(0,i.bF)(I,{name:"check_box_outline_blank",color:"primary",size:"24px"}),(0,i.Lk)("span",null,(0,l.v_)(o.DESCRIPCION),1)]))])}),256))]),(0,i.Lk)("div",L,[e[9]||(e[9]=(0,i.Lk)("br",null,null,-1)),(0,i.bF)(N,{class:"col",error:o.v$.form.visitas.$error,"error-label":o.$t("validaciones.requerido")},{default:(0,i.k6)(function(){return[(0,i.bF)(g,{class:"q-if-outlined",modelValue:o.v$.form.visitas.$model,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.v$.form.visitas.$model=e}),"float-label":"Número de visitas en el periodo"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])])]),(0,i.Lk)("div",D,[e[11]||(e[11]=(0,i.Lk)("div",{class:"col-12"},[(0,i.Lk)("br"),(0,i.Lk)("div",{class:"titleRuler font-label bold"},"Familia"),(0,i.Lk)("br")],-1)),(0,i.Lk)("div",C,[(0,i.bF)(N,{class:"col",error:o.v$.form.familia.$error,"error-label":o.$t("validaciones.requerido")},{default:(0,i.k6)(function(){return[(0,i.bF)(F,{modelValue:o.v$.form.familia.$model,"onUpdate:modelValue":e[7]||(e[7]=function(e){return o.v$.form.familia.$model=e}),type:"radio",onInput:e[8]||(e[8]=function(e){return o.catchTipoFamiliar(o.tipoFamilia)}),color:"secondary",options:o.objTipoFamilia},null,8,["modelValue","options"]),e[10]||(e[10]=(0,i.Lk)("br",null,null,-1))]}),_:1},8,["error","error-label"])])]),(0,i.Lk)("div",M,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.comentarios,function(e,t){return(0,i.uX)(),(0,i.CE)("div",{class:(0,l.C4)({"col-12":"0"===t,"col-xs-12 col-sm-6 col-md-6":"0"!==t})},[(0,i.bF)(N,{class:"col",error:o.v$.comentario[t].MODEL.$error,"error-label":o.$t("validaciones.requerido")},{default:(0,i.k6)(function(){return[(0,i.bF)(g,{class:"font-label q-if-outlined",modelValue:o.v$.comentario[t].MODEL.$model,"onUpdate:modelValue":function(e){return o.v$.comentario[t].MODEL.$model=e},onBlur:o.v$.comentario[t].MODEL.$touch,"float-label":e.DESC,type:"textarea",rows:"4"},null,8,["modelValue","onUpdate:modelValue","onBlur","float-label"])]}),_:2},1032,["error","error-label"])],2)}),256))]),(0,i.Lk)("div",S,[(0,i.bF)(P,{color:"blue",onClick:o.sendComentarios,label:"Guardar",style:{display:"block",margin:"10px auto"}},null,8,["onClick"])]),(0,i.bF)(U,{class:"pos-sticky",position:"bottom-right",offset:[80,18]},{default:(0,i.k6)(function(){return[(0,i.bF)(P,{class:"animate-pop","fab-mini":"",color:"secondary","text-color":"white",icon:"printer",onClick:o.displayReport},null,8,["onClick"])]}),_:1})]}),_:1}))]}),_:1})}t(23825),t(52133),t(50310),t(90095),t(6724),t(11777),t(515),t(83190),t(27153),t(44264),t(66307),t(13715),t(24066);var A=t(83972),g=t(80660),$=t(6123),I=t(93616),N=t(2819),F=t(30640),P=t(80340),U=t(57668),y=t(82640),V=t(88275),T=t(982),_=t(69027),q=t(24974),x={setup:function(){var o=(0,A.fG)();return{v$:o}},components:{QSelect:$.Si,QTable:$.kH,QTr:$.qh,QTd:$.Ef,QModal:$.tU,QModalLayout:$.hT,sieSelect:I.A,QField:$.Om,sieVacio:P.A,sieModal:F.A,QCheckbox:$.vZ,sieSalones:V.Ay,QCard:$.C$,sieInfo:U["default"],QBtn:$.Il,QOptionGroup:$.EX,QPageSticky:$._U,sieUsuario:q.A,QPage:$.Tu,QInput:$.ie,QIcon:$.bP},data:function(){return{estudiante:"",sessionEstudiante:null,tutor:null,gradoSeccion:"",numeroOrden:"",tipoFamilia:null,objTipoFamilia:[],nVisitas:null,perinum:null,nNiveles:[],data:null,comentarios:{0:{DESC:"Observaciones",MODEL:""},1:{DESC:"Situación Familiar",MODEL:""},2:{DESC:"Aspecto Académico",MODEL:""},3:{DESC:"Aspecto Conductual",MODEL:""},4:{DESC:"Otros",MODEL:""}},objPeriodos:[],currentPeriodo:null,form:{visitas:"",familia:""},dataAlumnos:[],vmSalon:""}},watch:{},computed:{getPeriodo:function(){var o=null;return 3===Number(this.perinum)?o=[{value:1,label:"1er Periodo"},{value:2,label:"2do Periodo"},{value:3,label:"3er Periodo"}]:4===Number(this.perinum)&&(o=[{value:1,label:"1er Periodo"},{value:2,label:"2do Periodo"},{value:3,label:"3er Periodo"},{value:4,label:"4to Periodo"}]),o},showUsuCod:function(){return null===this.sessionEstudiante?"":this.sessionEstudiante.ALUCOD}},methods:{retornarAlumnosSalon:function(){var o=this;this.dataAlumnos=[],g.$http.get("api/HyoAcompanamientoalumno/obtAlumnosTodos",{params:{nemo:this.vmSalon}}).then(function(e){o.dataAlumnos=e.json,o.currentPeriodo=null,o.sessionEstudiante=null,o.perinum=null}).catch(function(o){})},getSelectedStudent:function(o){this.sessionEstudiante=o,this.sessionEstudiante.NEMO=this.vmSalon,this.currentPeriodo=null,this.getTutor(o)},getData:function(){var o=this,e=g.$http.get("api/HyoFichaApreciacion/getFichaApreciacion",{params:{ALUCOD:this.sessionEstudiante.ALUCOD,NEMO:this.sessionEstudiante.NEMO,BIMECOD:String(this.currentPeriodo)}}),t=g.$http.get("api/HyoAcompanamientoalumno/obtNivelesAlumno",{params:{ano:(0,U["default"])().ano.toString(),alucod:this.sessionEstudiante.ALUCOD,bimecod:String(this.currentPeriodo)}});Promise.all([e,t]).then(function(e){o.v$.comentarios.$reset(),o.v$.form.$reset();var t=e[0].json;if(0!==t.length){var i=t[0];o.form.familia=i.ID_TIPO_COMPROMISO,o.form.visitas=i.NUM_ENTREVISTA,o.comentarios[0].MODEL=i.OBSERVACIONES,o.comentarios[1].MODEL=i.SIT_FAM,o.comentarios[2].MODEL=i.ASP_ACADEMICO,o.comentarios[3].MODEL=i.ASP_CONDUCTUAL,o.comentarios[4].MODEL=i.OTROS}else o.form.familia="",o.form.visitas="",o.comentarios[0].MODEL="",o.comentarios[1].MODEL="",o.comentarios[2].MODEL="",o.comentarios[3].MODEL="",o.comentarios[4].MODEL="";o.nNiveles=e[1].json}).catch(function(o){})},getTutor:function(o){var e=this;g.$http.get("api/HyoSalonAl/getTutorAlumno",{params:{ALUCOD:o.ALUCOD,NEMO:o.NEMO}}).then(function(o){var t=o.json;e.tutor=t[0].TUTOR,e.gradoSeccion=t[0].NEMODES,e.numeroOrden=t[0].NUMORD,e.perinum=t[0].PERINUM}).catch(function(o){})},getTipoFamilia:function(){var o=this;g.$http.get("api/HyoFichaapreciacion/getTipoFamilia").then(function(e){o.objTipoFamilia=e.json.map(function(o){return o.MODEL=!1,o.label=o.DESCRIPCION,o.value=o.ID,o})}).catch(function(o){})},sendComentarios:function(){var o=this;if(this.v$.comentarios.$touch(),this.v$.form.$touch(),this.v$.comentarios.$error||this.v$.form.$error)return(0,_.alertModal)(this.$t("aviso"),this.$t("mensajes.e0017")),!1;g.$http.post("api/HyoFichaapreciacion/setFichaApreciacion",{ALUCOD:this.sessionEstudiante.ALUCOD,NEMO:this.sessionEstudiante.NEMO,BIMECOD:String(this.currentPeriodo),ID_TIPO_COMPROMISO:this.form.familia,NUM_ENTREVISTA:Number(this.form.visitas),OBSERVACIONES:this.comentarios[0].MODEL,SIT_FAM:this.comentarios[1].MODEL,ASP_ACADEMICO:this.comentarios[2].MODEL,ASP_CONDUCTUAL:this.comentarios[3].MODEL,OTROS:this.comentarios[4].MODEL}).then(function(e){return(0,T["default"])(o.$t("mensajes.m0064"),"success")}).catch(function(){return(0,T["default"])(o.$t("mensajes.e0006"),"error")})},displayReport:function(){if(""===this.form.familia||""===this.form.visitas||""===this.comentarios[0].MODEL||""===this.comentarios[1].MODEL||""===this.comentarios[2].MODEL||""===this.comentarios[3].MODEL||""===this.comentarios[4].MODEL)(0,_.alertModal)(this.$t("aviso"),this.$t("mensajes.m0020"));else{var o={ANO:(0,U["default"])().ano,ALUCOD:this.sessionEstudiante.ALUCOD,BIMECOD:String(this.currentPeriodo),NEMO:this.sessionEstudiante.NEMO,repcod:"reporteFichaApreciacion"},e=encodeURI("Reporte Ficha Apreciacion");(0,N.exportFilePhp)(o,"intranet/reporte-node/reporte",e)}}},mounted:function(){this.getTipoFamilia()},validations:function(){var o={form:{visitas:{required:y.mw},familia:{required:y.mw}},comentarios:{}};return Object.keys(this.comentarios||{}).forEach(function(e){o.comentarios[e]={MODEL:{required:y.mw}}}),o}},R=t(12807);const w=(0,R.A)(x,[["render",k]]);var j=w}}]);