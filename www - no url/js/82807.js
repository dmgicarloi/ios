"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[82807],{82807:function(e,n,a){a.r(n),a.d(n,{default:function(){return A}});var t=a(61758),o=a(29104),l={class:"row q-gutter-sm"},i={class:"col-xs-12"},r={class:"col-xs-12 q-pa-xs"},s={class:"col-xs-12 q-pa-xs"};function c(e,n){var a=this,c=(0,t.g2)("header-btn"),u=(0,t.g2)("q-input"),d=(0,t.g2)("sie-table"),f=(0,t.g2)("q-card"),p=(0,t.g2)("modal-alertas"),g=(0,t.g2)("modal-obs"),m=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(m,null,{default:(0,t.k6)(function(){return[(0,t.bF)(f,{class:"q-pa-sm"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",l,[(0,t.Lk)("div",i,[(0,t.bF)(c,{name:"Devoluciones Rapidas",buttons:e.headerButtons},null,8,["buttons"])]),(0,t.Lk)("div",r,[(0,t.bF)(u,{modelValue:e.nroIngreso,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.nroIngreso=n}),label:"Nro Ingreso",onKeyup:(0,o.jR)(e.devolver,["enter"])},null,8,["modelValue","onKeyup"])]),(0,t.Lk)("div",s,[(0,t.bF)(d,{ref:"refOper",config:e.configTable,columns:e.fields,context:a,data:e.rowsOperaciones,"show-search":!1,selection:"multiple",css:{height:"654px"}},null,8,["config","columns","data"])])])]}),_:1}),e.openModalAlertas?((0,t.uX)(),(0,t.Wv)(p,{key:0,modelValue:e.openModalAlertas,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.openModalAlertas=n}),operacion:e.config.OPERACION_DEVOLUCION,alertasOperaciones:e.alertasOperaciones,configDB:e.config,"onUpdate:configDB":n[2]||(n[2]=function(n){return e.config=n})},null,8,["modelValue","operacion","alertasOperaciones","configDB"])):(0,t.Q3)("v-if",!0),e.modalObs?((0,t.uX)(),(0,t.Wv)(g,{key:1,modelValue:e.modalObs,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modalObs=n}),titulo:"Agregar observación",operacion:e.config.OPERACION_DEVOLUCION,"onUpdate:operacion":n[4]||(n[4]=function(n){return e.config.OPERACION_DEVOLUCION=n}),currentRow:e.currentRow,configDB:e.config,onSetearLimite:e.setearLimite},null,8,["modelValue","operacion","currentRow","configDB","onSetearLimite"])):(0,t.Q3)("v-if",!0)]}),_:1})}var u=a(76080),d=a.n(u),f=a(45254),p=a.n(f),g=(a(71225),a(39866),a(10239),a(50310),a(5962),a(70199),a(515),a(83190),a(62692),a(7346),a(6123)),m=a(11654),O=a(33777),b={data:function(){return{configTable:{OBS:{component:"button",icon:["write"],write:function(e){this.currentRow=e,this.modalObs=!0},tooltip:{write:"Agregar observación"},dense:!0,flat:!0},FECPREI:{component:"date",editable:!1},FECPREF:{component:"date",editable:!1},FECDEV:{component:"date",editable:!1}},fields:[{name:"NUMINGRESO",label:"# Ingreso",field:"NUMINGRESO",align:"left",width:65},{name:"NOMCOMP",label:"Nombre de Solicitante",field:"NOMCOMP",align:"left",wrap:!0},{name:"NGS_CARGO",label:"NGS/Cargo",field:"NGS_CARGO",align:"left",wrap:!0},{name:"PARTE",label:"Cod. Clasif.",field:"PARTE",align:"left"},{name:"TITULO",label:"Título",field:"TITULO",align:"left",wrap:!0,width:120},{name:"SOLOBIB",label:"SB",field:"SOLOBIB",align:"center"},{name:"PL",label:"PL",field:"PL",align:"center"},{name:"NOMESTADO",label:"Estado",field:"NOMESTADO",align:"left"},{name:"FECRES",label:"Reserva",field:"FECRES",align:"left",wrap:!0},{name:"FECPREI",label:"F. Prestamo",field:"FECPREI",align:"left",wrap:!0},{name:"FECPREF",label:"F. Fin Prestamo",field:"FECPREF",align:"left"},{name:"FECDEV",label:"Devolución",field:"FECDEV",align:"left",wrap:!0},{name:"OBS",label:"Obs",field:"OBS",align:"left"}]}}},v=a(9736),E=a(30640),w=a(66592),I=a(90007),h=a(87410),C={mixins:[b,w.A],components:{QBtn:m.A,sieTable:O.A,QInput:v.A,sieModal:E.A,modalAlertas:I.A,modalObs:h.A,QPage:g.Tu,QCard:g.C$},data:function(){var e=this;return{headerButtons:[{icon:"delete",permiso:">2",label:"Limpiar",click:function(){var n=p()(d()().m(function n(){var a;return d()().w(function(n){while(1)switch(n.n){case 0:a=e.getFilasSelected(["NUMINGRESO"]),e.rowsOperaciones=e.rowsOperaciones.filter(function(e){return!a.includes(e.NUMINGRESO)}),localStorage.setItem("listaDev",JSON.stringify(e.rowsOperaciones)),e.updateIndicator++;case 1:return n.a(2)}},n)}));function a(){return n.apply(this,arguments)}return a}(),tooltip:"Limpiar Listado"},{icon:"email",permiso:">1",label:"Alerta",click:function(){e.openModalAlertas=!0,e.openEnvioAlerta()},tooltip:"Enviar Alerta"}],modalObs:!1,openModalAlertas:!1,rowsOperaciones:[],nroIngreso:null,updateIndicator:0,config:{},operacion:"",alertasOperaciones:[],currentRow:{}}},watch:{updateIndicator:function(e){this.actualizarDevolucion()}},methods:{actualizarDevolucion:function(){var e=this;return p()(d()().m(function n(){var a;return d()().w(function(n){while(1)switch(n.n){case 0:a=localStorage.getItem("listaDev"),e.rowsOperaciones=a?JSON.parse(a):[];case 1:return n.a(2)}},n)}))()},getFilasSelected:function(e){return this.$refs.refOper.rowsSelected(e)},devolver:function(){var e=this;return p()(d()().m(function n(){var a,t,o;return d()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.post("api/OperacionesController/devolucionXNumeroIngreso",{numingreso:e.nroIngreso});case 1:a=n.v,t=a.data.datos[0],o=localStorage.getItem("listaDev")?JSON.parse(localStorage.getItem("listaDev")):[],o.push(t),localStorage.setItem("listaDev",JSON.stringify(o)),e.updateIndicator++;case 2:return n.a(2)}},n)}))()}},created:function(){this.actualizarDevolucion(),this.getConfigOperaciones(),this.operacion=this.config.OPERACION_DEVOLUCION}},S=a(12807);const N=(0,S.A)(C,[["render",c]]);var A=N}}]);