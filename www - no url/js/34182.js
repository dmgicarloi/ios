"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[34182],{34182:function(e,a,o){o.r(a),o.d(a,{default:function(){return Ce}});var n=o(8445),t=o.n(n),r=(o(30683),o(15547),o(61758)),l=o(29104),i=o(58790),s={class:"row items-center"},c={class:"col text-center"},u=["src"],d={class:"row justify-end q-pt-md-lg"},p={class:"row justify-center q-pt-xl"},m=["innerHTML"],O={class:"row q-ma-xs q-col-gutter-sm"},f={class:"col-xs-12 col-sm-6"},_={class:"col-xs-12 col-sm-6"},E={class:"col-xs-12 col-sm-6"},P={class:"col-xs-12 col-sm-6"},g={class:"col-xs-12 col-sm-12"},I={class:"col-xs-12 col-sm-6"},A={class:"col-xs-12 col-sm-6"},b={class:"row justify-between q-pt-md"},N={class:"row q-ma-xs q-col-gutter-sm"},D={class:"col-xs-12 col-sm-6"},v={class:"col-xs-12 col-sm-6"},C={class:"col-xs-12 col-sm-6"},L={class:"col-xs-12 col-sm-6"},h={class:"col-xs-12 col-sm-12"},R={class:"col-xs-12 col-sm-6"},k={class:"row justify-between q-pt-md"},T={class:"row"},M={class:"row justify-between q-pt-md"},w={class:"row q-pt-md"},S={class:"row"},y={class:"row justify-between items-center"},U={class:"q-pa-sm text-center"},F=["src"],V={class:"q-pa-sm text-center"},x=["src"],B={class:"text-no-wrap"},q={class:"row items-center"},$={class:"col text-center"},Q=["src"],G={class:"row items-center"},Y={class:"col h1"},X={class:"row items-center"},j={class:"col h2"},z={class:"row items-center"},W={class:"col h3"},H={class:"row items-center"},K={class:"col h3"},J={class:"row items-center q-py-lg"},Z={key:0,class:"row justify-center"},ee={class:"row items-center progress"},ae={class:"row items-center"},oe={class:"col h2 counter"};function ne(e,a){var o=(0,r.g2)("q-btn"),n=(0,r.g2)("q-step"),ne=(0,r.g2)("q-select"),te=(0,r.g2)("q-input"),re=(0,r.g2)("q-table"),le=(0,r.g2)("q-dialog"),ie=(0,r.g2)("q-item-main"),se=(0,r.g2)("q-item-tile"),ce=(0,r.g2)("q-item"),ue=(0,r.g2)("q-item-separator"),de=(0,r.g2)("q-list"),pe=(0,r.g2)("q-icon"),me=(0,r.g2)("q-spinner"),Oe=(0,r.g2)("q-inner-loading"),fe=(0,r.g2)("q-iframe"),_e=(0,r.g2)("sie-modal"),Ee=(0,r.g2)("q-stepper"),Pe=(0,r.g2)("q-card-section"),ge=(0,r.g2)("q-card"),Ie=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(Ie,{class:"q-pa-sm"},{default:(0,r.k6)(function(){return[(0,r.bF)(ge,{class:"col column"},{default:(0,r.k6)(function(){return[(0,r.bF)(Pe,null,{default:(0,r.k6)(function(){return[e.steps.length>0?((0,r.uX)(),(0,r.Wv)(Ee,{key:0,class:"q-stepper-pci",modelValue:e.step,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.step=a}),animated:"","done-color":"primary","active-color":"secondary",flat:""},{default:(0,r.k6)(function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.steps,function(Ee){return(0,r.uX)(),(0,r.CE)(r.FK,null,[0==Ee.value?((0,r.uX)(),(0,r.Wv)(n,{key:0,name:Ee.value,title:Ee.titulo,ref_for:!0,ref:Ee.value,icon:Ee.icono,done:e.step>Ee.value,"header-nav":"false"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",s,[(0,r.Lk)("div",c,[(0,r.Lk)("img",{src:"".concat(e.sieInfo.host,"/img/dbox.png"),alt:"",id:"dbox",width:"250"},null,8,u)])]),a[24]||(a[24]=(0,r.Lk)("div",{class:"row items-center"},[(0,r.Lk)("div",{class:"col h2-1"},"Bienvenidos al proceso de compra de licencias")],-1)),(0,r.Lk)("div",d,[(0,r.bF)(o,{icon:"arrow_forward",label:"Siguiente",color:"primary",onClick:a[0]||(a[0]=function(a){return e.step=1})})]),(0,r.Lk)("div",p,[(0,r.Lk)("div",{class:"col h4 text-center",innerHTML:e.msg_inicio},null,8,m)])]}),_:1},8,["name","title","icon","done"])):(0,r.Q3)("v-if",!0),1==Ee.value?((0,r.uX)(),(0,r.Wv)(n,{key:1,name:Ee.value,title:Ee.titulo,ref_for:!0,ref:Ee.value,icon:Ee.icono,done:e.step>Ee.value,"header-nav":"false"},{default:(0,r.k6)(function(){return[a[25]||(a[25]=(0,r.Lk)("div",null,"Datos del Padre o Apoderado",-1)),a[26]||(a[26]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("div",O,[(0,r.Lk)("div",f,[(0,r.bF)(ne,{modelValue:e.familia.persona_documento.ID_TIPODOC,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.familia.persona_documento.ID_TIPODOC=a}),"option-label":"ABREVIATURA","option-value":"ID_TIPODOC",label:"Tipo Documento Identidad",options:e.documentos,placeholder:"Tipo de documento",onInput:e.documentoLength},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",_,[(0,r.bF)(te,{modelValue:e.familia.persona_documento.NUMERO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.familia.persona_documento.NUMERO=a}),label:"Número de Documento:",placeholder:"Ingrese Número de Documento",maxlength:e.docLengthP,onBlur:e.searchDatos,onKeyup:(0,l.jR)(e.searchDatos,["enter"])},null,8,["modelValue","maxlength","onBlur","onKeyup"])]),(0,r.Lk)("div",E,[(0,r.bF)(te,{modelValue:e.familia.persona_natural.APELLIDO_PATERNO,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.familia.persona_natural.APELLIDO_PATERNO=a}),label:"Apellido Paterno:",placeholder:"Ingrese Apellido Paterno"},null,8,["modelValue"])]),(0,r.Lk)("div",P,[(0,r.bF)(te,{modelValue:e.familia.persona_natural.APELLIDO_MATERNO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.familia.persona_natural.APELLIDO_MATERNO=a}),label:"Apellido Materno:",placeholder:"Ingrese Apellido Materno"},null,8,["modelValue"])]),(0,r.Lk)("div",g,[(0,r.bF)(te,{modelValue:e.familia.persona_natural.NOMBRES,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.familia.persona_natural.NOMBRES=a}),label:"Nombres:",placeholder:"Ingrese sus Nombres"},null,8,["modelValue"])]),(0,r.Lk)("div",I,[(0,r.bF)(te,{modelValue:e.familia.persona_correo.CORREO,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.familia.persona_correo.CORREO=a}),label:"Correo:",placeholder:"Ingrese Correo Electrónico"},null,8,["modelValue"])]),(0,r.Lk)("div",A,[(0,r.bF)(te,{modelValue:e.familia.persona_celular.NUMERO,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.familia.persona_celular.NUMERO=a}),label:"Celular:",placeholder:"Ingrese Teléfono Celular"},null,8,["modelValue"])])]),(0,r.Lk)("div",b,[(0,r.bF)(o,{icon:"arrow_back",label:"Regresar",color:"primary",onClick:a[8]||(a[8]=function(a){return e.step=0})}),(0,r.bF)(o,{icon:"arrow_forward",label:"Siguiente",color:"primary",onClick:e.savePersona},null,8,["onClick"])])]}),_:1},8,["name","title","icon","done"])):(0,r.Q3)("v-if",!0),2==Ee.value?((0,r.uX)(),(0,r.Wv)(n,{key:2,name:Ee.value,title:Ee.titulo,ref_for:!0,ref:Ee.value,icon:Ee.icono,done:e.step>Ee.value,"header-nav":"false"},{default:(0,r.k6)(function(){return[a[27]||(a[27]=(0,r.Lk)("div",null,"Datos del Estudiante",-1)),a[28]||(a[28]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("div",N,[(0,r.Lk)("div",D,[(0,r.bF)(ne,{modelValue:e.alumno.persona_documento.ID_TIPODOC,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.alumno.persona_documento.ID_TIPODOC=a}),"option-label":"ABREVIATURA","option-value":"ID_TIPODOC",label:"Tipo Documento Identidad",options:e.documentos,placeholder:"Tipo de documento",onInput:e.documentoLength},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",v,[(0,r.bF)(te,{modelValue:e.alumno.persona_documento.NUMERO,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.alumno.persona_documento.NUMERO=a}),label:"Número de Documento:",placeholder:"Ingrese Número de Documento",maxlength:e.docLengthA,onBlur:e.searchDatos,onKeyup:(0,l.jR)(e.searchDatos,["enter"])},null,8,["modelValue","maxlength","onBlur","onKeyup"])]),(0,r.Lk)("div",C,[(0,r.bF)(te,{modelValue:e.alumno.persona_natural.APELLIDO_PATERNO,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.alumno.persona_natural.APELLIDO_PATERNO=a}),label:"Apellido Paterno:",placeholder:"Ingrese Apellido Paterno"},null,8,["modelValue"])]),(0,r.Lk)("div",L,[(0,r.bF)(te,{modelValue:e.alumno.persona_natural.APELLIDO_MATERNO,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.alumno.persona_natural.APELLIDO_MATERNO=a}),label:"Apellido Materno:",placeholder:"Ingrese Apellido Materno"},null,8,["modelValue"])]),(0,r.Lk)("div",h,[(0,r.bF)(te,{modelValue:e.alumno.persona_natural.NOMBRES,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.alumno.persona_natural.NOMBRES=a}),label:"Nombres:",placeholder:"Ingrese sus Nombres"},null,8,["modelValue"])]),(0,r.Lk)("div",R,[(0,r.bF)(te,{modelValue:e.alumno.persona.NOTA1,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.alumno.persona.NOTA1=a}),label:"Colegio:",placeholder:"Nombre del colegio",disable:""},null,8,["modelValue"])])]),(0,r.Lk)("div",k,[(0,r.bF)(o,{icon:"arrow_back",label:"Regresar",color:"primary",onClick:a[15]||(a[15]=function(a){return e.step=1})}),(0,r.bF)(o,{icon:"arrow_forward",label:"Siguiente",color:"primary",onClick:e.nextCarrito},null,8,["onClick"])])]}),_:1},8,["name","title","icon","done"])):(0,r.Q3)("v-if",!0),3==Ee.value?((0,r.uX)(),(0,r.Wv)(n,{key:3,name:Ee.value,title:Ee.titulo,ref_for:!0,ref:Ee.value,icon:Ee.icono,done:e.step>Ee.value,"header-nav":"false"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",T,[(0,r.bF)(re,{class:"col",data:e.carrito.data,columns:e.carrito.columns},null,8,["data","columns"])]),(0,r.Lk)("div",M,[(0,r.bF)(o,{icon:"arrow_back",label:"Regresar",color:"primary",onClick:a[16]||(a[16]=function(a){return e.step=2})}),(0,r.bF)(o,{label:"Pagar",icon:"pay",color:"primary",onClick:e.onPay},null,8,["onClick"])]),(0,r.Lk)("div",w,[(0,r.Lk)("div",null,(0,i.v_)(e.dataColegio.RAZONSOCIAL),1)]),(0,r.Lk)("div",S,[(0,r.Lk)("div",null,(0,i.v_)(e.dataColegio.DIRECCION)+" | "+(0,i.v_)(e.dataColegio.CORREO),1)]),a[34]||(a[34]=(0,r.Lk)("div",{class:"row"},[(0,r.Lk)("span",{class:"q-body-1 text-caption"},"Usamos la pasarela de pago Openpay")],-1)),(0,r.bF)(le,{modelValue:e.modalPagar,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.modalPagar=a}),ok:!1},{title:(0,r.k6)(function(){return t()(a[29]||(a[29]=[(0,r.Lk)("span",null,"Elija Método de pago",-1)]))}),body:(0,r.k6)(function(){return[(0,r.RG)(e.$slots,"default",{},function(){return[(0,r.Lk)("div",y,[(0,r.Lk)("div",U,[(0,r.Lk)("img",{class:"cursor-pointer",src:"".concat(e.sieInfo.host,"/img/pagoefectivo.png"),alt:"",id:"pagoefectivo",width:"250",onClick:a[17]||(a[17]=function(){return e.selectApiPagoEfectivo&&e.selectApiPagoEfectivo.apply(e,arguments)})},null,8,F),a[30]||(a[30]=(0,r.Lk)("p",null,"Código de Pago(CIP)",-1))]),(0,r.Lk)("div",V,[(0,r.Lk)("img",{class:"cursor-pointer",src:"".concat(e.sieInfo.host,"/img/openpay.png"),alt:"",id:"openpay",width:"250",onClick:a[18]||(a[18]=function(){return e.selectApiOpenpay&&e.selectApiOpenpay.apply(e,arguments)})},null,8,x),a[31]||(a[31]=(0,r.Lk)("p",null,"Pago con Tarjeta",-1))])])]})]}),_:3},8,["modelValue"]),(0,r.bF)(le,{modelValue:e.confirmaPago,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.confirmaPago=a}),"stack-buttons":""},{title:(0,r.k6)(function(){return t()(a[32]||(a[32]=[(0,r.Lk)("span",null,"Confirmar el pago a realizar",-1)]))}),body:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(de,{class:"no-border"},{default:(0,r.k6)(function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.carrito.data,function(e){return(0,r.uX)(),(0,r.Wv)(ce,{key:e.CONCOB},{default:(0,r.k6)(function(){return[(0,r.bF)(ie,{class:"label",style:{width:"350px"}},{default:(0,r.k6)(function(){return[(0,r.eW)((0,i.v_)(e.CONDES),1)]}),_:2},1024),(0,r.bF)(se,{class:"label text-right",style:{width:"150px"}},{default:(0,r.k6)(function(){return[(0,r.Lk)("span",B,(0,i.v_)("".concat(e.MONSIG," ").concat(e.PRECIO.toFixed(2))),1)]}),_:2},1024)]}),_:2},1024)}),128)),(0,r.bF)(ue),(0,r.bF)(ce,null,{default:(0,r.k6)(function(){return[(0,r.bF)(ie,{class:"label"},{default:(0,r.k6)(function(){return t()(a[33]||(a[33]=[(0,r.eW)("Total",-1)]))}),_:1}),(0,r.bF)(se,{class:"label"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,i.v_)("".concat(e.monsig," ").concat(e.total.toFixed(2))),1)]}),_:1})]}),_:1})]}),_:1})])]}),buttons:(0,r.k6)(function(a){return[e.selectMetodoOpenpay?((0,r.uX)(),(0,r.Wv)(o,{key:0,style:{"font-weight":"bold","background-color":"rgb(4, 50, 99)"},size:"12px","text-color":"white",label:"Continuar",loading:e.bloqBtn,onClick:e.modoDePago},null,8,["loading","onClick"])):(0,r.Q3)("v-if",!0),e.selectMetodoOpenpay?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.Wv)(o,{key:1,style:{"font-weight":"bold"},size:"12px",color:"amber","text-color":"black",label:"Generar código de pago",loading:e.bloqBtn,onClick:e.modoDePago},null,8,["loading","onClick"]))]}),_:1},8,["modelValue"])]}),_:3},8,["name","title","icon","done"])):(0,r.Q3)("v-if",!0),4==Ee.value?((0,r.uX)(),(0,r.Wv)(n,{key:4,name:Ee.value,title:Ee.titulo,ref_for:!0,ref:Ee.value,icon:Ee.icono,done:e.step>Ee.value,"header-nav":"false"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",q,[(0,r.Lk)("div",$,[(0,r.Lk)("img",{src:"".concat(e.sieInfo.host,"/img/dbox.png"),alt:"",id:"dbox",width:"250"},null,8,Q)])]),(0,r.Lk)("div",G,[(0,r.Lk)("div",Y,(0,i.v_)("Estimado(a) ".concat(e.familia.persona_natural.APELLIDO_PATERNO," ").concat(e.familia.persona_natural.APELLIDO_MATERNO,", ").concat(e.familia.persona_natural.NOMBRES)),1)]),(0,r.Lk)("div",X,[(0,r.Lk)("div",j,(0,i.v_)("Licencia para ".concat(e.alumno.persona_natural.APELLIDO_PATERNO," ").concat(e.alumno.persona_natural.APELLIDO_MATERNO,", ").concat(e.alumno.persona_natural.NOMBRES)),1)]),(0,r.Lk)("div",z,[(0,r.Lk)("div",W,(0,i.v_)("Por favor continúe su compra desde la pasarela de ".concat(e.selectMetodoOpenpay?"OpenPay.":"PagoEfectivo.")),1)]),(0,r.Lk)("div",H,[(0,r.Lk)("div",K,(0,i.v_)("Al finalizar la compra de su licencia se le enviará una notificación a su correo electrónico: ".concat(e.familia.persona_correo.CORREO,".")),1)]),e.estadoPago?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("div",J,[(0,r.bF)(pe,{class:"col",name:"check_circle",color:"positive",size:"100px"})]),a[35]||(a[35]=(0,r.Lk)("div",{class:"row items-center q-pb-lg"},[(0,r.Lk)("div",{class:"col h2"},"El pago se realizó con éxito.")],-1)),e.mostrarComprobante?((0,r.uX)(),(0,r.CE)("div",Z,[(0,r.bF)(o,{label:"Imprimir Comprobante",color:"primary",onClick:e.imprimirComprobante},null,8,["onClick"])])):(0,r.Q3)("v-if",!0)],64)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[a[36]||(a[36]=(0,r.Lk)("div",{class:"row q-pt-lg items-center"},[(0,r.Lk)("div",{class:"col h3"},"Se está verificando el pago. Espere por favor...")],-1)),(0,r.Lk)("div",ee,[(0,r.bF)(Oe,{visible:""},{default:(0,r.k6)(function(){return[(0,r.bF)(me,{color:"primary",name:"dots",size:"100px"})]}),_:1})]),(0,r.Lk)("div",ae,[(0,r.Lk)("div",oe,(0,i.v_)("".concat(e.counter," seg.")),1)])],64)),(0,r.bF)(_e,{class:"cip-modal",modelValue:e.modalCip,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.modalCip=a}),header:!1,column:"",footer:!1,ok:!1},{default:(0,r.k6)(function(){return[(0,r.bF)(fe,{class:"col",src:e.frameUrl},null,8,["src"]),(0,r.bF)(o,{class:"absolute-top-right bg-white text-black",icon:"close",round:"",style:{"margin-right":"10px","margin-top":"10px"},size:"sm",onClick:a[21]||(a[21]=function(a){return e.modalCip=!1})})]}),_:1},8,["modelValue"])]}),_:1},8,["name","title","icon","done"])):(0,r.Q3)("v-if",!0)],64)}),256))]}),_:3},8,["modelValue"])):(0,r.Q3)("v-if",!0)]}),_:3})]}),_:3})]}),_:3})}var te=o(57008),re=o.n(te),le=o(76080),ie=o.n(le),se=o(45254),ce=o.n(se),ue=(o(39866),o(10239),o(50310),o(90095),o(11777),o(83190),o(52776),o(44264),o(62692),o(2369),o(81813),o(13715),o(6123)),de=o(88567),pe=o(95718),me=o(41482),Oe=o(57668),fe=o(56089),_e=o(41615),Ee=o(80660),Pe=o(10213),ge=o(65848),Ie=o(18105),Ae=o(982),be=30,Ne={components:{sieInfo:Oe["default"],QTable:ue.kH,QTh:ue.EJ,QTr:ue.qh,QTd:ue.Ef,QTableColumns:ue.$s,QPopupEdit:ue.GT,QIframe:fe.A,QCard:de.A,QCardSection:pe.A,$http:Ee.$http,alert:Pe.alert,confirm:Pe.confirm,QDialog:ue.OQ,openURL:ue.KN,QInnerLoading:ue.SQ,QSpinner:me.A,QPage:ue.Tu,QStepper:ue.jn,QStep:ue.q$,QBtn:ue.Il,QSelect:ue.Si,QInput:ue.ie,QList:ue.Mb,QItem:ue.H0,QItemMain:ue.mF,QItemTile:ue.lp,QItemSeparator:ue.CL,QIcon:ue.bP},mixins:[ge.A],data:function(){return{sieInfo:(0,Oe["default"])(),step:0,steps:[],familia:{persona:{TIPO_PERSONA:_e["default"].PERSONA_NATURAL},persona_natural:{APELLIDO_PATERNO:"",APELLIDO_MATERNO:"",NOMBRES:"",SEXO:_e["default"].SEXO.MASCULINO,FECHA_NACIMIENTO:(0,Ie.Ay)(new Date,"DD/MM/YYYY")},persona_celular:{TIPO_TELEFONO:2,PRINCIPAL:1,NUMERO:""},persona_documento:{AUTOGENERADO:0,ID_TIPODOC:_e["default"].TIPO_DOCUMENTO_DNI,NUMERO:""},persona_correo:{CORREO:"",PRINCIPAL:1},persona_perfil:{ID_PERFIL:4}},alumno:{persona:{TIPO_PERSONA:_e["default"].PERSONA_NATURAL,NOTA1:"America de San Miguel"},persona_natural:{APELLIDO_PATERNO:"",APELLIDO_MATERNO:"",NOMBRES:"",SEXO:_e["default"].SEXO.MASCULINO},persona_documento:{AUTOGENERADO:0,ID_TIPODOC:_e["default"].TIPO_DOCUMENTO_DNI,NUMERO:""},persona_perfil:{ID_PERFIL:1,CODIGO:null},persona_subcliente:{ID_PERFIL:4,ID_PERSONA:null,ID_PERFIL_SUBCLIENTE:1,ID_PERSONA_SUBCLIENTE:null,ID_COMPROBANTE:3}},mensajes:{I:"Bienvenidos a la plataforma para realizar la compra de licencia"},documentos:[],dataColegio:{},carrito:{data:[],columns:[{name:"NOMBRE",label:this.$t("nombres"),field:"NOMBRE",align:"left",sortable:!0},{name:"CONDES",label:this.$t("cobros.concepto"),field:"CONDES",align:"center",sortable:!0},{name:"MONSIG",label:this.$t("moneda"),field:"MONSIG",align:"center",sortable:!0},{name:"PRECIO",label:this.$t("cobros.monto"),field:"PRECIO",align:"center",sortable:!1,format:function(e){return e.toFixed(2)}},{name:"CANTIDAD",label:this.$t("cantidad"),field:"CANTIDAD",align:"center",sortable:!1}]},confirmaPago:!1,selectMetodoOpenpay:!0,bloqBtn:!1,modalPagar:!1,ID_PERSONA:null,ID_PERSONA_ALUMNO:null,ID_PAGOEFECTIVO:7,ID_OPENPAY:8,TIPO_DEUDA_OPCIONAL:2,TIPPER_ALUMNO:1,BANCO_OPENPAY:"0019",BANCO_PAGOEFECTIVO:"0017",P_PAGOEFECTIVO:1,P_OPENPAY:1,PERFIL_CLIENTE:4,PERFIL_ALUMNO:1,modalCip:!1,frameUrl:"",keypago:[],estadoPago:!1,counter:be,codigo_pago:null,pago_completo:!1,msg_inicio:'En caso tengas cualquier duda y/o inquietud, puedes enviarnos un correo a\n                  <a href="mailto:informes@dbox.com.pe">informes@dbox.com.pe</a> y con gusto despejamos tu duda a la brevedad.<br/>\n                  Para poder tener una compra exitosa, es necesario deshabilitar el bloqueo de ventanas emergentes. Gracias.',mostrarComprobante:!1,comprobante:{}}},computed:{total:function(){return this.carrito.data[0]?this.carrito.data[0].PRECIO:0},monsig:function(){return this.carrito.data[0]?this.carrito.data[0].MONSIG:""},docLengthP:function(){return this.familia.persona_documento.ID_TIPODOC===_e["default"].TIPO_DOCUMENTO_DNI?8:this.familia.persona_documento.ID_TIPODOC===_e["default"].TIPO_DOCUMENTO_RUC?11:20},docLengthA:function(){return this.alumno.persona_documento.ID_TIPODOC===_e["default"].TIPO_DOCUMENTO_DNI?8:this.alumno.persona_documento.ID_TIPODOC===_e["default"].TIPO_DOCUMENTO_RUC?11:20}},methods:{getConstantes:function(){var e=this;return ce()(ie()().m(function a(){var o,n;return ie()().w(function(a){while(1)switch(a.n){case 0:return o={ID_CONSTANTE:[_e["default"].CONSTANTES_SISTEMA.P_PAGOEFECTIVO,_e["default"].CONSTANTES_SISTEMA.P_OPENPAY]},a.n=1,_e["default"].API_CONSTANTES_SISTEMAS(o);case 1:n=a.v,e.P_PAGOEFECTIVO=1===Number(n.P_PAGOEFECTIVO),e.P_OPENPAY=1===Number(n.P_OPENPAY);case 2:return a.a(2)}},a)}))()},getDocumentos:function(){var e=this;return ce()(ie()().m(function a(){var o;return ie()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Ee.$http.get("api/personaController/getTipoDocumentoIdentidad");case 1:o=a.v,e.documentos=o;case 2:return a.a(2)}},a)}))()},documentoLength:function(){this.familia.persona_documento.NUMERO=""},nextCarrito:function(){var e=this;return ce()(ie()().m(function a(){var o;return ie()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.savePersonaEstudiante();case 1:if(3!==e.step){a.n=3;break}return e.carrito.data=[],a.n=2,Ee.$http.get("api/tiendaOnline/getTipoCobro",{params:{parametros:{ID_TIPOCOBRO:8}}});case 2:o=a.v,e.carrito.data.push(re()(re()({},o),{NOMBRE:"".concat(e.alumno.persona_natural.APELLIDO_PATERNO," ").concat(e.alumno.persona_natural.APELLIDO_MATERNO,", ").concat(e.alumno.persona_natural.NOMBRES),PADRE:"".concat(e.familia.persona_natural.APELLIDO_PATERNO," ").concat(e.familia.persona_natural.APELLIDO_MATERNO,", ").concat(e.familia.persona_natural.NOMBRES),CANTIDAD:1}));case 3:return a.a(2)}},a)}))()},modoDePago:function(){this.confirmaPago=!1,this.selectMetodoPago===this.ID_OPENPAY?this.generarCargoOpenpay():this.generarCip()},selectApiPagoEfectivo:function(){this.modalPagar=!1,this.selectMetodoPago=this.ID_PAGOEFECTIVO,this.confirmaPago=!0,this.selectMetodoOpenpay=!1},selectApiOpenpay:function(){this.modalPagar=!1,this.selectMetodoPago=this.ID_OPENPAY,this.confirmaPago=!0,this.selectMetodoOpenpay=!0},generarCargoOpenpay:function(){var e=this;return ce()(ie()().m(function a(){var o,n,t,r,l,i,s,c,u;return ie()().w(function(a){while(1)switch(a.p=a.n){case 0:return o=new Date,n={bancod:e.BANCO_OPENPAY},t=[],e.carrito.data.forEach(function(a,r){0===r&&(n.moncod=a.MONCOD,n.moneda=a.MONEDA),t.push({anocob:o.getFullYear(),concob:a.CONCOB,mescob:(o.getMonth()+1).toString().padStart(2,0),moncod:a.MONCOD,fecven:(0,Ie.Ay)(o,"YYYY-MM-DD"),cantidad:1,concepto:a.CONDES,tipo_deuda:e.TIPO_DEUDA_OPCIONAL,preuni:a.PRECIO,monto:a.PRECIO,id_persona:e.ID_PERSONA_ALUMNO,id_perfil:e.PERFIL_ALUMNO})}),a.n=1,e.getServicioPasarelaPago(n);case 1:return r=a.v,l={usuario:"SIE",id_servicio:r.ID_SERVICIO,cobro:{moneda:r.MONISO,alucod:e.alumno.persona_documento.NUMERO,tipper:e.TIPPER_ALUMNO,deudas:t}},a.p=2,a.n=3,Ee.$http.get("api/tiendaOnline/getCobroPendiente",{params:{dni:e.alumno.persona_documento.NUMERO}});case 3:if(i=a.v,!i.length){a.n=4;break}s=i[0],e.modalPagar=!1,e.deudas=[],e.confirmaPago=!1,e.step=4,e.codigo_pago=s.CODIGO_PAGO,window.open(s.URL_PAGO,"OpenPay","toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1,width=800,height=800,left = 390,top = 50"),a.n=6;break;case 4:return a.n=5,Ee.$http.post("".concat(location.origin,"/webservice/servicio-openpay/cargar-token/"),l);case 5:c=a.v,e.modalPagar=!1,e.deudas=[],e.confirmaPago=!1,e.step=4,e.codigo_pago=c.data.order_id,window.open(c.data.url,"OpenPay","toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1,width=800,height=800,left = 390,top = 50");case 6:e.contador(),a.n=8;break;case 7:a.p=7,u=a.v,e.modalPagar=!1,(0,Ae["default"])(u.mensaje,"error");case 8:return a.a(2)}},a,null,[[2,7]])}))()},cerrarPe:function(){var e=this;return ce()(ie()().m(function a(){return ie()().w(function(a){while(1)switch(a.n){case 0:e.step=4;case 1:return a.a(2)}},a)}))()},generarCip:function(){var e=this;return ce()(ie()().m(function a(){var o,n,t;return ie()().w(function(a){while(1)switch(a.n){case 0:if(e.bloqBtn=!0,o=new Date,!(e.carrito.data.length>0)){a.n=3;break}if(n=e.carrito.data[0],!e.P_OPENPAY||!e.P_PAGOEFECTIVO){a.n=2;break}return a.n=1,e.getServicioPasarelaPago({bancod:e.BANCO_PAGOEFECTIVO,moneda:n.MONEDA,moncod:n.MONCOD});case 1:t=a.v,n.ID_SERVICIO=t.ID_SERVICIO;case 2:n.ID_PERSONA=e.ID_PERSONA_ALUMNO,n.ID_PERFIL=e.PERFIL_ALUMNO,Ee.$http.post("api/ServicioPagoTesoreriaController/postCip",{datos:{codigo:e.alumno.persona_documento.NUMERO,tipper:e.TIPPER_ALUMNO,usucod:"SIE",id_cobranza:8,id_operacion:""},deudas:[{CONCOB:n.CONCOB,CONCEPTO:n.CONDES,ANOCOB:o.getFullYear(),MESCOB:(o.getMonth()+1).toString().padStart(2,0),FECVEN:(0,Ie.Ay)(o,"YYYY-MM-DD"),FECHAVEN:(0,Ie.Ay)(o,"YYYY-MM-DD"),CANTIDAD:n.CANTIDAD,MONCOD:n.MONCOD,MONEDA:n.MONISO,MONSIG:n.MONSIG,PREUNI:n.PRECIO,MONTO:n.PRECIO,MORA:0,TIPO_COBRO:8,ID_SERVICIO:n.ID_SERVICIO,TIPO_DEUDA:e.TIPO_DEUDA_OPCIONAL,ID_PERSONA:n.ID_PERSONA,ID_PERFIL:n.ID_PERFIL}]}).then(function(a){a.cipUrl?((0,Ae["default"])("CIP generado correctamente","success"),e.carrito.data=[],e.confirmaPago=!1,e.bloqBtn=!1,setTimeout(function(){},1e3),e.openPagePago(a.cipUrl)):(e.bloqBtn=!1,(0,Ae["default"])(a.error.message,"error"))}).catch(function(a){a.error&&a.error.custom?(e.bloqBtn=!1,(0,Ae["default"])(a.error.message,"error")):(0,Ae["default"])(a,"error")}),a.n=4;break;case 3:(0,Ae["default"])("No hay productos en el carrito","error");case 4:return a.a(2)}},a)}))()},openPagePago:function(e){if("string"===typeof e&&""!==e){this.step=4;var a=e.replace(/https?\:/,window.location.protocol);["cordova","capacitor"].includes("capacitor")?(0,ue.KN)(a):(this.modalCip=!0,this.frameUrl=a)}else(0,Ae["default"])("No se encontró datos de URL","warning")},getServicioPasarelaPago:function(e){return ce()(ie()().m(function a(){var o;return ie()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Ee.$http.get("api/cobroController/getServicios",{params:{parametros:e}});case 1:if(o=a.v,0!==o.length){a.n=2;break}(0,Ae["default"])("No se ha encontrado servicio para OPENPAY","error"),a.n=3;break;case 2:return a.a(2,o[0]);case 3:return a.a(2)}},a)}))()},savePersona:function(){var e=this;return ce()(ie()().m(function a(){var o,n,t,r;return ie()().w(function(a){while(1)switch(a.p=a.n){case 0:if(!e.familia.persona_correo.CORREO.includes("@gmail.com")){a.n=1;break}return e.$notify("Para tener una buena experiencia de compra, le recomendamos no usar correo Gmail. Gracias.","warning"),a.a(2);case 1:if(e.familia.persona_natural.APELLIDO_PATERNO&&e.familia.persona_natural.APELLIDO_PATERNO){a.n=2;break}e.$notify("Debe ingresar los apellidos del cliente","warning"),a.n=10;break;case 2:if(e.familia.persona_documento.ID_TIPODOC!==_e["default"].TIPO_DOCUMENTO_DNI||_e["default"].VALIDAR_DNI(e.familia.persona_documento.NUMERO)){a.n=3;break}e.$notify("Debe el tipo de documento","warning"),a.n=10;break;case 3:if(e.familia.persona_documento.NUMERO){a.n=4;break}e.$notify("Debe ingresar el número de documento","warning"),a.n=10;break;case 4:if(e.familia.persona_correo.CORREO){a.n=5;break}e.$notify("Debe ingresar el correo electrónico","warning"),a.n=10;break;case 5:if(e.familia.persona_natural.NOMBRES){a.n=6;break}e.$notify("Debe ingresar el nombre del cliente","warning"),a.n=10;break;case 6:return o={persona_natural:e.familia.persona_natural,persona_celular:e.familia.persona_celular,persona_documento:e.familia.persona_documento,persona_correo:e.familia.persona_correo,persona_perfil:e.familia.persona_perfil,persona:e.familia.persona},a.p=7,a.n=8,Ee.$http.post("api/tiendaOnline/addPersonaPagante",{persona:o});case 8:n=a.v,e.ID_PERSONA=n.data.ID_PERSONA,e.alumno.persona_subcliente.ID_PERSONA=n.data.ID_PERSONA,e.step=2,e.$notify(n.message,"success"),a.n=10;break;case 9:a.p=9,r=a.v,t=r.error,e.$notify(t.message,"error");case 10:return a.a(2)}},a,null,[[7,9]])}))()},savePersonaEstudiante:function(){var e=this;return ce()(ie()().m(function a(){var o,n,t,r;return ie()().w(function(a){while(1)switch(a.p=a.n){case 0:if(e.alumno.persona_natural.APELLIDO_PATERNO&&e.alumno.persona_natural.APELLIDO_PATERNO){a.n=1;break}e.$notify("Debe ingresar los apellidos del estudiante","warning"),a.n=9;break;case 1:if(e.alumno.persona_documento.ID_TIPODOC!==_e["default"].TIPO_DOCUMENTO_DNI||_e["default"].VALIDAR_DNI(e.alumno.persona_documento.NUMERO)){a.n=2;break}e.$notify("Debe el tipo de documento","warning"),a.n=9;break;case 2:if(e.alumno.persona_documento.NUMERO){a.n=3;break}e.$notify("Debe ingresar el número de documento","warning"),a.n=9;break;case 3:if(e.alumno.persona_natural.NOMBRES){a.n=4;break}e.$notify("Debe ingresar el nombre del estudiante","warning"),a.n=9;break;case 4:if(e.alumno.persona.NOTA1){a.n=5;break}e.$notify("Debe ingresar el nombre del colegio","warning"),a.n=9;break;case 5:return e.alumno.persona_perfil.CODIGO=e.alumno.persona_documento.NUMERO,o={persona:e.alumno.persona,persona_natural:e.alumno.persona_natural,persona_documento:e.alumno.persona_documento,persona_perfil:e.alumno.persona_perfil,personaMode:e.alumno.personaMode,persona_subcliente:e.alumno.persona_subcliente},a.p=6,a.n=7,Ee.$http.post("api/tiendaOnline/addPersonaPagante",{persona:o});case 7:n=a.v,e.$notify(n.message,"success"),e.ID_PERSONA_ALUMNO=n.data.ID_PERSONA,e.step=3,a.n=9;break;case 8:a.p=8,r=a.v,t=r.error,e.$notify(t.message,"error");case 9:return a.a(2)}},a,null,[[6,8]])}))()},searchDatos:function(){var e=this;return ce()(ie()().m(function a(){var o,n,t,r,l,i;return ie()().w(function(a){while(1)switch(a.n){case 0:return o=1===e.step?e.familia.persona_documento.ID_TIPODOC:e.alumno.persona_documento.ID_TIPODOC,n=1===e.step?e.familia.persona_documento.NUMERO:e.alumno.persona_documento.NUMERO,t=e.sieInfo.api+"/utilidad/identificacion/"+o+"/"+n,a.n=1,Ee.$http.get(t);case 1:if(r=a.v,1!==e.step){a.n=3;break}return a.n=2,Ee.$http.get("api/tiendaOnline/getDatosPersona",{params:{dni:n}});case 2:l=a.v,l.length&&(i=l[0],e.familia.persona_celular.NUMERO=i.CELULAR_PADRE,e.familia.persona_correo.CORREO=i.CORREO_PADRE,e.alumno.persona_natural.APELLIDO_MATERNO=i.APEMAT_HIJO,e.alumno.persona_natural.APELLIDO_PATERNO=i.APEPAT_HIJO,e.alumno.persona_natural.NOMBRES=i.NOMBRES_HIJO,e.alumno.persona_documento.ID_TIPODOC=i.TIPODOC_HIJO,e.alumno.persona_documento.NUMERO=i.NRODOC_HIJO);case 3:r?1===e.step?(e.familia.persona_natural.APELLIDO_PATERNO=r.APELLIDO_PATERNO,e.familia.persona_natural.APELLIDO_MATERNO=r.APELLIDO_MATERNO,e.familia.persona_natural.NOMBRES=r.NOMBRES):(e.alumno.persona_natural.APELLIDO_PATERNO=r.APELLIDO_PATERNO,e.alumno.persona_natural.APELLIDO_MATERNO=r.APELLIDO_MATERNO,e.alumno.persona_natural.NOMBRES=r.NOMBRES):(0,Ae["default"])("No se encontró información con el numero de documento","warnings");case 4:return a.a(2)}},a)}))()},onPay:function(){var e=this;return ce()(ie()().m(function a(){return ie()().w(function(a){while(1)switch(a.n){case 0:e.P_PAGOEFECTIVO&&e.P_OPENPAY?e.modalPagar=!0:e.P_OPENPAY?e.selectApiOpenpay():e.P_PAGOEFECTIVO?e.selectApiPagoEfectivo():e.$notify("Los medios de pago no están disponibles. Comunicarse con su institución educativa.","error");case 1:return a.a(2)}},a)}))()},isPagado:function(){var e=this;return ce()(ie()().m(function a(){var o,n;return ie()().w(function(a){while(1)switch(a.n){case 0:if(!e.codigo_pago){a.n=2;break}return a.n=1,Ee.$http.get("api/tiendaOnline/getEstadoCobro",{params:{parametros:{codigo_pago:e.codigo_pago}}});case 1:if(o=a.v,n=o.estado,e.estadoPago=n,!e.estadoPago){a.n=2;break}return a.n=2,e.getComprobante(e.ID_PERSONA_ALUMNO);case 2:return a.a(2)}},a)}))()},getComprobante:function(e){var a=this;return ce()(ie()().m(function o(){var n;return ie()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Ee.$http.get("api/tiendaOnline/getComprobante",{params:{id_persona_sub:e}});case 1:n=o.v,n.length&&(a.mostrarComprobante=!0,a.comprobante=n[0]);case 2:return o.a(2)}},o)}))()},imprimirComprobante:function(){var e=this.sieInfo.origin,a=this.comprobante,o=a.NUMPAG,n=a.NUMTAL;_e["default"].IMPRIMIR_COMPROBANTE(e,n,o)},contador:function(){var e,a=this;e||(e=setInterval(ce()(ie()().m(function e(){return ie()().w(function(e){while(1)switch(e.n){case 0:if(a.pago_completo){e.n=3;break}if(0!==a.counter){e.n=2;break}return e.n=1,a.isPagado();case 1:a.estadoPago?a.pago_completo=!0:a.counter=be,e.n=3;break;case 2:a.counter--;case 3:return e.a(2)}},e)})),1e3))}},created:function(){var e=this;return ce()(ie()().m(function a(){var o,n,r;return ie()().w(function(a){while(1)switch(a.n){case 0:return e.getDocumentos(),e.documentoLength(),e.getConstantes(),e.steps=[{value:0,titulo:"Inicio",icono:"home",mensaje:e.mensajes["I"]},{value:1,titulo:"Padre o Apoderado",icono:"person"},{value:2,titulo:"Estudiante",icono:"person"},{value:3,titulo:"Pagar",icono:"pay"},{value:4,titulo:"Finalizado",icono:"logout"}],a.n=1,Ee.$http.get("api/HyoColegios/getDataColegio",{params:{fields:["direccion","telefono","correo"]}});case 1:o=a.v,o.length>0&&(n=t()(o),r=n[0],e.dataColegio=r,e.dataColegio.RAZONSOCIAL="DBOX S.A.C");case 2:return a.a(2)}},a)}))()}},De=o(12807);const ve=(0,De.A)(Ne,[["render",ne]]);var Ce=ve}}]);