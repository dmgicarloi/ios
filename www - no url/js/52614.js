"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[52614],{52614:function(e,n,a){a.r(n),a.d(n,{default:function(){return N}});var l=a(8445),t=a.n(l),o=a(61758),i=a(58790),r={key:0,class:"col"},u={class:"row"},s={class:"col"};function d(e,n){var a=(0,o.g2)("q-alert"),l=(0,o.g2)("sie-select"),d=(0,o.g2)("q-tab"),c=(0,o.g2)("q-table"),f=(0,o.g2)("q-tab-pane"),p=(0,o.g2)("q-td"),m=(0,o.g2)("q-input"),g=(0,o.g2)("q-field"),b=(0,o.g2)("q-popup-edit"),C=(0,o.g2)("q-tr"),O=(0,o.g2)("q-tabs"),E=(0,o.g2)("q-card"),D=(0,o.g2)("importar");return(0,o.uX)(),(0,o.Wv)(D,{url:e.url,urlxls:e.urlExp,"have-export":"",onImport:e.loadTemplate,onProcess:e.procesar,showHelpText:!e.itemsDeudas.length},{helptext:(0,o.k6)(function(){return t()(n[3]||(n[3]=[(0,o.Lk)("dd",null,"- Primero exportar la plantilla",-1),(0,o.Lk)("dd",null,"- No modificar el archivo generado por el sistema",-1),(0,o.Lk)("dd",null,"- No insertar columnas ni filas",-1),(0,o.Lk)("dd",null,"- Solo llenar la información solicitada",-1)]))}),grid:(0,o.k6)(function(){return[e.itemsDeudas.length?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(a,{class:"q-mb-sm",type:"warning",icon:"warning"},{default:(0,o.k6)(function(){return t()(n[4]||(n[4]=[(0,o.eW)("Verificar que la información este correcta antes de proceder con la importación",-1)]))}),_:1}),(0,o.bF)(E,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",u,[(0,o.Lk)("div",s,[(0,o.bF)(l,{class:"float-right q-mr-sm q-mt-sm",type:"outlined",modelValue:e.anio,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.anio=n}),options:e.listaAnios,val:"value",label:"label",placeholder:"Año de Cobro"},null,8,["modelValue","options"])])]),(0,o.bF)(O,{inverted:""},{title:(0,o.k6)(function(){return[(0,o.bF)(d,{default:"",label:"Deudas",name:"tab-1"}),(0,o.bF)(d,{label:"Configuración",name:"tab-2"})]}),default:(0,o.k6)(function(){return[(0,o.bF)(f,{name:"tab-1"},{default:(0,o.k6)(function(){return[(0,o.bF)(c,{data:e.itemsDeudas,columns:e.columns,"row-key":"alucod",pagination:e.pagination,"onUpdate:pagination":n[1]||(n[1]=function(n){return e.pagination=n}),"rows-per-page-options":[0],"hide-bottom":""},null,8,["data","columns","pagination"])]}),_:1}),(0,o.bF)(f,{name:"tab-2"},{default:(0,o.k6)(function(){return[(0,o.bF)(c,{data:e.itemsConf,columns:e.columnsConf,"row-key":"alucod",pagination:e.paginationConf,"onUpdate:pagination":n[2]||(n[2]=function(n){return e.paginationConf=n}),"rows-per-page-options":[0],"hide-bottom":""},{body:(0,o.k6)(function(e){return[(0,o.bF)(C,{props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(p,{key:"MESCOB",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.MESCOB),1)]}),_:2},1032,["props"]),(0,o.bF)(p,{key:"DIAVEN",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.DIAVEN),1),(0,o.bF)(b,{modelValue:e.row.DIAVEN,"onUpdate:modelValue":function(n){return e.row.DIAVEN=n}},{default:(0,o.k6)(function(){return[(0,o.bF)(g,{count:""},{default:(0,o.k6)(function(){return[(0,o.bF)(m,{modelValue:e.row.DIAVEN,"onUpdate:modelValue":function(n){return e.row.DIAVEN=n}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),(0,o.bF)(p,{key:"CONCOB",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.CONCOB),1)]}),_:2},1032,["props"]),(0,o.bF)(p,{key:"MONEDA",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.MONEDA),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1})]}),_:1})]}),_:1})])):(0,o.Q3)("v-if",!0)]}),_:1},8,["url","urlxls","onImport","onProcess","showHelpText"])}a(10239);var c=a(6123),f=a(24729),p=a(982),m=a(46267),g=a(80340),b=a(93616),C=a(57668),O=a(80660),E={components:{QTable:c.kH,QTr:c.qh,QTd:c.Ef,QTabs:c.uw,QTab:c.zu,QTabPane:c.dg,QPopupEdit:c.GT,QAlert:c.ex,Dialog:f.A,sieVacio:g.A,sieSelect:b.A,sieInfo:C["default"],notify:p["default"],importar:m.A,QCard:c.C$,QField:c.Om,QInput:c.ie},data:function(){return{itemsDeudas:[],itemsConf:[],url:"api/HyoExcel/cargarDataDeudas",urlExp:"/".concat(O.API_LMS,"/api/HyoExcel/exportDataAlumnoDeuda"),anio:(0,C["default"])().ano,columns:[{name:"ALUCOD",label:"CÓDIGO DE ESTUDIANTE",field:"ALUCOD",align:"center"},{name:"NOMCOMP",label:"NOMBRE COMPLETO",field:"NOMCOMP",align:"left"},{name:"INSTRUCOD",label:"I",field:"INSTRUCOD",align:"center"},{name:"GRADOCOD",label:"G",field:"GRADOCOD",align:"center"},{name:"SECCIONCOD",label:"S",field:"SECCIONCOD",align:"center"},{name:"ENE",label:"ENE",field:"ENE",align:"center"},{name:"FEB",label:"FEB",field:"FEB",align:"center"},{name:"MAR",label:"MAR",field:"MAR",align:"center"},{name:"ABR",label:"ABR",field:"ABR",align:"center"},{name:"MAY",label:"MAY",field:"MAY",align:"center"},{name:"JUN",label:"JUN",field:"JUN",align:"center"},{name:"JUL",label:"JUL",field:"JUL",align:"center"},{name:"AGO",label:"AGO",field:"AGO",align:"center"},{name:"SEP",label:"SEP",field:"SEP",align:"center"},{name:"OCT",label:"OCT",field:"OCT",align:"center"},{name:"NOV",label:"NOV",field:"NOV",align:"center"},{name:"DIC",label:"DIC",field:"DIC",align:"center"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:2e4},columnsConf:[{name:"MESCOB",label:"MES DE COBRO",field:"MESCOB",align:"center"},{name:"DIAVEN",label:"FECHA DE VENCIMIENTO",field:"DIAVEN",align:"center"},{name:"CONCOB",label:"CONCEPTO DE COBRO",field:"CONCOB",align:"center"},{name:"MONEDA",label:"MONEDA",field:"MONEDA",align:"center"}],paginationConf:{sortBy:null,descending:!1,page:1,rowsPerPage:2e4}}},computed:{listaAnios:function(){var e=[],n=parseInt((0,C["default"])().ano),a=n-5;while(n>=a)e.push({label:n,value:n}),n-=1;return e}},methods:{loadTemplate:function(e){var n=e.json;this.itemsDeudas=n.data,this.itemsConf=n.conf},procesar:function(){var e=this;this.itemsDeudas.length>0&&this.itemsConf.length>0?this.$q.dialog({title:"¿Desea continuar con el proceso de importación?",ok:"Procesar",cancel:"Cancelar"}).onOk(function(){var n={deudas:e.itemsDeudas,config:e.itemsConf};e.$http.post("api/HyoMigracion/migrarDeudas",{data:n,anio:e.anio}).then(function(e){(0,p["default"])(e.json.message,"success")}).catch(function(e){(0,p["default"])(e.error.message,"error")})}):this.$q.dialog({title:"Aviso",message:"No hay información para importar",ok:"Aceptar"})}}},D=a(12807);const A=(0,D.A)(E,[["render",d]]);var N=A}}]);