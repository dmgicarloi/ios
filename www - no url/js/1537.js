"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[1537],{1537:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ae}});t(56285);var n=t(61758),o=t(58790),i=t(29104),r={class:"row"},l={class:"col-xs-12 col-sm-3 col-md-2"},c={class:"col"},s={class:"col q-pl-xs"},u={class:"col"},d={key:0,class:"col q-pl-xs"},f={key:1,class:"col q-pl-xs"},p=["instrucod"],m={class:"col-xs-12"};function b(e,a){var t=this,b=(0,n.g2)("header-btn"),h=(0,n.g2)("q-search"),g=(0,n.g2)("sie-table"),T=(0,n.g2)("sedes"),v=(0,n.g2)("areas-institucionales"),C=(0,n.g2)("grados"),w=(0,n.g2)("tablastablas"),A=(0,n.g2)("hojasiagie"),S=(0,n.g2)("formulario"),D=(0,n.g2)("sie-modal"),k=(0,n.g2)("sie-upload"),E=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(E,{class:"q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(b,{name:e.title,buttons:e.buttons},null,8,["name","buttons"]),(0,n.Lk)("div",r,[(0,n.Lk)("div",l,[(0,n.bF)(g,{class:"q-px-sm q-pt-sm",selection:"single",context:t,permiso:"> 1",css:"height: calc(100vh - 150px)",search:"Buscar","save-cells":"",columns:e.columnTablaMaster,onRowSelected:e.rowClickedMaster,data:e.rowData,config:e.configMaster},{top:(0,n.k6)(function(t){return[(0,n.Lk)("div",c,[(0,n.bF)(h,{"hide-underline":"",color:"secondary",modelValue:e.filtroTablaMaster,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.filtroTablaMaster=a})},null,8,["modelValue"])])]}),_:1},8,["columns","onRowSelected","data","config"])]),(0,n.Lk)("div",s,[(0,n.bo)((0,n.Lk)("div",{class:(0,o.C4)({row:e.isTablasAbajo})},[(0,n.bF)(g,{class:"q-px-sm q-pt-sm",ref:"tablasdetablas",selection:"single",context:t,permiso:"> 1",css:e.setCssTablasAbajo,search:"Buscar","save-cells":"",columns:e.columnsTabla,onRowSelected:e.clickTr,data:e.dataTabla,config:e.configTabla},{top:(0,n.k6)(function(t){return[(0,n.Lk)("div",u,[(0,n.bF)(h,{"hide-underline":"",color:"secondary",modelValue:e.filtroTabla,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.filtroTabla=a})},null,8,["modelValue"])])]}),_:1},8,["css","columns","onRowSelected","data","config"])],2),[[i.aG,"0081"!==e.tabcod]]),e.isTablasAbajo?((0,n.uX)(),(0,n.Wv)(T,{key:0,ref:"sedes"},null,512)):(0,n.Q3)("v-if",!0),"0081"===e.tabcod?((0,n.uX)(),(0,n.Wv)(v,{key:1,ref:"refAreasInstitucionales","class-page":{},"show-header":!1},null,512)):(0,n.Q3)("v-if",!0)]),"grados"===e.name&&e.instrucod?((0,n.uX)(),(0,n.CE)("div",d,[(0,n.bF)(C,{instrucod:e.instrucod,ref:"grados"},null,8,["instrucod"])])):(0,n.Q3)("v-if",!0),"tablastablas"===e.name?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(w,{princod:e.princod,ref:"tablastablas",soloLectura:e.soloLectura},null,8,["princod","soloLectura"])])):(0,n.Q3)("v-if",!0),"hojasiagie"===e.name?((0,n.uX)(),(0,n.CE)("div",{key:2,class:"col q-pl-xs",instrucod:e.instrucod},[(0,n.bF)(A,{instrucod:e.instrucod,ref:"hojasiagie"},null,8,["instrucod"])],8,p)):(0,n.Q3)("v-if",!0)]),(0,n.bF)(D,{title:e.title,modelValue:e.openModal,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.openModal=a}),onSubmit:e.submit},{default:(0,n.k6)(function(){return[(0,n.bF)(S,{ref:"form",schema:e.schema,modal:!0},null,8,["schema"])]}),_:1},8,["title","modelValue","onSubmit"]),(0,n.bF)(D,{modelValue:e.openModalFile,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.openModalFile=a}),title:"Imagen",onSubmit:e.guardarArchivo},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",m,[(0,n.bF)(k,{ref:"upload",onUpload:e.addFile,src:e.currentUrlImg,icon:"file",title:"Subir Archivo",allow:["jpg","jpeg","png","gif"]},null,8,["onUpload","src"])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var h=t(99550),g=t.n(h),T=t(76080),v=t.n(T),C=t(45254),w=t.n(C),A=(t(71225),t(39866),t(52133),t(10239),t(50310),t(5962),t(90095),t(6724),t(70199),t(56567),t(515),t(83190),t(52776),t(84433),t(7346),t(13715),t(50425)),S=t(6407),D=t(52617),k=t(82351),E=t(94509),O=t(9736),Q=t(16648),y=t(95718),M=t(53380),x=t(75053),R=t(19852),q={class:"col-xs-12 col-sm-3 col-md-12"};function $(e,a){var t=this,o=(0,n.g2)("sie-table"),i=(0,n.g2)("formulario"),r=(0,n.g2)("sie-modal"),l=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(l,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",q,[(0,n.bF)(o,{class:"q-px-sm q-pt-sm",selection:"single",context:t,permiso:"> 1",css:"height: calc(100vh - 150px)",search:"Buscar","save-cells":"",columns:e.columnTable,data:e.rowData,config:e.configTabla},null,8,["columns","data","config"]),(0,n.Q3)('q-table(style="height: calc(100vh - 150px)"\n:row-key="config.key"\ncolor="secondary"\n:data="rowData"\n:columns="columnTable"\n:pagination.sync="pagination"\n:rows-per-page-options="[0]"\n:filter="filtroTabla")\ntemplate(slot="top" slot-scope="props")\n  .col\n    q-search(hide-underline color="secondary" v-model="filtroTabla")\nq-tr(slot="body" slot-scope="props" :props="props" @click ="rowClickedTabla(props.row)")\n    q-td(\n        v-for="col in props.cols"\n        :key="col.name"\n        :props="props"\n        v-if="![\'DELETE\'].includes(col.name)"\n        ) {{ props.row[col.name] }}\n        q-popup-edit.popupedit(v-model="props.row[col.name]" @save="actualizarCampo(props.row, col.name, col.tipo)" v-if="col.tipo !== \'texto\'")\n            q-input(:debounce="0" type="text" :outlined="false" v-model="props.row[col.name]"  v-if="col.tipo == \'input\'")\n    q-td(key="DELETE" :props="props" width="120px")\n        q-btn(flat icon="delete" color="primary" @click.stop="eliminar(props.row)")\n            q-tooltip(anchor="bottom middle" self="top middle") Eliminar')]),(0,n.bF)(r,{title:e.title,modelValue:e.openModal,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.openModal=a}),onSubmit:e.submit},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{ref:"form",schema:e.schema,modal:!0},null,8,["schema"])]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var G=t(36408),I=t(26697),V=t(53093),L=t(43346),U=t(53811),F=t(88567),N=t(57668),_=t(80660),P=t(26611),j=t(982),B=t(6123),z={components:{QTable:A.A,QTh:D.A,QTr:k.A,QTd:E.A,QCard:F.A,QInput:O.A,QPopupEdit:B.GT,QCardSection:y.A,QSeparator:M.A,sieGrid:G.A,QTabs:I.A,QTab:V.A,QTabPanel:L.A,QTabPanels:U.A,formulario:R.A,sieModal:x.A},props:["instrucod"],mixins:[P.A],watch:{instrucod:function(e){this.getGrados()}},data:function(){return{config:{},rowData:[],pagination:{rowsPerPage:0},nivelAcceso:(0,N["default"])().ruta.nivel,openModal:!1,columTest:[],columnTable:[],title:"Mantenimiento Tablas",tabcod:"0092",schema:[],filtroTabla:"",princod:null}},computed:{configTabla:function(){var e=this,a={component:"button",icon:["delete as eliminar"],tooltip:{ver:"Ver",editar:"Editar",eliminar:"Eliminar"},eliminar:function(e){var a=this;this.$confirm("¿Está seguro de eliminar este registro?","delete").onOk(w()(v()().m(function t(){return v()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,a.eliminar(e);case 1:return t.a(2)}},t)})))},permisos:{eliminar:"===3"},flat:!0,dense:!0,color:"primary"},t={};return this.columnTable.length&&this.columnTable.forEach(function(a){a.component=a.componente,"019"===e.princod?["SECUCOD"].includes(a.name)?a.editable=!1:["SECUDES"].includes(a.name)?a.editable=["SIE","SIEWEB"].includes(e.sieInfo.usucod)&&e.nivelAcceso>1:a.editable=e.nivelAcceso>1:a.editable=a.editableOriginal&&e.nivelAcceso>1,!1===a.editable?a.component="":["input","select"].includes(a.component)?(a.autoSelect=!0,a.input=function(t,n){e.actualizarCampo(t,a.name,n)}):"date"===a.component&&(a.format="DD/MM/YYYY",["0091","0038","0093"].includes(e.tabcod)?(a.component="date",a.edit=!1):a.edit=!0),t[a.field]=a}),t.DELETE=a,t}},methods:{onGridReady:function(e){},submit:function(e){var a=this;return w()(v()().m(function e(){var t,n,o,i;return v()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,a.$refs.form.getForm();case 1:if(t=e.v,n=t.form,o=t.success,!o){e.n=2;break}i={tabcod:a.tabcod,data:n},_.$http.post("api/TablasController/addTabla",i).then(function(e){(0,j["default"])(e.message,"success")}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")}),e.n=3;break;case 2:return e.a(2,(0,j["default"])("Complete los campos requeridos","warning"));case 3:return e.a(2)}},e)}))()},eliminar:function(e){var a=this,t={tabcod:this.tabcod,data:e};_.$http.delete("api/TablasController/deleteTabla",{data:t}).then(function(e){(0,j["default"])(e.message,"success"),a.getGrados()}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")})},actualizarCampo:function(e,a,t){var n=this,o={tabcod:this.tabcod,data:e,registroOriginal:t};_.$http.post("api/TablasController/updateTabla",o).then(function(e){(0,j["default"])(e.message,"success"),n.getGrados()}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")})},addRow:function(){if(!this.tabcod)return(0,j["default"])("Selecione una tabla","warning");var e=this.config[this.tabcod];e=e?e.filter(function(e){return"DELETE"!==e.name}):[],this.schema=e,this.openModal=!0},rowClickedTabla:function(e){},getGrados:function(){var e=this;if(this.instrucod){var a=this.instrucod;_.$http.get("api/TablasController/getGrados",{params:{instrucod:a}}).then(function(a){e.rowData=a,e.config.key="GRADOCOD"})}}},created:function(){},beforeMount:function(){var e=this;this.getGrados(),_.$http.get("api/TablasController/getConfigTabla",{params:{tabcod:"0092"}}).then(function(a){e.columnTable=a.config})}},X=t(12807);const W=(0,X.A)(z,[["render",$]]);var Y=W,H={class:"row q-pt-xs"},J={class:"col"},K={class:"col q-pl-xs"};function Z(e,a){var t=(0,n.g2)("sie-table");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",H,[(0,n.Lk)("div",J,[(0,n.bF)(t,{class:"q-px-sm q-pt-sm",selection:"single",context:this,permiso:"> 1",css:"height: calc(65vh - 150px)",search:"Buscar Sede","save-cells":"",columns:e.columnTableSedes,onRowSelected:e.rowClickedSede,data:e.rowDataSedes,config:e.configTablaSedes},null,8,["columns","onRowSelected","data","config"])]),(0,n.Lk)("div",K,[(0,n.bF)(t,{class:"q-px-sm q-pt-sm",selection:"single",context:this,permiso:"> 1",css:"height: calc(65vh - 150px)",search:"Buscar Código Modular por Sede","save-cells":"",columns:e.columnTableSedCodmod,data:e.rowDataSedCodmod,config:e.configTablaSedCodmod},null,8,["columns","data","config"])])])])}var ee={components:{QTable:A.A,QTh:D.A,QTr:k.A,QTd:E.A,QCard:F.A,QInput:O.A,QPopupEdit:B.GT,QCardSection:y.A,QSeparator:M.A,sieGrid:G.A,QTabs:I.A,QTab:V.A,QTabPanel:L.A,QTabPanels:U.A,formulario:R.A,sieModal:x.A},props:["instrucod"],mixins:[P.A],watch:{instrucod:function(e){}},data:function(){return{config:{},rowDataSedes:[],rowDataSedCodmod:[],pagination:{rowsPerPage:0},nivelAcceso:(0,N["default"])().ruta.nivel,openModal:!1,columTest:[],columnTableSedes:[],columnTableSedCodmod:[],title:"Mantenimiento Tablas",tabcod:"SED_CODMOD",schema:[],filtroTabla:""}},computed:{configTablaSedes:function(){var e=this,a={};return this.columnTableSedes.length&&this.columnTableSedes.forEach(function(t){t.component=t.componente,!1===t.editable?t.component="":["input","select"].includes(t.component)&&(t.autoSelect=!0,t.input=function(a){e.actualizarCampo(a,t.name)}),a[t.field]=t}),a},configTablaSedCodmod:function(){var e=this,a={};return this.columnTableSedes.length&&this.columnTableSedCodmod.forEach(function(t){t.component=t.componente,!1===t.editable?t.component="":["input","select"].includes(t.component)&&(t.autoSelect=!0,t.input=function(a){e.actualizarCampo(a,t.name)}),a[t.field]=t}),a}},methods:{onGridReady:function(e){},actualizarCampo:function(e,a,t){var n=this,o={loccod:e.LOCCOD,instrucod:e.INSTRUCOD,data:e};_.$http.post("api/InstruCodmodSedeController/actualizar",{params:o}).then(function(a){(0,j["default"])(a.message,"success"),n.getCodModsSedes(e)}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")})},addRow:function(){if(!this.tabcod)return(0,j["default"])("Selecione una tabla","warning");var e=this.config[this.tabcod];e=e?e.filter(function(e){return"DELETE"!==e.name}):[],this.schema=e,this.openModal=!0},rowClickedSede:function(e){this.getCodModsSedes(e)},getCodModsSedes:function(e){var a=this;return w()(v()().m(function t(){var n,o;return v()().w(function(t){while(1)switch(t.n){case 0:return n="",n=e.SECUCOD?e.SECUCOD:e.EMPCOD,t.n=1,_.$http.get("api/InstruController/getDatosSedes",{params:{params:{secucod:n}}});case 1:o=t.v,a.rowDataSedCodmod=o;case 2:return t.a(2)}},t)}))()},getSedes:function(){var e=this;return w()(v()().m(function a(){var t;return v()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,_.$http.get("api/TablasController/getTabla",{params:{tabcod:"0082"}});case 1:t=a.v,e.rowDataSedes=t;case 2:return a.a(2)}},a)}))()}},created:function(){},beforeMount:function(){var e=this;this.getSedes(),_.$http.get("api/TablasController/getConfigTabla",{params:{tabcod:"0082-NIVELES"}}).then(function(a){e.columnTableSedes=a.config}),_.$http.get("api/TablasController/getConfigTabla",{params:{tabcod:"SED_CODMOD"}}).then(function(a){e.columnTableSedCodmod=a.config})}};const ae=(0,X.A)(ee,[["render",Z]]);var te=ae,ne={class:"col-xs-12 col-sm-3 col-md-12"};function oe(e,a){var t=this,o=(0,n.g2)("sie-table"),i=(0,n.g2)("formulario"),r=(0,n.g2)("sie-modal"),l=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(l,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ne,[(0,n.bF)(o,{class:"q-px-sm q-pt-sm",selection:"single",context:t,permiso:"> 1",css:"height: calc(100vh - 150px)",search:"Buscar","save-cells":"",columns:e.columnTable,data:e.rowData,config:e.configTabla},null,8,["columns","data","config"]),(0,n.Q3)('q-table(style="height: calc(100vh - 150px)"\n:row-key="config.key"\ncolor="secondary"\n:data="rowData"\n:columns="columnTable"\n:pagination.sync="pagination"\n:rows-per-page-options="[0]"\n:filter="filtroTabla"\n)\ntemplate(slot="top" slot-scope="props")\n  .col\n    q-search(hide-underline color="secondary" v-model="filtroTabla")\nq-tr(slot="body" slot-scope="props" :props="props" @click ="rowClicked(props.row)")\n    q-td(\n        v-for="col in props.cols"\n        :key="col.name"\n        :props="props"\n        v-if="![\'DELETE\'].includes(col.name)"\n        ) {{ props.row[col.name] }}\n        q-popup-edit.popupedit(v-model="props.row[col.name]" @save="actualizarCampo(props.row, col.name, col.tipo)" v-if="col.tipo !== \'texto\'")\n            q-input(:debounce="0" type="text" :outlined="false" v-model="props.row[col.name]"  v-if="col.tipo == \'input\'")\n    q-td(key="DELETE" :props="props" width="120px")\n        q-btn(flat icon="delete" color="primary" @click.stop="eliminar(props.row)")\n            q-tooltip(anchor="bottom middle" self="top middle") Eliminar\n')]),(0,n.bF)(r,{title:e.title,modelValue:e.openModal,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.openModal=a}),onSubmit:e.submit},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{ref:"form",schema:e.schema,modal:!0},null,8,["schema"])]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var ie={components:{QTable:A.A,QTh:D.A,QTr:k.A,QTd:E.A,QCard:F.A,QInput:O.A,QPopupEdit:B.GT,QCardSection:y.A,QSeparator:M.A,sieGrid:G.A,QTabs:I.A,QTab:V.A,QTabPanel:L.A,QTabPanels:U.A,formulario:R.A,sieModal:x.A},props:{princod:{type:String,default:null},soloLectura:{type:Boolean,default:!1}},mixins:[P.A],watch:{princod:function(e){this.getData()}},data:function(){return{config:{},rowData:[],pagination:{rowsPerPage:0},sieInfo:(0,N["default"])(),nivelAcceso:(0,N["default"])().ruta.nivel,openModal:!1,columTest:[],columnTable:[],title:"Mantenimiento Tablas",tabcod:"0093",schema:[],filtroTabla:""}},computed:{configTabla:function(){var e=this,a={component:"button",icon:["delete as eliminar"],tooltip:{ver:"Ver",editar:"Editar",eliminar:"Eliminar"},eliminar:function(e){var a=this;this.$confirm("¿Está seguro de eliminar este registro?","delete").onOk(w()(v()().m(function t(){return v()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,a.eliminar(e);case 1:return t.a(2)}},t)})))},permisos:{eliminar:"===3"},flat:!0,dense:!0,color:"primary"},t={};return this.columnTable.length&&this.columnTable.forEach(function(a){a.component=a.componente,"019"===e.princod?["SECUCOD"].includes(a.name)?a.editable=!1:["SECUDES"].includes(a.name)?a.editable=["SIE","SIEWEB"].includes(e.sieInfo.usucod)&&e.nivelAcceso>1:a.editable=e.nivelAcceso>1:e.soloLectura?a.editable=!1:a.editable=a.editableOriginal&&e.nivelAcceso>1,!1===a.editable?a.component="text":"input"===a.component?(a.autoSelect=!0,a.input=function(t){e.actualizarCampo(t,a.name)}):"date"===a.component&&(a.format="DD/MM/YYYY",["0091","0038","0093"].includes(e.tabcod)?(a.component="date",a.edit=!1):a.edit=!0),t[a.field]=a}),this.soloLectura||(t.DELETE=a),t}},methods:{onGridReady:function(e){},submit:function(e){var a=this;return w()(v()().m(function e(){var t,n,o,i;return v()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,a.$refs.form.getForm();case 1:if(t=e.v,n=t.form,o=t.success,!o){e.n=2;break}i={tabcod:a.tabcod,data:n},_.$http.post("api/TablasController/addTabla",i).then(function(e){(0,j["default"])(e.message,"success")}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")}),e.n=3;break;case 2:return e.a(2,(0,j["default"])("Complete los campos requeridos","warning"));case 3:return e.a(2)}},e)}))()},eliminar:function(e){var a=this,t={tabcod:this.tabcod,data:e};_.$http.delete("api/TablasController/deleteTabla",{data:t}).then(function(e){(0,j["default"])(e.message,"success"),a.getData()}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")})},actualizarCampo:function(e,a,t){var n=this,o={tabcod:this.tabcod,data:e};_.$http.post("api/TablasController/updateTabla",o).then(function(e){(0,j["default"])(e.message,"success"),n.getData()}).catch(function(e){var a=e.error&&e.error.message?e.error.message:"Ocurrió un error";(0,j["default"])(a,"warning")})},addRow:function(){if(!this.tabcod)return(0,j["default"])("Selecione una tabla","warning");var e=this.config[this.tabcod];e=e?e.filter(function(e){return"DELETE"!==e.name}):[],this.schema=e,this.openModal=!0},rowClicked:function(e){},getData:function(){var e=this;if(this.princod){var a=this.princod;_.$http.get("api/TablasController/getTablaDetails",{params:{princod:a}}).then(function(a){e.rowData=a,e.config.key="GRADOCOD"})}}},created:function(){},beforeMount:function(){var e=this;this.getData(),_.$http.get("api/TablasController/getConfigTabla",{params:{tabcod:"0093"}}).then(function(a){a.config.forEach(function(e){e.editableOriginal=e.editable}),e.columnTable=a.config})}};const re=(0,X.A)(ie,[["render",oe]]);var le=re,ce=t(8445),se=t.n(ce),ue={class:"col-xs-12 col-sm-3 col-md-12"},de={class:"col"};function fe(e,a){var t=(0,n.g2)("q-search"),r=(0,n.g2)("q-input"),l=(0,n.g2)("q-popup-edit"),c=(0,n.g2)("q-td"),s=(0,n.g2)("q-tooltip"),u=(0,n.g2)("q-btn"),d=(0,n.g2)("q-tr"),f=(0,n.g2)("q-table"),p=(0,n.g2)("formulario"),m=(0,n.g2)("sie-modal"),b=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(b,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ue,[(0,n.bF)(f,{style:{height:"calc(100vh - 150px)"},"row-key":e.config.key,color:"secondary",data:e.rowData,columns:e.columnTable,pagination:e.pagination,"onUpdate:pagination":a[1]||(a[1]=function(a){return e.pagination=a}),"rows-per-page-options":[0],filter:e.filtroTabla},{top:(0,n.k6)(function(o){return[(0,n.Lk)("div",de,[(0,n.bF)(t,{"hide-underline":"",color:"secondary",modelValue:e.filtroTabla,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.filtroTabla=a})},null,8,["modelValue"])])]}),body:(0,n.k6)(function(t){return[(0,n.bF)(d,{props:t,onClick:function(a){return e.rowClicked(t.row)}},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.cols,function(a){return(0,n.uX)(),(0,n.CE)(n.FK,{key:a.name},[["DELETE"].includes(a.name)?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(c,{key:0},{default:(0,n.k6)(function(){return[(0,n.eW)((0,o.v_)(t.row[a.name]),1),"texto"!==a.tipo?((0,n.uX)(),(0,n.Wv)(l,{key:0,class:"popupedit",modelValue:t.row[a.name],"onUpdate:modelValue":function(e){return t.row[a.name]=e},onSave:function(n){return e.actualizarCampo(t.row,a.name,a.tipo)}},{default:(0,n.k6)(function(){return["input"==a.tipo?((0,n.uX)(),(0,n.Wv)(r,{key:0,debounce:0,type:"text",outlined:!1,modelValue:t.row[a.name],"onUpdate:modelValue":function(e){return t.row[a.name]=e}},null,8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,n.Q3)("v-if",!0)]}),_:2},1024))],64)}),128)),(0,n.bF)(c,{key:"DELETE",width:"120px"},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{flat:"",icon:"delete",color:"primary",onClick:(0,i.D$)(function(a){return e.eliminar(t.row)},["stop"])},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return se()(a[3]||(a[3]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1024)]}),_:2},1032,["props","onClick"])]}),_:1},8,["row-key","data","columns","pagination","filter"])]),(0,n.bF)(m,{title:e.title,modelValue:e.openModal,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.openModal=a}),onSubmit:e.submit},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{ref:"form",schema:e.schema,modal:!0},null,8,["schema"])]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var pe={components:{QTable:A.A,QTh:D.A,QTr:k.A,QTd:E.A,QCard:F.A,QPopupEdit:B.GT,QCardSection:y.A,QSeparator:M.A,sieGrid:G.A,QTabs:I.A,QTab:V.A,QTabPanel:L.A,QTabPanels:U.A,formulario:R.A,sieModal:x.A,QSearch:B.Ks,QInput:B.ie,QBtn:B.Il,QTooltip:B.nC},props:["instrucod"],mixins:[P.A],watch:{instrucod:function(e){this.getData()}},data:function(){return{config:{},rowData:[],pagination:{rowsPerPage:0},nivelAcceso:(0,N["default"])().ruta.nivel,openModal:!1,columnTable:[],title:"Mantenimiento Tablas",tabcod:"0094",schema:[],filtroTabla:""}},methods:{onGridReady:function(e){},submit:function(e){var a=this;return w()(v()().m(function e(){var t,n,o,i;return v()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,a.$refs.form.getForm();case 1:if(t=e.v,n=t.form,o=t.success,!o){e.n=2;break}i={tabcod:a.tabcod,data:n},_.$http.post("api/TablasController/addTabla",i).then(function(e){(0,j["default"])(e.message,"success")}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")}),e.n=3;break;case 2:return e.a(2,(0,j["default"])("Complete los campos requeridos","warning"));case 3:return e.a(2)}},e)}))()},addRow:function(){if(!this.tabcod)return(0,j["default"])("Selecione una tabla","warning");var e=this.columnTable;e=e?e.filter(function(e){return"DELETE"!==e.name}):[],this.schema=e,this.openModal=!0},eliminar:function(e){var a=this,t={tabcod:this.tabcod,data:e};_.$http.delete("api/TablasController/deleteTabla",{data:t}).then(function(e){(0,j["default"])(e.message,"success"),a.getData()}).catch(function(e){var a=e.error;(0,j["default"])(a.message,"warning")})},rowClicked:function(e){this.title="Mantenimiento - "+e.TABNOM},actualizarCampo:function(e,a,t){var n=this,o={tabcod:this.tabcod,data:e};_.$http.post("api/TablasController/updateTabla",o).then(function(e){(0,j["default"])(e.message,"success"),n.getData()}).catch(function(e){var a=e.error&&e.error.message?e.error.message:"Ocurrió un error";(0,j["default"])(a,"warning")})},getData:function(){var e=this;if(this.instrucod){var a=this.instrucod;_.$http.get("api/TablasController/getHojaSiagie",{params:{instrucod:a}}).then(function(a){e.rowData=a,e.config.key="INSTRUCOD"})}}},created:function(){},beforeMount:function(){var e=this;this.getData(),_.$http.get("api/TablasController/getConfigTabla",{params:{tabcod:"0094"}}).then(function(a){e.columnTable=a.config})}};const me=(0,X.A)(pe,[["render",fe]]);var be=me,he=t(53057),ge=t(59089),Te=t(33950),ve=t(81288),Ce={components:{sieUpload:ge.A,sieModal:x.A,formulario:R.A,QSeparator:M.A,QCardSection:y.A,QDatetime:B.T5,hojasiagie:be,areasInstitucionales:he["default"],tablastablas:le,grados:Y,sedes:te,QTable:A.A,QTh:D.A,QTr:k.A,QTd:E.A,QInput:O.A,QSelect:Q.A,QPopover:B.VM,QPopupEdit:S.A,QPage:B.Tu,QSearch:B.Ks},data:function(){return{sie:(0,N["default"])(),archivoTemporal:"",registroOriginal:{},currentRow:{},openModalFile:!1,name:"",config:{data:[],columns:[],key:"INSTRUCOD"},rowData:[],pagination:{rowsPerPage:0},openModal:!1,title:"Tablas",tabcod:"",tabnom:"",schema:[],columnsTablastablas:[],filtroTablaMaster:"",configMaster:{PERICCO:{type:"text",autoSelect:!0,maxlength:1,input:function(e){this.rowClickedMaster(null,e)}}},columnTablaMaster:[{name:"TABNOM",label:"Tablas",field:"TABNOM",style:"width: 80px",align:"left"}],filtroTabla:"",dataTabla:[],columnsTabla:[],keyTabla:"",schemaGrado:[],schemaTablaSe:[],id:"0001",instrucod:null,princod:null,dataCampo:[],soloLectura:!1,isTablasAbajo:!1,isSedes:!1}},computed:{setCssTablasAbajo:function(){var e="height: calc(100vh - 150px)";return this.isTablasAbajo&&(e="height: calc(50vh - 150px)"),e},buttons:function(){var e=[];return this.soloLectura||e.push({label:"Nuevo",icon:"add",click:this.addRow,permiso:"> 1"}),e},currentUrlImg:function(){var e="api/GrupovacController/getImagen?idGrupo="+this.currentRow.GRUVACOD+"&sie-token="+(0,N["default"])().token,a=(0,N["default"])().host+"/"+e;return a},configTabla:function(){var e=this,a={component:"button",icon:["delete as eliminar"],tooltip:{ver:"Ver",editar:"Editar",eliminar:"Eliminar"},eliminar:function(e){var a=this;this.$confirm("¿Está seguro de eliminar este registro?","delete").onOk(w()(v()().m(function t(){return v()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,a.eliminar(e);case 1:return t.a(2)}},t)})))},permisos:{eliminar:"===3"},flat:!0,dense:!0,color:"primary"},t={},n=JSON.parse(JSON.stringify(this.columnsTabla));return n.length&&(n.forEach(function(a){a.component=a.component||a.componente,["input","select"].includes(a.component)?((["0091","0038","0093","0020"].includes(e.tabcod)||/^COD/gi.test(a.name)&&"CODMOD"!==a.name||/COD$/gi.test(a.name)&&!["CURSOCOD","CODMOD","TIPOCOD","CONCOB","MONCOD"].includes(a.name))&&(a.component="text"),a.autoSelect=!0,a.input=function(){var a=w()(v()().m(function a(t,n,o){return v()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.actualizarCampo(t);case 1:return a.a(2)}},a)}));return function(e,t,n){return a.apply(this,arguments)}}()):"date"===a.component&&(a.input=function(a){e.actualizarCampo(a)},a.format="DD/MM/YYYY",["0091","0038","0093"].includes(e.tabcod)?(a.component="date",a.edit=!1):a.edit=!0),"sieSelect"===a.component&&(a.componente=a.component="select",a.optionLabel="label",a.optionValue="value",a.input=function(){var a=w()(v()().m(function a(t,n,o){return v()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.actualizarCampo(t);case 1:return a.a(2)}},a)}));return function(e,t,n){return a.apply(this,arguments)}}(),["0091","0038"].includes(e.tabcod)&&(a.edit=!1)),t[a.field]=a}),"0045"===this.tabcod&&(t.INSTRUCOD=t.INSTRUCOD?t.INSTRUCOD:{},t.INSTRUCOD.component="select",t.GRADOS=t.GRADOS?t.GRADOS:{},t.GRADOS.component="input")),t.DELETE=a,t.ARCHIVO={renderHtml:function(e,a,t){var n={xlsx:"file_excel",xls:"file_excel",doc:"file_document",docx:"file_document",pdf:"file_pdf",txt:"file_text_o",jpg:"file_image",png:"file_image",jpge:"file_image",default:"upload"},o="default";e.ARCHIVO&&(o=e.ARCHIVO.split(".").reverse()[0]);var i=t.icon({name:n[o]||"files_empty"});return i},renderAction:function(e){this.currentRow=e,this.openModalFile=!0}},t},gradosActive:function(){return"0002"===this.tabcod?"col-6":"0002"!==this.tabcod?"col-12":void 0},editActive:function(){return"0002"===this.tabcod?{active:"false"}:"0002"!==this.tabcod?{active:"true"}:void 0}},methods:{guardarArchivo:function(){var e=this;return w()(v()().m(function a(){var t;return v()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,t={idArchivo:e.currentRow.GRUVACOD,archivoTemp:e.archivoTemporal},a.n=1,e.$http.post("api/GrupovacController/guardarArchivo",t);case 1:e.openModalFile=!1,e.$notify("Se ha subido el archivo satisfactoriamente.","success"),a.n=3;break;case 2:a.p=2,a.v,e.$notify("Ha ocurrido un error de conexión, vuelve a intentarlo más tarde","warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()},addFile:function(e){var a=this;return w()(v()().m(function t(){var n;return v()().w(function(t){while(1)switch(t.n){case 0:if(a.file=e[0],!(Object.entries(a.file).length>0)){t.n=2;break}return t.n=1,(0,Te.Upload)({url:"api/HyoArchivo/tmp/upload",file:a.file});case 1:n=t.v,a.archivoTemporal=n.name;case 2:return t.a(2)}},t)}))()},clickTr:function(e){this.rowClickedTabla(e)},onGridReady:function(e){},submit:function(e){var a=this;return w()(v()().m(function e(){var t,n,o,i;return v()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,a.$refs.form.getForm();case 1:if(t=e.v,n=t.form,o=t.success,!o){e.n=3;break}if(i={tabcod:a.tabcod,data:n},"0093"!==a.tabcod||n.PRINCOD){e.n=2;break}return(0,j["default"])("Seleccione una categoría","warning"),e.a(2,!1);case 2:_.$http.post("api/TablasController/addTabla",i).then(function(e){return(0,j["default"])(e.message,"success"),a.openModal=!1,["0091"].includes(a.tabcod)?(a.$refs.grados.getGrados(),0):["0093"].includes(a.tabcod)?(a.$refs.tablastablas.getData(),0):["0094"].includes(a.tabcod)?(a.$refs.hojasiagie.getData(),0):void a.getTablas({tabcod:a.tabcod,columns:a.config[a.tabcod]})}).catch(function(e){var a=e.error&&e.error.message?e.error.message:"Ocurrió un Error";(0,j["default"])(a,"warning")}),e.n=4;break;case 3:return e.a(2,(0,j["default"])("Complete los campos requeridos","warning"));case 4:return e.a(2)}},e)}))()},addRow:function(){var e=this;return w()(v()().m(function a(){var t,n;return v()().w(function(a){while(1)switch(a.n){case 0:if(t=e.config[e.tabcod],n={},e.tabcod){a.n=1;break}return a.a(2,(0,j["default"])("Selecione una tabla","warning"));case 1:if("0081"!==e.tabcod){a.n=2;break}return e.$refs.refAreasInstitucionales.openAgregar(),a.a(2);case 2:if(!["0002","0091"].includes(e.tabcod)){a.n=4;break}if(e.tabcod="0091",e.instrucod){a.n=3;break}return a.a(2,(0,j["default"])("Selecione un nivel","warning"));case 3:t=e.schemaGrado,n={INSTRUCOD:e.instrucod};case 4:if(["0020","0093"].includes(e.tabcod)&&(e.name="tablastablas",e.tabcod="0093",t=e.schemaTablaSe,n={PRINCOD:e.princod}),!["0038","0094"].includes(e.tabcod)){a.n=6;break}return e.tabcod="0094",a.n=5,e.getConfigTabla("0094");case 5:t=a.v,n={INSTRUCOD:e.instrucod,ANO:"2020"};case 6:["0015"].includes(e.tabcod)&&(e.princod="010",n={PRINCOD:e.princod}),t=t?t.filter(function(e){return"DELETE"!==e.name}):[],["0051"].includes(e.tabcod)&&(t=t?t.filter(function(e){return"ARCHIVO"!==e.name}):[]),e.schema=t,e.openModal=!0,e.$nextTick(function(){e.$refs.form.loadModel(n)});case 7:return a.a(2)}},a)}))()},getConfigTabla:function(e){return _.$http.get("api/TablasController/getConfigTabla",{params:{tabcod:e}}).then(function(e){return e.config})},rowClickedMaster:function(e){var a=this;this.princod=null,this.instrucod=null,this.$refs.tablasdetablas.filterData="",this.tabcod=e.TABCOD,this.tabnom=e.TABNOM,this.title="Tablas - "+e.TABNOM,"0020"===e.TABCOD&&(this.title=e.TABNOM);var t={tabcod:this.tabcod,columns:this.config[this.tabcod]};"0001"===this.tabcod&&this.getConfigTabla("0001").then(function(e){a.schemaGrado=e}),"0002"===this.tabcod||"0091"===this.tabcod?(t.name="grados",this.tabcod="0091",this.getConfigTabla("0091").then(function(e){a.schemaGrado=e})):["0020","0090","0093"].includes(this.tabcod)?(t.name="tablastablas",this.getConfigTabla("0093").then(function(e){a.schemaTablaSe=e})):"0038"===this.tabcod?(t.name="hojasiagie",this.getConfigTabla("0038").then(function(e){a.schemaGrado=e})):"0081"===this.tabcod&&(t.name="areasinstitucionales"),this.getTablas(t)},eliminar:function(e){var a=this,t={tabcod:this.tabcod,data:e};_.$http.delete("api/TablasController/deleteTabla",{data:t}).then(function(e){(0,j["default"])(e.message,"success"),a.getTablas({tabcod:a.tabcod,columns:a.config[a.tabcod]})}).catch(function(e){var a=e.error&&e.error.message?e.error.message:"Ocurrió un Error";(0,j["default"])(a,"warning")})},show:function(e){},getTablas:function(e){var a=this,t=e.tabcod,n=e.columns,o=e.name;n||"0090"!==this.tabcod||(n=this.schemaTablaSe);var i=!1;["0001"].includes(t)&&this.isSedes&&(i=!0),this.isTablasAbajo=i,this.name=o,"areasinstitucionales"!==this.name&&_.$http.get("api/TablasController/getTabla",{params:{tabcod:t}}).then(function(){var e=w()(v()().m(function e(t){return v()().w(function(e){while(1)switch(e.n){case 0:return a.dataTabla=t,["0002","0091"].includes(a.tabcod)&&(n=n.map(function(e){return e.tipo="texto",e})),a.columnsTabla=n,e.n=1,a.$refs.tablasdetablas.useApi(a.columnsTabla);case 1:return e.a(2)}},e)}));return function(a){return e.apply(this,arguments)}}()).catch(function(e){console.log(e);var a=e.error&&e.error.message?e.error.message:"Error al cargar datos";a.indexOf("instrucod")>-1||(0,j["default"])(a,"warning")})},getColname:function(e){return"G"===e?"Grado":"S"===e?"Sección":e},actualizarCampo:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={tabcod:this.tabcod,data:e};t&&(t.ANO=e.ANO,t.INSTRUCOD=e.INSTRUCOD,n.extras=t),n.registroOriginal=this.registroOriginal,_.$http.post("api/TablasController/updateTabla",n).then(function(e){(0,j["default"])(e.message,"success"),a.getTablas({tabcod:a.tabcod,columns:a.config[a.tabcod]})}).catch(function(e){var a=e.error&&e.error.message?e.error.message:"Ocurrio un error";(0,j["default"])(a,"warning")})},getLabelCampo:function(e,a){var t=a.tipo,n=a.data,o="",i="";if("select"===t&&o){"sino"!==n||e||(e="N");var r=o.find(function(a){return a.value===e});r&&(i=r.label)}else i=e;return i},rowClickedTabla:function(e){var a=e.INSTRUCOD;this.instrucod=a,this.princod=e.PRINCOD,this.soloLectura=["001","ASE","MER"].indexOf(this.princod)>-1,this.registroOriginal=e}},created:function(){var e=this;return w()(v()().m(function a(){var t;return v()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,ve.constantes)(["A_MANEJO_SEDES"]);case 1:return t=a.v,e.isSedes=t.A_MANEJO_SEDES,a.n=2,_.$http.get("api/TablasController/getConfigTabla",{params:{tabcod:"0093"}}).then(function(a){e.columnsTablastablas=a.config});case 2:_.$http.get("api/TablasController/getTablas").then(function(a){if(a.config["0045"]){a.config["0045"].map(function(e,a){e.id_formulario_campo=a});var t=g()(a.config["0045"],2),n=t[1];n.autoEjecutar=!1,n.api="api/HyoGradoNivs/getGradosByNivel|GRADOCOD|GRADODES",n.padre=0,n.apiparams='{ "todos": "1" }'}e.rowData=a.data,e.config=a.config}),_.$http.get("api/TablasController/getResolucion").then(function(a){e.dataCampo.COLRES=a}),_.$http.get("api/TablasController/getNiveles").then(function(a){e.dataCampo.INSTRUCOD=a}),e.dataCampo.CARGORS=[{value:"R",label:"Recuperación"},{value:"S",label:"Subsanación"}],e.dataCampo.GRUPOORD=[{value:"G",label:"Grado"},{value:"S",label:"Seccion"}];case 3:return a.a(2)}},a)}))()}};const we=(0,X.A)(Ce,[["render",b]]);var Ae=we}}]);