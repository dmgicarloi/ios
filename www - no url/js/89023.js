"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[89023],{89023:function(e,a,i){i.r(a),i.d(a,{default:function(){return se}});var o=i(8445),n=i.n(o),t=i(61758),r=i(58790),l={class:"row q-pt-sm q-px-sm"},s={class:"col"},c={class:"col scroll-y q-py-sm-md"},u={class:"row q-px-sm"},d={class:"col-xl-12 col-lg-12 col-md-12 col-xs-12"},f={key:0,class:"full-width"},m={class:"q-px-none"},h={class:"q-caption"},p={class:"q-pl-xs"},b={class:"row q-px-sm q-py-sm"},F={class:"col-xs-12 col-md-6 offset-md-6"},v={class:"full-width"},I={class:"full-width"},k={key:1,class:"col"},g={class:"row q-pa-sm"},_={class:"col-xs-12 col-sm-6 col-md-12"},H={class:"col-xs-12 col-sm-6 col-md-12"},A={class:"row q-pa-sm"},D={class:"col-12"},C={class:"col-12"},y={class:"col-12"},O={class:"col-12"},$={key:0,class:"col-12"},x={class:"row q-pa-sm"},E={class:"col-12"},N={class:"col-12"},M={class:"row"},q={class:"col"};function w(e,a){var i=(0,t.g2)("sie-select"),o=(0,t.g2)("header-btn"),w=(0,t.g2)("q-input"),Y=(0,t.g2)("q-item-main"),L=(0,t.g2)("q-checkbox"),V=(0,t.g2)("q-item-side"),R=(0,t.g2)("q-btn"),Q=(0,t.g2)("q-item"),S=(0,t.g2)("q-icon"),X=(0,t.g2)("q-chip"),W=(0,t.g2)("q-collapsible"),T=(0,t.g2)("q-list"),U=(0,t.g2)("q-card"),j=(0,t.g2)("q-card-title"),P=(0,t.g2)("q-card-separator"),K=(0,t.g2)("sie-vacio"),z=(0,t.g2)("q-datetime"),G=(0,t.g2)("q-field"),J=(0,t.g2)("sie-modal"),Z=(0,t.g2)("sie-date"),B=(0,t.g2)("q-search"),ee=(0,t.g2)("q-table"),ae=(0,t.g2)("q-fab-action"),ie=(0,t.g2)("q-tooltip"),oe=(0,t.g2)("q-fab"),ne=(0,t.g2)("q-page-sticky"),te=(0,t.g2)("q-toolbar-title"),re=(0,t.g2)("q-toolbar"),le=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(le,{class:"horariosAtencion bg-white"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",l,[(0,t.Lk)("div",s,[(0,t.bF)(i,{type:"outlined","no-bottom":"",modelValue:e.profesor,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.profesor=a}),options:e.profesores,label:"USUNOM",placeholder:"seleccionar",onInput:e.cambiarProfe},null,8,["modelValue","options","onInput"])])]),(0,t.bF)(o,{buttons:e.buttons},null,8,["buttons"]),e.profesor?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[e.sieInfo.esFamilia?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(Q,{key:0,class:"q-pb-md",style:{padding:"6px 8px"}},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,null,{default:(0,t.k6)(function(){return[(0,t.bF)(w,{class:"q-if-outlined no-bottom",type:"number",modelValue:e.sie.dataAtencion.MINATE,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.sie.dataAtencion.MINATE=a}),"float-label":"Minutos de atención","numeric-keyboard-toggle":""},null,8,["modelValue"])]}),_:1}),e.permiteEditar?((0,t.uX)(),(0,t.Wv)(V,{key:0},{default:(0,t.k6)(function(){return[(0,t.bF)(L,{class:"q-if-outlined no-bottom m-checkbox",modelValue:e.sie.minateTodos,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.sie.minateTodos=a}),label:e.$t("todos")},null,8,["modelValue","label"])]}),_:1})):(0,t.Q3)("v-if",!0),(e.isAmerica?e.permiteEditar:e.acceso)?((0,t.uX)(),(0,t.Wv)(V,{key:1},{default:(0,t.k6)(function(){return[(0,t.bF)(R,{onClick:e.grabarMinutosAtencion,round:"",icon:"save",color:"secondary"},null,8,["onClick"])]}),_:1})):(0,t.Q3)("v-if",!0)]}),_:1})),(0,t.Lk)("div",c,[(0,t.Lk)("div",u,[(0,t.Lk)("div",d,[(0,t.bF)(U,null,{default:(0,t.k6)(function(){return[e.isLess?((0,t.uX)(),(0,t.Wv)(T,{key:1,separator:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.sie.diasSemana,function(a,i){return(0,t.uX)(),(0,t.Wv)(W,{key:i},{header:(0,t.k6)(function(){return[(0,t.bF)(Y,{label:a.desc},null,8,["label"]),(0,t.bF)(V,{right:""},{default:(0,t.k6)(function(){return[e.acceso?((0,t.uX)(),(0,t.Wv)(S,{key:0,name:"add_circle",color:"secondary",size:"24px",onClick:function(i){return e.agregarCalendario(a)}},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),default:(0,t.k6)(function(){return[(0,t.Lk)("div",m,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.sie.listaEventos[a.dia],function(a,i){return(0,t.uX)(),(0,t.Wv)(X,{key:i,class:"q-ma-xs",color:"red"},{default:(0,t.k6)(function(){return[(0,t.Lk)("span",h,(0,r.v_)(a.RANGO),1),(0,t.Lk)("span",p,[e.acceso?((0,t.uX)(),(0,t.Wv)(S,{key:0,class:"cursor-pointer",name:"remove_circle",color:"white",size:"24px",onClick:function(i){return e.eliminaCaldendario(a)}},null,8,["onClick"])):(0,t.Q3)("v-if",!0)])]}),_:2},1024)}),128))])]}),_:2},1024)}),128))]}),_:1})):((0,t.uX)(),(0,t.CE)("table",f,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.sie.diasSemana,function(a,i){return(0,t.uX)(),(0,t.CE)("td",{key:i},[(0,t.bF)(Q,{class:"border-bottom"},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(a.desc),1)]}),_:2},1024),e.sieInfo.esFamilia?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(V,{key:0,right:""},{default:(0,t.k6)(function(){return[e.acceso?((0,t.uX)(),(0,t.Wv)(S,{key:0,class:"cursor-pointer",name:"add_circle",color:"secondary",size:"24px",onClick:function(i){return e.agregarCalendario(a)}},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024))]}),_:2},1024),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.sie.listaEventos[a.dia],function(a,i){return(0,t.uX)(),(0,t.CE)("div",{key:i,class:"row column"},[(0,t.bF)(Q,{class:"q-px-md"},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-caption"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(a.RANGO),1)]}),_:2},1024),e.sieInfo.esFamilia?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(V,{key:0,right:"",style:{"min-width":"0"}},{default:(0,t.k6)(function(){return[e.acceso?((0,t.uX)(),(0,t.Wv)(S,{key:0,class:"cursor-pointer",name:"remove_circle",color:"red",size:"24px",onClick:function(i){return e.eliminaCaldendario(a)}},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024))]}),_:2},1024)])}),128))])}),128))])])]))]}),_:1})])]),(0,t.Lk)("div",b,[(0,t.Lk)("div",F,[!e.sieInfo.esFamilia&&e.acceso?((0,t.uX)(),(0,t.Wv)(U,{key:0},{default:(0,t.k6)(function(){return[(0,t.bF)(j,{class:"q-body-1"},{default:(0,t.k6)(function(){return n()(a[18]||(a[18]=[(0,t.eW)("Días especiales",-1)]))}),_:1}),(0,t.bF)(P),(0,t.Lk)("table",v,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(e.$t("intranet.mensajeria.fecha")),1)]}),_:1})]}),_:1})]),(0,t.Lk)("th",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(e.$t("horainicio")),1)]}),_:1})]}),_:1})]),(0,t.Lk)("th",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(e.$t("horafin")),1)]}),_:1})]}),_:1})]),(0,t.Lk)("th",null,[e.acceso?((0,t.uX)(),(0,t.Wv)(Q,{key:0,class:"q-py-xs"},{default:(0,t.k6)(function(){return[(0,t.bF)(S,{class:"cursor-pointer",name:"add_circle",color:"secondary",size:"24px",onClick:e.agregarFechaAdicional},null,8,["onClick"])]}),_:1})):(0,t.Q3)("v-if",!0)])]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.sie.dataAdicional,function(a,i){return(0,t.uX)(),(0,t.CE)("tr",{key:i,class:"border-bottom"},[(0,t.Lk)("td",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(e.date(a.FH_INICIO,"DD/MM/YYYY")),1)]}),_:2},1024)]}),_:2},1024)]),(0,t.Lk)("td",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(e.date(a.FH_INICIO,"hh:mm a")),1)]}),_:2},1024)]}),_:2},1024)]),(0,t.Lk)("td",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(e.date(a.FH_FIN,"hh:mm a")),1)]}),_:2},1024)]}),_:2},1024)]),(0,t.Lk)("td",null,[(0,t.bF)(Q,{class:"q-px-xs"},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,null,{default:(0,t.k6)(function(){return[e.acceso?((0,t.uX)(),(0,t.Wv)(S,{key:0,class:"cursor-pointer",name:"remove_circle",color:"red",size:"24px",onClick:function(i){return e.eliminarAdicional(a)}},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024),a.FLAG?((0,t.uX)(),(0,t.Wv)(V,{key:0},{default:(0,t.k6)(function(){return[(0,t.bF)(S,{name:"manager",color:"faded",size:"20px"})]}),_:1})):(0,t.Q3)("v-if",!0)]}),_:2},1024)])])}),128))])])]}),_:1})):(0,t.Q3)("v-if",!0),!e.sieInfo.esFamilia&&e.acceso?((0,t.uX)(),(0,t.Wv)(U,{key:1,class:"q-mt-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(j,{class:"q-body-1"},{default:(0,t.k6)(function(){return n()(a[19]||(a[19]=[(0,t.eW)("Días excluídos",-1)]))}),_:1}),(0,t.bF)(P),(0,t.Lk)("table",I,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return n()(a[20]||(a[20]=[(0,t.eW)("Fecha",-1)]))}),_:1})]}),_:1})]),(0,t.Lk)("th",null,[e.acceso?((0,t.uX)(),(0,t.Wv)(Q,{key:0,class:"q-py-xs"},{default:(0,t.k6)(function(){return[(0,t.bF)(S,{class:"cursor-pointer",name:"add_circle",color:"secondary",size:"24px",onClick:e.agregarDiasExcluidos},null,8,["onClick"])]}),_:1})):(0,t.Q3)("v-if",!0)])]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.sie.dataExcluidos,function(a,i){return(0,t.uX)(),(0,t.CE)("tr",{key:i,class:"border-bottom"},[(0,t.Lk)("td",null,[(0,t.bF)(Q,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{class:"q-body-1"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(e.date(a.FH_INICIO,"DD/MM/YYYY")),1)]}),_:2},1024)]}),_:2},1024)]),(0,t.Lk)("td",null,[(0,t.bF)(Q,{class:"q-px-xs"},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,null,{default:(0,t.k6)(function(){return[e.acceso?((0,t.uX)(),(0,t.Wv)(S,{key:0,class:"cursor-pointer",name:"remove_circle",color:"red",size:"24px",onClick:function(i){return e.eliminarAdicional(a)}},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)])])}),128))])])]}),_:1})):(0,t.Q3)("v-if",!0)])])])],64)):((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(K,{icon:"person_add",title:e.$t("cobros.datosvacio"),subtitle:"Debe seleccionar un personal"},null,8,["title"])])),(0,t.bF)(J,{class:"modal-agregar",modelValue:e.calendario.modalAgregar,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.calendario.modalAgregar=a}),header:!0,title:"Agregar Horario dia "+e.calendario.title,onSubmit:e.grabarData},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",g,[(0,t.Lk)("div",_,[(0,t.bF)(G,{error:e.v$.calendario.HORAI.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(z,{class:"q-if-outlined",modelValue:e.v$.calendario.HORAI.$model,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.v$.calendario.HORAI.$model=a}),type:"time","float-label":e.$t("horainicio"),format:"hh:mm a"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",H,[(0,t.bF)(G,{error:e.v$.calendario.HORAF.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(z,{class:"q-if-outlined",modelValue:e.v$.calendario.HORAF.$model,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.v$.calendario.HORAF.$model=a}),type:"time","float-label":e.$t("horafin"),format:"hh:mm a"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","title","onSubmit"]),(0,t.bF)(J,{class:"modal-adicional",modelValue:e.adicional.modalFechaAdic,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.adicional.modalFechaAdic=a}),header:!0,title:"Fechas Adicionales",onSubmit:e.grabar},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",A,[(0,t.Lk)("div",D,[(0,t.bF)(G,{error:e.v$.adicional.FH_INICIO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(Z,{modelValue:e.v$.adicional.FH_INICIO.$model,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.v$.adicional.FH_INICIO.$model=a}),options:e.diasDispon,placeholder:"intranet.mensajeria.fecha"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",C,[(0,t.bF)(G,{error:e.v$.adicional.FH_INICIO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(z,{class:"q-if-outlined",modelValue:e.v$.adicional.FH_INICIO.$model,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.v$.adicional.FH_INICIO.$model=a}),type:"time","float-label":e.$t("horainicio"),format:"hh:mm a"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",y,[(0,t.bF)(G,{error:e.v$.adicional.FH_FIN.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(z,{class:"q-if-outlined",modelValue:e.v$.adicional.FH_FIN.$model,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.v$.adicional.FH_FIN.$model=a}),type:"time","float-label":e.$t("horafin"),format:"hh:mm a"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",O,[e.eventName?((0,t.uX)(),(0,t.Wv)(L,{key:0,class:"q-if-outlined no-bottom m-checkbox",modelValue:e.adicional.tutoria,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.adicional.tutoria=a}),label:e.$t("tutoria")},null,8,["modelValue","label"])):(0,t.Q3)("v-if",!0)]),e.adicional.tutoria?((0,t.uX)(),(0,t.CE)("div",$,[(0,t.bF)(G,{count:60},{default:(0,t.k6)(function(){return[(0,t.bF)(w,{class:"q-if-outlined no-bottom",type:"text",modelValue:e.adicional.evento,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.adicional.evento=a}),"float-label":"Nombre del Evento"},null,8,["modelValue"])]}),_:1})])):(0,t.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(J,{class:"modal-adicional",modelValue:e.diasExcluidos.modalDiasExcluidos,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.diasExcluidos.modalDiasExcluidos=a}),header:!0,title:"Días Excluídos",onSubmit:e.grabarDiasExcluidos},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",x,[(0,t.Lk)("div",E,[(0,t.bF)(G,{error:e.v$.diasExcluidos.FH_INICIO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(Z,{modelValue:e.v$.diasExcluidos.FH_INICIO.$model,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.v$.diasExcluidos.FH_INICIO.$model=a}),options:e.diasDisponFechaInicio,placeholder:"fechainicio"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",N,[(0,t.bF)(G,{error:e.v$.diasExcluidos.FH_FIN.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(Z,{modelValue:e.v$.diasExcluidos.FH_FIN.$model,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.v$.diasExcluidos.FH_FIN.$model=a}),options:e.diasDisponFechaFin,placeholder:"fechafin"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(J,{class:"modal-horarios",modelValue:e.modalHorarios,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.modalHorarios=a}),title:"Replicar horarios",onSubmit:e.saveHorarios,btnLoad:e.btnLoad},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",M,[(0,t.Lk)("div",q,[(0,t.bF)(ee,{style:(0,r.Tr)({"max-height":e.isLess?"100%":"400px"}),data:e.copyDocentes,columns:e.columnsDodentes,selection:e.selectionDocente,selected:e.selectedDocentes,"onUpdate:selected":a[16]||(a[16]=function(a){return e.selectedDocentes=a}),filter:e.searchDocente,"hide-bottom":"","row-key":"PROFCOD"},{"top-right":(0,t.k6)(function(i){return[(0,t.bF)(B,{"hide-underline":"",color:"primary",modelValue:e.searchDocente,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.searchDocente=a})},null,8,["modelValue"])]}),_:1},8,["style","data","columns","selection","selected","filter"])])])]}),_:1},8,["modelValue","onSubmit","btnLoad"]),e.enableSaveMasive?((0,t.uX)(),(0,t.CE)(t.FK,{key:2},[((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[e.isLess||e.sieInfo.esFamilia?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(ne,{key:0,position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(oe,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,t.k6)(function(){return[(0,t.bF)(ae,{color:"secondary",icon:"print",onClick:e.printHorarioCitas},null,8,["onClick"]),e.acceso?((0,t.uX)(),(0,t.Wv)(ae,{key:0,color:"secondary",icon:"timer",onClick:e.openSeleccionarHorarios},{default:(0,t.k6)(function(){return[(0,t.bF)(ie,{anchor:"center left",self:"center right"},{default:(0,t.k6)(function(){return n()(a[21]||(a[21]=[(0,t.eW)("Seleccionar horario",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:1})]}),_:1}))],64))],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:3},[e.isLess||e.sieInfo.esFamilia?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(ne,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(R,{fab:"",round:"",color:"secondary",icon:"print",onClick:e.printHorarioCitas},null,8,["onClick"])]}),_:1}))],64)),e.isLess&&!e.sieInfo.esFamilia?((0,t.uX)(),(0,t.Wv)(re,{key:4,class:"fixed-top q-toolbar-menu",inverted:""},{default:(0,t.k6)(function(){return[(0,t.bF)(te),(0,t.bF)(R,{flat:"",round:"",dense:"",icon:"print",color:"white",onClick:e.printHorarioCitas},null,8,["onClick"]),e.acceso&&e.enableSaveMasive&&e.profesor?((0,t.uX)(),(0,t.Wv)(R,{key:0,flat:"",round:"",dense:"",icon:"timer",color:"white",onClick:e.openSeleccionarHorarios},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:1})):(0,t.Q3)("v-if",!0)]}),_:1})}var Y=i(76080),L=i.n(Y),V=i(45254),R=i.n(V),Q=(i(71225),i(52133),i(10239),i(50310),i(5962),i(90095),i(6724),i(83190),i(13715),i(83972)),S=i(6123),X=i(93616),W=i(80340),T=i(57668),U=i(30640),j=i(51082),P=i(30545),K=i(80660),z=i(18105),G=i(82640),J=i(81288),Z=i(99637),B=i(33001),ee=i(982),ae=i(69027),ie=i(2819),oe=i(13813),ne={grabarInfo:function(){var e=R()(L()().m(function e(a,i){var o;return L()().w(function(e){while(1)switch(e.n){case 0:return o={PROFCOD:i.dataAtencion.PROFCOD,DIA:a.dia.diasem,HORAI:a.HORAI,HORAF:a.HORAF,MINATE:i.dataAtencion.MINATE},e.a(2,K.$http.post("api/Hyowhorariodeatencion/grabarHorario",{datos:o}).then(function(e){return{message:"mensajes."+e.json,status:"success"}}).catch(function(e){return console.log("e",e),{message:e.split(".")[1],status:"warning"}}))}},e)}));function a(a,i){return e.apply(this,arguments)}return a}()},te={setup:function(){var e=(0,Q.fG)();return{v$:e}},components:{QPageSticky:S._U,QFab:S.l6,QFabAction:S.B$,QDatetime:S.T5,QCheckbox:S.vZ,QCollapsible:S.eS,QChip:S.wQ,sieSelect:X.A,sieVacio:W.A,sieModal:U.A,sieDate:j.A,QTable:P.A,QPage:S.Tu,QItem:S.H0,QItemMain:S.mF,QInput:S.ie,QItemSide:S.n1,QBtn:S.Il,QCard:S.C$,QIcon:S.bP,QList:S.Mb,QCardTitle:S.u0,QCardSeparator:S.d6,QField:S.Om,QSearch:S.Ks,QTooltip:S.nC,QToolbar:S.ZV,QToolbarTitle:S.r_},data:function(){var e=this;return{sieInfo:(0,T["default"])(),sie:{perfil:!1,idHorario:null,dataAtencion:{},diasSemana:[{dia:1,desc:"Lunes",diasem:"L",abr:"Lun"},{dia:2,desc:"Martes",diasem:"M",abr:"Mar"},{dia:3,desc:"Miércoles",diasem:"W",abr:"Mié"},{dia:4,desc:"Jueves",diasem:"J",abr:"Jue"},{dia:5,desc:"Viernes",diasem:"V",abr:"Vie"},{dia:6,desc:"Sábado",diasem:"S",abr:"Sáb"}],dataAdicional:[],listaEventos:{},minateTodos:!1},excluidos:[],profesores:[],profesor:"",perfiles:[],diasDisponibles:[],dataMes:[],permiteEditar:3===(0,T["default"])().ruta.nivel,acceso:(0,T["default"])().ruta.nivel>=2,calendario:{modalAgregar:!1,title:"",dia:{},HORAI:"",HORAF:""},eventName:["0048"].indexOf((0,T["default"])().colcod)>=0,isAmerica:["0540"].indexOf((0,T["default"])().colcod)>=0,adicional:{modalFechaAdic:!1,tutoria:!1,evento:"",FH_INICIO:"",FH_FIN:""},diasExcluidos:{modalDiasExcluidos:!1,FH_INICIO:null,FH_FIN:null},enableSaveMasive:!1,modalHorarios:!1,selectedDocentes:[],columnsDodentes:[{name:"USUNOM",label:"Docente",field:"USUNOM",align:"left",sorteable:!1}],selectionDocente:"multiple",searchDocente:null,idatencion:[],btnLoad:!1,mismohorario:[],buttons:[{icon:"file_pdf",label:"Pdf",click:function(){e.printHorarioCitas("pdf")}},{icon:"file_excel",label:"Excel",click:function(){e.printHorarioCitas("xlsx")}}]}},computed:{isLess:function(){return(0,J.isLess)()},copyDocentes:function(){var e=this,a=this.profesores,i=this.mismohorario;return this.profesor&&(a=a.filter(function(a){return a.PROFCOD!==e.profesor.PROFCOD})),i.length&&i.forEach(function(e){a=a.filter(function(a){return a.PROFCOD!==e})}),a}},methods:{date:z.Ay,init:function(){var e=this;return R()(L()().m(function a(){var i,o,n,t,r,l,s;return L()().w(function(a){while(1)switch(a.n){case 0:return"0402"===(0,T["default"])().colcod&&e.sie.diasSemana.push({dia:6,desc:"Sabado",diasem:"S",abr:"Sab"}),a.n=1,K.$http.get("api/Hyowhorariodeatencion/initHorarioAtencion",{params:{cita:!0}});case 1:i=a.v,o=i.excluidos,n=i.profesores,t=i.perfiles,r=i.perfil,l=i.profesor,s=i.enableSaveMasive,e.sie.perfil=r,e.profesores=n,e.profesor=l,e.excluidos=o,e.perfiles=t,e.enableSaveMasive=s;case 2:return a.a(2)}},a)}))()},cambiarProfe:function(e){var a=this;this.selectedDocentes=[];var i=e.PROFCOD,o=e.USUCOD;K.$http.get("api/HyoProfes/obtDatos",{params:{campos:["P.PROFCOD","MINATE"],profcod:i}}).then(function(e){e.json[0]&&e.json[0].MINATE&&(e.json[0].MINATE=parseInt(e.json[0].MINATE)),a.sie.dataAtencion=e.json[0]}),this.cargaCalendario(i),this.cargaAdicionales(o)},cargaCalendario:function(e){var a=this;this.sie.listaEventos={1:[],2:[],3:[],4:[],5:[],6:[]},K.$http.get("api/Hyowhorariodeatencion/obtHorarioAtencion",{params:{profcod:e,mes:(new Date).getMonth(),ano:this.sieInfo.ano}}).then(function(e){a.idatencion=e.json.map(function(e){return e.ID_ATENCION}),(0,Z["default"])(e.json,function(e){e.DIASEM&&a.sie.listaEventos[e.DIASEM].push(e)})})},cargaAdicionales:function(e){var a=this;this.sie.dataAdicional=[],K.$http.get("api/HyoCitahorario/obtHorarioAdicional",{params:{usucod:e}}).then(function(i){return i.json[0]&&null===i.json[0].FH_INICIO?(a.sie.dataAdicional=[],a.sie.dataExcluidos=[]):(a.sie.dataAdicional=i.json.filter(function(e){return 0!==e.FLAG}),a.sie.dataExcluidos=(0,B.filterArray)(0,{field:"FLAG",list:i.json})),K.$http.get("api/HyoCitahorario/obtIdHorario",{params:{usucod:e}})}).then(function(e){var i=e.json;i.length>0?a.sie.idHorario=i[0].ID_HORARIO:a.sie.idHorario=null})},grabarMinutosAtencion:function(){var e=this,a=this.sie,i=this.profesor.PROFCOD;a.dataAtencion.MINATE?a.dataAtencion.MINATE%5!==0?(0,ee["default"])("Los minutos deben ser multiplos de 5","warning"):a.dataAtencion.MINATE>60?(0,ee["default"])("Los minutos deben ser menor o igual a 60","warning"):(a.minateTodos&&delete a.dataAtencion.PROFCOD,K.$http.get("api/HyoProfes/grabarInfo",{params:{profcod:i,data:a.dataAtencion,all:a.minateTodos}}).then(function(a){(0,ee["default"])(e.$t("mensajes."+a.json),"m0001"===a.json?"success":"warning")})):(0,ee["default"])("Debe colocar los minutos de atención","warning")},agregarCalendario:function(e){this.v$.calendario.$reset(),this.calendario.HORAI="",this.calendario.HORAF="",this.calendario.dia=e,this.calendario.modalAgregar=!0,this.calendario.title=e.desc},grabarData:function(){var e=this;this.v$.calendario.$touch();var a=this.calendario.dia;if(this.sie.dataAtencion.MINATE){var i=6e4*this.sie.dataAtencion.MINATE;if(!this.v$.calendario.$error)if(this.calendario.HORAI>this.calendario.HORAF)(0,ee["default"])("La hora de Inicio no puede ser mayor a la hora Fin","warning");else if(new Date(this.calendario.HORAF).getTime()-new Date(this.calendario.HORAI).getTime()<i)(0,ee["default"])("El tiempo de atención es de mínimo "+this.sie.dataAtencion.MINATE+" minutos","warning");else if(this.sie.listaEventos[a.dia]&&this.sie.listaEventos[a.dia].length>=0){var o=0;(0,Z["default"])(this.sie.listaEventos[a.dia],function(a){var i=(0,z.Ay)(e.calendario.HORAI,"HH:mm"),n=(0,z.Ay)(e.calendario.HORAF,"HH:mm"),t=(0,z.Ay)(a.HORAI,"HH:mm"),r=(0,z.Ay)(a.HORAF,"HH:mm");i>t&&i>r&&n>t&&n>r||i===n||o++}),o>0?(0,ee["default"])("Este horario de atención no esta disponible","warning"):ne.grabarInfo(this.calendario,this.sie).then(function(a){(0,ee["default"])(e.$t(a.message),a.status),e.cargaCalendario(e.sie.dataAtencion.PROFCOD),e.calendario.modalAgregar=!1})}else ne.grabarInfo(this.calendario,this.sie).then(function(a){(0,ee["default"])(e.$t(a.message),a.status),e.cargaCalendario(e.sie.dataAtencion.PROFCOD),e.calendario.modalAgregar=!1})}else(0,ee["default"])("Debe colocar los minutos de atención","warning")},eliminaCaldendario:function(e){var a=this;event.stopPropagation(),(0,ae.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){K.$http.get("api/Hyowhorariodeatencion/eliminaHorario",{params:{id:e.ID_ATENCION}}).then(function(e){(0,ee["default"])(a.$t("mensajes.m0006."+e.json),"ok"===e.json?"success":"warning"),a.cargaCalendario(a.sie.dataAtencion.PROFCOD)})})},agregarFechaAdicional:function(){this.v$.adicional.$reset(),this.adicional.FH_INICIO="",this.adicional.FH_FIN="",this.adicional.modalFechaAdic=!0,this.adicional.tutoria=!1,this.adicional.evento=""},grabar:function(){var e=this;this.v$.adicional.$touch();var a=this.profesor.USUCOD;if(!this.v$.adicional.$error){var i={ID_HORARIO:this.sie.idHorario};this.adicional.FH_FIN=(0,z.Ay)(new Date(new Date(this.adicional.FH_INICIO).getFullYear(),new Date(this.adicional.FH_INICIO).getMonth(),new Date(this.adicional.FH_INICIO).getDate(),new Date(this.adicional.FH_FIN).getHours(),new Date(this.adicional.FH_FIN).getMinutes()),"YYYY-MM-DDTHH:mm:ss.SSSZ"),i.FH_INICIO=this.adicional.FH_INICIO,i.FH_FIN=this.adicional.FH_FIN,this.adicional.tutoria&&(i.TUTORIA=this.adicional.tutoria,i.DESCRIPCION=this.adicional.evento);var o=[];o.push(i),new Date(this.adicional.FH_FIN).getTime()>new Date(this.adicional.FH_INICIO).getTime()?K.$http.get("api/HyoCitahorario/registraHorarios",{params:{usucod:a,data:o}}).then(function(i){(0,ee["default"])(e.$t("mensajes."+i.json),"m0001"===i.json?"success":"warning"),e.adicional.modalFechaAdic=!1,e.cargaAdicionales(a)}):(0,ee["default"])("La hora de Inicio no puede ser mayor a la hora Fin","warning")}},eliminarAdicional:function(e){var a=this;event.stopPropagation(),delete e.ID_HORARIO_USUCOD;var i=this.profesor.USUCOD;delete e.FECHA,(0,ae.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){K.$http.post("api/HyoCitahorario/eliminarDetalle",{datos:e}).then(function(e){(0,ee["default"])(a.$t("mensajes.m0006."+e.json),"ok"===e.json?"success":"warning"),a.cargaAdicionales(i)})})},printHorarioCitas:function(e){var a=this.profesor?this.profesor.PROFCOD:null,i={ano:this.sieInfo.ano,repcod:"reporteHorarios",formato:e};a&&(i.profcod=a),(0,ie.exportFilePhp)(i,"intranet/reporte-node/reporte","Reporte de Horarios")},diasDispon:function(e){var a=["0"],i=new Date(e).getDay()+"",o=(0,z.Ay)(e,"DD/MM"),n=(0,z.Ay)(e,"YYYY/MM/DD"),t=(0,z.Ay)(new Date,"YYYY/MM/DD"),r=(0,z.Ay)(e,"YYYY/MM/DD"),l=(0,oe["default"])(this.sie.dataExcluidos,function(e){return(0,z.Ay)(e.FH_INICIO,"YYYY/MM/DD")}),s=this.excluidos.indexOf(o)<0&&a.indexOf(i)<0&&r>t&&l.indexOf(n)<0;return s},agregarDiasExcluidos:function(){this.v$.diasExcluidos.$reset(),this.diasExcluidos.modalDiasExcluidos=!0,this.diasExcluidos.FH_INICIO=null,this.diasExcluidos.FH_FIN=null},grabarDiasExcluidos:function(){var e=this;this.v$.adicional.$touch();var a=this.profesor.USUCOD;if(!this.v$.diasExcluidos.$error){var i={ID_HORARIO:this.sie.idHorario};i.FH_INICIO=this.diasExcluidos.FH_INICIO,i.FH_FIN=this.diasExcluidos.FH_FIN,new Date(this.diasExcluidos.FH_FIN).getTime()>=new Date(this.diasExcluidos.FH_INICIO).getTime()?K.$http.get("api/HyoCitahorario/registraDiasExcluidos",{params:{usucod:a,data:i}}).then(function(i){(0,ee["default"])(e.$t("mensajes."+i.json),"m0001"===i.json?"success":"warning"),e.diasExcluidos.modalFechaAdic=!1,e.cargaAdicionales(a)}):(0,ee["default"])("La fecha de Inicio no puede ser mayor a la fecha de Fin","warning")}},diasDisponFechaInicio:function(e){var a=["0"],i=new Date(e).getDay()+"",o=(0,z.Ay)(e,"DD/MM"),n=(0,z.Ay)(e,"YYYY/MM/DD"),t=(0,z.Ay)(new Date,"YYYY/MM/DD"),r=(0,z.Ay)(e,"YYYY/MM/DD"),l=(0,oe["default"])(this.sie.dataExcluidos,function(e){return(0,z.Ay)(e.FH_INICIO,"YYYY/MM/DD")}),s=(0,oe["default"])(this.sie.dataAdicional,function(e){return(0,z.Ay)(e.FH_INICIO,"YYYY/MM/DD")}),c=this.excluidos.indexOf(o)<0&&a.indexOf(i)<0&&r>=t&&l.indexOf(n)<0&&s.indexOf(n)<0;return c},diasDisponFechaFin:function(e){var a=["0"],i=new Date(e).getDay()+"",o=(0,z.Ay)(e,"DD/MM"),n=(0,z.Ay)(e,"YYYY/MM/DD"),t=(0,z.Ay)(new Date,"YYYY/MM/DD"),r=(0,z.Ay)(e,"YYYY/MM/DD"),l=(0,oe["default"])(this.sie.dataExcluidos,function(e){return(0,z.Ay)(e.FH_INICIO,"YYYY/MM/DD")}),s=(0,oe["default"])(this.sie.dataAdicional,function(e){return(0,z.Ay)(e.FH_INICIO,"YYYY/MM/DD")}),c=this.excluidos.indexOf(o)<0&&a.indexOf(i)<0&&r>=t&&l.indexOf(n)<0&&s.indexOf(n)<0;return c},openSeleccionarHorarios:function(){this.modalHorarios=!0,this.mismosHorarios()},mismosHorarios:function(){var e=this;return R()(L()().m(function a(){var i;return L()().w(function(a){while(1)switch(a.n){case 0:return i=e.idatencion,a.n=1,K.$http.post("api/Hyowhorariodeatencion/mismosHorarios",{idatencion:i});case 1:e.mismohorario=a.v;case 2:return a.a(2)}},a)}))()},saveHorarios:function(){var e=this;return R()(L()().m(function a(){var i,o,n,t,r;return L()().w(function(a){while(1)switch(a.p=a.n){case 0:return e.btnLoad=!0,i=e.idatencion,o=e.selectedDocentes.map(function(e){return e.PROFCOD}),a.p=1,a.n=2,K.$http.post("api/Hyowhorariodeatencion/saveHorarios",{idatencion:i,profcods:o});case 2:n=a.v,e.mismosHorarios(),(0,ee["default"])(n,"success"),a.n=4;break;case 3:a.p=3,r=a.v,t=r.error,(0,ee["default"])(t.message,"error");case 4:e.btnLoad=!1;case 5:return a.a(2)}},a,null,[[1,3]])}))()}},validations:function(){var e={calendario:{HORAI:{required:G.mw},HORAF:{required:G.mw}},adicional:{FH_INICIO:{required:G.mw},FH_FIN:{required:G.mw}},diasExcluidos:{FH_INICIO:{required:G.mw},FH_FIN:{required:G.mw}}};return e},created:function(){this.init()}},re=i(12807);const le=(0,re.A)(te,[["render",w]]);var se=le}}]);