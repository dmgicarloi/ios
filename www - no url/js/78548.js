"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[78548],{78548:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(8445),a=n.n(i),o=n(61758),r=n(58790),l={class:"intranet--galeria q-pa-sm col column"},s={class:"row q-col-gutter-sm"},u={class:"row q-pl-md card-title"},c={class:"row q-pl-md card-subtitle"},d={class:"row"},f={key:0,class:"col column items-center justify-center background-card"},g=["src"],m={key:0,class:"absolute",style:{top:"0",left:"0",right:"0",bottom:"0",margin:"auto",height:"50px"},version:"1.1",viewBox:"0 0 68 48",width:"100%"},p={key:1},v={class:"row"},C={class:"col column items-end justify-center q-pa-md"},h={class:"text-primary text-weight-medium q-body-2"};function I(e,t){var n=(0,o.g2)("header-btn"),i=(0,o.g2)("q-spinner-oval"),I=(0,o.g2)("q-inner-loading"),k=(0,o.g2)("q-icon"),b=(0,o.g2)("q-item-main"),A=(0,o.g2)("q-item"),y=(0,o.g2)("q-list"),L=(0,o.g2)("q-popover"),F=(0,o.g2)("q-btn"),q=(0,o.g2)("q-card-title"),Q=(0,o.g2)("q-card-separator"),_=(0,o.g2)("router-link"),E=(0,o.g2)("q-card-main"),O=(0,o.g2)("q-card"),w=(0,o.g2)("q-infinite-scroll"),R=(0,o.g2)("sie-vacio"),G=(0,o.g2)("q-card-section"),S=(0,o.g2)("crear-categoria"),T=(0,o.gN)("close-overlay");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(O,{class:"col column",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{name:"Galeria",buttons:e.buttons},null,8,["buttons"]),(0,o.bF)(G,{class:"col column"},{default:(0,o.k6)(function(){return["S"===e.stepLoading?((0,o.uX)(),(0,o.Wv)(I,{key:0,visible:"S"===e.stepLoading},{default:(0,o.k6)(function(){return[(0,o.bF)(i,{size:"50px",color:"primary"})]}),_:1},8,["visible"])):"Y"===e.stepLoading?((0,o.uX)(),(0,o.Wv)(w,{key:1,class:"col-12",handler:e.loadMore,ref:"infiniteScroll"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",s,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.listadoCategorias,function(n,i){return(0,o.uX)(),(0,o.CE)("div",{key:i,class:"col-xs-12 col-sm-6 col-xs-6 col-xl-4"},[(0,o.bF)(O,{flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(q,{class:"overflow-hidden"},{right:(0,o.k6)(function(){return[e.sieInfo.ruta.nivel>=2&&n.PROPIA?((0,o.uX)(),(0,o.Wv)(F,{key:0,round:"",flat:"",icon:"more_vert"},{default:(0,o.k6)(function(){return[(0,o.bF)(L,null,{default:(0,o.k6)(function(){return[(0,o.bF)(y,{class:"no-border",link:""},{default:(0,o.k6)(function(){return[e.sieInfo.ruta.nivel>=2?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(A,{key:0,onClick:function(t){return e.editCategoria(i,n.IDCATEGORIA,n)}},{default:(0,o.k6)(function(){return[(0,o.bF)(k,{class:"qicon",name:"edit"}),(0,o.bF)(b,{class:"qitemmain",label:e.$t("botones.editar")},null,8,["label"])]}),_:1},8,["onClick"])),[[T]]):(0,o.Q3)("v-if",!0),3===e.sieInfo.ruta.nivel?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(A,{key:1,onClick:function(t){return e.deleteCategoria(i,n.IDCATEGORIA)}},{default:(0,o.k6)(function(){return[(0,o.bF)(k,{class:"qicon",name:"delete"}),(0,o.bF)(b,{class:"qitemmain",label:e.$t("botones.eliminar")},null,8,["label"])]}),_:1},8,["onClick"])),[[T]]):(0,o.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,o.Q3)("v-if",!0)]}),default:(0,o.k6)(function(){return[(0,o.Lk)("div",u,(0,r.v_)(n.DESCRIPCION),1),(0,o.Lk)("div",c,(0,r.v_)(e.date(n.FH_CREACION,"DD-MM-YYYY")),1)]}),_:2},1024),(0,o.bF)(Q),(0,o.bF)(E,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.imagenes,function(i,r){return(0,o.uX)(),(0,o.Wv)(_,{key:r,class:"col column col-xs-6 q-pa-xs",onClick:function(t){return e.editCategoria(r,n.IDCATEGORIA,n)},to:{name:"".concat(e.modulo,".galeria.editar"),params:{id:n.IDCATEGORIA}}},{default:(0,o.k6)(function(){return[""!==i.ARCHIVO?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("img",{class:"p-card",src:i.ARCHIVO},null,8,g),"video"===i.TIPO?((0,o.uX)(),(0,o.CE)("svg",m,a()(t[3]||(t[3]=[(0,o.Lk)("path",{class:"ytp-large-play-button-bg",d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#212121","fill-opacity":"0.8"},null,-1),(0,o.Lk)("path",{d:"M 45,24 27,14 27,34",fill:"#fff"},null,-1)])))):(0,o.Q3)("v-if",!0)])):((0,o.uX)(),(0,o.CE)("div",p,a()(t[4]||(t[4]=[(0,o.Lk)("div",{class:"p-card p-card-empty"},null,-1)]))))]}),_:2},1032,["onClick","to"])}),128))])]}),_:2},1024),(0,o.bF)(E,{class:"col column"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",v,[(0,o.Lk)("div",C,[(0,o.Lk)("span",h,(0,r.v_)(n.TOTAL)+" Fotos/Videos",1)])])]}),_:2},1024)]}),_:2},1024)])}),128))])]}),_:1},8,["handler"])):"N"===e.stepLoading?((0,o.uX)(),(0,o.Wv)(R,{key:2,class:"col",icon:"wallpaper",title:"No se encontraron resultados Al crear una galería se podrá apreciar aquí"})):(0,o.Q3)("v-if",!0)]}),_:1})]}),_:1}),(0,o.bF)(S,{modelValue:e.opened,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.opened=t}),onSave:e.grabarCategoria,name:e.category,"onUpdate:name":t[1]||(t[1]=function(t){return e.category=t}),anio:e.anio,"onUpdate:anio":t[2]||(t[2]=function(t){return e.anio=t})},null,8,["modelValue","onSave","name","anio"])])}var k=n(76080),b=n.n(k),A=n(45254),y=n.n(A),L=(n(10239),n(89571),n(6123)),F=n(88567),q=n(95718),Q=n(80340),_=n(88477),E=n(74187),O=n(57668),w=n(99637),R=n(43920),G=n(982),S=n(69027),T=n(81288),V=n(18105),X=n(80660),D=n(8261),M={components:{QCard:F.A,QCardSection:q.A,QPageSticky:L._U,QPopover:L.VM,QVideo:L.d7,QInnerLoading:L.SQ,QSpinnerOval:L.VA,SieVacio:Q.A,CrearCategoria:_.A,VueCropper:E.VueCropper,QInfiniteScroll:L.nN,QCardTitle:L.u0,QBtn:L.Il,QList:L.Mb,QItem:L.H0,QIcon:L.bP,QItemMain:L.mF,QCardSeparator:L.d6,QCardMain:L.d1},data:function(){return{listaCategorias:[],idInicial:0,idFinal:0,opened:!1,category:"",stepLoading:"S",sieInfo:(0,O["default"])(),modulo:"intranet",anio:""}},methods:{date:V.Ay,grabarCategoria:function(){var e=this;return y()(b()().m(function t(){return b()().w(function(t){while(1)switch(t.n){case 0:e.refreshLoadMore();case 1:return t.a(2)}},t)}))()},setCard:function(e){var t=e.imagenes.length;if(t>0)for(var n=0;n<t;n++)e.imagenes[n].ARCHIVO=(0,R.A)(e.imagenes[n]);if(t<4)for(var i=t;i<4;i++)e.imagenes.push({ARCHIVO:"",TIPO:""})},addFirst:function(e,t){var n=this;(0,w["default"])(e,function(e){n.setCard(e),t.unshift(e)})},addLast:function(e,t){var n=this;(0,w["default"])(e,function(e){n.setCard(e),t.push(e)})},newListCategory:function(e,t){e.nuevos.length>0&&(this.addFirst(e.nuevos,t),this.idInicial=e.nuevos[0].IDCATEGORIA,this.idFinal=e.nuevos[e.nuevos.length-1].IDCATEGORIA),e.antiguos.length>0&&(this.addLast(e.antiguos,t),this.idInicial=e.antiguos[e.antiguos.length-1].IDCATEGORIA),e.nuevos.length>0&&e.antiguos.length>0&&(this.idFinal=e.nuevos[e.nuevos.length-1].IDCATEGORIA)},getListCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{incremento:8};X.$http.get("api/HyoGaleria/listaCategorias",{params:t}).then(function(t){e(t.json)})},loadMore:function(e,t){var n=this,i=0===this.idInicial?{incremento:8}:{idInicial:this.idInicial,idFinal:this.idFinal,incremento:8};this.getListCategory(function(e){n.newListCategory(e,n.listaCategorias),(e.nuevos.length>0||e.antiguos.length>0)&&t()},i)},refreshLoadMore:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.getListCategory(function(n){e.newListCategory(n,e.listaCategorias),e.listaCategorias.length>0?e.stepLoading="Y":e.stepLoading="N",t()},{idInicial:this.idInicial,idFinal:this.idFinal,incremento:1})},deleteCategoria:function(e,t){var n=this;(0,S.confirmar)("¿Está seguro de eliminar?",function(){X.$http.post("api/HyoGaleria/eliminarImgCategoria",{parametros:{codcategoria:t}}).then(function(t){n.listaCategorias.splice(e,1),(0,G["default"])("Eliminado correctamente.")})})},editCategoria:function(e,t,n){this.$router.push({name:"".concat(this.modulo,".galeria.editar"),params:{id:n.IDCATEGORIA}})}},computed:{isGreater:function(){return(0,T.isGreater)()},buttons:function(){var e=this,t=[];return"005"!==this.sieInfo.tipcod&&"004"!==this.sieInfo.tipcod&&3===this.sieInfo.ruta.nivel&&t.push({icon:"plus",label:"Crear Galería",click:function(){e.opened=!0}}),t},listadoCategorias:function(){return(0,D["default"])(this.listaCategorias,"IDCATEGORIA")}},created:function(){this.modulo=this.sieInfo.modulo,this.refreshLoadMore()}},x=n(12807);const H=(0,x.A)(M,[["render",I],["__scopeId","data-v-561936d4"]]);var P=H}}]);