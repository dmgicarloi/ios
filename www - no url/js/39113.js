"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[39113],{39113:function(o,e,r){r.r(e),r.d(e,{default:function(){return H}});var n=r(8445),t=r.n(n),a=r(61758),i=r(58790),l={class:"column",style:{display:"grid"}},s={class:"row"},c={class:"row justify-end col"},u={class:"q-ma-sm"},d={class:"q-ma-sm"},f={class:"col q-card"},p={class:"row"},m={key:0,class:"row justify-around"};function h(o,e){var r=(0,a.g2)("header-btn"),n=(0,a.g2)("q-btn"),h=(0,a.g2)("q-toolbar"),b=(0,a.g2)("q-input"),v=(0,a.g2)("q-field"),g=(0,a.g2)("sie-modal"),k=(0,a.g2)("q-search"),M=(0,a.g2)("q-td"),w=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(r,{name:"Tipo Horarios",buttons:o.buttons},null,8,["buttons"]),(0,a.bF)(g,{modelValue:o.estadoModal,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.estadoModal=e}),title:"Tipo Horario",ok:!1,noClose:!0,escClick:!0,esc:!0},{footerMobile:(0,a.k6)(function(){return[(0,a.Lk)("div",s,[(0,a.bF)(n,{class:"q-ma-xs",dense:"",round:"",flat:"",icon:"close",onClick:o.cancelarAgregacion},null,8,["onClick"]),(0,a.bF)(n,{class:"q-ma-xs",dense:"",round:"",flat:"",icon:"save",onClick:o.ejecutarAccion},null,8,["onClick"])])]}),footer:(0,a.k6)(function(){return[(0,a.bF)(h,{inverted:""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",c,[(0,a.bF)(n,{class:"q-ma-xs style-button",dense:"",color:"secondary",onClick:o.cancelarAgregacion},{default:(0,a.k6)(function(){return t()(e[3]||(e[3]=[(0,a.eW)("Cancelar",-1)]))}),_:1},8,["onClick"]),(0,a.bF)(n,{class:"q-ma-xs style-button",dense:"",color:"primary",onClick:o.ejecutarAccion},{default:(0,a.k6)(function(){return[(0,a.eW)((0,i.v_)(o.lbAccion),1)]}),_:1},8,["onClick"])])]}),_:1})]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",u,[(0,a.bF)(v,{error:o.v$.datosModal.NOMBRE.$error,"error-label":o.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(b,{class:"q-if-outlined","float-label":"Nombre",modelValue:o.v$.datosModal.NOMBRE.$model,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.v$.datosModal.NOMBRE.$model=e}),placeholder:"Escriba un nuevo nombre...",maxlength:"50"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])])]}),_:1},8,["modelValue"]),(0,a.Lk)("div",d,[(0,a.Lk)("div",f,[(0,a.Lk)("div",p,[(0,a.bF)(k,{class:"q-if-outlined col",modelValue:o.filtro,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.filtro=e})},null,8,["modelValue"])]),(0,a.bF)(w,{data:o.tipos,columns:o.columns,filter:o.filtro,style:(0,i.Tr)({height:o.alto+"px"})},{"top-right":(0,a.k6)(function(){return t()(e[4]||(e[4]=[]))}),"body-cell-ACCIONES":(0,a.k6)(function(e){return[(0,a.bF)(M,{props:e},{default:(0,a.k6)(function(){return[e.row.PERMANENTE?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("div",m,[(0,a.bF)(n,{color:"blue",icon:"edit",flat:"",dense:"",round:"",onClick:function(r){return o.mostrarModal(e.row)}},null,8,["onClick"]),(0,a.bF)(n,{color:"red",icon:"delete",flat:"",dense:"",round:"",onClick:function(r){return o.eliminarHorario(e.row)}},null,8,["onClick"])]))]}),_:2},1032,["props"])]}),_:1},8,["data","columns","filter","style"])])])])}var b=r(76080),v=r.n(b),g=r(45254),k=r.n(g),M=(r(10239),r(48426),r(68017),r(83972)),w=r(30545),C=r(11654),T=r(30640),E=r(6123),$=r(82640),A=r(57668),R={setup:function(){var o=(0,M.fG)();return{v$:o}},components:{QTable:w.A,QBtn:C.A,sieModal:T.A,QTd:E.Ef,QToolbar:E.ZV,QPopupEdit:E.GT,QField:E.Om,QInput:E.ie,QSearch:E.Ks},data:function(){return{alto:null,permiso:(0,A["default"])().ruta.nivel,lbAccion:"",estadoModal:!1,filtro:"",datosModal:{TH_ID:null,NOMBRE:null},tipos:[],columns:[{name:"NOMBRE",label:"Nombre",field:"NOMBRE",align:"left",sortable:!0}]}},mounted:function(){this.obtenerTipos(),3===this.permiso&&this.columns.push({name:"ACCIONES",label:"Acciones",field:"ACCIONES",align:"center",style:"width: 90px"})},validations:function(){var o={NOMBRE:{required:$.mw}};return{datosModal:o}},computed:{buttons:function(){var o=[{label:"Agregar Tipo",icon:"add",click:this.mostrarModal,permiso:">=2"}];return o}},methods:{handleResize:function(){var o=180;this.alto=window.innerHeight-o},mostrarModal:function(o){o.TH_ID?(this.lbAccion="Actualizar",this.datosModal=Object.assign({},o)):(this.limpiarCampos(),this.lbAccion="Agregar"),this.estadoModal=!0},ejecutarAccion:function(){this.v$.$touch(),this.v$.$error||(this.datosModal.TH_ID?this.actualizarTipo():this.agregarTipo(),this.estadoModal=!1,this.limpiarCampos())},agregarTipo:function(){var o=this;return k()(v()().m(function e(){var r,n,t;return v()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,r={NOMBRE:o.datosModal.NOMBRE.trim()},e.n=1,o.$http.post("api/RsTipoHorarioController/addRsTipoHorario",{data:r});case 1:n=e.v,1===n.code&&(o.obtenerTipos(),o.$notify("Agregado","success")),e.n=3;break;case 2:e.p=2,t=e.v,o.$notify(t.error.message,"error");case 3:return e.a(2)}},e,null,[[0,2]])}))()},actualizarTipo:function(){var o=this;return k()(v()().m(function e(){var r,n,t;return v()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,r={NOMBRE:o.datosModal.NOMBRE.trim()},e.n=1,o.$http.post("api/RsTipoHorarioController/updateRsTipoHorario",{id:o.datosModal.TH_ID,params:r});case 1:n=e.v,1===n.code&&(o.obtenerTipos(),o.$notify("Actualizado","success")),e.n=3;break;case 2:e.p=2,t=e.v,o.$notify(t.error.message,"error");case 3:return e.a(2)}},e,null,[[0,2]])}))()},eliminarHorario:function(o){var e=this;return k()(v()().m(function r(){var n,t,a;return v()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.n=1,e.$confirmar("Â¿Esta Ud. Seguro de Eliminar el Tipo?","warning",!0);case 1:if(n=r.v,!n){r.n=5;break}return r.p=2,o={id:o.TH_ID},r.n=3,e.$http.delete("api/RsTipoHorarioController/deleteRsTipoHorario",{data:o});case 3:t=r.v,1===t.code&&(e.obtenerTipos(),e.$notify("Eliminado","success")),r.n=5;break;case 4:r.p=4,a=r.v,e.$notify(a.error.message,"error");case 5:return r.a(2)}},r,null,[[2,4]])}))()},obtenerTipos:function(){var o=this;return k()(v()().m(function e(){var r;return v()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o.$http.get("api/RsTipoHorarioController/getRsTipoHorario");case 1:o.tipos=e.v,e.n=3;break;case 2:e.p=2,r=e.v,o.$notify(r.error.message,"error");case 3:return e.a(2)}},e,null,[[0,2]])}))()},cancelarAgregacion:function(){this.limpiarCampos(),this.estadoModal=!1},limpiarCampos:function(){for(var o in this.datosModal)this.datosModal[o]=null;this.v$.$reset()}},created:function(){var o=this;return k()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:window.addEventListener("resize",o.handleResize),o.handleResize();case 1:return e.a(2)}},e)}))()},unmounted:function(){window.removeEventListener("resize",this.handleResize)}},y=r(12807);const q=(0,y.A)(R,[["render",h]]);var H=q}}]);