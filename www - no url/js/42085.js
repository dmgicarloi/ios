"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[42085],{42085:function(e,a,o){o.r(a),o.d(a,{default:function(){return qa}});o(39866);var t=o(61758),l=o(58790),n={class:"row",style:{height:"77vh"}},r={class:"col-xs-12 col-md-6",style:{height:"77vh",overflow:"auto"}},i={class:"col-xs-12"},s={class:"col-xs-12"},u={class:"col-xs-12"},c={class:"col-xs-12"},d={class:"col-xs-12"},m={class:"col-xs-12"},p={class:"col-xs-12"},f={key:0,class:"col-xs-12"},b={key:1,class:"col-xs-12"},v={key:2,class:"col-xs-12"},h={class:"col-xs-12"},g={class:"col-xs-12"},O={class:"col-xs-12"},I={class:"col-xs-12"},A={class:"col-xs-12"},D={class:"col-xs-12"},S={class:"col-xs-12"},E={class:"col-xs-12"},C={class:"col-xs-12"},F={class:"col-xs-12"},T={class:"col-xs-12"},R={class:"col-xs-12"},P={class:"row"},V={key:0,class:"col-xs-12"},_={key:1,class:"col-xs-12"},k={key:2,class:"col-xs-12"},L={class:"col-xs-12"},U={class:"col-xs-12"},N={key:1,class:"row"},w={class:"col q-pa-xs"},x={key:2,class:"row"},y={class:"col q-pa-xs"},q={class:"col q-pa-xs"},M={key:3,class:"row"},G={class:"col-xs-12 col-sm-4 col-md-6 q-pa-xs"},Y={class:"col-xs-12 col-sm-4 col-md-6 q-pa-xs"},$={class:"col-xs-12 col-sm-4 col-md-6 q-pa-xs"},H={key:0,class:"col-xs-12 col-md-3"},Q={class:"row q-pa-md justify-center"},j={class:"row q-px-sm"},X={class:"col"},z={class:"col"},B={class:"row q-px-sm"},W={class:"col q-chips-small"},J={class:"row q-px-sm"},K={class:"col"},Z={class:"row q-pa-md justify-center"};function ee(e,a){var o=(0,t.g2)("q-tab"),ee=(0,t.g2)("q-tabs"),ae=(0,t.g2)("consultas-ficha-sintomatologica"),oe=(0,t.g2)("q-tab-panel"),te=(0,t.g2)("q-radio"),le=(0,t.g2)("sie-select"),ne=(0,t.g2)("q-select"),re=(0,t.g2)("q-datetime"),ie=(0,t.g2)("q-btn"),se=(0,t.g2)("q-input"),ue=(0,t.g2)("q-chips-input"),ce=(0,t.g2)("sie-editor"),de=(0,t.g2)("q-tab-panels"),me=(0,t.g2)("q-card-section"),pe=(0,t.g2)("q-card"),fe=(0,t.g2)("modalEviarAlerta"),be=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(be,{class:"consultas-brae q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(pe,null,{default:(0,t.k6)(function(){return[(0,t.bF)(me,null,{default:(0,t.k6)(function(){return[(0,t.bF)(ee,{class:"text-teal",align:"left",dense:!0,modelValue:e.tabconsultas,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tabconsultas=a})},{default:(0,t.k6)(function(){return[(0,t.bF)(o,{class:"text-primary","no-caps":"",name:"fichaSintomatologica",label:"Ficha Sintomatológica",onClick:e.tabFicha},null,8,["onClick"]),(0,t.bF)(o,{class:"text-primary","no-caps":"",name:"reportes",label:"Reportes"}),(0,t.bF)(o,{class:"text-primary","no-caps":"",name:"alerta",label:"Mensaje de Alerta"})]}),_:1},8,["modelValue"]),(0,t.bF)(de,{modelValue:e.tabconsultas,"onUpdate:modelValue":a[45]||(a[45]=function(a){return e.tabconsultas=a}),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,t.k6)(function(){return[(0,t.bF)(oe,{name:"fichaSintomatologica"},{default:(0,t.k6)(function(){return[(0,t.bF)(ae)]}),_:1}),(0,t.bF)(oe,{name:"reportes"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",n,[(0,t.Lk)("div",r,[(0,t.Lk)("div",i,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.reporte.repcod=a}),val:"alumnoGrupos",label:"Lista de Alumnos por Grupo",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",s,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.reporte.repcod=a}),val:"declaracionJurada",label:"Detalle de declaración Jurada",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",u,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.reporte.repcod=a}),val:"sinAutorizacion",label:"Personal/Alumnos con Proceso de Autorización Pendiente",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",c,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.reporte.repcod=a}),val:"sinDeclaracionJurada",label:"Sin Formulario de Declaración Jurada",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",d,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.reporte.repcod=a}),val:"fichaSintomatologica",label:"Detalle Fichas Sintomatologicas",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",m,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.reporte.repcod=a}),val:"fichaXPersona",label:"Detalle Fichas Sintomatologicas por Persona",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",p,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.reporte.repcod=a}),val:"reportesAlumnosAutorizados",label:"Reporte de Pases de Ingreso y Asistencia",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),["0057","0325"].includes(e.sie.colcod)?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.reporte.repcod=a}),val:"reporteAsistenciaControl",label:"Control de pases con QR",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])])):(0,t.Q3)("v-if",!0),["0084"].includes(e.sie.colcod)?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.reporte.repcod=a}),val:"controlPasesFichas",label:"Control de Ficha Sintomatológica",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])])):((0,t.uX)(),(0,t.CE)("div",v,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.reporte.repcod=a}),val:"reportesAlumnosMatriculadosAutorizados",label:"Alumnos Matriculados sin Ficha Sintomatológica ",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])])),(0,t.Lk)("div",h,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.reporte.repcod=a}),val:"personalSinFicha",label:"Personal sin Ficha Sintomatológica ",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",g,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.reporte.repcod=a}),val:"vigilanciaSalud",label:"Vigilancia de Salud",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",O,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.reporte.repcod=a}),val:"resumenIngreso",label:"Resumen de Ingreso al Colegio",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",I,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.reporte.repcod=a}),val:"resumenIngresoGeneral",label:"Resumen General de Ingreso al Colegio",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",A,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.reporte.repcod=a}),val:"vacunaXPerfil",label:"Registro de Vacunas",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",D,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.reporte.repcod=a}),val:"pruebaXPerfil",label:"Lista de  Pruebas Covid",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",S,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.reporte.repcod=a}),val:"sinVacuna",label:"Lista de no Vacunados",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",E,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.reporte.repcod=a}),val:"responsablesFichaSintomatologica",label:"Listado de Responsables de Fichas Sintomatológicas",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",C,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.reporte.repcod=a}),val:"seguimientoCasosCovid",label:"Seguimiento Casos Covid",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",F,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.reporte.repcod=a}),val:"vacunasXSalon",label:"Control de Vacunación Alumnos",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",T,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.reporte.repcod=a}),val:"resumenVacunas",label:"Resumen de Vacunas",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])]),(0,t.Lk)("div",R,[(0,t.bF)(te,{class:"q-if-outlined",modelValue:e.reporte.repcod,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.reporte.repcod=a}),val:"vacunasDosis",label:"Detalle de vacunados",onInput:e.cambiaReporte},null,8,["modelValue","onInput"])])]),(0,t.Lk)("div",{class:(0,l.C4)(["col-xs-12 col-md-6",e.isLess?"q-pt-md":""])},[(0,t.Lk)("div",P,[["sinAutorizacion","vigilanciaSalud","declaracionJurada","sinDeclaracionJurada","controlPasesFichas"].includes(e.reporte.repcod)?((0,t.uX)(),(0,t.CE)("div",V,[(0,t.bF)(le,{type:"outlined",modelValue:e.frm.ID_PROCESO,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.frm.ID_PROCESO=a}),options:e.procesos,placeholder:"Proceso",onInput:e.cambiarProceso,val:"ID_PROCESO",label:"TITULO"},null,8,["modelValue","options","onInput"])])):(0,t.Q3)("v-if",!0),["reportesAlumnosAutorizados","reporteAsistenciaControl","fichaSintomatologica","resumenIngreso","sinPrueba"].includes(e.reporte.repcod)?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.bF)(ne,{modelValue:e.frm.PERFIL_DESTINO,"onUpdate:modelValue":a[24]||(a[24]=function(a){return e.frm.PERFIL_DESTINO=a}),options:e.perfilDestino,"float-label":"Perfil Destino",label:"Perfil Destino"},null,8,["modelValue","options"])])):(0,t.Q3)("v-if",!0),["sinVacuna","vacunaXPerfil","vacunasDosis","pruebaXPerfil"].includes(e.reporte.repcod)?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(ne,{modelValue:e.frm.PERFIL_DESTINO,"onUpdate:modelValue":a[25]||(a[25]=function(a){return e.frm.PERFIL_DESTINO=a}),options:e.personalAlumno,"float-label":"Perfil",label:"Perfil"},null,8,["modelValue","options"])])):(0,t.Q3)("v-if",!0)]),["fichaXPersona"].includes(e.reporte.repcod)?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",L,[(0,t.bF)(ne,{modelValue:e.frm.PERFIL_DESTINO,"onUpdate:modelValue":a[26]||(a[26]=function(a){return e.frm.PERFIL_DESTINO=a}),options:e.perfilDestino,"float-label":"Perfil Destino",label:"Perfil Destino",onInput:a[27]||(a[27]=function(a){return e.setUsuarios()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",U,[(0,t.bF)(le,{type:"outlined",modelValue:e.frm.ID_PERSONA,"onUpdate:modelValue":a[28]||(a[28]=function(a){return e.frm.ID_PERSONA=a}),options:e.usuarios,label:"NOMCOMP",val:"ID_PERSONA",placeholder:"Persona"},null,8,["modelValue","options"])])],64)):(0,t.Q3)("v-if",!0),["controlPasesFichas"].includes(e.reporte.repcod)?((0,t.uX)(),(0,t.CE)("div",N,[(0,t.Lk)("div",w,[(0,t.bF)(re,{class:"q-if-outlined",modelValue:e.reporte.fecIni,"onUpdate:modelValue":a[29]||(a[29]=function(a){return e.reporte.fecIni=a}),format:"DD/MM/YYYY","float-label":"Día"},null,8,["modelValue"])])])):["resumenVacunas","alumnoGrupos","vacunaXPerfil","vacunasDosis","sinVacuna","sinAutorizacion","sinDeclaracionJurada"].includes(e.reporte.repcod)?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",x,[(0,t.Lk)("div",y,[(0,t.bF)(re,{class:"q-if-outlined",modelValue:e.reporte.fecIni,"onUpdate:modelValue":a[30]||(a[30]=function(a){return e.reporte.fecIni=a}),format:"DD/MM/YYYY","float-label":e.$t("fechainicio")},null,8,["modelValue","float-label"])]),(0,t.Lk)("div",q,[(0,t.bF)(re,{class:"q-if-outlined",modelValue:e.reporte.fecFin,"onUpdate:modelValue":a[31]||(a[31]=function(a){return e.reporte.fecFin=a}),format:"DD/MM/YYYY","float-label":e.$t("fechafin")},null,8,["modelValue","float-label"])])])),1==e.frm.PERFIL_DESTINO&&["vacunasDosis","alumnoGrupos","controlPasesFichas","reportesAlumnosMatriculadosAutorizados","fichaSintomatologica","reportesAlumnosAutorizados","reporteAsistenciaControl","sinVacuna","sinPrueba","sinAutorizacion","vacunaXPerfil"].includes(e.reporte.repcod)?((0,t.uX)(),(0,t.CE)("div",M,[(0,t.Lk)("div",G,[(0,t.bF)(ne,{modelValue:e.frm.INSTRUCOD,"onUpdate:modelValue":a[32]||(a[32]=function(a){return e.frm.INSTRUCOD=a}),options:e.niveles,label:"Nivel",onInput:a[33]||(a[33]=function(a){return e.cargarGrados()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",Y,[(0,t.bF)(ne,{modelValue:e.frm.GRADOCOD,"onUpdate:modelValue":a[34]||(a[34]=function(a){return e.frm.GRADOCOD=a}),options:e.grados,label:"Grado",onInput:a[35]||(a[35]=function(a){return e.cargarSecciones()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",$,[(0,t.bF)(ne,{modelValue:e.frm.SECCIONCOD,"onUpdate:modelValue":a[36]||(a[36]=function(a){return e.frm.SECCIONCOD=a}),options:e.secciones,label:"Sección",onInput:a[37]||(a[37]=function(){})},null,8,["modelValue","options"])]),["alumnoGrupos","vacunaXPerfil","vacunasDosis","pruebaXPerfil","sinVacuna","sinPrueba","sinAutorizacion"].includes(e.reporte.repcod)?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",H,[(0,t.bF)(le,{type:"outlined",modelValue:e.frm.ID_GRUPO,"onUpdate:modelValue":a[38]||(a[38]=function(a){return e.frm.ID_GRUPO=a}),options:e.grupos,label:"DESCRIPCION",val:"ID_GRUPO",placeholder:"Grupo"},null,8,["modelValue","options"])]))])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",Q,[(0,t.bF)(ie,{class:"q-mx-xs",icon:"file_pdf",color:"secondary",onClick:a[39]||(a[39]=function(a){return e.imprimir("pdf")}),label:"PDF"}),(0,t.bF)(ie,{class:"q-mx-xs",icon:"file_excel",color:"secondary",onClick:a[40]||(a[40]=function(a){return e.imprimir("xlsx")}),label:"EXCEL"})])],2)])]}),_:1}),(0,t.bF)(oe,{name:"alerta"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",j,[(0,t.Lk)("div",X,[(0,t.bF)(se,{class:"q-if-outlined",modelValue:e.msjAlerta.asunto,"onUpdate:modelValue":a[41]||(a[41]=function(a){return e.msjAlerta.asunto=a}),"float-label":"Asunto"},null,8,["modelValue"])]),(0,t.Lk)("div",z,[(0,t.bF)(se,{class:"q-if-outlined",modelValue:e.msjAlerta.correo,"onUpdate:modelValue":a[42]||(a[42]=function(a){return e.msjAlerta.correo=a}),"float-label":"Correo"},null,8,["modelValue"])])]),(0,t.Lk)("div",B,[(0,t.Lk)("div",W,[(0,t.bF)(ue,{class:"q-if-outlined",modelValue:e.etiquetasAlerta,"onUpdate:modelValue":a[43]||(a[43]=function(a){return e.etiquetasAlerta=a}),"float-label":e.$t("etiquetas"),color:"secondary",readonly:""},null,8,["modelValue","float-label"])])]),(0,t.Lk)("div",J,[(0,t.Lk)("div",K,[(0,t.bF)(ce,{modelValue:e.msjAlerta.detalle,"onUpdate:modelValue":a[44]||(a[44]=function(a){return e.msjAlerta.detalle=a})},null,8,["modelValue"])])]),(0,t.Lk)("div",Z,[(0,t.bF)(ie,{class:"q-mx-xs",icon:"save",color:"primary",onClick:e.guardarMsjAlerta,label:e.$t("botones.guardar")},null,8,["onClick","label"]),(0,t.bF)(ie,{class:"q-mx-xs",icon:"send",color:"secondary",onClick:e.abrirModalAlerta,label:e.$t("boletin.mensajesguardar.titulo")},null,8,["onClick","label"])])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1}),e.openModalAlerta?((0,t.uX)(),(0,t.Wv)(fe,{key:0,onCerrarModal:a[46]||(a[46]=function(a){return e.openModalAlerta=!1})})):(0,t.Q3)("v-if",!0)]}),_:1})}var ae=o(76080),oe=o.n(ae),te=o(45254),le=o.n(te),ne=(o(71225),o(52133),o(10239),o(50310),o(5962),o(6724),o(48426),o(83190),o(62692),o(6123)),re=o(96122),ie=o(26697),se=o(53093),ue=o(53811),ce=o(43346),de=o(16648),me=o(88567),pe=o(95718),fe=o(29104),be={class:"row q-pa-sm q-col-gutter-sm"},ve={class:"col-xs-12 col-sm-3"},he={class:"col-xs-12 col-sm-3"},ge={class:"col-xs-12 col-sm-3"},Oe={key:0,class:"row q-pa-sm q-col-gutter-sm"},Ie={class:"col-xs-12 col-md-2"},Ae={class:"col-xs-12 col-md-2"},De={class:"col-xs-12 col-sm-2"},Se={class:"col-xs-12 col-sm-3"},Ee={class:"col-xs-12 col-md-3"},Ce={key:1,class:"row q-pa-sm q-col-gutter-sm"},Fe={class:"col-xs-12 col-md-3"},Te={class:"row q-pa-lg q-col-gutter-xs"},Re={class:"col-12"},Pe={class:"col-xs-12"},Ve={class:"col-xs-12 col-sm-6"},_e={class:"row"},ke={class:"col-xs-12"},Le={class:"row q-py-sm"},Ue={class:"col"},Ne={class:"col-xs-12"},we={class:"row q-pa-xs q-col-gutter-xs"},xe={class:"col-3"},ye={class:"col-xs-12 col-sm-6"},qe={class:"row q-pa-sm q-col-gutter-sm"},Me={class:"col-xs-12"},Ge={class:"col-xs-12"};function Ye(e,a){var o=this,l=(0,t.g2)("header-btn"),n=(0,t.g2)("q-d"),r=(0,t.g2)("q-select"),i=(0,t.g2)("q-card-section"),s=(0,t.g2)("q-separator"),u=(0,t.g2)("sie-table"),c=(0,t.g2)("q-card"),d=(0,t.g2)("formularioCovid"),m=(0,t.g2)("sie-modal"),p=(0,t.g2)("q-input"),f=(0,t.g2)("q-datetime"),b=(0,t.g2)("q-btn"),v=(0,t.g2)("q-form"),h=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(h,{class:"consultas-ficha-sintomatologica"},{default:(0,t.k6)(function(){return[(0,t.bF)(c,null,{default:(0,t.k6)(function(){return[(0,t.bF)(l,{name:"",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(i,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",be,[a[22]||(a[22]=(0,t.Lk)("div",{class:"col-xs-12 col-sm-3"},[(0,t.Lk)("span",{class:"text-bold q-body-1"},"Ingreso al colegio")],-1)),(0,t.Lk)("div",ve,[(0,t.bF)(n,{class:"q-if-outlined",modelValue:e.frm.DESDE,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.frm.DESDE=a}),label:"Desde","float-label":"Desde",type:"date",format:"DD/MM/YYYY",onInput:a[1]||(a[1]=function(a){return e.getFichas()})},null,8,["modelValue"])]),(0,t.Lk)("div",he,[(0,t.bF)(n,{class:"q-if-outlined",modelValue:e.frm.HASTA,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.frm.HASTA=a}),label:"Hasta","float-label":"Hasta",type:"date",format:"DD/MM/YYYY",onInput:a[3]||(a[3]=function(a){return e.getFichas()})},null,8,["modelValue"])]),(0,t.Lk)("div",ge,[(0,t.bF)(r,{modelValue:e.frm.PERFIL_DESTINO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.frm.PERFIL_DESTINO=a}),options:e.perfilDestino,"float-label":"Perfil Destino",label:"Perfil Destino",onInput:a[5]||(a[5]=function(a){return e.getFichas()})},null,8,["modelValue","options"])])]),1==e.frm.PERFIL_DESTINO?((0,t.uX)(),(0,t.CE)("div",Oe,[(0,t.Lk)("div",Ie,[(0,t.bF)(r,{modelValue:e.vmFiltro.instrucod,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.vmFiltro.instrucod=a}),options:e.niveles,label:e.$t("ngs.nivel"),onInput:e.cambiarNivel},null,8,["modelValue","options","label","onInput"])]),(0,t.Lk)("div",Ae,[(0,t.bF)(r,{modelValue:e.vmFiltro.gradocod,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.vmFiltro.gradocod=a}),options:e.grados,label:e.$t("ngs.grado"),onInput:e.cambiarGrado},null,8,["modelValue","options","label","onInput"])]),(0,t.Lk)("div",De,[(0,t.bF)(r,{modelValue:e.vmFiltro.seccioncod,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.vmFiltro.seccioncod=a}),options:e.secciones,label:"Sección",onInput:e.cambiarSeccion},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",Se,[(0,t.bF)(r,{modelValue:e.vmFiltro.id_grupo,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.vmFiltro.id_grupo=a}),options:e.grupos,label:e.$t("grupo"),onInput:e.cambiarGrupo},null,8,["modelValue","options","label","onInput"])]),(0,t.Lk)("div",Ee,[(0,t.bF)(r,{modelValue:e.vmFiltro.estado_pase,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.vmFiltro.estado_pase=a}),options:e.paseOption,label:"Pase",onInput:e.cambiarGrupo},null,8,["modelValue","options","onInput"])])])):((0,t.uX)(),(0,t.CE)("div",Ce,[(0,t.Lk)("div",Fe,[(0,t.bF)(r,{modelValue:e.vmFiltro.estado_pase,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.vmFiltro.estado_pase=a}),options:e.paseOption,label:"Pase",onInput:e.cambiarGrupo},null,8,["modelValue","options","onInput"])])]))]}),_:1}),(0,t.bF)(s),(0,t.bF)(i,null,{default:(0,t.k6)(function(){return[1==e.frm.PERFIL_DESTINO?((0,t.uX)(),(0,t.Wv)(u,{key:0,data:e.rows,columns:e.fieldsAlumnos,"put-text":"",config:e.config,context:o,css:{height:"50vh"}},null,8,["data","columns","config"])):(0,t.Q3)("v-if",!0),2==e.frm.PERFIL_DESTINO||4==e.frm.PERFIL_DESTINO?((0,t.uX)(),(0,t.Wv)(u,{key:1,data:e.rows,columns:e.fieldsPersonal,putText:"",config:e.config,context:o,css:{height:"59vh"}},null,8,["data","columns","config"])):(0,t.Q3)("v-if",!0)]}),_:1})]}),_:1}),(0,t.bF)(m,{class:"full-height",ok:!1,title:"Ficha Sintomatológica",modelValue:e.modalFicha,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.modalFicha=a}),css:{height:"100vh",width:"60vw"}},{default:(0,t.k6)(function(){return[e.fichaSelected.ID_FRM_USUARIO?((0,t.uX)(),(0,t.Wv)(d,{key:0,class:"full-height full-width overflow-auto",ficha:e.fichaSelected,preview:!1,previewConsultas:!0},null,8,["ficha"])):(0,t.Q3)("v-if",!0)]}),_:1},8,["modelValue"]),(0,t.bF)(m,{title:"Temperatura",modelValue:e.modalTemperatura,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.modalTemperatura=a}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",Te,[(0,t.Lk)("div",Re,[(0,t.bF)(p,{modelValue:e.fechaFichaSelected,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.fechaFichaSelected=a}),label:"Fecha Registro",readonly:""},null,8,["modelValue"])]),(0,t.Lk)("div",Pe,[(0,t.bF)(f,{onlyPicker:"",type:"datetime",modelValue:e.currentDatetime,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.currentDatetime=a})},null,8,["modelValue"])]),(0,t.Lk)("div",Ve,[(0,t.Lk)("div",_e,[(0,t.Lk)("div",ke,[(0,t.Lk)("div",Le,[(0,t.Lk)("div",Ue,[(0,t.bF)(p,{modelValue:e.formTemperatura.temperatura,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.formTemperatura.temperatura=a}),label:"Temperatura",type:"number",ref:"input",onClick:e.selected,onKeyup:a[16]||(a[16]=(0,fe.jR)(function(a){return e.saveTemperatura()},["enter"]))},null,8,["modelValue","onClick"])]),e.sie.ruta.nivel>1?((0,t.uX)(),(0,t.Wv)(b,{key:0,class:"bg-primary text-white",label:"Guardar","no-caps":"",flat:"",onClick:a[17]||(a[17]=function(a){return e.saveTemperatura()})})):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",Ne,[(0,t.Lk)("div",we,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.temperaturas,function(a){return(0,t.uX)(),(0,t.CE)("div",xe,[(0,t.bF)(b,{class:"full-width bg-primary text-white",label:a,flat:"",onClick:function(o){return e.setTemperatura(a)}},null,8,["label","onClick"])])}),256))])])])]),(0,t.Lk)("div",ye,[(0,t.bF)(u,{data:e.rowsTemperatura,columns:e.fieldsTemperaturas,config:e.configTemperatura,css:{height:"65vh"}},null,8,["data","columns","config"])])])]}),_:1},8,["modelValue"]),(0,t.bF)(m,{class:"modal-editar-estado",modelValue:e.modalCambiarEstado,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.modalCambiarEstado=a}),title:"Edición pase de ingreso",ok:e.$t("botones.guardar"),footer:e.sie.ruta.nivel>=2,onSubmit:e.updateEstadoFicha,css:{height:"40vh",width:"30vw"}},{default:(0,t.k6)(function(){return[(0,t.bF)(v,{class:"column",ref:"form"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",qe,[(0,t.Lk)("div",Me,[(0,t.bF)(r,{modelValue:e.frmEstado.estado,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.frmEstado.estado=a}),options:e.estadosPase,label:"Pase de ingreso",rules:[function(e){return!!e||"Porfavor indique el pase de ingreso"}]},null,8,["modelValue","options","rules"])]),(0,t.Lk)("div",Ge,[(0,t.bF)(p,{modelValue:e.frmEstado.detalle,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.frmEstado.detalle=a}),label:"Motivo",type:"textarea",maxlength:"200","float-label":"Motivo"},null,8,["modelValue"])])])]}),_:1},512)]}),_:1},8,["modelValue","ok","footer","onSubmit"])]}),_:1})}o(15547);var $e=o(53380),He=o(9736),Qe=o(18105),je=o(95477),Xe=o(4437),ze=(o(30683),{data:function(){return{config:{NGS:{renderHtml:function(e,a){var o=e.INSTRUCOD||"",t=e.GRADOCOD||"",l=e.SECCIONCOD||"";return a("span","".concat(o).concat(t).concat(l))}},TEMPERATURA:{renderHtml:function(e,a){return a("span",{},e.TEMPERATURA)}},FH_PASE:{renderHtml:function(e,a){return a("span",{},(0,Qe.Ay)(e.FH_PASE,"DD/MM/YYYY"))}},FH_REGISTRO:{component:"datetime",edit:!1},FH_CAMBIO_ESTADO:{component:"datetime",edit:!1},FH_AST_CONTROL:{component:"datetime",edit:!1},FH_AST_SALIDA:{renderHtml:function(e,a){return a("span",{},(0,Qe.Ay)(e.FH_AST_SALIDA,"HH:mm a"))}},ACCION:{component:"button",validate:{editarestado:function(){return this.permitirEditarEstado},marcarasistencia:function(e){return this.permitirGrabarAsistencia&&1===e.ESTADO_PASE&&!e.FH_AST_CONTROL&&(0,Qe.Ay)(e.FH_PASE,"DD.MM.YYYY")===(0,Qe.Ay)(new Date,"DD.MM.YYYY")}},icon:["camera_front as marcarasistencia","file_edit as editarestado","settings_remote as temp","remove_red_eye as ver","delete"],permisos:{marcarasistencia:"> 1",temp:"> 1",editarestado:"> 1",delete:"=== 3"},tooltip:{marcarasistencia:"Marcar Asistencia",editarestado:"Editar pase",temp:"Temperatura",ver:"Ver ficha",delete:"Eliminar"},editarestado:function(e){var a=this;return le()(oe()().m(function o(){return oe()().w(function(o){while(1)switch(o.n){case 0:a.currentDate=new Date,a.frmEstado.estado=e.PASE,a.frmEstado.detalle=e.DETALLE_CAMBIO_ESTADO,a.frmEstado.idfrmusuario=e.ID_FRM_USUARIO,a.modalCambiarEstado=!0;case 1:return o.a(2)}},o)}))()},temp:function(e){var a=this;return le()(oe()().m(function o(){return oe()().w(function(o){while(1)switch(o.n){case 0:return a.formTemperatura.temperatura=e.TEMPERATURA||0,a.fichaSelected=e,a.fechaFichaSelected=(0,Qe.Ay)(e.FH_PASE,"DD/MM/YYYY hh:mm:ss"),a.modalTemperatura=!0,o.n=1,a.$http.get("api/CovidTemperatura/getListTemperaturasByPersona",{params:{idPersona:e.ID_PERSONA,fecha:(0,Qe.Ay)(e.FH_PASE,"DD.MM.YYYY")}});case 1:a.rowsTemperatura=o.v;case 2:return o.a(2)}},o)}))()},ver:function(e){var a=this;return le()(oe()().m(function o(){return oe()().w(function(o){while(1)switch(o.n){case 0:a.fichaSelected=e,a.modalFicha=!0;case 1:return o.a(2)}},o)}))()},marcarasistencia:function(e){var a=this;this.$confirm("¿Desea marcar la asistencia?").onOk(le()(oe()().m(function o(){var t,l,n;return oe()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,a.$http.post("api/FichaSintomatologica/guardarPaseControlConsulta",{id_frm_usuario:e.ID_FRM_USUARIO,alucod:e.CODIGO,fh_pase:e.FH_PASE,nemo:1===a.frm.PERFIL_DESTINO?e.NEMO:""});case 1:return t=o.v,l=t.message,a.$notify(l,"success"),o.n=2,a.getFichas();case 2:o.n=4;break;case 3:o.p=3,n=o.v,a.$notify(n.error.message||n.message,"warning");case 4:return o.a(2)}},o,null,[[0,3]])})))},delete:function(e){var a=this;this.$confirm("¿Realmente desea eliminar este registro?","delete").onOk(le()(oe()().m(function o(){var t,l;return oe()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,a.$http.delete("api/FichaSintomatologica/deleteFichaPersona",{params:{idfrmusuario:e.ID_FRM_USUARIO}});case 1:return t=o.v,l=t.message,a.$notify(l,"success"),o.n=2,a.getFichas();case 2:o.n=4;break;case 3:o.p=3,o.v,a.$notify("Ocurrió un problema de conexión.","warning");case 4:return o.a(2)}},o,null,[[0,3]])})))},flat:!0,color:"primary",dense:!1}},rows:[],fieldsAlumnos:[{name:"FH_REGISTRO",label:"Fecha y hora de registro ",field:"FH_REGISTRO",align:"left",sortable:!0},{name:"NGS",label:"NGS",field:"NGS",align:"left",sortable:!0},{name:"GRUPO",label:"Grupo",field:"GRUPO",align:"left",sortable:!0},{name:"CODIGO",label:"Código",field:"CODIGO",align:"center",sortable:!0},{name:"NOMCOMP",label:"Estudiante",field:"NOMCOMP",align:"left",sortable:!0},{name:"FH_PASE",label:"Fecha del Pase",field:"FH_PASE",align:"center",sortable:!0},{name:"PASE",label:"Pase de ingreso",field:"PASE",align:"center",sortable:!0},{name:"ASISTENCIA",label:"Asistencia",field:"ASISTENCIA",align:"center",sortable:!0},{name:"FH_AST_SALIDA",label:"Salida",field:"FH_AST_SALIDA",align:"center",sortable:!0},{name:"TEMPERATURA",label:"Temperatura",field:"TEMPERATURA",align:"center",sortable:!0},{name:"FH_CAMBIO_ESTADO",label:"Fecha de Cambio",field:"FH_CAMBIO_ESTADO",align:"center",sortable:!0},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:100}],fieldsPersonal:[{name:"FH_REGISTRO",label:"Fecha y hora de registro ",field:"FH_REGISTRO",align:"left",sortable:!0},{name:"CODIGO",label:"Código",field:"CODIGO",align:"center",sortable:!0},{name:"NOMCOMP",label:"Nombre y Apellido",field:"NOMCOMP",align:"left",sortable:!0},{name:"FH_PASE",label:"Fecha del Pase de ingreso",field:"FH_PASE",align:"center",sortable:!0},{name:"PASE",label:"Pase de ingreso",field:"PASE",align:"center",sortable:!0},{name:"FH_AST_CONTROL",label:"Asistencia",field:"FH_AST_CONTROL",align:"center",sortable:!0},{name:"FH_AST_SALIDA",label:"Salida",field:"FH_AST_SALIDA",align:"center",sortable:!0},{name:"TEMPERATURA",label:"Temperatura",field:"TEMPERATURA",align:"center",sortable:!0},{name:"FH_CAMBIO_ESTADO",label:"Fecha de Cambio",field:"FH_CAMBIO_ESTADO",align:"center",sortable:!0},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:100}]}}}),Be=o(57668),We=o(30640),Je=o(40102),Ke=o(45341),Ze=o(81288),ea=o(2819),aa={data:function(){return{configTemperatura:{FECHA:{component:"datetime",edit:!1}},rowsTemperatura:[],fieldsTemperaturas:[{name:"USUCOD_REGISTRO",label:"Usuario",field:"USUCOD_REGISTRO",align:"center",sortable:!0},{name:"FECHA",label:"Fecha",field:"FECHA",align:"center",sortable:!0},{name:"TEMPERATURA",label:"Temperatura",field:"TEMPERATURA",align:"center",sortable:!0}]}}},oa=o(2739),ta=o(50304),la=new Date,na={mixins:[ze,aa,Ke.A],components:{QDatetime:ta.A,QD:ne.T5,QDate:Xe.A,QPopupProxy:je.A,QInput:He.A,QSelect:de.A,QSeparator:$e.A,QCardSection:pe.A,sieModal:We.A,formularioCovid:Je.A,QForm:oa.A,QPage:ne.Tu,QCard:ne.C$,QBtn:ne.Il},data:function(){var e=this;return{currentDatetime:new Date,frm:{DESDE:la,HASTA:la,INSTRUCOD:"T",GRADOCOD:"T",SECCIONCOD:"T",ID_GRUPO:"T",PERFIL_DESTINO:1},formTemperatura:{temperatura:0},niveles:[],grados:[],secciones:[],gradosAgrupados:[],perfilDestino:[],sie:(0,Be["default"])(),permitirGrabarAsistencia:!1,permitirEditarEstado:!1,modalFicha:!1,modalTemperatura:!1,fichaSelected:{},fechaFichaSelected:"",buttons:[{icon:"file_pdf",label:"PDF",click:function(){e.imprimir("pdf")}},{icon:"file_excel",label:"Excel",click:function(){e.imprimir("xls")}}],temperaturas:[],estadosPase:[{value:"Ingresa",label:"Ingresa"},{value:"No ingresa",label:"No Ingresa"}],paseOption:[{value:1,label:"Ingresa"},{value:0,label:"No Ingresa"},{value:"T",label:"Todos"}],modalCambiarEstado:!1,frmEstado:{idfrmusuario:"",estado:"",detalle:""}}},computed:{isLess:function(){return(0,Ze.isLess)()}},methods:{realizarFiltro:function(){this.frm.INSTRUCOD=this.vmFiltro.instrucod,this.frm.GRADOCOD=this.vmFiltro.gradocod,this.frm.SECCIONCOD=this.vmFiltro.seccioncod,this.frm.ID_GRUPO=this.vmFiltro.id_grupo,this.frm.ESTADO_PASE=this.vmFiltro.estado_pase,this.getFichas()},getFichas:function(){var e=this;return le()(oe()().m(function a(){return oe()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/ConsultasBrae/getFichas",{params:{data:e.frm}});case 1:e.rows=a.v;case 2:return a.a(2)}},a)}))()},imprimir:function(e){var a=Object.assign({},this.frm);a.DESDE=(0,Qe.Ay)(a.DESDE,"YYYY.MM.DD"),a.HASTA=(0,Qe.Ay)(a.HASTA,"YYYY.MM.DD"),a["ANO"]=this.sie.ano,a["repcod"]="reportesIngresoColegio",a["formato"]=e,(0,ea.exportFilePhp)(a,"webservice/reportes/reporte")},selected:function(){this.$refs.input.$el&&this.$refs.input.$el.querySelector("input").select()},setTemperatura:function(e){this.formTemperatura.temperatura=e,this.$refs.input.$el&&this.$refs.input.$el.querySelector("input").focus()},saveTemperatura:function(){var e=this;return le()(oe()().m(function a(){var o,t,l,n;return oe()().w(function(a){while(1)switch(a.n){case 0:if(!(e.sie.ruta.nivel>1)){a.n=4;break}if(o=parseFloat(e.formTemperatura.temperatura||0),!(o<1)){a.n=1;break}return e.$notify("Ingrese temperatura mayor a cero.","warning"),a.a(2);case 1:return t=e.fichaSelected.ID_PERSONA,l=(0,Qe.Ay)(e.currentDatetime,"DD.MM.YYYY"),n=(0,Qe.Ay)(e.currentDatetime,"DD.MM.YYYY hh:mm:ss"),a.n=2,e.$http.post("api/CovidTemperatura/updateCovidTemperaturaByConsultaBrae",{idPersona:t,fecha:l,temperatura:o,fullDate:n});case 2:return a.n=3,e.getFichas();case 3:e.modalTemperatura=!1;case 4:return a.a(2)}},a)}))()},updateEstadoFicha:function(){var e=this;return le()(oe()().m(function a(){var o,t;return oe()().w(function(a){while(1)switch(a.p=a.n){case 0:if("No ingresa"!==e.frmEstado.estado||e.frmEstado.detalle){a.n=1;break}return e.$notify("Porfavor indique el motivo","warning"),a.a(2,!1);case 1:return a.p=1,a.n=2,e.$http.post("api/FichaSintomatologica/updateEstadoFicha",{idfrmusuario:e.frmEstado.idfrmusuario,estado:"Ingresa"===e.frmEstado.estado?1:0,detalle:e.frmEstado.detalle});case 2:return o=a.v,t=o.message,a.n=3,e.getFichas();case 3:e.modalCambiarEstado=!1,e.$notify(t,"success"),a.n=5;break;case 4:a.p=4,a.v,e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 5:return a.a(2)}},a,null,[[1,4]])}))()}},created:function(){var e=this;return le()(oe()().m(function a(){var o,t,l,n,r,i,s;return oe()().w(function(a){while(1)switch(a.n){case 0:for(o=36,t=o+41,l=o,e.temperaturas.push(o.toFixed(1)),n=o;n<=t;n++)l+=.1,e.temperaturas.push(l.toFixed(1));return a.n=1,e.$http.get("api/FichaSintomatologica/getPerfilDestino");case 1:return e.perfilDestino=a.v,a.n=2,e.$http.get("api/FichaSintomatologica/getConfigConsulta");case 2:r=a.v,i=r.editarEstadoPase,s=r.grabarAsistencia,e.permitirEditarEstado=i,e.permitirGrabarAsistencia=s;case 3:return a.a(2)}},a)}))()}},ra=o(12807);const ia=(0,ra.A)(na,[["render",Ye]]);var sa=ia,ua=o(65229),ca=o(93616),da=o(73890),ma=o(12547),pa=o(80660),fa={getNiveles:function(){return pa.$http.get("api/HyoInstrus/obtInstru")},getGrados:function(e){return pa.$http.get("api/HyoGradoNivs/obtGrados",{params:e})},getSecciones:function(e){return pa.$http.get("api/HyoSalones/obtSecciones",{params:e})},getUsuarios:function(e){return pa.$http.get("api/fichaSintomatologica/getUsuariosConFicha",{params:e})}},ba=o(6083),va={class:"row q-ma-lg-sm q-px-sm text-weight-bold text-info"},ha={class:"col-auto flex-center"},ga={class:"row q-ma-lg-sm"},Oa={class:"col-md-4"},Ia={class:"col-md-2"},Aa={class:"row q-ma-lg-sm"},Da={class:"col"},Sa={class:"row"},Ea={class:"col-xs-12 col-md-6"},Ca={class:"col-xs-12 col-md-6"},Fa={class:"row"},Ta={class:"col q-ma-sm overflow-auto",style:{height:"60vh"}},Ra={key:0};function Pa(e,a){var o=(0,t.g2)("q-icon"),l=(0,t.g2)("q-datetime"),n=(0,t.g2)("q-btn"),r=(0,t.g2)("q-select"),i=(0,t.g2)("q-spinner-oval"),s=(0,t.g2)("q-td"),u=(0,t.g2)("q-table"),c=(0,t.g2)("sie-modal");return(0,t.uX)(),(0,t.Wv)(c,{class:"modal-asignar-fechas",modelValue:e.verModal,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.verModal=a}),title:"Alertas",footer:!1,header:!0,onClose:e.cerrarModal},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",va,[(0,t.Lk)("div",ha,[(0,t.bF)(o,{class:"q-mr-sm",name:"info",size:"28px"})]),a[6]||(a[6]=(0,t.Lk)("div",{class:"col self-center"},[(0,t.Lk)("div",null,"Seleccionar los salones para enviar las alertas")],-1))]),(0,t.Lk)("div",ga,[(0,t.Lk)("div",Oa,[(0,t.bF)(l,{class:"q-if-outlined",modelValue:e.fecha,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.fecha=a}),"float-label":"Fecha",type:"date",format:"DD/MM/YYYY",disable:e.loading,onInput:e.cambiarFecha},null,8,["modelValue","disable","onInput"])]),(0,t.Lk)("div",Ia,[e.sie.ruta.nivel>1?((0,t.uX)(),(0,t.Wv)(n,{key:0,class:"bg-primary text-white",icon:"send",label:e.$t("botones.enviar"),"no-caps":"",flat:"",onClick:a[1]||(a[1]=function(a){return e.procesar()}),disable:e.loading},null,8,["label","disable"])):(0,t.Q3)("v-if",!0)])]),a[7]||(a[7]=(0,t.Lk)("hr",null,null,-1)),(0,t.Lk)("div",Aa,[(0,t.Lk)("div",Da,[(0,t.Lk)("div",Sa,[(0,t.Lk)("div",Ea,[(0,t.bF)(r,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.instrucod,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.vmFiltro.instrucod=a}),options:e.niveles,"float-label":e.$t("ngs.nivel"),onInput:e.cambiarNivel,disable:e.loading},null,8,["modelValue","options","float-label","onInput","disable"])]),(0,t.Lk)("div",Ca,[(0,t.bF)(r,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.ng,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.vmFiltro.ng=a}),options:e.grados,"float-label":e.$t("ngs.grado"),onInput:e.cambiarGrado,disable:e.loading},null,8,["modelValue","options","float-label","onInput","disable"])])])])]),(0,t.Lk)("div",Fa,[(0,t.Lk)("div",Ta,[(0,t.bF)(u,{"table-style":"height: 50vh",selection:e.configTabla.tipoSeleccion,"row-key":"ID_CRONOGRAMA",color:"secondary",data:e.dataTabla,columns:e.configTabla.columnas,selected:e.configTabla.registrosSeleccionados,"onUpdate:selected":a[4]||(a[4]=function(a){return e.configTabla.registrosSeleccionados=a})},{"body-cell-ESTADOPROCESO":(0,t.k6)(function(e){return[(0,t.bF)(s,{props:e},{default:(0,t.k6)(function(){return[0==e.value?((0,t.uX)(),(0,t.CE)("p",Ra)):-1==e.value?((0,t.uX)(),(0,t.Wv)(i,{key:1,color:"primary",size:"15px"})):1==e.value?((0,t.uX)(),(0,t.Wv)(o,{key:2,class:"text-green",name:"check",size:"24px"})):2==e.value?((0,t.uX)(),(0,t.Wv)(o,{key:3,class:"text-red",name:"error",size:"24px"})):(0,t.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","selected"])])])]}),_:1},8,["modelValue","onClose"])}o(12563),o(90095),o(13715);var Va=o(30545),_a=o(51082),ka=o(982),La={emits:["cerrarModal"],props:{},components:{QDatetime:ne.T5,QSelect:ne.Si,QInnerLoading:ne.SQ,QSpinnerOval:ne.VA,QTable:Va.A,QTh:ne.EJ,QTr:ne.qh,QTd:ne.Ef,sieDate:_a.A,sieModal:We.A,QIcon:ne.bP,QBtn:ne.Il},data:function(){return{id_proceso:1,sie:(0,Be["default"])(),verModal:!0,vmFiltro:{instrucod:"all",ng:"all-all"},configTabla:{},dataTabla:[],fecha:new Date,loading:!1,salones:[]}},computed:{niveles:function(){var e=[],a=[];a.push({label:"Todos",value:"all"});for(var o=0;o<this.salones.length;o++){var t=this.salones[o];e.includes(t.INSTRUCOD)||(e.push(t.INSTRUCOD),a.push({label:t.INSTRUDES,value:t.INSTRUCOD}))}return a},grados:function(){var e=[],a=this.vmFiltro.instrucod;if(a){var o=[];e.push({label:"Todos",value:a+"-all"});for(var t=0;t<this.salones.length;t++){var l=this.salones[t],n=l.INSTRUCOD+"-"+l.GRADOCOD;a!==l.INSTRUCOD||o.includes(n)||(o.push(n),e.push({label:l.GRADODES,value:n}))}}return e}},methods:{configurarTabla:function(){var e={};e.columnas=[{name:"ID_CRONOGRAMA",label:"",field:"ID_CRONOGRAMA",align:"left",style:"display: none"},{name:"NGS",label:this.$t("ngs.ngs"),field:"NGS",align:"left",sortable:!0},{name:"NEMODES",label:this.$t("ambito"),field:"NEMODES",align:"left",sortable:!0},{name:"GRUPO",label:this.$t("grupo"),field:"GRUPO",align:"left",sortable:!0},{name:"TOTAL",label:"Total",field:"TOTAL",align:"center",sortable:!0},{name:"TOT_REG",label:"Registrados",field:"TOT_REG",align:"center",sortable:!0},{name:"TOT_FALTANTES",label:"Faltantes",field:"TOT_FALTANTES",align:"center",sortable:!0},{name:"ESTADOPROCESO",label:"-",field:"ESTADOPROCESO",align:"center",sortable:!0}],e.registrosSeleccionados=[],e.tipoSeleccion="multiple",this.configTabla=e},cambiarFecha:function(){this.cargarData()},cerrarModal:function(){this.$emit("cerrarModal")},cambiarNivel:function(){this.vmFiltro.ng=this.vmFiltro.instrucod+"-all",this.filtrarSalones()},cambiarGrado:function(){this.filtrarSalones()},filtrarSalones:function(){var e=this.vmFiltro.instrucod,a=this.vmFiltro.ng,o=[];o="all"===e?this.salones:this.salones.filter(function(e){return e.INSTRUCOD+"-"+e.GRADOCOD===a||a===e.INSTRUCOD+"-all"}),this.dataTabla=o.map(function(e){return e.NGS=e.INSTRUCOD+e.GRADOCOD+e.SECCIONCOD,e}),this.configTabla.registrosSeleccionados=[]},resetaerEstado:function(){this.salones.forEach(function(e){e.ESTADOPROCESO=0})},procesar:function(){var e=this;return le()(oe()().m(function a(){var o,t,l,n,r,i,s,u;return oe()().w(function(a){while(1)switch(a.p=a.n){case 0:if(o=e.configTabla.registrosSeleccionados,0!==o.length){a.n=1;break}return(0,ka["default"])("Seleccione un salón","error"),a.a(2);case 1:e.loading=!0,t=null,e.resetaerEstado(),a.p=2,l=0;case 3:if(!(l<o.length)){a.n=7;break}return n=o[l],r=n["__index"],t=r,e.dataTabla[r].ESTADOPROCESO=-1,a.n=4,pa.$http.post("api/CovidMsjAlerta/enviarAlerta",{id_cronograma:n.ID_CRONOGRAMA});case 4:if(i=a.v,s=i.status,e.dataTabla[r].ESTADOPROCESO=s,1!==s){a.n=5;break}e.dataTabla[r].CUPO_TOTAL=e.cupos,a.n=6;break;case 5:throw new Error(i.msj);case 6:l++,a.n=3;break;case 7:(0,ka["default"])(e.$t("mensajes.m0008"),"success"),a.n=9;break;case 8:a.p=8,u=a.v,null!==t&&(e.dataTabla[t].ESTADOPROCESO=2),(0,ka["default"])(u.message||u.error.message,"error");case 9:e.loading=!1;case 10:return a.a(2)}},a,null,[[2,8]])}))()},cargarData:function(){var e=this;return le()(oe()().m(function a(){var o;return oe()().w(function(a){while(1)switch(a.n){case 0:return e.salones=[],a.n=1,pa.$http.get("api/CovidMsjAlerta/getListaAlertas",{params:{fecha:e.fecha}});case 1:o=a.v,e.salones=o.map(function(e){return e.ESTADOPROCESO=0,e.TOT_FALTANTES=e.TOTAL-e.TOT_REG,e}),e.filtrarSalones();case 2:return a.a(2)}},a)}))()}},created:function(){this.configurarTabla(),this.cargarData()}};const Ua=(0,ra.A)(La,[["render",Pa]]);var Na=Ua,wa=new Date,xa={directives:{sieActive:ua.A},components:{QChipsInput:ne.XX,QScrollArea:re.A,modalEviarAlerta:Na,sieEditor:ba.A,sieNivel:da.A,sieGrado:ma.A,sieSelect:ca.A,QRadio:ne.$,QTabs:ie.A,QTab:se.A,QTabPanels:ue.A,QTabPanel:ce.A,QSelect:de.A,QTd:ne.Ef,QDatetime:ne.T5,date:ne.p6,QCard:me.A,QCardSection:pe.A,consultasFichaSintomatologica:sa,QPage:ne.Tu,QBtn:ne.Il,QInput:ne.ie},props:{},data:function(){return{sie:(0,Be["default"])(),openModalAlerta:"",msjAlerta:{},etiquetasAlerta:["{{FECHA_INGRESO}}","{{FECHA_REG_INICIO}}","{{FECHA_REG_FIN}}","{{NOMBRE_SALON}}"],perfilDestino:[],procesos:[],perfiles:[],personalAlumno:[{value:1,label:"Alumno"},{value:2,label:"Personal"}],frm:{PERFIL_DESTINO:1,ID_PROCESO:null,ID_GRUPO:"T",INSTRUCOD:"T",GRADOCOD:"T",SECCIONCOD:"T",TIPCOD:"T"},reporte:{nivel:"",fecIni:wa,fecFin:wa,grado:"",repcod:"reportesAlumnosAutorizados"},niveles:[],grupos:[{ID_GRUPO:"T",DESCRIPCION:"Todos"},{ID_GRUPO:1,DESCRIPCION:"Sin Grupo"},{ID_GRUPO:2,DESCRIPCION:"Grupo 1"},{ID_GRUPO:3,DESCRIPCION:"Grupo 2"},{ID_GRUPO:4,DESCRIPCION:"Grupo 3"},{ID_GRUPO:5,DESCRIPCION:"Grupo 4"}],optionNivel:[],grados:[],statusLoadUser:[],dataUsuarios:{},usuarios:[],secciones:[],gradosAgrupados:[],tabconsultas:"fichaSintomatologica",buttons:[]}},computed:{isLess:function(){return(0,Ze.isLess)()}},methods:{tabFicha:function(){},cambiarProceso:function(e){var a=this,o=this.procesos.filter(function(e){return e.ID_PROCESO==a.frm.ID_PROCESO});this.frm.PERFIL_DESTINO=o[0].ID_PERFIL_DESTINO},cambiaReporte:function(e){"reportesAlumnosAutorizados"===this.reporte.repcod?this.frm.PERFIL_DESTINO=1:"fichaXPersona"===this.reporte.repcod&&this.setUsuarios()},get:function(e){},imprimir:function(e){var a=this,o=Object.assign({},this.reporte);if(o.DESDE=(0,Qe.Ay)(o.fecIni,"YYYY.MM.DD"),o.HASTA=(0,Qe.Ay)(o.fecFin,"YYYY.MM.DD"),o["ANO"]=this.sie.ano,o.INSTRUCOD=this.frm.INSTRUCOD,o.GRADOCOD=this.frm.GRADOCOD,o.SECCIONCOD=this.frm.SECCIONCOD,o.PERFIL_DESTINO=this.frm.PERFIL_DESTINO,o.ID_GRUPO=this.frm.ID_GRUPO,o.TIPCOD=this.frm.TIPCOD,"fichaXPersona"===this.reporte.repcod&&0==this.usuarios.length)return this.$notify("No existen usuarios de este perfil que hayan Llenado la ficha Sintomatológica.","warning"),!1;if("fichaXPersona"===this.reporte.repcod&&!this.frm.ID_PERSONA)return this.$notify("Seleccione un usuario.","warning"),!1;if(["fichaXPersona"].includes(this.reporte.repcod)&&this.frm.ID_PERSONA&&(o.ID_PERSONA=this.frm.ID_PERSONA),["resumenIngreso","fichaXPersona"].includes(this.reporte.repcod)&&(delete o.INSTRUCOD,delete o.GRADOCOD,delete o.SECCION),["sinAutorizacion","vigilanciaSalud","declaracionJurada","sinDeclaracionJurada","controlPasesFichas"].includes(this.reporte.repcod)){if(!this.frm.ID_PROCESO)return this.$notify("Seleccione un proceso.","warning"),!1;var t=this.procesos.filter(function(e){return e.ID_PROCESO==a.frm.ID_PROCESO});t&&t.length&&(o.PERFIL_DESTINO=t[0].ID_PERFIL_DESTINO),o.ID_PROCESO=this.frm.ID_PROCESO}else delete o.ID_PROCESO;o["formato"]=e,(0,ea.exportFilePhp)(o,"webservice/reportes/reporte")},getMsjAlerta:function(){var e=this;return le()(oe()().m(function a(){var o;return oe()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/CovidMsjAlerta/obtConfiguracion");case 1:o=a.v,e.msjAlerta={id_msj_alerta:o.ID_MSJ_ALERTA,correo:o.CORREO,asunto:o.ASUNTO,detalle:o.DETALLE};case 2:return a.a(2)}},a)}))()},getProcesos:function(){var e=this;return le()(oe()().m(function a(){return oe()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/covidautorizacion/getProcesos",{params:{ano:(0,Be["default"])().ano}});case 1:e.procesos=a.v,e.procesos&&e.procesos[0]&&(e.frm.ID_PROCESO=e.procesos[0].ID_PROCESO);case 2:return a.a(2)}},a)}))()},getPerfiles:function(){var e=this;return le()(oe()().m(function a(){var o,t;return oe()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoPerfiles/obtPerfilesExistentes");case 1:o=a.v,t=o.json,t.unshift({TIPCOD:"T",TIPNOM:"Todos"}),e.perfiles=t;case 2:return a.a(2)}},a)}))()},guardarMsjAlerta:function(){var e=this;return le()(oe()().m(function a(){var o;return oe()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,e.validarConfigAlerta()){a.n=1;break}return a.a(2);case 1:return a.n=2,e.$http.post("api/CovidMsjAlerta/guardarConfiguracion",{id_msj_alerta:e.msjAlerta.id_msj_alerta,asunto:e.msjAlerta.asunto,detalle:e.msjAlerta.detalle,correo:e.msjAlerta.correo});case 2:o=a.v,e.$notify(o.message,"success"),a.n=4;break;case 3:a.p=3,a.v,e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 4:return a.a(2)}},a,null,[[0,3]])}))()},validarConfigAlerta:function(){return this.msjAlerta.asunto?this.msjAlerta.correo?!!this.msjAlerta.detalle||(this.$notify("Por favor configurar el mensaje","warning"),!1):(this.$notify("Por favor configurar el correo","warning"),!1):(this.$notify("Por favor configurar el asunto","warning"),!1)},abrirModalAlerta:function(){this.validarConfigAlerta()&&(this.openModalAlerta=!0)},initSalon:function(){var e=this;return le()(oe()().m(function a(){var o,t,l;return oe()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,fa.getNiveles();case 1:if(o=a.v,!Object.prototype.hasOwnProperty.call(o,"json")){a.n=3;break}return t=o.json,t.unshift({INSTRUDES:"Todos",INSTRUCOD:"T"}),e.niveles=t.map(function(e){return{label:e.INSTRUDES,value:e.INSTRUCOD}}),a.n=2,fa.getGrados({agrupado:"s",todos:"s"});case 2:l=a.v,Object.prototype.hasOwnProperty.call(l,"json")&&(e.gradosAgrupados=l.json,e.cargarGrados(),e.cargarSecciones(e.frm.GRADOCOD));case 3:return a.a(2)}},a)}))()},cargarGrados:function(){this.grados=this.gradosAgrupados[this.frm.INSTRUCOD].map(function(e){return{label:e.GRADODES,value:e.GRADOCOD}}),this.frm.SECCIONCOD="T",this.frm.GRADOCOD="T"},cargarSecciones:function(){var e=this;return le()(oe()().m(function a(){var o,t;return oe()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,fa.getSecciones({gradocod:e.frm.GRADOCOD,instrucod:e.frm.INSTRUCOD});case 1:o=a.v,t=[],Object.prototype.hasOwnProperty.call(o,"json")&&(t=o.json),t.unshift({SECCIONDES:"Todos",SECCIONCOD:"T"}),e.secciones=t.map(function(e){return{label:e.SECCIONDES,value:e.SECCIONCOD}}),e.frm.SECCIONCOD=e.frm.SECCIONCOD;case 2:return a.a(2)}},a)}))()},setUsuarios:function(){var e=this;return le()(oe()().m(function a(){var o;return oe()().w(function(a){while(1)switch(a.n){case 0:if(e.usuarios=[],o=e.frm.PERFIL_DESTINO,e.statusLoadUser.includes(o)){a.n=2;break}return a.n=1,fa.getUsuarios({perfilDestino:o});case 1:e.dataUsuarios[o]=a.v,e.statusLoadUser.push(o);case 2:e.usuarios=e.dataUsuarios[o],0===e.usuarios.length&&e.$notify("No existen usuarios de este perfil que hayan llenado la ficha Sintomatológica.","warning");case 3:return a.a(2)}},a)}))()}},created:function(){var e=this;this.$http.get("api/FichaSintomatologica/getPerfilDestino").then(function(a){e.perfilDestino=a,e.initSalon()}),this.getMsjAlerta(),this.getPerfiles(),this.getProcesos(),this.$http.get("api/FichaSintomatologica/listarGrupos").then(function(a){a.unshift({ID_GRUPO:"T",DESCRIPCION:"Todos"}),e.grupos=a})}};const ya=(0,ra.A)(xa,[["render",ee]]);var qa=ya}}]);