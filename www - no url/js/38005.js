"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[38005],{38005:function(e,n,o){o.r(n),o.d(n,{default:function(){return Y}});var t=o(8445),i=o.n(t),a=(o(52776),o(81813),o(61758)),r=o(58790),s={class:"col"},c={class:"row"},l={class:"col"},u={class:"row"},d={class:"text-bold"},f={key:0},m={class:"row"},p={class:"sie-html"},h=["src","width","height"];function b(e,n){var o=(0,a.g2)("q-btn"),t=(0,a.g2)("sie-ano"),b=(0,a.g2)("q-item-side-icon"),C=(0,a.g2)("q-item-main"),v=(0,a.g2)("q-item"),k=(0,a.g2)("q-list"),g=(0,a.g2)("q-popover"),A=(0,a.g2)("q-toolbar"),O=(0,a.g2)("q-item-tile"),E=(0,a.g2)("q-item-side"),I=(0,a.g2)("q-tab"),T=(0,a.g2)("q-tooltip"),_=(0,a.g2)("q-icon"),F=(0,a.g2)("q-card"),w=(0,a.g2)("q-tab-pane"),y=(0,a.g2)("q-tabs"),N=(0,a.g2)("modal-crear"),D=(0,a.g2)("sie-modal"),M=(0,a.g2)("sie-cloud"),$=(0,a.g2)("q-page"),q=(0,a.gN)("close-overlay");return(0,a.uX)(),(0,a.Wv)($,null,{default:(0,a.k6)(function(){return[e.isLess?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(A,{class:"fixed-top q-toolbar-menu full-width",style:{left:"0"}},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",s,[(0,a.Lk)("div",c,[(0,a.bF)(o,{flat:"",round:"",dense:"",icon:"arrow_back",to:e.back},null,8,["to"]),n[7]||(n[7]=(0,a.Lk)("span",{class:"col"},null,-1)),e.indice?((0,a.uX)(),(0,a.Wv)(t,{key:0,class:"q-pa-sm-none",modelValue:e.ano,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.ano=n}),onSeleccionar:e.cambiaAnio},null,8,["modelValue","onSeleccionar"])):(0,a.Q3)("v-if",!0),e.hasInforme&&!e.indice?((0,a.uX)(),(0,a.Wv)(o,{key:1,flat:"",round:"",dense:"",icon:"insert_chart",onClick:e.goInformes},null,8,["onClick"])):(0,a.Q3)("v-if",!0),(0,a.bF)(o,{flat:"",round:"",dense:"",icon:"tune",onClick:e.filtrarContenido},null,8,["onClick"]),e.accesoTotal&&e.periodoCierreN<e.bimecodN?((0,a.uX)(),(0,a.Wv)(o,{key:2,flat:"",round:"",dense:"",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(g,null,{default:(0,a.k6)(function(){return[(0,a.bF)(k,{class:"no-border",link:""},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.contenidoTipos,function(n,o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[n.IDREF?(0,a.Q3)("v-if",!0):(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{key:0,onClick:function(o){return e.abrirModalCrear(n.ID)}},{default:(0,a.k6)(function(){return[(0,a.bF)(b,{icon:n.ICONO,color:n.COLOR},null,8,["icon","color"]),(0,a.bF)(C,{label:n.NOMBRE},null,8,["label"])]}),_:2},1032,["onClick"])),[[q]])],64)}),256))]}),_:1})]}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0)])])]}),_:1}),(0,a.bF)(v,{class:"bg-white text-primary"},{default:(0,a.k6)(function(){return[(0,a.bF)(C,null,{default:(0,a.k6)(function(){return[(0,a.bF)(O,{class:"q-toolbar-subtitle"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.salon.NEMODES),1)]}),_:1}),(0,a.bF)(O,{class:"q-title"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.cursonom),1)]}),_:1}),(0,a.bF)(O,{class:"q-caption"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.profesorCurso),1)]}),_:1})]}),_:1}),e.enableAsistencia?((0,a.uX)(),(0,a.Wv)(E,{key:0},{default:(0,a.k6)(function(){return[(0,a.bF)(o,{icon:e.btnAsistencia.icon,round:"",color:e.btnAsistencia.color,disable:e.btnAsistencia.checkAsistencia,onClick:e.marcarAsistencia},null,8,["icon","color","disable","onClick"])]}),_:1})):(0,a.Q3)("v-if",!0)]}),_:1})],64)):((0,a.uX)(),(0,a.Wv)(A,{key:1,inverted:""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",l,[(0,a.Lk)("div",u,[(0,a.bF)(o,{flat:"",round:"",icon:"arrow_back",to:e.back},null,8,["to"]),n[8]||(n[8]=(0,a.Lk)("span",{class:"col"},null,-1)),e.indice?((0,a.uX)(),(0,a.Wv)(t,{key:0,class:"q-pa-sm-none",modelValue:e.ano,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.ano=n}),onSeleccionar:e.cambiaAnio},null,8,["modelValue","onSeleccionar"])):(0,a.Q3)("v-if",!0),e.hasInforme&&!e.indice?((0,a.uX)(),(0,a.Wv)(o,{key:1,flat:"",round:"",icon:"insert_chart",onClick:e.goInformes},null,8,["onClick"])):(0,a.Q3)("v-if",!0),(0,a.bF)(o,{flat:"",round:"",icon:"tune",onClick:e.filtrarContenido},null,8,["onClick"]),e.accesoTotal&&e.periodoCierreN<e.bimecodN?((0,a.uX)(),(0,a.Wv)(o,{key:2,flat:"",round:"",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(g,null,{default:(0,a.k6)(function(){return[(0,a.bF)(k,{class:"no-border",link:""},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.contenidoTipos,function(n,o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[n.IDREF?(0,a.Q3)("v-if",!0):(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{key:0,onClick:function(o){return e.abrirModalCrear(n.ID)}},{default:(0,a.k6)(function(){return[(0,a.bF)(b,{icon:n.ICONO,color:n.COLOR},null,8,["icon","color"]),(0,a.bF)(C,{label:n.NOMBRE},null,8,["label"])]}),_:2},1032,["onClick"])),[[q]])],64)}),256))]}),_:1})]}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0)]),(0,a.bF)(v,null,{default:(0,a.k6)(function(){return[(0,a.bF)(C,null,{default:(0,a.k6)(function(){return[(0,a.bF)(O,{class:"q-toolbar-subtitle"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.indice&&e.salon.NEMODES?e.salon.NEMODES.replace(/"\w"$/,""):e.salon.NEMODES),1)]}),_:1}),(0,a.bF)(O,{class:"q-title"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.cursonom),1)]}),_:1}),(0,a.bF)(O,{class:"q-caption"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.profesorCurso),1)]}),_:1})]}),_:1}),e.enableAsistencia?((0,a.uX)(),(0,a.Wv)(E,{key:0},{default:(0,a.k6)(function(){return[(0,a.bF)(o,{icon:e.btnAsistencia.icon,dense:"",label:e.btnAsistencia.label,color:e.btnAsistencia.color,disable:e.btnAsistencia.checkAsistencia,onClick:e.marcarAsistencia},null,8,["icon","label","color","disable","onClick"])]}),_:1})):(0,a.Q3)("v-if",!0)]}),_:1})])]}),_:1})),(0,a.bF)(y,{class:"q-tabs-flex q-tabs-shadow q-tabs-horizontal q-tabs-horizontal-reverse",modelValue:e.selectedTabCurso,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.selectedTabCurso=n}),inverted:""},{title:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.periodosN,function(e,n){return(0,a.uX)(),(0,a.Wv)(I,{class:"tab-title noradius",name:e.NAMETAB,label:e.NAME,icon:e.BIMECOD<=e.PERICIE?"lock":""},null,8,["name","label","icon"])}),256))]}),default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.periodosN,function(t,s){return(0,a.uX)(),(0,a.Wv)(w,{class:"q-pa-none",name:t.NAMETAB},{default:(0,a.k6)(function(){return[(0,a.bF)(F,{class:"q-card-mobile q-ma-md-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(k,{class:"pointer q-py-none q-pa-sm-none",highlight:"",separator:""},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.contenidos[t.BIMECOD],function(s,c){return(0,a.uX)(),(0,a.Wv)(v,{key:c},{default:(0,a.k6)(function(){return[e.contenidoTipos&&e.contenidoTipos[s.TIPO]?((0,a.uX)(),(0,a.Wv)(b,{key:0,icon:e.contenidoTipos[s.TIPO]["ICONO"],color:e.contenidoTipos[s.TIPO]["COLOR"],tooltip:e.contenidoTipos[s.TIPO]["NOMBRE"]},null,8,["icon","color","tooltip"])):((0,a.uX)(),(0,a.Wv)(b,{key:1,icon:"lock",color:"gray"})),(0,a.bF)(C,{onClick:function(n){return e.detalleContenido(s)}},{default:(0,a.k6)(function(){return[(0,a.bF)(O,{label:""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",d,[(0,a.Lk)("span",null,(0,r.v_)(s.TITLE),1),s.ESTADO?((0,a.uX)(),(0,a.CE)("span",f,"("+(0,r.v_)(s.ESTADO)+")",1)):(0,a.Q3)("v-if",!0)])]}),_:2},1024),(0,a.bF)(O,{sublabel:"",upper:""},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.formatDate(s.FEC))+" "+(0,r.v_)(1==s.TIPO||9==s.TIPO?(1==s.TIPO?" - Entrega: ":" - Anuncio: ")+e.formatDate(s.FECFIN):""),1)]}),_:2},1024)]}),_:2},1032,["onClick"]),s.VIDEO_ADJUNTO?((0,a.uX)(),(0,a.Wv)(E,{key:2,right:""},{default:(0,a.k6)(function(){return[(0,a.bF)(E,null,{default:(0,a.k6)(function(){return[(0,a.bF)(o,{flat:"",dense:"",round:"",onClick:function(n){return e.viewClase(s)},icon:"ondemand_video",color:"primary"},{default:(0,a.k6)(function(){return[(0,a.bF)(T,null,{default:(0,a.k6)(function(){return i()(n[9]||(n[9]=[(0,a.eW)("Ver Clase",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1024)]}),_:2},1024)):(0,a.Q3)("v-if",!0),(0,a.bF)(E,{right:""},{default:(0,a.k6)(function(){return[e.accesoTotal&&t.BIMECOD>t.PERICIE?((0,a.uX)(),(0,a.Wv)(E,{key:0,icon:"more_vert",color:"primary"},{default:(0,a.k6)(function(){return[(0,a.bF)(g,null,{default:(0,a.k6)(function(){return[(0,a.bF)(k,{class:"no-border",link:""},{default:(0,a.k6)(function(){return[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{onClick:function(n){return e.editarContenido(s)}},{default:(0,a.k6)(function(){return[(0,a.bF)(_,{class:"q-pr-sm",name:"edit"}),(0,a.bF)(C,{label:e.$t("botones.editar")},null,8,["label"])]}),_:1},8,["onClick"])),[[q]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{onClick:function(n){return e.moverContenido(s)}},{default:(0,a.k6)(function(){return[(0,a.bF)(_,{class:"q-pr-sm",name:"assignment_return"}),(0,a.bF)(C,{label:e.$t("botones.mover")},null,8,["label"])]}),_:1},8,["onClick"])),[[q]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{onClick:function(n){return e.eliminarContenido(s,c)}},{default:(0,a.k6)(function(){return[(0,a.bF)(_,{class:"q-pr-sm",name:"delete"}),(0,a.bF)(C,{label:e.$t("botones.eliminar")},null,8,["label"])]}),_:1},8,["onClick"])),[[q]]),20===s.TIPOPADRE?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(v,{key:0,onClick:function(n){return e.openAdjuntarClase(s)}},{default:(0,a.k6)(function(){return[(0,a.bF)(_,{class:"q-pr-sm",name:"file_video"}),(0,a.bF)(C,{label:s.VIDEO_ADJUNTO?"Editar clase":"Adjuntar clase"},null,8,["label"])]}),_:2},1032,["onClick"])),[[q]]):(0,a.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,a.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)}),128))]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["name"])}),256))]}),_:1},8,["modelValue"]),e.estadoModalCrear?((0,a.uX)(),(0,a.Wv)(N,{key:2,onClick:e.agregarContenido,feriados:e.feriados,btnLoad:e.btLoad,indice:e.indice,idEtapa:e.idEtapa},null,8,["onClick","feriados","btnLoad","indice","idEtapa"])):(0,a.Q3)("v-if",!0),(0,a.bF)(D,{class:"model-responsable",modelValue:e.modalMover,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modalMover=n}),title:e.$t("seleccioneCarpeta"),footer:!1},{default:(0,a.k6)(function(){return[(0,a.bF)(k,{class:"q-pa-none","no-border":"",highlight:""},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.carpetas,function(n,o){return(0,a.uX)(),(0,a.Wv)(v,{key:o,class:"pointer",onClick:function(o){return e.grabarMoverContenido(n)}},{default:(0,a.k6)(function(){return[(0,a.bF)(E,{icon:"folder",color:"amber-7"}),(0,a.bF)(C,{label:n.TITLE},null,8,["label"])]}),_:2},1032,["onClick"])}),128))]}),_:1})]}),_:1},8,["modelValue","title"]),(0,a.bF)(D,{class:"model-responsable",modelValue:e.modalAdjuntarClase,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.modalAdjuntarClase=n}),title:"Adjuntar clase",onSubmit:e.adjuntarClase},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{modelValue:e.video,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.video=n}),hasLocal:!1,redirect:!0},null,8,["modelValue"])]}),_:1},8,["modelValue","onSubmit"]),(0,a.bF)(D,{class:"modal-viewClase",modelValue:e.configViewClass.modal,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.configViewClass.modal=n}),title:e.configViewClass.title,footer:!1},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",m,[(0,a.Lk)("div",p,[(0,a.Lk)("iframe",{class:"col sie-frame",src:e.configViewClass.url,width:e.configViewClass.w,height:e.configViewClass.h},null,8,h)])])]}),_:1},8,["modelValue","title"])]}),_:1})}var C=o(9504),v=o.n(C),k=o(76080),g=o.n(k),A=o(45254),O=o.n(A),E=o(57008),I=o.n(E),T=(o(12563),o(71225),o(39866),o(52133),o(10239),o(89571),o(56285),o(50310),o(5962),o(6724),o(70199),o(11777),o(515),o(83190),o(27153),o(62540),o(7346),o(6123)),_=o(72453),F=o(80660),w=o(88275),y=o(3927),N=o(28738),D=o(51073),M=o(36980),$=o(18105),q=o(99637),R=o(30451),S=o(69027),V=o(80340),P=o(57668),L=o(982),X=o(81288),Q=o(13813),W=o(30640),j=o(84569),B=o(32195),H=o(47206),U=o(78131),x=o(95655),J="intranet.informes",K={components:{sieAno:_.A,sieModal:W.A,QModal:T.tU,QCard:T.C$,QTabs:T.uw,QTab:T.zu,QTabPane:T.dg,QRouteTab:T.Eh,QPopover:T.VM,modalCrear:N.A,QItemSideIcon:R.A,sieVacio:V.A,sieCloud:B.A,QTooltip:T.nC,QPage:T.Tu,QToolbar:T.ZV,QBtn:T.Il,QList:T.Mb,QItem:T.H0,QItemMain:T.mF,QItemTile:T.lp,QItemSide:T.n1,QIcon:T.bP},props:["nemo","cursocod","grupocod","indice"],computed:I()(I()({},(0,M.aH)("clase",["periodos","periodosR","anoRecuperacion","contenidoTipos","profesor","cursonom","salon","bimecod","bimecodR","alucod","periodoCierre","periodoCierreR","estadoModalCrear","modoModalCrear"])),{},{selectedTabCurso:{set:function(e){this.$store.commit("clase/setSelectedTabCurso",e)},get:function(){return this.$store.state.clase.selectedTabCurso}},idEtapa:function(){var e=null,n=Number(this.selectedTabCurso.replace("tab",""))-1;return e=this.periodosN[n]?this.periodosN[n].ID_ETAPA:null,e},periodosN:function(){return this.indice?this.periodosR:this.periodos},periodoN:function(){return this.indice?this.periodoR:this.periodo},periodoCierreN:function(){return this.indice?this.periodoCierreR:this.periodoCierre},bimecodN:function(){return this.indice?this.bimecodR:this.bimecod},accesoTotal:function(){var e=(0,j.yy)("intranet.carpetaRecuperacion");return this.sie.esOtros&&(3===this.sie.ruta.nivel||e&&3===e.nivel)},isLess:function(){return(0,X.isLess)()},classTabHorizontal:function(){return{"q-tabs-horizontal":!0}},hasInforme:function(){return!0===this.sie.esOtros&&(0,j.yy)(J)},back:function(){var e="intranet.clase.curso";return this.indice&&(e="intranet.carpetaRecuperacion.clase"),{name:e}}}),data:function(){return{itemAMover:{},carpetas:[],CARPETA:6,modalMover:!1,sie:(0,P["default"])(),ano:this.anoRecuperacion,dataModal:{descripcion:"",titulo:"",fecha:new Date,hora:new Date,visible:"S",retorno:"S",comentar:"S",adjuntos:[],enlaces:[],salones:[],alumnos:[]},modoModal:"guardar",tipoCreting:null,modalCrear:!1,contenidos:{},dataContenidos:{},openFormCarpeta:!1,data:{},cursos:{},salones:{},route:{name:"intranet.clase.contenidoDetalle"},text:"Atención Psicológica",selectedTab:"tab-2",modelFiltros:[],modelAnuncios:"",modalTipo:0,feriados:[],btLoad:!1,enableAsistencia:!1,btnAsistencia:{labelAsistencia:"Marcar Asistencia",color:"primary",icon:"asistencia",checkAsistencia:!1},modalAdjuntarClase:!1,video:[],idContenido:0,configViewClass:{modal:!1,title:null},profesorCurso:"Sin Asignar"}},methods:{abrirModalCrear:function(e){this.$store.dispatch("clase/openModalCrear",e)},moverContenido:function(e){var n=this;this.itemAMover=e;var o=i()(this.contenidos[this.bimecod]);this.carpetas=o.filter(function(o){return o.TIPO===n.CARPETA&&o.ID!==e.ID}),this.modalMover=!0},grabarMoverContenido:function(e){var n=this;(0,S.confirmar)(this.$t("mensajes.m0043.confirmacion"),function(){var o={idOrigen:n.itemAMover.ID,tipo:n.itemAMover.TIPO,idDestino:e.ID};F.$http.post("api/HyoContenido/moverContenido",o).then(function(e){var o=e.json;1===o.estado&&((0,L["default"])(n.$t("mensajes.m0001")),n.getContenidos())}).catch(function(e){console.error(e),(0,L["default"])("ocurrio un error","error")})})},getNemos:function(e){for(var n=[],o=e.length,t=0;t<o;t++){var i=e[t];n.push(i.NEMO)}return n},editarContenido:function(){var e=O()(g()().m(function e(n){var o,t,i=this;return g()().w(function(e){while(1)switch(e.n){case 0:o=n.TIPO,t={idContenido:n.ID},t.editar=!0,this.$store.dispatch("clase/getEnlacesAdjuntos",t).finally(function(){i.$store.dispatch("clase/openModalEditar",{modo:"actualizar",tipo:o,data:n})});case 1:return e.a(2)}},e,this)}));function n(n){return e.apply(this,arguments)}return n}(),getEtapa:function(){var e=null,n=Number(this.selectedTabCurso.replace("tab",""))-1;return e=this.periodosN[n]?this.periodosN[n].ID_ETAPA:null,e},agregarContenido:function(e){var n=this;return O()(g()().m(function o(){var t,i,a;return g()().w(function(o){while(1)switch(o.n){case 0:if(e.nemo=e.nemo||e.nemo_actual,n.indice&&(e.id_etapa=n.getEtapa()),t=e.nemos?n.getNemos(e.nemos):[e.nemo],n.indice&&(e.ano=n.anoRecuperacion),"S"!==e.usardrivecloud||![1,"1"].includes(e.id_contenido_tipo)){o.n=2;break}return delete window.localStorage._apiGoogle,window.currentSieCloud=!1,o.n=1,F.$http.get("api/HyoGoogle/getUrl");case 1:if(i=o.v,a=i.json,"string"!==typeof a){o.n=2;break}return(0,x["default"])(a,"_system",500,500),o.a(2,!1);case 2:n.btLoad=!0,n.$store.dispatch("clase/editarContenido",{data:e,accion:n.modoModalCrear}).then(function(){var o=O()(g()().m(function o(i){var a,r,s,c,l,u,d,f,m;return g()().w(function(o){while(1)switch(o.p=o.n){case 0:if(a=i.json,r=!0,"S"!==e.usardrivecloud||![1,"1"].includes(e.id_contenido_tipo)){o.n=7;break}if(1!==a.estado){o.n=7;break}return o.p=1,e.usucod=n.sie.USUCOD,s={},s[e.nemo]={NEMO:e.nemo,IDCONTENIDO:e.idContenido||e.id},e.nemos=e.nemos||t,e.idContenidos=a.idContenidos||s,o.n=2,(0,F.streamFetch)("api/HyoGoogle/createFolders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})},function(){(0,L["default"])("elemento(s) creado(s)")});case 2:d=v()(e.idContenidos);case 3:if((f=d()).done){o.n=5;break}return c=f.value,l=I()({},e),u=e.idContenidos[c],l.nemo=u.NEMO,l.idContenido=u.IDCONTENIDO,o.n=4,F.$http.post("api/HyoGoogle/adjuntosActividad",{data:l});case 4:o.n=3;break;case 5:o.n=7;break;case 6:o.p=6,m=o.v,r=!1,console.log("Error",m);case 7:r&&(n.getContenidos(),n.$store.commit("clase/setEstadoModalCrear",!1),(0,L["default"])(n.$t("mensajes."+a.message),"success")),n.btLoad=!1;case 8:return o.a(2)}},o,null,[[1,6]])}));return function(e){return o.apply(this,arguments)}}()).catch(function(e){var o=e.error;if(n.btLoad=!1,o&&501===o.code)return(0,L["default"])(n.$t(o.message),"warning"),!1;o&&o.custom?(0,L["default"])(n.$t("mensajes."+o.message),"warning"):o&&o.maxContenido?(0,L["default"])("No se puede crear más de "+o.maxContenido+" contenidos para ese día","warning"):o&&o.params&&o.params.maxH?(0,L["default"])("No se puede crear contenidos después de las "+o.params.maxH+":00 Horas","warning"):o&&o.type&&"notSelectTypeOfQuestion"===o.type||o&&o.type&&"errorFechas"===o.type?(0,L["default"])(o.message,"error"):o&&o.name&&"GDSError"===o.name?(0,L["default"])("Existen caracteres extraños","error"):(0,L["default"])("Ocurrió un error al grabar","error")});case 3:return o.a(2)}},o)}))()},eliminarContenido:function(e,n){var o=this,t=this.contenidos;(0,S.confirmar)(this.$t("mensajes.m0038"),function(){F.$http.post("api/HyoContenido/eliminarContenido",{idContenido:e.ID}).then(function(i){var a=i.json;1===a.estado&&((0,L["default"])(o.$t("mensajes.m0005")),t[e.BIMECOD].splice(n,1),o.contenidos=t),2===a.estado&&(0,L["default"])("El Formulario tiene respuestas","warning")}).catch(function(i){var a="Ocurrió un error";i.error&&501===i.error.code&&i.error.message&&(a=i.error.message),i.error&&502===i.error.code?(0,S.confirmar)("El contenido tiene Calificaciones ¿Esta seguro de eliminar el contenido?",function(){F.$http.post("api/HyoContenido/eliminarContenido",{idContenido:e.ID,force:1}).then(function(i){var a=i.json;1===a.estado&&((0,L["default"])(o.$t("mensajes.m0005")),t[e.BIMECOD].splice(n,1),o.contenidos=t),2===a.estado&&(0,L["default"])("El Formulario tiene respuestas","warning")}).catch(function(e){var n="Ocurrió un error";e.error&&501===e.error.code&&e.error.message&&(n=e.error.message),(0,L["default"])(n,"warning")})}):(0,L["default"])(a,"warning")})})},filtrarContenido:function(){var e=this,n=[];(0,q["default"])(this.contenidoTipos,function(e,o){var t=e.ID,i=e.NOMBRE,a=e.ICONO;n.push({label:i,value:t,checkedIcon:a})}),this.$q.dialog({title:"Filtrar Contenido",ok:"Aceptar",options:{type:"checkbox",model:this.modelFiltros,items:n},cancel:!0,preventClose:!0,color:"secondary"}).onOk(function(n){if(e.modelFiltros=n,n.length>0){var o={};(0,q["default"])(JSON.parse(JSON.stringify(e.dataContenidos)),function(n,t){o[t]=[],n.map(function(n){e.modelFiltros.indexOf(n.TIPO)>=0&&o[t].push(n)})}),e.contenidos=o}else e.contenidos=JSON.parse(JSON.stringify(e.dataContenidos))})},formatDate:function(e){return(0,$.Ay)(e,"DD/MM/YYYY hh:mm a")},getContenidos:function(){var e=this,n=this.nemo,o=this.cursocod,t=this.grupocod,i={nemo:n,cursocod:o,grupocod:t};this.indice&&(i.indice=this.indice,i.ano=this.ano),this.profesorCurso="",F.$http.post("api/HyoContenido/getContenidos",{params:i}).then(function(n){var o=n.json,t=o.k,a=o.v,r=n.PROFESOR,s=(0,y["default"])(t,a),c={};s.map(function(n){e.indice&&n.ID_ETAPA&&(n.BIMECOD=n.ETAPA),c.hasOwnProperty(n.BIMECOD)||(c[n.BIMECOD]=[]),n["NEMO_ACTUAL"]=i.nemo,c[n.BIMECOD].push(n)}),e.dataContenidos=JSON.parse(JSON.stringify(c)),e.contenidos=JSON.parse(JSON.stringify(c)),e.profesorCurso=r})},getContenidoTipos:function(){var e=this.$store;e.dispatch("clase/getContenidoTipos")},getCursosPeriodos:function(){var e={nemo:this.nemo},n=this.$store;this.indice&&(e.recuperacion=1,e.ano=this.ano),n.dispatch("clase/getCursosPeriodos",e)},getSalonById:function(){this.$store.dispatch("clase/getSalon",this.nemo),(0,w.CI)(this.nemo)},detalleContenido:function(e){e.COLOR=this.contenidoTipos[e.TIPO].COLOR,e.ICONO=this.contenidoTipos[e.TIPO].ICONO,e.DESCRIPCIONTIPO=this.contenidoTipos[e.TIPO].NOMBRE,this.$store.commit("clase/setContenidoTipoId",e.TIPO),this.indice?this.$router.push({name:"intranet.carpetaRecuperacion.contenidoDetalle",params:{id:e.ID},query:{nemo:e.NEMO_ACTUAL,alucod:this.alucod,indiceToContenido:this.indice}}):this.$router.push({name:"intranet.clase.contenidoDetalle",params:{id:e.ID},query:{nemo:e.NEMO_ACTUAL,alucod:this.alucod}})},habilitarAsistencia:function(e,n,o){var t=this;return O()(g()().m(function i(){var a,r,s;return g()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,F.$http.get("api/HyoAsistenciacurso/habilitarAsistencia",{params:{cursocod:e,alucod:n,nemo:o}});case 1:a=i.v,r=a.colegioHabilitados,s=a.checkAsistencia,t.enableAsistencia=r,t.btnAsistencia.checkAsistencia=s,s?(t.btnAsistencia.color="positive",t.btnAsistencia.label="Presente",t.btnAsistencia.icon="check_circle"):(t.btnAsistencia.color="primary",t.btnAsistencia.label="Marcar Asistencia",t.btnAsistencia.icon="asistencia");case 2:return i.a(2)}},i)}))()},marcarAsistencia:function(){var e=this;return O()(g()().m(function n(){var o,t;return g()().w(function(n){while(1)switch(n.n){case 0:return o={cursocod:e.cursocod,grupocod:e.grupocod},"005"!==e.sie.tipcod&&(o.alucod=e.alucod,o.nemo=e.nemo),n.n=1,F.$http.post("api/HyoAsistenciacurso/grabarAsistenciaAlumno",o);case 1:t=n.v,e.habilitarAsistencia(e.cursocod,e.alucod,e.nemo),(0,L["default"])(t.message);case 2:return n.a(2)}},n)}))()},goInformes:function(){this.$router.push({name:J,query:{nemo:this.nemo,cursocod:this.cursocod,grupocod:this.grupocod}})},openAdjuntarClase:function(e){var n=e.ID,o=e.VIDEO,t=e.TITLE;this.modalAdjuntarClase=!0,this.video=[],o&&this.video.push({url:o,name:t}),this.idContenido=n},adjuntarClase:function(){var e=this;return O()(g()().m(function n(){var o,t,i,a,r,s;return g()().w(function(n){while(1)switch(n.p=n.n){case 0:if(n.p=0,!e.video.length){n.n=7;break}if(1!==e.video.length){n.n=5;break}return o={id:e.idContenido,clase:e.video[0]},n.p=1,n.n=2,F.$http.post("api/HyoContenido/adjuntarClase",o);case 2:t=n.v,i=t.message,e.video=[],e.modalAdjuntarClase=!1,e.getContenidos(),(0,L["default"])(i,"success"),n.n=4;break;case 3:throw n.p=3,r=n.v,a=r.error,new Error(a.message);case 4:n.n=6;break;case 5:throw new Error("Solo puedes adjuntar un video por clase");case 6:n.n=8;break;case 7:throw new Error("Debes seleccionar un video para adjuntar a la clase");case 8:n.n=10;break;case 9:n.p=9,s=n.v,(0,L["default"])(s.message,"error");case 10:return n.a(2)}},n,null,[[1,3],[0,9]])}))()},viewClase:function(e){var n=(0,H["default"])(e.VIDEO,!1);n?(this.configViewClass.modal=!0,this.configViewClass.title=e.TITLE,this.configViewClass=I()(I()({},this.configViewClass),n)):(0,U["default"])(e.VIDEO,e.TITLE)},cambiaAnio:function(e){this.init(),this.$store.commit("clase/setAnoRecuperacion",e.ANO)},init:function(){var e=this;if(this.indice){if(this.anoRecuperacion)this.ano=this.anoRecuperacion;else{var n=this.nemo.substring(0,4);this.ano=String(n),this.$store.commit("clase/setAnoRecuperacion",this.ano)}this.$store.commit("clase/setCursocodR",this.cursocod)}if(this.$store.hasModule("clase")||this.$store.registerModule("clase",D.A),"004"===this.sie.tipcod&&""===this.alucod&&(this.indice?this.$router.push({name:"intranet.carpetaRecuperacion.clase"}):this.$router.push({name:"intranet.clase.curso"})),"005"===this.sie.tipcod&&""===this.alucod&&this.$store.commit("clase/setAlucod",this.sie.alucod),this.$store.commit("clase/setCursocod",this.cursocod),this.$store.commit("clase/setGrupocod",this.grupocod),this.getSalonById(),this.$store.state.clase.periodos.length<=0&&this.getCursosPeriodos(),F.$http.get("api/HyoFeriados/obtFeriados").then(function(n){var o=n.json;e.feriados=(0,Q["default"])(o,function(e){return new Date(e.FECFER).setHours(0,0,0,0)})}),["004","005"].indexOf(this.sie.tipcod)>=0){var o=this.cursocod,t=this.nemo,i=""===this.alucod?this.sie.alucod:this.alucod;i&&this.habilitarAsistencia(o,i,t)}this.getContenidos()}},created:function(){this.init(),this.indice&&(this.selectedTabCurso="tab"+this.bimecodR)},beforeCreate:function(){window.callback&&window.removeEventListener("storage",window.callback.cb)},watch:{indice:function(){this.init()},selectedTabCurso:function(e){if("string"===typeof e){var n=e[3]?e[3]:1;this.$store.commit("clase/setBimecodR",Number(n))}}},unmounted:function(){window.callback&&window.removeEventListener("storage",window.callback.cb)}},z=o(12807);const G=(0,z.A)(K,[["render",b],["__scopeId","data-v-0f182ad8"]]);var Y=G}}]);