"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[2090],{2090:function(e,n,a){a.r(n),a.d(n,{default:function(){return U}});var r=a(61758);function t(e,n){var a=this,t=(0,r.g2)("header-btn"),o=(0,r.g2)("sie-table"),i=(0,r.g2)("q-card-section"),s=(0,r.g2)("q-card"),c=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(c,{class:"q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(s,null,{default:(0,r.k6)(function(){return[(0,r.bF)(t,{name:"Usuarios Asociados",buttons:e.buttons},null,8,["buttons"]),(0,r.bF)(i,null,{default:(0,r.k6)(function(){return[(0,r.bF)(o,{data:e.rows,columns:e.fields,config:e.config,context:a,selection:"multiple","save-cells":"",ref:"refUsuariosAsociados",css:"height: calc(100vh - 150px)"},null,8,["data","columns","config"])]}),_:1})]}),_:1})]}),_:1})}var o=a(76080),i=a.n(o),s=a(45254),c=a.n(s),u=a(6123),l=(a(89571),{data:function(){return{config:{ESTADO:{renderHtml:function(e,n,a){return a.background({color:"A"===e.ESTADO?"positive":"negative",textColor:"white",align:"center",text:"Usuario ".concat("A"===e.ESTADO?"Activo":"Inactivo")})}},USUARIO:{component:"input",autoFocus:!0,input:function(e){var n=this;return c()(i()().m(function a(){var r;return i()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,n.$confirmar("¿Realmente desea actualizar el correo ".concat(e.USUARIO,"?"),"info");case 1:if(r=a.v,!r){a.n=3;break}return a.n=2,n.$http.put("api/HyoDirectory/updateCorreoAsociado",{usucod:e.USUCOD,correo:e.USUARIO});case 2:return n.$notify("Correo actualizado"),a.a(2,!0);case 3:return a.a(2,!1);case 4:return a.p=4,a.v,a.a(2,!1)}},a,null,[[0,4]])}))()}},ACTION:{component:"button",icon:["delete as eliminar"],eliminar:function(e,n){var a=this;return c()(i()().m(function r(){var t,o,s;return i()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,a.$confirmar("¿Realmente desea desasociar al usuario ".concat(e.USUNOM,"?"),"delete");case 1:if(t=r.v,!t){r.n=3;break}return r.n=2,a.$http.delete("api/HyoClassRoomAdmin/quitarAsociacionUsuario",{params:{email:e.USUARIO,usucod:e.USUCOD,orgUnitPath:e.URL}});case 2:o=r.v,s=o.message,a.rows.splice(a.rows.indexOf(n),1),a.$notify(s,"success");case 3:return r.a(2)}},r)}))()},tooltip:{eliminar:"Desasociar"},permisos:{eliminar:"===3"},flat:!0,round:!0,prevent:!0}},rows:[],fields:[{name:"USUCOD",label:"Usuario",field:"USUCOD",align:"left"},{name:"USUNOM",label:"Nombres",field:"USUNOM",align:"left"},{name:"USUARIO",label:"Correo",field:"USUARIO",align:"left"},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center"}]}}}),f={mixins:[l],data:function(){return{buttons:[{icon:"remove_circle",label:"Desasociar en Bloque",permiso:"===3",click:this.desaociarEnBloque}]}},methods:{desaociarEnBloque:function(){var e=this;return c()(i()().m(function n(){var a,r;return i()().w(function(n){while(1)switch(n.n){case 0:if(a=e.$refs.refUsuariosAsociados.rowsSelected(["USUCOD","USUARIO"]),!(a.length>0)){n.n=5;break}return n.n=1,e.$confirmar("¿Realmente desea desasociar los usuarios seleccionados?","delete");case 1:if(r=n.v,!r){n.n=4;break}return n.n=2,e.$http.post("api/HyoDirectory/desasociarEnBloque",{usucods:a});case 2:return n.n=3,e.$http.get("api/HyoDirectory/usuariosAsociados");case 3:e.rows=n.v,e.$notify("Proceso completado");case 4:n.n=6;break;case 5:e.$notify("Seleccione al menos un registro.","info");case 6:return n.a(2)}},n)}))()}},created:function(){var e=this;return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/HyoDirectory/usuariosAsociados");case 1:e.rows=n.v;case 2:return n.a(2)}},n)}))()},components:{QPage:u.Tu,QCard:u.C$}},d=a(12807);const m=(0,d.A)(f,[["render",t]]);var U=m}}]);