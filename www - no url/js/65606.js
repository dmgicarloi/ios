"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[65606],{65606:function(e,o,l){l.r(o),l.d(o,{default:function(){return Ae}});var r=l(8445),t=l.n(r),a=l(61758),i=l(58790),n={class:"text-bold"},s={key:0,class:"q-ma-xs q-card col column"},u={class:"row q-mx-xs justify-between"},c={key:1,class:"q-ma-xs q-card"},d={class:"row justify-between"},f={class:"row"};function p(e,o){var l=(0,a.g2)("q-table"),r=(0,a.g2)("sie-modal"),p=(0,a.g2)("q-list-header"),m=(0,a.g2)("q-item-side"),h=(0,a.g2)("q-item"),v=(0,a.g2)("q-list"),b=(0,a.g2)("q-datetime"),g=(0,a.g2)("q-tooltip"),O=(0,a.g2)("q-btn"),E=(0,a.g2)("sie-upload"),k=(0,a.g2)("q-spinner-gears"),D=(0,a.g2)("q-inner-loading"),S=(0,a.g2)("q-icon"),$=(0,a.g2)("q-td"),A=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(A,{class:"asistencia-curso-import bg-white q-ma-xs"},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{modelValue:e.modalEstados,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.modalEstados=o}),footer:!1},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{data:e.listIcons,columns:e.columnEstados,footer:!1},null,8,["data","columns"])]}),_:1},8,["modelValue"]),(0,a.bF)(r,{modelValue:e.modalDetalle,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.modalDetalle=o}),footer:!1,title:"Registros procesados"},{default:(0,a.k6)(function(){return[(0,a.bF)(v,null,{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.infoModalDetalle,function(e,o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[e.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(p,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,i.v_)(e[0].desc)+" ("+(0,i.v_)(e.length)+")",1)]}),_:2},1024),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,function(e){return(0,a.uX)(),(0,a.Wv)(h,null,{default:(0,a.k6)(function(){return[(0,a.bF)(m,{class:"row"},{default:(0,a.k6)(function(){return[(0,a.Lk)("span",n,(0,i.v_)(e.NOMCOMP),1)]}),_:2},1024)]}),_:2},1024)}),256))],64)):(0,a.Q3)("v-if",!0)],64)}),256))]}),_:1})]}),_:1},8,["modelValue"]),0===e.infoAsistencia.length?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("div",u,[(0,a.bF)(b,{class:"q-if-outlined",modelValue:e.fecha,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.fecha=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fecha")},null,8,["modelValue","float-label"]),(0,a.bF)(O,{flat:"",dense:"",round:"",icon:"info",onClick:e.openModal},{default:(0,a.k6)(function(){return[(0,a.bF)(g,null,{default:(0,a.k6)(function(){return t()(o[4]||(o[4]=[(0,a.eW)("Ver Valores",-1)]))}),_:1})]}),_:1},8,["onClick"])]),(0,a.bF)(E,{class:"col",onUpload:e.addFile,icon:"file",title:e.$t("subirArchivos"),allow:["txt"],modelValue:e.fileupd,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.fileupd=o})},null,8,["onUpload","title","modelValue"])])):((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(D,{visible:e.cargando,style:{"z-index":"100"}},{default:(0,a.k6)(function(){return[(0,a.bF)(k,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,a.Lk)("div",d,[(0,a.bF)(O,{icon:"close",flat:"",dense:"",round:"",onClick:e.cancelarSubida},null,8,["onClick"]),(0,a.bF)(O,{icon:"cog",flat:"",dense:"",round:"",onClick:e.saveInfo},null,8,["onClick"])]),(0,a.bF)(l,{style:{"max-height":"90vh","min-height":"40vh"},data:e.infoAsistencia,columns:e.columnas},{"body-cell-ESTADODES":(0,a.k6)(function(e){return[(0,a.bF)($,{props:e},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",f,[(0,a.bF)(S,{name:e.row.ICONO,color:e.row.COLORVUE},null,8,["name","color"]),(0,a.Lk)("span",null,(0,i.v_)(e.row.ESTADODES),1)])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])]))]}),_:1})}var m=l(57008),h=l.n(m),v=(l(10239),l(56285),l(6123)),b=l(20989),g=l(30545),O=l(88275),E=l(93616),k=l(57668),D=l(80660),S=l(30640),$=l(99637),A=l(982),C=l(42546),V=l(80340),q={class:"row q-pa-md"},R={class:"col-xs-12 col-md-6 column"},x={class:"row q-subheading text-weight-bold"},y={class:"col-xs-12 col-md-6"},T={class:"row"},I={class:"col-xs-12 q-py-md"},F={class:"row"},M={class:"col-xs-12"},L={key:0,class:"row"},w={class:"col"},U={class:"col"},Q={class:"col"},N={class:"row"},j={class:"col"},B={class:"col"},X={class:"row"},P={class:"col-xs-12"},_={class:"row"},H={class:"col-xs-12"},Y={class:"row"},G={class:"col-xs-12"},W={class:"row"},z={class:"col-xs-12"},K={class:"row"},J={class:"col-xs-12"},Z={class:"row"},ee={class:"col-xs-12"},oe={class:"row"},le={class:"col"},re={key:0,class:"col-xs-6"},te={class:"row"},ae={class:"col-xs-12"},ie={key:2,class:"column q-pa-xs q-mb-sm col",style:{border:"1px solid black !important","border-radius":"3px"}},ne={style:{"font-size":"0.8rem"}},se={class:"col"};function ue(e,o){var l=(0,a.g2)("q-btn"),r=(0,a.g2)("q-toolbar"),t=(0,a.g2)("q-radio"),n=(0,a.g2)("q-toggle"),s=(0,a.g2)("q-select"),u=(0,a.g2)("q-input"),c=(0,a.g2)("q-datetime"),d=(0,a.g2)("sie-select"),f=(0,a.g2)("q-checkbox"),p=(0,a.g2)("sie-modal");return(0,a.uX)(),(0,a.Wv)(p,{class:"imprimir-modal",modelValue:e.impStat,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.impStat=o}),title:e.$t("imprimir"),ok:!1,footer:!0,onInput:e.modalCerrar},{footer:(0,a.k6)(function(){return[(0,a.bF)(r,{class:"justify-end",color:"grey-2"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",null,[(0,a.bF)(l,{class:"q-mx-xs",icon:"file_pdf",label:"PDF",color:"primary",onClick:o[0]||(o[0]=function(o){return e.imprimir("pdf")})}),(0,a.bF)(l,{class:"q-mx-xs",icon:"file_excel",label:"EXCEL",color:"primary",onClick:o[1]||(o[1]=function(o){return e.imprimir("xls")})})])]}),_:1})]}),footerMobile:(0,a.k6)(function(){return[[7,8].indexOf(e.reporte)<0?((0,a.uX)(),(0,a.Wv)(l,{key:0,flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[2]||(o[2]=function(o){return e.imprimir("pdf")})})):(0,a.Q3)("v-if",!0),(0,a.bF)(l,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[3]||(o[3]=function(o){return e.imprimir("xls")})})]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",q,[(0,a.Lk)("div",R,[(0,a.Lk)("div",x,(0,i.v_)(e.$t("botones.reportes")),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tipoReportes,function(l,r){return(0,a.uX)(),(0,a.Wv)(t,{key:r,class:"q-py-sm",modelValue:e.reporte,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.reporte=o}),val:l.value,label:l.label,onInput:e.resetFiltro},null,8,["modelValue","val","label","onInput"])}),128))]),(0,a.Lk)("div",y,[(0,a.Lk)("div",T,[(0,a.Lk)("div",I,[5!==e.reporte&&6!==e.reporte&&7!==e.reporte&&8!==e.reporte&&9!==e.reporte&&11!==e.reporte?((0,a.uX)(),(0,a.Wv)(n,{key:0,modelValue:e.filtroSalon,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.filtroSalon=o}),color:"secondary",label:"Por Salón","true-value":1,"false-value":0},null,8,["modelValue"])):(0,a.Q3)("v-if",!0)])]),(0,a.Lk)("div",F,[(0,a.Lk)("div",M,[1==e.filtroSalon&&11!==e.reporte?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.nemo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.nemo=o}),options:e.salonesReportes,placeholder:e.$t("salon"),error:e.v$.nemo.$error,"error-label":"Este campo es requerido",onBlur:e.v$.nemo.$touch,onInput:e.obtAlumnosPorSalon},null,8,["modelValue","options","placeholder","error","onBlur","onInput"])):(0,a.Q3)("v-if",!0)])]),1!==e.filtroSalon&&11!==e.reporte?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",w,[(0,a.bF)(s,{class:"q-if-outlined",modelValue:e.instrucod,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.instrucod=o}),options:e.niveles,"float-label":e.$t("ngs.nivel"),error:e.v$.instrucod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.instrucod.$touch,onInput:o[8]||(o[8]=function(o){return e.gradocod="T"})},null,8,["modelValue","options","float-label","error","onBlur"])]),(0,a.Lk)("div",U,[(0,a.bF)(s,{class:"q-if-outlined",modelValue:e.gradocod,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.gradocod=o}),options:e.grados[e.instrucod],"float-label":e.$t("ngs.grado"),error:e.v$.gradocod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.gradocod.$touch,onInput:o[10]||(o[10]=function(o){return e.seccioncod="T"})},null,8,["modelValue","options","float-label","error","onBlur"])]),(0,a.Lk)("div",Q,[1!==e.filtroSalon&&11!==e.reporte?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.seccioncod,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.seccioncod=o}),options:e.secciones[e.instrucod+""+e.gradocod],"float-label":e.$t("ngs.seccion"),error:e.v$.seccioncod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.seccioncod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])):(0,a.Q3)("v-if",!0)])])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",N,[(0,a.Lk)("div",j,[[7,8,10].indexOf(e.reporte)>=0?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.filtroReporte,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.filtroReporte=o}),options:e.filtrosReporte,"float-label":"Separar por:",error:e.v$.filtroReporte.$error,"error-label":"Este campo es requerido",onBlur:e.v$.filtroReporte.$touch},null,8,["modelValue","options","error","onBlur"])):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",B,[[10].indexOf(e.reporte)>=0?((0,a.uX)(),(0,a.Wv)(u,{key:0,class:"q-if-outlined",modelValue:e.porcentaje,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.porcentaje=o}),"float-label":"Porcentaje de Faltas: ",type:"number",min:"0",max:"100",suffix:"%",error:e.v$.porcentaje.$error,"error-label":"Este campo es requerido",onBlur:e.v$.porcentaje.$touch},null,8,["modelValue","error","onBlur"])):(0,a.Q3)("v-if",!0)])]),(0,a.Lk)("div",X,[(0,a.Lk)("div",P,[[5,6,9].indexOf(e.reporte)>=0?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.alucod,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.alucod=o}),options:e.alumnosReportes,"float-label":"Alumno",error:e.v$.alucod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.alucod.$touch},null,8,["modelValue","options","error","onBlur"])):(0,a.Q3)("v-if",!0)])]),[5,6,7,8,9,10,11].indexOf(e.reporte)<0?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("div",_,[(0,a.Lk)("div",H,[(0,a.bF)(s,{class:"q-if-outlined",modelValue:e.cursocod,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.cursocod=o}),options:e.cursosReportes,"float-label":e.$t("curso"),error:e.v$.cursocod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.cursocod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])])]),(0,a.Lk)("div",Y,[(0,a.Lk)("div",G,[(0,a.bF)(s,{class:"q-if-outlined",modelValue:e.grupocod,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.grupocod=o}),options:e.gruposReportes,"float-label":e.$t("grupo"),error:e.v$.grupocod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.grupocod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])])])],64)):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",W,[(0,a.Lk)("div",z,[[1,9].indexOf(e.reporte)>=0||[7,8,10].indexOf(e.reporte)>=0&&2===e.filtroReporte?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.periodo,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.periodo=o}),options:e.periodos,"float-label":e.$t("periodo"),error:e.v$.periodo.$error,"error-label":"Este campo es requerido",onBlur:e.v$.periodo.$touch},null,8,["modelValue","options","float-label","error","onBlur"])):(0,a.Q3)("v-if",!0)])]),(0,a.Lk)("div",K,[(0,a.Lk)("div",J,[[2,6].indexOf(e.reporte)>=0||[7,8,10].indexOf(e.reporte)>=0&&3===e.filtroReporte?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.mes,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.mes=o}),options:e.meses,"float-label":e.$t("mes"),error:e.v$.mes.$error,"error-label":"Este campo es requerido",onBlur:e.v$.mes.$touch},null,8,["modelValue","options","float-label","error","onBlur"])):(0,a.Q3)("v-if",!0)])]),(0,a.Lk)("div",Z,[(0,a.Lk)("div",ee,[11===e.reporte?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.tFiltro,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.tFiltro=o}),options:e.comboTipo,"float-label":"Total por"},null,8,["modelValue","options"])):(0,a.Q3)("v-if",!0)])]),(0,a.Lk)("div",oe,[(0,a.Lk)("div",le,[[3,5].indexOf(e.reporte)>=0||[7,8,10,11].indexOf(e.reporte)>=0&&1===e.filtroReporte?((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"q-if-outlined",modelValue:e.fecini,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.fecini=o}),type:"date","float-label":e.$t([5,8].indexOf(e.reporte)>=0?"fecha":"desde"),format:"DD/MM/YYYY",error:e.v$.fecini.$error,"error-label":"Este campo es requerido",onBlur:e.v$.fecini.$touch},null,8,["modelValue","float-label","error","onBlur"])):(0,a.Q3)("v-if",!0)]),3===e.reporte||[7,10,11].indexOf(e.reporte)>=0&&1==e.filtroReporte?((0,a.uX)(),(0,a.CE)("div",re,[(0,a.bF)(c,{class:"q-if-outlined",modelValue:e.fecfin,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.fecfin=o}),type:"date","float-label":e.$t("hasta"),format:"DD/MM/YYYY",error:e.v$.fecfin.$error,"error-label":"Este campo es requerido",onBlur:e.v$.fecfin.$touch},null,8,["modelValue","float-label","error","onBlur"])])):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",te,[(0,a.Lk)("div",ae,[[1,2].indexOf(e.reporte)>=0?((0,a.uX)(),(0,a.Wv)(d,{key:0,type:"outlined",modelValue:e.filtroTurno,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.filtroTurno=o}),options:e.dataTurnos,label:"DESCRIPCION",val:"ID",placeholder:e.$t("Turno")},null,8,["modelValue","options","placeholder"])):(0,a.Q3)("v-if",!0)])]),10!==e.reporte&&11!==e.reporte?((0,a.uX)(),(0,a.CE)("fieldset",ie,[(0,a.Lk)("legend",ne,(0,i.v_)(e.$t("Estados"))+" :",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.iconosPrint,function(l){return(0,a.uX)(),(0,a.CE)("div",se,[(0,a.bF)(f,{modelValue:e.filtroEstado,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.filtroEstado=o}),label:l.descripcion,val:l.estado,color:"secondary"},null,8,["modelValue","label","val"])])}),256))])):(0,a.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","title","onInput"])}l(52133),l(50310),l(90095),l(6724),l(515),l(83190),l(13715);var ce=l(83972),de=l(82640),fe=l(13813),pe=l(8261),me=l(33001),he=l(2819),ve={setup:function(){var e=(0,ce.fG)();return{v$:e}},emits:["cerrarModal"],components:{sieSelect:E.A,sieModal:S.A,QDatetime:v.T5,QRadio:v.$,QToggle:v.c5,QSelect:v.Si,date:v.p6,QCheckbox:v.vZ,QToolbar:v.ZV,QBtn:v.Il,QInput:v.ie},props:["open","sieInfo"],data:function(){return{impStat:!0,iconosPrint:[],meses:[{label:"Enero",value:"01"},{label:"Febrero",value:"02"},{label:"Marzo",value:"03"},{label:"Abril",value:"04"},{label:"Mayo",value:"05"},{label:"Junio",value:"06"},{label:"Julio",value:"07"},{label:"Agosto",value:"08"},{label:"Setiembre",value:"09"},{label:"Octubre",value:"10"},{label:"Noviembre",value:"11"},{label:"Diciembre",value:"12"}],comboTipo:[{label:"Nivel",value:1},{label:"Grado",value:2}],tipoReportes:[{label:"Resumen de Asistencia por Periodo",value:1},{label:"Resumen de Asistencia por Mes",value:2},{label:"Listado de Asistencias por Fechas",value:3},{label:"Listado de Asistencias por Alumno / Dia",value:5},{label:"Listado de Asistencias por Alumno / Mes",value:6},{label:"Listado de Asistencias por Alumno / Periodo",value:9},{label:"Consolidado de Asistencias por Rango",value:7},{label:"Resumen de asistencia por rango",value:8},{label:"Resumen de asistencia por porcentaje de faltas",value:10}],reporte:1,filtroSalon:1,turnoSelect:null,salonesReportes:[],niveles:[],grados:{},secciones:{},filtrosReporte:[],alumnosReportes:[],cursosReportesTemp:[],dataTurnos:[],periodos:[],filtroEstado:[],filtroTurno:null,nemo:null,instrucod:null,grupocod:null,fecini:Date.now(),fecfin:Date.now(),tFiltro:2,gradocod:"T",seccioncod:"T",filtroReporte:1,porcentaje:10,alucod:"",cursocod:null,periodo:null,mes:v.p6.formatDate(Date.now(),"MM")}},watch:{open:function(e){this.impStat=e},reporte:function(e){switch([5,6,9].indexOf(this.reporte)>=0&&this.obtAlumnosPorSalon(),e){case 7:this.filtrosReporte=[{label:"Fecha",value:1},{label:"Mes",value:3}],this.filtroSalon=1;break;case 8:this.filtrosReporte=[{label:"Fecha",value:1},{label:"Periodo",value:2},{label:"Mes",value:3}],this.filtroSalon=1;break;case 10:this.filtrosReporte=[{label:"Fecha",value:1},{label:"Periodo",value:2},{label:"Mes",value:3}],this.filtroSalon=0;break;default:this.filtroSalon=1;break}}},methods:{modalCerrar:function(e){this.$emit("cerrarModal")},resetFiltro:function(){this.filtroSalon=1},obtAlumnosPorSalon:function(e){var o=this;[5,6,9].indexOf(this.reporte)>=0&&D.$http.get("api/HyoSalonAl/obtAlumnosPorSalon",{params:{nemo:this.nemo}}).then(function(e){var l=e.json;l.length>0&&(o.alucod=null,o.alumnosReportes=l.map(function(e){return{label:e.NOMCOMP,value:e.ALUCOD}}))})},imprimir:function(e){var o="/intranet/reporte-node/reporte",l=this.sieInfo.ano,r={};if(this.v$.$touch(),console.log(this.v$),!this.v$.$error){r["reporte"]=this.reporte,r["repcod"]="asistenciaCurso",r["porSalon"]=this.filtroSalon,r["formato"]=e,r["ano"]=l,r["nemo"]=this.nemo,r["instrucod"]=this.instrucod,r["gradocod"]=this.gradocod,r["seccioncod"]=this.seccioncod,r["cursocod"]=this.cursocod,r["grupocod"]=this.grupocod,r["mes"]=this.mes,r["periodo"]=this.periodo,r["alucod"]=this.alucod,r["fecini"]=v.p6.formatDate(this.fecini,"DD/MM/YYYY"),r["fecfin"]=v.p6.formatDate(this.fecfin,"DD/MM/YYYY"),r["ano"]=this.sieInfo.ano,r["turno"]=this.filtroTurno,r.filtro=this.filtroEstado,r.filtroReporte=this.filtroReporte,r.tFiltro=this.tFiltro;var t=Math.abs(this.fecfin-this.fecini),a=Math.ceil(t/864e5);if(r["diasDiff"]=a,[7,8].indexOf(this.reporte)>=0&&(r.cursocod="%",1===r.filtroReporte&&a>=31))return(0,A["default"])("El reporte no puede ser de mas de 31 días","warning"),!1;if([10].indexOf(this.reporte)>=0){if(!(this.porcentaje>=0&&this.porcentaje<=100))return(0,A["default"])("el porcentaje debe ser entre 0 y 100 ","error"),!1;r["porcentaje"]=this.porcentaje}1!==this.filtroSalon&&delete r["nemo"],(0,he.exportFilePhp)(r,o,"Resumen Asistencia por Periodo")}}},validations:function(){var e={};return 11!==this.reporte&&(1===this.filtroSalon?e["nemo"]={required:de.mw}:(e["instrucod"]={required:de.mw},e["gradocod"]={required:de.mw},e["seccioncod"]={required:de.mw})),[7,8,10].indexOf(this.reporte)>=0&&(e["filtroReporte"]={required:de.mw}),[10].indexOf(this.reporte)>=0&&(e["porcentaje"]={required:de.mw}),[5,6,9].indexOf(this.reporte)>=0&&(e["alucod"]={required:de.mw}),[5,6,7,8,9,10,11].indexOf(this.reporte)<0&&(e["cursocod"]={required:de.mw},e["grupocod"]={required:de.mw}),([1,9].indexOf(this.reporte)>=0||[7,8,10].indexOf(this.reporte)>=0&&2===this.filtroReporte)&&(e["periodo"]={required:de.mw}),([2,6].indexOf(this.reporte)>=0||[7,8,10].indexOf(this.reporte)>=0&&3===this.filtroReporte)&&(e["mes"]={required:de.mw}),([3,5].indexOf(this.reporte)>=0||[7,8,10,11].indexOf(this.reporte)>=0&&1===this.filtroReporte)&&(e["fecini"]={required:de.mw}),[3,7,10,11].indexOf(this.reporte)>=0&&(e["fecfin"]={required:de.mw}),console.log(e),e},mounted:function(){var e=this;D.$http.get("api/HyoSalones/listaSalones").then(function(o){var l=o.json;e.salonesReportes=[],l.forEach(function(o){var l=o.NEMODES,r=o.NEMO,t=o.INSTRUCOD,a=o.GRADOCOD;e.salonesReportes.push({label:l,value:r,instrucod:t,gradocod:a})})}),D.$http.get("api/HyoHorasisEstado/listarHorasisEstado",{params:{momento:2}}).then(function(o){var l=o.json;(0,$["default"])(l,function(o){if("NULO"!==o.ESTADOCOD){var l={estado:o.ESTADOCOD,descripcion:o.ESTADODES,icono:o.ICONO,color:o.COLORVUE,vigente:o.VIGENTE};e.iconosPrint.push(l),e.filtroEstado.push(o.ESTADOCOD)}})}),D.$http.get("api/HyoInstrus/obtInstru").then(function(o){var l=o.json;l.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=(0,fe.mapQ)(l,{label:"INSTRUDES",value:"INSTRUCOD"}),e.instrucod=e.niveles[0].value}),D.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:!0,todos:"T"}}).then(function(o){var l=o.json;Object.keys(l).forEach(function(o){e.grados[o]=[],l[o].forEach(function(l){e.grados[o].push({label:l.GRADODES,value:l.GRADOCOD})})})}),D.$http.get("api/HyoSecciones/obtSecciones",{params:{agrupado:!0,todos:"T"}}).then(function(o){var l=o.json;Object.keys(l).forEach(function(o){e.secciones[o]=[],l[o].forEach(function(l){e.secciones[o].push({label:l.SECCIONDES,value:l.SECCIONCOD})})})}),D.$http.get("api/HyoAsignaprs/obtListaCursos",{params:{parametros:{instrucod:"T",gradocod:"T",seccioncod:"T",asignados:!0}}}).then(function(o){var l=o.json;e.cursosReportesTemp=l}),D.$http.get("api/HyoPercales/estadoFechaInstru",{params:{fecha:new Date,hasta:!0}}).then(function(o){var l=o.json;e.periodos=l.map(function(e){return{label:e.BIMECOD+" Periodo",value:e.BIMECOD}})}),D.$http.get("api/HyoAturno/obtTurnos").then(function(o){var l=o.json;e.dataTurnos=l,e.turnoSelect=l[0].ID}),this.filtroEstado=[]},computed:{gruposReportes:function(){var e=[],o=this.cursosReportesTemp;return 1===this.filtroSalon?o=(0,me.filterArray)(this.nemo,{field:"NEMO",list:o}):("T"!==this.instrucod&&(o=(0,me.filterArray)(this.instrucod,{field:"INSTRUCOD",list:o})),"T"!==this.gradocod&&(o=(0,me.filterArray)(this.gradocod,{field:"GRADOCOD",list:o})),"T"!==this.seccioncod&&(o=(0,me.filterArray)(this.seccioncod,{field:"SECCIONCOD",list:o}))),""!==this.cursocod&&(e=(0,me.filterArray)(this.cursocod,{field:"CURSOCOD",list:o})),e=e.map(function(e){return{label:e.GRUPODES,value:e.GRUPOCOD}}),e=(0,pe["default"])(e,"value"),[3,2].indexOf(this.reporte)>=0&&"%"===this.cursocod&&e.unshift({label:"Todos",value:"001"}),e[0]&&(this.grupocod=e[0].value),e},cursosReportes:function(){var e=this.cursosReportesTemp;return 1===this.filtroSalon?e=(0,me.filterArray)(this.nemo,{field:"NEMO",list:e}):("T"!==this.instrucod&&(e=(0,me.filterArray)(this.instrucod,{field:"INSTRUCOD",list:e})),"T"!==this.gradocod&&(e=(0,me.filterArray)(this.gradocod,{field:"GRADOCOD",list:e})),"T"!==this.seccioncod&&(e=(0,me.filterArray)(this.seccioncod,{field:"SECCIONCOD",list:e}))),e=e.map(function(e){return{label:e.CURSONOM,value:e.CURSOCOD}}),e=(0,pe["default"])(e,"value"),[3].indexOf(this.reporte)>=0&&e.unshift({label:"Todos",value:"%"}),e}}},be=l(12807);const ge=(0,be.A)(ve,[["render",ue]]);var Oe=ge,Ee=l(59089),ke=l(33950),De=l(81288),Se={components:{QInnerLoading:v.SQ,QTd:v.Ef,QDatetime:v.T5,sieSalones:O.Ay,sieSelect:E.A,registro:C.A,sieVacio:V.A,print:Oe,sieUpload:Ee.A,QTable:g.A,sieModal:S.A,QSpinnerGears:v.hV,QTooltip:v.nC,QList:v.Mb,QListHeader:v.XR,QItem:v.H0,QItemMain:v.mF,QItemTile:v.lp,QPage:v.Tu,QItemSide:v.n1,QBtn:v.Il,QIcon:v.bP},data:function(){return{cargando:!1,sieInfo:(0,k["default"])(),acceso:(0,k["default"])().ruta.nivel>=2,fileupd:{},infoAsistencia:[],infoModalDetalle:{},modalDetalle:!1,listIcons:[],modalEstados:!1,fecha:new Date,columnas:[{name:"NOMCOMP",label:"Estudiante",field:"NOMCOMP",align:"left"},{name:"NEMODES",label:"Salon",field:"NEMODES",align:"left"},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left"},{name:"FECHA",label:"Fecha",field:"FECHA",align:"left"},{name:"ESTADODES",label:"Estado",field:"ESTADODES",align:"left"}],columnEstados:[{name:"ESTADODES",label:"Descripción",field:"ESTADODES",align:"left"},{name:"ESTADOETI",label:"Valor",field:"ESTADOETI",align:"left"}]}},methods:{cancelarSubida:function(){this.fileupd={},this.infoAsistencia=[]},openModal:function(){this.modalEstados=!0},addFile:function(e){var o=this;(0,ke.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){o.fileupd=e;var l="api/HyoAsistenciacurso/importarAsistenciaBloque",r={tmp:o.fileupd.name,fecha:o.fecha};D.$http.get(l,{params:r}).then(function(e){e.length>0?o.infoAsistencia=e:(o.cancelarSubida(),(0,A["default"])("No hay información por importar","error"))})}).catch(function(){})},saveInfo:function(){var e=this;this.cargando=!0;var o={actualizar:[],agregar:[],agregaGen:[],eliminar:[],fecha:this.fecha};this.infoModalDetalle={actualizar:[],agregar:[],agregaGen:[],noProcesados:[]},(0,$["default"])(this.infoAsistencia,function(l){l.ESTADO?(l.ESTADO&&"NULO"===l.ESTADOHA&&o.agregaGen.push(l),l.ID?(o.actualizar.push(l),e.infoModalDetalle.actualizar.push(h()(h()({},l),{},{desc:"Registros Actualizados "}))):l.ESTADO&&(o.agregar.push(l),e.infoModalDetalle.agregar.push(h()(h()({},l),{},{desc:"Registros Insertados "})))):e.infoModalDetalle.noProcesados.push(h()(h()({},l),{},{desc:"Registros no procesados "}))}),(o.agregar.length>0||o.actualizar.length>0||o.agregaGen.length>0||o.eliminar.length>0)&&D.$http.post("api/HyoAsistenciacurso/grabarAsistencia",o).then(function(o){var l=o.json;e.cargando=!1,"m0001"===l?(e.cancelarSubida(),b.A.create({message:e.$t("mensajes."+l),icon:"check_circle",color:"positive",position:(0,De.isGreater)()?"top-right":"bottom",type:"success",actions:[{label:"Ver Detalle",handler:function(){e.modalDetalle=!0}}]})):(0,A["default"])(e.$t("mensajes."+l),"error")})}},computed:{isLess:function(){return(0,De.isLess)()}},created:function(){var e=this;D.$http.get("api/HyoHorasisEstado/listarHorasisEstado",{params:{momento:2}}).then(function(o){var l=o.json;e.listIcons=l})}};const $e=(0,be.A)(Se,[["render",p]]);var Ae=$e}}]);