"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[45367],{45367:function(o,e,i){i.r(e),i.d(e,{default:function(){return ho}});var t=i(8445),a=i.n(t),r=(i(71225),i(50310),i(5962),i(83190),i(61758)),l=i(58790),n={class:"row q-px-sm q-pt-sm"},s={class:"col-xs-12 col-md-2"},c={class:"col-xs-12 col-md-2"},d={class:"col-xs-12 col-md-6"},u={class:"col-xs-12 col-md-2"},f={key:0,class:"col-xs-12 col-md-4"},v={class:"row q-ma-xs-sm q-px-sm"},m={class:"col-12 text-right"},p={class:"row q-px-sm col"},g={class:"col-xs-8 listaDetalle"},h={class:"col-xs-4 listaDetalle"},b={class:"row q-pa-sm"},R={class:"col-6"},C={class:"col-6"},F={class:"row q-pa-sm"},E={class:"col-8"},I={class:"col-4"},S={key:0,class:"row q-pa-sm"},k={class:"col-12 q-mb-sm"},P={class:"col-12 q-ml-lg"},_={key:1,class:"row q-pa-sm"},N={key:0,class:"col-12"},O={class:"col-12"},A={key:1,class:"col-12"},D={class:"row q-pa-sm"},V={class:"col-6"},w={class:"row q-pa-sm"},L={class:"col-6"},T={class:"col-6"},y={class:"row q-pa-sm"},q={class:"col-6"},G={class:"row q-pa-sm"},U={class:"col-12"},x={class:"row q-pa-sm"},B={class:"col-12"},M={class:"row q-pa-sm"},$={class:"col-12"},j={class:"row q-pa-sm"},Q={class:"col-12"},z={class:"row q-pa-sm"},H={class:"col-12"};function W(o,e){var i=(0,r.g2)("q-toolbar-title"),t=(0,r.g2)("q-toolbar"),W=(0,r.g2)("q-select"),X=(0,r.g2)("selectMultiple"),J=(0,r.g2)("sie-select"),Z=(0,r.g2)("q-tooltip"),K=(0,r.g2)("q-btn"),Y=(0,r.g2)("q-td"),oo=(0,r.g2)("q-tr"),eo=(0,r.g2)("q-table"),io=(0,r.g2)("q-icon"),to=(0,r.g2)("q-page-sticky"),ao=(0,r.g2)("q-input"),ro=(0,r.g2)("q-toggle"),lo=(0,r.g2)("sie-modal"),no=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(no,{class:"bg-white"},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{class:"shadow-2 z-fab",inverted:""},{default:(0,r.k6)(function(){return[(0,r.bF)(i,{class:"q-pa-none"},{default:(0,r.k6)(function(){return a()(e[20]||(e[20]=[(0,r.eW)("Banda de calificaci贸n IB",-1)]))}),_:1})]}),_:1}),(0,r.Lk)("div",n,[(0,r.Lk)("div",s,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.instrucod,options:o.dataSelect.nivel,"float-label":o.$t("ngs.nivel"),onChange:o.seleccionaInstru,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,r.Lk)("div",c,[(0,r.bF)(W,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:o.vmFiltro.gradocod,options:o.grados,"float-label":o.$t("ngs.grado"),onChange:o.seleccionaGrado,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,r.Lk)("div",d,[(0,r.bF)(X,{options:o.dataSelect.curso,modelValue:o.vmFiltro.curso,labelSelect:o.$t("curso"),onChange:o.seleccionaCurso},null,8,["options","modelValue","labelSelect","onChange"])]),(0,r.Lk)("div",u,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.periodo,options:o.dataSelect.periodoFiltro,"float-label":o.$t("periodo"),onChange:o.seleccionaPeriodoFiltro},null,8,["modelValue","options","float-label","onChange"])]),o.isFiltroNivelEva?((0,r.uX)(),(0,r.CE)("div",f,[(0,r.bF)(J,{type:"outlined",modelValue:o.vmFiltro.id,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.vmFiltro.id=e}),options:o.dataNivelEva,label:"label",val:"id",placeholder:"Programa",onSelected:o.seleccionaNivelEvaFiltro},null,8,["modelValue","options","onSelected"])])):(0,r.Q3)("v-if",!0)]),(0,r.Lk)("div",v,[(0,r.Lk)("div",m,[(0,r.bF)(K,{onClick:e[1]||(e[1]=function(e){return o.add()}),round:"",color:"secondary",icon:"plus"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{anchor:"top middle",self:"bottom middle"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,l.v_)(o.$t("botones.agregar")),1)]}),_:1})]}),_:1}),(0,r.bF)(K,{class:"q-ml-xs",onClick:e[2]||(e[2]=function(e){return o.eliminar(o.conf.selected)}),round:"",color:"secondary",icon:"delete"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{anchor:"top middle",self:"bottom middle"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,l.v_)(o.$t("botones.eliminar")),1)]}),_:1})]}),_:1})])]),(0,r.Lk)("div",p,[(0,r.Lk)("div",g,[(0,r.bF)(eo,{data:o.dataDetalleCab,columns:o.confCab.columns,selection:o.confCab.selection,pagination:o.confCab.pagination,selected:o.confCab.selected,"onUpdate:selected":e[3]||(e[3]=function(e){return o.confCab.selected=e}),"row-key":"IDCAB",color:"secondary"},{body:(0,r.k6)(function(e){return[(0,r.bF)(oo,{class:(0,l.C4)(["cursor-pointer",e.row.IDCAB===o.cabSeleccionado?"bg-grey-4":""]),props:e},{default:(0,r.k6)(function(){return[(0,r.bF)(Y,{key:"GRADODES",props:e,onClick:function(i){return o.seleccionaFilaCab(e.row.IDCAB)}},{default:(0,r.k6)(function(){return[(0,r.eW)((0,l.v_)(e.row.GRADODES),1)]}),_:2},1032,["props","onClick"]),(0,r.bF)(Y,{key:"CURSONOM",props:e,onClick:function(i){return o.seleccionaFilaCab(e.row.IDCAB)}},{default:(0,r.k6)(function(){return[(0,r.eW)((0,l.v_)(e.row.CURSONOM),1)]}),_:2},1032,["props","onClick"]),(0,r.bF)(Y,{key:"REFERENCIA",props:e,onClick:function(i){return o.seleccionaFilaCab(e.row.IDCAB)}},{default:(0,r.k6)(function(){return[(0,r.eW)((0,l.v_)(1==e.row.NIVEL_EVA?e.row.CRITERIO:e.row.REFERENCIA),1)]}),_:2},1032,["props","onClick"]),(0,r.bF)(Y,{key:"CRITERIO",props:e,onClick:function(i){return o.seleccionaFilaCab(e.row.IDCAB)}},{default:(0,r.k6)(function(){return[(0,r.eW)((0,l.v_)(1==e.row.NIVEL_EVA?"-":e.row.CRITERIO),1)]}),_:2},1032,["props","onClick"])]}),_:2},1032,["props","class"])]}),_:1},8,["data","columns","selection","pagination","selected"])]),(0,r.Lk)("div",h,[(0,r.bF)(eo,{data:o.dataDetalle,columns:o.conf.columns,selection:o.conf.selection,pagination:o.conf.pagination,selected:o.conf.selected,"onUpdate:selected":e[4]||(e[4]=function(e){return o.conf.selected=e}),"row-key":"ID_ESCALA_PREVISTA",color:"secondary",filter:o.conf.filter},{"body-cell-ACCION":(0,r.k6)(function(i){return[(0,r.bF)(Y,{props:i},{default:(0,r.k6)(function(){return[(0,r.bF)(io,{class:"cursor-pointer q-mx-xs",onClick:function(e){return o.add(i.row.ID_ESCALA_PREVISTA,i.row)},name:"edit",color:"black",size:"17px"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{anchor:"top middle",self:"bottom middle"},{default:(0,r.k6)(function(){return a()(e[21]||(e[21]=[(0,r.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","selection","pagination","selected","filter"])])]),(0,r.bF)(to,{position:"bottom-right",offset:[20,20]},{default:(0,r.k6)(function(){return[(0,r.bF)(K,{fab:"",round:"",color:"secondary",icon:"print",onClick:o.boxReporte},null,8,["onClick"])]}),_:1}),(0,r.bF)(lo,{class:"plantilla-comentario-modal",modelValue:o.modal,"onUpdate:modelValue":e[13]||(e[13]=function(e){return o.modal=e}),title:o.titulo,ok:o.$t("botones.guardar"),footer:!0,onSubmit:o.grabar,onClose:o.cerrarModal},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",b,[(0,r.Lk)("div",R,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.form.instrucod,options:o.dataSelect.nivel,"float-label":o.$t("ngs.nivel"),onChange:o.seleccionaInstruReg,disable:o.actualizarReg},null,8,["modelValue","options","float-label","onChange","disable"])]),(0,r.Lk)("div",C,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.form.gradocod,options:o.gradosReg,"float-label":o.$t("ngs.grado"),onChange:o.seleccionaGradoReg,disable:o.actualizarReg},null,8,["modelValue","options","float-label","onChange","disable"])])]),(0,r.Lk)("div",F,[(0,r.Lk)("div",E,[(0,r.bF)(J,{type:"outlined",modelValue:o.form.cursocod,"onUpdate:modelValue":e[5]||(e[5]=function(e){return o.form.cursocod=e}),options:o.dataSelect.cursoReg,label:"CURSONOM",val:"CURSOCOD",onSelected:o.seleccionaCursoReg,placeholder:"curso",disable:o.actualizarReg},null,8,["modelValue","options","onSelected","disable"])]),(0,r.Lk)("div",I,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.form.periodo,options:o.dataSelect.periodo,"float-label":o.$t("periodo"),onChange:o.seleccionaPeriodo,disable:o.actualizarReg},null,8,["modelValue","options","float-label","onChange","disable"])])]),o.actualizarReg?((0,r.uX)(),(0,r.CE)("div",S,[(0,r.Lk)("div",k,[(0,r.Lk)("p",null,(0,l.v_)(o.form.referencia),1)]),(0,r.Lk)("div",P,[(0,r.Lk)("p",null,(0,l.v_)(o.form.criterio),1)])])):((0,r.uX)(),(0,r.CE)("div",_,[o.isFiltroNivelEva?((0,r.uX)(),(0,r.CE)("div",N,[(0,r.bF)(J,{type:"outlined",modelValue:o.form.cboId,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.form.cboId=e}),options:o.dataNivelEva,label:"label",val:"id",onSelected:o.seleccionaNivelEv,placeholder:"Programa"},null,8,["modelValue","options","onSelected"])])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",O,[(0,r.bF)(J,{type:"outlined",modelValue:o.form.nivel1,"onUpdate:modelValue":e[7]||(e[7]=function(e){return o.form.nivel1=e}),options:o.dataSelect.nivel1,label:"CRITERIO",val:"ID",onSelected:o.seleccionaCriterio,placeholder:"Competencia"},null,8,["modelValue","options","onSelected"])]),!o.isFiltroNivelEva||o.isFiltroNivelEva&&2===o.cboNivEva?((0,r.uX)(),(0,r.CE)("div",A,[(0,r.bF)(J,{type:"outlined",modelValue:o.form.nivel2,"onUpdate:modelValue":e[8]||(e[8]=function(e){return o.form.nivel2=e}),options:o.dataSelect.nivel2,label:"CRITERIO",val:"ID",onSelected:o.seleccionaCriterio,placeholder:"Capacidad"},null,8,["modelValue","options","onSelected"])])):(0,r.Q3)("v-if",!0)])),(0,r.Lk)("div",D,[(0,r.Lk)("div",V,[(0,r.bF)(ao,{class:"q-if-outlined",modelValue:o.form.nota_prevista,"onUpdate:modelValue":e[9]||(e[9]=function(e){return o.form.nota_prevista=e}),"float-label":"Nota prevista"},null,8,["modelValue"])])]),(0,r.Lk)("div",w,[(0,r.Lk)("div",L,[(0,r.bF)(ao,{class:"q-if-outlined",modelValue:o.form.nota_inicio,"onUpdate:modelValue":e[10]||(e[10]=function(e){return o.form.nota_inicio=e}),"float-label":o.lblNotaIni},null,8,["modelValue","float-label"])]),(0,r.Lk)("div",T,[(0,r.bF)(ao,{class:"q-if-outlined",modelValue:o.form.nota_fin,"onUpdate:modelValue":e[11]||(e[11]=function(e){return o.form.nota_fin=e}),"float-label":"Nota Fin"},null,8,["modelValue"])])]),(0,r.Lk)("div",y,[(0,r.Lk)("div",q,[(0,r.bF)(ro,{class:"q-if-outlined",modelValue:o.cerrarVentana,"onUpdate:modelValue":e[12]||(e[12]=function(e){return o.cerrarVentana=e}),"true-value":1,"false-value":0,label:"Cerrar al guardar",color:"secondary"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","title","ok","onSubmit","onClose"]),(0,r.bF)(lo,{class:"escala-prevista-imprimir",modelValue:o.modalRep,"onUpdate:modelValue":e[19]||(e[19]=function(e){return o.modalRep=e}),title:"Reporte",header:!0,ok:!1,onClose:o.cerrarModalRep},{footer:(0,r.k6)(function(){return[(0,r.bF)(t,{class:"justify-end",color:"grey-2"},{default:(0,r.k6)(function(){return[(0,r.bF)(K,{class:"q-mx-xs",color:"primary",icon:"file_pdf",onClick:e[15]||(e[15]=function(e){return o.imprimir("pdf")}),label:"PDF"}),(0,r.bF)(K,{class:"q-mx-xs",color:"primary",icon:"file_excel",onClick:e[16]||(e[16]=function(e){return o.imprimir("xls")}),label:"Excel"})]}),_:1})]}),footerMobile:(0,r.k6)(function(){return[(0,r.bF)(K,{flat:"",round:"",icon:"file_pdf",onClick:e[17]||(e[17]=function(e){return o.imprimir("pdf")})}),(0,r.bF)(K,{flat:"",round:"",icon:"file_excel",onClick:e[18]||(e[18]=function(e){return o.imprimir("xls")})})]}),default:(0,r.k6)(function(){return[(0,r.Lk)("div",G,[(0,r.Lk)("div",U,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltroReporte.instrucod,options:o.dataSelect.nivel,"float-label":o.$t("ngs.nivel"),onChange:o.seleccionaInstruRep},null,8,["modelValue","options","float-label","onChange"])])]),(0,r.Lk)("div",x,[(0,r.Lk)("div",B,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltroReporte.gradocod,options:o.grados,"float-label":o.$t("ngs.grado"),onChange:o.seleccionaGradoRep},null,8,["modelValue","options","float-label","onChange"])])]),(0,r.Lk)("div",M,[(0,r.Lk)("div",$,[(0,r.bF)(J,{type:"outlined",modelValue:o.vmFiltroReporte.cursocod,options:o.dataCursosRep,label:"CURSONOM",val:"CURSOCOD",placeholder:"Curso",onSelected:o.seleccionaCursoRep},null,8,["modelValue","options","onSelected"])])]),(0,r.Lk)("div",j,[(0,r.Lk)("div",Q,[(0,r.bF)(W,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltroReporte.periodo,options:o.dataSelect.periodoFiltro,onChange:o.seleccionaPeriodoRep,"float-label":o.$t("periodo")},null,8,["modelValue","options","onChange","float-label"])])]),(0,r.Lk)("div",z,[(0,r.Lk)("div",H,[(0,r.bF)(J,{type:"outlined",modelValue:o.vmFiltroReporte.id,"onUpdate:modelValue":e[14]||(e[14]=function(e){return o.vmFiltroReporte.id=e}),options:o.dataNivelEva,label:"label",val:"id",placeholder:"Programa",onSelected:o.seleccionaNivelEvaRep},null,8,["modelValue","options","onSelected"])])])]}),_:1},8,["modelValue","onClose"])]}),_:1})}var X=i(99550),J=i.n(X),Z=i(76080),K=i.n(Z),Y=i(45254),oo=i.n(Y),eo=(i(23825),i(10239),i(9240),i(70199),i(515),i(27153),i(44264),i(66307),i(24066),i(6123)),io=i(93616),to=i(30640),ao=i(2819),ro=i(982),lo=i(13813),no=i(69027),so=i(27738),co=i(80660),uo={default:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{idPrevista:o,instrucod:e,gradocod:"",periodo:"",cursocod:"",grupocod:"",criterio:"",referencia:"",llave:"",nivel2:"",descripcion:null,estado:1,nota_inicio:"",nota_fin:"",nota_prevista:0,cboNivEva:1,cboId:null}},maxNivelEva:function(){return 2},getNivelesEval:function(){return co.$http.get("api/HyoPrograma/obtDatos",{params:{idPrograma:2,sinReferencia:!1,tipoPrograma:1,nivel:2,tipo_eva:1}}).then(function(o){var e=o.json;return e})},getNivelesEvalIB:function(o,e){return co.$http.get("api/HyoPrograma/obtProgDatosIB",{params:{idProgramaIB:o,idProgramas:e,tipoPrograma:1,nivel:2}}).then(function(o){var e=o.json;return e})},getListar:function(o,e,i,t,a){return co.$http.get("api/HyoEscalaPrevista/listar",{params:{instrucod:o,periodo:e,nivelEva:i,tipoEva:t,idProgramaIB:a}})},tipoRegistro:function(o,e){return co.$http.get("api/HyoClaseContenidoConfig/obtTipoRregistroNivelGrado",{params:{instrucod:o,gradocod:e}})},getCursosNivelGrado:function(o,e){return co.$http.get("api/HyoClase/obtClasesNivelGrado",{params:{instrucod:o,gradocod:e,sinGrupo:!0}})},getListarCriteriosEva:function(o,e,i,t,a,r,l,n){return co.$http.get("api/HyoEscalaPrevista/listarCriteriosIB",{params:{idsClases:o,nivelEva:e,periodo:i,idProgramaRef:t,indiceRef:a,llaveRef:r,idProgramaIB:l,tipoeva:n}})},grabar:function(o,e,i){if(e){var t={nota_inicio:o.nota_inicio,nota_fin:o.nota_fin,nota_prevista:o.nota_prevista};return co.$http.post("api/HyoEscalaPrevista/actualizar",{idPrevista:o.idPrevista,registro:t})}var a=o.nivel2;i&&1===o.cboNivEva&&(a=o.nivel1);var r={instrucod:o.instrucod,gradocod:o.gradocod,cursocod:o.cursocod,grupocod:o.grupocod,periodo:o.periodo,llave:a,nota_inicio:o.nota_inicio,nota_fin:o.nota_fin,nota_prevista:o.nota_prevista};return co.$http.post("api/HyoEscalaPrevista/grabar",r)},eliminar:function(o){return co.$http.post("api/HyoEscalaPrevista/eliminar",{idsPrevista:o})}},fo=i(95523),vo=i(57668),mo={components:{QTable:eo.kH,QTh:eo.EJ,QTr:eo.qh,QTd:eo.Ef,QToggle:eo.c5,QPopupEdit:eo.GT,QSelect:eo.Si,QPageSticky:eo._U,sieSelect:io.A,sieModal:to.A,selectMultiple:fo.A,QPage:eo.Tu,QToolbar:eo.ZV,QToolbarTitle:eo.r_,QBtn:eo.Il,QTooltip:eo.nC,QIcon:eo.bP,QInput:eo.ie},data:function(){return{confCab:{data:[],buttons:[],columns:[{name:"GRADODES",label:this.$t("grado"),field:"GRADODES",align:"center",sortable:!1},{name:"CURSONOM",label:this.$t("curso"),field:"CURSONOM",align:"left",sortable:!1},{name:"REFERENCIA",label:"Competencia",field:"REFERENCIA",align:"left",sortable:!1},{name:"CRITERIO",label:"Capacidad",field:"CRITERIO",align:"left",sortable:!1}],pagination:{page:1,rowsPerPage:200},filter:"",selection:"none",selected:[]},conf:{data:[],columns:[{name:"NOTA_PREVISTA",label:"Nota Prevista",field:"NOTA_PREVISTA",align:"center",sortable:!1},{name:"RANGO",label:"Rango",field:"RANGO",align:"left",sortable:!1},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 100px"}],pagination:{page:1,rowsPerPage:200},filter:"",selection:"multiple",selected:[]},modal:!1,modalRep:!1,niveles:[],form:uo["default"](),vmFiltro:{instrucod:"S",gradocod:[],curso:[],periodo:1,tipoEva:1,id:null},vmFiltroReporte:{instrucod:"S",gradocod:"1",cursocod:"T",periodo:1,tipoEva:1,idProgramaIB:null},vmRegistro:{instrucod:"S",gradocod:[],curso:{},nivel1:{},nivel2:{},periodo:null,idProgramaIB:null},dataSelect:{nivel:[],curso:[],cursoReg:[],periodo:[],nivel1:[],nivel2:[],periodoFiltro:[]},gradosTemp:[],dataCursosRep:[],maxNivelEva:uo.maxNivelEva(),isFiltroNivelEva:!1,nomPrograma:"",tipoRegistro:1,dataDetalle:[],dataNivelEva:[],cboNivEva:1,cboId:null,cabSeleccionado:"",cerrarVentana:!1,isEquivGen:!1,idProgramas:[],dataFiltroProgIB:[],idProgramaSel:null,idProgramaFiltro:null,idProgramaPadreSel:null,idTipoEva:null,idTipoEvaFiltro:null,isNoLimpiarForm:!1}},computed:{grados:function(){var o=this,e=this.gradosTemp;return this.vmFiltro["instrucod"].length>0?(e=e.filter(function(e){return o.vmFiltro["instrucod"]===e.INSTRUCOD}),e=(0,lo["default"])(e,function(o){return{label:o.GRADODES,value:o.GRADOCOD}})):e=[],e},gradosReg:function(){var o=this,e=this.gradosTemp;return this.form.instrucod.length>0?(e=e.filter(function(e){return o.form.instrucod===e.INSTRUCOD}),e=(0,lo["default"])(e,function(o){return{label:o.GRADODES,value:o.GRADOCOD}})):e=[],e},lblNotaIni:function(){return 0===this.tipoRegistro?"Nivel de progreso":"Nota Inicio"},dataDetalleCab:function(){var o=this,e=this.confCab.data;return this.loadingDetalle=!0,this.vmFiltro.curso.length>0&&(e=e.filter(function(e){return o.vmFiltro["curso"].some(function(o){return e.CURSOCOD===o})})),this.vmFiltro.gradocod.length>0&&(e=e.filter(function(e){return o.vmFiltro["gradocod"].some(function(o){return e.GRADOCOD===o})})),this.loadingDetalle=!1,e},actualizarReg:function(){return Object.keys(this.form).length>0&&""!==this.form.idPrevista},titulo:function(){return Object.keys(this.form).length>0&&""!==this.form.idPrevista?"Actualizar Registro":"Nuevo Registro"}},methods:{seleccionaFilaCab:function(o){this.dataDetalle=this.conf.data[o],this.cabSeleccionado=o},seleccionaInstru:function(o){this.vmFiltro.instrucod=o,this.getLista()},seleccionaGrado:function(o){this.vmFiltro.gradocod=o},seleccionaCurso:function(o){this.vmFiltro.curso=o},seleccionaPeriodoFiltro:function(o){this.vmFiltro.periodo=o,this.getLista()},seleccionaNivelEvaFiltro:function(o){this.vmFiltro.id=o.id,this.vmFiltro.tipoEva=o.tipo_eva,this.idTipoEvaFiltro=o.tipo_eva,this.idProgramaFiltro=o.codigo,this.getLista()},getLista:function(o){var e=this;return oo()(K()().m(function i(){var t,a,r,l;return K()().w(function(i){while(1)switch(i.n){case 0:return t=2,e.isFiltroNivelEva&&(a=e.vmFiltro["id"].toString(),r=a.split("_"),t=r[0]),i.n=1,uo.getListar(e.vmFiltro["instrucod"],e.vmFiltro["periodo"],t,e.idTipoEvaFiltro,e.idProgramaFiltro);case 1:l=i.v,e.confCab.data=l.json.dataCab,e.conf.data=l.json.objDetalle,"cargardetalle"===o&&e.seleccionaFilaCab(e.cabSeleccionado),e.actualizarReg||e.isNoLimpiarForm||(e.form=uo["default"]());case 2:return i.a(2)}},i)}))()},getNivelesEval:function(){var o=this;return oo()(K()().m(function e(){var i,t,a,r,l,n;return K()().w(function(e){while(1)switch(e.n){case 0:i=[],t=0;case 1:if(!(t<o.dataFiltroProgIB.length)){e.n=4;break}return a=o.dataFiltroProgIB[t],e.n=2,uo.getNivelesEvalIB(a.ID_PROGRAMAIB,a.ID_PROGRAMAS);case 2:if(r=e.v,r.length>0)for(l=0;l<r.length;l++)n=r[l],i.push(n);case 3:t++,e.n=1;break;case 4:o.dataNivelEva=i,o.idProgramaFiltro=i[0]["codigo"],o.idProgramaPadreSel=i[0]["value"].idpadre,o.idTipoEva=i[0]["tipo_eva"],o.idTipoEvaFiltro=i[0]["tipo_eva"],o.vmFiltro.tipoEva=i[0]["tipo_eva"],o.vmFiltro.id=i[0]["id"],o.getLista();case 5:return e.a(2)}},e)}))()},obtNGS:function(){var o=this;Promise.all([so.A.getNiveles(),so.A.getGrados(),so.A.getCursosCurGra()]).then(function(e){var i=J()(e,3),t=i[0],a=i[1],r=i[2];o.dataSelect.nivel=(0,lo["default"])(t,function(o){return{label:o.INSTRUDES,value:o.INSTRUCOD}}),o.dataSelect.curso=(0,lo["default"])(r,function(o){return{label:o.CURSOCOD+"- "+o.CURSONOM,value:o.CURSOCOD}}),o.gradosTemp=a}),this.dataSelect.periodoFiltro=this.optionsPeriodo(4)},seleccionaInstruReg:function(o){this.limpiar("niveles"),this.form.instrucod=o},seleccionaGradoReg:function(o){var e=this;this.limpiar("grado"),this.form.gradocod=o,this.dataSelect.cursoReg=[],Promise.all([uo.getCursosNivelGrado(this.form.instrucod,this.form.gradocod),uo.tipoRegistro(this.form.instrucod,this.form.gradocod)]).then(function(o){var i=J()(o,2),t=i[0],a=i[1];e.dataSelect.cursoReg=t.json,e.tipoRegistro=a.json[0].TIPO})},seleccionaCursoReg:function(o){this.limpiar("curso"),this.vmRegistro.curso=o,this.form.grupocod=o.GRUPOCOD,this.vmRegistro.curso["idsClases"]=this.vmRegistro.curso["CLASES"].split(","),this.dataSelect.periodo=this.optionsPeriodo(o.PERINUM)},seleccionaPeriodo:function(o){this.form.periodo=o,this.listarCriterios(this.vmRegistro.curso["idsClases"],1,o,null,null,null,this.idProgramaSel,this.idTipoEva)},seleccionaCriterio:function(o){var e=!0;if(this.isFiltroNivelEva){var i=this.form.cboId.toString(),t=i.split("_"),a=t[0];1===a&&(e=!1)}if(e){this.vmRegistro["nivel"+o.NIVEL_EVA]=o;var r=o.NIVEL_EVA+1;r>1&&r<=this.maxNivelEva&&this.listarCriterios(this.vmRegistro.curso["idsClases"],r,this.form.periodo,o.ID_PROGRAMA,o.INDICE,o.ID,this.idProgramaSel,this.idTipoEva)}},listarCriterios:function(o,e,i,t,a,r,l,n){var s=this;this.limpiar("nivel"+(e-1)),uo.getListarCriteriosEva(o,e,i,t,a,r,l,n).then(function(o){s.dataSelect["nivel"+e]=o.json})},seleccionaNivelEv:function(o){this.cboNivEva=o.nivel,this.form.cboNivEva=o.nivel,this.idProgramaSel=o.codigo,this.idProgramaPadreSel=o["value"].idpadre,this.idTipoEva=o.tipo_eva,this.listarCriterios(this.vmRegistro.curso["idsClases"],1,this.form.periodo,this.idProgramaPadreSel,null,null,this.idProgramaSel,this.idTipoEva)},add:function(o,e){this.modal=!0,o?(this.form=uo["default"](o,e.INSTRUCOD),this.seleccionaGradoReg(e.GRADOCOD),this.form.cursocod=e.CURSOCOD,this.dataSelect.periodo=this.optionsPeriodo(e.PERIODO),this.form.periodo=e.PERIODO,this.form.estado=e.ESTADO,this.form.nota_inicio=e.NOTA_INICIO,this.form.nota_fin=e.NOTA_FIN,this.form.nota_prevista=e.NOTA_PREVISTA,this.form.criterio=e.CRITERIO,this.form.referencia=e.REFERENCIA):this.form=uo["default"]()},optionsPeriodo:function(o){for(var e=[],i=1;i<=o;i++)e.push({label:"PERIODO "+i,value:i});return e},grabar:function(){var o=this,e=this.form.nivel2,i="Seleccione Capacidad";if(this.isFiltroNivelEva)switch(this.cboNivEva){case 1:e=this.form.nivel1,i="Seleccione Competencia";break;case 2:e=this.form.nivel2;break}return""!==e||this.actualizarReg?0===this.form.nota_prevista?((0,ro["default"])("Ingrese Nota Prevista","warning"),!1):""===this.form.nota_inicio?((0,ro["default"])("Ingrese Nota Inicio","warning"),!1):""===this.form.nota_fin?((0,ro["default"])("Ingrese Nota Fin","warning"),!1):void uo.grabar(this.form,this.actualizarReg,this.isFiltroNivelEva).then(function(e){1===e.json.estado?((0,ro["default"])("Se grab贸 correctamente","success"),o.actualizarReg||o.isNoLimpiarForm||o.limpiar("form"),o.cerrarVentana&&o.cerrarModal(),o.getLista("cargardetalle")):(0,ro["default"])(o.$t("mensajes."+e.json.mensaje),"warning")}).catch(function(o){console.log(o),(0,ro["default"])("No se pudo grabar","warning")}):((0,ro["default"])(i,"warning"),!1)},limpiar:function(o){switch(o){case"niveles":this.vmRegistro.gradocod=[];case"grado":var e=this.form.instrucod,i=this.form.idPrevista;this.form=uo["default"](i,e),this.vmRegistro.curso={},this.vmRegistro.nivel1={},this.vmRegistro.nivel2={},this.vmRegistro.periodo=null,this.dataSelect.cursoReg=[],this.dataSelect.periodo=[],this.dataSelect.nivel1=[],this.dataSelect.nivel2=[];break;case"curso":this.form.nivel1="",this.form.nivel2="",this.vmRegistro.nivel1={},this.vmRegistro.nivel2={},this.dataSelect.nivel1=[],this.dataSelect.nivel2=[];break;case"nivel1":this.form.nivel2="",this.vmRegistro.nivel2={},this.dataSelect.nivel2=[];break;case"form":this.form.nota_prevista=0,this.form.nota_inicio="",this.form.nota_fin="";break}},actualizar:function(o,e,i){var t=this,a={};a[o]=e,uo.actualizar(a,i).then(function(o){t.getLista("cargardetalle"),(0,ro["default"])("Se actualiz贸 correctamente","success")}).catch(function(){(0,ro["default"])("error","warning")})},eliminar:function(o){var e=this,i=(0,lo["default"])(o,function(o){return o.ID_ESCALA_PREVISTA});(0,no.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){return uo.eliminar(i)}).then(function(o){1===o.json.estado?((0,ro["default"])(e.$t("mensajes."+o.json.message),"success"),e.getLista("cargardetalle")):(0,ro["default"])(e.$t("mensajes."+o.json.message),"warning")}).catch(function(){(0,ro["default"])("No se pudo eliminar","warning")})},seleccionaInstruRep:function(o){this.vmFiltroReporte.instrucod=o,this.dataCursosRep=[];var e="";switch(o){case"I":e="3";break;case"P":case"S":e="1";break}this.vmFiltroReporte.gradocod=e},seleccionaPeriodoRep:function(o){this.vmFiltroReporte.periodo=o},seleccionaGradoRep:function(o){var e=this;return oo()(K()().m(function i(){return K()().w(function(i){while(1)switch(i.n){case 0:e.vmFiltroReporte.gradocod=o,e.cargarDatosCursos();case 1:return i.a(2)}},i)}))()},seleccionaCursoRep:function(o){this.vmFiltroReporte.cursocod=o.CURSOCOD},boxReporte:function(){var o=this;return oo()(K()().m(function e(){return K()().w(function(e){while(1)switch(e.n){case 0:o.modalRep=!0,o.cargarDatosCursos();case 1:return e.a(2)}},e)}))()},cargarDatosCursos:function(){var o=this;return oo()(K()().m(function e(){var i;return K()().w(function(e){while(1)switch(e.n){case 0:return o.dataCursosRep=[],o.vmFiltroReporte.cursocod="T",e.n=1,so.A.getCursosCurGra(o.vmRegistro.instrucod,o.vmFiltroReporte.gradocod);case 1:i=e.v,i.unshift({CURSOCOD:"T",CURSONOM:"Todos"}),o.dataCursosRep=i;case 2:return e.a(2)}},e)}))()},seleccionaNivelEvaRep:function(o){var e=this;return oo()(K()().m(function i(){return K()().w(function(i){while(1)switch(i.n){case 0:e.vmFiltroReporte.idProgramaIB=o.codigo,e.vmFiltroReporte.tipoEva=o.tipo_eva;case 1:return i.a(2)}},i)}))()},imprimir:function(o){var e=this;return oo()(K()().m(function i(){var t,a,r,l,n;return K()().w(function(i){while(1)switch(i.n){case 0:if(t=2,null!==e.vmFiltroReporte.idProgramaIB){i.n=1;break}return(0,ro["default"])("Seleccionar el Programa de evaluaci贸n","warning"),i.a(2,!1);case 1:return e.isFiltroNivelEva&&(a=e.vmFiltroReporte["id"].toString(),r=a.split("_"),t=r[0]),l={repcod:"listadoEscalaPrevista",formato:o,ano:(0,vo["default"])().ano,instrucod:e.vmFiltroReporte.instrucod,gradocod:e.vmFiltroReporte.gradocod,idProgramaIB:e.vmFiltroReporte.idProgramaIB,periodo:e.vmFiltroReporte.periodo,tipoEva:e.vmFiltroReporte.tipoEva,cursocod:e.vmFiltroReporte.cursocod,nivelEva:t},i.n=2,e.$http.get("api/EscalaPrevistaController/getListado",{params:{params:l}});case 2:return n=i.v,l.data=JSON.stringify(n),i.n=3,(0,ao.exportFilePhp)(l,"webservice/reportes/reporte");case 3:return i.a(2)}},i)}))()},cerrarModalRep:function(){this.modalRep=!1},cerrarModal:function(){this.modal=!1,this.getLista()},getConfigPrograma:function(){this.idTipoEvaFiltro=6;var o=[];switch((0,vo["default"])().colcod){case"0031":o.push({ID_PROGRAMAIB:34,ID_PROGRAMAS:[39,36]});break;case"0057":o.push({ID_PROGRAMAIB:7,ID_PROGRAMAS:[48,45]}),o.push({ID_PROGRAMAIB:98,ID_PROGRAMAS:[111]});break;case"0058":o.push({ID_PROGRAMAIB:2,ID_PROGRAMAS:[29,27]});break;case"0104":o.push({ID_PROGRAMAIB:8,ID_PROGRAMAS:[37,38]}),this.isNoLimpiarForm=!0;break;case"0170":o.push({ID_PROGRAMAIB:30,ID_PROGRAMAS:[35,32]});break}this.dataFiltroProgIB=o}},created:function(){this.obtNGS(),this.isFiltroNivelEva=["0031","0057","0058","0104","0170","0500"].indexOf((0,vo["default"])().colcod)>=0,this.isEquivGen=this.isFiltroNivelEva,this.isFiltroNivelEva&&(this.vmFiltro.nivel_eva=1),this.getConfigPrograma(),this.getNivelesEval()}},po=i(12807);const go=(0,po.A)(mo,[["render",W]]);var ho=go}}]);