"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[94416],{94416:function(e,o,r){r.r(o),r.d(o,{default:function(){return qe}});var t=r(61758),l={class:"row items-center"},a={class:"row q-px-sm q-pt-sm"},i={class:"col"},s={key:0,class:"col"},n={class:"col"},u={class:"row q-px-sm"},c={class:"col-md-2 col-xs-12"},d={class:"col-md-5 col-xs-12"},p={class:"col-md-5 col-xs-12"},f={key:2,class:"column col"};function m(e,o){var r=(0,t.g2)("q-toolbar-title"),m=(0,t.g2)("q-btn"),h=(0,t.g2)("q-toolbar"),v=(0,t.g2)("sie-salones"),b=(0,t.g2)("sie-select"),O=(0,t.g2)("q-datetime"),g=(0,t.g2)("q-input"),C=(0,t.g2)("registro"),S=(0,t.g2)("sie-vacio"),$=(0,t.g2)("print"),R=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(R,{class:"asistencia-curso-new bg-white"},{default:(0,t.k6)(function(){return[e.isLess&&!e.muestraCursos?((0,t.uX)(),(0,t.Wv)(h,{key:0,class:"fixed-top q-toolbar-menu",inverted:""},{default:(0,t.k6)(function(){return[(0,t.bF)(r),(0,t.bF)(m,{flat:"",round:"",dense:"",icon:"print",color:"white",onClick:e.imprimir},null,8,["onClick"])]}),_:1})):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",l,[(0,t.bF)(v,{class:"col no-border",modelValue:e.salon,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.salon=o}),onSeleccionar:e.cambiarSalon,campos:["NEMO","NEMODES","INSTRUDES","INSTRUCOD","GRADOCOD","SECCIONCOD","PROFCOD","SECCIONDES"],todos:!1},null,8,["modelValue","onSeleccionar"]),e.isLess?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(m,{key:0,flat:"",dense:"",round:"",icon:"print",onClick:e.imprimir},null,8,["onClick"]))]),e.muestraCursos?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("div",a,[(0,t.Lk)("div",i,[(0,t.bF)(b,{class:"col",type:"outlined",modelValue:e.curso,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.curso=o}),options:e.cursos,onSelected:e.cambiarCurso,label:"CURSONOM",val:"CURSOCOD",placeholder:e.$t("curso")},null,8,["modelValue","options","onSelected","placeholder"])]),e.dataTurnos.length>1&&e.curso?((0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(b,{type:"outlined",modelValue:e.turnoSelect,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.turnoSelect=o}),options:e.dataTurnos,onSelected:e.cambiarCurso,label:"DESCRIPCION",val:"ID",placeholder:e.$t("Turno")},null,8,["modelValue","options","onSelected","placeholder"])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",n,[(0,t.bF)(b,{type:"outlined",modelValue:e.grupo,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.grupo=o}),options:e.grupos,label:"GRUPODES",val:"GRUPOCOD",placeholder:e.$t("grupos"),disable:e.grupos.length<=1},null,8,["modelValue","options","placeholder","disable"])])]),(0,t.Lk)("div",u,[(0,t.Lk)("div",c,[(0,t.bF)(O,{class:"q-if-outlined",modelValue:e.fecha,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.fecha=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fecha"),max:e.maxFecha},null,8,["modelValue","float-label","max"])]),(0,t.Lk)("div",d,[(0,t.bF)(g,{class:"q-if-outlined",modelValue:e.tutorNombre,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.tutorNombre=o}),"float-label":e.$t("tutor"),disable:""},null,8,["modelValue","float-label"])]),(0,t.Lk)("div",p,[(0,t.bF)(g,{class:"q-if-outlined",modelValue:e.profesor,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.profesor=o}),"float-label":"Profesor de curso",disable:""},null,8,["modelValue"])])]),(0,t.bF)(C,{class:"col column",onImprimir:e.imprimir,nemo:e.salon,cursocod:e.curso,turno:e.turnoSelect,grupocod:e.grupo,fecha:e.fecha,isLess:e.isLess,acceso:e.acceso},null,8,["onImprimir","nemo","cursocod","turno","grupocod","fecha","isLess","acceso"])],64)):((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(S,{icon:"person"})])),e.openPrint?((0,t.uX)(),(0,t.Wv)($,{key:3,open:e.openPrint,onCerrarModal:e.cerrarModal,sieInfo:e.sieInfo},null,8,["open","onCerrarModal","sieInfo"])):(0,t.Q3)("v-if",!0)]}),_:1})}var h=r(99550),v=r.n(h),b=r(76080),O=r.n(b),g=r(45254),C=r.n(g),S=(r(23825),r(52133),r(50310),r(6724),r(83190),r(27153),r(66307),r(24066),r(6123)),$=r(88275),R=r(93616),k=r(57668),D=r(36493),V=r(8261),E=r(42546),x=r(80340),y=r(58790),q={class:"row q-pa-md"},T={class:"col-xs-12 col-md-6 column"},A={class:"row q-subheading text-weight-bold"},U={class:"col-xs-12 col-md-6"},L={class:"row"},M={class:"col-xs-12 q-py-md"},I={class:"row"},w={class:"col-xs-12"},N={key:0,class:"row"},F={class:"col"},P={class:"col"},Q={class:"col"},j={class:"row"},B={class:"col"},X={class:"col"},G={class:"row"},Y={class:"col-xs-12"},W={class:"row"},H={class:"col-xs-12"},_={class:"row"},K={class:"col-xs-12"},Z={class:"row"},z={class:"col-xs-12"},J={class:"row"},ee={class:"col-xs-12"},oe={class:"row"},re={class:"col-xs-12"},te={class:"row"},le={class:"col"},ae={key:0,class:"col-xs-6"},ie={class:"row"},se={class:"col-xs-12"},ne={key:2,class:"column q-pa-xs q-mb-sm col",style:{border:"1px solid black !important","border-radius":"3px"}},ue={style:{"font-size":"0.8rem"}},ce={class:"col"};function de(e,o){var r=(0,t.g2)("q-btn"),l=(0,t.g2)("q-toolbar"),a=(0,t.g2)("q-radio"),i=(0,t.g2)("q-toggle"),s=(0,t.g2)("q-select"),n=(0,t.g2)("q-input"),u=(0,t.g2)("q-datetime"),c=(0,t.g2)("sie-select"),d=(0,t.g2)("q-checkbox"),p=(0,t.g2)("sie-modal");return(0,t.uX)(),(0,t.Wv)(p,{class:"imprimir-modal",modelValue:e.impStat,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.impStat=o}),title:e.$t("imprimir"),ok:!1,footer:!0,onInput:e.modalCerrar},{footer:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"justify-end",color:"grey-2"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",null,[(0,t.bF)(r,{class:"q-mx-xs",icon:"file_pdf",label:"PDF",color:"primary",onClick:o[0]||(o[0]=function(o){return e.imprimir("pdf")})}),(0,t.bF)(r,{class:"q-mx-xs",icon:"file_excel",label:"EXCEL",color:"primary",onClick:o[1]||(o[1]=function(o){return e.imprimir("xls")})})])]}),_:1})]}),footerMobile:(0,t.k6)(function(){return[[7,8].indexOf(e.reporte)<0?((0,t.uX)(),(0,t.Wv)(r,{key:0,flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[2]||(o[2]=function(o){return e.imprimir("pdf")})})):(0,t.Q3)("v-if",!0),(0,t.bF)(r,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[3]||(o[3]=function(o){return e.imprimir("xls")})})]}),default:(0,t.k6)(function(){return[(0,t.Lk)("div",q,[(0,t.Lk)("div",T,[(0,t.Lk)("div",A,(0,y.v_)(e.$t("botones.reportes")),1),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tipoReportes,function(r,l){return(0,t.uX)(),(0,t.Wv)(a,{key:l,class:"q-py-sm",modelValue:e.reporte,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.reporte=o}),val:r.value,label:r.label,onInput:e.resetFiltro},null,8,["modelValue","val","label","onInput"])}),128))]),(0,t.Lk)("div",U,[(0,t.Lk)("div",L,[(0,t.Lk)("div",M,[5!==e.reporte&&6!==e.reporte&&7!==e.reporte&&8!==e.reporte&&9!==e.reporte&&11!==e.reporte&&13!==e.reporte?((0,t.uX)(),(0,t.Wv)(i,{key:0,modelValue:e.filtroSalon,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.filtroSalon=o}),color:"secondary",label:"Por Salón","true-value":1,"false-value":0},null,8,["modelValue"])):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",I,[(0,t.Lk)("div",w,[1==e.filtroSalon&&11!==e.reporte?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.nemo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.nemo=o}),options:e.salonesReportes,placeholder:e.$t("salon"),error:e.v$.nemo.$error,"error-label":"Este campo es requerido",onBlur:e.v$.nemo.$touch,onInput:e.obtAlumnosPorSalon},null,8,["modelValue","options","placeholder","error","onBlur","onInput"])):(0,t.Q3)("v-if",!0)])]),1!==e.filtroSalon&&11!==e.reporte?((0,t.uX)(),(0,t.CE)("div",N,[(0,t.Lk)("div",F,[(0,t.bF)(s,{class:"q-if-outlined",modelValue:e.instrucod,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.instrucod=o}),options:e.niveles,"float-label":e.$t("ngs.nivel"),error:e.v$.instrucod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.instrucod.$touch,onInput:o[8]||(o[8]=function(o){return e.gradocod="T"})},null,8,["modelValue","options","float-label","error","onBlur"])]),(0,t.Lk)("div",P,[(0,t.bF)(s,{class:"q-if-outlined",modelValue:e.gradocod,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.gradocod=o}),options:e.grados[e.instrucod],"float-label":e.$t("ngs.grado"),error:e.v$.gradocod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.gradocod.$touch,onInput:o[10]||(o[10]=function(o){return e.seccioncod="T"})},null,8,["modelValue","options","float-label","error","onBlur"])]),(0,t.Lk)("div",Q,[1!==e.filtroSalon&&11!==e.reporte?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.seccioncod,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.seccioncod=o}),options:e.secciones[e.instrucod+""+e.gradocod],"float-label":e.$t("ngs.seccion"),error:e.v$.seccioncod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.seccioncod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])):(0,t.Q3)("v-if",!0)])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",j,[(0,t.Lk)("div",B,[[7,8,10,13].indexOf(e.reporte)>=0?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.filtroReporte,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.filtroReporte=o}),options:e.filtrosReporte,"float-label":"Separar por:",error:e.v$.filtroReporte.$error,"error-label":"Este campo es requerido",onBlur:e.v$.filtroReporte.$touch},null,8,["modelValue","options","error","onBlur"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",X,[[10,13].indexOf(e.reporte)>=0?((0,t.uX)(),(0,t.Wv)(n,{key:0,class:"q-if-outlined",modelValue:e.porcentaje,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.porcentaje=o}),"float-label":"Porcentaje de Faltas: ",type:"number",min:"0",max:"100",suffix:"%",error:e.v$.porcentaje.$error,"error-label":"Este campo es requerido",onBlur:e.v$.porcentaje.$touch},null,8,["modelValue","error","onBlur"])):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",G,[(0,t.Lk)("div",Y,[e.isReportAlumno?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.alucod,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.alucod=o}),options:e.alumnosReportes,"float-label":"Alumno",error:e.v$.alucod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.alucod.$touch},null,8,["modelValue","options","error","onBlur"])):(0,t.Q3)("v-if",!0)])]),[5,6,7,8,9,10,11,12,13].indexOf(e.reporte)<0?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.Lk)("div",W,[(0,t.Lk)("div",H,[(0,t.bF)(s,{class:"q-if-outlined",modelValue:e.cursocod,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.cursocod=o}),options:e.cursosReportes,"float-label":e.$t("curso"),error:e.v$.cursocod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.cursocod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])])]),(0,t.Lk)("div",_,[(0,t.Lk)("div",K,[(0,t.bF)(s,{class:"q-if-outlined",modelValue:e.grupocod,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.grupocod=o}),options:e.gruposReportes,"float-label":e.$t("grupo"),error:e.v$.grupocod.$error,"error-label":"Este campo es requerido",onBlur:e.v$.grupocod.$touch},null,8,["modelValue","options","float-label","error","onBlur"])])])],64)):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",Z,[(0,t.Lk)("div",z,[[1,9].indexOf(e.reporte)>=0||[7,8,10,13].indexOf(e.reporte)>=0&&2===e.filtroReporte?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.periodo,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.periodo=o}),options:e.periodos,"float-label":e.$t("periodo"),error:e.v$.periodo.$error,"error-label":"Este campo es requerido",onBlur:e.v$.periodo.$touch},null,8,["modelValue","options","float-label","error","onBlur"])):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",J,[(0,t.Lk)("div",ee,[[2,6].indexOf(e.reporte)>=0||[7,8,10,13].indexOf(e.reporte)>=0&&3===e.filtroReporte?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.mes,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.mes=o}),options:e.meses,"float-label":e.$t("mes"),error:e.v$.mes.$error,"error-label":"Este campo es requerido",onBlur:e.v$.mes.$touch},null,8,["modelValue","options","float-label","error","onBlur"])):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",oe,[(0,t.Lk)("div",re,[11===e.reporte?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"q-if-outlined",modelValue:e.tFiltro,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.tFiltro=o}),options:e.comboTipo,"float-label":"Total por"},null,8,["modelValue","options"])):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",te,[(0,t.Lk)("div",le,[[3,5,12].indexOf(e.reporte)>=0||[7,8,10,11,13].indexOf(e.reporte)>=0&&1===e.filtroReporte?((0,t.uX)(),(0,t.Wv)(u,{key:0,class:"q-if-outlined",modelValue:e.fecini,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.fecini=o}),type:"date","float-label":e.$t([5,8,12].indexOf(e.reporte)>=0?"fecha":"desde"),format:"DD/MM/YYYY",error:e.v$.fecini.$error,"error-label":"Este campo es requerido",onBlur:e.v$.fecini.$touch},null,8,["modelValue","float-label","error","onBlur"])):(0,t.Q3)("v-if",!0)]),3===e.reporte||[7,10,11,13].indexOf(e.reporte)>=0&&1==e.filtroReporte?((0,t.uX)(),(0,t.CE)("div",ae,[(0,t.bF)(u,{class:"q-if-outlined",modelValue:e.fecfin,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.fecfin=o}),type:"date","float-label":e.$t("hasta"),format:"DD/MM/YYYY",error:e.v$.fecfin.$error,"error-label":"Este campo es requerido",onBlur:e.v$.fecfin.$touch},null,8,["modelValue","float-label","error","onBlur"])])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",ie,[(0,t.Lk)("div",se,[[1,2].indexOf(e.reporte)>=0?((0,t.uX)(),(0,t.Wv)(c,{key:0,type:"outlined",modelValue:e.filtroTurno,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.filtroTurno=o}),options:e.dataTurnos,label:"DESCRIPCION",val:"ID",placeholder:e.$t("Turno")},null,8,["modelValue","options","placeholder"])):(0,t.Q3)("v-if",!0)])]),10!==e.reporte&&11!==e.reporte&&13!==e.reporte?((0,t.uX)(),(0,t.CE)("fieldset",ne,[(0,t.Lk)("legend",ue,(0,y.v_)(e.$t("Estados"))+" :",1),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.iconosPrint,function(r){return(0,t.uX)(),(0,t.CE)("div",ce,[(0,t.bF)(d,{modelValue:e.filtroEstado,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.filtroEstado=o}),label:r.descripcion,val:r.estado,color:"secondary"},null,8,["modelValue","label","val"])])}),256))])):(0,t.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","title","onInput"])}r(10239),r(90095),r(515),r(13715);var pe=r(83972),fe=r(80660),me=r(99637),he=r(30640),ve=r(82640),be=r(13813),Oe=r(33001),ge=r(982),Ce=r(2819),Se={setup:function(){var e=(0,pe.fG)();return{v$:e}},emits:["cerrarModal"],components:{sieSelect:R.A,sieModal:he.A,QDatetime:S.T5,QRadio:S.$,QToggle:S.c5,QSelect:S.Si,date:S.p6,QCheckbox:S.vZ,QToolbar:S.ZV,QBtn:S.Il,QInput:S.ie},props:["open","sieInfo"],data:function(){return{impStat:!0,iconosPrint:[],meses:[{label:"Enero",value:"01"},{label:"Febrero",value:"02"},{label:"Marzo",value:"03"},{label:"Abril",value:"04"},{label:"Mayo",value:"05"},{label:"Junio",value:"06"},{label:"Julio",value:"07"},{label:"Agosto",value:"08"},{label:"Setiembre",value:"09"},{label:"Octubre",value:"10"},{label:"Noviembre",value:"11"},{label:"Diciembre",value:"12"}],comboTipo:[{label:"Nivel",value:1},{label:"Grado",value:2}],tipoReportes:[{label:"Resumen de Asistencia por Periodo",value:1},{label:"Resumen de Asistencia por Mes",value:2},{label:"Listado de Asistencias por Fechas",value:3},{label:"Listado de Asistencias por Alumno / Dia",value:5},{label:"Listado de Asistencias por Alumno / Mes",value:6},{label:"Listado de Asistencias por Alumno / Periodo",value:9},{label:"Consolidado de Asistencias por Rango",value:7},{label:"Resumen de asistencia por rango",value:8},{label:"Resumen de asistencia por porcentaje de faltas",value:10}],reporte:1,filtroSalon:1,turnoSelect:null,salonesReportes:[],niveles:[],grados:{},secciones:{},filtrosReporte:[],alumnosReportes:[],cursosReportesTemp:[],dataTurnos:[],periodos:[],filtroEstado:[],filtroTurno:null,nemo:null,instrucod:null,grupocod:null,fecini:Date.now(),fecfin:Date.now(),tFiltro:2,gradocod:"T",seccioncod:"T",filtroReporte:1,porcentaje:10,alucod:"",cursocod:null,periodo:null,mes:S.p6.formatDate(Date.now(),"MM")}},watch:{open:function(e){this.impStat=e},reporte:function(e){switch(this.isReportAlumno&&this.obtAlumnosPorSalon(),e){case 7:this.filtrosReporte=[{label:"Fecha",value:1},{label:"Mes",value:3}],this.filtroSalon=1;break;case 8:this.filtrosReporte=[{label:"Fecha",value:1},{label:"Periodo",value:2},{label:"Mes",value:3}],this.filtroSalon=1;break;case 10:case 13:this.filtrosReporte=[{label:"Fecha",value:1},{label:"Periodo",value:2},{label:"Mes",value:3}],this.filtroSalon=10===e?0:1;break;default:this.filtroSalon=1;break}}},methods:{modalCerrar:function(e){this.$emit("cerrarModal")},resetFiltro:function(){this.filtroSalon=1},obtAlumnosPorSalon:function(e){var o=this;this.isReportAlumno&&fe.$http.get("api/HyoSalonAl/obtAlumnosPorSalon",{params:{nemo:this.nemo}}).then(function(e){var r=e.json;r.length>0&&(o.alucod=null,o.alumnosReportes=r.map(function(e){return{label:e.NOMCOMP,value:e.ALUCOD}}))})},imprimir:function(e){var o="/intranet/reporte-node/reporte",r=this.sieInfo.ano,t={};if(this.v$.$touch(),console.log(this.v$),!this.v$.$error){t["reporte"]=this.reporte,t["repcod"]="asistenciaCurso",t["porSalon"]=this.filtroSalon,t["formato"]=e,t["ano"]=r,t["nemo"]=this.nemo,t["instrucod"]=this.instrucod,t["gradocod"]=this.gradocod,t["seccioncod"]=this.seccioncod,t["cursocod"]=this.cursocod,t["grupocod"]=this.grupocod,t["mes"]=this.mes,t["periodo"]=this.periodo,t["alucod"]=this.alucod,t["fecini"]=S.p6.formatDate(this.fecini,"DD/MM/YYYY"),t["fecfin"]=S.p6.formatDate(this.fecfin,"DD/MM/YYYY"),t["ano"]=this.sieInfo.ano,t["turno"]=this.filtroTurno,t.filtro=this.filtroEstado,t.filtroReporte=this.filtroReporte,t.tFiltro=this.tFiltro;var l=Math.abs(this.fecfin-this.fecini),a=Math.ceil(l/864e5);if(t["diasDiff"]=a,[7,8].indexOf(this.reporte)>=0&&(t.cursocod="%",1===t.filtroReporte&&a>=31))return(0,ge["default"])("El reporte no puede ser de mas de 31 días","warning"),!1;if([10,13].indexOf(this.reporte)>=0){if(!(this.porcentaje>=0&&this.porcentaje<=100))return(0,ge["default"])("el porcentaje debe ser entre 0 y 100 ","error"),!1;t["porcentaje"]=this.porcentaje}1!==this.filtroSalon&&delete t["nemo"],(0,Ce.exportFilePhp)(t,o,"Resumen Asistencia por Periodo")}}},validations:function(){var e={};return 11!==this.reporte&&(1===this.filtroSalon?e["nemo"]={required:ve.mw}:(e["instrucod"]={required:ve.mw},e["gradocod"]={required:ve.mw},e["seccioncod"]={required:ve.mw})),[7,8,10,13].indexOf(this.reporte)>=0&&(e["filtroReporte"]={required:ve.mw}),[10,13].indexOf(this.reporte)>=0&&(e["porcentaje"]={required:ve.mw}),this.isReportAlumno&&(e["alucod"]={required:ve.mw}),[5,6,7,8,9,10,11,12,13].indexOf(this.reporte)<0&&(e["cursocod"]={required:ve.mw},e["grupocod"]={required:ve.mw}),([1,9].indexOf(this.reporte)>=0||[7,8,10,13].indexOf(this.reporte)>=0&&2===this.filtroReporte)&&(e["periodo"]={required:ve.mw}),([2,6].indexOf(this.reporte)>=0||[7,8,10,13].indexOf(this.reporte)>=0&&3===this.filtroReporte)&&(e["mes"]={required:ve.mw}),([3,5,12].indexOf(this.reporte)>=0||[7,8,10,11,13].indexOf(this.reporte)>=0&&1===this.filtroReporte)&&(e["fecini"]={required:ve.mw}),[3,7,10,11,13].indexOf(this.reporte)>=0&&(e["fecfin"]={required:ve.mw}),e},mounted:function(){var e=this;"0061"===this.sieInfo.colcod&&this.tipoReportes.push({label:"Consolidado de comentarios en asistencia",value:12}),"0126"===this.sieInfo.colcod&&this.tipoReportes.push({label:"Resumen de asistencia por porcentaje de faltas (alumno)",value:13}),fe.$http.get("api/HyoSalones/listaSalones").then(function(o){var r=o.json;e.salonesReportes=[],r.forEach(function(o){var r=o.NEMODES,t=o.NEMO,l=o.INSTRUCOD,a=o.GRADOCOD;e.salonesReportes.push({label:r,value:t,instrucod:l,gradocod:a})})}),fe.$http.get("api/HyoHorasisEstado/listarHorasisEstado",{params:{momento:2}}).then(function(o){var r=o.json;(0,me["default"])(r,function(o){if("NULO"!==o.ESTADOCOD){var r={estado:o.ESTADOCOD,descripcion:o.ESTADODES,icono:o.ICONO,color:o.COLORVUE,vigente:o.VIGENTE};e.iconosPrint.push(r),e.filtroEstado.push(o.ESTADOCOD)}})}),fe.$http.get("api/HyoInstrus/obtInstru").then(function(o){var r=o.json;r.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=(0,be.mapQ)(r,{label:"INSTRUDES",value:"INSTRUCOD"}),e.instrucod=e.niveles[0].value}),fe.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:!0,todos:"T"}}).then(function(o){var r=o.json;Object.keys(r).forEach(function(o){e.grados[o]=[],r[o].forEach(function(r){e.grados[o].push({label:r.GRADODES,value:r.GRADOCOD})})})}),fe.$http.get("api/HyoSecciones/obtSecciones",{params:{agrupado:!0,todos:"T"}}).then(function(o){var r=o.json;Object.keys(r).forEach(function(o){e.secciones[o]=[],r[o].forEach(function(r){e.secciones[o].push({label:r.SECCIONDES,value:r.SECCIONCOD})})})}),fe.$http.get("api/HyoAsignaprs/obtListaCursos",{params:{parametros:{instrucod:"T",gradocod:"T",seccioncod:"T",asignados:!0}}}).then(function(o){var r=o.json;e.cursosReportesTemp=r}),fe.$http.get("api/HyoPercales/estadoFechaInstru",{params:{fecha:new Date,hasta:!0}}).then(function(o){var r=o.json;e.periodos=r.map(function(e){return{label:e.BIMECOD+" Periodo",value:e.BIMECOD}})}),fe.$http.get("api/HyoAturno/obtTurnos").then(function(o){var r=o.json;e.dataTurnos=r,e.turnoSelect=r[0].ID}),this.filtroEstado=[]},computed:{isReportAlumno:function(){return[5,6,9,13].indexOf(this.reporte)>=0},gruposReportes:function(){var e=[],o=this.cursosReportesTemp;return 1===this.filtroSalon?o=(0,Oe.filterArray)(this.nemo,{field:"NEMO",list:o}):("T"!==this.instrucod&&(o=(0,Oe.filterArray)(this.instrucod,{field:"INSTRUCOD",list:o})),"T"!==this.gradocod&&(o=(0,Oe.filterArray)(this.gradocod,{field:"GRADOCOD",list:o})),"T"!==this.seccioncod&&(o=(0,Oe.filterArray)(this.seccioncod,{field:"SECCIONCOD",list:o}))),""!==this.cursocod&&(e=(0,Oe.filterArray)(this.cursocod,{field:"CURSOCOD",list:o})),e=e.map(function(e){return{label:e.GRUPODES,value:e.GRUPOCOD}}),e=(0,V["default"])(e,"value"),[3,2].indexOf(this.reporte)>=0&&"%"===this.cursocod&&e.unshift({label:"Todos",value:"001"}),e[0]&&(this.grupocod=e[0].value),e},cursosReportes:function(){var e=this.cursosReportesTemp;return 1===this.filtroSalon?e=(0,Oe.filterArray)(this.nemo,{field:"NEMO",list:e}):("T"!==this.instrucod&&(e=(0,Oe.filterArray)(this.instrucod,{field:"INSTRUCOD",list:e})),"T"!==this.gradocod&&(e=(0,Oe.filterArray)(this.gradocod,{field:"GRADOCOD",list:e})),"T"!==this.seccioncod&&(e=(0,Oe.filterArray)(this.seccioncod,{field:"SECCIONCOD",list:e}))),e=e.map(function(e){return{label:e.CURSONOM,value:e.CURSOCOD}}),e=(0,V["default"])(e,"value"),[3].indexOf(this.reporte)>=0&&e.unshift({label:"Todos",value:"%"}),e}}},$e=r(12807);const Re=(0,$e.A)(Se,[["render",de]]);var ke=Re,De=r(78786),Ve=r(81288),Ee=r(55973),xe={components:{QDatetime:S.T5,sieSalones:$.Ay,sieSelect:R.A,registro:E.A,sieVacio:x.A,print:ke,QToggle:Ee.A,QPage:S.Tu,QToolbar:S.ZV,QToolbarTitle:S.r_,QBtn:S.Il,QInput:S.ie},data:function(){return{sieInfo:(0,k["default"])(),acceso:(0,k["default"])().ruta.nivel>=2,salon:null,curso:null,turnoSelect:null,tutorNombre:"",fecha:new Date,maxFecha:S.p6.formatDate(new Date,"MM/DD/YYYY"),filtro:{},openPrint:!1,dataTurnos:[],grupo:null,auxGr:{},cursos:[],muestraCursos:!1,grupos:[],asistenciaAutomatica:"N"}},methods:{updateControl:function(){var e=this;return C()(O()().m(function o(){return O()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.put("api/HyoControl/updateControl",{campo:"asis_auto",numero:e.asistenciaAutomatica});case 1:"N"===e.asistenciaAutomatica?e.$notify("Se deshabilitó la asistencia automática.","success"):e.$notify("Se habilitó la asistencia automática.","success");case 2:return o.a(2)}},o)}))()},cerrarModal:function(){this.openPrint=!1},_resetearVariables:function(){this.cursos=[],this.grupos=[],this.curso=null,this.grupo=null,this.tutorNombre=""},cambiarSalon:function(e){var o=this;"T"!==e.NEMO&&(this.filtro.nemo=e.NEMO,this.filtro.instrucod=e.INSTRUCOD,this.filtro.gradocod=e.GRADOCOD);var r={parametros:{nemo:e.NEMO,asignados:!0}};this._resetearVariables(),Promise.all([this.$http.get("api/HyoAsignaprs/obtListaCursos",{params:r}),this.$http.get("api/HyoSalones/obtTutor",{params:{nemo:e.NEMO}})]).then(function(e){var r=v()(e,2),t=r[0],l=r[1],a=t.json.map(function(e){return{CURSOCOD:e.CURSOCOD,CURSONOM:e.CURSONOM}});o.muestraCursos=a.length>0,o.cursos=(0,V["default"])(a,"CURSOCOD"),o.curso=a[0].CURSOCOD,o.auxGr=(0,D["default"])(t.json,"CURSOCOD"),o.grupos=o.auxGr[o.curso],o.grupo=o.auxGr[o.curso][0].GRUPOCOD,o.tutorNombre=l.json.length>0?l.json[0].NOMCOMP:""})},cambiarCurso:function(){var e=this.curso;this.grupos=this.auxGr[e],this.grupo=this.auxGr[e][0].GRUPOCOD},imprimir:function(){this.openPrint=!0}},computed:{isLess:function(){return(0,Ve.isLess)()},profesor:function(){var e="Sin asignar";if(this.curso){var o=this.auxGr[this.curso];if(1===o.length)e=o[0].NOMCOMP||"Sin asignar";else{var r=(0,De["default"])(o,this.grupo,{key:"GRUPOCOD"});e=o[r].NOMCOMP||"Sin asignar"}}return e}},created:function(){var e=this;return C()(O()().m(function o(){var r,t,l,a;return O()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoAturno/obtTurnos",{params:{modo:2}});case 1:return r=o.v,t=r.json,e.dataTurnos=t,e.turnoSelect=1,o.n=2,e.$http.get("api/HyoControl/readControl",{params:{campo:"asis_auto"}});case 2:l=o.v,a=l.NUMERO,e.asistenciaAutomatica=a;case 3:return o.a(2)}},o)}))()}};const ye=(0,$e.A)(xe,[["render",m]]);var qe=ye}}]);