"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[48600],{48600:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var a=n(8445),r=n.n(a),i=(n(30683),n(61758)),u=n(58790),o={class:"col-xs-12"},s={class:"row q-col-gutter-sm"},c={class:"col"},l={class:"col-xs-12 col-xs-4 col-md-6"},d={class:"row"},f={key:0,class:"col-xs-12"},A={key:1,class:"col-xs-12"},p={class:"row"},g={class:"col"};function D(e,t){var n=this,a=(0,i.g2)("sie-select"),D=(0,i.g2)("header-btn"),m=(0,i.g2)("q-item"),v=(0,i.g2)("q-list"),E=(0,i.g2)("q-item-tile"),h=(0,i.g2)("q-tooltip"),F=(0,i.g2)("q-chip"),_=(0,i.g2)("q-item-section"),b=(0,i.g2)("q-item-label"),S=(0,i.g2)("q-icon"),T=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(T,{class:"page-asistencia"},{default:(0,i.k6)(function(){return[(0,i.bF)(D,{name:"Asistencia Talleres"},{after:(0,i.k6)(function(){return[(0,i.Lk)("div",o,[(0,i.Lk)("div",s,[(0,i.Lk)("div",c,[(0,i.bF)(a,{type:"outlined",modelValue:e.idPersona,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.idPersona=t}),val:"ID_PERSONA",label:"NOMCOMP",options:e.alumnos,readonly:!1,placeholder:"Participante",onSelected:e.cambiarAlumno},null,8,["modelValue","options","onSelected"])]),(0,i.Lk)("div",l,[(0,i.bF)(a,{type:"outlined",modelValue:e.duracod,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.duracod=t}),val:"DURACOD",label:"DURADES",options:e.optPeriodo,readonly:!1,placeholder:"Periodo",onInput:t[2]||(t[2]=function(t){return e.cambiarPeriodo(1)})},null,8,["modelValue","options"])])])])]}),_:1}),(0,i.Lk)("div",d,[n.isFamAlu&&e.deudas.length?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Q3)(" tiene deudas "),(0,i.bF)(v,{class:"no-border list"},{default:(0,i.k6)(function(){return[(0,i.bF)(m,null,{default:(0,i.k6)(function(){return r()(t[3]||(t[3]=[(0,i.Lk)("p",null,"No puede ver la(s) asistencia(s) del participante, por que cuenta con deuda(s) pendiente(s).",-1)]))}),_:1})]}),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.deudas,function(e){return(0,i.uX)(),(0,i.Wv)(v,{class:"no-border list",highlight:"","inset-separator":""},{default:(0,i.k6)(function(){return[(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("p",null,(0,u.v_)("".concat(e.CURSODES," - ").concat(e.HORARIO," - (").concat(e.MESDES,")")),1)]}),_:2},1024)]}),_:2},1024)}),256))])):((0,i.uX)(),(0,i.CE)("div",A,[(0,i.Q3)(" no hay deudas "),(0,i.bF)(v,{class:"no-border list",highlight:"","inset-separator":""},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.asistencias,function(e){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Q3)(" lista asistencia "),e.ES_DIA_MAYOR?((0,i.uX)(),(0,i.Wv)(E,{key:0,class:"q-pa-md num uppercase"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,u.v_)(e.MESDES),1)]}),_:2},1024)):(0,i.Q3)("v-if",!0),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.bF)(_,{avatar:""},{default:(0,i.k6)(function(){return[(0,i.bF)(F,{class:"text-center",color:e.COLOR_ESTADO,style:{"font-size":"11px"}},{default:(0,i.k6)(function(){return[(0,i.eW)((0,u.v_)(e.ESTADO),1),(0,i.bF)(h,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,u.v_)(e.ESTADODES),1)]}),_:2},1024)]}),_:2},1032,["color"])]}),_:2},1024),(0,i.bF)(_,null,{default:(0,i.k6)(function(){return[(0,i.bF)(b,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,u.v_)(e.ID_CURSO_PERIODO+" - "+e.CURSODES),1)]}),_:2},1024)]}),_:2},1024),(0,i.bF)(_,{side:"",top:""},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",p,[(0,i.Lk)("div",g,[(0,i.bF)(E,{class:"num uppercase text-center"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,u.v_)(e.DATE_NUM),1)]}),_:2},1024),(0,i.bF)(E,{class:"dia uppercase text-center"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,u.v_)(e.DATE_DIA),1)]}),_:2},1024)]),(0,i.bF)(S,{name:"clock_o",color:"grey",size:"20px"},{default:(0,i.k6)(function(){return[(0,i.bF)(h,null,{default:(0,i.k6)(function(){return[(0,i.eW)("Hora registro: "+(0,u.v_)(e.HORA_FORMAT),1)]}),_:2},1024)]}),_:2},1024)])]}),_:2},1024)]}),_:2},1024)],64)}),256))]}),_:1})]))])]}),_:1})}var m=n(57008),v=n.n(m),E=n(41562),h=n.n(E),F=n(76080),_=n.n(F),b=n(45254),S=n.n(b),T=(n(74260),n(39866),n(23825),n(52133),n(50310),n(32203),n(6724),n(83190),n(49089),n(44264),n(39300),n(17225),n(28743),n(12858),n(32071),n(55520),n(2775),n(46203),n(66307),n(2369),n(24066),n(6123)),w=n(30545),C=n(16648),O=n(92173),k=n(51082),M=n(80340),I=n(57668),Q=n(30640),R=n(59089),P=n(93616),H=n(66824),U=n(88865),y=n(74656),N=n(14667),L={components:{QItemLabel:H.A,QItemSection:U.A,QAvatar:y.A,QTable:w.A,QSelect:C.A,sieSelect:P.A,sieModal:Q.A,sieUpload:R.A,QCheckbox:T.vZ,QTabs:T.uw,QTab:T.zu,QTabPane:T.dg,QRouteTab:T.Eh,QChip:T.wQ,QInnerLoading:T.SQ,QSpinnerOval:T.VA,sieEstudiantes:O.Ay,sieVacio:M.A,sieDate:k.A,QTd:T.Ef,QTr:T.qh,QTh:T.EJ,QPageSticky:T._U,QFab:T.l6,QFabAction:T.B$,QPage:T.Tu,QList:T.Mb,QItem:T.H0,QItemTile:T.lp,QTooltip:T.nC,QIcon:T.bP},mixins:[N.A],data:function(){return{sie:(0,I["default"])(),isFamAlu:(0,I["default"])().esFamiliaExterna||(0,I["default"])().esFamilia||(0,I["default"])().esFamiliaAdmision||(0,I["default"])().esEstudiante||["E01","E02"].includes((0,I["default"])().tipcod),idPersona:null,alumnos:[],duracod:null,optPeriodo:[],asistencias:[],deudas:[]}},computed:{},methods:{getDuracodActivo:function(){var e=this;return S()(_()().m(function t(){var n,a;return _()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/InscripcionController/getPeriodo",{params:{activo:0}});case 1:return n=t.v,e.optPeriodo=n,a=n.find(function(e){return"S"===e.VIGENTE}),e.duracod=a&&a.DURACOD?a.DURACOD:null,t.a(2,n)}},t)}))()},getConfiguracionTalleres:function(e,t){var n=this;return S()(_()().m(function a(){var r;return _()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,n.$http.get("api/InscripcionController/getConfiguracionTalleres",{params:{params:{famcod:e,ano:t,idPersona:n.sie.id_persona,duracod:n.duracod}}});case 1:r=a.v,n.alumnos=r.familiaIntegrantes||[];case 2:return a.a(2)}},a)}))()},getDeudas:function(){var e=this;return S()(_()().m(function t(){var n,a;return _()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n={id_persona:e.idPersona},t.n=1,e.$http.get("api/InscripcionController/getDeudas",{params:{params:n}});case 1:a=t.v,e.deudas=a.deudas,t.n=3;break;case 2:t.p=2,t.v,e.$notify("Hubo un incoveniente al cargar las deudas del participante");case 3:return t.a(2)}},t,null,[[0,2]])}))()},cambiarPeriodo:function(){var e=this;return S()(_()().m(function t(){return _()().w(function(t){while(1)switch(t.n){case 0:if(e.idPersona){t.n=1;break}return t.a(2);case 1:return t.n=2,e.getAsistencia();case 2:return t.n=3,e.getDeudas();case 3:return t.a(2)}},t)}))()},cambiarAlumno:function(){var e=this;return S()(_()().m(function t(){return _()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getAsistencia();case 1:return t.n=2,e.getDeudas();case 2:return t.a(2)}},t)}))()},getEstado:function(e){var t="",n="";return"P"===e.ESTADO&&(t="Presente",n="positive"),"T"===e.ESTADO&&(t="Tardanza Justificada",n="warning"),"TI"===e.ESTADO&&(t="Tardanza Injustificada",n="orange"),"F"===e.ESTADO&&(t="Falta",n="negative"),"FJ"===e.ESTADO&&(t="Falta Justificada",n="green"),"S"===e.ESTADO&&(t="Suspensión",n="grey-8"),{estado:t,colorEstado:n}},getDiasSemanaAbreviado:function(e){var t=["dom","lun","mar","mié","jue","vie","sáb"];return t[new Date(e.FECHA).getDay()]},getMesesAbreviado:function(e){var t=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return t[new Date(e.FECHA).getMonth()]},getNewFechaIso:function(e){var t=new Date(e.FECHA),n=new Date(e.HORA).getHours(),a=new Date(e.HORA).getMinutes(),r=new Date(t).setHours(n),i=new Date(r).setMinutes(a),u=T.p6.formatDate(new Date(i),"DD/MM/YYYY"),o=T.p6.formatDate(new Date(i),"hh:mm"),s=new Date(e.FECHA).getDate().toString().padStart(2,"0"),c=new Date(e.FECHA).getMonth();return{FECHA_FORMAT:u,HORA_FORMAT:o,DATE_NUM:s,MES:c}},getMesClave:function(e){var t=new Date(e.FECHA),n="".concat(t.getUTCFullYear(),"-").concat(String(t.getUTCMonth()+1).padStart(2,"0"));return n},getAsistencia:function(){var e=this;return S()(_()().m(function t(){var n,a,r,i,u,o,s,c,l,d;return _()().w(function(t){while(1)switch(t.n){case 0:return n={ano:e.sie.ano,duracod:e.duracod,id_persona:e.idPersona,tieneDeuda:1},t.n=1,e.$http.get("api/AsistenciaTalleresController/getAsistencia",{params:{params:n}});case 1:a=t.v,r={},i=h()(a);try{for(i.s();!(u=i.n()).done;)o=u.value,o.FECHA_FORMAT=e.getNewFechaIso(o).FECHA_FORMAT,o.HORA_FORMAT=e.getNewFechaIso(o).HORA_FORMAT,o.DATE_NUM=e.getNewFechaIso(o).DATE_NUM,o.MES=e.getNewFechaIso(o).MES,o.MESDES=e.getMesesAbreviado(o),o.DATE_DIA=e.getDiasSemanaAbreviado(o),o.ESTADODES=e.getEstado(o).estado,o.COLOR_ESTADO=e.getEstado(o).colorEstado,(!r[e.getMesClave(o)]||new Date(o.FECHA).getUTCDate()>new Date(r[e.getMesClave(o)].FECHA).getUTCDate())&&(r[e.getMesClave(o)]=o)}catch(e){i.e(e)}finally{i.f()}s=a,c=Object.values(r),l=new Set(c.map(function(e){return e.ID_ASISTENCIA})),d=s.map(function(e){return v()(v()({},e),{},{ES_DIA_MAYOR:l.has(e.ID_ASISTENCIA)})}),e.asistencias=d;case 2:return t.a(2)}},t)}))()}},created:function(){var e=this;return S()(_()().m(function t(){return _()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getDuracodActivo();case 1:if(!e.isFamAlu){t.n=3;break}return t.n=2,e.getConfiguracionTalleres(e.sie.famcod,e.sie.ano);case 2:t.n=4;break;case 3:return t.n=4,e.getAlumnos();case 4:return t.a(2)}},t)}))()}},q=n(12807);const x=(0,q.A)(L,[["render",D]]);var W=x}}]);