"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[11241],{11241:function(e,l,t){t.r(l),t.d(l,{default:function(){return H}});t(12982),t(3110);var a=t(61758),r=t(58790),n={class:"row q-col-gutter-sm"},o={class:"col-xs-12 col-sm-6"},s={class:"col-xs-12 col-sm-6"},c={class:"row q-col-gutter-sm"},u={class:"col"},i={class:"col-xs-12 col-sm-6"},d={class:"col-xs-12 col-sm-6"},v={class:"row q-col-gutter-sm"},m={class:"col"},f={class:"col-xs-12 col-sm-6"},p={class:"col-12"},b={class:"row q-pa-sm q-pt-md q-col-gutter-sm"},A={class:"col-12"},g={class:"row wrap justify-between q-col-gutter-sm"},h={class:"col-xs-12 col-sm-6"},k={class:"col-xs-12"};function O(e,l){var t=(0,a.g2)("header-btn"),O=(0,a.g2)("q-select"),L=(0,a.g2)("q-toggle"),q=(0,a.g2)("q-input"),F=(0,a.g2)("q-icon"),w=(0,a.g2)("sie-editor"),C=(0,a.g2)("q-form"),I=(0,a.g2)("q-card-section"),E=(0,a.g2)("q-card"),T=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(T,{class:"q-pa-sm bg-white sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(E,null,{default:(0,a.k6)(function(){return[(0,a.bF)(t,{name:"ConfiguraciÃ³n de Alertas",auto:!1,buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(I,null,{default:(0,a.k6)(function(){return[(0,a.bF)(C,{ref:"refForm"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",n,[(0,a.Lk)("div",o,[(0,a.bF)(O,{modelValue:e.alertaSelected,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.alertaSelected=l}),options:e.alertasOptions,label:"Alertas",onInput:e.changeAlert,rules:[e.required]},null,8,["modelValue","options","onInput","rules"])]),(0,a.Lk)("div",s,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.bF)(L,{label:"Habilitar envio de alertas",color:"secondary","false-value":0,"true-value":1,modelValue:e.selected.HABILITADO,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.selected.HABILITADO=l})},null,8,["modelValue"])])])]),(0,a.Lk)("div",i,[(0,a.bF)(q,{label:"Correo",modelValue:e.selected.CORREO,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.selected.CORREO=l}),rules:[e.email]},null,8,["modelValue","rules"])]),(0,a.Lk)("div",d,[(0,a.Lk)("div",v,[(0,a.Lk)("div",m,[(0,a.bF)(L,{label:"Enviar una copia",color:"secondary","false-value":0,"true-value":1,modelValue:e.selected.COPIA_COLEGIO,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.selected.COPIA_COLEGIO=l})},null,8,["modelValue"])])])]),(0,a.Lk)("div",f,[(0,a.bF)(q,{label:"Asunto",modelValue:e.selected.ASUNTO,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.selected.ASUNTO=l}),rules:[e.required]},null,8,["modelValue","rules"])]),(0,a.Lk)("div",p,[(0,a.Lk)("div",b,[(0,a.bF)(F,{name:"info",size:"24px",color:"primary"}),l[6]||(l[6]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("div",{class:"row full-height"},[(0,a.Lk)("div",{class:"col-12 column justify-center text-weight-bold text-primary"},[(0,a.Lk)("p",null,"Etiquetas")])])],-1))])]),(0,a.Lk)("div",A,[(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.labels,function(e){return(0,a.uX)(),(0,a.CE)("div",h,[(0,a.Lk)("b",null,(0,r.v_)(e.description+": "),1),(0,a.Lk)("span",null,(0,r.v_)(e.value),1)])}),256))])]),(0,a.Lk)("div",k,[(0,a.bF)(w,{modelValue:e.selected.TEXTO,"onUpdate:modelValue":l[5]||(l[5]=function(l){return e.selected.TEXTO=l})},null,8,["modelValue"])])])]}),_:1},512)]}),_:1})]}),_:1})]}),_:1})}var L=t(76080),q=t.n(L),F=t(57008),w=t.n(F),C=t(45254),I=t.n(C),E=t(83972),T=t(6123),V=t(16648),S=t(9736),D=t(2739),P=t(39893),R=t(88567),_=t(10213),x=t(982),U=t(57668),$=t(80660),B=t(6083),Q=t(30640),G={setup:function(){var e=(0,E.fG)();return{v$:e}},components:{QFab:T.l6,QCard:R.A,confirm:_.confirm,QSelect:V.A,QToggle:T.c5,sieModal:Q.A,QPageSticky:T._U,QFabAction:T.B$,sieEditor:B.A,QInput:S.A,QForm:D.A,QPage:T.Tu,QIcon:T.bP},data:function(){var e=this;return{required:P.required,email:P.email,alertaSelected:null,permiso:(0,U["default"])().ruta.nivel,openModal:!1,labels:[{description:"Solicitante",value:"{{Solicitante}}"},{description:"Detalle",value:"{{Detalle}}"},{description:"Fecha Ini. Prestamo",value:"{{FechaPrestamo}}"},{description:"Fecha de Reserva",value:"{{FechaReserva}}"},{description:"Fecha Fin Prestamo",value:"{{FechaRetorno}}"},{description:"Biblioteca",value:"{{Biblioteca}}"},{description:"Fecha Devolucion",value:"{{FechaDevolucion}}"}],alertasOptions:[],selected:{HABILITADO:0,COPIA_COLEGIO:0},nuevo:{HABILITADO:0,COPIA_COLEGIO:0},buttons:[{label:"GUARDAR",icon:"save",permiso:">2",click:function(){e.saveAlert()}}]}},methods:{saveAlert:function(){var e=this;return I()(q()().m(function l(){var t;return q()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,e.$refs.refForm.validate();case 1:if(t=l.v,t){l.n=2;break}return l.a(2);case 2:if(e.selected.MSGCOD){l.n=3;break}return(0,_.confirm)("Debe Seleccionar una alerta","add"),l.a(2,0);case 3:if(e.selected.TEXTO){l.n=4;break}return(0,_.confirm)("Debe configurar un mensaje","add"),l.a(2,0);case 4:return l.n=5,$.$http.post("api/configuracionAlertasController/updateAlertBiblioteca",{params:w()({},e.selected)});case 5:(0,x["default"])("Datos Actualizados","success");case 6:return l.a(2)}},l)}))()},changeAlert:function(){var e=this;return I()(q()().m(function l(){return q()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,$.$http.get("api/configuracionAlertasController/getAlertas",{params:{params:{tipo:e.alertaSelected}}});case 1:e.selected=l.v;case 2:return l.a(2)}},l)}))()},createAlert:function(){var e=this;return I()(q()().m(function l(){var t;return q()().w(function(l){while(1)switch(l.n){case 0:if(e.v$.nuevo.$touch(),!e.v$.nuevo.$error){l.n=1;break}return l.a(2,0);case 1:return e.nuevo.PIE="S",e.nuevo.FLAG="S",e.nuevo.RECEPTOR=1,l.n=2,$.$http.post("api/configuracionAlertasController/addAlertBiblioteca",{params:w()({},e.nuevo)});case 2:t=l.v,t&&((0,x["default"])("Alerta creada exitosamente","success"),e.openModal=!1,e.nuevo={});case 3:return l.a(2)}},l)}))()}},validations:function(){var e={nuevo:{TIPO:{required:P.required},CORREO:{required:P.required},ASUNTO:{required:P.required},TEXTO:{required:P.required}}};return e},created:function(){var e=this;return I()(q()().m(function l(){return q()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,$.$http.get("api/configuracionAlertasController/getAlertasBiblioteca");case 1:e.alertasOptions=l.v,e.alertaSelected="prestamo_libros",e.changeAlert();case 2:return l.a(2)}},l)}))()}},y=t(12807);const X=(0,y.A)(G,[["render",O]]);var H=X}}]);