"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[69503],{69503:function(t,e,n){n.r(e),n.d(e,{default:function(){return U}});var o=n(61758),a={class:"row q-col-gutter-sm"},l={class:"col-xs-12 col-sm-6 col-md-4"},i={class:"col-xs-12 col-sm-6 col-md-4"},r={class:"row q-mt-sm"},c={class:"col-xs-12"},s={key:1,class:"column"};function u(t,e){var n=this,u=(0,o.g2)("header-btn"),d=(0,o.g2)("q-select"),p=(0,o.g2)("q-spinner-oval"),f=(0,o.g2)("q-inner-loading"),b=(0,o.g2)("sie-table"),v=(0,o.g2)("sie-vacio"),m=(0,o.g2)("q-card-section"),g=(0,o.g2)("q-card"),h=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(h,{class:"academico q-pa-sm sie-flat"},{default:(0,o.k6)(function(){return[(0,o.bF)(g,null,{default:(0,o.k6)(function(){return[(0,o.bF)(u,{name:"Niveles de acceso",buttons:t.buttons},null,8,["buttons"]),(0,o.bF)(m,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.Lk)("div",l,[(0,o.bF)(d,{modelValue:t.obFiltro.tipo,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.obFiltro.tipo=e}),options:t.obFiltro.tipoOpt,"option-label":"TIPNOM","option-value":"TIPCOD",label:"Tipo"},null,8,["modelValue","options"])]),(0,o.Lk)("div",i,[(0,o.bF)(d,{modelValue:t.obFiltro.estado,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.obFiltro.estado=e}),options:t.obFiltro.estadoOpt,label:t.$t("estado")},null,8,["modelValue","options","label"])])]),(0,o.Lk)("div",r,[(0,o.Lk)("div",c,[(0,o.bF)(f,{visible:t.loadingDetalle},{default:(0,o.k6)(function(){return[(0,o.bF)(p,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),t.dataTabla.length>0?((0,o.uX)(),(0,o.Wv)(b,{key:0,class:"sticky",selection:"single",context:n,permiso:"> 1",css:"height: calc(100vh - 200px)",search:"Buscar","save-cells":"",columns:t.columnas,data:t.dataFiltrada,config:t.config},null,8,["columns","data","config"])):((0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(v)]))])])]}),_:1})]}),_:1})]}),_:1})}var d=n(76080),p=n.n(d),f=n(45254),b=n.n(f),v=(n(71225),n(25751),n(50310),n(5962),n(83190),n(6123)),m=(n(52133),n(6724),n(80660)),g={getNivelesAcceso:function(t){return b()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,m.$http.get("api/AnecdotarioController/getNivelesAcceso",{params:{parametros:t}}))}},e)}))()},optAccesos:function(){return b()(p()().m(function t(){var e,n;return p()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,m.$http.get("api/HyoTablaSe/datosSe",{params:{princod:"055"}});case 1:return e=t.v,n=e.listar.map(function(t){return{label:t.SECUDES,value:t.SECUCOD}}),t.a(2,n)}},t)}))()},actualizarAcceso:function(t){return b()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,m.$http.post("api/AnecdotarioController/actualizarAcceso",{params:t}))}},e)}))()}},h=g,C=n(17192),O=n(16648),A=n(80340),T=n(33777),S={data:function(){return{config:{ACCESO:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(t){return this.actualizarAcceso(t)}}},columnas:[{name:"USUCOD",field:"USUCOD",label:"Código",align:"left",sortable:!0},{name:"USUNOM",field:"USUNOM",label:"Nombre",align:"left",sortable:!0},{name:"TIPNOM",field:"TIPNOM",label:"Tipo",align:"left",sortable:!0},{name:"ACCESO",field:"ACCESO",label:"Acceso",align:"left",sortable:!0}],dataTabla:[]}}},F={mixins:[S],components:{QPopover:v.VM,QModalLayout:v.hT,QInnerLoading:v.SQ,QSpinnerOval:v.VA,QSelect:O.S,sieVacio:A.A,sieTable:T.A,QPage:v.Tu,QCard:v.C$},data:function(){return{loadingDetalle:!1,buttons:[],obFiltro:{tipo:"T",tipoOpt:[],estado:"1",estadoOpt:[{value:"1",label:"Activo/Inactivo"},{value:"A",label:"Activo"},{value:"I",label:"Inactivo"}]}}},computed:{dataFiltrada:function(){var t=this,e=this.dataTabla;return"T"!==this.obFiltro.tipo&&(e=e.filter(function(e){return e.TIPCOD===t.obFiltro.tipo})),"1"!==this.obFiltro.estado&&(e=e.filter(function(e){return e.ESTADO===t.obFiltro.estado})),e}},methods:{sortString:function(t){t.sort(function(t,e){var n=t.TIPNOM.toUpperCase(),o=e.TIPNOM.toUpperCase();return n<o?-1:n>o?1:0})},init:function(){var t=this;return b()(p()().m(function e(){var n,o,a;return p()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,t.loadingDetalle=!0,e.n=1,h.getNivelesAcceso();case 1:return n=e.v,t.dataTabla=n,o=(0,C["default"])(n,function(t){return t.TIPCOD}),t.sortString(o),o.unshift({TIPCOD:"T",TIPNOM:"Todos"}),t.obFiltro.tipoOpt=o,e.n=2,h.optAccesos();case 2:t.config.ACCESO.options=e.v,e.n=4;break;case 3:e.p=3,a=e.v,console.log("e",a),t.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 4:t.loadingDetalle=!1;case 5:return e.a(2)}},e,null,[[0,3]])}))()},actualizarAcceso:function(t){var e=this;return b()(p()().m(function n(){var o,a,l,i;return p()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,h.actualizarAcceso({usucod:t.USUCOD,acceso:t.ACCESO});case 1:return o=n.v,a=o.message,e.$notify(a,"success"),n.a(2,!0);case 2:return n.p=2,i=n.v,l=i.error,e.$notify(l.message,"warning"),n.a(2,!1)}},n,null,[[0,2]])}))()},filtrarTipo:function(){}},created:function(){this.init()}},w=n(12807);const k=(0,w.A)(F,[["render",u]]);var U=k}}]);