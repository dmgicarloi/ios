"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[84236],{84236:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(8445),o=t.n(r),a=(t(52776),t(53113),t(61758)),i={class:"intranet--generacion-pases-evento q-pa-sm"},s={class:"row q-gutter-sm"},l={class:"col"},c={class:"q-pt-sm"},u={class:"row q-col-gutter-md"},d={key:0,class:"col-12"},f={class:"col-12"};function m(e,n){var t=(0,a.g2)("header-btn"),r=(0,a.g2)("q-select"),m=(0,a.g2)("q-search"),g=(0,a.g2)("q-table"),p=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card"),h=(0,a.g2)("q-bar"),v=(0,a.g2)("q-banner"),w=(0,a.g2)("q-btn"),k=(0,a.g2)("q-card-actions"),S=(0,a.g2)("q-dialog"),U=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(U,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",i,[(0,a.bF)(b,{dense:"",flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{name:"Generaci칩n de pases",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(p,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",s,[(0,a.Lk)("div",l,[(0,a.bF)(r,{modelValue:e.idcronograma,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.idcronograma=n}),"option-label":"TITULO","option-value":"IDCRONOGRAMA","emit-value":"",label:"Eventos",outlined:"",options:e.eventos,onInput:e.getUsuarios},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",c,[(0,a.bF)(g,{class:"sie-table_alto",data:e.rows,columns:e.fields,selection:"multiple",selected:e.selected,"onUpdate:selected":n[2]||(n[2]=function(n){return e.selected=n}),"row-key":"USUCOD","rows-per-page-options":[0],pagination:e.initialPagination,"onUpdate:pagination":n[3]||(n[3]=function(n){return e.initialPagination=n}),dense:"",bordered:"",flat:"","wrap-cell":"",filter:e.search},{"top-right":(0,a.k6)(function(t){return[(0,a.bF)(m,{"hide-underline":"",color:"primary",modelValue:e.search,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.search=n})},null,8,["modelValue"])]}),_:1},8,["data","columns","selected","pagination","filter"])])]}),_:1})]}),_:1}),(0,a.bF)(S,{modelValue:e.modalReportes,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.modalReportes=n}),persistent:""},{default:(0,a.k6)(function(){return[(0,a.bF)(b,{class:"intranet--generacion-pases-evento--dialog-card"},{default:(0,a.k6)(function(){return[(0,a.bF)(h,{class:"row bg-primary text-white"},{default:(0,a.k6)(function(){return o()(n[9]||(n[9]=[(0,a.Lk)("div",{class:"col"},"Reportes",-1)]))}),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",u,[e.mostrarFiltroSalones?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(v,{class:"bg-red text-white",rounded:""},{default:(0,a.k6)(function(){return o()(n[10]||(n[10]=[(0,a.eW)("El filtro se habilita cuando el evento est치 dirigido a Estudiantes o Familias.",-1)]))}),_:1})])),(0,a.Lk)("div",f,[(0,a.bF)(r,{modelValue:e.nemo,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.nemo=n}),label:"Seleccione un sal칩n",options:e.salones,"option-value":"NEMO","option-label":"NEMODES",readonly:!e.mostrarFiltroSalones},null,8,["modelValue","options","readonly"])])])]}),_:1}),(0,a.bF)(k,{align:"right"},{default:(0,a.k6)(function(){return[(0,a.bF)(w,{size:"sm",label:"Cerrar",onClick:n[5]||(n[5]=function(n){return e.modalReportes=!1})}),(0,a.bF)(w,{size:"sm",label:"PDF",color:"primary",onClick:n[6]||(n[6]=function(n){return e.reporte("pdf")})}),(0,a.bF)(w,{size:"sm",label:"EXCEL",color:"primary",onClick:n[7]||(n[7]=function(n){return e.reporte("xls")})})]}),_:1})]}),_:1})]}),_:1},8,["modelValue"])])]}),_:1})}var g=t(76080),p=t.n(g),b=t(45254),h=t.n(b),v=(t(30683),t(71225),t(39866),t(77507),t(52133),t(56285),t(50310),t(5962),t(6724),t(83190),t(68017),t(6123)),w=t(88567),k=t(95718),S=t(20456),U=t(11654),C=t(16648),O=t(38739),F=t(50425),A=t(42205),E=t(41126),q=t(80103),_=t(57668),D=t(81288),Q=t(2819),R={data:function(){return{config:{},rows:[],fields:[{name:"CODIGO",label:"C칩digo",field:"CODIGO",align:"left",sortable:!1},{name:"USUNOM",label:"Nombres",field:"USUNOM",align:"left",sortable:!1},{name:"USUCOD",label:"Usuario",field:"USUCOD",align:"left",sortable:!1}],selected:[],initialPagination:{rowsPerPage:1e3},search:null}}},V=t(47035),N=t(87725),y=t(83956),L={mixins:[R],components:{QTable:F.A,QCard:w.A,QCardSection:k.A,QCardActions:S.A,QBtn:U.A,QSelect:C.A,QOptionGroup:O.A,QDialog:A.A,QBar:E.A,QBanner:q.A,QPage:v.Tu,QSearch:v.Ks},data:function(){return{sie:(0,_["default"])(),idcronograma:null,eventos:[],selectedNombres:[],modalReportes:!1,orden:"USUNOM",mostrarFiltroSalones:!1,salones:[],nemo:"T"}},computed:{isLess:function(){return(0,D.isLess)()},buttons:function(){var e=this,n=[{icon:"folder_download",label:"Descargar Pase",click:function(){e.exportar()},permiso:">=1"},{icon:"contact_card",label:"Exportar carnet",click:function(){e.imprimir()},permiso:">=1"},{icon:"print",label:"Reportes",click:function(){e.abrirVentanaReportes()},permiso:">=1"}];return null!==this.idcronograma&&0!==this.rows.length||(n=[]),n},opcionesOrden:function(){return this.fields.map(function(e){var n=e.name,t=e.label;return{label:t,value:n}})}},methods:{usucodSelected:function(){return this.selectedNombres=(0,V["default"])(this.selected,"asc",this.orden).map(function(e){var n=e.USUNOM,t=e.USUCOD;return"".concat(t.trim(),"-").concat(n.trim())}),this.selected.map(function(e){return e.USUCOD})},imprimir:function(){var e=this.usucodSelected();if(!this.idcronograma)return this.$notify("Seleccione un evento","warning"),!1;if(0===e.length)return this.$notify("Seleccione al menos un registro","warning"),!1;var n={codigos:e.join("|"),id:this.idcronograma},t="".concat(this.sie.api,"/cronograma/generarCarnet");(0,Q.open)({data:n,action:t}),this.selected=[]},abrirVentanaReportes:function(){var e=this;return h()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:e.nemo="T",e.modalReportes=!0;case 1:return n.a(2)}},n)}))()},exportar:function(){var e=this;return h()(p()().m(function n(){var t,r;return p()().w(function(n){while(1)switch(n.n){case 0:if(t=e.usucodSelected(),e.idcronograma){n.n=1;break}return e.$notify("Seleccione un evento","warning"),n.a(2,!1);case 1:if(0!==t.length){n.n=2;break}return e.$notify("Seleccione al menos un registro","warning"),n.a(2,!1);case 2:return r={codigos:t.join("|"),id:e.idcronograma,orden:e.orden},n.n=3,N.A.generarQrDescargaBloque(r,e.selectedNombres);case 3:e.selected=[];case 4:return n.a(2)}},n)}))()},getUsuarios:function(){var e=this;return h()(p()().m(function n(){var t;return p()().w(function(n){while(1)switch(n.n){case 0:return t={idcronograma:e.idcronograma},n.n=1,N.A.getUsuarios(t);case 1:e.rows=n.v,e.mostrarFiltroSalones=!(e.rows.filter(function(e){return!["004","005"].includes(e.TIPCOD)}).length>0);case 2:return n.a(2)}},n)}))()},getEventos:function(){var e=this;return h()(p()().m(function n(){var t;return p()().w(function(n){while(1)switch(n.n){case 0:return t={api:"generacionPaseEvento"},n.n=1,N.A.getEventos(t);case 1:e.eventos=n.v;case 2:return n.a(2)}},n)}))()},reporte:function(e){var n="webservice/reportes/reporte",t={repcod:"reporteAsistenciaEvento",idcronograma:this.idcronograma,usucod:this.sie.usucod,ano:this.sie.ano,formato:e};"T"!==this.nemo&&(t.nemo=this.nemo),(0,Q.exportFilePhp)(t,n,"REPORTE_CONTROL_DE_ASISTENCIA")},getSalones:function(){var e=this;return h()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,y.A.getSalones();case 1:e.salones=n.v;case 2:return n.a(2)}},n)}))()}},created:function(){var e=this;return h()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getEventos();case 1:return n.n=2,e.getSalones();case 2:return n.a(2)}},n)}))()}},P=t(12807);const T=(0,P.A)(L,[["render",m]]);var I=T}}]);