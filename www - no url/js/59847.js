"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[59847],{59847:function(e,a,t){t.r(a),t.d(a,{default:function(){return De}});var n=t(61758),l=t(58790),o=t(29104),r={class:"col q-pa-sm"},s=["innerHTML"],i={class:"col column q-ma-md items-center justify-center"},u=["innerHTML"],c={class:"column q-ma-md"},d={class:"q-my-sm",style:{color:"#800000","text-align":"justify"}},m={class:"q-table"},p={class:"q-tr"},f=["align"],A={class:"q-tr"},O=["align"],E=["align"],C={class:"q-ma-sm"},v={class:"row justify-end q-mb-sm"},k={key:1,class:"col column"},h={class:"row"},D={key:0,class:"column col"},b={key:0,class:"q-table q-card"},g={class:"q-tr"},S={class:"text-bold"},T={class:"q-tr"},I=["onClick"],R={class:"column items-center",align:"center"},F={class:"row"},L={key:1},y=["align"],N={key:0,class:"col"},U={key:1,align:"center"},P={key:1,class:"q-table q-card"},q={class:"q-th",rowspan:"2"},M={class:"q-th",rowspan:"2"},V={class:"q-th",style:{"text-align":"center"},rowspan:"2"},_={class:"q-th",style:{"text-align":"center"},rowspan:"2"},w={class:"q-th",style:{"text-align":"center"},rowspan:"2"},X={class:"q-th"},$={class:"row"},x={style:{"text-align":"center"}},j={key:1},Q={style:{"text-align":"center"}},B={style:{"text-align":"center"}},G={style:{"text-align":"center"}},K={style:{"text-align":"center"}},H={key:2,class:"row justify-center q-mt-sm"},W={class:"row col items-center"},z={class:"col column q-ma-xs"},Y={class:"q-ma-xs"};function Z(e,a){var t=(0,n.g2)("sie-modal"),Z=(0,n.g2)("q-icon"),J=(0,n.g2)("q-btn"),ee=(0,n.g2)("q-toolbar"),ae=(0,n.g2)("q-modal-layout"),te=(0,n.g2)("q-modal"),ne=(0,n.g2)("q-item-tile"),le=(0,n.g2)("q-item-side"),oe=(0,n.g2)("q-item"),re=(0,n.g2)("q-list"),se=(0,n.g2)("sie-vacio"),ie=(0,n.g2)("header-btn"),ue=(0,n.g2)("sieFamilia"),ce=(0,n.g2)("q-toggle"),de=(0,n.g2)("q-select"),me=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(t,{class:"modal-bloqueo",modelValue:e.modal,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.modal=a}),title:e.$t("aviso"),ok:e.$t("botones.cerrar"),onSubmit:a[1]||(a[1]=function(a){return e.modal=!1})},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",{class:"q-ma-md",innerHTML:e.msgFinal},null,8,s)]}),_:1},8,["modelValue","title","ok"]),(0,n.bF)(te,{minimized:"",modelValue:e.modalEspecial,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.modalEspecial=a}),"content-css":{width:"40vw","max-height":"40vh"}},{default:(0,n.k6)(function(){return[(0,n.bF)(ae,null,{footer:(0,n.k6)(function(){return[(0,n.bF)(ee,{class:"justify-end",inverted:""},{default:(0,n.k6)(function(){return[(0,n.bF)(J,{label:"No Acepto",flat:"",onClick:a[2]||(a[2]=function(a){return e.modalEspecial=!1})}),(0,n.bF)(J,{label:"Acepto",color:"primary",loading:e.cargando,onClick:a[3]||(a[3]=function(a){return e.grabar(e.dataSelect)})},null,8,["loading"])]}),_:1})]}),default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[(0,n.bF)(Z,{name:"help_outline",size:"50px",color:"blue-grey"}),a[9]||(a[9]=(0,n.Lk)("b",{class:"q-my-sm"},"IMPORTANTE",-1)),(0,n.Lk)("div",{class:"justify-center",innerHTML:e.msgEspecial,style:{"text-align":"center"}},null,8,u)])]}),_:1})]}),_:1},8,["modelValue"]),(0,n.bF)(t,{class:"modal-bloqueo",modelValue:e.modalDeudas,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.modalDeudas=a}),title:e.$t("aviso"),ok:e.$t("botones.cerrar"),onSubmit:a[6]||(a[6]=function(a){return e.modalDeudas=!1}),header:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",c,[a[10]||(a[10]=(0,n.Lk)("b",null,"SALUDOS.",-1)),(0,n.Lk)("b",d,(0,l.v_)(e.msjDeuda),1),a[11]||(a[11]=(0,n.Lk)("b",null,"A continuación le brindamos el detalle de lo indicado.",-1)),(0,n.Lk)("table",m,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",p,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.headDeudas,function(a){return(0,n.uX)(),(0,n.CE)("td",{class:"q-td",align:a.align},(0,l.v_)(e.$t(a.label)),9,f)}),256))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataDeudas,function(a){return(0,n.uX)(),(0,n.CE)("tr",A,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.headDeudas,function(t){return(0,n.uX)(),(0,n.CE)(n.FK,null,["FECVEN"===t.field?((0,n.uX)(),(0,n.CE)("td",{key:0,class:"q-td",align:t.align},[(0,n.Lk)("span",null,(0,l.v_)(e.date(a[t.field],"DD/MM/YYYY")),1)],8,O)):((0,n.uX)(),(0,n.CE)("td",{key:1,class:"q-td",align:t.align},[(0,n.Lk)("span",null,(0,l.v_)(a[t.field]),1)],8,E))],64)}),256))])}),256))])])])]}),_:1},8,["modelValue","title","ok"]),(0,n.bF)(t,{modelValue:e.modalImprimir,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.modalImprimir=a}),title:e.tituloImprimir,footer:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",C,[(0,n.Lk)("div",v,[(0,n.Lk)("span",null,(0,l.v_)(e.alumnoSelect.NOMCOMP),1)]),(0,n.bF)(re,{highlight:"","inset-separator":""},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.reportes,function(a){return(0,n.uX)(),(0,n.Wv)(oe,{class:"row",onClick:function(t){return e.newPrint(a)}},{default:(0,n.k6)(function(){return[(0,n.bF)(le,{class:"col"},{default:(0,n.k6)(function(){return[(0,n.bF)(ne,{class:"text-bold"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(a.TITULO),1)]}),_:2},1024)]}),_:2},1024),(0,n.bF)(le,{right:""},{default:(0,n.k6)(function(){return[(0,n.bF)(Z,{name:"file_download",size:"20px"})]}),_:1})]}),_:2},1032,["onClick"])}),256))]}),_:1})])]}),_:1},8,["modelValue","title"]),e.anoRes?((0,n.uX)(),(0,n.CE)("div",k,[(0,n.bF)(ie,{name:e.$t("reserva")+" "+e.anoRes,buttons:e.buttons},null,8,["name","buttons"]),(0,n.Lk)("div",h,[(0,n.bo)((0,n.bF)(ue,{class:"col",onSelected:e.selectFam,"filter-mode":2},null,8,["onSelected"]),[[o.aG,!e.sie.esFamilia]])]),e.dataEstudiantes.length>0?((0,n.uX)(),(0,n.CE)("div",D,[e.isEspecial?((0,n.uX)(),(0,n.CE)("table",P,[(0,n.Lk)("thead",null,[a[14]||(a[14]=(0,n.Lk)("tr",null,[(0,n.Lk)("th",{colspan:"4"}),(0,n.Lk)("th",{class:"q-th",colspan:"3",style:{"text-align":"center"}},"Pagos voluntarios que NO condicionan la Matrícula")],-1)),(0,n.Lk)("tr",null,[(0,n.Lk)("th",q,(0,l.v_)(e.$t("apellidosynombres")),1),(0,n.Lk)("th",M,(0,l.v_)(e.$t("ngs.ngs")),1),(0,n.Lk)("th",V,(0,l.v_)(e.$t("matricula.estado")),1),(0,n.Lk)("th",_,(0,l.v_)(e.$t("matricula.matricula")),1),a[12]||(a[12]=(0,n.Lk)("th",{class:"q-th",style:{"text-align":"center"},rowspan:"2"},[(0,n.Lk)("div",{class:"column"},[(0,n.Lk)("span",null,"COPAFA"),(0,n.Lk)("span",null,"(S/.100.00)")])],-1)),a[13]||(a[13]=(0,n.Lk)("th",{class:"q-th",style:{"text-align":"center"}},"FUNDACIÓN",-1)),(0,n.Lk)("th",w,(0,l.v_)(e.$t("botones.guardar")),1)]),(0,n.Lk)("tr",null,[(0,n.Lk)("th",X,[(0,n.Lk)("div",$,[(0,n.bF)(de,{class:"q-if-outlined col",options:e.tiposSSCCAQP,modelValue:e.tipoF,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.tipoF=a}),readonly:e.validarGuardado(e.dataEstudiantes,"FUNDACION")},null,8,["options","modelValue","readonly"])])])])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataEstudiantes,function(a){return(0,n.uX)(),(0,n.CE)("tr",null,[(0,n.Lk)("td",null,(0,l.v_)(a.NOMCOMP),1),(0,n.Lk)("td",null,(0,l.v_)(a.NGS),1),(0,n.Lk)("td",x,[a.ESTADOB?((0,n.uX)(),(0,n.CE)("span",j,(0,l.v_)(e.$t("matricula.observado")),1)):((0,n.uX)(),(0,n.Wv)(ce,{key:0,class:"col",color:"secondary","keep-color":"",modelValue:a.RESTADO,"onUpdate:modelValue":function(e){return a.RESTADO=e},readonly:"A"===a.ESTADO,onInput:function(e){return a.MATRICULA=a.RESTADO},label:e.$t(a.RESTADO?"matricula.reservado":"matricula.noreservado")},null,8,["modelValue","onUpdate:modelValue","readonly","onInput","label"]))]),(0,n.Lk)("td",Q,[(0,n.bF)(ce,{class:"col",color:"secondary","keep-color":"",modelValue:a.MATRICULA,"onUpdate:modelValue":function(e){return a.MATRICULA=e},readonly:!0},null,8,["modelValue","onUpdate:modelValue"])]),(0,n.Lk)("td",B,[a.ESTADOCOPAFA?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(ce,{key:0,class:"col",color:"secondary","keep-color":"","true-value":"A","false-value":"C",modelValue:a.COPAFA,"onUpdate:modelValue":function(e){return a.COPAFA=e},onInput:function(t){return e.cambiarPago(a,"COPAFA",e.dataEstudiantes)},readonly:e.validaCambio(a,"COPAFA")},null,8,["modelValue","onUpdate:modelValue","onInput","readonly"]))]),(0,n.Lk)("td",G,[a.ESTADOFUNDACION?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(ce,{key:0,class:"col",color:"secondary","keep-color":"","true-value":"A","false-value":"C",modelValue:a.FUNDACION,"onUpdate:modelValue":function(e){return a.FUNDACION=e},onInput:function(t){return e.cambiarPago(a,"FUNDACION",e.dataEstudiantes)},readonly:e.validaCambio(a,"FUNDACION")},null,8,["modelValue","onUpdate:modelValue","onInput","readonly"]))]),(0,n.Lk)("td",K,[e.acceso>=2&&(e.esAdmin||"A"!==a.ESTADO)?((0,n.uX)(),(0,n.Wv)(J,{key:0,flat:"",round:"",dense:"",icon:"save",size:"sm",onClick:function(t){return e.cambiarEstado(a)}},null,8,["onClick"])):(0,n.Q3)("v-if",!0),"A"===a.ESTADO&&a.RESTADO&&!e.noImprimir?((0,n.uX)(),(0,n.Wv)(J,{key:1,flat:"",dense:"",round:"",icon:"print",onClick:function(t){return e.imprimir(a)}},null,8,["onClick"])):(0,n.Q3)("v-if",!0)])])}),256))])])):((0,n.uX)(),(0,n.CE)("table",b,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.headReserva,function(a){return(0,n.uX)(),(0,n.CE)("th",S,(0,l.v_)(e.$t(a.label)),1)}),256))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataEstudiantes,function(a){return(0,n.uX)(),(0,n.CE)("tr",T,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.headReserva,function(t){return(0,n.uX)(),(0,n.CE)(n.FK,null,["RESTADO"===t.field?((0,n.uX)(),(0,n.CE)("td",{key:0,class:"q-td",onClick:function(t){return e.cambiarEstado(a)}},[(0,n.Lk)("div",R,[(0,n.Lk)("div",F,[a.ESTADOB?((0,n.uX)(),(0,n.CE)("span",L,(0,l.v_)(e.textObservado),1)):((0,n.uX)(),(0,n.Wv)(ce,{key:0,class:"col",color:"secondary","keep-color":"",modelValue:a.RESTADO,"onUpdate:modelValue":function(e){return a.RESTADO=e},readonly:e.bloquearCancel&&a.ESTADO||a.DEUDA,label:e.$t(a.RESTADO?"matricula.reservado":"matricula.noreservado"),onInput:function(t){return e.onChangeEstado(a)}},null,8,["modelValue","onUpdate:modelValue","readonly","label","onInput"]))])])],8,I)):((0,n.uX)(),(0,n.CE)("td",{key:1,align:t.align},["IMPRIMIR"===t.field?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},["A"===a.ESTADO&&a.RESTADO?((0,n.uX)(),(0,n.Wv)(J,{key:0,flat:"",dense:"",round:"",icon:"print",onClick:function(t){return e.imprimir(a)}},null,8,["onClick"])):(0,n.Q3)("v-if",!0)],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},["TIPO"!==t.field?((0,n.uX)(),(0,n.CE)("div",N,(0,l.v_)(a[t.field]),1)):((0,n.uX)(),(0,n.CE)("div",U,[a.RESTADO?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(de,{key:0,class:"q-if-outlined",modelValue:a.TIPO_RESPUESTA,"onUpdate:modelValue":function(e){return a.TIPO_RESPUESTA=e},options:e.tiposNo,"float-label":"Motivo",readonly:e.bloquearCancel&&a.ESTADO||a.DEUDA},null,8,["modelValue","onUpdate:modelValue","options","readonly"]))]))],64))],8,y))],64)}),256))])}),256))])])),e.conDeuda?((0,n.uX)(),(0,n.CE)("div",H,[(0,n.bF)(me,{class:"col-6 items-center",color:"warning"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",W,[(0,n.bF)(Z,{class:"q-mx-sm",size:"45px",name:"info"}),(0,n.Lk)("div",z,[a[15]||(a[15]=(0,n.Lk)("span",null,"Señores Padres de Familia o Apoderados:",-1)),(0,n.Lk)("span",Y,(0,l.v_)(e.msjDeuda),1)])])]}),_:1})])):(0,n.Q3)("v-if",!0)])):(0,n.Q3)("v-if",!0)])):((0,n.uX)(),(0,n.Wv)(se,{key:0,class:"col q-ma-sm",subtitle:"mensajes.m0080",icon:"signal_cellular_no_sim"}))])}var J=t(57008),ee=t.n(J),ae=t(76080),te=t.n(ae),ne=t(45254),le=t.n(ne),oe=t(41562),re=t.n(oe),se=(t(30683),t(10239),t(50310),t(90095),t(48426),t(83190),t(76921),t(13600),t(52776),t(37406),t(44264),t(81813),t(13715),t(6123)),ie=t(30545),ue=t(57668),ce=t(80660),de=t(96529),me=t(80340),pe=t(30640),fe=t(18105),Ae=t(69027),Oe=t(2819),Ee=t(78131),Ce=t(73922),ve={components:{QTable:ie.A,sieFamilia:de.A,sieVacio:me.A,QToggle:se.c5,QSelect:se.Si,sieModal:pe.A,QList:se.Mb,QItem:se.H0,QItemSide:se.n1,QModal:se.tU,QToolbar:se.ZV,QModalLayout:se.hT,QIcon:se.bP,QBtn:se.Il,QItemTile:se.lp,QCard:se.C$},data:function(){return{acceso:(0,ue["default"])().ruta.nivel,anoRes:null,alumnoSelect:{},sie:(0,ue["default"])(),dataEstudiantes:[],heads:[],isEspecial:!1,bloquearCancel:!1,reservado:!1,estado:null,deudas:!1,saveNo:!1,tiposNo:[],msgFinal:null,modal:!1,modalDeudas:!1,dataDeudas:{},headDeudas:[],cargando:!1,modalEspecial:!1,tiposSSCCAQP:[],tipoF:null,esAdmin:(0,ue["default"])().esAdministrador,modalImprimir:!1,tituloImprimir:null,reportes:[],msgEspecial:null,conDeuda:!1,noImprimir:!1,msjDeuda:null,mensajeBloq:null,activeButtons:!1,textObservado:"0065"===(0,ue["default"])().colcod?"Reunión Pendiente":"Observado"}},computed:{buttons:function(){if(3===this.acceso&&this.dataEstudiantes.length>0&&!this.isEspecial){if(this.bloquearCancel)return this.reservado?[]:[{label:"Grabar",icon:"save",click:this.grabar,loading:this.cargando}];if(!this.bloquearCancel){if(null===this.estado)return[{label:"Grabar",icon:"save",click:this.grabar,loading:this.cargando}];if("N"===this.estado||"A"===this.estado)return this.activeButtons?[{label:"Grabar",icon:"save",click:this.grabar,loading:this.cargando}]:[]}}}},methods:{date:fe.Ay,onChangeEstado:function(e){this.activeButtons=!1,this.estado=e.estado,this.bloquearCancel||e.RESTADO===e.reservado||(this.activeButtons=!0)},validarGuardado:function(e,a){var t,n=!1,l=re()(e);try{for(l.s();!(t=l.n()).done;){var o=t.value;if(console.log(o),!o.ESTADOB&&o.RESTADO&&"A"===o.ESTADO){n=!o["ESTADO"+a]&&!this.esAdmin;break}}}catch(e){l.e(e)}finally{l.f()}return n},validaCambio:function(e,a){var t=!0;return e.ESTADOB||e.RESTADO&&(t="A"===e.ESTADO&&(!e["ESTADO"+a]&&!this.esAdmin)),t},selectFam:function(e){var a=this;return le()(te()().m(function t(){var n,l;return te()().w(function(t){while(1)switch(t.n){case 0:return n=e.FAMCOD,t.n=1,ce.$http.get("api/MatriculaReservaController/getHijosReserva",{params:{info:{famcod:n,ano:a.anoRes,bloquearCancel:a.bloquearCancel,isEspecial:a.isEspecial,deudas:a.deudas}}});case 1:l=t.v,l.info.forEach(function(e){e.reservado=e.RESTADO,e.estado=e.ESTADO,e.respuesta=e["TIPO_RESPUESTA"]}),a.dataEstudiantes=l.info,a.tipoF=l.tipoF,a.conDeuda=l.conDeuda;case 2:return t.a(2)}},t)}))()},grabar:function(e){var a=this;return le()(te()().m(function t(){var n,l,o,r,s,i,u,c,d;return te()().w(function(t){while(1)switch(t.p=t.n){case 0:if(e&&Array.isArray(e)||(e=Object.assign(a.dataEstudiantes)),!(e.length>0)){t.n=10;break}if(a.cargando=!0,n=[],l=e[0].FAMCOD,o=a.anoRes,a.activeButtons=!1,e.forEach(function(e){if(!e.ESTADOB){var t=ee()(ee()({},{ALUCOD:e.ALUCOD,adicional:[]}),e);if(e.RESTADO||!e.RESTADO&&"A"===e.ESTADO||a.saveNo&&e["TIPO_RESPUESTA"]){if(t.ESTADO=e.RESTADO?"A":"N",a.isEspecial&&(e.COPAFA&&["A","C"].indexOf(e.COPAFA)>=0&&t.adicional.push({CONCOB:"18",estado:e.COPAFA}),e.FUNDACION&&["A","C"].indexOf(e.FUNDACION)>=0))if(a.tipoF)t.adicional.push({CONCOB:"19",estado:e.FUNDACION,TIPO:a.tipoF});else if("A"===e.FUNDACION)return(0,Ae.dialogConfirm)({message:"Debe seleccionar un tipo de cobro de fundación",cancel:!1}),!1;var l;a.saveNo&&(t["TIPO_RESPUESTA"]=e["TIPO_RESPUESTA"]);var o=function(){return null!==e["TIPO_RESPUESTA"]&&e.respuesta!==e["TIPO_RESPUESTA"]};a.saveNo?e.reservado!==e.RESTADO?l=!!e.RESTADO||o():e.RESTADO||(l=o()):l=e.reservado!==e.RESTADO,l&&n.push(t)}else if(a.reservaEspecial){if(t.ESTADO="C",e.COPAFA&&["A","C"].indexOf(e.COPAFA)>=0&&t.adicional.push({CONCOB:"18",estado:"C"}),e.FUNDACION&&["A","C"].indexOf(e.FUNDACION)>=0){if(!a.tipoF)return(0,Ae.dialogConfirm)({message:"Debe seleccionar un tipo de cobro de fundación",cancel:!1}),!1;t.adicional.push({CONCOB:"19",estado:"C",TIPO:a.tipoF})}n.push(t)}}}),r={insertar:n,famcod:l,ano:o,isEspecial:a.isEspecial},!(n.length>0)){t.n=9;break}return t.n=1,ce.$http.post("api/MatriculaReservaController/postMatriculaReserva",{data:r});case 1:s=t.v,i=re()(n),t.p=2,i.s();case 3:if((u=i.n()).done){t.n=5;break}return c=u.value,t.n=4,a.genDocs(c);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,i.e(d);case 7:return t.p=7,i.f(),t.f(7);case 8:a.cargando=!1,a.selectFam(a.dataEstudiantes[0]),a.$notify(a.$t("mensajes."+s.mensaje),s.type),a.modalEspecial=!1,t.n=10;break;case 9:a.cargando=!1,a.$notify("No hay cambios por guardar","error");case 10:return t.a(2)}},t,null,[[2,6,7,8]])}))()},cambiarEstado:function(e){if(e.COLNAME=this.sie.colname,e.USUARIO=" "+this.sie.nombre+" ",e.NIVEL=e.INSTRUDES,e.GRADO=e.GRADODES,e.NOMCOMP=" "+e.NOMCOMP+" ",e.ESTADOB){for(var a in this.msgFinal=Object.assign(this.mensajeBloq),e){var t=new RegExp("{{"+a+"}}","gi");this.msgFinal=this.msgFinal.replace(t,e[a])}this.modal=!0}else e.DEUDAS&&e.DEUDAS.length>0?(this.modalDeudas=!0,this.dataDeudas=Object.assign(e.DEUDAS)):this.isEspecial&&"A"!==e.ESTADO&&e.RESTADO&&(this.modalEspecial=!0,this.dataSelect=[e])},cambiarPago:function(e,a,t,n){t.forEach(function(e,n){var l=!1;t.forEach(function(t,o){"A"!==e&&n!==o&&"A"===t[a]&&(l=!0),e["ESTADO"+a]=l})})},procesarReportes:function(e,a,t){return le()(te()().m(function a(){return te()().w(function(a){while(1)switch(a.n){case 0:if("e"===e.TIPO){a.n=6;break}if(1!==e.TIPO){a.n=4;break}if(1===e.LISTA){a.n=2;break}return a.n=1,ce.$http.get("api/"+e.url.split("api/")[1],{params:e.parametros});case 1:a.n=3;break;case 2:return a.n=3,ce.$http.get(e.url);case 3:a.n=5;break;case 4:if("n"!==e.TIPO&&e.TIPO){a.n=5;break}return a.n=5,ce.$http.get(e.url);case 5:a.n=7;break;case 6:return a.n=7,ce.$http.get((0,ue["default"])().url+"/"+e.url,{params:e.parametros});case 7:return a.a(2)}},a)}))()},genDocs:function(e){var a=this;return le()(te()().m(function t(){var n,l,o,r,s;return te()().w(function(t){while(1)switch(t.n){case 0:return a.ALUCOD=e.ALUCOD,t.n=1,a.$http.post("api/HyoMatriculaparametros/obtParametros",{ano:a.anoRes,tipo:"titulo",isReserva:!0});case 1:return n=t.v,t.n=2,a.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:a.anoRes,agrupado:!0}});case 2:return l=t.v,n=n.json,l=l.json,o={ANO:a.anoRes,ALUCOD:e.ALUCOD,INSTRUCOD:e.INSTRUCODL,GRADOCOD:e.GRADOCODL,SECCIONCOD:e.SECCIONCOD,configuracion:l,FAMCOD:e.FAMCOD,FAMDES:e.FAMDES,DESCRIPCION:n.DESCRIPCION||"",TOKEN:(0,ue["default"])().token,NUEVO:e.NUEVO,FAMRESP:e.FAMRESP,FAMRESPMAT:e.FAMRESPMAT,RESERVA:!0},t.n=3,ce.$http.post("api/HyoReportesmatricula/getReportes",o);case 3:r=t.v,r=r.json,s=r.length-1;case 4:if(!(s>=0)){t.n=6;break}return t.n=5,a.procesarReportes(r[s],e,{ANO:a.anoRes});case 5:s--,t.n=4;break;case 6:return t.a(2)}},t)}))()},imprimir:function(e){var a=this;return le()(te()().m(function t(){var n;return te()().w(function(t){while(1)switch(t.n){case 0:return a.modalImprimir=!0,a.alumnoSelect=Object.assign(e),a.documentosImprimir=[],n={ANO:a.anoRes,INSTRUCOD:e.INSTRUCOD,GRADOCOD:e.GRADOCOD,MOMENTO:"F",ALUCOD:e.ALUCOD,GRUPOS:"N",FAMCOD:"",DOCUALUMN:"n",DOCUBACHI:"N",RESERVA:"1",FLRES:"N",configuracion:{},DESCRIPCION:"Reserva",ESTADO:e.ESTADO,TOKEN:(0,ue["default"])().token,FLGTIPO:1},a.isEspecial&&(n.FAMILIAR=e.FAMILIAR),t.n=1,ce.$http.get("api/MatriculaController/getReportes",{params:{params:n}});case 1:a.reportes=t.v;case 2:return t.a(2)}},t)}))()},print:function(e){},newPrint:function(e){var a=this;return le()(te()().m(function t(){var n,l,o,r,s;return te()().w(function(t){while(1)switch(t.n){case 0:if(!(a.anoRes>=2025)){t.n=3;break}if(n="",n=1!==e.TIPO||e.subTipo&&1!==e.subTipo?"".concat((0,ue["default"])().url,"/").concat(ce.API_LMS,"/api/HyoReportesmatricula/archivo/").concat(a.anoRes,"/").concat(e.secucod,"/").concat(e.TITULO,"/").concat(a.alumnoSelect.ALUCOD,"?access_token=").concat((0,ue["default"])().token):e.url,!e.path){t.n=2;break}return t.n=1,ce.$http.post("api/MatriculaReservaController/existeArchivo",{params:{path:e.path}});case 1:if(l=t.v,!l||!1!==l.existeArchivo){t.n=2;break}return a.$notify("Error al intentar crear el documento","error"),t.a(2,!1);case 2:(0,Ee["default"])(n,e.TITULO+".pdf"),t.n=4;break;case 3:"e"===e.TIPO?(0,Oe["default"])(e.parametros,e.url,"Reporte "):"C"===e.TIPO?(o="intranet/reporte-node/reporte",r=e.datosPrint,s=(0,ue["default"])().url+"/"+o,(0,Ce["default"])({parametros:r,metodo:"POST",nombre:"Reporte Perfiles",url:s,formatoTipo:"formato",formato:"pdf",tipo:"vista"})):(0,Ee["default"])(e.url,e.TITULO+".pdf");case 4:return t.a(2)}},t)}))()}},mounted:function(){var e=this;return le()(te()().m(function a(){var t;return te()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ce.$http.get("api/MatriculaReservaController/getConfiguraciones");case 1:t=a.v,t.ano&&(e.anoRes=t.ano,e.headReserva=t.headReserva,e.isEspecial=t.isEspecial,e.bloquearCancel=t.bloquearCancel,e.deudas=t.deudas,e.saveNo=t.saveNo,e.tiposNo=t.tipos,e.headDeudas=t.headDeudas,e.tiposSSCCAQP=t.tiposSSccaqp,e.tituloImprimir=t.tituloImprimir,e.noImprimir=t.noImprimir,e.msjDeuda=t.msjDeuda,e.mensajeBloq=t.mensaje,e.msgEspecial=t.msgEspecial,(0,ue["default"])().esFamilia&&e.selectFam({FAMCOD:(0,ue["default"])().famcod}));case 2:return a.a(2)}},a)}))()}},ke=t(12807);const he=(0,ke.A)(ve,[["render",Z]]);var De=he}}]);