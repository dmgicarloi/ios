"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[27193],{27193:function(a,t,e){e.r(t),e.d(t,{default:function(){return w}});e(71225),e(50310),e(5962),e(83190);var o=e(61758),n=e(58790),l={class:"medico-imc q-pa-sm"},i={class:"row q-col-gutter-sm"},s={class:"col-xs-6 col-md-2"},u={class:"col-xs-6 col-md-6"},r={class:"col-xs-12 col-md-4"},c={class:"q-mt-sm"};function d(a,t){var e=(0,o.g2)("header-btn"),d=(0,o.g2)("q-select"),p=(0,o.g2)("q-td"),f=(0,o.g2)("q-input"),m=(0,o.g2)("q-tr"),h=(0,o.g2)("q-table"),I=(0,o.g2)("q-card-section"),v=(0,o.g2)("q-card"),b=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(b,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",l,[(0,o.bF)(v,{dense:"",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(e,{name:"IMC / Talla",buttons:a.buttons},null,8,["buttons"]),(0,o.bF)(I,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",i,[(0,o.Lk)("div",s,[(0,o.bF)(d,{modelValue:a.tipo,"onUpdate:modelValue":t[0]||(t[0]=function(t){return a.tipo=t}),onInput:a.cambiaTipo,options:a.listaTipo},null,8,["modelValue","onInput","options"])]),(0,o.Lk)("div",u,[(0,o.bF)(d,{modelValue:a.etapa,"onUpdate:modelValue":t[1]||(t[1]=function(t){return a.etapa=t}),onInput:a.cambiaEtapaSexo,options:a.listaAdultosNinos},null,8,["modelValue","onInput","options"])]),(0,o.Lk)("div",r,[2!==a.etapa?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:a.sexo,"onUpdate:modelValue":t[2]||(t[2]=function(t){return a.sexo=t}),onInput:a.cambiaEtapaSexo,options:a.listaSexo},null,8,["modelValue","onInput","options"])):(0,o.Q3)("v-if",!0)])]),(0,o.Lk)("div",c,[(0,o.bF)(h,{class:"sie-table_alto",data:a.dataImc,columns:a.columns,filter:a.filter,"row-key":"edad","rows-per-page-options":[0],pagination:{rowsPerPage:0},dense:"",flat:"",bordered:"","wrap-cells":""},{body:(0,o.k6)(function(t){return[(0,o.bF)(m,{props:t},{default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.columns,function(e,l){return(0,o.uX)(),(0,o.CE)(o.FK,{key:e.field},["edad"===e.field?((0,o.uX)(),(0,o.Wv)(p,{key:0},{default:(0,o.k6)(function(){return[(0,o.eW)((0,n.v_)(a.monthToYear(t.row.edad)),1)]}),_:2},1024)):((0,o.uX)(),(0,o.Wv)(p,{key:1},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{modelValue:t.row[e.field],"onUpdate:modelValue":function(a){return t.row[e.field]=a},onPaste:function(e){return a.pegar(l,t.row)}},null,8,["modelValue","onUpdate:modelValue","onPaste"])]}),_:2},1024))],64)}),128))]}),_:2},1032,["props"])]}),_:1},8,["data","columns","filter"])])]}),_:1})]}),_:1})])]}),_:1})}var p=e(57008),f=e.n(p),m=e(8445),h=e.n(m),I=(e(30683),e(52133),e(10239),e(90095),e(6724),e(515),e(13715),e(6123)),v=e(88567),b=e(95718),g=e(16648),C=e(50425),_=e(82351),D=e(94509),k=e(9736),x=e(982),T=e(84262),A=e(80660),E={components:{QCard:v.A,QCardSection:b.A,QTable:C.A,QSelect:g.A,QInput:k.A,QTr:_.A,QTd:D.A,QPage:I.Tu},data:function(){var a=this;return{sexo:"M",tipo:1,listaTipo:[{label:"Imc",value:1},{label:"Talla",value:2},{label:"Peso",value:3},{label:"Peso para Talla",value:4}],listaSexo:[{label:"Hombre",value:"M"},{label:"Mujer",value:"F"}],etapa:1,listaAdultosNinosDefault:[{label:"Adultos",value:2},{label:"Ni√±os",value:1}],listaInfantesDefault:[{label:"Infantes",value:3}],listaInfantesDefaultTallas:[{label:"Infantes",value:4}],listaAdultosNinos:this.listaAdultosNinosDefault,filter:"",dataImc:[],columns:[],tipoModal:1,sexoModal:"M",etapaModal:1,modalAgregar:!1,enImc:"",dataEnImc:[],dragData:[],listaConfigImc:[],buttons:[{icon:"save",label:"Grabar",click:function(){a.guardarImc()}}]}},computed:{etapaSexo:function(){return"".concat(this.etapa).concat(this.sexo)},listaEnImc:function(){var a=this,t=this.dataEnImc,e=t.filter(function(t){return t.TIPO===a.tipo});return e}},methods:{monthToYear:function(a){return 4===this.etapa?a:(0,T.monthToYear)(a)},pegar:function(a,t){var e=t.__index;delete t.__index;var o=[];this.columns.map(function(a){var t=a.field;o.push(t)});var n=o.length-a,l=h()(this.dataImc),i=l.length-e,s=(event.clipboardData||window.clipboardData).getData("text");event.preventDefault();var u=s.split("\n");u.map(function(t,s){var u=t.split("\t"),r=a;u.map(function(a,t){if(t+1<=n&&s+1<=i){var u=f()({},l[e]);u[o[r]]=a,l[e]=u}r++}),e++}),this.dataImc=l},cambiaEtapaSexo:function(a){this.loadData()},cambiaTipo:function(){var a=this.tipo;3===a?(this.listaAdultosNinos=this.listaInfantesDefault,this.etapa=3):4===a?(this.listaAdultosNinos=this.listaInfantesDefaultTallas,this.etapa=4):(this.listaAdultosNinos=this.listaAdultosNinosDefault,this.etapa=1),this.loadData()},guardarImc:function(){var a=this,t=this.sexo,e=this.tipo,o=h()(this.dataImc),n=["HyoImc","HyoTallaestandar","HyoPesoestandar","HyoPesotalla"],l=n[e-1],i=[];o.map(function(o){var n=o.edad;delete o.edad,delete o.__index,Object.keys(o).forEach(function(l){var s=l,u=4===a.tipo?"talla":"edad",r={sexo:t,id_en_imc:s};r[u]=n,1===e?r.imc=parseFloat(o[l],10):2===e?r.talla=parseFloat(o[l],10):r.peso=parseFloat(o[l],10),i.push(r)})}),A.$http.post("api/".concat(l,"/guardaBloque"),{datos:i}).then(function(t){(0,x["default"])("Se guardo Correctamente.","success"),a.loadData()}).catch(function(a){var t=a.error;console.error(t),(0,x["default"])("No ha sido posible guardar los datos. (".concat(t.message,")"),"warning")})},guardarCategoria:function(){},AgregaCategoria:function(a){var t=a.DESCRIPCION,e=a.ID_EN_IMC;this.listaConfigImc.push({DESCRIPCION:t,ID_EN_IMC:e})},cambiaParametros:function(){var a=this,t=this.etapa,e=this.sexo,o=this.tipo;A.$http.post("api/HyoImc/obtConfig",{etapa:t,sexo:e,tipo:o}).then(function(t){a.listaConfigImc=t.map(function(a){var t=a.DESCRIPCION,e=a.ID_EN_IMC,o=a.TIPO;return{DESCRIPCION:t,ID_EN_IMC:e,TIPO:o,USADO:0}})})},loadData:function(){var a=this,t=this.etapa,e=this.sexo,o=this.tipo;A.$http.post("api/HyoImc/obtConfigImc",{etapa:t,sexo:e,tipo:o}).then(function(t){var e=t.columns,o=t.data,n=t.enImc;a.columns=e,a.dataImc=o,a.dataEnImc=n}).catch(function(a){console.error(a)})}},created:function(){this.cambiaTipo()}},N=e(12807);const P=(0,N.A)(E,[["render",d],["__scopeId","data-v-0ad11c03"]]);var w=P}}]);