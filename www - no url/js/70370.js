"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[70370],{70370:function(e,o,a){a.r(o),a.d(o,{default:function(){return So}});var t=a(8445),i=a.n(t),r=a(61758),n=a(58790),l={class:"row"},s={class:"col-md-2"},c={key:0,class:"div q-card q-px-sm q-pt-sm"},u={class:"row"},d={class:"col-xs-12 col-md-2"},f={class:"col-xs-12 col-md-4"},p={class:"col-xs-12 col-md-2"},m={class:"col-xs-12 col-md-4"},v={class:"row q-px-sm q-pt-sm"},C={class:"col"},g={class:"row column q-px-sm q-pt-sm"},b={class:"col-12"};function D(e,o){var a=(0,r.g2)("sie-select"),t=(0,r.g2)("q-toolbar-title"),D=(0,r.g2)("q-tooltip"),h=(0,r.g2)("q-btn"),O=(0,r.g2)("q-toolbar"),k=(0,r.g2)("q-select"),T=(0,r.g2)("selectMultiple"),E=(0,r.g2)("q-fab-action"),L=(0,r.g2)("q-fab"),S=(0,r.g2)("q-page-sticky"),_=(0,r.g2)("listadoCriterios"),A=(0,r.g2)("registroCriterios"),F=(0,r.g2)("copiaCriteriosEnMasa"),I=(0,r.g2)("configuracionClase"),R=(0,r.g2)("asignarBancoDatos"),P=(0,r.g2)("q-radio"),V=(0,r.g2)("sie-modal"),N=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(N,null,{default:(0,r.k6)(function(){return[(0,r.bF)(O,{class:"shadow-2 z-fab",inverted:""},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{class:"q-pa-none"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,n.v_)(e.$t(e.titulo)),1),(0,r.Lk)("span",null,(0,n.v_)(e.subtitulo),1),(0,r.Lk)("div",l,[(0,r.Lk)("div",s,[e.verComponentes.registroCriterio?((0,r.uX)(),(0,r.Wv)(a,{key:0,type:"outlined",placeholder:"periodo",modelValue:e.vmTallerPeriodo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmTallerPeriodo=o}),options:e.optionsPeriodoCriterio,onSelected:e.cambiarClasePeriodo,label:"PERIODODES",val:"ID_TALLER_PERIODO"},null,8,["modelValue","options","onSelected"])):(0,r.Q3)("v-if",!0)])])]}),_:1}),e.verComponentes.listadoGeneral?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.Wv)(h,{key:0,flat:"",round:"",dense:"",icon:"undo",onClick:e.volver},{default:(0,r.k6)(function(){return[(0,r.bF)(D,{anchor:"center left",self:"center right"},{default:(0,r.k6)(function(){return i()(o[10]||(o[10]=[(0,r.eW)("Volver",-1)]))}),_:1})]}),_:1},8,["onClick"]))]}),_:1}),e.verComponentes.listadoGeneral?((0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",u,[(0,r.Lk)("div",d,[(0,r.bF)(k,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.duracod,options:e.dataSelect.duracion,"float-label":"Periodo",onChange:e.seleccionaDuracion},null,8,["modelValue","options","onChange"])]),(0,r.Lk)("div",f,[(0,r.bF)(T,{options:e.dataTalleres,modelValue:e.vmFiltro.taller,labelSelect:"Talleres",onChange:e.seleccionaTaller,filter:""},null,8,["options","modelValue","onChange"])]),(0,r.Lk)("div",p,[(0,r.bF)(k,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.periodo,options:e.dtPeriodos,"float-label":"Nro. Periodo",onChange:e.seleccionaPeriodo},null,8,["modelValue","options","onChange"])]),(0,r.Lk)("div",m,[(0,r.bF)(k,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.curricula,options:e.dataCurricula,"float-label":e.$t("pesosYCriterios.curricula"),onChange:e.seleccionaCurricula},null,8,["modelValue","options","float-label","onChange"])])]),(0,r.bF)(S,{position:"bottom-right",offset:[20,20]},{default:(0,r.k6)(function(){return[(0,r.bF)(L,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,r.k6)(function(){return[(0,r.bF)(E,{color:"secondary",icon:"banco_datos",onClick:e.abrirModalBancoDatos},{default:(0,r.k6)(function(){return[(0,r.bF)(D,{anchor:"center left",self:"center right"},{default:(0,r.k6)(function(){return i()(o[11]||(o[11]=[(0,r.eW)("Asignar Banco de Datos",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,r.bF)(E,{color:"secondary",icon:"settings",onClick:e.abrirModalConfig},{default:(0,r.k6)(function(){return[(0,r.bF)(D,{anchor:"center left",self:"center right"},{default:(0,r.k6)(function(){return i()(o[12]||(o[12]=[(0,r.eW)("Configuración",-1)]))}),_:1})]}),_:1},8,["onClick"]),e.sie.ruta.nivel>=2?((0,r.uX)(),(0,r.Wv)(E,{key:0,color:"secondary",icon:"copy",onClick:e.verCopiaEnMasa},{default:(0,r.k6)(function(){return[(0,r.bF)(D,{anchor:"center left",self:"center right"},{default:(0,r.k6)(function(){return i()(o[13]||(o[13]=[(0,r.eW)("Copia de criterios en masa",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,r.Q3)("v-if",!0),(0,r.bF)(E,{color:"secondary",icon:"print",onClick:e.modalReportes},{default:(0,r.k6)(function(){return[(0,r.bF)(D,{anchor:"center left",self:"center right"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,n.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1},8,["onClick"])]}),_:1})]}),_:1})])):(0,r.Q3)("v-if",!0),e.verComponentes.listadoGeneral?((0,r.uX)(),(0,r.Wv)(_,{key:1,onVerCriterios:e.verCriterios,mostrarDatos:e.loadCriterios,dataCriterios:e.dataCriterios,objNiveles:e.objNiveles[e.vmFiltro.curricula]},null,8,["onVerCriterios","mostrarDatos","dataCriterios","objNiveles"])):(0,r.Q3)("v-if",!0),e.verComponentes.registroCriterio?((0,r.uX)(),(0,r.Wv)(A,{key:2,dataTallerSelect:e.dataCompCriterios.tallerSelected,dataPeridoSelect:e.dataCompCriterios.periodoSelected,dataTalleres:e.dataSelect.talleres,onSetCambioData:e.setCambioData},null,8,["dataTallerSelect","dataPeridoSelect","dataTalleres","onSetCambioData"])):(0,r.Q3)("v-if",!0),e.verComponentes.copiaEnMasa?((0,r.uX)(),(0,r.Wv)(F,{key:3,pDataDuracion:e.paramData.duracion,pDataDuracionDest:e.paramData.duracionDest,pDataTalleres:e.paramData.taller,pDataPeriodos:e.paramData.periodos,onSetCambioData:e.setCambioData},null,8,["pDataDuracion","pDataDuracionDest","pDataTalleres","pDataPeriodos","onSetCambioData"])):(0,r.Q3)("v-if",!0),(0,r.bF)(I,{modelValue:e.openModal.config,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.openModal.config=o}),verCurricula:e.dataCurricula.length>1,onCerrarModal:e.cerrarModalConfig},null,8,["modelValue","verCurricula","onCerrarModal"]),(0,r.bF)(R,{modelValue:e.openModal.bancodatos,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.openModal.bancodatos=o}),dataDuracion:e.dataSelect.duracion,onCerrarModalBanco:e.cerrarModalBanco,onCargarCriteriosBanco:e.cargarCriteriosBanco},null,8,["modelValue","dataDuracion","onCerrarModalBanco","onCargarCriteriosBanco"]),(0,r.bF)(V,{modelValue:e.openModal.reportes,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.openModal.reportes=o}),title:e.$t("reportes"),header:!0,ok:!1},{footer:(0,r.k6)(function(){return[(0,r.bF)(O,{class:"justify-end",color:"grey-2"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(h,{class:"q-mx-xs",color:"primary",icon:"file_pdf",onClick:o[5]||(o[5]=function(o){return e.exportar("pdf")})},{default:(0,r.k6)(function(){return i()(o[14]||(o[14]=[(0,r.eW)("PDF",-1)]))}),_:1}),(0,r.bF)(h,{class:"q-mx-xs",color:"primary",icon:"file_excel",onClick:o[6]||(o[6]=function(o){return e.exportar("xls")})},{default:(0,r.k6)(function(){return i()(o[15]||(o[15]=[(0,r.eW)("Excel",-1)]))}),_:1})])]}),_:1})]}),footerMobile:(0,r.k6)(function(){return[(0,r.bF)(h,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[7]||(o[7]=function(o){return e.exportar("pdf")})}),(0,r.bF)(h,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[8]||(o[8]=function(o){return e.exportar("xls")})})]}),default:(0,r.k6)(function(){return[(0,r.Lk)("div",v,[(0,r.Lk)("div",C,[(0,r.bF)(k,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.duracodRep,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.vmFiltro.duracodRep=o}),options:e.dataSelect.duracion,"option-label":"DURADES","option-value":"DURACOD","float-label":e.$t("periodo")},null,8,["modelValue","options","float-label"])])]),(0,r.Lk)("div",g,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.objReportes,function(a,t){return(0,r.uX)(),(0,r.CE)("div",b,[(0,r.bF)(P,{class:"q-if-outlined",modelValue:e.repcod,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.repcod=o}),val:a.repcod,label:a.label},null,8,["modelValue","val","label"])])}),256))])]}),_:1},8,["modelValue","title"])]}),_:1})}var h=a(99550),O=a.n(h),k=a(76080),T=a.n(k),E=a(45254),L=a.n(E),S=(a(71225),a(23825),a(10239),a(25751),a(50310),a(5962),a(90095),a(83190),a(27153),a(66307),a(13715),a(24066),a(6123)),_=a(13813),A=a(78711),F=a(2123),I=(a(515),a(29104)),R={class:"row contTableCriterios"},P={class:"columnCurso"},V={class:"q-table-container column no-wrap q-table__card q-table--horizontal-separator"},N={class:"q-table"},y={key:0},q={key:1},B=["onDblclick"],M=["title"],U={class:"contCurso"},x={key:0},Q={class:"col column columnaCrit"},w={class:"q-table-container column no-wrap q-table__card q-table--horizontal-separator"},j={class:"q-table"},X=["title"],$={class:"contPrograma"},G={class:"contDescPrograma"},W={class:"contIndice"},J={key:0},K=["colspan"],z={key:1},Y=["onDblclick"],H={key:1,class:"sumativo text-primary"},Z={class:"text-center"};function ee(e,o){var a=(0,r.g2)("q-icon"),t=(0,r.g2)("q-tooltip"),l=(0,r.g2)("q-spinner-oval"),s=(0,r.g2)("q-inner-loading");return(0,r.uX)(),(0,r.CE)("div",R,[(0,r.Lk)("div",P,[(0,r.bo)((0,r.Lk)("div",V,[(0,r.Lk)("div",null,[(0,r.Lk)("table",N,[o[2]||(o[2]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Taller")])],-1)),0==Object.keys(e.dataCriterios).length?((0,r.uX)(),(0,r.CE)("tbody",y,i()(o[0]||(o[0]=[(0,r.Lk)("tr",null,[(0,r.Lk)("td",null," ")],-1)])))):((0,r.uX)(),(0,r.CE)("tbody",q,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.dataCriterios,function(l,s){return(0,r.uX)(),(0,r.CE)(r.FK,null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.dataCriterios[s],function(l,s){return(0,r.uX)(),(0,r.CE)("tr",{onDblclick:function(o){return e.verCriterios(l.detalle)}},[(0,r.Lk)("td",{title:l.detalle.cursodes},[(0,r.Lk)("div",U,[l.detalle.origenReplica?((0,r.uX)(),(0,r.CE)("span",x,[(0,r.bF)(a,{color:"green",name:"pesos_criterios"}),(0,r.bF)(t,{anchor:"center left",self:"center right"},{default:(0,r.k6)(function(){return i()(o[1]||(o[1]=[(0,r.eW)("Origen de replica",-1)]))}),_:1})])):(0,r.Q3)("v-if",!0),(0,r.Lk)("span",null,(0,n.v_)(l.detalle.cursodes),1)])],8,M)],40,B)}),256))],64)}),256))]))])])],512),[[I.aG,!e.mostrarDatos]])]),(0,r.Lk)("div",Q,[(0,r.bF)(s,{visible:e.mostrarDatos},{default:(0,r.k6)(function(){return[(0,r.bF)(l,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,r.bo)((0,r.Lk)("div",w,[(0,r.Lk)("div",null,[(0,r.Lk)("table",j,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.columnas,function(e,t){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("th",{title:e.criterio+e.indice},[(0,r.Lk)("div",$,[(0,r.Lk)("div",G,[(0,r.bF)(a,{class:"q-mr-sm",name:e.icono||"share",style:(0,n.Tr)({color:e.color}),size:"23px"},null,8,["name","style"]),(0,r.Lk)("span",null,(0,n.v_)(e.criterio),1)]),(0,r.Lk)("div",W,(0,n.v_)(e.indice),1)])],8,X),o[3]||(o[3]=(0,r.Lk)("th",null,"Peso",-1))],64)}),256))])]),0==Object.keys(e.dataCriterios).length?((0,r.uX)(),(0,r.CE)("tbody",J,[(0,r.Lk)("tr",null,[(0,r.Lk)("td",{class:"text-primary nomSalon",colspan:e.colspan},(0,n.v_)(e.$t("clase.noExistenClases")),9,K)])])):((0,r.uX)(),(0,r.CE)("tbody",z,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.dataCriterios,function(t,i){return(0,r.uX)(),(0,r.CE)(r.FK,null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.dataCriterios[i],function(t,i){return(0,r.uX)(),(0,r.CE)("tr",{onDblclick:function(o){return e.verCriterios(t.detalle)}},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.columnas,function(e,i){return(0,r.uX)(),(0,r.CE)(r.FK,null,[t.data[e.value+"_"+e.indice]?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("td",null,[(0,r.Lk)("div",{class:(0,n.C4)(["contCriterio",{excluido:t.data[e.value+"_"+e.indice].excluir}])},[t.data[e.value+"_"+e.indice].excluirPor?((0,r.uX)(),(0,r.Wv)(a,{key:0,name:"grid_off"})):(0,r.Q3)("v-if",!0),t.data[e.value+"_"+e.indice].sumativo?((0,r.uX)(),(0,r.CE)("span",H,"Σ")):(0,r.Q3)("v-if",!0),(0,r.Lk)("span",null,(0,n.v_)(t.data[e.value+"_"+e.indice].det),1)],2)]),(0,r.Lk)("td",Z,[(0,r.Lk)("span",{class:(0,n.C4)({excluido:t.data[e.value+"_"+e.indice].excluir})},(0,n.v_)(t.data[e.value+"_"+e.indice].peso),3)])],64)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[o[4]||(o[4]=(0,r.Lk)("td",{class:"text-center"},[(0,r.Lk)("div",null,"-")],-1)),o[5]||(o[5]=(0,r.Lk)("td",{class:"text-center"},"-",-1))],64))],64)}),256))],40,Y)}),256))],64)}),256))]))])])],512),[[I.aG,!e.mostrarDatos]])])])}var oe={emits:["verCriterios"],name:"listadoGeneral",props:{dataCriterios:Object,objNiveles:Object,mostrarDatos:Boolean},components:{QBtn:S.Il,QIcon:S.bP,QInnerLoading:S.SQ,QSpinnerOval:S.VA,QTooltip:S.nC},data:function(){return{}},computed:{columnas:function(){var e=[];for(var o in this.objNiveles)for(var a=1;a<=this.objNiveles[o].limite;a++)e.push({criterio:this.objNiveles[o].label,indice:a,value:this.objNiveles[o].value,icono:this.objNiveles[o].icon,color:this.objNiveles[o].color});return e},colspan:function(){return 2*this.columnas.length}},mounted:function(){},methods:{verCriterios:function(e){this.$emit("verCriterios",e)}},created:function(){}},ae=a(12807);const te=(0,ae.A)(oe,[["render",ee]]);var ie=te,re={class:"row q-ma-sm-xs"},ne={class:"col-auto row flex-center"},le={class:"row q-ma-sm-xs"},se={class:"col-auto row flex-center"},ce={key:0,class:"row q-ma-sm-xs q-mt-lg-lg text-primary"},ue={key:1,class:"row q-ma-sm-xs"},de={class:"col-auto row flex-center"},fe={key:2,class:"row q-ma-sm-xs"},pe={class:"col-auto row flex-center"},me={key:3,class:"row q-ma-sm-xs"},ve={class:"col-auto row flex-center"};function Ce(e,o){var a=(0,r.g2)("q-tab"),t=(0,r.g2)("q-icon"),l=(0,r.g2)("q-select"),s=(0,r.g2)("q-popup-edit"),c=(0,r.g2)("q-td"),u=(0,r.g2)("q-toggle"),d=(0,r.g2)("q-table"),f=(0,r.g2)("q-tab-pane"),p=(0,r.g2)("q-tabs"),m=(0,r.g2)("sie-modal");return(0,r.uX)(),(0,r.Wv)(m,{class:"moda-registro-grupos-config",modelValue:e.verModal,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.verModal=o}),title:"Configuración Conducta",onClose:e.cerrarModal,header:!0,footer:!1,ok:!1},{default:(0,r.k6)(function(){return[(0,r.bF)(p,{inverted:"",ref:"tabs",animated:""},{title:(0,r.k6)(function(){return[(0,r.bF)(a,{default:"",name:"tab-1",label:"Configuración Criterios","no-caps":""})]}),default:(0,r.k6)(function(){return[(0,r.bF)(f,{name:"tab-1"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",re,[(0,r.Lk)("div",ne,[(0,r.bF)(t,{class:"q-mr-sm",name:"calendar_check_o",size:"28px"})]),o[2]||(o[2]=(0,r.Lk)("div",{class:"col self-center"},[(0,r.Lk)("div",{class:"text-justify"},[(0,r.Lk)("b",null,"Límite replica anual:"),(0,r.Lk)("span",null,"Hasta que Periodo se va a replicar en el registro de talleres.")])],-1))]),(0,r.Lk)("div",le,[(0,r.Lk)("div",se,[(0,r.bF)(t,{class:"q-mr-sm",name:"pesos_criterios",size:"28px"})]),o[3]||(o[3]=(0,r.Lk)("div",{class:"col self-center"},[(0,r.Lk)("div",{class:"text-justify"},[(0,r.Lk)("b",null,"Nivel de edición pesos R.N.:"),(0,r.Lk)("span",null,"A partir de que nivel de evaluación se puede configurar los pesos y criterios en el registro de talleres.")])],-1))]),e.config.editConfig?((0,r.uX)(),(0,r.CE)("div",ce,i()(o[4]||(o[4]=[(0,r.Lk)("p",{class:"tituloCriterio"},"Habilitar campos en registro de pesos y criterios:",-1)])))):(0,r.Q3)("v-if",!0),e.config.editConfig?((0,r.uX)(),(0,r.CE)("div",ue,[(0,r.Lk)("div",de,[(0,r.bF)(t,{class:"q-mr-sm",name:"format_color_text",size:"28px"})]),o[5]||(o[5]=(0,r.Lk)("div",{class:"col self-center"},[(0,r.Lk)("div",{class:"text-justify"},[(0,r.Lk)("b",null,"Mostrar Excluido:"),(0,r.Lk)("span",null,"Permite excluir un criterio del calculo del promedio.")])],-1))])):(0,r.Q3)("v-if",!0),e.config.editConfig?((0,r.uX)(),(0,r.CE)("div",fe,[(0,r.Lk)("div",pe,[(0,r.bF)(t,{class:"q-mr-sm",name:"functions",size:"28px"})]),o[6]||(o[6]=(0,r.Lk)("div",{class:"col self-center"},[(0,r.Lk)("div",{class:"text-justify"},[(0,r.Lk)("b",null,"Mostrar Sumativo:"),(0,r.Lk)("span",null,'Habilita la configuración para que sus "criterios hijos" se sumen entre si para dar un promedio.')])],-1))])):(0,r.Q3)("v-if",!0),e.config.editConfig?((0,r.uX)(),(0,r.CE)("div",me,[(0,r.Lk)("div",ve,[(0,r.bF)(t,{class:"q-mr-sm",name:"grid_off",size:"28px"})]),o[7]||(o[7]=(0,r.Lk)("div",{class:"col self-center"},[(0,r.Lk)("div",{class:"text-justify"},[(0,r.Lk)("b",null,"Competencia no evaluada:"),(0,r.Lk)("span",null,"Bloquea la competencia y se considera como competencia no evaluada en el periodo.")])],-1))])):(0,r.Q3)("v-if",!0),(0,r.bF)(d,{class:"tblConfig q-ma-lg-md","table-style":"height: 80%",color:"secondary","hide-bottom":!0,data:e.config.data,columns:e.config.columns,pagination:e.config.pag,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.config.pag=o})},{"body-cell-LIMITE_REPLICA":(0,r.k6)(function(o){return[(0,r.bF)(c,{props:o},{default:(0,r.k6)(function(){return[(0,r.eW)((0,n.v_)(o.row.LIMITE_REPLICA),1),(0,r.bF)(s,{class:"q-pa-xs",modelValue:o.row.LIMITE_REPLICA,"onUpdate:modelValue":function(e){return o.row.LIMITE_REPLICA=e}},{default:(0,r.k6)(function(){return[(0,r.bF)(l,{class:"q-if-outlined",modelValue:o.row.LIMITE_REPLICA,"onUpdate:modelValue":function(e){return o.row.LIMITE_REPLICA=e},options:e.config.optionsLR,onInput:function(a){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-EDICION_PESOS_PROFE":(0,r.k6)(function(o){return[(0,r.bF)(c,{props:o},{default:(0,r.k6)(function(){return[(0,r.eW)((0,n.v_)(o.row.EDICION_PESOS_PROFE),1),(0,r.bF)(s,{class:"q-pa-xs",modelValue:o.row.EDICION_PESOS_PROFE,"onUpdate:modelValue":function(e){return o.row.EDICION_PESOS_PROFE=e}},{default:(0,r.k6)(function(){return[(0,r.bF)(l,{class:"q-if-outlined",modelValue:o.row.EDICION_PESOS_PROFE,"onUpdate:modelValue":function(e){return o.row.EDICION_PESOS_PROFE=e},options:e.config.optionsEP,onInput:function(a){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_EXCLUIDO":(0,r.k6)(function(o){return[(0,r.bF)(c,{props:o},{default:(0,r.k6)(function(){return[(0,r.bF)(u,{modelValue:o.row.MOSTRAR_EXCLUIDO,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_EXCLUIDO=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(a){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_SUMATIVO":(0,r.k6)(function(o){return[(0,r.bF)(c,{props:o},{default:(0,r.k6)(function(){return[(0,r.bF)(u,{modelValue:o.row.MOSTRAR_SUMATIVO,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_SUMATIVO=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(a){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_EXCL_PORCENTAJE":(0,r.k6)(function(o){return[(0,r.bF)(c,{props:o},{default:(0,r.k6)(function(){return[(0,r.bF)(u,{modelValue:o.row.MOSTRAR_EXCL_PORCENTAJE,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_EXCL_PORCENTAJE=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(a){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1})]}),_:1},512)]}),_:1},8,["modelValue","onClose"])}var ge=a(30640),be=a(80340),De=a(57668),he=a(6583),Oe=a(982),ke=a(55733),Te={emits:["update:modelValue","input","cerrarModal"],name:"configuracionClase",props:{modelValue:{type:Boolean,default:!1},verCurricula:Boolean},components:{QCard:S.C$,QFab:S.l6,QFabAction:S.B$,QSelect:S.Si,QInput:S.ie,QInnerLoading:S.SQ,QSpinnerOval:S.VA,QToggle:S.c5,QTable:S.kH,QTh:S.EJ,QTr:S.qh,QTd:S.Ef,QPopupEdit:S.GT,QTabs:S.uw,QTab:S.zu,QTabPane:S.dg,sieModal:ge.A,sieVacio:be.A,QIcon:S.bP},data:function(){return{config:{modal:!1,data:[],columns:[],pag:{page:1,rowsPerPage:16},optionsLR:[],optionsEP:[],editConfig:!1},editConfig:!1}},computed:{verModal:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},mounted:function(){},watch:{},methods:{cerrarModal:function(){this.$emit("cerrarModal")},configTabla:function(e){this.config.editConfig=e,this.config.columns=[{name:"NIVEL",label:"Periodo",field:"NIVEL",align:"left",sortable:!0},{name:"LIMITE_REPLICA",label:"Límite replica anual",field:"LIMITE_REPLICA",align:"center",sortable:!1},{name:"EDICION_PESOS_PROFE",label:"Nivel de edición pesos R.N",field:"EDICION_PESOS_PROFE",align:"center",sortable:!1}],e&&(this.config.columns.push({name:"MOSTRAR_EXCLUIDO",label:"Mostrar Excluido",field:"MOSTRAR_EXCLUIDO",align:"center",sortable:!1}),this.config.columns.push({name:"MOSTRAR_SUMATIVO",label:"Mostrar Sumativo",field:"MOSTRAR_SUMATIVO",align:"center",sortable:!1}),this.config.columns.push({name:"MOSTRAR_EXCL_PORCENTAJE",label:"Mostrar Excluido del %",field:"MOSTRAR_EXCL_PORCENTAJE",align:"center",sortable:!1}))},openConfig:function(){var e=this,o=(0,De["default"])().ano;Promise.all([ke.A.obtDataConfigGeneralTaller(o)]).then(function(o){var a=O()(o,1),t=a[0];return e.config.data=(0,he["default"])(t.listado),e.configTabla(t.editConfig),ke.A.maxNivel()}).then(function(o){for(var a=[],t=1;t<=o.MAXIMO;t++)a.push({label:""+t,value:t});e.config.optionsLR=a,e.config.optionsEP=a,e.config.editConfig&&e.config.optionsEP.push({label:"NINGUNO",value:99})})},grabarConfig:function(e){var o=this;ke.A.actualizarConfigClase(e).then(function(e){e.message?(0,Oe["default"])(o.$t("mensajes.m0001"),"success"):(0,Oe["default"])(o.$t("mensajes.e0006"),"error")})}},created:function(){this.openConfig()}};const Ee=(0,ae.A)(Te,[["render",Ce]]);var Le=Ee,Se={class:"contCopiaMasa"},_e={class:"row"},Ae={class:"col-xs-12 col-md-4 q-pa-lg-sm"},Fe={class:"q-card"},Ie={class:"q-pa-lg-sm text-primary tituloCopia"},Re={class:"q-pa-lg-sm"},Pe={class:"row"},Ve={class:"col"},Ne={class:"row"},ye={class:"col"},qe={class:"row"},Be={class:"col"},Me={class:"row"},Ue={class:"col"},xe={class:"q-pa-lg-sm text-primary tituloCriterio"},Qe={class:"row flex-lg-center"},we={class:"col"},je={class:"col"},Xe={class:"q-pa-lg-sm"},$e={class:"row"},Ge={class:"col contArbolCriterios"},We={class:"col-xs-12 col-md-8 q-pa-lg-sm"},Je={class:"q-pa-lg-sm text-primary tituloCopia"},Ke={class:"q-pa-lg-sm"},ze={class:"row"},Ye={class:"col-xs-12 col-md-4"},He={class:"col-xs-12 col-md-6"},Ze={key:0,class:"q-pa-md-md infoCopia"},eo={class:"text-bold"},oo={class:"q-mb-md-sm"},ao={key:0,class:"sumativo text-primary"},to={class:"text-center"};function io(e,o){var a=(0,r.g2)("sie-select"),t=(0,r.g2)("q-select"),l=(0,r.g2)("arbolCriterios"),s=(0,r.g2)("sie-table"),c=(0,r.g2)("q-icon"),u=(0,r.g2)("q-btn"),d=(0,r.g2)("q-tooltip"),f=(0,r.g2)("q-page-sticky");return(0,r.uX)(),(0,r.CE)("div",Se,[(0,r.Lk)("div",_e,[(0,r.Lk)("div",Ae,[(0,r.Lk)("div",Fe,[(0,r.Lk)("div",Ie,(0,n.v_)(e.$t("origen")),1),(0,r.Lk)("div",Re,[(0,r.Lk)("div",Pe,[(0,r.Lk)("div",Ve,[(0,r.bF)(a,{type:"outlined",modelValue:e.vmFiltroOrigen.anio,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmFiltroOrigen.anio=o}),options:e.objDataOrigen.anios,onSelected:e.cambiarAnio,label:"ANO",val:"ANO",placeholder:"Año"},null,8,["modelValue","options","onSelected"])])]),(0,r.Lk)("div",Ne,[(0,r.Lk)("div",ye,[(0,r.bF)(a,{type:"outlined",modelValue:e.vmFiltroOrigen.duracion,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.vmFiltroOrigen.duracion=o}),options:e.objDataOrigen.duracion,onSelected:e.cambiaDuracion,label:"DURADES",val:"DURACOD",placeholder:"Duración"},null,8,["modelValue","options","onSelected"])])]),(0,r.Lk)("div",qe,[(0,r.Lk)("div",Be,[(0,r.bF)(a,{type:"outlined",modelValue:e.vmFiltroOrigen.taller,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.vmFiltroOrigen.taller=o}),options:e.objDataOrigen.taller,onSelected:e.cambiarTaller,label:"CURSODES",val:"ID_CURSO_PERIODO",placeholder:"Taller"},null,8,["modelValue","options","onSelected"])])]),(0,r.Lk)("div",Me,[(0,r.Lk)("div",Ue,[(0,r.bF)(a,{type:"outlined",modelValue:e.vmFiltroOrigen.periodo,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.vmFiltroOrigen.periodo=o}),options:e.objDataOrigen.periodo,onSelected:e.cambiarPeriodo,label:"PERIODODES",val:"ID_TALLER_PERIODO",placeholder:"periodo"},null,8,["modelValue","options","onSelected"])])])]),(0,r.Lk)("div",xe,[(0,r.Lk)("div",Qe,[(0,r.Lk)("div",we,(0,n.v_)(e.$t("pesosYCriterios.criterios")),1),(0,r.Lk)("div",je,[(0,r.bF)(t,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroOrigen.nivel,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.vmFiltroOrigen.nivel=o}),options:e.objDataOrigen.nivelEvaluacion,"float-label":e.$t("pesosYCriterios.mostrarHasta"),onInput:e.seleccionaNivelEva},null,8,["modelValue","options","float-label","onInput"])])])]),(0,r.Lk)("div",Xe,[(0,r.Lk)("div",$e,[(0,r.Lk)("div",Ge,[e.verCriteriosOrigen?((0,r.uX)(),(0,r.Wv)(l,{key:0,idPrincipal:e.dataTreeOrigen.treeIdPrincipal,idBD:e.dataTreeOrigen.idBD,objPosiBD:e.dataTreeOrigen.objPosiBD,treeBancoDatos:e.dataTreeOrigen.treeBancoDatos,verDetalle:!0,onObtNodoSeleccionado:e.valorArbolOrigen},null,8,["idPrincipal","idBD","objPosiBD","treeBancoDatos","onObtNodoSeleccionado"])):(0,r.Q3)("v-if",!0)])])])])]),(0,r.Lk)("div",We,[(0,r.Lk)("div",{class:(0,n.C4)(["q-card",{deshabilitarDestino:e.deshabilitarDestino}])},[(0,r.Lk)("div",Je,(0,n.v_)(e.$t("pesosYCriterios.destino")),1),(0,r.Lk)("div",Ke,[(0,r.Lk)("div",ze,[(0,r.Lk)("div",Ye,[(0,r.bF)(t,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroDestino.duracion,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.vmFiltroDestino.duracion=o}),options:e.objDataDestino.duracion,"float-label":"Duración"},null,8,["modelValue","options"])]),(0,r.Lk)("div",He,[(0,r.bF)(t,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroDestino.periodo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.vmFiltroDestino.periodo=o}),options:e.objDataDestino.periodos,"float-label":e.$t("periodo")},null,8,["modelValue","options","float-label"])])])]),o[9]||(o[9]=(0,r.Lk)("div",{class:"q-pa-lg-sm text-primary tituloCopia"},"Talleres",-1)),(0,r.Lk)("div",null,[(0,r.bF)(s,{class:"q-ma-sm",ref:"refTableClaseTaller",selection:e.configTabla.selection,data:e.dataTallerDes,columns:e.configTabla.columns,css:"height:calc(100vh - 260px)"},null,8,["selection","data","columns"])]),e.infoCopia.length>0?((0,r.uX)(),(0,r.CE)("div",Ze,[o[8]||(o[8]=(0,r.Lk)("p",{class:"q-mb-md-sm"},"Los siguientes criterios solo se actualizaron sus descripciones, debido a que tienen notas y existen diferencias en el origen, las diferencias pueden ser: en el peso, criterio excluido o sumativo.",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.infoCopia,function(e){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("p",eo,(0,n.v_)(e.SALON+" - PERIODO: "+e.PERIODO),1),(0,r.Lk)("p",oo,[(0,r.bF)(c,{name:e.ICONO,size:"28px",style:(0,n.Tr)({color:e.COLOR}),class:(0,n.C4)({excluido:e.EXCLUIR})},null,8,["name","style","class"]),e.SUMATIVO?((0,r.uX)(),(0,r.CE)("span",ao," Σ ")):(0,r.Q3)("v-if",!0),(0,r.Lk)("span",null,(0,n.v_)("("+e.PESO+") "+e.DESCRIPCION),1)])],64)}),256)),(0,r.Lk)("div",to,[(0,r.bF)(u,{color:"secondary",icon:"check",onClick:e.entendido},{default:(0,r.k6)(function(){return i()(o[7]||(o[7]=[(0,r.eW)("Entendido",-1)]))}),_:1},8,["onClick"])])])):(0,r.Q3)("v-if",!0)],2)])]),(0,r.bF)(f,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,r.k6)(function(){return[(0,r.bF)(u,{fab:"",round:"",color:"secondary",icon:"copy",onClick:e.procesarCopia},{default:(0,r.k6)(function(){return[(0,r.bF)(d,{anchor:"center left",self:"center right",offset:[5,0]},{default:(0,r.k6)(function(){return i()(o[10]||(o[10]=[(0,r.eW)("Copia de criterios en masa",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})])}a(70199),a(7346);var ro=a(93616),no=a(61602),lo=a(95523),so=a(30545),co=a(81288),uo={emits:["setCambioData"],name:"copiaCriteriosEnMasa",props:{pDataDuracion:Array,pDataDuracionDest:Array,pDataTalleres:Array,pDataPeriodos:Array},components:{QBtn:S.Il,QIcon:S.bP,QSelect:S.Si,QCheckbox:S.vZ,QTr:S.qh,QTh:S.EJ,QPageSticky:S._U,sieSelect:ro.A,arbolCriterios:no.A,selectMultiple:lo.A,sieInfo:De["default"],QTable:so.A,QTooltip:S.nC},data:function(){return{vmFiltroDestino:{duracion:[],periodo:1,curricula:null},objDataDestino:{taller:[],duracion:[],periodos:[]},vmFiltroOrigen:{taller:null,duracion:null,periodo:null,nivel:1,anio:(0,De["default"])().ano},objDataOrigen:{periodo:[],taller:[],duracion:[],nivelEvaluacion:[],anios:[]},objDuracionSelected:{},objPeriodoSelected:{},dataTreeOrigen:{data:[],posiciones:{},treeIdPrincipal:0,idBD:0,objPosiBD:{},treeBancoDatos:[]},verCriteriosOrigen:!1,configTabla:{data:[],columns:[{name:"CURSOCOD",label:"COD. TALLER",field:"CURSOCOD",align:"left",sortable:!0},{name:"CURSODES",label:"TALLER",field:"CURSODES",align:"left",sortable:!1}],pagination:{page:1,rowsPerPage:200},selection:"multiple",registrosSeleccionados:[]},idCurriculaTmp:null,idsOrigen:[],deshabilitarDestino:!0,infoCopia:[],totAmbitos:[],hasTallerNuevo:!1}},computed:{idCurricula:function(){var e=this.idCurriculaTmp;return this.objDataOrigen["periodo"].length>0&&(e=this.objDataOrigen.periodo[0].ID_PROGRAMA),e!==this.idCurriculaTmp&&(this.idCurriculaTmp=e),e},dataTallerDes:function(){var e=this,o=[];return this.limpiarDataDestino(),this.vmFiltroDestino.duracion&&this.vmFiltroDestino.duracion.length>0&&(o=this.pDataTalleres,this.vmFiltroDestino.duracion.length>0&&(o=o.filter(function(o){return o.DURACOD===e.vmFiltroDestino["duracion"]})),o=(0,_["default"])(o,function(e){return{ID_CLASE_TALLER:e.ID_CLASE_TALLER,CURSOCOD:e.CURSOCOD,CURSODES:e.CURSODES,estado:1}})),o}},methods:{limpiarDataDestino:function(){this.configTabla.data=[],this.configTabla.registrosSeleccionados=[]},dataIni:function(){this.objDataOrigen.duracion=this.pDataDuracion,this.objDataDestino.duracion=this.pDataDuracionDest,this.objDataDestino.talleres=JSON.parse(JSON.stringify(this.pDataTalleres)),this.vmFiltroDestino["duracion"]=this.pDataDuracionDest[0].DURACOD,this.objDataOrigen.nivelEvaluacion=[{label:"Nivel 1",value:1},{label:"Nivel 2",value:2},{label:"Nivel 3",value:3},{label:"Nivel 4",value:4}],this.objDataDestino.periodos=JSON.parse(JSON.stringify(this.pDataPeriodos)),this.objDataDestino.periodos.unshift({label:"TODOS",value:0})},resetearDataFiltro:function(e){switch(e){case"anio":case"ambito":this.objPeriodoSelected={},this.vmFiltroOrigen.periodo=null;break;case"duracion":this.vmFiltroOrigen.taller=null;break;case"periodo":case"taller":break}},resetearDestino:function(e){switch(this.infoCopia=[],e){case"grabar":this.configTabla.data=[],this.configTabla.registrosSeleccionados=[];break}},cambiarAnio:function(){this.vmFiltroOrigen.duracion&&this.cambiaDuracion(this.objDuracionSelected,this.vmFiltroOrigen.anio)},cambiaDuracion:function(e,o){var a=this;o=o||this.vmFiltroOrigen.anio,this.resetearDataFiltro("duracion"),this.objDuracionSelected=e,this.vmFiltroDestino["duracion"]=e.DURACOD;var t=this.vmFiltroDestino["duracion"]!==e.DURACOD;this.configTreeCriteriosOrigen(!0,1,0,0),this.hasTallerNuevo?A.A.listadoTallereNuevosDuracion(e.DURACOD,o,!1).then(function(e){a.objDataOrigen.taller=e,a.deshabilitarDestino=!1}):A.A.listadoTalleresDuracion(e.DURACOD,!1).then(function(e){a.objDataOrigen.taller=e,a.deshabilitarDestino=!1}),t||(this.configTabla.registrosSeleccionados=this.dataTallerDes)},cambiarTaller:function(e){var o=this;this.resetearDataFiltro("taller");var a=this.vmFiltroDestino["tallecod"]!==e.TALLECOD;this.configTreeCriteriosOrigen(!0,1,0,0),this.hasTallerNuevo?A.A.getPeriodoTallerNuevo(0,!0,e.ID_CURSO_PERIODO).then(function(e){o.objDataOrigen.periodo=e,o.deshabilitarDestino=!1}):A.A.getPeriodoTaller(0,!0,e.ID_CURSOVAC).then(function(e){o.objDataOrigen.periodo=e,o.deshabilitarDestino=!1}),a||(this.configTabla.registrosSeleccionados=this.dataAmbitoDes)},cambiarPeriodo:function(e){var o=this;this.resetearDataFiltro("periodo"),this.objPeriodoSelected=e,this.verCriteriosOrigen=!1,A.A.getArbolCriterios(e.ID_CONTENIDO).then(function(a){o.dataTreeOrigen.data=a.data,o.dataTreeOrigen.posiciones=a.idPosicionBD,o.configTreeCriteriosOrigen(!1,o.vmFiltroOrigen.nivel,e.ID_CONTENIDO,e.ID_CONTENIDO)})},configTreeCriteriosOrigen:function(e,o,a,t){var i=this;this.idsOrigen=[],this.verCriteriosOrigen=!1,this.dataTreeOrigen.treeIdPrincipal=a,this.dataTreeOrigen.idBD=t,this.dataTreeOrigen.objPosiBD={},this.dataTreeOrigen.treeBancoDatos=[],e||new Promise(function(e,a){e(i.getDataNivelSeleccionado(o))}).then(function(e){var o=O()(e,2),a=o[0],t=o[1];i.dataTreeOrigen.objPosiBD=t,i.dataTreeOrigen.treeBancoDatos=a,i.verCriteriosOrigen=!0})},seleccionaNivelEva:function(e){this.configTreeCriteriosOrigen(!1,e,0,0)},valorArbolOrigen:function(e){this.idsOrigen=e},getDataNivelSeleccionado:function(e){var o=JSON.parse(JSON.stringify(this.dataTreeOrigen.data)),a=JSON.parse(JSON.stringify(this.dataTreeOrigen.posiciones)),t={};return this.recorreDataArbol(o,e,t,a),[o,t]},recorreDataArbol:function(e,o,a,t){var i=this;e.forEach(function(e){a[e.ID_CONTENIDO]=t[e.ID_CONTENIDO],e.NIVEL>=o?e.children=[]:i.recorreDataArbol(e.children,o,a,t)})},procesarCopia:function(){var e=this;if(this.configTabla.registrosSeleccionados=this.$refs.refTableClaseTaller.rowsSelected(),!this.configTabla.registrosSeleccionados)return(0,Oe["default"])("Por favor selecciona mínimo un taller de destino","warning"),!1;if(this.deshabilitarDestino)return!1;if(this.idsOrigen.length<=0)return(0,Oe["default"])(this.$t("pesosYCriterios.seleccioneOrigen"),"error"),!1;if(1===this.idsOrigen.length&&this.objPeriodoSelected["ID_CONTENIDO"]===this.idsOrigen[0])return(0,Oe["default"])(this.$t("pesosYCriterios.noExistenCriterios"),"error"),!1;if(this.configTabla.registrosSeleccionados.length<=0)return(0,Oe["default"])(this.$t("pesosYCriterios.seleccioneDestino"),"error"),!1;this.deshabilitarDestino=!0;var o=this.$t.bind(this);this.$q.dialog({title:o("mensajes.m0115"),message:o("mensajes.m0010"),ok:o("botones.si"),cancel:o("botones.no"),preventClose:!0}).onOk(function(){var o=[];e.configTabla.registrosSeleccionados.forEach(function(e){o.push(e.ID_CLASE_TALLER)});var a=e.dataTreeOrigen.data[0].ID_PROGRAMA;A.A.procesoCopiaMasiva(e.idsOrigen,o,e.vmFiltroDestino.periodo,a).then(function(o){1===o.estado?((0,Oe["default"])(e.$t("mensajes.m0008"),"success"),e.resetearDestino("grabar"),e.deshabilitarDestino=!1,e.$emit("setCambioData",0,!0),e.infoCopia=o.info):(0,Oe["default"])(e.$t("mensajes.m0009"),"error")}).catch(function(){return(0,Oe["default"])(e.$t("mensajes.m0009"),"error"),!1}),e.$refs.refTableClaseTaller.loadSelected()}).onCancel(function(){return e.deshabilitarDestino=!1,!1})},entendido:function(){this.infoCopia=[]}},created:function(){var e=this,o=["TALLERES_NUEVO"];this.dataIni(),(0,co.constantes)(o).then(function(o){e.hasTallerNuevo=o.TALLERES_NUEVO||!1,e.hasTallerNuevo?A.A.getAniosTalleresNuevo().then(function(o){e.objDataOrigen.anios=o}):A.A.getAniosTalleres().then(function(o){e.objDataOrigen.anios=o})})}};const fo=(0,ae.A)(uo,[["render",io]]);var po=fo,mo={class:"row q-px-sm q-pt-sm"},vo={class:"col-xs-12 col-md-6"},Co={class:"col-xs-12 col-md-6"},go={class:"row q-px-sm col"},bo={class:"col-xs-12 listaDetalle"};function Do(e,o){var a=(0,r.g2)("q-select"),t=(0,r.g2)("sie-select"),i=(0,r.g2)("q-table"),n=(0,r.g2)("sie-modal");return(0,r.uX)(),(0,r.Wv)(n,{class:"modal-plantilla",modelValue:e.verModalBancoDatos,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.verModalBancoDatos=o}),title:"Asignación de Banco de Datos a Talleres",onClose:e.cerrarModalBanco,header:!0,ok:e.$t("botones.guardar"),onSubmit:e.asignarBancoDatos},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",mo,[(0,r.Lk)("div",vo,[(0,r.bF)(a,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroBancoDatos.duracod,options:e.dataPeriodos,"float-label":"Periodo",onChange:e.seleccionaPeriodo,filter:""},null,8,["modelValue","options","onChange"])]),(0,r.Lk)("div",Co,[(0,r.bF)(t,{type:"outlined",modelValue:e.vmFiltroBancoDatos.plantilla,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmFiltroBancoDatos.plantilla=o}),options:e.datosBancoDatos,onSelected:e.seleccionaValorBancoDatos,label:"DESCRIPCION",val:"ID_CONTENIDO",placeholder:"Seleccione Banco de Datos"},null,8,["modelValue","options","onSelected"])])]),(0,r.Lk)("div",go,[(0,r.Lk)("div",bo,[(0,r.bF)(i,{style:{height:"57vh"},selection:e.configGrilla.tipoSeleccion,"row-key":"ID_CURSOVAC",color:"secondary",data:e.dataDetalleBancoDatos,columns:e.configGrilla.columnas,selected:e.configGrilla.registrosSeleccionados,"onUpdate:selected":o[1]||(o[1]=function(o){return e.configGrilla.registrosSeleccionados=o}),pagination:e.configGrilla.paginacion,"onUpdate:pagination":o[2]||(o[2]=function(o){return e.configGrilla.paginacion=o}),filter:e.filtroTabla},null,8,["selection","data","columns","selected","pagination","filter"])])])]}),_:1},8,["modelValue","onClose","ok","onSubmit"])}a(92802);var ho={emits:["update:modelValue","input","cerrarModalBanco","cargarCriteriosBanco"],name:"configuracionClase",props:{modelValue:{type:Boolean,default:!1},verCurricula:Boolean,dataDuracion:Array},components:{QCard:S.C$,QFab:S.l6,QFabAction:S.B$,QSelect:S.Si,QInput:S.ie,QInnerLoading:S.SQ,QSpinnerOval:S.VA,QToggle:S.c5,QTable:S.kH,QTh:S.EJ,QTr:S.qh,QTd:S.Ef,QPopupEdit:S.GT,QTabs:S.uw,QTab:S.zu,QTabPane:S.dg,sieModal:ge.A,sieVacio:be.A,sieSelect:ro.A},data:function(){return{dataPeriodos:[],config:{modal:!1,data:[],columns:[],pag:{page:1,rowsPerPage:16},optionsLR:[],optionsEP:[],editConfig:!1},editConfig:!1,vmFiltroBancoDatos:{duracod:null,plantilla:null,idsContenidoBD:""},dataDetalleTempBancoDatos:[],datosBancoDatos:[],configGrilla:{},loadingDetalle:!1,filtroTabla:"",hasTallerNuevo:!1}},computed:{verModalBancoDatos:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}},dataDetalleBancoDatos:function(){var e=this.dataDetalleTempBancoDatos;return this.configGrilla.registrosSeleccionados=e,e}},mounted:function(){},watch:{},methods:{cerrarModalBanco:function(){this.$emit("cerrarModalBanco")},cargarCriteriosBanco:function(){this.$emit("cargarCriteriosBanco")},grabarConfig:function(e){},asignarBancoDatos:function(){var e=this,o=this.configGrilla.registrosSeleccionados,a=this.vmFiltroBancoDatos.plantilla,t=[],i=[];t=(0,_["default"])(o,function(e){return e.ID_CURSOVAC}),this.deshabilitar=!0,""!==this.vmFiltroBancoDatos.idsContenidoBD&&(i=this.vmFiltroBancoDatos.idsContenidoBD.split(","));var r=o.reduce(function(e,o,t){return e.then(function(){var e=A.A.procesoCopiarBD(a,o.ID_CLASE_TALLER,{limiteReplica:3,periodo:1},!0,!0,i).then(function(e){return e});return e})},Promise.resolve(1));r.then(function(){(0,Oe["default"])(e.$t("mensajes.m0008"),"success")}).catch(function(o){(0,Oe["default"])(e.$t("mensajes.m0009"),"error"),e.deshabilitar=!1}),this.hasTallerNuevo?A.A.editarBancoDatosTallerNuevo(t,a).then(function(o){!0===o.message?(e.cargarDatosBanco(),(0,Oe["default"])(e.$t("mensajes.m0064"),"success")):(0,Oe["default"])(e.$t(o.mensaje),"error")}).then(function(){e.cargarCriteriosBanco()}).catch(function(o){(0,Oe["default"])(e.$t("mensajes.m0009"),"error")}):A.A.editarBancoDatos(t,a).then(function(o){!0===o.message?(e.cargarDatosBanco(),(0,Oe["default"])(e.$t("mensajes.m0064"),"success")):(0,Oe["default"])(e.$t(o.mensaje),"error")}).then(function(){e.cargarCriteriosBanco()}).catch(function(o){(0,Oe["default"])(e.$t("mensajes.m0009"),"error")})},seleccionaPeriodo:function(e){this.vmFiltroBancoDatos.duracod=e},seleccionaValorBancoDatos:function(e){this.vmFiltroBancoDatos.plantilla=e.ID_CONTENIDO,this.vmFiltroBancoDatos.idsContenidoBD=e.IDSCONTENIDO},configurarTablaBancoDatos:function(){var e=this;return L()(T()().m(function o(){var a;return T()().w(function(o){while(1)switch(o.n){case 0:a={},a.columnas=[{name:"ID_CURSOVAC",label:"ID TALLER",field:"ID_CURSOVAC",align:"left",sortable:!0},{name:"CURSODES",label:"TALLER",field:"CURSODES",align:"left",sortable:!0},{name:"BANCO_DATOS",label:"Banco de Datos",field:"BANCO_DATOS",align:"center"}],a.paginacion={page:1,rowsPerPage:500},a.registrosSeleccionados=[],a.tipoSeleccion="multiple",a.dataTipoSeleccion=[{label:"Individual",value:"single"},{label:"Multiple",value:"multiple"}],e.configGrilla=a;case 1:return o.a(2)}},o)}))()},init:function(){var e=this;return L()(T()().m(function o(){var a,t;return T()().w(function(o){while(1)switch(o.n){case 0:return a=["TALLERES_NUEVO"],o.n=1,(0,co.constantes)(a);case 1:t=o.v,e.hasTallerNuevo=t.TALLERES_NUEVO||!1,e.configurarTablaBancoDatos(),e.cargarDatosBanco();case 2:return o.a(2)}},o)}))()},cargarDatosBanco:function(){var e=this;return L()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:return e.dataPeriodos=e.dataDuracion,o.n=1,A.A.obtBancoDatos();case 1:if(e.datosBancoDatos=o.v,!e.hasTallerNuevo){o.n=3;break}return o.n=2,A.A.getListaTalleresNuevoBaseContenido();case 2:e.dataDetalleTempBancoDatos=o.v,o.n=5;break;case 3:return o.n=4,A.A.getListaTalleresBaseContenido();case 4:e.dataDetalleTempBancoDatos=o.v;case 5:e.configGrilla.registrosSeleccionados=[];case 6:return o.a(2)}},o)}))()}},created:function(){this.init()}};const Oo=(0,ae.A)(ho,[["render",Do]]);var ko=Oo,To=a(2819),Eo={components:{QCard:S.C$,QPopover:S.VM,QSearch:S.Ks,QSelect:S.Si,QPageSticky:S._U,QToggle:S.c5,QFab:S.l6,QFabAction:S.B$,QRadio:S.$,QTable:so.A,configuracionClase:Le,TallerContenido:A.A,registroCriterios:F.A,sieSelect:ro.A,sieVacio:be.A,listadoCriterios:ie,copiaCriteriosEnMasa:po,asignarBancoDatos:ko,selectMultiple:lo.A,sieInfo:De["default"],sieModal:ge.A,QPage:S.Tu,QToolbar:S.ZV,QToolbarTitle:S.r_,QBtn:S.Il,QTooltip:S.nC},data:function(){return{vmFiltro:{periodo:1,curricula:null,duracod:null,duracodRep:null,taller:[],vigente:null},dataSelect:{duracion:[],talleres:[]},talleresTemp:[],dataCurricula:[],perinum:4,objNiveles:{},dataCriteriosTemp:{},dtPeriodos:[],loadCriterios:!0,dataCompCriterios:{},verComponentes:{registroCriterio:!1,copiaEnMasa:!1,listadoGeneral:!0},titulo:"Criterios de talleres",subtitulo:"",repcod:"criteriosPorTalleres",objReportes:A.A.reportes(),openModal:{reportes:!1,config:!1,bancodatos:!1},optionsPeriodoCriterio:[],vmTallerPeriodo:null,cambioData:!1,sie:(0,De["default"])(),hasTallerNuevo:!1}},computed:{dataTalleres:function(){var e=this.dataSelect.talleres;return e=(0,_["default"])(e,function(e){return{label:e.CURSODES,value:e.ID_CURSOVAC}}),e},dataCriterios:function(){var e=this.dataCriteriosTemp,o={};return this.vmFiltro.taller.length>0&&(this.vmFiltro.taller.sort().forEach(function(a){e["_"+a]&&(o["_"+a]=e["_"+a])}),e=o),e}},methods:{seleccionaDuracion:function(e){var o=this.dataSelect.dataDuracion.filter(function(o){return e===o.DURACOD});this.vmFiltro.taller=[],this.vmFiltro.duracod=e,this.vmFiltro.vigente=o[0].VIGENTE,this.loadTalleres(),this.listarDataCriterios()},seleccionaTaller:function(e){this.vmFiltro.taller=e},seleccionaPeriodo:function(e){this.vmFiltro.periodo=e,this.listarDataCriterios()},seleccionaCurricula:function(e){this.vmFiltro.curricula=e,this.listarDataCriterios()},loadTalleres:function(){var e=L()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:if(!this.hasTallerNuevo){e.n=2;break}return e.n=1,A.A.getTalleresNuevo(this.vmFiltro.duracod);case 1:this.dataSelect.talleres=e.v,e.n=4;break;case 2:return e.n=3,A.A.getTalleres(this.vmFiltro.duracod);case 3:this.dataSelect.talleres=e.v;case 4:return e.a(2)}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),loadPeriodos:function(){var e=[];e.push({label:"1º PERIODO",value:1}),e.push({label:"2º PERIODO",value:2}),e.push({label:"3º PERIODO",value:3}),e.push({label:"4º PERIODO",value:4}),this.dtPeriodos=e},dataIni:function(){var e=this;Promise.all([A.A.getDuracion()]).then(function(o){var a=O()(o,1),t=a[0];e.dataSelect.dataDuracion=t;var i=t.filter(function(e){return"S"===e.VIGENTE});e.vmFiltro.duracod=i[0].DURACOD,e.vmFiltro.vigente=i[0].VIGENTE,e.dataSelect.duracion=(0,_["default"])(t,function(e){return{label:e.DURADES,value:e.DURACOD}}),e.cargarCriteriosIniDuracod(e.vmFiltro.duracod)}),this.loadTalleres()},listarDataCriterios:function(){var e=this;this.loadCriterios=!0,A.A.listadoCriteriosFiltro(this.vmFiltro["periodo"],this.vmFiltro["curricula"],this.vmFiltro["duracod"]).then(function(o){e.dataCriteriosTemp=o,e.loadCriterios=!1,e.cambioData=!1})},mostrarComponentes:function(e){this.verComponentes.registroCriterio=!1,this.verComponentes.copiaEnMasa=!1,this.verComponentes.listadoGeneral=!1,this.verComponentes[e]=!0},setCambioData:function(e,o){this.cambioData=e===this.vmFiltro.periodo||o},volver:function(){this.titulo="registroDeNotas.pesosYCriterios",this.subtitulo="",this.mostrarComponentes("listadoGeneral"),this.cambioData&&this.listarDataCriterios()},cargarCriteriosBanco:function(){this.titulo="registroDeNotas.pesosYCriterios",this.subtitulo="",this.mostrarComponentes("listadoGeneral"),this.listarDataCriterios()},verCriterios:function(e){this.dataCompCriterios["periodoSelected"]={ID_CLASE_TALLER:e.idClaseTaller,ID_CURSOVAC:e.idCursovac,ID_TALLER_PERIODO:e.idTallerPeriodo,PERIODO:1,ID_TALLER_CONTENIDO:e.idContenidoPrin,ID_CONTENIDO:e.idContenido,PERIODODES:""},this.dataCompCriterios["tallerSelected"]={ID_CLASE_TALLER:e.idClaseTaller,ID_CURSOVAC:e.idCursovac,CURSOCOD:e.cursocod,DURACOD:e.duracod,ANUAL_REPLICA:e.anualReplica,ORIGEN_REPLICA:e.origenReplica},this.subtitulo=": "+e.cursodes,this.cargarPeriodosPorTaller(e.idClaseTaller,e.idTallerPeriodo),this.cambioData=!1,this.mostrarComponentes("registroCriterio")},modalReportes:function(){this.openModal.reportes=!0},exportar:function(e){var o={formato:e,repcod:this.repcod,duracod:this.vmFiltro["duracodRep"],ano:(0,De["default"])().ano};(0,To.exportFilePhp)(o,"webservice/reportes/reporte")},verCopiaEnMasa:function(){this.paramData={duracion:this.dataSelect.dataDuracion,duracionDest:this.dataSelect.duracion,taller:this.dataSelect.talleres,periodos:this.dtPeriodos},this.cambioData=!1,this.titulo="pesosYCriterios.copia",this.mostrarComponentes("copiaEnMasa")},abrirModalConfig:function(){this.openModal.config=!0},cerrarModalConfig:function(){this.openModal.config=!1},cargarPeriodosPorTaller:function(e,o){var a=this;this.hasTallerNuevo?A.A.getPeriodoTallerNuevo(e).then(function(e){a.optionsPeriodoCriterio=e,a.vmTallerPeriodo=o}):A.A.getPeriodoTaller(e).then(function(e){a.optionsPeriodoCriterio=e,a.vmTallerPeriodo=o})},cambiarClasePeriodo:function(e){this.dataCompCriterios["periodoSelected"]=e,this.mostrarComponentes("registroCriterio")},abrirModalBancoDatos:function(){this.openModal.bancodatos=!0},cerrarModalBanco:function(){this.openModal.bancodatos=!1},cargarCriteriosIniDuracod:function(e){var o=this;A.A.getDataIni(e).then(function(e){o.dataCurricula=e["curricula"],o.perinum=1,o.objNiveles=e["nivel1"],o.dataCriteriosTemp=e["data"],o.vmFiltro.curricula=o.dataCurricula[0].value,o.loadPeriodos(),o.loadCriterios=!1})}},created:function(){var e=this,o=["TALLERES_NUEVO"];(0,co.constantes)(o).then(function(o){e.hasTallerNuevo=o.TALLERES_NUEVO||!1,e.dataIni()})}};const Lo=(0,ae.A)(Eo,[["render",D]]);var So=Lo}}]);