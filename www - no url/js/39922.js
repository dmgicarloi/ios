"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[39922],{39922:function(e,n,r){r.r(n),r.d(n,{default:function(){return k}});var t=r(61758),i={class:"row"},a={class:"col-xs-12"},o={class:"row q-pa-sm q-col-gutter-sm"},l={class:"col-xs-12"},c={class:"col-xs-12"},s={class:"col-xs-12 col-sm-6 column items-center"},u={class:"col-xs-12 col-sm-6 column items-center"};function p(e,n){var r=this,p=(0,t.g2)("header-btn"),m=(0,t.g2)("sie-table"),d=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-card"),A=(0,t.g2)("q-input"),I=(0,t.g2)("q-checkbox"),h=(0,t.g2)("q-form"),O=(0,t.g2)("sie-modal"),T=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(T,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(p,{name:"Mantenimiento Operación",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",i,[(0,t.Lk)("div",a,[(0,t.bF)(m,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableTipOpeAlm",onRowSelected:e.rowSelectTipOpeAlm,css:"height:calc(100vh - 150px)",context:r},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,t.bF)(O,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Operación":"Modificar Operación",onSubmit:e.saveAcccion},{default:(0,t.k6)(function(){return[(0,t.bF)(h,{ref:"refForm"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.Lk)("div",l,[(0,t.bF)(A,{disable:"update"===e.action,modelValue:e.form.IDTIPOPEALM,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.IDTIPOPEALM=n}),maxlength:"3",label:"Código *",rules:[e.required]},null,8,["disable","modelValue","rules"])]),(0,t.Lk)("div",c,[(0,t.bF)(A,{type:"textarea",counter:"",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.DESCRIPCION=n}),label:"Descripción *",rules:[e.required]},null,8,["modelValue","rules"])]),(0,t.Lk)("div",s,[(0,t.bF)(I,{dense:"",modelValue:e.form.ENTRADA,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.form.ENTRADA=n}),"true-value":1,"false-value":0,label:"Entrada"},null,8,["modelValue"])]),(0,t.Lk)("div",u,[(0,t.bF)(I,{dense:"",modelValue:e.form.SALIDA,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.form.SALIDA=n}),"true-value":1,"false-value":0,label:"Salida"},null,8,["modelValue"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var m=r(76080),d=r.n(m),f=r(45254),A=r.n(f),I=(r(74260),r(89571),r(50310),r(32203),r(83190),r(6123)),h={data:function(){return{config:{ENTRADA:{renderHtml:function(e,n,r){return r.checkbox({trueValue:1,value:e.ENTRADA})}},SALIDA:{renderHtml:function(e,n,r){return r.checkbox({trueValue:1,value:e.SALIDA})}},ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,n){var r=this;return A()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:return r.rowTipOpeAlm=n,e.n=1,r.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var r=this;return A()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:return r.rowTipOpeAlm=n,e.n=1,r.deleteTipOpeAlm();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"IDTIPOPEALM",label:"Código",field:"IDTIPOPEALM",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ENTRADA",label:"Entrada",field:"ENTRADA",align:"center",sortable:!0},{name:"SALIDA",label:"Salida",field:"SALIDA",align:"center",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:80}]}}},O=r(39893),T=r(81288),w=r(2739),g=r(9736),D=r(3112),b=r(88567),v=r(95718),E=r(43136),P={mixins:[h,E.initialConfig],components:{QForm:w.A,QInput:g.A,QCheckbox:D.A,QCard:b.A,QCardSection:v.A,QPage:I.Tu},data:function(){return{required:O.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowTipOpeAlm:null,form:{IDTIPOPEALM:null,DESCRIPCION:null,ENTRADA:0,SALIDA:0}}},methods:{openAgregar:function(){this.action="create",this.rowTipOpeAlm=null,(0,T.clear)(this.form),this.form.ENTRADA=0,this.form.SALIDA=0,this.openAdd=!0},openActualizar:function(){this.rowTipOpeAlm?(this.action="update",this.form.IDTIPOPEALM=this.rowTipOpeAlm.IDTIPOPEALM,this.form.DESCRIPCION=this.rowTipOpeAlm.DESCRIPCION,this.form.ENTRADA=this.rowTipOpeAlm.ENTRADA,this.form.SALIDA=this.rowTipOpeAlm.SALIDA,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return A()(d()().m(function n(){var r,t,i;return d()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(r=n.v,r){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:t=n.v,t&&e.createTipOpeAlm(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:i=n.v,i&&e.updateTipOpeAlm();case 6:return n.a(2)}},n)}))()},rowSelectTipOpeAlm:function(e,n){this.rowTipOpeAlm=n},createTipOpeAlm:function(){var e=this;return A()(d()().m(function n(){var r,t,i,a,o,l;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:if(n.p=0,r=e.rows.find(function(n){return n.IDTIPOPEALM===e.form.IDTIPOPEALM}),!r){n.n=1;break}return e.$notify("El código ingresado ya existe","warning"),n.a(2);case 1:return n.n=2,e.$http.post("api/HyoTipoOperaciones/createOperacion",{empcod:e.empcod,idtipopealm:e.form.IDTIPOPEALM,params:e.form});case 2:t=n.v,i=t.result,a=t.message,o={IDTIPOPEALM:i.IDTIPOPEALM,DESCRIPCION:e.form.DESCRIPCION,ENTRADA:e.form.ENTRADA,SALIDA:e.form.SALIDA},e.rows.unshift(o),e.openAdd=!1,e.$notify(a,"success"),n.n=4;break;case 3:n.p=3,l=n.v,e.$notify(l.message,"warning");case 4:return n.a(2)}},n,null,[[0,3]])}))()},readTipOpeAlm:function(){var e=this;return A()(d()().m(function n(){var r,t;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/HyoTipoOperaciones/readOperacion",{params:{empcod:e.empcod,estado:[1]}});case 1:r=n.v,e.rows=r,n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deleteTipOpeAlm:function(){var e=this;return A()(d()().m(function n(){var r,t,i,a;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowTipOpeAlm){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(r=n.v,!r){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/HyoTipoOperaciones/deleteUnidad",{params:{empcod:e.empcod,idtipopealm:e.rowTipOpeAlm.IDTIPOPEALM}});case 4:t=n.v,i=t.message,e.rows.splice(e.rows.indexOf(e.rowTipOpeAlm),1),e.rowTipOpeAlm=null,e.$notify(i,"success"),n.n=6;break;case 5:n.p=5,a=n.v,e.$notify(a.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateTipOpeAlm:function(){var e=this;return A()(d()().m(function n(){var r,t,i,a;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,r=e.$refs.tableTipOpeAlm,n.n=1,e.$http.put("api/HyoTipoOperaciones/updateTipoOperacion",{empcod:e.empcod,idtipopealm:e.form.IDTIPOPEALM,params:{DESCRIPCION:e.form.DESCRIPCION,SALIDA:e.form.SALIDA,ENTRADA:e.form.ENTRADA}});case 1:t=n.v,i=t.message,e.openAdd=!1,r.updateRow(e.rowTipOpeAlm,e.form),e.$notify(i,"success"),n.n=3;break;case 2:n.p=2,a=n.v,e.$notify(a.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){var e=this;return A()(d()().m(function n(){return d()().w(function(n){while(1)switch(n.n){case 0:try{e.readTipOpeAlm()}catch(n){e.$notify(n.message,"warning")}case 1:return n.a(2)}},n)}))()}},S=r(12807);const L=(0,S.A)(P,[["render",p]]);var k=L}}]);