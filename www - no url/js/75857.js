"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[75857],{75857:function(e,n,a){a.r(n),a.d(n,{default:function(){return k}});var t=a(61758),r=a(58790),o={class:"row q-col-gutter-md"},i={class:"col-xs-12"};function s(e,n){var a=(0,t.g2)("header-btn"),s=(0,t.g2)("formulario"),l=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-card"),u=(0,t.g2)("sie-modal"),d=(0,t.g2)("estados-fichas"),f=(0,t.g2)("q-select"),m=(0,t.g2)("listar-sedes"),h=(0,t.g2)("alert-inscripcion"),p=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(p,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(c,{flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{name:e.tituloForm,auto:!0,buttons:e.botonesForm},null,8,["name","buttons"]),(0,t.bF)(l,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.Lk)("div",i,[(0,t.bF)(s,{schema:e.schemas.viewAdmAsignaEval,ref:"formApp",key:"formApp",onClickIconGrid:e.clickIconGrid,onChangeInput:e.changeInput,onClickBtn:e.clickBtn},null,8,["schema","onClickIconGrid","onChangeInput","onClickBtn"])])])]}),_:1})]}),_:1}),(0,t.bF)(u,{title:e.configModalSel.titulo,modelValue:e.openModal,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.openModal=n}),ok:e.btnOk,onSubmit:e.submit},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{class:(0,r.C4)(e.classContModal)},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{schema:e.schemaModal,ref:"formModal",key:"formModal",modal:!0},null,8,["schema"])]}),_:1},8,["class"])]}),_:1},8,["title","modelValue","ok","onSubmit"]),(0,t.bF)(u,{title:e.rowModal.titulo,modelValue:e.openModalEstado,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.openModalEstado=n}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"cont-modal-estados-fichas"},{default:(0,t.k6)(function(){return[(0,t.bF)(d,{postulante:e.rowModal},null,8,["postulante"])]}),_:1})]}),_:1},8,["title","modelValue"]),(0,t.bF)(u,{title:e.fechas.titulo,modelValue:e.fechas.open,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.fechas.open=n}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"cont-modal-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{class:"q-if-outlined",modelValue:e.fechas.itemSel,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.fechas.itemSel=n}),options:e.fechas.items,"float-label":"Fecha",onInput:n[3]||(n[3]=function(n){return e.selFecha()})},null,8,["modelValue","options"])]}),_:1})]}),_:1},8,["title","modelValue"]),(0,t.bF)(u,{title:e.modalSedes.titulo,modelValue:e.modalSedes.open,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.modalSedes.open=n}),onSubmit:e.filtrarSedes},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"full-width"},{default:(0,t.k6)(function(){return[(0,t.bF)(m,{ref:"listaSedes",selected:e.modalSedes.selected},null,8,["selected"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,t.bF)(h,{modelValue:e.configAlert.modal,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.configAlert.modal=n}),message:e.configAlert.message,title:e.configAlert.title||"",type:e.configAlert.type,"is-alert":e.configAlert.isAlert,metodo:e.configAlert.metodo},null,8,["modelValue","message","title","type","is-alert","metodo"])]}),_:1})}var l=a(76080),c=a.n(l),u=a(45254),d=a.n(u),f=(a(30683),a(71225),a(83077),a(77507),a(52133),a(10239),a(25751),a(50310),a(5962),a(90095),a(6724),a(83190),a(13715),a(80660)),m=a(10213),h=a(6123),p=a(65848),v=a(40714),g=a(61527),A=a(99326),b=a(7968),w={mixins:[p.A,v.A],components:{QSelect:h.Si,estadosFichas:g["default"],alertInscripcion:A.A,listarSedes:b.A,QPage:h.Tu,QCard:h.C$},data:function(){var e=this.init();return e.sie.grado="",e.sie.modalidad=0,e.sie.evaluacion=0,e.sie.profcod=0,e.openModalEstado=!1,e.classContModal="",e.btnOk=!1,e.fechas={open:!1,titulo:"Fechas asignadas",items:[],itemSel:null},e.configAlert={modal:!1,message:"",type:"",isAlert:!0,metodo:"",funcion:"",params:""},e.manejaSedes=!1,e.modalSedes={open:!1,titulo:"Seleccionar Sedes",selected:[]},e.labelEvaluacion="Evaluación",e.addColOportunidades=!1,e},methods:{updateGrid:function(){var e=arguments,n=this;return d()(c()().m(function a(){var t,r,o,i;return c()().w(function(a){while(1)switch(a.n){case 0:if(t=e.length>0&&void 0!==e[0]?e[0]:null,0!==n.sie.evaluacion){a.n=1;break}return a.a(2,!1);case 1:return r=n.sie.grado[0],o=n.sie.grado[1],i={anio:n.sie.ano,nivel:r,grado:o,id_evaluacion:n.sie.evaluacion,id_modalidad:n.sie.modalidad,profcod:n.sie.profcod,manejaSedes:n.manejaSedes},t&&(i.fh_evaluacion=t),n.modalSedes.selected.length>0&&(i.sedes=n.modalSedes.selected.map(function(e){return e.EMPCOD})),i.url="api/postulacionController/getPostulantesAsignaEvaluacion",i.order=[{sidx:"anio",sord:"asc"},{sidx:"instrucod",sord:"asc"},{sidx:"gradocod",sord:"asc"},{sidx:"nomcomp",sord:"asc"}],a.n=2,n.reloadGrid("formApp","GRID_1",i);case 2:return a.a(2)}},a)}))()},cboEvaluaciones:function(){var e=this;return d()(c()().m(function n(){var a,t,r;return c()().w(function(n){while(1)switch(n.n){case 0:if(a=[],!(e.sie.grado.length>1)){n.n=2;break}return t=e.sie.grado[0],r=e.sie.grado[1],n.n=1,e.getApiAction("api/postulacionController/getEvaluacionesGrado",{anio:e.sie.ano,nivel:t,grado:r,agrupar:!0});case 1:a=n.v;case 2:return n.n=3,e.setSelect({id:"ID_EVALUACION",value:"ID_EVALUACION",label:"NOMBRE",data:a,item:null,limpiar:!0});case 3:e.sie.evaluacion=0;case 4:return n.a(2)}},n)}))()},cboPersonal:function(){var e=this;return d()(c()().m(function n(){var a,t;return c()().w(function(n){while(1)switch(n.n){case 0:if(!(e.sie.evaluacion>0)){n.n=2;break}return n.n=1,e.getApiAction("api/postulacionController/getPersonalEvaluacion",{anio:e.sie.ano,id_evaluacion:e.sie.evaluacion});case 1:t=n.v,n.n=3;break;case 2:t=[];case 3:return a=t,n.n=4,a.push({PROFCOD:"SIN_PERSONAL",PERSONAL:"Sin personal asignado"});case 4:return n.n=5,e.setSelect({id:"PROFCOD",value:"PROFCOD",label:"PERSONAL",data:a,item:{PROFCOD:0,PERSONAL:"Todos los registros"},limpiar:!0});case 5:e.sie.profcod=0;case 6:return n.a(2)}},n)}))()},filtrarDatos:function(e,n,a){var t=this;return d()(c()().m(function n(){var r,o,i;return c()().w(function(n){while(1)switch(n.n){case 0:r=""!==e[a]?e[a]:0,o=""!==e[a],i=a,n.n="ID_GRADO"===i?1:"ID_MODALIDAD"===i?5:"ID_EVALUACION"===i?6:"PROFCOD"===i?8:"BUTTON_1"===i?9:10;break;case 1:return t.sie.grado=r,n.n=2,t.limpiarGrid("formApp","GRID_1");case 2:return n.n=3,t.cboEvaluaciones();case 3:return n.n=4,t.cboPersonal();case 4:return o=!1,n.a(3,10);case 5:return t.sie.modalidad=r,n.a(3,10);case 6:return t.sie.evaluacion=r,n.n=7,t.cboPersonal();case 7:return n.a(3,10);case 8:return t.sie.profcod=r,n.a(3,10);case 9:return o=!0,n.a(3,10);case 10:o&&t.$nextTick(d()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.updateGrid();case 1:return e.a(2)}},e)})));case 11:return n.a(2)}},n)}))()},selFecha:function(){var e=this;return d()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.updateGrid(e.fechas.itemSel);case 1:e.fechas.open=!1;case 2:return n.a(2)}},n)}))()},modalFechas:function(e,n,a){var t=this;return d()(c()().m(function e(){var n,a,r;return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.$refs["formApp"].rows["GRID_1"];case 1:n=e.v,a=[],n.forEach(function(e){e.FH_EVALUACION&&a.push({value:e.FH_EVALUACION,label:e.FECHA_EVALUACION})}),r=a.filter(function(e,n){return n===a.findIndex(function(n){return n.value===e.value})}),r.sort(function(e,n){var a=new Date(e.value).getTime(),t=new Date(n.value).getTime();return a-t}),t.fechas.items=t.sieSelectOptions(r,"value","label"),t.fechas.itemSel=null,t.fechas.open=!0;case 2:return e.a(2)}},e)}))()},validarSeleccion:function(e){var n=this;return d()(c()().m(function a(){var t,r;return c()().w(function(a){while(1)switch(a.n){case 0:return t=e.filter(function(e){return e.ID_CRONOGRAMA_NOTA>0}),t.length>0&&(r=t.map(function(e){return e.NOMCOMP}).join("<br>"),n.configAlert={modal:!0,message:"No puede seleccionar a los siguientes postulantes ya que las evaluaciones poseen notas: <br>"+r,type:"warning",isAlert:!0}),a.a(2,0===t.length)}},a)}))()},modalAsignarEvaluaciones:function(e){var n=this;return d()(c()().m(function a(){var t,r;return c()().w(function(a){while(1)switch(a.n){case 0:if(!(n.sie.evaluacion>0)){a.n=6;break}return a.n=1,n.$refs["formApp"].$refs["GRID_1"].selected;case 1:if(t=a.v,!(t.length>0)){a.n=4;break}return a.n=2,n.validarSeleccion(t);case 2:if(r=a.v,!r){a.n=3;break}return n.classContModal="cont-modal-sm",n.btnOk="GRABAR",a.n=3,n.runModal({postulantes:t},e.params.view,"I");case 3:a.n=5;break;case 4:n.$notify("Debe seleccionar al menos un(1) registro","warning");case 5:a.n=7;break;case 6:n.$notify("Debe seleccionar una evaluación","warning");case 7:return a.a(2)}},a)}))()},modalNotificarEvaluaciones:function(e){var n=this;return d()(c()().m(function a(){return c()().w(function(a){while(1)switch(a.n){case 0:if(!(n.sie.grado.length>1)){a.n=2;break}return n.classContModal="cont-modal-lg",n.btnOk="ENVIAR",a.n=1,n.runModal(null,e.params.view,"I");case 1:a.n=3;break;case 2:n.$notify("Debe seleccionar un grado","warning");case 3:return a.a(2)}},a)}))()},modalCronogramaIncompleto:function(e){var n=this;return d()(c()().m(function a(){return c()().w(function(a){while(1)switch(a.n){case 0:if(!(n.sie.grado.length>1)){a.n=2;break}return n.classContModal="cont-modal-lg",n.btnOk=!1,a.n=1,n.runModal(null,e.params.view,"I");case 1:a.n=3;break;case 2:n.$notify("Debe seleccionar un grado","warning");case 3:return a.a(2)}},a)}))()},verEstado:function(e,n,a){var t=this;return d()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:e.titulo="Estado - "+e.NOMCOMP,t.rowModal=e,t.openModalEstado=!0;case 1:return n.a(2)}},n)}))()},preSubmit:function(e){var n=!0;switch(e.manejaSedes=this.manejaSedes,this.configModalSel.codigoFormulario){case"admNotificarEval":var a=this.$refs["formModal"].$refs["GRID_2"].selected;e={rows:a,labelEvaluacion:this.labelEvaluacion},0===a.length&&(this.$notify("Debe seleccionar al menos un(1) postulante","warning"),n=!1);break}return{res:n,data:e}},postSubmit:function(e){var n=this;return d()(c()().m(function e(){var a;return c()().w(function(e){while(1)switch(e.n){case 0:a=n.configModalSel.codigoFormulario,e.n="admProcAsignaEval"===a?1:3;break;case 1:return e.n=2,n.updateGrid();case 2:return e.a(3,3);case 3:return e.a(2)}},e)}))()},eliminarEvaluaciones:function(e){var n=this;return d()(c()().m(function e(){var a,t;return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.$refs["formApp"].$refs["GRID_1"].selected;case 1:if(a=e.v,!(a.length>0)){e.n=3;break}return e.n=2,n.validarSeleccion(a);case 2:t=e.v,t&&(0,m.confirm)("¿Está seguro de realizar la eliminación?","add").onOk(function(){f.$http.post("api/postulacionController/eliminarEvaluaciones",{postulantes:a}).then(function(){var e=d()(c()().m(function e(a){return c()().w(function(e){while(1)switch(e.n){case 0:return n.$notify(a.message,"success"),e.n=1,n.updateGrid();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){n.$notify(e.error.message,"warning")})}),e.n=4;break;case 3:n.$notify("Debe seleccionar al menos un(1) registro","warning");case 4:return e.a(2)}},e)}))()}},created:function(){var e=this;return d()(c()().m(function n(){var a,t,r;return c()().w(function(n){while(1)switch(n.n){case 0:return a=[{id:"viewAdmAsignaEval",ref:"formApp"}],n.n=1,e.loadSchemas(a);case 1:return n.n=2,e.getConstantesAdmision(["AD_MANEJA_SEDES","AD_MAX_OPORTUNIDADES"]);case 2:if(t=n.v,e.manejaSedes=t.AD_MANEJA_SEDES,e.addColOportunidades=t.AD_MAX_OPORTUNIDADES>1,e.manejaSedes&&e.$nextTick(d()(c()().m(function n(){var a;return c()().w(function(n){while(1)switch(n.n){case 0:return a={label:"Sedes",icon:"add_location",click:e.verSedes,params:{view:"viewAdmAsignaEval"}},e.botonesForm=e.botonesForm.concat(a),n.n=1,e.addcolGrid({schema:"viewAdmAsignaEval",index:6,name:"EMPDES",label:"Sede",align:"left"});case 1:return n.a(2)}},n)}))),!e.addColOportunidades){n.n=3;break}return n.n=3,e.addcolGrid({schema:"viewAdmAsignaEval",index:6,name:"NRO_OPORTUNIDAD",label:"#Oportunidad",align:"center",posi:-1});case 3:return n.n=4,e.getParametrosAdmision(["LABEL_IDENTIFICACION_EVAL"]);case 4:r=n.v,e.labelEvaluacion=r.LABEL_IDENTIFICACION_EVAL;case 5:return n.a(2)}},n)}))()}},E=a(12807);const S=(0,E.A)(w,[["render",s]]);var k=S}}]);