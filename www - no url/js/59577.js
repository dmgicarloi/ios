"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[59577],{59577:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});n(30683);var l=n(61758),a=n(58790),o={class:"row bg-white"},i={class:"col-md-6 col-xs-12"},r={class:"col-md-3 col-xs-6 q-py-sm q-pr-sm border-bottom"},u={class:"col-md-3 col-xs-6 q-py-sm q-pr-sm border-bottom"},s={key:1,class:"row"},c={key:0,class:"col-12 q-pa-sm"},d={key:2,class:"col row overflow-auto"},f={key:0};function b(e,t){var n=(0,l.g2)("header-btn"),b=(0,l.g2)("q-icon"),m=(0,l.g2)("q-item-main"),p=(0,l.g2)("q-item"),O=(0,l.g2)("q-list"),v=(0,l.g2)("q-popover"),_=(0,l.g2)("q-btn"),h=(0,l.g2)("q-toolbar"),k=(0,l.g2)("sie-estudiantes"),F=(0,l.g2)("sie-select"),I=(0,l.g2)("q-chip"),g=(0,l.g2)("sie-usuario"),y=(0,l.g2)("q-item-side"),A=(0,l.g2)("q-card-main"),P=(0,l.g2)("q-card-separator"),C=(0,l.g2)("q-card-actions"),T=(0,l.g2)("q-card"),q=(0,l.g2)("sie-vacio"),E=(0,l.g2)("modal-detalle"),R=(0,l.g2)("q-page"),w=(0,l.gN)("close-overlay");return(0,l.uX)(),(0,l.Wv)(R,{class:"column estudiante-incidencias bg-white"},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{"is-name-menu":"",buttons:e.buttons},null,8,["buttons"]),e.isGreater?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(h,{key:0,class:"q-toolbar-menu fixed-top q-pt-sm",style:{width:"80%",left:"20%"},color:"primary"},{default:(0,l.k6)(function(){return[t[7]||(t[7]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.bF)(_,{round:"",flat:"",dense:"",icon:"more_vert"},{default:(0,l.k6)(function(){return[(0,l.bF)(v,{anchor:"top right",self:"top right"},{default:(0,l.k6)(function(){return[(0,l.bF)(O,{class:"no-border",link:""},{default:(0,l.k6)(function(){return[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(p,{onClick:t[0]||(t[0]=function(t){return e.order("asc")})},{default:(0,l.k6)(function(){return[(0,l.bF)(b,{class:"q-pr-lg",name:"arrow_upward"}),(0,l.bF)(m,{label:"Ascendente"})]}),_:1})),[[w]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(p,{onClick:t[1]||(t[1]=function(t){return e.order("desc")})},{default:(0,l.k6)(function(){return[(0,l.bF)(b,{class:"q-pr-lg",name:"arrow_downward"}),(0,l.bF)(m,{label:"Descendente"})]}),_:1})),[[w]])]}),_:1})]}),_:1})]}),_:1})]}),_:1})),(0,l.Lk)("div",o,[(0,l.Lk)("div",i,[(0,l.bF)(k,{onSelected:e.getSelect,data:e.options,modelValue:e.alucod,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.alucod=t})},null,8,["onSelected","data","modelValue"])]),(0,l.Lk)("div",r,[(0,l.bF)(F,{noBottom:"",type:"outlined",modelValue:e.filtro,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.filtro=t}),options:e.optionsDM,label:"label",val:"value",placeholder:"filtrar"},null,8,["modelValue","options"])]),(0,l.Lk)("div",u,[(0,l.bF)(F,{noBottom:"",type:"outlined",modelValue:e.periodoActual,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.periodoActual=t}),options:e.periodos,label:"label",val:"value",placeholder:e.$t("periodo")},null,8,["modelValue","options","placeholder"])])]),e.data.length>0?((0,l.uX)(),(0,l.CE)("div",s,[e.chipsMeritoDemerito?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(I,{color:"positive"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(e.meritos),1)]}),_:1}),(0,l.bF)(I,{color:"negative"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(e.demeritos),1)]}),_:1})])):(0,l.Q3)("v-if",!0)])):(0,l.Q3)("v-if",!0),e.data.length>0?((0,l.uX)(),(0,l.CE)("div",d,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.data,function(t,n){return(0,l.uX)(),(0,l.CE)("div",{key:n,class:"col-xs-12 col-sm-6 col-md-4 col-xl-3 q-pa-sm q-pl-none"},[(0,l.bF)(T,{style:{"min-height":"170px"}},{default:(0,l.k6)(function(){return[t.BCOLOR?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"etiqueta",style:(0,a.Tr)({"border-right-color":t.BCOLOR,"border-top-color":t.BCOLOR})},[t.ON_PUNTAJE?((0,l.uX)(),(0,l.CE)("span",f,(0,a.v_)("".concat(t.CONSIG).concat(t.CONPUN)),1)):(0,l.Q3)("v-if",!0)],4)):(0,l.Q3)("v-if",!0),(0,l.bF)(A,null,{default:(0,l.k6)(function(){return[(0,l.bF)(O,{"no-border":""},{default:(0,l.k6)(function(){return[(0,l.bF)(p,null,{default:(0,l.k6)(function(){return[(0,l.bF)(y,null,{default:(0,l.k6)(function(){return[(0,l.bF)(g,{usucod:t.USUCOD},null,8,["usucod"])]}),_:2},1024),(0,l.bF)(m,{class:"text-bold q-body-1"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(t.PROFESOR),1)]}),_:2},1024)]}),_:2},1024),(0,l.bF)(p,null,{default:(0,l.k6)(function(){return[(0,l.bF)(y,{icon:"date_range"}),(0,l.bF)(m,{class:"q-body-1"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(e.date(t.FECREG,"DD-MM-YYYY HH:mm:ss a")),1)]}),_:2},1024)]}),_:2},1024),(0,l.bF)(p,null,{default:(0,l.k6)(function(){return[(0,l.bF)(y,{icon:"daily_calendar"}),(0,l.bF)(m,{class:"q-body-1"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(e.perido[t.BIMECOD]),1)]}),_:2},1024)]}),_:2},1024),t.PAPCOD?((0,l.uX)(),(0,l.Wv)(p,{key:0},{default:(0,l.k6)(function(){return[(0,l.bF)(y,{style:(0,a.Tr)({color:t.COLOR}),icon:"brightness_1"},null,8,["style"]),(0,l.bF)(m,{label:t.PAPELETA},null,8,["label"])]}),_:2},1024)):(0,l.Q3)("v-if",!0),t.TIPOINC||t.TIPOFALTA?((0,l.uX)(),(0,l.Wv)(p,{key:1},{default:(0,l.k6)(function(){return[(0,l.bF)(y,{icon:"vertical_align_center"}),t.TIPOINC?((0,l.uX)(),(0,l.Wv)(m,{key:1,class:"q-body-1"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)("-"===t.CONSIG?t.ON_FORMATO_X_TIPO?e.$t("demerito")+" "+t.TIPOFALTA:e.$t("demerito")+" ("+t.TIPOFALTA+")":t.ON_FORMATO_X_TIPO?t.TIPOMERITO?t.TIPOMERITO:e.$t("merito"):e.$t("merito")+(t.TIPOMERITO?" ("+t.TIPOMERITO+")":"")),1)]}),_:2},1024)):((0,l.uX)(),(0,l.Wv)(m,{key:0,class:"q-body-1"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)("-"===t.CONSIG?e.$t("demerito"):e.$t("merito")),1)]}),_:2},1024))]}),_:2},1024)):(0,l.Q3)("v-if",!0),t.ON_MOSTRAR_NIVEL?((0,l.uX)(),(0,l.Wv)(p,{key:2,multiline:""},{default:(0,l.k6)(function(){return[(0,l.bF)(m,{class:"q-body-1",label:t.NOTADES,"label-lines":"2"},null,8,["label"])]}),_:2},1024)):((0,l.uX)(),(0,l.Wv)(p,{key:3,multiline:""},{default:(0,l.k6)(function(){return[(0,l.bF)(m,{class:"q-body-1",label:t.CONDES,"label-lines":"2"},null,8,["label"])]}),_:2},1024))]}),_:2},1024)]}),_:2},1024),(0,l.bF)(P),(0,l.bF)(C,{class:"column col items-end justify-end q-py-sm"},{default:(0,l.k6)(function(){return[(0,l.bF)(_,{color:"primary",label:e.$t("detalle"),"no-caps":"",onClick:function(n){return e.loadDetalle(t)}},null,8,["label","onClick"])]}),_:2},1024)]}),_:2},1024)])}),128))])):((0,l.uX)(),(0,l.Wv)(q,{key:3,class:"col",icon:"wallpaper",title:"mensajes.m0000"})),(0,l.bF)(E,{data:e.detalle,"onUpdate:data":t[5]||(t[5]=function(t){return e.detalle=t}),opened:e.open,"onUpdate:opened":t[6]||(t[6]=function(t){return e.open=t})},null,8,["data","opened"])]}),_:1})}var m=n(76080),p=n.n(m),O=n(45254),v=n.n(O),_=(n(50310),n(90095),n(83190),n(13715),n(6123)),h=n(24974),k=n(93616),F=n(80660),I=n(18105),g=n(80340),y=n(57668),A=n(92173),P=n(8445),C=n.n(P),T=(n(56285),{class:"row q-pb-sm"});function q(e,t){var n=(0,l.g2)("sie-usuario"),o=(0,l.g2)("q-item-side"),i=(0,l.g2)("q-item-main"),r=(0,l.g2)("q-item"),u=(0,l.g2)("q-download-file"),s=(0,l.g2)("q-list"),c=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(c,{class:"detalle-incidencia",modelValue:e.open,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.open=t}),title:e.$t("detalleIncidencia"),header:!0,footer:!1},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",T,[(0,l.bF)(s,{class:"full-width","no-border":""},{default:(0,l.k6)(function(){return[(0,l.bF)(r,null,{default:(0,l.k6)(function(){return[(0,l.bF)(o,null,{default:(0,l.k6)(function(){return[(0,l.bF)(n,{profcod:e.detail.PROFCOD},null,8,["profcod"])]}),_:1}),(0,l.bF)(i,{class:"q-body-1",label:e.$t("profesor"),sublabel:e.detail.PROFESOR},null,8,["label","sublabel"])]}),_:1}),e.detail.CURSONOM?((0,l.uX)(),(0,l.Wv)(r,{key:0},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"text-center",icon:"dictionary"}),(0,l.bF)(i,{class:"q-body-1",label:e.$t("curso"),sublabel:e.detail.CURSONOM},null,8,["label","sublabel"])]}),_:1})):(0,l.Q3)("v-if",!0),(0,l.bF)(r,null,{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"text-center",icon:"date_range"}),(0,l.bF)(i,{class:"q-body-1",label:e.$t("fechaHora"),sublabel:e.date(e.detail.FECREG,"DD-MM-YYYY HH:mm:ss a")},null,8,["label","sublabel"])]}),_:1}),(0,l.bF)(r,null,{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"text-center",icon:"daily_calendar"}),(0,l.bF)(i,{class:"q-body-1",label:e.$t("periodo"),sublabel:e.detail.BIMECOD+" Periodo"},null,8,["label","sublabel"])]}),_:1}),e.detail.PAPCOD?((0,l.uX)(),(0,l.Wv)(r,{key:1},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"text-center",style:(0,a.Tr)({color:e.detail.COLOR}),icon:"brightness_1"},null,8,["style"]),(0,l.bF)(i,{label:"Papeleta",sublabel:e.detail.PAPELETA},null,8,["sublabel"])]}),_:1})):(0,l.Q3)("v-if",!0),e.detail.CONSIG?((0,l.uX)(),(0,l.Wv)(r,{key:2},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"text-center",icon:"vertical_align_center"}),(0,l.bF)(i,{class:"q-body-1",label:"-"===e.detail.CONSIG?e.detail.ON_FORMATO_X_TIPO?e.$t("demerito")+" "+e.detail.TIPOFALTA:e.$t("demerito")+" ("+e.detail.TIPOFALTA+")":e.detail.ON_FORMATO_X_TIPO?e.detail.TIPOMERITO?e.detail.TIPOMERITO:e.$t("merito"):e.$t("merito")+(e.detail.TIPOMERITO?" ("+e.detail.TIPOMERITO+")":"")},null,8,["label"])]}),_:1})):(0,l.Q3)("v-if",!0),e.detail.ON_MOSTRAR_NIVEL?((0,l.uX)(),(0,l.Wv)(r,{key:3,multiline:""},{default:(0,l.k6)(function(){return[(0,l.bF)(i,{class:"q-body-1",label:e.$t("incidencia"),sublabel:e.detail.NOTADES},null,8,["label","sublabel"])]}),_:1})):((0,l.uX)(),(0,l.Wv)(r,{key:4,multiline:""},{default:(0,l.k6)(function(){return[(0,l.bF)(i,{class:"q-body-1",label:e.$t("incidencia"),sublabel:e.detail.CONDES+e.detail.TIPOMEDIDA},null,8,["label","sublabel"])]}),_:1})),e.detail.ON_NO_MOSTRAR_OBSERVACION?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(r,{key:5,multiline:""},{default:(0,l.k6)(function(){return[(0,l.bF)(i,{class:"q-body-1",label:e.$t("observaciones"),sublabel:e.detail.OBSERVACION},null,8,["label","sublabel"])]}),_:1})),e.detail.DESCRIPCION?((0,l.uX)(),(0,l.Wv)(r,{key:6,multiline:""},{default:(0,l.k6)(function(){return[(0,l.bF)(i,{class:"q-body-1",label:"Consecuencias",sublabel:e.detail.DESCRIPCION},null,8,["sublabel"])]}),_:1})):(0,l.Q3)("v-if",!0),e.detail.RUTA?((0,l.uX)(),(0,l.Wv)(r,{key:7},{default:(0,l.k6)(function(){return[(0,l.bF)(i,{class:"q-body-1"},{default:(0,l.k6)(function(){return C()(t[1]||(t[1]=[(0,l.Lk)("span",{class:"text-bold"},"Adjuntos",-1)]))}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0),e.detail.RUTA?((0,l.uX)(),(0,l.Wv)(r,{key:8},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{src:e.detail.src,name:e.detail.name,inline:!1},null,8,["src","name"])]}),_:1})):(0,l.Q3)("v-if",!0)]}),_:1})])]}),_:1},8,["modelValue","title"])}var E=n(34262),R=n(62006),w=n(30640),M=n(34550),N={emits:["update:opened","update:data"],name:"modalDetalle",components:{QIcon:E.A,QDownloadFile:R.A,sieModal:w.A,SieUsuario:h.A,sieInfo:y["default"],QList:_.Mb,QItem:_.H0,QItemSide:_.n1,QItemMain:_.mF},data:function(){return{enterAnimation:"animated faster slideInRight",leaveAnimation:"animated faster slideOutRight",sie:(0,y["default"])()}},props:{opened:{type:Boolean},data:{type:Object,default:{},required:!0}},computed:{open:{get:function(){return this.opened},set:function(e){this.$emit("update:opened",e)}},detail:{get:function(){return this.data},set:function(e){this.$emit("update:data",e)}}},methods:{date:I.Ay},watch:{opened:function(e){!0===e&&(this.detail.name=(0,M.cleanNameFile)(this.detail.NOMBRE),this.detail.src="".concat(this.sie.api,"/HyoPDiarios/archivo/").concat(this.detail.ID,"/").concat(this.detail.NOMBRE,"?access_token=").concat(this.sie.token))}}},Q=n(12807);const S=(0,Q.A)(N,[["render",q]]);var D=S,X=n(47035),$=n(99637),W=n(33001),L=n(81288),U={getConfiguracion:function(){return v()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,F.$http.get("api/muro/getConfiguracion",{params:{params:{dato:null}}}))}},e)}))()},getPeriodos:function(){return v()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,F.$http.post("api/muro/getPeriodos"))}},e)}))()}},V={components:{QSelect:_.Si,QChip:_.wQ,sieSelect:k.A,SieUsuario:h.A,sieVacio:g.A,QWindowResizeObservable:_.dC,sieEstudiantes:A.Ay,modalDetalle:D,QPageSticky:_._U,QFab:_.l6,QFabAction:_.B$,QPopover:_.VM,QPage:_.Tu,QToolbar:_.ZV,QBtn:_.Il,QList:_.Mb,QItem:_.H0,QIcon:_.bP,QItemMain:_.mF,QCard:_.C$,QCardMain:_.d1,QItemSide:_.n1,QCardSeparator:_.d6,QCardActions:_.zZ},data:function(){var e=this;return{sie:(0,y["default"])(),alucod:"",maxLength:60,descripcion:0,select:"",open:!1,options:[],dataProf:[],selectAlu:{},detalle:{},perido:{1:"I "+this.$t("periodo"),2:"II "+this.$t("periodo"),3:"III "+this.$t("periodo"),4:"IV "+this.$t("periodo")},periodos:[],periodoActual:null,count:0,filtro:"T",optionsDM:[],constantes:{},buttons:[{icon:"arrow_upward",label:"Ascendente",click:function(){e.order("asc")}},{icon:"arrow_downward",label:"Descendente",click:function(){e.order("desc")}}]}},computed:{isGreater:function(){return(0,L.isGreater)()},data:function(){var e=this.dataProf;return"T"!==this.filtro&&(e=(0,W.filterArray)(this.filtro,{field:"CONSIG",list:e})),"T"!==this.periodoActual&&(e=(0,W.filterArray)(this.periodoActual,{field:"BIMECOD",list:e})),e},chipsMeritoDemerito:function(){var e=!1;return this.dataProf.forEach(function(t){t.ON_CHIP_MERITO_DEMERITO&&(e=!0)}),e},meritos:function(){var e=0;return(0,$["default"])(this.dataProf,function(t){"+"===t.CONSIG&&(e+=t.CONPUN)}),"MÉRITOS: ".concat(e?"+"+e:"0"," Puntos")},demeritos:function(){var e=0;return(0,$["default"])(this.dataProf,function(t){"-"===t.CONSIG&&(e+=t.CONPUN)}),"DEMÉRITOS: ".concat(e?"-"+e:"0"," Puntos")}},methods:{date:I.Ay,getAlumnos:function(){return F.$http.get("api/HyoAlumnos/listarAlumnosHijos",{params:{parametros:{matriculado:"S"}}}).then(function(e){return e})},getSelect:function(e){var t=this;this.selectAlu=e,F.$http.get("api/HyoPDiarios/obtIncidencias",{params:{parametros:{alucod:e.ALUCOD,periodo:this.periodoActual}}}).then(function(e){t.dataProf=e.json,t.initialProf=[],t.initialProf=t.initialProf.concat(e.json)})},loadDetalle:function(e){this.detalle=e,this.open=!0},order:function(e){this.dataProf=(0,X["default"])(this.dataProf,e,"FECREG")},getPeriodos:function(){var e=this;return v()(p()().m(function t(){var n,l,a;return p()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,U.getPeriodos();case 1:n=t.v,l=n.periodos,a=n.periodoActual,e.periodos=l,e.periodoActual=a;case 2:return t.a(2)}},t)}))()},changePeriodo:function(){var e=this;return v()(p()().m(function t(){return p()().w(function(t){while(1)switch(t.n){case 0:e.data=[];case 1:return t.a(2)}},t)}))()},getInit:function(){var e=this;return v()(p()().m(function t(){var n;return p()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,U.getConfiguracion();case 1:n=t.v,e.optionsDM=[{label:"Todos",value:"T"},{label:n.lblMerito,value:"+"},{label:n.lblDemerito,value:"-"}];case 2:return t.a(2)}},t)}))()}},created:function(){var e=this;return v()(p()().m(function t(){return p()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getInit();case 1:return t.n=2,e.getPeriodos();case 2:return t.a(2)}},t)}))()}};const x=(0,Q.A)(V,[["render",b]]);var B=x}}]);