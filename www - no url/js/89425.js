"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[89425],{89425:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(61758),o={class:"row"},i={class:"col-xs-12"},a={class:"row q-pa-sm q-col-gutter-sm"},l={class:"col-xs-12 col-sm-6"},s={class:"col-xs-12 col-sm-6"},u={class:"col-xs-12"},c={class:"col-xs-12 col-sm-6 column items-center"},m={class:"col-xs-12 col-sm-6 column items-center"};function f(e,n){var t=this,f=(0,r.g2)("header-btn"),O=(0,r.g2)("sie-table"),M=(0,r.g2)("q-card-section"),d=(0,r.g2)("q-card"),v=(0,r.g2)("q-input"),R=(0,r.g2)("q-select"),p=(0,r.g2)("q-checkbox"),h=(0,r.g2)("q-form"),D=(0,r.g2)("sie-modal"),A=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(A,{class:"q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(d,{flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(f,{name:"Mantenimiento Movimiento",buttons:e.buttons},null,8,["buttons"]),(0,r.bF)(M,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",o,[(0,r.Lk)("div",i,[(0,r.bF)(O,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableMovalmti",onRowSelected:e.rowSelectMovalmti,css:"height:calc(100vh - 150px)",context:t},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,r.bF)(D,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Movimiento":"Modificar Movimiento",onSubmit:e.saveAcccion},{default:(0,r.k6)(function(){return[(0,r.bF)(h,{ref:"refForm"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",a,[(0,r.Lk)("div",l,[(0,r.bF)(v,{modelValue:e.form.CODMOV,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.CODMOV=n}),maxlength:"3",label:"Movimiento",rules:[e.required]},null,8,["modelValue","rules"])]),(0,r.Lk)("div",s,[(0,r.bF)(R,{modelValue:e.form.TIPMOV,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.TIPMOV=n}),options:e.movimientos,label:"Tipo Movimiento",rules:[e.required]},null,8,["modelValue","options","rules"])]),(0,r.Lk)("div",u,[(0,r.bF)(v,{type:"textarea",counter:"",modelValue:e.form.MOVDES,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.form.MOVDES=n}),label:"Descripción",rules:[e.required]},null,8,["modelValue","rules"])]),(0,r.Lk)("div",c,[(0,r.bF)(p,{dense:"",modelValue:e.form.EXOKAR,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.form.EXOKAR=n}),"true-value":"S","false-value":"N",label:"Exokart"},null,8,["modelValue"])]),(0,r.Lk)("div",m,[(0,r.bF)(p,{dense:"",modelValue:e.form.TRAINT,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.form.TRAINT=n}),"true-value":"S","false-value":"N",label:"Traint"},null,8,["modelValue"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var O=t(57008),M=t.n(O),d=t(76080),v=t.n(d),R=t(45254),p=t.n(R),h=(t(89571),t(6123)),D={data:function(){return{config:{TIPMOV:{component:"select",options:[],input:function(e,n,t){var r=this;return p()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.p=e.n){case 0:return n.TIPMOVPREV=t,e.p=1,e.n=2,r.updateMovalmti(n);case 2:return e.a(2,!0);case 3:return e.p=3,e.v,e.a(2,!1)}},e,null,[[1,3]])}))()}},MOVDES:{component:"input",autoFocus:!0,input:function(e,n){var t=this;return p()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.updateMovalmti(n);case 1:return e.a(2,!0);case 2:return e.p=2,e.v,e.a(2,!1)}},e,null,[[0,2]])}))()}},EXOKAR:{renderHtml:function(e,n,t){return t.checkbox({trueValue:"S",value:e.EXOKAR})},renderAction:function(e,n){var t=this;return p()(v()().m(function e(){var r;return v()().w(function(e){while(1)switch(e.p=e.n){case 0:return r=n.EXOKAR,"S"===n.EXOKAR?n.EXOKAR="N":n.EXOKAR="S",e.p=1,e.n=2,t.updateMovalmti(n);case 2:e.n=4;break;case 3:e.p=3,e.v,n.EXOKAR=r;case 4:return e.a(2)}},e,null,[[1,3]])}))()}},TRAINT:{renderHtml:function(e,n,t){return t.checkbox({trueValue:"S",value:e.TRAINT})},renderAction:function(e,n){var t=this;return p()(v()().m(function e(){var r;return v()().w(function(e){while(1)switch(e.p=e.n){case 0:return r=n.TRAINT,"S"===n.TRAINT?n.TRAINT="N":n.TRAINT="S",e.p=1,e.n=2,t.updateMovalmti(n);case 2:e.n=4;break;case 3:e.p=3,e.v,n.TRAINT=r;case 4:return e.a(2)}},e,null,[[1,3]])}))()}},ACTION:{component:"button",icon:["delete as eliminar"],editar:function(e,n){var t=this;return p()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return t.rowMovalmti=n,e.n=1,t.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var t=this;return p()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return t.rowMovalmti=n,e.n=1,t.deleteMovalmti();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"TIPMOV",label:"Movimiento",field:"TIPMOV",align:"center",sortable:!0},{name:"CODMOV",label:"Código",field:"CODMOV",align:"center",sortable:!0},{name:"MOVDES",label:"Descripción",field:"MOVDES",align:"left",sortable:!0},{name:"EXOKAR",label:"Exokart",field:"EXOKAR",align:"center",sortable:!0},{name:"TRAINT",label:"Traint",field:"TRAINT",align:"center",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:100}]}}},A=t(39893),w=t(81288),E=t(2739),T=t(9736),V=t(16648),b=t(3112),g=t(88567),C=t(95718),N=t(43136),I={mixins:[D,N.initialConfig],components:{QForm:E.A,QInput:T.A,QSelect:V.A,QCheckbox:b.A,QCard:g.A,QCardSection:C.A,QPage:h.Tu},data:function(){return{required:A.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowMovalmti:null,movimientos:[{label:"ingreso",value:"I"},{label:"Salida",value:"S"}],form:{CODMOV:null,TIPMOV:null,MOVDES:null,EXOKAR:"N",TRAINT:"N",DOCCOD:null,ALMORD:null,DOCREFOR:null,NUMSERDO:null,NUMDOCOR:null,AUXORD:null,NUMGUIOR:null}}},methods:{openAgregar:function(){this.action="create",this.rowMovalmti=null,(0,w.clear)(this.form),this.form.EXOKAR="N",this.form.TRAINT="N",this.openAdd=!0},openActualizar:function(){this.rowMovalmti?(this.action="update",this.form.MOVDES=this.rowMovalmti.MOVDES,this.form.EXOKAR=this.rowMovalmti.EXOKAR,this.form.TRAINT=this.rowMovalmti.TRAINT,this.form.DOCCOD=this.rowMovalmti.DOCCOD,this.form.ALMORD=this.rowMovalmti.ALMORD,this.form.DOCREFOR=this.rowMovalmti.DOCREFOR,this.form.NUMSERDO=this.rowMovalmti.NUMSERDO,this.form.NUMDOCOR=this.rowMovalmti.NUMDOCOR,this.form.AUXORD=this.rowMovalmti.AUXORD,this.form.NUMGUIOR=this.rowMovalmti.NUMGUIOR,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return p()(v()().m(function n(){var t,r,o;return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(t=n.v,t){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:r=n.v,r&&e.createMovalmti(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:o=n.v,o&&e.updateMovalmti();case 6:return n.a(2)}},n)}))()},rowSelectMovalmti:function(e,n){this.rowMovalmti=n},createMovalmti:function(){var e=this;return p()(v()().m(function n(){var t,r,o,i,a,l;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,t=M()({},e.form),t.EMPCOD=e.empcod,n.n=1,e.$http.post("api/HyoMovimientos/createMovimiento",{params:t});case 1:r=n.v,o=r.result,i=r.message,a={CODMOV:o.CODMOV,EMPCOD:o.EMPCOD,TIPMOV:o.TIPMOV,MOVDES:e.form.MOVDES,EXOKAR:e.form.EXOKAR,TRAINT:e.form.TRAINT,DOCCOD:e.form.DOCCOD,ALMORD:e.form.ALMORD,DOCREFOR:e.form.DOCREFOR,NUMSERDO:e.form.NUMSERDO,NUMDOCOR:e.form.NUMDOCOR,AUXORD:e.form.AUXORD,NUMGUIOR:e.form.NUMGUIOR},e.rows.unshift(a),e.openAdd=!1,e.$notify(i,"success"),n.n=3;break;case 2:n.p=2,l=n.v,e.$notify(l.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readMovalmti:function(){var e=this;return p()(v()().m(function n(){var t,r;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/HyoMovimientos/readMovimiento",{params:{empcod:e.empcod}});case 1:t=n.v,e.rows=t,n.n=3;break;case 2:n.p=2,r=n.v,e.$notify(r.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deleteMovalmti:function(){var e=this;return p()(v()().m(function n(){var t,r,o,i;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowMovalmti){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(t=n.v,!t){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/HyoMovimientos/deleteMovimiento",{params:{codmov:e.rowMovalmti.CODMOV,empcod:e.rowMovalmti.EMPCOD,tipmov:e.rowMovalmti.TIPMOV}});case 4:r=n.v,o=r.message,e.rows.splice(e.rows.indexOf(e.rowMovalmti),1),e.rowMovalmti=null,e.$notify(o,"success"),n.n=6;break;case 5:n.p=5,i=n.v,e.$notify(i.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateMovalmti:function(){var e=arguments,n=this;return p()(v()().m(function t(){var r,o,i,a,l;return v()().w(function(t){while(1)switch(t.p=t.n){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:{},t.p=1,o=n.$refs.tableMovalmti,t.n=2,n.$http.put("api/HyoMovimientos/updateMovimiento",{empcod:r.EMPCOD||n.form.EMPCOD,tipmov:r.TIPMOVPREV||r.TIPMOV||n.form.TIPMOV,codmov:r.CODMOV||n.form.CODMOV,params:{MOVDES:r.MOVDES||n.form.MOVDES,EXOKAR:r.EXOKAR||n.form.EXOKAR,TRAINT:r.TRAINT||n.form.TRAINT,TIPMOV:r.TIPMOV||n.form.TIPMOV,DOCCOD:r.DOCCOD||n.form.DOCCOD,ALMORD:r.ALMORD||n.form.ALMORD,DOCREFOR:r.DOCREFOR||n.form.DOCREFOR,NUMSERDO:r.NUMSERDO||n.form.NUMSERDO,NUMDOCOR:r.NUMDOCOR||n.form.NUMDOCOR,AUXORD:r.AUXORD||n.form.AUXORD,NUMGUIOR:r.NUMGUIOR||n.form.NUMGUIOR}});case 2:i=t.v,a=i.message,n.openAdd=!1,delete r.TIPMOVPREV,o.updateRow(n.rowMovalmti,r||n.form),n.$notify(a,"success"),t.n=4;break;case 3:t.p=3,l=t.v,n.$notify(l.message,"warning");case 4:return t.a(2)}},t,null,[[1,3]])}))()}},created:function(){var e=this;return p()(v()().m(function n(){return v()().w(function(n){while(1)switch(n.n){case 0:try{e.config.TIPMOV.options=e.movimientos,e.readMovalmti()}catch(n){e.$notify(n.message,"warning")}case 1:return n.a(2)}},n)}))()}},U=t(12807);const S=(0,U.A)(I,[["render",f]]);var k=S}}]);