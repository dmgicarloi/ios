"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[12115],{12115:function(e,a,o){o.r(a),o.d(a,{default:function(){return g}});o(56285);var n=o(61758),l=o(58790),t={class:"column col q-ma-sm"},i={key:0},r={class:"column col"},c={class:"row col"},u={key:1,class:"col"},s={class:"row col"},d={class:"row q-ml-xs"},f={class:"row q-ml-xs"},m={class:"q-ma-xs"};function p(e,a){var o=(0,n.g2)("q-btn"),p=(0,n.g2)("q-td"),E=(0,n.g2)("q-tr"),b=(0,n.g2)("q-search"),h=(0,n.g2)("q-select"),v=(0,n.g2)("q-icon"),D=(0,n.g2)("q-table"),A=(0,n.g2)("q-item-main"),L=(0,n.g2)("q-checkbox"),k=(0,n.g2)("q-item-side"),C=(0,n.g2)("q-item"),O=(0,n.g2)("q-list"),g=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",t,[(0,n.bF)(D,{class:"col cabecera-talleres tabla-especial",data:e.dataExoneraciones,columns:e.columns,"row-key":"ALUCOD",filter:e.buscar},{body:(0,n.k6)(function(a){return[(0,n.bF)(E,{props:a},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.cols,function(t){return(0,n.uX)(),(0,n.Wv)(p,{key:t.name,props:a},{default:(0,n.k6)(function(){return[t.especial?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[t.value?((0,n.uX)(),(0,n.Wv)(o,{key:0,flat:"",dense:"",round:"",icon:e.iconos[t.value].icono,color:e.iconos[t.value].color,size:"sm",onClick:function(o){return e.cambiarEstado(a.row,t.field)}},null,8,["icon","color","onClick"])):(0,n.Q3)("v-if",!0),t.value&&!t.unico?((0,n.uX)(),(0,n.Wv)(o,{key:1,flat:"",dense:"",round:"",icon:"remove_red_eye",size:"sm",onClick:function(o){return e.verDetalle(a.row,t.field)}},null,8,["onClick"])):(0,n.Q3)("v-if",!0)],64)):((0,n.uX)(),(0,n.CE)("span",i,(0,l.v_)(t.value),1))]}),_:2},1032,["props"])}),128))]}),_:2},1032,["props"])]}),"top-right":(0,n.k6)(function(){return[(0,n.Lk)("div",r,[(0,n.Lk)("div",c,[e.anoSelect?((0,n.uX)(),(0,n.Wv)(b,{key:0,class:"col",modelValue:e.buscar,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.buscar=a})},null,8,["modelValue"])):(0,n.Q3)("v-if",!0),e.anoSelect?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.CE)("div",u)),(0,n.bF)(h,{class:"q-if-outlined no-bottom",modelValue:e.anoSelect,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.anoSelect=a}),options:e.listAnos,"float-label":e.$t("ano"),onInput:e.cambiarAno},null,8,["modelValue","options","float-label","onInput"])]),(0,n.Lk)("div",s,[a[4]||(a[4]=(0,n.Lk)("b",null,"Leyenda:",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(["N","T","P"],function(a){return(0,n.Lk)("div",d,[(0,n.bF)(v,{name:e.iconos[a].icono,color:e.iconos[a].color},null,8,["name","color"]),(0,n.Lk)("span",null,(0,l.v_)(e.iconos[a].label),1)])}),64)),(0,n.Lk)("div",f,[(0,n.bF)(v,{name:"remove_red_eye"}),a[3]||(a[3]=(0,n.Lk)("span",null,"Click para exonerar o visualizar el Detalle",-1))])])])]}),_:1},8,["data","columns","filter"]),(0,n.bF)(g,{modelValue:e.modalDetalle,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.modalDetalle=a}),title:e.$t("matricula.exonerar")+" "+e.infoDetalle.NOMCOMP,onClose:e.cerrar,onSubmit:e.cerrar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",m,[(0,n.bF)(O,null,{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.infoDetalle["DETALLE"+e.campoEditado],function(a){return(0,n.uX)(),(0,n.Wv)(C,{key:a.ID_DETALLE},{default:(0,n.k6)(function(){return[(0,n.bF)(A,null,{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(a.DESCRIPCION),1)]}),_:2},1024),(0,n.bF)(k,null,{default:(0,n.k6)(function(){return[(0,n.bF)(L,{modelValue:a.EXONERADO,"onUpdate:modelValue":function(e){return a.EXONERADO=e},"true-value":1,"false-value":0,onInput:function(o){return e.grabarDetalle(a)},color:"secondary"},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])]}),_:1},8,["modelValue","title","onClose","onSubmit"])])}o(52133),o(10239),o(50310),o(90095),o(6724),o(83190),o(44264),o(13715);var E=o(6123),b=o(96122),h=o(80660),v=o(30545),D=o(57668),A=o(30640),L=o(982),k={components:{QTable:v.A,QSelect:E.Si,QScrollArea:b.A,QTd:E.Ef,QTr:E.qh,sieModal:A.A,QCheckbox:E.vZ,QBtn:E.Il,QSearch:E.Ks,QIcon:E.bP,QList:E.Mb,QItem:E.H0,QItemMain:E.mF,QItemSide:E.n1},data:function(){return{acceso:(0,D["default"])().ruta.nivel>=2,listAnos:[],loading:!1,dataExoneraciones:[],anoSelect:null,buscar:null,modalDetalle:!1,infoDetalle:{},campoEditado:null,iconos:{N:{icono:"check_box_outline_blank",label:"Ninguno"},P:{icono:"indeterminate_check_box",color:"primary",label:"Parcial"},T:{icono:"check_box",color:"secondary",label:"Total"}},columnasAdicionales:[],columns:[{name:"ALUCOD",label:this.$t("intranet.codigo"),field:"ALUCOD",align:"left",sortable:!0},{name:"NOMCOMP",label:this.$t("intranet.estudiante"),field:"NOMCOMP",align:"left",sortable:!0}]}},methods:{cambiarAno:function(e){var a=this;h.$http.get("api/HyoMatriculaparametros/obtParametrosActivos",{params:{ano:e}}).then(function(o){var n=o.json;return a.columns=[{name:"ALUCOD",label:a.$t("codigo"),field:"ALUCOD",align:"left",sortable:!0},{name:"NOMCOMP",label:a.$t("intranet.estudiante"),field:"NOMCOMP",align:"left",sortable:!0}],n.forEach(function(e){a.columns.push({name:e.TIPO.toUpperCase(),field:e.TIPO.toUpperCase(),label:e.DESCRIPCION,align:"center",especial:!0})}),a.columnasAdicionales=n,a.columns.push({name:"P06",field:"P06",label:"Seguro",align:"center",especial:!0,unico:!0}),a.columns.push({name:"DZZ",field:"DZZ",label:"Documentos de MatrÃ­cula",align:"center",especial:!0,unico:!0}),h.$http.get("api/HyoMatriculaparametros/obtParametrosExonera",{params:{ano:e}})}).then(function(e){var o=e.json;a.dataExoneraciones=o})},cambiarEstado:function(e,a){var o=this.dataExoneraciones[e.__index][a],n=[];switch(o){case"P":case"N":o="T";break;default:o="N";break}e["DETALLE"+a].forEach(function(e){"N"===o?(n.push({alucod:e.ALUCOD,valor:e.ID_DETALLE,tipo:""}),e.EXONERADO=0):(n.push({alucod:e.ALUCOD,valor:e.ID_DETALLE,tipo:""}),n.push({alucod:e.ALUCOD,valor:e.ID_DETALLE,tipo:"i"}),e.EXONERADO=1)}),this.grabarExoneraciones(n),this.dataExoneraciones[e.__index][a]=o},validarExonerados:function(){var e=0,a="N";this.infoDetalle["DETALLE"+this.campoEditado].length>0&&(this.infoDetalle["DETALLE"+this.campoEditado].forEach(function(a){var o=a.EXONERADO;e+=o}),e>0&&(a=e===this.infoDetalle["DETALLE"+this.campoEditado].length?"T":"P"),this.dataExoneraciones[this.infoDetalle.__index][this.campoEditado]=a,this.campoEditado=null),this.infoDetalle={}},verDetalle:function(e,a){this.infoDetalle=e,this.campoEditado=a,this.modalDetalle=!0},grabarDetalle:function(e){var a=[];0===e.EXONERADO?a.push({alucod:e.ALUCOD,valor:e.ID_DETALLE,tipo:""}):(a.push({alucod:e.ALUCOD,valor:e.ID_DETALLE,tipo:""}),a.push({alucod:e.ALUCOD,valor:e.ID_DETALLE,tipo:"i"})),this.grabarExoneraciones(a)},grabarExoneraciones:function(e){var a=this;if(this.acceso){var o=e;h.$http.post("api/HyoMatriculaexoneraciones/saveExoneracionesBloque",{arrExoneraciones:o}).then(function(e){var o=e.json;(0,L["default"])(a.$t("mensajes."+o.mensaje),o.icono)})}},cerrar:function(){this.validarExonerados(),this.modalDetalle=!1}},created:function(){var e=this;h.$http.get("api/HyoMatriculaFecha/traeAnoMatricula",{params:{flReserva:0,soloAno:"S"}}).then(function(a){var o=a.json;e.listAnos=o.map(function(e){var a=e.ANO;return{label:a,value:a}}),e.cambiarAno((0,D["default"])().ano),e.anoSelect=(0,D["default"])().ano.toString()})}},C=o(12807);const O=(0,C.A)(k,[["render",p]]);var g=O}}]);