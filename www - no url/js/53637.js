"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[53637],{53637:function(i,t,e){e.r(t),e.d(t,{default:function(){return g}});var n=e(61758);function a(i,t){var e=(0,n.g2)("router-view"),a=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(a,{class:"column"},{default:(0,n.k6)(function(){return[(0,n.bF)(e)]}),_:1})}e(52133),e(10239),e(89571),e(56285),e(50310),e(6724),e(83190);var o=e(6123),u=e(43920),m=e(47803),r=e(33950),c=e(99637),l=e(69027),d=e(80660),s={data:function(){return{galeria:{multimediaTmp:[],multimediaCards:[],slider:[],clearMultimediaTmp:function(){this.multimediaTmp=[]},clearCards:function(){this.multimediaCards=[]},clearSilder:function(){this.slider=[]},setSlider:function(i){this.slider.push({type:"img"===i.TIPO?"image":"video",src:"img"===i.TIPO?i.src:i.ARCHIVO})},setCards:function(i){this.multimediaCards.push(i)},getCards:function(i){var t=this;i.xfunction="function"===typeof i.xfunction?i.xfunction:function(){},i.data?d.$http.post("api/HyoGaleria/obtenerImgCategoria",{parametros:{codcategoria:i.data.IDCATEGORIA}}).then(function(e){e.json.map(function(i){i.src=(0,u.A)(i),t.setSlider(i),t.setCards(i)}),i.xfunction(t.multimediaCards.length>0)}):this.$router.go(-1)},deleteCards:function(i){this.multimediaCards.splice(i,1)},deleteSlider:function(i){this.slider.splice(i,1)},uploadImageTmp:function(i){var t=this;i.xfunction="function"===typeof i.xfunction?i.xfunction:function(){},(0,c["default"])(i.files,function(e){e.base64().then(function(n){(0,r.Upload)({url:"api/HyoArchivo/tmp/upload",file:e}).then(function(a){e.nameTmp=a.name,t.setImagesTmp({file:e,tipo:"img",image:n,titulo:"",descripcion:""}),i.xfunction()}).catch(function(t){i.xfunction(),(0,l.alertModal)("Hyo System","Ha ocurrido un error al intentar subir la imagen")})})})},setImagesTmp:function(i){this.multimediaTmp.push(i)},deleteMultimediaTmp:function(i){this.multimediaTmp.splice(i,1)},setVideoTmp:function(i){var t=this;i="function"===typeof i?i:function(){},(0,l.prompt)("Ingrese la URL del video de Youtube o Vimeo","Copie y pegue la URL de un video").then(function(e){if(null!==e){var n=(0,m["default"])(e);n?(t.multimediaTmp.push({file:{nameTmp:n.embed},tipo:"video",image:n.img,titulo:"",descripcion:""}),i()):(0,l.alertModal)(void 0,"No es una url valida, intente que los videos sean de youtube.com o vimeo.com")}})},saveMultimediaTmp:function(i){var t=this;i.xfunction="function"===typeof i.xfunction?i.xfunction:function(){};var e=0,n=function(){t.multimediaTmp.length<1?((0,l.alertModal)(void 0,"Debe agregar una imagen para guardar."),i.xfunction(!1)):e<t.multimediaTmp.length&&d.$http.post("api/HyoGaleria/actualizarImagenes",{parametros:{carpeta:i.data.CARPETA,descri:t.multimediaTmp[e].descripcion,idcate:String(i.data.IDCATEGORIA),imgorig:t.multimediaTmp[e].file.nameTmp,tipo:t.multimediaTmp[e].tipo,titulo:t.multimediaTmp[e].titulo}}).then(function(){e+=1,n(),e===t.multimediaTmp.length&&i.xfunction(!0)}).catch(function(){i.xfunction(!1)})};n()}}}},created:function(){window.galeria=this.galeria},unmounted:function(){window.galeria=null},components:{QPage:o.Tu}},f=e(12807);const p=(0,f.A)(s,[["render",a]]);var g=p}}]);