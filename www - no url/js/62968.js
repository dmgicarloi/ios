"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[62968],{62968:function(n,e,t){t.r(e),t.d(e,{default:function(){return g}});var o=t(61758),a={class:"row q-col-gutter-md"},r={class:"col-xs-12"};function u(n,e){var t=(0,o.g2)("header-btn"),u=(0,o.g2)("formulario"),i=(0,o.g2)("q-card-section"),l=(0,o.g2)("q-card"),c=(0,o.g2)("sie-modal"),s=(0,o.g2)("sie-cloud"),d=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(d,{class:"q-pa-sm sie-flat"},{default:(0,o.k6)(function(){return[(0,o.bF)(l,{flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(t,{name:n.tituloForm,auto:!0,buttons:n.botonesForm},null,8,["name","buttons"]),(0,o.bF)(i,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.Lk)("div",r,[(0,o.bF)(u,{schema:n.schemas.viewEnvioCorreos,ref:"formApp",key:"formApp",onClickIconGrid:n.clickIconGrid,onChangeInput:n.changeInput,onClickBtn:n.clickBtn},null,8,["schema","onClickIconGrid","onChangeInput","onClickBtn"])])])]}),_:1})]}),_:1}),(0,o.bF)(c,{title:n.configModalSel.titulo,modelValue:n.openModal,"onUpdate:modelValue":e[0]||(e[0]=function(e){return n.openModal=e}),ok:"Enviar",onSubmit:n.submit},{default:(0,o.k6)(function(){return[(0,o.bF)(i,{class:"cont-modal-xl"},{default:(0,o.k6)(function(){return[(0,o.bF)(u,{schema:n.schemaModal,ref:"formModal",key:"formModal",modal:!0,onClickBtn:n.clickBtn},null,8,["schema","onClickBtn"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,o.bF)(c,{modelValue:n.modalAdjuntos.open,"onUpdate:modelValue":e[2]||(e[2]=function(e){return n.modalAdjuntos.open=e}),title:n.modalAdjuntos.titulo,header:!0,footer:!0,onSubmit:n.cerrarAdjuntos},{default:(0,o.k6)(function(){return[(0,o.bF)(s,{modelValue:n.modalAdjuntos.adjuntos,"onUpdate:modelValue":e[1]||(e[1]=function(e){return n.modalAdjuntos.adjuntos=e}),"only-local":""},null,8,["modelValue"])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var i=t(76080),l=t.n(i),c=t(45254),s=t.n(c),d=(t(39866),t(52133),t(50310),t(6724),t(83190),t(6123)),f=(t(80660),t(10213),t(32195)),m=t(65848),p={mixins:[m.A],components:{sieCloud:f.A,QPage:d.Tu,QCard:d.C$},data:function(){var n=this.init();return n.dataEnvio={anio:"",nivel:"",grado:""},n.modalAdjuntos={open:!1,titulo:"Adjuntar",adjuntos:[]},n},methods:{updateGrid:function(){var n=this;return s()(l()().m(function e(){var t,o,a,r,u,i,c,s,d;return l()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.getInputValue("formApp","INPUT_1");case 1:return t=e.v,e.n=2,n.getInputValue("formApp","INPUT_2");case 2:return o=e.v,e.n=3,n.getInputValue("formApp","ID_MODALIDAD");case 3:return a=e.v,e.n=4,n.getInputValue("formApp","INPUT_3");case 4:return r=e.v,e.n=5,n.getInputValue("formApp","ID_CONDICION");case 5:return u=e.v,e.n=6,n.getInputValue("formApp","ID_ESTADO");case 6:return i=e.v,e.n=7,n.getInputValue("formApp","FH_INICIO");case 7:return c=e.v,e.n=8,n.getInputValue("formApp","FH_FINAL");case 8:s=e.v,d={anoadm:t},2===o.length&&("%"!==o[0]&&(d.instrucod=o[0]),"%"!==o[1]&&(d.gradocod=o[1])),a>0&&(d.id_modalidad=a),r.length>0&&(d.textoBusqueda=r),u>0&&(d.id_condicion=u),i>0&&(d.id_estado=i),c.length>0&&s.length>0&&(d.rangoInscripcion={desde:c,hasta:s}),n.reloadGrid("formApp","GRID_1",d);case 9:return e.a(2)}},e)}))()},filtrarDatos:function(n,e,t){var o=this;return s()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:o.$nextTick(s()(l()().m(function n(){var e,a;return l()().w(function(n){while(1)switch(n.n){case 0:if(!["FH_INICIO","FH_FINAL"].includes(t)){n.n=3;break}return n.n=1,o.getInputValue("formApp","FH_INICIO");case 1:return e=n.v,n.n=2,o.getInputValue("formApp","FH_FINAL");case 2:if(a=n.v,0!==e.length&&0!==a.length){n.n=3;break}return n.a(2,!1);case 3:return n.n=4,o.updateGrid();case 4:return n.a(2)}},n)})));case 1:return n.a(2)}},n)}))()},modalConfigEnviar:function(n){var e=this;return s()(l()().m(function t(){var o,a,r;return l()().w(function(t){while(1)switch(t.n){case 0:if(o=e.$refs["formApp"].$refs["GRID_1"].selected,0!==o.length){t.n=1;break}return e.$notify("Debe seleccionar al menos un(1) registro","warning"),t.a(2,!1);case 1:return t.n=2,e.getInputValue("formApp","INPUT_1");case 2:return a=t.v,t.n=3,e.getInputValue("formApp","INPUT_2");case 3:return r=t.v,e.dataEnvio.anio=a,e.dataEnvio.nivel="T",e.dataEnvio.grado="T",2===r.length&&("%"!==r[0]&&(e.dataEnvio.nivel=r[0]),"%"!==r[1]&&(e.dataEnvio.grado=r[1])),t.n=4,e.addModal(n);case 4:return t.a(2)}},t)}))()},adjuntar:function(n){var e=this;return s()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:e.modalAdjuntos.open=!0;case 1:return n.a(2)}},n)}))()},cerrarAdjuntos:function(){this.modalAdjuntos.open=!1},preSubmit:function(n){var e=!0;switch(this.configModalSel.codigoFormulario){case"envioCorreos":0===n.TEXTO.length&&(this.$notify("Debe indicar el texto del mensaje","warning"),e=!1);var t=this.$refs["formApp"].$refs["GRID_1"].selected;n.familias=t.map(function(n){return n.ID_PERFAM}),n.anio=this.dataEnvio.anio,n.nivel=this.dataEnvio.nivel,n.grado=this.dataEnvio.grado,n.adjuntos=this.modalAdjuntos.adjuntos;break}return{res:e,data:n}},postSubmit:function(n){var e=this;return s()(l()().m(function n(){var t;return l()().w(function(n){while(1)switch(n.n){case 0:t=e.configModalSel.codigoFormulario,n.n="envioCorreos"===t?1:3;break;case 1:return n.n=2,e.updateGrid();case 2:return e.modalAdjuntos.adjuntos=[],n.a(3,3);case 3:return n.a(2)}},n)}))()}},created:function(){var n=this;return s()(l()().m(function e(){var t;return l()().w(function(e){while(1)switch(e.n){case 0:t=[{id:"viewEnvioCorreos",ref:"formApp"}],n.loadSchemas(t);case 1:return e.a(2)}},e)}))()}},h=t(12807);const v=(0,h.A)(p,[["render",u]]);var g=v}}]);