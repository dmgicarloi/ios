"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[19055],{19055:function(e,o,n){n.r(o),n.d(o,{default:function(){return Qe}});var t=n(8445),a=n.n(t),i=(n(56285),n(515),n(20361),n(61758)),l=n(58790),r={class:"col"},u={class:"row"},c={key:1,class:"row items-center bg-white q-col-gutter-sm q-pa-md"},s={class:"col row items-center"},d={class:"col text-primary"},m={style:{"font-size":"20px","font-weight":"500","line-height":"1.12","letter-spacing":"0.02em"}},f={style:{"font-size":"12px","font-weight":"400"}},p={key:0},v={key:0},g={class:"row q-gutter-sm"},k={class:"row q-gutter-sm"},h={class:"row q-gutter-sm"},b={class:"row bg-white q-pa-sm"},C={class:"row full-height"},w={class:"col column"},_={class:"full-height"},A={class:"row gutter-sm"},E={class:"col-12"},F={class:"row"},y={class:"col-12"},x={class:"col-8 border-right overflow-auto full-height q-pt-sm"},q={class:"col-4 overflow-auto full-height"},I={class:"row q-pa-sm gutter-sm"},O={class:"col-xs-12"},L={class:"col-xs-12"},Q={class:"row q-pa-sm q-col-gutter-sm"},D={class:"col-12"},R={class:"col-12"};function T(e,o){var n=(0,i.g2)("q-btn"),t=(0,i.g2)("q-toolbar"),T=(0,i.g2)("q-item-tile"),V=(0,i.g2)("q-item-main"),U=(0,i.g2)("q-select"),X=(0,i.g2)("q-item-side"),W=(0,i.g2)("q-item"),j=(0,i.g2)("q-avatar"),S=(0,i.g2)("q-item-section"),P=(0,i.g2)("q-item-label"),N=(0,i.g2)("q-banner"),M=(0,i.g2)("q-popup-proxy"),H=(0,i.g2)("q-list"),z=(0,i.g2)("q-tooltip"),Y=(0,i.g2)("detalle-entrega"),$=(0,i.g2)("q-card"),G=(0,i.g2)("q-chip"),K=(0,i.g2)("sie-view"),B=(0,i.g2)("sie-vacio"),J=(0,i.g2)("q-tab"),Z=(0,i.g2)("comentarios-entrega"),ee=(0,i.g2)("q-download-file"),oe=(0,i.g2)("q-tab-pane"),ne=(0,i.g2)("q-tabs"),te=(0,i.g2)("sie-modal"),ae=(0,i.g2)("q-input"),ie=(0,i.g2)("sie-cloud"),le=(0,i.g2)("q-iframe"),re=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(re,{class:"modulo-portafolio column"},{default:(0,i.k6)(function(){return[e.isLess?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(t,{class:"fixed-top q-toolbar-menu full-width",style:{left:"0"}},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",r,[(0,i.Lk)("div",u,[(0,i.bF)(n,{flat:"",round:"",dense:"",icon:"arrow_back",to:e.back},null,8,["to"])])]),e.contenidos.length>0?((0,i.uX)(),(0,i.Wv)(n,{key:0,flat:"",round:"",icon:"file_download",onClick:e.descargarTodo},null,8,["onClick"])):(0,i.Q3)("v-if",!0),e.periodo&&e.permiso&&"SIE"===e.sie.usucod?((0,i.uX)(),(0,i.Wv)(n,{key:1,flat:"",round:"",icon:"file",onClick:e.openFile},null,8,["onClick"])):(0,i.Q3)("v-if",!0)]}),_:1}),(0,i.bF)(W,{class:"bg-white text-primary"},{default:(0,i.k6)(function(){return[(0,i.bF)(V,{class:"q-pa-sm"},{default:(0,i.k6)(function(){return[(0,i.bF)(T,{class:"q-toolbar-subtitle"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,l.v_)(e.datos.nemodes),1)]}),_:1}),(0,i.bF)(T,{class:"q-title"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,l.v_)(e.datos.cursonom),1)]}),_:1}),(0,i.bF)(T,{class:"q-caption"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,l.v_)(e.datos.alunom),1)]}),_:1})]}),_:1}),e.periodos&&e.periodos.length?((0,i.uX)(),(0,i.Wv)(X,{key:0},{default:(0,i.k6)(function(){return[(0,i.bF)(U,{modelValue:e.periodo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.periodo=o}),options:e.periodos,label:"Periodos",onInput:e.changePeriodo},null,8,["modelValue","options","onInput"])]}),_:1})):(0,i.Q3)("v-if",!0)]}),_:1})],64)):((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",null,[(0,i.bF)(n,{color:"primary",round:"",icon:"arrow_back",to:e.back},null,8,["to"])]),(0,i.Lk)("div",s,[(0,i.Lk)("div",d,[(0,i.Lk)("div",m,(0,l.v_)(e.datos.nemodes)+" - "+(0,l.v_)(e.datos.cursonom),1),(0,i.Lk)("div",f,(0,l.v_)(e.datos.alunom),1)]),e.periodos&&e.periodos.length?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.bF)(U,{modelValue:e.periodo,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.periodo=o}),options:e.periodos,label:"Periodos",onInput:e.changePeriodo},null,8,["modelValue","options","onInput"])])):(0,i.Q3)("v-if",!0)]),(0,i.Lk)("div",null,[e.contenidos.length>0?((0,i.uX)(),(0,i.Wv)(n,{key:0,size:"md","no-caps":"",color:"primary",icon:"file_download",onClick:e.descargarTodo,label:"Descargar"},null,8,["onClick"])):(0,i.Q3)("v-if",!0)]),"SIE"===e.sie.usucod?((0,i.uX)(),(0,i.CE)("div",v,[e.periodo&&e.permiso?((0,i.uX)(),(0,i.Wv)(n,{key:0,size:"md","no-caps":"",color:"primary",icon:"file",onClick:e.openFile,label:"Subir archivo"},null,8,["onClick"])):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0)])),(0,i.bF)($,{class:"col q-card-mobile q-ma-sm scroll"},{default:(0,i.k6)(function(){return[(0,i.bF)(H,{separator:"",style:{padding:"0px 0px"}},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.contenidos,function(o){return(0,i.uX)(),(0,i.Wv)(W,{key:o.ID,clickable:"",onClick:function(n){return e.detalleContenido(o)}},{default:(0,i.k6)(function(){return[(0,i.bF)(S,{avatar:""},{default:(0,i.k6)(function(){return[(0,i.bF)(j,{icon:o.ICONO,style:(0,l.Tr)({background:o.COLOR}),"text-color":"white"},null,8,["icon","style"])]}),_:2},1024),(0,i.bF)(S,null,{default:(0,i.k6)(function(){return[(0,i.bF)(P,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,l.v_)(o.TITULO),1)]}),_:2},1024),(0,i.bF)(P,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,l.v_)(o.NEMODES),1)]}),_:2},1024),(0,i.bF)(P,{caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,l.v_)(o.COMENTARIO),1)]}),_:2},1024),o.ES_ENTREGA?((0,i.uX)(),(0,i.Wv)(P,{key:0,caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)("Fecha de publicación: "+(0,l.v_)(o.FH_PUBLICACION),1)]}),_:2},1024)):((0,i.uX)(),(0,i.Wv)(P,{key:1,caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)("Fecha de registro: "+(0,l.v_)(o.FH_PUBLICACION),1)]}),_:2},1024)),o.ES_ENTREGA?((0,i.uX)(),(0,i.Wv)(P,{key:2,caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)("Fecha de entrega: "+(0,l.v_)(o.FH_ENTREGA),1)]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1024),1===o.REF_DOC||1===o.REF_ALU?((0,i.uX)(),(0,i.Wv)(S,{key:0,side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(j,{icon:"comment_text",color:"primary","text-color":"white"})]}),_:1})):(0,i.Q3)("v-if",!0),o.ES_ENTREGA?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(S,{key:1,side:""},{default:(0,i.k6)(function(){return[null===o.ACEPTADO?((0,i.uX)(),(0,i.Wv)(n,{key:0,icon:"update",round:"",color:"warning",style:{"box-shadow":"none"},onClick:e.stopPropagation},{default:(0,i.k6)(function(){return[(e.sie.esOtros||e.sie.esAdministrador)&&e.permiso?((0,i.uX)(),(0,i.Wv)(M,{key:0},{default:(0,i.k6)(function(){return[(0,i.bF)(N,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",g,[(0,i.bF)(n,{class:"col",label:"Aceptar ",color:"positive",onClick:function(n){return e.aceptarArchivo(o.ID)},size:"md","no-caps":""},null,8,["onClick"]),(0,i.bF)(n,{class:"col",label:"Rechazar",color:"negative",onClick:function(n){return e.rechazarArchivo(o.ID)},size:"md","no-caps":""},null,8,["onClick"])])]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1032,["onClick"])):(0,i.Q3)("v-if",!0),0===o.ACEPTADO?((0,i.uX)(),(0,i.Wv)(n,{key:1,icon:"close",round:"",color:"negative",style:{"box-shadow":"none"},onClick:e.stopPropagation},{default:(0,i.k6)(function(){return[(e.sie.esOtros||e.sie.esAdministrador)&&e.permiso?((0,i.uX)(),(0,i.Wv)(M,{key:0},{default:(0,i.k6)(function(){return[(0,i.bF)(N,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",k,[(0,i.bF)(n,{class:"col",label:"Aceptar ",color:"positive",onClick:function(n){return e.aceptarArchivo(o.ID)},size:"md","no-caps":""},null,8,["onClick"])])]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1032,["onClick"])):(0,i.Q3)("v-if",!0),1===o.ACEPTADO?((0,i.uX)(),(0,i.Wv)(n,{key:2,icon:"check",round:"",color:"positive",style:{"box-shadow":"none"},onClick:e.stopPropagation},{default:(0,i.k6)(function(){return[(e.sie.esOtros||e.sie.esAdministrador)&&e.permiso?((0,i.uX)(),(0,i.Wv)(M,{key:0},{default:(0,i.k6)(function(){return[(0,i.bF)(N,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",h,[(0,i.bF)(n,{class:"col",label:"Rechazar",color:"negative",onClick:function(n){return e.rechazarArchivo(o.ID)},size:"md","no-caps":""},null,8,["onClick"])])]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1032,["onClick"])):(0,i.Q3)("v-if",!0)]}),_:2},1024))]}),_:2},1032,["onClick"])}),128))]}),_:1}),e.validacionColegio?((0,i.uX)(),(0,i.Wv)(Y,{key:0,title:"Tarea Calificada",modelValue:e.evaluacion.modal,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.evaluacion.modal=o}),id:e.idContenido,alucod:e.evaluacion.alucod,contenido:e.currentContent,portafolio:!0},{botones:(0,i.k6)(function(){return[(0,i.bF)(n,{color:"primary",icon:"conducta_comentarios",round:"",onClick:e.openReflexion},{default:(0,i.k6)(function(){return[(0,i.bF)(z,null,{default:(0,i.k6)(function(){return a()(o[12]||(o[12]=[(0,i.eW)("Reflexión",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1},8,["modelValue","id","alucod","contenido"])):(0,i.Q3)("v-if",!0)]}),_:1}),(0,i.Lk)("div",b,[(0,i.bF)(G,{label:"Pendiente",color:"warning",icon:"update","text-color":"white"}),(0,i.bF)(G,{label:"Aceptado",color:"positive",icon:"check","text-color":"white"}),(0,i.bF)(G,{label:"Rechazado",color:"negative",icon:"close","text-color":"white"})]),e.validacionColegio?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(te,{key:2,css:{width:"100%",height:"100%","max-height":"100vh"},modelValue:e.evaluacion.modal,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.evaluacion.modal=o}),title:e.evaluacion.title,ok:!1,footer:!1},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",C,[(0,i.Lk)("div",{class:(0,l.C4)(["col-md-6","col-sm-12","col-xs-12","column","q-pl-sm","q-pr-xs","q-py-sm",{"full-height":!e.isLess}])},[(0,i.Lk)("div",w,[e.evaluacion.link?((0,i.uX)(),(0,i.Wv)(K,{key:0,src:e.evaluacion.link,name:e.nombreFile,btnEditar:!0,adjunto:e.adjunto},null,8,["src","name","adjunto"])):((0,i.uX)(),(0,i.Wv)(B,{key:1,class:"col column bordered",title:"Visor de documentos",subtitle:"Seleccione un documento"}))])],2),(0,i.Lk)("div",{class:(0,l.C4)(["col-md-6","col-sm-12","col-xs-12","column","q-pl-xs","q-pr-sm","q-py-sm",{"full-height":!e.isLess}])},[(0,i.Lk)("div",{class:(0,l.C4)([{col:!e.isLess},"bordered","overflow-auto","full-width","q-py-none","q-mt-sm"])},[(0,i.Lk)("div",_,[(0,i.Lk)("div",A,[(0,i.Lk)("div",E,[(0,i.Lk)("div",F,[o[13]||(o[13]=(0,i.Lk)("div",{class:"col"},null,-1)),(0,i.bF)(n,{label:"Reflexión",color:"primary",onClick:e.openReflexion},null,8,["onClick"])])]),(0,i.Lk)("div",y,[(0,i.bF)(ne,{class:"full-height q-tab-ev",dense:"",inverted:""},{title:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.keys(e.evaluacion.comentarios),function(o){return(0,i.uX)(),(0,i.Wv)(J,{name:o,label:e.formatDate(e.evaluacion.comentarios[o].FH_REGISTRO,"dddd DD, MMMM YYYY hh:mm"),default:e.evaluacion.comentarios[o].DEFAULT},null,8,["name","label","default"])}),256))]}),default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.keys(e.evaluacion.comentarios),function(o){return(0,i.uX)(),(0,i.Wv)(oe,{class:"row q-pa-none col full-height",name:o},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",x,[(0,i.bF)(Z,{comentarios:e.evaluacion.comentarios[o].COMENTARIOS},null,8,["comentarios"])]),(0,i.Lk)("div",q,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.evaluacion.comentarios[o].ADJUNTOS,function(o,n){return(0,i.uX)(),(0,i.Wv)(ee,{src:e.getUrl(o),item:o,url:o.url,name:o.name,extension:o.extension,inline:!1,modal:!1,onClick:function(n){return e.loadAdjunto(o)}},null,8,["src","item","url","name","extension","onClick"])}),256))])]}),_:2},1032,["name"])}),256))]}),_:1})])])])],2)],2)])]}),_:1},8,["modelValue","title"])),(0,i.bF)(te,{modelValue:e.openModalReflexion,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.openModalReflexion=o}),title:"Reflexión",onSubmit:e.guardarReflexion},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",I,[(0,i.Lk)("div",O,[(0,i.bF)(ae,{class:"q-if-outlined","float-label":"Reflexión sobre el trabajo (Docente)","max-height":100,rows:"7",modelValue:e.reflexionDocente,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.reflexionDocente=o}),type:"textarea",readonly:!e.sie.esOtros},null,8,["modelValue","readonly"])]),(0,i.Lk)("div",L,[(0,i.bF)(ae,{class:"q-if-outlined","float-label":"Reflexión sobre el trabajo (Estudiante)","max-height":100,rows:"7",modelValue:e.reflexionEstudiante,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.reflexionEstudiante=o}),type:"textarea",readonly:e.sie.esOtros},null,8,["modelValue","readonly"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,i.bF)(te,{modelValue:e.file.modal,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.file.modal=o}),title:"Subir archivos",onSubmit:e.grabarFile},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Q,[(0,i.Lk)("div",D,[(0,i.bF)(ae,{label:"Asunto",modelValue:e.file.asunto,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.file.asunto=o})},null,8,["modelValue"])]),(0,i.Lk)("div",R,[(0,i.bF)(ae,{label:"Comentario",type:"textarea",modelValue:e.file.comentario,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.file.comentario=o})},null,8,["modelValue"])])]),(0,i.bF)(ie,{modelValue:e.file.adjunto,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.file.adjunto=o}),allow:e.file.allow,"only-local":"",isMultiple:!1},null,8,["modelValue","allow"])]}),_:1},8,["modelValue","onSubmit"]),(0,i.bF)(te,{modelValue:e.documento.modal,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.documento.modal=o}),title:"Archivo",ok:!1,footer:!1},{default:(0,i.k6)(function(){return[(0,i.bF)(le,{class:"col modalArchivoPortafolio",src:e.documento.src},null,8,["src"])]}),_:1},8,["modelValue"])]}),_:1})}var V=n(76080),U=n.n(V),X=n(45254),W=n.n(X),j=(n(30683),n(77507),n(10239),n(6123)),S=n(80660),P=n(18105),N=n(99637),M=n(30451),H=n(80340),z=n(57668),Y=n(81288),$=n(30640),G=n(9054),K=n(29104),B={class:"comentarioEntrega"},J={class:"q-pt-sm"},Z={class:"text-grey-8 q-gutter-xs"},ee={key:0,class:"row q-px-md items-center"},oe={class:"col"},ne={class:"q-pl-sm"},te={key:0,class:"cantidadFloat bg-red round-borders"};function ae(e,o){var n=(0,i.g2)("q-download-file"),t=(0,i.g2)("q-item-section"),a=(0,i.g2)("q-tooltip"),r=(0,i.g2)("q-icon"),u=(0,i.g2)("q-btn"),c=(0,i.g2)("q-item"),s=(0,i.g2)("sie-usuario"),d=(0,i.g2)("q-chat-message"),m=(0,i.g2)("q-input"),f=(0,i.g2)("q-field"),p=(0,i.g2)("sie-cloud"),v=(0,i.g2)("sie-modal");return(0,i.uX)(),(0,i.CE)("div",B,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.comentarios,function(o,m){return(0,i.uX)(),(0,i.Wv)(d,{class:"q-px-md",name:o.USUNOM,stamp:e.formatDate(o.FH_REGISTRO,"dddd DD, MMMM YYYY hh:mm a"),sent:o.sent,"bg-color":o.color},{default:(0,i.k6)(function(){return[(0,i.bF)(c,null,{default:(0,i.k6)(function(){return[(0,i.bF)(t,{top:""},{default:(0,i.k6)(function(){return[o.adjuntos?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:0},(0,i.pI)(o.adjuntos,function(o,t){return(0,i.uX)(),(0,i.Wv)(n,{key:t,src:e.getUrl(o),name:o.name,extension:o.extension,"direct-link":o.directLink,inline:!1},null,8,["src","name","extension","direct-link"])}),128)):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",J,(0,l.v_)(o.COMENTARIO),1)]}),_:2},1024),o.FH_LECTURA&&o.USUCOD===e.sie.usucod||e.sie.esOtros&&o.FH_LECTURA?((0,i.uX)(),(0,i.Wv)(t,{key:0,top:"",side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"done_all",color:"light-blue",size:"20px"},{default:(0,i.k6)(function(){return[(0,i.bF)(a,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,l.v_)("Leído: "+e.formatDate(o.FH_LECTURA,"DD/MM/YYYY hh:mm a")),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0),o.delete?((0,i.uX)(),(0,i.Wv)(t,{key:1,top:"",side:""},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Z,[o.delete?((0,i.uX)(),(0,i.Wv)(u,{key:0,icon:"delete",flat:"",round:"",dense:"",size:"sm",onClick:function(n){return e.eliminar(o.ID)},loading:e.loadingEliminarComentario},null,8,["onClick","loading"])):(0,i.Q3)("v-if",!0)])]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1024)]}),avatar:(0,i.k6)(function(){return[(0,i.bF)(s,{usucod:o.USUCOD},null,8,["usucod"])]}),_:2},1032,["name","stamp","sent","bg-color"])}),256)),e.acceso?((0,i.uX)(),(0,i.CE)("div",ee,[(0,i.Lk)("div",oe,[(0,i.bF)(f,{count:1e3},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{class:"q-if-outlined full-width",type:"textarea",modelValue:e.comment,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.comment=o}),onKeydown:(0,K.jR)((0,K.D$)(e.responder,["prevent"]),["enter"]),disable:e.disable},null,8,["modelValue","onKeydown","disable"])]}),_:1})]),(0,i.Lk)("div",ne,[(0,i.bF)(u,{icon:"send",flat:"",round:"",dense:"",color:"secondary",onClick:e.responder,loading:e.loadingComentario},null,8,["onClick","loading"]),e.sie.esOtros?((0,i.uX)(),(0,i.Wv)(u,{key:0,icon:"paperclip",flat:"",round:"",dense:"",color:"secondary",onClick:e.adjuntar,loading:e.loadingComentario},{default:(0,i.k6)(function(){return[e.adjuntos.length?((0,i.uX)(),(0,i.CE)("div",te,(0,l.v_)(e.adjuntos.length),1)):(0,i.Q3)("v-if",!0)]}),_:1},8,["onClick","loading"])):(0,i.Q3)("v-if",!0)])])):(0,i.Q3)("v-if",!0),(0,i.bF)(v,{class:"modal-adjunto-comentario",modelValue:e.modal,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.modal=o}),title:"Adjuntar",onSubmit:o[3]||(o[3]=function(o){return e.modal=!1})},{default:(0,i.k6)(function(){return[(0,i.bF)(p,{modelValue:e.adjuntos,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.adjuntos=o}),"has-link":""},null,8,["modelValue"])]}),_:1},8,["modelValue"])])}var ie=n(33366),le=n(3363),re=n(24974),ue=n(82327),ce=n(88865),se=n(66824),de=n(74656),me=n(32195),fe=n(62006),pe=n(982),ve=n(69027),ge={emits:["save","delete"],name:"ComentariosEntrega",components:{QChatMessage:ie.A,ComentariosEntrega:le.A,sieUsuario:re.A,QItem:ue.A,QItemSection:ce.A,QItemLabel:se.A,QAvatar:de.A,sieModal:$.A,sieCloud:me.A,QDownloadFile:fe.A,QIcon:j.bP,QTooltip:j.nC,QBtn:j.Il,QField:j.Om,QInput:j.ie},props:["comentarios"],data:function(){return{comment:"",disable:!1,loadingComentario:!1,loadingEliminarComentario:!1,acceso:(0,z["default"])().ruta.nivel>=2,sie:(0,z["default"])(),modal:!1,adjuntos:[]}},methods:{responder:function(){var e=this;return W()(U()().m(function o(){var n,t,a,i,l,r;return U()().w(function(o){while(1)switch(o.p=o.n){case 0:if(!e.comment){o.n=5;break}return e.disable=!0,e.loadingComentario=!0,n=e.comentarios.length,t=e.comentarios[n-1],a=t.ID,i=t.ID_CONTENIDO_ENTREGA,l={idRef:a,idContenidoEntrega:i,comentario:e.comment},e.adjuntos.length&&(l.adjuntos=e.adjuntos),o.p=1,o.n=2,S.$http.post("api/HyoContenidoEntregaComentario/grabarRespuesta",l);case 2:r=o.v,e.comment="",e.adjuntos=[],(0,pe["default"])(r.message,"success"),o.n=4;break;case 3:o.p=3,o.v,(0,pe["default"])("Ocurrio un error","error");case 4:e.disable=!1,e.loadingComentario=!1,e.$emit("save",e);case 5:return o.a(2)}},o,null,[[1,3]])}))()},formatDate:function(e,o){return(0,P.Ay)(e,o)},eliminar:function(e){var o=this;(0,ve.confirmar)("¿Está seguro de eliminar la respuesta?",W()(U()().m(function n(){var t,a,i;return U()().w(function(n){while(1)switch(n.p=n.n){case 0:return o.loadingEliminarComentario=!0,n.p=1,n.n=2,S.$http.post("api/HyoContenidoEntregaComentario/eliminarRespuesta",{id:e});case 2:t=n.v,(0,pe["default"])(t.message,"success"),n.n=4;break;case 3:n.p=3,i=n.v,a=i.error,console.log(a),(0,pe["default"])(a.message,"error");case 4:o.loadingEliminarComentario=!1,o.$emit("delete",o);case 5:return n.a(2)}},n,null,[[1,3]])})))},adjuntar:function(){this.modal=!0},getUrl:function(e){return e.esEnlace?e.url:"".concat(this.sie.api,"/HyoContenidoEntregaComentario/archivo/").concat(e.idAdjunto,"/").concat(e.name,"?sie-token=").concat(this.sie.token)}}},ke=n(12807);const he=(0,ke.A)(ge,[["render",ae]]);var be=he,Ce=n(78131),we=n(61828),_e=n(16648),Ae=n(65673),Ee=n(9736),Fe=n(95051),ye=n(95477),xe=n(80103),qe=n(56089),Ie=n(47206),Oe={components:{ComentariosEntrega:be,QDownloadFile:fe.A,sieView:G.A,sieModal:$.A,QCard:j.C$,QTabs:j.uw,QTab:j.zu,QTabPane:j.dg,QItemSideIcon:M.A,sieVacio:H.A,QTooltip:j.nC,DetalleEntrega:we.A,QSelect:_e.A,QList:Ae.A,QItem:ue.A,QItemSection:ce.A,QItemLabel:se.A,QAvatar:de.A,SieCloud:me.A,QInput:j.ie,QInput2:Ee.A,QChip:Fe.A,QPopupProxy:ye.A,QBanner:xe.A,QIframe:qe.A,QPage:j.Tu,QToolbar:j.ZV,QBtn:j.Il,QItemMain:j.mF,QItemTile:j.lp,QItemSide:j.n1},props:["nemo","cursocod","grupocod","idalumno"],computed:{isLess:function(){return(0,Y.isLess)()},permiso:function(){return this.sie.ruta.nivel>=2}},data:function(){return{reflexionDocente:null,reflexionEstudiante:null,openModalReflexion:!1,datos:{},sie:(0,z["default"])(),contenidos:{},idContenido:0,back:{name:"intranet.portafolio.curso"},evaluacion:{modal:!1,title:null,alucod:null,usucod:null,nomcomp:null,comentarios:{},link:null,height:"450px",loading:!1,equivalencias:[],options:[],selected:{},dirigido:0,nombreFile:"",adjunto:{}},profesorCurso:"Sin Asignar",nombreFile:"",adjunto:{},obtDataEntregasAlumno:[],validacionColegio:-1===["0366","0367","0368","0121","0169","0322","0100","0101","0092"].indexOf((0,z["default"])().colcod),currentContent:{},periodos:[],periodo:null,file:{modal:!1,adjunto:[],asunto:null,comentario:null,allow:["doc","docx","xls","xlsx","ppt","pptx","jpg","png","jpeg","pdf"]},documento:{modal:!1,src:null,title:""}}},methods:{openReflexion:function(){var e=this;return W()(U()().m(function o(){var n,t;return U()().w(function(o){while(1)switch(o.n){case 0:return n={idContenido:e.idContenido,alucod:e.idalumno},o.n=1,S.$http.get("api/HyoContenidoentrega/getContenidoLecturaRef",{params:n});case 1:t=o.v,e.reflexionDocente=t.REF_DOC,e.reflexionEstudiante=t.REF_ALU,e.openModalReflexion=!0;case 2:return o.a(2)}},o)}))()},guardarReflexion:function(){var e=this;return W()(U()().m(function o(){var n;return U()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={idContenido:e.idContenido,alucod:e.idalumno,refDocente:e.reflexionDocente,refAlumno:e.reflexionEstudiante},o.p=1,o.n=2,S.$http.post("api/HyoContenidoentrega/guardarContenidoLecturaRef",n);case 2:e.openModalReflexion=!1,(0,pe["default"])("Proceso completado.","success"),o.n=4;break;case 3:o.p=3,o.v,(0,pe["default"])("ha ocurrido un problema.","warning");case 4:return o.a(2)}},o,null,[[1,3]])}))()},getUrl:function(e){return e.esEnlace?e.url:"".concat(this.sie.api,"/HyoContenidoentrega/archivo/").concat(e.id,"/").concat(e.name)},loadAdjunto:function(e){this.adjunto=e,this.nombreFile=e.name,this.evaluacion.link=this.getUrl(e)},formatDate:function(e){return(0,P.Ay)(e,"DD/MM/YYYY hh:mm a")},detalleContenido:function(e){var o=this;return W()(U()().m(function n(){return U()().w(function(n){while(1)switch(n.n){case 0:e.ID_CONTENIDO?(o.currentContent=e,o.evaluacion.link="",o.evaluacion.comentarios={},o.evaluacion.selected="",o.obtEntregasAlumno({idContenido:e.ID_CONTENIDO}),o.evaluacion.title=e.TITULO,o.evaluacion.modal=!0):(e.ACEPTADO||o.sie.esOtros||o.sie.esAdministrador)&&(o.documento.modal=!0,o.documento.title=e.TITULO,o.documento.src=o.getUrlNoEntrega(e));case 1:return n.a(2)}},n)}))()},obtEntregas:function(){var e=this;return W()(U()().m(function o(){var n,t,a;return U()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={},t={id:e.idContenido,idAlumno:e.idalumno},o.p=1,o.n=2,S.$http.get("api/HyoContenidoentrega/getTareasAlumnosPortafolio",{params:t});case 2:a=o.v,(0,N["default"])(a,function(e,o){n[e.ID_CONTENIDO_ENTREGA]={DEFAULT:0===o,FH_REGISTRO:e.FH_REGISTRO,COMENTARIOS:e.COMENTARIOS,ADJUNTOS:e.ADJUNTOS}}),e.evaluacion.comentarios=n,o.n=4;break;case 3:o.p=3,o.v,e.evaluacion.comentarios={};case 4:return o.a(2)}},o,null,[[1,3]])}))()},obtEntregasAlumno:function(e){var o=this;return W()(U()().m(function n(){var t;return U()().w(function(n){while(1)switch(n.n){case 0:t=e.idContenido;try{o.idContenido=t,o.obtEntregas()}catch(e){console.error(e)}case 1:return n.a(2)}},n)}))()},descargarTodo:function(){var e=[],o=this.contenidos.length;if(0!==o){for(var n=0;n<o;n++){var t=this.contenidos[n];e.push(t.ID_CONTENIDO)}e=e.join(".");var a="".concat(this.sie.api,"/HyoContenido/descargarPortafolio?idContenidos=").concat(e,"&alucod=").concat(this.idalumno,"&access_token=").concat(this.sie.token);(0,Ce["default"])(a,"data.zip")}},getContenidosPortafolio:function(e){return W()(U()().m(function o(){var n,t,a,i,l;return U()().w(function(o){while(1)switch(o.p=o.n){case 0:return n=e.alucod,t=e.cursocod,a=e.nemo,i=e.grupocod,o.p=1,l={alucod:n,cursocod:t,nemo:a,grupocod:i},o.n=2,S.$http.get("api/HyoContenido/getContenidoPortafolio",{params:l});case 2:return o.a(2,o.v);case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},changePeriodo:function(){var e=this;return W()(U()().m(function o(){var n,t,a;return U()().w(function(o){while(1)switch(o.n){case 0:return n={alucod:e.idalumno,cursocod:e.cursocod,nemo:e.nemo,grupocod:e.grupocod,periodo:e.periodo},o.n=1,S.$http.get("api/HyoContenido/getContenidoPortafolio",{params:n});case 1:t=o.v,a=t.data,e.contenidos=a;case 2:return o.a(2)}},o)}))()},openFile:function(){this.file.modal=!0},grabarFile:function(){var e=this;return W()(U()().m(function o(){var n,t,a,i,l;return U()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={alucod:e.idalumno,cursocod:e.cursocod,nemo:e.nemo,grupocod:e.grupocod,periodo:e.periodo,adjunto:e.file.adjunto,asunto:e.file.asunto},e.file.comentario&&(n.comentario=e.file.comentario),o.p=1,o.n=2,S.$http.post("api/HyoContenido/grabarArchivoPortafolio",n);case 2:return t=o.v,a=t.message,o.n=3,e.changePeriodo();case 3:(0,pe["default"])(a,"success"),o.n=5;break;case 4:o.p=4,l=o.v,i=l.error,(0,pe["default"])(i.message,"warning");case 5:return o.a(2)}},o,null,[[1,4]])}))()},aceptarArchivo:function(e){var o=this;return W()(U()().m(function n(){var t,a,i,l;return U()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,S.$http.post("api/HyoContenido/grabarEstadoArchivo",{id:e,aceptado:1});case 1:return t=n.v,a=t.message,n.n=2,o.changePeriodo();case 2:(0,pe["default"])(a,"success"),n.n=4;break;case 3:n.p=3,l=n.v,i=l.error,(0,pe["default"])(i.message,"warning");case 4:return n.a(2)}},n,null,[[0,3]])}))()},rechazarArchivo:function(e){var o=this;return W()(U()().m(function n(){var t,a,i,l;return U()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,S.$http.post("api/HyoContenido/grabarEstadoArchivo",{id:e,aceptado:0});case 1:return t=n.v,a=t.message,n.n=2,o.changePeriodo();case 2:(0,pe["default"])(a,"success"),n.n=4;break;case 3:n.p=3,l=n.v,i=l.error,(0,pe["default"])(i.message,"warning");case 4:return n.a(2)}},n,null,[[0,3]])}))()},getUrlNoEntrega:function(e){var o="".concat(this.sie.api,"/HyoContenido/portafolio/").concat(e.ID,"?sie-token=").concat(this.sie.token);return(0,Ie.linkPreview)(o,this.sie)},stopPropagation:function(e){e.stopPropagation()}},created:function(){var e=this;return W()(U()().m(function o(){var n,t,a,i,l,r,u,c,s,d;return U()().w(function(o){while(1)switch(o.n){case 0:return n=e.idalumno,t=e.cursocod,a=e.nemo,i=e.grupocod,e.evaluacion.alucod=n,e.evaluacion.selected=n,o.n=1,e.getContenidosPortafolio({alucod:n,cursocod:t,nemo:a,grupocod:i});case 1:l=o.v,r=l.alumno,u=l.curso,c=l.salon,s=l.data,d=l.periodos,e.datos={nemodes:c.NEMODES,cursonom:u.CURSONOM,alunom:r.USUNOM},e.contenidos=s,e.periodos=d;case 2:return o.a(2)}},o)}))()}};const Le=(0,ke.A)(Oe,[["render",T],["__scopeId","data-v-10878ff1"]]);var Qe=Le}}]);