"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[89489],{89489:function(e,n,a){a.r(n),a.d(n,{default:function(){return z}});var i=a(61758),r={class:"row q-col-gutter-sm"},t={class:"col-xs-12 col-sm-6"},o={class:"row q-col-gutter-sm"},c={class:"col-xs-12"},s={class:"col-xs-12"},u={class:"col-xs-12 col-sm-6"},l={class:"row q-pa-sm q-col-gutter-sm"},d={class:"col-xs-12 col-sm-6"},f={class:"col-xs-12 col-sm-6"};function m(e,n){var a=this,m=(0,i.g2)("header-btn"),p=(0,i.g2)("sie-table"),v=(0,i.g2)("unidad-equivalencia"),w=(0,i.g2)("q-card-section"),A=(0,i.g2)("q-card"),h=(0,i.g2)("q-input"),U=(0,i.g2)("q-form"),g=(0,i.g2)("sie-modal"),I=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(I,{class:"q-pa-sm sie-flat"},{default:(0,i.k6)(function(){return[(0,i.bF)(A,{flat:"",bordered:""},{default:(0,i.k6)(function(){return[(0,i.bF)(w,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",r,[(0,i.Lk)("div",t,[(0,i.Lk)("div",o,[(0,i.Lk)("div",c,[(0,i.bF)(m,{border:!1,name:"Unidades","padding-x":"","font-size":"16px",auto:!1,buttons:e.buttons},null,8,["buttons"])]),(0,i.Lk)("div",s,[(0,i.bF)(p,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableUnidad",onRowSelected:e.rowSelectUnidad,css:"height:calc(100vh - 140px)",context:a},null,8,["data","columns","config","onRowSelected"])])])]),(0,i.Lk)("div",u,[(0,i.bF)(v,{"row-unidad":e.rowUnidad,unidades:e.rows},null,8,["row-unidad","unidades"])])])]}),_:1})]}),_:1}),(0,i.bF)(g,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Equivalencia":"Modificar Equivalencia",onSubmit:e.saveAcccion},{default:(0,i.k6)(function(){return[(0,i.bF)(U,{ref:"refForm"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",l,[(0,i.Lk)("div",d,[(0,i.bF)(h,{modelValue:e.form.ABREVIATURA,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.ABREVIATURA=n}),label:"ABREVIATURA",rules:[e.required]},null,8,["modelValue","rules"])]),(0,i.Lk)("div",f,[(0,i.bF)(h,{modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.DESCRIPCION=n}),label:"DESCRIPCION",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var p=a(76080),v=a.n(p),w=a(45254),A=a.n(w),h=(a(89571),a(6123)),U={data:function(){return{config:{},rows:[],fields:[{name:"IDUNIDAD",label:"Código",field:"IDUNIDAD",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Unidad",field:"DESCRIPCION",align:"left",sortable:!0}]}}},g=a(39893),I=a(81288),b=a(2739),D=a(9736),E=a(88567),q=a(95718),k={class:"row"},R={class:"col-xs-12"},C={class:"col-xs-12"},O={class:"row q-pa-sm q-col-gutter-sm"},N={class:"col-xs-12"},$={class:"col-xs-12"};function S(e,n){var a=(0,i.g2)("header-btn"),r=(0,i.g2)("sie-table"),t=(0,i.g2)("q-select"),o=(0,i.g2)("q-input"),c=(0,i.g2)("q-form"),s=(0,i.g2)("sie-modal");return(0,i.uX)(),(0,i.CE)("div",k,[(0,i.Lk)("div",R,[(0,i.bF)(a,{"padding-x":"","font-size":"16px",name:"Equivalencia",buttons:e.buttons,border:!1},null,8,["buttons"])]),(0,i.Lk)("div",C,[(0,i.bF)(r,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableUnidadEquivalencia",onRowSelected:e.rowSelectUnidadEquivalencia,css:"height:calc(100vh - 140px)",context:this},null,8,["data","columns","config","onRowSelected"])]),(0,i.bF)(s,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Equivalencia":"Modificar Equivalencia",onSubmit:e.saveAcccion},{default:(0,i.k6)(function(){return[(0,i.bF)(c,{ref:"refForm"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",O,[(0,i.Lk)("div",N,[(0,i.bF)(t,{modelValue:e.form.IDUNIDAD_OPE,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.IDUNIDAD_OPE=n}),label:"Unidad Operación *",options:e.unidades,"option-label":"DESCRIPCION","option-value":"IDUNIDAD","emit-value":"",rules:[e.required]},null,8,["modelValue","options","rules"])]),(0,i.Lk)("div",$,[(0,i.bF)(o,{modelValue:e.form.FACTOR,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.FACTOR=n}),min:1,type:"number",label:"Factor *",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])])}var F=a(57008),P=a.n(F),y={data:function(){return{config:{IDUNIDAD_OPE:{component:"select",options:[],optionLabel:"DESCRIPCION",optionValue:"IDUNIDAD",edit:!1},FACTOR:{component:"input",type:"number",autoFocus:!0,autoSelect:!0},PRINCIPAL:{renderHtml:function(e,n,a){return a.checkbox({trueValue:1,value:e.PRINCIPAL})}},ACTION:{component:"button",icon:["delete as eliminar"],editar:function(e,n){var a=this;return A()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return a.rowUnidadEquivalencia=n,e.n=1,a.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var a=this;return A()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return a.rowUnidadEquivalencia=n,e.n=1,a.deleteUnidadEquivalencia();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"IDUNIDAD_OPE",label:"Unidad Operacion",field:"IDUNIDAD_OPE",align:"left",sortable:!0},{name:"FACTOR",label:"Factor",field:"FACTOR",align:"left",sortable:!0}]}}},V=a(5215),x={props:{rowUnidad:{type:Object,default:null},unidades:{type:Array,default:function(){return[]}}},mixins:[y],components:{QForm:b.A,QInput:D.A,QSelect:V.A,QCard:E.A,QCardSection:q.A},data:function(){return{required:g.require,buttons:[{label:"Agregar",icon:"plus",permiso:">1",click:this.openAgregar}],openAdd:!1,action:"create",rowUnidadEquivalencia:null,form:{IDUNIDAD_OPE:null,FACTOR:null}}},methods:{openAgregar:function(){this.action="create",this.rowUnidadEquivalencia=null,(0,I.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowUnidadEquivalencia?(this.action="update",this.form.IDUNIDAD_OPE=this.rowUnidadEquivalencia.IDUNIDAD_OPE,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return A()(v()().m(function n(){var a,i,r;return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(a=n.v,a){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:i=n.v,i&&e.createUnidadEquivalencia(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:r=n.v,r&&e.updateUnidadEquivalencia();case 6:return n.a(2)}},n)}))()},rowSelectUnidadEquivalencia:function(e,n){this.rowUnidadEquivalencia=n},createUnidadEquivalencia:function(){var e=this;return A()(v()().m(function n(){var a,i,r,t,o,c;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a=P()({},e.form),a.idunidad=e.rowUnidad.IDUNIDAD,n.n=1,e.$http.post("api/HyoUnidades/createUnidadEquivalencia",{params:a});case 1:i=n.v,r=i.result,t=i.message,o={IDUNIDAD:r.IDUNIDAD,IDUNIDAD_OPE:e.form.IDUNIDAD_OPE,FACTOR:e.form.FACTOR},e.rows.unshift(o),e.openAdd=!1,e.$notify(t,"success"),n.n=3;break;case 2:n.p=2,c=n.v,e.$notify(c.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readUnidadEquivalencia:function(e){var n=this;return A()(v()().m(function a(){var i,r;return v()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,n.$http.get("api/HyoUnidades/readUnidadEquivalencia",{params:{idunidadbase:e}});case 1:i=a.v,n.rows=i,a.n=3;break;case 2:a.p=2,r=a.v,n.$notify(r.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()},deleteUnidadEquivalencia:function(){var e=this;return A()(v()().m(function n(){var a,i,r,t;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowUnidadEquivalencia){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(a=n.v,!a){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/unidad-equivalencia/");case 4:i=n.v,r=i.message,e.rows.splice(e.rows.indexOf(e.rowUnidadEquivalencia),1),e.rowUnidadEquivalencia=null,e.$notify(r,"success"),n.n=6;break;case 5:n.p=5,t=n.v,e.$notify(t.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateUnidadEquivalencia:function(){var e=this;return A()(v()().m(function n(){var a,i,r,t;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a=e.$refs.tableUnidadEquivalencia,n.n=1,e.$http.put("api/unidad-equivalencia",{IDUNIDAD_OPE:e.form.IDUNIDAD_OPE});case 1:i=n.v,r=i.message,e.openAdd=!1,a.updateRow(e.rowUnidadEquivalencia,e.form),e.$notify(r,"success"),n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},watch:{rowUnidad:{deep:!0,handler:function(e){var n=this;return A()(v()().m(function a(){return v()().w(function(a){while(1)switch(a.n){case 0:if(!e){a.n=1;break}return a.n=1,n.readUnidadEquivalencia(e.IDUNIDAD);case 1:return a.a(2)}},a)}))()}},unidades:{deep:!0,immediate:!0,handler:function(e){this.config.IDUNIDAD_OPE.options=e}}}},T=a(12807);const _=(0,T.A)(x,[["render",S]]);var L=_,B={mixins:[U],components:{QForm:b.A,QInput:D.A,QCard:E.A,QCardSection:q.A,unidadEquivalencia:L,QPage:h.Tu},data:function(){return{required:g.require,buttons:[],openAdd:!1,action:"create",rowUnidad:null,form:{ABREVIATURA:null,DESCRIPCION:null}}},methods:{openAgregar:function(){this.action="create",this.rowUnidad=null,(0,I.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowUnidad?(this.action="update",this.form.ABREVIATURA=this.rowUnidad.ABREVIATURA,this.form.DESCRIPCION=this.rowUnidad.DESCRIPCION,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return A()(v()().m(function n(){var a,i,r;return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(a=n.v,a){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:i=n.v,i&&e.createUnidad(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:r=n.v,r&&e.updateUnidad();case 6:return n.a(2)}},n)}))()},rowSelectUnidad:function(e,n){this.rowUnidad=n},createUnidad:function(){var e=this;return A()(v()().m(function n(){var a,i,r,t;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/unidad",e.form);case 1:a=n.v,a.result,i=a.message,r={ABREVIATURA:e.form.ABREVIATURA,DESCRIPCION:e.form.DESCRIPCION},e.rows.unshift(r),e.openAdd=!1,e.$notify(i,"success"),n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readUnidad:function(){var e=this;return A()(v()().m(function n(){var a,i;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/HyoUnidades/readUnidad",{params:{}});case 1:a=n.v,e.rows=a,n.n=3;break;case 2:n.p=2,i=n.v,e.$notify(i.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deleteUnidad:function(){var e=this;return A()(v()().m(function n(){var a,i,r,t;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowUnidad){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(a=n.v,!a){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/unidad/");case 4:i=n.v,r=i.message,e.rows.splice(e.rows.indexOf(e.rowUnidad),1),e.rowUnidad=null,e.$notify(r,"success"),n.n=6;break;case 5:n.p=5,t=n.v,e.$notify(t.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateUnidad:function(){var e=this;return A()(v()().m(function n(){var a,i,r,t;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a=e.$refs.tableUnidad,n.n=1,e.$http.put("api/unidad",{ABREVIATURA:e.form.ABREVIATURA,DESCRIPCION:e.form.DESCRIPCION});case 1:i=n.v,r=i.message,e.openAdd=!1,a.updateRow(e.rowUnidad,e.form),e.$notify(r,"success"),n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){var e=this;return A()(v()().m(function n(){return v()().w(function(n){while(1)switch(n.n){case 0:try{e.readUnidad()}catch(n){e.$notify(n.message,"warning")}case 1:return n.a(2)}},n)}))()}};const Q=(0,T.A)(B,[["render",m]]);var z=Q}}]);