"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[22071],{22071:function(e,r,n){n.r(r),n.d(r,{default:function(){return _}});var a=n(61758),o={class:"row"},t={class:"col-xs-12 sie-flat"},l={key:1,class:"column"},i={class:"row q-pa-sm q-pt-md q-col-gutter-sm"},u={class:"col-xs-12 col-sm-6"},s={class:"col-xs-12 col-sm-6"},c={key:0,class:"col-xs-12 col-sm-6"},d={class:"col-xs-12 col-sm-6"},f={class:"col-xs-12 col-sm-6"},m={class:"col-xs-12 col-sm-6"},p={class:"col-xs-12 col-sm-6"},g={class:"row q-pa-sm"},b={class:"col-xs-12"};function C(e,r){var n=this,C=(0,a.g2)("header-btn"),h=(0,a.g2)("q-spinner-oval"),v=(0,a.g2)("q-inner-loading"),O=(0,a.g2)("sie-table"),R=(0,a.g2)("sie-vacio"),w=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-card"),S=(0,a.g2)("q-input"),U=(0,a.g2)("q-select"),A=(0,a.g2)("q-form"),V=(0,a.g2)("sie-modal"),x=(0,a.g2)("q-btn"),D=(0,a.g2)("q-toolbar"),G=(0,a.g2)("q-option-group"),F=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(F,{class:"academico-cursos q-pa-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(k,{flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(C,{name:"Cursos",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(w,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",o,[(0,a.Lk)("div",t,[(0,a.bF)(v,{visible:e.loadingDetalle},{default:(0,a.k6)(function(){return[(0,a.bF)(h,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.dataDetalle.length>0?((0,a.uX)(),(0,a.Wv)(O,{key:0,selection:"single",context:n,css:"height:calc(100vh - 175px)",search:"Buscar",columns:e.configTbl.columnas,data:e.dataDetalle,config:e.dinamicos},null,8,["columns","data","config"])):((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(R,{icon:"settings_applications"})]))])])]}),_:1})]}),_:1}),(0,a.bF)(V,{class:"modal-editar",modelValue:e.openModal.editar,"onUpdate:modelValue":r[7]||(r[7]=function(r){return e.openModal.editar=r}),title:e.mGrabar.title,header:!0,footer:e.sie.ruta.nivel>=2,ok:e.$t("botones.guardar"),loading:e.loadingModal,onSubmit:r[8]||(r[8]=function(r){return e.grabarDatos(e.mGrabar.grabar)})},{default:(0,a.k6)(function(){return[(0,a.bF)(A,{ref:"form"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",i,[(0,a.Lk)("div",u,[(0,a.bF)(S,{readonly:"",modelValue:e.mGrabar.CURSOCOD,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.mGrabar.CURSOCOD=r}),label:"Código",maxlength:"2","float-label":"Código"},null,8,["modelValue"])]),(0,a.Lk)("div",s,[(0,a.bF)(S,{modelValue:e.mGrabar.CURSONOM,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.mGrabar.CURSONOM=r}),label:"Nombre",maxlength:"80","float-label":"Nombre",rules:[function(e){return e.length>=3||"Porfavor use minimo 3 caracteres"}]},null,8,["modelValue","rules"])]),e.config.cursonom2?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(S,{modelValue:e.mGrabar.CURSONOM2,"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.mGrabar.CURSONOM2=r}),label:e.config.etiquetaCursonom2,maxlength:"80","float-label":e.config.etiquetaCursonom2},null,8,["modelValue","label","float-label"])])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",d,[(0,a.bF)(S,{modelValue:e.mGrabar.CURSOCOR,"onUpdate:modelValue":r[3]||(r[3]=function(r){return e.mGrabar.CURSOCOR=r}),label:"Desc. Actas",maxlength:"80","float-label":"Desc. Actas"},null,8,["modelValue"])]),(0,a.Lk)("div",f,[(0,a.bF)(S,{modelValue:e.mGrabar.CURSOABR,"onUpdate:modelValue":r[4]||(r[4]=function(r){return e.mGrabar.CURSOABR=r}),label:"Abreviatura",maxlength:"10","float-label":"Abreviatura"},null,8,["modelValue"])]),(0,a.Lk)("div",m,[(0,a.bF)(U,{modelValue:e.mGrabar.CURSONAT,"onUpdate:modelValue":r[5]||(r[5]=function(r){return e.mGrabar.CURSONAT=r}),options:e.config.cursonat,"float-label":"Tipo de curso",label:"Tipo de curso",rules:[function(e){return null!==e&&""!==e||"Indique el tipo de curso"}]},null,8,["modelValue","options","rules"])]),(0,a.Lk)("div",p,[(0,a.bF)(S,{modelValue:e.mGrabar.ORDCERT,"onUpdate:modelValue":r[6]||(r[6]=function(r){return e.mGrabar.ORDCERT=r}),label:"Orden","float-label":"Orden",type:"number",maxlength:"2",onInput:e.validarCantidad},null,8,["modelValue","onInput"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","footer","ok","loading"]),(0,a.bF)(V,{class:"modal-reportes",modelValue:e.reporte.modal,"onUpdate:modelValue":r[14]||(r[14]=function(r){return e.reporte.modal=r}),title:"Reportes",header:!0,ok:!1},{footer:(0,a.k6)(function(){return[(0,a.bF)(D,{class:"justify-end",color:"grey-2"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",null,[(0,a.bF)(x,{class:"q-mx-xs",label:"PDF",color:"primary",onClick:r[9]||(r[9]=function(r){return e.verReporte("pdf")})}),(0,a.bF)(x,{class:"q-mx-xs",label:"Excel",color:"primary",onClick:r[10]||(r[10]=function(r){return e.verReporte("xls")})})])]}),_:1})]}),footerMobile:(0,a.k6)(function(){return[(0,a.Lk)("div",null,[(0,a.bF)(x,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:r[11]||(r[11]=function(r){return e.verReporte("pdf")})}),(0,a.bF)(x,{flat:"",round:"",dense:"",icon:"file_excel",onClick:r[12]||(r[12]=function(r){return e.verReporte("xls")})})])]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",g,[r[15]||(r[15]=(0,a.Lk)("div",{class:"col-12 q-ptb-sm"},[(0,a.Lk)("b",null,[(0,a.Lk)("span",null,"Seleccione una opción")])],-1)),(0,a.Lk)("div",b,[(0,a.bF)(G,{color:"secondary",type:"radio",modelValue:e.reporte.repcod,"onUpdate:modelValue":r[13]||(r[13]=function(r){return e.reporte.repcod=r}),options:e.reporte.repcods},null,8,["modelValue","options"])])])]}),_:1},8,["modelValue"])]}),_:1})}var h=n(76080),v=n.n(h),O=n(45254),R=n.n(O),w=(n(10239),n(6123)),k=n(88567),S=n(95718),U=n(53380),A=n(9736),V=n(16648),x=n(80660),D={getCursosId:function(e){return R()(v()().m(function r(){var n;return v()().w(function(r){while(1)switch(r.n){case 0:return n={id:e},r.a(2,x.$http.get("api/CursoController/getCursos",{params:n}))}},r)}))()},getCursos:function(){return R()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,x.$http.get("api/CursoController/getCursos"))}},e)}))()},getConfiguracion:function(e){return R()(v()().m(function r(){return v()().w(function(r){while(1)switch(r.n){case 0:return r.a(2,x.$http.get("api/CursoController/getConfiguracion",{params:{data:e}}))}},r)}))()},getCursonat:function(){return R()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,x.$http.get("api/CursoController/getCursonat"))}},e)}))()},getCodigoCurso:function(){return R()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,x.$http.get("api/CursoController/getCodigoCurso"))}},e)}))()},saveCurso:function(e){return R()(v()().m(function r(){return v()().w(function(r){while(1)switch(r.n){case 0:return r.a(2,x.$http.post("api/CursoController/saveCurso",{data:e}))}},r)}))()},deleteCurso:function(e){return R()(v()().m(function r(){return v()().w(function(r){while(1)switch(r.n){case 0:return r.a(2,x.$http.delete("api/CursoController/deleteCurso",{params:{id:e}}))}},r)}))()},getReportes:function(){return R()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,[{label:"Cursos Oficiales",value:"2"},{label:"Cursos Internos",value:"3"},{label:"Todos los cursos",value:"4"}])}},e)}))()}},G=n(30640),F=n(80340),T=n(2819),q=n(57668),y=n(65229),N=n(81288),L=n(2739),M=n(33777),E={directives:{sieActive:y.A},components:{QCard:k.A,QCardSection:S.A,QSeparator:U.A,QInnerLoading:w.SQ,QSpinnerOval:w.VA,QSelect:V.A,QInput:A.A,QOptionGroup:w.EX,sieModal:G.A,sieVacio:F.A,QForm:L.A,sieTable:M.A,QPage:w.Tu,QToolbar:w.ZV,QBtn:w.Il},props:{},computed:{isLess:function(){return(0,N.isLess)()},claseBtn:function(){return this.configTbl.registrosSeleccionados.length>0?"text-secondary":"text-grey"}},data:function(){return{buttons:[{label:"Agregar",icon:"plus",permiso:"> 1",click:this.agregarCurso},{label:"Imprimir",icon:"print",click:this.openReportes}],sie:(0,q["default"])(),loadingDetalle:!1,loadingModal:!1,openModal:{agregar:!1,editar:!1},configTbl:{},dataDetalle:[],mGrabar:{CURSOTIP:"N",ORDCERT:1,title:"Agregar",grabar:1},cursonat:[],reporte:{modal:!1,repcods:[],repcod:2},config:{},dinamicos:{ACCIONES:{component:"button",icon:["edit","delete"],permisos:{edit:"> 1",delete:"=== 3"},edit:function(e){this.modalEditar(e,1)},delete:function(e){this.eliminar(e)},flat:!0,color:"primary"}}}},methods:{validarCantidad:function(e){var r=2;e.length>r&&(this.mGrabar["ORDCERT"]=e.substr(0,r))},configurarTabla:function(){var e={columnas:[{name:"CURSOCOD",label:"Código",field:"CURSOCOD",align:"left",sortable:!0},{name:"CURSONOM",label:"Nombre del Curso",field:"CURSONOM",align:"left",sortable:!0},{name:"CURSOCOR",label:"Descripción en Actas",field:"CURSOCOR",align:"left",sortable:!0},{name:"CURSONAT_DESC",label:"Tipo",field:"CURSONAT_DESC",align:"left",sortable:!0},{name:"CURSOABR",label:"Abreviatura",field:"CURSOABR",align:"center",sortable:!0},{name:"ACCIONES",label:"Acciones",align:"center",tipo:"acciones"}],paginacion:{page:1,rowsPerPage:500}};this.configTbl=e},getConfiguracion:function(e){var r=this;return R()(v()().m(function n(){var a;return v()().w(function(n){while(1)switch(n.n){case 0:if(!(r.cursonat.length>0)){n.n=1;break}return n.a(2,!1);case 1:return n.n=2,D.getConfiguracion({accion:e});case 2:r.config=n.v,1===e&&(r.mGrabar.CURSOCOD=r.config.codigo),a=["CURSOCOD","CURSONOM","CURSOCOR","CURSOABR","CURSONAT","ORDCERT"],r.config.cursonom2&&a.push("CURSONOM2"),r.config.cursopre&&a.push("CURSOPRE"),r.config.campos=a;case 3:return n.a(2)}},n)}))()},modalEditar:function(e){var r=this;return R()(v()().m(function n(){var a,o;return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,r.getConfiguracion(2);case 1:for(a=r.config.campos,o=0;o<a.length;o++)r.mGrabar[a[o]]=e[a[o]];r.mGrabar.grabar=2,r.mGrabar.title="Edición Curso ".concat(e.CURSONOM),r.openModal.editar=!0;case 2:return n.a(2)}},n)}))()},agregarCurso:function(){var e=this;return R()(v()().m(function r(){var n,a;return v()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.getConfiguracion(1);case 1:for(n=e.config.campos,a=0;a<n.length;a++)"CURSOCOD"!==n[a]&&(e.mGrabar[n[a]]="");e.mGrabar.title="Nuevo Curso",e.mGrabar.grabar=1,e.openModal.editar=!0;case 2:return r.a(2)}},r)}))()},grabarDatos:function(){var e=this;return R()(v()().m(function r(){var n,a,o,t,l;return v()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.n=1,e.$refs.form.validate();case 1:if(n=r.v,n){r.n=2;break}return e.$notify("Por favor complete la información solicitada","warning"),r.a(2,!1);case 2:return r.p=2,r.n=3,D.saveCurso(e.mGrabar);case 3:a=r.v,o=a.message,e.getCursos(),e.openModal.editar=!1,e.$notify(o,"success"),r.n=5;break;case 4:r.p=4,l=r.v,t=l.error,e.$notify(t.message,"error");case 5:return r.a(2)}},r,null,[[2,4]])}))()},openReportes:function(){var e=this;return R()(v()().m(function r(){return v()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,D.getReportes();case 1:e.reporte.repcods=r.v,e.reporte.modal=!0;case 2:return r.a(2)}},r)}))()},verReporte:function(e){var r={repcod:"reportesCurso",radio:this.reporte.repcod,formato:e,ano:(0,q["default"])().ano,usucod:(0,q["default"])().usucod};(0,T.exportFilePhp)(r,"webservice/reportes/reporte")},eliminar:function(e){var r=this;return R()(v()().m(function n(){var a,o,t,l;return v()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,D.deleteCurso(e.CURSOCOD);case 1:a=n.v,o=a.message,r.getCursos(),r.$notify(o,"success"),n.n=3;break;case 2:n.p=2,l=n.v,t=l.error,r.$notify(t.message,"error");case 3:return n.a(2)}},n,null,[[0,2]])}))()},getCursos:function(){var e=this;return R()(v()().m(function r(){return v()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,e.loadingDetalle=!0,r.n=1,D.getCursos();case 1:e.dataDetalle=r.v,r.n=3;break;case 2:r.p=2,r.v,e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 3:e.loadingDetalle=!1;case 4:return r.a(2)}},r,null,[[0,2]])}))()}},created:function(){var e=this;return R()(v()().m(function r(){return v()().w(function(r){while(1)switch(r.n){case 0:e.configurarTabla(),e.getCursos();case 1:return r.a(2)}},r)}))()}},$=n(12807);const Q=(0,$.A)(E,[["render",C]]);var _=Q}}]);