"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[56406],{56406:function(e,o,n){n.r(o),n.d(o,{default:function(){return Qe}});var t=n(61758);function a(e,o){var n=(0,t.g2)("q-tab"),a=(0,t.g2)("q-tabs"),s=(0,t.g2)("q-separator"),i=(0,t.g2)("registro"),l=(0,t.g2)("q-tab-panel"),r=(0,t.g2)("asignacion"),c=(0,t.g2)("reporte"),u=(0,t.g2)("q-tab-panels"),d=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-card"),p=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(p,{class:"registroIncidencias q-pa-sm col column"},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{class:"col column",dense:"",flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(d,{class:"col column no-padding"},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{class:"bg-white",modelValue:e.tab,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.tab=o}),align:"left"},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tabs,function(e,o){return(0,t.uX)(),(0,t.Wv)(n,{key:o,name:e.id,label:e.titulo},null,8,["name","label"])}),128))]}),_:1},8,["modelValue"]),(0,t.bF)(s),(0,t.bF)(u,{class:"col column",modelValue:e.tab,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.tab=o}),animated:""},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"col column no-padding",name:1},{default:(0,t.k6)(function(){return[(0,t.bF)(i)]}),_:1}),(0,t.bF)(l,{class:"col column no-padding",name:2},{default:(0,t.k6)(function(){return[(0,t.bF)(r)]}),_:1}),(0,t.bF)(l,{class:"col column no-padding",name:3},{default:(0,t.k6)(function(){return[(0,t.bF)(c)]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})}n(10239);var s=n(6123),i=n(88567),l=n(95718),r=n(53380),c=n(26697),u=n(53811),d=n(53093),f=n(43346),p=n(58790),m={class:"registroIncidenciasRegistro col column"},b={key:0,class:"row col"},h={class:"col-xs-12 col-md-7 q-pa-sm"},g={class:"row"},v={class:"col"},k={key:0},C={class:"row"},O={key:0,class:"col-12"},$={class:"col-12"},I={class:"col-12"},y={class:"col-xs-12 col-md-5 q-pa-sm"},S={class:"row"},A={class:"col-12"},D={class:"row"},q={class:"col"},P={class:"text-bold q-body-1"},F={class:"col text-right"},U={class:"text-bold q-body-1"};function _(e,o){var n=(0,t.g2)("sie-salones"),a=(0,t.g2)("sie-select"),s=(0,t.g2)("q-field"),i=(0,t.g2)("q-input"),l=(0,t.g2)("q-table"),r=(0,t.g2)("q-card"),c=(0,t.g2)("q-btn"),u=(0,t.g2)("q-page-sticky"),d=(0,t.g2)("sie-vacio");return(0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(n,{modelValue:e.nemo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.nemo=o}),todos:!1,onSeleccionar:e.selectSalon},null,8,["modelValue","onSeleccionar"]),e.nemo?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("div",h,[(0,t.Lk)("div",g,[(0,t.Lk)("div",v,[(0,t.bF)(s,{error:e.v$.curso.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{type:"outlined",modelValue:e.v$.curso.$model,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.v$.curso.$model=o}),options:e.cursos,label:"CURSONOM",placeholder:e.$t("curso"),disable:e.disableCursos,onSelected:e.changeCurso},null,8,["modelValue","options","placeholder","disable","onSelected"])]}),_:1},8,["error","error-label"])]),e.muestraPeriodos?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(a,{type:"outlined",modelValue:e.duracion,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.duracion=o}),options:e.duraciones,label:"DURADES",val:"DURACOD",placeholder:"periodo",onSelected:e.cambiarDuracion},null,8,["modelValue","options","onSelected"])])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",C,[e.sie.esDocente?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",O,[(0,t.bF)(s,{error:e.v$.profesor.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{type:"outlined",modelValue:e.v$.profesor.$model,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.v$.profesor.$model=o}),options:e.profesores,label:"NOMCOMP",placeholder:e.$t("profesor")},null,8,["modelValue","options","placeholder"])]}),_:1},8,["error","error-label"])])),(0,t.Lk)("div",$,[(0,t.bF)(s,{error:e.v$.incidencia.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{type:"outlined",modelValue:e.v$.incidencia.$model,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.v$.incidencia.$model=o}),options:e.incidencias,label:"DESCRIPCION",placeholder:e.$t("intranet.incidencias")},null,8,["modelValue","options","placeholder"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",I,[(0,t.bF)(s,{error:e.v$.observacion.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(i,{class:"q-if-outlined",type:"textarea",modelValue:e.v$.observacion.$model,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.v$.observacion.$model=o}),"float-label":e.$t("observacion"),"max-height":100,maxlength:500},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])])]),(0,t.Lk)("div",y,[(0,t.Lk)("div",S,[(0,t.Lk)("div",A,[(0,t.bF)(l,{dense:"",flat:"",bordered:"","table-style":"height: 68vh",pagination:e.pagination,"onUpdate:pagination":o[6]||(o[6]=function(o){return e.pagination=o}),data:e.listaAlumnos,columns:e.columns,"row-key":"ALUCOD",color:"secondary",selection:e.selection,selected:e.selected,"onUpdate:selected":o[7]||(o[7]=function(o){return e.selected=o}),"hide-bottom":""},null,8,["pagination","data","columns","selection","selected"]),(0,t.bF)(r,{class:"q-pa-md full-width text-left"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",D,[(0,t.Lk)("div",q,[o[8]||(o[8]=(0,t.Lk)("span",{class:"q-body-1"},"Seleccionados:",-1)),(0,t.Lk)("span",P,(0,p.v_)(e.selected.length),1)]),(0,t.Lk)("div",F,[o[9]||(o[9]=(0,t.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,t.Lk)("span",U,(0,p.v_)(e.listaAlumnos.length),1)])])]}),_:1})])])]),(0,t.bF)(u,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(c,{fab:"",round:"",color:"secondary",icon:"save",onClick:e.registrarIncidencia},null,8,["onClick"])]}),_:1})])):((0,t.uX)(),(0,t.Wv)(d,{key:1,class:"col column col items-center justify-center",subtitle:e.$t("validaciones.seleccioneSalon"),icon:"person"},null,8,["subtitle"]))])}var R=n(76080),L=n.n(R),N=n(45254),V=n.n(N),M=(n(23825),n(52133),n(50310),n(6724),n(83190),n(27153),n(66307),n(24066),n(83972)),w=n(93616),E=n(88275),T=n(80340),j=n(50425),Q=n(82351),x=n(52617),H=n(94509),Y=n(57668),G=n(982),W=n(82640),X=n(80660),B={setup:function(){var e=(0,M.fG)();return{v$:e}},components:{QTable:j.A,QTh:x.A,QTr:Q.A,QTd:H.A,QPageSticky:s._U,sieSalones:E.Ay,sieSelect:w.A,sieVacio:T.A,QField:s.Om,QInput:s.ie,QCard:s.C$,QBtn:s.Il},data:function(){return{sie:(0,Y["default"])(),nemo:"",salon:{},listaAlumnos:[],cursos:[],curso:{},disableCursos:!1,profesores:[],profesor:{},incidencias:[],incidencia:{},observacion:"",columns:[{name:"NOMCOMP",label:this.$t("intranet.estudiantes"),field:"NOMCOMP",align:"left",sortable:!0}],pagination:{page:1,rowsPerPage:100},selection:"multiple",selected:[],muestraPeriodos:!1,duraciones:[],duracion:""}},methods:{selectSalon:function(e){var o=this;console.log(e),this.defaultData(),this.v$.$reset(),this.salon=e,this.selected=[],this.listaAlumnos=[],this.cursos=[],this.profesores=[],Promise.all([X.$http.get("api/Hyoincidenciatipo/obtTiposIncidencias"),X.$http.get("api/HyoAsignaprs/obtListaCursos",{params:{parametros:{nemo:this.nemo,asignados:this.sie.esAdministrador,ano:this.sie.ano}}}),X.$http.get("api/HyoAsignaprs/obtProfesoresSalon",{params:{nemo:this.nemo}})]).then(function(e){o.incidencias=e[0].json,o.cursos=e[1].json.map(function(e){return"001"!==e.GRUPOCOD&&(e.CURSONOM=e.CURSONOM+"("+e.GRUPODES+")"),e}),o.sie.esDocente?e[1].json.length>0||(0,G["default"])("Solo puede registrar Incidencias a los salones donde dicta clases","warning"):(X.$http.get("api/HyoSalones/retornaAlumnosSalon",{params:{nemo:o.nemo,usufam:"s",$cache:!0}}).then(function(e){o.listaAlumnos=e.json}),o.cursos=[{CURSOCOD:"--",CURSONOM:"Normas y Conducta"}],o.curso=o.cursos[0],o.profesores=e[2].json)})},changeCurso:function(){var e=this;this.selected=[],this.sie.esDocente&&("001"===this.curso.GRUPOCOD?(this.muestraPeriodos=!1,this.listaAlumnos=[],X.$http.get("api/HyoSalones/obtAlumnosXCurso",{params:{nemo:this.nemo,curso:this.curso.CURSOCOD,$cache:!0}}).then(function(o){var n=o.json;e.listaAlumnos=n})):(this.muestraPeriodos=!0,this.listaAlumnos=[],X.$http.get("api/HyoAsinagrs/obtDuracionGrupo",{params:{cursocod:this.curso.CURSOCOD,grupocod:this.curso.GRUPOCOD,nemo:this.curso.NEMO}}).then(function(o){var n=o.json;return e.duraciones=n.periodos,e.duracion=n.actual,X.$http.get("api/HyoSalones/obtAlumnosXCurso",{params:{nemo:e.nemo,curso:e.curso.CURSOCOD,duracod:n.actual,grupocod:e.curso.GRUPOCOD,$cache:!0}})}).then(function(o){var n=o.json;e.listaAlumnos=n})))},cambiarDuracion:function(e){var o=this;this.selected=[],this.listaAlumnos=[],X.$http.get("api/HyoSalones/obtAlumnosXCurso",{params:{nemo:this.nemo,curso:this.curso.CURSOCOD,duracod:this.duracion,grupocod:this.curso.GRUPOCOD,$cache:!0}}).then(function(e){var n=e.json;o.listaAlumnos=n})},registrarIncidencia:function(){var e=this;return V()(L()().m(function o(){var n,t,a,s;return L()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.v$.$touch(),n={alucods:e.selected,cursocod:e.curso.CURSOCOD,inccod:e.incidencia.ID_INCIDENCIA_TIPO,incdes:e.incidencia.DESCRIPCION,nemo:e.salon.NEMO,nemodes:e.salon.NEMODES,obs:e.observacion,profcod:e.profesor.PROFCOD,profe:e.profesor.NOMCOMP},e.v$.$error){o.n=7;break}if(!(e.selected.length>0)){o.n=5;break}return o.p=1,o.n=2,X.$http.post("api/HyoIncidencias/registrarIncidencia",n);case 2:t=o.v,(0,G["default"])(t,"success"),o.n=4;break;case 3:o.p=3,s=o.v,a=s.error,(0,G["default"])(a.message,"warning");case 4:o.n=6;break;case 5:(0,G["default"])(e.$t("mensajes.m0027"),"warning");case 6:o.n=8;break;case 7:(0,G["default"])(e.$t("mensajes.m0020"),"warning");case 8:return o.a(2)}},o,null,[[1,3]])}))()},defaultData:function(){this.curso={},this.profesor={},this.incidencia={},this.observacion=""}},validations:function(){var e={};return e={curso:{required:W.mw},incidencia:{required:W.mw},observacion:{required:W.mw}},this.sie.esDocente||(e.profesor={required:W.mw}),e}},J=n(12807);const K=(0,J.A)(B,[["render",_]]);var z=K,Z={class:"row"},ee={class:"col-xs-12 col-md-6 q-pa-sm"},oe={class:"col"},ne={class:"text-bold q-body-1"},te={class:"col-xs-12 col-md-6 q-pa-sm"},ae={class:"row"},se={class:"col"},ie={class:"text-bold q-body-1"},le={class:"col text-right"},re={class:"text-bold q-body-1"};function ce(e,o){var n=(0,t.g2)("q-td"),a=(0,t.g2)("q-tr"),s=(0,t.g2)("q-table"),i=(0,t.g2)("q-card"),l=(0,t.g2)("q-btn"),r=(0,t.g2)("q-page-sticky"),c=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(c,{class:"registroIncidenciasAsignacion bg-white",style:{"min-height":"calc(100vh - 100px)"}},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",Z,[(0,t.Lk)("div",ee,[(0,t.bF)(s,{"table-style":"height: 75vh",pagination:e.paginationP,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.paginationP=o}),data:e.perfiles,columns:e.columnsP,"row-key":"name",color:"secondary","hide-bottom":""},{body:(0,t.k6)(function(o){return[(0,t.bF)(a,{props:o,class:(0,p.C4)(o.row.TIPCOD===e.trActive.TIPCOD?e.trActive.ACTIVE:"")},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{class:"cursor-pointer",key:"TIPNOM",props:o,onClick:function(n){return e.loadIncidencias(o.row)}},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(o.row.TIPNOM),1)]}),_:2},1032,["props","onClick"])]}),_:2},1032,["props","class"])]}),_:1},8,["pagination","data","columns"]),(0,t.bF)(i,{class:"q-pa-md full-width text-right"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",oe,[o[3]||(o[3]=(0,t.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,t.Lk)("span",ne,(0,p.v_)(e.perfiles.length),1)])]}),_:1})]),(0,t.Lk)("div",te,[(0,t.bF)(s,{"table-style":"height: 75vh",pagination:e.paginationI,"onUpdate:pagination":o[1]||(o[1]=function(o){return e.paginationI=o}),data:e.incidencias,columns:e.columnsI,"row-key":"ID_INCIDENCIA_TIPO",color:"secondary",selection:e.selection,selected:e.selected,"onUpdate:selected":o[2]||(o[2]=function(o){return e.selected=o}),"hide-bottom":""},null,8,["pagination","data","columns","selection","selected"]),(0,t.bF)(i,{class:"q-pa-md full-width"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",ae,[(0,t.Lk)("div",se,[o[4]||(o[4]=(0,t.Lk)("span",{class:"q-body-1"},"Seleccionados:",-1)),(0,t.Lk)("span",ie,(0,p.v_)(e.selected.length),1)]),(0,t.Lk)("div",le,[o[5]||(o[5]=(0,t.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,t.Lk)("span",re,(0,p.v_)(e.incidencias.length),1)])])]}),_:1})])]),(0,t.bF)(r,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{fab:"",round:"",color:"secondary",icon:"save",onClick:e.grabarIncidenciaPerfil},null,8,["onClick"])]}),_:1})]}),_:1})}var ue=n(33001),de={components:{QTable:s.kH,QTh:s.EJ,QTr:s.qh,QTd:s.Ef,QTableColumns:s.$s,QPageSticky:s._U,sieInfo:Y["default"],QPage:s.Tu,QCard:s.C$,QBtn:s.Il},data:function(){return{sie:(0,Y["default"])(),perfiles:[],perfil:"",columnsP:[{name:"TIPNOM",label:this.$t("navbar.perfil"),field:"TIPNOM",align:"left",sortable:!0}],paginationP:{page:1,rowsPerPage:100},trActive:{},incidencias:[],columnsI:[{name:"DESCRIPCION",label:this.$t("incidencia"),field:"DESCRIPCION",align:"left",sortable:!0}],paginationI:{page:1,rowsPerPage:100},selection:"multiple",selected:[],loading:!1}},methods:{obtPerfilesExistentes:function(){var e=this;X.$http.get("api/HyoPerfiles/obtPerfilesExistentes").then(function(o){e.perfiles=o.json})},loadIncidencias:function(e){var o=this;this.trActive={},e.ACTIVE="tr-active",this.trActive=e,this.perfil=e.TIPCOD,this.loading=!0,X.$http.get("api/HyoIncidenciastipoperfil/obtIncidenciasPerfil",{params:{perfil:e.TIPCOD}}).then(function(e){o.incidencias=e.json,o.selected=(0,ue.filterArray)(1,{field:"MARCADO",list:e.json}),o.loading=!1})},grabarIncidenciaPerfil:function(){var e=this,o={arreglo:this.selected,perfil:this.perfil};""!==this.perfil?X.$http.post("api/HyoIncidenciastipoperfil/grabarIncidenciaPerfil",o).then(function(o){var n=o.json;(0,G["default"])(e.$t("mensajes."+n.mensaje),"success")}).catch(function(o){(0,G["default"])(e.$t("mensajes.e0006"),"error")}):(0,G["default"])(this.$t("mensajes.m0027"),"warning")}},created:function(){this.obtPerfilesExistentes()}};const fe=(0,J.A)(de,[["render",ce]]);var pe=fe,me=n(8445),be=n.n(me),he={class:"row q-px-sm q-pt-sm"},ge={class:"col"},ve={class:"col"},ke={class:"row q-px-sm"},Ce={class:"col"},Oe={class:"col"},$e={class:"col"},Ie={class:"row q-px-sm"},ye={class:"col"},Se={class:"col"},Ae={class:"text-bold q-body-1"},De={class:"row q-pa-sm"},qe={class:"col-12"},Pe={class:"col-12"},Fe={class:"col-12"},Ue={class:"col-12"};function _e(e,o){var n=(0,t.g2)("q-datetime"),a=(0,t.g2)("sie-select"),s=(0,t.g2)("q-td"),i=(0,t.g2)("q-btn"),l=(0,t.g2)("q-tr"),r=(0,t.g2)("q-table"),c=(0,t.g2)("q-card"),u=(0,t.g2)("q-tooltip"),d=(0,t.g2)("q-fab-action"),f=(0,t.g2)("q-fab"),m=(0,t.g2)("q-page-sticky"),b=(0,t.g2)("q-input"),h=(0,t.g2)("sie-modal"),g=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(g,{class:"registroIncidenciasReporte column bg-white",style:{"min-height":"calc(100vh - 100px)"}},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",he,[(0,t.Lk)("div",ge,[(0,t.bF)(n,{class:"q-if-outlined",type:"date",modelValue:e.fecini,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.fecini=o}),"float-label":e.$t("fechainicio"),format:"DD/MM/YYYY",onInput:e.listarincidencias},null,8,["modelValue","float-label","onInput"])]),(0,t.Lk)("div",ve,[(0,t.bF)(n,{class:"q-if-outlined",type:"date",modelValue:e.fecfin,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.fecfin=o}),"float-label":e.$t("fechainicio"),format:"DD/MM/YYYY",onInput:e.listarincidencias},null,8,["modelValue","float-label","onInput"])])]),(0,t.Lk)("div",ke,[(0,t.Lk)("div",Ce,[(0,t.bF)(a,{type:"outlined",modelValue:e.nemo,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.nemo=o}),options:e.salones,label:"NEMODES",val:"NEMO",placeholder:e.$t("salon"),onInput:e.selectSalon},null,8,["modelValue","options","placeholder","onInput"])]),(0,t.Lk)("div",Oe,[(0,t.bF)(a,{type:"outlined",modelValue:e.cursocod,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.cursocod=o}),options:e.cursos,label:"CURSONOM",val:"CURSOCOD",placeholder:e.$t("curso"),onInput:e.listarincidencias},null,8,["modelValue","options","placeholder","onInput"])]),(0,t.Lk)("div",$e,[(0,t.bF)(a,{type:"outlined",modelValue:e.alucod,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.alucod=o}),options:e.alumnos,label:"NOMCOMP",val:"ALUCOD",placeholder:e.$t("alumno"),onInput:e.listarincidencias},null,8,["modelValue","options","placeholder","onInput"])])]),(0,t.Lk)("div",Ie,[(0,t.Lk)("div",ye,[(0,t.bF)(r,{"table-style":"height: 64vh",pagination:e.pagination,"onUpdate:pagination":o[5]||(o[5]=function(o){return e.pagination=o}),data:e.listaIncidencias,columns:e.columnas,"row-key":"name","hide-bottom":""},{body:(0,t.k6)(function(o){return[(0,t.bF)(l,{props:o},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{key:"DESCRIPCION",props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(o.row.DESCRIPCION),1)]}),_:2},1032,["props"]),(0,t.bF)(s,{key:"ALUMNO",props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(o.row.ALUMNO),1)]}),_:2},1032,["props"]),(0,t.bF)(s,{key:"PROFE",props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(o.row.PROFE),1)]}),_:2},1032,["props"]),(0,t.bF)(s,{key:"NGS",props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(o.row.NGS),1)]}),_:2},1032,["props"]),(0,t.bF)(s,{key:"CURSO",props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(o.row.CURSO),1)]}),_:2},1032,["props"]),(0,t.bF)(s,{key:"EDITAR",props:o},{default:(0,t.k6)(function(){return[(0,t.bF)(i,{round:"",color:"dark",icon:"remove_red_eye",flat:!0,"no-ripple":!0,dense:"","no-caps":!0,onClick:function(n){return e.openObs(o.row)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","columns"]),(0,t.bF)(c,{class:"q-pa-md full-width text-right"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",Se,[o[11]||(o[11]=(0,t.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,t.Lk)("span",Ae,(0,p.v_)(e.listaIncidencias.length),1)])]}),_:1})])]),(0,t.bF)(m,{position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{icon:"plus",direction:"up",color:"secondary"},{default:(0,t.k6)(function(){return[(0,t.bF)(d,{color:"secondary",icon:"print",onClick:e.imprimir},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{anchor:"bottom left",self:"bottom right"},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1},8,["onClick"]),(0,t.bF)(d,{color:"secondary",icon:"send",onClick:e.enviarCorreoTutor},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{anchor:"bottom left",self:"bottom right"},{default:(0,t.k6)(function(){return be()(o[12]||(o[12]=[(0,t.eW)("Enviar a Tutor",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,t.bF)(d,{color:"secondary",icon:"file",onClick:e.enviarCorreoJefe},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{anchor:"bottom left",self:"bottom right"},{default:(0,t.k6)(function(){return be()(o[13]||(o[13]=[(0,t.eW)("Enviar a Jefe de Normas",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})]}),_:1}),(0,t.bF)(h,{class:"observacionIncidencia-modal",modelValue:e.opened,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.opened=o}),title:e.objObs.DESCRIPCION,header:!0,ok:!1,footer:!1,loading:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",De,[(0,t.Lk)("div",qe,[(0,t.bF)(b,{class:"q-if-outlined",modelValue:e.objObs.NEMODES,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.objObs.NEMODES=o}),"float-label":e.$t("salon"),disable:""},null,8,["modelValue","float-label"])]),(0,t.Lk)("div",Pe,[(0,t.bF)(b,{class:"q-if-outlined",modelValue:e.objObs.ALUMNO,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.objObs.ALUMNO=o}),"float-label":e.$t("alumno"),disable:""},null,8,["modelValue","float-label"])]),(0,t.Lk)("div",Fe,[(0,t.bF)(n,{class:"q-if-outlined",modelValue:e.objObs.FH_REGISTRO,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.objObs.FH_REGISTRO=o}),"float-label":"Registrado",disable:"",format:"DD MMMM YYYY HH:mm:ss"},null,8,["modelValue"])]),(0,t.Lk)("div",Ue,[(0,t.bF)(b,{class:"q-if-outlined",type:"textarea",modelValue:e.objObs.OBSERVACION,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.objObs.OBSERVACION=o}),"float-label":e.$t("comentario"),"max-height":150,disable:""},null,8,["modelValue","float-label"])])])]}),_:1},8,["modelValue","title"])]}),_:1})}var Re=n(30640),Le=n(18105),Ne=n(54760),Ve=n(78131),Me={components:{QDatetime:s.T5,QTable:s.kH,QTh:s.EJ,QTr:s.qh,QTd:s.Ef,QTableColumns:s.$s,QFabAction:s.B$,QPageSticky:s._U,QFab:s.l6,QTooltip:s.nC,sieSelect:w.A,sieInfo:Y["default"],sieModal:Re.A,QPage:s.Tu,QBtn:s.Il,QCard:s.C$,QInput:s.ie},data:function(){return{sie:(0,Y["default"])(),salones:[],nemo:"",alumnos:[],alucod:"",cursos:[],cursocod:"",fecfin:new Date((new Date).setHours(23,59,59)),fecini:new Date(new Date((new Date).setMonth((new Date).getMonth()-1)).setHours(0,0,0,0)),listaIncidencias:[],columnas:[{name:"DESCRIPCION",label:this.$t("incidencia"),field:"DESCRIPCION",align:"left",sortable:!0},{name:"ALUMNO",label:this.$t("intranet.estudiante"),field:"ALUMNO",align:"left",sortable:!0},{name:"PROFE",label:this.$t("profesor"),field:"PROFE",align:"left",sortable:!0},{name:"NGS",label:"NGS",field:"NGS",align:"center",sortable:!0},{name:"CURSO",label:this.$t("curso"),field:"CURSO",align:"left",sortable:!0},{name:"EDITAR",label:"",field:"EDITAR",align:"center",sortable:!1}],pagination:{page:1,rowsPerPage:50},opened:!1,objObs:{}}},computed:{url:function(){var e={nemo:this.nemo||"%",cursocod:this.cursocod||"%",alucod:this.alucod||"%",fecha_de:(0,Le.Ay)(this.fecini,"DD/MM/YYYY"),fecha_hasta:(0,Le.Ay)(this.fecfin,"DD/MM/YYYY")};return this.sie.url+"/intranet/reporte-incidencias/reporte?"+(0,Ne.stringify)(e)}},methods:{listaSalones:function(){var e=this;X.$http.get("api/HyoSalones/listaSalones").then(function(o){o.json.unshift({NEMO:"%",NEMODES:"Todos"}),e.salones=o.json,e.nemo=e.salones[0].NEMO,e.selectSalon(e.nemo)})},selectSalon:function(e){var o=this;"%"===e?(this.cursos=[{CURSOCOD:"%",CURSONOM:"Todos"}],this.cursocod=this.cursos[0].CURSOCOD,this.alumnos=[{ALUCOD:"%",NOMCOMP:"Todos"}],this.alucod=this.alumnos[0].ALUCOD,this.listarincidencias()):Promise.all([X.$http.get("api/HyoSalones/retornaAlumnosSalon",{params:{nemo:e,usufam:"s"}}),X.$http.get("api/HyoAsignaprs/obtListaCursos",{params:{parametros:{nemo:e,asignados:!0,ano:this.sie.ano}}})]).then(function(e){e[0].json.unshift({ALUCOD:"%",NOMCOMP:"Todos"}),e[1].json.unshift({CURSOCOD:"--",CURSONOM:"Normas y Conducta"}),e[1].json.unshift({CURSOCOD:"%",CURSONOM:"Todos"}),o.cursos=e[1].json,o.alumnos=e[0].json,o.listarincidencias()})},listarincidencias:function(){var e=this,o={alucod:this.alucod,cursocod:this.cursocod,fecfin:this.fecfin,fecini:this.fecini,nemo:this.nemo,url:this.sie.url};X.$http.get("api/HyoIncidencias/listarIncidencias",{params:o}).then(function(o){e.listaIncidencias=o.json})},openObs:function(e){this.opened=!0,this.objObs=e},enviarCorreoJefe:function(){var e=this;this.$q.dialog({title:this.$t("mensajes.m0070"),ok:this.$t("botones.si"),cancel:this.$t("botones.no"),preventClose:!0}).onOk(function(){var o={alucod:e.alucod,cursocod:e.cursocod,fecfin:e.fecfin,fecini:e.fecini,nemo:e.nemo,url:e.sie.url};X.$http.get("api/HyoIncidencias/enviarCorreoJefeNormas",{params:o}).then(function(o){var n=o.json;(0,G["default"])(e.$t("mensajes."+n.mensaje),n.tipo)})}).onCancel(function(){})},enviarCorreoTutor:function(){var e=this;this.$q.dialog({title:this.$t("mensajes.m0070"),ok:this.$t("botones.si"),cancel:this.$t("botones.no"),preventClose:!0}).onOk(function(){var o={alucod:e.alucod,cursocod:e.cursocod,fecfin:e.fecfin,fecini:e.fecini,nemo:e.nemo,url:e.sie.url};X.$http.get("api/HyoIncidencias/enviarCorreoTutores",{params:o}).then(function(o){var n=o.json;(0,G["default"])(e.$t("mensajes."+n.mensaje),n.tipo)})}).onCancel(function(){})},imprimir:function(){(0,Ve["default"])(this.url)}},created:function(){this.listaSalones()}};const we=(0,J.A)(Me,[["render",_e]]);var Ee=we,Te={components:{QCard:i.A,QCardSection:l.A,QSeparator:r.A,QTabs:c.A,QTabPanels:u.A,QTab:d.A,QTabPanel:f.A,Registro:z,Asignacion:pe,Reporte:Ee,QPage:s.Tu},data:function(){return{sie:(0,Y["default"])(),tab:1}},computed:{tabs:function(){var e=[{titulo:this.$t("intranet.horario.registro"),id:1}];return this.sie.esAdministrador?e.push({titulo:this.$t("intranet.incidencias"),id:2},{titulo:this.$t("reportes"),id:3}):"PATRICIA"===this.sie.usucod&&e.push({titulo:this.$t("reportes"),id:3}),e}}};const je=(0,J.A)(Te,[["render",a]]);var Qe=je}}]);