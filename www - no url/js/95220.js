"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[95220],{95220:function(e,o,i){i.r(o),i.d(o,{default:function(){return ho}});var t=i(8445),a=i.n(t),n=i(61758),r=i(58790),l={class:"row"},s={class:"col-md-2"},c={key:0,class:"div q-card q-px-sm q-pt-sm"},u={class:"row"},d={class:"col-xs-12 col-md-2"},f={class:"col-xs-12 col-md-4"},m={class:"col-xs-12 col-md-6"},p={class:"row justify-around"},v={class:"col-xs-12 col-md-8"},g={class:"row"},C={class:"col-xs-12 col-md-4"},b={class:"col-xs-12 col-md-6"},h={class:"row column q-px-sm q-pt-sm"},D={class:"col-12"};function O(e,o){var i=(0,n.g2)("sie-select"),t=(0,n.g2)("q-toolbar-title"),O=(0,n.g2)("q-tooltip"),k=(0,n.g2)("q-btn"),E=(0,n.g2)("q-toolbar"),F=(0,n.g2)("q-select"),L=(0,n.g2)("selectMultiple"),I=(0,n.g2)("q-fab-action"),S=(0,n.g2)("q-fab"),_=(0,n.g2)("q-page-sticky"),A=(0,n.g2)("listadoCriterios"),T=(0,n.g2)("q-radio"),P=(0,n.g2)("sie-modal"),N=(0,n.g2)("configuracionClase"),R=(0,n.g2)("copiaCriteriosEnMasa"),y=(0,n.g2)("registroCriterios"),q=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(q,null,{default:(0,n.k6)(function(){return[(0,n.bF)(E,{class:"shadow-2 z-fab",inverted:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{class:"q-pa-none"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(e.$t(e.titulo)),1),(0,n.Lk)("span",null,(0,r.v_)(e.subtitulo),1),(0,n.Lk)("div",l,[(0,n.Lk)("div",s,[e.verComponentes.registroCriterio?((0,n.uX)(),(0,n.Wv)(i,{key:0,type:"outlined",placeholder:"periodo",modelValue:e.vmConductaPeriodo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmConductaPeriodo=o}),options:e.optionsPeriodoCriterio,onSelected:e.cambiarClasePeriodo,label:"PERIODODES",val:"ID_CONDUCTA_PERIODO"},null,8,["modelValue","options","onSelected"])):(0,n.Q3)("v-if",!0)])])]}),_:1}),e.verComponentes.listadoGeneral?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(k,{key:0,flat:"",round:"",dense:"",icon:"undo",onClick:e.volver},{default:(0,n.k6)(function(){return[(0,n.bF)(O,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[7]||(o[7]=[(0,n.eW)("Volver",-1)]))}),_:1})]}),_:1},8,["onClick"]))]}),_:1}),e.verComponentes.listadoGeneral?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.bF)(F,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltro.instrucod,options:e.dataSelect.nivel,"float-label":e.$t("ngs.nivel"),onChange:e.seleccionaInstru,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",f,[(0,n.bF)(F,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltro.gradocod,options:e.grados,"float-label":e.$t("ngs.grado"),onChange:e.seleccionaGrado,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",m,[(0,n.bF)(L,{options:e.dataAmbito,modelValue:e.vmFiltro.salon,labelSelect:e.$t("ambito"),onChange:e.seleccionaAmbito},null,8,["options","modelValue","labelSelect","onChange"])])]),(0,n.Lk)("div",p,[(0,n.Lk)("div",v,[(0,n.Lk)("div",g,[(0,n.Lk)("div",C,[(0,n.bF)(F,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.periodo,options:e.dtPeriodos,"float-label":e.$t("periodo"),onChange:e.seleccionaPeriodo},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",b,[(0,n.bF)(F,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.curricula,options:e.dataCurricula,"float-label":e.$t("pesosYCriterios.curricula"),onChange:e.seleccionaCurricula},null,8,["modelValue","options","float-label","onChange"])])])])]),(0,n.bF)(_,{position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(S,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,n.k6)(function(){return[(0,n.bF)(I,{color:"secondary",icon:"settings",onClick:e.abrirModalConfig},{default:(0,n.k6)(function(){return[(0,n.bF)(O,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[8]||(o[8]=[(0,n.eW)("Configuración",-1)]))}),_:1})]}),_:1},8,["onClick"]),e.sie.ruta.nivel>=2?((0,n.uX)(),(0,n.Wv)(I,{key:0,color:"secondary",icon:"copy",onClick:e.verCopiaEnMasa},{default:(0,n.k6)(function(){return[(0,n.bF)(O,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[9]||(o[9]=[(0,n.eW)("Copia de criterios en masa",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0),(0,n.bF)(I,{color:"secondary",icon:"print",onClick:e.modalReportes},{default:(0,n.k6)(function(){return[(0,n.bF)(O,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1},8,["onClick"])]}),_:1})]}),_:1})])):(0,n.Q3)("v-if",!0),e.verComponentes.listadoGeneral?((0,n.uX)(),(0,n.Wv)(A,{key:1,onVerCriterios:e.verCriterios,mostrarDatos:e.loadCriterios,dataCriterios:e.dataCriterios,objNiveles:e.objNiveles[e.vmFiltro.curricula]},null,8,["onVerCriterios","mostrarDatos","dataCriterios","objNiveles"])):(0,n.Q3)("v-if",!0),(0,n.bF)(P,{modelValue:e.openModal.reportes,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.openModal.reportes=o}),title:e.$t("reportes"),header:!0,ok:!1},{footer:(0,n.k6)(function(){return[(0,n.bF)(E,{class:"justify-end",color:"grey-2"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",null,[(0,n.bF)(k,{class:"q-mx-xs",color:"primary",icon:"file_pdf",onClick:o[2]||(o[2]=function(o){return e.exportar("pdf")})},{default:(0,n.k6)(function(){return a()(o[10]||(o[10]=[(0,n.eW)("PDF",-1)]))}),_:1}),(0,n.bF)(k,{class:"q-mx-xs",color:"primary",icon:"file_excel",onClick:o[3]||(o[3]=function(o){return e.exportar("xls")})},{default:(0,n.k6)(function(){return a()(o[11]||(o[11]=[(0,n.eW)("Excel",-1)]))}),_:1})])]}),_:1})]}),footerMobile:(0,n.k6)(function(){return[(0,n.bF)(k,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[4]||(o[4]=function(o){return e.exportar("pdf")})}),(0,n.bF)(k,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[5]||(o[5]=function(o){return e.exportar("xls")})})]}),default:(0,n.k6)(function(){return[(0,n.Lk)("div",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.objReportes,function(i,t){return(0,n.uX)(),(0,n.CE)("div",D,[(0,n.bF)(T,{class:"q-if-outlined",modelValue:e.repcod,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.repcod=o}),val:i.repcod,label:i.label},null,8,["modelValue","val","label"])])}),256))])]}),_:1},8,["modelValue","title"]),e.openModal.config?((0,n.uX)(),(0,n.Wv)(N,{key:2,verCurricula:e.dataCurricula.length>1,onCerrarModal:e.cerrarModalConfig},null,8,["verCurricula","onCerrarModal"])):(0,n.Q3)("v-if",!0),e.verComponentes.copiaEnMasa?((0,n.uX)(),(0,n.Wv)(R,{key:3,pDataAmbito:e.paramData.ambito,pDataNivel:e.paramData.nivel,pDataGrado:e.paramData.grado,pDataPeriodos:e.paramData.periodos,onSetCambioData:e.setCambioData},null,8,["pDataAmbito","pDataNivel","pDataGrado","pDataPeriodos","onSetCambioData"])):(0,n.Q3)("v-if",!0),e.verComponentes.registroCriterio?((0,n.uX)(),(0,n.Wv)(y,{key:4,dataConductaSelect:e.dataCompCriterios.conductaSelected,dataPeridoSelect:e.dataCompCriterios.periodoSelected,dataAmbito:e.dataSelect.salones,onSetCambioData:e.setCambioData},null,8,["dataConductaSelect","dataPeridoSelect","dataAmbito","onSetCambioData"])):(0,n.Q3)("v-if",!0)]}),_:1})}var k=i(99550),E=i.n(k),F=i(76080),L=i.n(F),I=i(45254),S=i.n(I),_=(i(71225),i(23825),i(10239),i(25751),i(50310),i(5962),i(90095),i(9240),i(83190),i(27153),i(66307),i(13715),i(24066),i(6123)),A=i(13813),T=i(70512),P=i(27738),N=i(4170),R=(i(515),i(29104)),y={class:"row contTableCriterios"},q={class:"columnCurso"},x={class:"q-table-container column no-wrap q-table__card q-table--horizontal-separator"},V={class:"q-table"},M={key:0},Q={key:1},w=["onDblclick"],j=["title"],U={class:"contCurso"},X={key:0},$={class:"col column columnaCrit"},G={class:"q-table-container column no-wrap q-table__card q-table--horizontal-separator"},B={class:"q-table"},W=["title"],K={class:"contPrograma"},z={class:"contDescPrograma"},J={class:"contIndice"},Y={key:0},H=["colspan"],Z={key:1},ee=["onDblclick"],oe={key:1,class:"sumativo text-primary"},ie={class:"text-center"};function te(e,o){var i=(0,n.g2)("q-icon"),t=(0,n.g2)("q-tooltip"),l=(0,n.g2)("q-spinner-oval"),s=(0,n.g2)("q-inner-loading");return(0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("div",q,[(0,n.bo)((0,n.Lk)("div",x,[(0,n.Lk)("div",null,[(0,n.Lk)("table",V,[o[2]||(o[2]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Salón")])],-1)),0==Object.keys(e.dataCriterios).length?((0,n.uX)(),(0,n.CE)("tbody",M,a()(o[0]||(o[0]=[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null," ")],-1)])))):((0,n.uX)(),(0,n.CE)("tbody",Q,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios,function(l,s){return(0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios[s],function(l,s){return(0,n.uX)(),(0,n.CE)("tr",{onDblclick:function(o){return e.verCriterios(l.detalle)}},[(0,n.Lk)("td",{title:l.detalle.salon},[(0,n.Lk)("div",U,[l.detalle.origenReplica?((0,n.uX)(),(0,n.CE)("span",X,[(0,n.bF)(i,{color:"green",name:"pesos_criterios"}),(0,n.bF)(t,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[1]||(o[1]=[(0,n.eW)("Origen de replica",-1)]))}),_:1})])):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",null,(0,r.v_)(l.detalle.salon),1)])],8,j)],40,w)}),256))],64)}),256))]))])])],512),[[R.aG,!e.mostrarDatos]])]),(0,n.Lk)("div",$,[(0,n.bF)(s,{visible:e.mostrarDatos},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,n.bo)((0,n.Lk)("div",G,[(0,n.Lk)("div",null,[(0,n.Lk)("table",B,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.columnas,function(e,t){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("th",{title:e.criterio+e.indice},[(0,n.Lk)("div",K,[(0,n.Lk)("div",z,[(0,n.bF)(i,{class:"q-mr-sm",name:e.icono||"share",style:(0,r.Tr)({color:e.color}),size:"23px"},null,8,["name","style"]),(0,n.Lk)("span",null,(0,r.v_)(e.criterio),1)]),(0,n.Lk)("div",J,(0,r.v_)(e.indice),1)])],8,W),o[3]||(o[3]=(0,n.Lk)("th",null,"Peso",-1))],64)}),256))])]),0==Object.keys(e.dataCriterios).length?((0,n.uX)(),(0,n.CE)("tbody",Y,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{class:"text-primary nomSalon",colspan:e.colspan},(0,r.v_)(e.$t("clase.noExistenClases")),9,H)])])):((0,n.uX)(),(0,n.CE)("tbody",Z,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios,function(t,a){return(0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios[a],function(t,a){return(0,n.uX)(),(0,n.CE)("tr",{onDblclick:function(o){return e.verCriterios(t.detalle)}},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.columnas,function(e,a){return(0,n.uX)(),(0,n.CE)(n.FK,null,[t.data[e.value+"_"+e.indice]?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("td",null,[(0,n.Lk)("div",{class:(0,r.C4)(["contCriterio",{excluido:t.data[e.value+"_"+e.indice].excluir}])},[t.data[e.value+"_"+e.indice].excluirPor?((0,n.uX)(),(0,n.Wv)(i,{key:0,name:"grid_off"})):(0,n.Q3)("v-if",!0),t.data[e.value+"_"+e.indice].sumativo?((0,n.uX)(),(0,n.CE)("span",oe,"Σ")):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",null,(0,r.v_)(t.data[e.value+"_"+e.indice].det),1)],2)]),(0,n.Lk)("td",ie,[(0,n.Lk)("span",{class:(0,r.C4)({excluido:t.data[e.value+"_"+e.indice].excluir})},(0,r.v_)(t.data[e.value+"_"+e.indice].peso),3)])],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[o[4]||(o[4]=(0,n.Lk)("td",{class:"text-center"},[(0,n.Lk)("div",null,"-")],-1)),o[5]||(o[5]=(0,n.Lk)("td",{class:"text-center"},"-",-1))],64))],64)}),256))],40,ee)}),256))],64)}),256))]))])])],512),[[R.aG,!e.mostrarDatos]])])])}var ae={emits:["verCriterios"],name:"listadoGeneral",props:{dataCriterios:Object,objNiveles:Object,mostrarDatos:Boolean},components:{QBtn:_.Il,QIcon:_.bP,QInnerLoading:_.SQ,QSpinnerOval:_.VA,QTooltip:_.nC},data:function(){return{}},computed:{columnas:function(){var e=[];for(var o in this.objNiveles)for(var i=1;i<=this.objNiveles[o].limite;i++)e.push({criterio:this.objNiveles[o].label,indice:i,value:this.objNiveles[o].value,icono:this.objNiveles[o].icon,color:this.objNiveles[o].color});return e},colspan:function(){return 2*this.columnas.length}},mounted:function(){},methods:{verCriterios:function(e){this.$emit("verCriterios",e)}},created:function(){}},ne=i(12807);const re=(0,ne.A)(ae,[["render",te]]);var le=re,se={class:"row q-ma-sm-xs"},ce={class:"col-auto row flex-center"},ue={class:"row q-ma-sm-xs"},de={class:"col-auto row flex-center"},fe={key:0,class:"row q-ma-sm-xs q-mt-lg-lg text-primary"},me={key:1,class:"row q-ma-sm-xs"},pe={class:"col-auto row flex-center"},ve={key:2,class:"row q-ma-sm-xs"},ge={class:"col-auto row flex-center"},Ce={key:3,class:"row q-ma-sm-xs"},be={class:"col-auto row flex-center"};function he(e,o){var i=(0,n.g2)("q-tab"),t=(0,n.g2)("q-icon"),l=(0,n.g2)("q-select"),s=(0,n.g2)("q-popup-edit"),c=(0,n.g2)("q-td"),u=(0,n.g2)("q-toggle"),d=(0,n.g2)("q-table"),f=(0,n.g2)("q-tab-pane"),m=(0,n.g2)("q-tabs"),p=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.Wv)(p,{class:"moda-registro-grupos-config",modelValue:e.verModal,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.verModal=o}),title:"Configuración Conducta",onClose:e.cerrarModal,header:!0,footer:!1,ok:!1},{default:(0,n.k6)(function(){return[(0,n.bF)(m,{inverted:"",ref:"tabs",animated:""},{title:(0,n.k6)(function(){return[(0,n.bF)(i,{default:"",name:"tab-1",label:"Configuración Criterios","no-caps":""})]}),default:(0,n.k6)(function(){return[(0,n.bF)(f,{name:"tab-1"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",se,[(0,n.Lk)("div",ce,[(0,n.bF)(t,{class:"q-mr-sm",name:"calendar_check_o",size:"28px"})]),o[2]||(o[2]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Límite replica anual:"),(0,n.Lk)("span",null,"Hasta que nivel de evaluación se va a replicar en todos los periodos del registro de conducta.")])],-1))]),(0,n.Lk)("div",ue,[(0,n.Lk)("div",de,[(0,n.bF)(t,{class:"q-mr-sm",name:"pesos_criterios",size:"28px"})]),o[3]||(o[3]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Nivel de edición pesos R.N.:"),(0,n.Lk)("span",null,"A partir de que nivel de evaluación se puede configurar los pesos y criterios en el registro de conducta.")])],-1))]),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",fe,a()(o[4]||(o[4]=[(0,n.Lk)("p",{class:"tituloCriterio"},"Habilitar campos en registro de pesos y criterios:",-1)])))):(0,n.Q3)("v-if",!0),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",me,[(0,n.Lk)("div",pe,[(0,n.bF)(t,{class:"q-mr-sm",name:"format_color_text",size:"28px"})]),o[5]||(o[5]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Mostrar Excluido:"),(0,n.Lk)("span",null,"Permite excluir un criterio del calculo del promedio.")])],-1))])):(0,n.Q3)("v-if",!0),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",ve,[(0,n.Lk)("div",ge,[(0,n.bF)(t,{class:"q-mr-sm",name:"functions",size:"28px"})]),o[6]||(o[6]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Mostrar Sumativo:"),(0,n.Lk)("span",null,'Habilita la configuración para que sus "criterios hijos" se sumen entre si para dar un promedio.')])],-1))])):(0,n.Q3)("v-if",!0),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",Ce,[(0,n.Lk)("div",be,[(0,n.bF)(t,{class:"q-mr-sm",name:"grid_off",size:"28px"})]),o[7]||(o[7]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Competencia no evaluada:"),(0,n.Lk)("span",null,"Bloquea la competencia y se considera como competencia no evaluada en el periodo.")])],-1))])):(0,n.Q3)("v-if",!0),(0,n.bF)(d,{class:"tblConfig q-ma-lg-md","table-style":"height: 80%",color:"secondary","hide-bottom":!0,data:e.config.data,columns:e.config.columns,pagination:e.config.pag,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.config.pag=o})},{"body-cell-LIMITE_REPLICA":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(o.row.LIMITE_REPLICA),1),(0,n.bF)(s,{class:"q-pa-xs",modelValue:o.row.LIMITE_REPLICA,"onUpdate:modelValue":function(e){return o.row.LIMITE_REPLICA=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:o.row.LIMITE_REPLICA,"onUpdate:modelValue":function(e){return o.row.LIMITE_REPLICA=e},options:e.config.optionsLR,onInput:function(i){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-EDICION_PESOS_PROFE":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(o.row.EDICION_PESOS_PROFE),1),(0,n.bF)(s,{class:"q-pa-xs",modelValue:o.row.EDICION_PESOS_PROFE,"onUpdate:modelValue":function(e){return o.row.EDICION_PESOS_PROFE=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:o.row.EDICION_PESOS_PROFE,"onUpdate:modelValue":function(e){return o.row.EDICION_PESOS_PROFE=e},options:e.config.optionsEP,onInput:function(i){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_EXCLUIDO":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.MOSTRAR_EXCLUIDO,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_EXCLUIDO=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(i){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_SUMATIVO":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.MOSTRAR_SUMATIVO,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_SUMATIVO=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(i){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_EXCL_PORCENTAJE":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.MOSTRAR_EXCL_PORCENTAJE,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_EXCL_PORCENTAJE=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(i){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1})]}),_:1},512)]}),_:1},8,["modelValue","onClose"])}var De=i(30640),Oe=i(80340),ke=i(57668),Ee=i(6583),Fe=i(982),Le=i(1862),Ie={emits:["cerrarModal"],name:"configuracionClase",props:{verCurricula:Boolean},components:{QCard:_.C$,QFab:_.l6,QFabAction:_.B$,QSelect:_.Si,QInput:_.ie,QInnerLoading:_.SQ,QSpinnerOval:_.VA,QToggle:_.c5,QTable:_.kH,QTh:_.EJ,QTr:_.qh,QTd:_.Ef,QPopupEdit:_.GT,QTabs:_.uw,QTab:_.zu,QTabPane:_.dg,sieModal:De.A,sieVacio:Oe.A,QIcon:_.bP},data:function(){return{verModal:!0,config:{modal:!1,data:[],columns:[],pag:{page:1,rowsPerPage:16},optionsLR:[],optionsEP:[],editConfig:!1},editConfig:!1}},computed:{},mounted:function(){},watch:{},methods:{cerrarModal:function(){this.$emit("cerrarModal")},configTabla:function(e){this.config.editConfig=e,this.config.columns=[{name:"NIVEL",label:this.$t("ngs.nivel"),field:"NIVEL",align:"left",sortable:!0},{name:"LIMITE_REPLICA",label:"Límite replica anual",field:"LIMITE_REPLICA",align:"center",sortable:!1},{name:"EDICION_PESOS_PROFE",label:"Nivel de edición pesos R.N",field:"EDICION_PESOS_PROFE",align:"center",sortable:!1}],e&&(this.config.columns.push({name:"MOSTRAR_EXCLUIDO",label:"Mostrar Excluido",field:"MOSTRAR_EXCLUIDO",align:"center",sortable:!1}),this.config.columns.push({name:"MOSTRAR_SUMATIVO",label:"Mostrar Sumativo",field:"MOSTRAR_SUMATIVO",align:"center",sortable:!1}),this.config.columns.push({name:"MOSTRAR_EXCL_PORCENTAJE",label:"Mostrar Excluido del %",field:"MOSTRAR_EXCL_PORCENTAJE",align:"center",sortable:!1}))},openConfig:function(){var e=this,o=(0,ke["default"])().ano;Promise.all([Le.A.obtDataConfigGeneralConducta(o)]).then(function(o){var i=E()(o,1),t=i[0];return e.config.data=(0,Ee["default"])(t.listado),e.configTabla(t.editConfig),Le.A.maxNivel()}).then(function(o){for(var i=[],t=1;t<=o.MAXIMO;t++)i.push({label:""+t,value:t});e.config.optionsLR=i,e.config.optionsEP=i,e.config.editConfig&&e.config.optionsEP.push({label:"NINGUNO",value:99})})},grabarConfig:function(e){var o=this;Le.A.actualizarConfigClase(e).then(function(e){e.message?(0,Fe["default"])(o.$t("mensajes.m0001"),"success"):(0,Fe["default"])(o.$t("mensajes.e0006"),"error")})}},created:function(){this.openConfig()}};const Se=(0,ne.A)(Ie,[["render",he]]);var _e=Se,Ae={class:"contCopiaMasa"},Te={class:"row"},Pe={class:"col-xs-12 col-md-4 q-pa-lg-sm"},Ne={class:"q-card"},Re={class:"q-pa-lg-sm text-primary tituloCopia"},ye={class:"q-pa-lg-sm"},qe={key:0,class:"row"},xe={class:"col"},Ve={class:"row"},Me={class:"col"},Qe={class:"row"},we={class:"col"},je={class:"q-pa-lg-sm text-primary tituloCriterio"},Ue={class:"row flex-lg-center"},Xe={class:"col"},$e={class:"col"},Ge={class:"q-pa-lg-sm"},Be={class:"row"},We={class:"col contArbolCriterios"},Ke={class:"col-xs-12 col-md-8 q-pa-lg-sm"},ze={class:"q-pa-lg-sm text-primary tituloCopia"},Je={class:"q-pa-lg-sm"},Ye={class:"row"},He={class:"col-xs-12 col-md-3"},Ze={class:"col-xs-12 col-md-3"},eo={class:"col-xs-12 col-md-6"},oo={class:"q-pa-lg-sm text-primary tituloCopia"},io={key:0,class:"q-pa-md-md infoCopia"},to={class:"text-bold"},ao={class:"q-mb-md-sm"},no={key:0,class:"sumativo text-primary"},ro={class:"text-center"};function lo(e,o){var i=(0,n.g2)("sie-select"),t=(0,n.g2)("q-select"),l=(0,n.g2)("arbolCriterios"),s=(0,n.g2)("q-table"),c=(0,n.g2)("q-icon"),u=(0,n.g2)("q-btn"),d=(0,n.g2)("q-tooltip"),f=(0,n.g2)("q-page-sticky");return(0,n.uX)(),(0,n.CE)("div",Ae,[(0,n.Lk)("div",Te,[(0,n.Lk)("div",Pe,[(0,n.Lk)("div",Ne,[(0,n.Lk)("div",Re,(0,r.v_)(e.$t("origen")),1),(0,n.Lk)("div",ye,[e.objDataOrigen.anios.length>1?((0,n.uX)(),(0,n.CE)("div",qe,[(0,n.Lk)("div",xe,[(0,n.bF)(i,{type:"outlined",modelValue:e.vmFiltroOrigen.anio,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmFiltroOrigen.anio=o}),options:e.objDataOrigen.anios,onSelected:e.cambiaAnio,label:"ANO",val:"ANO",placeholder:"ano"},null,8,["modelValue","options","onSelected"])])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",Ve,[(0,n.Lk)("div",Me,[(0,n.bF)(i,{type:"outlined",modelValue:e.vmFiltroOrigen.ambito,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.vmFiltroOrigen.ambito=o}),options:e.objDataOrigen.ambito,onSelected:e.cambiaAmbito,label:"NEMODES",val:"NEMO",placeholder:"ambito"},null,8,["modelValue","options","onSelected"])])]),(0,n.Lk)("div",Qe,[(0,n.Lk)("div",we,[(0,n.bF)(i,{type:"outlined",modelValue:e.vmFiltroOrigen.periodo,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.vmFiltroOrigen.periodo=o}),options:e.objDataOrigen.periodo,onSelected:e.cambiarPeriodo,label:"PERIODODES",val:"ID_CONDUCTA_PERIODO",placeholder:"periodo"},null,8,["modelValue","options","onSelected"])])]),o[6]||(o[6]=(0,n.Lk)("div",{class:"row"},null,-1))]),(0,n.Lk)("div",je,[(0,n.Lk)("div",Ue,[(0,n.Lk)("div",Xe,(0,r.v_)(e.$t("pesosYCriterios.criterios")),1),(0,n.Lk)("div",$e,[(0,n.bF)(t,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroOrigen.nivel,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.vmFiltroOrigen.nivel=o}),options:e.objDataOrigen.nivelEvaluacion,"float-label":e.$t("pesosYCriterios.mostrarHasta"),onInput:e.seleccionaNivelEva},null,8,["modelValue","options","float-label","onInput"])])])]),(0,n.Lk)("div",Ge,[(0,n.Lk)("div",Be,[(0,n.Lk)("div",We,[e.verCriteriosOrigen?((0,n.uX)(),(0,n.Wv)(l,{key:0,idPrincipal:e.dataTreeOrigen.treeIdPrincipal,idBD:e.dataTreeOrigen.idBD,objPosiBD:e.dataTreeOrigen.objPosiBD,treeBancoDatos:e.dataTreeOrigen.treeBancoDatos,verDetalle:!0,onObtNodoSeleccionado:e.valorArbolOrigen},null,8,["idPrincipal","idBD","objPosiBD","treeBancoDatos","onObtNodoSeleccionado"])):(0,n.Q3)("v-if",!0)])])])])]),(0,n.Lk)("div",Ke,[(0,n.Lk)("div",{class:(0,r.C4)(["q-card",{deshabilitarDestino:e.deshabilitarDestino}])},[(0,n.Lk)("div",ze,(0,r.v_)(e.$t("pesosYCriterios.destino")),1),(0,n.Lk)("div",Je,[(0,n.Lk)("div",Ye,[(0,n.Lk)("div",He,[(0,n.bF)(t,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroDestino.instrucod,options:e.objDataDestino.nivel,"float-label":e.$t("ngs.nivel"),onChange:e.cambiaNivelDestino},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",Ze,[(0,n.bF)(t,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltroDestino.gradocod,options:e.grados,"float-label":e.$t("ngs.grado"),onChange:e.cambiaGradoDestino,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",eo,[(0,n.bF)(t,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroDestino.periodo,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.vmFiltroDestino.periodo=o}),options:e.objDataDestino.periodos,"float-label":e.$t("periodo")},null,8,["modelValue","options","float-label"])])])]),(0,n.Lk)("div",oo,(0,r.v_)(e.$t("pesosYCriterios.cursosYgruposPorSalon")),1),(0,n.Lk)("div",null,[(0,n.bF)(s,{class:"q-ma-sm",selection:e.configTabla.selection,"row-key":"ngs",color:"secondary",data:e.dataAmbitoDes,columns:e.configTabla.columns,selected:e.configTabla.registrosSeleccionados,"onUpdate:selected":o[5]||(o[5]=function(o){return e.configTabla.registrosSeleccionados=o})},null,8,["selection","data","columns","selected"])]),e.infoCopia.length>0?((0,n.uX)(),(0,n.CE)("div",io,[o[8]||(o[8]=(0,n.Lk)("p",{class:"q-mb-md-sm"},"Los siguientes criterios solo se actualizaron sus descripciones, debido a que tienen notas y existen diferencias en el origen, las diferencias pueden ser: en el peso, criterio excluido o sumativo.",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.infoCopia,function(e){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("p",to,(0,r.v_)(e.SALON+" - PERIODO: "+e.PERIODO),1),(0,n.Lk)("p",ao,[(0,n.bF)(c,{name:e.ICONO,size:"28px",style:(0,r.Tr)({color:e.COLOR}),class:(0,r.C4)({excluido:e.EXCLUIR})},null,8,["name","style","class"]),e.SUMATIVO?((0,n.uX)(),(0,n.CE)("span",no," Σ ")):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",null,(0,r.v_)("("+e.PESO+") "+e.DESCRIPCION),1)])],64)}),256)),(0,n.Lk)("div",ro,[(0,n.bF)(u,{color:"secondary",icon:"check",onClick:e.entendido},{default:(0,n.k6)(function(){return a()(o[7]||(o[7]=[(0,n.eW)("Entendido",-1)]))}),_:1},8,["onClick"])])])):(0,n.Q3)("v-if",!0)],2)])]),(0,n.bF)(f,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{fab:"",round:"",color:"secondary",icon:"copy",onClick:e.procesarCopia},{default:(0,n.k6)(function(){return[(0,n.bF)(d,{anchor:"center left",self:"center right",offset:[5,0]},{default:(0,n.k6)(function(){return a()(o[9]||(o[9]=[(0,n.eW)("Copia de criterios en masa",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})])}i(70199),i(44264),i(7346);var so=i(93616),co=i(61602),uo=i(95523),fo=i(30545),mo={emits:["setCambioData"],name:"copiaCriteriosEnMasa",props:{pDataAmbito:Array,pDataNivel:Array,pDataGrado:Array,pDataPeriodos:Array},components:{QBtn:_.Il,QIcon:_.bP,QSelect:_.Si,QCheckbox:_.vZ,QTr:_.qh,QTh:_.EJ,QPageSticky:_._U,sieSelect:so.A,arbolCriterios:co.A,selectMultiple:uo.A,sieInfo:ke["default"],QTable:fo.A,QTooltip:_.nC},data:function(){return{vmFiltroDestino:{instrucod:null,gradocod:[],seccioncod:null,periodo:0,curricula:null},objDataDestino:{ambito:[],nivel:[],grado:[],seccion:[],periodos:[]},vmFiltroOrigen:{ambito:null,periodo:null,nivel:1,anio:(0,ke["default"])().ano.toString()},objDataOrigen:{periodo:[],ambito:[],nivelEvaluacion:[],anios:[]},objAmbitoSelected:{},objPeriodoSelected:{},dataTreeOrigen:{data:[],posiciones:{},treeIdPrincipal:0,idBD:0,objPosiBD:{},treeBancoDatos:[]},verCriteriosOrigen:!1,configTabla:{data:[],columns:[{name:"NGS",label:"NGS",field:"ngs",align:"left",sortable:!0},{name:"NEMO",label:"NEMO",field:"nemo",align:"left",sortable:!0},{name:"SALON",label:this.$t("ambito"),field:"nemodes",align:"left",sortable:!1}],pagination:{page:1,rowsPerPage:200},selection:"multiple",registrosSeleccionados:[]},idCurriculaTmp:null,idsOrigen:[],deshabilitarDestino:!0,infoCopia:[],totAmbitos:[]}},computed:{idCurricula:function(){var e=this.idCurriculaTmp;return this.objDataOrigen["periodo"].length>0&&(e=this.objDataOrigen.periodo[0].ID_PROGRAMA),e!==this.idCurriculaTmp&&(this.idCurriculaTmp=e),e},grados:function(){var e=this,o=this.pDataGrado;return this.vmFiltroDestino["instrucod"]?(o=o.filter(function(o){return e.vmFiltroDestino["instrucod"].indexOf(o.INSTRUCOD)>=0}),o=(0,A["default"])(o,function(e){return{label:e.GRADODES,value:e.INSTRUCOD+e.GRADOCOD}})):o=[],o},dataAmbitoDes:function(){var e=this,o=[];return this.limpiarDataDestino(),console.log(this.vmFiltroDestino.gradocod),this.vmFiltroDestino.gradocod.length>0&&(o=this.pDataAmbito,this.vmFiltroDestino.gradocod.length>0&&(o=o.filter(function(o){return e.vmFiltroDestino["gradocod"].some(function(e){return o.INSTRUCOD+o.GRADOCOD===e})})),o=(0,A["default"])(o,function(e){return{ngs:e.INSTRUCOD+e.GRADOCOD+e.SECCIONCOD,nemo:e.NEMO,nemodes:e.NEMODES,estado:1}})),o}},methods:{cambiaNivelDestino:function(e){this.vmFiltroDestino["instrucod"]=e,this.resetearDestino("nivel")},cambiaGradoDestino:function(e){this.vmFiltroDestino["gradocod"]=e,this.configTabla.registrosSeleccionados=this.dataAmbitoDes},cambiaAnio:function(){var e=S()(L()().m(function e(){return L()().w(function(e){while(1)switch(e.n){case 0:return this.resetearDataFiltro("anio"),this.limpiarDataDestino(),this.configTreeCriteriosOrigen(!0,1,0,0),this.deshabilitarDestino=!0,e.n=1,T.A.getSalones(this.vmFiltroOrigen.anio);case 1:this.objDataOrigen.ambito=e.v;case 2:return e.a(2)}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),limpiarDataDestino:function(){this.configTabla.data=[],this.configTabla.registrosSeleccionados=[]},dataIni:function(){this.objDataOrigen.ambito=this.pDataAmbito,this.objDataDestino.nivel=this.pDataNivel,this.objDataDestino.ambito=this.pDataAmbito,this.objDataDestino.periodos=JSON.parse(JSON.stringify(this.pDataPeriodos)),this.objDataDestino.periodos.unshift({label:"TODOS",value:0}),this.objDataOrigen.nivelEvaluacion=[{label:"Nivel 1",value:1},{label:"Nivel 2",value:2},{label:"Nivel 3",value:3},{label:"Nivel 4",value:4}]},resetearDataFiltro:function(e){switch(e){case"anio":case"ambito":this.objPeriodoSelected={},this.vmFiltroOrigen.periodo=null;break;case"periodo":break}},resetearDestino:function(e){switch(this.infoCopia=[],e){case"nivel":this.limpiarDataDestino(),this.vmFiltroDestino.gradocod=[];break;case"grabar":this.configTabla.data=[],this.configTabla.registrosSeleccionados=[];break}},cambiaAmbito:function(e){var o=this;this.resetearDataFiltro("ambito");var i=e.INSTRUCOD+e.GRADOCOD;this.objAmbitoSelected=e,this.vmFiltroDestino["instrucod"]=e.INSTRUCOD,this.vmFiltroDestino["gradocod"]=[i];var t=this.vmFiltroDestino["instrucod"]!==e.INSTRUCOD||this.vmFiltroDestino["gradocod"].indexOf(i)<0;this.configTreeCriteriosOrigen(!0,1,0,0),T.A.getPeriodoConducta(0,!0,e.NEMO).then(function(e){o.objDataOrigen.periodo=e,o.deshabilitarDestino=!1}),t||(this.configTabla.registrosSeleccionados=this.dataAmbitoDes)},cambiarPeriodo:function(e){var o=this;this.resetearDataFiltro("periodo"),this.objPeriodoSelected=e,this.verCriteriosOrigen=!1,T.A.getArbolCriterios(e.ID_CONTENIDO).then(function(i){o.dataTreeOrigen.data=i.data,o.dataTreeOrigen.posiciones=i.idPosicionBD,o.configTreeCriteriosOrigen(!1,o.vmFiltroOrigen.nivel,e.ID_CONTENIDO,e.ID_CONTENIDO)})},configTreeCriteriosOrigen:function(e,o,i,t){var a=this;this.idsOrigen=[],this.verCriteriosOrigen=!1,this.dataTreeOrigen.treeIdPrincipal=i,this.dataTreeOrigen.idBD=t,this.dataTreeOrigen.objPosiBD={},this.dataTreeOrigen.treeBancoDatos=[],e||new Promise(function(e,i){e(a.getDataNivelSeleccionado(o))}).then(function(e){var o=E()(e,2),i=o[0],t=o[1];a.dataTreeOrigen.objPosiBD=t,a.dataTreeOrigen.treeBancoDatos=i,a.verCriteriosOrigen=!0})},seleccionaNivelEva:function(e){this.configTreeCriteriosOrigen(!1,e,0,0)},valorArbolOrigen:function(e){this.idsOrigen=e},getDataNivelSeleccionado:function(e){var o=JSON.parse(JSON.stringify(this.dataTreeOrigen.data)),i=JSON.parse(JSON.stringify(this.dataTreeOrigen.posiciones)),t={};return this.recorreDataArbol(o,e,t,i),[o,t]},recorreDataArbol:function(e,o,i,t){var a=this;e.forEach(function(e){i[e.ID_CONTENIDO]=t[e.ID_CONTENIDO],e.NIVEL>=o?e.children=[]:a.recorreDataArbol(e.children,o,i,t)})},procesarCopia:function(){var e=this;if(this.deshabilitarDestino)return!1;if(this.idsOrigen.length<=0)return(0,Fe["default"])(this.$t("pesosYCriterios.seleccioneOrigen"),"error"),!1;if(1===this.idsOrigen.length&&this.objPeriodoSelected["ID_CONTENIDO"]===this.idsOrigen[0])return(0,Fe["default"])(this.$t("pesosYCriterios.noExistenCriterios"),"error"),!1;if(this.configTabla.registrosSeleccionados.length<=0)return(0,Fe["default"])(this.$t("pesosYCriterios.seleccioneDestino"),"error"),!1;this.deshabilitarDestino=!0;var o=this.$t.bind(this);this.$q.dialog({title:o("mensajes.m0115"),message:o("mensajes.m0010"),ok:o("botones.si"),cancel:o("botones.no"),preventClose:!0}).onOk(function(){var o=[];e.configTabla.registrosSeleccionados.forEach(function(e){o.push(e.nemo)});var i=e.dataTreeOrigen.data[0].ID_PROGRAMA;T.A.procesoCopiaMasiva(e.idsOrigen,o,e.vmFiltroDestino.periodo,i).then(function(o){1===o.estado?((0,Fe["default"])(e.$t("mensajes.m0008"),"success"),e.resetearDestino("grabar"),e.deshabilitarDestino=!1,e.$emit("setCambioData",0,!0),e.infoCopia=o.info):(0,Fe["default"])(e.$t("mensajes.m0009"),"error")}).catch(function(){return(0,Fe["default"])(e.$t("mensajes.m0009"),"error"),!1})}).onCancel(function(){return e.deshabilitarDestino=!1,!1})},entendido:function(){this.infoCopia=[]}},created:function(){var e=this;this.dataIni(),T.A.getAniosClase().then(function(o){e.objDataOrigen.anios=o})}};const po=(0,ne.A)(mo,[["render",lo]]);var vo=po,go=i(2819),Co={components:{QCard:_.C$,QPopover:_.VM,QSearch:_.Ks,QSelect:_.Si,QPageSticky:_._U,QToggle:_.c5,QFab:_.l6,QFabAction:_.B$,QRadio:_.$,QTable:fo.A,configuracionClase:_e,ConductaContenido:T.A,registroCriterios:N.A,sieSelect:so.A,sieVacio:Oe.A,listadoCriterios:le,copiaCriteriosEnMasa:vo,selectMultiple:uo.A,sieInfo:ke["default"],sieModal:De.A,QPage:_.Tu,QToolbar:_.ZV,QToolbarTitle:_.r_,QBtn:_.Il,QTooltip:_.nC},data:function(){return{vmFiltro:{salon:[],instrucod:[],gradocod:[],seccioncod:null,periodo:1,curricula:null},dataSelect:{salones:[],nivel:[],grado:[],seccion:[]},gradosTemp:[],dataCurricula:[],perinum:4,objNiveles:{},dataCriteriosTemp:{},dtPeriodos:[],loadCriterios:!0,dataCompCriterios:{},verComponentes:{registroCriterio:!1,copiaEnMasa:!1,listadoGeneral:!0},titulo:"Criterios de conducta",subtitulo:"",repcod:"criteriosPorSalon",objReportes:T.A.reportes(),openModal:{reportes:!1,config:!1},optionsPeriodoCriterio:[],vmConductaPeriodo:null,cambioData:!1,sie:(0,ke["default"])()}},computed:{grados:function(){var e=this,o=this.gradosTemp;return this.vmFiltro["gradocod"]=[],this.vmFiltro["instrucod"].length>0?(o=o.filter(function(o){return e.vmFiltro["instrucod"].some(function(e){return o.INSTRUCOD===e})}),o=(0,A["default"])(o,function(e){return{label:e.GRADODES,value:e.INSTRUCOD+e.GRADOCOD}})):o=[],o},dataAmbito:function(){var e=this,o=this.dataSelect.salones;return this.vmFiltro.salon=[],this.vmFiltro.gradocod.length>0?o=o.filter(function(o){return e.vmFiltro["gradocod"].some(function(e){return o.INSTRUCOD+o.GRADOCOD===e})}):this.vmFiltro.instrucod.length>0&&(o=o.filter(function(o){return e.vmFiltro["instrucod"].some(function(e){return o.INSTRUCOD===e})})),o=(0,A["default"])(o,function(e){return{label:e.NEMODES,value:e.NEMO}}),o},dataCriterios:function(){var e=this.dataCriteriosTemp,o={};return this.vmFiltro.salon.length>0?(this.vmFiltro.salon.sort().forEach(function(i){e["_"+i]&&(o["_"+i]=e["_"+i])}),e=o):(this.vmFiltro.gradocod.length>0||this.vmFiltro.instrucod.length>0)&&(o={},this.dataAmbito.forEach(function(i){e["_"+i.value]&&(o["_"+i.value]=e["_"+i.value])}),e=o),e}},methods:{seleccionaInstru:function(e){this.vmFiltro.instrucod=e},seleccionaGrado:function(e){this.vmFiltro.gradocod=e},seleccionaAmbito:function(e){this.vmFiltro.salon=e},seleccionaPeriodo:function(e){this.vmFiltro.periodo=e,this.listarDataCriterios()},seleccionaCurricula:function(e){this.vmFiltro.curricula=e,this.listarDataCriterios()},loadSalones:function(){var e=S()(L()().m(function e(){return L()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,T.A.getSalones();case 1:this.dataSelect.salones=e.v;case 2:return e.a(2)}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),loadPeriodos:function(e){for(var o=[],i=1;i<=e;i++)o.push({label:"PERIODO "+i,value:i});this.dtPeriodos=o},dataIni:function(){var e=this;Promise.all([P.A.getNiveles(),P.A.getGrados()]).then(function(o){var i=E()(o,2),t=i[0],a=i[1];e.dataSelect.nivel=(0,A["default"])(t,function(e){return{label:e.INSTRUDES,value:e.INSTRUCOD}}),e.gradosTemp=a}),this.loadSalones()},listarDataCriterios:function(){var e=this;this.loadCriterios=!0,T.A.listadoCriteriosFiltro(this.vmFiltro["periodo"],this.vmFiltro["curricula"]).then(function(o){e.dataCriteriosTemp=o,e.loadCriterios=!1,e.cambioData=!1})},mostrarComponentes:function(e){this.verComponentes.registroCriterio=!1,this.verComponentes.copiaEnMasa=!1,this.verComponentes.listadoGeneral=!1,this.verComponentes[e]=!0},setCambioData:function(e,o){this.cambioData=e===this.vmFiltro.periodo||o},volver:function(){this.titulo="registroDeNotas.pesosYCriterios",this.subtitulo="",this.mostrarComponentes("listadoGeneral"),this.cambioData&&this.listarDataCriterios()},verCriterios:function(e){this.dataCompCriterios["periodoSelected"]={ID_CONDUCTA_SALON:e.idConducta,ID_CONDUCTA_PERIODO:e.idConductaPeriodo,PERIODO:this.vmFiltro["periodo"],ID_CONDUCTA_CONTENIDO:e.idContenidoPrin,ID_CONTENIDO:e.idContenido,PERIODODES:this.vmFiltro["periodo"]+" PERIODO"},this.dataCompCriterios["conductaSelected"]={ID_CONDUCTA_SALON:e.idConducta,NGS:e.ngs,NEMO:e.nemo,ANUAL_REPLICA:e.anualReplica,ORIGEN_REPLICA:e.origenReplica},this.subtitulo=": "+e.salon,this.cargarPeriodosPorClase(e.idConducta,e.idConductaPeriodo),this.cambioData=!1,this.mostrarComponentes("registroCriterio")},modalReportes:function(){this.openModal.reportes=!0},exportar:function(e){var o={formato:e,repcod:this.repcod,periodo:this.vmFiltro["periodo"],salones:this.vmFiltro["salon"],grados:this.vmFiltro["gradocod"],nivel:this.vmFiltro["instrucod"],ano:(0,ke["default"])().ano};(0,go.exportFilePhp)(o,"webservice/reportes/reporte")},verCopiaEnMasa:function(){this.paramData={ambito:this.dataSelect.salones,nivel:this.dataSelect.nivel,grado:this.gradosTemp,periodos:this.dtPeriodos},this.cambioData=!1,this.titulo="pesosYCriterios.copia",this.mostrarComponentes("copiaEnMasa")},abrirModalConfig:function(){this.openModal.config=!0},cerrarModalConfig:function(){this.openModal.config=!1},cargarPeriodosPorClase:function(e,o){var i=this;T.A.getPeriodoConducta(e).then(function(e){i.optionsPeriodoCriterio=e,i.vmConductaPeriodo=o})},cambiarClasePeriodo:function(e){this.dataCompCriterios["periodoSelected"]=e,this.mostrarComponentes("registroCriterio")}},created:function(){var e=this;this.dataIni(),T.A.getDataIni().then(function(o){e.dataCurricula=o["curricula"],e.perinum=o["perinum"],e.objNiveles=o["nivel1"],e.dataCriteriosTemp=o["data"],e.vmFiltro.curricula=e.dataCurricula[0].value,e.loadPeriodos(e.perinum),e.loadCriterios=!1})}};const bo=(0,ne.A)(Co,[["render",O]]);var ho=bo}}]);