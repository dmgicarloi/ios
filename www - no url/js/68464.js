"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[68464],{68464:function(e,r,t){t.r(r),t.d(r,{default:function(){return K}});t(71225),t(56285),t(50310),t(5962),t(83190);var a=t(61758),n={class:"row items-center no-wrap"},o={class:"col-auto"},l={class:"filter-section"},c={class:"row q-pa-sm q-col-gutter-sm"},i={class:"col-12"},u={class:"col-12"},s={class:"col-12"},d={class:"row q-pa-sm q-col-gutter-sm"},m={class:"checkbox-grafico",style:{"margin-top":"2rem"}},f={class:"checkbox-field"},p={class:"checkbox-section"},h={class:"checkbox-field"},R={class:"checkbox-field"},w={class:"checkbox-field"};function b(e,r){var t=(0,a.g2)("q-btn"),b=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-separator"),k=(0,a.g2)("q-search"),g=(0,a.g2)("sie-grid"),L=(0,a.g2)("footer-grid"),x=(0,a.g2)("q-input"),V=(0,a.g2)("q-checkbox"),D=(0,a.g2)("sie-modal"),C=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(C,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(b,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",n,[r[11]||(r[11]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("div",{class:"text-h6"},"Reportes")],-1)),(0,a.Lk)("div",o,[(0,a.bF)(t,{class:"q-mr-sm",icon:"add",color:"primary",label:"Nuevo",size:"sm",onClick:e.crearReporte},null,8,["onClick"])])])]}),_:1}),(0,a.bF)(v),(0,a.bF)(b,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",l,[(0,a.bF)(k,{class:"input-filter",modelValue:e.filter.name,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.filter.name=r}),onInput:e.searchNombre,placeholder:"Nombre Reporté",icon:"search"},null,8,["modelValue","onInput"]),(0,a.bF)(k,{class:"input-filter",modelValue:e.filter.url,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.filter.url=r}),onInput:e.searchUrl,placeholder:"URL Reporté",icon:"search"},null,8,["modelValue","onInput"])]),(0,a.bF)(g,{class:"fix-tab-height ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onRowSelected:e.rowSelected,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents},null,8,["columnDefs","rowData","onRowSelected","onGridReady","frameworkComponents"]),(0,a.bF)(L,{modelValue:e.pagina,"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.pagina=r}),max:e.pages,onLoad:e.searchNombre,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,a.bF)(D,{title:"Reportes",modelValue:e.openModal,"onUpdate:modelValue":r[10]||(r[10]=function(r){return e.openModal=r}),onSubmit:e.saveReporte},{default:(0,a.k6)(function(){return[r[17]||(r[17]=(0,a.Lk)("div",{class:"row q-pa-sm q-col-gutter-sm"},[(0,a.Lk)("h3",null,[(0,a.Lk)("b",null,"Agregar Reporte")])],-1)),(0,a.Lk)("div",c,[(0,a.Lk)("div",i,[(0,a.bF)(x,{class:"placeholder",editable:!1,modelValue:e.form.id_reporte,"onUpdate:modelValue":r[3]||(r[3]=function(r){return e.form.id_reporte=r}),label:"Código",type:"number",placeholder:"Código"},null,8,["modelValue"])]),(0,a.Lk)("div",u,[(0,a.bF)(x,{class:"placeholder",modelValue:e.form.nombre,"onUpdate:modelValue":r[4]||(r[4]=function(r){return e.form.nombre=r}),label:"Nombre",placeholder:"Ingrese nombre"},null,8,["modelValue"])]),(0,a.Lk)("div",s,[(0,a.bF)(x,{class:"placeholder",modelValue:e.form.url,"onUpdate:modelValue":r[5]||(r[5]=function(r){return e.form.url=r}),label:"URL",placeholder:"Ingrese URL"},null,8,["modelValue"])])]),(0,a.Lk)("div",d,[(0,a.Lk)("div",m,[(0,a.Lk)("div",f,[r[12]||(r[12]=(0,a.Lk)("p",null,"Gráfico Estadístico",-1)),(0,a.bF)(V,{modelValue:e.form.grafico,"onUpdate:modelValue":r[6]||(r[6]=function(r){return e.form.grafico=r}),"true-value":1,"false-value":0},null,8,["modelValue"])])]),(0,a.Lk)("div",p,[r[16]||(r[16]=(0,a.Lk)("p",null,"Formatos",-1)),(0,a.Lk)("div",h,[r[13]||(r[13]=(0,a.Lk)("label",{for:"XLS"},"XLS",-1)),(0,a.bF)(V,{modelValue:e.form.xls,"onUpdate:modelValue":r[7]||(r[7]=function(r){return e.form.xls=r}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,a.Lk)("div",R,[r[14]||(r[14]=(0,a.Lk)("label",{for:"PDF"},"PDF",-1)),(0,a.bF)(V,{modelValue:e.form.pdf,"onUpdate:modelValue":r[8]||(r[8]=function(r){return e.form.pdf=r}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,a.Lk)("div",w,[r[15]||(r[15]=(0,a.Lk)("label",{for:"txt"},"TXT",-1)),(0,a.bF)(V,{modelValue:e.form.txt,"onUpdate:modelValue":r[9]||(r[9]=function(r){return e.form.txt=r}),"true-value":1,"false-value":0},null,8,["modelValue"])])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})]}),_:1})}var v=t(76080),k=t.n(v),g=t(45254),L=t.n(g),x=(t(39866),t(11777),t(62692),t(68017),t(88567)),V=t(95718),D=t(75053),C=t(64208),F=t(3112),U=t(8445),A=t.n(U),I=t(80660),N=t(33001),P=t(16648),S={components:{QSelect:P.A},data:function(){return{options:[],value:null}},beforeMount:function(){var e=this;return L()(k()().m(function r(){var t;return k()().w(function(r){while(1)switch(r.n){case 0:if(t=[],"string"!==typeof e.params.api){r.n=2;break}return r.n=1,I.$http.get(e.params.api,{params:{response:"combo"}});case 1:t=r.v,r.n=3;break;case 2:t=e.params.options||[];case 3:e.options=A()(t),e.value=e.params.value||e.params.defaultvalue;case 4:return r.a(2)}},r)}))()},render:function(){var e=this;return(0,a.h)(P.A,{modelValue:e.value,options:e.options,"hide-selected":!0,"fill-input":!0,"use-input":!0,onInput:function(r){e.value=r,e.params.setValue(r)},onFilter:function(r,t){t(function(){var t=A()(e.params.options);e.options=(0,N.filterArray)(r,{field:e.params.dLabel||"label",list:t})})}})}},T=t(10213),E=t(36408),X=t(78840),O=t(6123),_=t(27560),M=t(57668),q=["checked"];function y(e,r){return(0,a.uX)(),(0,a.CE)("input",{type:"checkbox",onClick:r[0]||(r[0]=function(r){return e.checkedHandler(r,e.params)}),checked:e.params.value},null,8,q)}var G={name:"checkboxRender",props:{},methods:{checkedHandler:function(e,r){r.data[r.name]=e.target.checked?1:0}}},Q=t(12807);const B=(0,Q.A)(G,[["render",y]]);var $=B,z=t(53380),H={components:{QCard:x.A,QCardSection:V.A,sieModal:D.A,QInput:C.A,QCheckbox:F.A,sieGrid:E.A,actionButton:X.A,select:S,QPagination:O.ao,QSearch:O.Ks,footerGrid:_.A,QSelect:O.Si,checkboxRender:$,QSeparator:z.A,QBtn:O.Il},data:function(){return{nivelAcceso:(0,M["default"])().ruta.nivel,api:{},pagina:1,pages:2,filter:{name:"",url:"",act:""},options:[{label:"pdf",value:"PDF"},{label:"xls",value:"XLS"},{label:"txt",value:"TXT"},{label:"grafico",value:"grafico"}],optionValue:{label:"elija",value:"index"},apiUrl:"api/ReporteController",frameworkComponents:{},buttons:[{label:"NUEVO",icon:"plus",click:this.crearReporte}],rowData:[],columnDefs:[],form:{id_reporte:0,nombre:"",url:"",xls:0,pdf:0,grafico:0,txt:0},data:[],openModal:!1,mode:"new",currentRow:null}},beforeMount:function(){var e=this;return L()(k()().m(function r(){return k()().w(function(r){while(1)switch(r.n){case 0:return e.frameworkComponents={actionButton:X.A,select:S,QCheckbox:F.A,checkboxRenderer:$},e.created(),r.n=1,e.$http.get("".concat(e.apiUrl,"/getReporte"));case 1:e.rowData=r.v,e.getId();case 2:return r.a(2)}},r)}))()},methods:{getId:function(){var e=this.rowData[this.rowData.length-1].ID_REPORTE;this.form.id_reporte=Number(e)+1},filterData:function(e,r){var t=this;return L()(k()().m(function a(){var n,o;return k()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,t.$http.get("".concat(t.apiUrl,"/getReporte"));case 1:n=a.v,""!==t.filter[r].trim()?(o=n.filter(function(a){return a[e].toLowerCase().includes(t.filter[r].toLowerCase())}),t.rowData=o):t.rowData=n;case 2:return a.a(2)}},a)}))()},searchNombre:function(){this.filterData("NOMBRE","name")},searchUrl:function(){this.filterData("URL","url")},searchActiv:function(){console.log(this.filter.act)},getData:function(){var e=this;return L()(k()().m(function r(){var t;return k()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,I.$http.get("api/ReporteController/getReporte");case 1:t=r.v,e.rowData=t,r.n=3;break;case 2:r.p=2,r.v;case 3:return r.a(2)}},r,null,[[0,2]])}))()},created:function(){var e=this;return L()(k()().m(function r(){return k()().w(function(r){while(1)switch(r.n){case 0:e.columnDefs=[{headerName:"Código",field:"ID_REPORTE",editable:!0,width:100},{headerName:"Nombre",field:"NOMBRE",editable:!0,width:255},{headerName:"URL",field:"URL",editable:!0,width:255},{headerName:"Gráfico",field:"GRAFICO",cellRenderer:checkboxRenderer,cellRendererParams:{name:"GRAFICO"},width:70},{headerName:"PDF",field:"PDF",width:70,cellRendererParams:{name:"PDF"},cellRenderer:checkboxRenderer},{headerName:"XLS",field:"XLS",cellRenderer:checkboxRenderer,cellRendererParams:{name:"XLS"},width:70},{headerName:"TXT",field:"TXT",cellRenderer:checkboxRenderer,cellRendererParams:{name:"TXT"},width:70},{cellRenderer:X.A,width:40,cellRendererParams:{icon:"save",title:"Actualizar",onClick:function(e){var r=this;this.currentRow=[e.data];var t={id_reporte:this.currentRow[0]["ID_REPORTE"],nombre:this.currentRow[0]["NOMBRE"],url:this.currentRow[0]["URL"],xls:this.currentRow[0]["XLS"],pdf:this.currentRow[0]["PDF"],grafico:this.currentRow[0]["GRAFICO"],txt:this.currentRow[0]["TXT"]};(0,T.confirm)("¿Realmente desea actualizar este reporté?","update").onOk(L()(k()().m(function e(){var a;return k()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,I.$http.post("api/ReporteController/updateReporte",{params:t,id:r.currentRow[0].id_reporte});case 1:e.n=3;break;case 2:e.p=2,a=e.v,(0,T.alert)(a.error.message);case 3:return e.a(2)}},e,null,[[0,2]])})))}}},{cellRenderer:X.A,width:40,cellRendererParams:{icon:"delete",title:"eliminar",onClick:e.deleteReporte}}];case 1:return r.a(2)}},r)}))()},changeCheckbox:function(e){console.dir(e.target)},onGridReady:function(e){this.api=e.api},rowSelected:function(e){this.currentRow=e.data},crearReporte:function(){this.getId(),this.openModal=!0,this.clear(),this.mode="new"},closeModel:function(){this.openModal=!1},updateReporte:function(){this.currentRow?(this.mode="update",this.form.nombre=this.currentRow.NOMBRE,this.form.url=this.currentRow.URL,this.form.id_reporte=this.currentRow.ID_REPORTE,this.form.grafico=this.currentRow.GRAFICO,this.form.pdf=this.currentRow.PDF,this.form.xls=this.currentRow.XLS,this.form.txt=this.currentRow.TXT,this.openModal=!0):(0,T.alert)("no se a selecciondo ninguna fila")},deleteReporte:function(){var e=this;return L()(k()().m(function r(){return k()().w(function(r){while(1)switch(r.n){case 0:(0,T.confirm)("¿Realmente desea eliminar este registro?","delete").onOk(L()(k()().m(function r(){return k()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,I.$http.delete("".concat(e.apiUrl,"/deleteReporte"),{params:{id:e.currentRow.ID_REPORTE}});case 1:r.n=3;break;case 2:r.p=2,r.v;case 3:e.getData();case 4:return r.a(2)}},r,null,[[0,2]])})));case 1:return r.a(2)}},r)}))()},saveReporte:function(){var e=this;return L()(k()().m(function r(){var t;return k()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,I.$http.post("".concat(e.apiUrl,"/addReporte"),{data:e.form});case 1:e.clear(),e.getData(),e.openModal=!1,r.n=3;break;case 2:r.p=2,t=r.v,(0,T.alert)(t.error.message);case 3:return r.a(2)}},r,null,[[0,2]])}))()},clear:function(){this.form.nombre="",this.form.url="",this.form.xls=0,this.form.pdf=0,this.form.grafico=0,this.form.txt=0}}};const j=(0,Q.A)(H,[["render",b]]);var K=j}}]);