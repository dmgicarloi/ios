"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[51667],{51667:function(e,a,o){o.r(a),o.d(a,{default:function(){return xe}});var t=o(8445),n=o.n(t),r=(o(15547),o(61758)),i=o(29104),l=o(58790),c={class:"row q-pb-md"},s={class:"col"},u={class:"gutter-xs row q-pl-sm q-pr-sm"},d={class:"col-xs-12 col-sm-3"},p={class:"col-xs-12 col-sm-5"},m={class:"column justify-center ptotal"},f={class:"col-xs-12 col-sm-3"},h={class:"col-xs-12"},g={class:"col-xs-12"},A={class:"col-xs-12 col-sm-1"},C={key:0,class:"gutter-xs row q-pl-sm q-pr-sm"},v={class:"col-xs-12 col-sm-3"},b={class:"col-xs-12"},O={class:"q-pl-sm q-pr-sm"},E={class:"row q-ma-xs q-col-gutter-sm"},F={class:"text-h6"},I={class:"row q-ma-xs q-col-gutter-sm"},D={class:"col-xs-12"},N={class:"col-xs-6"},w={class:"col-xs-6"},R={class:"col-xs-6"},P={class:"col-xs-6"},M={class:"col-xs-6"},k={class:"col-xs-6"},T={class:"row q-mt-sm"},_={class:"col headerTable"},V={class:"row q-ma-xs q-col-gutter-sm"},B={class:"col-xs-12"},S={class:"col-xs-12"},x={class:"col-xs-12"},L={class:"col-xs-6"},U={class:"col-xs-6"},y={class:"col-xs-6"},Y={class:"col-xs-6"},G={class:"col-xs-6"},q={class:"col-xs-6"};function $(e,a){var o=(0,r.g2)("page-header"),t=(0,r.g2)("tesoreriaLoading"),$=(0,r.g2)("q-separator"),H=(0,r.g2)("q-select"),Q=(0,r.g2)("q-option-group"),z=(0,r.g2)("q-card-main"),W=(0,r.g2)("q-card"),X=(0,r.g2)("sie-upload"),K=(0,r.g2)("router-link"),j=(0,r.g2)("q-alert"),J=(0,r.g2)("q-input"),Z=(0,r.g2)("q-date"),ee=(0,r.g2)("q-popup-proxy"),ae=(0,r.g2)("q-icon"),oe=(0,r.g2)("q-btn"),te=(0,r.g2)("sie-grid"),ne=(0,r.g2)("footer-grid"),re=(0,r.g2)("q-card-section"),ie=(0,r.g2)("q-checkbox"),le=(0,r.g2)("sie-modal"),ce=(0,r.g2)("imprimir-lote"),se=(0,r.g2)("mantenimiento");return(0,r.uX)(),(0,r.Wv)(W,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(o,{botones:e.pageHeader.buttons,title:e.pageHeader.title,tabs:e.pageHeader.tabs,onActionTab:e.changeTab,componente:e.pageHeader.componente,nivelAcceso:e.pageHeader.nivelAcceso,useTab:""},null,8,["botones","title","tabs","onActionTab","componente","nivelAcceso"]),(0,r.bF)(t,{modelValue:e.loading.showLoading,total:e.loading.total,procesados:e.loading.procesados,label:e.loading.label},null,8,["modelValue","total","procesados","label"]),(0,r.bo)((0,r.bF)($,null,null,512),[[i.aG,e.pageHeader.tabActivo===e.pageHeader.tabKeys.index]]),(0,r.bo)((0,r.bF)(re,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",c,[(0,r.Lk)("div",s,[(0,r.bF)(H,{modelValue:e.selectServicio,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.selectServicio=a}),"option-label":"CTA","option-value":"ID_CTASERVICIO",options:e.servicio,label:"Cuenta Bancaria - Servicio",onInput:e.getPagosBancoAutomatico},null,8,["modelValue","options","onInput"])])]),(0,r.Lk)("div",u,[(0,r.Lk)("div",d,[(0,r.bF)(W,{class:"q-card-legend",title:"Orden"},{default:(0,r.k6)(function(){return[(0,r.bF)(z,{class:"row"},{default:(0,r.k6)(function(){return[(0,r.bF)(Q,{color:"primary",type:"radio",modelValue:e.selectTipo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.selectTipo=a}),options:e.tipo,onInput:e.getPagosBancoAutomatico},null,8,["modelValue","options","onInput"])]}),_:1})]}),_:1})]),(0,r.Lk)("div",p,[(0,r.bF)(W,{class:"q-card-legend"},{default:(0,r.k6)(function(){return[(0,r.bF)(z,{class:"row"},{default:(0,r.k6)(function(){return[(0,r.bF)(X,{"only-button":!0,preview:!1,onUpload:e.uploadFileBanco,allow:["txt","xlsx","xls","s01","s02","23m","23M","csv","CSV"]},null,8,["onUpload"])]}),_:1}),0==e.totalErrores?((0,r.uX)(),(0,r.Wv)(z,{key:0,class:"row"},{default:(0,r.k6)(function(){return[(0,r.Lk)("p",m,[(0,r.Lk)("b",null,"Total a Pagar: "+(0,l.v_)(e.total.moneda)+(0,l.v_)(e.total.monto.toFixed(2)),1)])]}),_:1})):(0,r.Q3)("v-if",!0),e.totalErrores>0?((0,r.uX)(),(0,r.Wv)(z,{key:1,class:"row"},{default:(0,r.k6)(function(){return[(0,r.bF)(j,{class:"q-pl-md q-pr-md col-xs-12",type:"warning"},{default:(0,r.k6)(function(){return[a[40]||(a[40]=(0,r.eW)("Existen errores en la importación!!",-1)),(0,r.bF)(K,{to:{},onClick:e.loadModal},{default:(0,r.k6)(function(){return n()(a[39]||(a[39]=[(0,r.eW)("click Aquí para ver Detalle",-1)]))}),_:1},8,["onClick"])]}),_:1})]}),_:1})):(0,r.Q3)("v-if",!0)]}),_:1})]),(0,r.Lk)("div",f,[(0,r.bF)(W,{class:"q-card-legend"},{default:(0,r.k6)(function(){return[(0,r.bF)(z,{class:"row gutter-xs"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",h,[(0,r.bF)(J,{modelValue:e.correlativo,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.correlativo=a}),readonly:"",label:"Nro. Documento"},null,8,["modelValue"])]),(0,r.Lk)("div",g,[(0,r.bF)(J,{class:"tesoreria-components-date","reverse-fill-mask":"",modelValue:e.mfecha,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.mfecha=a}),maxlength:"10",mask:"##/##/####",label:"Filtrar Fecha Pago",onInput:e.changeDate},{append:(0,r.k6)(function(){return[(0,r.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{mask:"DD/MM/YYYY",modelValue:e.mfecha,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.mfecha=a}),onInput:e.changeDate},null,8,["modelValue","onInput"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","onInput"])])]}),_:1})]}),_:1})]),(0,r.Lk)("div",A,[e.mostrarBotonAdd?((0,r.uX)(),(0,r.Wv)(oe,{key:0,class:"btn-decorative",color:"primary",icon:"add_shopping_cart",size:"sm",label:"Agregar Pago",onClick:e.openModalAgregar},null,8,["onClick"])):(0,r.Q3)("v-if",!0)])]),e.cargoAtumatico?((0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("div",v,[(0,r.bF)(W,{class:"q-card-legend",title:"Cargo Automático"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",b,[(0,r.bF)(J,{class:"tesoreria-components-date","reverse-fill-mask":"",modelValue:e.cfecha,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.cfecha=a}),maxlength:"10",mask:"##/##/####",label:"Fecha de Cargo Automático",onInput:e.changeDateCAuto},{append:(0,r.k6)(function(){return[(0,r.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{ref:"qDateProxyCAuto","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{mask:"DD/MM/YYYY",modelValue:e.cfecha,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.cfecha=a}),onInput:e.changeDateCAuto},null,8,["modelValue","onInput"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","onInput"])])]}),_:1})])])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",O,[(0,r.bF)(te,{class:"q-mt-xs fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,frameworkComponents:e.frameworkComponents,onGridReady:e.onGridReady,rowSelection:"multiple",groupUseEntireRow:!0,columnTypes:e.columnTypes,groupRowInnerRenderer:e.groupRowInnerRenderer,suppressAggFuncInHeader:!0,onRowSelected:e.getSelectedRow,style:{height:"calc(100vh - 440px)"}},null,8,["columnDefs","rowData","frameworkComponents","onGridReady","columnTypes","groupRowInnerRenderer","onRowSelected"]),(0,r.bF)(ne,{modelValue:e.pagina,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getPagosBancoAutomatico,rows:e.rowData,contador:e.seleccionados,showContador:""},null,8,["modelValue","max","onLoad","rows","contador"])])]}),_:1},512),[[i.aG,e.pageHeader.tabActivo===e.pageHeader.tabKeys.index]]),(0,r.bF)(le,{modelValue:e.modalFormatos,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.modalFormatos=a}),labelButtonOk:"Exportar",onSubmit:e.exportarReporte},{default:(0,r.k6)(function(){return[a[42]||(a[42]=(0,r.Lk)("form",{class:"form",id:"form"},null,-1)),(0,r.bF)(re,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",E,[(0,r.Lk)("div",F,(0,l.v_)(e.titleFormatos),1)])]}),_:1}),(0,r.bF)(re,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",I,[(0,r.Lk)("div",D,[(0,r.bF)(H,{class:"truncate-label",modelValue:e.reporteCuentaBanco,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.reporteCuentaBanco=a}),"option-label":"CTA","option-value":"ID_CTASERVICIO",options:e.servicio,label:"Cuenta Bancaria - Servicio"},null,8,["modelValue","options"])]),(0,r.Lk)("div",N,[(0,r.bF)(J,{"reverse-fill-mask":"",maxlength:"10",mask:"##/##/####",label:"Fecha Inicio",modelValue:e.fechaInicio,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.fechaInicio=a})},{append:(0,r.k6)(function(){return[(0,r.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{mask:"DD/MM/YYYY",modelValue:e.fechaInicio,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.fechaInicio=a}),onInput:a[10]||(a[10]=function(a){return e.closeModalInicio("qDateProxy1")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",w,[(0,r.bF)(J,{"reverse-fill-mask":"",maxlength:"10",mask:"##/##/####",label:"Fecha Fin",modelValue:e.fechafinal,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.fechafinal=a})},{append:(0,r.k6)(function(){return[(0,r.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{mask:"DD/MM/YYYY",modelValue:e.fechafinal,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.fechafinal=a}),onInput:a[13]||(a[13]=function(a){return e.closeModalFin("qDateProxy2")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",R,[(0,r.bF)(H,{label:"Cobro/banco",options:e.dataCobroBanco,"option-label":"VALOR","option-value":"CLAVE",modelValue:e.cobroBanco,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.cobroBanco=a}),placeholder:"Totales"},null,8,["options","modelValue"])]),(0,r.Lk)("div",P,[(0,r.bF)(H,{label:"Orden",options:e.dataOrden,"option-label":"label","option-value":"value",modelValue:e.orden,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.orden=a})},null,8,["options","modelValue"])]),(0,r.Lk)("div",M,[(0,r.bF)(ie,{modelValue:e.agruparConcepto,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.agruparConcepto=a}),onInput:a[18]||(a[18]=function(a){return e.deshabilitarOpciones({dato:"concepto"})})},{default:(0,r.k6)(function(){return n()(a[41]||(a[41]=[(0,r.eW)("Agrupar pagos por Concepto",-1)]))}),_:1},8,["modelValue"])]),(0,r.Lk)("div",k,[(0,r.bF)(Q,{name:"Reporte",color:"purple",options:e.buttonsFormato,inline:"",modelValue:e.tipoReporteFormato,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.tipoReporteFormato=a})},null,8,["options","modelValue"])])])]}),_:1})]}),_:1},8,["modelValue","onSubmit"]),(0,r.bF)(le,{modelValue:e.openModal,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.openModal=a}),labelButtonOk:"Aceptar",onSubmit:e.cerrarModal},{default:(0,r.k6)(function(){return[(0,r.bF)(re,null,{default:(0,r.k6)(function(){return n()(a[43]||(a[43]=[(0,r.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,r.Lk)("div",{class:"col-xs-12"},[(0,r.Lk)("div",{class:"text-h6"},"Relación de Errores AUTOMATI")])],-1)]))}),_:1}),(0,r.Lk)("div",T,[(0,r.Lk)("div",_,[(0,r.bF)(oe,{class:"q-ma-xs",size:"sm",icon:"delete",color:"primary",onClick:e.eliminarErrores,flat:""},{default:(0,r.k6)(function(){return n()(a[44]||(a[44]=[(0,r.eW)("Eliminar Errores",-1)]))}),_:1},8,["onClick"])])]),(0,r.bF)(te,{class:"fix-table-global ag-theme-balham",style:(0,l.Tr)({width:e.display?"93vw":"100%",height:e.display?"calc(100vh - 140px)":"250px"}),columnDefs:e.columnDefsError,rowData:e.rowDataError,rowSelection:"multiple",onGridReady:e.onGridReadyAE},null,8,["style","columnDefs","rowData","onGridReady"])]}),_:1},8,["modelValue","onSubmit"]),(0,r.bF)(le,{modelValue:e.openModalForm,"onUpdate:modelValue":a[37]||(a[37]=function(a){return e.openModalForm=a}),onSubmit:e.registrarCtaPagoAutomati},{default:(0,r.k6)(function(){return[(0,r.bF)(re,null,{default:(0,r.k6)(function(){return n()(a[45]||(a[45]=[(0,r.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,r.Lk)("div",{class:"col-xs-12"},[(0,r.Lk)("div",{class:"text-h6"},"Agregar Pago AUTOMATI")])],-1)]))}),_:1}),(0,r.bF)($),(0,r.bF)(re,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",V,[(0,r.Lk)("div",B,[(0,r.bF)(H,{class:"truncate-label",modelValue:e.form.ID_CTASERVICIO,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.form.ID_CTASERVICIO=a}),"option-label":"CTA","option-value":"ID_CTASERVICIO",options:e.servicio,label:"Cuenta Bancaria - Servicio"},null,8,["modelValue","options"])]),(0,r.Lk)("div",S,[(0,r.bF)(H,{modelValue:e.form.ID_PERFIL,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.form.ID_PERFIL=a}),label:"Perfil","option-label":"label","option-value":"value",options:e.perfiles,onInput:e.getPerPerfil},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",x,[(0,r.bF)(H,{label:"Persona",modelValue:e.form.ID_PERSONA,"onUpdate:modelValue":a[24]||(a[24]=function(a){return e.form.ID_PERSONA=a}),options:e.personas,"option-value":"ID_PERSONA","option-label":"NOMBRE"},null,8,["modelValue","options"])]),(0,r.Lk)("div",L,[(0,r.bF)(J,{label:"Nro. de Operación Bancaria",modelValue:e.form.NUMOPE,"onUpdate:modelValue":a[25]||(a[25]=function(a){return e.form.NUMOPE=a})},null,8,["modelValue"])]),(0,r.Lk)("div",U,[(0,r.bF)(J,{"reverse-fill-mask":"",modelValue:e.form.FECOPER,"onUpdate:modelValue":a[28]||(a[28]=function(a){return e.form.FECOPER=a}),maxlength:"10",mask:"##/##/####",label:"Fecha Operación"},{append:(0,r.k6)(function(){return[(0,r.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{ref:"qDateProxy4","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{mask:"DD/MM/YYYY",modelValue:e.form.FECOPER,"onUpdate:modelValue":a[26]||(a[26]=function(a){return e.form.FECOPER=a}),onInput:a[27]||(a[27]=function(a){return e.closeModalInicio("qDateProxy4")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",y,[(0,r.bF)(J,{"reverse-fill-mask":"",modelValue:e.form.FECPAG,"onUpdate:modelValue":a[31]||(a[31]=function(a){return e.form.FECPAG=a}),maxlength:"10",mask:"##/##/####",label:"Fecha Pago"},{append:(0,r.k6)(function(){return[(0,r.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{ref:"qDateProxy5","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{mask:"DD/MM/YYYY",modelValue:e.form.FECPAG,"onUpdate:modelValue":a[29]||(a[29]=function(a){return e.form.FECPAG=a}),onInput:a[30]||(a[30]=function(a){return e.closeModalInicio("qDateProxy5")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",Y,[(0,r.bF)(J,{"reverse-fill-mask":"",modelValue:e.form.FECVEN,"onUpdate:modelValue":a[34]||(a[34]=function(a){return e.form.FECVEN=a}),maxlength:"10",mask:"##/##/####",label:"Fecha Vencimiento"},{append:(0,r.k6)(function(){return[(0,r.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{ref:"qDateProxy6","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{mask:"DD/MM/YYYY",modelValue:e.form.FECVEN,"onUpdate:modelValue":a[32]||(a[32]=function(a){return e.form.FECVEN=a}),onInput:a[33]||(a[33]=function(a){return e.closeModalInicio("qDateProxy6")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",G,[(0,r.bF)(J,{label:"Monto",type:"number",modelValue:e.form.MONTOCOB,"onUpdate:modelValue":a[35]||(a[35]=function(a){return e.form.MONTOCOB=a})},null,8,["modelValue"])]),(0,r.Lk)("div",q,[(0,r.bF)(J,{label:"Mora",type:"number",modelValue:e.form.MONTOMOR,"onUpdate:modelValue":a[36]||(a[36]=function(a){return e.form.MONTOMOR=a})},null,8,["modelValue"])])])]}),_:1})]}),_:1},8,["modelValue","onSubmit"]),(0,r.bF)(ce,{modelValue:e.openImprimirLote,"onUpdate:modelValue":a[38]||(a[38]=function(a){return e.openImprimirLote=a}),onSubmit:e.imprimir},null,8,["modelValue","onSubmit"]),(0,r.bo)((0,r.bF)(se,{ref:e.pageHeader.tabKeys.formatos,showHeader:!1,onOpenModalFormatos:e.openModalFormatos,onAbrirModalImprimir:e.abrirModalImprimir},null,8,["onOpenModalFormatos","onAbrirModalImprimir"]),[[i.aG,e.pageHeader.tabActivo===e.pageHeader.tabKeys.formatos]])]}),_:1})}var H=o(99550),Q=o.n(H),z=o(41562),W=o.n(z),X=o(76080),K=o.n(X),j=o(45254),J=o.n(j),Z=(o(12563),o(30683),o(71225),o(39866),o(10239),o(50310),o(5962),o(90095),o(92802),o(9240),o(11777),o(83190),o(27153),o(62540),o(52776),o(44264),o(62692),o(81813),o(13715),o(88567)),ee=o(95718),ae=o(54489),oe=o(80660),te=o(6123),ne=o(3112),re=o(36408),ie=o(57668),le=o(6583),ce=o(18105),se=o(42037),ue=o(99637),de=o(27560),pe=o(64208),me=o(12143),fe=o(95477),he=o(53380),ge=o(59089),Ae=(o(7807),{style:{display:"inline-block"}}),Ce={class:"groupTitle"},ve={class:"medal gold"};function be(e,a){return(0,r.uX)(),(0,r.CE)("div",Ae,[(0,r.Lk)("span",Ce,(0,l.v_)(e.key),1),(0,r.Lk)("span",ve," Total: "+(0,l.v_)(e.total),1)])}var Oe={data:function(){return{flagCodeImg:"",node:null,key:null,total:0}},beforeMount:function(){this.node=this.params.node,this.key=(0,ce.Ay)(this.node.key,"DD/MM/YYYY"),this.total=(0,se.toFixed)(this.node.aggData.TOTAL)}},Ee=o(12807);const Fe=(0,Ee.A)(Oe,[["render",be]]);var Ie=Fe,De=o(33950),Ne=o(75053),we=o(41615),Re=o(74160),Pe=o(64303),Me=o(78840),ke=o(30283),Te=o(17915),_e=o(2652),Ve=o(84316),Be={components:{QCard:Z.A,QCardSection:ee.A,QSelect:ae.S,QOptionGroup:te.EX,sieGrid:re.A,footerGrid:de.A,QInput:pe.A,QDate:me.A,QPopupProxy:fe.A,QCheckbox:ne.A,QSeparator:he.A,sieUpload:ge.A,QAlert:te.ex,sieModal:Ne.A,QDatetime:te.T5,crearBotones:Pe.A,imprimirLote:ke.A,tesoreriaLoading:Te.A,pageHeader:_e.A,mantenimiento:Ve["default"],QCardMain:te.d1,QIcon:te.bP,QBtn:te.Il},data:function(){return{LECTURA_ESCRITURA:we["default"].LECTURA_ESCRITURA,nameComponente:"PagosBanco",nivelAcceso:(0,ie["default"])().ruta.nivel,columnDefs:null,rowData:null,api:null,total:{moneda:"S/",monto:0},mostrarBotonAdd:!1,frameworkComponents:null,tipo:[{label:"Alfabético",value:1},{label:"Código",value:2},{label:"Nivel",value:3}],agruparConcepto:!1,reporteDetalladoPE:!1,reporteGeneralPE:!1,selectTipo:1,pagina:1,pages:1,mfecha:(0,ce.Ay)(new Date,"DD/MM/YYYY"),cfecha:(0,ce.Ay)(new Date,"DD/MM/YYYY"),selectServicio:"",servicio:[],selectBancoServicio:"",textBanco:"",autoGroupColumnDef:null,groupRowInnerRenderer:null,columnTypes:null,selectedGroup:[],tempFile:"",ctaServicio:-1,openModal:!1,columnDefsError:null,rowDataError:null,totalErrores:0,numtalServicio:"",numtal:"",numpag:"",correlativo:"",bancod:null,openModalForm:!1,reportePEfectivo:!1,disabledCheckConcepto:!1,disabledCheckDetalladoPE:!1,disabledCheckGeneralPE:!1,perfiles:[],personas:[],labelDetallado:"",labelGeneral:"",fecpag:(0,ce.Ay)(new Date,"DD/MM/YYYY"),form:{ID_PERFIL:we["default"].PERFIL_ALUMNO,ID_PERSONA:"",ID_CTASERVICIO:"",FECPAG:(0,ce.Ay)(new Date,"DD/MM/YYYY"),FECOPER:(0,ce.Ay)(new Date,"DD/MM/YYYY"),FECVEN:(0,ce.Ay)(new Date,"DD/MM/YYYY"),MONTOMOR:0,MONTOCOB:0,NUMOPE:""},lengPagoAutomati:{NUMOPE:0,CADENA:0},botones:[],modalFormatos:!1,titleFormatos:"Exportar Pagos AUTOMATI",buttonsFormato:[{label:"PDF",value:"pdf"},{label:"EXCEL",value:"xls"}],dataOrden:[],dataCobroBanco:[],tipoReporteFormato:"pdf",fechaInicio:we["default"].CURRENT_DAY,fechafinal:we["default"].CURRENT_DAY,fechaCAuto:we["default"].CURRENT_DAY,cobroBanco:we["default"].TODOS,orden:"F",nroOperacion:"",openNumeroOperacion:!1,openImprimirLote:!1,loading:{showLoading:!1,procesados:0,total:0,label:"Procesando"},pageHeader:{buttons:[],title:"Pago por Banco Automático",tabs:[{name:"index",label:"Registro"},{name:"formatos",label:"Consultar"}],tabActivo:"index",componente:"pagoAutomatico",nivelAcceso:(0,ie["default"])().ruta.nivel,tabKeys:{index:"index",formatos:"formatos"}},reporteCuentaBanco:"",cargoAtumatico:!1,seleccionados:0}},computed:{display:function(){var e=this.$q.platform.is.mobile;return e&&this.api&&this.api.sizeColumnsToFit(),e}},methods:{changeTab:function(e){var a=this;return J()(K()().m(function o(){var t;return K()().w(function(o){while(1)switch(o.n){case 0:if(a.pageHeader.tabActivo=e,"index"!==e){o.n=1;break}return a.pageHeader.buttons=a.crearBotones(),a.pageHeader.componente="pagoAutomatico",a.pageHeader.nivelAcceso=(0,ie["default"])().ruta.nivel,o.a(2,!0);case 1:return o.n=2,a.$refs[a.pageHeader.tabKeys.formatos].getDataTab();case 2:return t=o.v,a.pageHeader.buttons=t.botones,a.pageHeader.componente=t.componente,a.pageHeader.nivelAcceso=t.nivelAcceso,o.a(2,!0)}},o)}))()},imprimir:function(e){var a=e.talon,o=e.nroInicio,t=e.nroFin;if(!a)return this.$alert("Debe elegir un Talonario","warning"),!1;if(!o||!t)return this.$alert("No hay talonarios disponibles para el rango de fechas selecionadas"),!1;var n=(0,ie["default"])().origin,r="".concat(n,"/webservice/servicios-tesoreria/reporte?numtal=").concat(a,"&numini=").concat(o,"&numfin=").concat(t);window.open(r,"_blank")},closeModalInicio:function(e){this.$refs[e].hide(),this.cambiarAnioMesInicio()},cambiarAnioMesInicio:function(){var e=this.fechaInicio.split("/");if(3===e.length){var a=[];this.api.getModel().forEachNode(function(o){var t=String(e[2]),n=String(e[1]);o.data.anio=t,o.data.mes=n,a.push(o.data)}),this.api.updateRowData({update:a})}},closeModalFin:function(e){this.$refs[e].hide(),this.cambiarAnioMesFin()},cambiarAnioMesFin:function(){var e=this.fechafinal.split("/");if(3===e.length){var a=[];this.api.getModel().forEachNode(function(o){var t=String(e[2]),n=String(e[1]);o.data.anio=t,o.data.mes=n,a.push(o.data)}),this.api.updateRowData({update:a})}},closeModalInicioCAuto:function(e){this.$refs[e].hide(),this.cambiarAnioMesInicioCAuto()},cambiarAnioMesInicioCAuto:function(){var e=this.fechaCAuto.split("/");if(3===e.length){var a=[];this.api.getModel().forEachNode(function(o){var t=String(e[2]),n=String(e[1]);o.data.anio=t,o.data.mes=n,a.push(o.data)}),this.api.updateRowData({update:a})}},getCobroBanco:function(){var e=this;return J()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return e.dataCobroBanco.push({CLAVE:"T",VALOR:"Todos"}),a.n=1,oe.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0011"}}}).then(function(a){0!==a.length&&a.forEach(function(a){e.dataCobroBanco.push(a)})});case 1:return a.a(2)}},a)}))()},getOrdenPagoAutomatico:function(){var e=this;return J()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,we["default"].ORDEN_REPORTE_PAGOAUTOMATI();case 1:e.dataOrden=a.v;case 2:return a.a(2)}},a)}))()},onFirstDataRendered:function(){},crearBotones:function(){var e=[{label:"Eliminar",icon:"delete",click:this.deletePagoBancoAutomatico,minAcceso:we["default"].ACCESO_TOTAL},{label:"Especial",icon:"star_border",click:this.especialPagoBancoAutomatico,minAcceso:we["default"].LECTURA_ESCRITURA},{label:"Actualizar",icon:"refresh",click:this.actualizarPagoBancoAutomatico,minAcceso:we["default"].LECTURA_ESCRITURA}];return this.botones=e,this.pageHeader.buttons=this.botones,e},abrirModalImprimir:function(){this.openImprimirLote=!0},exportarReporteOld:function(){for(var e={ORDEN:this.orden,FECINI:this.fechaInicio,FECFIN:this.fechafinal,COBROBANCO:this.cobroBanco,FORMATO:this.tipoReporteFormato},a="",o=0;o<this.servicio.length;o++)this.servicio[o].ID_CTASERVICIO===this.selectServicio&&(a=this.servicio[o].NUMCTA+"--"+this.servicio[o].BANCOD);var t=(0,ie["default"])().origin,n="";if(this.reporteDetalladoPE||this.reporteGeneralPE){var r=!0===this.reporteDetalladoPE?"2":"1";n="".concat(t,"/webservice/reporte-tesoreria/reporte?REPCOD=pagos-banco-automatico&COBROBANCO=").concat(e.COBROBANCO,"&FECINI=").concat(e.FECINI,"&FECFIN=").concat(e.FECFIN,"&CBOORDEN=").concat(e.CBOORDEN,"&CBOBANCO=").concat(a,"&FORMATO=").concat(e.FORMATO,"&PEFECTIVO=").concat(r)}else n="".concat(t,"/webservice/reporte-tesoreria/reporte?REPCOD=pagos-banco-automatico&COBROBANCO=").concat(e.COBROBANCO,"&FECINI=").concat(e.FECINI,"&FECFIN=").concat(e.FECFIN,"&CBOORDEN=").concat(e.CBOORDEN,"&CBOBANCO=").concat(a,"&FORMATO=").concat(e.FORMATO,"&AGRUPAR=").concat(this.agruparConcepto);window.open(n,"_blank")},exportarReporte:function(){for(var e={CBOORDEN:this.orden,FECINI:this.fechaInicio,FECFIN:this.fechafinal,COBROBANCO:this.cobroBanco,FORMATO:this.tipoReporteFormato},a="",o=null,t=0;t<this.servicio.length;t++)this.servicio[t].ID_CTASERVICIO===this.reporteCuentaBanco&&(a=this.servicio[t].NUMCTA+"--"+this.servicio[t].BANCOD,o=this.servicio[t].FECHA_INICIO);var n=document.getElementById("form");n.setAttribute("target","_blank"),n.setAttribute("method","POST"),n.setAttribute("action","/webservice/reporte-tesoreria/reporte"),n.children.COBROBANCO?n.children.COBROBANCO.value=e.COBROBANCO:n.appendChild(this.createHidden("COBROBANCO",e.COBROBANCO)),n.children.FECINI?n.children.FECINI.value=e.FECINI:n.appendChild(this.createHidden("FECINI",e.FECINI)),n.children.FECFIN?n.children.FECFIN.value=e.FECFIN:n.appendChild(this.createHidden("FECFIN",e.FECFIN)),n.children.FECINIOP?n.children.FECINIOP.value=o:n.appendChild(this.createHidden("FECINIOP",o)),n.children.CBOORDEN?n.children.CBOORDEN.value=e.CBOORDEN:n.appendChild(this.createHidden("CBOORDEN",e.CBOORDEN)),n.children.CBOBANCO?n.children.CBOBANCO.value=a:n.appendChild(this.createHidden("CBOBANCO",a)),n.children.FORMATO?n.children.FORMATO.value=e.FORMATO:n.appendChild(this.createHidden("FORMATO",e.FORMATO)),n.children.PEFECTIVO?n.children.PEFECTIVO.value=this.reporteDetalladoPE||this.reporteGeneralPE?!0===this.reporteDetalladoPE?"2":"1":"0":n.appendChild(this.createHidden("PEFECTIVO",this.reporteDetalladoPE||this.reporteGeneralPE?!0===this.reporteDetalladoPE?"2":"1":"0")),n.children.AGRUPAR?n.children.AGRUPAR.value=this.reporteDetalladoPE||this.reporteGeneralPE?null:this.agruparConcepto:n.appendChild(this.createHidden("AGRUPAR",this.reporteDetalladoPE||this.reporteGeneralPE?null:this.agruparConcepto)),n.children.tipReport?n.children.tipReport.value="pagos-banco-automatico":n.appendChild(this.createHidden("tipReport","pagos-banco-automatico")),n.children.REPCOD?n.children.REPCOD.value="pagos-banco-automatico":n.appendChild(this.createHidden("REPCOD","pagos-banco-automatico")),n.submit()},createHidden:function(e,a){var o=document.createElement("input");return o.setAttribute("type","hidden"),o.setAttribute("name",e),o.setAttribute("id",e),o.setAttribute("value",a),o},openModalFormatos:function(){var e=this;return J()(K()().m(function a(){var o;return K()().w(function(a){while(1)switch(a.n){case 0:for(e.modalFormatos=!0,e.agruparConcepto=!1,e.reporteDetalladoPE=!1,e.reporteGeneralPE=!1,e.reporteCuentaBanco=e.selectServicio,o=0;o<e.servicio.length;o++)e.servicio[o].ID_CTASERVICIO===e.selectServicio&&(e.servicio[o].BANCOD===we["default"].BANCOS.PEFECTIVO||e.servicio[o].BANCOD===we["default"].BANCOS.OPENPAY?e.reportePEfectivo=!0:e.reportePEfectivo=!1,e.servicio[o].BANCOD===we["default"].BANCOS.PEFECTIVO?(e.labelDetallado="Reporte Detallado Pago Efectivo",e.labelGeneral="Reporte General Pago Efectivo"):e.servicio[o].BANCOD===we["default"].BANCOS.OPENPAY&&(e.labelDetallado="Reporte Detallado Openpay",e.labelGeneral="Reporte General Openpay"));case 1:return a.a(2)}},a)}))()},deshabilitarOpciones:function(e){"concepto"===e.dato?(this.reporteDetalladoPE=!1,this.reporteGeneralPE=!1):"detalle"===e.dato?(this.agruparConcepto=!1,this.reporteGeneralPE=!1):"general"===e.dato&&(this.agruparConcepto=!1,this.reporteDetalladoPE=!1)},getDdlTablePagoAutomati:function(){var e=this;return J()(K()().m(function a(){var o,t;return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,Re.n)(["cta_pago_automati"]);case 1:o=a.v,t=o.CTA_PAGO_AUTOMATI,e.lengPagoAutomati.NUMOPE=t.NUMOPE,e.lengPagoAutomati.CADENA=t.CADENA;case 2:return a.a(2)}},a)}))()},clearPagoAutomati:function(){this.form.ID_PERFIL=we["default"].PERFIL_ALUMNO,this.form.ID_PERSONA="",this.form.MONTOMOR=0,this.form.MONTOCOB=0,this.form.NUMOPE=""},validatePagoAutomati:function(){var e="";return this.form.ID_PERFIL?this.form.ID_CTASERVICIO?this.form.ID_PERSONA?this.form.FECPAG?this.form.FECOPER?this.form.FECVEN?isNaN(this.form.MONTOMOR)?e="No se registro el monto mora":isNaN(this.form.MONTOCOB)?e="No se registro el monto":this.form.NUMOPE||(e="No se registro el numero de operacion"):e="No se selecciono la fecha de vencimiento":e="No se selecciono la fecha de operacion":e="No se seleccion la fecha de pago":e="No se selecciono la persona":e="No se selecciono la cuenta servicio":e="No se selecciono el perfil",e.length>0?{status:"error",message:e}:{status:"ok"}},registrarCtaPagoAutomati:function(){var e=this;return J()(K()().m(function a(){var o;return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.validatePagoAutomati();case 1:o=a.v,"ok"===o.status?e.$confirm("¿Esta seguro de registrar el pago automático? ","info").onOk(J()(K()().m(function a(){var o,t;return K()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,oe.$http.post("api/bancoController/postPagoAutomati",{parametro:e.form});case 1:return o=a.v,e.$alert(o.message,"success"),e.selectServicio=e.form.ID_CTASERVICIO,a.n=2,e.getPagosBancoAutomatico();case 2:e.clearPagoAutomati(),a.n=4;break;case 3:a.p=3,t=a.v,e.$alert(t.error.message,"warning");case 4:return a.a(2)}},a,null,[[0,3]])}))):e.$alert(o.message,"warning");case 2:return a.a(2)}},a)}))()},getPerPerfil:function(e){var a=this;return J()(K()().m(function e(){var o;return K()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,a.persona=[],a.form.ID_PERSONA="",e.n=1,oe.$http.get("api/personaController/getPersonaPerfil",{params:{params:{id_perfil:a.form.ID_PERFIL}}});case 1:a.personas=e.v,e.n=3;break;case 2:e.p=2,o=e.v,console.error(o);case 3:return e.a(2)}},e,null,[[0,2]])}))()},getPerfiles:function(){var e=this;return J()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,we["default"].API_PERFILES();case 1:e.perfiles=a.v;case 2:return a.a(2)}},a)}))()},loadModal:function(){var e=this;this.openModal=!0,this.columnDefsError=[{headerName:"ID AUTOMI",field:"ID_AUTOERRO",width:80,hide:!0},{headerName:"Fila",field:"FILA",width:90},{headerName:"Fecha pago",field:"FECPAG",valueFormatter:function(e){return(0,ce.Ay)(e.value,"DD/MM/YYYY")},width:90},{headerName:"",field:"MONSIG",width:40},{headerName:"Monto",field:"MONTOCOB",valueFormatter:se.toFixed,width:90,cellClass:"text-right"},{headerName:"Mora",field:"MONTOMOR",valueFormatter:se.toFixed,width:80,cellClass:"text-right"},{headerName:"Motivo",field:"MOTIVO",width:220},{headerName:"Cadena",field:"CADENA",width:600}],oe.$http.get("api/bancoController/getPagosBancoError",{params:{parametros:{id_ctaservicio:this.selectServicio}}}).then(function(a){e.rowDataError=a})},eliminarErrores:function(){var e=this;return J()(K()().m(function a(){var o,t,n;return K()().w(function(a){while(1)switch(a.n){case 0:if(o=e.apiAE.getSelectedRows(),t="",n="",0!==o.length){a.n=1;break}e.$alert("Debe de seleccionar almenos un registro a eliminar.","warning"),a.n=2;break;case 1:return e.loading.total=o.length,e.loading.label="Eliminando  ",e.loading.procesados=0,a.n=2,e.$confirm("¿Desea eliminar los registros seleccionados?","delete").onOk(J()(K()().m(function a(){var r;return K()().w(function(a){while(1)switch(a.n){case 0:e.loading.showLoading=!0,r=0;case 1:if(!(r<o.length)){a.n=3;break}return a.n=2,oe.$http.delete("api/bancoController/deleteAutomatiError",{params:{datos:{ID_AUTOERRO:o[r].ID_AUTOERRO}}}).then(function(e){t=e.message,n="success"}).catch(function(e){var a=e.error;t=a.message,n="warning"}).finally(function(){e.loading.procesados++});case 2:r++,a.n=1;break;case 3:e.loading.showLoading=!1,e.openModal=!1,e.$alert(t,n),e.getPagosBancoAutomatico();case 4:return a.a(2)}},a)})));case 2:return a.a(2)}},a)}))()},getIds:function(e){var a=[];return(0,ue["default"])(e,function(e){a.push(e.ID_AUTOMATI)}),a},enviarPagoAutomati:function(e){var a=this,o={error:[],procesados:[]};return this.loading.total=e.length,this.loading.label="Actualizando ",this.loading.procesados=0,this.$confirm("¿Esta seguro de actualizar los pagos?","info").onOk(J()(K()().m(function t(){var n,r,i,l,c,s,u,d;return K()().w(function(t){while(1)switch(t.p=t.n){case 0:a.loading.showLoading=!0,n=W()(e),t.p=1,n.s();case 2:if((r=n.n()).done){t.n=8;break}return i=r.value,t.p=3,t.n=4,oe.$http.post("api/bancoController/postPagoBancoAutomatico",{datos:i});case 4:l=t.v,1===l.code&&o.procesados.push(l),t.n=6;break;case 5:return t.p=5,u=t.v,o.error.push(u.error?u.error:u),t.a(3,8);case 6:return t.p=6,a.loading.procesados++,t.f(6);case 7:t.n=2;break;case 8:t.n=10;break;case 9:t.p=9,d=t.v,n.e(d);case 10:return t.p=10,n.f(),t.f(10);case 11:a.loading.showLoading=!1,0===o.error.length?a.$alert("Proceso Finalizado: (".concat(o.procesados.length,") Pagos Procesados Satisfactoriamente"),"success"):(c=Q()(o.error,1),s=c[0],a.$alert(s.message,"warning")),a.getPagosBancoAutomatico();case 12:return t.a(2)}},t,null,[[3,5,6,7],[1,9,10,11]])}))),o},validarDeudasAnteriores:function(e){var a=this;return J()(K()().m(function o(){var t,n,r,i;return K()().w(function(o){while(1)switch(o.n){case 0:if(t=e,n=[],a.api.forEachNodeAfterFilter(function(e){!e.isSelected()&&e.data&&n.push(e.data)}),r=t.reduce(function(e,a){var o=new Date(a.FECPAG);return e||(e=o),e=e>o?e:o,e},null),i=n.some(function(e){return new Date(e.FECPAG)<r}),!i){o.n=1;break}throw new Error("Existen deudas más antiguas sin actualizar");case 1:return o.a(2,!0)}},o)}))()},actualizarPagoBancoAutomatico:function(){var e=this;return J()(K()().m(function a(){var o,t,n;return K()().w(function(a){while(1)switch(a.p=a.n){case 0:if(o=e.api.getSelectedRows(),0!==o.length){a.n=1;break}return a.a(2,e.$alert("No selecciono ningún registro","warning"));case 1:return a.p=1,a.n=2,e.validarDeudasAnteriores(o);case 2:o.length>0?(t=[],o.forEach(function(a){t.push({ID_CTASERVICIO:e.selectServicio,NUMTAL:e.numtal,NUMPAG:e.numpag,ID_AUTOMATI:a.ID_AUTOMATI,ID_PERSONA:a.ID_PERSONA,ID_PERFIL:a.ID_PERFIL,NOMBRE:a.NOMBRE,MONSIG:a.MONSIG,FECPAG:a.FECPAG,FECVEN:a.FECVEN,NUMOPE:a.NUMOPE,MONTOCOB:a.MONTOCOB,MONTOMOR:a.MONTOMOR,NRO_OPERACION:e.nroOperacion})}),e.enviarPagoAutomati(t)):e.$alert("Debe seleccionar al menos un registro para actualizar los pagos","warning"),a.n=4;break;case 3:a.p=3,n=a.v,e.$alert(n.error?n.error.message:n.message,"warning");case 4:return a.a(2)}},a,null,[[1,3]])}))()},especialPagoBancoAutomatico:function(){var e=this,a=this.api.getSelectedRows();a.length>0?this.$confirm("¿Desea procesar como Caso Especial los pagos seleccionados?","info").onOk(J()(K()().m(function o(){var t;return K()().w(function(o){while(1)switch(o.n){case 0:t=e.getIds(a),oe.$http.put("api/bancoController/putPagoBancoEspecial",{datos:t}).then(function(){var a=J()(K()().m(function a(o){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getPagosBancoAutomatico();case 1:e.$alert(o.message,"success");case 2:return a.a(2)}},a)}));return function(e){return a.apply(this,arguments)}}()).catch(function(a){var o=a.error;e.$alert(o.message,"warning")});case 1:return o.a(2)}},o)}))):this.$alert("Debe seleccionar al menos un registro procesar como Especial","warning")},deletePagoBancoAutomatico:function(){var e=this,a=this.api.getSelectedRows();a.length>0?this.$confirm("¿Desea eliminar los registros seleccionados?","delete").onOk(function(){var o=e.getIds(a);oe.$http.delete("api/bancoController/deletePagoBancoAutomatico",{params:{datos:o}}).then(function(o){e.api.updateRowData({remove:a}),e.$alert(o.message,"success"),e.getPagosBancoAutomatico()}).catch(function(a){var o=a.error;e.$alert(o.message,"warning")})}):this.$alert("Debe seleccionar al menos un registro para eliminar","delete")},changeDate:function(){this.$refs.qDateProxy.hide();var e=null,a=null,o=this.mfecha.replace(/\//g,"");this.api.getModel().forEachNode(function(t){if(t.data){var n=t.data.__sg_key,r=t.data.__sg_isGroup;r?(e=String((0,ce.Ay)(n,"DDMMYYYY")),e===o?a=t:(t.setSelected(!1),t.setExpanded(!0))):e===o?t.setSelected(!0):t.setSelected(!1)}}),a&&(a.setSelected(!0),a.setExpanded(!0))},changeDateCAuto:function(){this.$refs.qDateProxyCAuto.hide();var e=null,a=null,o=this.cfecha.replace(/\//g,"");this.api.getModel().forEachNode(function(t){t.group?(e=String((0,ce.Ay)(t.key,"DDMMYYYY")),e===o?a=t:(t.setSelected(!1),t.setExpanded(!0))):e===o?t.setSelected(!0):t.setSelected(!1)}),a&&(a.setSelected(!0),a.setExpanded(!0))},getPagosBancoAutomatico:function(e){var a=this;return J()(K()().m(function e(){var o;return K()().w(function(e){while(1)switch(e.n){case 0:return o={id_ctaservicio:a.selectServicio,estado:0,order:a.selectTipo,vjson:1,pagina:a.pagina},e.n=1,oe.$http.get("api/bancoController/getCantidadPagosBancoError",{params:{parametros:{id_ctaservicio:a.selectServicio}}}).then(function(e){var o=e.COUNT;a.totalErrores=o});case 1:return e.n=2,oe.$http.get("api/bancoController/getPagosBancoAutomatico",{params:{parametros:o}}).then(function(e){var o=(0,le["default"])(e.rows);a.rowData=o,a.pages=e.pages,a.$nextTick(function(){a.changeDate()})});case 2:return e.n=3,oe.$http.get("api/bancoController/getCtaServicios",{params:{parametros:{response:"infocta",id_ctaservicio:a.selectServicio}}}).then(function(e){9===e[0].ID_BANCOSER?a.cargoAtumatico=!0:a.cargoAtumatico=!1,a.numtalServicio=e[0].NUMTAL});case 3:return e.n=4,a.obtenerTalonBanco();case 4:return e.a(2)}},e)}))()},uploadFileBanco:function(e){var a=this;return J()(K()().m(function o(){return K()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,oe.$http.get("api/bancoController/getCarpetaBanco",{params:{datos:{tipo:"tmp"}}}).then(function(o){var t=n()(e),r=t[0];(0,De["default"])({file:r}).then(function(e){a.$q.loading.show(),a.cargoAtumatico&&(e.fechaCargoAuto=a.cfecha,e.cargoAtumatico=a.cargoAtumatico),oe.$http.post("api/bancoController/postPagosBancoAutomati",{datos:{temp:e,id_ctaservicio:a.selectServicio}}).then(function(e){a.$q.loading.hide(),a.$alert(e.message,"success"),a.getPagosBancoAutomatico()}).catch(function(e){var o=e.error;a.$q.loading.hide(),a.$alert(o.message,"warning")})}).catch(function(e){var o=e.error;a.$alert(o.message,"warning")})}).catch(function(e){console.log(e.error),a.$alert("Ha ocurrido un problema con la creación de carpeta de los bancos","warning")});case 1:return o.a(2)}},o)}))()},getSelectedRow:function(e){var a=this;return J()(K()().m(function e(){var o,t,n,r,i,l;return K()().w(function(e){while(1)switch(e.n){case 0:o=a.api.getSelectedRows(),a.total.monto=0,t=0,n="",r=W()(o);try{for(r.s();!(i=r.n()).done;)l=i.value,t+=Number(l.TOTAL),n=l.MONSIG}catch(e){r.e(e)}finally{r.f()}a.total.moneda=n,a.total.monto=t,a.seleccionados=o.length;case 1:return e.a(2)}},e)}))()},getServicio:function(e){this.textBanco="",this.selectBancoServicio=e.ID_BANCOSER,this.ctaServicio=e.ID_CTASERVICIO,this.bancod=e.BANCOD,this.getPagosBancoAutomatico()},onGridReady:function(e){this.api=e.api},onGridReadyAE:function(e){this.apiAE=e.api},openModalAgregar:function(){this.openModalForm=!0,this.form.ID_CTASERVICIO=this.selectServicio},cerrarModal:function(){this.openModal=!1},verNumeroPago:function(e){this.openNumeroOperacion=!0,this.nroOperacion=e.data.NRO_OPERACION},obtenerTalonBanco:function(){var e=this;return J()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:if(e.numtal=e.numpag=e.correlativo="",!e.numtalServicio||""===e.numtalServicio){a.n=2;break}return a.n=1,oe.$http.get("api/talonarioController/getTalon",{params:{parametros:{NUMTAL:e.numtalServicio}}}).then(function(a){if(a.length>0){var o=n()(a),t=o[0];e.numtal=t.NUMTAL,e.numpag=t.NUMERO,e.correlativo="".concat(t.NUMTAL.toString()," ").concat(t.SERIE.toString(),"-").concat(t.NUMERO.toString())}});case 1:a.n=3;break;case 2:return a.n=3,oe.$http.get("api/talonarioController/getTalonUso",{params:{datos:{tipuso:"banco"}}}).then(function(a){if(a.length>0){var o=n()(a),t=o[0];e.numtal=t.NUMTAL,e.numpag=t.NUMPAG,e.correlativo="".concat(t.NUMTAL.toString()," ").concat(t.SERIE.toString(),"-").concat(t.NUMPAG.toString())}else e.$alert("No existe talonario configurado","warning")});case 3:return a.a(2)}},a)}))()},columnsPago:function(){var e=this;return J()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:e.autoGroupColumnDef={},e.frameworkComponents={groupRowInnerRenderer:Ie,actionButton:Me.A},e.groupRowInnerRenderer="groupRowInnerRenderer",e.columnTypes={number:{valueParser:function(e){return parseFloat(e.newValue)},aggFunc:"sum"}},e.columnDefs=[{headerName:"Código",field:"CODIGO",sortable:!0,width:98},{headerName:"Nombres y Apellidos",field:"NOMBRE",sortable:!0,width:300,cellRenderer:function(a){if(a.data.__sg_isGroup){var o=e.obtenerTotalCabecera(a);return"<b>TOTAL: ".concat(o.suma.toFixed(2),"</b> (").concat(o.contador,")")}return a.value}},{headerName:"Doc.",field:"DOC",width:70},{headerName:"Fec. de Pago",field:"FECPAG",rowGroup:!0,valueFormatter:function(e){return(0,ce.Ay)(e.value,"DD/MM/YYYY")},width:100},{headerName:"Fec. Venc.",field:"FECVEN",valueFormatter:function(e){return(0,ce.Ay)(e.value,"DD/MM/YYYY")},width:100},{headerName:"",field:"MONSIG",width:40,cellClass:"text-right"},{headerName:"Monto",field:"MONTOCOB",cellClass:"text-right",valueFormatter:se.toFixed,width:80},{headerName:"Mora",field:"MONTOMOR",cellClass:"text-right",valueFormatter:se.toFixed,width:60},{headerName:"Total",field:"TOTAL",cellClass:"text-right",valueFormatter:se.toFixed,width:90},{headerName:"Nro. Operación",field:"NUMOPE",width:120}],e.rowData=[];case 1:return a.a(2)}},a)}))()},obtenerTotalCabecera:function(e){var a=this.rowData.reduce(function(a,o){return o.FECPAG===e.data.__sg_key&&(a.suma+=Number(o.TOTAL),a.contador+=1),a},{suma:0,contador:0});return a}},beforeMount:function(){var e=this;return J()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.columnsPago();case 1:return a.n=2,oe.$http.get("api/bancoController/getCtaServicios",{params:{parametros:{response:"combo2"}}}).then(function(a){if(a.length>0){e.servicio=a.filter(function(e){return!we["default"].BANCOS_PASARELA.includes(e.BANCOD)});var o=n()(a),t=o[0];e.selectServicio=t.ID_CTASERVICIO}else e.$alert("No existe cuentas bancarias con el servicio bancario configurados","warning")});case 2:return a.n=3,e.getPagosBancoAutomatico();case 3:return a.n=4,e.getCobroBanco();case 4:return a.n=5,e.getOrdenPagoAutomatico();case 5:return a.n=6,e.crearBotones();case 6:return a.n=7,e.getPerfiles();case 7:return a.n=8,e.getPerPerfil();case 8:e.mostrarBotonAdd=e.nivelAcceso>=we["default"].LECTURA_ESCRITURA&&we["default"].USUARIOS_ADMIN.includes((0,ie["default"])().usucod),e.getDdlTablePagoAutomati();case 9:return a.a(2)}},a)}))()}};const Se=(0,Ee.A)(Be,[["render",$]]);var xe=Se}}]);