"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[13069],{13069:function(e,a,o){o.r(a),o.d(a,{default:function(){return Le}});var t=o(8445),n=o.n(t),r=o(61758),i=o(58790),l=o(29104),s={class:"row gutter-xs"},c={class:"col-xs-3"},u={class:"col-xs-3"},d={class:"row"},m={class:"col"},p={class:"col-xs-3"},h={class:"col-xs-3"},f={class:"row q-ma-xs q-col-gutter-sm"},g={class:"col-xs-6"},O={class:"col-xs-6"},C={class:"row gutter-xs"},A={class:"col-xs-3"},P={class:"col-xs-6"},N={class:"col-xs-3"},b={class:"row gutter-xs"},v={class:"col-xs-3"},I={class:"col-xs-3"},E={class:"col-xs-3"},M={key:0,class:"col-xs-2"},T={key:1,class:"col-xs-12 col-sm-1"},R={key:0,class:"row gutter-xs"},D={class:"col-xs-3"},_={class:"col-xs-3"},w={class:"col-xs-3"},U={class:"row gutter-xs"},V={class:"col-xs-3"},k={class:"col-xs-6"},F={class:"row gutter-xs"},G={class:"col-xs-12"},S={key:1,class:"col-xs-12 col-md-12 mostar_datos_auxiliar flex"},x={class:"flex"},L={class:"flex"},B={class:"flex"},y={class:"row q-mb-xs"},H={class:"col headerTable"},$={class:"row q-pa-xs"},Q={class:"ptotal"};function X(e,a){var o=(0,r.g2)("q-page-header"),t=(0,r.g2)("q-separator"),X=(0,r.g2)("q-select"),q=(0,r.g2)("q-input"),J=(0,r.g2)("q-checkbox"),Y=(0,r.g2)("q-date"),W=(0,r.g2)("q-popup-proxy"),j=(0,r.g2)("q-icon"),K=(0,r.g2)("q-btn"),z=(0,r.g2)("header-grid"),Z=(0,r.g2)("sie-grid"),ee=(0,r.g2)("q-card-section"),ae=(0,r.g2)("pagosACuenta"),oe=(0,r.g2)("consultarComprobante"),te=(0,r.g2)("cuotasFactura"),ne=(0,r.g2)("forma-pago"),re=(0,r.g2)("cambio"),ie=(0,r.g2)("AgregarPersona"),le=(0,r.g2)("q-card");return(0,r.uX)(),(0,r.Wv)(le,{class:"layout-v1 my-card",flat:"",bordered:"",key:e.count},{default:(0,r.k6)(function(){return[(0,r.bF)(o,{title:e.pageHeader.title,botones:e.pageHeader.botones,useTab:"",tabs:e.pageHeader.tabs,componente:e.pageHeader.componente,nivelAcceso:e.pageHeader.nivelAcceso,onActionTab:e.actionTab},null,8,["title","botones","tabs","componente","nivelAcceso","onActionTab"]),e.pageHeader.tabActive===e.pageHeader.tabsKeys.registro?((0,r.uX)(),(0,r.Wv)(t,{key:0})):(0,r.Q3)("v-if",!0),e.pageHeader.tabActive===e.pageHeader.tabsKeys.registro?((0,r.uX)(),(0,r.Wv)(ee,{key:1},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",s,[(0,r.Lk)("div",c,[(0,r.bF)(X,{class:"truncate-label",label:"Talonario","option-label":"TALDES","option-value":"NUMTAL",options:e.talon,modelValue:e.selectTalon,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.selectTalon=a}),onInput:e.getNroRecibo},null,8,["options","modelValue","onInput"])]),(0,r.Lk)("div",u,[(0,r.Lk)("div",d,[(0,r.Lk)("div",m,[(0,r.bF)(q,{readonly:!e.chkTalon,label:"Nro. Documento",modelValue:e.nroRecibo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.nroRecibo=a})},null,8,["readonly","modelValue"])]),(0,r.bF)(J,{dense:"",modelValue:e.chkTalon,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.chkTalon=a}),onInput:e.editRecibo},null,8,["modelValue","onInput"])])]),(0,r.Lk)("div",p,[(0,r.bF)(q,{label:"Fecha Emisión",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fecha,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.fecha=a}),mask:"##/##/####",readonly:""},{append:(0,r.k6)(function(){return[(0,r.bF)(j,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(W,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(Y,{mask:"DD/MM/YYYY",modelValue:e.fecha,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.fecha=a}),onInput:e.closeModal},null,8,["modelValue","onInput"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",h,[(0,r.Lk)("div",f,[(0,r.Lk)("div",g,[(0,r.bF)(J,{modelValue:e.checkBoxCancelado,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.checkBoxCancelado=a}),label:"Cancelado",color:"primary",onInput:e.getChecking,dense:""},null,8,["modelValue","onInput"])]),(0,r.Lk)("div",O,[(0,r.bF)(J,{modelValue:e.checkBoxObs,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.checkBoxObs=a}),label:"Observación",color:"primary",onInput:e.getCheckingObs,dense:""},null,8,["modelValue","onInput"])])])])]),(0,r.Lk)("div",C,[(0,r.Lk)("div",A,[(0,r.bF)(X,{label:"Perfil",options:e.perfil,"option-value":"ID_PERFIL","option-label":"DESCRIPCION",modelValue:e.selectPerfil,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.selectPerfil=a}),onInput:e.getPersonaPerfil},null,8,["options","modelValue","onInput"])]),(0,r.Lk)("div",P,[(0,r.bF)(X,{"option-value":"ID_PERSONA","option-label":"NOMBRE",modelValue:e.selectPersona,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.selectPersona=a}),label:"Persona",options:e.persona,onInput:e.getDatosPersona},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",N,[(0,r.bF)(X,{modelValue:e.tipoVenta,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.tipoVenta=a}),options:e.tipoVentas,"option-value":"CLAVE","option-label":"VALOR",label:"Tipo de Venta",placeholder:"Seleccione Tipo de Venta"},null,8,["modelValue","options"])])]),(0,r.Lk)("div",b,[(0,r.Lk)("div",v,[(0,r.bF)(X,{label:"Medio de Pago","option-value":"ID_MEDIOPAGO","option-label":"MEDIOPAGO",options:e.medioPago,modelValue:e.selectMedioPagoTipo,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.selectMedioPagoTipo=a}),onInput:e.getTipoCredito},null,8,["options","modelValue","onInput"])]),(0,r.Lk)("div",I,[(0,r.bF)(X,{label:"Moneda","option-label":"MONNOM","option-value":"MONCOD",options:e.moneda,modelValue:e.selectMoneda,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.selectMoneda=a}),onInput:e.cambiarMoneda},null,8,["options","modelValue","onInput"])]),(0,r.Lk)("div",E,[(0,r.bF)(X,{label:"Pago Adelantado","option-value":"value","option-label":"label",options:e.adelantoPago,modelValue:e.selectAdelantoPago,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.selectAdelantoPago=a}),onInput:e.cambiarAdelantoDePago},null,8,["options","modelValue","onInput"])]),e.showDetraccion?((0,r.uX)(),(0,r.CE)("div",M,[(0,r.bF)(q,{modelValue:e.porcentajeDetraccion,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.porcentajeDetraccion=a}),label:"Pocentaje(%)",onInput:e.calcularMontoSinDetraccion},null,8,["modelValue","onInput"])])):(0,r.Q3)("v-if",!0),e.mostrarPermisoPerfil||e.mostrarAuxiliar?((0,r.uX)(),(0,r.CE)("div",T,[e.mostrarPermisoPerfil?((0,r.uX)(),(0,r.Wv)(K,{key:0,class:"btn-decorative",label:"Agregar Persona",size:"sm",color:"primary",onClick:e.nuevaPersona},null,8,["onClick"])):(0,r.Q3)("v-if",!0),e.mostrarAuxiliar?((0,r.uX)(),(0,r.Wv)(J,{key:1,modelValue:e.checkBoxAux,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.checkBoxAux=a}),label:"Guardar Auxiliar",color:"primary",onInput:e.getCheckingAux,dense:""},null,8,["modelValue","onInput"])):(0,r.Q3)("v-if",!0)])):(0,r.Q3)("v-if",!0)]),e.P_RUBRO===e.COCHERA?((0,r.uX)(),(0,r.CE)("div",R,[(0,r.Lk)("div",D,[(0,r.bF)(q,{hint:"Mask:XXXXXX",mask:"XXXXXX",label:"Placa",modelValue:e.cochera.placa,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.cochera.placa=a}),placeholder:"Ingrese placa",maxlength:6},null,8,["modelValue"])]),(0,r.Lk)("div",_,[(0,r.bF)(q,{modelValue:e.cochera.entrada,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.cochera.entrada=a}),mask:"time",rules:["time"],label:"Entrada",placeholder:"Ingrese Hora de Entrada"},null,8,["modelValue"])]),(0,r.Lk)("div",w,[(0,r.bF)(q,{modelValue:e.cochera.salida,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.cochera.salida=a}),mask:"time",rules:["time"],label:"Salida",placeholder:"Ingrese Hora de Salida"},null,8,["modelValue"])])])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",U,[(0,r.Lk)("div",V,[e.mostrarVoucher?((0,r.uX)(),(0,r.Wv)(q,{key:0,label:e.labelVoucher,modelValue:e.voucher,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.voucher=a}),onInput:e.changeVoucher},null,8,["label","modelValue","onInput"])):(0,r.Q3)("v-if",!0)]),(0,r.Lk)("div",k,[e.mostrarCta?((0,r.uX)(),(0,r.Wv)(X,{key:0,label:"Cta. Bancaria","option-label":"CTACTE","option-value":"NUMCTA",options:e.ctaBancaria,modelValue:e.selectCtaBancaria,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.selectCtaBancaria=a})},null,8,["options","modelValue"])):(0,r.Q3)("v-if",!0)])]),(0,r.Lk)("div",F,[(0,r.Lk)("div",G,[e.mostrarObservacion?((0,r.uX)(),(0,r.Wv)(q,{key:0,label:"Observación",modelValue:e.observacion,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.observacion=a}),maxlength:e.sizeObs},null,8,["modelValue","maxlength"])):(0,r.Q3)("v-if",!0)])]),e.mostrarAuxiliar?((0,r.uX)(),(0,r.CE)("div",S,[(0,r.Lk)("p",x,[a[25]||(a[25]=(0,r.Lk)("b",{class:"flex",style:{color:"#df1c3f"}},"RUC :",-1)),(0,r.Lk)("b",null,(0,i.v_)(e.datosAuxiliar.RUC),1)]),(0,r.Lk)("p",L,[a[26]||(a[26]=(0,r.Lk)("b",{class:"flex",style:{color:"#df1c3f"}},"Razón Social :",-1)),(0,r.Lk)("b",null,(0,i.v_)(e.datosAuxiliar.CLIENTE),1)]),(0,r.Lk)("p",B,[a[27]||(a[27]=(0,r.Lk)("b",{class:"flex",style:{color:"#df1c3f"}},"Dirección :",-1)),(0,r.Lk)("b",null,(0,i.v_)(e.datosAuxiliar.DIRECCION),1)])])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",null,[(0,r.bF)(z,null,{default:(0,r.k6)(function(){return[(0,r.bF)(K,{class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,r.k6)(function(){return n()(a[28]||(a[28]=[(0,r.eW)("Agregar",-1)]))}),_:1},8,["onClick"]),(0,r.bF)(K,{class:"q-ma-xs",size:"sm",icon:"delete",color:"primary",onClick:e.deleteRows,flat:""},{default:(0,r.k6)(function(){return n()(a[29]||(a[29]=[(0,r.eW)("Eliminar",-1)]))}),_:1},8,["onClick"])]}),_:1}),(0,r.bF)(Z,{class:"ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,rowSelection:"multiple",groupUseEntireRow:!0,groupIncludeFooter:!0,frameworkComponents:e.frameworkComponents,stopEditingWhenGridLosesFocus:!0,onCellValueChanged:e.editing,singleClickEdit:!0,style:{height:"calc(100vh - 425px)",width:"100%"}},null,8,["columnDefs","rowData","onGridReady","frameworkComponents","onCellValueChanged"]),(0,r.Lk)("div",y,[(0,r.Lk)("div",H,[(0,r.Lk)("div",$,[a[30]||(a[30]=(0,r.Lk)("div",{class:"col"},null,-1)),(0,r.Lk)("p",Q,"Total a Pagar: "+(0,i.v_)(e.monsig+": "+e.total),1)])])])])]}),_:1})):(0,r.Q3)("v-if",!0),(0,r.bo)((0,r.bF)(ae,{ref:e.pageHeader.tabsKeys.acuenta,tab:"",onGetPagos:e.getPagos},null,8,["onGetPagos"]),[[l.aG,e.pageHeader.tabActive===e.pageHeader.tabsKeys.acuenta]]),(0,r.bo)((0,r.bF)(oe,{ref:e.pageHeader.tabsKeys.consultar,tab:"",cp:"ingresosVarios",lessHeight:"355"},null,512),[[l.aG,e.pageHeader.tabActive===e.pageHeader.tabsKeys.consultar]]),(0,r.bF)(te,{modelValue:e.openModalCuotas,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.openModalCuotas=a}),cliente:e.nomCliente,title:e.title,moneda:e.monsig,total:e.totalPagoCredito,onSubmit:e.generarCuotasDeFactura},null,8,["modelValue","cliente","title","moneda","total","onSubmit"]),e.openModal?((0,r.uX)(),(0,r.Wv)(ne,{key:2,modelValue:e.openModal,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.openModal=a}),onSubmit:e.guardarformaPago,feccam:e.feccam,mondeuda:e.storeMoneda,saldo:e.total},null,8,["modelValue","onSubmit","feccam","mondeuda","saldo"])):(0,r.Q3)("v-if",!0),e.cambioModal?((0,r.uX)(),(0,r.Wv)(re,{key:3,idFormulario:22,modal:!0,modelValue:e.cambioModal,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.cambioModal=a}),methodUpdate:"TipoCambioController/updateTipoCambio",methodAdd:"TipoCambioController/addTipoCambio"},null,8,["modelValue"])):(0,r.Q3)("v-if",!0),e.personaModal?((0,r.uX)(),(0,r.Wv)(ie,{key:4,modelValue:e.personaModal,"onUpdate:modelValue":a[24]||(a[24]=function(a){return e.personaModal=a}),onSubmit:e.submit,perfilDefecto:e.perfilAuxiliar},null,8,["modelValue","onSubmit","perfilDefecto"])):(0,r.Q3)("v-if",!0)]}),_:1})}var q=o(41562),J=o.n(q),Y=o(99550),W=o.n(Y),j=o(76080),K=o.n(j),z=o(45254),Z=o.n(z),ee=(o(12563),o(30683),o(71225),o(39866),o(23825),o(77507),o(10239),o(23513),o(50310),o(30317),o(5962),o(90095),o(11777),o(15547),o(83190),o(27153),o(44264),o(66307),o(2369),o(68017),o(13715),o(24066),o(88567)),ae=o(95718),oe=o(53380),te=o(64208),ne=o(54489),re=o(54267),ie=o(18105),le=o(12143),se=o(95477),ce=o(3112),ue=o(23564),de=o(80660),me=o(36408),pe=o(96330),he=o(64446),fe=o(42037),ge=o(70674),Oe=o(57176),Ce=o(99637),Ae=o(2701),Pe=o(69759),Ne=o(86028),be=o(9820),ve=o(57668),Ie=o(38739),Ee=o(75053),Me=o(12533),Te=o(2805),Re=o(41615),De=o(64303),_e=o(74160),we=o(6123),Ue=o(65848),Ve=o(26232),ke=o(2652),Fe=o(61582),Ge={components:{QCard:ee.A,QDate:le.A,QPopupProxy:se.A,QCardSection:ae.A,QSeparator:oe.A,QInput:te.A,QSelect:ne.S,QCheckbox:ce.A,QOptionGroup:Ie.A,sieGrid:me.A,sieModal:Ee.A,headerGrid:pe.A,cambio:Oe.A,crearPersona:Ae["default"],formaPago:Pe.A,consultarComprobante:be.A,AgregarPersona:Te.A,crearBotones:De.A,QIcon:we.bP,QTime:ue.A,cuotasFactura:Ve.A,QPageHeader:ke.A,pagosACuenta:Fe.A,QBtn:we.Il},mixins:[Ue.A],data:function(){return{nameComponente:"IngresosVarios",talon:[],selectTalon:null,infoConcepto:[],perfil:[],selectPerfil:Re["default"].PERFIL_ALUMNO,chkTalon:!1,nroRecibo:"",frameworkComponents:null,fecha:(0,ie.Ay)(new Date,"DD/MM/YYYY"),persona:[],selectPersona:"",medioPago:[],selectMedioPagoTipo:Re["default"].MEDIO_PAGO_EFECTIVO,adelantoPago:[],selectAdelantoPago:"",voucher:"",ctaBancaria:[],selectCtaBancaria:"",boletaOrigen:"",moneda:[],title:"Registro Ingresos Varios",titleModal:"SIEWEB: Tesorería",openModalCuotas:!1,nroCuota:0,montoCuotas:0,sinMontoCuotas:0,cantFecven:0,montoCob:0,titleCuotas:"",columnDefsCF:null,rowDataCF:null,apiCF:null,selectMoneda:null,storeMoneda:{MONNOM:"Soles",MONSIG:"S/",MONCOD:"001"},monsig:"",openModal:!1,nomCliente:"",checkBoxObs:!1,checkBoxCancelado:!0,checkBoxAux:!1,tipoComprobante:null,id_comprobante:Re["default"].BOLETA,mostrarAuxiliar:!1,mostrarObservacion:!1,mostrarVoucher:!1,mostrarCta:!1,cacheMonedas:{},observacion:"",columnDefs:null,rowData:null,total:"0.00",cambioModal:!1,personaModal:!1,permisoPerfil:[],PAGO_FORPAG:"",tipoCredito:null,PAGO_ORIPAG:Re["default"].ORIPAG_CAJA,origenPago:Re["default"].ORIGEN_CAJA,feccam:null,formasDePago:[],labelVoucher:"Nro. Voucher",readonlyVoucher:!0,readonlyBanco:!0,count:0,nivelAcceso:(0,ve["default"])().ruta.nivel,botones:[],totalPagoCredito:0,mostrarPermisoPerfil:!1,sizeObs:"",showDetraccion:!1,porcentajeDetraccion:Re["default"].PORCENTAJE_DETRACCION,agenteDetraccion:!0,datosAuxiliar:{RAZON_SOCIAL:"",RUC:"",DIRECCION:""},medioPagoCta:null,perfilAuxiliar:Re["default"].PERFIL_CLIENTE_AUXILIAR,P_RUBRO:"",tipoVentas:[],COMERCIO:"COMERCIO",COCHERA:"COCHERA",tipoVenta:"0101",cochera:{entrada:"",salida:"",placa:""},openaModalPrueba:!0,pageHeader:{tabs:[{name:"index",label:"registro"},{name:"pagoACuenta",label:"pagos a cuenta"},{name:"consultar",label:"consultar"}],tabsKeys:{registro:"index",acuenta:"pagoACuenta",consultar:"consultar"},tabActive:"index",botones:[],title:"Ingresos Varios",componente:"ingresosVarios",nivelAcceso:(0,ve["default"])().ruta.nivel}}},methods:{generarTabs:function(){this.pageHeader.tabs=[{name:"index",label:"registro"}],this.pageHeader.nivelAcceso>=Re["default"].LECTURA_ESCRITURA&&this.pageHeader.tabs.push({name:"pagoACuenta",label:"pagos a cuenta"}),this.pageHeader.tabs.push({name:"consultar",label:"consultar"})},actionTab:function(e){var a=this;return Z()(K()().m(function o(){var t;return K()().w(function(o){while(1)switch(o.n){case 0:if(a.pageHeader.tabActive=e,a.pageHeader.tabActive!==a.pageHeader.tabsKeys.registro){o.n=1;break}return a.crearBotones(),a.pageHeader.title="Ingresos Varios",a.pageHeader.componente="ingresosVarios",a.pageHeader.nivelAcceso=(0,ve["default"])().ruta.nivel,o.a(2,!0);case 1:return o.n=2,a.$refs[e].actionTab();case 2:t=o.v,a.pageHeader.title=t.title,a.pageHeader.componente=t.componente,a.pageHeader.nivelAcceso=t.nivelAcceso,a.pageHeader.botones=t.botones;case 3:return o.a(2)}},o)}))()},getPagos:function(){this.$refs[this.pageHeader.tabsKeys.consultar].pagosEmitidos()},changeVoucher:function(){this.voucher=this.voucher.split("").filter(function(e){return String(e).trim().length>0}).join("")},getPorcentajeDetraccion:function(){var e=this;return Z()(K()().m(function a(){var o,t,n;return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,de.$http.get("api/empresaController/getEmpresas");case 1:if(o=a.v,0!==o.length){a.n=2;break}return e.porcentajeDetraccion=Re["default"].PORCENTAJE_DETRACCION,a.a(2,!0);case 2:t=W()(o,1),n=t[0],e.porcentajeDetraccion=n.PORCENTAJE_DETRACCION||Re["default"].PORCENTAJE_DETRACCION;case 3:return a.a(2)}},a)}))()},cambiarAdelantoDePago:function(){var e=this;return Z()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return e.showDetraccion=e.selectAdelantoPago===Re["default"].TIPO_ADELANTO_PAGO.DETRACCION,a.n=1,e.getPorcentajeDetraccion();case 1:e.showDetraccion&&e.$alert("Debe registrar el porcentaje de DETRACCION correspondiente. El sistema por defecto le ofrece el ".concat(e.porcentajeDetraccion,"%"),"info");case 2:return a.a(2)}},a)}))()},getDdl:function(){var e=this;return Z()(K()().m(function a(){var o;return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,_e.n)(["PAGO"]);case 1:o=a.v,e.sizeObs=o.PAGO.OBSERVA;case 2:return a.a(2)}},a)}))()},abrirModalTipoCambio:function(){this.cambioModal=!0},crearBotones:function(){this.botones=[{label:"Forma Pago",icon:"list_money",click:this.formaPago,minAcceso:Re["default"].LECTURA_ESCRITURA},{label:"GUARDAR",icon:"save",click:this.guardarIngresosVarios,minAcceso:Re["default"].LECTURA_ESCRITURA}],this.pageHeader.botones=this.botones},redirigirPagosACuenta:function(){this.$router.push({name:"tesoreria.registroPagosACuenta"})},getChecking:function(){},getCheckingObs:function(){!0===this.checkBoxObs?this.mostrarObservacion=!0:this.mostrarObservacion=!1},mostrarMediosPago:function(e){this.labelVoucher="Nro. Voucher",e===Re["default"].MEDIOS_PAGO_GRUPO.TARJETA?(this.mostrarVoucher=!0,this.mostrarCta=!1):[Re["default"].MEDIOS_PAGO_GRUPO.BANCO,Re["default"].MEDIOS_PAGO_GRUPO.CHEQUE].includes(e)?(this.mostrarVoucher=!0,this.mostrarCta=!0,this.labelVoucher=Re["default"].MEDIOS_PAGO_GRUPO.BANCO===e?"Nro. Operación":"Nro. Cheque"):(this.mostrarVoucher=!1,this.mostrarCta=!1)},getCheckingAux:function(){this.getTalonariosUsuario()},getTipoCredito:function(){var e=this;return Z()(K()().m(function a(){var o,t,n;return K()().w(function(a){while(1)switch(a.n){case 0:o=[],e.medioPago.forEach(function(a){e.selectMedioPagoTipo===a.ID_MEDIOPAGO&&o.push(a)}),0!==o.length&&(t=[].concat(o),n=t[0],e.PAGO_FORPAG=n.FORPAG,e.tipoCredito=n.TIPO_MEDIO,[Re["default"].MEDIOS_PAGO_GRUPO.BANCO,Re["default"].MEDIOS_PAGO_GRUPO.CHEQUE].includes(n.TIPO_MEDIO)?(e.origenPago=Re["default"].ORIGEN_BANCO,e.PAGO_ORIPAG=Re["default"].ORIPAG_BANCO):Re["default"].MEDIOS_PAGO_GRUPO.TARJETA===n.TIPO_MEDIO?n.NUMCTA&&n.NUMCTA.length>0?(e.selectCtaBancaria=n.NUMCTA,e.origenPago=Re["default"].ORIGEN_BANCO,e.PAGO_ORIPAG=Re["default"].ORIPAG_BANCO):(e.selectCtaBancaria=null,e.origenPago=Re["default"].ORIGEN_CAJA,e.PAGO_ORIPAG=Re["default"].ORIPAG_CAJA):(e.origenPago=Re["default"].ORIGEN_CAJA,e.PAGO_ORIPAG=Re["default"].ORIPAG_CAJA),e.mostrarMediosPago(n.TIPO_MEDIO));case 1:return a.a(2)}},a)}))()},consultar:function(){this.$router.push({name:"tesoreria.registroConsultarComprobante",params:{cp:"ingresosVarios"}})},getRows:function(e){var a=[];return(0,Ce["default"])(e,function(e){a.push(e.data)}),a},guardarformaPago:function(e){this.formasDePago=this.getRows(e),this.guardarIngresosVarios()},formaPago:function(){var e=this.validarIngresosVarios("openFormaPago");e&&(this.feccam=(0,re.convertToYMD)(this.fecha),this.openModal=!0)},getForm:function(e){if(e.success){var a="";e.form.TIPO_PERSONA===Re["default"].PERSONA_NATURAL?a="".concat(e.form.NOMBRES," ").concat(e.form.APELLIDO_PATERNO," ").concat(e.form.APELLIDO_MATERNO," | ").concat(e.form.IDPERSONA):e.form.TIPO_PERSONA===Re["default"].PERSONA_JURIDICA&&(a="".concat(e.form.RAZONSOCIAL," | ").concat(e.form.IDPERSONA)),this.persona.unshift({ID_PERSONA:e.form.IDPERSONA,NOMBRE:a}),this.selectPersona=e.form.IDPERSONA}},loadPerfil:function(e){e.idPerfil.push(this.selectPerfil)},nuevaPersona:function(){this.personaModal=!0},validarIngresosVarios:function(e){if(Number(this.nroRecibo)<=0)return this.$alert("El número del correlativo no puede ser cero","warning"),!1;if(!this.selectPersona)return this.$alert("Debe seleccionar una persona","warning"),!1;if(!this.selectTalon)return this.$alert("Debe seleccionar un talonario","warning"),!1;var a=this.api.getModel().rowsToDisplay,o={};if(!(a.length>0))return this.$alert("No ha registrado los conceptos para cancelar.","warning"),!1;for(var t=!1,n=0,r=a.length,i=0;i<r;i++){var l=this.api.getModel().rowsToDisplay[i];if(!l.data.concepto){t=!0,n=l.data.item;break}var s=l.data.concepto+l.data.mes+l.data.anio;o[s]||(o[s]={item:l.data.item,numero:0}),o[s].item=l.data.item,o[s].concob=l.data.concepto,o[s].mes=l.data.mes,o[s].anio=l.data.anio,o[s].numero+=1}var c=[];for(var u in o)if(o[u].numero>1)if(this.infoConcepto[o[u].concob]){var d=this.infoConcepto[o[u].concob];c.push("El item (".concat(o[u].item,") esta duplicado por el concepto (").concat(d.CONDES,")"))}else c.push("El item (".concat(o[u].item,") esta duplicado"));if(c.length>0){var m=[].concat(c),p=m[0];return this.$alert(p,"warning"),!1}return t?(this.$alert("No ha elegido un concepto en el item (".concat(n,")."),"warning"),!1):"openFormaPago"===e&&1!==a.length?(this.$alert("Sólo puede aplicar las formas de pago por 1 concepto a la vez","warning"),!1):"savePago"===e&&!0===this.checkBoxCancelado&&null===this.selectMedioPagoTipo?(this.$alert("Debe de elegir el medio de pago","warning"),!1):!(this.tipoCredito&&Number(this.tipoCredito)===Number(Re["default"].TIPO_MEDIO_PAGO_TARJETA)&&!this.voucher)||(this.$alert("No ingreso el número de voucher","warning"),!1)},validarConceptosIgv:function(){var e=this.api.getSelectedRows();return e.every(function(e){return e.afeigv===Re["default"].AFEIGV})},guardarIngresosVarios:function(){var e=this;return Z()(K()().m(function a(){var o;return K()().w(function(a){while(1)switch(a.n){case 0:o=e.validarIngresosVarios("savePago"),o&&(e.tipoComprobante===Re["default"].FACTURA&&!1===e.checkBoxCancelado&&Number(e.total)>0?(e.calcularMontoSinDetraccion(),e.openModalCuotas=!0,e.gridCuotasFactura()):e.registrarIngresosVarios());case 1:return a.a(2)}},a)}))()},clearForm:function(){this.openModal=!1,this.selectPersona=null,this.formasDePago=[],this.total="0.00",this.observacion="",this.selectCtaBancaria=null,this.voucher="",this.selectMedioPagoTipo=Re["default"].MEDIO_PAGO_EFECTIVO,this.origenPago=Re["default"].ORIGEN_CAJA,this.getTipoCredito()},generarFormadePagoGrupal:function(e,a,o){var t=n()(o),r=t[0],i=[],l=[],s={};this.medioPago.forEach(function(e){s[e.ID_MEDIOPAGO]=e}),e.forEach(function(e){var a=s[e.FORMAPAGO];if(a){var o={ID_MEDIOPAGO:e.FORMAPAGO,NUMVOU:e.OPERACION,MONTOING:e.INGRESO,MONTOSAL:e.SALIDA,MONCOD:e.MONEDA,CONCOB:r.CONCOB,MESCOB:r.MESCOB,ANOCOB:r.ANOCOB};a.NUMCTA&&a.NUMCTA.length>0?(o.NUMCTA=a.NUMCTA,l.push(o)):i.push(o)}});var c=[];return i.length>0&&c.push({datos:{FECPAG:a.FECEMI,ORIPAG:Re["default"].ORIGEN_CAJA},detalle:i}),l.length>0&&c.push({datos:{FECPAG:a.FECEMI,ORIPAG:Re["default"].ORIGEN_BANCO},detalle:l}),c},generarFormaDePagoUnico:function(e,a){var o,t=[],n=J()(a);try{for(n.s();!(o=n.n()).done;){var r=o.value,i={ID_MEDIOPAGO:this.selectMedioPagoTipo,MONTOING:r.MONTOPAG,MONTOSAL:0,MONCOD:this.selectMoneda,CONCOB:r.CONCOB,MESCOB:r.MESCOB,ANOCOB:r.ANOCOB};this.tipoCredito===Re["default"].MEDIOS_PAGO_GRUPO.BANCO?(i.NUMCTA=this.selectCtaBancaria,i.NUMOPE=this.voucher):this.tipoCredito===Re["default"].MEDIOS_PAGO_GRUPO.CHEQUE?(i.NUMCTA=this.selectCtaBancaria,i.NUMCHE=this.voucher):this.tipoCredito===Re["default"].MEDIOS_PAGO_GRUPO.TARJETA&&(i.NUMVOU=this.voucher,i.NUMOPE=this.voucher,i.NUMCTA=this.selectCtaBancaria),t.push(i)}}catch(e){n.e(e)}finally{n.f()}return{datos:{FECPAG:e.FECEMI,ORIPAG:this.origenPago},detalle:t}},enumerarItem:function(){var e=[];this.api.forEachNodeAfterFilterAndSort(function(a,o){var t=a.data;t.item=o+1,e.push(t)}),this.api.updateRowData({update:e})},deleteRows:function(){var e=this.api.getSelectedRows();e.length>0?(this.api.updateRowData({remove:e}),this.enumerarItem(),this.calcularTotal()):this.$alert("Debe seleccionar un registro.")},addRow:function(){var e=(0,re.convertToYMD)(this.fecha),a={item:this.api.getModel().rowsToDisplay.length+1,anio:String(e.getFullYear()),mes:("0"+String(e.getMonth()+1)).slice(-2),concepto:"",afeigv:"N",cantidad:1,precio:0,monto:0,mora:0,descuento:0,subtotal:0};this.api.updateRowData({add:[a]})},calcularMontoSinDetraccion:function(){if(this.showDetraccion){var e=(Number(this.total)*(Number(this.porcentajeDetraccion)/100)).toFixed(2);this.totalPagoCredito=Number(this.total)-Number(e)}else this.totalPagoCredito=this.total},modificandoRow:function(e){var a=e.colDef.field,o=e.data;"cantidad"!==a&&"precio"!==a&&"mora"!==a&&"descuento"!==a||(o[a]=parseFloat((0,fe.toFixed)(o[a])));var t=0===o.cantidad?1:o.cantidad;o.cantidad=t;var n=o.precio;o.monto=n*t;var r=o.monto,i=o.descuento,l=o.mora;i>=r&&r>0?(this.$alert("El descuento no debe ser mayor o igual al monto.","warning"),o.descuento=0):l>0&&i>0&&"mora"===a?(this.$alert("Ya tiene descuento asignado.","warning"),o.mora=0):l>0&&i>0&&"descuento"===a&&(this.$alert("Ya tiene mora asignada.","warning"),o.descuento=0),o.subtotal=r+o.mora-o.descuento,this.api.updateRowData({update:[o]})},editing:function(e){this.modificandoRow(e),this.calcularTotal()},calcularTotal:function(){var e=0;this.api.getModel().forEachNode(function(a){e+=a.data.subtotal}),this.total=(0,fe.toFixed)(e)},cambiarAnioMes:function(){var e=this.fecha.split("/");if(3===e.length){var a=[];this.api.getModel().forEachNode(function(o){var t=String(e[2]),n=String(e[1]);o.data.anio=t,o.data.mes=n,a.push(o.data)}),this.api.updateRowData({update:a})}},closeModal:function(){this.$refs.qDateProxy.hide(),this.cambiarAnioMes()},onGridReady:function(e){this.api=e.api},onGridReadyCF:function(e){this.apiCF=e.api},getDatosPersona:function(e){var a=this;return Z()(K()().m(function e(){var o,t,r,i,l;return K()().w(function(e){while(1)switch(e.n){case 0:if(a.mostrarAuxiliar=!1,a.checkBoxAux=!1,a.agenteDetraccion=!0,![Re["default"].PERFIL_ALUMNO,Re["default"].PERFIL_POSTULANTE].includes(a.selectPerfil)){e.n=2;break}return e.n=1,de.$http.get("api/personaController/getPersonaSubcliente",{params:{parametros:{id_persona_subcliente:a.selectPersona,activo:Re["default"].SUBCLIENTE_ACTIVO}}});case 1:o=e.v,o.length>0&&(t=n()(o),r=t[0],a.nomCliente=r.SUBCLIENTE,a.mostrarAuxiliar=Number(r.ID_COMPROBANTE)===Number(Re["default"].FACTURA),a.checkBoxAux=Number(r.ID_COMPROBANTE)===Number(Re["default"].FACTURA),a.datosAuxiliar=Number(r.ID_COMPROBANTE)===Number(Re["default"].FACTURA)?{CLIENTE:r.CLIENTE?r.CLIENTE.toUpperCase():"",RUC:r.NRODOC_CLIENTE,DIRECCION:r.DIRECCION_CLIENTE||"S/dir"}:{}),e.n=4;break;case 2:return e.n=3,de.$http.get("api/personaController/getDatosPersona",{params:{params:{idPersona:a.selectPersona,tipo:2}}});case 3:i=e.v,l=i.persona,l.ID_PERSONA&&!1===l.DETRACCION&&(a.agenteDetraccion=!1);case 4:return e.a(2)}},e)}))()},getTalonariosUsuario:function(){var e=this;return Z()(K()().m(function a(){var o,t;return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,de.$http.get("api/talonarioController/getTalonariosUsuario",{params:{parametros:{response:"combo",activo:1}}});case 1:o=a.v,o.length>0&&(t={},t[Re["default"].TALON_TIPO_USO.ING_VARIOS]=null,t[Re["default"].TALON_TIPO_USO.CAJA]=null,t[Re["default"].TALON_TIPO_USO.PRINCIPAL]=null,e.talon=o,o.forEach(function(e){Number(e.TIPO_USO)===Re["default"].TALON_TIPO_USO.ING_VARIOS?t[Re["default"].TALON_TIPO_USO.ING_VARIOS]=e.NUMTAL:Number(e.TIPO_USO)===Re["default"].TALON_TIPO_USO.CAJA?t[Re["default"].TALON_TIPO_USO.CAJA]=e.NUMTAL:Number(e.TIPO_USO)===Re["default"].TALON_TIPO_USO.PRINCIPAL&&(t[Re["default"].TALON_TIPO_USO.PRINCIPAL]=e.NUMTAL)}),t[Re["default"].TALON_TIPO_USO.ING_VARIOS]?e.selectTalon=t[Re["default"].TALON_TIPO_USO.ING_VARIOS]:t[Re["default"].TALON_TIPO_USO.CAJA]?e.selectTalon=t[Re["default"].TALON_TIPO_USO.CAJA]:t[Re["default"].TALON_TIPO_USO.PRINCIPAL]&&(e.selectTalon=t[Re["default"].TALON_TIPO_USO.PRINCIPAL]),e.selectTalon&&e.editRecibo());case 2:return a.a(2)}},a)}))()},editRecibo:function(){var e=this;return Z()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getNroRecibo(e.selectTalon);case 1:return a.a(2)}},a)}))()},getNroRecibo:function(e){var a=this;return Z()(K()().m(function o(){var t,r,i;return K()().w(function(o){while(1)switch(o.n){case 0:if(!e){o.n=2;break}return o.n=1,de.$http.get("api/talonarioController/getCorrelativo",{params:{parametros:{response:"combo",numtal:e}}});case 1:t=o.v,t.length>0&&(r=n()(t),i=r[0],a.nroRecibo=i.NUMPAG,a.tipoComprobante=i.ID_COMPROBANTE);case 2:return o.a(2)}},o)}))()},getPerfiles:function(){var e=this;de.$http.get("api/personaController/getPerfiles").then(function(a){e.perfil=a})},getPersonaPerfil:function(e){var a=this;this.mostrarPermisoPerfil=Number(this.selectPerfil)===Number(Re["default"].PERFIL_CLIENTE_AUXILIAR),de.$http.get("api/personaController/getPersonaPerfil",{params:{params:{id_perfil:this.selectPerfil||0}}}).then(function(e){a.selectPersona=null,a.checkBoxAux=!1,a.mostrarAuxiliar=!1,a.persona=e})},getMediosPagos:function(){var e=this;return Z()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,de.$http.get("api/formaPagoController/getMediosDePago",{params:{parametros:{response:"list",tipo_medio:"I"}}}).then(function(a){e.medioPago=a,e.getTipoCredito()});case 1:return a.a(2)}},a)}))()},getAdelantoPago:function(){var e=this;return Z()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Re["default"].SISTEMA_ADELANTO();case 1:e.adelantoPago=a.v;case 2:return a.a(2)}},a)}))()},getCtaBancaria:function(){var e=this;de.$http.get("api/bancoController/getCuentasBancarias",{params:{parametros:{response:"combo"}}}).then(function(a){e.ctaBancaria=a})},getMoneda:function(){var e=this;return Z()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,de.$http.get("api/cobroController/getMoneda",{params:{parametros:{response:"combo"}}}).then(function(a){if(0!==a.length){var o=n()(a),t=o[0];e.selectMoneda=t.MONCOD,e.monsig=t.MONSIG,(0,Ce["default"])(a,function(a){e.cacheMonedas[a.MONCOD]=a}),e.moneda=a}});case 1:return a.a(2)}},a)}))()},cambiarMoneda:function(){this.storeMoneda={MONNOM:this.cacheMonedas[this.selectMoneda].MONNOM,MONSIG:this.cacheMonedas[this.selectMoneda].MONSIG,MONCOD:this.cacheMonedas[this.selectMoneda].MONCOD},this.monsig=this.cacheMonedas[this.selectMoneda].MONSIG},getPermisosPerfil:function(){var e=this;de.$http.get("api/personaController/getPermisosPerfil").then(function(a){e.permisoPerfil=a})},gridCuotasFactura:function(){var e=this;return Z()(K()().m(function a(){return K()().w(function(a){while(1)switch(a.n){case 0:e.frameworkComponents={agDate:Me.A},e.rowDataCF=[],e.nroCuota=0,e.montoCuotas=0,e.sinMontoCuotas=0,e.cantFecven=0,e.titleCuotas="Total a pagar: ".concat(e.monsig," ").concat(Number(e.totalPagoCredito).toFixed(2)," "),e.columnDefsCF=[{headerName:"Nro. Cuota",field:"NROCUOTA",editable:!1,width:100},{headerName:"Monto",field:"MONTO",cellClass:"text-right",valueFormatter:fe.toFixed,editable:!0,width:160},{headerName:"Fecha Venc.",field:"FECVEN",cellRenderer:Me.A,valueFormatter:function(e){return(0,ie.Ay)(e.value,"DD/MM/YYYY")},width:160}];case 1:return a.a(2)}},a)}))()},addRowCF:function(){var e=this.formatMoment(new Date,"YYYY-MM").split("-"),a=W()(e,2),o=a[0],t=a[1];this.montoCuotas=0,this.sinMontoCuotas=0,this.cantFecven=0;var n=Number(t)+this.nroCuota;this.nroCuota=this.nroCuota+1;var r={NROCUOTA:this.nroCuota,MONTO:0,FECVEN:new Date(o,String(n).padStart(2,"00"),0)};this.apiCF.updateRowData({add:[r]})},deleteRowsCF:function(){this.montoCuotas=0,this.sinMontoCuotas=0,this.cantFecven=0;var e=this.apiCF.getSelectedRows();e.length>0&&this.apiCF.updateRowData({remove:e})},generarCuotasDeFactura:function(e){var a=this;return Z()(K()().m(function o(){var t,n;return K()().w(function(o){while(1)switch(o.n){case 0:a.montoCuotas=0,a.sinMontoCuotas=0,a.cantFecven=0,t=[],n=[],e.forEachNode(function(e){return t.push(e.data)}),(0,Ce["default"])(t,function(e){a.montoCuotas=a.montoCuotas+Number(e.MONTO),0===e.MONTO&&(a.sinMontoCuotas=a.sinMontoCuotas+1),e.FECVEN<new Date&&(a.cantFecven=a.cantFecven+1),n.push({NROCUOTA:e.NROCUOTA,MONTO:e.MONTO,FECVEN:e.FECVEN})}),a.montoCuotas=Number(Number(a.montoCuotas).toFixed(2)),a.totalPagoCredito=Number(Number(a.totalPagoCredito).toFixed(2)),a.cantFecven>0?a.$alert("Existen fechas de vencimiento que son previas a la fecha a actual.","info"):a.sinMontoCuotas>0?a.$alert("Existen Cuotas sin Monto.","info"):a.montoCuotas>a.totalPagoCredito?a.$alert("El importe de las cuotas ("+a.montoCuotas+") es mayor del monto de la Factura ("+a.totalPagoCredito+").","info"):a.montoCuotas<a.totalPagoCredito?a.$alert("El importe de las cuotas ("+a.montoCuotas+") es menor del monto de la Factura ("+a.totalPagoCredito+").","info"):a.registrarIngresosVarios(n);case 1:return o.a(2)}},o)}))()},registrarIngresosVarios:function(){var e=arguments,a=this;return Z()(K()().m(function o(){var t,n,r,i,l,s,c,u,d,m,p,h,f,g,O,C,A,P;return K()().w(function(o){while(1)switch(o.p=o.n){case 0:t=e.length>0&&void 0!==e[0]?e[0]:{},n=[],r={NUMTAL:a.selectTalon,NUMDOC:a.nroRecibo,FECEMI:new Date((0,re.convertToYMD)(a.fecha)),ID_PERFIL:a.selectPerfil,ID_PERSONA:a.selectPersona,ORIPAG:null,FORPAG:null,NUMCTA:null,NUMCHE:null,CHECK_CANCELADO:a.checkBoxCancelado,ANUPAG:Re["default"].PAGO_ANUPAG.CANCELADO,MONCOD:a.selectMoneda,OBSERVACION:a.observacion,EDIT_NUMPAG:a.chkTalon},a.mostrarAuxiliar&&(r.USA_AUXILIAR=a.checkBoxAux),r.TIPVEN=a.tipoVenta,a.showDetraccion&&(r.PORC_DETRACCION=a.porcentajeDetraccion,r.FLGSPA=Re["default"].TIPO_ADELANTO_PAGO.DETRACCION),i=a.getRows(a.api.getModel().rowsToDisplay),l=J()(i),o.p=1,l.s();case 2:if((s=l.n()).done){o.n=5;break}return c=s.value,o.n=3,de.$http.get("api/ConCobroController/getConcepto",{params:{datos:{concob:c.concepto}}});case 3:u=o.v,d={ANOCOB:c.anio,MESCOB:c.mes,CONCOB:c.concepto,AFEIGV:u.AFEIGV,PREUNI:c.precio,CANTIDAD:c.cantidad,MONTOCOB:c.monto,MONTODES:c.descuento,MONTOMOR:c.mora,MONTOPAG:c.subtotal,MONTOGRATI:0===c.precio?c.montoRef:0,MONTOREF:0===c.precio?c.montoRef:0},!1===a.checkBoxCancelado&&(d.MONTOPEN=c.monto,r.ANUPAG=Re["default"].PAGO_ANUPAG.PENDIENTE),n.push(d);case 4:o.n=2;break;case 5:o.n=7;break;case 6:o.p=6,A=o.v,l.e(A);case 7:return o.p=7,l.f(),o.f(7);case 8:if(m={},a.checkBoxCancelado&&(r.ORIPAG=a.PAGO_ORIPAG,r.FORPAG=a.PAGO_FORPAG,r.NUMCTA=a.selectCtaBancaria,r.NUMCHE=a.voucher,m=a.openModal&&a.formasDePago.length>0?a.generarFormadePagoGrupal(a.formasDePago,r,n):a.generarFormaDePagoUnico(r,n)),p={pago:r,pagoDet:n,formaPago:m,cuotas:t},a.P_RUBRO!==a.COCHERA){o.n=11;break}o.p=9,p.cochera=a.validarPagoCochera(),p.cochera.NUMTAL=a.selectTalon,p.cochera.NUMPAG=a.nroRecibo,o.n=11;break;case 10:return o.p=10,P=o.v,o.a(2,a.$alert(P.error?P.error.message:P.message,"warning"));case 11:if(h="¿Esta seguro de emitir el comprobante?",r.ANUPAG===Re["default"].PAGO_ANUPAG.PENDIENTE){for(f=0,g=0,O=0,C=0;C<n.length;C++)console.log(n[C]),f+=n[C].MONTOPAG,g+=n[C].MONTOGRATI,O+=n[C].CANTIDAD;Number(f)===Number(0)&&Number(g)>Number(0)&&(h="¿Esta seguro de emitir el comprobante gratuito por el monto de ".concat(Number(g*O).toFixed(2),"? Donde el Precio de Referencia será: ").concat(Number(g).toFixed(2)," "))}a.$confirm(!1===a.checkBoxCancelado?h:"¿Esta seguro de registrar el pago?","info").onOk(function(){a.$q.loading.show(),de.$http.post("api/PagoController/postPagoVenta",{parametros:p}).then(function(e){a.$q.loading.hide(),a.$alert(e.message,"success").onOk(function(){a.rowData=[],a.clearForm(),a.openModalCuotas=!1,a.mostrarAuxiliar=!1,a.checkBoxAux=!1,a.getTalonariosUsuario(),a.getPagos(),a.$confirm("¿Desea Imprimir el Comprobante?","info",!1,!0).onOk(function(){var o=(0,ve["default"])().origin;a.count=a.count+1;var t=e.data[0],n=t.NUMPAG,r=t.NUMTAL;Re["default"].IMPRIMIR_COMPROBANTE(o,r,n)})})}).catch(function(e){var o=e.error;a.$q.loading.hide(),a.$alert(o.message,"warning")})});case 12:return o.a(2)}},o,null,[[9,10],[1,6,7,8]])}))()},validarPagoCochera:function(){if(this.P_RUBRO===this.COCHERA){if(5!==this.cochera.entrada.length)throw new Error("No se ingreso la fecha de entrada");if(5!==this.cochera.salida.length)throw new Error("No se ingreso la fecha de salida");var e={hora:this.cochera.entrada.slice(0,2),minutos:this.cochera.entrada.slice(3)},a={hora:this.cochera.salida.slice(0,2),minutos:this.cochera.salida.slice(3)};if(6!==String(this.cochera.placa).length)throw new Error("El número de placa no es valido","warning");if(Number(e.hora)>23||Number(e.minutos)>59)throw new Error("La hora de entrada no es valida, recuerde que el formato es de 24hrs","warning");if(Number(a.hora)>23||Number(a.minutos)>59)throw new Error("La hora de salida no es valida, recuerde que el formato  es de 24hrs","warning");var o=new Date;o.setHours(a.hora),o.setMinutes(a.minutos);var t=new Date;return t.setHours(e.hora),t.setMinutes(e.minutos),{entrada:t,salida:o,placa:this.cochera.placa}}},submit:function(e){var a=this;return Z()(K()().m(function o(){return K()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.getPersonaPerfil(e);case 1:a.personaModal=!1;case 2:return o.a(2)}},o)}))()}},computed:{},beforeCreate:function(){var e=this;return Z()(K()().m(function a(){var o,t;return K()().w(function(a){while(1)switch(a.n){case 0:return o={ID_CONSTANTE:[Re["default"].CONSTANTES_SISTEMA.P_RUBRO]},a.n=1,Re["default"].API_CONSTANTES_SISTEMAS(o);case 1:return t=a.v,e.P_RUBRO=t.P_RUBRO,a.n=2,de.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0025"}}});case 2:e.tipoVentas=a.v;case 3:return a.a(2)}},a)}))()},beforeMount:function(){var e=this;return Z()(K()().m(function a(){var o,t,n,r,i;return K()().w(function(a){while(1)switch(a.n){case 0:return e.getDdl(),e.crearBotones(),e.getTalonariosUsuario(),e.getPerfiles(),e.getPersonaPerfil(),e.getMediosPagos(),e.getAdelantoPago(),e.getCtaBancaria(),e.getMoneda(),e.getPermisosPerfil(),o=de.$http.get("api/anioController/getAnios",{params:{parametros:{response:"combo"}}}),t=(0,re.generarMeses)(),a.n=1,de.$http.get("api/concobroController/getConceptos",{params:{parametros:{ingvar:!0,activo:1}}});case 1:n=a.v,e.getPorcentajeDetraccion(),r=[],e.infoConcepto={},n.length>0&&n.forEach(function(a){r.push({CONCOB:a.CONCOB,CONDES:a.CONDES}),e.infoConcepto[a.CONCOB.toString()]=a}),e.frameworkComponents={select:he.A},i=e,Promise.all([o,t]).then(function(a){var o=W()(a,2),t=o[0],n=o[1];e.columnDefs=[{headerName:"Item",field:"item",width:60},{headerName:"Año",field:"anio",width:90,editable:!0,cellEditor:(0,ge.A)(e,"anio"),cellEditorParams:{"option-value":"ID","option-label":"ANO",options:t}},{headerName:"Mes",field:"mes",width:100,editable:!0,cellEditor:(0,ge.A)(e,"mes"),cellEditorParams:{"option-value":"value","option-label":"label",options:n}},{headerName:"Concepto",field:"concepto",width:270,editable:!0,cellEditor:(0,ge.A)(e,"concepto"),cellEditorParams:{"option-value":"CONCOB","option-label":"CONDES",debounce:400,options:r,onChange:function(e,a){var o=!1;if(o)e.updateRowData({update:[a]});else{if(i.infoConcepto[a.concepto]){var t=i.infoConcepto[a.concepto];a.precio=t.MONTO?t.MONTO:0,a.montoRef=t.MONTO?t.MONTO:0,a.afeigv=t.AFEIGV,t.MONCOD!==i.selectMoneda&&i.$confirm("Tipo de moneda distintos\n                      ¿Desea cambiar la moneda por ".concat(i.cacheMonedas[t.MONCOD].MONNOM,"?\n                      Esto afectará a todos los conceptos elegidos previamente.")).onOk(function(){i.selectMoneda=t.MONCOD})}e.updateRowData({update:[a]}),i.modificandoRow({data:a,colDef:{field:"precio"}}),i.calcularTotal()}}}},{headerName:"Cant",field:"cantidad",width:70,valueFormatter:fe.toFixed,cellEditor:Ne.A,cellClass:"text-right",editable:!0},{headerName:"Prec. Unit.",field:"precio",width:100,valueFormatter:fe.toFixed,cellEditor:Ne.A,cellClass:"text-right",editable:!0},{headerName:"Monto",field:"monto",valueFormatter:fe.toFixed,cellClass:"text-right",width:80},{headerName:"Mora",field:"mora",width:100,valueFormatter:fe.toFixed,cellEditor:Ne.A,cellClass:"text-right",editable:!0},{headerName:"Dscto",field:"descuento",width:100,valueFormatter:fe.toFixed,cellEditor:Ne.A,cellClass:"text-right",editable:!0},{headerName:"Subtotal",field:"subtotal",valueFormatter:fe.toFixed,cellClass:"text-right",width:100}]}),e.rowData=[],e.generarTabs();case 2:return a.a(2)}},a)}))()}},Se=o(12807);const xe=(0,Se.A)(Ge,[["render",X]]);var Le=xe}}]);