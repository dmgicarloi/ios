"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[74790],{74790:function(e,t,n){n.r(t),n.d(t,{default:function(){return Se}});n(71225),n(50310),n(5962),n(83190);var o=n(61758),r={class:"q-px-md"},a={class:"flex justify-between items-center"},i={class:"row q-ma-xs q-col-gutter-sm q-pb-md"},s={class:"col-xs-12 col-lg-4"},l={class:"col-xs-12 col-lg-8"},c={class:"flex justify-left"},u={class:"tabs-container"},m={class:"row q-ma-xs q-col-gutter-sm"},d={class:"col-xs-12 col-lg-12"},g={class:"col-xs-12 col-lg-6"},f={class:"col-xs-12 col-lg-6"},h={class:"col-xs-12 col-lg-12"};function p(e,t){var n=this,p=(0,o.g2)("q-btn"),C=(0,o.g2)("q-card-section"),S=(0,o.g2)("q-separator"),E=(0,o.g2)("q-select"),O=(0,o.g2)("q-input"),b=(0,o.g2)("sie-table"),I=(0,o.g2)("q-tab"),w=(0,o.g2)("q-tabs"),v=(0,o.g2)("etapas-admision"),A=(0,o.g2)("comentarios-seguimiento"),R=(0,o.g2)("eventos-seguimiento"),N=(0,o.g2)("familiares-seguimiento"),F=(0,o.g2)("contactos-seguimiento"),T=(0,o.g2)("sie-modal"),D=(0,o.g2)("q-card");return(0,o.uX)(),(0,o.Wv)(D,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",r,[(0,o.Lk)("div",a,[t[8]||(t[8]=(0,o.Lk)("span",{class:"q-title q-my-xs text-bold text-primary"},"Seguimiento",-1)),(0,o.bF)(C,null,{default:(0,o.k6)(function(){return[(0,o.bF)(p,{icon:"add",color:"primary",label:"Agregar",size:"sm",onClick:e.openModalAgregarSeguimiento},null,8,["onClick"])]}),_:1})])]),(0,o.bF)(S),(0,o.bF)(C,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",i,[(0,o.Lk)("div",s,[(0,o.bF)(E,{modelValue:e.filter.anio,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.anio=t}),label:"Año",options:e.comboAnios,onInput:e.filtroAnioFueSeleccionado},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",l,[(0,o.bF)(O,{modelValue:e.filter.nombre,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.nombre=t}),label:"Nombre de seguimiento"},null,8,["modelValue"])])]),(0,o.Lk)("div",c,[(0,o.bF)(b,{class:"q-mt-sm",ref:"tablaSeguimientos",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 220px); max-width: 30%; width: 100%; margin: 0;",context:n,showSearch:!1,columns:e.columnsSeguimientos,data:e.seguimientosFiltered,config:e.configSeguimientos,"show-refresh":!0,"show-index":!0,selection:"single",onRefresh:e.getSeguimientos,onRowSelected:e.seguimientoFueSeleccionado},null,8,["columns","data","config","onRefresh","onRowSelected"]),(0,o.Lk)("div",u,[(0,o.bF)(w,{class:"q-pb-sm tabs q-caption",modelValue:e.selectedTab,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectedTab=t}),"active-color":"primary",align:"justify"},{default:(0,o.k6)(function(){return[(0,o.bF)(I,{name:"etapa",label:"Etapa"}),(0,o.bF)(I,{name:"comentario",label:"Comentario"}),(0,o.bF)(I,{name:"evento",label:"Evento"}),(0,o.bF)(I,{name:"familia",label:"Familia"}),(0,o.bF)(I,{name:"contacto",label:"Contacto"})]}),_:1},8,["modelValue"]),"etapa"===e.selectedTab&&e.renderEtapas?((0,o.uX)(),(0,o.Wv)(v,{key:0,idPersona:e.rowSelected.ID_PERSONA},null,8,["idPersona"])):(0,o.Q3)("v-if",!0),"comentario"===e.selectedTab&&e.renderComentarios?((0,o.uX)(),(0,o.Wv)(A,{key:1,idSeguimiento:e.rowSelected.ID_SEGUIMIENTO},null,8,["idSeguimiento"])):(0,o.Q3)("v-if",!0),"evento"===e.selectedTab&&e.renderEventos?((0,o.uX)(),(0,o.Wv)(R,{key:2,idPersona:e.rowSelected.ID_PERSONA},null,8,["idPersona"])):(0,o.Q3)("v-if",!0),"familia"===e.selectedTab&&e.renderFamiliares?((0,o.uX)(),(0,o.Wv)(N,{key:3,idPersona:e.rowSelected.ID_PERSONA,stylesProp:"height: calc(100vh - 286px); width: 100%; margin: 0;"},null,8,["idPersona"])):(0,o.Q3)("v-if",!0),"contacto"===e.selectedTab&&e.renderContactos?((0,o.uX)(),(0,o.Wv)(F,{key:4,idSeguimiento:e.rowSelected.ID_SEGUIMIENTO},null,8,["idSeguimiento"])):(0,o.Q3)("v-if",!0)])])]}),_:1}),(0,o.bF)(T,{modelValue:e.modalRegistroSeguimiento,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.modalRegistroSeguimiento=t}),title:e.tituloModalRegistrar,footer:!0,ok:"Guardar",onSubmit:e.registrarSeguimiento},{default:(0,o.k6)(function(){return[(0,o.bF)(C,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",m,[(0,o.Lk)("div",d,[(0,o.bF)(O,{modelValue:e.formSeguimiento.NOMBRE,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formSeguimiento.NOMBRE=t}),label:"Nombre de seguimiento",maxlength:"120"},null,8,["modelValue"])]),(0,o.Lk)("div",g,[(0,o.bF)(E,{modelValue:e.formSeguimiento.ANIO,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formSeguimiento.ANIO=t}),label:"Año",options:e.comboAnios,onInput:e.anioFueSeleccionado},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",f,[(0,o.bF)(E,{modelValue:e.formSeguimiento.ID_GRADO,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formSeguimiento.ID_GRADO=t}),label:"Grado","option-label":"NIVEL_GRADO","option-value":"ID_GRADO",options:e.comboGrados,onInput:e.cambiarListaPersonas},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",h,[(0,o.bF)(E,{modelValue:e.formSeguimiento.ID_PERSONA,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.formSeguimiento.ID_PERSONA=t}),label:"Ficha de inscripción","option-label":"NOMCOMP","option-value":"ID_PERSONA",options:e.comboPersonas},null,8,["modelValue","options"])])])]}),_:1})]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var C=n(57008),S=n.n(C),E=n(76080),O=n.n(E),b=n(45254),I=n.n(b),w=(n(12563),n(39866),n(62692),n(88567)),v=n(95718),A=n(53380),R=n(33777),N=n(64208),F=n(54489),T=n(11654),D=n(26697),M=n(53093),_={data:function(){return{columnsSeguimientos:[],dataSeguimientos:[],configSeguimientos:{}}},methods:{setColumnsSeguimientos:function(){this.columnsSeguimientos=[{name:"NOMBRE",label:"Seguimiento",align:"center",field:"NOMBRE"},{name:"EDIT",label:"",align:"end"}],this.configSeguimientos={flat:!0,round:!0,color:"primary",EDIT:{flat:!0,component:"button",icon:["edit","delete"],tooltip:{edit:"Editar",delete:"Eliminar"},edit:function(e){var t=this;return I()(O()().m(function n(){return O()().w(function(n){while(1)switch(n.n){case 0:t.openModalEditarSeguimiento(e);case 1:return n.a(2)}},n)}))()},delete:function(e){var t=this;return I()(O()().m(function n(){return O()().w(function(n){while(1)switch(n.n){case 0:t.$confirm("¿Está seguro que desea eliminar el seguimiento?").onOk(function(){t.eliminarSeguimiento(e)});case 1:return n.a(2)}},n)}))()}}}}}},k=n(41615),x=n(85146),V={class:"q-px-md"},P={class:"row q-mx-xs q-mb-md q-mt-sm"},L={class:"col-auto"},U={class:"row q-ma-xs q-col-gutter-sm"},q={class:"col-xs-12 col-lg-12"};function G(e,t){var n=(0,o.g2)("q-btn"),r=(0,o.g2)("sie-table"),a=(0,o.g2)("q-input"),i=(0,o.g2)("q-card-section"),s=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.CE)("div",V,[(0,o.Lk)("div",P,[t[2]||(t[2]=(0,o.Lk)("div",{class:"col"},null,-1)),(0,o.Lk)("div",L,[(0,o.bF)(n,{size:"sm",color:"primary",label:"comentario",icon:"add",onClick:e.openModalAgregarComentario},null,8,["onClick"])])]),(0,o.bF)(r,{class:"q-mt-sm",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 319px); width: 100%; margin: 0;",context:this,showSearch:!1,columns:e.columnsComentarios,data:e.dataComentarios,config:e.configComentarios,"show-refresh":!0,"show-index":!0,onRefresh:e.getComentarios},null,8,["columns","data","config","onRefresh"]),(0,o.bF)(s,{modelValue:e.modalRegistroComentario,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.modalRegistroComentario=t}),title:e.tituloModalRegistrar,footer:!0,ok:"Guardar",onSubmit:e.registrarComentario},{default:(0,o.k6)(function(){return[(0,o.bF)(i,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",U,[(0,o.Lk)("div",q,[(0,o.bF)(a,{modelValue:e.formComentario.COMENTARIO,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formComentario.COMENTARIO=t}),label:"Comentario",maxlength:"1000",autogrow:"","input-style":"min-height: 128px"},null,8,["modelValue"])])])]}),_:1})]}),_:1},8,["modelValue","title","onSubmit"])])}n(11777);var $={data:function(){return{columnsComentarios:[],dataComentarios:[],configComentarios:{}}},methods:{setColumnsComentarios:function(){this.columnsComentarios=[{name:"FECHA_REGISTRO",label:"Fecha",align:"left",field:"FECHA_REGISTRO"},{name:"COMENTARIO",label:"Comentario",align:"left",field:"COMENTARIO"},{name:"USUCOD",label:"Usuario",align:"left",field:"USUCOD"},{name:"EDIT",align:"right",field:"EDIT"}],this.configComentarios={flat:!0,round:!0,color:"primary",FECHA_REGISTRO:{component:"datetime",edit:!1},EDIT:{flat:!0,component:"button",icon:["edit","delete"],tooltip:{edit:"Editar",delete:"Eliminar"},edit:function(e){var t=this;return I()(O()().m(function n(){return O()().w(function(n){while(1)switch(n.n){case 0:t.openModalEditarComentario(e);case 1:return n.a(2)}},n)}))()},delete:function(e){var t=this;return I()(O()().m(function n(){return O()().w(function(n){while(1)switch(n.n){case 0:t.$confirm("¿Está seguro que desea eliminar el comentario?").onOk(function(){t.eliminarComentario(e)});case 1:return n.a(2)}},n)}))()}}}}}},Q={components:{QCard:w.A,QCardSection:v.A,QSeparator:A.A,SieTable:R.A,QInput:N.A,QSelect:F.S,QBtn:T.A,QTabs:D.A,QTab:M.A},mixins:[$],props:{idSeguimiento:{type:Number,default:null}},data:function(){return{modalRegistroComentario:!1,tituloModalRegistrar:"Agregar comentario",formComentario:{COMENTARIO:""}}},methods:{getComentarios:function(){var e=this;return I()(O()().m(function t(){var n,o,r;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n={where:{ID_SEGUIMIENTO:e.idSeguimiento}},t.n=1,e.$http.get("api/PostulacionController/getComentariosSeguimiento",{params:{params:n}});case 1:return o=t.v,e.dataComentarios=o,t.a(2,o);case 2:t.p=2,r=t.v,e.$alert(r.error?r.error.message:r.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()},limpiarFormComentario:function(){this.formComentario={ID_SEGUIMIENTO:this.idSeguimiento,COMENTARIO:""}},llenarFormComentario:function(e){this.formComentario={ID_SEGUIMIENTO_COMENTARIO:e.ID_SEGUIMIENTO_COMENTARIO,ID_SEGUIMIENTO:e.ID_SEGUIMIENTO,COMENTARIO:e.COMENTARIO}},openModalAgregarComentario:function(){this.idSeguimiento?(this.limpiarFormComentario(),this.tituloModalRegistrar="Agregar comentario",this.modalRegistroComentario=!0):this.$alert("Debe seleccionar un seguimiento.","info")},openModalEditarComentario:function(e){this.llenarFormComentario(e),this.tituloModalRegistrar="Editar comentario",this.modalRegistroComentario=!0},eliminarComentario:function(e){var t=this;return I()(O()().m(function n(){var o,r;return O()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,o={ID_SEGUIMIENTO_COMENTARIO:e.ID_SEGUIMIENTO_COMENTARIO},n.n=1,t.$http.delete("api/PostulacionController/deleteComentarioSeguimiento",{params:{params:o}});case 1:t.getComentarios(),t.$alert("Comentario eliminado satisfactoriamente","success"),n.n=3;break;case 2:n.p=2,r=n.v,t.$alert(r.error?r.error.message:r.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},validarFormComentario:function(){if(!this.formComentario.COMENTARIO)throw new Error("Debe ingresar el contenido del comentario")},registrarComentario:function(){var e=this;return I()(O()().m(function t(){var n,o;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,e.validarFormComentario(),n=S()({},e.formComentario),t.n=1,e.$http.post("api/PostulacionController/registrarComentarioSeguimiento",{params:n});case 1:e.getComentarios(),e.modalRegistroComentario=!1,e.$alert("Comentario guardado satisfactoriamente","success"),t.n=3;break;case 2:t.p=2,o=t.v,e.$alert(o.error?o.error.message:o.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()}},beforeMount:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:e.setColumnsComentarios(),e.idSeguimiento&&e.getComentarios();case 1:return t.a(2)}},t)}))()}},y=n(12807);const B=(0,y.A)(Q,[["render",G]]);var H=B,X=n(39319),W={class:"q-px-md"},z={class:"row q-mx-xs q-mb-md q-mt-sm"},j={class:"col-auto"},Y={class:"row q-ma-xs q-col-gutter-sm"},J={class:"col-xs-12 col-lg-12"},K={class:"col-xs-12 col-lg-12"},Z={class:"col-xs-12 col-lg-12"},ee={class:"col-xs-12 col-lg-12"},te={key:0,class:"col-xs-12 col-lg-12"},ne={class:"row q-ma-xs q-col-gutter-sm"},oe={class:"col-xs-12 col-lg-12"};function re(e,t){var n=(0,o.g2)("q-btn"),r=(0,o.g2)("sie-table"),a=(0,o.g2)("q-input"),i=(0,o.g2)("q-checkbox"),s=(0,o.g2)("q-card-section"),l=(0,o.g2)("sie-modal"),c=(0,o.g2)("q-select");return(0,o.uX)(),(0,o.CE)("div",W,[(0,o.Lk)("div",z,[t[8]||(t[8]=(0,o.Lk)("div",{class:"col"},null,-1)),(0,o.Lk)("div",j,[(0,o.bF)(n,{class:"q-mr-sm",size:"sm",color:"primary",label:"contacto",icon:"add",onClick:e.openModalAgregarContacto},null,8,["onClick"]),(0,o.bF)(n,{size:"sm",color:"primary",label:"Asignar",icon:"registro_personal",onClick:e.openModalAsignarContacto},null,8,["onClick"])])]),(0,o.bF)(r,{class:"q-mt-sm",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 319px); width: 100%; margin: 0;",context:this,showSearch:!1,columns:e.columnsContactos,data:e.dataContactos,config:e.configContactos,"show-refresh":!0,"show-index":!0,onRefresh:e.getContactosSeguimiento},null,8,["columns","data","config","onRefresh"]),(0,o.bF)(l,{modelValue:e.modalRegistroContacto,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.modalRegistroContacto=t}),title:e.tituloModalRegistrar,footer:!0,ok:"Guardar",onSubmit:e.registrarContacto},{default:(0,o.k6)(function(){return[(0,o.bF)(s,{class:"form-contacto-container"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Y,[(0,o.Lk)("div",J,[(0,o.bF)(a,{modelValue:e.formContacto.APELLIDOS,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formContacto.APELLIDOS=t}),label:"Apellidos",maxlength:"60"},null,8,["modelValue"])]),(0,o.Lk)("div",K,[(0,o.bF)(a,{modelValue:e.formContacto.NOMBRES,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formContacto.NOMBRES=t}),label:"Nombre",maxlength:"30"},null,8,["modelValue"])]),(0,o.Lk)("div",Z,[(0,o.bF)(a,{modelValue:e.formContacto.CORREO,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formContacto.CORREO=t}),label:"Correo",maxlength:"120"},null,8,["modelValue"])]),(0,o.Lk)("div",ee,[(0,o.bF)(a,{modelValue:e.formContacto.TELEFONO,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formContacto.TELEFONO=t}),label:"Teléfono",mask:"####################"},null,8,["modelValue"])]),e.idSeguimiento?((0,o.uX)(),(0,o.CE)("div",te,[(0,o.bF)(i,{modelValue:e.asignarASeguimiento,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.asignarASeguimiento=t}),label:"Asignar contacto al seguimiento"},null,8,["modelValue"])])):(0,o.Q3)("v-if",!0)])]}),_:1})]}),_:1},8,["modelValue","title","onSubmit"]),(0,o.bF)(l,{modelValue:e.modalAsignarContacto,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.modalAsignarContacto=t}),title:"Asignar contacto",footer:!0,ok:"Guardar",onSubmit:e.asignarContacto},{default:(0,o.k6)(function(){return[(0,o.bF)(s,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",ne,[(0,o.Lk)("div",oe,[(0,o.bF)(c,{modelValue:e.contactoAAsignar,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.contactoAAsignar=t}),label:"Contacto",options:e.comboContactos,"option-value":"ID_CONTACTO"},null,8,["modelValue","options"])])])]}),_:1})]}),_:1},8,["modelValue","onSubmit"])])}n(52133),n(6724),n(52776),n(84433);var ae=n(3112),ie={data:function(){return{columnsContactos:[],dataContactos:[],configContactos:{}}},methods:{setColumnsContactos:function(){this.columnsContactos=[{name:"FH_CREACION",label:"Fecha",align:"left",field:"FH_CREACION"},{name:"NOMCOMP",label:"Apellidos y Nombres",align:"left",field:"NOMCOMP"},{name:"CORREO",label:"Correo",align:"left",field:"CORREO"},{name:"TELEFONO",label:"Teléfono",align:"left",field:"TELEFONO"},{name:"EDIT",align:"end",field:"EDIT"}],this.configContactos={flat:!0,round:!0,color:"primary",FH_CREACION:{component:"datetime",edit:!1},EDIT:{flat:!0,component:"button",icon:["delete"],tooltip:{delete:"Eliminar"},delete:function(e){var t=this;return I()(O()().m(function n(){return O()().w(function(n){while(1)switch(n.n){case 0:t.$confirm("¿Está seguro que desea desvincular el contacto del seguimiento?").onOk(function(){t.eliminarContactoSeguimiento(e)});case 1:return n.a(2)}},n)}))()}}}}}},se={components:{QCard:w.A,QCardSection:v.A,QSeparator:A.A,SieTable:R.A,QInput:N.A,QSelect:F.S,QBtn:T.A,QTabs:D.A,QTab:M.A,QCheckbox:ae.A},mixins:[ie],props:{idSeguimiento:{type:Number,default:null}},data:function(){return{modalAsignarContacto:!1,modalRegistroContacto:!1,tituloModalRegistrar:"Agregar contacto",comboContactos:[],formContacto:{NOMBRES:"",APELLIDOS:"",CORREO:"",TELEFONO:""},asignarASeguimiento:!1,contactoAAsignar:null,regexEmail:/^[\w\.-]+@[\w\.-]+\.\w+$/}},methods:{getContactosSeguimiento:function(){var e=this;return I()(O()().m(function t(){var n,o,r;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n={ID_SEGUIMIENTO:e.idSeguimiento},t.n=1,e.$http.get("api/PostulacionController/getContactosSeguimiento",{params:{params:n}});case 1:o=t.v,e.dataContactos=o,t.n=3;break;case 2:t.p=2,r=t.v,e.$alert(r.error?r.error.message:r.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()},getContactos:function(){var e=this;return I()(O()().m(function t(){var n,o,r;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n={},t.n=1,e.$http.get("api/PostulacionController/getContactos",{params:{params:n}});case 1:o=t.v,e.comboContactos=o.map(function(e){return S()(S()({},e),{},{label:e.NOMCOMP+" | "+e.CORREO+" | "+e.TELEFONO})}),t.n=3;break;case 2:t.p=2,r=t.v,e.$alert(r.error?r.error.message:r.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()},limpiarFormContacto:function(){this.formContacto={NOMBRES:"",APELLIDOS:"",CORREO:"",TELEFONO:""},this.asignarASeguimiento=!1},openModalAsignarContacto:function(){this.idSeguimiento?(this.getContactos(),this.modalAsignarContacto=!0):this.$alert("Debe seleccionar un seguimiento.","info")},openModalAgregarContacto:function(){this.limpiarFormContacto(),this.tituloModalRegistrar="Agregar contacto",this.modalRegistroContacto=!0},eliminarContactoSeguimiento:function(e){var t=this;return I()(O()().m(function n(){var o,r;return O()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,o={ID_SEGUIMIENTO:e.ID_SEGUIMIENTO,ID_CONTACTO:e.ID_CONTACTO},n.n=1,t.$http.delete("api/PostulacionController/deleteContactoSeguimiento",{params:{params:o}});case 1:t.getContactosSeguimiento(),t.$alert("Contacto desvinculado satisfactoriamente","success"),n.n=3;break;case 2:n.p=2,r=n.v,t.$alert(r.error?r.error.message:r.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},validarFormContacto:function(){if(!this.formContacto.APELLIDOS)throw new Error("Debe ingresar los apellidos del contacto.");if(!this.formContacto.NOMBRES)throw new Error("Debe ingresar el nombre del contacto.");if(!this.regexEmail.test(this.formContacto.CORREO))throw new Error("Debe ingresar un correo válido.");if(!this.formContacto.TELEFONO)throw new Error("Debe ingresar el teléfono del contacto.")},registrarContacto:function(){var e=this;return I()(O()().m(function t(){var n,o;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,e.validarFormContacto(),n=S()({},e.formContacto),e.asignarASeguimiento&&(n.ID_SEGUIMIENTO=e.idSeguimiento),t.n=1,e.$http.post("api/PostulacionController/registrarContacto",{params:n});case 1:e.getContactosSeguimiento(),e.modalRegistroContacto=!1,e.$alert("Contacto guardado satisfactoriamente.","success"),t.n=3;break;case 2:t.p=2,o=t.v,e.$alert(o.error?o.error.message:o.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()},asignarContacto:function(){var e=this;return I()(O()().m(function t(){var n,o;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:if(e.contactoAAsignar){t.n=1;break}return e.$alert("Debe seleccionar el contacto a asignar."),t.a(2);case 1:return t.p=1,n={ID_SEGUIMIENTO:e.idSeguimiento,ID_CONTACTO:e.contactoAAsignar},t.n=2,e.$http.post("api/PostulacionController/asignarContactoSeguimiento",{params:n});case 2:e.getContactosSeguimiento(),e.modalAsignarContacto=!1,e.$alert("Contacto asignado satisfactoriamente.","success"),t.n=4;break;case 3:t.p=3,o=t.v,e.$alert(o.error?o.error.message:o.message,"warning");case 4:return t.a(2)}},t,null,[[1,3]])}))()}},beforeMount:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:e.setColumnsContactos(),e.idSeguimiento&&e.getContactosSeguimiento();case 1:return t.a(2)}},t)}))()}};const le=(0,y.A)(se,[["render",re]]);var ce=le,ue={class:"q-px-md q-pt-md"};function me(e,t){var n=(0,o.g2)("sie-table");return(0,o.uX)(),(0,o.CE)("div",ue,[(0,o.bF)(n,{class:"q-mt-sm",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 286px); width: 100%; margin: 0;",context:this,showSearch:!1,columns:e.columnsEventos,data:e.dataEventos,config:e.configEventos,"show-refresh":!0,"show-index":!0,onRefresh:e.getEventos},null,8,["columns","data","config","onRefresh"])])}var de={data:function(){return{columnsEventos:[],dataEventos:[],configEventos:{}}},methods:{setColumnsEventos:function(){this.columnsEventos=[{name:"TIPO_EVENTO",label:"Tipo",align:"left",field:"TIPO_EVENTO"},{name:"VIRTUAL",label:"¿Virtual?",align:"center",field:"VIRTUAL"},{name:"CONFIRMO",label:"¿Confirmó?",align:"left",field:"CONFIRMO"},{name:"DURACION_MIN",label:"Duración (min)",align:"left",field:"DURACION_MIN"},{name:"FH_EVENTO",label:"Fecha",align:"left",field:"FH_EVENTO"},{name:"PROFESOR",label:"Profesor",align:"left",field:"PROFESOR"}],this.configEventos={flat:!0,round:!0,color:"primary",FH_EVENTO:{component:"datetime",edit:!1},VIRTUAL:{renderHtml:function(e){return"<span>".concat(e.VIRTUAL?"Sí":"No","</span>")}},CONFIRMO:{renderHtml:function(e){return"<span>".concat(e.CONFIRMO?"Sí":"No","</span>")}}}}}},ge={components:{QCard:w.A,QCardSection:v.A,QSeparator:A.A,SieTable:R.A,QInput:N.A,QSelect:F.S,QBtn:T.A,QTabs:D.A,QTab:M.A},mixins:[de],props:{idPersona:{type:Number,default:null}},data:function(){return{}},methods:{getEventos:function(){var e=this;return I()(O()().m(function t(){var n,o,r;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n={ID_PERSONA:e.idPersona},t.n=1,e.$http.get("api/PostulacionController/getEventosSeguimiento",{params:{params:n}});case 1:return o=t.v,e.dataEventos=o,t.a(2,o);case 2:t.p=2,r=t.v,e.$alert(r.error?r.error.message:r.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()}},beforeMount:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:e.setColumnsEventos(),e.idPersona&&e.getEventos();case 1:return t.a(2)}},t)}))()}};const fe=(0,y.A)(ge,[["render",me]]);var he=fe,pe={components:{QCard:w.A,QCardSection:v.A,QSeparator:A.A,SieTable:R.A,QInput:N.A,QSelect:F.S,QBtn:T.A,QTabs:D.A,QTab:M.A,etapasAdmision:x.A,comentariosSeguimiento:H,familiaresSeguimiento:X.A,contactosSeguimiento:ce,eventosSeguimiento:he},mixins:[_],props:{},data:function(){return{modalRegistroSeguimiento:!1,tituloModalRegistrar:"Agregar seguimiento",comboPersonas:[],comboAnios:[],comboGrados:[],selectedTab:"etapa",filter:{anio:String(k["default"].CURRENT_YEAR),nombre:""},formSeguimiento:{NOMBRE:"",ANIO:String(k["default"].CURRENT_YEAR),ID_GRADO:null,ID_PERSONA:null,SISCOD:k["default"].SISCOD_ADMISION},rowSelected:{},renderEtapas:!0,renderComentarios:!0,renderFamiliares:!0,renderContactos:!0,renderEventos:!0}},computed:{seguimientosFiltered:function(){var e=this;return this.filter.nombre?this.dataSeguimientos.filter(function(t){return t.NOMBRE.includes(e.filter.nombre)}):this.dataSeguimientos}},methods:{refreshEtapas:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return e.renderEtapas=!1,t.n=1,e.$nextTick();case 1:e.renderEtapas=!0;case 2:return t.a(2)}},t)}))()},refreshComentarios:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return e.renderComentarios=!1,t.n=1,e.$nextTick();case 1:e.renderComentarios=!0;case 2:return t.a(2)}},t)}))()},refreshFamiliares:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return e.renderFamiliares=!1,t.n=1,e.$nextTick();case 1:e.renderFamiliares=!0;case 2:return t.a(2)}},t)}))()},refreshContactos:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return e.renderContactos=!1,t.n=1,e.$nextTick();case 1:e.renderContactos=!0;case 2:return t.a(2)}},t)}))()},refreshEventos:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return e.renderEventos=!1,t.n=1,e.$nextTick();case 1:e.renderEventos=!0;case 2:return t.a(2)}},t)}))()},refreshTabs:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:e.refreshEtapas(),e.refreshComentarios(),e.refreshFamiliares(),e.refreshContactos(),e.refreshEventos();case 1:return t.a(2)}},t)}))()},filtroAnioFueSeleccionado:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return e.getSeguimientos(),e.rowSelected={},t.n=1,e.refreshTabs();case 1:return t.a(2)}},t)}))()},seguimientoFueSeleccionado:function(e){var t=this;return I()(O()().m(function n(){return O()().w(function(n){while(1)switch(n.n){case 0:return t.rowSelected=e,n.n=1,t.refreshTabs();case 1:return n.a(2)}},n)}))()},getAnios:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,k["default"].API_ANIOS_ADMISION();case 1:e.comboAnios=t.v;case 2:return t.a(2)}},t)}))()},getGrados:function(){var e=this;return I()(O()().m(function t(){var n;return O()().w(function(t){while(1)switch(t.n){case 0:return n={order:[{sidx:"anio",sord:"desc"},{sidx:"nivel",sord:"asc"},{sidx:"grado",sord:"asc"}],anio:e.formSeguimiento.ANIO},t.n=1,e.$http.get("api/PostulacionController/getGrados",{params:{params:n}});case 1:e.comboGrados=t.v;case 2:return t.a(2)}},t)}))()},getSeguimientos:function(){var e=this;return I()(O()().m(function t(){var n,o,r;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n={where:{SISCOD:k["default"].SISCOD_ADMISION,ANIO:e.filter.anio},order:{sidx:"ID_SEGUIMIENTO",sord:"desc"}},t.n=1,e.$http.get("api/PostulacionController/getSeguimientos",{params:{params:n}});case 1:return o=t.v,e.dataSeguimientos=o,t.a(2,o);case 2:t.p=2,r=t.v,e.$alert(r.error?r.error.message:r.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()},getPersonasConFichaInscripcion:function(){var e=this;return I()(O()().m(function t(){var n,o,r;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,e.formSeguimiento.ANIO&&e.formSeguimiento.ID_GRADO){t.n=1;break}return e.comboPersonas=[],t.a(2);case 1:return n={order:[{sidx:"F.NOMCOMP",sord:"asc"}],anoadm:e.formSeguimiento.ANIO,id_grado:e.formSeguimiento.ID_GRADO,postulantesActivos:"true",campos:["F.ID_FICHA","F.ID_FLUJO","F.NOMCOMP","F.ID_PERSONA","F.ID_GRADO"]},t.n=2,e.$http.get("api/PostulacionController/getFamiliaAdmision",{params:{params:n}});case 2:return o=t.v,e.comboPersonas=o,t.a(2,o);case 3:t.p=3,r=t.v,e.$alert(r.error?r.error.message:r.message,"warning");case 4:return t.a(2)}},t,null,[[0,3]])}))()},anioFueSeleccionado:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:e.getGrados(),e.formSeguimiento.ID_GRADO=null,e.cambiarListaPersonas();case 1:return t.a(2)}},t)}))()},cambiarListaPersonas:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:e.formSeguimiento.ID_PERSONA=null,e.getPersonasConFichaInscripcion();case 1:return t.a(2)}},t)}))()},limpiarFormSeguimiento:function(){this.formSeguimiento={NOMBRE:"",ANIO:this.filter.anio,ID_GRADO:null,ID_PERSONA:null,SISCOD:k["default"].SISCOD_ADMISION}},llenarFormSeguimiento:function(e){this.formSeguimiento={ID_SEGUIMIENTO:e.ID_SEGUIMIENTO,NOMBRE:e.NOMBRE,ANIO:String(e.ANIO),ID_GRADO:e.ID_GRADO,ID_PERSONA:e.ID_PERSONA,SISCOD:e.SISCOD}},openModalAgregarSeguimiento:function(){this.limpiarFormSeguimiento(),this.getGrados(),this.tituloModalRegistrar="Agregar seguimiento",this.modalRegistroSeguimiento=!0},openModalEditarSeguimiento:function(e){this.llenarFormSeguimiento(e),this.getGrados(),this.getPersonasConFichaInscripcion(),this.tituloModalRegistrar="Editar seguimiento",this.modalRegistroSeguimiento=!0},validarFormSeguimiento:function(){if(!this.formSeguimiento.NOMBRE)throw new Error("Debe ingresar el nombre del seguimiento");if(!this.formSeguimiento.ANIO)throw new Error("Debe ingresar el año del seguimiento")},registrarSeguimiento:function(){var e=this;return I()(O()().m(function t(){var n,o;return O()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,e.validarFormSeguimiento(),n=S()({},e.formSeguimiento),t.n=1,e.$http.post("api/PostulacionController/registrarSeguimiento",{params:n});case 1:e.getSeguimientos(),e.modalRegistroSeguimiento=!1,e.$alert("Seguimiento guardado satisfactoriamente","success"),t.n=3;break;case 2:t.p=2,o=t.v,e.$alert(o.error?o.error.message:o.message,"warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()},eliminarSeguimiento:function(e){var t=this;return I()(O()().m(function n(){var o,r;return O()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,o={ID_SEGUIMIENTO:e.ID_SEGUIMIENTO},n.n=1,t.$http.delete("api/PostulacionController/deleteSeguimiento",{params:{params:o}});case 1:t.getSeguimientos(),t.$alert("Seguimiento eliminado satisfactoriamente","success"),n.n=3;break;case 2:n.p=2,r=n.v,t.$alert(r.error?r.error.message:r.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},beforeMount:function(){var e=this;return I()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:e.getAnios(),e.setColumnsSeguimientos(),e.getSeguimientos();case 1:return t.a(2)}},t)}))()}};const Ce=(0,y.A)(pe,[["render",p]]);var Se=Ce}}]);