"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[92227],{92227:function(e,o,a){a.r(o),a.d(o,{default:function(){return Ko}});var n=a(61758),t={class:"row"},l={class:"col-12"};function i(e,o){var a=(0,n.g2)("q-tab"),i=(0,n.g2)("notasfull"),r=(0,n.g2)("q-tab-pane"),u=(0,n.g2)("lista-cotejo"),c=(0,n.g2)("equivalencia"),s=(0,n.g2)("libretas"),d=(0,n.g2)("firmas"),f=(0,n.g2)("cae"),p=(0,n.g2)("q-tabs"),C=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(C,null,{default:(0,n.k6)(function(){return[(0,n.bF)(p,{class:"q-tabs-flex bg-white q-mt-md",inverted:"",animated:""},{title:(0,n.k6)(function(){return[(0,n.bF)(a,{name:"tab-1",label:"Rúbrica",default:""}),(0,n.bF)(a,{name:"tab-2",label:"lista de cotejo"}),(0,n.bF)(a,{name:"tab-3",label:"Equivalencias"})]}),default:(0,n.k6)(function(){return[(0,n.bF)(r,{class:"pb-50",name:"tab-1"},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(r,{name:"tab-2"},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(r,{name:"tab-3"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",t,[(0,n.Lk)("div",l,[(0,n.bF)(c,{acceso:e.acceso},null,8,["acceso"])])])]}),_:1}),e.isStart?((0,n.uX)(),(0,n.Wv)(r,{key:0,name:"tab-4"},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{acceso:e.acceso},null,8,["acceso"])]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(r,{name:"tab-5"},{default:(0,n.k6)(function(){return[(0,n.bF)(d,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(r,{name:"tab-6"},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{acceso:e.acceso},null,8,["acceso"])]}),_:1})]}),_:1})]}),_:1})}var r=a(6123),u=a(8445),c=a.n(u),s=a(58790),d={class:"row gutter-sm"},f={key:1,class:"col column items-center justify-center"},p={class:"column q-pa-md"},C={class:"col row"},m={class:"col-2"},v={class:"col-4"},O={class:"col"},b={class:"col row"},N={class:"col"},g={class:"col"},E={class:"col row items-center gutter-sm"},I={class:"col"},A={key:0},_={key:1},T={class:"col"},R={class:"col"},S={class:"col"},h={class:"col"},L={key:0,class:"col row items-center gutter-xs"},k={class:"col"},D={class:"col"},V={class:"col"},U={class:"col"},F={class:"col"},w={key:1,class:"row"},q={class:"col"},G={class:"col"},y={class:"row"},M={class:"col"},P={key:0,class:"col"},$={class:"col"},B={class:"col"},Q={class:"row"},W={class:"col"},x={class:"col"},j={class:"col"},H={class:"col"},X={class:"col"};function z(e,o){var a=(0,n.g2)("q-card-title"),t=(0,n.g2)("q-card-separator"),l=(0,n.g2)("q-tooltip"),i=(0,n.g2)("q-btn"),r=(0,n.g2)("q-card-actions"),u=(0,n.g2)("q-card"),z=(0,n.g2)("sie-vacio"),Y=(0,n.g2)("sie-select"),J=(0,n.g2)("q-dialog"),K=(0,n.g2)("q-page-sticky"),Z=(0,n.g2)("q-input"),ee=(0,n.g2)("q-field"),oe=(0,n.g2)("q-toggle"),ae=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",d,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.listConfig,function(d){return(0,n.uX)(),(0,n.CE)("div",{key:d.ID_CONF,class:"col-4"},[e.listConfig.length?((0,n.uX)(),(0,n.Wv)(u,{key:0,class:"q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(a,null,{subtitle:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,s.v_)(d.INSTRUDES)+" "+(0,s.v_)(d.GRADODES),1)]}),default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(d.DESCRIPCION),1)]}),_:2},1024),(0,n.bF)(t),(0,n.bF)(r,null,{default:(0,n.k6)(function(){return[(0,n.bF)(i,{outline:"",color:"primary",icon:"edit",onClick:function(o){return e.openEditForm(d.ID_CONF)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[30]||(o[30]=[(0,n.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,n.bF)(i,{outline:"",color:"primary",icon:"remove_red_eye",onClick:function(o){return e.cargarVistaPrevia(d)}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[31]||(o[31]=[(0,n.eW)("Vista previa",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,n.bF)(i,{outline:"",color:"negative",icon:"delete",onClick:function(o){return e.deleteConf(d.ID_CONF)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[32]||(o[32]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1024)]}),_:2},1024)):((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(z,{class:"col",icon:"document_table"})]))])}),128)),(0,n.bF)(J,{modelValue:e.openVistaPrevia,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.openVistaPrevia=o}),"prevent-close":"",ok:"Imprimir",cancel:"Cancelar",onOk:e.generarVistaPrevia},{title:(0,n.k6)(function(){return c()(o[33]||(o[33]=[(0,n.Lk)("span",null,"Salones",-1)]))}),message:(0,n.k6)(function(){return c()(o[34]||(o[34]=[(0,n.Lk)("span",null,"Debe seleccionar un salón para generar la vista previa de su libreta",-1)]))}),body:(0,n.k6)(function(){return[(0,n.Lk)("div",null,[(0,n.bF)(Y,{type:"outlined",modelValue:e.formVistaPrevia.NEMO,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.formVistaPrevia.NEMO=o}),options:e.optSalones,val:"NEMO",label:"NEMODES",placeholder:"Seleccione salón"},null,8,["modelValue","options"])])]}),_:1},8,["modelValue","onOk"]),e.acceso?((0,n.uX)(),(0,n.Wv)(K,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{fab:"",round:"",color:"secondary",icon:"add",onClick:e.openNewForm},null,8,["onClick"])]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(ae,{modelValue:e.showModalConf,"onUpdate:modelValue":o[29]||(o[29]=function(o){return e.showModalConf=o}),title:e.titleModal,ok:"Guardar",css:{minWidth:"60vw"},onSubmit:e.guardar,onClose:e.limpiar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",p,[(0,n.Lk)("div",C,[(0,n.Lk)("div",m,[(0,n.bF)(Z,{class:"q-if-outlined",modelValue:e.formConf.ANO,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.formConf.ANO=o}),"float-label":"Año",disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",v,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.FORMATO.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.FORMATO,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.formConf.FORMATO=o}),options:e.optPlantilla,val:"value",label:"label",placeholder:"Plantilla",onSelected:e.cargarConfigSiagie,onBlur:e.v$.formConf.FORMATO.$touch},null,8,["modelValue","options","onSelected","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",O,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido")},{default:(0,n.k6)(function(){return[(0,n.bF)(Z,{class:"q-if-outlined",modelValue:e.formConf.DESCRIPCION,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.formConf.DESCRIPCION=o}),"float-label":"Descripción",onBlur:e.v$.formConf.DESCRIPCION.$touch,error:e.v$.formConf.DESCRIPCION.$error},null,8,["modelValue","onBlur","error"])]}),_:1},8,["error-label"])])]),(0,n.Lk)("div",b,[(0,n.Lk)("div",N,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.INSTRUCOD.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.INSTRUCOD,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.formConf.INSTRUCOD=o}),onSelected:e.getListaGrados,options:e.optInstru,val:"INSTRUCOD",label:"INSTRUDES",placeholder:"Nivel",onBlur:e.v$.formConf.INSTRUCOD.$touch},null,8,["modelValue","onSelected","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",g,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.GRADOCOD.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.GRADOCOD,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.formConf.GRADOCOD=o}),options:e.optGrado,val:"GRADOCOD",label:"GRADODES",placeholder:"Grado",onBlur:e.v$.formConf.GRADOCOD.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])])]),(0,n.Lk)("div",E,[(0,n.Lk)("div",I,[e.esSiagie?((0,n.uX)(),(0,n.CE)("div",A,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_ESCUDO,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.formConf.MOSTRAR_ESCUDO=o}),label:"Mostrar escudo","true-value":1,"false-value":0,disable:e.esSiagie,"left-label":""},null,8,["modelValue","disable"])])):((0,n.uX)(),(0,n.CE)("div",_,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_FOTO,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.formConf.MOSTRAR_FOTO=o}),label:"Mostrar foto","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])]))]),(0,n.Lk)("div",T,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_INSIGNIA,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.formConf.MOSTRAR_INSIGNIA=o}),label:"Mostrar insignia",disable:e.esSiagie,"left-label":"","true-value":1,"false-value":0},null,8,["modelValue","disable"])]),(0,n.Lk)("div",R,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_ESTADISTICA,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.formConf.MOSTRAR_ESTADISTICA=o}),label:"Mostrar Estadística",disable:e.esSiagie,"left-label":"","true-value":1,"false-value":0},null,8,["modelValue","disable"])]),(0,n.Lk)("div",S,[(0,n.bF)(oe,{modelValue:e.formConf.CON_CRITERIOS,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.formConf.CON_CRITERIOS=o}),label:"Niveles de evaluación",disable:e.esSiagie,"left-label":"","true-value":1,"false-value":0},null,8,["modelValue","disable"])]),(0,n.Lk)("div",h,[(0,n.bF)(oe,{modelValue:e.formConf.OCULTA_INTERNOS,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.formConf.OCULTA_INTERNOS=o}),label:"Oculta internos",disable:e.esSiagie,"left-label":"","true-value":1,"false-value":0},null,8,["modelValue","disable"])])]),4===e.formConf.FORMATO?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("div",k,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_NF,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.formConf.MOSTRAR_NF=o}),label:"Mostrar nota final","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",D,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_ANEXO,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.formConf.MOSTRAR_ANEXO=o}),label:"Mostrar Anexo","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",V,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_ASISTENCIA,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.formConf.MOSTRAR_ASISTENCIA=o}),label:"Mostrar Asistencia","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",U,[(0,n.bF)(oe,{modelValue:e.formConf.CABECERA_SIAGIE,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.formConf.CABECERA_SIAGIE=o}),label:"Cabecera Siagie","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",F,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_FORMATIVO,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.formConf.MOSTRAR_FORMATIVO=o}),label:"Mostrar Formativo","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])])])):(0,n.Q3)("v-if",!0),e.formConf.CON_CRITERIOS?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("div",q,[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.NIVEL_EVA,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.formConf.NIVEL_EVA=o}),disable:e.esSiagie,options:e.optMostrarNivel,val:"value",label:"label",placeholder:"Mostrar hasta el nivel"},null,8,["modelValue","disable","options"])]),(0,n.Lk)("div",G,[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.OCULTA_NIVEL,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.formConf.OCULTA_NIVEL=o}),disable:e.esSiagie,options:e.optOcultaNivel,val:"value",label:"label",placeholder:"Ocultar el nivel"},null,8,["modelValue","disable","options"])])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",y,[(0,n.Lk)("div",M,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.PERIODO.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",disable:3===e.formConf.FORMATO,modelValue:e.formConf.PERIODO,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.formConf.PERIODO=o}),options:e.optPeriodo,val:"value",label:"label",placeholder:"Periodos a mostrar",onBlur:e.v$.formConf.PERIODO.$touch},null,8,["disable","modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])]),"S"===e.formConf.PERIODO?((0,n.uX)(),(0,n.CE)("div",P,[(0,n.bF)(oe,{modelValue:e.formConf.MOSTRAR_NF,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.formConf.MOSTRAR_NF=o}),label:"Mostrar nota final en el último periodo","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",$,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.EQUI_NOTA.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.EQUI_NOTA,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.formConf.EQUI_NOTA=o}),options:e.optEqui,val:"value",label:"label",placeholder:"Convertir a letras - Notas",onBlur:e.v$.formConf.EQUI_NOTA.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",B,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.EQUI_CONDU.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.EQUI_CONDU,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.formConf.EQUI_CONDU=o}),options:e.optEqui,val:"value",label:"label",placeholder:"Convertir a letras - Conducta",onBlur:e.v$.formConf.EQUI_CONDU.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])])]),(0,n.Lk)("div",Q,[(0,n.Lk)("div",W,[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.TAMANO_PAPEL,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.formConf.TAMANO_PAPEL=o}),disable:e.esSiagie,options:e.optTamano,val:"value",label:"label",placeholder:"Tamaño de papel"},null,8,["modelValue","disable","options"])]),(0,n.Lk)("div",x,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.ORIENTACION.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.ORIENTACION,"onUpdate:modelValue":o[25]||(o[25]=function(o){return e.formConf.ORIENTACION=o}),disable:e.esSiagie,options:e.optOrientacion,val:"value",label:"label",placeholder:"Orientación del papel",onBlur:e.v$.formConf.ORIENTACION.$touch},null,8,["modelValue","disable","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",j,[(0,n.bF)(ee,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConf.COLUMNAS.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(Y,{type:"outlined",modelValue:e.formConf.COLUMNAS,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.formConf.COLUMNAS=o}),disable:e.esSiagie,options:e.optColumnas,val:"value",label:"label",placeholder:"Número de columnas",onBlur:e.v$.formConf.COLUMNAS.$touch},null,8,["modelValue","disable","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",H,[(0,n.bF)(Z,{class:"q-if-outlined",modelValue:e.formConf.ALTURA,"onUpdate:modelValue":o[27]||(o[27]=function(o){return e.formConf.ALTURA=o}),"float-label":"Altura de la fila"},null,8,["modelValue"])]),(0,n.Lk)("div",X,[(0,n.bF)(Z,{class:"q-if-outlined",modelValue:e.formConf.MARGEN_SUP,"onUpdate:modelValue":o[28]||(o[28]=function(o){return e.formConf.MARGEN_SUP=o}),"float-label":"Margen Superior"},null,8,["modelValue"])])])])]}),_:1},8,["modelValue","title","onSubmit","onClose"])])}a(71225),a(10239),a(50310),a(5962),a(83190),a(27153),a(62540),a(68017);var Y=a(83972),J=a(24729),K=a(80340),Z=a(30640),ee=a(93616),oe=a(88275),ae=a(82640),ne=a(982),te=a(18105),le=a(73922),ie=a(57668),re={setup:function(){var e=(0,Y.fG)();return{v$:e}},name:"Libretas",props:{acceso:{type:Boolean,required:!0}},components:{QCard:r.C$,QPopover:r.VM,QInnerLoading:r.SQ,QSpinnerOval:r.VA,QPageSticky:r._U,QDialog:r.OQ,Dialog:J.A,QToggle:r.c5,sieVacio:K.A,sieModal:Z.A,notify:ne["default"],sieSelect:ee.A,sieSalones:oe.Ay,QCardTitle:r.u0,QCardSeparator:r.d6,QCardActions:r.zZ,QBtn:r.Il,QTooltip:r.nC,QInput:r.ie,QField:r.Om},data:function(){return{sie:(0,ie["default"])(),openVistaPrevia:!1,visible:!1,showModalConf:!1,listConfig:[],currentConfig:{},optInstru:[],optGrado:[],optYears:[{label:"2019",value:"2019"}],optPlantilla:[{label:"Formato 1",value:1},{label:"Formato 2",value:2},{label:"Siagie",value:3},{label:"Siagie 2",value:4}],optPeriodo:[{label:"Todos los periodos",value:"N"},{label:"Por periodo",value:"S"}],optNivelEva:[{label:"No",value:"N"},{label:"Si",value:"S"}],optEqui:[{label:"Defecto",value:0},{label:"Si",value:1},{label:"Ambos",value:2}],optMostrarNivel:[{label:"Competencia",value:1},{label:"Capacidad",value:2},{label:"Indicador",value:3}],optOcultaNivel:[{label:"Ninguna",value:0},{label:"Competencia",value:1},{label:"Capacidad",value:2},{label:"Competencia y Capacidad",value:99}],optOrientacion:[{label:"Vertical",value:"P"},{label:"Horizontal",value:"L"}],optColumnas:[{label:"1",value:1},{label:"2",value:2}],optTamano:[{label:"A3",value:"A3"},{label:"A4",value:"A4"},{label:"A5",value:"A5"},{label:"Carta",value:"letter"},{label:"Oficio",value:"legal"}],optSalones:[],formConf:{ANO:(0,ie["default"])().ano,INSTRUCOD:"",GRADOCOD:"",DESCRIPCION:"",FORMATO:"",PERIODO:"",CON_CRITERIOS:1,NIVEL_EVA:null,OCULTA_NIVEL:null,OCULTA_INTERNOS:0,EQUI_NOTA:"",EQUI_CONDU:"",ORIENTACION:"",TAMANO_PAPEL:"A4",COLUMNAS:0,ALTURA:4,MARGEN_SUP:9,MOSTRAR_NF:0,MOSTRAR_ESTADISTICA:0,MOSTRAR_ESCUDO:0,MOSTRAR_INSIGNIA:0,MOSTRAR_FOTO:0,MOSTRAR_ANEXO:0,MOSTRAR_ASISTENCIA:1,CABECERA_SIAGIE:1,MOSTRAR_FORMATIVO:0},formVistaPrevia:{NEMO:"",japaram:(0,te.Ay)(new Date,"DD/MM/YYYY"),repcod:"reporteLibreta",BIMECOD:"1",ANO:(0,te.Ay)(new Date,"YYYY"),PREVIEW:"S",OPCION:"",UNIDAD:""},isEdit:!1}},methods:{init:function(){this.getListaNivel(),this.obtenerConfig()},obtenerConfig:function(){var e=this;this.$http.get("api/HyoLibreta/getConfig").then(function(o){e.listConfig=o.json})},guardar:function(){this.isEdit?this.editarConfig():this.grabarConfig()},grabarConfig:function(){var e=this;this.v$.$touch(),this.v$.$invalid||this.$http.post("api/HyoLibreta/grabarConf",{data:this.formConf}).then(function(e){(0,ne["default"])(e.json.message)}).catch(function(e){console.log(e),(0,ne["default"])(e.error.message,"error")}).finally(function(){e.showModalConf=!1,e.obtenerConfig()})},editarConfig:function(){var e=this,o={id:this.formConf.ID_CONF,data:this.formConf};this.$http.put("api/HyoLibreta/updateConf",o).then(function(e){(0,ne["default"])(e.json.message)}).catch(function(e){console.log(e),(0,ne["default"])(e.error.message,"error")}).finally(function(){e.showModalConf=!1,e.obtenerConfig()})},deleteConf:function(e){var o=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",message:"Si elimina, debe volver a configurar la libreta para su visualización",ok:"SI",cancel:"NO"}).onOk(function(){o.$http.delete("api/HyoLibreta/deleteConf",{params:{id:e}}).then(function(e){(0,ne["default"])(e.json.message)}).catch(function(e){console.log(e),(0,ne["default"])(e.error.message,"error")}).finally(function(){o.obtenerConfig()})})},openNewForm:function(){this.openModal()},openEditForm:function(e){var o=this;this.isEdit=!0,this.$http.get("api/HyoLibreta/getConfigById",{params:{id:e}}).then(function(e){o.formConf=e.json}).then(function(){o.getListaGrados()}).then(function(){o.openModal()})},openModal:function(){this.showModalConf=!0},cargarVistaPrevia:function(e){var o=this;this.$http.get("api/HyoSalones/getAll",{params:{columns:["NEMO","NEMODES","INSTRUCOD","GRADOCOD"]}}).then(function(a){o.optSalones=a.filter(function(o){var a=e.INSTRUCOD.trim(),n=e.GRADOCOD.trim();return"T"===a?o:"T"===n?o.INSTRUCOD===a:o.INSTRUCOD===a&&o.GRADOCOD===n}),o.openVistaPrevia=!0})},generarVistaPrevia:function(){(0,le["default"])({parametros:this.formVistaPrevia,metodo:"POST",nombre:"reporte",url:this.sie.url+"/intranet/reporte-node/reporte",formatoTipo:"formato",formato:"pdf",tipo:"vista"})},getListaNivel:function(){var e=this;this.$http.get("api/HyoInstrus/obtInstru").then(function(o){var a=o.json;a.unshift({INSTRUCOD:"T",INSTRUDES:"Todos",INSTRUANO:0}),e.optInstru=a})},getListaGrados:function(){var e=this;"T"===this.formConf.instrucod?this.grados.push({GRADOCOD:"T",GRADODES:"Todos"}):this.$http.get("api/HyoGradoNivs/obtGrados").then(function(o){var a=o.json;e.optGrado=a.filter(function(o){return o.INSTRUCOD===e.formConf.INSTRUCOD}),e.optGrado.unshift({GRADOCOD:"T",GRADODES:"Todos"})})},cargarConfigSiagie:function(){[3,4].indexOf(this.formConf.FORMATO)?(this.formConf["PERIODO"]="N",this.formConf["CON_CRITERIOS"]=1,this.formConf["NIVEL_EVA"]=1,this.formConf["OCULTA_NIVEL"]=0,this.formConf["OCULTA_INTERNOS"]=1,this.formConf["ORIENTACION"]="P",this.formConf["TAMANO_PAPEL"]="A4",this.formConf["COLUMNAS"]=1,this.formConf["MOSTRAR_ESCUDO"]=1,this.formConf["MOSTRAR_INSIGNIA"]=1):(this.formConf["PERIODO"]="",this.formConf["CON_CRITERIOS"]=0,this.formConf["NIVEL_EVA"]=null,this.formConf["OCULTA_NIVEL"]=null,this.formConf["OCULTA_INTERNOS"]=0,this.formConf["ORIENTACION"]="P",this.formConf["TAMANO_PAPEL"]="A4",this.formConf["COLUMNAS"]=1,this.formConf["MOSTRAR_ESCUDO"]=0,this.formConf["MOSTRAR_INSIGNIA"]=0)},limpiar:function(){this.isEdit=!1,this.formConf={ANO:(0,ie["default"])().ano,INSTRUCOD:"",GRADOCOD:"",DESCRIPCION:"",FORMATO:"",PERIODO:"",CON_CRITERIOS:1,NIVEL_EVA:null,OCULTA_NIVEL:null,OCULTA_INTERNOS:0,EQUI_NOTA:"",EQUI_CONDU:"",ORIENTACION:"P",TAMANO_PAPEL:"A4",COLUMNAS:1,ALTURA:4,MARGEN_SUP:9,MOSTRAR_NF:0,MOSTRAR_ESTADISTICA:0,MOSTRAR_ESCUDO:0,MOSTRAR_INSIGNIA:0,MOSTRAR_FOTO:0,MOSTRAR_ASISTENCIA:1,CABECERA_SIAGIE:1,MOSTRAR_FORMATIVO:0},this.v$.$reset()}},validations:{formConf:{DESCRIPCION:{required:ae.mw},INSTRUCOD:{required:ae.mw},GRADOCOD:{required:ae.mw},FORMATO:{required:ae.mw},PERIODO:{required:ae.mw},EQUI_NOTA:{required:ae.mw},EQUI_CONDU:{required:ae.mw},ORIENTACION:{required:ae.mw},COLUMNAS:{required:ae.mw}}},computed:{esSiagie:function(){return-1!==[3,4].indexOf(this.formConf.FORMATO)},titleModal:function(){return(this.isEdit?"Editar":"Añadir")+" configuración de libreta"}},created:function(){this.init()}},ue=a(12807);const ce=(0,ue.A)(re,[["render",z]]);var se=ce,de={class:"row"},fe={class:"col"},pe={class:"row q-pa-sm"},Ce={class:"col-12"},me={class:"col-12"},ve={class:"col-12"};function Oe(e,o){var a=(0,n.g2)("q-td"),t=(0,n.g2)("sie-select"),l=(0,n.g2)("q-popup-edit"),i=(0,n.g2)("q-tooltip"),r=(0,n.g2)("q-btn"),u=(0,n.g2)("q-tr"),d=(0,n.g2)("q-table"),f=(0,n.g2)("q-page-sticky"),p=(0,n.g2)("q-field"),C=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",de,[(0,n.Lk)("div",fe,[(0,n.bF)(d,{data:e.dataConfNotas,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":o[1]||(o[1]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{body:(0,n.k6)(function(d){return[(0,n.bF)(u,{props:d},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"NIVEL",props:d},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(d.row.NIVEL),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"GRADO",props:d},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(d.row.GRADO),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"LEYENDA",props:d},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(d.row.LEYENDA),1),(0,n.bF)(l,{modelValue:d.row.LEYENDA,"onUpdate:modelValue":function(e){return d.row.LEYENDA=e},disable:!e.acceso,count:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.formConfNotas.ID_CONFIG,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.formConfNotas.ID_CONFIG=o}),type:"outlined",options:e.config,label:"LEYENDA",val:"ID_CONFIG",placeholder:"Notas",onSelected:function(o){return e.editConfig(d.row)}},null,8,["modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"acciones",props:d},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{color:"negative",icon:"delete",flat:"",onClick:function(o){return e.deleteConfig(d.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[7]||(o[7]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]),e.acceso?((0,n.uX)(),(0,n.Wv)(f,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{fab:"",round:"",color:"secondary",icon:"add",onClick:o[2]||(o[2]=function(o){return e.showNewConfig=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(o[8]||(o[8]=[(0,n.eW)("Actualización en bloque",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(C,{modelValue:e.showNewConfig,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.showNewConfig=o}),title:"Añadir configuración de notas",onSubmit:e.addConfig,ok:"Guardar"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",pe,[(0,n.Lk)("div",Ce,[(0,n.bF)(p,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConfNotas.INSTRUCOD.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.formConfNotas.INSTRUCOD,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.formConfNotas.INSTRUCOD=o}),type:"outlined",options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"Niveles",onSelected:e.getListaGrados,onBlur:e.v$.formConfNotas.INSTRUCOD.$touch},null,8,["modelValue","options","onSelected","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",me,[(0,n.bF)(p,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConfNotas.GRADOCOD.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.formConfNotas.GRADOCOD,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.formConfNotas.GRADOCOD=o}),type:"outlined",options:e.grados,label:"GRADODES",val:"GRADOCOD",placeholder:"Grados",onBlur:e.v$.formConfNotas.GRADOCOD.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",ve,[(0,n.bF)(p,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formConfNotas.ID_CONFIG.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.formConfNotas.ID_CONFIG,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.formConfNotas.ID_CONFIG=o}),type:"outlined",options:e.config,label:"LEYENDA",val:"ID_CONFIG",placeholder:"Notas",onBlur:e.v$.formConfNotas.ID_CONFIG.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])])])]}),_:1},8,["modelValue","onSubmit"])])}var be={setup:function(){var e=(0,Y.fG)();return{v$:e}},props:{acceso:{type:Boolean,required:!0}},components:{QTable:r.kH,QTr:r.qh,QTd:r.Ef,QPopupEdit:r.GT,QPageSticky:r._U,Dialog:J.A,notify:ne["default"],sieSelect:ee.A,sieModal:Z.A,sieInfo:ie["default"],QBtn:r.Il,QTooltip:r.nC,QField:r.Om},data:function(){return{niveles:[],grados:[],config:[],showNewConfig:!1,formConfNotas:{ANO:(0,ie["default"])().ano+"",INSTRUCOD:"",GRADOCOD:"",TIPO_CALCULO:1,ORDENAR_GRUPO:0,ID_CONFIG:"",ANUAL_REPLICA:0,EDICION_PESOS_PROFE:2,LIMITE_REPLICA:0,MOSTRAR_TRADUCCION:0},dataConfNotas:[],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100},columns:[{name:"NIVEL",label:"NIVEL",field:"NIVEL",align:"left"},{name:"GRADO",label:"GRADO",field:"GRADO",align:"left"},{name:"LEYENDA",label:"TIPO CALIFICACIÓN NOTAS",field:"LEYENDA",align:"left"},{name:"acciones",label:"ACCIONES"}]}},validations:{formConfNotas:{INSTRUCOD:{required:ae.mw},GRADOCOD:{required:ae.mw},ID_CONFIG:{required:ae.mw}}},methods:{getListaNivel:function(){var e=this;this.$http.get("api/HyoInstrus/obtInstru").then(function(o){var a=o.json;e.niveles=a})},getListaGrados:function(){var e=this;"T"===this.formConfNotas.INSTRUCOD?this.grados.push({GRADOCOD:"T",GRADODES:"Todos"}):this.$http.get("api/HyoGradoNivs/obtGrados").then(function(o){var a=o.json;e.grados=a.filter(function(o){return o.INSTRUCOD===e.formConfNotas.INSTRUCOD}),e.grados.unshift({GRADOCOD:"T",GRADODES:"Todos"})})},getListadoConfig:function(){var e=this;this.$http.get("api/HyoClaseContenidoConfig/obtListadoConfig",{params:{fields:["ID_CONFIG","LEYENDA"]}}).then(function(o){var a=o.json;e.config=a})},getConfigNotas:function(){var e=this;this.$http.get("api/HyoConfigGeneralNotas/obtenerConfigGrado").then(function(o){var a=o.json;e.dataConfNotas=a})},addConfig:function(){var e=this;this.v$.$touch(),this.v$.$invalid||this.$http.post("api/HyoConfigGeneralNotas/procesoGrabarConfig",{data:this.formConfNotas}).then(function(o){e.showNewConfig=!1,(0,ne["default"])(o.json.message),e.getConfigNotas(),e.limpiarForm()}).catch(function(e){console.log(e)})},editConfig:function(e){var o=this;this.formConfNotas["ANO"]=e.ANO,this.formConfNotas["INSTRUCOD"]=e.INSTRUCOD,this.formConfNotas["GRADOCOD"]=e.GRADOCOD,console.log(this.formConfNotas),this.$http.post("api/HyoConfigGeneralNotas/procesoGrabarConfig",{data:this.formConfNotas}).then(function(e){o.showNewConfig=!1,(0,ne["default"])(e.json.message),o.getConfigNotas(),o.limpiarForm()}).catch(function(e){console.log(e)})},deleteConfig:function(e){var o=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(function(){var a={anio:e.ANO,instrucod:e.INSTRUCOD,gradocod:e.GRADOCOD};o.$http.post("api/HyoConfigGeneralNotas/eliminarConfig",{data:a}).then(function(e){(0,ne["default"])(e.json.message,"success"),o.getConfigNotas()}).catch(function(e){console.log(e)})})},limpiarForm:function(){this.formConfNotas={ANO:(0,ie["default"])().ano+"",INSTRUCOD:"",GRADOCOD:"",TIPO_CALCULO:1,ORDENAR_GRUPO:0,ID_CONFIG:"",ANUAL_REPLICA:0,EDICION_PESOS_PROFE:2,LIMITE_REPLICA:0,MOSTRAR_TRADUCCION:0},this.v$.$reset()}},created:function(){this.getListaNivel(),this.getListadoConfig(),this.getConfigNotas()}};const Ne=(0,ue.A)(be,[["render",Oe]]);var ge=Ne,Ee={class:"row gutter-sm"},Ie={class:"col-xs-12 col-sm-12 col-md-5"},Ae={class:"row col"},_e={class:"col-xs-12 col-sm-12 col-md-7"},Te={class:"row q-pa-sm"},Re={class:"col-12"},Se={class:"col-12"},he={class:"col-12"},Le={class:"col-6"},ke={class:"col-6"},De={class:"row"},Ve={class:"col"};function Ue(e,o){var a=(0,n.g2)("q-btn"),t=(0,n.g2)("q-td"),l=(0,n.g2)("q-tooltip"),i=(0,n.g2)("q-tr"),r=(0,n.g2)("q-table"),u=(0,n.g2)("sie-select"),d=(0,n.g2)("q-popup-edit"),f=(0,n.g2)("q-input"),p=(0,n.g2)("q-field"),C=(0,n.g2)("q-color"),m=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Ee,[(0,n.Lk)("div",Ie,[(0,n.bF)(r,{data:e.dataEvaluacionCategoriaNivel,columns:e.columnsCategoria,pagination:e.pagination,"onUpdate:pagination":o[1]||(o[1]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{"top-left":(0,n.k6)(function(t){return[(0,n.Lk)("div",Ae,[o[5]||(o[5]=(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("p",null,"Categorías de Niveles de Evaluación")],-1)),e.acceso?((0,n.uX)(),(0,n.Wv)(a,{key:0,color:"primary",icon:"rplus",dense:"",round:"",flat:"",onClick:o[0]||(o[0]=function(o){return e.nuevo(1)})})):(0,n.Q3)("v-if",!0)])]}),body:(0,n.k6)(function(r){return[(0,n.bF)(i,{props:r},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{key:"NOMBRE_CATEGORIA",props:r},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(r.row.NOMBRE_CATEGORIA),1)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"ACCIONES",props:r},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{class:"q-px-xs",color:"negative",icon:"edit",flat:"",onClick:function(o){return e.editar(r.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[6]||(o[6]=[(0,n.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,n.bF)(a,{class:"q-px-xs",color:"negative",icon:"delete",flat:"",onClick:function(o){return e.eliminar(r.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[7]||(o[7]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]),(0,n.Lk)("div",_e,[(0,n.bF)(r,{data:e.dataCategoriaNivel,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":o[2]||(o[2]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{"top-left":(0,n.k6)(function(e){return c()(o[8]||(o[8]=[(0,n.Lk)("div",{class:"row col"},[(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("p",null,"Configuración por Grado")])],-1)]))}),body:(0,n.k6)(function(o){return[(0,n.bF)(i,{class:"cursor-pointer",props:o,onClick:function(a){return e.getCurrentRow(o.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{key:"INSTRUDES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.INSTRUDES),1)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"GRADODES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.GRADODES),1)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"NOMBRE_CATEGORIA",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.ID_CATEGORIA_NIVEL?"-":o.row.NOMBRE_CATEGORIA),1),e.dataSelectCategoriaNivel&&e.dataSelectCategoriaNivel.length>1?((0,n.uX)(),(0,n.Wv)(d,{key:0,disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.ID_CATEGORIA_NIVEL,"onUpdate:modelValue":function(e){return o.row.ID_CATEGORIA_NIVEL=e},type:"outlined",options:e.dataSelectCategoriaNivel,val:"ID",label:"NOMBRE",placeholder:"Seleccione",onSelected:e.changeCategoriaNivel},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"TIPO_CALCULO",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.TIPO_CALCULO?"-":e.textCalculo(o.row.TIPO_CALCULO)),1),(0,n.bF)(d,{disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.TIPO_CALCULO,"onUpdate:modelValue":function(e){return o.row.TIPO_CALCULO=e},type:"outlined",options:e.dataCalculo,val:"value",label:"label",placeholder:"Seleccione",onSelected:e.changeTipoCalculo},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"REGISTRO_NOTAS",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.REGISTRO_NOTAS?"-":e.textSiNo(o.row.REGISTRO_NOTAS)),1),(0,n.bF)(d,{disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.REGISTRO_NOTAS,"onUpdate:modelValue":function(e){return o.row.REGISTRO_NOTAS=e},type:"outlined",options:e.siNo,val:"value",label:"label",placeholder:"Seleccione",onSelected:e.changeRegistrosNotas},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"NOTA_VISIBLE",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.NOTA_VISIBLE?"-":e.textSiNo(o.row.NOTA_VISIBLE)),1),(0,n.bF)(d,{disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.NOTA_VISIBLE,"onUpdate:modelValue":function(e){return o.row.NOTA_VISIBLE=e},type:"outlined",options:e.siNo,val:"value",label:"label",placeholder:"Seleccione",onSelected:e.changeNotaVisible},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props","onClick"])]}),_:1},8,["data","columns","pagination"])]),o[9]||(o[9]=(0,n.Lk)("div",{class:"col-xs-12 col-sm-12 col-md-5"},null,-1)),(0,n.bF)(m,{class:"modal-categoria",esc:!0,escClick:!0,modelValue:e.openModal,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.openModal=o}),title:e.tituloModalCategoria,ok:"guardar",onSubmit:e.saveNivelesDeEvaluacion},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Te,[(0,n.Lk)("div",Re,[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.bF)(f,{class:"q-if-outlined",modelValue:e.form.nombre_categoria,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.nombre_categoria=o}),type:"text","float-label":"Nombre Categoría",placeholder:"nombre categoría"},null,8,["modelValue"])]}),_:1})]),(0,n.Lk)("div",Se,[(0,n.bF)(a,{class:"q-mx-xs",icon:"plus",label:"Agregar Nivel",onClick:e.addNivel,color:"primary"},null,8,["onClick"])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataEvaluacionNivel,function(o,t){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",he,"Nivel "+(0,s.v_)(t+1),1),(0,n.Lk)("div",Le,[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.bF)(f,{class:"q-if-outlined",modelValue:o.TITULO_NIVEL,"onUpdate:modelValue":function(e){return o.TITULO_NIVEL=e},type:"text","float-label":"Título nivel"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]),(0,n.Lk)("div",ke,[(0,n.Lk)("div",De,[(0,n.Lk)("div",Ve,[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.bF)(C,{class:(0,s.C4)(["q-if-outlined","bg-"+o.COLOR]),modelValue:o.COLOR,"onUpdate:modelValue":function(e){return o.COLOR=e},color:o.COLOR,style:(0,s.Tr)("background: "+o.COLOR),"format-model":"hex","ok-label":"aceptar","float-label":"Color",onChange:function(e){o.COLOR=e}},null,8,["modelValue","onUpdate:modelValue","color","class","style","onChange"])]}),_:2},1024)]),(0,n.bF)(a,{icon:"delete",flat:"",round:"",onClick:function(a){return e.eliminarNivel(o)},color:"primary"},null,8,["onClick"])])])],64)}),256))])]}),_:1},8,["modelValue","title","onSubmit"])])])}var Fe=a(76080),we=a.n(Fe),qe=a(45254),Ge=a.n(qe),ye=(a(52133),a(89571),a(6724),a(70199),a(48426),a(515),a(7346),{class:"column q-pa-sm"}),Me={class:"row"},Pe={class:"col"},$e={class:"col"},Be={key:0,class:"col"},Qe={class:"row gutter-sm"},We={key:0,class:"col-xs-12"},xe={key:1,class:"col-12"};function je(e,o){var a=(0,n.g2)("sie-select"),t=(0,n.g2)("q-field"),l=(0,n.g2)("q-input"),i=(0,n.g2)("sie-modal"),r=(0,n.g2)("q-btn"),u=(0,n.g2)("q-td"),d=(0,n.g2)("q-popup-edit"),f=(0,n.g2)("q-tooltip"),p=(0,n.g2)("q-tr"),C=(0,n.g2)("q-table");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{esc:!0,escClick:!0,modelValue:e.showModalEqui,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.showModalEqui=o}),title:"Añadir equivalencia",onSubmit:e.grabarEqui,ok:"Guardar"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ye,[(0,n.Lk)("div",null,["R"!=e.tipo?((0,n.uX)(),(0,n.Wv)(t,{key:0,"error-label":e.$t("validaciones.requerido"),error:e.v$.formEqui.instrucod.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{modelValue:e.formEqui.instrucod,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.formEqui.instrucod=o}),type:"outlined",options:e.opcNiveles,val:"value",label:"label",placeholder:"Nivel",onBlur:e.v$.formEqui.instrucod.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])):(0,n.Q3)("v-if",!0)]),(0,n.Lk)("div",Me,[(0,n.Lk)("div",Pe,[(0,n.bF)(t,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formEqui.letra.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{modelValue:e.formEqui.letra,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.formEqui.letra=o}),type:"outlined",options:e.opcLetra,val:"value",label:"label",placeholder:"Letra",onBlur:e.v$.formEqui.letra.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",$e,["R"==e.tipo?((0,n.uX)(),(0,n.Wv)(t,{key:0,"error-label":e.$t("validaciones.requerido")},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:e.formEqui.notaini,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.formEqui.notaini=o}),modelModifiers:{number:!0},"float-label":"Menor igual a (%):"},null,8,["modelValue"])]}),_:1},8,["error-label"])):((0,n.uX)(),(0,n.Wv)(t,{key:1,"error-label":e.$t("validaciones.requerido")},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:e.formEqui.notaini,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.formEqui.notaini=o}),modelModifiers:{number:!0},"float-label":"Nota Inicial",onBlur:e.v$.formEqui.notaini.$touch,error:e.v$.formEqui.notaini.$error},null,8,["modelValue","onBlur","error"])]}),_:1},8,["error-label"]))]),"R"!=e.tipo?((0,n.uX)(),(0,n.CE)("div",Be,[(0,n.bF)(t,{"error-label":e.$t("validaciones.requerido")},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:e.formEqui.notafin,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.formEqui.notafin=o}),modelModifiers:{number:!0},"float-label":"Nota Fin",onBlur:e.v$.formEqui.notafin.$touch,error:e.v$.formEqui.notafin.$error},null,8,["modelValue","onBlur","error"])]}),_:1},8,["error-label"])])):(0,n.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","onSubmit"]),(0,n.Lk)("div",Qe,[e.rubrica?((0,n.uX)(),(0,n.CE)("div",We,[(0,n.bF)(C,{data:e.dataEquiRub,columns:e.columnsEquiRub,pagination:e.pagination,"onUpdate:pagination":o[7]||(o[7]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{"top-left":(0,n.k6)(function(a){return[o[10]||(o[10]=(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("p",null,"Equivalencias Rúbrica")],-1)),e.acceso?((0,n.uX)(),(0,n.Wv)(r,{key:0,color:"primary",icon:"rplus",dense:"",round:"",flat:"",onClick:o[6]||(o[6]=function(o){return e.openModalEqui(1)})})):(0,n.Q3)("v-if",!0)]}),body:(0,n.k6)(function(a){return[(0,n.bF)(p,{props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{key:"LETRA",props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(a.row.LETRA),1)]}),_:2},1032,["props"]),(0,n.bF)(u,{key:"PORCENTAJE",props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(a.row.PORCENTAJE),1),(0,n.bF)(d,{modelValue:a.row.PORCENTAJE,"onUpdate:modelValue":function(e){return a.row.PORCENTAJE=e},modelModifiers:{number:!0},buttons:"",onSave:function(o){return e.editarEquiRub(a.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:a.row.PORCENTAJE,"onUpdate:modelValue":function(e){return a.row.PORCENTAJE=e},modelModifiers:{number:!0},"float-label":"Nota Inicial"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave","disable"])]}),_:2},1032,["props"]),(0,n.bF)(u,{key:"ACCIONES",props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{color:"negative",icon:"delete",flat:"",onClick:function(o){return e.eliminarEquiCondRub(a.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[11]||(o[11]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])])):(0,n.Q3)("v-if",!0),e.guiaobservacion?((0,n.uX)(),(0,n.CE)("div",xe,[(0,n.bF)(C,{data:e.tablaEquivalenciasGO.data,columns:e.tablaEquivalenciasGO.columns,pagination:e.tablaEquivalenciasGO.pagination,"onUpdate:pagination":o[9]||(o[9]=function(o){return e.tablaEquivalenciasGO.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{"top-left":(0,n.k6)(function(a){return[o[12]||(o[12]=(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("p",null,"Equivalencias Guía de observación / Escala de valoración")],-1)),e.acceso?((0,n.uX)(),(0,n.Wv)(r,{key:0,color:"primary",icon:"rplus",dense:"",round:"",flat:"",onClick:o[8]||(o[8]=function(o){return e.openModalEqui(4)})})):(0,n.Q3)("v-if",!0)]}),"body-cell-ACCIONES":(0,n.k6)(function(a){return[(0,n.bF)(u,{props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{color:"negative",icon:"delete",flat:"",onClick:function(o){return e.eliminarEquivalenciaGO(a.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[13]||(o[13]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])])):(0,n.Q3)("v-if",!0)])])}var He=a(78786),Xe={setup:function(){var e=(0,Y.fG)();return{v$:e}},props:{acceso:{type:Boolean,required:!0}},components:{QTable:r.kH,QTr:r.qh,QTd:r.Ef,QTableColumns:r.$s,QPageSticky:r._U,QBtn:r.Il,Dialog:J.A,QPopupEdit:r.GT,sieSelect:ee.A,sieModal:Z.A,notify:ne["default"],QField:r.Om,QInput:r.ie,QTooltip:r.nC},data:function(){return{rubrica:!1,sie:(0,ie["default"])(),dataEquiRub:[],opcNiveles:[{label:"Inicial",value:"I"},{label:"Primaria",value:"P"},{label:"Secundaria",value:"S"}],opcEqui:[],opcLetra:[{label:"AD",value:"AD"},{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100},columnsEquiRub:[{label:"Letra",name:"LETRA",field:"LETRA",align:"left"},{label:"Porcentaje",name:"PORCENTAJE",field:"PORCENTAJE",align:"left"},{label:"Acciones",name:"ACCIONES",align:"center"}],columnsEquiNota:[{label:"NIVEL",name:"INSTRUDES",field:"INSTRUDES",align:"left"},{label:"LETRA",name:"LETRA",field:"LETRA",align:"left"},{label:"NOTA INICIAL",name:"NOTAINI",field:"NOTAINI",align:"left"},{label:"NOTA FINAL",name:"NOTAFIN",field:"NOTAFIN",align:"left"},{label:"ACCIONES",name:"ACCIONES",align:"center"}],dataEquiNota:[],dataEquiCondu:[],showModalEqui:!1,tipo:"R",formEqui:{instrucod:"",letra:"",notaini:"",notafin:""},guiaobservacion:!1,tablaEquivalenciasGO:{data:[],columns:[{label:"Letra",name:"LETRA",field:"LETRA",align:"left"},{label:"Porcentaje",name:"PORCENTAJE",field:"PORCENTAJE",align:"left"},{label:"Acciones",name:"ACCIONES",align:"center"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100}},id_instrumento:1}},computed:{lengthDataEquivalenciasGO:function(){return this.tablaEquivalenciasGO.data.length}},validations:{formEqui:{instrucod:{required:ae.mw},letra:{required:ae.mw},notaini:{required:ae.mw,numeric:ae.sH,minValue:(0,ae.Ww)(0),maxValue:(0,ae.cG)(20)},notafin:{required:ae.mw,numeric:ae.sH,minValue:(0,ae.Ww)(0),maxValue:(0,ae.cG)(20)}},tipo:{required:ae.mw}},created:function(){this.verificarRubrica(),this.init()},methods:{init:function(){this.obtenerEquivalenciasNota(),this.obtenerEquivalenciasCond()},verificarRubrica:function(){var e=this;return Ge()(we()().m(function o(){var a;return we()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.post("api/evaluacion/instrumentosDisponibles");case 1:a=o.v,-1!==(0,He["default"])(a,1,{key:"ID_INSTRUMENTO"})&&(e.obtenerEquivalenciasRub(),e.rubrica=!0),-1!==(0,He["default"])(a,4,{key:"ID_INSTRUMENTO"})&&(e.obtenerEquivalenciasGO(),e.guiaobservacion=!0);case 2:return o.a(2)}},o)}))()},obtenerEquivalenciasRub:function(){var e=this;this.$http.get("api/hyoEquinota/listadoEquivalenciasRubrica",{params:{id_instrumento:1}}).then(function(o){e.dataEquiRub=o})},obtenerEquivalenciasNota:function(){var e=this;this.$http.get("api/hyoEquinota/listadoEquivalencias").then(function(o){e.dataEquiNota=o.json})},obtenerEquivalenciasCond:function(){var e=this;this.$http.get("api/HyoEquicond/listadoEquivalencias").then(function(o){e.dataEquiCondu=o.json})},grabarEqui:function(){"R"===this.tipo?this.grabarEquiRubrica():this.v$.$invalid||(this.v$.$touch(),"N"===this.tipo?this.grabarEquiNota():"C"===this.tipo&&this.grabarEquiCond())},grabarEquiRubrica:function(){var e=this,o=this.formEqui,a=o.letra,n=o.notaini,t={letra:a,porcentaje:n,id_instrumento:this.id_instrumento};this.$http.post("api/hyoEquinota/saveEquivalenciaRubrica",{data:t}).then(function(o){(0,ne["default"])(o.message),1===e.id_instrumento?e.obtenerEquivalenciasRub():4===e.id_instrumento&&e.obtenerEquivalenciasGO(),e.limpiarFormulario()}).catch(function(e){(0,ne["default"])(e.error.message,"error")}).finally(function(){e.showModalEqui=!1})},grabarEquiNota:function(){var e=this;this.$http.post("api/hyoEquinota/saveEquivalencia",{data:this.formEqui}).then(function(e){(0,ne["default"])(e.json.message)}).then(function(){e.obtenerEquivalenciasNota(),e.limpiarFormulario()}).catch(function(e){(0,ne["default"])(e.error.message,"error")})},grabarEquiCond:function(){var e=this;this.$http.post("api/HyoEquicond/saveEquivalencia",{data:this.formEqui}).then(function(e){(0,ne["default"])(e.json.message)}).then(function(){e.obtenerEquivalenciasCond(),e.limpiarFormulario()}).finally(function(){e.showModalEqui=!0})},editarEquiNota:function(e){var o=this,a={notaini:e.NOTAINI,notafin:e.NOTAFIN},n={letra:e.LETRA,instrucod:e.INSTRUCOD};this.$http.put("api/hyoEquinota/updateEquivalencia",{data:a,where:n}).then(function(e){(0,ne["default"])(e.json.message)}).catch(function(e){(0,ne["default"])(e.error.message,"error")}).finally(function(){o.obtenerEquivalenciasNota()})},editarEquiCondu:function(e){var o=this,a={notaini:e.NOTAINI,notafin:e.NOTAFIN},n={letra:e.LETRA,instrucod:e.INSTRUCOD};this.$http.put("api/HyoEquicond/updateEquivalencia",{data:a,where:n}).then(function(e){(0,ne["default"])(e.json.message)}).catch(function(e){(0,ne["default"])(e.error.message,"error")}).finally(function(){o.obtenerEquivalenciasCond()})},editarEquiRub:function(e){var o=this,a={porcentaje:e.PORCENTAJE},n={id_equivalencia:e.ID_EQUIVALENCIA};this.$http.post("api/HyoEquinota/updateRubrica",{data:a,where:n}).then(function(e){(0,ne["default"])(e.message)}).catch(function(e){(0,ne["default"])(e.error.message,"error")}).finally(function(){o.obtenerEquivalenciasRub()})},eliminarEquiNota:function(e){var o=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"Si",cancel:"No"}).onOk(function(){var a={instrucod:e.INSTRUCOD,letra:e.LETRA};o.$http.delete("api/hyoEquinota/deleteEquivalencia",{params:{where:a}}).then(function(e){(0,ne["default"])(e.json.message),o.obtenerEquivalenciasNota()}).catch(function(e){(0,ne["default"])(e.error.message,"error")})})},eliminarEquiCondRub:function(e){var o=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"Si",cancel:"No"}).onOk(function(){var a={id_equivalencia:e.ID_EQUIVALENCIA};o.$http.delete("api/HyoEquinota/deleteEquivalenciaRub",{params:{where:a}}).then(function(e){o.obtenerEquivalenciasRub(),(0,ne["default"])(e.message)}).catch(function(e){console.log(e)})})},eliminarEquiCond:function(e){var o=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"Si",cancel:"No"}).onOk(function(){var a={instrucod:e.INSTRUCOD,letra:e.LETRA};o.$http.delete("api/HyoEquicond/deleteEquivalencia",{params:{where:a}}).then(function(e){(0,ne["default"])(e.json.message),o.obtenerEquivalenciasCond()}).catch(function(e){console.log(e)})})},limpiarFormulario:function(){this.formEqui={instrucod:"",letra:"",notaini:"",notafin:""}},obtenerEquivalenciasGO:function(){var e=this;return Ge()(we()().m(function o(){return we()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/hyoEquinota/listadoEquivalenciasRubrica",{params:{id_instrumento:4}});case 1:e.tablaEquivalenciasGO.data=o.v,o.n=3;break;case 2:o.p=2,o.v,e.tablaEquivalenciasGO.data=[];case 3:return o.a(2)}},o,null,[[0,2]])}))()},eliminarEquivalenciaGO:function(e){var o=this;return Ge()(we()().m(function a(){var n,t,l,i,r,u;return we()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,o.$confirmar("¿Realmente desea eliminar el registro?","delete");case 1:if(n=a.v,!n){a.n=5;break}return a.p=2,t={id_equivalencia:e.ID_EQUIVALENCIA},a.n=3,o.$http.delete("api/HyoEquinota/deleteEquivalenciaRub",{params:{where:t}});case 3:l=a.v,i=l.message,o.obtenerEquivalenciasGO(),(0,ne["default"])(i,"success"),a.n=5;break;case 4:a.p=4,u=a.v,r=u.error,(0,ne["default"])(r.message,"error");case 5:return a.a(2)}},a,null,[[2,4]])}))()},openModalEqui:function(e){this.showModalEqui=!0,this.id_instrumento=e}}};const ze=(0,ue.A)(Xe,[["render",je]]);var Ye=ze,Je=1,Ke={props:{acceso:{type:Boolean,required:!0}},components:{equivalencia:Ye,QTooltip:r.nC,QTable:r.kH,QTr:r.qh,QTd:r.Ef,QPopupEdit:r.GT,sieSelect:ee.A,sieModal:Z.A,QColor:r.zy,notify:ne["default"],QBtn:r.Il,QField:r.Om,QInput:r.ie},data:function(){return{accion:"new",tituloModalCategoria:"Editar Categoría",dataEvaluacionCategoriaNivel:[],dataSelectCategoriaNivel:[],dataEvaluacionNivel:[],dataCategoriaNivel:[],siNo:[{label:"Si",value:1},{label:"No",value:0}],dataCalculo:[{label:"Calculado",value:1},{label:"Digitado",value:2}],currentRow:{},openModal:!1,pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100},columnsCategoria:[{label:"Categoría",name:"NOMBRE_CATEGORIA",field:"NOMBRE_CATEGORIA",align:"center"},{name:"ACCIONES",style:"width: 150px",label:"Acciones",align:"center"}],columns:[{label:"Nivel",name:"INSTRUDES",field:"INSTRUDES",align:"center"},{label:"Grado",name:"GRADODES",field:"GRADODES",align:"center"},{label:"Categoría",name:"NOMBRE_CATEGORIA",field:"NOMBRE_CATEGORIA",align:"center"},{label:"Tipo de Cálculo",name:"TIPO_CALCULO",field:"TIPO_CALCULO",align:"center"},{label:"Enviar al Registro de Notas",name:"REGISTRO_NOTAS",field:"REGISTRO_NOTAS",align:"center"},{label:"Mostrar calificación al alumno",name:"NOTA_VISIBLE",field:"NOTA_VISIBLE",align:"center"}],form:{id_categoria_nivel:"",nombre_categoria:""}}},created:function(){var e=this;return Ge()(we()().m(function o(){return we()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.getEvaluacionCategoriaNivel();case 1:return o.n=2,e.getCategoriaNivel();case 2:return o.n=3,e.getSelectCategoriaNivel();case 3:return o.a(2)}},o)}))()},methods:{textSiNo:function(e){return 1===e?"Sí":"No"},textCalculo:function(e){return console.log(e),1===e?"Calculado":"Digitado"},getCurrentRow:function(e){this.currentRow={row:e,old:JSON.parse(JSON.stringify(e))}},changeOthersColumns:function(e,o){var a=this;return Ge()(we()().m(function n(){var t,l,i,r,u,c;return we()().w(function(n){while(1)switch(n.n){case 0:if(t=a.currentRow.row,l=a.currentRow.old,"-"!==t.ID_CATEGORIA_NIVEL&&null!==t.ID_CATEGORIA_NIVEL){n.n=5;break}u=o,n.n="notaVisible"===u?1:"tipoCalculo"===u?2:"registroNotas"===u?3:4;break;case 1:return t.NOTA_VISIBLE=l.NOTA_VISIBLE,n.a(3,4);case 2:return t.TIPO_CALCULO=l.TIPO_CALCULO,n.a(3,4);case 3:return t.REGISTRO_NOTAS=l.REGISTRO_NOTAS,n.a(3,4);case 4:(0,ne["default"])("Debe seleccionar una categoría.","warning"),n.n=9;break;case 5:i={NOTA_VISIBLE:t.NOTA_VISIBLE,TIPO_CALCULO:t.TIPO_CALCULO,REGISTRO_NOTAS:t.REGISTRO_NOTAS},r={ID:t.ID_CATEGORIA_NIVEL,NOMBRE:t.NOMBRE_CATEGORIA},c=o,n.n="notaVisible"===c?6:"tipoCalculo"===c?7:"registroNotas"===c?8:9;break;case 6:return i.NOTA_VISIBLE=e.value,a.changeCategoriaNivel(r,i),n.a(3,9);case 7:return i.TIPO_CALCULO=e.value,a.changeCategoriaNivel(r,i),n.a(3,9);case 8:return i.REGISTRO_NOTAS=e.value,a.changeCategoriaNivel(r,i),n.a(3,9);case 9:return n.a(2)}},n)}))()},changeNotaVisible:function(e){this.changeOthersColumns(e,"notaVisible")},changeTipoCalculo:function(e){this.changeOthersColumns(e,"tipoCalculo")},changeRegistrosNotas:function(e){this.changeOthersColumns(e,"registroNotas")},changeCategoriaNivel:function(e){var o=arguments,a=this;return Ge()(we()().m(function n(){var t,l,i,r,u;return we()().w(function(n){while(1)switch(n.p=n.n){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},l=a.currentRow.row,i=a.currentRow.old,n.p=1,r={INSTRUCOD:l.INSTRUCOD,GRADOCOD:l.GRADOCOD,ID_CATEGORIA_NIVEL:e.ID},t.NOTA_VISIBLE=t.NOTA_VISIBLE||l.NOTA_VISIBLE,t.TIPO_CALCULO=t.TIPO_CALCULO||l.TIPO_CALCULO,t.REGISTRO_NOTAS=t.REGISTRO_NOTAS||l.REGISTRO_NOTAS,Object.assign(r,t),n.n=2,a.$http.post("api/evaluacion/updateEvaluacionConfiguracion",{data:r});case 2:u=n.v,"delete"===u.code?(l.ID_CATEGORIA_NIVEL=null,l.NOTA_VISIBLE=null,l.TIPO_CALCULO=null,l.REGISTRO_NOTAS=null):"update"===u.code?(l.ID_CATEGORIA_NIVEL=e.ID,l.NOMBRE_CATEGORIA=e.NOMBRE,l.NOTA_VISIBLE=t.NOTA_VISIBLE,l.TIPO_CALCULO=t.TIPO_CALCULO,l.REGISTRO_NOTAS=t.REGISTRO_NOTAS):"insert"===u.code&&(l.ID_CATEGORIA_NIVEL=e.ID,l.NOMBRE_CATEGORIA=e.NOMBRE,l.NOTA_VISIBLE=1,l.TIPO_CALCULO=1,l.REGISTRO_NOTAS=1),(0,ne["default"])(u.msg,"success"),n.n=4;break;case 3:n.p=3,n.v,l.ID_CATEGORIA_NIVEL=i.ID_CATEGORIA_NIVEL,l.NOTA_VISIBLE=i.NOTA_VISIBLE,l.TIPO_CALCULO=i.TIPO_CALCULO,l.REGISTRO_NOTAS=i.REGISTRO_NOTAS,(0,ne["default"])("No ha sudio posible actualizar el registro.","warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},addNivel:function(){var e={TITULO_NIVEL:"",COLOR:"#cdf7eb"};this.dataEvaluacionNivel.push(e)},eliminarNivel:function(e){var o=this;return Ge()(we()().m(function a(){return we()().w(function(a){while(1)switch(a.p=a.n){case 0:if(!e.ID_NIVEL){a.n=5;break}return a.p=1,a.n=2,o.$http.post("api/evaluacion/deleteEvaluacionNivel",{data:{ID_NIVEL:e.ID_NIVEL}});case 2:o.dataEvaluacionNivel.splice(o.dataEvaluacionNivel.indexOf(e),1),a.n=4;break;case 3:a.p=3,a.v,(0,ne["default"])("No ha sido posible eliminar el registro.","warning");case 4:a.n=6;break;case 5:o.dataEvaluacionNivel.splice(o.dataEvaluacionNivel.indexOf(e),1);case 6:return a.a(2)}},a,null,[[1,3]])}))()},getEvaluacionCategoriaNivel:function(){var e=this;return Ge()(we()().m(function o(){var a;return we()().w(function(o){while(1)switch(o.n){case 0:return a={params:{id_instrumento:Je}},o.n=1,e.$http.get("api/evaluacion/getEvaluacionCategoriaNivel",{params:{data:a}});case 1:e.dataEvaluacionCategoriaNivel=o.v;case 2:return o.a(2)}},o)}))()},getCategoriaNivel:function(){var e=this;return Ge()(we()().m(function o(){var a;return we()().w(function(o){while(1)switch(o.n){case 0:return a={id_instrumento:Je},o.n=1,e.$http.get("api/evaluacion/getCategoriaEvaluacionNivel",{params:a});case 1:e.dataCategoriaNivel=o.v;case 2:return o.a(2)}},o)}))()},getSelectCategoriaNivel:function(){var e=this;return Ge()(we()().m(function o(){return we()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/evaluacion/getEvaluacionCategoriaNivel",{params:{data:{fields:["id_categoria_nivel as id","nombre_categoria nombre"],params:{id_instrumento:Je}}}});case 1:e.dataSelectCategoriaNivel=o.v,console.log("this.dataSelectCategoriaNivel:",e.dataSelectCategoriaNivel),e.dataSelectCategoriaNivel.unshift({ID:"-",ID_CATEGORIA_NIVEL:"-",NOMBRE:"Sin Categoria"});case 2:return o.a(2)}},o)}))()},saveNivelesDeEvaluacion:function(){var e=this;return Ge()(we()().m(function o(){var a,n,t;return we()().w(function(o){while(1)switch(o.p=o.n){case 0:return a=1,e.dataEvaluacionNivel.map(function(e){e.NIVEL=a,a++}),n=e.form,t=e.dataEvaluacionNivel,o.p=1,o.n=2,e.$http.post("api/evaluacion/saveCategoriaNivel",{data:{categoria:n,niveles:t}});case 2:return o.n=3,e.getEvaluacionCategoriaNivel();case 3:return o.n=4,e.getCategoriaNivel();case 4:return o.n=5,e.getSelectCategoriaNivel();case 5:e.openModal=!1,(0,ne["default"])("Proceso completado satisfactoriamente.","success"),o.n=7;break;case 6:o.p=6,o.v,(0,ne["default"])("Ha ocurrido un problema de conexión.","warning");case 7:return o.a(2)}},o,null,[[1,6]])}))()},nuevo:function(){this.tituloModalCategoria="Agregar Categoría",this.dataEvaluacionNivel=[],this.form.id_categoria_nivel="",this.form.nombre_categoria="",this.openModal=!0,this.accion="new"},editar:function(e){var o=this;return Ge()(we()().m(function a(){var n,t,l,i;return we()().w(function(a){while(1)switch(a.n){case 0:return o.tituloModalCategoria="Editar Categoría",o.openModal=!0,o.accion="edit",n=e.ID_CATEGORIA_NIVEL,t={data:{idCategoriaNivel:n}},a.n=1,o.$http.get("api/evaluacion/getEvaluacionCategoriaNivelEvaluacionNivel",{params:t});case 1:l=a.v,i=l.data.categoria,o.form.id_categoria_nivel=i.ID_CATEGORIA_NIVEL,o.form.nombre_categoria=i.NOMBRE_CATEGORIA,o.dataEvaluacionNivel=l.data.niveles;case 2:return a.a(2)}},a)}))()},eliminar:function(e){var o=this;return Ge()(we()().m(function a(){return we()().w(function(a){while(1)switch(a.n){case 0:o.$http.post("api/evaluacion/deleteEvCaNi",{data:{ID_CATEGORIA_NIVEL:e.ID_CATEGORIA_NIVEL}}).then(function(e){o.getEvaluacionCategoriaNivel()}).catch(function(e){var o=e.error&&e.error.message?e.error.message:"Ourrio un error";(0,ne["default"])(o,"warning")});case 1:return a.a(2)}},a)}))()}}};const Ze=(0,ue.A)(Ke,[["render",Ue]]);var eo=Ze,oo={class:"row gutter-sm"},ao={class:"col-xs-12 col-sm-12 col-md-5"},no={class:"row col"},to={class:"row gutter-sm"},lo={class:"col-xs-12 col-sm-12"},io={class:"col-xs-12 col-sm-12 col-md-7"},ro={class:"row q-pa-sm"},uo={class:"col-12"},co={class:"col-12 q-pb-sm"},so={class:"row col-12"},fo={key:0,class:"col-12 q-py-xs"},po={key:1,class:"col-12 q-pa-xs row"},Co={class:"col-12 row"},mo={class:"col"},vo={class:"row q-pa-sm"},Oo={class:"col-12"};function bo(e,o){var a=(0,n.g2)("q-btn"),t=(0,n.g2)("q-td"),l=(0,n.g2)("q-tooltip"),i=(0,n.g2)("q-tr"),r=(0,n.g2)("q-table"),u=(0,n.g2)("sie-select"),d=(0,n.g2)("q-popup-edit"),f=(0,n.g2)("q-input"),p=(0,n.g2)("q-field"),C=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",oo,[(0,n.Lk)("div",ao,[(0,n.bF)(r,{data:e.dataEvaluacionCategoriaNivel,columns:e.columnsCategoria,pagination:e.pagination,"onUpdate:pagination":o[1]||(o[1]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{"top-left":(0,n.k6)(function(t){return[(0,n.Lk)("div",no,[o[9]||(o[9]=(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("p",null,"Categorías de Niveles de Evaluación para el criterio")],-1)),e.acceso?((0,n.uX)(),(0,n.Wv)(a,{key:0,color:"primary",icon:"rplus",dense:"",round:"",flat:"",onClick:o[0]||(o[0]=function(o){return e.nuevo(0)})})):(0,n.Q3)("v-if",!0)])]}),body:(0,n.k6)(function(r){return[(0,n.bF)(i,{props:r},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{key:"NOMBRE_CATEGORIA",props:r},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(r.row.NOMBRE_CATEGORIA),1)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"ACCIONES",props:r},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{class:"q-px-xs",color:"negative",icon:"edit",flat:"",onClick:function(o){return e.editar(r.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[10]||(o[10]=[(0,n.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,n.bF)(a,{class:"q-px-xs",color:"negative",icon:"delete",flat:"",onClick:function(o){return e.eliminar(r.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[11]||(o[11]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"]),(0,n.Lk)("div",to,[(0,n.Lk)("div",lo,[(0,n.bF)(r,{data:e.dataCategoriaValoracion,columns:e.columnsCategoriaValoracion,pagination:e.pagination,"onUpdate:pagination":o[3]||(o[3]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{"top-left":(0,n.k6)(function(t){return[o[12]||(o[12]=(0,n.Lk)("div",{class:"row col"},[(0,n.Lk)("p",{class:"col"},"Categorías de Niveles para escala de Valoración")],-1)),e.acceso?((0,n.uX)(),(0,n.Wv)(a,{key:0,color:"primary",icon:"rplus",dense:"",round:"",flat:"",onClick:o[2]||(o[2]=function(o){return e.nuevo(1)})})):(0,n.Q3)("v-if",!0)]}),body:(0,n.k6)(function(r){return[(0,n.bF)(i,{props:r},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{key:"NOMBRE_CATEGORIA",props:r},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(r.row.NOMBRE_CATEGORIA),1)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"ACCIONES",props:r},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{class:"q-px-xs",color:"negative",icon:"edit",flat:"",onClick:function(o){return e.editar(r.row,1)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[13]||(o[13]=[(0,n.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,n.bF)(a,{class:"q-px-xs",color:"negative",icon:"delete",flat:"",onClick:function(o){return e.eliminar(r.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(o[14]||(o[14]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])])])]),(0,n.Lk)("div",io,[(0,n.bF)(r,{data:e.dataCategoriaNivel,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":o[4]||(o[4]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{"top-left":(0,n.k6)(function(e){return c()(o[15]||(o[15]=[(0,n.Lk)("div",{class:"row col"},[(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("p",null,"Configuración por Grado")])],-1)]))}),body:(0,n.k6)(function(o){return[(0,n.bF)(i,{class:"cursor-pointer",props:o,onClick:function(a){return e.getCurrentRow(o.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{key:"INSTRUDES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.INSTRUDES),1)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"GRADODES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.GRADODES),1)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"NOMBRE_CATEGORIA",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.ID_CATEGORIA_NIVEL?"-":o.row.NOMBRE_CATEGORIA),1),e.dataSelectCategoriaNivel&&e.dataSelectCategoriaNivel.length>1?((0,n.uX)(),(0,n.Wv)(d,{key:0,disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.ID_CATEGORIA_NIVEL,"onUpdate:modelValue":function(e){return o.row.ID_CATEGORIA_NIVEL=e},type:"outlined",options:e.dataSelectCategoriaNivel,val:"ID",label:"NOMBRE",placeholder:"Seleccione",onSelected:e.changeCategoriaNivel},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"TIPO_CALCULO",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.TIPO_CALCULO?"-":e.textCalculo(o.row.TIPO_CALCULO)),1),(0,n.bF)(d,{disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.TIPO_CALCULO,"onUpdate:modelValue":function(e){return o.row.TIPO_CALCULO=e},type:"outlined",options:e.dataCalculo,val:"value",label:"label",placeholder:"Seleccione",onSelected:e.changeTipoCalculo},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"REGISTRO_NOTAS",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.REGISTRO_NOTAS?"-":e.textSiNo(o.row.REGISTRO_NOTAS)),1),(0,n.bF)(d,{disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.REGISTRO_NOTAS,"onUpdate:modelValue":function(e){return o.row.REGISTRO_NOTAS=e},type:"outlined",options:e.siNo,val:"value",label:"label",placeholder:"Seleccione",onSelected:e.changeRegistrosNotas},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])]}),_:2},1032,["props"]),(0,n.bF)(t,{key:"NOTA_VISIBLE",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(null===o.row.NOTA_VISIBLE?"-":e.textSiNo(o.row.NOTA_VISIBLE)),1),(0,n.bF)(d,{disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.NOTA_VISIBLE,"onUpdate:modelValue":function(e){return o.row.NOTA_VISIBLE=e},type:"outlined",options:e.siNo,val:"value",label:"label",placeholder:"Seleccione",onSelected:e.changeNotaVisible},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props","onClick"])]}),_:1},8,["data","columns","pagination"])]),(0,n.bF)(C,{class:"modal-categoria",esc:!0,escClick:!0,modelValue:e.openModal,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.openModal=o}),title:e.tituloModalCategoria,ok:"guardar",onSubmit:e.saveNivelesDeEvaluacion},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ro,[(0,n.Lk)("div",uo,[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.bF)(f,{class:"q-if-outlined",modelValue:e.form.nombre_categoria,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.nombre_categoria=o}),type:"text","float-label":"Nombre Categoría",placeholder:"nombre categoría"},null,8,["modelValue"])]}),_:1})]),(0,n.Lk)("div",co,[(0,n.bF)(a,{class:"q-mx-xs",icon:"plus",label:"Agregar Nivel",onClick:e.addNivel,color:"primary"},null,8,["onClick"])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataEvaluacionNivel,function(t,l){return(0,n.uX)(),(0,n.CE)("div",so,[e.esValoracion?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.CE)("div",fo,"Nivel "+(0,s.v_)(l+1),1)),0!=l||e.esValoracion?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.CE)("div",po,c()(o[16]||(o[16]=[(0,n.Lk)("div",{class:"doc-note self-end"},[(0,n.Lk)("p",null,"Este nivel será usado para contabilizar los Criterios Alcanzados")],-1)])))),(0,n.Lk)("div",Co,[(0,n.Lk)("div",mo,[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.bF)(f,{class:"q-if-outlined",modelValue:t.TITULO_NIVEL,"onUpdate:modelValue":function(e){return t.TITULO_NIVEL=e},type:"text","float-label":"Título nivel"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]),(0,n.bF)(a,{icon:"delete",flat:"",round:"",onClick:function(o){return e.eliminarNivel(t)},color:"primary"},null,8,["onClick"])])])}),256))])]}),_:1},8,["modelValue","title","onSubmit"])]),(0,n.bF)(C,{esc:!0,escClick:!0,modelValue:e.modalNivelLC,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.modalNivelLC=o}),title:"Agregar Nivel de Logro",ok:"grabar",onSubmit:e.addNivelLogro},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",vo,[(0,n.Lk)("div",Oo,[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.bF)(f,{class:"q-if-outlined",modelValue:e.titulo_nivel,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.titulo_nivel=o}),type:"text","float-label":"Nivel de logro",placeholder:"Nivel de logro"},null,8,["modelValue"])]}),_:1})])])]}),_:1},8,["modelValue","onSubmit"])])}a(11777);var No=3,go={props:{acceso:{type:Boolean,required:!0}},components:{equivalencia:Ye,QTooltip:r.nC,QTable:r.kH,QTr:r.qh,QTd:r.Ef,QPopupEdit:r.GT,sieSelect:ee.A,sieModal:Z.A,QColor:r.zy,notify:ne["default"],QBtn:r.Il,QField:r.Om,QInput:r.ie},data:function(){return{titulo_nivel:null,nivelLC:[],columnsNivelLC:[{label:"Nivel de desempeño",name:"TITULO_NIVEL",field:"TITULO_NIVEL",align:"center"},{name:"ACCIONES",style:"width: 150px",label:"Acciones",align:"center"}],modalNivelLC:!1,accion:"new",tituloModalCategoria:"Editar Categoría",dataEvaluacionCategoriaNivel:[],dataCategoriaValoracion:[],dataSelectCategoriaNivel:[],dataEvaluacionNivel:[],dataCategoriaNivel:[],siNo:[{label:"Si",value:1},{label:"No",value:0}],dataCalculo:[{label:"Calculado",value:1},{label:"Digitado",value:2}],currentRow:{},openModal:!1,esValoracion:!1,pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100},columnsCategoria:[{label:"Categoría",name:"NOMBRE_CATEGORIA",field:"NOMBRE_CATEGORIA",align:"center"},{name:"ACCIONES",style:"width: 150px",label:"Acciones",align:"center"}],columnsCategoriaValoracion:[{label:"Valoración",name:"NOMBRE_CATEGORIA",field:"NOMBRE_CATEGORIA",align:"center"},{name:"ACCIONES",style:"width: 150px",label:"Acciones",align:"center"}],columns:[{label:"Nivel",name:"INSTRUDES",field:"INSTRUDES",align:"center"},{label:"Grado",name:"GRADODES",field:"GRADODES",align:"center"},{label:"Categoría",name:"NOMBRE_CATEGORIA",field:"NOMBRE_CATEGORIA",align:"center"},{label:"Tipo de Cálculo",name:"TIPO_CALCULO",field:"TIPO_CALCULO",align:"center"},{label:"Enviar al Registro de Notas",name:"REGISTRO_NOTAS",field:"REGISTRO_NOTAS",align:"center"},{label:"Mostrar calificación al alumno",name:"NOTA_VISIBLE",field:"NOTA_VISIBLE",align:"center"}],form:{id_categoria_nivel:"",nombre_categoria:""}}},created:function(){var e=this;return Ge()(we()().m(function o(){return we()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.getEvaluacionCategoriaNivel();case 1:return o.n=2,e.getCategoriaNivel();case 2:return o.n=3,e.getSelectCategoriaNivel();case 3:e.listarNiveles();case 4:return o.a(2)}},o)}))()},methods:{listarNiveles:function(){var e=this;this.$http.get("api/evaluacion/getEvaluacionNivelLogro").then(function(o){e.nivelLC=o})},addNivelLogro:function(){var e=this;if(!this.titulo_nivel)return(0,ne["default"])("Ingrese una descrpción","warning"),!1;this.$http.post("api/evaluacion/saveEvaluacionNivel",{data:{titulo_nivel:this.titulo_nivel,id_instrumento:3,nivel:1}}).then(function(o){(0,ne["default"])("Nivel de Logro agregado"),e.titulo_nivel=null,e.listarNiveles()})},eliminarCategoriaValoracion:function(e){var o=this;this.$http.post("api/evaluacion/deleteEvaluacionNivel",{data:{id_nivel:e.ID_NIVEL}}).then(function(e){(0,ne["default"])("Nivel de Logro agregado Eliminado"),o.listarNiveles()})},textSiNo:function(e){return 1===e?"Sí":"No"},textCalculo:function(e){return 1===e?"Calculado":"Digitado"},getCurrentRow:function(e){this.currentRow={row:e,old:JSON.parse(JSON.stringify(e))}},changeOthersColumns:function(e,o){var a=this;return Ge()(we()().m(function n(){var t,l,i,r,u,c;return we()().w(function(n){while(1)switch(n.n){case 0:if(t=a.currentRow.row,l=a.currentRow.old,"-"!==t.ID_CATEGORIA_NIVEL&&null!==t.ID_CATEGORIA_NIVEL){n.n=5;break}u=o,n.n="notaVisible"===u?1:"tipoCalculo"===u?2:"registroNotas"===u?3:4;break;case 1:return t.NOTA_VISIBLE=l.NOTA_VISIBLE,n.a(3,4);case 2:return t.TIPO_CALCULO=l.TIPO_CALCULO,n.a(3,4);case 3:return t.REGISTRO_NOTAS=l.REGISTRO_NOTAS,n.a(3,4);case 4:(0,ne["default"])("Debe seleccionar una categoría.","warning"),n.n=9;break;case 5:i={NOTA_VISIBLE:t.NOTA_VISIBLE,TIPO_CALCULO:t.TIPO_CALCULO||1,REGISTRO_NOTAS:t.REGISTRO_NOTAS},r={ID:t.ID_CATEGORIA_NIVEL,NOMBRE:t.NOMBRE_CATEGORIA},c=o,n.n="notaVisible"===c?6:"tipoCalculo"===c?7:"registroNotas"===c?8:9;break;case 6:return i.NOTA_VISIBLE=e.value,a.changeCategoriaNivel(r,i),n.a(3,9);case 7:return i.TIPO_CALCULO=e.value,a.changeCategoriaNivel(r,i),n.a(3,9);case 8:return i.REGISTRO_NOTAS=e.value,a.changeCategoriaNivel(r,i),n.a(3,9);case 9:return n.a(2)}},n)}))()},changeNotaVisible:function(e){this.changeOthersColumns(e,"notaVisible")},changeTipoCalculo:function(e){this.changeOthersColumns(e,"tipoCalculo")},changeRegistrosNotas:function(e){this.changeOthersColumns(e,"registroNotas")},changeCategoriaNivel:function(e){var o=arguments,a=this;return Ge()(we()().m(function n(){var t,l,i,r,u;return we()().w(function(n){while(1)switch(n.p=n.n){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},l=a.currentRow.row,i=a.currentRow.old,n.p=1,r={INSTRUCOD:l.INSTRUCOD,GRADOCOD:l.GRADOCOD,ID_CATEGORIA_NIVEL:e.ID,ID_INSTRUMENTO:No},t.NOTA_VISIBLE=t.NOTA_VISIBLE||l.NOTA_VISIBLE,t.TIPO_CALCULO=t.TIPO_CALCULO||l.TIPO_CALCULO,t.REGISTRO_NOTAS=t.REGISTRO_NOTAS||l.REGISTRO_NOTAS,Object.assign(r,t),n.n=2,a.$http.post("api/evaluacion/updateEvaluacionConfiguracion",{data:r});case 2:u=n.v,"delete"===u.code?(l.ID_CATEGORIA_NIVEL=null,l.NOTA_VISIBLE=null,l.TIPO_CALCULO=null,l.REGISTRO_NOTAS=null):"update"===u.code?(l.ID_CATEGORIA_NIVEL=e.ID,l.NOMBRE_CATEGORIA=e.NOMBRE,l.NOTA_VISIBLE=t.NOTA_VISIBLE,l.TIPO_CALCULO=t.TIPO_CALCULO,l.REGISTRO_NOTAS=t.REGISTRO_NOTAS):"insert"===u.code&&(l.ID_CATEGORIA_NIVEL=e.ID,l.NOMBRE_CATEGORIA=e.NOMBRE,l.NOTA_VISIBLE=1,l.TIPO_CALCULO=1,l.REGISTRO_NOTAS=1),(0,ne["default"])(u.msg,"success"),n.n=4;break;case 3:n.p=3,n.v,l.ID_CATEGORIA_NIVEL=i.ID_CATEGORIA_NIVEL,l.NOTA_VISIBLE=i.NOTA_VISIBLE,l.TIPO_CALCULO=i.TIPO_CALCULO,l.REGISTRO_NOTAS=i.REGISTRO_NOTAS,(0,ne["default"])("No ha sudio posible actualizar el registro.","warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},addNivel:function(){var e={TITULO_NIVEL:"",ID_INSTRUMENTO:No,COLOR:null};this.dataEvaluacionNivel.push(e)},eliminarNivel:function(e){var o=this;return Ge()(we()().m(function a(){return we()().w(function(a){while(1)switch(a.p=a.n){case 0:if(!e.ID_NIVEL){a.n=5;break}return a.p=1,a.n=2,o.$http.post("api/evaluacion/deleteEvaluacionNivel",{data:{ID_NIVEL:e.ID_NIVEL}});case 2:o.dataEvaluacionNivel.splice(o.dataEvaluacionNivel.indexOf(e),1),a.n=4;break;case 3:a.p=3,a.v,(0,ne["default"])("No ha sido posible eliminar el registro.","warning");case 4:a.n=6;break;case 5:o.dataEvaluacionNivel.splice(o.dataEvaluacionNivel.indexOf(e),1);case 6:return a.a(2)}},a,null,[[1,3]])}))()},getEvaluacionCategoriaNivel:function(){var e=this;return Ge()(we()().m(function o(){var a,n;return we()().w(function(o){while(1)switch(o.n){case 0:return a={params:{id_instrumento:No}},o.n=1,e.$http.get("api/evaluacion/getEvaluacionCategoriaNivel",{params:{data:a}});case 1:n=o.v,e.dataEvaluacionCategoriaNivel=Array.isArray(n)?n.filter(function(e){return 0===e.TIPO}):[],e.dataCategoriaValoracion=Array.isArray(n)?n.filter(function(e){return 1===e.TIPO}):[];case 2:return o.a(2)}},o)}))()},getCategoriaNivel:function(){var e=this;return Ge()(we()().m(function o(){var a;return we()().w(function(o){while(1)switch(o.n){case 0:return a={id_instrumento:No},o.n=1,e.$http.get("api/evaluacion/getCategoriaEvaluacionNivel",{params:a});case 1:e.dataCategoriaNivel=o.v;case 2:return o.a(2)}},o)}))()},getSelectCategoriaNivel:function(){var e=this;return Ge()(we()().m(function o(){var a;return we()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/evaluacion/getEvaluacionCategoriaNivel",{params:{data:{fields:["id_categoria_nivel as id","nombre_categoria nombre","tipo"],params:{id_instrumento:No}}}});case 1:a=o.v,a=a.filter(function(e){return 0===e.TIPO}),e.dataSelectCategoriaNivel=a,e.dataSelectCategoriaNivel.unshift({ID:"-",NOMBRE:"Sin Categoria"});case 2:return o.a(2)}},o)}))()},saveNivelesDeEvaluacion:function(){var e=this;return Ge()(we()().m(function o(){var a,n,t;return we()().w(function(o){while(1)switch(o.p=o.n){case 0:return a=1,e.dataEvaluacionNivel.map(function(e){e.NIVEL=a,a++}),n=e.form,n.id_instrumento=No,n.tipo=Number(!!e.esValoracion),t=e.dataEvaluacionNivel,o.p=1,o.n=2,e.$http.post("api/evaluacion/saveCategoriaNivel",{data:{categoria:n,niveles:t}});case 2:return o.n=3,e.getEvaluacionCategoriaNivel();case 3:return o.n=4,e.getCategoriaNivel();case 4:return o.n=5,e.getSelectCategoriaNivel();case 5:e.openModal=!1,(0,ne["default"])("Proceso completado satisfactoriamente.","success"),o.n=7;break;case 6:o.p=6,o.v,(0,ne["default"])("Ha ocurrido un problema de conexión.","warning");case 7:return o.a(2)}},o,null,[[1,6]])}))()},nuevo:function(e){this.tituloModalCategoria="Agregar Categoría",this.dataEvaluacionNivel=[],this.form.id_categoria_nivel="",this.form.nombre_categoria="",this.openModal=!0,this.esValoracion=!!e,this.accion="new"},editar:function(e,o){var a=this;return Ge()(we()().m(function n(){var t,l,i,r;return we()().w(function(n){while(1)switch(n.n){case 0:return a.esValoracion=!!o,a.tituloModalCategoria="Editar Categoría",a.openModal=!0,a.accion="edit",t=e.ID_CATEGORIA_NIVEL,l={data:{idCategoriaNivel:t}},n.n=1,a.$http.get("api/evaluacion/getEvaluacionCategoriaNivelEvaluacionNivel",{params:l});case 1:i=n.v,r=i.data.categoria,a.form.id_categoria_nivel=r.ID_CATEGORIA_NIVEL,a.form.nombre_categoria=r.NOMBRE_CATEGORIA,a.dataEvaluacionNivel=i.data.niveles;case 2:return n.a(2)}},n)}))()},eliminar:function(e){var o=this;return Ge()(we()().m(function a(){return we()().w(function(a){while(1)switch(a.n){case 0:o.$http.post("api/evaluacion/deleteEvCaNi",{data:{ID_CATEGORIA_NIVEL:e.ID_CATEGORIA_NIVEL}}).then(function(e){o.getEvaluacionCategoriaNivel()}).catch(function(e){var o=e.error&&e.error.message?e.error.message:"Ourrio un error";(0,ne["default"])(o,"warning")});case 1:return a.a(2)}},a)}))()}}};const Eo=(0,ue.A)(go,[["render",bo]]);var Io=Eo,Ao={class:"row q-pa-sm"},_o={class:"col-12"},To={class:"col-12"},Ro={class:"col-12"};function So(e,o){var a=(0,n.g2)("q-td"),t=(0,n.g2)("sie-select"),l=(0,n.g2)("q-popup-edit"),i=(0,n.g2)("q-tr"),r=(0,n.g2)("q-table"),u=(0,n.g2)("q-tooltip"),d=(0,n.g2)("q-btn"),f=(0,n.g2)("q-page-sticky"),p=(0,n.g2)("q-field"),C=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(r,{data:e.dataSalones,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{body:(0,n.k6)(function(o){return[(0,n.bF)(i,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"NEMO",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.NEMO),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"INSTRUCOD",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.INSTRUCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"GRADOCOD",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.GRADOCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"SECCIONCOD",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.SECCIONCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"NEMODES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.NEMODES),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"TIPCALC",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)("L"===o.row.TIPCALC?"Letras":"N"===o.row.TIPCALC?"Números":"-"),1),(0,n.bF)(l,{modelValue:o.row.TIPCALC,"onUpdate:modelValue":function(e){return o.row.TIPCALC=e},disable:!e.acceso,count:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:o.row.TIPCALC,"onUpdate:modelValue":function(e){return o.row.TIPCALC=e},type:"outlined",options:e.tipoCalCondu,val:"value",label:"label",placeholder:"Seleccione",onSelected:function(a){return e.editarTipoCalCondu(o.row)}},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"]),e.acceso?((0,n.uX)(),(0,n.Wv)(f,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(d,{fab:"",round:"",color:"secondary",icon:"cogs",onClick:o[1]||(o[1]=function(o){return e.openModal=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(o[6]||(o[6]=[(0,n.eW)("Actualización en bloque",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(C,{modelValue:e.openModal,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.openModal=o}),title:"Actualización en bloque",ok:"Procesar",onSubmit:e.actualizarBloque},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ao,[(0,n.Lk)("div",_o,[(0,n.bF)(p,{"error-label":e.$t("validaciones.requerido"),error:e.v$.form.INSTRUCOD.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.form.INSTRUCOD,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.INSTRUCOD=o}),type:"outlined",options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"Nivel",onSelected:e.getListaGrados},null,8,["modelValue","options","onSelected"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",To,[(0,n.bF)(p,{"error-label":e.$t("validaciones.requerido"),error:e.v$.form.GRADOCOD.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.form.GRADOCOD,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.GRADOCOD=o}),type:"outlined",options:e.grados,label:"GRADODES",val:"GRADOCOD",placeholder:"Grado"},null,8,["modelValue","options"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",Ro,[(0,n.bF)(p,{"error-label":e.$t("validaciones.requerido"),error:e.v$.form.TIPCALC.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.form.TIPCALC,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.form.TIPCALC=o}),type:"outlined",options:e.tipoCalCondu,val:"value",label:"label",placeholder:"Tipo Calificación"},null,8,["modelValue","options"])]}),_:1},8,["error-label","error"])])])]}),_:1},8,["modelValue","onSubmit"])])}var ho={setup:function(){var e=(0,Y.fG)();return{v$:e}},props:{acceso:{type:Boolean,required:!0}},components:{QTable:r.kH,QTr:r.qh,QTd:r.Ef,QPageSticky:r._U,QPopupEdit:r.GT,sieSelect:ee.A,sieModal:Z.A,sieInfo:ie["default"],notify:ne["default"],QBtn:r.Il,QTooltip:r.nC,QField:r.Om},data:function(){return{openModal:!1,niveles:[],grados:[],dataSalones:[],tipoCalCondu:[{label:"Letras",value:"L"},{label:"Números",value:"N"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100},columns:[{label:"CÓDIGO",name:"NEMO",field:"NEMO",align:"center"},{label:"N",name:"INSTRUCOD",field:"INSTRUCOD",align:"center"},{label:"G",name:"GRADOCOD",field:"GRADOCOD",align:"center"},{label:"S",name:"SECCIONCOD",field:"SECCIONCOD",align:"center"},{label:"DESCRIPCIÓN",name:"NEMODES",field:"NEMODES",align:"left"},{label:"TIPO CALIFICACIÓN CONDUCTA",name:"TIPCALC",field:"TIPCALC",align:"center"}],form:{ANO:(0,ie["default"])().ano,INSTRUCOD:"",GRADOCOD:"",TIPCALC:""}}},validations:{form:{INSTRUCOD:{required:ae.mw},GRADOCOD:{required:ae.mw},TIPCALC:{required:ae.mw}}},created:function(){this.init()},methods:{init:function(){this.obtenerSalones(),this.getListaNivel()},getListaNivel:function(){var e=this;this.$http.get("api/HyoInstrus/obtInstru").then(function(o){var a=o.json;a.unshift({INSTRUCOD:"T",INSTRUDES:"Todos",INSTRUANO:0}),e.niveles=a})},getListaGrados:function(){var e=this;"T"===this.form.INSTRUCOD?this.grados.push({GRADOCOD:"T",GRADODES:"Todos"}):this.$http.get("api/HyoGradoNivs/obtGrados").then(function(o){var a=o.json;e.grados=a.filter(function(o){return o.INSTRUCOD===e.form.INSTRUCOD}),e.grados.unshift({GRADOCOD:"T",GRADODES:"Todos"})})},obtenerSalones:function(){var e=this;this.$http.get("api/HyoSalones/getAll",{params:{columns:["NEMO","INSTRUCOD","GRADOCOD","SECCIONCOD","NEMODES","TIPCALC"]}}).then(function(o){e.dataSalones=o})},editarTipoCalCondu:function(e){var o=this,a={nemo:e.NEMO},n={tipcalc:e.TIPCALC};this.$http.post("api/HyoSalones/actualizarTipCal",{where:a,data:n}).then(function(e){(0,ne["default"])(e.json.message),o.obtenerSalones()})},actualizarBloque:function(){var e=this,o={ano:this.form.ANO},a={tipcalc:this.form.TIPCALC};"T"!==this.form.INSTRUCOD&&(o["INSTRUCOD"]=this.form.INSTRUCOD),"T"!==this.form.GRADOCOD&&(o["gradocod"]=this.form.GRADOCOD),this.v$.$touch(),this.v$.$invalid||this.$http.post("api/HyoSalones/actualizarTipCal",{where:o,data:a}).then(function(o){(0,ne["default"])(o.json.message),e.obtenerSalones()}).finally(function(){e.openModal=!1,e.limpiarForm()})},limpiarForm:function(){this.form={ANO:(0,ie["default"])().ano,INSTRUCOD:"",GRADOCOD:"",TIPCALC:""}}}};const Lo=(0,ue.A)(ho,[["render",So]]);var ko=Lo,Do={class:"scroll-y"},Vo={class:"row q-pa-sm"},Uo={class:"col-12"},Fo={class:"col-12"},wo={class:"col-12"},qo={class:"col-12"};function Go(e,o){var a=(0,n.g2)("q-td"),t=(0,n.g2)("sie-select"),l=(0,n.g2)("q-popup-edit"),i=(0,n.g2)("q-tr"),r=(0,n.g2)("q-table"),u=(0,n.g2)("q-collapsible"),d=(0,n.g2)("q-tooltip"),f=(0,n.g2)("q-btn"),p=(0,n.g2)("q-fab"),C=(0,n.g2)("q-page-sticky"),m=(0,n.g2)("q-field"),v=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",Do,[(0,n.bF)(u,{icon:"cog",label:"Configuración para obtener la Nota Anual",opened:""},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{data:e.dataSalonesProceso,columns:e.columnsProceso,pagination:e.pagination,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{body:(0,n.k6)(function(o){return[(0,n.bF)(i,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"INSTRUDES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.INSTRUDES),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"GRADODES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.GRADODES),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"TIPCALCOMP",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)("1"===o.row.TIPCALCOMP?"Calculado":"2"===o.row.TIPCALCOMP?"Copia Ult. Per.":"3"===o.row.TIPCALCOMP?"Digitado":"-"),1),(0,n.bF)(l,{modelValue:o.row.TIPCALCOMP,"onUpdate:modelValue":function(e){return o.row.TIPCALCOMP=e},disable:!e.acceso,count:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:o.row.TIPCALCOMP,"onUpdate:modelValue":function(e){return o.row.TIPCALCOMP=e},type:"outlined",options:e.opcAnualComp,val:"value",label:"label",placeholder:"Seleccione",onSelected:function(a){return e.actualizarParametro(o.row,"TIPCALCOMP")}},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"NF_CURSOS",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)("1"===o.row.NF_CURSOS?"Calculado x PB":"2"===o.row.NF_CURSOS?"Copia Ult. Per.":"3"===o.row.NF_CURSOS?"Digitado":"4"===o.row.NF_CURSOS?"Calculado x Comp":"-"),1),(0,n.bF)(l,{modelValue:o.row.NF_CURSOS,"onUpdate:modelValue":function(e){return o.row.NF_CURSOS=e},disable:!e.acceso,count:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:o.row.NF_CURSOS,"onUpdate:modelValue":function(e){return o.row.NF_CURSOS=e},type:"outlined",options:e.opcAnualAreas,val:"value",label:"label",placeholder:"Seleccione",onSelected:function(a){return e.actualizarParametro(o.row,"NF_CURSOS")}},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"NF_CONDUCTA",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)("1"===o.row.NF_CONDUCTA?"Calculado":"2"===o.row.NF_CONDUCTA?"Copia Ult. Per.":"3"===o.row.NF_CONDUCTA?"Digitado":"-"),1),(0,n.bF)(l,{modelValue:o.row.NF_CONDUCTA,"onUpdate:modelValue":function(e){return o.row.NF_CONDUCTA=e},disable:!e.acceso,count:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:o.row.NF_CONDUCTA,"onUpdate:modelValue":function(e){return o.row.NF_CONDUCTA=e},type:"outlined",options:e.opcAnualComp,val:"value",label:"label",placeholder:"Seleccione",onSelected:function(a){return e.actualizarParametro(o.row,"NF_CONDUCTA")}},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1}),(0,n.bF)(u,{icon:"cog",label:"Configuración de Áreas especiales para determinar la promoción de grado",opened:""},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{data:e.dataCursosCae,columns:e.columnsRepitencia,pagination:e.pagination,"onUpdate:pagination":o[1]||(o[1]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{body:(0,n.k6)(function(o){return[(0,n.bF)(i,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"INSTRUDES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.INSTRUDES),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"GRADODES",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.GRADODES),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"CURSONOM",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.CURSONOM),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"CAE",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,s.v_)(o.row.CAE),1),(0,n.bF)(l,{modelValue:o.row.CAE,"onUpdate:modelValue":function(e){return o.row.CAE=e},disable:!e.acceso,count:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:o.row.CAE,"onUpdate:modelValue":function(e){return o.row.CAE=e},type:"outlined",options:e.opcRepitentes,val:"value",label:"label",placeholder:"Seleccione",onSelected:function(a){return e.actualizarCae(o.row,"CAE")}},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1}),(0,n.bF)(C,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{fab:"",round:"",color:"secondary",icon:"file_excel",onClick:e.exportarReporte},{default:(0,n.k6)(function(){return[(0,n.bF)(d,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(o[8]||(o[8]=[(0,n.eW)("Exportar plantilla",-1)]))}),_:1})]}),_:1},8,["onClick"]),e.acceso?((0,n.uX)(),(0,n.Wv)(f,{key:0,fab:"",round:"",color:"secondary",icon:"cogs",onClick:o[2]||(o[2]=function(o){return e.openModal=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(d,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(o[9]||(o[9]=[(0,n.eW)("Actualización en bloque",-1)]))}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1})]}),_:1}),(0,n.bF)(v,{modelValue:e.openModal,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.openModal=o}),title:"Actualización en bloque",ok:"Guardar",onSubmit:e.actualizarParametroBloque,onShow:e.getListaNivel,onClose:e.limpiarForm},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Vo,[(0,n.Lk)("div",Uo,[(0,n.bF)(m,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formCae.INSTRUCOD.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.formCae.INSTRUCOD,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.formCae.INSTRUCOD=o}),type:"outlined",options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"Niveles",onBlur:e.v$.formCae.INSTRUCOD.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",Fo,[(0,n.bF)(t,{modelValue:e.formCae.TIPCALCOMP,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.formCae.TIPCALCOMP=o}),type:"outlined",options:e.opcAnualComp,label:"label",val:"value",placeholder:"Proceso Anual Competencias"},null,8,["modelValue","options"])]),(0,n.Lk)("div",wo,[(0,n.bF)(m,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formCae.NF_CURSOS.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.formCae.NF_CURSOS,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.formCae.NF_CURSOS=o}),type:"outlined",options:e.opcAnualAreas,label:"label",val:"value",placeholder:"Proceso Anual Áreas",onBlur:e.v$.formCae.NF_CURSOS.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])]),(0,n.Lk)("div",qo,[(0,n.bF)(m,{"error-label":e.$t("validaciones.requerido"),error:e.v$.formCae.NF_CONDUCTA.$error},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{modelValue:e.formCae.NF_CONDUCTA,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.formCae.NF_CONDUCTA=o}),type:"outlined",options:e.opcAnualComp,label:"label",val:"value",placeholder:"Proceso Conducta",onBlur:e.v$.formCae.NF_CONDUCTA.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error-label","error"])])])]}),_:1},8,["modelValue","onSubmit","onShow","onClose"])])}var yo={setup:function(){var e=(0,Y.fG)();return{v$:e}},props:{acceso:{type:Boolean,required:!0}},components:{QTable:r.kH,QTr:r.qh,QTd:r.Ef,QBtn:r.Il,Dialog:J.A,QPageSticky:r._U,QFab:r.l6,QFabAction:r.B$,QPopupEdit:r.GT,QCollapsible:r.eS,sieSelect:ee.A,sieModal:Z.A,sieInfo:ie["default"],notify:ne["default"],QTooltip:r.nC,QField:r.Om},data:function(){return{openModal:!1,opcAnualComp:[{label:"Ninguno",value:null},{label:"Calculado",value:1},{label:"Copia Ult. Per.",value:2},{label:"Digitado",value:3}],opcAnualAreas:[{label:"Ninguno",value:null},{label:"Calculado x PB",value:1},{label:"Copia Ult. Per.",value:2},{label:"Digitado",value:3},{label:"Calculado x Comp.",value:4}],opcRepitentes:[{label:"Ninguno",value:null},{label:"LM",value:"LM"},{label:"CI",value:"CI"},{label:"CA",value:"CA"},{label:"PS",value:"PS"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100},columnsProceso:[{label:"NIVEL",name:"INSTRUDES",field:"INSTRUDES",align:"left"},{label:"GRADO",name:"GRADODES",field:"GRADODES",align:"left"},{label:"PROCESO ANUAL COMPETENCIA",name:"TIPCALCOMP",field:"TIPCALCOMP",align:"center"},{label:"PROCESO ANUAL ÁREA",name:"NF_CURSOS",field:"NF_CURSOS",align:"center"},{label:"PROCESO ANUAL CONDUCTA",name:"NF_CONDUCTA",field:"NF_CONDUCTA",align:"center"}],columnsRepitencia:[{label:"NIVEL",name:"INSTRUDES",field:"INSTRUDES",align:"left"},{label:"GRADO",name:"GRADODES",field:"GRADODES",align:"left"},{label:"ÁREA",name:"CURSONOM",field:"CURSONOM",align:"left"},{label:"MINISTERIO",name:"CAE",field:"CAE",align:"left"}],niveles:[],dataSalonesProceso:[],dataCursosCae:[],formCae:{INSTRUCOD:"",NF_CONDUCTA:"",NF_CURSOS:"",TIPCALCOMP:""}}},validations:{formCae:{INSTRUCOD:{required:ae.mw},NF_CONDUCTA:{required:ae.mw},NF_CURSOS:{required:ae.mw}}},methods:{init:function(){this.obtenerSalonesCae(),this.obtenerCursosRepitentesCae()},getListaNivel:function(){var e=this;this.$http.get("api/HyoInstrus/obtInstru").then(function(o){var a=o.json;a.unshift({INSTRUCOD:"T",INSTRUDES:"Todos",INSTRUANO:0}),e.niveles=a})},obtenerSalonesCae:function(){var e=this;this.$http.get("api/HyoSalones/listarSalonesCAE").then(function(o){e.dataSalonesProceso=o.json})},obtenerCursosRepitentesCae:function(){var e=this;this.$http.get("api/Hyocurgra/listadoRepitentesCAE").then(function(o){e.dataCursosCae=o.json})},actualizarParametro:function(e,o){var a=this,n={INSTRUCOD:e.INSTRUCOD,GRADOCOD:e.GRADOCOD},t={campo:o,valor:e[o]};this.$http.post("api/HyoSalones/actualizarCampo",{data:t,where:n}).then(function(e){(0,ne["default"])(e.json.message)}).finally(function(){a.obtenerSalonesCae()})},actualizarParametroBloque:function(){var e=this;this.v$.$touch(),this.v$.$invalid||this.$http.post("api/HyoSalones/actualizarCampoBloque",{data:this.formCae}).then(function(e){(0,ne["default"])(e.json.message)}).then(function(){e.openModal=!1}).finally(function(){e.obtenerSalonesCae()})},actualizarCae:function(e){var o={INSTRUCOD:e.INSTRUCOD,GRADOCOD:e.GRADOCOD,CURSOCOD:e.CURSOCOD},a={cae:e.CAE};this.$http.post("api/Hyocurgra/actualizarCae",{data:a,where:o}).then(function(e){(0,ne["default"])(e.json.message)})},limpiarForm:function(){this.formCae={INSTRUCOD:"",NF_CONDUCTA:"",NF_CURSOS:""}},exportarReporte:function(){var e="/academico/proceso-calculo-de-notas-anuales/exportar?sie-token="+(0,ie["default"])().token;window.open(e,"_blank")}},created:function(){this.init()}};const Mo=(0,ue.A)(yo,[["render",Go]]);var Po=Mo,$o={class:"column"},Bo={class:"col"},Qo={class:"q-px-sm"};function Wo(e,o){var a=(0,n.g2)("sie-upload"),t=(0,n.g2)("q-toggle");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",$o,[(0,n.Lk)("div",Bo,[(0,n.bF)(a,{onUpload:e.upload,name:!0,title:"Clic para subir las firmas",allow:["jpg"],preview:!1,multiple:0===e.data.isDirector||0===e.data.isWithSello},null,8,["onUpload","multiple"])]),(0,n.Lk)("div",Qo,[(0,n.bF)(t,{modelValue:e.data.isDirector,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.data.isDirector=o}),label:"¿Es firma del director(a)?","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"]),(0,n.bF)(t,{class:"q-mx-sm",modelValue:e.data.isCoordinador,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.data.isCoordinador=o}),label:"¿Es firma de coordinador(a)?","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"]),(0,n.bF)(t,{class:"q-mx-sm",modelValue:e.data.isWithSello,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.data.isWithSello=o}),label:"¿Tiene sello? (se mostrará centrado)","left-label":"","true-value":1,"false-value":0},null,8,["modelValue"])])])])}a(56285),a(90095),a(52776),a(84433),a(13715);var xo=a(59089),jo=a(33950),Ho={props:{acceso:{type:Boolean,required:!0}},components:{QCard:r.C$,QPopover:r.VM,QInnerLoading:r.SQ,QSpinnerOval:r.VA,QPageSticky:r._U,QDialog:r.OQ,QToggle:r.c5,QFab:r.l6,QFabAction:r.B$,QAlert:r.ex,Dialog:J.A,sieUpload:xo.A,sieVacio:K.A,sieModal:Z.A,Upload:jo["default"],notify:ne["default"]},data:function(){return{openModal:!1,loadBtn:!1,data:{isDirector:0,isWithSello:0,isCoordinador:0,firmas:[]}}},methods:{clean:function(){this.data.firmas=[]},validate:function(e){var o;return o=1===this.data.isDirector?/[firma_direct].jpg/:1===this.data.isCoordinador?/coord_[a-z]{1}.jpg/:1===this.data.isWithSello?/[sello]([0-9]{1})?.jpg/:/\d{6,8}.jpg/,o.test(e)},upload:function(e){var o=this,a=e.length;e.forEach(function(e){var n=e.name;o.validate(n)?(o.clean(),(0,jo["default"])({file:e}).then(function(e){var a=e.name;o.data.firmas.push({name:n,temp:a})}).then(function(){a===o.data.firmas.length&&o.$q.dialog({title:"¿Desea subir las firmas?",ok:"SI",cancel:"NO"}).onOk(function(){o.$http.post("api/HyoLibreta/subirFirmas",o.data).then(function(e){(0,ne["default"])(e.json.message,"success")}).catch(function(e){(0,ne["default"])(e.error.message,"error")}).finally(function(){o.clean()})})}).catch(function(e){console.log(e)})):(0,ne["default"])("El nombre y/o el formato de la imagen ".concat(n," no es correcta"),"error")})}}};const Xo=(0,ue.A)(Ho,[["render",Wo]]);var zo=Xo,Yo={components:{listaCotejo:Io,QTable:r.kH,QTr:r.qh,QTd:r.Ef,QTabs:r.uw,QTab:r.zu,QTabPane:r.dg,sieInfo:ie["default"],libretas:se,notas:ge,notasfull:eo,conducta:ko,equivalencia:Ye,sieModal:Z.A,cae:Po,firmas:zo,QPage:r.Tu},data:function(){return{pagination:null,titulo_nivel:null,nivelLC:[],columnsNivelLC:[{label:"Nivel de desempeño",name:"TITULO_NIVEL",field:"TITULO_NIVEL",align:"center"},{name:"ACCIONES",style:"width: 150px",label:"Acciones",align:"center"}],modalNivelLC:!1,acceso:(0,ie["default"])().ruta.nivel>=2,isStart:"start"===(0,ie["default"])().sistema}},methods:{},created:function(){}};const Jo=(0,ue.A)(Yo,[["render",i]]);var Ko=Jo}}]);