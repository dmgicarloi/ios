"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[77637],{77637:function(e,r,n){n.r(r),n.d(r,{default:function(){return q}});var t=n(61758),a={class:"row"},i={class:"col-12 sie-flat"},o={class:"row q-ma-sm"},l={class:"col-12 q-pa-md"},s={class:"col-12 q-pa-md"};function u(e,r){var n=this,u=(0,t.g2)("header-btn"),c=(0,t.g2)("sie-table"),d=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-card"),m=(0,t.g2)("q-input"),p=(0,t.g2)("q-field"),g=(0,t.g2)("sie-modal"),h=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(h,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(f,null,{default:(0,t.k6)(function(){return[(0,t.bF)(u,{name:"Mantenimiento de Perfiles",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",a,[(0,t.Lk)("div",i,[(0,t.bF)(c,{class:"q-ma-none",data:e.rows,columns:e.fields,config:e.config,context:n,css:{height:"71vh"},onRowSelected:e.rowSelectDetalle},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,t.bF)(g,{modelValue:e.openModalAgregar,"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.openModalAgregar=r}),escClick:!0,esc:!0,title:e.title,ok:"Agregar",onSubmit:e.grabar,icon_ok:"check"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.Lk)("div",l,[(0,t.bF)(p,{error:e.v$.form.TIPCOD.$error,"error-label":"Campo requerido"},{default:(0,t.k6)(function(){return[(0,t.bF)(m,{modelValue:e.form.TIPCOD,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.form.TIPCOD=r}),outlined:"",label:"Código (1 Letra)",maxlength:"1"},null,8,["modelValue"])]}),_:1},8,["error"])]),(0,t.Lk)("div",s,[(0,t.bF)(p,{error:e.v$.form.TIPNOM.$error,"error-label":"Campo requerido"},{default:(0,t.k6)(function(){return[(0,t.bF)(m,{modelValue:e.form.TIPNOM,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.form.TIPNOM=r}),label:"Descripcion"},null,8,["modelValue"])]}),_:1},8,["error"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var c=n(57008),d=n.n(c),f=n(76080),m=n.n(f),p=n(45254),g=n.n(p),h=n(83972),v=n(6123),b=n(30545),w=n(9736),T=n(53380),O=n(33777),I=n(82640),C=n(2819),P={data:function(){var e=this;return{config:{TIPNOM:{component:"input",edit:!0,autoFocus:!0,input:function(r,n){e.setDescripcion(r,n)}},ACTION:{component:"button",icon:["delete as eliminar"],tooltip:{eliminar:"Eliminar"},eliminar:function(e){var r=this;this.$confirm("¿Está seguro de eliminar este registro? ¡El Proceso es irreversible!","delete").onOk(g()(m()().m(function n(){return m()().w(function(n){while(1)switch(n.n){case 0:r.eliminarRegistro(e);case 1:return n.a(2)}},n)})))},permisos:{eliminar:"===3"},flat:!0,dense:!0,color:"primary"}},rows:[],fields:[{sortable:!0,name:"TIPCOD",label:"Código",field:"TIPCOD",align:"center"},{sortable:!0,name:"TIPNOM",label:"Descripción",field:"TIPNOM",align:"center"},{name:"ACTION",label:"",field:"ACTION",align:"center"}]}}},D=n(982),k=n(30640),M=n(80660),A=n(57668),S={setup:function(){var e=(0,h.fG)();return{v$:e}},mixins:[P],components:{sieModal:k.A,sieTable:O.A,QTable:b.A,QInput:w.A,QSeparator:T.A,QPage:v.Tu,QCard:v.C$,QField:v.Om},data:function(){var e=this;return{sie:(0,A["default"])(),form:{TIPCOD:null,TIPNOM:null},title:"Agregar Nuevo Perfil",openModalAgregar:!1,buttons:[{icon:"addcircle",label:"Agregar",tooltip:"Agregar Perfil",click:function(){var r=g()(m()().m(function r(){return m()().w(function(r){while(1)switch(r.n){case 0:e.openModalAgregar=!0,e.clearForm(),e.v$.form.$reset();case 1:return r.a(2)}},r)}));function n(){return r.apply(this,arguments)}return n}()},{icon:"print",label:"Imprimir",tooltip:"Imprimir",click:function(){(0,C.exportFilePhp)(null,"medico/seguridad-mant-perfiles/reporte")}}],rowSelectedDetalle:{}}},methods:{eliminarRegistro:function(e){var r=this;return g()(m()().m(function n(){var t,a,i;return m()().w(function(n){while(1)switch(n.p=n.n){case 0:return t={siscod:e.SISCOD,tipcod:e.TIPCOD},n.p=1,n.n=2,M.$http.delete("api/TipUsuController/deleteTipUsu",{params:{params:d()({},t)}});case 2:a=n.v,(0,D["default"])(a.message,"success"),r.getData(),n.n=4;break;case 3:n.p=3,i=n.v,(0,D["default"])(i.message,"warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},clearForm:function(){this.form.TIPCOD="",this.form.TIPNOM=""},setDescripcion:function(e,r){var n=this;return g()(m()().m(function e(){var t,a,i,o;return m()().w(function(e){while(1)switch(e.p=e.n){case 0:if(t={siscod:"05"},t.tipcod=r.TIPCOD,n.rowSelectedDetalle.TIPNOM===r.TIPNOM){e.n=4;break}return a={SISCOD:"05",TIPCOD:r.TIPCOD,TIPNOM:r.TIPNOM,ESTADO:null,MOSTRAR:null},e.p=1,e.n=2,M.$http.post("api/TipUsuController/updateTipUsu",{params:d()({},a),id:t});case 2:i=e.v,(0,D["default"])(i.message,"success"),n.getData(),e.n=4;break;case 3:e.p=3,o=e.v,(0,D["default"])(o.message,"warning");case 4:return e.a(2)}},e,null,[[1,3]])}))()},grabar:function(e){var r=this;return g()(m()().m(function e(){var n,t,a;return m()().w(function(e){while(1)switch(e.p=e.n){case 0:if(r.v$.form.$touch(),!r.v$.form.$error){e.n=1;break}return(0,D["default"])("Complete los campos requeridos","warning"),e.a(2,0);case 1:return n=d()({},r.form),n.SISCOD="05",e.p=2,e.n=3,M.$http.post("api/TipUsuController/addTipUsu",{params:d()({},n)});case 3:t=e.v,(0,D["default"])(t.message,"success"),r.openModalAgregar=!1,r.getData(),e.n=5;break;case 4:e.p=4,a=e.v,(0,D["default"])(a.message,"warning");case 5:return e.a(2)}},e,null,[[2,4]])}))()},rowSelectDetalle:function(e){this.rowSelectedDetalle=e},getData:function(){var e=this;return g()(m()().m(function r(){return m()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,M.$http.get("api/TipUsuController/getTipUsu",{params:{params:{siscod:"05"}}});case 1:e.rows=r.v;case 2:return r.a(2)}},r)}))()}},computed:{permiso:function(){return this.sie.ruta.nivel}},validations:function(){var e={form:{TIPCOD:{required:I.mw,maxLength:(0,I.Ru)(1)},TIPNOM:{required:I.mw}}};return e},created:function(){var e=this;return g()(m()().m(function r(){return m()().w(function(r){while(1)switch(r.n){case 0:e.getData();case 1:return r.a(2)}},r)}))()}},N=n(12807);const $=(0,N.A)(S,[["render",u]]);var q=$}}]);