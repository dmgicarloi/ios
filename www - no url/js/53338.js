"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[53338],{53338:function(e,n,a){a.r(n),a.d(n,{default:function(){return te}});a(71225),a(50310),a(5962),a(83190);var r=a(61758),t=a(58790),s={class:"q-px-md"},o={class:"flex justify-between items-center"},i={class:"q-title q-my-xs text-bold text-primary"},l={class:"col-xs-12 col-sm-12 col-lg-12"},c={class:"row"},u={class:"col-xs-12 col-sm-4 q-pa-xs"},d={class:"col-xs-12 col-sm-4 q-pa-xs"},f={class:"col-xs-12 col-sm-4 q-pa-xs"},m={class:"flex justify-left"},h={class:"tabs-container"};function p(e,n){var a=this,p=(0,r.g2)("q-btn"),g=(0,r.g2)("q-card-section"),P=(0,r.g2)("q-separator"),b=(0,r.g2)("q-card"),w=(0,r.g2)("q-select"),A=(0,r.g2)("q-input"),S=(0,r.g2)("listar-sedes"),v=(0,r.g2)("sie-modal"),E=(0,r.g2)("sie-table"),C=(0,r.g2)("q-tab"),F=(0,r.g2)("q-tabs"),O=(0,r.g2)("etapas-admision"),D=(0,r.g2)("tabla-deudas-persona"),N=(0,r.g2)("tabla-pagos-persona"),R=(0,r.g2)("datos-ficha-resumen"),I=(0,r.g2)("familiares-seguimiento");return(0,r.uX)(),(0,r.Wv)(b,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",s,[n[5]||(n[5]=(0,r.Lk)("div",{class:"row items-center no-wrap"},null,-1)),(0,r.Lk)("div",o,[(0,r.Lk)("span",i,(0,t.v_)(e.pageHeader.title),1),(0,r.bF)(g,null,{default:(0,r.k6)(function(){return[e.manejaSedes?((0,r.uX)(),(0,r.Wv)(p,{key:0,class:"q-mr-sm",icon:"add_location",color:"primary",label:"Sedes",size:"sm",onClick:e.verSedes},null,8,["onClick"])):(0,r.Q3)("v-if",!0),(0,r.bF)(p,{class:"q-mr-sm",icon:"file_excel",color:"primary",label:"Exportar Excel",size:"sm",onClick:e.generarExcelResumen},null,8,["onClick"])]}),_:1})])]),(0,r.bF)(P),(0,r.bF)(g,null,{default:(0,r.k6)(function(){return[(0,r.bF)(b),(0,r.Lk)("div",l,[(0,r.Lk)("div",c,[(0,r.Lk)("div",u,[(0,r.bF)(w,{modelValue:e.filter.selectAnio,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.filter.selectAnio=n}),"option-value":"value","option-label":"label",options:e.anios,label:"Año",onInput:e.getPersonas},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",d,[(0,r.bF)(w,{modelValue:e.filter.selectGrado,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.filter.selectGrado=n}),"option-value":"ID_GRADO","option-label":"NIVEL_GRADO",options:e.grados,label:"Grado",onInput:e.getPersonas},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",f,[(0,r.bF)(A,{modelValue:e.filter.nombre,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.filter.nombre=n}),label:"Nombre"},null,8,["modelValue"])])])])]}),_:1}),(0,r.bF)(v,{title:e.modalSedes.titulo,modelValue:e.modalSedes.open,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modalSedes.open=n}),onSubmit:e.seleccionarSedes},{default:(0,r.k6)(function(){return[(0,r.bF)(g,{class:"full-width"},{default:(0,r.k6)(function(){return[(0,r.bF)(S,{ref:"listaSedes",selected:e.modalSedes.selected},null,8,["selected"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,r.bF)(g,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",m,[(0,r.bF)(E,{class:"q-mt-sm",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 220px); max-width: 30%; width: 100%; margin: 0;",context:a,showSearch:!1,columns:e.defColumns,data:e.personasFiltered,config:e.defConfig,"show-refresh":!0,"show-index":!0,selection:"single",onRefresh:e.getPersonas,onRowSelected:e.personaFueSeleccionado},null,8,["columns","data","config","onRefresh","onRowSelected"]),(0,r.Lk)("div",h,[(0,r.bF)(F,{class:"q-pb-sm tabs q-caption",modelValue:e.selectedTab,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.selectedTab=n}),"active-color":"primary",align:"justify"},{default:(0,r.k6)(function(){return[(0,r.bF)(C,{name:"etapa",label:"Etapa"}),(0,r.bF)(C,{name:"deudasPago",label:"Deudas / Pago"}),(0,r.bF)(C,{name:"informaciónGeneral",label:"Información General"})]}),_:1},8,["modelValue"]),"etapa"===e.selectedTab&&e.renderEtapas?((0,r.uX)(),(0,r.Wv)(O,{key:0,idPersona:e.rowSelected.ID_PERSONA},null,8,["idPersona"])):(0,r.Q3)("v-if",!0),"deudasPago"===e.selectedTab&&e.renderDeudas&&e.renderPagos?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[n[6]||(n[6]=(0,r.Lk)("span",{class:"subtitulo"},"Deudas:",-1)),(0,r.bF)(D,{idPersona:e.rowSelected.ID_PERSONA},null,8,["idPersona"]),n[7]||(n[7]=(0,r.Lk)("div",{class:"q-pt-xl"},null,-1)),n[8]||(n[8]=(0,r.Lk)("span",{class:"subtitulo"},"Pagos:",-1)),(0,r.bF)(N,{idPersona:e.rowSelected.ID_PERSONA},null,8,["idPersona"])],64)):(0,r.Q3)("v-if",!0),"informaciónGeneral"===e.selectedTab&&e.renderResumen&&e.renderFamiliares?((0,r.uX)(),(0,r.CE)(r.FK,{key:2},[n[9]||(n[9]=(0,r.Lk)("span",{class:"subtitulo"},"Resumen:",-1)),(0,r.bF)(R,{idPersona:e.rowSelected.ID_PERSONA},null,8,["idPersona"]),n[10]||(n[10]=(0,r.Lk)("div",{class:"q-pt-xl"},null,-1)),n[11]||(n[11]=(0,r.Lk)("span",{class:"subtitulo"},"Contacto:",-1)),(0,r.bF)(I,{idPersona:e.rowSelected.ID_PERSONA,stylesProp:"width: 100%; margin: 0;"},null,8,["idPersona"])],64)):(0,r.Q3)("v-if",!0)])])]}),_:1})]}),_:1})}var g=a(76080),P=a.n(g),b=a(45254),w=a.n(b),A=(a(30683),a(39866),a(52133),a(6724),a(62692),a(6123)),S=a(88567),v=a(95718),E=a(53380),C=a(2652),F=a(54489),O=a(33777),D=a(26697),N=a(53093),R=a(64208),I=a(41615),x=(a(57668),{data:function(){return{defColumns:[],defConfig:{}}},methods:{setDefColumns:function(){this.defColumns=[{name:"NOMCOMP",label:"Nombre",align:"left",field:"NOMCOMP"}],this.defConfig={flat:!0,round:!0,color:"primary"}}}}),_=a(85146),k={class:"q-px-md q-pt-md"};function M(e,n){var a=(0,r.g2)("sie-table");return(0,r.uX)(),(0,r.CE)("div",k,[(0,r.bF)(a,{dense:"",flat:"",bordered:"","wrap-cells":"",css:"width: 100%; margin: 0;",data:e.dataDeudasPersona,context:this,columns:e.columnsDeudasPersona,config:e.configDeudasPersona,"show-search":!1,"show-refresh":!0,"show-index":!1,onRefresh:e.getDeudasPersona},null,8,["data","columns","config","onRefresh"])])}a(11777);var T=a(11654),Q={data:function(){return{columnsDeudasPersona:[],dataDeudasPersona:[],configDeudasPersona:{}}},methods:{setColumnsDeudasPersona:function(){this.columnsDeudasPersona=[{name:"CONDES",label:"Concepto",align:"left",field:"CONDES"},{name:"MONTOCOB",label:"Monto",align:"center",field:"MONTOCOB"},{name:"FECEMI",label:"Fecha Emision",align:"center",field:"FECEMI"},{name:"FECVEN",label:"Fecha Vencimiento",align:"center",field:"FECVEN"},{name:"MONTODES",label:"Saldo",align:"left",field:"MONTODES"}],this.configDeudasPersona={flat:!0,round:!0,color:"primary",FECEMI:{component:"date",edit:!1},FECVEN:{component:"date",edit:!1}}}}},q={components:{QCard:S.A,QCardSection:v.A,QSeparator:E.A,SieTable:O.A,QInput:R.A,QSelect:F.S,QBtn:T.A,QTabs:D.A,QTab:N.A},mixins:[Q],props:{idPersona:{type:Number,default:null}},data:function(){return{}},methods:{getDeudasPersona:function(){var e=this;return w()(P()().m(function n(){var a,r,t;return P()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a={ID_PERSONA:e.idPersona,ID_PERFIL:"2"},n.n=1,e.$http.get("api/CobroController/getDeudasPersonaAdmision/",{params:{params:a}});case 1:return r=n.v,e.dataDeudasPersona=r,n.a(2,r);case 2:n.p=2,t=n.v,e.$alert(t.error?t.error.message:t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},beforeMount:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:e.setColumnsDeudasPersona(),e.idPersona&&e.getDeudasPersona();case 1:return n.a(2)}},n)}))()}},L=a(12807);const G=(0,L.A)(q,[["render",M]]);var y=G,V={class:"q-px-md q-pt-md"};function $(e,n){var a=(0,r.g2)("sie-table");return(0,r.uX)(),(0,r.CE)("div",V,[(0,r.bF)(a,{dense:"",flat:"",bordered:"","wrap-cells":"",css:"width: 100%; margin: 0;",data:e.dataPagosPersona,context:this,columns:e.columnsPagosPersona,config:e.configPagosPersona,"show-search":!1,"show-refresh":!0,"show-index":!1,onRowSelected:e.getPagosPersona},null,8,["data","columns","config","onRowSelected"])])}var U={data:function(){return{columnsPagosPersona:[],dataPagosPersona:[],configPagosPersona:{}}},methods:{setColumnsPagosPersona:function(){this.columnsPagosPersona=[{name:"CONDES",label:"Concepto",align:"left",field:"CONDES"},{name:"MONTOCOB",label:"Monto Cobro",align:"center",field:"MONTOCOB"},{name:"MONTOPAG",label:"Monto Pago",align:"center",field:"MONTOPAG"},{name:"NUMTAL",label:"Num. Talonario",align:"center",field:"NUMTAL"},{name:"NUMPAG",label:"Num. Pago",align:"left",field:"NUMPAG"},{name:"FECPAG",label:"Fecha Pago",align:"center",field:"FECPAG"},{name:"MONSIG",label:"Moneda",align:"center",field:"MONSIG"}],this.configPagosPersona={flat:!0,round:!0,color:"primary",FECPAG:{component:"date",edit:!1}}}}},B={components:{QCard:S.A,QCardSection:v.A,QSeparator:E.A,SieTable:O.A,QInput:R.A,QSelect:F.S,QBtn:T.A,QTabs:D.A,QTab:N.A},mixins:[U],props:{idPersona:{type:Number,default:null}},data:function(){return{}},methods:{getPagosPersona:function(){var e=this;return w()(P()().m(function n(){var a,r,t;return P()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a={ID_PERSONA:e.idPersona,ID_PERFIL:"2"},n.n=1,e.$http.get("api/PagoController/getPagosPersonaAdmision/",{params:{params:a}});case 1:return r=n.v,e.dataPagosPersona=r,n.a(2,r);case 2:n.p=2,t=n.v,e.$alert(t.error?t.error.message:t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},beforeMount:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:e.setColumnsPagosPersona(),e.idPersona&&e.getPagosPersona();case 1:return n.a(2)}},n)}))()}};const j=(0,L.A)(B,[["render",$]]);var X=j,H={class:"q-px-md q-pt-md"};function J(e,n){var a=(0,r.g2)("sie-table");return(0,r.uX)(),(0,r.CE)("div",H,[(0,r.bF)(a,{class:"q-mt-sm",dense:"",flat:"",bordered:"","wrap-cells":"",css:"width: 100%; margin: 0;",context:this,showSearch:!1,columns:e.columnsFicha,data:e.dataFicha,config:e.configFicha,"show-refresh":!0,"show-index":!0,onRefresh:e.getFicha},null,8,["columns","data","config","onRefresh"])])}var W={data:function(){return{columnsFicha:[],dataFicha:[],configFicha:{}}},methods:{setColumnsFicha:function(){this.columnsFicha=[{name:"SEDE",label:"Sede",align:"left",field:"SEDE"},{name:"ANIO",label:"Año",align:"left",field:"ANIO"},{name:"NIVEL_GRADO",label:"Grado",align:"left",field:"NIVEL_GRADO"},{name:"NOMBRE_CONDICION",label:"Condición",align:"left",field:"NOMBRE_CONDICION"},{name:"ESTADO_POSTULACION",label:"Estado",align:"left",field:"ESTADO_POSTULACION"}],this.configFicha={flat:!0,round:!0,color:"primary",ID_REFPER:{renderHtml:function(e){return"<span>".concat(I["default"].REFERENCIA_FAMILIAR[e.ID_REFPER],"</span>")}},ES_RESPONSABLE:{renderHtml:function(e){return"<span>".concat(e.ES_RESPONSABLE?"Sí":"","</span>")}}}}}},z={components:{QCard:S.A,QCardSection:v.A,QSeparator:E.A,SieTable:O.A,QInput:R.A,QSelect:F.S,QBtn:T.A,QTabs:D.A,QTab:N.A},mixins:[W],props:{idPersona:{type:Number,default:null}},data:function(){return{}},methods:{getFicha:function(){var e=this;return w()(P()().m(function n(){var a,r,t;return P()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a={ID_PERSONA:e.idPersona},n.n=1,e.$http.get("api/PostulacionController/getFichaResumen",{params:{params:a}});case 1:return r=n.v,e.dataFicha=r,n.a(2,r);case 2:n.p=2,t=n.v,e.$alert(t.error?t.error.message:t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},beforeMount:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:e.setColumnsFicha(),e.idPersona&&e.getFicha();case 1:return n.a(2)}},n)}))()}};const K=(0,L.A)(z,[["render",J]]);var Y=K,Z=a(39319),ee=a(40714),ne=a(7968),ae={components:{QPageHeader:C.A,QSeparator:E.A,QCard:S.A,QCardSection:v.A,QSelect:F.S,SieTable:O.A,QTabs:D.A,QTab:N.A,QInput:R.A,etapasAdmision:_.A,tablaDeudasPersona:y,tablaPagosPersona:X,datosFichaResumen:Y,familiaresSeguimiento:Z.A,listarSedes:ne.A,QBtn:A.Il},mixins:[x,ee.A],data:function(){return{anios:[],grados:[],sedes:[],personas:[],selectedTab:"etapa",filter:{selectAnio:String(I["default"].CURRENT_YEAR),selectGrado:"",selectSede:"",nombre:""},pageHeader:{title:"Resumen Admisión",botones:[]},rowSelected:{},renderEtapas:!0,renderDeudas:!0,renderPagos:!0,renderFamiliares:!0,renderResumen:!0,manejaSedes:!1,modalSedes:{open:!1,titulo:"Seleccionar Sedes",selected:[]},modalProcSedes:{open:!1,titulo:"",id_grado:0},botonesForm:[]}},methods:{isSedes:function(){var e=this;return w()(P()().m(function n(){var a;return P()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getConstantesAdmision(["AD_MANEJA_SEDES"]);case 1:a=n.v,e.manejaSedes=a.AD_MANEJA_SEDES;case 2:return n.a(2)}},n)}))()},verSedes:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:e.modalSedes.open=!0;case 1:return n.a(2)}},n)}))()},seleccionarSedes:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:e.modalSedes.selected=e.$refs.listaSedes.$refs.grid.selected,e.modalSedes.open=!1,e.getPersonas();case 1:return n.a(2)}},n)}))()},getAnios:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,I["default"].API_ANIOS();case 1:e.anios=n.v;case 2:return n.a(2)}},n)}))()},getGrados:function(){var e=this;return w()(P()().m(function n(){var a;return P()().w(function(n){while(1)switch(n.n){case 0:return a={order:[{sidx:"anio",sord:"desc"},{sidx:"nivel",sord:"asc"},{sidx:"grado",sord:"asc"}],anio:e.filter.selectAnio},n.n=1,e.$http.get("api/PostulacionController/getGrados",{params:{params:a}});case 1:e.grados=n.v;case 2:return n.a(2)}},n)}))()},generarExcelResumen:function(){var e=this;return w()(P()().m(function n(){var a,r,t;return P()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,e.$q.loading.show(),n.n=1,e.$http.post("api/PostulacionController/postExportarResumenAdmsion",{params:{anoadm:e.filter.selectAnio}});case 1:if(a=n.v,!a.ruta){n.n=3;break}return r='{"name":"'.concat(a.filename,'","ruta":"').concat(a.ruta,'","tipo":"xlsx"}'),n.n=2,I["default"].DESCARGAR_ARCHIVO(r);case 2:e.$notify("Archivo descargado satisfactoriamente","success");case 3:n.n=5;break;case 4:n.p=4,t=n.v,e.$notify(t.error?t.error.message:t.message,"warning");case 5:return n.p=5,e.$q.loading.hide(),n.f(5);case 6:return n.a(2)}},n,null,[[0,4,5,6]])}))()},getPersonas:function(){var e=this;return w()(P()().m(function n(){var a,r,t;return P()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a={order:[{sidx:"F.NOMCOMP",sord:"asc"}],anoadm:e.filter.selectAnio,id_grado:e.filter.selectGrado,postulantesActivos:"true",campos:["F.ID_FICHA","F.ID_FLUJO","F.NOMCOMP","F.ID_PERSONA","F.ID_GRADO"],manejaSedes:e.manejaSedes,sedes:e.modalSedes.selected.map(function(e){return e.EMPCOD})},n.n=1,e.$http.get("api/PostulacionController/getFamiliaAdmision",{params:{params:a}});case 1:return r=n.v,e.personas=r,n.a(2,r);case 2:n.p=2,t=n.v,e.$alert(t.error?t.error.message:t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},refreshEtapas:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return e.renderEtapas=!1,n.n=1,e.$nextTick();case 1:e.renderEtapas=!0;case 2:return n.a(2)}},n)}))()},refreshDeudas:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return e.renderDeudas=!1,n.n=1,e.$nextTick();case 1:e.renderDeudas=!0;case 2:return n.a(2)}},n)}))()},refreshPagos:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return e.renderPagos=!1,n.n=1,e.$nextTick();case 1:e.renderPagos=!0;case 2:return n.a(2)}},n)}))()},refreshFamiliares:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return e.renderFamiliares=!1,n.n=1,e.$nextTick();case 1:e.renderFamiliares=!0;case 2:return n.a(2)}},n)}))()},refreshResumen:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return e.renderResumen=!1,n.n=1,e.$nextTick();case 1:e.renderResumen=!0;case 2:return n.a(2)}},n)}))()},refreshTabs:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:e.refreshEtapas(),e.refreshDeudas(),e.refreshPagos(),e.refreshFamiliares(),e.refreshResumen();case 1:return n.a(2)}},n)}))()},personaFueSeleccionado:function(e){var n=this;return w()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return n.rowSelected=e,a.n=1,n.refreshTabs();case 1:return a.a(2)}},a)}))()},getInfoGeneralPersona:function(){return w()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()}},computed:{personasFiltered:function(){var e=this;return this.filter.nombre?this.personas.filter(function(n){return n.NOMCOMP.includes(e.filter.nombre)}):this.personas}},beforeMount:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getAnios();case 1:return n.n=2,e.getGrados();case 2:return n.n=3,e.getPersonas();case 3:return n.n=4,e.setDefColumns();case 4:return n.a(2)}},n)}))()},created:function(){var e=this;return w()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.isSedes();case 1:return n.a(2)}},n)}))()}};const re=(0,L.A)(ae,[["render",p]]);var te=re}}]);