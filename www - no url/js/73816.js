"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[73816],{73816:function(a,o,e){e.r(o),e.d(o,{default:function(){return ea}});var l=e(61758),n=e(58790),t={class:"bg-white"},i={key:0,class:"row"},r={class:"col-2"},s={class:"col"},u={class:"col"},c={class:"sie-select-general espacio_1"},m={key:1,class:"row q-px-sm q-pt-sm"},d={class:"col"},f={key:0,class:"col-xs-3"},p={class:"col-xs-3"},A={class:"row"},v={class:"col-xs-12 col-sm-6 col-md-5 row justify-around"},O={class:"col-xs-12 col-sm-6 col-md-5"},b={key:0},h={key:1},S={key:0,class:"q-pb-md text-bold text-primary"},C={class:"row"},g={class:"col-xs-12 col-sm-12 col-md-5"},y={class:"col-xs-12 col-sm-12 col-md-7"},F={class:"row"},E={class:"col"},N={class:"row"},L={class:"row"},D={class:"col-xs-12 col-sm-6 col-md-5"},k={class:"col-xs-12 col-sm-3 col-md-3"},M={class:"row"},V={class:"col-xs-12 col-sm-6 col-md-6"};function I(a,o){var e=(0,l.g2)("q-toggle"),I=(0,l.g2)("sie-salones"),$=(0,l.g2)("sie-select"),U=(0,l.g2)("q-input"),w=(0,l.g2)("q-select"),_=(0,l.g2)("sie-vacio"),T=(0,l.g2)("sie-usuario"),P=(0,l.g2)("q-icon"),q=(0,l.g2)("q-option-group"),x=(0,l.g2)("q-field"),j=(0,l.g2)("q-btn"),Q=(0,l.g2)("q-card"),R=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(R,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",t,[a.mostrarSalones?((0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("div",r,[(0,l.bF)(e,{modelValue:a.mostrarSalones,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.mostrarSalones=o}),label:"Filtrar Por Salón",color:"secondary",onChange:a.cambioFiltro},null,8,["modelValue","onChange"])]),(0,l.Lk)("div",s,[(0,l.bF)(I,{modelValue:a.vmSalon,"onUpdate:modelValue":o[1]||(o[1]=function(o){return a.vmSalon=o}),onSeleccionar:a.retornarAlumnosSalon,todos:!1},null,8,["modelValue","onSeleccionar"])]),(0,l.Lk)("div",u,[(0,l.Lk)("div",c,[(0,l.bF)($,{type:"outlined",modelValue:a.estudiante,"onUpdate:modelValue":o[2]||(o[2]=function(o){return a.estudiante=o}),options:a.dataAlumnos,label:"NOMCOMP",val:"ALUCOD",placeholder:"intranet.estudiantes",onSelected:a.getAlumno},null,8,["modelValue","options","onSelected"])])])])):(0,l.Q3)("v-if",!0),!a.mostrarSalones&&a.dataAlumnos&&a.dataAlumnos.length>0?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("div",d,[(0,l.bF)($,{type:"outlined",modelValue:a.estudiante,"onUpdate:modelValue":o[3]||(o[3]=function(o){return a.estudiante=o}),options:a.dataAlumnos,label:"NOMCOMP",val:"ALUCOD",placeholder:"intranet.estudiantes",onSelected:a.obtDatosAlumno},null,8,["modelValue","options","onSelected"])]),!a.mostrarSalones&&a.dataAnio.NEMODES?((0,l.uX)(),(0,l.CE)("div",f,[(0,l.bF)(U,{class:"q-if-outlined",disable:"",modelValue:a.dataAnio.NEMODES,"onUpdate:modelValue":o[4]||(o[4]=function(o){return a.dataAnio.NEMODES=o}),"float-label":a.$t("salon")},null,8,["modelValue","float-label"])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",p,[(0,l.bF)(w,{class:"q-if-outlined",modelValue:a.dataAnio,"onUpdate:modelValue":o[5]||(o[5]=function(o){return a.dataAnio=o}),options:a.anios,"float-label":a.$t("ano"),onInput:a.getAlumno},null,8,["modelValue","options","float-label","onInput"])])])):(0,l.Q3)("v-if",!0)]),null===a.alumnoSession?((0,l.uX)(),(0,l.Wv)(_,{key:0,class:"col scroll-y"})):((0,l.uX)(),(0,l.Wv)(Q,{key:1,class:"col scroll-y marginCard"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",A,[(0,l.Lk)("div",v,[(0,l.bF)(T,{class:"photo sie-usuario-xl",alucod:a.showUsuCod},null,8,["alucod"])]),(0,l.Lk)("div",O,[o[12]||(o[12]=(0,l.Lk)("p",{class:"margin font-label bold"},"Niveles",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.nNiveles,function(a,o){return(0,l.uX)(),(0,l.CE)("div",null,[a.ID_CONDICION==a.ID_CONDICION_ESTUDIOS||a.ID_CONDICION==a.ID_CONDICION_CONDUCTA?((0,l.uX)(),(0,l.CE)("p",b,[(0,l.bF)(P,{name:"check_box",color:"primary",size:"24px"}),(0,l.Lk)("span",null,(0,n.v_)(a.DESCRIPCION),1)])):((0,l.uX)(),(0,l.CE)("p",h,[(0,l.bF)(P,{name:"check_box_outline_blank",color:"primary",size:"24px"}),(0,l.Lk)("span",null,(0,n.v_)(a.DESCRIPCION),1)]))])}),256)),o[13]||(o[13]=(0,l.Lk)("br",null,null,-1)),a.nNiveles.length>0&&1==a.nNiveles[0].ESTADO_SF?((0,l.uX)(),(0,l.CE)("p",S,"El estudiante continua con acompañamiento para el siguiente año.")):(0,l.Q3)("v-if",!0)])]),(0,l.Lk)("div",C,[(0,l.Lk)("div",g,[(0,l.bF)(U,{class:"font-label q-if-outlined",modelValue:a.numeroOrden,"onUpdate:modelValue":o[6]||(o[6]=function(o){return a.numeroOrden=o}),"float-label":"Número de Orden",readonly:!0},null,8,["modelValue"])]),(0,l.Lk)("div",y,[(0,l.bF)(U,{class:"font-label q-if-outlined",modelValue:a.tutor,"onUpdate:modelValue":o[7]||(o[7]=function(o){return a.tutor=o}),"float-label":"Tutor",readonly:!0},null,8,["modelValue"])])]),(0,l.Lk)("div",F,[(0,l.Lk)("div",E,[o[14]||(o[14]=(0,l.Lk)("br",null,null,-1)),o[15]||(o[15]=(0,l.Lk)("div",{class:"row font-label bold"},"Informe Anual Psicopedagógico",-1)),(0,l.Lk)("div",N,[(0,l.bF)(U,{class:"col-12 font-label q-if-outlined",modelValue:a.informePsicopedagogico,"onUpdate:modelValue":o[8]||(o[8]=function(o){return a.informePsicopedagogico=o}),"float-label":"Informe",type:"textarea",rows:"3",readonly:!0},null,8,["modelValue"])])])]),(0,l.Lk)("div",L,[(0,l.Lk)("div",D,[o[16]||(o[16]=(0,l.Lk)("p",{class:"font-label bold"},"Aspecto Familiar",-1)),(0,l.bF)(x,{class:"col",error:a.v$.form.familia.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(q,{class:"font-label",modelValue:a.v$.form.familia.$model,"onUpdate:modelValue":o[9]||(o[9]=function(o){return a.v$.form.familia.$model=o}),type:"radio",color:"secondary",style:{"margin-left":"25px"},options:a.AspectoFamilia},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,l.Lk)("div",k,[(0,l.bF)(U,{class:"font-label q-if-outlined",modelValue:a.totalVisitas,"onUpdate:modelValue":o[10]||(o[10]=function(o){return a.totalVisitas=o}),"float-label":"Nro de entrevistas"},null,8,["modelValue"])])]),(0,l.Lk)("div",M,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.arrayAspectoFamiliar,function(e,t){return(0,l.uX)(),(0,l.CE)(l.FK,null,[5!==e.ID_HP_ALUMNO_TIPO?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,n.C4)({"col-12":0===t,"col-xs-12 col-sm-6 col-md-6":0!==t})},[o[17]||(o[17]=(0,l.Lk)("br",null,null,-1)),(0,l.bF)(x,{class:"col",error:a.v$.arrayAspectoFamiliar[t].MODEL.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(U,{class:"font-label q-if-outlined",modelValue:a.v$.arrayAspectoFamiliar[t].MODEL.$model,"onUpdate:modelValue":function(o){return a.v$.arrayAspectoFamiliar[t].MODEL.$model=o},onBlur:a.v$.arrayAspectoFamiliar[t].MODEL.$touch,"float-label":e.DESCRIPCION,type:"textarea",rows:"3"},null,8,["modelValue","onUpdate:modelValue","onBlur","float-label"])]}),_:2},1032,["error","error-label"])],2)):(0,l.Q3)("v-if",!0)],64)}),256)),(0,l.Lk)("div",V,[o[18]||(o[18]=(0,l.Lk)("br",null,null,-1)),(0,l.bF)(x,{class:"col"},{default:(0,l.k6)(function(){return[(0,l.bF)(U,{class:"q-if-outlined font-label",modelValue:a.informeAnual,"onUpdate:modelValue":o[11]||(o[11]=function(o){return a.informeAnual=o}),"float-label":"Informe Anual de Convivenciaxx",type:"textarea",rows:"3",readonly:""},null,8,["modelValue"])]}),_:1})])]),a.habilitarGuardar?((0,l.uX)(),(0,l.Wv)(j,{key:0,class:"display-btn btn-popup-close",color:"blue",onClick:a.addAspectoFamiliaComentario,label:"Guardar"},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]}),_:1}))]}),_:1})}var $=e(99550),U=e.n($),w=e(76080),_=e.n(w),T=e(45254),P=e.n(T),q=(e(23825),e(52133),e(50310),e(90095),e(6724),e(70199),e(65806),e(515),e(83190),e(49089),e(27153),e(44264),e(66307),e(7346),e(13715),e(24066),e(83972)),x=e(80660),j=e(6123),Q=e(88275),R=e(93616),X=e(69027),H=e(80340),B=e(57668),G=e(982),W=e(82640),K=e(24974),z=e(92173),J=e(13813),Z=e(33001),Y={setup:function(){var a=(0,q.fG)();return{v$:a}},components:{QSelect:j.Si,QTable:j.kH,QToggle:j.c5,QTr:j.qh,QTd:j.Ef,QModal:j.tU,QModalLayout:j.hT,QField:j.Om,QCheckbox:j.vZ,QCard:j.C$,QBtn:j.Il,sieSalones:Q.Ay,sieSelect:R.A,QOptionGroup:j.EX,QInput:j.ie,QPageSticky:j._U,sieUsuario:K.A,sieVacio:H.A,sieEstudiantes:z.Ay,QPage:j.Tu,QIcon:j.bP},data:function(){return{alumnoSession:null,informePsicopedagogico:null,AspectoFamilia:[{label:"Familia Comprometida",value:"1"},{label:"Familia Parcialmente Comprometida",value:"2"},{label:"Familia No Comprometida",value:"3"}],aspectoFamiliaSelect:null,totalVisitas:null,observaciones:null,situacionFamiliar:null,aspectoAcademico:null,aspectoConductual:null,numeroOrden:null,tutor:null,arrayAspectoFamiliar:{},comentario:null,estudiante:"",form:{familia:""},nNiveles:[],dataAlumnos:[],vmSalon:"",mostrarSalones:!1,anios:[],dataAnio:{},nemoSession:null,informeAnual:""}},watch:{},computed:{nameObservation:function(){var a=null===this.nameBimestre?"":this.nameBimestre.label;return"Observaciones ".concat(a)},showUsuCod:function(){return null===this.alumnoSession?"":this.alumnoSession.ALUCOD},habilitarGuardar:function(){var a=this.dataAnio.ANO?this.dataAnio.ANO.toString():"";return a===(0,B["default"])().ano.toString()}},methods:{retornarAlumnosSalon:function(){var a=this;this.dataAlumnos=[],this.limpiar(),x.$http.get("api/HyoSalones/retornaAlumnosSalon",{params:{nemo:this.vmSalon}}).then(function(o){var e=o.json;a.dataAlumnos=e})},cambioFiltro:function(){},obtDatosAlumno:function(a){var o=this;this.limpiar(),this.alumnoSession=a,x.$http.get("api/HyoSalones/obtDatosAlumno",{params:{parametros:{alucod:this.estudiante,sinCalificaciones:!0}}}).then(function(a){var e=a.json;return o.anios=(0,J["default"])(e,function(a){return{label:a.ANO,value:a}}),o.dataAnio=o.anios.length>0?(0,Z.filterArray)(""+(0,B["default"])().ano,{field:"label",list:o.anios})[0]?(0,Z.filterArray)(""+(0,B["default"])().ano,{field:"label",list:o.anios})[0].value:o.anios[0].value:{},o.nemoSession=o.dataAnio.ANO===(0,B["default"])().ano?o.dataAnio.NEMO:null,o.alumnoSession.NEMO=o.dataAnio.NEMO,o.vmSalon=o.dataAnio.NEMO,!0}).then(function(){o.getAlumno(o.alumnoSession,!0)})},limpiar:function(){this.alumnoSession=null,this.nemoSession=null,this.totalVisitas="",this.informePsicopedagogico="",this.informeAnual="",this.v$.arrayAspectoFamiliar.$reset(),this.v$.form.$reset()},getAlumno:function(a,o){var e=this;return P()(_()().m(function l(){return _()().w(function(l){while(1)switch(l.n){case 0:return o||e.limpiar(),e.alumnoSession=a,e.mostrarSalones&&(e.alumnoSession.NEMO=e.vmSalon),l.n=1,e.NivelAlumno(a.ALUCOD);case 1:return l.n=2,e.getTutor();case 2:return l.n=3,e.getData();case 3:return l.a(2)}},l)}))()},getData:function(){var a=this;return P()(_()().m(function o(){var e;return _()().w(function(o){while(1)switch(o.n){case 0:e={alucod:a.alumnoSession.ALUCOD,bimecod:4},a.mostrarSalones||(e.ano=a.dataAnio.ANO),Promise.all([x.$http.get("api/HyoFichaApreciacion/getFichaApreciacionAnual",{params:{ALUCOD:a.alumnoSession.ALUCOD,NEMO:a.alumnoSession.NEMO,ANO:a.dataAnio.ANO}}),x.$http.get("api/HyoAcompanamientoalumno/obtComentarioInformeBimestre",{params:e})]).then(function(o){var e=U()(o,2),l=e[0],n=e[1];if(0!==l.json["data"].length){var t=l.json["data"][0];a.form.familia=String(t.ID_TIPO_COMPROMISO),a.arrayAspectoFamiliar[0].MODEL=t.OBSERVACIONES,a.arrayAspectoFamiliar[1].MODEL=t.ASP_ACADEMICO,a.arrayAspectoFamiliar[2].MODEL=t.ASP_CONDUCTUAL,a.informeAnual=t.OTROS,a.totalVisitas=t.NUM_ENTREVISTA}else{var i=!!l.json["observa"]&&l.json["observa"];a.form.familia="",a.arrayAspectoFamiliar[0].MODEL="",a.arrayAspectoFamiliar[1].MODEL="",a.arrayAspectoFamiliar[2].MODEL="",a.informeAnual=i.ACUERDOS?i.ACUERDOS:"",a.totalVisitas=""}0!==n.json.length&&(a.informePsicopedagogico=n.json[0].INFORME)}).catch(function(a){});case 1:return o.a(2)}},o)}))()},getTutor:function(){var a=this;return P()(_()().m(function o(){var e;return _()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,x.$http.get("api/HyoSalonAl/getTutorAlumno",{params:{ALUCOD:a.alumnoSession.ALUCOD,NEMO:a.alumnoSession.NEMO}});case 1:e=o.v,a.tutor=e.json[0].TUTOR,a.numeroOrden=e.json[0].NUMORD;case 2:return o.a(2)}},o)}))()},getAspectoFamiliar:function(){var a=this;return P()(_()().m(function o(){var e,l;return _()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,x.$http.get("api/HyoHpAlumno/getHPAlumnoTipo");case 1:e=o.v,l=e.json.map(function(o,e){return o.MODEL=null===a.comentario?"":a.comentario.json[e].COMENTARIO,o}),a.arrayAspectoFamiliar=a.json(l),a.arrayAspectoFamiliar=Object.fromEntries(a.arrayAspectoFamiliar.map(function(a,o){return[o,a]}));case 2:return o.a(2)}},o)}))()},NivelAlumno:function(a){var o=this;return P()(_()().m(function e(){var l,n;return _()().w(function(e){while(1)switch(e.n){case 0:return l={ano:(0,B["default"])().ano.toString(),alucod:a,bimecod:4},o.mostrarSalones||(l.ano=o.dataAnio.ANO),e.n=1,x.$http.get("api/HyoAcompanamientoalumno/obtNivelesAlumno",{params:l});case 1:n=e.v,o.setAspectoFamilia(n);case 2:return e.a(2)}},e)}))()},addAspectoFamiliaComentario:function(){var a=this;return P()(_()().m(function o(){return _()().w(function(o){while(1)switch(o.n){case 0:if(a.v$.arrayAspectoFamiliar.$touch(),a.v$.form.$touch(),!a.v$.arrayAspectoFamiliar.$error&&!a.v$.form.familia.$error){o.n=1;break}return(0,X.alertModal)(a.$t("aviso"),a.$t("mensajes.e0017")),o.a(2,!1);case 1:x.$http.post("api/HyoFichaapreciacion/setFichaApreciacion",{ALUCOD:a.alumnoSession.ALUCOD,NEMO:a.alumnoSession.NEMO,BIMECOD:0,ID_TIPO_COMPROMISO:a.form.familia,NUM_ENTREVISTA:a.totalVisitas,OBSERVACIONES:a.arrayAspectoFamiliar[0].MODEL,SIT_FAM:"",ASP_ACADEMICO:a.arrayAspectoFamiliar[1].MODEL,ASP_CONDUCTUAL:a.arrayAspectoFamiliar[2].MODEL,OTROS:a.informeAnual}).then(function(o){return(0,G["default"])(a.$t("mensajes.m0064"),"success")}).catch(function(){return(0,G["default"])(a.$t("mensajes.e0006"),"error")});case 2:return o.a(2)}},o)}))()},json:function(a){return JSON.parse(JSON.stringify(a))},cleanModelsComentarios:function(){Object.values(this.arrayAspectoFamiliar).forEach(function(a){a.MODEL=""})},setAspectoFamilia:function(a){this.nNiveles=a.json}},created:function(){var a=this;this.mostrarSalones||x.$http.get("api/HyoAlumnos/listarAlumnosHijos",{params:{parametros:{matriculado:"S",salonTutor:!0}}}).then(function(o){var e=o.json;a.dataAlumnos=e})},mounted:function(){this.getAspectoFamiliar()},validations:function(){var a={form:{familia:{required:W.mw}},arrayAspectoFamiliar:{}};return Object.keys(this.arrayAspectoFamiliar||{}).forEach(function(o){a.arrayAspectoFamiliar[o]={MODEL:{required:W.mw}}}),a}},aa=e(12807);const oa=(0,aa.A)(Y,[["render",I]]);var ea=oa}}]);