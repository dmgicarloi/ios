"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[58053],{58053:function(e,n,a){a.r(n),a.d(n,{default:function(){return H}});var r=a(61758),t={class:"row q-col-gutter-sm"},i={class:"col-xs-12 col-sm-6"},o={class:"row q-col-gutter-sm"},s={class:"col-12"},l={class:"col-12"},u={class:"col-xs-12 col-sm-6"},c={class:"row q-pa-sm q-col-gutter-sm"},m={class:"col-xs-12"};function f(e,n){var a=this,f=(0,r.g2)("header-btn"),d=(0,r.g2)("sie-table"),A=(0,r.g2)("sub-fam-alm"),p=(0,r.g2)("q-card-section"),w=(0,r.g2)("q-card"),F=(0,r.g2)("q-input"),b=(0,r.g2)("q-form"),h=(0,r.g2)("sie-modal"),g=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(g,{class:"q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(w,{flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(p,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",t,[(0,r.Lk)("div",i,[(0,r.Lk)("div",o,[(0,r.Lk)("div",s,[(0,r.bF)(f,{"padding-x":"","font-size":"16px",name:"Categoría",buttons:e.buttons},null,8,["buttons"])]),(0,r.Lk)("div",l,[(0,r.bF)(d,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableFamAlm",onRowSelected:e.rowSelectFamAlm,css:"height:calc(100vh - 140px)",context:a},null,8,["data","columns","config","onRowSelected"])])])]),(0,r.Lk)("div",u,[(0,r.bF)(A,{"row-fam-alm":e.rowFamAlm,familias:e.rows},null,8,["row-fam-alm","familias"])])])]}),_:1})]}),_:1}),(0,r.bF)(h,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Categoría":"Modificar Categoría",onSubmit:e.saveAcccion},{default:(0,r.k6)(function(){return[(0,r.bF)(b,{ref:"refForm"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",c,[(0,r.Lk)("div",m,[(0,r.bF)(F,{type:"textarea",counter:"",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.DESCRIPCION=n}),label:"Descripción *",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var d=a(76080),A=a.n(d),p=a(45254),w=a.n(p),F=(a(89571),a(6123)),b={data:function(){return{config:{DESCRIPCION:{component:"input",autoFocus:!0,input:function(e){var n=this;return w()(A()().m(function a(){return A()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,n.updateFamAlm(e.IDFAMALM,e.DESCRIPCION);case 1:return a.a(2,!0);case 2:return a.p=2,a.v,a.a(2,!1)}},a,null,[[0,2]])}))()}},ACTION:{component:"button",icon:["delete as eliminar"],editar:function(e,n){var a=this;return w()(A()().m(function e(){return A()().w(function(e){while(1)switch(e.n){case 0:return a.rowFamAlm=n,e.n=1,a.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var a=this;return w()(A()().m(function e(){return A()().w(function(e){while(1)switch(e.n){case 0:return a.rowFamAlm=n,e.n=1,a.deleteFamAlm();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"IDFAMALM",label:"Código",field:"IDFAMALM",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Categría",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:"80"}]}}},h=a(39893),g=a(81288),v=a(2739),S=a(9736),I=a(88567),C=a(95718),D={class:"row q-col-gutter-sm"},M={class:"col-12"},k={class:"col-12"},E={class:"row q-pa-sm q-col-gutter-sm"},L={class:"col-xs-12"},O={class:"col-xs-12"};function $(e,n){var a=(0,r.g2)("header-btn"),t=(0,r.g2)("sie-table"),i=(0,r.g2)("q-select"),o=(0,r.g2)("q-input"),s=(0,r.g2)("q-form"),l=(0,r.g2)("sie-modal");return(0,r.uX)(),(0,r.CE)("div",D,[(0,r.Lk)("div",M,[(0,r.bF)(a,{"padding-x":"","font-size":"16px",name:"Sub Categoría",buttons:e.buttons},null,8,["buttons"])]),(0,r.Lk)("div",k,[(0,r.bF)(t,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableSubFamAlm",onRowSelected:e.rowSelectSubFamAlm,css:"height:calc(100vh - 140px)",context:this},null,8,["data","columns","config","onRowSelected"])]),(0,r.bF)(l,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Sub-Categoría":"Modificar Sub-Categoría",onSubmit:e.saveAcccion},{default:(0,r.k6)(function(){return[(0,r.bF)(s,{ref:"refForm"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",E,[(0,r.Lk)("div",L,[(0,r.bF)(i,{options:e.familias,modelValue:e.form.IDFAMALM,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.IDFAMALM=n}),label:"Familia *","emit-value":"","option-label":"DESCRIPCION","option-value":"IDFAMALM",rules:[e.required]},null,8,["options","modelValue","rules"])]),(0,r.Lk)("div",O,[(0,r.bF)(o,{type:"textarea",counter:"",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.DESCRIPCION=n}),label:"Descripción *",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])])}var y={data:function(){return{config:{DESCRIPCION:{component:"input",autoFocus:!0,input:function(e){var n=this;return w()(A()().m(function a(){return A()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,n.updateSubFamAlm(e);case 1:return a.a(2,!0);case 2:return a.p=2,a.v,a.a(2,!1)}},a,null,[[0,2]])}))()}},ACTION:{component:"button",icon:["delete as eliminar"],editar:function(e,n){var a=this;return w()(A()().m(function e(){return A()().w(function(e){while(1)switch(e.n){case 0:return a.rowSubFamAlm=n,e.n=1,a.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var a=this;return w()(A()().m(function e(){return A()().w(function(e){while(1)switch(e.n){case 0:return a.rowSubFamAlm=n,e.n=1,a.deleteSubFamAlm();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"IDSUBFAMALM",label:"Código",field:"IDSUBFAMALM",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Sub Categoría",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:"80"}]}}},N=a(16648),R={mixins:[y],props:{rowFamAlm:{type:Object,default:null},familias:{type:Array,default:function(){return[]}}},components:{QForm:v.A,QInput:S.A,QCard:I.A,QCardSection:C.A,QSelect:N.A},data:function(){return{required:h.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowSubFamAlm:null,form:{IDFAMALM:null,DESCRIPCION:null}}},methods:{openAgregar:function(){this.action="create",this.rowSubFamAlm=null,(0,g.clear)(this.form),this.form.IDFAMALM=this.rowFamAlm.IDFAMALM,this.openAdd=!0},openActualizar:function(){this.rowSubFamAlm?(this.action="update",this.form.IDFAMALM=this.rowSubFamAlm.IDFAMALM,this.form.DESCRIPCION=this.rowSubFamAlm.DESCRIPCION,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return w()(A()().m(function n(){var a,r,t;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(a=n.v,a){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:r=n.v,r&&e.createSubFamAlm(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:t=n.v,t&&e.updateSubFamAlm();case 6:return n.a(2)}},n)}))()},rowSelectSubFamAlm:function(e,n){this.rowSubFamAlm=n},createSubFamAlm:function(){var e=this;return w()(A()().m(function n(){var a,r,t,i,o;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/HyoSubFams/createSubFam",{params:e.form});case 1:a=n.v,r=a.result,t=a.message,i={IDSUBFAMALM:r.IDSUBFAMALM,IDFAMALM:e.form.IDFAMALM,DESCRIPCION:e.form.DESCRIPCION},e.rows.unshift(i),e.openAdd=!1,e.$notify(t,"success"),n.n=3;break;case 2:n.p=2,o=n.v,e.$notify(o.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readSubFamAlm:function(){var e=arguments,n=this;return w()(A()().m(function a(){var r,t,i;return A()().w(function(a){while(1)switch(a.p=a.n){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:0,a.p=1,a.n=2,n.$http.get("api/HyoSubFams/readSubFam",{params:{idfamalm:r}});case 2:t=a.v,n.rows=t,a.n=4;break;case 3:a.p=3,i=a.v,n.$notify(i.message,"warning");case 4:return a.a(2)}},a,null,[[1,3]])}))()},deleteSubFamAlm:function(){var e=this;return w()(A()().m(function n(){var a,r,t,i;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowSubFamAlm){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(a=n.v,!a){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/HyoSubFams/deleteSubFam",{params:{idsubfamalm:e.rowSubFamAlm.IDSUBFAMALM}});case 4:r=n.v,t=r.message,e.rows.splice(e.rows.indexOf(e.rowSubFamAlm),1),e.rowSubFamAlm=null,e.$notify(t,"success"),n.n=6;break;case 5:n.p=5,i=n.v,e.$notify(i.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateSubFamAlm:function(e){var n=this;return w()(A()().m(function a(){var r,t,i,o;return A()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,r=n.$refs.tableSubFamAlm,a.n=1,n.$http.put("api/HyoSubFams/updateSubFam",{idsubfamalm:n.rowSubFamAlm.IDSUBFAMALM,params:{IDFAMALM:e.IDFAMALM,DESCRIPCION:e.DESCRIPCION}});case 1:t=a.v,i=t.message,n.openAdd=!1,r.updateRow(n.rowSubFamAlm,e),n.$notify(i,"success"),a.n=3;break;case 2:a.p=2,o=a.v,n.$notify(o.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()}},watch:{rowFamAlm:{deep:!0,handler:function(e){var n=this;return w()(A()().m(function a(){return A()().w(function(a){while(1)switch(a.n){case 0:if(!e){a.n=1;break}return a.n=1,n.readSubFamAlm(e.IDFAMALM);case 1:return a.a(2)}},a)}))()}}}},P=a(12807);const q=(0,P.A)(R,[["render",$]]);var x=q,V=a(43136),U={mixins:[V.initialConfig,b],components:{QForm:v.A,QInput:S.A,QCard:I.A,QCardSection:C.A,subFamAlm:x,QPage:F.Tu},data:function(){return{required:h.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowFamAlm:null,form:{EMPCOD:null,DESCRIPCION:null}}},methods:{openAgregar:function(){this.action="create",this.rowFamAlm=null,(0,g.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowFamAlm?(this.action="update",this.form.DESCRIPCION=this.rowFamAlm.DESCRIPCION,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return w()(A()().m(function n(){var a,r,t;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(a=n.v,a){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:r=n.v,r&&e.createFamAlm(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:t=n.v,t&&e.updateFamAlm();case 6:return n.a(2)}},n)}))()},rowSelectFamAlm:function(e,n){this.rowFamAlm=n},createFamAlm:function(){var e=this;return w()(A()().m(function n(){var a,r,t,i,o;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,e.form.EMPCOD=e.empcod,n.n=1,e.$http.post("api/HyoFamAlms/createFamAlm",{params:e.form});case 1:a=n.v,r=a.result,t=a.message,i={IDFAMALM:r.IDFAMALM,DESCRIPCION:e.form.DESCRIPCION},e.rows.unshift(i),e.openAdd=!1,e.$notify(t,"success"),n.n=3;break;case 2:n.p=2,o=n.v,e.$notify(o.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readFamAlm:function(){var e=this;return w()(A()().m(function n(){var a,r;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/HyoFamAlms/readFamAlm",{params:{empcod:e.empcod}});case 1:a=n.v,e.rows=a,n.n=3;break;case 2:n.p=2,r=n.v,e.$notify(r.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deleteFamAlm:function(){var e=this;return w()(A()().m(function n(){var a,r,t,i;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowFamAlm){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(a=n.v,!a){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/HyoFamAlms/deleteFamAlm",{params:{idfamalm:e.rowFamAlm.IDFAMALM}});case 4:r=n.v,t=r.message,e.rows.splice(e.rows.indexOf(e.rowFamAlm),1),e.rowFamAlm=null,e.$notify(t,"success"),n.n=6;break;case 5:n.p=5,i=n.v,e.$notify(i.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateFamAlm:function(){var e=arguments,n=this;return w()(A()().m(function a(){var r,t,i,o,s,l;return A()().w(function(a){while(1)switch(a.p=a.n){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:0,t=e.length>1&&void 0!==e[1]?e[1]:"",a.p=1,i=n.$refs.tableFamAlm,a.n=2,n.$http.put("api/HyoFamAlms/updateFamAlm",{idfamalm:r||n.rowFamAlm.IDFAMALM,params:{DESCRIPCION:t||n.form.DESCRIPCION}});case 2:o=a.v,s=o.message,n.openAdd=!1,i.updateRow(n.rowFamAlm,{descripcion:t}),n.$notify(s,"success"),a.n=4;break;case 3:a.p=3,l=a.v,n.$notify(l.message,"warning");case 4:return a.a(2)}},a,null,[[1,3]])}))()}},created:function(){var e=this;return w()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:try{e.readFamAlm()}catch(n){e.$notify(n.message,"warning")}case 1:return n.a(2)}},n)}))()}};const Q=(0,P.A)(U,[["render",f]]);var H=Q}}]);