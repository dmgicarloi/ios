"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[49367],{49367:function(n,a,t){t.r(a),t.d(a,{default:function(){return L}});var e=t(61758),o={class:"col bg-white"};function i(n,a){var t=(0,e.g2)("cerrar-matricula");return(0,e.uX)(),(0,e.CE)("div",o,[(0,e.bF)(t,{anoMat:n.sie.ano,configuracion:n.configuracion},null,8,["anoMat","configuracion"])])}t(6235);var r=t(8445),c=t.n(r),l=(t(71225),t(50310),t(5962),t(83190),t(58790)),u={class:"column q-card q-ma-sm"},s={class:"row q-ma-sm"},d={class:"td col text-bold"},f={class:"row"};function E(n,a){var t=(0,e.g2)("q-search"),o=(0,e.g2)("q-select"),i=(0,e.g2)("q-checkbox"),r=(0,e.g2)("q-td"),E=(0,e.g2)("q-tooltip"),p=(0,e.g2)("q-btn"),M=(0,e.g2)("q-table");return(0,e.uX)(),(0,e.CE)("div",u,[(0,e.Lk)("div",s,[(0,e.bF)(t,{class:"col q-if-outlined",modelValue:n.filter,"onUpdate:modelValue":a[0]||(a[0]=function(a){return n.filter=a})},null,8,["modelValue"]),(0,e.bF)(o,{class:"q-if-outlined",modelValue:n.ordenSelect,"onUpdate:modelValue":a[1]||(a[1]=function(a){return n.ordenSelect=a}),options:n.infoOrden,"float-label":"Paso",onInput:n.init},null,8,["modelValue","options","onInput"]),(0,e.bF)(i,{modelValue:n.sinDoc,"onUpdate:modelValue":a[2]||(a[2]=function(a){return n.sinDoc=a}),color:"secondary",onInput:n.init},{default:(0,e.k6)(function(){return c()(a[3]||(a[3]=[(0,e.eW)("Sin Documentos Subidos",-1)]))}),_:1},8,["modelValue","onInput"])]),(0,e.bF)(M,{data:n.dataEstados,columns:n.columns,"row-key":"ID",style:(0,l.Tr)({"max-height":n.alto}),filter:n.filter},{"body-cell-FH_REGISTRO":(0,e.k6)(function(a){return[(0,e.bF)(r,{props:a},{default:(0,e.k6)(function(){return[(0,e.Lk)("span",d,(0,l.v_)(n.date(a.row.FH_REGISTRO,"DD/MM/YYYY hh:mm A")),1)]}),_:2},1032,["props"])]}),"body-cell-BOTONES":(0,e.k6)(function(t){return[(0,e.bF)(r,{props:t},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",f,[(0,e.bF)(p,{flat:"",dense:"",round:"",icon:"check_square_o",onClick:function(a){return n.terminarMatricula(t.row)}},{default:(0,e.k6)(function(){return[(0,e.bF)(E,null,{default:(0,e.k6)(function(){return c()(a[4]||(a[4]=[(0,e.eW)("Terminar Matricula",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,e.bF)(p,{flat:"",dense:"",round:"",icon:"delete",onClick:function(a){return n.eliminarMatricula(t.row)}},{default:(0,e.k6)(function(){return[(0,e.bF)(E,null,{default:(0,e.k6)(function(){return c()(a[5]||(a[5]=[(0,e.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","style","filter"])])}var p=t(76080),M=t.n(p),A=t(45254),O=t.n(A),h=(t(10239),t(89571),t(90095),t(515),t(13715),t(6123)),m=t(30545),g=t(80660),R=t(982),D=t(81288),S=t(18105),_=t(69027),I=t(57668),T={name:"detalleDocumento",props:["anoMat","configuracion","sie"],components:{QCheckbox:h.vZ,QTable:m.A,QTr:h.qh,QTh:h.EJ,QTd:h.Ef,QPopupEdit:h.GT,QPageSticky:h._U,QFab:h.l6,QFabAction:h.B$,QSelect:h.Si,QSearch:h.Ks,QBtn:h.Il,QTooltip:h.nC},data:function(){return{dataEstados:[],columns:[{name:"NOMCOMP",field:"NOMCOMP",align:"left",label:this.$t("apellidosynombres")},{name:"DETALLEPASO",field:"DETALLEPASO",align:"left",label:this.$t("paso")},{name:"FH_REGISTRO",field:"FH_REGISTRO",align:"left",label:this.$t("fechaHora")},{name:"USUNOM",field:"USUNOM",align:"left",label:this.$t("usuario.nombre")}],registrosSeleccionados:[],filter:"",sinDoc:!1,alto:null,infoOrden:[{label:"Todos",value:"T"}],ordenSelect:"T",matriEst:[{label:"Matriculado",value:0,valorEstado:"S"},{label:"Pre Matriculado",value:1,valorEstado:"P"},{label:"En Proceso",value:2,valorEstado:"Z"},{label:"Por Ratificar",value:3,valorEstado:"R"}]}},methods:{date:S.Ay,init:function(){var n=this,a={ano:this.anoMat,sinDoc:this.sinDoc};"T"!==this.ordenSelect&&(a.orden=this.ordenSelect),g.$http.get("api/HyoMatriculaestados/getListado",{params:a}).then(function(a){var t=a.json;n.dataEstados=t})},handleResize:function(){var n=100;this.alto=window.innerHeight-n+"px"},terminarMatricula:function(n){var a=this,t=n.ALUCOD,e=n.INSTRUCOD,o=n.GRADOCOD,i=n.SECCIONCOD,r=n.NUEVO,c=n.FAMCOD,l=n.NOMCOMP;g.$http.get("api/HyoMatriculaestados/getEstadoNew",{params:{ALUCOD:t,ANO:this.anoMat}}).then(function(n){var u=n.json;if(Object.keys(u).length>0){var s=!!a.configuracion["M_CREAR_DEUDA"];"0041"!==(0,I["default"])().colcod||r||(s=!1);var d={ANO:a.anoMat,ALUCOD:t,ESTADO:a.matriEst[a.configuracion["M_ESTADO_MATRICULADO"]].valorEstado,INSTRUCOD:e,GRADOCOD:o,SECCIONCOD:i,TIPO:u.TIPO,TRANSFERIR:!!a.configuracion["M_MATRICULA_DIRECTA"],M_TALLERES_GRUPOS:!!a.configuracion["M_TALLERES_GRUPOS"],MOVILIDAD:!!a.configuracion["M_MOVILIDADESP"],M_CREAR_DEUDA:s,NUEVO:r,FAMCOD:c,configuracion:a.configuracion,TOKEN:(0,I["default"])().token,digital:0,M_ENVIAR_MENSAJE_TRANSFERIR:!!a.configuracion["M_ENVIAR_MENSAJE_TRANSFERIR"],M_MENSAJE_FINAL:!!a.configuracion["M_MENSAJE_FINAL"]};(0,_.dialogConfirm)({title:"EstÃ¡ seguro de realizar la matricula de "+l,message:"Este proceso es irreversible",ok:"Si",cancel:"No"}).then(function(n){n&&g.$http.post("api/HyoMatricula/saveMatricula",d).then(function(){var n=O()(M()().m(function n(l){var d,f,E,p,A,h,m;return M()().w(function(n){while(1)switch(n.n){case 0:if("m0001"!==l.json){n.n=7;break}return d={ANO:a.anoMat,ALUCOD:t,ESTADO:a.matriEst[a.configuracion["M_ESTADO_MATRICULADO"]].valorEstado,INSTRUCOD:e,GRADOCOD:o,SECCIONCOD:i,TIPO:u.TIPO,TRANSFERIR:!!a.configuracion["M_MATRICULA_DIRECTA"],M_TALLERES_GRUPOS:!!a.configuracion["M_TALLERES_GRUPOS"],MOVILIDAD:!!a.configuracion["M_MOVILIDADESP"],M_CREAR_DEUDA:s,NUEVO:r,FAMCOD:c,configuracion:a.configuracion,TOKEN:(0,I["default"])().token,digital:0,M_ENVIAR_MENSAJE_TRANSFERIR:!!a.configuracion["M_ENVIAR_MENSAJE_TRANSFERIR"],M_MENSAJE_FINAL:!!a.configuracion["M_MENSAJE_FINAL"],RESERVA:0},n.n=1,a.$http.post("api/HyoReportesmatricula/getReportes",d);case 1:return f=n.v,f=f.json,E=[],f.forEach(function(n,t){"0076"===(0,I["default"])().colcod&&"r"===n.tipo&&E.push(t),(1!==n.TIPO||1!==n.subTipo)&&(n.regenDoc=a.regenDoc)}),E.length>0&&f.splice(E[0],1),p={ano:a.anoMat,alucod:t,configuracion:a.configuracion},n.n=2,g.$http.post("api/HyoMatricula/obtEstadosHijos",p);case 2:A=n.v,A=A.json[0],h=function(){var n=O()(M()().m(function n(a,t,e){var o;return M()().w(function(n){while(1)switch(n.n){case 0:if("e"===a.TIPO){n.n=4;break}if(1!==a.TIPO){n.n=2;break}if(1===a.LISTA){n.n=1;break}return n.n=1,g.$http.get("api"+a.url.split("api")[1],{params:a.parametros});case 1:n.n=3;break;case 2:if("n"!==a.TIPO&&a.TIPO){n.n=3;break}return n.n=3,g.$http.get(a.url);case 3:n.n=5;break;case 4:return n.n=5,g.$http.get((0,I["default"])().url+"/"+a.url,{params:a.parametros});case 5:return o={ANO:e,ID_DOC:a.IDDOC,ALUCOD:t.ALUCOD},n.n=6,g.$http.post("api/MatriculaController/saveSeguimientoDoc",o);case 6:return n.a(2)}},n)}));return function(a,t,e){return n.apply(this,arguments)}}(),m=f.length-1;case 3:if(!(m>=0)){n.n=6;break}return n.n=4,h(f[m],A,a.anoMat);case 4:case 5:m--,n.n=3;break;case 6:(0,R["default"])(a.$t("mensajes."+l.json)),a.modalDetalles=!1,a.init(),(a.configuracion["M_ENVIAR_MENSAJE_TRANSFERIR"]||a.configuracion["M_MENSAJE_FINAL"])&&g.$http.post("api/HyoMatricula/enviarMensaje",p),n.n=8;break;case 7:(0,R["default"])(a.$t("mensajes."+l.json),"error");case 8:return n.a(2)}},n)}));return function(a){return n.apply(this,arguments)}}())})}else g.$http.get("api/HyoMatricula/obtMatriculaEstadoAlumno",{params:{ALUCOD:t,ANO:a.anoMat}}).then(function(n){var a=n.json;a?(0,R["default"])("El estudiante ya se encuenta matriculado","error"):(0,R["default"])("No existe ninguna matricula en proceso para este alumno","error")})})},eliminarMatricula:function(n){var a=this,t=n.ID;(0,_.dialogDelete)().then(function(n){n&&g.$http.post("api/HyoMatriculaestados/eliminarEstado",{ID:t}).then(function(n){var t=n.json;(0,R["default"])(a.$t(t.msg),t.type),t.type||a.init()})})}},computed:{isGreater:function(){return(0,D.isGreater)()}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){var n=this;this.init();var a={ano:this.anoMat,orden:1};g.$http.get("api/HyoMatriculaorden/obtOrden",{params:a}).then(function(a){var t=a.json;t.forEach(function(a,t){0!==t&&n.infoOrden.push({label:a.DESCRIPCION,value:t})})}),window.addEventListener("resize",this.handleResize),this.handleResize(),(0,I["default"])().ruta.nivel>=2&&this.columns.push({name:"BOTONES",field:"BOTONES",align:"center"})},watch:{}},b=t(12807);const N=(0,b.A)(T,[["render",E]]);var v=N,C={components:{cerrarMatricula:v},data:function(){return{sie:(0,I["default"])(),configuracion:{}}},computed:{},methods:{cargaInicial:function(){var n=this;g.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:this.anoMat,agrupado:!0}}).then(function(a){var t=a.json;n.configuracion=t})}},watch:{},created:function(){this.cargaInicial()}};const k=(0,b.A)(C,[["render",i]]);var L=k}}]);