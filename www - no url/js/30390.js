"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[30390],{30390:function(o,e,a){a.r(e),a.d(e,{default:function(){return I}});a(83190),a(44264);var i=a(61758);function l(o,e){var a=(0,i.g2)("header-btn"),l=(0,i.g2)("copiaConclusionesOficial"),t=(0,i.g2)("q-card-section"),n=(0,i.g2)("q-card"),s=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(s,{class:"q-pa-sm intranet-procesoCopiaConclusionesOficial sie-flat"},{default:(0,i.k6)(function(){return[(0,i.bF)(n,null,{default:(0,i.k6)(function(){return[(0,i.bF)(a,{name:"Proceso: Copia de conclusiones descriptivas para cursos oficiales",buttons:[]}),(0,i.bF)(t,null,{default:(0,i.k6)(function(){return[((0,i.uX)(),(0,i.Wv)(l,{key:0,pAnio:o.sie.ano.toString(),pDataNivel:o.dataNivel,pDataGrado:o.gradosTemp},null,8,["pAnio","pDataNivel","pDataGrado"]))]}),_:1})]}),_:1})]}),_:1})}var t=a(99550),n=a.n(t),s=(a(23825),a(27153),a(66307),a(24066),a(6123)),r=a(27738),c=a(30640),d=a(65229),u=a(13813),v={class:"contCopiaMasa"},f={class:"row q-px-sm text-weight-bold text-info q-mt-lg-lg"},m={class:"col-auto row flex-center"},p={class:"row justify-around q-ma-lg-sm"},b={class:"col-xs-12 col-md-4"},g={class:"row"},h={class:"col-xs-12"},C={class:"row"},F={class:"col-xs-12"},k={class:"row"},A={class:"col-xs-12"},D={class:"row"},x={class:"col-xs-12"},L={class:"row"},q={class:"col-xs-12 text-center"};function O(o,e){var a=(0,i.g2)("q-icon"),l=(0,i.g2)("q-select"),t=(0,i.g2)("q-checkbox"),n=(0,i.g2)("q-btn");return(0,i.uX)(),(0,i.CE)("div",v,[(0,i.Lk)("div",f,[(0,i.Lk)("div",m,[(0,i.bF)(a,{class:"q-mr-sm",name:"info",size:"28px"})]),e[3]||(e[3]=(0,i.Lk)("div",{class:"col self-center"},[(0,i.Lk)("div",null,"Este proceso copia las conclusiones descriptivas de los cursos internos, los concatena e inserta al indice correspondiente en el curso oficial")],-1))]),(0,i.Lk)("div",p,[(0,i.Lk)("div",b,[(0,i.Lk)("div",g,[(0,i.Lk)("div",h,[(0,i.bF)(l,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.instrucod,options:o.pDataNivel,"float-label":o.$t("ngs.nivel"),onChange:o.cambiaNivelDestino},null,8,["modelValue","options","float-label","onChange"])])]),(0,i.Lk)("div",C,[(0,i.Lk)("div",F,[(0,i.bF)(l,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.gradocod,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.vmFiltro.gradocod=e}),options:o.grados,"float-label":o.$t("ngs.grado"),filter:""},null,8,["modelValue","options","float-label"])])]),(0,i.Lk)("div",k,[(0,i.Lk)("div",A,[(0,i.bF)(l,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.periodo,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.vmFiltro.periodo=e}),options:o.dtPeriodos,"float-label":o.$t("periodo")},null,8,["modelValue","options","float-label"])])]),(0,i.Lk)("div",D,[(0,i.Lk)("div",x,[(0,i.bF)(t,{modelValue:o.vmFiltro.flEliminar,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.vmFiltro.flEliminar=e}),label:"Eliminar conclusiones existentes",color:"secondary","true-value":1,"false-value":0},null,8,["modelValue"])])])])]),(0,i.Lk)("div",L,[(0,i.Lk)("div",q,[(0,i.bF)(n,{class:"q-mx-xs",label:o.$t("botones.procesar"),disable:o.deshabilitar,color:"primary",onClick:o.procCopiaComentarios},null,8,["label","disable","onClick"])])])])}a(71225),a(10239),a(50310),a(5962);var w=a(80340),Q=a(43621),N=a(982),S=a(69027),V={emits:["cerrarModal"],name:"copiaConclusionesOficial",props:{pAnio:String,pDataNivel:Array,pDataGrado:Array},components:{QCard:s.C$,QFab:s.l6,QFabAction:s.B$,QSelect:s.Si,QInput:s.ie,QInnerLoading:s.SQ,QSpinnerOval:s.VA,QToggle:s.c5,QCheckbox:s.vZ,sieVacio:w.A,sieModal:c.A,Clase:r.A,Api:Q.A,QIcon:s.bP,QBtn:s.Il},data:function(){return{verModal:!0,vmFiltro:{instrucod:null,gradocod:null,periodo:0,flEliminar:0},tblAmbito:{},dataAmbitoDes:[],dtPeriodos:[],deshabilitar:!1}},computed:{grados:function(){var o=this,e=this.pDataGrado;return this.vmFiltro["instrucod"]?(e=e.filter(function(e){return o.vmFiltro["instrucod"].indexOf(e.INSTRUCOD)>=0}),e=(0,u["default"])(e,function(o){return{label:o.GRADODES,value:o.GRADOCOD}}),e.unshift({label:"Todos",value:"%"}),this.vmFiltro["gradocod"]=null):e=[],e}},methods:{cerrarModal:function(){this.$emit("cerrarModal","copiaConclusionesOficial")},cambiaNivelDestino:function(o){this.vmFiltro["instrucod"]=o,this.vmFiltro.gradocod=null,this.dataAmbitoDes=[]},loadPeriodos:function(o){var e=[];e.push({label:"[Seleccione]",value:0});for(var a=1;a<=o;a++)e.push({label:"PERIODO "+a,value:a});this.dtPeriodos=e},procCopiaComentarios:function(){var o=this;if(null===this.vmFiltro.instrucod||null===this.vmFiltro.gradocod||0===this.vmFiltro.periodo)return(0,N["default"])("Seleccione filtros","warning"),!1;(0,S.dialogGeneral)({title:this.$t("confirmar"),message:"Copia de conclusiones descriptivas de los cursos internos",ok:this.$t("botones.aceptar"),cancel:this.$t("botones.cancelar")}).then(function(e){o.deshabilitar=!0,Q.A.procesarCopiaConclusionesOficial(o.pAnio,o.vmFiltro.periodo,"%",o.vmFiltro.flEliminar,o.vmFiltro.instrucod,o.vmFiltro.gradocod,"%").then(function(e){o.deshabilitar=!1,1===e.estado?(0,N["default"])("Procesado correctamente"):(0,N["default"])(o.$t("mensajes.e0006"),"warning")}).catch(function(e){o.deshabilitar=!1,(0,N["default"])(o.$t("mensajes.e0006"),"warning")})}).catch(function(o){console.log("error",o)})}},created:function(){var o=this;r.A.obtMaxPeriodo().then(function(e){o.loadPeriodos(e)})}},$=a(12807);const P=(0,$.A)(V,[["render",O]]);var E=P,y=a(57668),T={directives:{sieActive:d.A},components:{QCard:s.C$,sieModal:c.A,copiaConclusionesOficial:E,QPage:s.Tu},data:function(){return{sie:(0,y["default"])(),dataNivel:[],gradosTemp:[]}},computed:{},methods:{},created:function(){var o=this;Promise.all([r.A.getNiveles(),r.A.getGrados()]).then(function(e){var a=n()(e,2),i=a[0],l=a[1];o.dataNivel=(0,u["default"])(i,function(o){return{label:o.INSTRUDES,value:o.INSTRUCOD}}),o.gradosTemp=l})}};const G=(0,$.A)(T,[["render",l]]);var I=G}}]);