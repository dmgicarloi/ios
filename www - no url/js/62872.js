"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[62872],{62872:function(e,t,o){o.r(t),o.d(t,{default:function(){return bo}});var n=o(61758),a={class:"intranet-becas--dashboard col column q-pa-sm"};function l(e,t){var o=(0,n.g2)("header-btn"),l=(0,n.g2)("q-tab"),i=(0,n.g2)("procesos"),r=(0,n.g2)("q-tab-pane"),s=(0,n.g2)("expedientes"),u=(0,n.g2)("configuracion"),c=(0,n.g2)("informes"),d=(0,n.g2)("q-tabs"),f=(0,n.g2)("q-card"),p=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(p,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",a,[(0,n.bF)(f,{class:"col column",dense:"",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{name:"Becas",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(d,{class:"col q-tabs-flex",inverted:"",animated:""},{title:(0,n.k6)(function(){return[(0,n.bF)(l,{name:"procesos",label:"Procesos"}),(0,n.bF)(l,{name:"expedientes",label:"Expedientes",default:""}),(0,n.bF)(l,{name:"config",label:"Configuración"}),e.verInforme?((0,n.uX)(),(0,n.Wv)(l,{key:0,name:"informes",label:"informes"})):(0,n.Q3)("v-if",!0)]}),default:(0,n.k6)(function(){return[(0,n.bF)(r,{name:"procesos"},{default:(0,n.k6)(function(){return[(0,n.bF)(i)]}),_:1}),(0,n.bF)(r,{name:"expedientes"},{default:(0,n.k6)(function(){return[e.perActivo>0?((0,n.uX)(),(0,n.Wv)(s,{key:0,periodo:e.perActivo},null,8,["periodo"])):(0,n.Q3)("v-if",!0)]}),_:1}),(0,n.bF)(r,{class:"q-pa-none",name:"config"},{default:(0,n.k6)(function(){return[e.perActivo>0?((0,n.uX)(),(0,n.Wv)(u,{key:0})):(0,n.Q3)("v-if",!0)]}),_:1}),e.verInforme?((0,n.uX)(),(0,n.Wv)(r,{key:0,name:"informes"},{default:(0,n.k6)(function(){return[e.perActivo>0?((0,n.uX)(),(0,n.Wv)(c,{key:0,periodo:e.perActivo},null,8,["periodo"])):(0,n.Q3)("v-if",!0)]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1})]}),_:1})])]}),_:1})}var i=o(57008),r=o.n(i),s=o(6123),u=o(8445),c=o.n(u),d=o(58790),f={class:"col column"},p={class:"column q-pa-sm"},m={class:"col"},h={class:"row"},v={class:"col"},b={class:"col column items-center justify-center"},g={class:"row"},k={class:"col"},E={class:"col"};function C(e,t){var o=(0,n.g2)("q-td"),a=(0,n.g2)("q-datetime"),l=(0,n.g2)("q-popup-edit"),i=(0,n.g2)("q-toggle"),r=(0,n.g2)("q-tooltip"),s=(0,n.g2)("q-btn"),u=(0,n.g2)("q-tr"),C=(0,n.g2)("q-table"),A=(0,n.g2)("q-page-sticky"),w=(0,n.g2)("q-input"),I=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(C,{data:e.dsProcesos,columns:e.columns,style:{"max-height":"100%"}},{body:(0,n.k6)(function(f){return[(0,n.bF)(u,{props:f},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{key:"ANOBEC",props:f},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(f.row.ANOBEC),1)]}),_:2},1032,["props"]),(0,n.bF)(o,{key:"FECHA_APERTURA",props:f},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(e.date(f.row.FECHA_APERTURA,"DD/MM/YYYY")),1),e.acceso?((0,n.uX)(),(0,n.Wv)(l,{key:0,modelValue:f.row.FECHA_APERTURA,"onUpdate:modelValue":function(e){return f.row.FECHA_APERTURA=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{class:"q-if-outlined",type:"date",modelValue:f.row.FECHA_APERTURA,"onUpdate:modelValue":function(e){return f.row.FECHA_APERTURA=e},format:"DD/MM/YYYY",placeholder:"Fecha apertura",onChange:function(t){return e.updatePeriodo(f.row)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(o,{key:"FECHA_LIMITE",props:f},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(e.date(f.row.FECHA_LIMITE,"DD/MM/YYYY")),1),e.acceso?((0,n.uX)(),(0,n.Wv)(l,{key:0,modelValue:f.row.FECHA_LIMITE,"onUpdate:modelValue":function(e){return f.row.FECHA_LIMITE=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{class:"q-if-outlined",type:"date",modelValue:f.row.FECHA_LIMITE,"onUpdate:modelValue":function(e){return f.row.FECHA_LIMITE=e},format:"DD/MM/YYYY",placeholder:"Fecha límite",onChange:function(t){return e.updateFechaLimite(f.row)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(o,{key:"ACTIVO",props:f},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{modelValue:f.row.ACTIVO,"onUpdate:modelValue":function(e){return f.row.ACTIVO=e},onInput:function(t){return e.updatePeriodo(f.row)},"true-value":1,"false-value":0,disable:!e.acceso},null,8,["modelValue","onUpdate:modelValue","onInput","disable"])]}),_:2},1032,["props"]),(0,n.bF)(o,{key:"acciones",props:f},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{flat:"",color:"negative",icon:"delete",onClick:function(t){return e.deletePeriodo(f.row.ID_BECA_PERIODO)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[6]||(t[6]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"]),e.acceso?((0,n.uX)(),(0,n.Wv)(A,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{fab:"",round:"",color:"secondary",icon:"add",onClick:t[0]||(t[0]=function(t){return e.showNewProceso=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(t[7]||(t[7]=[(0,n.eW)("Nuevo proceso",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(I,{modelValue:e.showNewProceso,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.showNewProceso=t}),title:"Nuevo periodo",onSubmit:e.savePeriodo,ok:"Guardar"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",p,[(0,n.Lk)("div",m,[(0,n.Lk)("div",h,[(0,n.Lk)("div",v,[(0,n.bF)(w,{class:"q-if-outlined","float-label":"Año",modelValue:e.form.ANOBEC,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.ANOBEC=t}),maxlength:"4"},null,8,["modelValue"])]),(0,n.Lk)("div",b,[(0,n.bF)(i,{modelValue:e.form.ACTIVO,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.ACTIVO=t}),label:"Activo","true-value":1,"false-value":0},null,8,["modelValue"])])])]),(0,n.Lk)("div",g,[(0,n.Lk)("div",k,[(0,n.bF)(a,{class:"q-if-outlined",type:"date",modelValue:e.form.FECHA_APERTURA,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.FECHA_APERTURA=t}),format:"DD/MM/YYYY",placeholder:"Fecha apertura"},null,8,["modelValue"])]),(0,n.Lk)("div",E,[(0,n.bF)(a,{class:"q-if-outlined",type:"date",modelValue:e.form.FECHA_LIMITE,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.FECHA_LIMITE=t}),format:"DD/MM/YYYY",placeholder:"Fecha límite"},null,8,["modelValue"])])])])]}),_:1},8,["modelValue","onSubmit"])])}var A=o(76080),w=o.n(A),I=o(45254),O=o.n(I),_=o(24729),F=o(30545),S=o(982),D=o(30640),T=o(18105),y=o(57668),U={components:{QTable:F.A,QTr:s.qh,QTd:s.Ef,QPopupEdit:s.GT,QToggle:s.c5,QPageSticky:s._U,QDatetime:s.T5,Dialog:_.A,notify:S["default"],sieModal:D.A,sieInfo:y["default"],QBtn:s.Il,QTooltip:s.nC,QInput:s.ie},data:function(){return{acceso:(0,y["default"])().ruta.nivel>=2,showNewProceso:!1,form:{ANOBEC:"",FECHA_APERTURA:null,FECHA_LIMITE:null,ACTIVO:1},dsProcesos:[],columns:[{name:"ANOBEC",label:"AÑO",field:"ANOBEC",align:"center"},{name:"FECHA_APERTURA",label:"FEC. APERTURA",field:"FECHA_APERTURA",align:"center"},{name:"FECHA_LIMITE",label:"FEC. LÍMITE",field:"FECHA_LIMITE",align:"center"},{name:"ACTIVO",label:"ACTIVO",field:"ACTIVO",align:"center"},{name:"acciones",label:"ACCIONES",align:"center"}]}},methods:{date:T.Ay,getProcesos:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/HyoBecaPeriodo/getPeriodos");case 1:o=t.v,n=o.json,e.dsProcesos=n,t.n=3;break;case 2:t.p=2,a=t.v,console.log(a);case 3:return t.a(2)}},t,null,[[0,2]])}))()},savePeriodo:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,e.form.ANOBEC&&e.form.FECHA_APERTURA&&e.form.FECHA_LIMITE){t.n=1;break}return(0,S["default"])("Por favor completar todos los datos","error"),t.a(2);case 1:return t.n=2,e.$http.post("api/HyoBecaPeriodo/savePeriodo",{data:e.form});case 2:o=t.v,n=o.json,"Ok"===n.status&&((0,S["default"])(n.message),e.showNewProceso=!1,e.getProcesos()),t.n=4;break;case 3:t.p=3,a=t.v,(0,S["default"])(a.error.message,"error");case 4:return t.a(2)}},t,null,[[0,3]])}))()},updatePeriodo:function(e){var t=this;return O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_BECA_PERIODO,data:e},o.p=1,o.n=2,t.$http.put("api/HyoBecaPeriodo/updatePeriodo",n);case 2:a=o.v,l=a.json,"Ok"===l.status&&(0,S["default"])(l.message),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.p=4,t.getProcesos(),o.f(4);case 5:return o.a(2)}},o,null,[[1,3,4,5]])}))()},updateFechaLimite:function(e){var t=this;return O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e.ID_BECA_PERIODO,fecha:e.FECHA_LIMITE},o.p=1,o.n=2,t.$http.put("api/HyoBecaPeriodo/updateFechaLimite",n);case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getProcesos()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deletePeriodo:function(e){var t=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaPeriodo/deletePeriodo",{params:n});case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getProcesos()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()}},mounted:function(){this.getProcesos()}},M=o(12807);const V=(0,M.A)(U,[["render",C]]);var q=V,N=(o(71225),o(50310),o(5962),o(83190),{class:"intranet-becas--dashboard--solicitudes"}),Q={class:"col-12"},P={class:"row items-center"},R={class:"col justify-end q-gutter-sm row"},H={key:0,class:"col-12 q-pt-md"},L={class:"row q-col-gutter-sm"},B={class:"col-md-6 col-xs-12"},x={class:"row q-col-gutter-sm"},j={class:"col-3"},W={class:"col-9"},$={class:"col-md-3 col-xs-12"},X={class:"row q-col-gutter-sm"},G={class:"col-6"},Y={class:"col-6"},z={class:"col-md-3 col-xs-12"},J={class:"row q-col-gutter-sm"},K={class:"col-10"},Z={class:"col-2"};function ee(e,t){var o=(0,n.g2)("q-tooltip"),a=(0,n.g2)("q-btn"),l=(0,n.g2)("q-input"),i=(0,n.g2)("q-datetime"),r=(0,n.g2)("q-select"),s=(0,n.g2)("q-td"),u=(0,n.g2)("estado"),f=(0,n.g2)("q-tr"),p=(0,n.g2)("q-table"),m=(0,n.g2)("historial"),h=(0,n.g2)("participantes");return(0,n.uX)(),(0,n.CE)("div",N,[(0,n.bF)(p,{dense:"",flat:"",bordered:"",data:e.objActual,columns:e.columns,"row-key":"ID_BECA_SOLICITUD","virtual-scroll":"",style:{"max-height":"75vh"},pagination:e.pagination,"onUpdate:pagination":t[5]||(t[5]=function(t){return e.pagination=t}),"row-per-page-options":[0]},{top:(0,n.k6)(function(s){return[(0,n.Lk)("div",Q,[(0,n.Lk)("div",P,[(0,n.bF)(a,{icon:e.iconFilter,color:"primary",onClick:e.showHideFilters,flat:"",round:"",dense:""},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(e.textTooltipFilter),1)]}),_:1})]}),_:1},8,["icon","onClick"]),(0,n.Lk)("div",R,[e.acceso&&e.showBtnRegularizarDeuda?((0,n.uX)(),(0,n.Wv)(a,{key:0,icon:"sync",label:"Regularizar deudas",color:"primary",onClick:e.syncDeudas,size:"sm"},null,8,["onClick"])):(0,n.Q3)("v-if",!0),(0,n.bF)(a,{icon:"sync",label:"Sincronizar estados",color:"primary",onClick:e.syncEstados,size:"sm",disable:!e.acceso},null,8,["onClick","disable"]),(0,n.bF)(a,{icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getSolicitudes,flat:""},null,8,["onClick"]),(0,n.bF)(a,{icon:"print",label:"Imprimir",color:"secondary",size:"sm",onClick:e.imprimir,flat:""},null,8,["onClick"])])])]),e.showFilter?((0,n.uX)(),(0,n.CE)("div",H,[(0,n.Lk)("div",L,[(0,n.Lk)("div",B,[(0,n.Lk)("div",x,[(0,n.Lk)("div",j,[(0,n.bF)(l,{modelValue:e.filter.famcod,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.famcod=t}),label:"Código"},null,8,["modelValue"])]),(0,n.Lk)("div",W,[(0,n.bF)(l,{modelValue:e.filter.famdes,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.famdes=t}),label:"Familia"},null,8,["modelValue"])])])]),(0,n.Lk)("div",$,[(0,n.Lk)("div",X,[(0,n.Lk)("div",G,[(0,n.bF)(i,{label:"Fecha Inicio",modelValue:e.filter.fecini,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.filter.fecini=t}),type:"date",format:"DD/MM/YYYY",onInput:e.getSolicitudes},null,8,["modelValue","onInput"])]),(0,n.Lk)("div",Y,[(0,n.bF)(i,{label:"Fecha Fin",modelValue:e.filter.fecfin,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.filter.fecfin=t}),type:"date",format:"DD/MM/YYYY",onInput:e.getSolicitudes},null,8,["modelValue","onInput"])])])]),(0,n.Lk)("div",z,[(0,n.Lk)("div",J,[(0,n.Lk)("div",K,[(0,n.bF)(r,{modelValue:e.filter.estado,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.filter.estado=t}),options:e.dsEstados,label:"Estado"},null,8,["modelValue","options"])]),(0,n.Lk)("div",Z,[(0,n.bF)(a,{flat:"",icon:"broom",round:"",onClick:e.cleanFilters,color:"primary",dense:""},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[9]||(t[9]=[(0,n.eW)("Restablecer",-1)]))}),_:1})]}),_:1},8,["onClick"])])])])])])):(0,n.Q3)("v-if",!0)]}),body:(0,n.k6)(function(l){return[(0,n.bF)(f,{props:l},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{key:"FAMCOD",props:l},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(l.row.FAMCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"FAMDES",props:l},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(l.row.FAMDES),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"FECHA_REG",props:l},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,d.v_)(e.date(l.row.FECHA_REG,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"FECHA_LIMITE",props:l},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,d.v_)(e.date(l.row.FECHA_LIMITE,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"ESTADO",props:l},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{state:l.row.ESTADO,"show-button":"",onShowHistory:function(t){return e.showHistorial(l.row.ID_BECA_SOLICITUD)}},null,8,["state","onShowHistory"])]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"ACCIONES",props:l},{default:(0,n.k6)(function(){return[1!=l.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:0,color:"primary",icon:"contenidos",flat:"",disable:l.row.ESTADO<4,onClick:function(t){return e.goDetalle(l.row.FAMCOD)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[10]||(t[10]=[(0,n.eW)("Detalle",-1)]))}),_:1})]}),_:1},8,["disable","onClick"])):(0,n.Q3)("v-if",!0),1!=l.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:1,color:"primary",icon:"sync",flat:"",onClick:function(t){return e.syncDoc(l.row.ID_BECA_SOLICITUD)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[11]||(t[11]=[(0,n.eW)("Sincronizar Documentos",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),(0,n.bF)(a,{color:"secondary",icon:"family",flat:"",onClick:function(t){return e.exportar(l.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[12]||(t[12]=[(0,n.eW)("Datos Familia",-1)]))}),_:1})]}),_:1},8,["onClick"]),l.row.ALUNOSOL>0&&[2,9].indexOf(l.row.ESTADO)>=0?((0,n.uX)(),(0,n.Wv)(a,{key:2,color:"positive",icon:"add",flat:"",onClick:function(t){return e.addEstudiantes(l.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[13]||(t[13]=[(0,n.eW)("Agregar Alumno",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),1!=l.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:3,color:"negative",icon:"delete",flat:"",onClick:function(t){return e.delSolicitud(l.row.ID_BECA_SOLICITUD)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[14]||(t[14]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),1==l.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:4,color:"positive",icon:"verified",flat:"",onClick:function(t){return e.showEstudiantes(l.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[15]||(t[15]=[(0,n.eW)("Aprobar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),1==l.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:5,color:"negative",icon:"test_cancel",flat:"",onClick:function(t){return e.updateSolicitud(l.row.ID_BECA_SOLICITUD,3)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[16]||(t[16]=[(0,n.eW)("Rechazar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"]),(0,n.bF)(m,{modelValue:e.showHistory,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.showHistory=t}),id:e.idSolicitud,onCerrar:t[7]||(t[7]=function(t){return e.idSolicitud=0})},null,8,["modelValue","id"]),(0,n.bF)(h,{modelValue:e.showStudens,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.showStudens=t}),famcod:e.famcod,periodo:e.periodo,agregaEstudiante:e.agregaEstudiante,onProcesar:e.approveSolicitud},null,8,["modelValue","famcod","periodo","agregaEstudiante","onProcesar"])])}o(30683),o(39866),o(10239),o(11777);var te=o(50425),oe={class:"col column q-pa-sm"};function ne(e,t){var o=(0,n.g2)("estado"),a=(0,n.g2)("q-td"),l=(0,n.g2)("q-tr"),i=(0,n.g2)("q-table"),r=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(r,{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t}),title:"Historial",footer:!1,css:{minWidth:"40vw"},onShow:e.getHistorial,onClose:e.cerrar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",oe,[(0,n.bF)(i,{data:e.dsHistorial,columns:e.columns,style:{"max-height":"100%"}},{body:(0,n.k6)(function(t){return[(0,n.bF)(l,{props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"ESTADO_FECHA",props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{state:t.row.ESTADO_FECHA},null,8,["state"])]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"FECHA",props:t},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,d.v_)(e.date(t.row.FECHA,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"USUCOD",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(t.row.USUCOD),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])])]}),_:1},8,["modelValue","onShow","onClose"])])}var ae={class:"row justify-center"};function le(e,t){var o=(0,n.g2)("q-chip"),a=(0,n.g2)("q-tooltip"),l=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.CE)("div",ae,[(0,n.bF)(o,{color:"primary",dense:""},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(e.estadoDes),1)]}),_:1}),e.showButton?((0,n.uX)(),(0,n.Wv)(l,{key:0,name:"view_history",color:"primary",size:"24px",onClick:e.showHistory,style:{cursor:"pointer"}},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[0]||(t[0]=[(0,n.eW)("Historial",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])}var ie=1,re=2,se=3,ue=4,ce=5,de=6,fe=7,pe=8,me=9,he=10,ve={emits:["showHistory"],props:{state:{type:Number,required:!0},showButton:{type:Boolean,default:!1}},components:{QChip:s.wQ,QIcon:s.bP,QTooltip:s.nC},methods:{showHistory:function(){this.$emit("showHistory")}},computed:{estadoDes:function(){var e;switch(this.state){case ie:e="Solicitado";break;case re:e="Aceptado";break;case se:e="Rechazado";break;case ue:e="Pagado";break;case ce:e="Expediente Incompleto";break;case de:e="Expediente Completo";break;case fe:e="Expediente Validado";break;case pe:e="Resolución";break;case me:e="Exonerado";break;case he:e="Estudiante Agregado";break}return e}}};const be=(0,M.A)(ve,[["render",le]]);var ge=be,ke={emits:["cerrar","update:modelValue","input"],props:{id:{type:Number,required:!0},modelValue:{type:Boolean,default:!1}},components:{QTable:F.A,QTr:s.qh,QTd:s.Ef,sieModal:D.A,estado:ge},data:function(){return{dsHistorial:[],columns:[{name:"ESTADO_FECHA",field:"ESTADO_FECHA",label:"ESTADO",align:"center"},{name:"FECHA",field:"FECHA",label:"FECHA",align:"center"},{name:"USUCOD",field:"USUCOD",label:"USUARIO",align:"center"}]}},methods:{date:T.Ay,getHistorial:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={id:e.id},t.p=1,t.n=2,e.$http.get("api/HyoBecaEstadoFecha/getHistorial",{params:o});case 2:n=t.v,a=n.json,e.dsHistorial=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},cerrar:function(){this.$emit("cerrar")}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const Ee=(0,M.A)(ke,[["render",ne]]);var Ce=Ee,Ae={class:"col q-pa-sm"},we={class:"col column q-pa-sm"};function Ie(e,t){var o=(0,n.g2)("q-toggle"),a=(0,n.g2)("q-table"),l=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(l,{modelValue:e.model,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.model=t}),title:"Estudiantes",css:{minWidth:"60vw"},ok:"Aprobar",onShow:e.getEstudiantes,onClose:e.cerrar,onSubmit:e.procesar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ae,[(0,n.bF)(o,{modelValue:e.form.exonerar,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.exonerar=t}),label:"Exonerar Pago","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",we,[(0,n.bF)(a,{data:e.dsEstudiantes,columns:e.columns,selection:"multiple",selected:e.form.selected,"onUpdate:selected":t[1]||(t[1]=function(t){return e.form.selected=t}),"row-key":"ALUCOD",style:{"max-height":"100%"}},null,8,["data","columns","selected"])])]}),_:1},8,["modelValue","onShow","onClose","onSubmit"])])}var Oe={emits:["cerrar","procesar","update:modelValue","input"],props:{famcod:{type:String,required:!0},periodo:{type:Number,required:!1},modelValue:{type:Boolean,default:!1},agregaEstudiante:{type:Boolean,required:!1}},components:{QTable:F.A,QTr:s.qh,QTd:s.Ef,QToggle:s.c5,sieModal:D.A},data:function(){return{dsEstudiantes:[],form:{selected:[],exonerar:"0193"===(0,y["default"])().colcod?1:0},columns:[{name:"ALUCOD",field:"ALUCOD",label:"CÓDIGO",align:"center"},{name:"INSTRUCOD",field:"INSTRUCOD",label:"N",align:"center"},{name:"GRADOCOD",field:"GRADOCOD",label:"G",align:"center"},{name:"NOMCOMP",field:"NOMCOMP",label:"ESTUDIANTE",align:"left"}]}},methods:{getEstudiantes:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={parametros:{famcod:e.famcod,noFretd:!0,periodo:e.periodo,becaParticipa:"N"}},t.p=1,t.n=2,e.$http.get("api/HyoFamilias/obtHijos",{params:o});case 2:n=t.v,a=n.json,e.dsEstudiantes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},cerrar:function(){this.form.selected=[],this.$emit("cerrar")},procesar:function(){this.$emit("procesar",this.form)}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const _e=(0,M.A)(Oe,[["render",Ie]]);var Fe=_e,Se=o(93616),De=o(33001),Te=o(36980),ye=o(9736),Ue=o(16648),Me=o(50304),Ve={props:{periodo:{type:Number,required:!0}},components:{QCard:s.C$,QCardMain:s.d1,QTable:te.A,QTr:s.qh,QTd:s.Ef,QChip:s.wQ,Dialog:_.A,QDatetime:Me.A,sieModal:D.A,notify:S["default"],estado:ge,historial:Ce,participantes:Fe,sieSelect:Se.A,QInput:ye.A,QSelect:Ue.A,QBtn:s.Il,QTooltip:s.nC},data:function(){return{pagination:{rowsPerPage:0},showBtnRegularizarDeuda:["0057","0274"].includes((0,y["default"])().colcod),acceso:(0,y["default"])().ruta.nivel>=2,showHistory:!1,showStudens:!1,showFilter:!1,famcod:"",agregaEstudiante:!1,idSolicitud:0,filter:{famcod:"",famdes:"",fecini:null,fecfin:null,estado:0},dsEstados:[{label:"Todos",value:0},{label:"Solicitado",value:1},{label:"Aceptado",value:2},{label:"Rechazado",value:3},{label:"Pago",value:4},{label:"Exonerado",value:9},{label:"Expediente Incompleto",value:5},{label:"Expediente Completo",value:6},{label:"Expediente Validado",value:7},{label:"Resolución",value:8}],dsSolicitudes:[],columns:[{name:"FAMCOD",field:"FAMCOD",label:"CÓDIGO",align:"center"},{name:"FAMDES",field:"FAMDES",label:"FAMILIA",align:"left"},{name:"FECHA_REG",field:"FECHA_REG",label:"FECHA INSCRIPCIÓN",align:"center"},{name:"ESTADO",field:"ESTADO",label:"ESTADO",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}]}},methods:{date:T.Ay,imprimir:function(e,t){window.open("".concat((0,y["default"])().origin,"/webservice/reporte-tesoreria/reporte-sol-beca?repcod=S02&anobec=").concat((0,y["default"])().ano))},exportar:function(e){window.open("".concat((0,y["default"])().origin,"/webservice/reporte-tesoreria/reporte-sol-beca?repcod=S01&id_solicitud=").concat(e.ID_BECA_SOLICITUD))},showHideFilters:function(){this.showFilter=!this.showFilter},showHistorial:function(e){this.showHistory=!0,this.idSolicitud=e},showEstudiantes:function(e){this.showStudens=!0,this.idSolicitud=e.ID_BECA_SOLICITUD,this.famcod=e.FAMCOD},addEstudiantes:function(e){this.showStudens=!0,this.idSolicitud=e.ID_BECA_SOLICITUD,this.famcod=e.FAMCOD,this.agregaEstudiante=!0},hideEstudiantes:function(){this.idSolicitud=0,this.famcod="",this.agregaEstudiante=!1},goDetalle:function(e){this.$router.push({name:"intranet.becas.dashboard.detalle",params:{famcod:e}})},cleanFilters:function(){this.filter={famcod:"",famdes:"",fecini:null,fecfin:null,estado:0},this.getSolicitudes()},getSolicitudes:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.periodo,fecini:e.filter.fecini,fecfin:e.filter.fecfin},t.p=1,t.n=2,e.$http.get("api/HyoBecaSolicitud/getSolicitudes",{params:o});case 2:n=t.v,a=n.json,e.dsSolicitudes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},approveSolicitud:function(e){var t=this;return O()(w()().m(function o(){var n,a;return w()().w(function(o){while(1)switch(o.n){case 0:n=e.selected,a=e.exonerar,n.length>0?(t.showStudens=!1,t.$q.dialog({title:t.agregaEstudiante?"¿Esta seguro de agregar al alumno?":"¿Esta seguro de aprobar la solicitud?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function e(){var o,l,i,r;return w()().w(function(e){while(1)switch(e.p=e.n){case 0:return o={id:t.idSolicitud,famcod:t.famcod,estudiantes:n,exonerar:a,agregaEstudiante:t.agregaEstudiante},e.p=1,e.n=2,t.$http.post("api/HyoBecaSolicitud/procesoAprobarSolicitud",o);case 2:l=e.v,i=l.json,"Ok"===i.status&&((0,S["default"])(i.message),t.getSolicitudes()),t.hideEstudiantes(),e.n=4;break;case 3:e.p=3,r=e.v,(0,S["default"])(r.error.message,"error");case 4:return e.a(2)}},e,null,[[1,3]])}))).onCancel(function(){})):(0,S["default"])("No hay estudiantes seleccionados","error");case 1:return o.a(2)}},o)}))()},updateSolicitud:function(e,t){var o=this;return O()(w()().m(function n(){var a;return w()().w(function(n){while(1)switch(n.n){case 0:a=2===t?"aprobar":"rechazar",o.$q.dialog({title:"¿Esta seguro de ".concat(a," la solicitud?"),ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function n(){var a,l,i,r;return w()().w(function(n){while(1)switch(n.p=n.n){case 0:return a={id:e,estado:t},n.p=1,n.n=2,o.$http.post("api/HyoBecaSolicitud/procesoUpdateEstado",a);case 2:l=n.v,i=l.json,"Ok"===i.status&&((0,S["default"])(i.message),o.getSolicitudes()),n.n=4;break;case 3:n.p=3,r=n.v,(0,S["default"])(r.error.message,"error");case 4:return n.a(2)}},n,null,[[1,3]])})));case 1:return n.a(2)}},n)}))()},delSolicitud:function(e){var t=this;return O()(w()().m(function o(){var n;return w()().w(function(o){while(1)switch(o.n){case 0:n={id:e,flag:0},t.$q.dialog({title:"¿Esta seguro de eliminar la solicitud?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function e(){var o,a,l,i,r,s;return w()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.$http.delete("api/HyoBecaSolicitud/procesoEliminarSolicitud",{params:n});case 1:o=e.v,a=o.json,"Ok"===a.status&&((0,S["default"])(a.message),t.getSolicitudes()),e.n=3;break;case 2:e.p=2,s=e.v,l=s.error.message.split("::"),i=l[0],r=l[1],"0001"===i&&(0,S["default"])(r,"error"),"0002"===i&&t.$q.dialog({title:"Hay deudas generadas ¿Desea continuar con la eliminación de la solicitud?",message:"".concat(r),ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function e(){var o,a,l;return w()().w(function(e){while(1)switch(e.p=e.n){case 0:return n["flag"]=1,e.p=1,e.n=2,t.$http.delete("api/HyoBecaSolicitud/procesoEliminarSolicitud",{params:n});case 2:o=e.v,a=o.json,"Ok"===a.status&&((0,S["default"])(a.message),t.getSolicitudes()),e.n=4;break;case 3:e.p=3,l=e.v,(0,S["default"])(l.error.message,"error");case 4:return e.a(2)}},e,null,[[1,3]])}))).onCancel(function(){});case 3:return e.a(2)}},e,null,[[0,2]])}))).onCancel(function(){});case 1:return o.a(2)}},o)}))()},syncEstados:function(){var e=this;return O()(w()().m(function t(){return w()().w(function(t){while(1)switch(t.n){case 0:e.$q.dialog({title:"¿Esta seguro de ejecutar el proceso?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function t(){var o,n,a,l;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,o={periodo:e.perActivo},t.n=1,e.$http.post("api/HyoBecaSolicitud/updateEstadosSol",o);case 1:n=t.v,a=n.json,"Ok"===a.status&&((0,S["default"])(a.message),e.getSolicitudes()),t.n=3;break;case 2:t.p=2,l=t.v,(0,S["default"])(l.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))).onCancel(function(){});case 1:return t.a(2)}},t)}))()},syncDeudas:function(){var e=this;return O()(w()().m(function t(){return w()().w(function(t){while(1)switch(t.n){case 0:e.$q.dialog({title:"¿Esta seguro de ejecutar el proceso?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaSolicitud/procesoSincronizarDeudas");case 1:o=t.v,n=o.json,"Ok"===n.status&&(0,S["default"])(n.message),t.n=3;break;case 2:t.p=2,a=t.v,(0,S["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))).onCancel(function(){});case 1:return t.a(2)}},t)}))()},syncDoc:function(e){var t=this;return O()(w()().m(function o(){var n;return w()().w(function(o){while(1)switch(o.n){case 0:n={id:e},t.$q.dialog({title:"¿Esta seguro de ejecutar el proceso?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function e(){var o,a,l;return w()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.$http.post("api/HyoBecaSolicitud/procesoSincronizarDocs",n);case 1:o=e.v,a=o.json,"Ok"===a.status&&(0,S["default"])(a.message),e.n=3;break;case 2:e.p=2,l=e.v,(0,S["default"])(l.error.message,"error");case 3:return e.a(2)}},e,null,[[0,2]])}))).onCancel(function(){});case 1:return o.a(2)}},o)}))()}},computed:r()(r()({},(0,Te.aH)("beca",["perActivo"])),{},{objActual:function(){var e=this.dsSolicitudes;return""!==this.filter.famcod&&(e=(0,De.filterArray)(this.filter.famcod,{field:"FAMCOD",list:e})),""!==this.filter.famdes&&(e=(0,De.filterArray)(this.filter.famdes,{field:"FAMDES",list:e})),0!==this.filter.estado&&(e=(0,De.filterArray)(this.filter.estado,{field:"ESTADO",list:e})),e},iconFilter:function(){return this.showFilter?"filter_remove":"filter_search"},textTooltipFilter:function(){return this.showFilter?"Ocultar filtros":"Mostrar filtros"}}),mounted:function(){this.getSolicitudes()}};const qe=(0,M.A)(Ve,[["render",ee]]);var Ne=qe;function Qe(e,t){var o=(0,n.g2)("q-tab"),a=(0,n.g2)("requisitos"),l=(0,n.g2)("q-tab-pane"),i=(0,n.g2)("mensajes"),r=(0,n.g2)("documentos"),s=(0,n.g2)("ficha"),u=(0,n.g2)("exoneraciones"),c=(0,n.g2)("q-tabs");return(0,n.uX)(),(0,n.Wv)(c,{class:"q-tabs-flex",inverted:"",animated:""},{title:(0,n.k6)(function(){return[(0,n.bF)(o,{name:"requisitos",label:"Requisitos"}),(0,n.bF)(o,{name:"mensajes",label:"Mensajes",default:""}),(0,n.bF)(o,{name:"documentos",label:"Documentos"}),(0,n.bF)(o,{name:"ficha",label:"Ficha Económica"}),e.isVcSp?((0,n.uX)(),(0,n.Wv)(o,{key:0,name:"exoneraciones",label:"Exoneraciones"})):(0,n.Q3)("v-if",!0)]}),default:(0,n.k6)(function(){return[(0,n.bF)(l,{name:"requisitos"},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(l,{name:"mensajes"},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(l,{name:"documentos"},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(l,{name:"ficha"},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(l,{name:"exoneraciones"},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{acceso:e.acceso},null,8,["acceso"])]}),_:1})]}),_:1})}var Pe={class:"col column"},Re={class:"row gutter-sm"},He=["innerHTML"],Le={class:"q-pa-sm"},Be={class:"row gutter-sm"},xe={class:"col"},je={class:"col"},We={class:"col"},$e={class:"col"},Xe={key:0,class:"row q-my-sm"},Ge={class:"row"};function Ye(e,t){var o=(0,n.g2)("q-tooltip"),a=(0,n.g2)("q-btn"),l=(0,n.g2)("q-card-title"),i=(0,n.g2)("q-card-main"),r=(0,n.g2)("q-card"),s=(0,n.g2)("sie-select"),u=(0,n.g2)("sie-editor"),d=(0,n.g2)("sie-modal"),f=(0,n.g2)("q-page-sticky");return(0,n.uX)(),(0,n.CE)("div",Pe,[(0,n.Lk)("div",Re,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dsMensajes,function(s){return(0,n.uX)(),(0,n.CE)("div",{key:s.ID_BECA_MENSAJE,class:"col-md-12"},[(0,n.bF)(r,null,{default:(0,n.k6)(function(){return[(0,n.bF)(l,null,{right:(0,n.k6)(function(){return[(0,n.Lk)("span",null,[(0,n.bF)(a,{flat:"",icon:"edit",color:"secondary",onClick:function(t){return e.showEditModal(s)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[7]||(t[7]=[(0,n.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,n.bF)(a,{flat:"",icon:"delete",color:"negative",onClick:function(t){return e.delMensaje(s.ID_BECA_MENSAJE)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[8]||(t[8]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])])]}),default:(0,n.k6)(function(){return[t[9]||(t[9]=(0,n.eW)(" ",-1))]}),_:2},1024),(0,n.bF)(i,{class:"col",style:{"line-height":"22px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",{innerHTML:s.TEXTO},null,8,He)]}),_:2},1024)]}),_:2},1024)])}),128))]),(0,n.bF)(d,{title:e.titleModal,modelValue:e.showNewMen,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.showNewMen=t}),onSubmit:e.grabar,onClose:e.hideModal,onShow:e.showModal,ok:"Guardar",css:{minWidth:"60vw"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Le,[(0,n.Lk)("div",Be,[(0,n.Lk)("div",xe,[(0,n.bF)(s,{type:"outlined",options:e.dsTipo,modelValue:e.form.TIPO_MENSAJE,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.TIPO_MENSAJE=t}),label:"label",val:"value",placeholder:"Tipo mensaje"},null,8,["options","modelValue"])]),(0,n.Lk)("div",je,[(0,n.bF)(s,{type:"outlined",options:e.dsRequisitos,modelValue:e.form.ID_BECA_REQUISITO,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.ID_BECA_REQUISITO=t}),label:"REQUISITO",val:"ID_BECA_REQUISITO",placeholder:"Requisito"},null,8,["options","modelValue"])]),(0,n.Lk)("div",We,[(0,n.bF)(s,{type:"outlined",options:e.dsPasos,modelValue:e.form.PAGINA,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.PAGINA=t}),label:"label",val:"value",placeholder:"Página"},null,8,["options","modelValue"])]),(0,n.Lk)("div",$e,[(0,n.bF)(s,{type:"outlined",options:e.dsEstados,modelValue:e.form.ESTADO_BECA,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.ESTADO_BECA=t}),label:"label",val:"value",placeholder:"Estado"},null,8,["options","modelValue"])])]),8===e.form.ESTADO_BECA?((0,n.uX)(),(0,n.CE)("div",Xe,c()(t[10]||(t[10]=[(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("p",null,[(0,n.eW)("Etiquetas:"),(0,n.Lk)("b",null,"{alumno}, {beca}, {mesinicio}, {mesfin}")])],-1)])))):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",Ge,[(0,n.bF)(u,{class:"col",modelValue:e.form.TEXTO,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.TEXTO=t}),label:"Mensaje"},null,8,["modelValue"])])])]}),_:1},8,["title","modelValue","onSubmit","onClose","onShow"]),e.acceso?((0,n.uX)(),(0,n.Wv)(f,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{fab:"",round:"",color:"secondary",icon:"add",onClick:t[6]||(t[6]=function(t){return e.showNewMen=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(t[11]||(t[11]=[(0,n.eW)("Nuevo mensaje",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0)])}var ze=o(6083),Je={props:{acceso:{type:Boolean,required:!0}},components:{QTable:F.A,QTr:s.qh,QTd:s.Ef,QCard:s.C$,QCardMain:s.d1,QCardSeparator:s.d6,QCardActions:s.zZ,QPageSticky:s._U,sieSelect:Se.A,sieModal:D.A,notify:S["default"],sieEditor:ze.A,QCardTitle:s.u0,QBtn:s.Il,QTooltip:s.nC},data:function(){return{showNewMen:!1,isEdit:!1,idBecaMensaje:null,titleModal:"Nuevo mensaje",form:{ID_BECA_PERIODO:null,ID_BECA_REQUISITO:null,TIPO_MENSAJE:null,PAGINA:null,ESTADO_BECA:null,TEXTO:""},dsEstados:[{label:"Ninguno",value:-1},{label:"Bienvenida",value:0},{label:"Solicitado",value:1},{label:"Aceptado",value:2},{label:"Rechazado",value:3},{label:"Pago",value:4},{label:"Expediente Incompleto",value:5},{label:"Expediente Completo",value:6},{label:"Expediente Validado",value:7},{label:"Resolución",value:8}],dsPasos:[{label:"Presentación",value:1},{label:"Participantes",value:2},{label:"Expediente",value:3},{label:"Ficha",value:4},{label:"Encuesta",value:6},{label:"Resolución",value:7}],dsTipo:[{label:"Exitoso",value:1},{label:"Error",value:2},{label:"Advertencia",value:3},{label:"Aviso",value:4},{label:"Texto",value:5}],dsRequisitos:[],dsMensajes:[],columns:[{name:"TEXTO",field:"TEXTO",label:"MENSAJE",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}]}},methods:{init:function(){this.getMensajes(),this.getRequisitos()},showModal:function(){this.form["ID_BECA_PERIODO"]=this.perActivo},showEditModal:function(e){this.isEdit=!0,this.showNewMen=!0,this.titleModal="Editar mensaje",this.form.TEXTO=e.TEXTO,this.form.ID_BECA_REQUISITO=e.ID_BECA_REQUISITO,this.form.TIPO_MENSAJE=e.TIPO_MENSAJE,this.form.PAGINA=e.PAGINA,this.form.ESTADO_BECA=e.ESTADO_BECA,this.idBecaMensaje=e.ID_BECA_MENSAJE},hideModal:function(){this.isEdit=!1,this.idBecaMensaje=!1,this.titleModal="Nuevo mensaje",this.form={ID_BECA_PERIODO:this.perActivo,TIPO_MENSAJE:null,ID_BECA_REQUISITO:null,PAGINA:null,ESTADO_BECA:null,TEXTO:""}},grabar:function(){this.isEdit?this.editMensaje():this.saveMensaje()},getRequisitos:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaRequisito/getRequisitos",{params:o});case 2:n=t.v,a=n.json,e.dsRequisitos=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},getMensajes:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaMensaje/getMensajes",{params:o});case 2:n=t.v,a=n.json,e.dsMensajes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},saveMensaje:function(){var e=this;return O()(w()().m(function t(){var o,n,a,l;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={data:e.form},t.p=1,t.n=2,e.$http.post("api/HyoBecaMensaje/saveMensaje",o);case 2:n=t.v,a=n.json,"Ok"===a.status&&((0,S["default"])(a.message),e.getMensajes(),e.showNewMen=!1),t.n=4;break;case 3:t.p=3,l=t.v,(0,S["default"])(l.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()},editMensaje:function(){var e=this;return O()(w()().m(function t(){var o,n,a,l;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={id:e.idBecaMensaje,data:e.form},t.p=1,t.n=2,e.$http.put("api/HyoBecaMensaje/updateMensaje",o);case 2:n=t.v,a=n.json,"Ok"===a.status&&((0,S["default"])(a.message),e.getMensajes(),e.showNewMen=!1),t.n=4;break;case 3:t.p=3,l=t.v,(0,S["default"])(l.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()},delMensaje:function(e){var t=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/hyoBecaMensaje/deleteMensaje",{params:n});case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getMensajes()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()}},computed:r()({},(0,Te.aH)("beca",["perActivo"])),mounted:function(){this.init()}};const Ke=(0,M.A)(Je,[["render",Ye]]);var Ze=Ke,et={class:"col column q-pa-sm"},tt={class:"row"},ot={class:"col column q-ma-sm"},nt={class:"col row"},at={class:"col"},lt={key:0,class:"col column"};function it(e,t){var o=(0,n.g2)("q-input"),a=(0,n.g2)("q-popup-edit"),l=(0,n.g2)("q-td"),i=(0,n.g2)("q-tooltip"),r=(0,n.g2)("q-btn"),s=(0,n.g2)("q-tr"),u=(0,n.g2)("q-table"),f=(0,n.g2)("q-page-sticky"),p=(0,n.g2)("q-toggle"),m=(0,n.g2)("sie-upload"),h=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",et,[(0,n.bF)(u,{class:"col",data:e.dsDocs,columns:e.columns},{body:(0,n.k6)(function(u){return[(0,n.bF)(s,{props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{key:"DOCUMENTO",props:u},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(u.row.DOCUMENTO),1),e.acceso?((0,n.uX)(),(0,n.Wv)(a,{key:0,modelValue:u.row.DOCUMENTO,"onUpdate:modelValue":function(e){return u.row.DOCUMENTO=e},modelModifiers:{number:!0},buttons:"",onSave:function(t){return e.updateDoc(u.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{class:"q-if-outlined",modelValue:u.row.DOCUMENTO,"onUpdate:modelValue":function(e){return u.row.DOCUMENTO=e},modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(l,{key:"REQUISITO",props:u},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(u.row.REQUISITO),1),e.acceso?((0,n.uX)(),(0,n.Wv)(a,{key:0,modelValue:u.row.REQUISITO,"onUpdate:modelValue":function(e){return u.row.REQUISITO=e},modelModifiers:{number:!0},buttons:"",onSave:function(t){return e.updateDoc(u.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{class:"q-if-outlined",modelValue:u.row.REQUISITO,"onUpdate:modelValue":function(e){return u.row.REQUISITO=e},modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(l,{key:"ACCIONES",props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{flat:"",color:"negative",icon:"delete",onClick:function(t){return e.deleteDoc(u.row.ID_BECA_DOCUMENTO)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[5]||(t[5]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"]),e.acceso?((0,n.uX)(),(0,n.Wv)(f,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{fab:"",round:"",color:"secondary",icon:"add",onClick:t[0]||(t[0]=function(t){return e.showNewDoc=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(t[6]||(t[6]=[(0,n.eW)("Nuevo documento",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(h,{modelValue:e.showNewDoc,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.showNewDoc=t}),title:"Nuevo documento",ok:"Guardar",css:{minWidth:"60vw"},onSubmit:e.saveDoc,onShow:e.showModal,onClose:e.hideModalDoc},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",tt,[(0,n.Lk)("div",ot,[(0,n.Lk)("div",null,[(0,n.bF)(o,{class:"q-if-outlined","float-label":"Nombre documento",modelValue:e.form.DOCUMENTO,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.DOCUMENTO=t})},null,8,["modelValue"])]),(0,n.Lk)("div",null,[(0,n.bF)(o,{class:"q-if-outlined",type:"textarea",rows:"5","max-height":80,"float-label":"Instrucciones",modelValue:e.form.REQUISITO,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.REQUISITO=t})},null,8,["modelValue"])]),(0,n.Lk)("div",nt,[(0,n.Lk)("div",at,[(0,n.bF)(p,{modelValue:e.form.DOC_GRUPAL,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.DOC_GRUPAL=t}),label:"Por alumno","left-label":"","true-value":2,"false-value":1},null,8,["modelValue"])])])]),2===e.form.TIPO_DOCUMENTO?((0,n.uX)(),(0,n.CE)("div",lt,[(0,n.bF)(m,{onUpload:e.uploadEscudo,name:!0,title:"Clic para subir un documento"},null,8,["onUpload"])])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit","onShow","onClose"])])}o(56285);var rt=o(59089),st=o(33950),ut={props:{acceso:{type:Boolean,required:!0}},components:{QTable:F.A,QTr:s.qh,QTd:s.Ef,QToggle:s.c5,QPopupEdit:s.GT,QPageSticky:s._U,Dialog:_.A,sieModal:D.A,sieUpload:rt.A,Upload:st["default"],QInput:s.ie,QBtn:s.Il,QTooltip:s.nC},data:function(){return{showNewDoc:!1,form:{ID_BECA_PERIODO:null,DOCUMENTO:"",REQUISITO:"",TIPO_DOCUMENTO:1,DOC_GRUPAL:1,docs:[]},dsDocs:[],columns:[{name:"DOCUMENTO",field:"DOCUMENTO",label:"NOMBRE",align:"left"},{name:"REQUISITO",field:"REQUISITO",label:"INSTRUCCIONES",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}]}},methods:{showModal:function(){this.form["ID_BECA_PERIODO"]=this.perActivo},hideModalDoc:function(){this.form={ID_BECA_PERIODO:this.perActivo,DOCUMENTO:"",REQUISITO:"",TIPO_DOCUMENTO:1,DOC_GRUPAL:1,docs:[]}},upload:function(e){var t=this;return O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n=e[0],a=n.name,o.p=1,o.n=2,(0,st["default"])({file:n});case 2:l=o.v,i=l.temp,t.form.docs.push({name:a,temp:i}),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},getDocs:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaDocumento/getDocumentos",{params:o});case 2:n=t.v,a=n.json,e.dsDocs=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},saveDoc:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaDocumento/saveDocumento",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&((0,S["default"])(n.message),e.showNewDoc=!1,e.getDocs()),t.n=3;break;case 2:t.p=2,a=t.v,(0,S["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},updateDoc:function(e){var t=this;return O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_BECA_DOCUMENTO,data:e},o.p=1,o.n=2,t.$http.put("api/HyoBecaDocumento/updateDoc",n);case 2:a=o.v,l=a.json,"Ok"===l.status&&(0,S["default"])(l.message),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deleteDoc:function(e){var t=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaDocumento/deleteDoc",{params:n});case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getDocs()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()}},computed:r()({},(0,Te.aH)("beca",["perActivo"])),mounted:function(){this.getDocs()}};const ct=(0,M.A)(ut,[["render",it]]);var dt=ct,ft={class:"col column q-pa-sm"},pt={class:"q-pa-sm column"},mt={class:"col"};function ht(e,t){var o=(0,n.g2)("q-input"),a=(0,n.g2)("q-popup-edit"),l=(0,n.g2)("q-td"),i=(0,n.g2)("q-tooltip"),r=(0,n.g2)("q-btn"),s=(0,n.g2)("q-tr"),u=(0,n.g2)("q-table"),f=(0,n.g2)("q-page-sticky"),p=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",ft,[(0,n.bF)(u,{class:"col",data:e.dsRequisitos,columns:e.columns},{body:(0,n.k6)(function(u){return[(0,n.bF)(s,{props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{key:"REQUISITO",props:u},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(u.row.REQUISITO),1),e.acceso?((0,n.uX)(),(0,n.Wv)(a,{key:0,buttons:"",modelValue:u.row.REQUISITO,"onUpdate:modelValue":function(e){return u.row.REQUISITO=e},onSave:function(t){return e.updateRequisito(u.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{class:"q-if-outlined",modelValue:u.row.REQUISITO,"onUpdate:modelValue":function(e){return u.row.REQUISITO=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(l,{key:"ACCIONES",props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{color:"negative",icon:"delete",onClick:function(t){return e.deleteRequisito(u.row.ID_BECA_REQUISITO)},flat:"",disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[3]||(t[3]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"]),e.acceso?((0,n.uX)(),(0,n.Wv)(f,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{fab:"",round:"",color:"secondary",icon:"add",onClick:t[0]||(t[0]=function(t){return e.showModal=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(t[4]||(t[4]=[(0,n.eW)("Nuevo requisito",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(p,{modelValue:e.showModal,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.showModal=t}),title:"Nuevo requisito",ok:"Guardar",onSubmit:e.saveRequisito,onShow:e.openModal,onClose:e.hideModal},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",pt,[(0,n.Lk)("div",mt,[(0,n.bF)(o,{class:"q-if-outlined","float-label":"Requisito",modelValue:e.form.REQUISITO,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.REQUISITO=t})},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit","onShow","onClose"])])}var vt={props:{acceso:{type:Boolean,required:!0}},components:{QTable:F.A,QTr:s.qh,QTd:s.Ef,QToggle:s.c5,QPopupEdit:s.GT,QPageSticky:s._U,Dialog:_.A,sieModal:D.A,notify:S["default"],QInput:s.ie,QBtn:s.Il,QTooltip:s.nC},data:function(){return{columns:[{name:"REQUISITO",field:"REQUISITO",label:"REQUISITO",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],dsRequisitos:[],form:{ID_BECA_PERIODO:null,REQUISITO:""},showModal:!1}},methods:{hideModal:function(){this.form={ID_BECA_PERIODO:this.perActivo,REQUISITO:""}},openModal:function(){this.form["ID_BECA_PERIODO"]=this.perActivo},getRequisitos:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaRequisito/getRequisitos",{params:o});case 2:n=t.v,a=n.json,e.dsRequisitos=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},saveRequisito:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaRequisito/saveRequisito",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&((0,S["default"])(n.message),e.getRequisitos(),e.showModal=!1),t.n=3;break;case 2:t.p=2,a=t.v,(0,S["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},updateRequisito:function(e){var t=this;return O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_BECA_REQUISITO,data:e},o.p=1,o.n=2,t.$http.put("api/HyoBecaRequisito/updateRequisito",n);case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getRequisitos()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deleteRequisito:function(e){var t=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaRequisito/deleteRequisito",{params:n});case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getRequisitos()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()}},computed:r()({},(0,Te.aH)("beca",["perActivo"])),mounted:function(){this.getRequisitos()}};const bt=(0,M.A)(vt,[["render",ht]]);var gt=bt,kt={class:"col column q-pa-sm"},Et={class:"col"},Ct={class:"col row reverse"},At={key:0},wt={key:1},It={class:"row q-ma-sm"},Ot={class:"col-md-8"},_t={class:"col column items-center justify-center"};function Ft(e,t){var o=(0,n.g2)("q-toggle"),a=(0,n.g2)("q-btn"),l=(0,n.g2)("q-input"),i=(0,n.g2)("q-popup-edit"),r=(0,n.g2)("q-td"),s=(0,n.g2)("q-icon"),u=(0,n.g2)("q-tooltip"),f=(0,n.g2)("q-tr"),p=(0,n.g2)("q-table"),m=(0,n.g2)("q-page-sticky"),h=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",kt,[(0,n.bF)(p,{class:"col",data:e.objActual,columns:e.columns},{top:(0,n.k6)(function(l){return[(0,n.Lk)("div",Et,[(0,n.bF)(o,{modelValue:e.filter.TIPO_MOV,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.TIPO_MOV=t}),label:"Tipo Movimiento","left-label":"","true-value":1,"false-value":2,"checked-icon":"arrow_right","unchecked-icon":"arrow_left"},null,8,["modelValue"])]),(0,n.Lk)("div",Ct,[(0,n.bF)(a,{icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getItems,flat:""},null,8,["onClick"])])]}),body:(0,n.k6)(function(o){return[(0,n.bF)(f,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{key:"DESCRIPCION",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(o.row.DESCRIPCION),1),e.acceso?((0,n.uX)(),(0,n.Wv)(i,{key:0,modelValue:o.row.DESCRIPCION,"onUpdate:modelValue":function(e){return o.row.DESCRIPCION=e},buttons:"",onSave:function(t){return e.updateItem(o.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:o.row.DESCRIPCION,"onUpdate:modelValue":function(e){return o.row.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"TIPO_MOV",props:o},{default:(0,n.k6)(function(){return[1===o.row.TIPO_MOV?((0,n.uX)(),(0,n.CE)("span",At,[(0,n.bF)(s,{name:"arrow_right"}),t[5]||(t[5]=(0,n.Lk)("span",null,"Ingresos",-1))])):((0,n.uX)(),(0,n.CE)("span",wt,[(0,n.bF)(s,{name:"arrow_left"}),t[6]||(t[6]=(0,n.Lk)("span",null,"Egresos",-1))]))]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"ACCIONES",props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{flat:"",color:"negative",icon:"delete",onClick:function(t){return e.deleteItem(o.row.ID_FICHA_PRESUPUESTO_MOV)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[7]||(t[7]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"]),e.acceso?((0,n.uX)(),(0,n.Wv)(m,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{fab:"",round:"",color:"secondary",icon:"add",onClick:t[1]||(t[1]=function(t){return e.showNewItem=!0})},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return c()(t[8]||(t[8]=[(0,n.eW)("Nuevo item",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(h,{modelValue:e.showNewItem,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.showNewItem=t}),title:"Nuevo item",ok:"Guardar",css:{minWidth:"40vw"},onSubmit:e.saveItem,onClose:e.hideModal},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",It,[(0,n.Lk)("div",Ot,[(0,n.bF)(l,{class:"q-if-outlined","float-label":"Descripción",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.DESCRIPCION=t})},null,8,["modelValue"])]),(0,n.Lk)("div",_t,[(0,n.bF)(o,{modelValue:e.form.TIPO_MOV,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.TIPO_MOV=t}),label:"Tipo de Movimiento","left-label":"","true-value":1,"false-value":2},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit","onClose"])])}var St={props:{acceso:{type:Boolean,required:!0}},components:{QTable:F.A,QTr:s.qh,QTd:s.Ef,QToggle:s.c5,QPopupEdit:s.GT,QPageSticky:s._U,Dialog:_.A,sieModal:D.A,QBtn:s.Il,QInput:s.ie,QIcon:s.bP,QTooltip:s.nC},data:function(){return{showNewItem:!1,items:[],filter:{TIPO_MOV:1},form:{DESCRIPCION:"",TIPO_MOV:1},columns:[{name:"DESCRIPCION",field:"DESCRIPCION",label:"DESCRIPCIÓN",align:"left"},{name:"TIPO_MOV",field:"TIPO_MOV",label:"MOVIMIENTO",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}]}},methods:{init:function(){this.getItems()},showModal:function(){},hideModal:function(){this.form={DESCRIPCION:"",TIPO_MOV:1}},getItems:function(){var e=this;return O()(w()().m(function t(){var o,n;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/HyoFichaEconomica/getItems");case 1:o=t.v,n=o.json,e.items=n,t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))()},saveItem:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoFichaEconomica/saveItem",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&((0,S["default"])(n.message),e.showNewItem=!1,e.getItems()),t.n=3;break;case 2:t.p=2,a=t.v,(0,S["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},updateItem:function(e){var t=this;return O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_FICHA_PRESUPUESTO_MOV,data:e},o.p=1,o.n=2,t.$http.put("api/HyoFichaEconomica/updateItem",n);case 2:a=o.v,l=a.json,"Ok"===l.status&&(0,S["default"])(l.message),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deleteItem:function(e){var t=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoFichaEconomica/deleteItem",{params:n});case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getItems()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))).onCancel(function(){});case 1:return o.a(2)}},o)}))()}},computed:{objActual:function(){var e=this.items;return""!==this.filter.TIPO_MOV&&(e=(0,De.filterArray)(this.filter.TIPO_MOV,{field:"TIPO_MOV",list:e})),e}},mounted:function(){this.init()}};const Dt=(0,M.A)(St,[["render",Ft]]);var Tt=Dt,yt=(o(74260),o(32203),{class:"q-pa-md"}),Ut={class:"row"},Mt={class:"col-12"},Vt={class:"row"},qt={class:"col-12"},Nt={class:"row"},Qt={class:"col-6"},Pt={class:"col-6"},Rt={class:"text-weight-bold"};function Ht(e,t){var o=(0,n.g2)("header-btn"),a=(0,n.g2)("q-td"),l=(0,n.g2)("q-tooltip"),i=(0,n.g2)("q-btn"),r=(0,n.g2)("q-tr"),s=(0,n.g2)("q-table"),u=(0,n.g2)("q-card"),f=(0,n.g2)("sie-select"),p=(0,n.g2)("q-search"),m=(0,n.g2)("q-spinner-oval"),h=(0,n.g2)("q-inner-loading"),v=(0,n.g2)("q-checkbox"),b=(0,n.g2)("q-item-main"),g=(0,n.g2)("q-item"),k=(0,n.g2)("q-item-side"),E=(0,n.g2)("virtual-list"),C=(0,n.g2)("q-list"),A=(0,n.g2)("sie-modal"),w=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(w,{class:"q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(u,{class:"q-card-mobile"},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{class:"col",data:e.dataFamilias,columns:e.columns,"row-key":"__index"},{body:(0,n.k6)(function(o){return[(0,n.bF)(r,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"USUNOM",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(o.row.USUNOM),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"ACCIONES",props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{flat:"",color:"negative",icon:"delete",onClick:function(t){return e.deleteExonerado(o.row.ID_BECA_EXONERADO)}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[7]||(t[7]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])]}),_:1}),(0,n.bF)(A,{class:"modal-destinatarios",modelValue:e.openModalExonerado,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.openModalExonerado=t}),title:"Seleccionar Exonerados",ok:"Guardar",onSubmit:e.addExonerados},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",yt,[(0,n.Lk)("div",Ut,[(0,n.Lk)("div",Mt,[(0,n.bF)(f,{type:"outlined",modelValue:e.selectPerfiles,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectPerfiles=t}),noBottom:"",options:e.perfiles,label:"TIPNOM",placeholder:"tipoDestinatarios"},null,8,["modelValue","options"])])]),(0,n.Lk)("div",Vt,[(0,n.Lk)("div",qt,[(0,n.bF)(f,{type:"outlined",modelValue:e.selectNivel,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectNivel=t}),noBottom:"",onInput:e.changeNivel,label:"label",val:"value",options:e.nivel,placeholder:"ngs.nivel"},null,8,["modelValue","onInput","options"])])]),(0,n.Lk)("div",Nt,[(0,n.Lk)("div",Qt,[(0,n.bF)(f,{type:"outlined",modelValue:e.selectGrade,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectGrade=t}),noBottom:"",onInput:e.changeGrade,label:"label",val:"value",options:e.grade,placeholder:"ngs.grado"},null,8,["modelValue","onInput","options"])]),(0,n.Lk)("div",Pt,[(0,n.bF)(f,{type:"outlined",modelValue:e.selectSection,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectSection=t}),noBottom:"",onInput:e.changeSection,label:"label",val:"value",options:e.section,placeholder:"ngs.seccion"},null,8,["modelValue","onInput","options"])])]),(0,n.bF)(p,{class:"q-if-outlined",modelValue:e.find,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.find=t}),placeholder:"Buscar"},null,8,["modelValue"]),(0,n.bF)(h,{visible:e.loading},{default:(0,n.k6)(function(){return[(0,n.bF)(m,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.copyDestinatarios.length>0?((0,n.uX)(),(0,n.Wv)(C,{key:0,class:"no-border-left no-border-right no-border-top"},{default:(0,n.k6)(function(){return[(0,n.bF)(g,null,{default:(0,n.k6)(function(){return[(0,n.bF)(b,{class:"row"},{default:(0,n.k6)(function(){return[(0,n.bF)(v,{class:"col",modelValue:e.checkAll,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.checkAll=t}),label:"Todos",onClick:e.checkingAll},null,8,["modelValue","onClick"]),(0,n.Lk)("span",Rt,(0,d.v_)(e.copyDestinatarios.length)+" Contactos",1)]}),_:1})]}),_:1}),(0,n.bF)(E,{size:40,remain:e.isLess?5.8:4.6,options:e.copyDestinatarios,dense:!0},{item:(0,n.k6)(function(e){var t=e.item;return[(0,n.bF)(g,null,{default:(0,n.k6)(function(){return[(0,n.bF)(k,null,{default:(0,n.k6)(function(){return[(0,n.bF)(v,{modelValue:t.state,"onUpdate:modelValue":function(e){return t.state=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,n.bF)(b,{class:"q-body-1",label:t.USUNOM,sublabel:t.CARNOM,"sublabel-lines":2},null,8,["label","sublabel"])]}),_:2},1024)]}),_:1},8,["remain","options"])]}),_:1})):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}o(89571),o(90095),o(13715);var Lt=o(81288),Bt=o(99637),xt=o(80660),jt=o(40155),Wt=o(48086),$t=o(34858),Xt={components:{QTr:s.qh,QTd:s.Ef,QTabs:s.uw,QTab:s.zu,QTabPane:s.dg,QInnerLoading:s.SQ,QSpinnerOval:s.VA,sieModal:D.A,sieSelect:Se.A,QCheckbox:jt.A,destinatarios:Wt.A,virtualList:$t.Ay,QPage:s.Tu,QCard:s.C$,QTable:s.kH,QBtn:s.Il,QTooltip:s.nC,QSearch:s.Ks,QList:s.Mb,QItem:s.H0,QItemMain:s.mF,QItemSide:s.n1},data:function(){return{acceso:(0,y["default"])().ruta.nivel>=2,buttons:[{icon:"plus",label:"Agregar",permiso:">=2",click:this.openAgregaEstudiante}],listaAlumnos:[],openModalExonerado:!1,columns:[{name:"USUNOM",field:"USUNOM",label:"NOMBRE",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],find:null,selectPerfiles:{},selectTipo:"",selectNivel:"",selectGrade:"",selectSection:"",dataNivel:[],dataGrade:[],dataSection:[],perfiles:[{TIPCODAC:"004",TIPNOM:"Familia"}],dataAdd:{},data:[],dataFamilias:[],destinatarios:[],copyDestinatarios:[],validateCheckAll:[],checkAll:!1,loading:!1,validateParams:!0,mapTo:{ids:[],names:[],objects:[]}}},methods:{addExonerados:function(){var e=this;return O()(w()().m(function t(){var o,n,a,l;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o=[],e.copyDestinatarios.forEach(function(t,n){!0===t.state&&(e.dataFamilias.push(t),o.push({FAMCOD:t.FAMCOD,ALUCOD:t.ALUCOD||null}))}),t.p=1,t.n=2,e.$http.post("api/HyoBecaExonerado/saveEstadoAsync",{data:o});case 2:n=t.v,a=n.json,"Ok"===a.status&&((0,S["default"])(a.message),e.openModalExonerado=!1),t.n=4;break;case 3:t.p=3,l=t.v,(0,S["default"])(l.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()},openAgregaEstudiante:function(){this.openModalExonerado=!0},validateIfExistDestinatario:function(){var e=this;this.validateCheckAll=[],this.destinatarios.length>0&&(0,Bt["default"])(this.destinatarios,function(t,o){e.dataAdd[t.USUCOD]&&-1===e.validateCheckAll.indexOf(t.USUCOD)&&(t.state=!0,e.validateCheckAll.push(t.USUCOD)),-1!==e.mapTo.ids.indexOf(t.USUCOD)&&(e.dataAdd[t.USUCOD]||(e.dataAdd[t.USUCOD]=t,e.validateCheckAll.push(t.USUCOD)),t.state=!0)}),this.checkAll=this.destinatarios.length===this.validateCheckAll.length},changeDestinatarios:function(e){var t=this;for(var o in this.loading=!0,this.validateParams=!0,e.isMensajeriaRef=!0,e)""===e[o]&&(this.validateParams=!1);this.registroNotasVUE&&this.comboExtra?this.validateParams?xt.$http.get("api/HyoUsuario/obtListaDestinatariosNR",{params:e}).then(function(e){var o=e.json;t.checkAll=!1,(0,Bt["default"])(o,function(e,t){e.state=!1,e.label=e.USUNOM,e.value=e.USUCOD}),t.destinatarios=o,t.copyDestinatarios=o,t.validateIfExistDestinatario(),t.loading=!1}):this.loading=!1:this.validateParams?xt.$http.get("api/HyoUsuario/obtListaDestinatarios",{params:e}).then(function(e){var o=e.json;t.checkAll=!1,(0,Bt["default"])(o,function(e,t){e.state=!1,e.label=e.USUNOM,e.value=e.USUCOD}),t.destinatarios=o,t.copyDestinatarios=o,t.validateIfExistDestinatario(),t.loading=!1}):this.loading=!1},changeNivel:function(e){var t=this;this.selectGrade="",this.selectSection="";var o={tipcod:this.selectPerfiles.TIPCODAC,instrucod:e};xt.$http.get("api/HyoGradoNivs/obtGrados",{params:{instru:e}}).then(function(e){var n=e.json;t.dataGrade=n,t.changeDestinatarios(o)})},changeGrade:function(e){var t=this;this.selectSection="";var o={gradocod:e,instrucod:this.selectNivel,tipcod:this.selectPerfiles.TIPCODAC};xt.$http.get("api/HyoSalones/obtSecciones",{params:{gradocod:e,instrucod:this.selectNivel}}).then(function(e){var n=e.json;t.dataSection=n,t.changeDestinatarios(o)})},changeSection:function(e){var t;t="string"===typeof e?{gradocod:this.selectGrade,instrucod:this.selectNivel,seccioncod:this.selectSection,tipcod:this.selectPerfiles.TIPCODAC}:{},this.changeDestinatarios(t)},checkingAll:function(){this.checkAll?this.addElements():this.removeElements()},states:function(e){e.state?this.dataAdd[e.value]||(this.dataAdd[e.value]=e,this.validateCheckAll.push(e.value)):(delete this.dataAdd[e.value],this.validateCheckAll.splice(this.validateCheckAll.indexOf(e.value),1)),this.checkAll=this.validateCheckAll.length===this.destinatarios.length},addElements:function(){for(var e=0;e<this.copyDestinatarios.length;e++)this.destinatarios[e].state=!0,this.copyDestinatarios[e].state=!0,this.states(this.copyDestinatarios[e])},removeElements:function(){for(var e=0;e<this.copyDestinatarios.length;e++)this.destinatarios[e].state=!1,this.copyDestinatarios[e].state=!1,this.states(this.copyDestinatarios[e])},deleteExonerado:function(e){var t=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(O()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaExonerado/deleteExoneradoAsync",{params:n});case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,S["default"])(l.message),t.getExonerados()),o.n=4;break;case 3:o.p=3,i=o.v,(0,S["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})))},getExonerados:function(){var e=this;return O()(w()().m(function t(){var o,n;return w()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/HyoBecaExonerado/getExonerados");case 1:o=t.v,n=o.json,e.dataFamilias=n;case 2:return t.a(2)}},t)}))()}},computed:{isLess:function(){return(0,Lt.isLess)()},nivel:function(){for(var e=[],t=0;t<this.dataNivel.length;t++)this.dataNivel[t].label=this.dataNivel[t].INSTRUDES,this.dataNivel[t].value=this.dataNivel[t].INSTRUCOD,e.push(this.dataNivel[t]);return e},grade:function(){for(var e=[],t=0;t<this.dataGrade.length;t++)this.dataGrade[t].label=this.dataGrade[t].GRADODES,this.dataGrade[t].value=this.dataGrade[t].GRADOCOD,e.push(this.dataGrade[t]);return e},section:function(){for(var e=[],t=0;t<this.dataSection.length;t++)this.dataSection[t].label=this.dataSection[t].SECCIONDES,this.dataSection[t].value=this.dataSection[t].SECCIONCOD,e.push(this.dataSection[t]);return e}},created:function(){var e=this;return O()(w()().m(function t(){return w()().w(function(t){while(1)switch(t.n){case 0:xt.$http.get("api/HyoUsuario/obtListaDestinatarios",{params:{tipcod:e.perfiles[0].TIPCODAC}}).then(function(t){t.json.forEach(function(e){e.state=!1}),e.copyDestinatarios=t.json}),xt.$http.get("api/HyoInstrus/obtInstru",{params:{parametros:{ano:(0,y["default"])().ano,tutoria:!0,asignados:!0}}}).then(function(t){var o=t.json;e.dataNivel=o}),e.getExonerados();case 1:return t.a(2)}},t)}))()}};const Gt=(0,M.A)(Xt,[["render",Ht]]);var Yt=Gt,zt={components:{QTabs:s.uw,QTab:s.zu,QTabPane:s.dg,mensajes:Ze,documentos:dt,requisitos:gt,ficha:Tt,exoneraciones:Yt},data:function(){return{acceso:(0,y["default"])().ruta.nivel>=2,isVcSp:"0081"===(0,y["default"])().colcod&&"001"===(0,y["default"])().tipcod}},methods:{}};const Jt=(0,M.A)(zt,[["render",Qe]]);var Kt=Jt,Zt={class:"row full-width q-mb-sm"},eo={class:"col"},to={class:"col row reverse"},oo={key:0,class:"row full-width"},no={class:"col-md-1"},ao={class:"col"},lo={class:"row q-pa-sm"},io={class:"col"};function ro(e,t){var o=(0,n.g2)("q-tooltip"),a=(0,n.g2)("q-btn"),l=(0,n.g2)("q-input"),i=(0,n.g2)("q-td"),r=(0,n.g2)("q-download-file"),s=(0,n.g2)("q-tr"),u=(0,n.g2)("q-table"),f=(0,n.g2)("q-card-main"),p=(0,n.g2)("sie-upload"),m=(0,n.g2)("sie-modal"),h=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(h,null,{default:(0,n.k6)(function(){return[(0,n.bF)(f,{class:"col column q-pa-none",style:{padding:"0"}},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{data:e.objActual,columns:e.columns,"row-key":"ID_BECA_SOLICITUD","virtual-scroll":"",style:{"max-height":"75vh"},pagination:e.pagination,"onUpdate:pagination":t[2]||(t[2]=function(t){return e.pagination=t}),"row-per-page-options":[0]},{top:(0,n.k6)(function(i){return[(0,n.Lk)("div",Zt,[(0,n.Lk)("div",eo,[(0,n.bF)(a,{icon:e.iconFilter,color:"primary",onClick:e.showHideFilters,flat:""},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(e.textTooltipFilter),1)]}),_:1})]}),_:1},8,["icon","onClick"])]),(0,n.Lk)("div",to,[(0,n.bF)(a,{icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getSolicitudes,flat:""},null,8,["onClick"])])]),e.showFilter?((0,n.uX)(),(0,n.CE)("div",oo,[(0,n.Lk)("div",no,[(0,n.bF)(l,{class:"q-if-outlined",modelValue:e.filter.famcod,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.famcod=t}),"float-label":"Código"},null,8,["modelValue"])]),(0,n.Lk)("div",ao,[(0,n.bF)(l,{class:"q-if-outlined",modelValue:e.filter.famdes,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.famdes=t}),"float-label":"Familia"},null,8,["modelValue"])])])):(0,n.Q3)("v-if",!0)]}),body:(0,n.k6)(function(l){return[(0,n.bF)(s,{props:l},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{key:"FAMCOD",props:l},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(l.row.FAMCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(i,{key:"FAMDES",props:l},{default:(0,n.k6)(function(){return[(0,n.eW)((0,d.v_)(l.row.FAMDES),1)]}),_:2},1032,["props"]),(0,n.bF)(i,{key:"FECHA_REG",props:l},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,d.v_)(e.date(l.row.FECHA_REG,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,n.bF)(i,{key:"FECHA_LIMITE",props:l},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,d.v_)(e.date(l.row.FECHA_LIMITE,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,n.bF)(i,{key:"ACCIONES",props:l},{default:(0,n.k6)(function(){return[null!==l.row.RUTA?((0,n.uX)(),(0,n.Wv)(r,{key:0,src:e.getUrl(l.row.RUTA)},null,8,["src"])):((0,n.uX)(),(0,n.Wv)(a,{key:1,color:"primary",icon:"upload",flat:"",onClick:function(t){return e.cargarArchivo(l.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return c()(t[5]||(t[5]=[(0,n.eW)("Subir Documento",-1)]))}),_:1})]}),_:1},8,["onClick"]))]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1}),(0,n.bF)(m,{class:"modal-archivos",modelValue:e.openModal,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.openModal=t}),title:"Subir documento",onSubmit:t[4]||(t[4]=function(t){return e.saveDocExp()}),ok:e.$t("botones.guardar"),"btn-disable":e.disableBtn},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",lo,[(0,n.Lk)("div",io,[(0,n.bF)(p,{onUpload:e.uploadArchivo,icon:"file",title:e.titleImage,allow:["pdf","doc","docx"]},null,8,["onUpload","title"])])])]}),_:1},8,["modelValue","ok","btn-disable"])]}),_:1})}var so=o(62006),uo={components:{QCard:s.C$,QCardMain:s.d1,QTable:te.A,QTr:s.qh,QTd:s.Ef,QChip:s.wQ,Dialog:_.A,QDatetime:s.T5,sieModal:D.A,notify:S["default"],sieUpload:rt.A,sieSelect:Se.A,QDownloadFile:so.A,QBtn:s.Il,QTooltip:s.nC,QInput:s.ie},props:{periodo:{type:Number,required:!0}},data:function(){return{sie:(0,y["default"])(),pagination:{rowsPerPage:0},showFilter:!1,modalArchivo:{url:"",open:!1,esPdf:!1,datos:{directLink:!1,esEnlace:!1,extension:"",id:1,name:"",link:""}},filter:{famcod:"",famdes:"",fecini:null,fecfin:null,estado:0},dsSolicitudes:[],columns:[{name:"FAMCOD",field:"FAMCOD",label:"CÓDIGO",align:"center"},{name:"FAMDES",field:"FAMDES",label:"FAMILIA",align:"left"},{name:"FECHA_REG",field:"FECHA_REG",label:"FECHA INSCRIPCIÓN",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],openModal:!1,dsExpediente:[],titleImage:"",objArchivos:{},dataSolicitud:{},disableBtn:!1,form:{id_beca_solicitud:null,famcod:null,periodo:this.periodo,temps:[]}}},computed:{objActual:function(){var e=this.dsSolicitudes;return""!==this.filter.famcod&&(e=(0,De.filterArray)(this.filter.famcod,{field:"FAMCOD",list:e})),""!==this.filter.famdes&&(e=(0,De.filterArray)(this.filter.famdes,{field:"FAMDES",list:e})),e},iconFilter:function(){return this.showFilter?"filter_remove":"filter_search"},textTooltipFilter:function(){return this.showFilter?"Ocultar filtros":"Mostrar filtros"}},methods:{date:T.Ay,showHideFilters:function(){this.showFilter=!this.showFilter},cleanFilters:function(){this.filter={famcod:"",famdes:""},this.getSolicitudes()},getSolicitudes:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.periodo},t.p=1,t.n=2,e.$http.get("api/HyoBecaSolicitud/getSolicitudesAsis",{params:o});case 2:n=t.v,a=n.json,e.dsSolicitudes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},cargarArchivo:function(e){this.openModal=!0,this.form.id_beca_solicitud=e.ID_BECA_SOLICITUD,this.form.famcod=e.FAMCOD,this.form.temps=[],this.disableBtn=!0},cerrarCarga:function(){this.openModal=!1,this.form={id_beca_solicitud:null,temps:[],famcod:null,periodo:this.periodo}},uploadArchivo:function(e){var t=this;(0,st.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){t.form.temps.push(e.name),t.disableBtn=!1}).catch(function(){})},saveDocExp:function(){var e=this;return O()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaExpediente/saveExpedienteArch",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&(e.cerrarCarga(),(0,S["default"])(n.message),e.getSolicitudes()),t.n=3;break;case 2:t.p=2,a=t.v,(0,S["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},getUrl:function(e){var t,o=e.split("/"),n=o[o.length-1],a=n.split("."),l=a[0].split("_"),i=l[1];return t=l.length>=3?l[2]:1,"".concat(this.sie.api,"/HyoBecaExpediente/archivo/").concat(i,"/").concat(t,"?sie-token=").concat(this.sie.token)},obtDatosArchivo:function(e,t,o){var n="";if(t){var a=t.split("."),l=a[a.length-1];if("link"===e){var i=o+"."+l;n="".concat(this.sie.api,"/HyoProfeotes/archivo/").concat(t,"/").concat(i,"?sie-token=").concat(this.sie.token)}else"extension"===e&&(n=l)}return n}},mounted:function(){this.getSolicitudes()}};const co=(0,M.A)(uo,[["render",ro]]);var fo=co,po=o(88567),mo=o(95718),ho={components:{QCard:po.A,QCardSection:mo.A,QTabs:s.uw,QTab:s.zu,QTabPane:s.dg,procesos:q,expedientes:Ne,configuracion:Kt,informes:fo,QPage:s.Tu},data:function(){return{buttons:[],verInforme:"0057"===(0,y["default"])().colcod}},methods:r()({},(0,Te.i0)("beca",["fetchActivePeriodo"])),computed:r()({},(0,Te.aH)("beca",["perActivo"])),mounted:function(){this.fetchActivePeriodo()}};const vo=(0,M.A)(ho,[["render",l]]);var bo=vo}}]);