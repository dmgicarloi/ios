"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[77139],{77139:function(e,o,t){t.r(o),t.d(o,{default:function(){return Ye}});var n=t(8445),a=t.n(n),l=(t(71225),t(50310),t(5962),t(83190),t(61758)),i=t(58790),r={class:"intranet-becas--dashboard--detalle q-pa-sm"},s={class:"row q-col-gutter-sm items-center"},c={class:"col-md-5 col-xs-12"},u={class:"col-md-7 col-xs-12"},d={class:"col-12"},m={class:"row q-gutter-sm items-center"},f={class:"col-12"},p={class:"row reverse full-width"},h=["src"],g={class:"q-pa-sm"},b={class:"row"},v={class:"col"},O={key:0,class:"row"},A={class:"col"};function E(e,o){var t=(0,l.g2)("header-btn"),n=(0,l.g2)("q-select"),E=(0,l.g2)("q-btn"),C=(0,l.g2)("q-td"),w=(0,l.g2)("estadoexp"),k=(0,l.g2)("q-download-file"),F=(0,l.g2)("q-item"),y=(0,l.g2)("q-list"),D=(0,l.g2)("q-popover"),V=(0,l.g2)("q-tooltip"),B=(0,l.g2)("q-tr"),S=(0,l.g2)("q-table"),M=(0,l.g2)("q-card-section"),P=(0,l.g2)("q-card"),I=(0,l.g2)("observacion"),_=(0,l.g2)("consultar"),R=(0,l.g2)("encuesta"),U=(0,l.g2)("ficha"),L=(0,l.g2)("historialPago"),H=(0,l.g2)("sie-modal"),N=(0,l.g2)("sie-select"),q=(0,l.g2)("q-input"),T=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(T,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",r,[(0,l.bF)(P,{dense:"",flat:"",bordered:""},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{name:"Becas",buttons:e.buttons},null,8,["buttons"]),(0,l.bF)(M,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",s,[(0,l.Lk)("div",c,[(0,l.bF)(n,{modelValue:e.filter.FAMCOD,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.filter.FAMCOD=o}),options:e.dsFamilias,"option-label":"FAMDES","option-value":"FAMCOD",label:"Familias",onInput:e.getParticipantesFam},null,8,["modelValue","options","onInput"])]),(0,l.Lk)("div",u,[(0,l.bF)(n,{modelValue:e.filter.ALUCOD,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.filter.ALUCOD=o}),options:e.dsParticipantes,"option-label":"NOMCOMP","option-value":"ALUCOD",label:"Estudiantes",onInput:e.getDocsAlu},null,8,["modelValue","options","onInput"])]),(0,l.Lk)("div",d,[(0,l.Lk)("div",m,[(0,l.bF)(E,{class:"col-grow",size:"sm",label:"Observación",onClick:e.showModalObs,color:"primary"},null,8,["onClick"]),e.mostrarAsignarBeca?((0,l.uX)(),(0,l.Wv)(E,{key:0,class:"col-grow",size:"sm",label:"Asignar beca",onClick:e.showModalAsig,color:"primary",readonly:!e.filter.ALUCOD,disable:!e.filter.ALUCOD},null,8,["onClick","readonly","disable"])):(0,l.Q3)("v-if",!0),(0,l.bF)(E,{class:"col-grow",size:"sm",label:"Consultar",onClick:e.showModalCon,color:"primary"},null,8,["onClick"]),e.mostrarFichaEconomica?((0,l.uX)(),(0,l.Wv)(E,{key:1,class:"col-grow",size:"sm",label:"Ficha Económica",onClick:e.showModalFic,color:"primary"},null,8,["onClick"])):(0,l.Q3)("v-if",!0),e.mostrarEncuesta?((0,l.uX)(),(0,l.Wv)(E,{key:2,class:"col-grow",size:"sm",label:"Encuesta",onClick:e.showModalEncuesta,color:"primary"},null,8,["onClick"])):(0,l.Q3)("v-if",!0),e.mostrarHistorialPago?((0,l.uX)(),(0,l.Wv)(E,{key:3,class:"col-grow",size:"sm",label:"Historial Pago",onClick:e.showModalHistorialPago,color:"primary"},null,8,["onClick"])):(0,l.Q3)("v-if",!0),e.sie.esAdministrador?((0,l.uX)(),(0,l.Wv)(E,{key:4,class:"col-grow",size:"sm",label:"Descargar Documentos",onClick:e.descargarDocumentos,color:"primary"},null,8,["onClick"])):(0,l.Q3)("v-if",!0)])]),(0,l.Lk)("div",f,[(0,l.bF)(S,{class:"htable",dense:"",flat:"",bordered:"","wrap-cells":"",rows:e.dsDocs,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":o[2]||(o[2]=function(o){return e.pagination=o}),"row-per-page-options":[0]},{top:(0,l.k6)(function(o){return[(0,l.Lk)("div",p,[(0,l.bF)(E,{icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getDocsAlu,flat:""},null,8,["onClick"])])]}),body:(0,l.k6)(function(t){return[(0,l.bF)(B,{props:t},{default:(0,l.k6)(function(){return[(0,l.bF)(C,{key:"DOCUMENTO",props:t},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(t.row.DOCUMENTO),1)]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"FECHA_REG",props:t},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(t.row.FECHA_REG,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"FECHA_APRO",props:t},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(t.row.FECHA_APRO,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"APROBADO",props:t},{default:(0,l.k6)(function(){return[(0,l.bF)(w,{state:t.row.APROBADO},null,8,["state"])]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"ARCHIVO",props:t},{default:(0,l.k6)(function(){return[t.row.NOMBRE.length>1?((0,l.uX)(),(0,l.Wv)(E,{key:0,color:"primary",icon:"documents",flat:""},{default:(0,l.k6)(function(){return[(0,l.bF)(D,null,{default:(0,l.k6)(function(){return[(0,l.bF)(y,{separator:""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.row.NOMBRE,function(o,t){return(0,l.uX)(),(0,l.Wv)(F,{key:t},{default:(0,l.k6)(function(){return[(0,l.bF)(k,{src:e.getUrl(o),name:o},null,8,["src","name"])]}),_:2},1024)}),128))]}),_:2},1024)]}),_:2},1024),(0,l.bF)(V,{anchor:"top middle",self:"bottom middle"},{default:(0,l.k6)(function(){return a()(o[12]||(o[12]=[(0,l.eW)("Listado de documentos",-1)]))}),_:1})]}),_:2},1024)):((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(t.row.NOMBRE,function(o){return(0,l.uX)(),(0,l.CE)("span",null,[(0,l.bF)(k,{src:e.getUrl(o),name:o},null,8,["src","name"])])}),256))]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"ACCIONES",props:t},{default:(0,l.k6)(function(){return[(0,l.bF)(E,{color:"primary",icon:"visibility",flat:"",round:"",size:"sm",onClick:function(o){return e.showModalEst(t.row)},disable:!e.acceso},{default:(0,l.k6)(function(){return[(0,l.bF)(V,{anchor:"top middle",self:"bottom middle"},{default:(0,l.k6)(function(){return a()(o[13]||(o[13]=[(0,l.eW)("Cambiar estado",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,l.bF)(E,{color:"negative",icon:"delete",flat:"",round:"",size:"sm",onClick:function(o){return e.deleteExp(t.row.ID_BECA_EXPEDIENTE)},disable:!e.acceso},{default:(0,l.k6)(function(){return[(0,l.bF)(V,{anchor:"top middle",self:"bottom middle"},{default:(0,l.k6)(function(){return a()(o[14]||(o[14]=[(0,l.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["rows","columns","pagination"])])])]}),_:1})]}),_:1}),(0,l.bF)(I,{modelValue:e.showObs,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.showObs=o}),alucod:e.filter.ALUCOD,famcod:e.filter.FAMCOD,periodo:e.perActivo},null,8,["modelValue","alucod","famcod","periodo"]),(0,l.bF)(_,{modelValue:e.showCon,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.showCon=o}),alucod:e.filter.ALUCOD},null,8,["modelValue","alucod"]),(0,l.bF)(R,{modelValue:e.showEncuesta,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.showEncuesta=o}),famcod:e.filter.FAMCOD},null,8,["modelValue","famcod"]),e.mostrarFichaEconomica?((0,l.uX)(),(0,l.Wv)(U,{key:0,modelValue:e.showFic,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.showFic=o}),famcod:e.filter.FAMCOD},null,8,["modelValue","famcod"])):(0,l.Q3)("v-if",!0),e.showHistorialPago?((0,l.uX)(),(0,l.Wv)(L,{key:1,modelValue:e.showHistorialPago,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.showHistorialPago=o}),alucod:e.filter.ALUCOD},null,8,["modelValue","alucod"])):(0,l.Q3)("v-if",!0),(0,l.bF)(H,{title:"Asignar Beca",modelValue:e.showAsig,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.showAsig=o}),footer:!1},{default:(0,l.k6)(function(){return[(0,l.Lk)("iframe",{src:e.urlBeca,width:"640",height:"480"},null,8,h)]}),_:1},8,["modelValue"]),(0,l.bF)(H,{title:"Cambiar estado",modelValue:e.showEst,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.showEst=o}),ok:"Guardar",onClose:e.hideModalEst,onSubmit:e.updateStateExp},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",g,[(0,l.Lk)("div",b,[(0,l.Lk)("div",v,[(0,l.bF)(N,{type:"outlined",modelValue:e.form.APROBADO,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.form.APROBADO=o}),options:e.dsEstados,label:"label",val:"value",placeholder:"Estado"},null,8,["modelValue","options"])])]),2===e.form.APROBADO?((0,l.uX)(),(0,l.CE)("div",O,[(0,l.Lk)("div",A,[(0,l.bF)(q,{class:"q-if-outlined",type:"textarea",rows:"4",modelValue:e.form.OBSERVACION,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.form.OBSERVACION=o}),"float-label":"Observación por rechazo"},null,8,["modelValue"])])])):(0,l.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onClose","onSubmit"])])]}),_:1})}var C=t(57008),w=t.n(C),k=t(76080),F=t.n(k),y=t(45254),D=t.n(y),V=(t(30683),t(10239),t(11777),t(97410)),B=t(56384),S=t(76653),M=t(44488),P=t(45262),I=t(63411),_=t(6123),R=t(93616),U=t(30640),L=t(18105),H={class:"col q-px-md q-pt-md q-pb-xs"},N={class:"row items-center"},q={class:"col"},T={class:"col-auto items-center"},x={class:"col column q-px-md scroll-y",style:{height:"280px","max-width":"30vw"}},Q={class:"q-mt-none"},$={key:0,class:"row items-center"},X={class:"col"},W={class:"col-auto items-center"},z={key:1},j={class:"q-my-none"},Y={class:"row items-center justify-between"},G={class:"row items-center gutter-xs"},K={class:"col-auto"},Z={class:"col-auto column"},J={class:"text-dark",style:{"font-size":"13px","font-weight":"600",height:"20px"}},ee={style:{"font-size":"12px"}},oe={class:"row items-center"};function te(e,o){var t=(0,l.g2)("q-input"),n=(0,l.g2)("q-icon"),a=(0,l.g2)("sie-vacio"),r=(0,l.g2)("sie-usuario"),s=(0,l.g2)("q-btn"),c=(0,l.g2)("q-timeline-entry"),u=(0,l.g2)("q-timeline"),d=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(d,{modelValue:e.model,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.model=o}),title:"Observación",css:{minWidth:"30vw"},footer:!1,onClose:e.cleanObs,onShow:e.getObs},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",H,[(0,l.Lk)("div",N,[(0,l.Lk)("div",q,[(0,l.bF)(t,{class:"q-if-outlined",modelValue:e.form.obs,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.form.obs=o}),loading:e.loading},null,8,["modelValue","loading"])]),(0,l.Lk)("div",T,[(0,l.bF)(n,{size:"2rem",color:"secondary",name:"send",onClick:e.sendObs,style:{cursor:"pointer"}},null,8,["onClick"])])])]),(0,l.Lk)("div",x,[e.dsObs.length<=0?((0,l.uX)(),(0,l.Wv)(a,{key:0})):((0,l.uX)(),(0,l.Wv)(u,{key:1,color:"secondary"},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dsObs,function(o){return(0,l.uX)(),(0,l.Wv)(c,{key:o.ID_BECA_OBSERVACION,side:"right"},{subtitle:(0,l.k6)(function(){return[(0,l.Lk)("h5",j,[(0,l.Lk)("div",Y,[(0,l.Lk)("div",G,[(0,l.Lk)("div",K,[(0,l.bF)(r,{usucod:o.USUCOD,size:"xs"},null,8,["usucod"])]),(0,l.Lk)("div",Z,[(0,l.Lk)("span",J,(0,i.v_)(o.USUNOM),1),(0,l.Lk)("span",ee,(0,i.v_)(e.date(o.FECHA,"dddd DD, MMMM YYYY hh:mm a")),1)])]),(0,l.Lk)("div",oe,[(0,l.bF)(s,{color:"primary",icon:"edit",flat:"",onClick:function(t){return e.showEdit(o)}},null,8,["onClick"]),(0,l.bF)(s,{color:"negative",icon:"delete",flat:"",onClick:function(t){return e.delObs(o.ID_BECA_OBSERVACION)}},null,8,["onClick"])])])])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",Q,[e.isEdit&&o.ID_BECA_OBSERVACION==e.editForm.id?((0,l.uX)(),(0,l.CE)("div",$,[(0,l.Lk)("div",X,[(0,l.bF)(t,{class:"q-if-outlined",modelValue:e.editForm.obs,"onUpdate:modelValue":function(o){return e.editForm.obs=o},loading:e.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),(0,l.Lk)("div",W,[(0,l.bF)(n,{size:"2rem",color:"secondary",name:"send",onClick:e.updObs,style:{cursor:"pointer"}},null,8,["onClick"]),(0,l.bF)(n,{size:"2rem",color:"negative",name:"cancel",onClick:e.cancelEdit,style:{cursor:"pointer"}},null,8,["onClick"])])])):((0,l.uX)(),(0,l.CE)("p",z,(0,i.v_)(o.OBSERVACION),1))])]}),_:2},1024)}),128))]}),_:1}))])]}),_:1},8,["modelValue","onClose","onShow"])])}var ne=t(24974),ae=t(80340),le={emits:["update:modelValue","input"],props:{famcod:{type:String,required:!0},alucod:{type:String,required:!0},modelValue:{type:Boolean,default:!1},periodo:{type:Number,required:!0}},components:{QTimeline:_.T,QTimelineEntry:_.HV,sieModal:U.A,sieUsuario:ne.A,sieVacio:ae.A,QInput:_.ie,QIcon:_.bP,QBtn:_.Il},data:function(){return{loading:!1,dsObs:[],form:{famcod:"",periodo:this.periodo,alucod:"",obs:""},editForm:{obs:"",id:null},isEdit:!1}},methods:{date:L.Ay,sendObs:function(){var e=this;return D()(F()().m(function o(){var t,n;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return e.loading=!0,o.p=1,e.form["famcod"]=e.famcod,e.form["alucod"]=e.alucod,o.n=2,e.$http.post("api/HyoBecaObservacion/saveObservacion",e.form);case 2:t=o.v,n=t.json,"Ok"===n.status&&(e.form.obs="",e.getObs()),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.p=4,e.loading=!1,o.f(4);case 5:return o.a(2)}},o,null,[[1,3,4,5]])}))()},getObs:function(){var e=this;return D()(F()().m(function o(){var t,n,a;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={famcod:e.famcod,alucod:e.alucod,periodo:e.periodo},o.p=1,o.n=2,e.$http.get("api/HyoBecaObservacion/getObsByParticipante",{params:t});case 2:n=o.v,a=n.json,e.dsObs=a,o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},updObs:function(){var e=this;return D()(F()().m(function o(){var t,n;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return e.loading=!0,o.p=1,o.n=2,e.$http.put("api/HyoBecaObservacion/updateObservacion",{data:e.editForm});case 2:t=o.v,n=t.json,"Ok"===n.status&&(e.loading=!1,e.cancelEdit(),e.getObs()),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.p=4,e.loading=!1,o.f(4);case 5:return o.a(2)}},o,null,[[1,3,4,5]])}))()},delObs:function(e){var o=this;return D()(F()().m(function t(){var n,a,l;return F()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n={id:e},t.n=1,o.$http.delete("api/HyoBecaObservacion/deleteObservacion",{params:n});case 1:a=t.v,l=a.json,"Ok"===l.status&&o.getObs(),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))()},cancelEdit:function(){this.isEdit=!1,this.editForm.obs="",this.editForm.id=null},showEdit:function(e){this.isEdit=!0,this.editForm.obs=e.OBSERVACION,this.editForm.id=e.ID_BECA_OBSERVACION},cleanObs:function(){this.form.alucod="",this.form.famcod="",this.form.obs="",this.isEdit=!1,this.editForm.obs="",this.editForm.id=null}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}},ie=t(12807);const re=(0,ie.A)(le,[["render",te]]);var se=re,ce={class:"col column q-pa-sm"};function ue(e,o){var t=(0,l.g2)("q-table"),n=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(n,{modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.model=o}),title:"Consultar Becas",css:{minWidth:"40vw"},footer:!1,onClose:e.cleanBecas,onShow:e.getBecasAlu},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ce,[(0,l.bF)(t,{data:e.becas,columns:e.columns,style:{"max-height":"100%"}},null,8,["data","columns"])])]}),_:1},8,["modelValue","onClose","onShow"])])}var de=t(30545),me=t(36980),fe={emits:["update:modelValue","input"],props:{alucod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{QTable:de.A,QTr:_.qh,QTd:_.Ef,sieModal:U.A},data:function(){return{becas:[],columns:[{name:"NOMCOMP",field:"NOMCOMP",label:"Nombre completo",align:"left"},{name:"BECADES",field:"BECADES",label:"Tipo de Beca",align:"left"},{name:"MESINIBEC",field:"MESINIBEC",label:"Mes Inicio",align:"center"},{name:"MESFINBEC",field:"MESFINBEC",label:"Mes Fin",align:"center"}],filter:{anobec:null}}},methods:{cleanBecas:function(){this.alucod=null},getBecasAlu:function(){var e=this;return D()(F()().m(function o(){var t,n,a;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={alucod:e.alucod,anobec:e.filter.anobec||e.anobec+""},o.p=1,o.n=2,e.$http.get("api/HyoBecaOto/getBecasByAlu",{params:t});case 2:n=o.v,a=n.json,e.becas=a,o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()}},computed:w()(w()({},(0,me.aH)("beca",["anobec"])),{},{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}})};const pe=(0,ie.A)(fe,[["render",ue]]);var he=pe;function ge(e,o){var t=(0,l.g2)("q-spinner-oval"),n=(0,l.g2)("q-inner-loading"),a=(0,l.g2)("formly"),i=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(i,{modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.model=o}),title:"Encuesta",css:{minWidth:"40vw"},onShow:e.buildForm,footer:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(a,{data:e.form,print:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{visible:e.loading},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{size:"50px",color:"primary"})]}),_:1},8,["visible"])]}),_:1},8,["data"])]}),_:1},8,["modelValue","onShow"])}var be=t(57668),ve=t(60167),Oe="No se puede mostrar el formulario",Ae="info",Ee={emits:["update:modelValue","input"],props:{famcod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{sieInfo:be["default"],formly:ve.A,sieModal:U.A,QInnerLoading:_.SQ,QSpinnerOval:_.VA},data:function(){return{form:{},loading:!1,esOtros:(0,be["default"])().esOtros,message:Oe,icon:Ae}},methods:{buildForm:function(){var e=this;return D()(F()().m(function o(){var t,n;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return e.loading=!0,o.p=1,o.n=2,e.$http.get("api/HyoBecaSolicitud/getBecaEncuestaByFamcod",{params:{famcod:e.famcod}});case 2:return t=o.v,console.log(t),o.n=3,e.$http.get("api/HyoFormulario/getPreview",{params:{idHistory:t.json.ID_HISTORIA_FORMULARIO,idHistoryUser:t.json.ID_HISTORIA_USUARIO}});case 3:n=o.v,e.form=n,o.n=5;break;case 4:o.p=4,o.v,e.form={};case 5:return o.p=5,e.loading=!1,o.f(5);case 6:return o.a(2)}},o,null,[[1,4,5,6]])}))()}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const Ce=(0,ie.A)(Ee,[["render",ge]]);var we=Ce;function ke(e,o){var t=(0,l.g2)("sie-table"),n=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(n,{modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.model=o}),title:"Historial de Pagos",css:{minWidth:"40vw"},footer:!1,onClose:e.cleanBecas},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{css:"max-height: calc(100vh - 320px); height: 100%;",columns:e.columns,data:e.pagos,config:e.config,"show-refresh":!0,onRefresh:e.getPagosResponsable},null,8,["columns","data","config","onRefresh"])]}),_:1},8,["modelValue","onClose"])])}var Fe=t(33777),ye={emits:["update:modelValue","input"],props:{alucod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{QTable:de.A,QTr:_.qh,QTd:_.Ef,QIcon:_.bP,QInput:_.ie,sieModal:U.A,SieTable:Fe.A},data:function(){return{pagos:[],config:{},columns:[],load:{},filter:{anobec:null}}},methods:{cleanBecas:function(){this.alucod=null},getPagosResponsable:function(){var e=this;return D()(F()().m(function o(){var t,n;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={alucod:e.alucod,anobec:e.filter.anobec||e.anobec+""},o.p=1,o.n=2,e.$http.get("api/PagoController/getPagosResponsable",{params:{params:t}});case 2:n=o.v,e.pagos=a()(n),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},setTable:function(){var e=this;return D()(F()().m(function o(){return F()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.getPagosResponsable();case 1:e.columns=[{name:"FECEMI",field:"FECEMI",label:"Fec.Emi.",align:"center",sortable:!0},{name:"NOMRESP",field:"NOMRESP",label:"Responsable de Pago",align:"left"},{name:"PARENTESCO",field:"PARENTESCO",label:"Parentesco",align:"left"},{name:"DOCUMENTO",field:"DOCUMENTO",label:"N° Documento",align:"center"},{name:"CONCEPTO",field:"CONCEPTO",label:"Concepto",align:"left"},{name:"FECPAG",field:"FECPAG",label:"Fec.Pago",align:"left"}],e.config={FECEMI:{component:"date",edit:!1},FECPAG:{component:"date",edit:!1},NOMRESP:{renderHtml:function(e,o,t,n){e.FECPAG||(n.$$color="#b71c1c")}}};case 2:return o.a(2)}},o)}))()}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},mounted:function(){var e=this;return D()(F()().m(function o(){return F()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.setTable();case 1:return o.a(2)}},o)}))()}};const De=(0,ie.A)(ye,[["render",ke]]);var Ve=De,Be={class:"col"};function Se(e,o){var t=(0,l.g2)("fichaeconomica"),n=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(n,{modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.model=o}),title:"Ficha económica",css:{minWidth:"40vw"},footer:!1},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Be,[(0,l.bF)(t,{famcod:e.famcod,"is-editable":!1},null,8,["famcod"])])]}),_:1},8,["modelValue"])])}var Me=t(86950),Pe={emits:["update:modelValue","input"],props:{famcod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{sieModal:U.A,fichaeconomica:Me.A},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const Ie=(0,ie.A)(Pe,[["render",Se]]);var _e=Ie,Re=t(53564),Ue=t(62006),Le=t(982),He=t(64707),Ne=t(80660),qe=t(88567),Te=t(95718),xe=t(16648),Qe=t(78131),$e=["0057","0193","0205","0081"],Xe=["0010","0057","0193","0205","0081","0275"],We=["0193","0081"],ze={components:{QCard:qe.A,QCardSection:Te.A,QSelect:xe.A,QCardMain:_.d1,QTable:S.A,QTr:M.A,QTd:P.A,QPageSticky:_._U,QPopover:_.VM,QList:_.Mb,QItem:_.H0,sieSelect:R.A,sieModal:U.A,observacion:se,consultar:he,encuesta:we,historialPago:Ve,ficha:_e,estadoexp:Re.A,sieInfo:be["default"],QDownloadFile:Ue.A,notify:Le["default"],becaOtorgada:He.A,QPage:_.Tu,QBtn:B.A,QTooltip:V.A,QInput:_.ie},data:function(){var e=this;return{pagination:{rowsPerPage:0},acceso:(0,be["default"])().ruta.nivel>=2,esSantisimo:"0057"===(0,be["default"])().colcod,sie:(0,be["default"])(),showEst:!1,showObs:!1,showCon:!1,showFic:!1,showAsig:!1,showEncuesta:!1,showHistorialPago:!1,dsFamilias:[],dsParticipantes:[],dsEstados:[{label:"Aprobado",value:1},{label:"Rechazado",value:2},{label:"Exonerado",value:4}],dsDocs:[],columns:[{name:"DOCUMENTO",field:"DOCUMENTO",label:"DOCUMENTO",style:"width: 250px",align:"left"},{name:"FECHA_REG",field:"FECHA_REG",label:"FECHA ENTREGA",style:"width: 150px",align:"center"},{name:"FECHA_APRO",field:"FECHA_APRO",label:"FECHA ESTADO",style:"width: 150px",align:"center"},{name:"APROBADO",field:"APROBADO",label:"ESTADO",align:"center"},{name:"ARCHIVO",label:"ARCHIVO",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],filter:{FAMCOD:"",ALUCOD:""},idBecaExp:null,idBecaSol:null,form:{APROBADO:null,OBSERVACION:null},TESORERIA:"26",buttons:[{icon:"arrow_back",label:"Regresar",click:function(){e.back()},permiso:"> 1"}]}},methods:{date:L.Ay,init:function(){this.filter.FAMCOD=this.$route.params.famcod,this.getFamSolicitantes(),this.getParticipantesFam()},back:function(){this.$router.push({name:"intranet.becas.dashboard"})},showModalObs:function(){this.showObs=!0},showModalAsig:function(){var e=this;return D()(F()().m(function o(){var t,n,l,i;return F()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Ne.$http.get("api/ConstanteSistemaController/getSistemasPorCodigo",{params:{params:{SISCOD:e.TESORERIA}}});case 1:if(t=o.v,n=!1,t&&t.length>0&&(l=a()(t),i=l[0],n=1===Number(i.ESTADO)),n){o.n=2;break}return e.showAsig=!0,o.a(2,!0);case 2:if(e.filter.ALUCOD){o.n=3;break}return o.a(2,e.$alert("Seleccione primero un alumno","warning"));case 3:e.$router.push({name:"intranet.becas.asignar",query:{codigo:e.filter.ALUCOD}});case 4:return o.a(2)}},o)}))()},showModalCon:function(){this.showCon=!0},showModalFic:function(){this.showFic=!0},showModalEncuesta:function(){this.showEncuesta=!0},showModalHistorialPago:function(){this.showHistorialPago=!0},showModalEst:function(e){this.idBecaExp=e.ID_BECA_EXPEDIENTE,this.idBecaSol=e.ID_BECA_SOLICITUD,this.showEst=!0},hideModalEst:function(){this.idBecaSol=null,this.idBecaExp=null,this.showEst=!1,this.form={APROBADO:null,OBSERVACION:null}},getUrl:function(e){var o,t=e.split("."),n=t[0].split("_"),a=n[1];return o=n.length>=3?n[2]:1,"".concat(this.sie.api,"/HyoBecaExpediente/archivo/").concat(a,"/").concat(o,"?sie-token=").concat(this.sie.token)},getFamSolicitantes:function(){var e=this;return D()(F()().m(function o(){var t,n,a;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={periodo:e.perActivo},o.p=1,o.n=2,e.$http.get("api/HyoBecaSolicitud/getFamSolicitantes",{params:t});case 2:n=o.v,a=n.json,e.dsFamilias=a,o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},getParticipantesFam:function(){var e=this;return D()(F()().m(function o(){var t,n,a;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={periodo:e.perActivo,famcod:e.filter.FAMCOD},o.p=1,o.n=2,e.$http.get("api/HyoBecaParticipante/getParticipantesFam",{params:t});case 2:n=o.v,a=n.json,e.dsParticipantes=a,a.length>0&&(e.filter.ALUCOD=a[0].ALUCOD,e.getDocsAlu()),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},getDocsAlu:function(){var e=this;return D()(F()().m(function o(){var t,n,a;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={periodo:e.perActivo,famcod:e.filter.FAMCOD,alucod:e.filter.ALUCOD},o.p=1,o.n=2,e.$http.get("api/HyoBecaDocumento/getDocumentosAlu",{params:t});case 2:n=o.v,a=n.json,e.dsDocs=a,o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},updateStateExp:function(){var e=this;return D()(F()().m(function o(){var t,n,a,l;return F()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={id:e.idBecaExp,idSol:e.idBecaSol,data:e.form},o.p=1,o.n=2,e.$http.put("api/HyoBecaExpediente/updateEstado",t);case 2:n=o.v,a=n.json,"Ok"===a.status&&((0,Le["default"])(a.message),e.showEst=!1,e.getDocsAlu()),o.n=4;break;case 3:o.p=3,l=o.v,(0,Le["default"])(l.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deleteExp:function(e){var o=this;return D()(F()().m(function t(){return F()().w(function(t){while(1)switch(t.n){case 0:o.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(D()(F()().m(function t(){var n,a,l,i;return F()().w(function(t){while(1)switch(t.p=t.n){case 0:return n={id:e,anobec:o.anobecActivo},t.p=1,t.n=2,o.$http.delete("api/HyoBecaExpediente/deleteExp",{params:n});case 2:a=t.v,l=a.json,"Ok"===l.status&&((0,Le["default"])(l.message),o.getDocsAlu()),t.n=4;break;case 3:t.p=3,i=t.v,(0,Le["default"])(i.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))).onCancel(function(){});case 1:return t.a(2)}},t)}))()},descargarDocumentos:function(){var e=this;return D()(F()().m(function o(){var t,n,a,l,i,r,s,c,u;return F()().w(function(o){while(1)switch(o.n){case 0:for(a=e.$q.dialog({title:"Descargando archivos...",message:"0%",progress:{spinner:I.A,color:"primary"},persistent:!0,ok:!1}),l=[],i=0;i<e.dsDocs.length;i++)if(r=e.dsDocs[i],2!==r.APROBADO)for(s=r.ARCHIVOS.split("||"),c=r.NOMBRE,u=0;u<s.length;u++)l.push({url:"".concat(e.sie.api,"/HyoBecaExpediente/archivo/").concat(r.ID_BECA_EXPEDIENTE,"/").concat(u+1,"?sie-token=").concat(e.sie.token),filename:c[u]});return o.n=1,(0,Qe.generateZipFromApis)({files:l,method:"get",zipName:null!==(t=null===(n=e.dsDocs[0])||void 0===n?void 0:n.FAMDES)&&void 0!==t?t:"documentos",onProgress:function(e,o){a.update({message:"Descargando ".concat(o," (").concat(e,"%)")})}});case 1:a.update({title:"Completado",message:"Descarga completada correctamente",progress:!1,ok:!0});case 2:return o.a(2)}},o)}))()}},computed:w()(w()({},(0,me.aH)("beca",["perActivo","anobecActivo"])),{},{urlBeca:function(){return"".concat((0,be["default"])().url,"/pensiones/asigna-beca-resolucion/form/cod/020006002")},mostrarHistorialPago:function(){return this.filter.ALUCOD&&this.filter.ALUCOD.length>0},mostrarFichaEconomica:function(){return-1!==$e.indexOf((0,be["default"])().colcod)},mostrarAsignarBeca:function(){return-1!==Xe.indexOf((0,be["default"])().colcod)},mostrarEncuesta:function(){return-1!==We.indexOf((0,be["default"])().colcod)}}),mounted:function(){this.init()}};const je=(0,ie.A)(ze,[["render",E]]);var Ye=je}}]);