"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[10232],{10232:function(e,o,r){r.r(o),r.d(o,{default:function(){return De}});var t=r(8445),n=r.n(t),a=r(61758),l=r(58790),u={key:1,class:"row col q-pa-md"},i={class:"col-md-4 col-sm-5 col-xs-12 full-height"},c={class:"col-md-8 col-sm-7 col-xs-12 q-pl-sm-md q-pl-xs-none q-mt-xs-md q-mt-sm-none full-height overflow-auto col column"},s={key:0,class:"col full-height q-pb-lg full-width relative-position"},d={class:"row justify-center q-my-md"},m={class:"row q-px-sm q-pt-sm"},f={class:"col"},p={class:"row q-px-sm q-pb-sm"},b={class:"col-4"},v={class:"col-4"},F={class:"col-4"},h={class:"col-6"},_={class:"col-6"},g={class:"col-3"},k={class:"col-3"},O={class:"col-3"},R={class:"col-3"},U={class:"row q-px-sm q-pb-sm"},$={class:"col"},E={class:"row q-pa-sm"},I={class:"col-12"},D={class:"col-6"},C={class:"col-6"},A={class:"col-12"},x={class:"row q-pa-sm"},w={class:"row column q-px-sm q-pt-sm"},S={class:"col-12"};function V(e,o){var r=(0,a.g2)("sie-vacio"),t=(0,a.g2)("q-select"),V=(0,a.g2)("q-item-section"),L=(0,a.g2)("q-item"),N=(0,a.g2)("q-avatar"),q=(0,a.g2)("q-item-label"),y=(0,a.g2)("q-icon"),T=(0,a.g2)("q-list"),G=(0,a.g2)("q-popover"),M=(0,a.g2)("q-item-tile"),P=(0,a.g2)("q-item-main"),H=(0,a.g2)("q-card"),W=(0,a.g2)("group-chart"),Q=(0,a.g2)("q-input"),X=(0,a.g2)("q-popup-edit"),Y=(0,a.g2)("sie-progress"),j=(0,a.g2)("q-checkbox"),B=(0,a.g2)("q-btn"),K=(0,a.g2)("draggable"),z=(0,a.g2)("q-field"),J=(0,a.g2)("sie-select"),Z=(0,a.g2)("q-datetime"),ee=(0,a.g2)("q-td"),oe=(0,a.g2)("q-table"),re=(0,a.g2)("sie-modal"),te=(0,a.g2)("q-item-side"),ne=(0,a.g2)("sie-upload"),ae=(0,a.g2)("sie-editor"),le=(0,a.g2)("q-radio"),ue=(0,a.g2)("q-toolbar"),ie=(0,a.g2)("modalCompetencia"),ce=(0,a.g2)("formly"),se=(0,a.g2)("q-toolbar-title"),de=(0,a.g2)("q-fab-action"),me=(0,a.g2)("q-fab"),fe=(0,a.g2)("q-page-sticky"),pe=(0,a.g2)("q-page"),be=(0,a.gN)("ripple"),ve=(0,a.gN)("close-overlay");return(0,a.uX)(),(0,a.Wv)(pe,null,{default:(0,a.k6)(function(){return[e.vacio?((0,a.uX)(),(0,a.Wv)(r,{key:0})):((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",i,[(0,a.bF)(T,{class:"bg-white overflow-auto full-height q-py-none",highlight:"",link:"",separator:""},{default:(0,a.k6)(function(){return[(0,a.bF)(L,null,{default:(0,a.k6)(function(){return[(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(t,{type:"outlined",modelValue:e.usucod,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.usucod=o}),label:"Usuario","option-value":"usucod","option-label":"usunom",options:e.usuarios,onInput:e.obtExamenesPorUsuario},null,8,["modelValue","options","onInput"])]}),_:1})]}),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.examenes,function(r,t){return(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:t,clickable:"",onClick:function(o){return e.viewExamen(r)},active:e.idFormulario===r.ID_FORMULARIO,"active-class":"bg-grey-12 text-grey-8"},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(N,{icon:r.ICONO,"text-color":"white",style:(0,l.Tr)({"background-color":r.COLOR})},null,8,["icon","style"])]}),_:2},1024),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,{label:"",lines:"2"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(r.TITULO),1)]}),_:2},1024)]}),_:2},1024),(0,a.bF)(V,{side:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"more_vert"},{default:(0,a.k6)(function(){return[(0,a.bF)(G,null,{default:(0,a.k6)(function(){return[(0,a.bF)(T,{link:""},{default:(0,a.k6)(function(){return[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{clickable:"",onClick:function(o){return e.editExamen(r)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"edit",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.$t("botones.editar")),1)]}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{clickable:"",onClick:function(o){return e.preview(r.ID_HISTORIA_FORMULARIO)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"pageview",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return n()(o[35]||(o[35]=[(0,a.eW)("Vista previa",-1)]))}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{clickable:"",onClick:function(o){return e.exportarExamen(r.ID_FORMULARIO)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"file_pdf_o",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.$t("botones.exportarPDF")),1)]}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]]),r.BLOQUEADO?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:0,clickable:"",onClick:function(o){return e.resultadosExamen(r.ID_FORMULARIO)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"file_pdf_o",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.$t("resultados")),1)]}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]]):(0,a.Q3)("v-if",!0),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{clickable:"",onClick:function(o){return e.openImportarArchivo(r)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"file_import",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.$t("importar")),1)]}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]]),r.BLOQUEADO?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:1,clickable:"",onClick:function(o){return e.chartResultados(r.ID_FORMULARIO)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"line_chart",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return n()(o[36]||(o[36]=[(0,a.eW)("Estadísticas",-1)]))}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]]):(0,a.Q3)("v-if",!0),r.BLOQUEADO?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:2,clickable:"",onClick:function(o){return e.deleteAnswer(r.ID_HISTORIA_FORMULARIO)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"delete",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return n()(o[37]||(o[37]=[(0,a.eW)("Eliminar Respuestas",-1)]))}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]]):(0,a.Q3)("v-if",!0),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{clickable:"",onClick:function(o){return e.deleteExamen(r.ID_FORMULARIO)}},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"delete",color:"black"})]}),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1})]}),_:1},8,["onClick"])),[[be],[ve]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["onClick","active"])),[[be]])}),128))]}),_:1})]),(0,a.Lk)("div",c,[e.idFormulario?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(H,{class:"q-mb-md"},{default:(0,a.k6)(function(){return[(0,a.bF)(T,null,{default:(0,a.k6)(function(){return[(0,a.bF)(L,null,{default:(0,a.k6)(function(){return[(0,a.bF)(P,null,{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:""},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.detalle.titulo),1)]}),_:1}),(0,a.bF)(M,{sublabel:""},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.detalle.nivel)+" - "+(0,l.v_)(e.detalle.grado),1)]}),_:1}),(0,a.bF)(M,{sublabel:""},{default:(0,a.k6)(function(){return[(0,a.eW)("Fecha entrega: "+(0,l.v_)(e.formatoFechaHora(e.detalle.fh_entrega)),1)]}),_:1}),(0,a.bF)(M,{sublabel:""},{default:(0,a.k6)(function(){return[(0,a.eW)("Vigencia: "+(0,l.v_)(e.formatoFechaHora(e.detalle.fh_inicio))+" - "+(0,l.v_)(e.formatoFechaHora(e.detalle.fh_fin)),1)]}),_:1}),(0,a.bF)(M,{sublabel:""},{default:(0,a.k6)(function(){return[(0,a.eW)("Límite preguntas: "+(0,l.v_)(e.detalle.limite_preguntas),1)]}),_:1}),(0,a.bF)(M,{sublabel:""},{default:(0,a.k6)(function(){return[(0,a.eW)("Límite de tiempo: "+(0,l.v_)(e.detalle.limite_tiempo),1)]}),_:1}),(0,a.bF)(M,{sublabel:""},{default:(0,a.k6)(function(){return[(0,a.eW)("Puntaje máximo: "+(0,l.v_)(e.detalle.puntaje_maximo),1)]}),_:1}),(0,a.bF)(M,{sublabel:""},{default:(0,a.k6)(function(){return[(0,a.eW)("Máxima cantidad de opciones: "+(0,l.v_)(e.detalle.max_opciones),1)]}),_:1})]}),_:1})]}),_:1})]}),_:1})]}),_:1}),e.chartEstadistica?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(W,{class:"q-mb-lg",id:e.idHistoriaFormulario,format:!0},null,8,["id"])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(T,{class:"q-py-none col full-height q-pb-lg full-width",separator:""},{default:(0,a.k6)(function(){return[(0,a.bF)(L,{class:"bg-grey-12"},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:""}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.responsables.columns,function(e,o){return(0,a.uX)(),(0,a.Wv)(V,{key:o,class:(0,l.C4)(e.align)},{default:(0,a.k6)(function(){return[(0,a.bF)(q,{class:"text-black",caption:"",lines:"1"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.label),1)]}),_:2},1024)]}),_:2},1032,["class"])}),128))]}),_:1}),(0,a.bF)(K,{class:"bg-white q-list--separator col full-height overflow-auto",modelValue:e.responsables.data,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.responsables.data=o}),onChange:o[2]||(o[2]=function(o){return e.ordenar(e.responsables.data)}),options:{handle:".handle"}},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.responsables.data,function(o,r){return(0,a.uX)(),(0,a.Wv)(L,{key:r},{default:(0,a.k6)(function(){return[(0,a.bF)(V,{avatar:"",class:(0,l.C4)({handle:!e.bloqueado})},{default:(0,a.k6)(function(){return[(0,a.bF)(y,{name:"blur_on",size:"20px",style:{cursor:"move"}})]}),_:1},8,["class"]),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,{caption:"",lines:"2"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(o.CURSONOM),1)]}),_:2},1024)]}),_:2},1024),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,{caption:"",lines:"2"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(o.USUNOM),1)]}),_:2},1024)]}),_:2},1024),(0,a.bF)(V,{class:"text-center"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(o.NRO_PREGUNTAS),1),(0,a.bF)(X,{modelValue:o.NRO_PREGUNTAS,"onUpdate:modelValue":function(e){return o.NRO_PREGUNTAS=e},onSave:function(r){return e.updateFormularioGrupoDet(o)},disable:e.bloqueado},{default:(0,a.k6)(function(){return[(0,a.bF)(Q,{class:"q-if-outlined",type:"number",modelValue:o.NRO_PREGUNTAS,"onUpdate:modelValue":function(e){return o.NRO_PREGUNTAS=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave","disable"])]}),_:2},1024),(0,a.bF)(V,null,{default:(0,a.k6)(function(){return[(0,a.bF)(Y,{height:"18px",total:o.NRO_PREGUNTAS,progreso:o.PROGRESO},null,8,["total","progreso"])]}),_:2},1024),(0,a.bF)(V,{class:"text-center"},{default:(0,a.k6)(function(){return[(0,a.bF)(j,{class:"q-if-outlined",style:{background:"none",margin:"0 auto"},modelValue:o.ESTADO,"onUpdate:modelValue":function(e){return o.ESTADO=e},"true-value":1,"false-value":0,color:"secondary",disable:o.BLOQUEADO||e.bloqueado,onInput:function(r){return e.updateFormularioGrupoDet(o)}},null,8,["modelValue","onUpdate:modelValue","disable","onInput"])]}),_:2},1024),(0,a.bF)(V,{class:"text-center"},{default:(0,a.k6)(function(){return[(0,a.bF)(q,{caption:"",lines:"1"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.formatoFechaHora(o.FH_MODIFICACION)),1)]}),_:2},1024)]}),_:2},1024),(0,a.bF)(V,{class:"text-center"},{default:(0,a.k6)(function(){return[(0,a.bF)(q,{caption:"",lines:"1"},{default:(0,a.k6)(function(){return[(0,a.bF)(B,{icon:"check_circle",color:o.LLAVE?"positive":"grey",onClick:function(r){return e.openModalRN(o)},flat:"",dense:"",round:""},null,8,["color","onClick"]),o.LLAVE?((0,a.uX)(),(0,a.Wv)(B,{key:0,icon:"remove_circle",color:"negative",onClick:function(r){return e.deleteLlave(o)},flat:"",dense:"",round:""},null,8,["onClick"])):(0,a.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1},8,["modelValue"])]}),_:1}),(0,a.Lk)("div",d,[(0,a.bF)(B,{onClick:e.construirSimulacro,label:e.$t("botones.procesar"),color:"secondary",icon:"cog",disable:e.bloqueado,loading:e.loadingProcess},null,8,["onClick","label","disable","loading"])])],64))],64)):((0,a.uX)(),(0,a.Wv)(r,{key:1,class:"col",title:e.$t("mensajes.m0027")},null,8,["title"]))])])),(0,a.bF)(re,{class:"modal-crear-examen",modelValue:e.modal,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.modal=o}),title:e.$t("nuevoExamen"),ok:e.$t("botones.guardar"),onSubmit:e.saveFormularioGrupo},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",m,[(0,a.Lk)("div",f,[(0,a.bF)(z,{error:e.v$.frm.titulo.$error,"error-label":e.label(e.v$.frm.titulo)},{default:(0,a.k6)(function(){return[(0,a.bF)(Q,{class:"q-if-outlined",modelValue:e.v$.frm.titulo.$model,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.v$.frm.titulo.$model=o}),"float-label":e.$t("titulo")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",null,[(0,a.bF)(B,{icon:"drag_handle",onClick:o[4]||(o[4]=function(o){return e.modalCabecera=!0}),round:"",size:"12px",color:"primary"})])]),(0,a.Lk)("div",p,[(0,a.Lk)("div",b,[(0,a.bF)(z,{error:e.v$.frm.instrucod.$error,"error-label":e.label(e.v$.frm.instrucod)},{default:(0,a.k6)(function(){return[(0,a.bF)(J,{type:"outlined",modelValue:e.v$.frm.instrucod.$model,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.v$.frm.instrucod.$model=o}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",disable:e.bloqueoNG,onInput:e.getCursos},null,8,["modelValue","options","disable","onInput"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",v,[(0,a.bF)(J,{type:"outlined",modelValue:e.frm.gradocod,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.frm.gradocod=o}),options:e.grados,label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado",disable:e.bloqueoNG,onInput:e.getCursos},null,8,["modelValue","options","disable","onInput"])]),(0,a.Lk)("div",F,[(0,a.bF)(z,{error:e.v$.frm.fh_entrega.$error,"error-label":e.label(e.v$.frm.fh_entrega)},{default:(0,a.k6)(function(){return[(0,a.bF)(Z,{class:"q-if-outlined",modelValue:e.v$.frm.fh_entrega.$model,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.v$.frm.fh_entrega.$model=o}),"float-label":e.$t("fechaDeEntrega"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",h,[(0,a.bF)(z,{error:e.v$.frm.fh_inicio.$error,"error-label":e.label(e.v$.frm.fh_inicio)},{default:(0,a.k6)(function(){return[(0,a.bF)(Z,{class:"q-if-outlined",modelValue:e.v$.frm.fh_inicio.$model,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.v$.frm.fh_inicio.$model=o}),"float-label":e.$t("fechainicio"),type:"datetime",format:"DD/MM/YYYY HH:mm:ss"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",_,[(0,a.bF)(z,{error:e.v$.frm.fh_fin.$error,"error-label":e.label(e.v$.frm.fh_fin)},{default:(0,a.k6)(function(){return[(0,a.bF)(Z,{class:"q-if-outlined",modelValue:e.v$.frm.fh_fin.$model,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.v$.frm.fh_fin.$model=o}),"float-label":e.$t("fechafin"),type:"datetime",format:"DD/MM/YYYY HH:mm:ss"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",g,[(0,a.bF)(z,{error:e.v$.frm.limite_preguntas.$error,"error-label":e.label(e.v$.frm.limite_preguntas)},{default:(0,a.k6)(function(){return[(0,a.bF)(Q,{class:"q-if-outlined",modelValue:e.v$.frm.limite_preguntas.$model,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.v$.frm.limite_preguntas.$model=o}),"float-label":e.$t("limitePreguntas")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",k,[(0,a.bF)(z,{error:e.v$.frm.limite_tiempo.$error,"error-label":e.label(e.v$.frm.limite_tiempo)},{default:(0,a.k6)(function(){return[(0,a.bF)(Q,{class:"q-if-outlined",modelValue:e.v$.frm.limite_tiempo.$model,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.v$.frm.limite_tiempo.$model=o}),"float-label":e.$t("limiteTiempo")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",O,[(0,a.bF)(z,{error:e.v$.frm.puntaje_maximo.$error,"error-label":e.label(e.v$.frm.puntaje_maximo)},{default:(0,a.k6)(function(){return[(0,a.bF)(Q,{class:"q-if-outlined",modelValue:e.v$.frm.puntaje_maximo.$model,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.v$.frm.puntaje_maximo.$model=o}),"float-label":e.$t("puntajeMaximo")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",R,[(0,a.bF)(z,{error:e.v$.frm.max_opciones.$error,"error-label":e.label(e.v$.frm.max_opciones)},{default:(0,a.k6)(function(){return[(0,a.bF)(Q,{class:"q-if-outlined",modelValue:e.v$.frm.max_opciones.$model,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.v$.frm.max_opciones.$model=o}),"float-label":e.$t("opcionesMaximo")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])]),(0,a.Lk)("div",U,[(0,a.Lk)("div",$,[(0,a.bF)(oe,{style:{"max-height":"400px"},data:e.cursos.data,columns:e.cursos.columns},{"body-cell-MARCADO":(0,a.k6)(function(o){return[(0,a.bF)(ee,{props:o},{default:(0,a.k6)(function(){return[(0,a.bF)(j,{class:"q-pa-sm",modelValue:o.row.MARCADO,"onUpdate:modelValue":function(e){return o.row.MARCADO=e},"true-value":1,"false-value":0,color:"primary",onInput:function(r){return e.selectCurso(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-USUCOD":(0,a.k6)(function(o){return[(0,a.bF)(ee,{props:o},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.getNomComp(o.row.USUCOD,o.row.RESPONSABLES)),1),(0,a.bF)(X,{modelValue:o.row.USUCOD,"onUpdate:modelValue":function(e){return o.row.USUCOD=e}},{default:(0,a.k6)(function(){return[(0,a.bF)(J,{type:"outlined",modelValue:o.row.USUCOD,"onUpdate:modelValue":function(e){return o.row.USUCOD=e},options:o.row.RESPONSABLES,label:"NOMCOMP",val:"USUCOD"},null,8,["modelValue","onUpdate:modelValue","options"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-NRO_PREGUNTAS":(0,a.k6)(function(e){return[(0,a.bF)(ee,{props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.NRO_PREGUNTAS),1),(0,a.bF)(X,{modelValue:e.row.NRO_PREGUNTAS,"onUpdate:modelValue":function(o){return e.row.NRO_PREGUNTAS=o}},{default:(0,a.k6)(function(){return[(0,a.bF)(Q,{class:"q-if-outlined",modelValue:e.row.NRO_PREGUNTAS,"onUpdate:modelValue":function(o){return e.row.NRO_PREGUNTAS=o}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])])])]}),_:1},8,["modelValue","title","ok","onSubmit"]),(0,a.bF)(re,{class:"modal-copiar-examen",modelValue:e.copia.modal,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.copia.modal=o}),title:e.$t("botones.duplicarConfiguracion"),ok:e.$t("botones.copiar"),onSubmit:e.copiarExamen},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",E,[(0,a.Lk)("div",I,[(0,a.bF)(Z,{class:"q-if-outlined",modelValue:e.v$.copia.fechaEntrega.$model,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.v$.copia.fechaEntrega.$model=o}),"float-label":e.$t("fechaDeEntrega"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",D,[(0,a.bF)(Z,{class:"q-if-outlined",modelValue:e.v$.copia.fechaInicio.$model,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.v$.copia.fechaInicio.$model=o}),"float-label":e.$t("fechainicio"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",C,[(0,a.bF)(Z,{class:"q-if-outlined",modelValue:e.v$.copia.fechaFin.$model,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.v$.copia.fechaFin.$model=o}),"float-label":e.$t("fechafin"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",A,[(0,a.bF)(T,{highlight:"",link:"",separator:""},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.examenes,function(r,t){return(0,a.uX)(),(0,a.Wv)(L,{key:t},{default:(0,a.k6)(function(){return[(0,a.bF)(te,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",{class:"q-item-icon q-item-inverted flex flex-center",style:(0,l.Tr)({"background-color":r.COLOR})},[(0,a.bF)(y,{name:r.ICONO},null,8,["name"])],4)]}),_:2},1024),(0,a.bF)(P,null,{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:"",lines:"2"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(r.TITULO),1)]}),_:2},1024)]}),_:2},1024),(0,a.bF)(te,null,{default:(0,a.k6)(function(){return[(0,a.bF)(j,{class:"q-if-outlined",style:{background:"none"},modelValue:e.selectionExa,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.selectionExa=o}),val:r.ID_FORMULARIO,onInput:e.controlSeleccion},null,8,["modelValue","val","onInput"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])])]}),_:1},8,["modelValue","title","ok","onSubmit"]),(0,a.bF)(re,{class:"modal-importar",modelValue:e.modalImportar,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.modalImportar=o}),title:e.$t("intranet.importarResultados"),onSubmit:e.importarArchivo},{default:(0,a.k6)(function(){return[(0,a.bF)(ne,{class:"no-wrap imagen",onUpload:e.added,allow:["xlsx"],icon:"file_excel"},null,8,["onUpload"])]}),_:1},8,["modelValue","title","onSubmit"]),(0,a.bF)(re,{class:"modal-cabecera",modelValue:e.modalCabecera,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.modalCabecera=o}),title:"Cabecera simulacro",onSubmit:o[23]||(o[23]=function(o){return e.modalCabecera=!1})},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",x,[(0,a.bF)(ae,{class:"col",modelValue:e.frm.cabecera,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.frm.cabecera=o}),label:"Cabecera"},null,8,["modelValue"])])]}),_:1},8,["modelValue"]),(0,a.bF)(re,{class:"modal-reporte-simulacro",modelValue:e.reportes.modal,"onUpdate:modelValue":o[29]||(o[29]=function(o){return e.reportes.modal=o}),title:"Reportes",ok:!1},{footer:(0,a.k6)(function(){return[(0,a.bF)(ue,{class:"justify-end",color:"grey-2"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",null,[(0,a.bF)(B,{class:"q-mx-xs",color:"primary",icon:"file_pdf",onClick:o[25]||(o[25]=function(o){return e.exportar("pdf")})},{default:(0,a.k6)(function(){return n()(o[38]||(o[38]=[(0,a.eW)("PDF",-1)]))}),_:1}),(0,a.bF)(B,{class:"q-mx-xs",color:"primary",icon:"file_pdf",onClick:o[26]||(o[26]=function(o){return e.exportar("xls")})},{default:(0,a.k6)(function(){return n()(o[39]||(o[39]=[(0,a.eW)("EXCEL",-1)]))}),_:1})])]}),_:1})]}),footerMobile:(0,a.k6)(function(){return[(0,a.bF)(B,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[27]||(o[27]=function(o){return e.exportar("pdf")})}),(0,a.bF)(B,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[28]||(o[28]=function(o){return e.exportar("xls")})})]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",w,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.reportes.objReportes,function(r,t){return(0,a.uX)(),(0,a.CE)("div",S,[(0,a.bF)(le,{class:"q-if-outlined",modelValue:e.reportes.repcod,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.reportes.repcod=o}),val:r.repcod,label:r.label},null,8,["modelValue","val","label"])])}),256))])]}),_:1},8,["modelValue"]),(0,a.bF)(ie,{modelValue:e.competencia.modal,"onUpdate:modelValue":o[30]||(o[30]=function(o){return e.competencia.modal=o}),llave:e.competencia.llave,instrucod:e.competencia.instrucod,gradocod:e.competencia.gradocod,cursocod:e.competencia.cursocod,bimecod:e.competencia.bimecod,onSubmit:e.saveLlave},null,8,["modelValue","llave","instrucod","gradocod","cursocod","bimecod","onSubmit"]),(0,a.bF)(re,{class:"sie-no-print",modelValue:e.form.modal,"onUpdate:modelValue":o[31]||(o[31]=function(o){return e.form.modal=o}),onSubmit:o[32]||(o[32]=function(o){return e.form.modal=!1}),loading:e.form.loading,title:"Vista previa"},{default:(0,a.k6)(function(){return[(0,a.bF)(ce,{data:e.form.data},null,8,["data"])]}),_:1},8,["modelValue","loading"]),e.isLess?((0,a.uX)(),(0,a.Wv)(ue,{key:2,class:"fixed-top q-toolbar-menu",inverted:""},{default:(0,a.k6)(function(){return[(0,a.bF)(se),(0,a.bF)(B,{flat:"",round:"",dense:"",icon:"plus",color:"white",onClick:e.nuevoExamen},null,8,["onClick"]),(0,a.bF)(B,{flat:"",round:"",dense:"",icon:"copy",color:"white",onClick:o[33]||(o[33]=function(o){return e.copia.modal=!0})})]}),_:1})):((0,a.uX)(),(0,a.Wv)(fe,{key:3,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,a.k6)(function(){return[(0,a.bF)(me,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,a.k6)(function(){return[(0,a.bF)(de,{color:"secondary",icon:"plus",onClick:e.nuevoExamen},null,8,["onClick"]),(0,a.bF)(de,{color:"secondary",icon:"copy",onClick:o[34]||(o[34]=function(o){return e.copia.modal=!0})})]}),_:1})]}),_:1}))]}),_:1})}var L=r(76080),N=r.n(L),q=r(45254),y=r.n(q),T=(r(74260),r(10239),r(89571),r(56285),r(50310),r(32203),r(83190),r(83972)),G=r(6123),M=r(65673),P=r(82327),H=r(88865),W=r(66824),Q=r(74656),X=r(11654),Y=r(16648),j=r(93616),B=r(30640),K=r(80340),z=r(64180),J=r(6083),Z=r(30545),ee=(r(27153),r(62540),r(64642)),oe={emits:["update:modelValue","input","submit"],props:{modelValue:Boolean,instrucod:String,gradocod:String,llave:String,cursocod:String,bimecod:String},data:function(){return{loading:!1,tree:[],llaveModel:this.llave}},updated:function(){this.llaveModel=String(this.llaveModel)},methods:{onInput:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)},onSubmit:function(){this.$emit("update:modelValue",!1),this.$emit("input",!1),this.$emit("submit",this.llaveModel)},updateSelected:function(e){this.llaveModel=e},loadNotas:function(){var e=this;this.loading=!0,this.$http.get("api/HyoCritdescs/getCompetenciasEvaluacion",{params:{instrucod:this.instrucod,gradocod:this.gradocod,cursocod:this.cursocod,bimecod:this.bimecod}}).then(function(o){e.tree=o}).finally(function(){e.loading=!1})}},watch:{modelValue:function(e){e&&this.loadNotas()},llave:function(e){this.llaveModel=String(e)}},render:function(){var e=this;return(0,a.h)(B.A,{class:"modal-nota",modelValue:this.modelValue,title:"Registro de notas",loading:this.loading,onInput:this.onInput,onSubmit:this.onSubmit},{default:function(){return[(0,a.h)(ee.A,{style:{width:"600px","max-width":"100%"},nodes:e.tree,nodeKey:"value",selected:e.llaveModel,"onUpdate:selected":e.updateSelected},{default:function(e){return(0,a.h)("span",[(0,a.h)("span",{staticClass:"text-bold",domProps:{innerHTML:"".concat(e.info.level,":&#32;")}}),(0,a.h)("span",e.label)])}})]}})}};const re=oe;var te=re,ne=r(46591),ae=r(60167),le=r(78786),ue=r(982),ie=r(59089),ce=r(33950),se=r(69027),de=r(81288),me=r(39231),fe=r(66469),pe=r(18105),be=r(80660),ve=r(2819),Fe=r(33001),he=r(99637),_e=r(13813),ge=r(73922),ke=r(57668),Oe=r(82640),Re={setup:function(){var e=(0,T.fG)();return{v$:e}},getFrmDefault:function(e){var o={};return o=e?{idFormulario:e.ID_FORMULARIO,idFormularioGrupo:e.ID_FORMULARIO_GRUPO,idHistoriaFormulario:e.ID_HISTORIA_FORMULARIO,titulo:e.TITULO,instrucod:e.INSTRUCOD,gradocod:e.GRADOCOD,fh_entrega:e.FH_ENTREGA,fh_inicio:e.FH_INICIO,fh_fin:e.FH_FIN,limite_preguntas:e.LIMITE_PREGUNTAS,limite_tiempo:e.LIMITE_TIEMPO,puntaje_maximo:e.PUNTAJE_MAXIMO,max_opciones:e.MAX_OPCIONES,cabecera:e.CABECERA}:{titulo:null,instrucod:null,gradocod:null,fh_entrega:null,fh_inicio:null,fh_fin:null,limite_preguntas:null,limite_tiempo:null,puntaje_maximo:null,max_opciones:5,cabecera:null},o},getDetalleFrmDefault:function(e){var o={};return o=e?{titulo:e.TITULO,nivel:e.INSTRUDES,grado:e.GRADODES,fh_entrega:e.FH_ENTREGA,fh_inicio:e.FH_INICIO,fh_fin:e.FH_FIN,limite_preguntas:e.LIMITE_PREGUNTAS,limite_tiempo:e.LIMITE_TIEMPO,puntaje_maximo:e.PUNTAJE_MAXIMO,max_opciones:e.MAX_OPCIONES}:{titulo:null,nivel:null,grado:null,fh_entrega:null,fh_inicio:null,fh_fin:null,limite_preguntas:null,limite_tiempo:null,puntaje_maximo:null,max_opciones:null},o},getNivelesGrados:function(){var e=y()(N()().m(function e(){var o,r;return N()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,be.$http.get("api/HyoInstrus/obtInstru");case 1:return o=e.v,e.n=2,be.$http.get("api/HyoGradoNivs/obtGrados");case 2:return r=e.v,e.a(2,{niveles:o.json,gradosTmp:r.json});case 3:return e.p=3,e.v,e.a(2,{niveles:[],gradosTmp:[]})}},e,null,[[0,3]])}));function o(){return e.apply(this,arguments)}return o}(),getGrados:function(e,o){var r=[];return e&&(r=(0,Fe.filterArray)(e,{field:"INSTRUCOD",list:o})),r},getCursos:function(e){return be.$http.get("api/HyoCursos/obtCursos",{params:e})},obtExamenes:function(e){return be.$http.get("api/HyoFormulario/obtFormularios",{params:{usucod:e}})},obtFormularioGrupo:function(e){return be.$http.get("api/HyoFrmFormularioGrupo/obtFormularioGrupo",{params:e})},obtResponsables:function(e){return be.$http.get("api/HyoFrmFormularioGrupo/obtResponsables",{params:e})},checkCursos:function(e,o,r){(0,he["default"])(r,function(r){var t=(0,le["default"])(e,r.CURSOCOD,{key:"CURSOCOD"});t>=0&&(e[t].MARCADO=1,e[t].USUCOD=r.USUCOD,e[t].NRO_PREGUNTAS=r.NRO_PREGUNTAS,e[t].ESTADO=r.ESTADO,e[t].ORDEN=r.ORDEN),o.push(e[t])})},saveFormularioGrupo:function(e){return be.$http.post("api/HyoFrmFormularioGrupo/saveFormularioGrupo",e)},deleteExamen:function(e){return be.$http.delete("api/HyoFrmFormularioGrupoDet/delete",{params:e})},updateFormularioGrupoDet:function(e){return be.$http.get("api/HyoFrmFormularioGrupoDet/updateFormularioGrupoDet",{params:e})},ordenar:function(e){var o=e;return o=(0,_e["default"])(o,function(e,o){return{ID_FORMULARIO:e.ID,ORDEN:o+1}}),o},maxOrden:function(e){var o=0;if(e.length){var r=(0,_e["default"])(e,function(e){return e.ORDEN});o=Math.max.apply(Math,n()(r))}else o=0;return o+1},updateOrden:function(e){return be.$http.post("api/HyoFrmFormularioGrupoDet/updateOrden",e)},construirSimulacro:function(e){return e=(0,_e["default"])(e,function(e){return{ID_FORMULARIO:e.ID_FORMULARIO,ID_FORMULARIO_GRUPO:e.ID_FORMULARIO_GRUPO,ID:e.ID,CURSOCOD:e.CURSOCOD,NRO_PREGUNTAS:e.NRO_PREGUNTAS,ORDEN:e.ORDEN}}),be.$http.post("api/HyoFrmFormularioGrupoDet/construirSimulacro",{data:e})},copiarExamen:function(e,o,r,t){return be.$http.get("api/HyoFrmFormularioGrupo/copiarExamen",{params:{idsFormulario:e,fhEntrega:o,fhInicio:r,fhFin:t}})},enableProcesar:function(e){var o=0,r=0,t=!0;return(0,he["default"])(e,function(e){o+=e.NRO_PREGUNTAS,r+=e.PROGRESO,0===e.NRO_PREGUNTAS&&(t=!1)}),t&&o&&r&&r>=o},controlSeleccion:function(e){e.length>1&&e.splice(1,1)},exportarExamen:function(e){var o=(0,be.getBase)()+"/api/HyoFrmFormularioGrupo/reporte/simulacro.pdf";(0,ve.open)({data:{idFormulario:e},action:o})},importarResultados:function(e,o){var r={idFormulario:e,file:o};return be.$http.post("/api/HyoFrmFormularioGrupo/importarResultados",r)},reportes:function(){var e=[{repcod:"General",label:"RESULTADOS POR ESTUDIANTE"},{repcod:"PorCurso",label:"RESULTADOS POR CURSO"}];return"0477"===(0,ke["default"])().colcod&&e.unshift({repcod:"PorSalon",label:"RESULTADOS POR SALON"}),e},resultadosExamen:function(e,o,r){var t=(0,ke["default"])().url+"/intranet/reporte-node/reporte",n={repcod:"resultadosSimulacro",nombre:o,idFormulario:e,formato:r,ano:(0,ke["default"])().ano};(0,ge["default"])({parametros:n,metodo:"POST",nombre:"reporte",url:t,formatoTipo:"formato",formato:r,tipo:(0,de.isLess)()?"download":"vista"})},getIdHistoriaFormulario:function(e){return be.$http.get("api/HyoHistoriaFormulario/getIdHistoriaFormulario",{params:{idFormulario:e}})},saveLlave:function(e){return be.$http.post("api/HyoFrmFormularioGrupo/saveLLave",e)},deleteLlave:function(e){return be.$http.post("api/HyoFrmFormularioGrupo/deleteLlave",e)},getPreview:function(e){return be.$http.get("api/HyoFormulario/getPreview",{params:{idHistory:e}})},deleteAnswer:function(e){return be.$http.delete("api/HyoFrmHistoriaUsuario/deleteAnswer",{params:e})},validations:function(){var e={titulo:{required:Oe.mw,maxLength:(0,Oe.Ru)(100)},instrucod:{required:Oe.mw},fh_entrega:{required:Oe.mw},fh_inicio:{required:Oe.mw},fh_fin:{required:Oe.mw},limite_preguntas:{required:Oe.mw,numeric:Oe.sH},limite_tiempo:{required:Oe.mw,numeric:Oe.sH},puntaje_maximo:{required:Oe.mw,numeric:Oe.sH},max_opciones:{required:Oe.mw,numeric:Oe.sH}},o={fechaEntrega:{required:Oe.mw},fechaInicio:{required:Oe.mw},fechaFin:{required:Oe.mw}};return{frm:e,copia:o}}},Ue=me.Hi,$e={setup:function(){var e=(0,T.fG)();return{v$:e}},components:{QPageSticky:G._U,QFab:G.l6,QFabAction:G.B$,QDatetime:G.T5,QTable:Z.A,QTd:G.Ef,QSelect:Y.A,QPopupEdit:G.GT,QToolbar:G.ZV,QCheckbox:G.vZ,QRadio:G.$,QList:M.A,QItem:P.A,QItemSection:H.A,QItemLabel:W.A,QAvatar:Q.A,QBtn:X.A,sieProgress:z.A,sieSelect:j.A,sieModal:B.A,sieVacio:K.A,sieUpload:ie.A,sieEditor:J.A,draggable:Ue,groupChart:ne.A,modalCompetencia:te,formly:ae.A,QPage:G.Tu,QIcon:G.bP,QPopover:G.VM,QCard:G.C$,QItemMain:G.mF,QItemTile:G.lp,QInput:G.ie,QField:G.Om,QItemSide:G.n1,QToolbarTitle:G.r_},data:function(){return{vacio:!0,idFormulario:null,bloqueado:!1,examenes:[],modal:!1,frm:Re.getFrmDefault(),niveles:[],gradosTmp:[],cursos:{data:[],columns:[{name:"MARCADO",label:"",field:"MARCADO",align:"center",sortable:!1},{name:"CURSONOM",label:this.$t("curso"),field:"CURSONOM",align:"left",sortable:!1},{name:"USUCOD",label:this.$t("nomcompcharla"),field:"USUCOD",align:"left",sortable:!1},{name:"NRO_PREGUNTAS",label:this.$t("numeroPreguntas"),field:"NRO_PREGUNTAS",align:"center",sortable:!1}],seleccionados:[]},responsables:{data:[],columns:[{label:this.$t("intranet.cursos"),align:""},{label:this.$t("nomcompcharla"),align:""},{label:this.$t("numeroPreguntas"),align:"text-center"},{label:this.$t("progreso"),align:"text-center"},{label:this.$t("estado"),align:"text-center"},{label:this.$t("ultimaActualizacion"),align:"text-center"},{label:"Registro notas",align:"text-center"}]},detalle:Re.getDetalleFrmDefault(),selectionExa:[],modalImportar:!1,file:null,loadingProcess:!1,modalCabecera:!1,chartEstadistica:!1,idHistoriaFormulario:null,competencia:{modal:!1,cursocod:null,instrucod:null,gradocod:null,bimecod:null,llave:null,idFormularioGrupo:null,idFormulario:null,id:null},copia:{modal:!1,fechaEntrega:null,fechaInicio:null,fechaFin:null},form:{modal:!1,loading:!1,data:{}},reportes:{modal:!1,objReportes:Re.reportes(),repcod:"General",idFormulario:null},usuarios:[],usucod:null}},computed:{isLess:function(){return(0,de.isLess)()},grados:function(){return Re.getGrados(this.frm.instrucod,this.gradosTmp)},bloqueoNG:function(){var e=!1;return this.cursos.data.length&&(e=!!this.cursos.seleccionados.length),e}},methods:{obtExamenes:function(){var e=this;return y()(N()().m(function o(){var r,t,n;return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Re.obtExamenes();case 1:r=o.v,t=r.simulacros,n=r.usuarios,e.examenes=t,n.unshift({usunom:"Todos",usucod:null}),e.usuarios=n,e.vacio=!e.examenes.length;case 2:return o.a(2)}},o)}))()},obtExamenesPorUsuario:function(){var e=this;return y()(N()().m(function o(){var r,t,n;return N()().w(function(o){while(1)switch(o.n){case 0:return r=e.usucod,o.n=1,Re.obtExamenes(r);case 1:t=o.v,n=t.simulacros,e.examenes=n;case 2:return o.a(2)}},o)}))()},nuevoExamen:function(){var e=this;return y()(N()().m(function o(){var r,t,n;return N()().w(function(o){while(1)switch(o.n){case 0:return e.v$.frm.$reset(),e.frm=Re.getFrmDefault(),e.cursos.data=[],e.cursos.seleccionados=[],e.modal=!0,o.n=1,Re.getNivelesGrados();case 1:r=o.v,t=r.niveles,n=r.gradosTmp,e.niveles=t,e.gradosTmp=n;case 2:return o.a(2)}},o)}))()},editExamen:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l,u,i,c;return N()().w(function(r){while(1)switch(r.n){case 0:if(!e.BLOQUEADO){r.n=1;break}(0,ue["default"])("No se puede editar el simulacro porque existen respuestas","warning"),r.n=5;break;case 1:return t=e.ID_FORMULARIO,o.v$.frm.$reset(),o.cursos.data=[],o.cursos.seleccionados=[],o.modal=!0,r.n=2,Re.getNivelesGrados();case 2:return n=r.v,a=n.niveles,l=n.gradosTmp,o.niveles=a,o.gradosTmp=l,r.n=3,Re.obtFormularioGrupo({idFormulario:t});case 3:return u=r.v,i=u.frm,c=u.seleccionados,o.frm=Re.getFrmDefault(i),r.n=4,o.getCursos();case 4:Re.checkCursos(o.cursos.data,o.cursos.seleccionados,c);case 5:return r.a(2)}},r)}))()},deleteExamen:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.n=1,(0,se.dialogConfirm)({message:"¿Está seguro de eliminar este simulacro?"});case 1:if(t=r.v,!t){r.n=6;break}return r.p=2,r.n=3,Re.deleteExamen({idFormulario:e});case 3:return n=r.v,(0,ue["default"])(o.$t(n),"success"),r.n=4,o.obtExamenes();case 4:o.idFormulario=null,r.n=6;break;case 5:r.p=5,l=r.v,a=l.error,(0,ue["default"])(o.$t(a.message),"error");case 6:return r.a(2)}},r,null,[[2,5]])}))()},viewExamen:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l;return N()().w(function(r){while(1)switch(r.n){case 0:if(t=e.ID_FORMULARIO,o.chartEstadistica=!1,t===o.idFormulario){r.n=2;break}return r.n=1,Re.obtResponsables({idFormulario:t});case 1:n=r.v,a=n.responsables,l=n.detalle,o.responsables.data=a,o.detalle=Re.getDetalleFrmDefault(l),o.idFormulario=t,o.bloqueado=!!e.BLOQUEADO;case 2:return r.a(2)}},r)}))()},getCursos:function(){var e=this;return y()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Re.getCursos({instrucod:e.frm.instrucod,gradocod:e.frm.gradocod});case 1:e.cursos.data=o.v;case 2:return o.a(2)}},o)}))()},selectCurso:function(e){if(e.USUCOD)if(e.NRO_PREGUNTAS=0,e.ESTADO=null,e.ORDEN=Re.maxOrden(this.cursos.seleccionados),this.cursos.seleccionados.length){var o=(0,le["default"])(this.cursos.seleccionados,e.CURSOCOD,{key:"CURSOCOD"});o>=0?(e.NRO_PREGUNTAS=null,this.cursos.seleccionados.splice(o,1)):this.cursos.seleccionados.push(e)}else this.cursos.seleccionados.push(e);else e.NRO_PREGUNTAS=null,e.MARCADO=0,(0,ue["default"])("Seleccione un responsable","warning")},saveFormularioGrupo:function(){var e=this;if(this.v$.frm.$touch(),this.v$.frm.$error)(0,ue["default"])(this.$t("mensajes.m0020"),"warning");else{var o={frm:this.frm,seleccionados:this.cursos.seleccionados};Re.saveFormularioGrupo(o).then(function(){var o=y()(N()().m(function o(r){var t,n,a;return N()().w(function(o){while(1)switch(o.n){case 0:if(!e.idFormulario){o.n=2;break}return o.n=1,Re.obtResponsables({idFormulario:e.idFormulario});case 1:t=o.v,n=t.responsables,a=t.detalle,e.responsables.data=n,e.detalle=Re.getDetalleFrmDefault(a);case 2:return o.n=3,e.obtExamenes();case 3:e.modal=!1,(0,ue["default"])(e.$t(r),"success");case 4:return o.a(2)}},o)}));return function(e){return o.apply(this,arguments)}}()).catch(function(o){var r=o.error;(0,ue["default"])(e.$t(r.message),"error")})}},updateFormularioGrupoDet:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l,u,i,c;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return t={idFormularioPadre:e.ID_FORMULARIO,idFormulario:e.ID,idFormularioGrupo:e.ID_FORMULARIO_GRUPO,nroPreguntas:e.NRO_PREGUNTAS,estado:e.ESTADO},r.p=1,r.n=2,Re.updateFormularioGrupoDet(t);case 2:if(n=r.v,(0,ue["default"])(o.$t(n),"success"),!o.idFormulario){r.n=4;break}return r.n=3,Re.obtResponsables({idFormulario:o.idFormulario});case 3:a=r.v,l=a.responsables,u=a.detalle,o.responsables.data=l,o.detalle=Re.getDetalleFrmDefault(u);case 4:r.n=6;break;case 5:r.p=5,c=r.v,i=c.error,(0,ue["default"])(o.$t(i.message),"error");case 6:return r.a(2)}},r,null,[[1,5]])}))()},ordenar:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l,u;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,t=e[0].ID_FORMULARIO,n=Re.ordenar(e),r.n=1,Re.updateOrden({data:n,idFormularioPadre:t});case 1:a=r.v,(0,ue["default"])(o.$t(a),"success"),r.n=3;break;case 2:r.p=2,u=r.v,l=u.error,(0,ue["default"])(o.$t(l.message),"error");case 3:return r.a(2)}},r,null,[[0,2]])}))()},construirSimulacro:function(){var e=this;return y()(N()().m(function o(){var r,t,a,l,u;return N()().w(function(o){while(1)switch(o.p=o.n){case 0:if(r=Re.enableProcesar(e.responsables.data),!r){o.n=6;break}return o.n=1,(0,se.dialogConfirm)({message:"Se construirá el simulacro ¿Desea continuar?"});case 1:if(t=o.v,!t){o.n=5;break}return e.loadingProcess=!0,o.p=2,o.n=3,Re.construirSimulacro(n()(e.responsables.data));case 3:a=o.v,e.loadingProcess=!1,(0,ue["default"])(e.$t(a),"success"),o.n=5;break;case 4:o.p=4,u=o.v,l=u.error,e.loadingProcess=!1,(0,ue["default"])(e.$t(l.message),"error");case 5:o.n=7;break;case 6:(0,ue["default"])("No se puede generar el simulacro, falta completar preguntas","error");case 7:return o.a(2)}},o,null,[[2,4]])}))()},copiarExamen:function(){var e=this;return y()(N()().m(function o(){var r,t,n;return N()().w(function(o){while(1)switch(o.p=o.n){case 0:if(o.p=0,!e.selectionExa.length){o.n=3;break}return o.n=1,Re.copiarExamen(e.selectionExa,e.copia.fechaEntrega,e.copia.fechaInicio,e.copia.fechaFin);case 1:return r=o.v,o.n=2,e.obtExamenes();case 2:(0,ue["default"])(e.$t(r),"success"),o.n=4;break;case 3:(0,ue["default"])("Seleccione un examen","error");case 4:o.n=6;break;case 5:o.p=5,n=o.v,t=n.error,(0,ue["default"])(e.$t(t.message),"error");case 6:return o.a(2)}},o,null,[[0,5]])}))()},exportarExamen:function(e){Re.exportarExamen(e)},resultadosExamen:function(e){this.reportes.idFormulario=e,this.reportes.modal=!0},exportar:function(e){Re.resultadosExamen(this.reportes.idFormulario,this.reportes.repcod,e)},label:function(e){return this.$t((0,fe["default"])(e))},controlSeleccion:function(e){if(Re.controlSeleccion(e),e.length){var o=(0,le["default"])(this.examenes,this.selectionExa[0],{key:"ID_FORMULARIO"}),r=this.examenes[o];this.copia.fechaEntrega=r.FH_ENTREGA,this.copia.fechaInicio=r.FH_INICIO,this.copia.fechaFin=r.FH_FIN}},openImportarArchivo:function(e){var o=this;return y()(N()().m(function r(){var t;return N()().w(function(r){while(1)switch(r.n){case 0:if(!e.BLOQUEADO){r.n=2;break}return r.n=1,(0,se.dialogConfirm)({message:"El simulacro tiene respuestas. ¿Desea reemplazar las respuestas? Las respuestas del simulacro actual no se podrán recuperar."});case 1:t=r.v,t&&(o.modalImportar=!0),r.n=3;break;case 2:o.modalImportar=!0;case 3:return r.a(2)}},r)}))()},upload:function(e){var o=this;this.file="",(0,ce["default"])({file:e[0]}).then(function(e){o.file=e.name}).catch(function(e){console.log(e)})},added:function(e){this.upload(e)},importarArchivo:function(){var e=this;return y()(N()().m(function o(){var r,t,n,a;return N()().w(function(o){while(1)switch(o.p=o.n){case 0:return r=e.file,o.p=1,o.n=2,Re.importarResultados(e.idFormulario,r);case 2:return t=o.v,o.n=3,e.obtExamenes();case 3:e.modalImportar=!1,(0,ue["default"])(e.$t(t),"success"),o.n=5;break;case 4:o.p=4,a=o.v,n=a.error,(0,ue["default"])(e.$t(n.message),"error");case 5:return o.a(2)}},o,null,[[1,4]])}))()},chartResultados:function(e){var o=this;return y()(N()().m(function r(){var t;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,Re.getIdHistoriaFormulario(e);case 1:t=r.v,o.idHistoriaFormulario=t,o.chartEstadistica=!0,r.n=3;break;case 2:r.p=2,r.v;case 3:return r.a(2)}},r,null,[[0,2]])}))()},openModalRN:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l,u,i,c,s;return N()().w(function(r){while(1)switch(r.n){case 0:t=e.ID_FORMULARIO_GRUPO,n=e.ID,a=e.ID_FORMULARIO,l=e.CURSOCOD,u=e.INSTRUCOD,i=e.GRADOCOD,c=e.PERIODO,s=e.LLAVE,o.competencia.instrucod=u,o.competencia.gradocod=i,o.competencia.cursocod=l,o.competencia.bimecod=c,o.competencia.llave=s,o.competencia.idFormularioGrupo=t,o.competencia.idFormulario=a,o.competencia.id=n,o.competencia.modal=!0;case 1:return r.a(2)}},r)}))()},saveLlave:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l,u,i,c,s;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return o.competencia.llave=e,t={idFormulario:o.competencia.id,idFormularioGrupo:o.competencia.idFormularioGrupo,llave:o.competencia.llave},r.p=1,r.n=2,Re.saveLlave(t);case 2:return n=r.v,a=n.message,r.n=3,Re.obtResponsables({idFormulario:o.competencia.idFormulario});case 3:l=r.v,u=l.responsables,i=l.detalle,o.responsables.data=u,o.detalle=Re.getDetalleFrmDefault(i),(0,ue["default"])(a,"success"),r.n=5;break;case 4:r.p=4,s=r.v,c=s.error,(0,ue["default"])(c.message,"warning");case 5:return r.a(2)}},r,null,[[1,4]])}))()},deleteLlave:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l,u,i,c,s,d;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.n=1,(0,se.dialogConfirm)({message:"Se quitará la vinculación al registro de notas del curso. ¿Está seguro de realizar esta acción?"});case 1:if(t=r.v,!t){r.n=6;break}return n={idFormulario:e.ID,idFormularioGrupo:e.ID_FORMULARIO_GRUPO,llave:e.LLAVE},r.p=2,r.n=3,Re.deleteLlave(n);case 3:return a=r.v,l=a.message,r.n=4,Re.obtResponsables({idFormulario:e.ID_FORMULARIO});case 4:u=r.v,i=u.responsables,c=u.detalle,o.responsables.data=i,o.detalle=Re.getDetalleFrmDefault(c),o.competencia.llave=null,(0,ue["default"])(l,"success"),r.n=6;break;case 5:r.p=5,d=r.v,s=d.error,(0,ue["default"])(s.message,"warning");case 6:return r.a(2)}},r,null,[[2,5]])}))()},preview:function(e){var o=this;return y()(N()().m(function r(){var t;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return o.form.loading=!0,o.form.modal=!0,r.p=1,r.n=2,Re.getPreview(e);case 2:t=r.v,o.form.loading=!1,o.$nextTick(function(){o.form.data=t}),r.n=4;break;case 3:r.p=3,r.v,o.form.loading=!1,o.$nextTick(function(){o.form.data={}});case 4:return r.a(2)}},r,null,[[1,3]])}))()},deleteAnswer:function(e){var o=this;return y()(N()().m(function r(){var t,n,a,l;return N()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.n=1,(0,se.dialogConfirm)({message:"Las respuestas no podrán recuperarse después de eliminarlas. ¿Está seguro de eliminar las respuestas del simulacro?"});case 1:if(t=r.v,!t){r.n=6;break}return r.p=2,r.n=3,Re.deleteAnswer({id:e});case 3:return n=r.v,(0,ue["default"])(o.$t(n),"success"),r.n=4,o.obtExamenes();case 4:r.n=6;break;case 5:r.p=5,l=r.v,a=l.error,(0,ue["default"])(o.$t(a.message),"error");case 6:return r.a(2)}},r,null,[[2,5]])}))()},getNomComp:function(e,o){var r=o.find(function(o){return o.USUCOD===e});return e&&r?r.NOMCOMP:""},formatoFechaHora:function(e){return(0,pe.Ay)(e,"DD/MM/YYYY HH:mm:ss a")}},validations:function(){return Re.validations()},created:function(){this.obtExamenes()}},Ee=r(12807);const Ie=(0,Ee.A)($e,[["render",V]]);var De=Ie}}]);