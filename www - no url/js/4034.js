"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[4034],{4034:function(a,o,e){e.r(o),e.d(o,{default:function(){return Ro}});var t=e(61758),n={class:"row q-col-gutter-md"},i={class:"col-xs-12"},r={class:"row q-col-gutter-md"},s={class:"col-xs-12"},l={class:"col column scroll-y relative-position q-mt-lg-sm bg-white registro"};function c(a,o){var e=(0,t.g2)("header-btn"),c=(0,t.g2)("formulario"),u=(0,t.g2)("q-spinner-oval"),d=(0,t.g2)("q-inner-loading"),m=(0,t.g2)("sie-vacio"),f=(0,t.g2)("grillaNotas"),p=(0,t.g2)("q-card-section"),h=(0,t.g2)("listar-sedes"),g=(0,t.g2)("sie-modal"),v=(0,t.g2)("q-card"),b=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(b,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(v,{flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(e,{name:a.tituloForm,auto:!0,buttons:a.botonesForm,ref:"headerApp"},null,8,["name","buttons"]),(0,t.bF)(p,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",n,[(0,t.Lk)("div",i,[(0,t.bF)(c,{schema:a.schemas.viewAdmRegistroNotas,ref:"formApp",key:"formApp",onClickIconGrid:a.clickIconGrid,onChangeInput:a.changeInput,onInputBlur:a.inputBlur,onClickBtn:a.clickBtn},null,8,["schema","onClickIconGrid","onChangeInput","onInputBlur","onClickBtn"])])]),(0,t.Lk)("div",r,[(0,t.Lk)("div",s,[(0,t.Lk)("div",l,[(0,t.bF)(d,{class:"bg-white",visible:a.cargandoRegistro},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,t.bF)(d,{class:"loadingGrabandoNotas",visible:a.grabandoRegistro},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),a.dataRegistroNotas.cabeceraNotas&&0!==a.dataRegistroNotas.cabeceraNotas.length?((0,t.uX)(),(0,t.Wv)(f,{key:1,ref:"refRegistroNotas",dataRegistro:a.dataRegistroNotas,editarComentarios:a.permisosRegistro.editarComentarios,visualizarHistorial:a.visualizarHistorial,visualizarComentario:a.visualizarComentario,direccionEdicion:a.dirEdit,dataAlumnos:a.dataCboAlumno,onFilaAlumnoSelecionado:a.filaAlumnoSelecionado,onUpdate:a.updateGrilla,accesoMenu:a.sie.ruta.nivel,manejaSedes:a.manejaSedes,manejaNee:a.manejaNee,asignaAptoExpConforme:a.asignaAptoExpConforme,idGrado:a.sie.idGrado,usaSituacionPostulacion:a.usaSituacionPostulacion,addColInformesAdmision:a.addColInformesAdmision},null,8,["dataRegistro","editarComentarios","visualizarHistorial","visualizarComentario","direccionEdicion","dataAlumnos","onFilaAlumnoSelecionado","onUpdate","accesoMenu","manejaSedes","manejaNee","asignaAptoExpConforme","idGrado","usaSituacionPostulacion","addColInformesAdmision"])):((0,t.uX)(),(0,t.Wv)(m,{key:0,class:"col"}))])])])]}),_:1}),(0,t.bF)(g,{title:a.modalSedes.titulo,modelValue:a.modalSedes.open,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.modalSedes.open=o}),onSubmit:a.actSedes},{default:(0,t.k6)(function(){return[(0,t.bF)(p,{class:"full-width"},{default:(0,t.k6)(function(){return[(0,t.bF)(h,{ref:"listaSedes",selected:a.modalSedes.selected},null,8,["selected"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})]}),_:1})}var u=e(76080),d=e.n(u),m=e(45254),f=e.n(m),p=e(57008),h=e.n(p),g=(e(12563),e(30683),e(74260),e(52133),e(10239),e(50310),e(32203),e(90095),e(6724),e(515),e(83190),e(44264),e(13715),e(65848)),v=e(40714),b=e(6123),C=e(8445),E=e.n(C),N=(e(39866),e(58790)),A=e(29104),P={class:"col column"},D={class:"q-px-sm q-pt-sm"},k={class:"barraPorcentaje"},x={class:"textoPorcentaje text-black"},y={class:"column col relative-position scroll-y"},I={class:"q-px-sm q-pt-sm column boxRegistro"},R={class:"contentRegistro column",ref:"contentRegistro"},S={class:"head"},w={class:"headAlumno"},O={key:0,class:"thAlumno boxImgEstado situacion"},j={key:1,class:"thAlumno boxImgEstado numord"},_={class:"headNotas"},M={class:"relative-position",ref:"headNotas"},F={class:"bodyAlumno"},L={class:"relative-position",ref:"bodyAlumno"},q=["r"],$={class:"td boxImgEstado"},B={class:"td boxImgEstado estados"},V={key:0,class:"td situacion"},T={key:1,class:"td boxImgEstado numord"},U={class:"td boxImgEstado numord"},X={key:2,class:"banderaComentarioCurso iconRevisar"},z=["onClick"],H=["onClick"],G={class:"textDatosAlumno"},Q={class:"bodyNotas",ref:"bodyNotas"},K={class:"relative-position"},W=["r"],Y=["onClick","c","r"],J=["onClick"],Z={class:"footerNotas"},aa={class:"boxLeyenda"},oa={class:"boxCelda text-primary text-right"},ea={class:"row q-px-sm q-pt-sm"},ta={class:"col-xs-12"},na={class:"row"},ia={class:"col-xs-12"},ra={class:"row"},sa={class:"col-xs-12"};function la(a,o){var e=(0,t.g2)("headNotas"),n=(0,t.g2)("q-checkbox"),i=(0,t.g2)("q-icon"),r=(0,t.g2)("q-select"),s=(0,t.g2)("tdNota"),l=(0,t.g2)("q-btn"),c=(0,t.g2)("modalComentarioNota"),u=(0,t.g2)("sie-cloud"),d=(0,t.g2)("sie-modal"),m=(0,t.g2)("q-input"),f=(0,t.g2)("q-field"),p=(0,t.g2)("estados-fichas"),h=(0,t.g2)("q-card-section"),g=(0,t.g2)("ficha-nee"),v=(0,t.g2)("q-datetime");return(0,t.uX)(),(0,t.CE)("div",P,[(0,t.Lk)("div",D,[(0,t.Lk)("div",k,[(0,t.Lk)("div",{class:"porcentajeBg bg-secondary",style:(0,N.Tr)({width:a.porcentaje+"%"})},null,4),(0,t.Lk)("div",x,"Registro Completado al "+(0,N.v_)(a.porcentaje)+" %",1)])]),(0,t.Lk)("div",y,[(0,t.Lk)("div",I,[(0,t.Lk)("div",R,[(0,t.Lk)("div",S,[(0,t.Lk)("div",w,[o[11]||(o[11]=(0,t.Lk)("div",{class:"thAlumno boxImgEstado"},null,-1)),o[12]||(o[12]=(0,t.Lk)("div",{class:"thAlumno boxImgEstado estados"},[(0,t.Lk)("span",null,"Estado")],-1)),a.usaSituacionPostulacion?((0,t.uX)(),(0,t.CE)("div",O,E()(o[9]||(o[9]=[(0,t.Lk)("span",null,"Situación",-1)])))):(0,t.Q3)("v-if",!0),a.addBotonNee?((0,t.uX)(),(0,t.CE)("div",j,E()(o[10]||(o[10]=[(0,t.Lk)("span",null,"Ficha NEE",-1)])))):(0,t.Q3)("v-if",!0),o[13]||(o[13]=(0,t.Lk)("div",{class:"thAlumno boxImgEstado numord"},[(0,t.Lk)("span",null,"Asistencia")],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.cabeceraAlumno,function(a){return(0,t.uX)(),(0,t.CE)("div",{class:(0,N.C4)(["thAlumno",a.classCss])},[(0,t.Lk)("span",null,(0,N.v_)(a.desc),1)],2)}),256))]),(0,t.Lk)("div",_,[(0,t.Lk)("div",M,[(0,t.bF)(e,{maxNivel:a.maxNivel,cabeceraNotas:a.cabeceraNotas,objKeysCabecera:a.objKeysCabecera,ocultarPB:a.ocultarPB,onDropNota:a.dropNota},null,8,["maxNivel","cabeceraNotas","objKeysCabecera","ocultarPB","onDropNota"])],512)])]),(0,t.bo)((0,t.Lk)("div",{class:(0,N.C4)(["body",{visualizarComentario:a.visualizarComentario,visualizarHistorial:a.visualizarHistorial}])},[(0,t.Lk)("div",F,[(0,t.Lk)("div",L,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.alumnos,function(o,e){return(0,t.uX)(),(0,t.CE)("div",{class:(0,N.C4)(["tr",[o.classEstado,{revisarClase:o.datos.flRevisar,alumnoInclusivo:o.datos.esInclusivo}]]),r:e},[(0,t.Lk)("div",$,[(0,t.bF)(n,{modelValue:a.checksElegidos[o.datos.idPersona],"onUpdate:modelValue":function(e){return a.checksElegidos[o.datos.idPersona]=e},label:"",color:"teal",disable:a.accesoMenu<3},null,8,["modelValue","onUpdate:modelValue","disable"])]),(0,t.Lk)("div",B,[a.auxEstados[o.datos.idEstado]?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(i,{class:"pointer icono",name:"search",size:"2em",onClick:function(e){return a.verEstadoPostulante(o.datos)}},null,8,["onClick"]),(0,t.bF)(i,{class:"pointer",name:o.datos.comentarioEstado?"person":"person_outline",size:"2em",color:a.auxEstados[String(o.datos.idEstado)].COLOR,onClick:function(t){return a.openComentarioEstadoPostulante(o.datos,e)}},null,8,["name","color","onClick"])],64)):(0,t.Q3)("v-if",!0)]),a.usaSituacionPostulacion?((0,t.uX)(),(0,t.CE)("div",V,[(0,t.bF)(r,{modelValue:a.alumnos[e].datos.idSituacion,"onUpdate:modelValue":function(o){return a.alumnos[e].datos.idSituacion=o},options:a.situaciones,"option-label":"NOMBRE","option-value":"ID_SITUACION"},null,8,["modelValue","onUpdate:modelValue","options"])])):(0,t.Q3)("v-if",!0),a.addBotonNee?((0,t.uX)(),(0,t.CE)("div",T,[(0,t.bF)(i,{class:"icono",name:"documents",size:"2em",color:"primary",onClick:function(t){return a.openFichaNee(o.datos,e)}},null,8,["onClick"])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",U,[(0,t.bF)(n,{modelValue:a.alumnos[e].datos.asistencia,"onUpdate:modelValue":function(o){return a.alumnos[e].datos.asistencia=o},"true-value":1,"false-value":0},null,8,["modelValue","onUpdate:modelValue"])]),o.datos.flRevisar?((0,t.uX)(),(0,t.CE)("div",X,[(0,t.bF)(i,{name:"warning",size:"2em"})])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",{class:(0,N.C4)(["adjunto text-secondary",{active:o.datos.adjunto}]),onClick:function(e){return a.abrirModalAdjunto(o.datos)}},[a.accesoMenu>=2?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"icono",name:"paperclip",size:"1.5rem"})):(0,t.Q3)("v-if",!0)],10,z),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.cabeceraAlumno,function(n){return(0,t.uX)(),(0,t.CE)("div",{class:(0,N.C4)(["td",n.classCss]),onClick:function(o){return a.clickAlumno(e)}},[(0,t.Lk)("div",G,(0,N.v_)(o.datos[n.key]),1)],10,H)}),256))],10,q)}),256))],512)]),(0,t.Lk)("div",Q,[(0,t.Lk)("div",K,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.alumnos,function(o,e){return(0,t.uX)(),(0,t.CE)("div",{class:(0,N.C4)(["tr",[o.classEstado,{revisarClase:o.datos.flRevisar,alumnoInclusivo:o.datos.esInclusivo}]]),r:e},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.cabeceraNotas,function(n,r){return(0,t.uX)(),(0,t.CE)("div",{key:"k_"+e+"_"+r,class:(0,N.C4)(["td",a.classTd(n,o.datos.idPersona)]),onClick:function(o){return a.clickAlumno(e,r)},c:r,r:e},[n.addConclDescrp&&!n.esPromedioCurso?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"comentario text-primary",onClick:function(t){return a.abrirModalComentarioNota(o,n,e)}},[(0,t.bF)(i,{name:"comment",size:"1.5rem"})],8,J)):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",{class:(0,N.C4)(["banderaComentarioNota text-primary",{existeComentario:o.notas[n.id].comentario}])},[(0,t.bF)(i,{name:"comment",size:"1em"})],2),(0,t.bF)(s,{ref_for:!0,ref:"refnota_"+e+"_"+r,fila:e,columna:r,objNota:o.notas[n.id],currentComponent:n.component,bloquear:a.bolBloquearNota(n,o),habilitadoInclusivo:a.bolHabilitadoNotaInclusivo(n,o),config:n.config,onSiguienteEdicion:a.siguienteEdicion,onCalcularPromedio:a.calcularPromedio},null,8,["fila","columna","objNota","currentComponent","bloquear","habilitadoInclusivo","config","onSiguienteEdicion","onCalcularPromedio"])],10,Y)}),128))],10,W)}),256))])],512)],2),[[A.aG,a.alumnos.length]]),(0,t.Lk)("div",Z,[(0,t.Lk)("div",aa,[(0,t.Lk)("span",oa,[(0,t.bF)(i,{name:"comment",size:"1em"})]),o[14]||(o[14]=(0,t.Lk)("span",{class:"text"},"Comentario",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.estados,function(o){return(0,t.uX)(),(0,t.Wv)(l,{key:o.ID_ESTADO,class:(0,N.C4)(["q-ml-sm",{"color-black":["yellow"].includes(o.COLOR)}]),size:"xs",label:o.NOMBRE,color:o.COLOR,onClick:function(e){return a.marcarEstado(o)}},null,8,["label","color","onClick","class"])}),128))])])],512)])]),a.bolModalComentarioNota?((0,t.uX)(),(0,t.Wv)(c,{key:0,idPersona:a.utilComentarioNota.idPersona,idNota:a.utilComentarioNota.idNota,bolArbolInfo:a.utilComentarioNota.bolArbolInfo,nomcomp:a.utilComentarioNota.nomcomp,edicion:a.utilComentarioNota.edicion,dataAlumnos:a.dataAlumnos,bolUsaDescriptor:a.utilComentarioNota.usaDescriptor,dataDescriptor:a.utilComentarioNota.dataDescriptor,accesoMenu:a.accesoMenu,onEditarComentario:a.editarComentarioNota,onCerrarModal:a.cerrarModalComentarioNota},null,8,["idPersona","idNota","bolArbolInfo","nomcomp","edicion","dataAlumnos","bolUsaDescriptor","dataDescriptor","accesoMenu","onEditarComentario","onCerrarModal"])):(0,t.Q3)("v-if",!0),(0,t.bF)(d,{modelValue:a.modalAdjunto,"onUpdate:modelValue":o[1]||(o[1]=function(o){return a.modalAdjunto=o}),title:"Adjuntar",onSubmit:a.enviarAdjunto},{default:(0,t.k6)(function(){return[a.flagAdjunto?((0,t.uX)(),(0,t.Wv)(u,{key:0,modelValue:a.adjuntos,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.adjuntos=o}),"only-local":"",onDeleteFile:a.deleteFile,apiView:"NotasController/getArchivo",campos:"adjunto,tipo",onUpdateCheck:a.updateCheck,checkItems:a.checkItems},null,8,["modelValue","onDeleteFile","onUpdateCheck","checkItems"])):(0,t.Q3)("v-if",!0)]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(d,{modelValue:a.modalComEstadoPos.open,"onUpdate:modelValue":o[3]||(o[3]=function(o){return a.modalComEstadoPos.open=o}),title:a.modalComEstadoPos.titulo,onSubmit:a.grabarComentarioEstadoPostulante,footer:a.accesoMenu>=2},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",ea,[(0,t.Lk)("div",ta,[(0,t.bF)(f,{helper:"Caracteres: ",count:a.modalComEstadoPos.maxlength},{default:(0,t.k6)(function(){return[(0,t.bF)(m,{class:"q-if-outlined",modelValue:a.modalComEstadoPos.comentario,"onUpdate:modelValue":o[2]||(o[2]=function(o){return a.modalComEstadoPos.comentario=o}),modelModifiers:{trim:!0},type:"textarea",maxlength:a.modalComEstadoPos.maxlength,"float-label":a.modalComEstadoPos.label,"max-height":100,rows:"7",disable:a.accesoMenu<2},null,8,["modelValue","maxlength","float-label","disable"])]}),_:1},8,["count"])])])]}),_:1},8,["modelValue","title","onSubmit","footer"]),(0,t.bF)(d,{title:a.modalEstado.titulo,modelValue:a.modalEstado.open,"onUpdate:modelValue":o[4]||(o[4]=function(o){return a.modalEstado.open=o}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(h,{class:"cont-modal-estados-fichas"},{default:(0,t.k6)(function(){return[(0,t.bF)(p,{postulante:a.modalEstado.postulante},null,8,["postulante"])]}),_:1})]}),_:1},8,["title","modelValue"]),(0,t.bF)(d,{title:a.modalNee.titulo,modelValue:a.modalNee.open,"onUpdate:modelValue":o[5]||(o[5]=function(o){return a.modalNee.open=o}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(h,{class:"cont-modal-xl"},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{idPersona:a.modalNee.idPersona,onCloseFichaNee:a.closeFichaNee},null,8,["idPersona","onCloseFichaNee"])]}),_:1})]}),_:1},8,["title","modelValue"]),(0,t.bF)(d,{title:a.modalDeuda.titulo,modelValue:a.modalDeuda.open,"onUpdate:modelValue":o[8]||(o[8]=function(o){return a.modalDeuda.open=o}),ok:"GRABAR",onSubmit:a.saveEstado},{default:(0,t.k6)(function(){return[(0,t.bF)(h,{class:"cont-modal-xl"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",na,[(0,t.Lk)("div",ia,[(0,t.bF)(v,{class:"q-if-outlined q-mx-xs col",modelValue:a.modalDeuda.fecha,"onUpdate:modelValue":o[6]||(o[6]=function(o){return a.modalDeuda.fecha=o}),"float-label":"Fecha",type:"date",format:"DD/MM/YYYY"},null,8,["modelValue"])])]),(0,t.Lk)("div",ra,[(0,t.Lk)("div",sa,[(0,t.bF)(v,{class:"q-if-outlined q-mx-xs col",modelValue:a.modalDeuda.fechaVencimiento,"onUpdate:modelValue":o[7]||(o[7]=function(o){return a.modalDeuda.fechaVencimiento=o}),"float-label":"Fecha de vencimiento",type:"date",format:"DD/MM/YYYY"},null,8,["modelValue"])])])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"])])}var ca=e(41562),ua=e.n(ca),da=(e(71225),e(77507),e(89571),e(5962),e(11777),e(49089),e(52776),e(62692),e(80660)),ma={enviarAdjuntos:function(a,o,e,t){return da.$http.post("api/NotasController/grabarAdjuntos",{adjuntos:a,adjuntosUpdate:o,idCronograma:e,eliminados:t})},getAdjuntos:function(a){return da.$http.get("api/NotasController/getAdjuntos",{params:{idCronograma:a}})},getEstados:function(){return da.$http.get("api/PostulacionController/getEstados",{params:{params:{codigosExcluir:["INTERESADO"]}}})},getSituacionesAdmision:function(){return da.$http.get("api/PostulacionController/getSituaciones",{params:{params:{}}})},getDiasPlazo:function(){return da.$http.get("api/ControlController/getControl",{params:{parametros:{campo:"diasplazo",anio:"0000"}}})},procesarEstado:function(a,o){return da.$http.post("api/NotasController/procesarEstado",{data:a,params:o})},actualizarAsistencia:function(a,o){return da.$http.post("api/NotasController/actualizarAsistencia",{idCronograma:a,asistencia:o})},getFichaEstado:function(a){return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,da.$http.get("api/PostulacionController/getFichaEstado",{params:{params:{id_ficha:a.id_ficha,id_estado:a.id_estado,activo:1}}}))}},o)}))()},updateFichaEstado:function(a){return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,da.$http.post("api/PostulacionController/updateFichaEstado",{id_ficha:a.id_ficha,id_estado:a.id_estado,activo:1,data:{comentario:a.comentario}}))}},o)}))()},updateAdjunto:function(a){return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,da.$http.post("api/PostulacionController/updateAdjunto",a))}},o)}))()}},fa={key:0,class:"textNota"},pa={key:1,class:"textNota"};function ha(a,o){return(0,t.uX)(),(0,t.CE)("div",{class:(0,N.C4)(["boxNota",a.classCss]),onClick:o[1]||(o[1]=function(o){return a.clickEdicion()})},[a.isClick?((0,t.uX)(),(0,t.Wv)((0,t.$y)(a.currentComponent),{key:0,modelValue:a.nota,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.nota=o}),notaIni:a.nota,sinNota:a.config.sinNota,escalaExtraNumeros:a.config.escalaExtraNumeros,sinCalculo:a.config.sinCalculo,usarArrEscala:a.config.usarArrEscala,arrEscala:a.config.notasEscala,configEditor:a.config.configEditor,onBlur:a.blur,onSiguienteEdicion:a.siguienteEdicion,onMountedComponentNota:a.mountedComponentNota,options:a.options},null,40,["modelValue","notaIni","sinNota","escalaExtraNumeros","sinCalculo","usarArrEscala","arrEscala","configEditor","onBlur","onSiguienteEdicion","onMountedComponentNota","options"])):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[1===a.config.configEditor.tipoEditor?((0,t.uX)(),(0,t.CE)("span",fa,(0,N.v_)(a.nota),1)):((0,t.uX)(),(0,t.CE)("span",pa,(0,N.v_)(a.notaOpcion),1))],64))],2)}e(15547);var ga={isNumeric:function(a){return!isNaN(a-parseFloat(a))},roundDecimal:function(a,o){var e=Number(Math.round(a+"e"+o)+"e-"+o);return e.toFixed(o)},constCssNota:function(){return{SINNOTA:"sinNota",APROBADO:"aprobado",DESAPROBADO:"desaprobado"}},estadoCssNota:function(a,o){var e=null;if(a.length>0){var t=this.constCssNota();if(o.sinNota===a)e=t.SINNOTA;else{var n=o.valorAprobado;if(o.usarArrEscala)for(var i=0;i<o.notasEscala.length;i++){var r=o.notasEscala[i];if(a===r.nota){e=r.valorCalculo>=n?t.APROBADO:t.DESAPROBADO;break}}else{for(var s=0;s<o.escalaExtraNumeros.length;s++){var l=o.escalaExtraNumeros[s];l.nota===a&&(a=l.valorCalculo)}this.isNumeric(a)&&(e=a>=n?t.APROBADO:t.DESAPROBADO)}}}return e}};function va(a,o){var e=(0,t.g2)("q-select");return 1===a.tipoEditor?(0,t.bo)(((0,t.uX)(),(0,t.CE)("input",{key:0,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.nota=o}),onBlur:o[1]||(o[1]=function(){return a.blur&&a.blur.apply(a,arguments)}),onKeydown:o[2]||(o[2]=function(){return a.keydown&&a.keydown.apply(a,arguments)}),onPaste:o[3]||(o[3]=function(){return a.paste&&a.paste.apply(a,arguments)}),onClick:o[4]||(o[4]=function(){return a.click&&a.click.apply(a,arguments)})},null,544)),[[A.Jo,a.nota]]):((0,t.uX)(),(0,t.Wv)(e,{key:1,modelValue:a.nota,"onUpdate:modelValue":o[5]||(o[5]=function(o){return a.nota=o}),options:a.options,"option-label":"label","option-value":"value",onBlur:a.blur},null,8,["modelValue","options","onBlur"]))}var ba=e(32307),Ca={emits:["mountedComponentNota","update:modelValue","input","siguienteEdicion","blur"],props:{modelValue:{required:!0},notaIni:{required:!0},usarArrEscala:{type:Boolean,required:!0},sinNota:{type:String},escalaExtraNumeros:{type:Array},sinCalculo:{type:Array},arrEscala:{type:Array},configEditor:{type:Object},options:{type:Array}},components:{QSelect:b.Si},data:function(){return{notaInicial:this.notaIni,oldValue:this.notaIni,notaMinIng:this.configEditor.notaMinIng,notaMaxIng:this.configEditor.notaMaxIng,numDecimales:this.configEditor.numDecimales,lengthNotaMax:String(this.configEditor.notaMaxIng).length,cerosDelante:this.configEditor.cerosDelante,tipoEditor:this.configEditor.tipoEditor||1}},computed:{nota:{get:function(){return this.modelValue},set:function(a){var o=String(a).toUpperCase();this.setNota(o)}}},mounted:function(){this.$el.focus(),1===this.tipoEditor&&this.$el.select(),this.$el.autocomplete="off",this.$el.placeholder=this.notaInicial,this.$emit("mountedComponentNota"),this.notasKeyPress=this.getNotasKeyPress()},methods:{getNotasKeyPress:function(){var a={};a[this.sinNota]={valorCalculo:0,nota:this.sinNota};for(var o=0;o<this.sinCalculo.length;o++){var e=this.sinCalculo[o];a[e]={valorCalculo:0,nota:e}}if(this.usarArrEscala)for(var t=0;t<this.arrEscala.length;t++)for(var n=this.arrEscala[t],i=n.valorCalculo,r=n.notasKey,s=0;s<r.length;s++)a[r[s]]={valorCalculo:i,nota:n.nota};else{for(var l=0;l<this.escalaExtraNumeros.length;l++){var c=this.escalaExtraNumeros[l];a[c.nota]={valorCalculo:c.valorCalculo,nota:c.nota}}for(var u=this.notaMinIng;u<=this.notaMaxIng;u++)if(this.cerosDelante&&(u+"").length<this.lengthNotaMax){var d=(0,ba["default"])(u,this.lengthNotaMax,"0");a[d]={valorCalculo:u,nota:d},a[u]={valorCalculo:u,nota:d}}else a[u]={valorCalculo:u,nota:u}}return a},click:function(a){a.stopPropagation()},emitirNota:function(a){this.$emit("update:modelValue",a),this.$emit("input",a),this.$emit("siguienteEdicion")},setNota:function(a,o){var e=this.numDecimales,t=e>0,n=this.notasKeyPress,i=0,r=!1;for(var s in n)if(0===s.lastIndexOf(a,0)&&i++,a===s&&(r=!0),i>1&&r)break;if(t&&r&&ga.isNumeric(a))if(a.indexOf(".")>=0){var l=a.split(".").pop();if(l.length<e){for(var c=0;c<=9;c++)n[a+c]={nota:a+c};i=2}}else a.length<=this.lengthNotaMax&&(n[a+"."]={nota:a+"."},i=2);if(o)if(r){var u=n[a].nota;this.emitirNota(this.getNotaEmitFormat(t,u))}else this.emitirNota(this.notaInicial);else if(i>0){var d=i>1;if(r&&!d){var m=n[a].nota;this.emitirNota(this.getNotaEmitFormat(t,m))}else this.$el.value=a}else this.$el.value=this.oldValue},getNotaEmitFormat:function(a,o){if(a&&ga.isNumeric(o)){var e=parseFloat(o).toFixed(this.numDecimales);return this.cerosDelante&&(e=(0,ba["default"])(e,this.lengthNotaMax+this.numDecimales+1,"0")),e}return o},keydown:function(a){27===a.keyCode?this.blur():8===a.keyCode?this.oldValue="":46===a.keyCode?this.emitirNota(""):13===a.keyCode?this.setNota(this.$el.value,!0):this.oldValue=this.$el.value},paste:function(a){a.preventDefault()},blur:function(){this.$emit("blur")}}},Ea=e(12807);const Na=(0,Ea.A)(Ca,[["render",va]]);var Aa=Na,Pa={emits:["calcularPromedio","siguienteEdicion"],components:{inputNota:Aa},props:{fila:Number,columna:Number,currentComponent:String,bloquear:Boolean,habilitadoInclusivo:Boolean,config:Object,objNota:{required:!0,type:Object,validator:function(a){return Object.prototype.hasOwnProperty.call(a,"notaReg")&&Object.prototype.hasOwnProperty.call(a,"notaIni")}}},data:function(){return{isClick:!1,cbMountedNota:null}},created:function(){},computed:{nota:{get:function(){return String(this.objNota.notaReg)},set:function(a){this.objNota.notaReg=String(a),this.$emit("calcularPromedio",this.fila,this.objNota)}},notaOpcion:function(){var a=this,o=this.options.filter(function(o){return o.value===a.nota}),e=o.length>0?o[0].label:"";return e},options:function(){var a=[];if(2===this.config.configEditor.tipoEditor){var o,e=this.config.configEditor.options.split(",");e.forEach(function(e){e&&e.length>0&&(o=e.split("-"),a.push({value:o[0],label:o[1]}))})}return a},classCss:function(){var a=this.objNota.notaReg!==this.objNota.notaIni,o={modificado:a,bloqueada:this.bloquear,bloqueoInclusivo:this.habilitadoInclusivo};if(this.config.configEditor.aplicarColor){var e=ga.constCssNota(),t=ga.estadoCssNota(this.nota,this.config);switch(t){case e.APROBADO:o.aprobado=!0;break;case e.DESAPROBADO:o.desaprobado=!0;break}}return o}},methods:{mountedComponentNota:function(){this.cbMountedNota&&(this.cbMountedNota(),this.cbMountedNota=null)},clickEdicion:function(a,o){this.bloquear?a&&this.siguienteEdicion():(this.isClick=!0,o&&(this.cbMountedNota=o))},blur:function(){this.isClick=!1},siguienteEdicion:function(){this.$emit("siguienteEdicion",this.fila,this.columna)}}};const Da=(0,Ea.A)(Pa,[["render",ha]]);var ka=Da,xa=["title"];function ya(a,o){return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("div",{class:(0,N.C4)(["estadoNotaAlumno",a.estadoRenderer.classCss]),title:a.estadoRenderer.title},null,10,xa)])}var Ia={props:{estadoAnual:{type:String,required:!0},objNotaPromedio:{type:Object,required:!0},configNotaPromedio:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{}},computed:{estadoRenderer:function(){var a=this.estadoAnual,o=Object.prototype.hasOwnProperty.call(this.objNotaPromedio,"notaReg")?this.objNotaPromedio.notaReg:"",e={J:{classCss:"DesaprobadoAnual",title:"Desaprobado."},M:{classCss:"EvaluacionPostergada",title:"Evaluacion Postergada"},P:{classCss:"Aprobado",title:"Aprobado"},R:{classCss:"Retirado",title:"Retirado"},E:{classCss:"Exonerado",title:"Exonerado"},T:{classCss:"Trasladado",title:"Trasladado"},F:{classCss:"Fallecido",title:"Fallecido"},SinNota:{classCss:"SinNota",title:"Sin Nota"},Aprobado:{classCss:"Aprobado",title:"Aprobado"},Desaprobado:{classCss:"Desaprobado",title:"Desaprobado"},porDefecto:{classCss:"Vigente",title:"Vigente"}},t={};if(t=e.hasOwnProperty(a)?e[a]:e["porDefecto"],String(o).length>0){var n=ga.constCssNota(),i=ga.estadoCssNota(o,this.configNotaPromedio);switch(i){case n.SINNOTA:t=e["SinNota"];break;case n.APROBADO:t=e["Aprobado"];break;case n.DESAPROBADO:t=e["Desaprobado"];break}}return t}}};const Ra=(0,Ea.A)(Ia,[["render",ya]]);var Sa=Ra,wa=e(16648),Oa={filaColSiguienteEdicion:function(a,o,e,t,n){var i,r,s=0,l=0;switch(e){case"HI":o===l?(r=n,i=a===t?s:a+1):(i=a,r=o-1);break;case"HD":o===n?(r=l,i=a===t?s:a+1):(i=a,r=o+1);break;case"VI":case"VD":default:a===t?(i=s,r="VI"===e?o===l?n:o-1:o===n?l:o+1):(i=a+1,r=o);break}return{sigFila:i,sigCol:r}},obtenerPorcentaje:function(a,o){for(var e,t=0,n=0,i=0;i<a.length;i++)if(!a[i].datos.flBloqEst)for(var r=0;r<o.length;r++)o[r].incluirPorcentaje&&(t++,a[i].notas[o[r].id].notaReg.length&&n++);return e=0===t?0:100*n/t,Math.round(100*e)/100}},ja=(e(9240),e(97772),e(84433),{LETRAS:0,NUMEROENTERO:1,DECIMAL:2});function _a(a,o,e){var t=o-String(a).length+1;return Array(t>0?t:0).join(e||"0")+a}function Ma(a,o){var e=Number(Math.round(a+"e"+o)+"e-"+o);return e.toFixed(o)}function Fa(a){return!isNaN(a-parseFloat(a))}function La(a,o,e,t){if(o<=0)return"";var n,i=a/o,r=t.tipoCalculo,s=t.truncar,l=t.fraccionRedondeoEntero,c=t.numDecimales,u=t.puntosExtrasNum,d=String(i);switch(r){case ja.LETRAS:var m;if(s)m=Math.floor(d);else{var f=Math.max(String(l).length,2),p=parseInt(Ma(d,f).split(".").pop(),10);m=p>=l*Math.pow(10,f)?Math.ceil(d):Math.floor(d)}n="";for(var h=0;h<t.notasEscala.length;h++){var g=t.notasEscala[h];if(g.valorCalculo===m){n=g.nota;break}}break;case ja.NUMEROENTERO:if(s)n=Math.floor(d);else{var v=Math.max(String(l).length,2),b=parseInt(Ma(d,v).split(".").pop(),10);n=b>=l*Math.pow(10,v)?Math.ceil(d):Math.floor(d)}n=Number(n)+e+u;break;case ja.DECIMAL:if(s){var C=d.split(".");if(C.length>1){var E=C[1];n=E.length>=c?String(C[0])+"."+String(C[1].substring(0,c)):Number(d).toFixed(c)}else n=Number(d).toFixed(c)}else n=Ma(d,c);n=Number(Number(n)+e+u).toFixed(c);break}return qa(n,t)}function qa(a,o){var e=o.tipoCalculo,t=o.notaMin,n=o.notaMax,i=o.esPromedioSumativo,r=o.configEditor,s=o.numDecimales;switch(e){case ja.LETRAS:break;case ja.NUMEROENTERO:case ja.DECIMAL:if(!i&&Fa(a)&&(a<t?a=t:a>n&&(a=n),r.cerosDelante)){var l=String(n).length;e===ja.DECIMAL&&(a=Number(a).toFixed(s),l=l+s+1),a=_a(a,l,"0")}break}return a+""}function $a(a,o){Fa(a)&&(a=parseInt(a,10));var e="";for(var t in o)if(a>=parseInt(o[t].notaIni,10)&&a<=parseInt(o[t].notaFin,10)){e=t;break}return e}var Ba={getFormatoNota:function(a,o){return qa(a,o)},calcularPromedioAlumnoEspecialLnag:function(a,o,e){var t=e[o];if(t.idpadre in e){for(var n=e[t.idpadre],i=n.idsHijos,r={1:"C",2:"C",3:"B",4:"A",5:"A",6:"A",7:"AD",A:"AD",B:"A",C:"B",D:"C",E:"C"},s={1:"08",2:"10",3:"13",4:"15",5:"17",6:"19",7:"20",A:"AD",B:"18",C:"16",D:"13",E:"10"},l=0,c=0,u={},d=!1,m={puntaje:37,niv3:40,niv2:38,prevista:18},f=[],p=8===n.idPrograma,h=0;h<i.length;h++){var g=e[i[h]],v=String(a[t.id].notaReg);if(p&&10===g.idPrograma&&(f=f.concat(g.idsHijos)),1==t.nivelEva&&g.idPrograma==m.puntaje&&(u["indice"+g.indiceNota]=g.id),3==g.nivelEva&&2==g.indiceNota&&g.idPrograma==m.niv3){var b="";v.length>0&&(b=Math.round(g.info["peso"]*v/t.info["peso"])),g.config.sinNota===v&&(b=g.config.sinNota),a[g.id].notaReg=b,a[g.idpadre].notaReg=b}if(3==g.nivelEva&&3==g.indiceNota&&g.idPrograma==m.niv3){var C=n.config.equiNotaPrevista;console.log(C);var E=v.length>0?$a(v,C):"";a[g.id].notaReg=E}if(2==t.nivelEva&&g.idPrograma==m.niv2||1==t.nivelEva&&g.idPrograma==m.prevista){var N=String(a[g.id].notaReg);g.config.sinNota===N&&(d=!0),N.length>0&&(l+=parseInt(N,10),c++)}}if(2==t.nivelEva&&t.idPrograma==m.niv2){var A=0==c?"":l;d&&(A=n.config.sinNota),a[n.id].notaReg=A}else if(1==t.nivelEva){var P=e[u["indice1"]].config.equiNotaPrevista,D=0==c?"":l,k=0==c?"":$a(l,P),x=""===k?"":0===n.config.tipoCalculo?r[k]:s[k];d&&(D=n.config.sinNota,k=n.config.sinNota,x=n.config.sinNota),a[u["indice1"]].notaReg=D,a[u["indice2"]].notaReg=k,a[u["indice3"]].notaReg=x,f.forEach(function(o){12===e[o].idPrograma&&(a[o].notaReg=x)})}this.calcularPromedioAlumnoEspecialLnag(a,n.id,e)}},calcularPromedioAlumnoEspecialAlpamayo:function(a,o,e){var t=e[o];if(t.idpadre in e){for(var n=e[t.idpadre],i=n.idsHijos,r=0,s=0,l={},c=!1,u={puntaje:29,niv3:28,niv2:27,prevista:26},d=0;d<i.length;d++){var m=e[i[d]];if(1==t.nivelEva&&m.idPrograma==u.puntaje&&(l["indice"+m.indiceNota]=m.id),3==m.nivelEva&&2==m.indiceNota&&m.idPrograma==u.niv3){var f=String(a[t.id].notaReg),p="";f.length>0&&(p=Math.round(m.info["peso"]*f/t.info["peso"])),m.config.sinNota===f&&(p=m.config.sinNota),a[m.id].notaReg=p,a[m.idpadre].notaReg=p}if(2==t.nivelEva&&m.idPrograma==u.niv2||1==t.nivelEva&&m.idPrograma==u.prevista){var h=String(a[m.id].notaReg);m.config.sinNota===h&&(c=!0),h.length>0&&(r+=parseInt(h,10),s++)}}if(2==t.nivelEva&&t.idPrograma==u.niv2){var g=0==s?"":r;c&&(g=n.config.sinNota),a[n.id].notaReg=g}else if(1==t.nivelEva){var v=e[l["indice3"]].config.equiNotaPrevista,b=0==s?"":r,C=0==s?"":$a(r,v);c&&(b=n.config.sinNota,C=n.config.sinNota),a[l["indice1"]].notaReg=b,Object.prototype.hasOwnProperty.call(l,"indice2")&&a[l["indice2"]].notaReg.length>0&&(C=$a(a[l["indice2"]].notaReg,v),n.config.sinNota==a[l["indice2"]].notaReg&&(C=n.config.sinNota)),a[l["indice3"]].notaReg=C}this.calcularPromedioAlumnoEspecialAlpamayo(a,n.id,e)}},calcularPromedioAlumno:function(a,o,e){var t=e[o];if(t.config.esCalculoParticularAlpamayo)return this.calcularPromedioAlumnoEspecialAlpamayo(a,o,e),!1;if(t.config.esCalculoParticularLnag)return this.calcularPromedioAlumnoEspecialLnag(a,o,e),!1;if(!t.config.excluirCalculo&&t.idpadre in e){var n=e[t.idpadre],i=n.config,r=i.esPromedioSumativo;if(!i.promedioCalculado)return;var s=[];if(n.idsHijos.forEach(function(a){var o=e[a];o.esAgrupador?o.config.excluirCalculo||(s=s.concat(o.idsHijos)):s.push(a)}),s.length>0&&!0===i.calcularSoloUltimoHijo){var l=s.pop();s=[l]}for(var c,u=s,d=0,m=0,f=0,p=!1,h=!1,g=0;g<u.length;g++){var v=e[u[g]].config;if(!v.excluirCalculo){var b=String(a[u[g]].notaReg);if(0!==b.length){if(v.esPromedioSumativo&&i.usarArrEscala){h=!0;break}if(v.sinNota===b){p=!0;break}if(-1===v.sinCalculo.indexOf(b)){var C=parseInt(v.peso,10);if(v.usarArrEscala){for(var E=!1,N=0;N<v.notasEscala.length;N++){var A=v.notasEscala[N];if(A.nota===b){E=!0,d+=A.valorCalculo*C,f+=C;break}}if(!E){h=!0;break}}else if(v.esBonificacion)Fa(b)?m+=Number(b):h=!0;else{for(var P=0;P<v.escalaExtraNumeros.length;P++){var D=v.escalaExtraNumeros[P];D.nota===b&&(b=D.valorCalculo)}Fa(b)?(d+=b*C,f+=C):h=!0}}}}}n.esAgrupador||h?c="":p?c=i.sinNota:(r&&d>0&&(f=1),c=La(d,f,m,i)),a[n.id].notaReg=c,this.calcularPromedioAlumno(a,n.id,e)}},esNotaValidaParaImportar:function(a,o){var e=a.config,t=!1;if(""===o||e.sinNota===o||e.sinCalculo.indexOf(o)>=0)t=!0;else if(e.usarArrEscala){for(var n=!1,i=0;i<e.notasEscala.length;i++){var r=e.notasEscala[i];if(r.nota===o){n=!0;break}}t=n}else{for(var s=0;s<e.escalaExtraNumeros.length;s++){var l=e.escalaExtraNumeros[s];l.nota===o&&(o=l.valorCalculo)}Fa(o)&&o>=e.notaMin&&o<=e.notaMax&&(t=!0)}return t},getNotaExamenLms:function(a,o,e,t){var n,i="",r=e.usarArrEscala,s=e.notaMin,l=e.notaMax,c=e.notasEscala,u=a.dioexamen,d=a.puntajeExamen,m=a.puntajeMaximo;if("N"===u)return n=o?La(s,1,0,e):i,{nuevaNota:n,msgError:""};if(null===m||""===m||0===m)return{nuevaNota:i,idError:1,msgError:"El puntaje maximo debe ser mayor a 0"};var f=l;if(r){var p=c.find(function(a){return a.valorCalculo===l}).nota,h=c.filter(function(a){return!t.hasOwnProperty(a.nota)}).map(function(a){return a.nota});if(h.length)return{nuevaNota:i,idError:2,msgError:"Por favor registrar las equivalencias: "+h.join(",")};var g=[],v=function(a){c.some(function(o){return o.nota===a})||g.push(a)};for(var b in t)v(b);if(g.length)return{nuevaNota:i,idError:2,msgError:'La(s) equivalencia(s): "'+g.join(",")+'" no corresponden con el ingreso de notas'};f=parseInt(t[p].notaFin,10)}var C=d*f/m,E=parseInt(Ma(C,0),10);if(r){var N,A=!1,P=function(a){if(E>=t[a].notaIni&&E<=t[a].notaFin){var o=c.some(function(o){return o.nota===a});if(o)return A=!0,N=c.find(function(o){return o.nota===a}).nota,1}};for(var D in t)if(P(D))break;return A?{nuevaNota:N,msgError:""}:{nuevaNota:i,idError:3,msgError:"No existe la equivalencia"}}var k=La(E,1,0,e);return{nuevaNota:k,msgError:""}},getNotaImportacionTarea:function(a,o,e){var t=a.dioexamen,n=a.notaRegistro;if("N"===t){var i="";return n=o?La(e.notaMin,1,0,e):i,n}return qa(n,e)},getNotaExamenRubrica:function(a,o,e,t){var n,i="",r=e.usarArrEscala,s=e.notaMin,l=e.notaMax,c=e.notasEscala,u=a.dioexamen,d=a.puntajeExamen,m=a.puntajeMaximo;if("N"===u)return n=o?La(s,1,0,e):i,{nuevaNota:n,msgError:""};if(null===m||""===m||0===m)return{nuevaNota:i,idError:1,msgError:"El puntaje maximo debe ser mayor a 0"};var f=l;if(r){var p=c.find(function(a){return a.valorCalculo===l}).nota,h=c.find(function(a){return a.valorCalculo===s}).nota;if(!t.hasOwnProperty(p)||!t.hasOwnProperty(h))return{nuevaNota:i,idError:2,msgError:"Por favor registrar las equivalencias"};f=parseInt(t[p].notaFin,10)}var g=d*f/m,v=parseInt(Ma(g,0),10);if(r){var b,C=!1,E=function(a){if(v>=t[a].notaIni&&v<=t[a].notaFin){var o=c.some(function(o){return o.nota===a});if(o)return C=!0,b=c.find(function(o){return o.nota===a}).nota,1}};for(var N in t)if(E(N))break;return C?{nuevaNota:b,msgError:""}:{nuevaNota:i,idError:3,msgError:"No existe la equivalencia"}}var A=La(v,1,0,e);return{nuevaNota:A,msgError:""}},getNotaTarea:function(a,o,e,t,n,i,r){var s=e.usarArrEscala,l=e.notasEscala,c=e.notaMin,u=e.notaMax,d=c;if(null===o||""===o||0===o)return{nota:"",notaRegistro:"",nuevaNota:"",idError:1,msgError:"El puntaje maximo debe ser mayor a 0"};var m=/^[0-9]+$/.test(a),f={},p=null,h=m?100*a/o:0;h=Math.round(h);var g=[];if(t&&Array.isArray(t)){if(l&&l.length){var v=l.map(function(a){return a.nota});g=t.filter(function(a){return!v.includes(a.LETRA)}),g=g.map(function(a){return a.LETRA}),t=t.filter(function(a){return v.includes(a.LETRA)})}for(var b=0;b<t.length;b++)f[t[b].LETRA]=t[b],h<=t[b].PORCENTAJE&&(p=t[b].LETRA)}if(2==r&&n&&n.length>0){var C={1:"C",2:"B",3:"A",4:"AD"},E="",N=null,A=n.length-1;d=n[A].NOTA,N=/^[0-9]+$/.test(d)?La(d,1,0,e):d;var P=Math.trunc(4*d/20);p=/^[0-9]+$/.test(d)?C[P]:d;for(var D=A;D>=0;D--){if(!(a>=n[D].NRO_CRITERIOS_ALCANZADO))break;E=n[D].TITULO_NIVEL,d=n[D].NOTA,N=/^[0-9]+$/.test(d)?La(d,1,0,e):d;var k=Math.trunc(4*d/20);p=/^[0-9]+$/.test(d)?C[k]:d}return{porcentaje:h,notaLetra:p,nivel:E,nota:d,notaRegistro:N}}for(var x="",y=0;y<n.length;y++){if(!(h<=n[y].NRO_CRITERIOS_ALCANZADO))break;x=n[y].TITULO_NIVEL}if(0!=c&&!c&&!u){var I=20*a/o,R=I%1===0?I:I.toFixed(2);return{porcentaje:h,notaLetra:p,nivel:x,nota:I,notaRegistro:R}}if(s){var S=l.find(function(a){return a.valorCalculo===u}),w=S.nota,O=l.find(function(a){return a.valorCalculo===c}),j=O.nota;if((!f.hasOwnProperty(w)||!f.hasOwnProperty(j))&&2!==i)return console.error("".concat(j," y  ").concat(w," no estan definidos en las equivalencias de la rúbrica")),{porcentaje:h,notaLetra:p,nivel:x,notaRegistro:"",idError:1,msgError:"".concat(j," y  ").concat(w," no estan definidos en las equivalencias de la rúbrica")};if(![2,7].includes(i)){if(null===p){var _=g.length>0?g.join(",")+" No se usa en este registro. Verifique la configuración de equivalencias":"",M=g.length>0?_:"Falta configurar la equivalencia para un alcance al ".concat(h,"%  de la rúbrica");return{porcentaje:h,notaLetra:p,nivel:x,notaRegistro:"",idError:1,msgError:M}}var F=l.find(function(a){return a.nota==p}),L=F.valorCalculo;return{porcentaje:h,notaLetra:p,nivel:x,nota:L,notaRegistro:p}}if(!m){var q=l.find(function(o){return o.nota==a}),$=q.valorCalculo;return p=a,{porcentaje:h,notaLetra:p,nivel:x,nota:$,notaRegistro:a}}}d=a*u/o;var B=La(d,1,0,e);return{porcentaje:h,notaLetra:p,nivel:x,nota:d,notaRegistro:B}}},Va=(e(24985),e(27153),{class:"tablaCabecera"}),Ta=["rowspan","colspan","onClick"],Ua={class:"textTh"},Xa=["onDrop"],za=["rowspan","onClick"],Ha={class:"textThProm"},Ga=["onDrop"];function Qa(a,o){var e=(0,t.g2)("q-icon");return(0,t.uX)(),(0,t.CE)("table",Va,[(0,t.Lk)("thead",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.maxNivel+1,function(n,i){return(0,t.uX)(),(0,t.CE)("tr",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.cabeceraNotas,function(n,r){return(0,t.uX)(),(0,t.CE)(t.FK,null,[i==n.nivelEva?(0,t.bo)(((0,t.uX)(),(0,t.CE)("th",{key:0,rowspan:n.rowspan,colspan:n.colspan,class:(0,N.C4)(["bgprograma_"+n.idPrograma,{ocultarPB:a.ocultarPB&&n.esPromedioCurso,flatEvaExcluido:n.config.excluirCalculo,excluirPorc:n.excPorc,inclusivo:n.config.inclusivo}]),onClick:function(o){return a.mostrarDetalleCabecera(n,o)},onMouseleave:o[3]||(o[3]=function(){return a.ocultarDetalleCabecera&&a.ocultarDetalleCabecera.apply(a,arguments)})},[(0,t.Lk)("div",Ua,[n.config.esPromedioSumativo?((0,t.uX)(),(0,t.Wv)(e,{key:0,class:"text-primary",name:"functions",size:"1.4em"})):(0,t.Q3)("v-if",!0),n.excPorc&&1===n.nivelEva?((0,t.uX)(),(0,t.Wv)(e,{key:1,name:"grid_off",size:"1.4em"})):(0,t.Q3)("v-if",!0),(0,t.Lk)("span",null,(0,N.v_)(n.desc),1)]),n.bloquear||0!==n.idsHijos.length||n.excPorc?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",{key:0,class:"dropNota",onDragenter:o[0]||(o[0]=(0,A.D$)(function(){return a.dragenter&&a.dragenter.apply(a,arguments)},["stop","prevent"])),onDragleave:o[1]||(o[1]=(0,A.D$)(function(){return a.dragleave&&a.dragleave.apply(a,arguments)},["stop","prevent"])),onDragover:o[2]||(o[2]=(0,A.D$)(function(){return a.dragover&&a.dragover.apply(a,arguments)},["stop","prevent"])),onDrop:(0,A.D$)(function(o){return a.drop(r,o)},["stop","prevent"])},null,40,Xa))],42,Ta)),[[A.aG,!n.esPromedioCurso]]):(0,t.Q3)("v-if",!0),i==n.nivelEva+1&&n.idsHijos.length>0||n.esPromedioCurso&&0===a.maxNivel?((0,t.uX)(),(0,t.CE)("th",{key:1,rowspan:a.maxNivel-i+1,class:(0,N.C4)(["bgprograma_"+n.idPrograma,{ocultarPB:a.ocultarPB&&n.esPromedioCurso,notaFixed:n.esPromedioCurso,flatEvaExcluido:n.config.excluirCalculo,excluirPorc:n.excPorc,esAgrupador:n.esAgrupador,inclusivo:n.config.inclusivo}]),onClick:function(o){return a.mostrarDetalleCabecera(n,o)},onMouseleave:o[7]||(o[7]=function(){return a.ocultarDetalleCabecera&&a.ocultarDetalleCabecera.apply(a,arguments)})},[(0,t.Lk)("div",Ha,(0,N.v_)(n.descProm),1),n.bloquear?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",{key:0,class:"dropNota",onDragenter:o[4]||(o[4]=(0,A.D$)(function(){return a.dragenter&&a.dragenter.apply(a,arguments)},["stop","prevent"])),onDragleave:o[5]||(o[5]=(0,A.D$)(function(){return a.dragleave&&a.dragleave.apply(a,arguments)},["stop","prevent"])),onDragover:o[6]||(o[6]=(0,A.D$)(function(){return a.dragover&&a.dragover.apply(a,arguments)},["stop","prevent"])),onDrop:(0,A.D$)(function(o){return a.drop(r,o)},["stop","prevent"])},null,40,Ga))],42,za)):(0,t.Q3)("v-if",!0)],64)}),256))])}),256))])])}e(81813),e(34993);var Ka={emits:["dropNota"],props:{maxNivel:{type:Number,required:!0},cabeceraNotas:{type:Array,required:!0},objKeysCabecera:{type:Object,required:!0},ocultarPB:{type:Boolean,required:!0}},mounted:function(){this.appendfloatDescripcionEvaluacionRegNotas(),this.appendDropNotaMask()},methods:{appendDropNotaMask:function(){if(!document.getElementById("dropNotaMask")){var a=document.createElement("div");a.id="dropNotaMask",document.querySelector("body").appendChild(a)}},appendfloatDescripcionEvaluacionRegNotas:function(){if(!document.getElementById("floatDescripcionEvaluacionRegNotas")){var a=document.createElement("div");a.id="floatDescripcionEvaluacionRegNotas",document.querySelector("body").appendChild(a)}},getInfoHtmlCabecera:function(a,o){var e=this.objKeysCabecera[a];if(!e.esPromedioCurso){var t=e.info,n=e.config.excluirCalculo?" <b>(Excluido)</b>":"",i="";e.config.inclusivo&&(i=1==e.config.inclusivo?"<b>(Solo inclusivos)</b>":"<b>(No Inclusivos)</b>"),o.unshift("<b>".concat(t.programa,"</b> (Peso: ").concat(t.peso,")").concat(n," ").concat(i,"<br> ").concat(t.descComp)),e.idpadre in this.objKeysCabecera&&this.getInfoHtmlCabecera(e.idpadre,o)}},textDescCabecera:function(a){var o=[];return this.getInfoHtmlCabecera(a.id,o),o.join("<br><br>")},mostrarDetalleCabecera:function(a,o){if(!a.esPromedioCurso){var e=document.getElementById("floatDescripcionEvaluacionRegNotas"),t=o.target,n=b.tT.offset,i=n(t),r=i.top+t.clientHeight-5,s=i.left+t.clientWidth-5,l=280,c=this.$parent.$refs["contentRegistro"].clientWidth;s+l>c?(s=i.left-l+5,e.className="right"):e.className="left",e.style.top=r+"px",e.style.left=s+"px",e.style.display="block",e.innerHTML=this.textDescCabecera(a)}},ocultarDetalleCabecera:function(){var a=document.getElementById("floatDescripcionEvaluacionRegNotas");a.innerHTML="",a.style.display="none"},dragenter:function(a){a.dataTransfer.dropEffect="copy";var o=a.target,e=b.tT.offset,t=e(o),n=t.top+a.target.clientHeight+2,i=t.left,r=document.getElementById("dropNotaMask"),s=this.$parent.$refs["bodyNotas"].clientHeight;r.style.top=n+"px",r.style.left=i+"px",r.style.height=s+"px",r.style.display="block",o.classList.add("enter")},dragover:function(a){this.dragenter(a)},dragleave:function(a){var o=a.target,e=document.getElementById("dropNotaMask");e.style.display="none",o.classList.remove("enter")},dragexit:function(a){this.dragleave(a)},drop:function(a,o){this.dragleave(o);var e=o.dataTransfer.getData("text"),t=/\r\n|\r|\n/,n=/\t/,i=e.replace(/(.)?(\r\n|\r|\n)$/,"$1"),r=i.split(t).map(function(a){return a.split(n)});this.$emit("dropNota",a,r)}},beforeDestroy:function(){var a=document.getElementById("dropNotaMask");a&&a.remove();var o=document.getElementById("floatDescripcionEvaluacionRegNotas");o&&o.remove()},components:{QIcon:b.bP}};const Wa=(0,Ea.A)(Ka,[["render",Qa]]);var Ya=Wa,Ja={class:"row q-px-sm q-pt-sm"},Za={class:"col-xs-12"},ao={class:"q-body-1 q-mb-lg-xs"},oo={class:"row q-px-sm q-pt-sm"},eo={key:0,class:"col-xs-12"},to={class:"col-xs-12"};function no(a,o){var e=(0,t.g2)("sie-select"),n=(0,t.g2)("q-toolbar-title"),i=(0,t.g2)("q-icon"),r=(0,t.g2)("q-input"),s=(0,t.g2)("q-field"),l=(0,t.g2)("sie-modal");return(0,t.uX)(),(0,t.Wv)(l,{class:"modalComentarioNota",modelValue:a.openModal,"onUpdate:modelValue":o[3]||(o[3]=function(o){return a.openModal=o}),title:a.titulo,header:!0,ok:a.okButton,loading:a.loadingModal,onSubmit:a.guardarComentario,footer:a.edicion&&a.accesoMenu>=2,onClose:a.cerrarModal},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{class:"toolbar-title q-pt-md q-pb-none no-shadow"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",null,[(0,t.bF)(e,{type:"outlined",placeholder:"estudiante",modelValue:a.vmEstudiante.idPersona,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.vmEstudiante.idPersona=o}),options:a.dataAlumnos,onSelected:a.seleccionaEstudiante,label:"nombre",val:"idPersona",readonly:!0},null,8,["modelValue","options","onSelected"])])]}),_:1}),o[4]||(o[4]=(0,t.Lk)("div",{class:"q-item-separator-component"},null,-1)),(0,t.Lk)("div",Ja,[(0,t.Lk)("div",Za,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.infoContenido,function(a,o){return(0,t.uX)(),(0,t.CE)("div",{style:(0,N.Tr)({marginLeft:8*a.NIVEL+"px"})},[(0,t.Lk)("div",ao,[(0,t.bF)(i,{class:"shadow-icon float-left q-mr-sm",name:a.ICONO,style:(0,N.Tr)({color:a.COLOR}),size:"15px"},null,8,["name","style"]),(0,t.Lk)("p",null,(0,N.v_)(a.DESCRIPCION),1)])],4)}),256))])]),(0,t.Lk)("div",oo,[a.mostrarComentario2?((0,t.uX)(),(0,t.CE)("div",eo,[(0,t.bF)(s,{helper:"Caracteres: ",count:a.maxLength2},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{class:"q-if-outlined",modelValue:a.comentario2,"onUpdate:modelValue":o[1]||(o[1]=function(o){return a.comentario2=o}),modelModifiers:{trim:!0},type:"textarea",maxlength:a.maxLength,"float-label":"Avance","max-height":100,rows:"7",disable:a.disabledText},null,8,["modelValue","maxlength","disable"])]}),_:1},8,["count"])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",to,[(0,t.bF)(s,{helper:"Caracteres: ",count:a.maxLength},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{class:"q-if-outlined",modelValue:a.comentario,"onUpdate:modelValue":o[2]||(o[2]=function(o){return a.comentario=o}),modelModifiers:{trim:!0},type:"textarea",maxlength:a.maxLength,"float-label":a.titulo,"max-height":100,rows:"7",disable:a.disabledText},null,8,["modelValue","maxlength","float-label","disable"])]}),_:1},8,["count"])])])]}),_:1},8,["modelValue","title","ok","loading","onSubmit","footer","onClose"])}e(23825),e(66307),e(24066);var io=e(30640),ro={getContenidoInfo:function(a){return[]},getComentario:function(a,o,e){return da.$http.get("api/NotasController/getComentario",{params:{idNota:a,idPersona:o,idContenido:e}})},grabarComentario:function(a,o,e){return da.$http.post("api/NotasController/actualizarComentario",{idNota:a,comentario:o})}},so=e(982),lo=e(93616),co={emits:["cerrarModal","editarComentario"],components:{sieModal:io.A,sieSelect:lo.A,QToolbarTitle:b.r_,QIcon:b.bP,QField:b.Om,QInput:b.ie},props:{idNota:{required:!0,type:Number},idPersona:{required:!1,type:Number},bolArbolInfo:{required:!0,type:Boolean},nomcomp:{required:!0,type:String},edicion:{required:!0,type:Boolean},dataAlumnos:{required:!0,type:Array},bolUsaDescriptor:{required:!0,type:Boolean},dataDescriptor:{required:!0,type:Object},accesoMenu:{type:Number}},computed:{okButton:function(){return!(!this.edicion||this.bolUsaDescriptor)&&this.$t("botones.guardar")},disabledText:function(){return!this.edicion||this.accesoMenu<2}},data:function(){return{openModal:!0,loadingModal:!0,comentario:"",maxLength:0,comentario2:"",maxLength2:0,infoContenido:[],titulo:"Comentario",vmEstudiante:{idPersona:null,nombre:null},mostrarComentario2:!1}},mounted:function(){this.seleccionaEstudiante({idPersona:this.idPersona,nombre:this.nomcomp,idNota:this.idNota})},methods:{cerrarModal:function(){this.$emit("cerrarModal")},seleccionaEstudiante:function(a){var o=this;console.log("seleccionaEstudiante:elem",a),this.vmEstudiante.idPersona=a.idPersona,this.vmEstudiante.nombre=a.nombre;var e=[ro.getContenidoInfo(this.idContenido)];this.bolUsaDescriptor||e.push(ro.getComentario(this.idNota,this.vmEstudiante.idPersona,this.idClaseContenido)),Promise.all(e).then(function(a){console.log("res:",a),o.loadingModal=!1,o.bolUsaDescriptor?o.comentario=o.dataDescriptor[o.vmEstudiante.idPersona][o.idClaseContenido]?o.dataDescriptor[o.vmEstudiante.idPersona][o.idClaseContenido]:"":(o.comentario=a[1].COMENTARIO,o.maxLength=a[1].maxLength,o.comentario2=a[1].comentario2,o.maxLength2=a[1].maxLength2,o.mostrarComentario2=a[1].mostrarComentario2),o.bolArbolInfo?o.infoContenido=a[0]:o.infoContenido=a[0].filter(function(a){return a.ID_CONTENIDO===o.idContenido})}).catch(function(a){console.error(a),o.loadingModal=!1})},guardarComentario:function(){var a=this;this.loadingModal=!0,ro.grabarComentario(this.idNota,this.comentario,this.comentario2).then(function(){a.loadingModal=!1,(0,so["default"])(a.$t("mensajes.m0001"));var o=0===String(a.comentario).length;a.$emit("editarComentario",a.idPersona,o,a.comentario),a.openModal=!1}).catch(function(){a.loadingModal=!1,(0,so["default"])(a.$t("mensajes.e0006"),"warning")})}}};const uo=(0,Ea.A)(co,[["render",no]]);var mo=uo,fo=e(57668),po=e(32195),ho=e(40155),go=e(10213),vo=e(61527),bo=e(41615),Co=e(76639),Eo={emits:["update","filaAlumnoSelecionado"],components:{QCheckbox:ho.A,QDatetime:b.T5,sieModal:io.A,SieCloud:po.A,imgEstdoAlumno:Sa,tdNota:ka,modalComentarioNota:mo,headNotas:Ya,estadosFichas:vo["default"],fichaNee:Co["default"],QSelect:wa.A,QIcon:b.bP,QBtn:b.Il,QField:b.Om,QInput:b.ie},mixins:[g.A],props:{dataRegistro:{required:!0,type:Object},editarComentarios:{required:!0,type:Boolean},direccionEdicion:{required:!0,type:String,validator:function(a){return-1!==["VD","VI","HD","HI"].indexOf(a)}},dataAlumnos:{required:!0,type:Array},accesoMenu:{type:Number},visualizarHistorial:Boolean,visualizarRubrica:Boolean,visualizarComentario:Boolean,manejaSedes:{type:Boolean,default:!1},manejaNee:{type:Boolean,default:!1},asignaAptoExpConforme:{type:Boolean,default:!1},idGrado:{type:Number},usaSituacionPostulacion:{type:Boolean,default:!1},addColInformesAdmision:{type:Boolean,default:!1}},data:function(){return{checksElegidos:{},archivosEliminados:[],estados:[],porcentaje:0,modalAdjunto:!1,modalComEstadoPos:{open:!1,titulo:"",label:"",maxlength:500,comentario:"",id_ficha:0,id_estado:0},adjuntos:[{directLink:!1,esEnlace:!1,extension:"pdf",id:2,name:"TEST.pdf"}],cabeceraNotas:this.dataRegistro.cabeceraNotas,cabeceraAlumno:this.dataRegistro.cabeceraAlumno,maxNivel:this.dataRegistro.maxNivel,infoClasePeriodo:this.dataRegistro.infoClasePeriodo,bolMostrarDetalleCabecera:!1,bolModalComentarioRubrica:!1,bolModalComentarioNota:!1,bolModalComentarioCurso:!1,bolHistorialNotas:!1,bolRevisarClase:!1,utilComentarioRubrica:{},utilComentarioNota:{},utilComentarioCurso:{},utilHistorialNotas:{},utilRevisarClase:{},dataArrIdsComentariosPorNota:[],dataArrIdsComentariosPorCurso:[],bgAlertaConclusionNota:[],dataObjBgAlertaNotasConclusionesSalon:{},regSoloComentarios:this.dataRegistro.regSoloComentarios,arrBloqueoNotas:this.dataRegistro.arrBloqueoNotas,ocultarPB:this.dataRegistro.infoClasePeriodo.ocultarPB,arrConclusionesDescriptivas:[],alumnoSelecionado:{},rowAdjuntos:{},flagAdjunto:!0,auxAlumnos:{},auxEstados:{},dataDescriptor:{usaDescriptor:!1,idPrograma:"",data:{},arrIds:[],objAlumnos:{}},modalEstado:{postulante:{},open:!1},modalNee:{titulo:"Evaluación Psicoeducativa del Postulante",open:!1,idPersona:0},modalDeuda:{titulo:"Editar fecha de vencimiento",open:!1,data:[],postulantes:[],fecha:"",fechaVencimiento:""},diasPlazo:0,checkItems:{label:"Compartir con PPFF"},checkedItems:[],situaciones:[]}},created:function(){var a=this;ma.getEstados().then(function(o){a.estados=o,o.forEach(function(o){a.auxEstados[o.ID_ESTADO]=o}),a.reiniciarChecks()}),ma.getDiasPlazo().then(function(o){a.diasPlazo=o?parseInt(o.NUMERO):0}),(this.accesoMenu<3||!this.addColInformesAdmision)&&(this.checkItems=null),this.usaSituacionPostulacion&&ma.getSituacionesAdmision().then(function(o){a.situaciones=o})},mounted:function(){this.porcentaje=this.obtenerPorcentaje(),this.scrollNotas(),this.addCssBackgroundNotas()},watch:{"dataRegistro.alumnos":{deep:!0,handler:(0,b.sg)(function(){this.porcentaje=this.obtenerPorcentaje(),this.bgAlertaConclusionNota=this.getCambiosAlertaConclusiones(),this.arrConclusionesDescriptivas=this.setConslusionesDescriptores()},250)},dataArrIdsComentariosPorNota:{deep:!0,handler:(0,b.sg)(function(){this.bgAlertaConclusionNota=this.getCambiosAlertaConclusiones()},250)}},computed:{objKeysCabecera:function(){for(var a={},o=0;o<this.cabeceraNotas.length;o++){var e=this.cabeceraNotas[o];a[e.id]=e}return a},configNotaPromedio:function(){for(var a={},o=0;o<this.cabeceraNotas.length;o++){var e=this.cabeceraNotas[o];if(e.esPromedioCurso){a=e;break}}return a},alumnos:function(){for(var a=this.dataRegistro.alumnos,o=0;o<a.length;o++){var e=a[o];this.auxAlumnos[e.datos.idPersona]=e.datos;var t=e.notas;for(var n in e.objNotaPromedio={},t){var i=t[n];if(i.idCabecera===this.configNotaPromedio.id){e.objNotaPromedio=i;break}}}return a},addBotonNee:function(){var a=!1;if(this.manejaNee&&3===this.accesoMenu){var o=this.cabeceraNotas.length>0?this.cabeceraNotas[0].abrevEvaluacion:"",e=(0,fo["default"])().colcod,t=(0,fo["default"])().tipcod;switch(e){case"0238":a=["002"].includes(o)&&["001","007","011","062","058","070"].includes(t);break;case"0516":a=["003","005"].includes(o)&&["001","007","011","062","058","070"].includes(t);break}}return a}},methods:{marcarAsistencia:function(a){var o=Number(!a.asistencia);ma.actualizarAsistencia(a.idCronograma,o).then(function(e){a.asistencia=o,(0,so["default"])("Asistencia actualizada","success")})},generarDeudaPostulacion:function(a){var o=this;return f()(d()().m(function e(){var t,n,i,r,s,l,c;return d()().w(function(e){while(1)switch(e.p=e.n){case 0:t=bo["default"].ID_TIPO_COBRO.PAGO_POST_ADMISION,e.p=1,n=ua()(a),e.p=2,n.s();case 3:if((i=n.n()).done){e.n=5;break}return r=i.value,s={ID_PERFIL:bo["default"].PERFIL_POSTULANTE,ID_PERSONA:r.idPersona,ALUCOD:r.codigo,ID_TIPOCOBRO:t},e.n=4,da.$http.post("api/PostulacionController/registrarDeudaPostulante",{params:s});case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,c=e.v,n.e(c);case 7:return e.p=7,n.f(),e.f(7);case 8:e.n=10;break;case 9:e.p=9,e.v,l="Hubo un error al generar las deudas del postulante.",o.$alert(l,"warning");case 10:return e.a(2)}},e,null,[[2,6,7,8],[1,9]])}))()},eliminarDeudaPostulacion:function(a){var o=this;return f()(d()().m(function e(){var t,n,i,r,s,l,c,u;return d()().w(function(e){while(1)switch(e.p=e.n){case 0:i=[],e.p=1,r=ua()(a),e.p=2,r.s();case 3:if((s=r.n()).done){e.n=6;break}return l=s.value,e.n=4,da.$http.get("api/cobroController/getDeudasxCobrar",{params:{parametros:{ID_PERSONA:l.idPersona}}});case 4:if(t=e.v,n=t.filter(function(a){return a.MONTOPEN>0&&["04"].includes(a.CONCOB)}),i=[],n.forEach(function(a){i.push({ID_PERSONA:a.ID_PERSONA,ID_DEUDA:a.ID_DEUDA,ANOCOB:a.ANOCOB,CONCOB:a.CONCOB,MESCOB:a.MESCOB})}),!(i.length>0)){e.n=5;break}return e.n=5,da.$http.delete("api/cobroController/deleteDeudas",{params:{data:i}});case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,u=e.v,r.e(u);case 8:return e.p=8,r.f(),e.f(8);case 9:e.n=11;break;case 10:e.p=10,e.v,c="Hubo un error al eliminar las deudas del postulante.",o.$alert(c,"warning");case 11:return e.a(2)}},e,null,[[2,7,8,9],[1,10]])}))()},marcarEstado:function(a){var o=this;if(!a.ASIG_REG_NOTAS)return this.$notify("El estado "+a.NOMBRE+" no puede ser asignado","warning"),!1;for(var e=[],t=[],n=Object.keys(this.checksElegidos),i=0;i<n.length;i++){var r=n[i];this.checksElegidos[r]&&(e.push({id_ficha:this.auxAlumnos[r].idFicha,id_estado:a.ID_ESTADO,id_perfam:this.auxAlumnos[r].idPerfam,id_persona:r,nomcomp:this.auxAlumnos[r].nomcomp,estadoAnt:this.auxAlumnos[r].idEstado,famcod:this.auxAlumnos[r].famcod,alucod:this.auxAlumnos[r].alucod,sede:this.auxAlumnos[r].sede,posee_nee:this.auxAlumnos[r].posee_nee,anoadm:this.auxAlumnos[r].anoadm}),this.auxAlumnos[r].codigo&&this.auxAlumnos[r].codigo.toString().length>0&&t.push({codigo:this.auxAlumnos[r].codigo,idPersona:r}))}0===e.length?this.$notify("Debe seleccionar al menos un(1) registro","warning"):(0,go.confirm)("¿Está seguro de realizar la operación?","Confirmar").onOk(f()(d()().m(function n(){var i;return d()().w(function(n){while(1)switch(n.n){case 0:if(i=o.auxEstados[a.ID_ESTADO].ES_ADMITIDO,!(i&&o.diasPlazo>0)){n.n=2;break}return o.modalDeuda.data=e,o.modalDeuda.postulantes=t,o.modalDeuda.open=!0,n.n=1,o.setFechaVencimiento();case 1:n.n=3;break;case 2:return n.n=3,o.procesarEstado(e,t,i);case 3:return n.a(2)}},n)})))},procesarEstado:function(a,o,e){var t=this;return f()(d()().m(function n(){var i;return d()().w(function(n){while(1)switch(n.n){case 0:i={manejaSedes:t.manejaSedes,manejaNee:t.manejaNee,asignaAptoExpConforme:t.asignaAptoExpConforme,idGrado:t.idGrado},e&&t.modalDeuda.fecha&&(i.fechaValor=t.modalDeuda.fecha),ma.procesarEstado(a,i).then(function(){var a=f()(d()().m(function a(n){return d()().w(function(a){while(1)switch(a.n){case 0:if(t.$notify(n.message,"success"),t.reiniciarChecks(),t.$emit("update"),!e){a.n=1;break}return a.n=1,t.generarDeudaPostulacion(o);case 1:return a.a(2)}},a)}));return function(o){return a.apply(this,arguments)}}()).catch(function(a){t.$notify(a.error.message,"warning")});case 1:return n.a(2)}},n)}))()},setFechaVencimiento:function(){var a=this;return f()(d()().m(function o(){var e,t;return d()().w(function(o){while(1)switch(o.n){case 0:e=new Date,t=e.setDate(e.getDate()+a.diasPlazo),a.modalDeuda.fecha=new Date,a.modalDeuda.fechaVencimiento=t;case 1:return o.a(2)}},o)}))()},saveEstado:function(){var a=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.procesarEstado(a.modalDeuda.data,a.modalDeuda.postulantes,!0);case 1:return o.a(2)}},o)}))()},reiniciarChecks:function(){for(var a=this.dataRegistro.alumnos,o={},e=0;e<a.length;e++){var t=a[e];o[t.datos.idPersona]=!1}this.checksElegidos=o},enviarAdjunto:function(a){var o=this;this.adjuntos.map(function(a){a.visible_ppff=o.checkedItems.includes(a.id)?1:0});var e=this.adjuntos.filter(function(a){return/[.]/.exec(a.id)}),t=this.adjuntos.filter(function(a){return!/[.]/.exec(a.id)});ma.enviarAdjuntos(e,t,this.alumnoSelecionado.idCronograma,this.archivosEliminados).then(function(a){o.alumnoSelecionado.adjunto=o.adjuntos.length,(0,so["default"])(a.message,"success"),o.modalAdjunto=!1,o.adjuntos=[],o.flagAdjunto=!1,o.$nextTick(function(){o.abrirModalAdjunto(o.rowAdjuntos)})}).catch(function(a){var o=a.error;(0,so["default"])(o.message,"warning")})},recalcularInterno:function(a,o){for(var e=0;e<this.alumnos.length;e++)if(!o||this.alumnos[e].datos.alucod===o){var t=this.alumnos[e].notas;for(var n in t)this.calcularPromedio(e,t[n])}a()},setConslusionesDescriptores:function(){if(this.dataDescriptor.objAlumnos={},!this.dataDescriptor.usaDescriptor)return[];for(var a=[],o=this.dataRegistro.alumnos,e=0;e<o.length;e++)for(var t=o[e],n=t.notas,i=t.datos.idPersona,r=0;r<this.cabeceraNotas.length;r++){var s=this.cabeceraNotas[r],l=n[s.id],c=l.notaReg;ga.isNumeric(c)&&(c=parseInt(ga.roundDecimal(c,0),10));var u=t.datos.nemo+"_"+s.idPrograma+"-"+s.indiceNota;if(this.dataDescriptor.data.hasOwnProperty(u))for(var d=this.dataDescriptor.data[u],m=0;m<d.length;m++){var f=d[m];if(c>=f.NLINI&&c<=f.NLFIN){this.dataDescriptor.objAlumnos.hasOwnProperty(i)||(this.dataDescriptor.objAlumnos[i]={}),this.dataDescriptor.objAlumnos[i][l.idNota]=f.DSCRTRDES,a.push(i+"--"+l.idNota);break}}}return a},getCambiosAlertaConclusiones:function(){for(var a=this.dataRegistro.alumnos,o=this.dataObjBgAlertaNotasConclusionesSalon,e=[],t=0;t<a.length;t++)for(var n=a[t],i=n.notas,r=0;r<this.cabeceraNotas.length;r++){var s=this.cabeceraNotas[r],l=i[s.id],c=l.notaReg,u=!1;o.hasOwnProperty(n.datos.nemo)&&s.validarAlertaCD&&(ga.isNumeric(c)&&(c=parseInt(ga.roundDecimal(c,0),10)),u=o[n.datos.nemo].indexOf(c)>=0),u&&!this.existeComentarioNota(l.idNota,n.datos.idPersona)&&e.push(n.datos.idPersona+"--"+l.idNota)}return e},classTd:function(a,o){return["bgprograma_"+a.idPrograma,{ocultarPB:this.ocultarPB&&a.esPromedioCurso,notaFixed:a.esPromedioCurso,esAgrupador:a.esAgrupador&&a.idsHijos.length,bgAlertaConcDescriptiva:this.bgAlertaConclusionNota.indexOf(o+"--"+a.idClaseContenido)>=0}]},abrirModalComentarioNota:function(a,o,e){var t=a.notas&&a.notas[o.id]?a.notas[o.id].idNota:null;if(!t)return(0,so["default"])("Debe Grabar una nota Primero","warning"),!1;this.bolModalComentarioNota=!0;var n=!1;this.utilComentarioNota={idPersona:a.datos.idPersona,idNota:t,idContenido:o.id,bolArbolInfo:this.regSoloComentarios,nomcomp:a.datos.nomcomp,edicion:this.editarComentarios,usaDescriptor:n,dataDescriptor:this.dataDescriptor,fila:e}},cerrarModalComentarioNota:function(){this.bolModalComentarioNota=!1,this.utilComentarioNota={}},editarComentarioNota:function(a,o,e){var t=a+"--"+this.utilComentarioNota.idClaseContenido;if(o){var n=this.dataArrIdsComentariosPorNota.indexOf(t);n>=0&&this.dataArrIdsComentariosPorNota.splice(n,1)}else this.dataArrIdsComentariosPorNota.push(t);this.alumnos[this.utilComentarioNota.fila].notas[this.utilComentarioNota.idContenido].comentario=e},existeComentarioNota:function(a,o){var e=this.dataArrIdsComentariosPorNota.concat(this.arrConclusionesDescriptivas);return e.indexOf(o+"--"+a)>=0},deleteFile:function(a){var o=this;return f()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:/[.]/.exec(a.id)||o.archivosEliminados.push(a);case 1:return e.a(2)}},e)}))()},abrirModalAdjunto:function(a){var o=this;return f()(d()().m(function e(){var t;return d()().w(function(e){while(1)switch(e.n){case 0:if(!(o.accesoMenu>=2)){e.n=2;break}return o.adjuntos=[],e.n=1,ma.getAdjuntos(a.idCronograma);case 1:t=e.v,t.map(function(a){a.check=a.visible_ppff}),o.archivosEliminados=[],o.adjuntos=t,o.modalAdjunto=!0,o.alumnoSelecionado=a,o.rowAdjuntos=a,o.flagAdjunto=!0;case 2:return e.a(2)}},e)}))()},updateCheck:function(a){var o=this;return f()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:o.checkedItems=a;case 1:return e.a(2)}},e)}))()},bolHabilitadoNotaInclusivo:function(a,o){var e=1===a.inclusivo&&!o.datos.esInclusivo||2===a.inclusivo&&o.datos.esInclusivo;return a.inclusivo>0&&!e},bolBloquearNota:function(a,o){var e=!1,t=1===a.inclusivo&&!o.datos.esInclusivo||2===a.inclusivo&&o.datos.esInclusivo,n=a.validaModificacion&&""!==o.notas[a.id].notaIni,i=this.accesoMenu<2;return a.bloquear||o.bloquearNotas||e||t||n||i},siguienteEdicion:function(a,o){var e=this,t=this.alumnos.length-1,n=this.cabeceraNotas.length-1,i=Oa.filaColSiguienteEdicion(a,o,this.direccionEdicion,t,n),r=i.sigFila,s=i.sigCol;this.$refs["refnota_"+r+"_"+s][0].clickEdicion(!0,function(){e.clickAlumno(r,s)})},scrollNotas:function(){var a=this,o=this.$refs["bodyNotas"];o.addEventListener("scroll",function(){var e=o.scrollLeft,t=o.scrollTop,n=a.$refs["headNotas"],i=a.$refs["bodyAlumno"];n.style.left="-"+e+"px",i.style.top="-"+t+"px";for(var r=a.$el.querySelectorAll(".notaFixed"),s=0;s<r.length;s++)r[s].style.left=e+"px"})},calcularPromedio:function(a,o){var e=this,t=this.objKeysCabecera[o.idCabecera],n=this.alumnos[a].notas;if("0388"===(0,fo["default"])().colcod)if("V"===this.infoClasePeriodo.cursonat&&0===t.nivelEva){var i=String(o.notaReg);t.idsHijos.forEach(function(a){var o=e.objKeysCabecera[a];o.idsHijos.forEach(function(a){var o=String(n[a].notaReg);0===o.length&&(n[a].notaReg=i)})})}else if(1===t.nivelEva){var r=String(o.notaReg);t.idsHijos.forEach(function(a){var o=String(n[a].notaReg);0===o.length&&(n[a].notaReg=r)})}Ba.calcularPromedioAlumno(n,o.idCabecera,this.objKeysCabecera)},calcularPromedioRubrica:function(a,o,e){var t=this.objKeysCabecera[o].config,n=this.alumnos[a].notas;n[o].notaReg=Ba.getFormatoNota(e,t),Ba.calcularPromedioAlumno(n,o,this.objKeysCabecera)},obtenerPorcentaje:function(){return Oa.obtenerPorcentaje(this.alumnos,this.cabeceraNotas)},clickAlumno:function(a,o){var e,t;this.$emit("filaAlumnoSelecionado",a),o?(e=this.$el.querySelectorAll(".tr.editando:not([r='".concat(a,"']), .td.editando:not([c='").concat(o,"'])")),t=this.$el.querySelectorAll(".tr[r='".concat(a,"']:not(.editando), .td[c='").concat(o,"']:not(.editando)"))):(e=this.$el.querySelectorAll(".tr.editando:not([r='".concat(a,"']), .td.editando")),t=this.$el.querySelectorAll(".tr[r='".concat(a,"']:not(.editando)"))),e.forEach(function(a){a.classList.remove("editando")}),t.forEach(function(a){a.classList.add("editando")})},dropNota:function(a,o){for(var e=this.alumnos.length-1,t=this.cabeceraNotas.length-1,n=[],i=0;i<o.length;i++)if(!(i>e))for(var r=this.alumnos[i],s=o[i],l=0;l<s.length;l++){var c=a+l;if(!(c>t)){var u=this.cabeceraNotas[c],d=u.id,m=String(s[l]).toUpperCase();!1===this.bolBloquearNota(u,r)&&Ba.esNotaValidaParaImportar(u,m)&&n.push({indexAlucod:i,idObjNota:d,nuevaNota:Ba.getFormatoNota(m,u.config)})}}if(n.length>0){for(var f=0;f<n.length;f++){var p=n[f];this.alumnos[p.indexAlucod].notas[p.idObjNota].notaReg=p.nuevaNota}this.recalcularInterno(function(){})}},addCssBackgroundNotas:function(){for(var a={},o=0;o<this.cabeceraNotas.length;o++){var e=this.cabeceraNotas[o],t=".bgprograma_"+e.idPrograma;a[t]=t+"{ background-color:"+e.backgroundColor+" }"}var n=Object.values(a).join(" "),i=document.getElementsByTagName("head")[0],r=document.createElement("style");r.setAttribute("id","styleBackgroundNotas"),r.setAttribute("type","text/css"),r.appendChild(document.createTextNode(n)),i.appendChild(r)},addCssAlertaConclusionDescriptiva:function(a){if(this.visualizarRubrica)return!1;var o=".bgAlertaConcDescriptiva{ background-color: ".concat(a," !important}"),e=document.getElementsByTagName("head")[0],t=document.createElement("style");t.setAttribute("id","styleAlertaConclusionDescriptiva"),t.setAttribute("type","text/css"),t.appendChild(document.createTextNode(o)),e.appendChild(t)},openComentarioEstadoPostulante:function(a,o){var e=this;return f()(d()().m(function t(){var n,i;return d()().w(function(t){while(1)switch(t.n){case 0:return n=e.auxEstados[a.idEstado]?e.auxEstados[a.idEstado].NOMBRE:"",e.modalComEstadoPos.titulo="Postulante: "+a.nomcomp,e.modalComEstadoPos.label="Comentario al estado "+n,e.modalComEstadoPos.open=!1,e.modalComEstadoPos.comentario="",e.modalComEstadoPos.id_ficha=a.idFicha,e.modalComEstadoPos.id_estado=a.idEstado,e.modalComEstadoPos.fila=o,t.n=1,ma.getFichaEstado(e.modalComEstadoPos);case 1:i=t.v,e.modalComEstadoPos.comentario=i.length>0?i[0].COMENTARIO:"",e.modalComEstadoPos.open=!0;case 2:return t.a(2)}},t)}))()},openFichaNee:function(a,o){var e=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:e.modalNee.idPersona=a.idPersona,e.modalNee.open=!0;case 1:return o.a(2)}},o)}))()},closeFichaNee:function(){var a=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:a.modalNee.open=!1;case 1:return o.a(2)}},o)}))()},grabarComentarioEstadoPostulante:function(){var a=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:ma.updateFichaEstado(a.modalComEstadoPos).then(function(o){(0,so["default"])("Comentario actualizado","success"),a.alumnos[a.modalComEstadoPos.fila].datos.comentarioEstado=a.modalComEstadoPos.comentario,a.modalComEstadoPos.open=!1});case 1:return o.a(2)}},o)}))()},verEstadoPostulante:function(a){var o=this;return f()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:a.ID_FICHA=a.idFicha,a.ID_FLUJO=a.idFlujo,o.modalEstado.postulante=a,o.modalEstado.titulo="Estado - "+a.nomcomp,o.modalEstado.open=!0;case 1:return e.a(2)}},e)}))()}},beforeUnmount:function(){var a=document.getElementById("styleBackgroundNotas");a&&a.remove();var o=document.getElementById("styleAlertaConclusionDescriptiva");o&&o.remove()}};const No=(0,Ea.A)(Eo,[["render",la]]);var Ao=No,Po={obtRegistroNotas:function(a,o,e,t,n,i,r){return da.$http.get("api/NotasController/getNotas",{params:{idGrado:a,idEvaluacion:o,idEstado:e,manejaSedes:t,sedes:n,nombre:i,getOportunidades:r}})},actualizarNotas:function(a,o,e,t){return da.$http.post("api/NotasController/actualizarNota",{registros:a,periodo:o,idConductaPeriodo:e,ano:t})},limpiarEstados:function(a){return da.$http.post("api/NotasController/procesarEstado",{data:a,params:{}})},eliminarExpedientes:function(a){return da.$http.post("api/PostulacionController/eliminarExpedientes",{data:a,params:{data:a}})},notificarEstadosAdmision:function(a){return da.$http.post("api/PostulacionController/notificarEstadosAdmision",{data:a,params:{data:a}})}},Do=e(80340),ko=e(24974),xo=(e(69027),e(7968)),yo={components:{QSelect:wa.S,QPageSticky:b._U,QFab:b.l6,QFabAction:b.B$,sieVacio:Do.A,QInnerLoading:b.SQ,QSpinnerOval:b.VA,sieUsuario:ko.A,grillaNotas:Ao,listarSedes:xo.A,QPage:b.Tu,QCard:b.C$},mixins:[g.A,v.A],data:function(){var a=this.init();return a.sie.idGrado=0,a.sie.idEstado=0,a.sie.idEvaluacion=0,a.sie.nombre="",a.manejaSedes=!1,a.modalSedes={open:!1,titulo:"Seleccionar Sedes",selected:[]},a.manejaNee=!1,a.asignaAptoExpConforme=!1,a.eliminaExpedientes=!1,a.usaSituacionPostulacion=!1,a.addColInformesAdmision=!1,a.addColOportunidades=!1,h()(h()({},a),{},{dirEdit:"HD",optDirEdit:{VD:{label:"Vertical Derecha",nextDir:"HD",class:"rotate-90",icon:"keyboard_arrow_down"},HD:{label:"Horizontal Derecha",nextDir:"VD",class:"",icon:"keyboard_arrow_right"}},obFiltro:{ambito:null,periodo:null,id_evaluacion:null},objAmbitoSelected:{},objPeriodoSelected:{},dataAmbito:[],dataEvaluacion:[],dataRegistroNotas:{},permisosRegistro:{},dataImportacionNotas:{},profesorClase:"",ultimaModificacion:"",editarAPartirDelPrograma:100,alumnoSelecionado:{alucod:null,nomcomp:null,nemo:null},visualizarComentario:!0,visualizarHistorial:!1,cargandoRegistro:!1,grabandoRegistro:!1,bolMostrarConfigCriterios:!1})},computed:{classDirEdit:function(){return this.optDirEdit[this.dirEdit].class},iconDirEdit:function(){return this.optDirEdit[this.dirEdit].icon},dataCboAlumno:function(){var a=[];return this.dataRegistroNotas.alumnos.forEach(function(o,e){a.push({nombre:o.datos["nomcomp"],nemo:o.datos["nemo"],alucod:o.datos["alucod"],fila:e,idPersona:o.datos["idPersona"],idNota:o.datos["idNota"],idCronograma:o.datos["idCronograma"]})}),a}},methods:{updateGrilla:function(){this.cargarDataClase()},getGrados:function(a,o,e){var t=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:t.$nextTick(f()(d()().m(function o(){var n;return d()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,t.getApiAction("api/postulacionController/getGrados",{anio:a[e]});case 1:return n=o.v,o.n=2,t.setSelect({id:"ID_GRADO",value:"ID_GRADO",label:"NIVEL_GRADO",data:n,item:{ID_GRADO:0,NIVEL_GRADO:"Seleccione"},limpiar:!0,dataIsOptions:!0});case 2:return o.a(2)}},o)})));case 1:return o.a(2)}},o)}))()},cambiarGrado:function(a,o,e){var t=this;return f()(d()().m(function o(){var n,i;return d()().w(function(o){while(1)switch(o.n){case 0:if(t.sie.idGrado=a[e]>0?a[e]:0,!(t.sie.idGrado>0)){o.n=2;break}return o.n=1,t.getApiAction("api/postulacionController/getEvaluacionesGrado",{id_grado:t.sie.idGrado});case 1:i=o.v,o.n=3;break;case 2:i=[];case 3:return n=i,o.n=4,t.setSelect({id:"ID_EVALUACION",value:"ID_EVALUACION",label:"NOMBRE",data:n,item:null,limpiar:!0});case 4:t.resetearDataRegistro();case 5:return o.a(2)}},o)}))()},cambiarEstado:function(a,o,e){var t=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:t.sie.idEstado=a[e]>0?a[e]:0,t.sie.idGrado>0&&t.sie.idEvaluacion>0&&t.cargarDataClase();case 1:return o.a(2)}},o)}))()},cambiarEvaluacion:function(a,o,e){var t=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:t.clearNombre(),t.sie.idEvaluacion=a[e]>0?a[e]:0,t.sie.idGrado>0&&t.sie.idEvaluacion>0&&t.cargarDataClase();case 1:return o.a(2)}},o)}))()},clearNombre:function(){var a=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:return a.sie.nombre="",o.n=1,a.setInputValue("formApp","INPUT_2","");case 1:return o.a(2)}},o)}))()},buscarNombre:function(a,o,e){var t=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:t.sie.nombre=a[e],t.sie.idGrado>0&&t.sie.idEvaluacion>0&&t.cargarDataClase();case 1:return o.a(2)}},o)}))()},searchNombre:function(a,o,e){var t=this;return f()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.buscarNombre(a,o,"INPUT_2");case 1:return e.a(2)}},e)}))()},actSedes:function(){var a=this;return f()(d()().m(function o(){return d()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.seleccionarSedes();case 1:if(!(a.sie.idGrado>0&&a.sie.idEvaluacion>0)){o.n=2;break}return o.n=2,a.cargarDataClase();case 2:return o.a(2)}},o)}))()},cambiarDireccionEdicion:function(){this.dirEdit=this.optDirEdit[this.dirEdit].nextDir;var a=this.$refs.headerApp.$data.buttonsFilter.find(function(a){return a.params.esLimpiar});a&&(a.icon=this.iconDirEdit)},resetearDataRegistro:function(){this.dataRegistroNotas={cabeceraNotas:[],cabeceraAlumno:[],alumnos:[],maxNivel:0,infoClasePeriodo:{},regSoloComentarios:!1,arrBloqueoNotas:[]},this.dataImportacionNotas={},this.permisosRegistro={},this.bolImportarNotasExamen=!1,this.bolImportarNotasTareaRubrica=!1,this.bolCargarComponentePesosYCriterios=!1},refrescarRegistro:function(){this.cargarDataClase()},cargarDataClase:function(){var a=this;return f()(d()().m(function o(){var e,t,n;return d()().w(function(o){while(1)switch(o.p=o.n){case 0:return a.resetearDataRegistro(),a.cargandoRegistro=!0,o.p=1,e=a.modalSedes.selected.length>0?a.modalSedes.selected.map(function(a){return a.EMPCOD}):[],o.n=2,Po.obtRegistroNotas(a.sie.idGrado,a.sie.idEvaluacion,a.sie.idEstado,a.manejaSedes,e,a.sie.nombre,a.addColOportunidades);case 2:t=o.v,n=t.infoClasePeriodo,a.dataRegistroNotas={alumnos:t.dataAlumno,maxNivel:t.maxNivel,cabeceraNotas:t.cabeceraNotas,cabeceraAlumno:t.cabeceraAlumno,infoClasePeriodo:n,regSoloComentarios:t.regSoloComentarios,arrBloqueoNotas:[],configComentarios:t.configComentarios},a.dataImportacionNotas=[],a.permisosRegistro=t.dataPermisoRegistro,a.profesorClase=n.nomProfesor,a.editarAPartirDelPrograma=n.editarAPartirDelPrograma,o.n=4;break;case 3:o.p=3,o.v;case 4:return a.cargandoRegistro=!1,o.a(2,!0)}},o,null,[[1,3]])}))()},filaAlumnoSelecionado:function(a){this.alumnoSelecionado={alucod:this.dataRegistroNotas.alumnos[a].datos.alucod,nomcomp:this.dataRegistroNotas.alumnos[a].datos.nomcomp,nemo:this.dataRegistroNotas.alumnos[a].datos.nemo,nemoAnt:this.dataRegistroNotas.alumnos[a].datos.nemoAnt,flRevisar:this.dataRegistroNotas.alumnos[a].datos.flRevisar}},limpiarEstados:function(){var a=this;if(!this.$refs.refRegistroNotas)return this.$notify("Debe seleccionar al menos un(1) registro","warning"),!1;for(var o,e=this.$refs.refRegistroNotas.checksElegidos,t=this.$refs.refRegistroNotas.auxAlumnos,n=[],i=Object.keys(e),r=0;r<i.length;r++)o=i[r],e[o]&&n.push({id_ficha:t[o].idFicha,id_estado:0,id_perfam:t[o].idPerfam,id_persona:o,nomcomp:t[o].nomcomp,estadoAnt:t[o].idEstado,famcod:t[o].famcod,alucod:t[o].alucod,anoadm:t[o].anoadm});0===n.length?this.$notify("Debe seleccionar al menos un(1) registro","warning"):(0,go.confirm)("¿Está seguro de realizar la operación?","Confirmar").onOk(function(){Po.limpiarEstados(n).then(function(){var o=f()(d()().m(function o(e){return d()().w(function(o){while(1)switch(o.n){case 0:a.$notify(e.message,"success"),a.refrescarRegistro();case 1:return o.a(2)}},o)}));return function(a){return o.apply(this,arguments)}}()).catch(function(o){a.$notify(o.error.msg,"warning")})})},guardarNotas:function(a,o,e){var t=this,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this.dataRegistroNotas.alumnos,r=[],s=[],l=[],c={},u={},d=this.objPeriodoSelected.PERIODO,m=this.objPeriodoSelected.ID_CONDUCTA_PERIODO;if(!i||0===i.length)return(0,so["default"])("Debe seleccionar al menos un(1) registro","warning"),!1;for(var f=0;f<i.length;f++){var p=i[f].notas,h=i[f].datos;if(!e||h.alucod===e)for(var g in this.usaSituacionPostulacion&&(u[h.idFicha]=h.idSituacion),p)if(p[g].notaIni!==p[g].notaReg||n){l.push({indexAlucod:f,idObjNota:g,nuevaNota:p[g].notaReg});var v={id_nota:p[g].idNota,nota:p[g].notaReg,nota_tmp:p[g].notaReg,nivelEva:p[g].nivelEva,id_cronograma:p[g].idCronograma,id_contenido:p[g].idContenido,idPersona:h.idPersona,alucod:h.alucod,fh_modificacion:new Date,usucod:(0,fo["default"])().usucod,nemo:h.nemo};c[p[g].idCronograma]=h.asistencia,p[g].idNota?r.push(v):(delete v.id_nota,v.nota&&v.nota.toString().length>0&&s.push(v))}}this.grabandoRegistro=!0,Po.actualizarNotas({u:r,i:s,asistencias:c,usaSituacionPostulacion:this.usaSituacionPostulacion,situaciones:u},d,m,this.dataRegistroNotas.infoClasePeriodo.ano).then(function(e){if(t.grabandoRegistro=!1,1===e.code){for(var n=0;n<l.length;n++){var i=l[n];t.dataRegistroNotas.alumnos[i.indexAlucod].notas[i.idObjNota].notaIni=i.nuevaNota}(0,so["default"])(e.message),"function"===typeof a&&a(!0),t.cargarDataClase()}else(0,so["default"])(t.$t("mensajes.e0006"),"warning"),"function"===typeof o&&o(new Error("error"))}).catch(function(a){t.grabandoRegistro=!1,(0,so["default"])(t.$t("mensajes.e0006"),"warning"),"function"===typeof o&&o(new Error("error"))})},eliminarExpedientes:function(){var a=this;return f()(d()().m(function o(){var e,t,n,i,r,s;return d()().w(function(o){while(1)switch(o.n){case 0:if(a.$refs.refRegistroNotas){o.n=1;break}return a.$notify("Debe seleccionar al menos un(1) registro","warning"),o.a(2,!1);case 1:for(e=a.$refs.refRegistroNotas.checksElegidos,t=a.$refs.refRegistroNotas.auxAlumnos,n=[],i=Object.keys(e),s=0;s<i.length;s++)r=i[s],e[r]&&n.push({id_ficha:t[r].idFicha,nomcomp:t[r].nomcomp,estadoAnt:t[r].idEstado});0===n.length?a.$notify("Debe seleccionar al menos un(1) registro","warning"):(0,go.confirm)("¿Está seguro de eliminar los expedientes? La operación es irreversible","Confirmar").onOk(function(){Po.eliminarExpedientes(n).then(function(){var o=f()(d()().m(function o(e){return d()().w(function(o){while(1)switch(o.n){case 0:a.$notify(e.message,"success"),a.refrescarRegistro();case 1:return o.a(2)}},o)}));return function(a){return o.apply(this,arguments)}}()).catch(function(o){a.$notify(o.error.message,"warning")})});case 2:return o.a(2)}},o)}))()},notificarEstados:function(){var a=this;return f()(d()().m(function o(){var e,t,n,i,r,s;return d()().w(function(o){while(1)switch(o.n){case 0:if(a.$refs.refRegistroNotas){o.n=1;break}return a.$notify("Debe seleccionar al menos un(1) registro","warning"),o.a(2,!1);case 1:for(e=a.$refs.refRegistroNotas.checksElegidos,t=a.$refs.refRegistroNotas.auxAlumnos,n=[],i=Object.keys(e),s=0;s<i.length;s++)r=i[s],e[r]&&n.push({id_ficha:t[r].idFicha,id_perfam:t[r].idPerfam,id_estado:t[r].idEstado});0===n.length?a.$notify("Debe seleccionar al menos un(1) registro","warning"):(0,go.confirm)("¿Está seguro de enviar la notificación?","Confirmar").onOk(function(){Po.notificarEstadosAdmision(n).then(function(){var o=f()(d()().m(function o(e){return d()().w(function(o){while(1)switch(o.n){case 0:a.$notify(e.message,"success");case 1:return o.a(2)}},o)}));return function(a){return o.apply(this,arguments)}}()).catch(function(o){a.$notify(o.error.msg,"warning")})});case 2:return o.a(2)}},o)}))()}},created:function(){var a=this;return f()(d()().m(function o(){var e,t;return d()().w(function(o){while(1)switch(o.n){case 0:return e=[{id:"viewAdmRegistroNotas",ref:"formApp"}],o.n=1,a.loadSchemas(e);case 1:return o.n=2,a.getConstantesAdmision(["AD_MANEJA_SEDES","AD_MANEJA_NEE","AD_ASIGNA_APTO_EXP_CONFORME","AD_ELIMINA_EXPEDIENTES","AD_SITUACION_POSTULACION","AD_COL_INFORMES_ADMISION","AD_MAX_OPORTUNIDADES"]);case 2:t=o.v,a.manejaSedes=t.AD_MANEJA_SEDES,a.manejaNee=t.AD_MANEJA_NEE,a.asignaAptoExpConforme=t.AD_ASIGNA_APTO_EXP_CONFORME,a.eliminaExpedientes=t.AD_ELIMINA_EXPEDIENTES,a.usaSituacionPostulacion=t.AD_SITUACION_POSTULACION,a.addColInformesAdmision=t.AD_COL_INFORMES_ADMISION,a.addColOportunidades=t.AD_MAX_OPORTUNIDADES>1,a.$nextTick(f()(d()().m(function o(){var e,t,n;return d()().w(function(o){while(1)switch(o.n){case 0:a.manejaSedes&&(e={label:"Sedes",icon:"add_location",click:a.verSedes,params:{view:"viewAdmRegistroNotas"}},a.botonesForm=a.botonesForm.concat(e)),a.sie.ruta.nivel>=2&&(t={label:"Notificar Estados",icon:"send",click:a.notificarEstados,params:{view:"viewAdmRegistroNotas"}},a.botonesForm=a.botonesForm.concat(t)),a.eliminaExpedientes&&a.sie.ruta.nivel>=3&&(n={label:"Eliminar expedientes",icon:"delete",click:a.eliminarExpedientes,params:{view:"viewAdmRegistroNotas"}},a.botonesForm=a.botonesForm.concat(n));case 1:return o.a(2)}},o)})));case 3:return o.a(2)}},o)}))()},beforeMount:function(){return f()(d()().m(function a(){return d()().w(function(a){while(1)switch(a.n){case 0:return a.a(2)}},a)}))()}};const Io=(0,Ea.A)(yo,[["render",c]]);var Ro=Io}}]);