"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[25228],{25228:function(a,o,e){e.r(o),e.d(o,{default:function(){return $}});var n=e(61758),t={class:"row"},l={class:"col-sm-12"},i={class:"row"},r={class:"col-sm-3"},s={class:"col-sm-3"},u={class:"col-sm-3"},c={class:"col-sm-3"},d={class:"row"},p={class:"col-sm-4"},b={class:"col-sm-4"},m={class:"col-sm-4"},f={class:"row"},v={class:"row"},h={class:"col-sm-12"};function g(a,o){var e=(0,n.g2)("q-btn"),g=(0,n.g2)("header-btn"),E=(0,n.g2)("q-select"),A=(0,n.g2)("q-input"),S=(0,n.g2)("q-card-section"),x=(0,n.g2)("q-card"),C=(0,n.g2)("q-page-sticky"),T=(0,n.g2)("sie-cloud"),k=(0,n.g2)("sie-modal"),V=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(V,null,{default:(0,n.k6)(function(){return[(0,n.bF)(x,{class:"q-ma-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(g,{name:"Exportar Registro de Notas Genérico SIAGIE (Anual)",buttons:a.buttons},{default:(0,n.k6)(function(){return[(0,n.bF)(e,{round:"",color:"primary",icon:"shopping_cart"})]}),_:1},8,["buttons"]),(0,n.bF)(S,{class:"padding-none"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",t,[(0,n.Lk)("div",l,[(0,n.Lk)("div",i,[(0,n.Lk)("div",r,[(0,n.bF)(E,{class:"q-if-outlined",modelValue:a.anio,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.anio=o}),options:a.anios,optionValue:"ANO",optionLabel:"ANO",label:"Año"},null,8,["modelValue","options"])]),(0,n.Lk)("div",s,[(0,n.bF)(E,{class:"q-if-outlined",modelValue:a.instrucod,"onUpdate:modelValue":o[1]||(o[1]=function(o){return a.instrucod=o}),onInput:a.cambiarNivel,options:a.niveles,label:"Nivel"},null,8,["modelValue","onInput","options"])]),(0,n.Lk)("div",u,[(0,n.bF)(E,{class:"q-if-outlined",modelValue:a.gradocod,"onUpdate:modelValue":o[2]||(o[2]=function(o){return a.gradocod=o}),onInput:a.cambiarGrado,options:a.grados,label:"Grado"},null,8,["modelValue","onInput","options"])]),(0,n.Lk)("div",c,[(0,n.bF)(E,{class:"q-if-outlined",modelValue:a.seccioncod,"onUpdate:modelValue":o[3]||(o[3]=function(o){return a.seccioncod=o}),options:a.secciones,optionValue:"SECCIONCOD",optionLabel:"SECCIONDES",label:"Seccion"},null,8,["modelValue","options"])])]),(0,n.Lk)("div",d,[(0,n.Lk)("div",p,[(0,n.bF)(E,{class:"q-if-outlined",modelValue:a.estado,"onUpdate:modelValue":o[4]||(o[4]=function(o){return a.estado=o}),options:a.estados,label:"Situación"},null,8,["modelValue","options"])]),(0,n.Lk)("div",b,[(0,n.bF)(E,{class:"q-if-outlined",modelValue:a.matricula,"onUpdate:modelValue":o[5]||(o[5]=function(o){return a.matricula=o}),options:a.sino,label:"Matriculado"},null,8,["modelValue","options"])]),(0,n.Lk)("div",m,[(0,n.bF)(E,{class:"q-if-outlined",modelValue:a.hmnoubi,"onUpdate:modelValue":o[6]||(o[6]=function(o){return a.hmnoubi=o}),options:a.ubicacion,label:"Ubicación de Hijo"},null,8,["modelValue","options"])])]),(0,n.Lk)("div",f,[(0,n.bF)(e,{onClick:o[7]||(o[7]=function(o){return a.modalAdjuntar=!0}),color:"primary",label:"Adjuntar",icon:"shopping_cart"})])])]),(0,n.Lk)("div",v,[(0,n.Lk)("div",h,[(0,n.bF)(A,{class:"q-if-outlined",modelValue:a.observaciones,"onUpdate:modelValue":o[8]||(o[8]=function(o){return a.observaciones=o}),modelModifiers:{trim:!0},type:"textarea",maxlength:a.maxLength,"float-label":"Observaciones","max-height":100,rows:"7",disable:!0},null,8,["modelValue","maxlength"])])])]}),_:1})]}),_:1}),(0,n.bF)(C,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(e,{fab:"",round:"",color:"secondary",icon:"cogs",onClick:a.exportar},null,8,["onClick"])]}),_:1}),(0,n.bF)(k,{class:"modal-contenido-adjunto",modelValue:a.modalAdjuntar,"onUpdate:modelValue":o[10]||(o[10]=function(o){return a.modalAdjuntar=o}),title:"Adjuntar",onSubmit:o[11]||(o[11]=function(o){return a.modalAdjuntar=!1})},{default:(0,n.k6)(function(){return[(0,n.bF)(T,{modelValue:a.adjunto,"onUpdate:modelValue":o[9]||(o[9]=function(o){return a.adjunto=o}),"only-local":"",onInput:a.aceptar},null,8,["modelValue","onInput"])]}),_:1},8,["modelValue"])]}),_:1})}var E=e(8445),A=e.n(E),S=e(76080),x=e.n(S),C=e(45254),T=e.n(C),k=e(99550),V=e.n(k),w=(e(30683),e(71225),e(39866),e(10239),e(56285),e(50310),e(5962),e(90095),e(83190),e(13715),e(81288)),L={data:function(){return{config:{REPCOD:{component:"checkbox",input:function(a){return T()(x()().m(function o(){return x()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,(0,w.sleep)(5e3);case 1:return console.log("FALSE FALSE",a),o.a(2,!1)}},o)}))()}}},columns:[{name:"TABLA",label:"Tabla",field:"TABLA",align:"left"},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left"}]}}},I=e(88865),j=e(95718),N=e(16648),O=e(3112),F=e(6123),U=e(32195),q=e(30640),D=e(982),R=(e(78131),e(2819)),P=e(80660),_=e(57668),y={getExportarTablas:function(a){return P.$http.get("api/UtilitarioController/getExportarTablas",{params:{tabla:a}})},generarExcel:function(a){return P.$http.post("api/UtilitarioController/generarExcel",{data:a})},getGrados:function(a){return P.$http.get("api/SalonController/getCargarGrados",{params:{nivel:a,accion:3}})},getSecciones:function(a,o,e){return P.$http.get("api/SalonController/getSecciones",{params:{anio:a,gradocod:e,instrucod:o}}).then(function(a){a.unshif({SECCIONCOD:"T",SECCIONDES:"Todos"})})},validaAdjuntoSiagie:function(a){return P.$http.post("api/UtilitarioController/validarHojaSiagie",{adjunto:a})}},Q={components:{sieModal:q.A,sieCloud:U.A,QCheckbox:O.A,QPageSticky:F._U,QItemSection:I.A,QCardSection:j.A,QInnerLoading:F.SQ,QSpinnerOval:F.VA,QSelect:N.A,QPage:F.Tu,QCard:F.C$,QBtn:F.Il,QInput:F.ie},mixins:[L],data:function(){return{adjunto:null,observaciones:"",modalAdjuntar:!1,anio:(0,_["default"])().ano,solonuevos:!1,congrado:!1,instrucod:"T",gradocod:"T",seccioncod:"T",estado:"T",matricula:"T",hmnoubi:"T",anios:[{label:"2022",value:"2022"}],estados:[{value:"T",label:"Todos"},{value:"A",label:"Activos"},{value:"M",label:"Eval. Postergada"},{value:"E",label:"Ex-Alumno"},{value:"X",label:"Matriculados-Retirados"},{value:"P",label:"Promovidos"},{value:"J",label:"Repitentes"},{value:"S",label:"Req. Recuperación"},{value:"R",label:"Retirados"},{value:"T",label:"Trasladados"}],ubicacion:[{label:"Todos",value:"T"},{label:"Hijo Unico",value:"A"},{label:"Hijo Mayor",value:"P"},{label:"Hijo Intermedio",value:"I"},{label:"Hijo Menor",value:"U"}],niveles:[{label:"Todos",value:"T"},{label:"Inicial",value:"I"},{label:"Primaria",value:"P"},{label:"Secundaria",value:"S"}],grados:[{label:"Todos",value:"T"}],secciones:[{SECCIONCOD:"T",SECCIONDES:"Todos"}],sino:[{label:"Todos",value:"T"},{label:"Sí",value:"S"},{label:"No",value:"N"}],listaExportar:[],listaExportar2:[],buttons:[{icon:"keyboard_arrow_left",label:"Procesar",aux:[],user:[{cod:0}],click:this.left,round:!0},{icon:"keyboard_arrow_right",label:"Procesar",click:this.rigth,round:!0}]}},methods:{aceptar:function(a){var o=this;this.modalAdjuntar=!1,console.log("aceptar",a);var e=a[0],n=e.name.split("_"),t=V()(n,4),l=(t[0],t[1]),i=(t[2],t[3]);e.ano=i.substr(2,4),e.grado=i.substr(6,2),e.seccion=i.substr(8,2),e.codigomodular=l.substr(0,7),y.validaAdjuntoSiagie(e).then(function(a){o.observaciones=a.message})},rowSelected:function(a){console.log(a)},cambiarNivel:function(){var a=this;return T()(x()().m(function o(){return x()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,y.getGrados(a.instrucod);case 1:a.grados=o.v;case 2:return o.a(2)}},o)}))()},cambiarGrado:function(){var a=this;return T()(x()().m(function o(){return x()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,y.getSecciones(a.anio,a.instrucod,a.gradocod);case 1:a.secciones=o.v;case 2:return o.a(2)}},o)}))()},left:function(){var a=this.$refs.tabla2.rowsSelected();this.listaExportar=[].concat(A()(this.listaExportar),A()(a));var o=[];a.forEach(function(a){var e=a.TABLA,n=a.ORDEN;o.push(e+n)});var e=this.listaExportar2.filter(function(a){var e=a.TABLA,n=a.ORDEN;return!o.includes(e+n)});this.listaExportar2=A()(e)},exportar:function(){if(!this.listaExportar2.length)return(0,D["default"])("No hay campos selecionados para Exportar","warning");var a={};this.listaExportar2.forEach(function(o){var e=o.TABLA,n=o.ORDEN;a.hasOwnProperty(e)||(a[e]=[]),a[e].push(n)});var o=(0,P.getBase)()+"/api/UtilitarioController/generarExcel",e=this.instrucod,n=this.gradocod,t=this.seccioncod,l=this.matricula,i=this.estado,r=this.hmnoubi,s=this.solonuevos,u=this.congrado;(0,R.open)({data:{ano:this.anio,data:a,instrucod:e,gradocod:n,seccioncod:t,matricula:l,estado:i,hmnoubi:r,solonuevos:s,congrado:u},action:o,filename:"exportacionTablas.xlsx"})},rigth:function(){var a=this.$refs.tabla1.rowsSelected();this.listaExportar2=[].concat(A()(this.listaExportar2),A()(a));var o=[];a.forEach(function(a){var e=a.TABLA,n=a.ORDEN;o.push(e+n)});var e=this.listaExportar.filter(function(a){var e=a.TABLA,n=a.ORDEN;return!o.includes(e+n)});this.listaExportar=A()(e)},getCamposTabla:function(a){var o=this;return T()(x()().m(function e(){return x()().w(function(e){while(1)switch(e.n){case 0:return o.listaExportar2=[],e.n=1,y.getExportarTablas(a);case 1:o.listaExportar=e.v;case 2:return e.a(2)}},e)}))()}},created:function(){var a=this;return T()(x()().m(function o(){var e;return x()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,y.getanios();case 1:return e=o.v,console.log("res:",e),o.n=2,e.json;case 2:a.anios=o.v;case 3:return o.a(2)}},o)}))()}},B=e(12807);const G=(0,B.A)(Q,[["render",g]]);var $=G}}]);