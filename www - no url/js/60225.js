"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[60225],{60225:function(e,r,a){a.r(r),a.d(r,{default:function(){return k}});var n=a(61758),t={class:"row"},c={class:"col-xs-12"},i={class:"row q-pa-sm q-col-gutter-sm"},o={class:"col-xs-12"};function s(e,r){var a=this,s=(0,n.g2)("header-btn"),u=(0,n.g2)("sie-table"),l=(0,n.g2)("q-card-section"),f=(0,n.g2)("q-card"),d=(0,n.g2)("q-input"),m=(0,n.g2)("q-form"),p=(0,n.g2)("sie-modal"),w=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(w,{class:"q-pa-sm sie-flat"},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{name:"Mantenimiento Marca",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(l,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",t,[(0,n.Lk)("div",c,[(0,n.bF)(u,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableMarca",onRowSelected:e.rowSelectMarca,css:"height:calc(100vh - 170px)",context:a},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,n.bF)(p,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.openAdd=r}),css:{width:"500px"},title:"create"===e.action?"Agregar Marca":"Modificar Marca",onSubmit:e.saveAcccion},{default:(0,n.k6)(function(){return[(0,n.bF)(m,{ref:"refForm"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[(0,n.Lk)("div",o,[(0,n.bF)(d,{type:"textarea",counter:"",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.form.DESCRIPCION=r}),label:"Descripción *",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var u=a(76080),l=a.n(u),f=a(45254),d=a.n(f),m=(a(89571),a(6123)),p={data:function(){return{config:{ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,r){var a=this;return d()(l()().m(function e(){return l()().w(function(e){while(1)switch(e.n){case 0:return a.rowMarca=r,e.n=1,a.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,r){var a=this;return d()(l()().m(function e(){return l()().w(function(e){while(1)switch(e.n){case 0:return a.rowMarca=r,e.n=1,a.deleteMarca();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"IDMARCA",label:"Código",field:"IDMARCA",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:"80"}]}}},w=a(39893),h=a(81288),g=a(2739),M=a(9736),v=a(88567),b=a(95718),A={mixins:[p],components:{QForm:g.A,QInput:M.A,QCard:v.A,QCardSection:b.A,QPage:m.Tu},data:function(){return{required:w.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowMarca:null,form:{DESCRIPCION:null}}},methods:{openAgregar:function(){this.action="create",this.rowMarca=null,(0,h.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowMarca?(this.action="update",this.form.DESCRIPCION=this.rowMarca.DESCRIPCION,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return d()(l()().m(function r(){var a,n,t;return l()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.$refs.refForm.validate();case 1:if(a=r.v,a){r.n=2;break}return r.a(2);case 2:if("create"!==e.action){r.n=4;break}return r.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:n=r.v,n&&e.createMarca(),r.n=6;break;case 4:return r.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:t=r.v,t&&e.updateMarca();case 6:return r.a(2)}},r)}))()},rowSelectMarca:function(e,r){this.rowMarca=r},createMarca:function(){var e=this;return d()(l()().m(function r(){var a,n,t,c,i;return l()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,e.$http.post("api/HyoMarcas/createMarca",{params:e.form});case 1:a=r.v,n=a.result,t=a.message,c={IDMARCA:n.IDMARCA,DESCRIPCION:e.form.DESCRIPCION},e.rows.unshift(c),e.openAdd=!1,e.$notify(t,"success"),r.n=3;break;case 2:r.p=2,i=r.v,e.$notify(i.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()},readMarca:function(){var e=this;return d()(l()().m(function r(){var a,n;return l()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,e.$http.get("api/HyoMarcas/readMarca");case 1:a=r.v,e.rows=a,r.n=3;break;case 2:r.p=2,n=r.v,e.$notify(n.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()},deleteMarca:function(){var e=this;return d()(l()().m(function r(){var a,n,t,c;return l()().w(function(r){while(1)switch(r.p=r.n){case 0:if(e.rowMarca){r.n=1;break}e.$notify("Selecciona un registro","info"),r.n=6;break;case 1:return r.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(a=r.v,!a){r.n=6;break}return r.p=3,r.n=4,e.$http.delete("api/HyoMarcas/deleteMarca",{params:{idmarca:e.rowMarca.IDMARCA}});case 4:n=r.v,t=n.message,e.rows.splice(e.rows.indexOf(e.rowMarca),1),e.rowMarca=null,e.$notify(t,"success"),r.n=6;break;case 5:r.p=5,c=r.v,e.$notify(c.message,"warning");case 6:return r.a(2)}},r,null,[[3,5]])}))()},updateMarca:function(){var e=this;return d()(l()().m(function r(){var a,n,t,c;return l()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,a=e.$refs.tableMarca,r.n=1,e.$http.put("api/HyoMarcas/updateMarca",{idmarca:e.rowMarca.IDMARCA,params:{DESCRIPCION:e.form.DESCRIPCION}});case 1:n=r.v,t=n.message,e.openAdd=!1,a.updateRow(e.rowMarca,e.form),e.$notify(t,"success"),r.n=3;break;case 2:r.p=2,c=r.v,e.$notify(c.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()}},created:function(){var e=this;return d()(l()().m(function r(){return l()().w(function(r){while(1)switch(r.n){case 0:try{e.readMarca()}catch(r){e.$notify(r.message,"warning")}case 1:return r.a(2)}},r)}))()}},C=a(12807);const I=(0,C.A)(A,[["render",s]]);var k=I}}]);