"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[98951],{98951:function(a,t,e){e.r(t),e.d(t,{default:function(){return V}});var l=e(61758),o=e(58790),n={class:"row q-px-sm q-pt-sm"},s={class:"col-xs-12 col-md-4"},i={class:"col-xs-6 col-md-4"},u={class:"col-xs-6 col-md-4"},r={class:"column col scroll-y"},c={class:"row"},d={class:"col col-xs-12 q-pa-xs"},p={class:"col"},f={class:"text-bold q-body-1"};function m(a,t){var e=(0,l.g2)("q-input"),m=(0,l.g2)("q-select"),b=(0,l.g2)("q-td"),C=(0,l.g2)("q-popup-edit"),h=(0,l.g2)("q-tr"),T=(0,l.g2)("q-table"),g=(0,l.g2)("q-card"),v=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(v,{class:"ficha bg-white"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",n,[(0,l.Lk)("div",s,[(0,l.bF)(e,{class:"q-if-outlined",modelValue:a.cbusca,"onUpdate:modelValue":t[0]||(t[0]=function(t){return a.cbusca=t}),"float-label":a.$t("campo")},null,8,["modelValue","float-label"])]),(0,l.Lk)("div",i,[(0,l.bF)(m,{class:"q-if-outlined",modelValue:a.filtroCampo,"onUpdate:modelValue":t[1]||(t[1]=function(t){return a.filtroCampo=t}),options:a.filtroCampos,"float-label":a.$t("Perfil")},null,8,["modelValue","options","float-label"])]),(0,l.Lk)("div",u,[(0,l.bF)(m,{class:"q-if-outlined",modelValue:a.filtroEstado,"onUpdate:modelValue":t[2]||(t[2]=function(t){return a.filtroEstado=t}),options:a.listEstados,"float-label":a.$t("acceso")},null,8,["modelValue","options","float-label"])])]),(0,l.Lk)("div",r,[(0,l.Lk)("div",c,[(0,l.Lk)("div",d,[(0,l.bF)(T,{"table-style":"height: 75vh",pagination:a.paginationTabla,"onUpdate:pagination":t[3]||(t[3]=function(t){return a.paginationTabla=t}),data:a.datosTabla,columns:a.columnsTabla,"row-key":"name",loading:a.loading,"hide-bottom":""},{body:(0,l.k6)(function(t){return[(0,l.bF)(h,{props:t},{default:(0,l.k6)(function(){return[(0,l.bF)(b,{key:"TIPO",props:t},{default:(0,l.k6)(function(){return[(0,l.eW)((0,o.v_)(t.row.TIPO),1)]}),_:2},1032,["props"]),(0,l.bF)(b,{key:"DESCRIPCION",props:t},{default:(0,l.k6)(function(){return[(0,l.eW)((0,o.v_)(t.row.DESCRIPCION),1)]}),_:2},1032,["props"]),(0,l.bF)(b,{key:"ACCESO",props:t},{default:(0,l.k6)(function(){return[(0,l.eW)((0,o.v_)(a.getAcceso(t.row.ACCESO,a.estados)),1),(0,l.bF)(C,{modelValue:t.row.ACCESO,"onUpdate:modelValue":function(a){return t.row.ACCESO=a}},{default:(0,l.k6)(function(){return[(0,l.bF)(m,{modelValue:t.row.ACCESO,"onUpdate:modelValue":function(a){return t.row.ACCESO=a},options:a.estados,onInput:function(e){return a.updateCampoPanel(t.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","columns","loading"]),(0,l.bF)(g,{class:"q-pa-md full-width text-right"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",p,[t[4]||(t[4]=(0,l.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,l.Lk)("span",f,(0,o.v_)(a.datosTabla.length),1)])]}),_:1})])])])]}),_:1})}var b=e(76080),C=e.n(b),h=e(45254),T=e.n(h),g=e(8445),v=e.n(g),w=(e(74260),e(50310),e(32203),e(83190),e(6123)),k=e(57668),E=e(982),O=e(33001),P=e(80660),A={getCamposPanel:function(a){return T()(C()().m(function a(){return C()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,P.$http.post("api/dashboard/getCamposPanel"))}},a)}))()},updateCampoPanel:function(a){return T()(C()().m(function t(){return C()().w(function(t){while(1)switch(t.n){case 0:return t.a(2,P.$http.post("api/dashboard/updateCampoPanel",a))}},t)}))()}},I={components:{sieInfo:k["default"],QTable:w.kH,QTh:w.EJ,QTr:w.qh,QTd:w.Ef,QTableColumns:w.$s,QPopupEdit:w.GT,QSelect:w.Si,QPage:w.Tu,QInput:w.ie,QCard:w.C$},props:["id"],data:function(){return{estados:[{label:this.$t("campos.oculto"),value:"2"},{label:this.$t("campos.visible"),value:"1"}],cbusca:"",filtroEstado:"T",filtroCampo:"T",filtroCampos:[{label:"Todos",value:"T"},{label:"Familia",value:"FAMILIA"},{label:"Alumno",value:"ALUMNO"},{label:"Otros",value:"OTROS"}],paginationTabla:{page:1,rowsPerPage:1e3},datosTablaTemp:[],columnsTabla:[{name:"TIPO",label:"PERFIL",field:"TIPO",align:"left",sortable:!0,required:!0},{name:"DESCRIPCION",label:"Descripci√≥n",field:"DESCRIPCION",align:"left",sortable:!0,required:!1},{name:"ACCESO",label:"Acceso",field:"ACCESO",align:"left",sortable:!0,required:!1}],loading:!1}},computed:{listEstados:function(){var a=v()(this.estados);return a.unshift({label:"Todos",value:"T"}),a},datosTabla:function(){var a=[];return a=this.datosTablaTemp,""!==this.cbusca&&(a=(0,O.filterArray)(this.cbusca,{field:"DESCRIPCION",list:a})),"T"!==this.filtroCampo&&(a=(0,O.filterArray)(this.filtroCampo,{field:"TIPO",list:a})),"T"!==this.filtroEstado&&(a=(0,O.filterArray)(this.filtroEstado,{field:"ACCESO",list:a})),a}},methods:{getAcceso:function(a,t){var e=t.find(function(t){return t.value===a});return e.label},init:function(){var a=this;return T()(C()().m(function t(){return C()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,A.getCamposPanel();case 1:a.datosTablaTemp=t.v;case 2:return t.a(2)}},t)}))()},updateCampoPanel:function(a,t){var e=this;return T()(C()().m(function t(){var l;return C()().w(function(t){while(1)switch(t.n){case 0:l={},l.acceso=a.ACCESO,l.campo=a.CAMPO,A.updateCampoPanel(l).then(function(a){(0,E["default"])(e.$t("mensajes."+a.mensaje),"success")}).catch(function(a){(0,E["default"])("Error","warning"),e.init()});case 1:return t.a(2)}},t)}))()}},created:function(){this.init()}},q=e(12807);const S=(0,q.A)(I,[["render",m]]);var V=S}}]);