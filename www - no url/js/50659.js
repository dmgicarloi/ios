"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[50659],{50659:function(a,e,o){o.r(e),o.d(e,{default:function(){return Q}});var t=o(61758);function n(a,e){var o=(0,t.g2)("listado"),n=(0,t.g2)("nuevo"),l=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(l,null,{default:(0,t.k6)(function(){return["listado"===a.menuSelect?((0,t.uX)(),(0,t.Wv)(o,{key:0,onCambiarVentana:a.cambiarEstado},null,8,["onCambiarVentana"])):(0,t.Q3)("v-if",!0),"nuevo"===a.menuSelect?((0,t.uX)(),(0,t.Wv)(n,{key:1,onCambiarVentana:a.cambiarEstado,nombre:a.titulo,dataEdit:a.dataEdit},null,8,["onCambiarVentana","nombre","dataEdit"])):(0,t.Q3)("v-if",!0)]}),_:1})}o(515);var l=o(6123),r=o(8445),i=o.n(r),u={class:"q-card q-ma-md"},c={class:"row q-gutter-sm q-pa-md"},s={class:"row q-gutter-sm q-pa-md"},d={class:"row justify-start"},C={class:"row q-gutter-sm q-pa-md"};function f(a,e){var o=(0,t.g2)("header-btn"),n=(0,t.g2)("q-input1"),l=(0,t.g2)("q-field"),r=(0,t.g2)("q-list-header"),f=(0,t.g2)("q-checkbox"),I=(0,t.g2)("q-select"),D=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(D,null,{default:(0,t.k6)(function(){return[(0,t.bF)(o,{name:a.nombre,buttons:a.buttons},null,8,["name","buttons"]),(0,t.Lk)("div",u,[(0,t.Lk)("div",c,[(0,t.bF)(l,{class:"col",error:a.v$.infoCatalogo.DESCRIPCION.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{modelValue:a.v$.infoCatalogo.DESCRIPCION.$model,"onUpdate:modelValue":e[0]||(e[0]=function(e){return a.v$.infoCatalogo.DESCRIPCION.$model=e}),label:"Nombre"},null,8,["modelValue"])]}),_:1},8,["error","error-label"]),(0,t.bF)(l,{class:"col",error:a.v$.infoCatalogo.STOCK_MINIMO.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{modelValue:a.v$.infoCatalogo.STOCK_MINIMO.$model,"onUpdate:modelValue":e[1]||(e[1]=function(e){return a.v$.infoCatalogo.STOCK_MINIMO.$model=e}),type:"number",label:"Stock minimo"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])]),(0,t.bF)(r,{class:"q-my-md"},{default:(0,t.k6)(function(){return i()(e[10]||(e[10]=[(0,t.Lk)("div",{class:"text-bold"},"Método de Depreciación",-1)]))}),_:1}),(0,t.Lk)("div",s,[(0,t.Lk)("div",d,[(0,t.bF)(f,{class:"text-bold col",modelValue:a.infoCatalogo.IS_DEPRECIACION,"onUpdate:modelValue":e[2]||(e[2]=function(e){return a.infoCatalogo.IS_DEPRECIACION=e}),"true-value":1,"false-value":0,label:"Afecto a Depreciación",color:"secondary"},null,8,["modelValue"])]),1===a.infoCatalogo.IS_DEPRECIACION?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(l,{class:"col",error:a.v$.infoCatalogo.DEP_METODO.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(I,{modelValue:a.v$.infoCatalogo.DEP_METODO.$model,"onUpdate:modelValue":e[3]||(e[3]=function(e){return a.v$.infoCatalogo.DEP_METODO.$model=e}),options:a.arrDepreciacion,"option-value":"ID","option-label":"DESCRIPCION",label:"Metodo"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),(0,t.bF)(l,{error:a.v$.infoCatalogo.DEP_POR_RESIDUAL.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{modelValue:a.v$.infoCatalogo.DEP_POR_RESIDUAL.$model,"onUpdate:modelValue":e[4]||(e[4]=function(e){return a.v$.infoCatalogo.DEP_POR_RESIDUAL.$model=e}),type:"number",min:"0",label:"% Residual"},{append:(0,t.k6)(function(){return i()(e[11]||(e[11]=[(0,t.Lk)("div",{class:"row items-center"},[(0,t.Lk)("span",null,"%")],-1)]))}),_:1},8,["modelValue"])]}),_:1},8,["error","error-label"]),(0,t.bF)(l,{error:a.v$.infoCatalogo.DEP_DURACION.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{modelValue:a.v$.infoCatalogo.DEP_DURACION.$model,"onUpdate:modelValue":e[5]||(e[5]=function(e){return a.v$.infoCatalogo.DEP_DURACION.$model=e}),type:"number",min:"0"},null,8,["modelValue"])]}),_:1},8,["error","error-label"]),(0,t.bF)(l,{class:"col",error:a.v$.infoCatalogo.DEP_DURACION_MEDIDA.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(I,{class:"col",modelValue:a.v$.infoCatalogo.DEP_DURACION_MEDIDA.$model,"onUpdate:modelValue":e[6]||(e[6]=function(e){return a.v$.infoCatalogo.DEP_DURACION_MEDIDA.$model=e}),options:a.arrDuracion,"option-value":"value","option-label":"label",label:"Duración"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])],64)):(0,t.Q3)("v-if",!0)]),(0,t.bF)(r,{class:"q-my-md"},{default:(0,t.k6)(function(){return i()(e[12]||(e[12]=[(0,t.Lk)("div",{class:"text-bold"},"Contabilidad",-1)]))}),_:1}),(0,t.Lk)("div",C,[(0,t.bF)(I,{class:"col",modelValue:a.infoCatalogo.CTA_A_FIJO,"onUpdate:modelValue":e[7]||(e[7]=function(e){return a.infoCatalogo.CTA_A_FIJO=e}),options:a.arrCtaContables,label:"Cuenta Activo Fijo","option-value":"CODCTA","option-label":"CTADES"},null,8,["modelValue","options"]),(0,t.bF)(I,{class:"col",modelValue:a.infoCatalogo.CTA_DEPRECIACION,"onUpdate:modelValue":e[8]||(e[8]=function(e){return a.infoCatalogo.CTA_DEPRECIACION=e}),options:a.arrCtaContables,label:"Cuenta Depreciación","option-value":"CODCTA","option-label":"CTADES"},null,8,["modelValue","options"]),(0,t.bF)(I,{class:"col",modelValue:a.infoCatalogo.CTA_GASTOS,"onUpdate:modelValue":e[9]||(e[9]=function(e){return a.infoCatalogo.CTA_GASTOS=e}),options:a.arrCtaContables,label:"Cuenta Gastos","option-value":"CODCTA","option-label":"CTADES"},null,8,["modelValue","options"])])])]}),_:1})}var I=o(76080),D=o.n(I),m=o(45254),A=o.n(m),O=(o(10239),o(83972)),E=o(57668),b=o(9736),g=o(55973),v=o(3112),p=o(16648),_=o(82640),h={setup:function(){var a=(0,O.fG)();return{v$:a}},emits:["cambiarVentana"],components:{QInput1:b.A,QToggle:g.A,QCheckbox:v.A,QSelect:p.A,QPage:l.Tu,QField:l.Om,QListHeader:l.XR},props:{nombre:{type:String,default:"Nuevo Catálogo"},dataEdit:{type:Object,default:{}}},data:function(){return{arrDuracion:[],arrDepreciacion:[],arrCtaContables:[],infoCatalogo:{ID_CATALOGO:null,DESCRIPCION:null,STOCK_MINIMO:null,IS_DEPRECIACION:0,DEP_METODO:null,DEP_DURACION:0,DEP_DURACION_MEDIDA:null,CTA_DEPRECIACION:null,CTA_A_FIJO:null,CTA_GASTOS:null,DEP_POR_RESIDUAL:null}}},methods:{volver:function(){this.$emit("cambiarVentana","listado")},grabar:function(){var a=this;return A()(D()().m(function e(){var o,t,n;return D()().w(function(e){while(1)switch(e.p=e.n){case 0:if(a.v$.$touch(),a.v$.$invalid){e.n=5;break}return e.n=1,a.$confirmar("¿Desea Registrar este Catalogo?","Atención");case 1:if(o=e.v,!o){e.n=5;break}return e.p=2,e.n=3,a.$http.post("api/AfCatalogoController/addAfCatalogo",{data:a.infoCatalogo});case 3:t=e.v,a.$notify(t.message),a.$emit("cambiarVentana","listado"),e.n=5;break;case 4:e.p=4,n=e.v,a.$notify(n.error.message,"error");case 5:return e.a(2)}},e,null,[[2,4]])}))()},asignVals:function(a){var e,o,t,n,l,r,i,u,c,s,d;this.infoCatalogo={ID_CATALOGO:null!==(e=a.ID_CATALOGO)&&void 0!==e?e:null,DESCRIPCION:null!==(o=a.DESCRIPCION)&&void 0!==o?o:null,STOCK_MINIMO:null!==(t=a.STOCK_MINIMO)&&void 0!==t?t:null,IS_DEPRECIACION:null!==(n=a.IS_DEPRECIACION)&&void 0!==n?n:0,DEP_POR_RESIDUAL:null!==(l=a.DEP_POR_RESIDUAL)&&void 0!==l?l:null,DEP_METODO:null!==(r=a.DEP_METODO)&&void 0!==r?r:null,DEP_DURACION:null!==(i=a.DEP_DURACION)&&void 0!==i?i:0,DEP_DURACION_MEDIDA:null!==(u=a.DEP_DURACION_MEDIDA)&&void 0!==u?u:null,CTA_DEPRECIACION:null!==(c=a.CTA_DEPRECIACION)&&void 0!==c?c:null,CTA_A_FIJO:null!==(s=a.CTA_A_FIJO)&&void 0!==s?s:null,CTA_GASTOS:null!==(d=a.CTA_GASTOS)&&void 0!==d?d:null},a.ID_CATALOGO&&(this.infoCatalogo.ID_CATALOGO=a.ID_CATALOGO)},init:function(){}},computed:{buttons:function(){var a=[{label:"Volver",icon:"arrow_left",click:this.volver}];return 3===(0,E["default"])().ruta.nivel&&a.push({label:"Grabar",icon:"save",click:this.grabar}),a}},validations:function(){var a=this,e=function(){return 0===a.infoCatalogo.IS_DEPRECIACION||null!==a.infoCatalogo.DEP_METODO},o=function(){return 0===a.infoCatalogo.IS_DEPRECIACION||null!==a.infoCatalogo.DEP_DURACION&&a.infoCatalogo.DEP_DURACION>0},t=function(){return 0===a.infoCatalogo.IS_DEPRECIACION||null!==a.infoCatalogo.DEP_DURACION_MEDIDA},n=function(){return 0===a.infoCatalogo.IS_DEPRECIACION||null!==a.infoCatalogo.DEP_POR_RESIDUAL},l={infoCatalogo:{DESCRIPCION:{required:_.mw},STOCK_MINIMO:{required:_.mw},DEP_METODO:{depreciacionValidate:e},DEP_DURACION:{depDuracionValidate:o},DEP_DURACION_MEDIDA:{depDuracionMedidaValidate:t},DEP_POR_RESIDUAL:{depDuracionPorcentaje:n}}};return l},mounted:function(){var a=this;return A()(D()().m(function e(){var o,t,n,l;return D()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,a.$http.get("api/AfCatalogoController/getDatosIniciales");case 1:o=e.v,t=o.arrDuracion,n=o.arrDepreciacion,l=o.cuentas,a.arrDuracion=t,a.arrDepreciacion=n,a.arrCtaContables=l,a.asignVals(a.dataEdit);case 2:return e.a(2)}},e)}))()},watch:{dataEdit:function(a){this.asignVals()}}},S=o(12807);const T=(0,S.A)(h,[["render",f]]);var P=T,N=(o(52776),o(53113),{class:"q-card q-pa-sm q-ma-sm"}),R={class:"row q-gutter-sm"};function $(a,e){var o=this,n=(0,t.g2)("header-btn"),l=(0,t.g2)("q-icon"),r=(0,t.g2)("q-input1"),i=(0,t.g2)("q-select"),u=(0,t.g2)("sie-table"),c=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(c,null,{default:(0,t.k6)(function(){return[(0,t.bF)(n,{name:"Catálogos",buttons:a.buttons},null,8,["buttons"]),(0,t.Lk)("div",N,[(0,t.Lk)("div",R,[(0,t.bF)(r,{class:"col",modelValue:a.search,"onUpdate:modelValue":e[0]||(e[0]=function(e){return a.search=e}),label:a.$t("Buscar"),onChange:a.init,onInput:a.filtrarCatalogos},{append:(0,t.k6)(function(){return[(0,t.bF)(l,{name:"search"})]}),_:1},8,["modelValue","label","onChange","onInput"]),(0,t.bF)(i,{class:"col-3",modelValue:a.aDepreciacion,"onUpdate:modelValue":e[1]||(e[1]=function(e){return a.aDepreciacion=e}),options:a.aDepreciacionList,label:"A. Depreciación",onInput:a.filtrarCatalogos},null,8,["modelValue","options","onInput"])]),(0,t.bF)(u,{class:"q-mt-xs",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 180px)","show-search":!1,context:o,columns:a.columns,data:a.dataCatalogos,config:a.config},null,8,["columns","data","config"])])]}),_:1})}var V=o(33777),k=o(33001),U=o(2819),M=o(69027),L=o(982),q={emits:["cambiarVentana"],components:{QInput1:b.A,QToggle:g.A,SieTable:V.A,QSelect:p.A,QPage:l.Tu,QIcon:l.bP},data:function(){return{search:null,aDepreciacion:"T",dataCatalogos:[],dataCatalogosBase:[],aDepreciacionList:[{label:"Todos",value:"T"},{label:"No",value:0},{label:"Si",value:1}],columns:[{name:"IDTEXTO",label:"Id Catálogo",align:"left",field:"IDTEXTO"},{name:"DESCRIPCION",label:this.$t("Nombre"),align:"left",field:"DESCRIPCION"},{name:"IS_DEPRECIACION",label:this.$t("A. depreciación"),align:"center",field:"IS_DEPRECIACION"},{name:"ACTIVOS",label:this.$t("Total de Activos"),align:"center",field:"TOTAL_ACTIVOS"},{name:"HABILITADOS",label:this.$t("Activos habilitados"),align:"center",field:"ACTIVOS_HABILITADOS"},{name:"DESHABILITADOS",label:this.$t("Activos deshabilitados"),align:"center",field:"ACTIVOS_DESHABILITADOS"},{name:"CUENTA_ACTIVOS",label:this.$t("Activos disponibles"),align:"center",field:"CUENTA_ACTIVOS"},{name:"STOCK_MINIMO",label:this.$t("Stock minimo"),align:"center",field:"STOCK_MINIMO"},{name:"ACCIONES",align:"center",field:"ACCIONES"}],config:{IS_DEPRECIACION:{component:"select",options:[{label:"No",value:0},{label:"Si",value:1}],edit:!1},ACCIONES:{flat:!0,component:"button",permisos:{edit:"=== 3"},icon:["edit"],tooltip:{edit:"Editar"},edit:function(a){this.nuevo(a)},delete:function(a){this.eliminarCatalogo(a)}},flat:!0,round:!0,color:"primary"}}},methods:{printxls:function(){var a="intranet/reporte-node/reporte";(0,U.exportFilePhp)({repcod:"activoFijo"},a)},nuevo:function(a){this.$emit("cambiarVentana","nuevo",a)},eliminarCatalogo:function(a){var e=this;return A()(D()().m(function o(){var t,n;return D()().w(function(o){while(1)switch(o.n){case 0:if(a.ID_CATALOGO){o.n=1;break}return o.a(2);case 1:return o.n=2,(0,M.dialogDelete)();case 2:if(t=o.v,!t){o.n=4;break}return o.n=3,e.$http.delete("api/AfCatalogoController/deleteAfCatalogo",{params:{id:a.ID_CATALOGO}});case 3:n=o.v,(0,L["default"])(n.message,1==n.code?"success":"warning"),e.init();case 4:return o.a(2)}},o)}))()},addCatalogo:function(){this.nuevo({})},init:function(){var a=this;return A()(D()().m(function e(){return D()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,a.$http.get("api/AfCatalogoController/getAfCatalogo");case 1:a.dataCatalogosBase=e.v,a.filtrarCatalogos();case 2:return e.a(2)}},e)}))()},filtrarCatalogos:function(){var a=this.dataCatalogosBase;this.search&&this.search.length>0&&(a=(0,k.filterArray)(this.search,{field:"DESCRIPCION",list:a})||[]),"T"!==this.aDepreciacion&&(a=(0,k.filterArray)(this.aDepreciacion,{field:"IS_DEPRECIACION",list:a})||[]),this.dataCatalogos=a}},computed:{buttons:function(){var a=[];return 3===(0,E["default"])().ruta.nivel&&a.push({label:"Nuevo",icon:"add",click:this.addCatalogo}),a}},mounted:function(){this.init()}};const F=(0,S.A)(q,[["render",$]]);var w=F,y={components:{nuevo:P,listado:w,QPage:l.Tu},data:function(){return{menuSelect:"listado",titulo:null,dataEdit:{}}},methods:{printxls:function(){},cambiarEstado:function(a,e){this.menuSelect=a,this.dataEdit={},e&&0!==Object.keys(e).length?(this.dataEdit=e,this.titulo="Editar "+e.DESCRIPCION):this.titulo="Nuevo Catálogo"}}};const G=(0,S.A)(y,[["render",n]]);var Q=G}}]);