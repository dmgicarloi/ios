"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[7688],{7688:function(e,n,o){o.r(n),o.d(n,{default:function(){return K}});var t=o(61758),r=o(29104),i={class:"row q-col-gutter-md"},l={class:"col-xs-12"},a={key:0,class:"row"},c={class:"col-xs-12 col-md-4 q-pa-md"};function s(e,n){var o=(0,t.g2)("q-input"),s=(0,t.g2)("q-tab"),u=(0,t.g2)("configuracion"),d=(0,t.g2)("q-tab-pane"),f=(0,t.g2)("config-general-admision"),m=(0,t.g2)("q-tabs"),p=(0,t.g2)("q-card-section"),g=(0,t.g2)("q-card"),G=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(G,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(p,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",i,[(0,t.Lk)("div",l,[e.acceso?((0,t.uX)(),(0,t.Wv)(m,{key:1,inverted:"",ref:"tabs",animated:"",modelValue:e.tab,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.tab=n})},{title:(0,t.k6)(function(){return[(0,t.bF)(s,{name:"tab-1",label:"Configuración"}),(0,t.bF)(s,{name:"tab-2",label:"Configuración general de notas"})]}),default:(0,t.k6)(function(){return[(0,t.bF)(d,{name:"tab-1"},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{tiposRegistros:e.tiposRegistros},null,8,["tiposRegistros"])]}),_:1}),(0,t.bF)(d,{name:"tab-2"},{default:(0,t.k6)(function(){return[(0,t.bF)(f)]}),_:1})]}),_:1},8,["modelValue"])):((0,t.uX)(),(0,t.CE)("div",a,[(0,t.Lk)("div",c,[(0,t.bF)(o,{modelValue:e.clave,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.clave=n}),onKeyup:(0,r.jR)(e.validacion,["enter"]),filled:"",type:"password"},null,8,["modelValue","onKeyup"])])]))])])]}),_:1})]}),_:1})]}),_:1})}var u=o(6123),d=o(86932),f=o(8445),m=o.n(f),p=o(58790),g={class:"row"},G={class:"col-12"},b={class:"q-pl-sm"},C={class:"row q-pa-sm"},v={class:"col-xs-12"},F={class:"col-xs-12"},O={class:"col-xs-6"},h={class:"col-xs-6"};function A(e,n){var o=(0,t.g2)("q-tooltip"),r=(0,t.g2)("q-btn"),i=(0,t.g2)("q-card"),l=(0,t.g2)("q-checkbox"),a=(0,t.g2)("q-td"),c=(0,t.g2)("q-icon"),s=(0,t.g2)("q-tr"),u=(0,t.g2)("q-table"),d=(0,t.g2)("q-input"),f=(0,t.g2)("sie-select"),A=(0,t.g2)("q-field"),k=(0,t.g2)("sie-modal"),D=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(D,{class:"bg-white"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",g,[(0,t.Lk)("div",G,[(0,t.bF)(i,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,t.k6)(function(){return[n[9]||(n[9]=(0,t.Lk)("div",{class:"col"},[(0,t.Lk)("span",{class:"text-bold q-body-1"},"Configuración general de notas de Admisión")],-1)),(0,t.Lk)("div",null,[(0,t.bF)(r,{onClick:e.addConfigGeneralAdmision,round:"",color:"secondary",icon:"plus"},{default:(0,t.k6)(function(){return[(0,t.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,t.k6)(function(){return m()(n[7]||(n[7]=[(0,t.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])]),(0,t.Lk)("div",b,[(0,t.bF)(r,{onClick:e.deleteConfigGeneralAdmision,round:"",color:"secondary",icon:"delete"},{default:(0,t.k6)(function(){return[(0,t.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,t.k6)(function(){return m()(n[8]||(n[8]=[(0,t.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,t.bF)(u,{selection:e.confGenTipoSeleccion,"row-key":"__index",color:"secondary",data:e.confGenData,columns:e.confGenCol,pagination:e.confGenPag,"onUpdate:pagination":n[0]||(n[0]=function(n){return e.confGenPag=n}),selected:e.confGenSeleccionado,"onUpdate:selected":n[1]||(n[1]=function(n){return e.confGenSeleccionado=n}),filter:e.confGenFiltro,loading:e.confGenLoad,"hide-bottom":""},{body:(0,t.k6)(function(r){return[(0,t.bF)(s,{class:"cursor-pointer",props:r},{default:(0,t.k6)(function(){return[(0,t.bF)(a,null,{default:(0,t.k6)(function(){return[(0,t.bF)(l,{modelValue:r.selected,"onUpdate:modelValue":function(e){return r.selected=e},color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,t.bF)(a,{key:"ID_CONFIG",props:r},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(r.row.ID_CONFIG),1)]}),_:2},1032,["props"]),(0,t.bF)(a,{key:"LEYENDA",props:r},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(r.row.LEYENDA),1)]}),_:2},1032,["props"]),(0,t.bF)(a,{key:"ANO",props:r},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(r.row.ANO),1)]}),_:2},1032,["props"]),(0,t.bF)(a,{key:"INSTRUCOD",props:r},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(r.row.INSTRUCOD),1)]}),_:2},1032,["props"]),(0,t.bF)(a,{key:"GRADOCOD",props:r},{default:(0,t.k6)(function(){return[(0,t.eW)((0,p.v_)(r.row.GRADOCOD),1)]}),_:2},1032,["props"]),(0,t.bF)(a,{key:"ACCION",props:r},{default:(0,t.k6)(function(){return[(0,t.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(n){return e.addConfigGeneralAdmision(r.row.ID_CONFIG,r.row)},name:"edit",color:"black",size:"17px"},{default:(0,t.k6)(function(){return[(0,t.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,t.k6)(function(){return m()(n[10]||(n[10]=[(0,t.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","pagination","selected","filter","loading"])])]),(0,t.bF)(k,{modelValue:e.confGenOpen.modal,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.confGenOpen.modal=n}),header:!0,footer:!0,title:e.confGenOpen.title,ok:"Grabar",onSubmit:e.saveConfigGeneralAdmision},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",C,[(0,t.Lk)("div",v,[(0,t.bF)(d,{class:"q-if-outlined",modelValue:e.confGenForm.ANO,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.confGenForm.ANO=n}),"float-label":e.$t("ano"),disable:""},null,8,["modelValue","float-label"])]),(0,t.Lk)("div",F,[(0,t.bF)(A,{error:e.v$.confGenForm.ID_CONFIG.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.ID_CONFIG.$model,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.v$.confGenForm.ID_CONFIG.$model=n}),options:e.options,label:"LEYENDA",val:"ID_CONFIG",placeholder:"Id. Config"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",O,[(0,t.bF)(A,{error:e.v$.confGenForm.INSTRUCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.INSTRUCOD.$model,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.v$.confGenForm.INSTRUCOD.$model=n}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",onInput:e.getGradosNivel},null,8,["modelValue","options","onInput"])]}),_:1},8,["error","error-label"])]),(0,t.Lk)("div",h,[(0,t.bF)(A,{error:e.v$.confGenForm.GRADOCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.GRADOCOD.$model,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.v$.confGenForm.GRADOCOD.$model=n}),options:e.grados,label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var k=o(57008),D=o.n(k),I=o(83972),N=o(80340),_=o(93616),$=o(30640),q=o(57668),w=o(6583),R=o(81288),T=o(69027),y=o(13813),S=o(33001),L=o(982),E=o(82640),V=o(76080),U=o.n(V),Q=o(45254),x=o.n(Q),W=o(80660),P={defaultConfGenForm:function(){return{ID_CONFIG:null,ANO:(0,q["default"])().ano,INSTRUCOD:null,GRADOCOD:null}},getNiveles:function(){return x()(U()().m(function e(){var n;return U()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,W.$http.get("api/postulacionController/getInstruTodos",{params:{params:{}}});case 1:return n=e.v,e.a(2,n)}},e)}))()},getGrados:function(){return x()(U()().m(function e(){var n;return U()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,W.$http.get("api/postulacionController/getGradosnivTodos",{params:{params:{}}});case 1:return n=e.v,e.a(2,n)}},e)}))()},listConfigGeneralAdmision:function(){return W.$http.get("api/HyoConfigGeneralAdmision/listConfigGeneralAdmision").then(function(e){return e})},objConfigGeneralAdmision:function(){return W.$http.get("api/HyoConfigGeneralAdmision/objConfigGeneralAdmision").then(function(e){return e})},updateOrInsertConfigGeneralAdmision:function(e){return W.$http.post("api/HyoConfigGeneralAdmision/updateOrInsertConfigGeneralAdmision",{data:e})},deleteConfigGeneralAdmision:function(e){return W.$http.post("api/HyoConfigGeneralAdmision/deleteConfigGeneralAdmision",{arrIds:e})}},Y=o(30902),j={setup:function(){var e=(0,I.fG)();return{v$:e}},components:{QTable:u.kH,QTh:u.EJ,QTr:u.qh,QTd:u.Ef,QTableColumns:u.$s,QCheckbox:u.vZ,QSelect:u.Si,QToggle:u.c5,sieVacio:N.A,sieSelect:_.A,sieModal:$.A,QPage:u.Tu,QCard:u.C$,QBtn:u.Il,QTooltip:u.nC,QIcon:u.bP,QInput:u.ie,QField:u.Om},data:function(){return{sie:(0,q["default"])(),options:[],confGenNotas:[],confGenData:[],confGenCol:[{name:"ID_CONFIG",label:"Id config.",field:"ID_CONFIG",align:"center",sortable:!0},{name:"LEYENDA",label:"Leyenda",field:"LEYENDA",align:"left",sortable:!1},{name:"ANO",label:this.$t("ano"),field:"ANO",align:"center",sortable:!1},{name:"INSTRUCOD",label:this.$t("ngs.nivel"),field:"INSTRUCOD",align:"center",sortable:!0},{name:"GRADOCOD",label:this.$t("ngs.grado"),field:"GRADOCOD",align:"center",sortable:!0},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 100px"}],confGenPag:{page:1,rowsPerPage:200},confGenFiltro:"",confGenLoad:!1,confGenTipoSeleccion:"multiple",confGenSeleccionado:[],confGenForm:P.defaultConfGenForm(),confGenOpen:{modal:!1,title:"",disable:!1},niveles:[],grados:[],gradosTemp:[]}},computed:{isLess:function(){return(0,R.isLess)()}},methods:{getGradosNivel:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.gradosTemp;n=(0,S.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:n}),this.grados=n,e&&(this.confGenForm.GRADOCOD=null)},obtConfigGeneralAdmision:function(){var e=this;this.confGenLoad=!0,P.listConfigGeneralAdmision().then(function(n){return e.confGenNotas=(0,w["default"])(n),P.objConfigGeneralAdmision()}).then(function(n){e.confGenData=(0,w["default"])(n),e.confGenLoad=!1}).catch(function(){})},addConfigGeneralAdmision:function(e,n){var o=D()({},n);this.v$.confGenForm.$reset(),this.confGenOpen.modal=!0,"number"===typeof e?(this.confGenOpen.title="Editar configuración de nota",this.confGenForm=o):(this.confGenOpen.title="Agregar configuración de nota",this.confGenForm=P.defaultConfGenForm()),this.getGradosNivel(!1)},saveConfigGeneralAdmision:function(){var e=this;this.v$.confGenForm.$touch();var n=this.confGenForm;this.v$.confGenForm.$error||P.updateOrInsertConfigGeneralAdmision(n).then(function(n){(0,L["default"])(n.mensaje,n.icono),"success"===n.icono&&(e.obtConfigGeneralAdmision(),e.confGenOpen.modal=!1)})},deleteConfigGeneralAdmision:function(){var e=this;this.confGenSeleccionado.length>0?(0,T.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){var n=(0,y["default"])(e.confGenSeleccionado,function(e){return{ID_CONFIG_GENERAL:e.ID_CONFIG_GENERAL}});return P.deleteConfigGeneralAdmision(n)}).then(function(n){(0,L["default"])(n.mensaje,n.icono),e.obtConfigGeneralAdmision(),e.confGenSeleccionado=[]}):(0,L["default"])("Debe seleccionar al menos un elemento","warning")}},validations:{confGenForm:{ANO:{required:E.mw},ID_CONFIG:{required:E.mw},INSTRUCOD:{required:E.mw},GRADOCOD:{required:E.mw}}},created:function(){var e=this;this.obtConfigGeneralAdmision(),Y.A.obtConfigClaseContenido(5).then(function(n){e.options=(0,w["default"])(n)}),P.getNiveles().then(function(n){e.niveles=n}),P.getGrados().then(function(n){e.gradosTemp=n})}},H=o(12807);const M=(0,H.A)(j,[["render",A]]);var X=M,z={components:{QTabs:u.uw,QTab:u.zu,QTabPane:u.dg,configuracion:d.A,ConfigGeneralAdmision:X,QPage:u.Tu,QCard:u.C$,QInput:u.ie},data:function(){return{acceso:!1,clave:null,tab:"tab-1",tiposRegistros:[5]}},methods:{validacion:function(){if(["SIE","SIEWEB","DEMO"].indexOf((0,q["default"])().usucod)>=0){var e=Date.now(),n=u.p6.formatDate(e,"DD-MM-YYYY").split("-"),o=(0,q["default"])().host.split("//")[1].split(".")[0],t=n[0]+o+n[1]+n[2];this.acceso=this.clave===t}}}};const B=(0,H.A)(z,[["render",s]]);var K=B}}]);