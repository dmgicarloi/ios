"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[98121],{98121:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var o=n(8445),a=n.n(o),r=n(61758),l={class:"row q-col-gutter-md"},i={class:"row col-12 q-col-gutter-sm"},s={class:"col-xs-12 col-sm-12 col-md-3"},c={class:"col-xs-12 col-sm-6 col-md-3"},u={class:"col-xs-12 col-sm-6 col-md-3"},f={class:"col-xs-12 col-sm-12 col-md-3"},d={class:"row q-gutter-sm"},m={class:"col"},p={class:"col-xs-12"},h={class:"row q-pa-sm"};function g(e,t){var n=this,o=(0,r.g2)("header-btn"),g=(0,r.g2)("autocomplete"),b=(0,r.g2)("q-date"),v=(0,r.g2)("q-popup-proxy"),M=(0,r.g2)("q-icon"),O=(0,r.g2)("q-input"),L=(0,r.g2)("q-select"),w=(0,r.g2)("q-tooltip"),I=(0,r.g2)("q-btn"),A=(0,r.g2)("sie-table"),S=(0,r.g2)("q-card-section"),T=(0,r.g2)("q-card"),k=(0,r.g2)("sie-modal"),C=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(C,{class:"q-pa-sm bg-white sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(T,null,{default:(0,r.k6)(function(){return[(0,r.bF)(o,{name:"Monitoreo de alertas",auto:!1,buttons:e.buttons},null,8,["buttons"]),(0,r.bF)(S,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",l,[(0,r.Lk)("div",i,[(0,r.Lk)("div",s,[(0,r.bF)(g,{class:"q-ma-none",modelValue:e.usuario,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.usuario=t}),data:e.usuriosData,label:"Usuario",keys:e.keysComplete,onSelected:e.selected},null,8,["modelValue","data","keys","onSelected"])]),(0,r.Lk)("div",c,[(0,r.bF)(O,{label:"Desde",maxlength:"10",format:"##/##/####",modelValue:e.fecini,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fecini=t}),mask:"##/##/####"},{append:(0,r.k6)(function(){return[(0,r.bF)(M,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(v,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(b,{mask:"DD/MM/YYYY",modelValue:e.fecini,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fecini=t}),onInput:e.feciniSelect},null,8,["modelValue","onInput"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",u,[(0,r.bF)(O,{label:"Hasta",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fecfin,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.fecfin=t}),mask:"##/##/####"},{append:(0,r.k6)(function(){return[(0,r.bF)(M,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(v,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(b,{mask:"DD/MM/YYYY",modelValue:e.fecfin,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.fecfin=t}),onInput:e.fecfinSelect},null,8,["modelValue","onInput"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",f,[(0,r.Lk)("div",d,[(0,r.Lk)("div",m,[(0,r.bF)(L,{options:e.filtros,modelValue:e.filtroSelected,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.filtroSelected=t}),noBottom:"",placeholder:"Mostrar",onInput:e.cambiarfiltro},null,8,["options","modelValue","onInput"])]),(0,r.bF)(I,{class:"q-pa-sm",icon:"broom",size:"10px",color:"primary",onClick:e.limpiar},{default:(0,r.k6)(function(){return[(0,r.bF)(w,null,{default:(0,r.k6)(function(){return a()(t[7]||(t[7]=[(0,r.eW)("Limpiar",-1)]))}),_:1})]}),_:1},8,["onClick"])])])]),(0,r.Lk)("div",p,[(0,r.bF)(A,{columns:e.fields,config:e.config,data:e.rows,css:"width: 100%; height:calc(100vh - 145px)",context:n,selection:"single",permiso:"===3"},null,8,["columns","config","data"])])])]}),_:1})]}),_:1}),(0,r.bF)(k,{modelValue:e.openModal,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.openModal=t}),title:"Detalle del Correo",ok:"Aceptar",onSubmit:e.closeModal},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",h,[(0,r.bF)(T,null,{default:(0,r.k6)(function(){return[(0,r.bF)(S,{innerHTML:e.mensajeHtml},null,8,["innerHTML"])]}),_:1})])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var b=n(76080),v=n.n(b),M=n(57008),O=n.n(M),L=n(45254),w=n.n(L),I=(n(77507),n(68017),n(6123)),A=n(57668),S=n(80660),T=n(30640),k={data:function(){return{rows:[{CODIGO:"DEFAULT",DESCRIPCION:"DEFAULT",VALOR1:"DEFAULT",VALOR2:"DEFAULT",ESTADO:"S"}],config:{FH_ENVIO:{component:"date",edit:!1},FH_LECTURA:{component:"date",edit:!1},DETALLE:{component:"button",icon:["envelope as ver"],tooltip:{ver:"Ver Detalles"},ver:function(e,t){this.getMensajesById(t.ID_MENSAJERIA),this.openModal=!0},flat:!0,dense:!0},LECTURA:{renderHtml:function(e,t){var n=1===e.LECTURA?"Si":"No";return t("span",{},n)}}},fields:[{name:"USUNOM",label:"Enviado a",field:"USUNOM",align:"left",sortable:!0,wrap:!0},{name:"TIPNOM",label:"Referencia",field:"TIPNOM",align:"left",sortable:!0,wrap:!0},{name:"ASUNTO",label:"Asunto",field:"ASUNTO",align:"left",sortable:!0,wrap:!0},{name:"FH_ENVIO",label:"F. Envio",field:"FH_ENVIO",align:"left",sortable:!0,wrap:!0},{name:"LECTURA",label:"Leido",field:"LECTURA",align:"center"},{name:"FH_LECTURA",label:"F. Lectura",field:"FH_LECTURA",align:"left",sortable:!0,wrap:!0},{name:"DETALLE",label:"Detalle",field:"DETALLE",align:"center"}]}}},C=n(16648),D=n(9736),F=n(3042),E=n(95477),_=n(2819),V=n(4437),U={mixins:[k],components:{QSelect:C.A,sieModal:T.A,QDate:V.A,QInput:D.A,QPopupProxy:E.A,autocomplete:F.A,QPage:I.Tu,QCard:I.C$,QIcon:I.bP,QBtn:I.Il,QTooltip:I.nC},data:function(){var e=this;return{permiso:(0,A["default"])().ruta.nivel,filtros:[{label:"Leido",value:"L"},{label:"No Leido",value:"N"},{label:"Todos",value:"T"}],params:{},usuario:"",keysComplete:["NOMCOMP","SOLCOD","DESCRIPTOR","TIPO_SOLICITA"],usuriosData:[],filtroSelected:"T",fecini:"",fecfin:"",openModal:!1,mensajeHtml:"",buttons:[{label:"IMPRIMIR",icon:"file_pdf_o",permiso:">2",tooltip:"Imprimir monitoreo de alertas",click:function(){e.exportar("pdf")}},{label:"EXPORTAR",icon:"file_excel_new",permiso:">2",tooltip:"Exportar monitoreo de alertas",click:function(){e.exportar("xls")}}]}},methods:{exportar:function(e){var t=this;return w()(v()().m(function n(){var o,a;return v()().w(function(n){while(1)switch(n.n){case 0:o=O()({},t.params.solicitante),a={solcod:o.SOLCOD?o.SOLCOD:"",tiposolicita:o.TIPO_SOLICITA?o.TIPO_SOLICITA:"",periodo:"Rango",formato:e,tiposolicitades:"",repsolcoddes:"",lectura:"L"===t.filtroSelected?1:"N"===t.filtroSelected?0:"T",solicitantecod:o.NOMCOMP?o.NOMCOMP:"",desde:t.fecini||"",hasta:t.fecfin||"",estado:"L"===t.filtroSelected?1:"N"===t.filtroSelected?0:"T"},(0,_.exportFilePhp)(a,"biblioteca/reportes/relacion-monitoreo-alertas");case 1:return n.a(2)}},n)}))()},cambiarfiltro:function(e){var t=this;return w()(v()().m(function e(){return v()().w(function(e){while(1)switch(e.n){case 0:return t.params.leido=t.filtroSelected,e.n=1,t.getMonitoreos();case 1:return e.a(2)}},e)}))()},limpiar:function(){this.params={},this.usuario=this.fecini=this.fecfin="",this.rows=[]},selected:function(e){var t=this;return w()(v()().m(function n(){var o;return v()().w(function(n){while(1)switch(n.n){case 0:return t.usuario=e.NOMCOMP,o={SOLCOD:e.SOLCOD.trim(),TIPO_SOLICITA:e.TIPO_SOLICITA.trim(),NOMCOMP:e.NOMCOMP.trim()},t.params.solicitante=o,n.n=1,t.getMonitoreos();case 1:return n.a(2)}},n)}))()},feciniSelect:function(){var e=this;return w()(v()().m(function t(){var n;return v()().w(function(t){while(1)switch(t.n){case 0:return n=e.fecini.split("/").reverse().join("/"),e.params.desde=n,t.n=1,e.getMonitoreos();case 1:return t.a(2)}},t)}))()},fecfinSelect:function(){var e=this;return w()(v()().m(function t(){var n;return v()().w(function(t){while(1)switch(t.n){case 0:return n=e.fecfin.split("/").reverse().join("/"),e.params.hasta=n,t.n=1,e.getMonitoreos();case 1:return t.a(2)}},t)}))()},closeModal:function(e){e.preventDefault(),this.openModal=!1},getMonitoreos:function(){var e=this;return w()(v()().m(function t(){return v()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,S.$http.get("api/MonitoreoAlertasController/getMonitoreos",{params:{params:e.params}});case 1:e.rows=t.v;case 2:return t.a(2)}},t)}))()},getMensajesById:function(e){var t=this;return w()(v()().m(function n(){var o;return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,S.$http.get("api/MonitoreoAlertasController/getMensaje",{params:{params:{ID_MENSAJERIA:e}}});case 1:o=n.v,t.mensajeHtml=o.MENSAJE;case 2:return n.a(2)}},n)}))()},getRangoFechaActual:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth();this.params.desde=new Date(t,n,1).toISOString().split("T")[0],this.params.hasta=new Date(t,n+1,0).toISOString().split("T")[0],this.fecini=this.params.desde.split("-").reverse().join("/"),this.fecfin=this.params.hasta.split("-").reverse().join("/")}},created:function(){var e=this;return w()(v()().m(function t(){var n;return v()().w(function(t){while(1)switch(t.n){case 0:return e.getRangoFechaActual(),t.n=1,e.getMonitoreos();case 1:return t.n=2,S.$http.get("api/MonitoreoAlertasController/getSolicitantes");case 2:n=t.v,e.usuriosData=n;case 3:return t.a(2)}},t)}))()}},N=n(12807);const P=(0,N.A)(U,[["render",g]]);var x=P}}]);