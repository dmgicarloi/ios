"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[93296],{93296:function(o,e,i){i.r(e),i.d(e,{default:function(){return S}});var t=i(61758),n={class:"intranet--reportes-aula col column"},c={class:"col column justify-center"},s={class:"row items-center justify-center"},r={class:"col-xs-12 col-md-6"},a={class:"row q-col-gutter-sm"},l={class:"col-12"},u={key:1,class:"row q-col-gutter-sm"};function p(o,e){var i=(0,t.g2)("q-select"),p=(0,t.g2)("q-datetime"),d=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-btn"),m=(0,t.g2)("q-card-actions"),h=(0,t.g2)("q-card"),b=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",n,[(0,t.Lk)("div",c,[(0,t.Lk)("div",s,[(0,t.Lk)("div",r,[(0,t.bF)(h,{dense:"",bordered:"",flat:""},{default:(0,t.k6)(function(){return[(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",a,[(0,t.Lk)("div",l,[(0,t.bF)(i,{modelValue:o.cbotiporep,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.cbotiporep=e}),options:o.tipoReporte,label:o.$t("tipoReporte"),onInput:o.changeFiltros},null,8,["modelValue","options","label","onInput"])]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.config[o.cbotiporep],function(o,e){return(0,t.uX)(),(0,t.CE)("div",{key:e,class:"col-12"},["select"===o.type?((0,t.uX)(),(0,t.Wv)(i,{key:0,modelValue:o.model,"onUpdate:modelValue":function(e){return o.model=e},options:o.options,label:o.label,onInput:o.funcion},null,8,["modelValue","onUpdate:modelValue","options","label","onInput"])):(0,t.Q3)("v-if",!0),"dates"===o.type?((0,t.uX)(),(0,t.CE)("div",u,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.fechas,function(o,e){return(0,t.uX)(),(0,t.CE)("div",{key:e,class:"col-6"},[(0,t.bF)(p,{modelValue:o.model,"onUpdate:modelValue":function(e){return o.model=e},type:o.type,label:o.label},null,8,["modelValue","onUpdate:modelValue","type","label"])])}),128))])):(0,t.Q3)("v-if",!0)])}),128))])]}),_:1}),(0,t.bF)(m,{align:"center"},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{icon:"file_excel",color:"secondary",onClick:e[1]||(e[1]=function(e){return o.imprimir("xls")}),label:"EXCEL"})]}),_:1})]}),_:1})])])])])]}),_:1})}var d=i(99550),f=i.n(d),m=i(76080),h=i.n(m),b=i(45254),g=i.n(b),v=(i(71225),i(52133),i(50310),i(5962),i(6724),i(11777),i(83190),i(6123)),C=i(80660),E=i(20456),w=i(16648),y=i(50304),I=i(57668),O=i(81288),k=i(2819),D=i(3927),P=i(26319),N={data:function(){var o=this;return{config:{IE003:{salones:{label:"Aulas",type:"select",model:null,options:[],funcion:function(){o.seleccionarSalon()}},cursos:{label:"Cursos",type:"select",model:null,options:[],funcion:function(){o.cambiarCurso()}},periodos:{label:"Periodos",type:"select",model:null,options:[],funcion:function(){o.cambiarPeriodo()}},actividades:{label:"Actividades",type:"select",model:null,options:[],funcion:function(){}}},IE004:{salones:{label:"Aulas",type:"select",model:null,options:[],funcion:function(){o.seleccionarSalon()}},cursos:{label:"Cursos",type:"select",model:null,options:[],funcion:function(){o.cambiarCurso()}},periodos:{label:"Periodos",type:"select",model:null,options:[],funcion:function(){o.cambiarPeriodo()}},competencias:{label:"Competencia",type:"select",model:null,options:[],funcion:function(){}}},actividadesEstudiantes:{salones:{label:"Aulas",type:"select",model:null,options:[],funcion:function(){o.seleccionarSalon()}},cursos:{label:"Cursos",type:"select",model:null,options:[],funcion:function(){o.cambiarCurso()}},periodos:{label:"Periodos",type:"select",model:null,options:[],funcion:function(){o.cambiarPeriodo()}},estudiantes:{label:"Estudiantes",type:"select",model:null,options:[],function:function(){}},inicio_fin:{type:"dates",fechas:{de:{label:"De",type:"date",model:null},hasta:{label:"Hasta",type:"date",model:null}}}}}}}},A={components:{QCardActions:E.A,QSelect:w.S,QDatetime:y.A,QPage:v.Tu,QCard:v.C$,QBtn:v.Il},mixins:[N],data:function(){return{sie:(0,I["default"])(),salones:[],perfiles:[],cursos:[],competencias:[],contenidos:[],tipoReporte:[{value:"IE003",label:"Niveles alcanzados por Actividad"},{value:"IE004",label:"Consolidado de Actividades por competencia"},{value:"actividadesEstudiantes",label:"Consolidado Actividades Estudiantes"}],cbotiporep:"IE003",regant:0,grupocod:null}},computed:{isLess:function(){return(0,O.isLess)()}},methods:{seleccionarSalon:function(){var o=this;return g()(h()().m(function e(){return h()().w(function(e){while(1)switch(e.n){case 0:return o.config[o.cbotiporep].cursos.model=null,o.config[o.cbotiporep].cursos.options=[],o.config[o.cbotiporep].periodos.model=null,o.config[o.cbotiporep].periodos.options=[],o.config[o.cbotiporep].competencias&&(o.config[o.cbotiporep].competencias.model=null,o.config[o.cbotiporep].competencias.options=[]),o.config[o.cbotiporep].actividades&&(o.config[o.cbotiporep].actividades.model=null,o.config[o.cbotiporep].actividades.options=[]),e.n=1,o.getCursos();case 1:return e.a(2)}},e)}))()},getCursos:function(){var o=this;return g()(h()().m(function e(){var i,t,n,c;return h()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,C.$http.post("api/HyoAsignaprs/getCursosPeriodos",{parametros:{limit:10,offset:0,nemo:o.config[o.cbotiporep].salones.model}});case 1:i=e.v,t=i.json,n=(0,D["default"])(t.cursos.k,t.cursos.v),c=(0,D["default"])(t.periodos.k,t.periodos.v),c=c.map(function(o){return o.BIMEDES=o.BIMECOD,o}),o.cursos=n,o.config[o.cbotiporep].cursos.options=n.map(function(o){var e=o.CURSOCOD,i=o.CURSONOM;return{value:e,label:i}}),o.config[o.cbotiporep].periodos.options=c.map(function(o){var e=o.BIMECOD,i=o.BIMEDES;return{value:e,label:i}});case 2:return e.a(2)}},e)}))()},cambiarCurso:function(){var o=this.config[this.cbotiporep].cursos.model,e=this.cursos.filter(function(e){return e.CURSOCOD===o}),i=f()(e,1),t=i[0];this.grupocod=t.GRUPOCOD},cambiarPeriodo:function(){var o=this;return g()(h()().m(function e(){return h()().w(function(e){while(1)switch(e.n){case 0:if(!o.config[o.cbotiporep].actividades){e.n=1;break}return e.n=1,o.getContenidos();case 1:if(!o.config[o.cbotiporep].competencias){e.n=2;break}return e.n=2,o.getCompetencias();case 2:if(!o.config[o.cbotiporep].estudiantes){e.n=3;break}return e.n=3,o.getEstudiantes();case 3:return e.a(2)}},e)}))()},getCompetencias:function(){var o=this;return g()(h()().m(function e(){var i,t;return h()().w(function(e){while(1)switch(e.n){case 0:return i={cursocod:o.config[o.cbotiporep].cursos.model,nemo:o.config[o.cbotiporep].salones.model,periodo:o.config[o.cbotiporep].periodos.model},e.n=1,C.$http.get("api/evaluacion/getCompetencias",{params:{params:i}});case 1:t=e.v,o.competencias=t,t[0]&&t[0].REGANT&&(o.regant=1),o.config[o.cbotiporep].competencias.options=t.map(function(o){var e=o.COMPETENCIA,i=o.DESCRIPCION;return{label:i,value:e}});case 2:return e.a(2)}},e)}))()},getContenidos:function(){var o=this;return g()(h()().m(function e(){var i,t,n,c;return h()().w(function(e){while(1)switch(e.n){case 0:return i={nemo:o.config[o.cbotiporep].salones.model,cursocod:o.config[o.cbotiporep].cursos.model,grupocod:o.grupocod,bimecod:o.config[o.cbotiporep].periodos.model,todos:1},e.n=1,C.$http.post("api/HyoContenido/getContenidos",{params:i});case 1:t=e.v,n=t.json,c=(0,D["default"])(n.k,n.v),o.contenidos=c,o.config[o.cbotiporep].actividades.options=c.filter(function(o){return 1===o.TIPO}).map(function(o){var e=o.TITLE,i=o.ID;return{label:e,value:i}});case 2:return e.a(2)}},e)}))()},getEstudiantes:function(){var o=this;return g()(h()().m(function e(){var i,t;return h()().w(function(e){while(1)switch(e.n){case 0:return i={clase:!0,nemo:o.config[o.cbotiporep].salones.model,cursocod:o.config[o.cbotiporep].cursos.model,grupocod:o.grupocod,periodo:o.config[o.cbotiporep].periodos.model},e.n=1,C.$http.get("api/ClaseAlumnoController/getClaseAlumno",{params:{parametros:i}});case 1:t=e.v,o.config[o.cbotiporep].estudiantes.options=t.map(function(o){var e=o.ALUCOD,i=o.NOMCOMP;return{label:i,value:e}});case 2:return e.a(2)}},e)}))()},init:function(){var o=this;return g()(h()().m(function e(){var i,t,n,c;return h()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,C.$http.get("api/HyoPerfiles/obtPerfilesExistentes");case 1:return i=e.v,t=i.json,t.unshift({TIPCOD:"%",TIPNOM:"Todos"}),o.perfiles=t.map(function(o){return{label:o.TIPNOM,value:o.TIPCOD}}),e.n=2,C.$http.get("api/HyoSalones/cboListaNemodes");case 2:n=e.v,c=n.cboNemodes,c.unshift({NEMO:"%",NEMODES:"Todos"}),o.salones=c.map(function(o){return{label:o.NEMODES,value:o.NEMO}}),o.changeFiltros();case 3:return e.a(2)}},e)}))()},changeFiltros:function(){this.config[this.cbotiporep].salones.options=this.salones},imprimir:function(o){var e=this;if("IE004"===this.cbotiporep){if(!this.config[this.cbotiporep].competencias.model)return this.$notify("Seleccione una competencia","warning"),!1;var i=this.config[this.cbotiporep].competencias.model,t={repcod:this.cbotiporep,formato:o,competencia:i,usucod:this.sie.usucod};if(this.regant){var n=this.competencias.filter(function(o){return Number(o.COMPETENCIA)===Number(e.config[e.cbotiporep].competencias.model)});t.cursocod=this.config[this.cbotiporep].cursos.model,t.grupocod=this.grupocod,t.bimecod=this.config[this.cbotiporep].periodos.model,t.nemo=this.config[this.cbotiporep].salones.model,n&&n[0]&&(t.children=n[0])}(0,k.exportFilePhp)(t,"webservice/reportes/reporte")}else if("IE003"===this.cbotiporep){if(!this.config[this.cbotiporep].actividades.model)return this.$notify("Seleccione un contenido","warning"),!1;var c=this.contenidos.filter(function(o){return Number(o.ID)===Number(e.config[e.cbotiporep].actividades.model)}),s={repcod:this.cbotiporep,formato:o,id_contenido:this.config[this.cbotiporep].actividades.model,usucod:this.sie.usucod,instrumento:c[0].CALIFICACION};(0,k.exportFilePhp)(s,"webservice/reportes/reporte")}else{var r={repcod:this.cbotiporep,formato:o};if(this.config[this.cbotiporep].cursos&&this.config[this.cbotiporep].cursos.model&&(r.cursocod=this.config[this.cbotiporep].cursos.model),this.config[this.cbotiporep].periodos&&this.config[this.cbotiporep].periodos.model&&(r.bimecod=this.config[this.cbotiporep].periodos.model),this.config[this.cbotiporep].salones&&this.config[this.cbotiporep].salones.model&&(r.nemo=this.config[this.cbotiporep].salones.model),this.config[this.cbotiporep].estudiantes&&this.config[this.cbotiporep].estudiantes.model&&(r.alucod=this.config[this.cbotiporep].estudiantes.model),this.config[this.cbotiporep].inicio_fin){if(this.config[this.cbotiporep].inicio_fin.fechas.de.model&&!this.config[this.cbotiporep].inicio_fin.fechas.hasta.model)return void this.$notify("Debe selecciona hasta que fecha desea la información","warning");if(!this.config[this.cbotiporep].inicio_fin.fechas.de.model&&this.config[this.cbotiporep].inicio_fin.fechas.hasta.model)return void this.$notify("Debe selecciona desde que fecha desea la información","warning");if(this.config[this.cbotiporep].inicio_fin.fechas.de.model>this.config[this.cbotiporep].inicio_fin.fechas.hasta.model)return void this.$notify("No puede hacer esta combinación de rango de fechas.","warning");this.config[this.cbotiporep].inicio_fin.fechas.de.model&&(r.de=P["default"].formatDate(this.config[this.cbotiporep].inicio_fin.fechas.de.model,"DD.MM.YYYY")),this.config[this.cbotiporep].inicio_fin.fechas.hasta.model&&(r.hasta=P["default"].formatDate(this.config[this.cbotiporep].inicio_fin.fechas.hasta.model,"DD.MM.YYYY"))}(0,k.exportFilePhp)(r,"webservice/reportes/reporte")}}},created:function(){var o=this;return g()(h()().m(function e(){return h()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.init();case 1:return e.a(2)}},e)}))()}},M=i(12807);const _=(0,M.A)(A,[["render",p]]);var S=_}}]);