"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[21682],{21682:function(e,a,n){n.r(a),n.d(a,{default:function(){return Ha}});var t=n(61758),o=n(58790),l={class:"row col"};function i(e,a){var n=(0,t.g2)("q-select1"),i=(0,t.g2)("q-icon"),s=(0,t.g2)("q-item-section"),r=(0,t.g2)("q-item"),c=(0,t.g2)("q-list"),u=(0,t.g2)("q-tab-panel"),d=(0,t.g2)("q-tab-panels"),f=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(f,{class:"asistenciaAlumnosConfig"},{default:(0,t.k6)(function(){return[e.isLess?((0,t.uX)(),(0,t.Wv)(n,{key:0,class:"q-card q-ma-sm",options:e.tabs,"option-label":"label",modelValue:e.tabSelect,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tabSelect=a}),"option-value":"id","emit-value":"",label:"Configurador"},null,8,["options","modelValue"])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",l,[e.isLess?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(c,{key:0,class:"q-card q-my-sm q-mr-xs rounded-borders",dense:"",bordered:"",padding:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tabs,function(a){return(0,t.uX)(),(0,t.Wv)(r,{clickable:"",class:(0,o.C4)({"custom-selected":a.id===e.tabSelect}),onClick:function(n){return e.tabSelect=a.id}},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.bF)(i,{name:a.icono,size:"20px"},null,8,["name"])]}),_:2},1024),(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("label",null,(0,o.v_)(a.label),1)]}),_:2},1024)]}),_:2},1032,["class","onClick"])}),256)),(0,t.Q3)('template( v-slot:option="scope")q-item(v-bind="scope.itemProps" v-on="scope.itemEvents")\n    q-item-section(avatar)\n        q-icon(:name="scope.opt.icono")\n    q-item-section\n        q-item-label( v-html="scope.opt.label")\n')]}),_:1})),(0,t.bF)(d,{class:"col q-card q-my-sm",modelValue:e.tabSelect,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.tabSelect=a}),animated:"",swipeable:!1,vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tabs,function(a){return(0,t.uX)(),(0,t.Wv)(u,{name:a.id},{default:(0,t.k6)(function(){return[((0,t.uX)(),(0,t.Wv)((0,t.$y)(a.id),{niveles:e.niveles,nivelesAd:e.nivelesAd,sie:e.sie,grados:e.grados},null,8,["niveles","nivelesAd","sie","grados"]))]}),_:2},1032,["name"])}),256))]}),_:1},8,["modelValue"]),(0,t.Q3)('q-tabs.q-card(v-model="tabSelect"\nvertical\nclass="text-teal")\ntemplate(v-for="indiceTab in tabs")\n    q-tab(:name="indiceTab.id"\n            :label="isLess?null:indiceTab.label"\n            :icon="indiceTab.icono")\n        q-tooltip(v-if="!isLess")\n            span {{indiceTab.label}}'),(0,t.Q3)('q-tab-panels.col(    v-model="tabSelect"\n    animated\n    swipeable\n    vertical\n    transition-prev="jump-up"\n    transition-next="jump-up"\n    )\ntemplate(v-for="indiceTab in tabs")\n    q-tab-panel(:name="indiceTab.id")\n        component(:is="indiceTab.id" :niveles="niveles" :nivelesAd="nivelesAd" :sie="sie" :grados="grados")\n\n\n')]),(0,t.Q3)('q-tabs.q-card.q-ma-sm.col.q-tabs-flex(inverted vertical v-model="tabSelect")//template(v-for="indiceTab in tabs")\n    q-tab(slot="title"\n            :name="indiceTab.id"\n            :label="indiceTab.label"\n            :default="indiceTab.id === \'calendario\'"\n            :icon="indiceTab.icono"\n            )\n    q-tab-pane.q-card(:name="indiceTab.id")\n        component(:is="indiceTab.id" :niveles="niveles" :nivelesAd="nivelesAd" :sie="sie" :grados="grados")')]}),_:1})}var s=n(76080),r=n.n(s),c=n(45254),u=n.n(c),d=(n(10239),n(50310),n(90095),n(83190),n(13715),n(6123)),f=n(80660),m=n(57668),p=n(80340),h=n(8445),b=n.n(h),E=(n(56285),{class:"col"}),g={class:"row"},D={class:"col-12 col-md-6 q-mr-xs"},I={key:0},S={class:"col q-ml-xs"},v={class:"text-bold"},A={key:0},C={key:0,class:"row q-mt-sm"},O={class:"col"},N={class:"col-11 text-bold"},T={class:"col-1"},k={class:"q-ma-sm"},F={class:"col q-ma-sm"},R={class:"col row"},M={class:"col row"},_={key:0,class:"col row"},w={class:"col-xs-5"},P={class:"col q-ma-sm"},y={class:"col row"},L={class:"col-xs-12"},q={class:"col-xs-12"},V={class:"col-xs-12"};function U(e,a){var n=(0,t.g2)("q-th"),l=(0,t.g2)("q-tr"),i=(0,t.g2)("q-td"),s=(0,t.g2)("q-tooltip"),r=(0,t.g2)("q-btn"),c=(0,t.g2)("q-table"),u=(0,t.g2)("q-page-sticky"),d=(0,t.g2)("q-option-group"),f=(0,t.g2)("sie-modal"),m=(0,t.g2)("sie-select"),p=(0,t.g2)("q-datetime"),h=(0,t.g2)("q-input");return(0,t.uX)(),(0,t.CE)("div",E,[(0,t.Lk)("div",g,[(0,t.Lk)("div",D,[(0,t.bF)(c,{"table-style":"max-height: 70vh; min-height: 40vh",data:e.cabeceras,columns:e.tablaCabeceras.columns,pagination:e.tablaCabeceras.paginacion,"onUpdate:pagination":a[0]||(a[0]=function(a){return e.tablaCabeceras.paginacion=a}),"hide-bottom":""},{top:(0,t.k6)(function(){return b()(a[19]||(a[19]=[(0,t.Lk)("div",{class:"text-bold"},"Niveles",-1)]))}),header:(0,t.k6)(function(e){return[(0,t.bF)(l,null,{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.cols,function(a){return(0,t.uX)(),(0,t.Wv)(n,{key:a.name,props:e},{default:(0,t.k6)(function(){return[(0,t.Lk)("span",null,(0,o.v_)(a.label),1)]}),_:2},1032,["props"])}),128)),(0,t.bF)(n)]}),_:2},1024)]}),body:(0,t.k6)(function(n){return[(0,t.bF)(l,{props:n,onClick:function(a){return e.seleccionaTipo(n.row)}},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.cols,function(e){return(0,t.uX)(),(0,t.Wv)(i,{key:e.name,props:n},{default:(0,t.k6)(function(){return[e.icono?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("span",I,(0,o.v_)(n.row[e.name]),1))]}),_:2},1032,["props"])}),128)),(0,t.bF)(i,{class:"text-right"},{default:(0,t.k6)(function(){return["T"===n.row.GRADOCOD?((0,t.uX)(),(0,t.Wv)(r,{key:0,flat:"",round:"",size:"sm",icon:"file_document_box",onClick:function(a){return e.abrirModalSeparar(n.row)}},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return b()(a[20]||(a[20]=[(0,t.eW)("Separar calendario",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["props","onClick"])]}),_:1},8,["data","columns","pagination"])]),(0,t.Lk)("div",S,[(0,t.bF)(c,{"table-style":"max-height: 70vh; min-height: 40vh",data:e.fechas[e.cabeceraIndice],columns:e.tablaFechas.columns,pagination:e.tablaFechas.paginacion,"onUpdate:pagination":a[1]||(a[1]=function(a){return e.tablaFechas.paginacion=a}),"hide-bottom":""},{top:(0,t.k6)(function(){return[(0,t.Lk)("div",v,(0,o.v_)(e.cabeceraSelect),1)]}),header:(0,t.k6)(function(e){return[(0,t.bF)(l,null,{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.cols,function(a){return(0,t.uX)(),(0,t.Wv)(n,{key:a.name,props:e},{default:(0,t.k6)(function(){return[(0,t.Lk)("span",null,(0,o.v_)(a.label),1)]}),_:2},1032,["props"])}),128)),(0,t.bF)(n)]}),_:2},1024)]}),body:(0,t.k6)(function(a){return[(0,t.bF)(l,{props:a},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.cols,function(e){return(0,t.uX)(),(0,t.Wv)(i,{key:e.name,props:a},{default:(0,t.k6)(function(){return[e.icono?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("span",A,(0,o.v_)(a.row[e.name]),1))]}),_:2},1032,["props"])}),128)),(0,t.bF)(i,{class:"text-right"},{default:(0,t.k6)(function(){return[e.btnSemana?((0,t.uX)(),(0,t.Wv)(r,{key:0,flat:"",round:"",icon:"calendar",size:"sm",onClick:function(n){return e.verSemanas(a.row)}},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.verSemanas")),1)]}),_:1})]}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0),(0,t.bF)(r,{flat:"",round:"",icon:"edit",size:"sm",onClick:function(n){return e.modalFecha(a.row)}},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.editar")),1)]}),_:1})]}),_:1},8,["onClick"]),(0,t.bF)(r,{flat:"",round:"",icon:"delete",size:"sm",onClick:function(n){return e.eliminarFecha(a.row)}},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1},8,["onClick"])]}),_:2},1024)]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])])]),e.mostrarSemanas?((0,t.uX)(),(0,t.CE)("div",C,[(0,t.Lk)("div",O,[(0,t.bF)(c,{"table-style":"max-height: 70vh; min-height: 40vh",data:e.tablaSemanas.data,columns:e.tablaSemanas.columns,selection:e.tablaSemanas.selection,selected:e.tablaSemanas.selected,"onUpdate:selected":a[2]||(a[2]=function(a){return e.tablaSemanas.selected=a}),pagination:e.tablaSemanas.pagination,"onUpdate:pagination":a[3]||(a[3]=function(a){return e.tablaSemanas.pagination=a}),"row-key":"NRO_SEMANA","hide-bottom":""},{top:(0,t.k6)(function(){return[(0,t.Lk)("div",N,(0,o.v_)(e.textoSemanas),1),(0,t.Lk)("div",T,[e.mostrarSemanas?((0,t.uX)(),(0,t.Wv)(r,{key:0,class:"text-right",flat:"",round:"",icon:"plus",onClick:e.openEditarSemana},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.agregar")),1)]}),_:1})]}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0),e.tablaSemanas.selected.length>0?((0,t.uX)(),(0,t.Wv)(r,{key:1,class:"text-right",flat:"",round:"",icon:"delete",onClick:e.eliminarMultiplesSemanas},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0)])]}),"body-cell-ACCION":(0,t.k6)(function(a){return[(0,t.bF)(i,{class:"text-right",props:a},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{flat:"",round:"",icon:"edit",size:"sm",onClick:function(n){return e.openEditarSemana(a.row)}},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.editar")),1)]}),_:1})]}),_:1},8,["onClick"]),(0,t.bF)(r,{flat:"",round:"",icon:"delete",size:"sm",onClick:function(n){return e.eliminarSemana(a.row,a.row.__index)}},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","selection","selected","pagination"])])])):(0,t.Q3)("v-if",!0),e.bloqueaFechas?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(u,{key:1,position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{round:"",fab:"",color:"secondary",icon:"add",onClick:e.modalFecha},{default:(0,t.k6)(function(){return[(0,t.bF)(s,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,o.v_)(e.$t("botones.agregar")),1)]}),_:1})]}),_:1},8,["onClick"])]}),_:1})),(0,t.bF)(f,{modelValue:e.modalSeparar,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.modalSeparar=a}),title:"Separar Calendario",header:!0,onSubmit:e.grabarSeparacion},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",k,[a[21]||(a[21]=(0,t.Lk)("b",null,"Seleccione los niveles en los que desea replicar este calendario",-1)),(0,t.bF)(d,{type:"checkbox",color:"secondary",modelValue:e.periodoSelect,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.periodoSelect=a}),options:e.dataSeparar},null,8,["modelValue","options"])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(f,{modelValue:e.modalEditar,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.modalEditar=a}),title:e.tituloEditar,header:!0,onSubmit:a[13]||(a[13]=function(a){return e.insertarValor(e.dataModal)})},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",F,[(0,t.Lk)("div",R,[(0,t.bF)(m,{class:"col",type:"outlined",noBottom:"",modelValue:e.dataModal.INSTRUCOD,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.dataModal.INSTRUCOD=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:e.$t("ngs.nivel"),disable:e.editar||"T"===e.valInstrucod},null,8,["modelValue","options","placeholder","disable"]),(0,t.bF)(m,{class:"col",type:"outlined",noBottom:"",modelValue:e.dataModal.GRADOCOD,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.dataModal.GRADOCOD=a}),options:e.grados[e.dataModal.INSTRUCOD],label:"GRADODES",val:"GRADOCOD",placeholder:e.$t("ngs.grado"),disable:e.editar||"T"===e.valInstrucod},null,8,["modelValue","options","placeholder","disable"])]),(0,t.bF)(m,{class:"col",type:"outlined",noBottom:"",modelValue:e.dataModal.BIMECOD,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.dataModal.BIMECOD=a}),options:e.periodos,label:"PERIDES",val:"PERICOD",placeholder:e.$t("periodo"),disable:e.editar},null,8,["modelValue","options","placeholder","disable"]),(0,t.Lk)("div",M,[(0,t.bF)(p,{class:"col q-if-outlined",modelValue:e.dataModal.FECINI,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.dataModal.FECINI=a}),type:"date","stack-label":e.$t("fechainicio"),format:"DD/MM/YYYY"},null,8,["modelValue","stack-label"]),(0,t.bF)(p,{class:"col q-if-outlined",modelValue:e.dataModal.FECFIN,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.dataModal.FECFIN=a}),type:"date","stack-label":e.$t("fechafin"),format:"DD/MM/YYYY"},null,8,["modelValue","stack-label"])]),e.isNroClases?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("div",w,[(0,t.bF)(h,{class:"col q-if-outlined",modelValue:e.dataModal.NROCLASES,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.dataModal.NROCLASES=a}),"float-label":"Nro. días de clase"},null,8,["modelValue"])])])):(0,t.Q3)("v-if",!0)])]}),_:1},8,["modelValue","title"]),(0,t.bF)(f,{modelValue:e.modalEditarSemana,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.modalEditarSemana=a}),title:e.tituloEditar,header:!0,onSubmit:a[18]||(a[18]=function(a){return e.addEditSemana(e.dataSemana)})},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",P,[(0,t.Lk)("div",y,[(0,t.Lk)("div",L,[(0,t.bF)(h,{class:"q-if-outlined",modelValue:e.dataSemana.NRO_SEMANA,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.dataSemana.NRO_SEMANA=a}),"float-label":e.$t("asistenciaAlumnosConfig.semana")},null,8,["modelValue","float-label"])]),(0,t.Lk)("div",q,[(0,t.bF)(p,{class:"col q-if-outlined",modelValue:e.dataSemana.FECINI,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.dataSemana.FECINI=a}),type:"date","stack-label":e.$t("fechainicio"),format:"DD/MM/YYYY"},null,8,["modelValue","stack-label"])]),(0,t.Lk)("div",V,[(0,t.bF)(p,{class:"col q-if-outlined",modelValue:e.dataSemana.FECFIN,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.dataSemana.FECFIN=a}),type:"date","stack-label":e.$t("fechafin"),format:"DD/MM/YYYY"},null,8,["modelValue","stack-label"])])])])]}),_:1},8,["modelValue","title"])])}n(71225),n(25751),n(89571),n(5962),n(48426),n(515),n(44264);var $=n(93616),x=n(30640),Q=n(18105),j=n(982),H=n(69027),X=n(78786),Y=function(e){return(0,Q.Ay)(e,"DD/MM/YYYY")},W={props:["niveles","nivelesAd"],components:{QBtn:d.Il,QIcon:d.bP,QTable:d.kH,QTh:d.EJ,QTr:d.qh,QTd:d.Ef,QTableColumns:d.$s,QPageSticky:d._U,sieModal:x.A,QDatetime:d.T5,sieSelect:$.A,QCheckbox:d.vZ,QOptionGroup:d.EX,QField:d.Om,date:d.p6,QTooltip:d.nC,QInput:d.ie},data:function(){return{fechas:{},cabeceras:[],modalEditar:!1,isNroClases:!1,cabeceraSelect:null,cabeceraIndice:null,grados:{},tituloEditar:"fecha",editar:!1,bloqueaFechas:!1,dataModal:{},periodos:[],modalSeparar:!1,dataSeparar:[],periodoSelect:[],tablaCabeceras:{columns:[{name:"INSTRUDES",field:"INSTRUDES",align:"left",label:this.$t("ngs.nivel")},{name:"GRADODES",field:"GRADODES",align:"left",label:this.$t("ngs.grado")}],paginacion:{page:1,rowsPerPage:20},registrosSeleccionados:[]},tablaFechas:{columns:[{name:"BIMECOD",field:"BIMECOD",align:"center",label:this.$t("periodo")},{name:"FECINIF",field:"FECINIF",align:"left",label:this.$t("fechainicio")},{name:"FECFINF",field:"FECFINF",align:"left",label:this.$t("fechafin")}],paginacion:{page:1,rowsPerPage:20},registrosSeleccionados:[]},tablaSemanas:{data:[],columns:[{name:"NRO_SEMANA",label:this.$t("asistenciaAlumnosConfig.semana"),field:"NRO_SEMANA",align:"left",sortable:!0},{name:"FECINI",label:this.$t("fechainicio"),field:"FECINI",align:"left",format:Y,sortable:!0},{name:"FECFIN",label:this.$t("fechafin"),field:"FECFIN",align:"left",format:Y,sortable:!0},{name:"ACCION",label:"",field:"ACCION",align:"center"}],selection:"multiple",selected:[],pagination:{page:1,rowsPerPage:null}},editaFechas:!0,valInstrucod:null,valGradocod:null,mostrarSemanas:!1,currentPercales:0,semanas:[],dataSemana:{},modalEditarSemana:!1,numerosSemanas:[],textoSemanas:"Semanas",editSemana:!0,btnSemana:!1}},methods:{validaInsercion:function(e){var a=this;e.cabecera.forEach(function(e){"T"===e.INSTRUCOD&&(a.valInstrucod="T",a.valGradocod="T")}),this.fechas=e.fechas,this.cabeceras=e.cabecera,this.bloqueaFechas=e.bloqModal,this.btnSemana=e.btnSemana,1===e.cabecera.length&&this.seleccionaTipo(e.cabecera[0])},obtDataCalendario:function(){var e=this;f.$http.get("api/HyoPercales/obtDataCalendario").then(function(a){var n=a.json;e.validaInsercion(n)})},seleccionaTipo:function(e){this.cabeceraSelect=null,this.cabeceraSelect="Nivel:  "+e.INSTRUDES+" Grado: "+e.GRADODES,this.cabeceraIndice=e.INSTRUCOD+e.GRADOCOD,this.valInstrucod=e.INSTRUCOD,this.valGradocod=e.GRADOCOD},modalFecha:function(e){this.editar=!1,this.dataModal={BIMECOD:null,FECFIN:null,FECINI:null,GRADOCOD:this.valGradocod,INSTRUCOD:this.valInstrucod},this.isNroClases&&(this.dataModal.NROCLASES=null),this.bloqueaFechas&&(e.FECINI||(this.editaFechas=!1)),this.modalEditar=!0;var a="Agregar ";e.FECINI&&(a="Editar ",this.dataModal=e,this.editar=!0),this.tituloEditar=a+"fecha"},insertarValor:function(e){var a=this;return u()(r()().m(function n(){var t,o,l,i,s;return r()().w(function(n){while(1)switch(n.n){case 0:if(e.ID){n.n=4;break}if(t=!0,o=Object.keys(a.fechas).filter(function(a){return a.charAt(0)===e.INSTRUCOD}),!(Array.isArray(o)&&o.length>0)){n.n=3;break}l=0;case 1:if(!(l<o.length)){n.n=3;break}if(o[l].charAt(1)!==e.GRADOCOD&&"T"!==e.GRADOCOD&&"T"!==o[l].charAt(1)){n.n=2;break}if(-1===(0,X["default"])(a.fechas["".concat(o[l])],e.BIMECOD,{key:"BIMECOD"})){n.n=2;break}return t=!1,n.a(3,3);case 2:l++,n.n=1;break;case 3:if("T"===e.INSTRUCOD&&Array.isArray(Object.keys(a.fechas))&&Object.keys(a.fechas).length>1&&(t=!1),t){n.n=4;break}return(0,j["default"])("No se puede agregar la fecha ingresada porque ya esta considerada en el calendario actual.","warning"),n.a(2);case 4:if(!(e.BIMECOD&&e.FECFIN&&e.FECINI&&e.GRADOCOD&&e.INSTRUCOD)){n.n=6;break}return n.n=5,f.$http.get("api/HyoPercales/insertarCalendario",{params:e});case 5:i=n.v,s=i.json,s.cabecera&&a.validaInsercion(s),s.tipo||(a.modalEditar=!1),(0,j["default"])(a.$t("mensajes."+s.msg),s.tipo);case 6:return n.a(2)}},n)}))()},eliminarFecha:function(e){var a=this;(0,H.dialogConfirm)({title:"Confirmar",message:this.$t("mensajes.m0006.confirmacion"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(n){n&&f.$http.get("api/HyoPercales/eliminarFecha",{params:e}).then(function(e){var n=e.json;n.tipo||a.obtDataCalendario(),(0,j["default"])(a.$t("mensajes.m0006."+n.msg),n.tipo)})})},abrirModalSeparar:function(e){var a=this;this.modalSeparar=!0,this.periodoSelect=[],this.dataSeparar=[],"T"===e.INSTRUCOD?this.dataSeparar=this.nivelesAd:this.grados[e.INSTRUCOD].forEach(function(e){"T"!==e.GRADOCOD&&a.dataSeparar.push({label:e.GRADODES,value:e.GRADOCOD})}),this.seleccionaTipo(e)},grabarSeparacion:function(){var e=this;return u()(r()().m(function a(){var n,t;return r()().w(function(a){while(1)switch(a.p=a.n){case 0:if(!(e.periodoSelect.length>0)){a.n=4;break}return a.p=1,a.n=2,f.$http.post("api/HyoPercales/separaCalendario",{datos:e.periodoSelect,INSTRUCOD:e.valInstrucod});case 2:n=a.v,t=n.json,"m0001"===t&&((0,j["default"])(e.$t("mensajes."+t)),e.obtDataCalendario(),e.modalSeparar=!1),a.n=4;break;case 3:a.p=3,a.v,(0,j["default"])("No se pudo realizar el proceso, revise si hay fechas particulaes.","warning");case 4:return a.a(2)}},a,null,[[1,3]])}))()},generarSemanas:function(){var e=new Date(this.currentPercales.FECINI),a=new Date(this.currentPercales.FECFIN),n=d.p6.getWeekOfYear(e),t=d.p6.getWeekOfYear(a),o=e,l=[],i=a,s=1;while(n<=t)1===s?i=this.diaFinalSemana(o):(o=d.p6.addToDate(o,{days:1}),i=this.diaFinalSemana(o),i>a&&(i=a)),l.push({NRO_SEMANA:s,FECINI:(0,Q.Ay)(o,"YYYY/MM/DD"),FECFIN:(0,Q.Ay)(i,"YYYY/MM/DD"),ID_PERCALES:this.currentPercales.ID}),o=i,n++,s++;return l},diaFinalSemana:function(e){var a=d.p6.getDayOfWeek(e),n=7-a;return d.p6.addToDate(e,{days:n})},verSemanas:function(e){var a=this;this.currentPercales=e,this.mostrarSemanas=!1,this.textoSemanas=this.$t("asistenciaAlumnosConfig.semanaPeriodo")+" "+this.currentPercales.BIMECOD,f.$http.get("api/HyoPercales/obtDataSemanas",{params:{percales:this.currentPercales.ID}}).then(function(e){return a.tablaSemanas.data=e,a.tablaSemanas.selected=[],e.length>0?(a.mostrarSemanas=!0,!0):(0,H.dialogConfirm)({title:a.$t("mensajes.m0108"),message:a.$t("mensajes.m0109"),cancel:a.$t("botones.no"),ok:a.$t("botones.si")}).then(function(e){if(e)return a.insertarSemanas(a.generarSemanas());a.mostrarSemanas=!0})}).catch(function(e){console.log(e)})},openEditarSemana:function(e){Object.prototype.hasOwnProperty.call(e,"ID_SEMANA")?(this.tituloEditar=this.$t("asistenciaAlumnosConfig.editarSemana")+" "+e.NRO_SEMANA,this.dataSemana=Object.assign({},e)):Object.prototype.hasOwnProperty.call(this.currentPercales,"ID")&&(this.tituloEditar=this.$t("asistenciaAlumnosConfig.agregarSemana"),this.dataSemana={FECFIN:"",FECINI:"",ID_PERCALES:this.currentPercales.ID,ID_SEMANA:"",NRO_SEMANA:""}),this.modalEditarSemana=!0},insertarSemanas:function(e){var a=this;return 0!==e.length&&f.$http.post("api/HyoPercales/insertarSemanas",{params:e}).then(function(e){var n=e.json;return a.procesoAddEdit(n)}).catch(function(e){(0,j["default"])(a.$t(e.error.message),"warning")})},procesoAddEdit:function(e){return 1===e.estado&&(this.tablaSemanas.data=e.semanas,this.tablaSemanas.selected=[],this.modalEditarSemana=!1,this.mostrarSemanas=!0),(0,j["default"])(this.$t("mensajes."+e.message),e.type),!0},addEditSemana:function(e){var a=this;if(!e.NRO_SEMANA||!e.FECINI||!e.FECFIN||!e.ID_PERCALES)return!1;if(!this.validarSemana(e))return!1;var n=new Date((0,Q.Ay)(e.FECINI,"YYYY/MM/DD"))<new Date((0,Q.Ay)(this.currentPercales.FECINI,"YYYY/MM/DD")),t=new Date((0,Q.Ay)(e.FECFIN,"YYYY/MM/DD"))>new Date((0,Q.Ay)(this.currentPercales.FECFIN,"YYYY/MM/DD"));if(n||t){var o=(0,Q.Ay)(this.currentPercales.FECINI,"DD/MM/YYYY")+" - "+(0,Q.Ay)(this.currentPercales.FECFIN,"DD/MM/YYYY");return(0,j["default"])(this.$t("mensajes.m0110")+" ("+o+")","warning"),!1}f.$http.post("api/HyoPercales/addEditSemana",e).then(function(e){var n=e.json;a.procesoAddEdit(n)}).catch(function(e){(0,j["default"])(a.$t(e.error.message),"warning")})},validarSemana:function(e){var a=Object.prototype.hasOwnProperty.call(e,"ID_SEMANA")?parseInt(e.ID_SEMANA):0,n=parseInt(e.NRO_SEMANA),t=!0;return this.tablaSemanas.data.forEach(function(e){if(e.NRO_SEMANA===n&&e.ID_SEMANA!==a)return(0,j["default"])("La semana "+n+" ya esta registrada","warning"),t=!1,t}),t},eliminarSemana:function(e,a){var n=this;Object.prototype.hasOwnProperty.call(e,"ID_SEMANA")&&Object.prototype.hasOwnProperty.call(e,"ID_PERCALES")&&(0,H.dialogConfirm)({title:"Confirmar",message:this.$t("mensajes.m0006.confirmacion"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(t){t&&f.$http.post("api/HyoPercales/eliminarSemana",{id_semana:e.ID_SEMANA,id:e.ID_PERCALES}).then(function(e){var t=e.json;1===t.estado?(n.tablaSemanas.data.splice(a,1),(0,j["default"])(n.$t("mensajes.m0006.ok"),"success")):(0,j["default"])(n.$t("mensajes.m0006.mal"),"success")}).catch(function(e){(0,j["default"])(n.$t(e.error.message),"warning")})})},eliminarMultiplesSemanas:function(){var e=this,a=[],n=[];this.tablaSemanas.selected.forEach(function(e){a.push(e["ID_SEMANA"]),n.push(e["__index"])}),n.sort(function(e,a){return a-e}),(0,H.dialogConfirm)({title:"Confirmar",message:this.$t("mensajes.m0006.confirmacion"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(t){t&&f.$http.post("api/HyoPercales/eliminarSemanas",{semanas:a}).then(function(a){var t=a.json;1===t.estado?(n.forEach(function(a){e.tablaSemanas.data.splice(a,1)}),e.tablaSemanas.selected=[],(0,j["default"])(e.$t("mensajes.m0006.ok"),"success")):(0,j["default"])(e.$t("mensajes.m0006.mal"),"success")}).catch(function(a){(0,j["default"])(e.$t(a.error.message),"warning")})})}},mounted:function(){var e=this;this.obtDataCalendario(),f.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:"S",todos:"T"}}).then(function(a){var n=a.json;e.grados=n}),f.$http.get("api/HyoPrograma/obtProgDiaClase",{params:{}}).then(function(a){var n=a.json;e.isNroClases=n.length>0});for(var a=1;a<=4;a++)this.periodos.push({PERICOD:a.toString(),PERIDES:a+" Periodo"})}},G=n(12807);const B=(0,G.A)(W,[["render",U]]);var z=B,J={class:"column"},K={class:"q-table"},Z={class:"q-tr"},ee={class:"q-td"},ae={class:"q-ma-sm"},ne={class:"row q-col-gutter-sm"};function te(e,a){var n=this,l=(0,t.g2)("header-btn"),i=(0,t.g2)("sie-modal"),s=(0,t.g2)("q-select"),r=(0,t.g2)("q-input"),c=(0,t.g2)("sie-table");return(0,t.uX)(),(0,t.CE)("div",J,[(0,t.bF)(l,{buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(i,{modelValue:e.modalSalones,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.modalSalones=a}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("table",K,[a[4]||(a[4]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",{class:"q-tr"},[(0,t.Lk)("th",null,"Salon")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.infoSalones,function(e){return(0,t.uX)(),(0,t.CE)("tr",Z,[(0,t.Lk)("td",ee,(0,o.v_)(e.NEMODES),1)])}),256))])])]}),_:1},8,["modelValue"]),(0,t.bF)(i,{modelValue:e.modalAgregar,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.modalAgregar=a}),onSubmit:e.saveHorario},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",ae,[(0,t.Lk)("div",ne,[(0,t.bF)(s,{class:"col",modelValue:e.infoModal.head.ID_TURNO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.infoModal.head.ID_TURNO=a}),label:"Turno","option-value":"ID","option-label":"DESCRIPCION",options:e.dataTurnos,disable:e.idSelect,onInput:e.seleccionarTurno,"emit-value":""},null,8,["modelValue","options","disable","onInput"]),(0,t.bF)(r,{class:"col",modelValue:e.infoModal.head.HORA_TARDANZA,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.infoModal.head.HORA_TARDANZA=a}),type:"time",label:"Hora"},null,8,["modelValue"])]),(0,t.bF)(c,{ref:"tablaSalones",context:n,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"width: 100%; height: calc(100vh - 335px);padding-top: 0",columns:e.columnsModal,data:e.infoModal.body,"load-selection":e.itemSelect,selection:"multiple"},null,8,["columns","data","load-selection"])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(c,{context:this,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"width: 100%; height: calc(100vh - 235px);padding-top: 0",columns:e.columns,data:e.infoTurnos,config:e.config},null,8,["columns","data","config"])])}var oe=n(57008),le=n.n(oe),ie=(n(30683),n(23825),n(24066),n(16648)),se=n(9736),re=n(30545),ce=n(33777),ue={components:{QDatetime:d.T5,QTable:re.A,QTd:d.Ef,QChip:d.wQ,sieModal:x.A,SieTable:ce.A,QSelect:ie.A,QInput:se.A},data:function(){return{horarios:[],alto:"",infoTurnos:[],filter:"",filterModal:"",modalAgregar:!1,idSelect:null,infoModal:{head:{HORA_TARDANZA:new Date,ID_TURNO:1}},marcados:[],seleccionadosBase:[],modalSalones:!1,infoSalones:[],dataTurnos:[],activarTurnos:!1,turnoSelect:1,itemSelect:{key:"NEMO",values:[]},columnsModal:[{name:"NEMODES",label:"Salón",field:"NEMODES",align:"left",sortable:!0}],config:{},columns:[]}},methods:{init:function(){var e=this;return u()(r()().m(function a(){return r()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,f.$http.get("api/HyoAsistenciahorarios/obtHorarios");case 1:e.infoTurnos=a.v;case 2:return a.a(2)}},a)}))()},preOpenModalAdd:function(){this.openModalAdd({})},handleResize:function(){this.alto=window.innerHeight-305},borrarFecha:function(e){var a=this,n=e.ID,t=e.ID_TURNO;(0,H.dialogDelete)().then(function(e){e&&f.$http.post("api/HyoAsistenciahorarios/deleteTurno",{ID:n,ID_TURNO:t}).then(function(e){a.init()})})},saveHorario:function(){var e=this;return u()(r()().m(function a(){var n,t,o;return r()().w(function(a){while(1)switch(a.n){case 0:e.marcados=e.$refs.tablaSalones.rowsSelected(),n=[],t=[],o=[],e.marcados.forEach(function(e){var a=e.NEMO,o=e.ID;o?n.push(o):(t.push(a),n.push(a))}),e.infoModal.body.forEach(function(e){e.ID&&n.indexOf(e.ID)<0&&o.push(e.ID)}),t.length>0||o.length>0||e.infoModal.head.HORA_TARDANZA!==e.infoModal.head.HORA_TARDANZA_BASE?n.length>0?f.$http.post("api/HyoAsistenciahorarios/saveHorario",le()(le()({},e.infoModal.head),{added:t,deleted:o})).then(function(a){"m0001"===a&&(e.init(),e.modalAgregar=!1)}):console.log("no hay nada marcado"):console.log("sin cambios");case 1:return a.a(2)}},a)}))()},seleccionarTurno:function(e){var a=this;return u()(r()().m(function e(){return r()().w(function(e){while(1)switch(e.n){case 0:return a.itemSelect.values=[],e.n=1,f.$http.get("api/HyoAsistenciahorarios/getDetalle",{params:{ID:a.idSelect,ID_TURNO:a.infoModal.head.ID_TURNO}});case 1:a.infoModal=e.v,a.infoModal.head.ID_TURNO=parseInt(a.infoModal.head.ID_TURNO),a.infoModal.body.forEach(function(e){e.ID&&a.itemSelect.values.push(e.NEMO)});case 2:return e.a(2)}},e)}))()},openModalAdd:function(e){var a=this;return u()(r()().m(function n(){var t,o;return r()().w(function(n){while(1)switch(n.n){case 0:t=e.ID,o=e.ID_TURNO,a.idSelect=t,t?(a.infoModal.head.ID_TURNO=o,a.seleccionarTurno()):(a.infoModal.head.ID_TURNO=1,a.infoModal.head.HORA_TARDANZA=(0,Q.Ay)(new Date,"HH:mm"),a.seleccionarTurno()),a.modalAgregar=!0;case 1:return n.a(2)}},n)}))()},openDetalleSalones:function(e){this.infoSalones=e,this.modalSalones=!0}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},computed:{buttons:function(){var e=[];return e.push({label:"Agregar",icon:"add",click:this.preOpenModalAdd}),e}},mounted:function(){var e=this;return u()(r()().m(function a(){var n,t;return r()().w(function(a){while(1)switch(a.n){case 0:return e.init(),window.addEventListener("resize",e.handleResize),e.handleResize(),a.n=1,f.$http.get("api/HyoAturno/obtTurnos");case 1:n=a.v,t=n.json,e.dataTurnos=t,e.activarTurnos=t.length>1,t.length>1&&(e.columns=[{name:"ID_TURNO",label:"Turno",field:"ID_TURNO",align:"center",sortable:!0}]),e.columns=[].concat(b()(e.columns),[{name:"HORA_TARDANZA",label:"Hora",field:"HORA_TARDANZA",align:"center",sortable:!0},{name:"SALONES",label:"Salón",field:"SALONES",align:"center",sortable:!0},{name:"EDIT",field:"EDIT",align:"center"}]),e.config={ID_TURNO:{component:"select",options:e.dataTurnos,optionValue:"ID",optionLabel:"DESCRIPCION",edit:!1},EDIT:{flat:!0,round:!0,component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e){this.openModalAdd(e)},eliminar:function(e){this.borrarFecha(e)}},HORA_TARDANZA:{renderHtml:function(e){return"<span>".concat((0,Q.Ay)(e.HORA_TARDANZA,"HH:mm A"),"</span>")}},SALONES:{renderHtml:function(e){return'<button class="q-btn bg-secondary text-white q-btn-dense">Ver Detalle de Salones</button>'},renderAction:function(e){this.openDetalleSalones(e.SALONES)}}};case 2:return a.a(2)}},a)}))()}};const de=(0,G.A)(ue,[["render",te]]);var fe=de,me={class:"column col"},pe={key:0,class:"col row"},he={key:1,class:"col row justify-end"},be={class:"q-table q-table-horizontal-separator q-card"},Ee={key:0},ge={key:0,style:{"text-align":"center"}},De={key:0,class:"row justify-center"},Ie={key:0},Se={key:1},ve={key:1,class:"row justify-end"};function Ae(e,a){var n=(0,t.g2)("q-input"),l=(0,t.g2)("q-select"),i=(0,t.g2)("q-btn"),s=(0,t.g2)("q-icon"),r=(0,t.g2)("draggable");return(0,t.uX)(),(0,t.CE)("div",me,[e.esEdit?((0,t.uX)(),(0,t.CE)("div",pe,[(0,t.bF)(n,{class:"col",modelValue:e.regSelect.DESCRIPCION,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.regSelect.DESCRIPCION=a}),tooltip:e.$t("matricula.descripcion")},null,8,["modelValue","tooltip"]),(0,t.bF)(l,{tooltip:"Tipo",modelValue:e.regSelect.MODO_TURNO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.regSelect.MODO_TURNO=a}),options:e.tTurnos},null,8,["modelValue","options"]),(0,t.bF)(i,{flat:"",round:"",icon:"close",onClick:e.cancelarEditar},null,8,["onClick"]),(0,t.bF)(i,{flat:"",round:"",icon:"save",onClick:e.agregarDato},null,8,["onClick"])])):((0,t.uX)(),(0,t.CE)("div",he,[(0,t.bF)(i,{flat:"",round:"",icon:"add",onClick:a[2]||(a[2]=function(a){return e.editarDatos({})})})])),(0,t.Lk)("table",be,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[e.permiso>2?((0,t.uX)(),(0,t.CE)("th",Ee,[(0,t.bF)(s,{name:"import_export",size:"20px"})])):(0,t.Q3)("v-if",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.columns,function(a,n){return(0,t.uX)(),(0,t.CE)("th",{key:n,class:"text-bold"},(0,o.v_)(e.$t(a.label)),1)}),128))])]),(0,t.bF)(r,{modelValue:e.dataTurnos,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.dataTurnos=a}),tag:"tbody",onChange:e.ordenarParametro},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.dataTurnos,function(a,n){return(0,t.uX)(),(0,t.CE)("tr",{key:a.ID},[e.permiso>2?((0,t.uX)(),(0,t.CE)("td",ge,[(0,t.bF)(s,{name:"blur_on",size:"20px"})])):(0,t.Q3)("v-if",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.columns,function(n,l){return(0,t.uX)(),(0,t.CE)("td",{key:l},["EDIT"!==n.name?((0,t.uX)(),(0,t.CE)("div",De,["DESCRIPCION"===n.name?((0,t.uX)(),(0,t.CE)("span",Ie,(0,o.v_)(a[n.field]),1)):(0,t.Q3)("v-if",!0),"MODO_TURNO"===n.name?((0,t.uX)(),(0,t.CE)("span",Se,(0,o.v_)(e.tTurnos[a[n.field]].label),1)):(0,t.Q3)("v-if",!0)])):((0,t.uX)(),(0,t.CE)("div",ve,[e.permiso>2?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(i,{flat:"",dense:"",round:"",icon:"edit",onClick:function(n){return e.editarDatos(a)}},null,8,["onClick"]),(0,t.bF)(i,{flat:"",dense:"",round:"",icon:"delete",onClick:function(n){return e.eliminarDato(a)}},null,8,["onClick"])],64)):(0,t.Q3)("v-if",!0)]))])}),128))])}),128))]}),_:1},8,["modelValue","onChange"])])])}var Ce=n(39231),Oe=Ce.Hi,Ne={props:["niveles"],components:{QBtn:d.Il,QIcon:d.bP,QTable:d.kH,QTh:d.EJ,QTr:d.qh,QTd:d.Ef,QTableColumns:d.$s,QPageSticky:d._U,QDatetime:d.T5,QPopupEdit:d.GT,draggable:Oe,sieSelect:$.A,QSelect:d.Si,QInput:d.ie},data:function(){return{sie:(0,m["default"])(),permiso:(0,m["default"])().ruta.nivel,dataTurnos:[],regSelect:{DESCRIPCION:"",MODO_TURNO:0},paginacion:{page:1,rowsPerPage:20},columns:[{name:"DESCRIPCION",field:"DESCRIPCION",align:"left",label:this.$t("matricula.descripcion")},{name:"MODO_TURNO",field:"MODO_TURNO",align:"left",label:this.$t("Modo")},{name:"EDIT",field:"EDIT",align:"right",label:""}],tTurnos:[{label:"Ambos",value:0},{label:"Colegio",value:1},{label:"Curso",value:2}],esEdit:!1}},methods:{obtDataTurno:function(){var e=this;f.$http.get("api/HyoAturno/obtTurnos").then(function(a){var n=a.json;e.dataTurnos=n})},editarDatos:function(e){this.esEdit=!0,this.regSelect={},Object.keys(e).length>0?this.regSelect=le()({},e):this.regSelect={DESCRIPCION:"",MODO_TURNO:0}},eliminarDato:function(e){var a=this;(0,H.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(n){n&&f.$http.post("api/HyoAturno/eliminarTurno",e).then(function(e){var n=e.json;(0,j["default"])(a.$t("mensajes.m0006."+n.msg),n.type),"error"!==n.type&&a.obtDataTurno()})})},agregarDato:function(){var e=this;this.regSelect.DESCRIPCION?f.$http.post("api/HyoAturno/agregarTurno",this.regSelect).then(function(a){var n=a.json;(0,j["default"])(e.$t("mensajes."+n.msg),n.type),["m0012","m0001"].indexOf(n.msg)>=0&&(e.obtDataTurno(),e.esEdit=!1)}):(0,j["default"])("Debe llenar todos los datos","error")},cancelarEditar:function(){this.esEdit=!1},ordenarParametro:function(){var e=this;if(this.permiso<=2)return!1;var a=[];this.dataTurnos.forEach(function(e,n){e.ORDEN!==n+1&&a.push({ID:e.ID,ORDEN:n+1})}),f.$http.post("api/HyoAturno/updTurno",a).then(function(a){var n=a.json;(0,j["default"])(e.$t("mensajes."+n.msg),n.type),"m0001"===n.msg&&e.obtDataTurno()})}},computed:{},mounted:function(){this.obtDataTurno()}};const Te=(0,G.A)(Ne,[["render",Ae]]);var ke=Te,Fe=n(38864),Re=n(92353),Me={class:"col"},_e={class:"q-table-middle"},we={class:"q-table q-table-horizontal-separator q-card"},Pe={class:"text-bold"},ye={style:{"text-align":"center"}};function Le(e,a){var n=(0,t.g2)("q-icon"),l=(0,t.g2)("q-select"),i=(0,t.g2)("draggable");return(0,t.uX)(),(0,t.CE)("div",Me,[(0,t.Lk)("div",_e,[(0,t.Lk)("table",we,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,[(0,t.bF)(n,{name:"import_export",size:"20px"})]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.columns,function(e){return(0,t.uX)(),(0,t.CE)("th",Pe,(0,o.v_)(e.label),1)}),256))])]),(0,t.bF)(i,{modelValue:e.listaEstados,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.listaEstados=a}),tag:"tbody",onChange:e.ordenarPasos},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.listaEstados,function(i,s){return(0,t.uX)(),(0,t.CE)("tr",{key:i.ID},[(0,t.Lk)("td",ye,[(0,t.bF)(n,{name:"blur_on",size:"20px"})]),(0,t.Lk)("td",null,[(0,t.bF)(n,{name:i.ICONO,color:i.COLORVUE},{default:(0,t.k6)(function(){return b()(a[1]||(a[1]=[(0,t.eW)(" ",-1)]))}),_:1},8,["name","color"]),(0,t.Lk)("span",null,(0,o.v_)(i.ESTADODES),1)]),(0,t.Lk)("td",null,[(0,t.bF)(l,{modelValue:i.ALERTA_AUTOM,"onUpdate:modelValue":function(e){return i.ALERTA_AUTOM=e},options:e.estados,onInput:function(a){return e.saveInfo(i,"ALERTA_AUTOM")}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]),(0,t.Lk)("td",null,[(0,t.bF)(l,{modelValue:i.TIPO,"onUpdate:modelValue":function(e){return i.TIPO=e},options:e.momentos,onInput:function(a){return e.saveInfo(i,"TIPO")}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]),(0,t.Lk)("td",null,[(0,t.bF)(l,{modelValue:i.AGRUPADOR,"onUpdate:modelValue":function(e){return i.AGRUPADOR=e},options:e.agrupadores,onInput:function(a){return e.saveInfo(i,"AGRUPADOR")}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])])])}),128))]}),_:1},8,["modelValue","onChange"])])])])}var qe=Ce.Hi,Ve={props:["niveles","nivelesAd"],components:{QBtn:d.Il,QIcon:d.bP,QTable:d.kH,QTh:d.EJ,QTr:d.qh,QTd:d.Ef,QTableColumns:d.$s,QPageSticky:d._U,sieModal:x.A,QDatetime:d.T5,sieSelect:$.A,QCheckbox:d.vZ,QOptionGroup:d.EX,QField:d.Om,date:d.p6,draggable:qe,QSelect:d.Si},data:function(){return{listaEstados:[],estados:[{label:"No",value:0},{label:"Si",value:1}],momentos:[{label:"Ambos",value:0},{label:"Colegio",value:1},{label:"Curso",value:2}],agrupadores:[{label:"Asistencia",value:1},{label:"Inasistencia",value:2},{label:"Tardanzas",value:3}],columns:[{name:"ESTADODES",field:"ESTADODES",align:"left",label:this.$t("Estado")},{name:"ALERTA_AUTOM",field:"ALERTA_AUTOM",align:"left",label:this.$t("Alerta Automatica")},{name:"TIPO",field:"TIPO",align:"left",label:this.$t("Momento Marcación (No Alerta!!!)")},{name:"AGRUPADOR",field:"AGRUPADOR",align:"left",label:this.$t("Agrupador")}]}},methods:{cargaInicial:function(){var e=this;f.$http.get("api/HyoHorasisEstado/listarHorasisEstado").then(function(a){var n=a.json;e.listaEstados=n})},ordenarPasos:function(){var e=this;this.listaEstados.forEach(function(a,n){n+1!==a.ORDEN&&(a.ORDEN=n+1,e.saveInfo(a,"ORDEN",!0))}),this.cargaInicial()},saveInfo:function(e,a,n){var t=this;f.$http.post("api/HyoHorasisEstado/saveEstado",{info:e,campo:a}).then(function(e){var a=e.json;(0,j["default"])(t.$t("mensajes."+a),"m0001"===a?"success":"error"),"m0001"!==a||n||t.cargaInicial()})}},mounted:function(){this.cargaInicial()}};const Ue=(0,G.A)(Ve,[["render",Le]]);var $e=Ue,xe={class:"column"};function Qe(e,a){var n=(0,t.g2)("sie-table");return(0,t.uX)(),(0,t.CE)("div",xe,[(0,t.bF)(n,{class:"q-card q-ma-sm col",ref:"tablaConfig",context:this,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"height: calc(100vh - 200px); width: 100%; margin: 0;",columns:e.columns,data:e.dataConfig,config:e.config},null,8,["columns","data","config"])])}n(52133),n(6724);var je=n(96122),He={components:{QSelect:d.Si,QScrollArea:je.A,SieTable:ce.A},data:function(){return{columns:[{name:"DESCRIPCION",field:"DESCRIPCION",align:"left",label:"campo"},{name:"ESTADONEW",field:"ESTADONEW",align:"center",label:"Estado"}],modalConfig:!1,configuracion:{},dataConfig:[],siNo:[{label:"Si",value:1},{label:"No",value:0}],config:{ESTADONEW:{component:"select",options:[{label:"Si",value:1},{label:"No",value:0}],input:function(e,a){console.log({row:e,rowRef:a}),e.DEPENDENCIA?1===this.configuracion[e.DEPENDENCIA].ESTADONEW?e.ESTADO!==e.ESTADONEW&&this.saveIndividual(e):a.ESTADONEW=e.ESTADO:this.saveIndividual(e)}}},infoAdd:{instrucod:null,gradocod:null,seccioncod:null,alucod:null,fecIni:new Date,fecFin:new Date,estado:null,justificacion:null,detalleJustificacion:null,dataArchivo:{},alto:""},perfilesAlertas:[]}},methods:{cargaInicial:function(){var e=this;f.$http.get("api/HyoConfigurajustificaciones/getJustificaciones").then(function(a){e.dataConfig=a.map(function(e){return e.ESTADONEW=e.ESTADO,e});var n={};a.forEach(function(e){var a=e.CONFIGURADOR,t=e.DEPENDENCIA,o=e.DESCRIPCION,l=e.ESTADO,i=e.ID;n[a]={DEPENDENCIA:t,DESCRIPCION:o,ESTADO:l,ID:i,ESTADONEW:l,CONFIGURADOR:a}}),e.configuracion=le()({},n)})},saveIndividual:function(e){var a=this,n=[];e.DEPENDENCIA?1===this.configuracion[e.DEPENDENCIA].ESTADONEW&&e.ESTADO!==e.ESTADONEW&&n.push({ESTADO:e.ESTADONEW,ID:e.ID}):e.ESTADO!==e.ESTADONEW&&n.push({ESTADO:e.ESTADONEW,ID:e.ID}),0===e.ESTADONEW&&Object.keys(this.configuracion).forEach(function(t){a.configuracion[t].DEPENDENCIA===e.CONFIGURADOR&&1===a.configuracion[t].ESTADO&&n.push({ESTADO:0,ID:a.configuracion[t].ID})}),n.length>0&&f.$http.post("api/HyoConfigurajustificaciones/saveJustificaciones",{info:n}).then(function(){a.cargaInicial()})},saveConfiguracion:function(){var e=this,a=[];Object.keys(this.configuracion).forEach(function(n){e.configuracion[n].DEPENDENCIA?"S"===e.configuracion[e.configuracion[n].DEPENDENCIA].ESTADONEW?e.configuracion[n].ESTADO!==e.configuracion[n].ESTADONEW&&a.push({ESTADO:e.configuracion[n].ESTADONEW,ID:e.configuracion[n].ID}):1===e.configuracion[n].ESTADONEW&&a.push({ESTADO:0,ID:e.configuracion[n].ID}):e.configuracion[n].ESTADO!==e.configuracion[n].ESTADONEW&&a.push({ESTADO:e.configuracion[n].ESTADONEW,ID:e.configuracion[n].ID})}),a.length>0&&f.$http.post("api/HyoConfigurajustificaciones/saveJustificaciones",{info:a}).then(function(){e.cargaInicial()})}},mounted:function(){this.cargaInicial()}};const Xe=(0,G.A)(He,[["render",Qe]]);var Ye=Xe,We={class:"column"},Ge={class:"column row-md q-ma-xs"},Be={class:"col q-ma-sm column"},ze={class:"q-mx-sm"},Je={class:"row q-gutter-sm"},Ke={class:"row"},Ze={class:"row q-ma-sm col"},ea={class:"row col"},aa={class:"row q-ma-sm col"},na={class:"col q-ma-sm column"},ta={class:"row q-mx-sm"},oa={class:"q-px-xs q-mx-xs q-mb-sm border-field"},la={class:"leyenda"},ia={class:"col row wrap justify-between q-ma-xs"},sa={class:"column"};function ra(e,a){var n=this,l=(0,t.g2)("header-btn"),i=(0,t.g2)("sie-table"),s=(0,t.g2)("q-input"),r=(0,t.g2)("sie-editor"),c=(0,t.g2)("sie-modal");return(0,t.uX)(),(0,t.CE)("div",We,[(0,t.bF)(l,{name:"Configuracion de notificaciones",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(i,{class:"q-card q-ma-sm",context:this,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"height: calc(100vh - 230px); width: 100%; margin: 0;",columns:e.columns,data:e.tipos,config:e.config,"show-refresh":!0,onRefresh:e.init},null,8,["columns","data","config","onRefresh"]),(0,t.bF)(c,{modelValue:e.modalNew,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.modalNew=a}),maximized:!0,title:e.infoModal.ID?"Editar Configuración":"Nueva Configuracion",onSubmit:e.grabarConfig},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",Ge,[(0,t.Lk)("div",Be,[(0,t.Lk)("div",ze,[(0,t.Lk)("div",Je,[(0,t.bF)(s,{class:"col",modelValue:e.infoModal.DESCRIPCION,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.infoModal.DESCRIPCION=a}),label:"Descripción"},null,8,["modelValue"]),(0,t.bF)(s,{modelValue:e.infoModal.CANTIDAD,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.infoModal.CANTIDAD=a}),label:"Cantidad",type:"number",min:"1"},null,8,["modelValue"])])]),(0,t.Lk)("div",Ke,[a[5]||(a[5]=(0,t.Lk)("div",{class:"column q-ma-sm"},[(0,t.Lk)("div",{class:"text-bold"},"Estados")],-1)),(0,t.Lk)("div",Ze,[(0,t.bF)(i,{class:"q-card q-ma-sm col",ref:"tablaEstados",context:n,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"height: calc(100vh - 500px); width: 100%; margin: 0;",columns:e.columnsEstados,data:e.estados,selection:"multiple","hide-bottom":"","show-search":!1,"load-selection":e.loadEstados},null,8,["columns","data","load-selection"])])]),(0,t.Lk)("div",ea,[a[6]||(a[6]=(0,t.Lk)("div",{class:"column q-ma-sm"},[(0,t.Lk)("div",{class:"text-bold"},"Perfiles")],-1)),(0,t.Lk)("div",aa,[(0,t.bF)(i,{class:"q-card q-ma-sm col",ref:"tablaPerfiles",context:n,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"height: calc(100vh - 400px); width: 100%; margin: 0;",columns:e.columnsPerfiles,data:e.perfiles,config:e.configPerfiles,selection:"multiple","hide-bottom":"","load-selection":e.loadPerfiles},null,8,["columns","data","config","load-selection"])])])]),(0,t.Lk)("div",na,[(0,t.Lk)("div",ta,[(0,t.bF)(s,{class:"col",modelValue:e.infoModal.ASUNTO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.infoModal.ASUNTO=a}),label:"Asunto"},null,8,["modelValue"])]),(0,t.Lk)("fieldset",oa,[(0,t.Lk)("legend",la,(0,o.v_)(e.$t("biblioteca.campos")),1),(0,t.Lk)("div",ia,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.campos,function(a){return(0,t.uX)(),(0,t.CE)("div",{key:a.titulo,class:"col-5"},[(0,t.Lk)("b",null,(0,o.v_)(e.$t(a.titulo)+": "),1),(0,t.Lk)("span",null,(0,o.v_)(a.campo),1)])}),128))])]),(0,t.Lk)("div",sa,[(0,t.bF)(r,{class:"col",modelValue:e.infoModal.MENSAJE,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.infoModal.MENSAJE=a}),label:e.$t("matricula.mensaje")},null,8,["modelValue","label"])])])])]}),_:1},8,["modelValue","title","onSubmit"])])}var ca={components:{QInput:d.ie}};const ua=(0,G.A)(ca,[["render",ra]]);var da=ua,fa={class:"column"},ma={class:"column row-md q-ma-xs"},pa={class:"col q-ma-sm column"},ha={class:"q-mx-sm"},ba={class:"row q-gutter-sm"},Ea={class:"row"},ga={class:"row q-ma-sm col"},Da={class:"row col"},Ia={class:"row q-ma-sm col"},Sa={class:"col q-ma-sm column"},va={class:"row q-mx-sm"},Aa={class:"q-px-xs q-mx-xs q-mb-sm border-field"},Ca={class:"leyenda"},Oa={class:"col row wrap justify-between q-ma-xs"},Na={class:"column"};function Ta(e,a){var n=this,l=(0,t.g2)("header-btn"),i=(0,t.g2)("sie-table"),s=(0,t.g2)("q-input"),r=(0,t.g2)("sie-editor"),c=(0,t.g2)("sie-modal");return(0,t.uX)(),(0,t.CE)("div",fa,[(0,t.bF)(l,{name:"Configuracion de notificaciones",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(i,{class:"q-card q-ma-sm",context:this,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"height: calc(100vh - 230px); width: 100%; margin: 0;",columns:e.columns,data:e.tipos,config:e.config,"show-refresh":!0,onRefresh:e.init},null,8,["columns","data","config","onRefresh"]),(0,t.bF)(c,{modelValue:e.modalNew,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.modalNew=a}),maximized:!0,title:e.infoModal.ID?"Editar Configuración":"Nueva Configuracion",onSubmit:e.grabarConfig},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",ma,[(0,t.Lk)("div",pa,[(0,t.Lk)("div",ha,[(0,t.Lk)("div",ba,[(0,t.bF)(s,{class:"col",modelValue:e.infoModal.DESCRIPCION,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.infoModal.DESCRIPCION=a}),label:"Descripción"},null,8,["modelValue"]),(0,t.bF)(s,{modelValue:e.infoModal.CANTIDAD,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.infoModal.CANTIDAD=a}),label:"Cantidad",type:"number",min:"1"},null,8,["modelValue"])])]),(0,t.Lk)("div",Ea,[a[5]||(a[5]=(0,t.Lk)("div",{class:"column q-ma-sm"},[(0,t.Lk)("div",{class:"text-bold"},"Estados")],-1)),(0,t.Lk)("div",ga,[(0,t.bF)(i,{class:"q-card q-ma-sm col",ref:"tablaEstados",context:n,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"height: calc(100vh - 500px); width: 100%; margin: 0;",columns:e.columnsEstados,data:e.estados,selection:"multiple","hide-bottom":"","show-search":!1,"load-selection":e.loadEstados},null,8,["columns","data","load-selection"])])]),(0,t.Lk)("div",Da,[a[6]||(a[6]=(0,t.Lk)("div",{class:"column q-ma-sm"},[(0,t.Lk)("div",{class:"text-bold"},"Perfiles")],-1)),(0,t.Lk)("div",Ia,[(0,t.bF)(i,{class:"q-card q-ma-sm col",ref:"tablaPerfiles",context:n,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"height: calc(100vh - 400px); width: 100%; margin: 0;",columns:e.columnsPerfiles,data:e.perfiles,config:e.configPerfiles,selection:"multiple","hide-bottom":"","load-selection":e.loadPerfiles},null,8,["columns","data","config","load-selection"])])])]),(0,t.Lk)("div",Sa,[(0,t.Lk)("div",va,[(0,t.bF)(s,{class:"col",modelValue:e.infoModal.ASUNTO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.infoModal.ASUNTO=a}),label:"Asunto"},null,8,["modelValue"])]),(0,t.Lk)("fieldset",Aa,[(0,t.Lk)("legend",Ca,(0,o.v_)(e.$t("biblioteca.campos")),1),(0,t.Lk)("div",Oa,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.campos,function(a){return(0,t.uX)(),(0,t.CE)("div",{key:a.titulo,class:"col-5"},[(0,t.Lk)("b",null,(0,o.v_)(e.$t(a.titulo)+": "),1),(0,t.Lk)("span",null,(0,o.v_)(a.campo),1)])}),128))])]),(0,t.Lk)("div",Na,[(0,t.bF)(r,{class:"col",modelValue:e.infoModal.MENSAJE,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.infoModal.MENSAJE=a}),label:e.$t("matricula.mensaje")},null,8,["modelValue","label"])])])])]}),_:1},8,["modelValue","title","onSubmit"])])}n(74260),n(32203);var ka=n(3112),Fa=n(6083),Ra={components:{QInput:se.A,SieTable:ce.A,sieModal:x.A,QCheckbox:ka.A,sieEditor:Fa.A},data:function(){return{modalNew:!1,estados:[],estadosOg:[],tipos:[],perfiles:[],perfilesOG:[],infoModalBase:{},loadPerfiles:{key:"TIPCOD",values:[]},loadEstados:{key:"ESTADOCOD",values:[]},campos:[{titulo:"Cod. Alumno",campo:"{{ALUCOD}}"},{titulo:"Alumno",campo:"{{ALUNOM}}"},{titulo:"Aula",campo:"{{SALON}}"},{titulo:"Cant. Incidencias",campo:"{{CANTASIS}}"},{titulo:"Incidencias",campo:"{{ASISTENCIAS}}"},{titulo:"Usuario",campo:"{{USUNOM}}"}],columns:[{name:"DESCRIPCION",field:"DESCRIPCION",align:"left",label:"Descripción"},{name:"ESTADO",field:"ESTADO",align:"center",label:"Activo"},{name:"CANTIDAD",field:"CANTIDAD",align:"center",label:"Cant"},{name:"PERFILES",field:"PERFILES",align:"center",label:"Perfiles"},{name:"EDITAR",field:"EDITAR",align:"center"}],columnsPerfiles:[{name:"TIPNOM",field:"TIPNOM",align:"left",label:"Perfil"}],columnsEstados:[{name:"ESTADODES",field:"ESTADODES",align:"left"}],config:{DESCRIPCION:{component:"input",input:function(e){var a=e.DESCRIPCION,n=e.ID;this.grabarInformacion({DESCRIPCION:a,ID:n})}},CANTIDAD:{component:"input",type:"number",input:function(e){if(e.CANTIDAD>0){var a=e.CANTIDAD,n=e.ID;this.grabarInformacion({CANTIDAD:a,ID:n})}}},EDITAR:{flat:!0,round:!0,component:"button",icon:["edit as editar"],editar:function(e){this.nuevaConfig(e)}},ESTADO:{renderHtml:function(e,a,n,t){return n.icon({name:"".concat(1===e.ESTADO?"toggle_on":"toggle_off"),color:"secondary"})},renderAction:function(e,a){1===e.ESTADO?e.ESTADO=0:e.ESTADO=1;var n=e.ESTADO,t=e.ID;this.grabarInformacion({ESTADO:n,ID:t})}},PERFILES:{renderHtml:function(e){var a="";return e.PERFILES.forEach(function(e){a="".concat(a," <p><span>").concat(e.TIPNOM,"</span>")}),a}}},configPerfiles:{TIPO_ENVIO:{component:"select",prevent:!0,options:[{label:"Automatico",value:1},{label:"Manual",value:2}]}},infoModal:{DESCRIPCION:null,ESTADOS:[],perfilesSelect:[],ASUNTO:null,MENSAJE:null,CANTIDAD:0}}},created:function(){var e=this;return u()(r()().m(function a(){return r()().w(function(a){while(1)switch(a.n){case 0:e.init();case 1:return a.a(2)}},a)}))()},computed:{buttons:function(){var e=[];return e.push({label:"Agregar",icon:"add",click:this.nuevaConfig}),e}},methods:{nuevaConfig:function(e){var a=this;return u()(r()().m(function n(){var t,o,l,i,s,c,u,d;return r()().w(function(n){while(1)switch(n.n){case 0:return t={},a.perfilesOG=[],a.estadosOg=[],o=e.ID,o?(a.infoModal=e,a.infoModalBase=le()({},e),t.ID=o):(a.infoModal={DESCRIPCION:null,ESTADOS:[],perfilesSelect:[],MENSAJE:null,ASUNTO:null},a.infoModalBase={DESCRIPCION:null,ESTADOS:[],perfilesSelect:[],MENSAJE:null,ASUNTO:null}),a.modalNew=!0,n.n=1,a.$http.get("api/AsistenciaNotificacionController/getPerfilesSeleccionados",{params:{parametros:t}});case 1:l=n.v,i=l.perfiles,s=l.estados,c=l.mensaje,u=l.perfilesOg,d=l.estadosOg,a.infoModal.MENSAJE=c.MENSAJE,a.infoModal.ASUNTO=c.ASUNTO,a.infoModal.ID_MENSAJE=c.ID,a.infoModalBase=le()(le()({},{MENSAJE:c.MENSAJE,ASUNTO:c.ASUNTO}),a.infoModalBase),a.estadosOg=d,a.perfiles=b()(i),a.estados=s,a.loadEstados.values=[],a.loadPerfiles.values=[],i.forEach(function(e){e.TIPO_ENVIO=2,(e.ID_PERFIL||["004","010"].indexOf(e.TIPCOD)+1&&!o)&&a.loadPerfiles.values.push(e)}),a.perfilesOG=b()(u),s.forEach(function(e){e.ID_CONFIGURACION&&a.loadEstados.values.push(e)});case 2:return n.a(2)}},n)}))()},init:function(){var e=this;return u()(r()().m(function a(){return r()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/AsistenciaNotificacionController/getAsistenciaNotificacion");case 1:e.tipos=a.v;case 2:return a.a(2)}},a)}))()},grabarInformacion:function(e){var a=this;return u()(r()().m(function n(){return r()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,a.$http.post("api/AsistenciaNotificacionController/saveAsistenciaNotificacion",{params:e});case 1:a.init(),a.modalNew=!1,a.$notify("Guardado Correctamente"),n.n=3;break;case 2:n.p=2,n.v;case 3:return n.a(2)}},n,null,[[0,2]])}))()},grabarConfig:function(){var e=this;return u()(r()().m(function a(){var n,t,o,l,i,s;return r()().w(function(a){while(1)switch(a.n){case 0:if(n=e.$refs.tablaPerfiles.rowsSelected(),t=e.$refs.tablaEstados.rowsSelected(),o={add:[],del:[]},l={add:[],del:[],update:[]},console.log({estadosSelect:t}),t.forEach(function(e){e.ID||o.add.push(e.ESTADOCOD)}),e.estados.forEach(function(e){var a=t.find(function(a){var n=a.ESTADOCOD;return n===e.ESTADOCOD});e.ID&&!a&&o.del.push(e.ID)}),i=0,n.forEach(function(e){console.log({v:e}),e.TIPO_ENVIO||(i=1),!e.ID_PERFIL&&e.TIPO_ENVIO&&l.add.push({TIPCOD:e.TIPCOD,TIPO_ENVIO:e.TIPO_ENVIO})}),1!==i){a.n=1;break}return e.$notify("Debe Llenar todos los datos","error"),a.a(2,!1);case 1:if(e.perfiles.forEach(function(a){if(a.ID_PERFIL){var t=e.perfilesOG.find(function(e){var n=e.ID_PERFIL;return n===a.ID_PERFIL}),o=n.find(function(e){var n=e.ID_PERFIL;return n===a.ID_PERFIL});t.TIPO_ENVIO!==a.TIPO_ENVIO&&o?l.update.push({ID_PERFIL:a.ID_PERFIL,TIPO_ENVIO:a.TIPO_ENVIO}):n.find(function(e){var n=e.ID_PERFIL;return n===a.ID_PERFIL})||l.del.push(a.ID_PERFIL)}}),!(!e.infoModal.DESCRIPCION||!e.infoModal.CANTIDAD>0||!t.length>0||!n.length>0)&&e.infoModal.ASUNTO&&e.infoModal.MENSAJE){a.n=2;break}e.$notify("Debe Llenar todos los datos","error"),a.n=3;break;case 2:return s={},(l.add.length>0||l.del.length>0||l.update.length>0)&&(s.PERFILES=l),(o.add.length>0||o.del.length>0)&&(console.log(o.add.length>0||o.del.length>0),s.ESTADOS=o),s["CANTIDAD"]=e.infoModal["CANTIDAD"],Object.keys(e.infoModalBase).forEach(function(a){["PERFILES","$$color","ID","ESTADOS","CANTIDAD"].indexOf(a)<0&&e.infoModal[a]!==e.infoModalBase[a]&&(s[a]=e.infoModal[a])}),e.infoModal.ID&&(s.ID=e.infoModal.ID),a.n=3,e.grabarInformacion(s);case 3:return a.a(2)}},a)}))()}}};const Ma=(0,G.A)(Ra,[["render",Ta]]);var _a=Ma,wa=n(65673),Pa=n(82327),ya=n(88865),La=n(24974),qa=n(26697),Va=n(53093),Ua=n(53811),$a=n(43346),xa=n(81288),Qa={components:{QList:wa.A,QItem:Pa.A,QItemSection:ya.A,QSelect1:ie.A,QSelect:d.Si,sieUsuario:La.A,sieModal:x.A,sieVacio:p.A,QToggle:d.c5,QCheckbox:d.vZ,QBtnToggle:d.QL,sieSelect:$.A,QRadio:d.$,QTabs:qa.A,QTab:Va.A,QTabPanels:Ua.A,QTabPanel:$a.A,QTabPane:d.dg,calendario:z,horario:fe,reprocesar:Fe.A,turno:ke,completar:Re.A,estados:$e,adicional:Ye,cierre:da,notificaciones:_a,QPage:d.Tu,QIcon:d.bP},data:function(){return{now:new Date,niveles:[],nivelesAd:[],grados:{},sie:(0,m["default"])(),showNotificaciones:!1,tabSelect:"calendario",tabs:[]}},methods:{configurarNotificaciones:function(){var e=this;return u()(r()().m(function a(){var n;return r()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,f.$http.get("api/HyoConfigurajustificaciones/getJustificaciones",{params:{agrupado:!0}});case 1:n=a.v,e.showNotificaciones=n["A_NOTIFICACION"];case 2:return a.a(2)}},a)}))()}},watch:{},created:function(){var e=this;return u()(r()().m(function a(){var n,t;return r()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.configurarNotificaciones();case 1:if(f.$http.get("api/HyoInstrus/obtInstru",{params:{todos:"T"}}).then(function(a){var n=a.json;e.niveles=n,n.forEach(function(a){["N","T"].indexOf(a.INSTRUCOD)<0&&e.nivelesAd.push({label:a.INSTRUDES,value:a.INSTRUCOD})})}),f.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:"S",todos:"T"}}).then(function(a){var n=a.json;e.grados=n}),e.tabs=[{id:"calendario",label:"Calendario",icono:"calendar_check_o"},{id:"horario",label:"Horarios de Asistencia",icono:"calendar_today"},{id:"turno",label:"Turnos de Asistencia",icono:"calendar_today"}],3!==e.sie.ruta.nivel){a.n=3;break}return["SIE","SIEWEB"].indexOf(e.sie.usucod)>=0&&e.tabs.push({id:"estados",label:"Modificación de estados",icono:"calendar_today"}),e.tabs.push({id:"reprocesar",label:"Reprocesar Asistencia",icono:"cogs"}),["SIE","SIEWEB"].indexOf(e.sie.usucod)>=0&&e.tabs.push({id:"adicional",label:"Configuracion Adicional",icono:"calendar_today"}),a.n=2,e.$http.get("api/HyoControl/obtCodigoActualPorCampo",{params:{campo:"asistencia"}});case 2:n=a.v,t=n.json,"1"===t&&e.tabs.push({id:"completar",label:"Completar Asistencia",icono:"calendar_plus_o"}),e.showNotificaciones&&e.tabs.push({id:"notificaciones",label:"Configurar Notificaciones",icono:"mail_resend"});case 3:return a.a(2)}},a)}))()},computed:{isLess:function(){return(0,xa.isLess)()}}};const ja=(0,G.A)(Qa,[["render",i]]);var Ha=ja}}]);