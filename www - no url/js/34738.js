"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[34738],{34738:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var a=t(61758),r={class:"row q-col-gutter-md"},o={class:"col-xs-12"},i={class:"row"},l={class:"col-xs-12"},u={class:"row"},s={class:"col-xs-12"};function c(e,n){var t=this,c=(0,a.g2)("header-btn"),d=(0,a.g2)("sie-table"),m=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-card"),g=(0,a.g2)("q-input"),p=(0,a.g2)("q-form"),h=(0,a.g2)("sie-modal"),b=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(b,{class:"q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{name:e.titulo,auto:!0,buttons:e.botones},null,8,["name","buttons"]),(0,a.bF)(m,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",r,[(0,a.Lk)("div",o,[(0,a.bF)(d,{columns:e.columns,data:e.data,context:t,config:e.config,css:{height:"calc(100vh - 120px)"},"show-search":!1},null,8,["columns","data","config"])])])]}),_:1})]}),_:1}),(0,a.bF)(h,{title:e.modal.titulo,modelValue:e.modal.open,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.modal.open=n}),ok:"GRABAR",onSubmit:e.save},{default:(0,a.k6)(function(){return[(0,a.bF)(m,null,{default:(0,a.k6)(function(){return[(0,a.bF)(p,{ref:"form"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",i,[(0,a.Lk)("div",l,[(0,a.bF)(g,{class:"col",modelValue:e.modal.row.numero,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.modal.row.numero=n}),label:"Número de identificación",maxlength:"30",rules:[e.notNull]},null,8,["modelValue","rules"])])]),(0,a.Lk)("div",u,[(0,a.Lk)("div",s,[(0,a.bF)(g,{class:"col textarea",modelValue:e.modal.row.comentario,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.modal.row.comentario=n}),type:"textarea",label:"Comentario",counter:"",maxlength:"500",rules:[e.notNull]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var d=t(76080),m=t.n(d),f=t(45254),g=t.n(f),p=t(6123),h=t(65848),b=t(2739),w=t(64208),v={components:{QForm:b.A,QInput:w.A,QPage:p.Tu,QCard:p.C$},mixins:[h.A],data:function(){return{titulo:"Lista Negra",botones:[{label:"Agregar",icon:"add",click:this.add}],modal:{open:!1,titulo:"Identificación de Lista Negra",row:{numero:"",comentario:""}},columns:[{name:"NUMERO",label:"Número de identificación",align:"center",field:"NUMERO"},{name:"USUCOD",label:"Usuario que registró",align:"left",field:"USUCOD"},{name:"FH_CREACION",label:"F. Registro",align:"center",field:"FH_CREACION"},{name:"ACTIONS",align:"center",field:"ACTIONS"}],data:[]}},computed:{config:function(){return{FH_CREACION:{component:"datetime",edit:!1},ACTIONS:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e){this.modal.row.id_lista_negra=e.ID_LISTA_NEGRA,this.modal.row.numero=e.NUMERO,this.modal.row.comentario=e.COMENTARIO,this.modal.open=!0},eliminar:function(e){var n=this;return g()(m()().m(function t(){var a,r,o;return m()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,n.$confirmar("¿Está seguro de eliminar este pre Interesado?");case 1:if(a=t.v,!a){t.n=6;break}return t.p=2,t.n=3,n.$http.delete("api/postulacionController/deleteListaNegra",{params:{data:e}});case 3:if(r=t.v,n.$notify(r.message),!r.message){t.n=4;break}return t.n=4,n.updateGrid();case 4:t.n=6;break;case 5:t.p=5,o=t.v,n.$notify(o.message,"error");case 6:return t.a(2)}},t,null,[[2,5]])}))()}}}}},methods:{notNull:function(e){return!!e||"Este campo es requerido"},updateGrid:function(){var e=this;return g()(m()().m(function n(){var t;return m()().w(function(n){while(1)switch(n.n){case 0:return t={order:[{sidx:"L.FH_CREACION",sord:"desc"}]},n.n=1,e.getApiAction("api/postulacionController/getListaNegra",t);case 1:e.data=n.v;case 2:return n.a(2)}},n)}))()},add:function(){var e=this;return g()(m()().m(function n(){return m()().w(function(n){while(1)switch(n.n){case 0:e.modal.row.id_lista_negra=0,e.modal.row.numero="",e.modal.row.comentario="",e.modal.open=!0;case 1:return n.a(2)}},n)}))()},save:function(){var e=this;return g()(m()().m(function n(){var t,a,r,o,i,l,u;return m()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,e.$refs.form.validate();case 1:if(t=n.v,!1!==t){n.n=2;break}return n.a(2,!1);case 2:return o=0===e.modal.row.id_lista_negra,o?(a="agregar",r="addListaNegra"):(a="actualizar",r="updateListaNegra"),n.n=3,e.$confirmar("¿Está seguro de "+a+" el registro?");case 3:if(i=n.v,!i){n.n=8;break}return n.p=4,n.n=5,e.$http.post("api/postulacionController/"+r,{data:e.modal.row});case 5:if(l=n.v,e.$notify(l.message),!l.message){n.n=6;break}return e.modal.open=!1,n.n=6,e.updateGrid();case 6:n.n=8;break;case 7:n.p=7,u=n.v,e.$notify(u.message,"error");case 8:return n.a(2)}},n,null,[[4,7]])}))()}},created:function(){var e=this;return g()(m()().m(function n(){return m()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.updateGrid();case 1:return n.a(2)}},n)}))()}},k=t(12807);const N=(0,k.A)(v,[["render",c]]);var C=N}}]);