"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[65537],{65537:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var o=t(61758),r=t(58790),a=["innerHTML"],i={class:"q-ma-xs"},c={class:"row justify-end q-gutter-sm"};function l(e,n){var t=(0,o.g2)("q-btn"),l=(0,o.g2)("sie-modal"),u=(0,o.g2)("banner"),s=(0,o.g2)("q-card-section"),d=(0,o.g2)("sie-vacio"),m=(0,o.g2)("ver"),f=(0,o.g2)("q-card"),p=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(p,{class:"q-pa-sm"},{default:(0,o.k6)(function(){return[(0,o.bF)(l,{class:"modal-encuesta",modelValue:e.modalAviso,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.modalAviso=n}),title:"Aviso de Privacidad",ok:!1},{footerMobile:(0,o.k6)(function(){return[(0,o.bF)(t,{icon:"check",flat:"",dense:"",round:"",onClick:e.aceptModal},null,8,["onClick"]),(0,o.bF)(t,{icon:"close",flat:"",dense:"",round:""})]}),footer:(0,o.k6)(function(){return[(0,o.Lk)("div",i,[(0,o.Lk)("div",c,[(0,o.bF)(t,{label:"Cancelar",onClick:n[0]||(n[0]=function(n){return e.modalAviso=!1})}),(0,o.bF)(t,{label:"Aceptar",color:"primary",onClick:e.aceptModal},null,8,["onClick"])])])]}),default:(0,o.k6)(function(){return[(0,o.Lk)("div",{class:"q-ma-md col",innerHTML:e.dataForm.AVISO},null,8,a)]}),_:1},8,["modelValue"]),(0,o.bF)(f,{class:"full-height col"},{default:(0,o.k6)(function(){return[e.isGreater?((0,o.uX)(),(0,o.Wv)(s,{key:0,class:"q-pa-none"},{default:(0,o.k6)(function(){return[(0,o.bF)(u,{img:e.imgColegio,title:e.mensajeBanner},null,8,["img","title"])]}),_:1})):(0,o.Q3)("v-if",!0),e.formDisp?((0,o.uX)(),(0,o.Wv)(m,{key:2,class:"q-card col",id:e.dataForm.ID_HISTORIA_FORMULARIO,matricula:!1,isSubmit:!0,ref:"form",anonimo:1,publico:!0,style:{overflow:"auto"}},null,8,["id"])):((0,o.uX)(),(0,o.Wv)(d,{key:1,class:(0,r.C4)(["col",{"col-12":e.formDisp}]),title:"intranet.formularios.noExistenFormularios"},null,8,["class"]))]}),_:1})]}),_:1})}var u=t(8445),s=t.n(u),d=t(76080),m=t.n(d),f=t(99550),p=t.n(f),g=t(45254),v=t.n(g),h=t(6123),k=t(80660),C=t(982),b=t(80340),w=t(51939),F=t(30640),A={class:"row bg-primary items-center q-px-md",style:{"min-height":"65px"}},I={class:"col-xs-1 justify-center"},y=["src"],L={class:"col text-right"},M={class:"text-white"};function q(e,n){return(0,o.uX)(),(0,o.CE)("div",A,[(0,o.Lk)("div",I,[(0,o.Lk)("img",{src:e.img,width:"50"},null,8,y)]),(0,o.Lk)("div",L,[(0,o.Lk)("span",M,(0,r.v_)(e.title),1)])])}var O={props:{img:{type:String,default:""},title:{type:String,default:""}}},D=t(12807);const T=(0,D.A)(O,[["render",q]]);var $=T,_=t(57668),x=(t(71271),t(81288)),S={components:{banner:$,sieModal:F.A,ver:w.A,sieVacio:b.A,QPage:h.Tu,QBtn:h.Il,QCard:h.C$},props:{},data:function(){return{info:(0,_["default"])(),dataColegio:{},imgColegio:null,colcod:null,id:null,tipcod:null,dataForm:{},modalAviso:!1,formDisp:!1}},computed:{isGreater:function(){return(0,x.isGreater)()},mensajeBanner:function(){return this.dataColegio.COLNOMMINEDU}},methods:{getImagen:function(){var e=this;return v()(m()().m(function n(){var t,o,r,a;return m()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/HyoEscudo/obtEscudo",{params:{tipo:"escudo"}});case 1:t=n.v,o=t.json,r=p()(o,1),a=r[0].img,e.imgColegio=a;case 2:return n.a(2)}},n)}))()},getInfoColegio:function(){var e=this;return v()(m()().m(function n(){var t,o,r;return m()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/HyoColegios/getDataColegio",{params:{fields:["direccion","telefono","correo","correo_admision","colcod","colnomminedu","pagweb"]}});case 1:t=n.v,t.length>0&&(o=s()(t),r=o[0],e.dataColegio=r,e.colcod=r.COLCOD);case 2:return n.a(2)}},n)}))()},getFormulario:function(){var e=this;return v()(m()().m(function n(){var t,o;return m()().w(function(n){while(1)switch(n.p=n.n){case 0:if(!e.id||!e.tipcod){n.n=4;break}return n.p=1,n.n=2,e.$http.get("api/formularioCalidadController/getFormularioCalidad",{params:{ID_HISTORIA_FORMULARIO:e.id,tipcod:e.tipcod}});case 2:t=n.v,e.dataForm=t,e.openModal(),n.n=4;break;case 3:n.p=3,o=n.v,console.log(o),(0,C["default"])("No hay formularios disponibles");case 4:return n.a(2)}},n,null,[[1,3]])}))()},openModal:function(){this.modalAviso=!0},abrirEncuesta:function(){this.getDataFormulario(this.id)},aceptModal:function(){var e=this;return v()(m()().m(function n(){return m()().w(function(n){while(1)switch(n.n){case 0:e.formDisp=!0,e.modalAviso=!1;case 1:return n.a(2)}},n)}))()},crearToken:function(){var e=this;return v()(m()().m(function n(){var t;return m()().w(function(n){while(1)switch(n.n){case 0:if(e.id=e.$route.params.id,e.tipcod=e.$route.params.tipcod,!e.id||!e.tipcod){n.n=4;break}return n.n=1,e.$http.get("api/formularioCalidadController/getToken",{params:{tipcod:e.tipcod}});case 1:return t=n.v,n.n=2,(0,k.setToken)(t.token);case 2:return n.n=3,e.$nextTick();case 3:return n.n=4,e.getFormulario();case 4:return n.a(2)}},n)}))()}},created:function(){var e=this;return v()(m()().m(function n(){return m()().w(function(n){while(1)switch(n.n){case 0:return localStorage.clear(),e.dataForm={},n.n=1,e.crearToken();case 1:return n.n=2,e.getInfoColegio();case 2:return n.n=3,e.getImagen();case 3:return n.a(2)}},n)}))()},watch:{"$route.params.id":function(){console.log("cambioId"),this.getFormulario()},"$route.params.tipcod":function(){console.log("cambioId"),this.getFormulario()}}};const E=(0,D.A)(S,[["render",l]]);var H=E}}]);