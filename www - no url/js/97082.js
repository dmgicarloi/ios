"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[97082],{97082:function(e,a,o){o.r(a),o.d(a,{default:function(){return D}});var r=o(61758),t={class:"row q-pt-xs"},n={class:"row items-center no-wrap"},l={class:"col row"},i={class:"col-auto"};function u(e,a){var o=(0,r.g2)("formulario"),u=(0,r.g2)("q-select"),s=(0,r.g2)("sie-modal"),c=(0,r.g2)("q-icon"),d=(0,r.g2)("q-btn"),m=(0,r.g2)("q-card-section"),f=(0,r.g2)("q-separator"),p=(0,r.g2)("q-card");return e.modal?((0,r.uX)(),(0,r.Wv)(s,{key:0,esc:!0,escClick:!0,title:"Agregar Persona",modelValue:e.openModalEmit,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.openModalEmit=a}),onSubmit:e.guardar,css:{maxWidth:"60vw"}},{default:(0,r.k6)(function(){return[(0,r.bF)(o,{ref:"form",schema:e.schema,methods:e.methods,load:e.load,modal:!0},null,8,["schema","methods","load"]),(0,r.Lk)("div",t,[(0,r.bF)(u,{class:"col-xs-12 col-md-4",multiple:"",chips:"",modelValue:e.idPerfil,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.idPerfil=a}),options:e.perfiles,onInput:e.inputChange,label:"perfil"},null,8,["modelValue","options","onInput"])])]}),_:1},8,["modelValue","onSubmit"])):((0,r.uX)(),(0,r.Wv)(p,{key:1,class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(m,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",n,[(0,r.Lk)("div",l,[(0,r.bF)(c,{class:"cursor-pointer back",name:"arrow_back",onClick:e.volver},null,8,["onClick"]),a[2]||(a[2]=(0,r.Lk)("div",{class:"text-h6"},"Asignar Caja",-1))]),(0,r.Lk)("div",i,[(0,r.bF)(d,{class:"q-mr-sm",icon:"add",color:"primary",label:"Nuevo",size:"sm",onClick:e.limpiar},null,8,["onClick"]),(0,r.bF)(d,{class:"q-mr-sm",icon:"save",color:"primary",label:"Guardar",size:"sm",onClick:e.guardar},null,8,["onClick"])])])]}),_:1}),(0,r.bF)(f),(0,r.bF)(m,null,{default:(0,r.k6)(function(){return[(0,r.bF)(o,{ref:"form",schema:e.schema,methods:e.methods,load:e.load},null,8,["schema","methods","load"])]}),_:1})]}),_:1}))}var s=o(76080),c=o.n(s),d=o(57008),m=o.n(d),f=o(8445),p=o.n(f),h=o(45254),g=o.n(h),v=(o(30683),o(52133),o(10239),o(50310),o(6724),o(11777),o(515),o(83190),o(80660)),b=o(19852),k=o(26697),C=o(53093),F=o(43346),w=o(53811),A=o(88567),P=o(95718),y=o(53380),Q=o(16648),S=o(6123),V=o(982),q=o(10213),E=o(75053),I=(o(54267),{emits:["update:modelValue","input"],components:{QCard:A.A,QSelect:Q.A,QCardSection:P.A,QSeparator:y.A,QTabs:k.A,QTab:C.A,QTabPanels:w.A,QTabPanel:F.A,QPagination:S.ao,sieModal:E.A,QSearch:S.Ks,formulario:b.A,QIcon:S.bP,QBtn:S.Il},props:{modelValue:{type:Boolean,default:!1},modal:{type:Boolean,default:!1},idFormulario:{type:Number,default:23},clickHandler:{type:Function}},computed:{openModalEmit:{set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)},get:function(){return this.modelValue}}},data:function(){return{ubgcodDefault:null,addData:null,schema:null,nuevo:!0,methods:{},idPerfil:[],perfiles:[]}},methods:{volver:function(){this.$router.push({name:"tesoreria.asignacionCajas.listar"})},load:function(e){},inputChange:function(e){},limpiar:function(){this.$refs.form.clear(),this.nuevo=!0},guardar:function(){var e=this;return g()(c()().m(function a(){var o,r,t,n;return c()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$refs.form.getForm();case 1:o=a.v,o.success&&(r=p()(e.schema),t={},r.map(function(e){t[e.model]=o.form[e.model]}),e.nuevo||(t=m()(m()({},t),e.addData)),n=e.nuevo?"addCajaUsuario":"updateCajaUsuario",v.$http.post("api/cajaController/".concat(n),{data:t}).then(function(a){e.nuevo&&(e.addData=a.data),e.nuevo=!1,e.modal&&(e.limpiar(),e.openModalEmit=!1),(0,q.alert)(a.message,"success")}).catch(function(e){var a=e.error;(0,q.alert)(a.message,"warning")}));case 2:return a.a(2)}},a)}))()},getCampoPadre:function(e){var a=Object.keys(this.schema),o=0,r="";while(o<a.length){if(this.schema[o].id_formulario_campo===e){r=this.schema[o].model;break}o++}return r},loadForm:function(){var e=this;v.$http.get("api/formularioController/getFormulario",{params:{id:this.idFormulario}}).then(function(a){var o=a.nombre,r=a.data;e.title=o,e.schema=r}).catch(function(e){(0,V["default"])("Error al traer formulario","warning")})},getPerfiles:function(){var e=this,a={SISCOD:26,ACCESO:3},o={filtro:a};if(!navigator.onLine)return(0,V["default"])("No hay internet","warning"),!1;v.$http.get("api/personaController/getPerfiles",{params:{params:o}}).then(function(a){var o=a.map(function(e){return e.label=e.DESCRIPCION,e.value=e.ID_PERFIL,e});e.perfiles=o}).catch(function(e){var a=e.error,o=a.code?"".concat(a.message," codigo: ").concat(a.code):"Ocurrio un Error";(0,V["default"])(o,"warning"),console.error(a)})}},created:function(){this.getPerfiles(),this.loadForm()}}),$=o(12807);const _=(0,$.A)(I,[["render",u]]);var D=_}}]);