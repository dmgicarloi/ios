"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[46702],{46702:function(e,n,t){t.r(n),t.d(n,{default:function(){return ge}});var o=t(8445),r=t.n(o),i=(t(56285),t(61758)),a=t(58790),l={class:"intrane--agenda-personal col column q-pa-sm"},u={class:"row q-col-gutter-sm"},d={class:"col-md-9 col-xs-12"},c={key:0,class:"col-md-3"},s={class:"row q-pa-sm q-col-gutter-sm"},f={class:"col-12"},p={key:0,class:"col-12"},m={class:"row q-pa-sm"},v={class:"col-12"},_={class:"q-pa-sm"},b={class:"col"},g={class:"col"},k={class:"col"};function h(e,n){var t=(0,i.g2)("header-btn"),o=(0,i.g2)("sie-calendar"),h=(0,i.g2)("q-card"),F=(0,i.g2)("tipo-evento"),A=(0,i.g2)("q-card-section"),E=(0,i.g2)("q-scroll-area"),y=(0,i.g2)("q-select"),w=(0,i.g2)("q-input"),T=(0,i.g2)("q-checkbox"),C=(0,i.g2)("q-item-section"),I=(0,i.g2)("q-item-label"),V=(0,i.g2)("q-item"),D=(0,i.g2)("q-toggle"),O=(0,i.g2)("q-datetime"),Q=(0,i.g2)("sie-cloud"),q=(0,i.g2)("sie-modal"),L=(0,i.g2)("q-badge"),S=(0,i.g2)("q-btn"),U=(0,i.g2)("q-separator"),x=(0,i.g2)("q-download-file"),N=(0,i.g2)("q-list"),W=(0,i.g2)("q-form"),X=(0,i.g2)("q-chip"),R=(0,i.g2)("q-icon"),M=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(M,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",l,[(0,i.bF)(h,{class:"col column",dense:"",flat:"",bordered:""},{default:(0,i.k6)(function(){return[(0,i.bF)(t,{name:"Agenda Personal",buttons:e.buttons},null,8,["buttons"]),(0,i.bF)(A,{class:"col column"},{default:(0,i.k6)(function(){return[(0,i.bF)(E,{class:"col"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",u,[(0,i.Lk)("div",d,[(0,i.bF)(h,{dense:"",flat:"",bordered:""},{default:(0,i.k6)(function(){return[(0,i.bF)(o,{events:e.eventos,expanded:e.expanded,"full-heigth":!e.isGreater,selectable:"",onSelect:e.onDay,onEvent:e.onEvent},null,8,["events","expanded","full-heigth","onSelect","onEvent"])]}),_:1})]),e.isGreater?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.bF)(h,{dense:"",flat:"",bordered:""},{default:(0,i.k6)(function(){return[(0,i.bF)(A,null,{default:(0,i.k6)(function(){return[(0,i.bF)(F,{modelValue:e.crear_tipo_modal,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.crear_tipo_modal=n}),filtro:e.filtro,"onUpdate:filtro":n[1]||(n[1]=function(n){return e.filtro=n}),onTicked:e.onFiltro},null,8,["modelValue","filtro","onTicked"])]}),_:1})]}),_:1})])):(0,i.Q3)("v-if",!0)])]}),_:1})]}),_:1})]}),_:1}),(0,i.bF)(q,{class:"ap_modal_evento",modelValue:e.evento.modal,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.evento.modal=n}),title:"Evento",onSubmit:e.save},{default:(0,i.k6)(function(){return[(0,i.bF)(W,{ref:"form"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",s,[(0,i.Lk)("div",f,[(0,i.bF)(y,{modelValue:e.evento.form.ap_id_tipo,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.evento.form.ap_id_tipo=n}),label:"Tipo evento",rules:[function(e){return!!e||"Campo obligatorio"}],options:e.evento.tipos,"option-label":"AP_NOMBRE","option-value":"AP_ID_TIPO","emit-value":"",onInput:e.getFormulario},null,8,["modelValue","rules","options","onInput"])]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.formulario,function(t,o){return(0,i.uX)(),(0,i.CE)(i.FK,{key:o},[t.visible?((0,i.uX)(),(0,i.CE)("div",p,["input"===t.type?((0,i.uX)(),(0,i.Wv)(w,{key:0,modelValue:e.evento.form[t.field],"onUpdate:modelValue":function(n){return e.evento.form[t.field]=n},label:t.label,type:t.subtype,rules:e.getRules(t.rules)},null,8,["modelValue","onUpdate:modelValue","label","type","rules"])):(0,i.Q3)("v-if",!0),"select"===t.type?((0,i.uX)(),(0,i.Wv)(y,{key:1,modelValue:e.evento.form[t.field],"onUpdate:modelValue":function(n){return e.evento.form[t.field]=n},label:t.label,rules:e.getRules(t.rules),options:t.options,multiple:t.multiple},{option:(0,i.k6)(function(e){var n=e.itemProps,t=e.opt,o=e.selected,r=e.toggleOption;return[(0,i.bF)(V,(0,i.v6)({ref_for:!0},n),{default:(0,i.k6)(function(){return[(0,i.bF)(C,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(T,{"model-value":o,dense:"",onInput:function(e){return r(t)}},null,8,["model-value","onInput"])]}),_:2},1024),(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{innerHTML:t.label},null,8,["innerHTML"])]}),_:2},1024)]}),_:2},1040)]}),_:1},8,["modelValue","onUpdate:modelValue","label","rules","options","multiple"])):(0,i.Q3)("v-if",!0),"toogle"===t.type?((0,i.uX)(),(0,i.Wv)(D,{key:2,modelValue:e.evento.form[t.field],"onUpdate:modelValue":function(n){return e.evento.form[t.field]=n},label:t.label,"true-value":t.vtrue,"false-value":t.vfalse,onInput:e.onTodoElDia},null,8,["modelValue","onUpdate:modelValue","label","true-value","false-value","onInput"])):(0,i.Q3)("v-if",!0),"datetime"===t.type?((0,i.uX)(),(0,i.Wv)(O,{key:3,modelValue:e.evento.form[t.field],"onUpdate:modelValue":function(n){return e.evento.form[t.field]=n},type:t.type,label:t.label,rules:e.getRules(t.rules),disable:!!e.evento.form.ap_todo_el_dia},null,8,["modelValue","onUpdate:modelValue","type","label","rules","disable"])):(0,i.Q3)("v-if",!0),"attached"===t.type?((0,i.uX)(),(0,i.CE)(i.FK,{key:4},[(0,i.bF)(q,{modelValue:e.modal_adjunto_evento,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modal_adjunto_evento=n}),title:"Adjuntar",onSubmit:n[4]||(n[4]=function(n){return e.modal_adjunto_evento=!1})},{default:(0,i.k6)(function(){return[(0,i.bF)(Q,{modelValue:e.evento.form[t.field],"onUpdate:modelValue":function(n){return e.evento.form[t.field]=n},"is-multiple":""},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue"]),(0,i.bF)(N,{class:"no-padding rounded-borders",dense:""},{default:(0,i.k6)(function(){return[(0,i.bF)(V,{dense:""},{default:(0,i.k6)(function(){return[(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{header:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,a.v_)(t.label),1)]}),_:2},1024)]}),_:2},1024),(0,i.bF)(C,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(S,{icon:"attach_file",flat:"",dense:"",round:"",size:"md",onClick:n[5]||(n[5]=function(n){return e.modal_adjunto_evento=!0})},{default:(0,i.k6)(function(){return[(0,i.bF)(L,{class:"round-badge",color:"negative",floating:"",rounded:"",justify:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,a.v_)(e.evento.form[t.field].length),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024),e.evento.form[t.field].length?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(U),(0,i.bF)(E,{style:{height:"200px"}},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.evento.form[t.field],function(n,t){return(0,i.uX)(),(0,i.CE)(i.FK,null,["string"===typeof n.id?((0,i.uX)(),(0,i.Wv)(x,{key:0,name:n.name,inline:!1,extension:n.ICONO.extension,nobutton:"",noclick:""},null,8,["name","extension"])):((0,i.uX)(),(0,i.Wv)(x,{key:1,src:e.srcFile(n),name:n.name,inline:!1,extension:n.extension,"direct-link":n.directLink},null,8,["src","name","extension","direct-link"]))],64)}),256))]}),_:2},1024)],64)):(0,i.Q3)("v-if",!0)]}),_:2},1024)],64)):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0)],64)}),128))])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit"]),(0,i.bF)(q,{modelValue:e.tipo_modal,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.tipo_modal=n}),title:"Tipos",icon_ok:"plus",onSubmit:n[9]||(n[9]=function(n){return e.crear_tipo_modal=!0})},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",m,[(0,i.Lk)("div",v,[(0,i.bF)(F,{modelValue:e.crear_tipo_modal,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.crear_tipo_modal=n})},null,8,["modelValue"])])])]}),_:1},8,["modelValue"]),(0,i.bF)(q,{class:"ap_modal_info",modelValue:e.evento.info_modal,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.evento.info_modal=n}),title:e.evento.info.PRETITULO,ok:!1,cancel:!1},{postButtonFooter:(0,i.k6)(function(){return[e.permisoAT&&e.evento.info.EDITAR?((0,i.uX)(),(0,i.Wv)(S,{key:0,class:"q-mx-xs",label:"Eliminar",color:"negative",onClick:e.onDelete},null,8,["onClick"])):(0,i.Q3)("v-if",!0),e.permisoLE&&e.evento.info.EDITAR?((0,i.uX)(),(0,i.Wv)(S,{key:1,class:"q-mx-xs",label:"Editar",color:"primary",onClick:e.onEdit},null,8,["onClick"])):(0,i.Q3)("v-if",!0),(0,i.bF)(S,{class:"q-mx-xs",label:"Cerrar",color:"primary",onClick:n[10]||(n[10]=function(n){return e.evento.info_modal=!1})})]}),footerMobile:(0,i.k6)(function(){return[e.permisoLE&&e.evento.info.EDITAR?((0,i.uX)(),(0,i.Wv)(S,{key:0,icon:"edit",dende:"",flat:"",round:"",onClick:e.onEdit},null,8,["onClick"])):(0,i.Q3)("v-if",!0),e.permisoAT&&e.evento.info.EDITAR?((0,i.uX)(),(0,i.Wv)(S,{key:1,icon:"delete",dende:"",flat:"",round:"",onClick:e.onDelete},null,8,["onClick"])):(0,i.Q3)("v-if",!0)]}),default:(0,i.k6)(function(){return[(0,i.Lk)("div",_,[(0,i.bF)(N,{class:"no-padding no-border"},{default:(0,i.k6)(function(){return[(0,i.bF)(V,null,{default:(0,i.k6)(function(){return[(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{class:"text-weight-bold",overline:""},{default:(0,i.k6)(function(){return r()(n[12]||(n[12]=[(0,i.eW)("TIPO EVENTO",-1)]))}),_:1}),(0,i.bF)(I,{caption:""},{default:(0,i.k6)(function(){return[(0,i.bF)(X,{label:e.evento.info.PRETITULO,"text-color":"white",style:(0,a.Tr)({"background-color":e.evento.info.COLOR})},null,8,["label","style"])]}),_:1})]}),_:1})]}),_:1}),(0,i.bF)(V,null,{default:(0,i.k6)(function(){return[(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{class:"text-weight-bold",overline:""},{default:(0,i.k6)(function(){return r()(n[13]||(n[13]=[(0,i.eW)("TÍTULO",-1)]))}),_:1}),(0,i.bF)(I,{caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,a.v_)(e.evento.info.TITULO),1)]}),_:1})]}),_:1})]}),_:1}),e.evento.info.DESCRIPCION?((0,i.uX)(),(0,i.Wv)(V,{key:0},{default:(0,i.k6)(function(){return[(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{class:"text-weight-bold",overline:""},{default:(0,i.k6)(function(){return r()(n[14]||(n[14]=[(0,i.eW)("DESCRIPCIÓN",-1)]))}),_:1}),(0,i.bF)(I,{caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,a.v_)(e.evento.info.DESCRIPCION),1)]}),_:1})]}),_:1})]}),_:1})):(0,i.Q3)("v-if",!0),e.evento.info.TODO_EL_DIA?((0,i.uX)(),(0,i.Wv)(V,{key:1},{default:(0,i.k6)(function(){return[(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{class:"text-weight-bold",overline:""},{default:(0,i.k6)(function(){return r()(n[15]||(n[15]=[(0,i.eW)("TODOS EL DÍA",-1)]))}),_:1}),(0,i.bF)(I,{class:"row items-center",caption:""},{default:(0,i.k6)(function(){return[(0,i.bF)(R,{name:"daily_calendar",size:"md",color:"secondary"}),(0,i.Lk)("div",b,(0,a.v_)(e.date(e.evento.info.FECINI,"DD/MM/YYYY")),1)]}),_:1})]}),_:1})]}),_:1})):((0,i.uX)(),(0,i.Wv)(V,{key:2},{default:(0,i.k6)(function(){return[(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{class:"text-weight-bold",overline:""},{default:(0,i.k6)(function(){return r()(n[16]||(n[16]=[(0,i.eW)("INICIO Y FINAL DE EVENTO",-1)]))}),_:1}),(0,i.bF)(I,{class:"row items-center",caption:""},{default:(0,i.k6)(function(){return[(0,i.bF)(R,{name:"daily_calendar",size:"md",color:"secondary"}),(0,i.Lk)("div",g,(0,a.v_)(e.date(e.evento.info.FECINI,"DD/MM/YYYY HH:mm:ss")),1),(0,i.bF)(R,{name:"daily_calendar",size:"md",color:"secondary"}),(0,i.Lk)("div",k,(0,a.v_)(e.date(e.evento.info.FECFIN,"DD/MM/YYYY HH:mm:ss")),1)]}),_:1})]}),_:1})]}),_:1})),e.evento.info.ADJUNTOS&&e.evento.info.ADJUNTOS.length?((0,i.uX)(),(0,i.Wv)(N,{key:3,class:"no-padding rounded-borders",dense:""},{default:(0,i.k6)(function(){return[(0,i.bF)(V,{dense:""},{default:(0,i.k6)(function(){return[(0,i.bF)(C,null,{default:(0,i.k6)(function(){return[(0,i.bF)(I,{header:""},{default:(0,i.k6)(function(){return r()(n[17]||(n[17]=[(0,i.eW)("ARCHIVOS ADJUNTOS",-1)]))}),_:1})]}),_:1}),(0,i.bF)(C,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(S,{icon:"attach_file",dense:"",flat:"",round:"",size:"md"},{default:(0,i.k6)(function(){return[(0,i.bF)(L,{class:"round-badge",color:"negative",floating:"",rounded:"",justify:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,a.v_)(e.evento.info.ADJUNTOS.length),1)]}),_:1})]}),_:1})]}),_:1})]}),_:1}),(0,i.bF)(U),(0,i.bF)(E,{style:{height:"200px"}},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.evento.info.ADJUNTOS,function(n,t){return(0,i.uX)(),(0,i.Wv)(x,{src:e.srcFile(n),name:n.name,inline:!1,extension:n.extension,"direct-link":n.directLink},null,8,["src","name","extension","direct-link"])}),256))]}),_:1})]}),_:1})):(0,i.Q3)("v-if",!0)]}),_:1})])]}),_:1},8,["modelValue","title"])])]}),_:1})}var F=t(76080),A=t.n(F),E=t(45254),y=t.n(E),w=(t(30683),t(52133),t(50310),t(6724),t(83190),t(6123)),T=t(9736),C=t(16648),I=t(55973),V=t(3112),D=t(88567),O=t(95718),Q=t(20456),q=t(65673),L=t(82327),S=t(88865),U=t(66824),x=t(53380),N=t(2739),W=t(34262),X=t(95051),R=t(11654),M=t(12205),P=t(62565),$=t(50304),Y=t(72008),j=t(30640),H=t(32195),J=t(62006),K=(t(71225),t(5962),{class:"row"}),z={class:"col-12"},G={class:"row q-pa-sm q-col-gutter-sm"},B={class:"col-12"},Z={class:"col-12"},ee={class:"col-12"};function ne(e,n){var t=(0,i.g2)("q-tree"),o=(0,i.g2)("q-field"),r=(0,i.g2)("q-icon"),a=(0,i.g2)("q-card-section"),l=(0,i.g2)("q-card"),u=(0,i.g2)("q-input"),d=(0,i.g2)("sie-color"),c=(0,i.g2)("q-form"),s=(0,i.g2)("sie-modal");return(0,i.uX)(),(0,i.CE)("div",K,[(0,i.Lk)("div",z,[(0,i.bF)(o,null,{default:(0,i.k6)(function(){return[n[5]||(n[5]=(0,i.Lk)("div",{class:"stack-label"},"Tipos",-1)),(0,i.bF)(t,{class:"q-if-outlined",nodes:e.menu,"node-key":"id",tickStrategy:"leaf",ticked:e.filter,"onUpdate:ticked":n[0]||(n[0]=function(n){return e.filter=n}),onChangeTicked:e.changeTicked,onDelete:e.deleteNode,onEdit:e.editNode},null,8,["nodes","ticked","onChangeTicked","onDelete","onEdit"])]}),_:1}),e.empty?((0,i.uX)(),(0,i.Wv)(l,{key:0,class:"bg-primary text-white"},{default:(0,i.k6)(function(){return[(0,i.bF)(a,{class:"row q-col-gutter-x-sm"},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"info",size:"lg"}),n[6]||(n[6]=(0,i.Lk)("div",{class:"col"},"Antes de crear algun evento nuevo, por favor, cree al menos un tipo de evento.",-1))]}),_:1})]}),_:1})):(0,i.Q3)("v-if",!0)]),(0,i.bF)(s,{class:"ap_modal_evento_tipo",modelValue:e.modal,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.modal=n}),title:"Tipo de evento",onSubmit:e.save},{default:(0,i.k6)(function(){return[(0,i.bF)(c,{ref:"form"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",G,[(0,i.Lk)("div",B,[(0,i.bF)(u,{modelValue:e.tipo.form.ap_nombre,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.tipo.form.ap_nombre=n}),label:"Agregar un nombre",rules:[function(e){return!!e||"Campo obligatorio"},function(e){return e.length<=200||"Máximo 200 caracteres"}]},null,8,["modelValue","rules"])]),(0,i.Lk)("div",Z,[(0,i.bF)(d,{modelValue:e.tipo.form.ap_color,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.tipo.form.ap_color=n}),label:"Seleccione un color"},null,8,["modelValue"])]),(0,i.Lk)("div",ee,[(0,i.bF)(u,{modelValue:e.tipo.form.ap_orden,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.tipo.form.ap_orden=n}),label:"Orden",rules:[function(e){return!!e||"Campo obligatorio"}]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit"])])}var te=t(64642),oe=t(19230),re=t(982),ie=(t(90095),t(13715),t(80660)),ae=t(57668),le={defaultTipo:function(e){var n=e.apidtipo,t=void 0===n?null:n,o=e.apnombre,r=void 0===o?null:o,i=e.apcolor,a=void 0===i?"#000000":i,l=e.aporden,u=void 0===l?0:l;return{ap_id_tipo:t,ap_nombre:r,ap_color:a,ap_orden:u}},getMenu:function(){return y()(A()().m(function e(){var n,t,o;return A()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,ie.$http.get("api/agendapersonaltipo/getMenu");case 1:return n=e.v,t=n.data,o=n.empty,t.forEach(function(e){e.children.forEach(function(e){e.all||(e.edit=(0,ae["default"])().ruta.nivel>=2,e.delete=(0,ae["default"])().ruta.nivel>=3)})}),e.a(2,{data:t,empty:o})}},e)}))()},get:function(){return ie.$http.get("api/agendapersonaltipo/get")},save:function(e){return ie.$http.post("api/agendapersonaltipo/save",e)},delete:function(e){return ie.$http.delete("api/agendapersonaltipo/delete",{params:{id:e}})}},ue={emits:["update:modelValue","input","update:filtro","ticked"],components:{QInput:T.A,QForm:N.A,QCard:D.A,QCardSection:O.A,QIcon:W.A,SieColor:oe.A,QTree:te.A,SieModal:j.A,QField:w.Om},props:{modelValue:Boolean,filtro:Array},data:function(){return{menu:[],empty:!1,tipo:{form:le.defaultTipo({})}}},computed:{modal:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}},filter:{get:function(){return this.filtro},set:function(e){this.$emit("update:filtro",e)}}},methods:{init:function(){var e=this;return y()(A()().m(function n(){var t,o,r;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,le.getMenu();case 1:t=n.v,o=t.data,r=t.empty,e.menu=o,e.empty=r,e.tipo.form=le.defaultTipo({aporden:o.length?o[0].children.length+1:0});case 2:return n.a(2)}},n)}))()},save:function(){var e=this;return y()(A()().m(function n(){var t,o,r,i,a,l;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$refs.form.validate();case 1:if(t=n.v,t){n.n=2;break}return n.a(2);case 2:return n.n=3,le.save(e.tipo.form);case 3:return o=n.v,n.n=4,le.getMenu();case 4:r=n.v,i=r.data,a=r.empty,e.menu=i,e.empty=a,e.tipo.form=le.defaultTipo({aporden:i.length?i[0].children.length+1:0}),(0,re["default"])(o,"success"),n.n=6;break;case 5:n.p=5,l=n.v,(0,re["default"])(l.error.message,"error");case 6:return n.a(2)}},n,null,[[0,5]])}))()},changeTicked:function(){this.$emit("ticked")},deleteNode:function(e){var n=this;return y()(A()().m(function t(){var o,r,i,a,l,u,d;return A()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,n.$confirmar("¿Desea Eliminar? Esta acción es irreversible.","delete");case 1:if(o=t.v,!o){t.n=6;break}return t.p=2,t.n=3,le.delete(e);case 3:return r=t.v,t.n=4,le.getMenu();case 4:i=t.v,a=i.data,l=i.empty,n.menu=a,n.empty=l,(0,re["default"])(r,"success"),t.n=6;break;case 5:t.p=5,d=t.v,u=d.error,(0,re["default"])(u.message,"error");case 6:return t.a(2)}},t,null,[[2,5]])}))()},editNode:function(e){this.modal=!0,this.tipo.form=le.defaultTipo({apidtipo:e.id,apnombre:e.label,apcolor:e.color,aporden:e.orden})}},created:function(){var e=this;return y()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.init();case 1:return n.a(2)}},n)}))()}},de=t(12807);const ce=(0,de.A)(ue,[["render",ne]]);var se=ce,fe=t(81288),pe=t(26319),me=t(18105),ve=(t(39866),t(10239),t(62692),{defaultEvento:function(e){var n=e.apid,t=void 0===n?null:n,o=e.aptitulo,r=void 0===o?null:o,i=e.apdescripcion,a=void 0===i?null:i,l=e.apfhinicio,u=void 0===l?null:l,d=e.apfhfin,c=void 0===d?null:d,s=e.apidtipo,f=void 0===s?1:s,p=e.aptodoeldia,m=void 0===p?0:p,v=e.apnemos,_=void 0===v?[]:v,b=e.apotradescripcion,g=void 0===b?null:b,k=e.apadjuntos,h=void 0===k?[]:k;return{ap_id:t,ap_titulo:r,ap_descripcion:a,ap_fh_inicio:u,ap_fh_fin:c,ap_id_tipo:f,ap_todo_el_dia:m,ap_nemos:_,ap_otra_descripcion:g,ap_adjuntos:h}},get:function(e){return ie.$http.get("api/agendapersonal/get",{params:e})},save:function(e){return ie.$http.post("api/agendapersonal/save",e)},getFormulario:function(e){return ie.$http.get("api/agendapersonal/getFormulario",{params:{idtipo:e}})},getRules:function(e){for(var n=[],t=function(){var t=e[o];if("required"===t&&n.push(function(e){return!!e||"Campo obligatorio"}),t&&t.includes("length")){var r=parseInt(t.split("-")[1]);n.push(function(e){return e.length<=r||"Máximo ".concat(r," caracteres")})}},o=0;o<e.length;o++)t();return n},read:function(e){return ie.$http.post("api/agendapersonal/read",{id:e})},delete:function(e){return ie.$http.post("api/agendapersonal/delete",{id:e})}}),_e={components:{QInput:T.A,QSelect:C.A,QToggle:I.A,QCheckbox:V.A,QCard:D.A,QCardSection:O.A,QCardActions:Q.A,QList:q.A,QItem:L.A,QItemSection:S.A,QItemLabel:U.A,QSeparator:x.A,QForm:N.A,QIcon:W.A,QChip:X.A,QBtn:R.A,QScrollArea:M.A,QBadge:P.A,QDatetime:$.A,SieCalendar:Y.A,SieModal:j.A,SieCloud:H.A,QDownloadFile:J.A,TipoEvento:se,QPage:w.Tu},data:function(){return{sie:(0,ae["default"])(),eventos:[],evento:{modal:!1,tipos:[],form:ve.defaultEvento({}),info:{},info_modal:!1},crear_tipo_modal:!1,tipo_modal:!1,filtro:[],formulario:[],modal_adjunto_evento:!1}},computed:{buttons:function(){var e=this,n=[{icon:"calendar_today",label:"Crear Evento",permiso:">=2",click:function(){e.onDay()}}];return(0,fe.isGreater)()?n.unshift({icon:"plus",label:"Crear Tipo",permiso:">=2",click:function(){e.crear_tipo_modal=!0}}):n.unshift({icon:"plus",label:"Tipos",click:function(){e.tipo_modal=!0}}),n},isGreater:function(){return(0,fe.isGreater)()},permisoLE:function(){return(0,ae["default"])().ruta.nivel>=2},permisoAT:function(){return(0,ae["default"])().ruta.nivel>=3},expanded:function(){return!0!==(0,ae["default"])().esOtros}},methods:{date:me.Ay,onDay:function(e){var n=this;return y()(A()().m(function t(){var o,r;return A()().w(function(t){while(1)switch(t.n){case 0:return o=new Date,e=e||o,e=(0,pe.setTime)({date:e,hour:o.getHours(),minute:o.getMinutes(),second:o.getSeconds()}),r=new Date(e),r=(0,pe.setTime)({date:r,hour:o.getHours()+1}),n.evento.form=ve.defaultEvento({apfhinicio:e,apfhfin:r}),t.n=1,le.get();case 1:return n.evento.tipos=t.v,t.n=2,n.getFormulario(1);case 2:n.evento.modal=!0;case 3:return t.a(2)}},t)}))()},onEvent:function(e){var n=this;return y()(A()().m(function t(){return A()().w(function(t){while(1)switch(t.n){case 0:if(n.evento.info=e,n.evento.info_modal=!0,!e.PORLEER){t.n=3;break}return t.n=1,ve.read(e.ID);case 1:return n.eventos=[],t.n=2,ve.get({id_tipo:n.filtro});case 2:n.eventos=t.v;case 3:return t.a(2)}},t)}))()},onEdit:function(){var e=this;return y()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return e.evento.form=ve.defaultEvento({apid:e.evento.info.ID,aptitulo:e.evento.info.TITULO,apdescripcion:e.evento.info.DESCRIPCION,apfhinicio:e.evento.info.FECINI,apfhfin:e.evento.info.FECFIN,apidtipo:e.evento.info.TIPO,aptodoeldia:e.evento.info.TODO_EL_DIA,apnemos:e.evento.info.NEMOS,apotradescripcion:e.evento.info.OTRA_DESCRIPCION,apadjuntos:e.evento.info.ADJUNTOS}),n.n=1,le.get();case 1:return e.evento.tipos=n.v,n.n=2,e.getFormulario(e.evento.info.TIPO);case 2:e.evento.modal=!0;case 3:return n.a(2)}},n)}))()},onDelete:function(){var e=this;return y()(A()().m(function n(){var t,o,r,i,a;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,e.$confirmar("¿Desea Eliminar? Esta acción es irreversible.","delete");case 1:if(t=n.v,!t){n.n=6;break}return n.p=2,o=e.evento.info.ID,n.n=3,ve.delete(o);case 3:return r=n.v,e.eventos=[],n.n=4,ve.get({id_tipo:e.filtro});case 4:e.eventos=n.v,e.evento.info_modal=!1,(0,re["default"])(r,"success"),n.n=6;break;case 5:n.p=5,a=n.v,i=a.error,(0,re["default"])(i.message,"error");case 6:return n.a(2)}},n,null,[[2,5]])}))()},onTodoElDia:function(e){if(e){var n=this.evento.form,t=(0,pe.setTime)({date:new Date(n.ap_fh_inicio),hour:0,minute:0,second:0}),o=(0,pe.setTime)({date:new Date(n.ap_fh_inicio),hour:23,minute:59,second:59});n.ap_fh_inicio=t,n.ap_fh_fin=o,this.evento.form=n}},save:function(){var e=this;return y()(A()().m(function n(){var t,o,r,i,a;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$refs.form.validate();case 1:if(t=n.v,t){n.n=2;break}return n.a(2);case 2:return n.n=3,ve.save(e.evento.form);case 3:return o=n.v,r=o.message,i=o.info,e.eventos=[],n.n=4,ve.get({id_tipo:e.filtro});case 4:e.eventos=n.v,i&&(e.evento.info=i),e.evento.modal=!1,(0,re["default"])(r,"success"),n.n=6;break;case 5:n.p=5,a=n.v,(0,re["default"])(a.error.message,"error");case 6:return n.a(2)}},n,null,[[0,5]])}))()},onFiltro:function(){var e=this;return y()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return e.eventos=[],n.n=1,ve.get({id_tipo:e.filtro});case 1:e.eventos=n.v;case 2:return n.a(2)}},n)}))()},getFormulario:function(e){var n=this;return y()(A()().m(function t(){return A()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,ve.getFormulario(e);case 1:n.formulario=t.v;case 2:return t.a(2)}},t)}))()},getRules:function(e){return ve.getRules(e)},srcFile:function(e){return"".concat(this.sie.api,"/HyoArchivo/archivo/").concat(e.id,"/AGENDA_PERSONAL_ADJUNTO/RUTA/APA_ID")}},watch:{filtro:function(e){var n=this;return y()(A()().m(function t(){return A()().w(function(t){while(1)switch(t.n){case 0:if(!Array.isArray(e)||!e.length){t.n=2;break}return t.n=1,ve.get({id_tipo:e});case 1:n.eventos=t.v;case 2:return t.a(2)}},t)}))()}},created:function(){var e=this;return y()(A()().m(function n(){var t,o,r;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,le.getMenu();case 1:return t=n.v,o=t.data,r=o[0].children.map(function(e){return e.id}),e.filtro=r,n.n=2,ve.get({id_tipo:r});case 2:e.eventos=n.v;case 3:return n.a(2)}},n)}))()}};const be=(0,de.A)(_e,[["render",h]]);var ge=be}}]);