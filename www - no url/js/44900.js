"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[44900],{44900:function(e,a,o){o.r(a),o.d(a,{default:function(){return qr}});var t=o(8445),n=o.n(t),l=(o(52776),o(53113),o(61758)),i=o(58790),r={class:"q-ma-xs"},s={class:"col-8"},u={class:"column"},c={class:"row"};function d(e,a){var o=this,t=(0,l.g2)("sie-table"),d=(0,l.g2)("sie-modal"),m=(0,l.g2)("q-search"),f=(0,l.g2)("q-toolbar"),p=(0,l.g2)("q-select"),h=(0,l.g2)("q-item"),v=(0,l.g2)("q-list"),b=(0,l.g2)("q-scroll-area"),g=(0,l.g2)("q-btn"),C=(0,l.g2)("q-item-side"),O=(0,l.g2)("q-item-tile"),A=(0,l.g2)("q-item-main"),I=(0,l.g2)("q-btn-dropdown"),E=(0,l.g2)("q-btn-group"),D=(0,l.g2)("sie-select"),T=(0,l.g2)("fila-fecha"),S=(0,l.g2)("q-card"),R=(0,l.g2)("q-tooltip"),k=(0,l.g2)("q-fab-action"),M=(0,l.g2)("q-popover"),N=(0,l.g2)("q-fab"),V=(0,l.g2)("q-page-sticky"),F=(0,l.g2)("q-page"),_=(0,l.gN)("close-overlay");return(0,l.uX)(),(0,l.Wv)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(d,{class:"modal-accesos-directos",modelValue:e.modalSalones,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.modalSalones=a}),title:"Seleccion de Salones",onSubmit:e.saveSalones},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{class:"q-my-sm",ref:"tablaSalones",context:o,dense:"",flat:"",bordered:"","wrap-cells":"",menu:!1,css:"width: 100%; height: calc(100vh - 315px);padding-top: 0",columns:e.configSalones,data:o.salones,selection:"multiple","load-selection":e.loadSalones},null,8,["columns","data","load-selection"])]}),_:1},8,["modelValue","onSubmit"]),(0,l.bF)(d,{class:"modal-accesos-directos",modelValue:e.modalAbierto,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.modalAbierto=a}),title:"Configuracion de Matricula",onSubmit:e.guardarConfiguracion},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",r,[(0,l.bF)(m,{class:"col q-if-outlined",modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.search=a}),onInput:a[2]||(a[2]=function(a){return e.filtrar(e.search)})},null,8,["modelValue"]),(0,l.bF)(f,{class:"row",color:"secondary"},{default:(0,l.k6)(function(){return n()(a[5]||(a[5]=[(0,l.Lk)("span",{class:"col-10"},"Parametro",-1),(0,l.Lk)("span",{class:"col"},"Valor",-1)]))}),_:1}),(0,l.bF)(b,{style:{height:"350px"}},{default:(0,l.k6)(function(){return[(0,l.bF)(v,{highlight:"","inset-separator":""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.configuracion,function(a,o){return(0,l.uX)(),(0,l.Wv)(h,{key:o,class:"row justify-between items-center q-py-none"},{default:(0,l.k6)(function(){return[(0,l.Lk)("span",s,(0,i.v_)(a.PARAM_DESC),1),(0,l.bF)(p,{class:"col q-if-outlined",modelValue:a.ESTADO,"onUpdate:modelValue":function(e){return a.ESTADO=e},options:e.combos[a.ORIGEN],disable:a.DESHABILITADO},null,8,["modelValue","onUpdate:modelValue","options","disable"])]}),_:2},1024)}),128))]}),_:1})]}),_:1})])]}),_:1},8,["modelValue","onSubmit"]),(0,l.bF)(f,{class:"row justify-between shadow-2",color:"white"},{default:(0,l.k6)(function(){return[a[6]||(a[6]=(0,l.Lk)("div",null,null,-1)),(0,l.bF)(E,{rounded:""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaConfiguracionFinal,function(a,o){return(0,l.uX)(),(0,l.CE)(l.FK,{key:o},[o<5?((0,l.uX)(),(0,l.Wv)(g,{key:0,rounded:"",onClick:function(o){return e.seleccionaTitulo(a)},class:(0,i.C4)({"boton-seleccionado":e.titSelect===a.valor,"boton-no-seleccionado":e.titSelect!==a.valor})},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",u,[(0,l.Lk)("span",null,(0,i.v_)(e.$t(a.titulo)),1)])]}),_:2},1032,["onClick","class"])):(0,l.Q3)("v-if",!0)],64)}),128)),e.listaConfiguracionFinal.length>5?((0,l.uX)(),(0,l.Wv)(I,{key:0,rounded:"",class:(0,i.C4)({"boton-seleccionado":e.titSelect>4,"boton-no-seleccionado":e.titSelect<5})},{default:(0,l.k6)(function(){return[(0,l.bF)(v,{link:""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaConfiguracionFinal,function(a,o){return(0,l.bo)(((0,l.uX)(),(0,l.Wv)(h,{key:o},{default:(0,l.k6)(function(){return[o>=5?((0,l.uX)(),(0,l.Wv)(C,{key:0,icon:a.icono},null,8,["icon"])):(0,l.Q3)("v-if",!0),o>=5?((0,l.uX)(),(0,l.Wv)(A,{key:1},{default:(0,l.k6)(function(){return[(0,l.bF)(O,{label:""},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t(a.titulo)),1)]}),_:2},1024)]}),_:2},1024)):(0,l.Q3)("v-if",!0)]}),_:2},1024)),[[_]])}),128))]}),_:1})]}),_:1},8,["class"])):(0,l.Q3)("v-if",!0)]}),_:1}),(0,l.Lk)("div",c,[(0,l.bF)(D,{type:"outlined",noBottom:"",modelValue:e.anoMatricula,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.anoMatricula=a}),options:e.dataAnos,label:"ANO",val:"ANO",onInput:e.cambiarAno,placeholder:e.$t("ano")},null,8,["modelValue","options","onInput","placeholder"]),e.accesoConfig?((0,l.uX)(),(0,l.Wv)(g,{key:0,icon:"cog",onClick:e.abrirModal,round:"",flat:"",color:"black"},null,8,["onClick"])):(0,l.Q3)("v-if",!0)])]}),_:1}),"general"!==e.titSelect?((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.titSelect),{key:0,anoMat:e.anoMatricula,configuracion:e.configuracionFinal},null,8,["anoMat","configuracion"])):((0,l.uX)(),(0,l.Wv)(S,{key:1,class:"q-ma-md"},{default:(0,l.k6)(function(){return[(0,l.bF)(v,{highlight:"","inset-separator":""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaFechas,function(a,o){return(0,l.uX)(),(0,l.Wv)(T,{key:o,isGrados:1===e.configuracionFinal.M_GRADOS,title:a.DESCRIPCION,id:o,start:a.FH_INICIO,"onUpdate:start":function(e){return a.FH_INICIO=e},end:a.FH_FIN,"onUpdate:end":function(e){return a.FH_FIN=e},access:e.accesoElimniar,onEliminar:e.eliminarRegistro,onFechas:e.editFechas,configGen:e.configGen,salonesDet:e.salonesDet,matfecha:a.IDMATFECHA},null,8,["isGrados","title","id","start","onUpdate:start","end","onUpdate:end","access","onEliminar","onFechas","configGen","salonesDet","matfecha"])}),128))]}),_:1})]}),_:1})),e.accesoElimniar&&"general"===e.titSelect?((0,l.uX)(),(0,l.Wv)(V,{key:2,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[(0,l.bF)(N,{icon:"more_vert",color:"secondary",direction:"up"},{default:(0,l.k6)(function(){return[(0,l.bF)(k,{color:"secondary",icon:"save",onClick:e.guardar},{default:(0,l.k6)(function(){return[(0,l.bF)(R,{anchor:"center right",self:"center left",offset:[10,10]},{default:(0,l.k6)(function(){return[(0,l.Lk)("span",null,(0,i.v_)(e.$t("botones.guardar")),1)]}),_:1})]}),_:1},8,["onClick"]),(0,l.bF)(k,{color:"secondary",icon:"add"},{default:(0,l.k6)(function(){return[(0,l.bF)(R,{anchor:"center right",self:"center left",offset:[10,10]},{default:(0,l.k6)(function(){return[(0,l.Lk)("span",null,(0,i.v_)(e.$t("botones.agregar")),1)]}),_:1}),(0,l.bF)(M,{anchor:"top left",self:"bottom right",fit:""},{default:(0,l.k6)(function(){return[(0,l.bF)(v,{link:""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.procesoTipo,function(a,o){return(0,l.bo)(((0,l.uX)(),(0,l.Wv)(h,{key:o,class:(0,i.C4)({"q-color-inputs":!(e.procesoBloqueado&&e.procesoBloqueado.indexOf(a.IDMATTIPO)<0)}),disabled:!(e.procesoBloqueado&&e.procesoBloqueado.indexOf(a.IDMATTIPO)<0),onClick:function(o){return e.agregaParametro(a)}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.DESCRIPCION),1)]}),_:2},1032,["class","disabled","onClick"])),[[_]])}),128))]}),_:1})]}),_:1})]}),_:1})]}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0)]}),_:1})}var m=o(76080),f=o.n(m),p=o(45254),h=o.n(p),v=(o(23825),o(10239),o(89571),o(50310),o(90095),o(83190),o(44264),o(13715),o(24066),o(83972)),b=o(6123),g=o(96122),C=o(93616);function O(e,a){var o=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.Wv)(o,{class:"col"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,(0,i.v_)(e.anoMat),1)]}),_:1})}var A=o(57668),I={components:{QTable:b.kH,QTr:b.qh,QTd:b.Ef,QTooltip:b.nC,QLayoutHeader:b.t1,QToolbar:b.ZV,QCard:b.C$},props:["anoMat"],data:function(){return{sie:(0,A["default"])(),listaAnos:[]}},methods:{seleccionaAno:function(e){console.log(e,"xx3w")}},mounted:function(){this.seleccionaAno(this.anoMat)}},E=o(12807);const D=(0,E.A)(I,[["render",O]]);var T=D,S=(o(71225),o(5962),{class:"q-mx-xs"}),R={class:"row justify-between"},k={class:"row col"},M={class:"row justify-between"},N={class:"col justify-center"},V={class:"row"},F={class:"row q-ma-xs justify-between"},_={class:"q-ma-xs"},y={class:"q-px-xs q-mx-xs q-mb-sm border-field"},P={class:"leyenda"},L={class:"col row wrap justify-between"},U={key:0,class:"row justify-end"},$={class:"q-ma-xs"},q={class:"row col"},w={class:"row justify-center q-ma-xs"};function Q(e,a){var o=(0,l.g2)("q-tab"),t=(0,l.g2)("q-search"),r=(0,l.g2)("sie-select"),s=(0,l.g2)("q-select"),u=(0,l.g2)("q-datetime"),c=(0,l.g2)("q-btn"),d=(0,l.g2)("q-td"),m=(0,l.g2)("q-table"),f=(0,l.g2)("q-toggle"),p=(0,l.g2)("q-tab-pane"),h=(0,l.g2)("q-input"),v=(0,l.g2)("q-tooltip"),b=(0,l.g2)("sie-editor"),g=(0,l.g2)("q-tabs"),C=(0,l.g2)("sie-modal"),O=(0,l.g2)("q-item-main"),A=(0,l.g2)("q-item-side"),I=(0,l.g2)("q-item"),E=(0,l.g2)("q-list"),D=(0,l.g2)("reportes-matricula"),T=(0,l.g2)("q-fab-action"),Q=(0,l.g2)("q-fab"),j=(0,l.g2)("q-page-sticky"),x=(0,l.g2)("documentos"),X=(0,l.g2)("parametros"),G=(0,l.g2)("mensaje"),H=(0,l.g2)("orden"),B=(0,l.g2)("regenerar");return(0,l.uX)(),(0,l.Wv)(g,{class:"intranet--components--creserva",animated:"",swipeable:"",inverted:""},{title:(0,l.k6)(function(){return[e.showAdicional?((0,l.uX)(),(0,l.Wv)(o,{key:0,default:"",name:"parametros",label:e.$t("parametros")},null,8,["label"])):(0,l.Q3)("v-if",!0),(0,l.bF)(o,{default:!e.showAdicional,name:"listado",label:e.$t("listado")},null,8,["default","label"]),(0,l.bF)(o,{name:"documento",label:e.$t("documentos")},null,8,["label"]),(0,l.bF)(o,{name:"mensaje",label:e.$t(e.showAdicional?"mensaje":"formatos")},null,8,["label"]),e.showAdicional?((0,l.uX)(),(0,l.Wv)(o,{key:1,name:"orden",label:e.$t("orden")},null,8,["label"])):(0,l.Q3)("v-if",!0)]}),default:(0,l.k6)(function(){return[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.adicionalOpen),{ano:e.anoMat,alucodsSelect:e.tablaReservas.registrosSeleccionados,configuracion:e.configuracion,onLimpiarOpen:e.limpiarOpen,permiso:e.permiso,isReserva:!0},null,40,["ano","alucodsSelect","configuracion","onLimpiarOpen","permiso"])),(0,l.bF)(p,{class:"bg-white",name:"listado","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",S,[(0,l.Lk)("div",R,[(0,l.bF)(t,{class:"col q-if-outlined",color:"primary",modelValue:e.tablaReservas.filter,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tablaReservas.filter=a})},null,8,["modelValue"]),(0,l.Lk)("div",k,[(0,l.bF)(r,{class:"col",type:"outlined",modelValue:e.instrucod,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.instrucod=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",onInput:e.seleccionarNivel},null,8,["modelValue","options","onInput"]),(0,l.bF)(r,{class:"col",type:"outlined",modelValue:e.gradocod,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.gradocod=a}),options:e.grados[e.instrucod],label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado",onInput:e.filtrarDatos},null,8,["modelValue","options","onInput"])])]),(0,l.Lk)("div",M,[(0,l.Q3)("span {{filtroEstado}}"),(0,l.bF)(s,{class:"col q-if-outlined",modelValue:e.filtroEstado,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.filtroEstado=a}),"float-label":e.$t("matricula.estado"),options:e.estadosReserva,onInput:e.filtrarDatos},null,8,["modelValue","float-label","options","onInput"]),(0,l.bF)(u,{class:"col q-if-outlined",modelValue:e.fecIni,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.fecIni=a}),format:"DD/MM/YYYY","no-bottom":"","float-label":e.$t("fechainicio"),onInput:e.filtrarDatos},null,8,["modelValue","float-label","onInput"]),(0,l.bF)(u,{class:"col q-if-outlined",modelValue:e.fecFin,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.fecFin=a}),format:"DD/MM/YYYY","no-bottom":"","float-label":e.$t("fechafin"),onInput:e.filtrarDatos},null,8,["modelValue","float-label","onInput"])])]),(0,l.bF)(m,{class:"q-ma-xs","row-key":"ALUCOD",data:e.dataReservas,columns:e.tablaReservas.columns,style:(0,i.Tr)({height:e.alto+"px"}),selection:e.tablaReservas.tipoSeleccion,selected:e.tablaReservas.registrosSeleccionados,"onUpdate:selected":a[6]||(a[6]=function(a){return e.tablaReservas.registrosSeleccionados=a}),filter:e.tablaReservas.filter},{"body-cell-MATRICULADO":(0,l.k6)(function(e){return[(0,l.bF)(d,{props:e},{default:(0,l.k6)(function(){return[(0,l.bF)(c,{dense:"",round:"",flat:"",icon:e.row.MATRICULADO?"playlist_add_check":"close"},null,8,["icon"])]}),_:2},1032,["props"])]}),"body-cell-ELIMINAR":(0,l.k6)(function(a){return[(0,l.bF)(d,{props:a},{default:(0,l.k6)(function(){return[e.acceso?((0,l.uX)(),(0,l.Wv)(c,{key:0,dense:"",round:"",flat:"",icon:"delete",onClick:function(o){return e.eliminarReserva(a.row.ALUCOD)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),bottom:(0,l.k6)(function(){return[(0,l.Lk)("div",N,[(0,l.Lk)("div",V,[a[21]||(a[21]=(0,l.Lk)("span",null,"Total:",-1)),(0,l.Lk)("b",null,(0,i.v_)(e.dataReservas.length),1)])])]}),_:1},8,["data","columns","style","selection","selected","filter"]),(0,l.bF)(C,{title:e.$t("matricula.bloqDesbloqReserva"),modelValue:e.modalBloqueo,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.modalBloqueo=a}),ok:"Aceptar",onSubmit:e.grabarModal,loading:e.cargando},{default:(0,l.k6)(function(){return[(0,l.bF)(g,{class:"row",animated:"",swipeable:"",inverted:"",modelValue:e.tabSelect,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.tabSelect=a})},{title:(0,l.k6)(function(){return[(0,l.bF)(o,{default:"",name:"bloqueo",label:"Bloqueo"}),(0,l.bF)(o,{name:"mensaje",label:"Mensaje"})]}),default:(0,l.k6)(function(){return[(0,l.bF)(p,{name:"bloqueo"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",F,[(0,l.bF)(t,{class:"col q-if-outlined",color:"primary",modelValue:e.tablaBloqueo.filter,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.tablaBloqueo.filter=a})},null,8,["modelValue"]),(0,l.bF)(f,{modelValue:e.soloBloqueados,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.soloBloqueados=a}),label:e.$t("matricula.solobloqueados"),onInput:e.filtrarBloqueo},null,8,["modelValue","label","onInput"])]),(0,l.bF)(m,{class:"q-ma-xs","row-key":"ALUCOD",data:e.alumnosBloqueo,columns:e.tablaBloqueo.columns,"hide-bottom":"",style:{height:"50vh"},selection:e.tablaBloqueo.tipoSeleccion,selected:e.tablaBloqueo.registrosSeleccionados,"onUpdate:selected":a[9]||(a[9]=function(a){return e.tablaBloqueo.registrosSeleccionados=a}),filter:e.tablaBloqueo.filter},null,8,["data","columns","selection","selected","filter"])]}),_:1}),(0,l.bF)(p,{name:"mensaje"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",_,[(0,l.Lk)("fieldset",y,[(0,l.Lk)("legend",P,(0,i.v_)(e.$t("biblioteca.campos")),1),(0,l.Lk)("div",L,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.etiquetasMensaje,function(a){return(0,l.uX)(),(0,l.CE)("div",{key:a.titulo,class:"col-5"},[(0,l.bF)(h,{class:"q-ma-none q-if-outlined",modelValue:a.campo,"onUpdate:modelValue":function(e){return a.campo=e},readonly:"","float-label":e.$t(a.titulo)+": ","hide-underline":"","no-bottom":""},null,8,["modelValue","onUpdate:modelValue","float-label"])])}),128))])]),e.mensaje?((0,l.uX)(),(0,l.CE)("div",U,[(0,l.bF)(c,{round:"",dense:"",flat:"",color:"red",icon:"close",onClick:e.eliminarMensaje},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return n()(a[22]||(a[22]=[(0,l.eW)("Eliminar Mensaje",-1)]))}),_:1})]}),_:1},8,["onClick"])])):(0,l.Q3)("v-if",!0),(0,l.bF)(b,{modelValue:e.mensaje,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.mensaje=a}),label:e.$t("matricula.mensaje")},null,8,["modelValue","label"])])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1},8,["title","modelValue","onSubmit","loading"]),(0,l.bF)(C,{title:e.$t("imprimir"),modelValue:e.modalImprimir,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.modalImprimir=a}),ok:"Aceptar",onSubmit:a[14]||(a[14]=function(a){return e.modalImprimir=!1})},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",$,[(0,l.bF)(E,{link:"",highlight:"","inset-separator":""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.reportes,function(a,o){return(0,l.uX)(),(0,l.Wv)(I,{key:o,onClick:function(o){return!(a.formats.length>1)&&e.imprimir(a.parametros,a.formats[0])}},{default:(0,l.k6)(function(){return[(0,l.bF)(O,{label:a.titulo},null,8,["label"]),(0,l.bF)(A,{right:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",q,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.formats,function(o){return(0,l.uX)(),(0,l.Wv)(c,{flat:"",dense:"",round:"",onClick:function(t){return e.imprimir(a.parametros,o)},icon:"xls"===o?"file_excel":"file_pdf"},null,8,["onClick","icon"])}),256))])]}),_:2},1024)]}),_:2},1032,["onClick"])}),128))]}),_:1})])]}),_:1},8,["title","modelValue"]),(0,l.bF)(C,{modelValue:e.modalFecven,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.modalFecven=a}),title:" Fecha de vencimiento",onSubmit:e.grabarVencimiento},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",w,[(0,l.bF)(u,{class:"q-if-outlined",modelValue:e.fecVenc,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.fecVenc=a}),format:"DD/MM/YYYY",type:"date","float-label":e.$t("fecha")},null,8,["modelValue","float-label"])])]}),_:1},8,["modelValue","onSubmit"]),(0,l.bF)(C,{modelValue:e.modalPrintIndividual,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.modalPrintIndividual=a}),title:"Documentos de "+e.alumnoSelect.NOMCOMP},{default:(0,l.k6)(function(){return[(0,l.bF)(D,{ano:e.anoMat,alucodsSelect:e.tablaReservas.registrosSeleccionados,estudiante:e.tablaReservas.registrosSeleccionados[0],configuracion:e.configuracion,parametros:e.parametros,niveles:e.niveles,grados:e.grados,regenDoc:e.regenDoc},null,8,["ano","alucodsSelect","estudiante","configuracion","parametros","niveles","grados","regenDoc"])]}),_:1},8,["modelValue","title"]),(0,l.bF)(j,{position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[(0,l.bF)(Q,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,l.k6)(function(){return[e.acceso&&e.validarDeuda?((0,l.uX)(),(0,l.Wv)(T,{key:0,color:"secondary",icon:"calendar",onClick:e.openVencimiento},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return n()(a[23]||(a[23]=[(0,l.eW)("Vencimiento de deudas",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,l.Q3)("v-if",!0),e.acceso&&1==e.tablaReservas.registrosSeleccionados.length&&e.showAdicional?((0,l.uX)(),(0,l.Wv)(T,{key:1,color:"secondary",icon:"check",onClick:a[18]||(a[18]=function(a){return e.validarReserva(e.tablaReservas.registrosSeleccionados)})},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.validar")),1)]}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0),e.acceso&&e.tablaReservas.registrosSeleccionados.length>0?((0,l.uX)(),(0,l.Wv)(T,{key:2,color:"secondary",icon:"delete",onClick:a[19]||(a[19]=function(a){return e.eliminarReserva(null)})},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0),e.acceso?((0,l.uX)(),(0,l.Wv)(T,{key:3,color:"secondary",icon:"block",onClick:e.abrirModalBloquear},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.bloquear")),1)]}),_:1})]}),_:1},8,["onClick"])):(0,l.Q3)("v-if",!0),(0,l.bF)(T,{color:"secondary",icon:"print",onClick:e.abrirModalImprimir},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1},8,["onClick"]),(0,l.bF)(T,{color:"secondary",icon:"restore_page",onClick:e.openRegen},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return n()(a[24]||(a[24]=[(0,l.eW)("Regenerar Documentos",-1)]))}),_:1})]}),_:1},8,["onClick"]),e.transferirMatricula&&e.acceso&&e.tablaReservas.registrosSeleccionados.length>0?((0,l.uX)(),(0,l.Wv)(T,{key:4,color:"secondary",icon:"swap_horiz",onClick:a[20]||(a[20]=function(a){return e.transferirReservas(e.tablaReservas.registrosSeleccionados)})},{default:(0,l.k6)(function(){return[(0,l.bF)(v,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.transferir")),1)]}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0)]}),_:1})]}),_:1})]}),_:1}),(0,l.bF)(p,{class:"bg-white column",name:"documento","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.bF)(x,{class:"col",reserva:"S",anoMat:e.anoMat,style:(0,i.Tr)({"max-height":e.alto+"px","overflow-x":"scroll"}),reservaEspecial:e.showAdicional},null,8,["anoMat","style","reservaEspecial"])]}),_:1}),(0,l.bF)(p,{class:"bg-white column",name:"parametros","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.bF)(X,{class:"col",reserva:"S",anoMat:e.anoMat,configuracion:e.configuracion,isReserva:!0},null,8,["anoMat","configuracion"])]}),_:1}),(0,l.bF)(p,{class:"bg-white column",name:"mensaje","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.bF)(G,{class:"col",reserva:"S",anoMat:e.anoMat,configuracion:e.configuracion,isReserva:!0,soloBotones:!e.showAdicional},null,8,["anoMat","configuracion","soloBotones"])]}),_:1}),(0,l.bF)(p,{class:"bg-white column",name:"orden","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.bF)(H,{class:"col",reserva:"S",anoMat:e.anoMat,configuracion:e.configuracion,isReserva:!0},null,8,["anoMat","configuracion"])]}),_:1}),e.modalRegen?((0,l.uX)(),(0,l.Wv)(B,{key:0,niveles:e.niveles,grados:e.grados,ano:e.anoMat,onCloseModal:e.cerrarRegen},null,8,["niveles","grados","ano","onCloseModal"])):(0,l.Q3)("v-if",!0)]}),_:1})}var j=o(57008),x=o.n(j),X=o(99550),G=o.n(X),H=(o(515),o(27153),o(66307),o(30545)),B=o(6083),z=o(982),W=o(36493),K=o(33001),J=o(80660),Y=o(18105),Z=o(30640),ee=o(69027),ae=o(2819),oe={class:"col bg-white"},te={key:0,class:"q-table q-table-horizontal-separator q-card"},ne={key:0},le={class:"text-bold"},ie={class:"text-bold"},re={class:"text-bold"},se={key:1,class:"text-bold"},ue={key:2,class:"text-bold"},ce={key:0,style:{"text-align":"center"}},de={key:0},me={key:1},fe={style:{"text-align":"center"}},pe={style:{"text-align":"center"}},he={key:1,style:{"text-align":"center"}},ve={key:2,style:{"text-align":"center"}},be=["colspan"],ge={class:"row justify-between q-pa-xs items-center"},Ce={class:"row justify-center col"},Oe={class:"row justify-end col"},Ae={key:1,class:"column"},Ie={class:"q-table q-table-horizontal-separator q-card"},Ee={class:"row"},De={class:"label-especial"},Te={class:"text-bold q-mx-xs label-especial"},Se={class:"row"},Re={class:"row sublabel-especial"},ke={class:"row q-mx-sm sublabel-especial"},Me={class:"row"},Ne={colspan:"2"},Ve={class:"row justify-between q-pa-xs items-center"},Fe={class:"row justify-center col"},_e={class:"row justify-end col"},ye={class:"col",style:{"min-height":"60vh","min-width":"50vw"}},Pe={class:"row justify-start"},Le={key:1,class:"row q-mx-sm"},Ue=["innerHTML"],$e={key:0,class:"row justify-end"},qe={class:"row col"},we={class:"column"},Qe={key:0,class:"row col justify-end"},je={class:"row col"},xe={key:0,class:"q-table q-table-horizontal-separator q-card"},Xe=["innerHTML"];function Ge(e,a){var o=(0,l.g2)("header-btn"),t=(0,l.g2)("q-icon"),r=(0,l.g2)("q-select"),s=(0,l.g2)("q-btn"),u=(0,l.g2)("draggable"),c=(0,l.g2)("q-tooltip"),d=(0,l.g2)("q-tab"),m=(0,l.g2)("q-checkbox"),f=(0,l.g2)("q-radio"),p=(0,l.g2)("q-tab-pane"),h=(0,l.g2)("sie-pdf"),v=(0,l.g2)("q-search"),b=(0,l.g2)("q-item-main"),g=(0,l.g2)("q-item-tile"),C=(0,l.g2)("q-item-side"),O=(0,l.g2)("q-item"),A=(0,l.g2)("q-scroll-area"),I=(0,l.g2)("q-list"),E=(0,l.g2)("q-td"),D=(0,l.g2)("q-table"),T=(0,l.g2)("q-tabs"),S=(0,l.g2)("sie-modal"),R=(0,l.g2)("documento");return(0,l.uX)(),(0,l.CE)("div",oe,[e.hideHead?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(o,{key:0,name:e.$t("matricula.documentos"),buttons:e.buttons},null,8,["name","buttons"])),(0,l.Lk)("div",{class:"q-table-middle",style:(0,i.Tr)({height:e.alto})},[e.isLess?((0,l.uX)(),(0,l.CE)("div",Ae,[(0,l.Lk)("table",Ie,[a[13]||(a[13]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Documentos"),(0,l.Lk)("th")])],-1)),(0,l.bF)(u,{modelValue:e.dataDocumentos,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.dataDocumentos=a}),tag:"tbody",move:e.ordenarDocumento(e.dataDocumentos)},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dataDocumentos,function(o,n){return(0,l.uX)(),(0,l.CE)("tr",{key:o.ID},[(0,l.Lk)("td",null,[(0,l.Lk)("div",Ee,[(0,l.Lk)("span",De,(0,i.v_)(o.TITULO),1),(0,l.Lk)("span",Te,"("+(0,i.v_)(o.TIPODESC)+")",1)]),(0,l.Lk)("div",Se,[(0,l.Lk)("div",Re,[a[10]||(a[10]=(0,l.Lk)("div",{class:"text-bold"},"Fecha: ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.date(o.FH_REGISTRO,"DD/MM/YYYY")),1)]),(0,l.Lk)("div",ke,[a[11]||(a[11]=(0,l.Lk)("div",{class:"text-bold"},"Usuario: ",-1)),(0,l.Lk)("span",null,(0,i.v_)(o.USUCOD),1)])])]),(0,l.Lk)("td",null,[(0,l.Lk)("div",Me,[(0,l.bF)(t,{size:"xs",name:"remove_red_eye",onClick:function(a){return e.abrirModalVer(o)}},null,8,["onClick"]),e.permiso>2?((0,l.uX)(),(0,l.Wv)(t,{key:0,size:"xs",name:"edit",onClick:function(a){return e.agregar(o)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0),e.permiso>2?((0,l.uX)(),(0,l.Wv)(t,{key:1,size:"xs",name:"delete",onClick:function(a){return e.eliminarDocumento(o.ID)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0)])])])}),128))]}),_:1},8,["modelValue","move"]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",Ne,[(0,l.Lk)("div",Ve,[a[12]||(a[12]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.Lk)("div",Fe,[(0,l.bF)(s,{flat:"",round:"",dense:"",icon:"refresh",onClick:e.cargaDocumentos},{default:(0,l.k6)(function(){return[(0,l.bF)(c,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.actualizar")),1)]}),_:1})]}),_:1},8,["onClick"])]),(0,l.Lk)("div",_e,[(0,l.Lk)("b",null,"Total de Documentos: "+(0,i.v_)(e.dataDocumentos.length),1)])])])])])])])):((0,l.uX)(),(0,l.CE)("table",te,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[e.permiso>2?((0,l.uX)(),(0,l.CE)("th",ne,[(0,l.bF)(t,{name:"import_export",size:"20px"})])):(0,l.Q3)("v-if",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.documentos.columns,function(e){return(0,l.uX)(),(0,l.CE)("th",le,(0,i.v_)(e.label),1)}),256)),(0,l.Lk)("th",ie,(0,i.v_)(e.$t("tipo")),1),(0,l.Lk)("th",re,(0,i.v_)(e.$t("botones.ver")),1),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",se,(0,i.v_)(e.$t("botones.editar")),1)):(0,l.Q3)("v-if",!0),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",ue,(0,i.v_)(e.$t("botones.eliminar")),1)):(0,l.Q3)("v-if",!0)])]),(0,l.bF)(u,{modelValue:e.dataDocumentos,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.dataDocumentos=a}),tag:"tbody",move:e.ordenarDocumento(e.dataDocumentos)},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dataDocumentos,function(a,o){return(0,l.uX)(),(0,l.CE)("tr",{key:a.ID},[e.permiso>2?((0,l.uX)(),(0,l.CE)("td",ce,[(0,l.bF)(t,{name:"blur_on",size:"20px"})])):(0,l.Q3)("v-if",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.documentos.columns,function(o){return(0,l.uX)(),(0,l.CE)("td",{style:(0,i.Tr)({"text-align":o.align})},["FH_REGISTRO"!==o.field?((0,l.uX)(),(0,l.CE)("span",de,(0,i.v_)(a[o.field]),1)):((0,l.uX)(),(0,l.CE)("span",me,(0,i.v_)(e.date(a[o.field],"DD/MM/YYYY")),1))],4)}),256)),(0,l.Lk)("td",fe,[(0,l.bF)(r,{modelValue:a.TIPO,"onUpdate:modelValue":function(e){return a.TIPO=e},options:e.tipoDocumentos,readonly:""},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,l.Lk)("td",pe,[(0,l.bF)(s,{flat:"",round:"",dense:"",icon:"remove_red_eye",onClick:function(o){return e.abrirModalVer(a)}},null,8,["onClick"])]),e.permiso>2?((0,l.uX)(),(0,l.CE)("td",he,[e.bloqueado?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(s,{key:0,flat:"",round:"",dense:"",icon:"edit",onClick:function(o){return e.agregar(a)}},null,8,["onClick"]))])):(0,l.Q3)("v-if",!0),e.permiso>2?((0,l.uX)(),(0,l.CE)("td",ve,[e.bloqueado?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(s,{key:0,flat:"",round:"",dense:"",icon:"delete",onClick:function(o){return e.eliminarDocumento(a)}},null,8,["onClick"]))])):(0,l.Q3)("v-if",!0)])}),128))]}),_:1},8,["modelValue","move"]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{colspan:e.documentos.columns.length+(e.permiso>2?5:2)},[(0,l.Lk)("div",ge,[a[9]||(a[9]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.Lk)("div",Ce,[(0,l.bF)(s,{flat:"",round:"",dense:"",icon:"refresh",onClick:e.cargaDocumentos},{default:(0,l.k6)(function(){return[(0,l.bF)(c,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.actualizar")),1)]}),_:1})]}),_:1},8,["onClick"])]),(0,l.Lk)("div",Oe,[(0,l.Lk)("b",null,"Total de Documentos: "+(0,i.v_)(e.dataDocumentos.length),1)])])],8,be)])])]))],4),(0,l.bF)(S,{class:"modal-viewer",modelValue:e.modalVer,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.modalVer=a}),title:e.dataVer.TITULO,onSubmit:a[6]||(a[6]=function(a){return e.modalVer=!1}),footer:!1},{default:(0,l.k6)(function(){return[e.cargando?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(T,{key:0,animated:"",swipeable:"",inverted:""},{title:(0,l.k6)(function(){return[e.esArchivo||3===e.dataVer.TIPODOC?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(d,{key:0,default:!e.esArchivo&&3!==e.dataVer.TIPODOC,name:"formulario",label:e.$t("formulario")},null,8,["default","label"])),(0,l.bF)(d,{default:e.esArchivo||3===e.dataVer.TIPODOC,name:"documento",label:e.$t("documento")},null,8,["default","label"]),e.dataVer.infoRespuesta&&e.dataVer.infoRespuesta.estado?((0,l.uX)(),(0,l.Wv)(d,{key:1,name:"respuesta",label:e.$t("respuestas")},null,8,["label"])):(0,l.Q3)("v-if",!0)]}),default:(0,l.k6)(function(){return[(0,l.bF)(p,{class:"bg-white column",name:"formulario","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ye,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dataVer.info,function(e){return(0,l.uX)(),(0,l.CE)("div",Pe,[e.TIPO<2?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[0===e.TIPO?((0,l.uX)(),(0,l.Wv)(m,{key:0,class:"q-mx-sm",modelValue:e.respuesta,"onUpdate:modelValue":function(a){return e.respuesta=a}},null,8,["modelValue","onUpdate:modelValue"])):((0,l.uX)(),(0,l.CE)("div",Le,[(0,l.bF)(f,{modelValue:e.respuesta,"onUpdate:modelValue":function(a){return e.respuesta=a},val:"S",label:"Si"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(f,{modelValue:e.respuesta,"onUpdate:modelValue":function(a){return e.respuesta=a},val:"N",label:"No"},null,8,["modelValue","onUpdate:modelValue"])]))],64)):(0,l.Q3)("v-if",!0),(0,l.Lk)("span",{class:"col q-ma-xs",innerHTML:e.DESCRIPCION},null,8,Ue)])}),256))])]}),_:1}),(0,l.bF)(p,{class:"bg-white column",name:"documento","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.bF)(h,{class:"col",src:e.dataVer.URL,style:{"min-height":"60vh","min-width":"50vw"}},null,8,["src"])]}),_:1}),(0,l.bF)(p,{class:"bg-white column",name:"respuesta","keep-alive":""},{default:(0,l.k6)(function(){return[e.dataVer.infoRespuesta&&e.dataVer.infoRespuesta.especial?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[e.permiso>2?((0,l.uX)(),(0,l.CE)("div",$e,[(0,l.bF)(s,{class:"q-mx-sm",dense:"",icon:"file_pdf_o",color:"primary",onClick:e.imprimirRespuestas},{default:(0,l.k6)(function(){return n()(a[14]||(a[14]=[(0,l.eW)("Imprimir respuestas",-1)]))}),_:1},8,["onClick"]),(0,l.bF)(s,{dense:"",icon:"delete",onClick:e.deleteRespuestas,color:"primary"},{default:(0,l.k6)(function(){return n()(a[15]||(a[15]=[(0,l.eW)("Eliminar todas las respuestas",-1)]))}),_:1},8,["onClick"])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",qe,[(0,l.bF)(v,{class:"q-if-outlined col",modelValue:e.filterRespuesta,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.filterRespuesta=a}),onInput:a[3]||(a[3]=function(a){return e.filtrarRespEspeciales(e.filterRespuesta)})},null,8,["modelValue"])]),(0,l.bF)(I,{highlight:""},{default:(0,l.k6)(function(){return[(0,l.bF)(A,{style:{height:"70vh","max-height":"70vh"}},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dataVer.dataFiltrada,function(a){return(0,l.uX)(),(0,l.Wv)(O,{class:"q-card"},{default:(0,l.k6)(function(){return[(0,l.bF)(b,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("span",null,(0,i.v_)(a.NOMCOMP),1)]}),_:2},1024),(0,l.bF)(C,{right:""},{default:(0,l.k6)(function(){return[(0,l.bF)(g,null,{default:(0,l.k6)(function(){return[(0,l.bF)(s,{flat:"",dense:"",round:"",icon:"remove_red_eye",onClick:function(o){return e.openModalDetalle(a)}},null,8,["onClick"])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)}),256))]}),_:1})]}),_:1})],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",we,[e.permiso>2?((0,l.uX)(),(0,l.CE)("div",Qe,[(0,l.bF)(s,{class:"q-mx-sm",dense:"",icon:"file_pdf_o",color:"primary",onClick:e.imprimirRespuestas},{default:(0,l.k6)(function(){return n()(a[16]||(a[16]=[(0,l.eW)("Imprimir respuestas",-1)]))}),_:1},8,["onClick"]),(0,l.bF)(s,{dense:"",icon:"delete",onClick:e.deleteRespuestas,color:"primary"},{default:(0,l.k6)(function(){return n()(a[17]||(a[17]=[(0,l.eW)("Eliminar todas las respuestas",-1)]))}),_:1},8,["onClick"])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",je,[(0,l.bF)(v,{class:"col",modelValue:e.filterRespuesta,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.filterRespuesta=a})},null,8,["modelValue"])])]),e.dataVer.infoRespuesta?((0,l.uX)(),(0,l.Wv)(D,{key:0,"hide-bottom":"",data:e.dataVer.infoRespuesta.data,columns:e.columnsRespuesta,selection:"none","row-key":"KEY",style:{"max-height":"70vh"},filter:e.filterRespuesta},{"body-cell-RESPUESTA":(0,l.k6)(function(a){return[(0,l.bF)(E,{props:a},{default:(0,l.k6)(function(){return[e.dataVer.infoRespuesta.arrOpciones?((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"q-if-outlined",modelValue:a.row.RESPUESTA,"onUpdate:modelValue":function(e){return a.row.RESPUESTA=e},options:e.dataVer.infoRespuesta.arrOpciones,readonly:e.dataVer.infoRespuesta.arrOpciones&&1===e.dataVer.infoRespuesta.arrOpciones.length,onInput:function(o){return e.updateRespuesta(a.row)}},null,8,["modelValue","onUpdate:modelValue","options","readonly","onInput"])):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-DEL":(0,l.k6)(function(a){return[(0,l.bF)(E,{props:a},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{flat:"",dense:"",round:"",icon:"delete",onClick:function(o){return e.deleteRespuesta(a.row)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","filter"])):(0,l.Q3)("v-if",!0)],64))]}),_:1})]}),_:1}))]}),_:1},8,["modelValue","title"]),(0,l.bF)(S,{modelValue:e.modalDetalle,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.modalDetalle=a}),title:e.detalleModal.NOMCOMP},{default:(0,l.k6)(function(){return[e.detalleModal.data?((0,l.uX)(),(0,l.CE)("table",xe,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.columnsRespuestaEsp,function(e){return(0,l.uX)(),(0,l.CE)("th",null,(0,i.v_)(e.label),1)}),256))])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.detalleModal.data,function(a){return(0,l.uX)(),(0,l.CE)("tr",null,[(0,l.Lk)("td",{innerHTML:a.DESCRIPCION},null,8,Xe),(0,l.Lk)("td",null,[e.dataVer.infoRespuesta.arrOpciones&&e.dataVer.infoRespuesta.arrOpciones[a.ID]?((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"q-if-outlined",modelValue:a.RESPUESTA,"onUpdate:modelValue":function(e){return a.RESPUESTA=e},options:e.dataVer.infoRespuesta.arrOpciones[a.ID],readonly:e.dataVer.infoRespuesta.arrOpciones[a.ID]&&1===e.dataVer.infoRespuesta.arrOpciones[a.ID].length,onInput:function(o){return e.updateRespuesta(a)}},null,8,["modelValue","onUpdate:modelValue","options","readonly","onInput"])):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("td",null,[(0,l.bF)(s,{flat:"",dense:"",round:"",icon:"delete",onClick:function(o){return e.deleteRespuesta(a)}},null,8,["onClick"])])])}),256))])])):(0,l.Q3)("v-if",!0)]}),_:1},8,["modelValue","title"]),(0,l.bF)(S,{class:(0,i.C4)(["modal-viewer",{"modal-especial-general":!e.isLess}]),modelValue:e.modalDocumento,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.modalDocumento=a}),title:e.propsDocumento.tituloModal,footer:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(R,{reserva:e.reserva,anoMat:e.anoMat,configuracion:e.configuracion,data:e.propsDocumento,niveles:e.niveles,grados:e.grados,secciones:e.secciones,onGrabar:e.guardarDocumento,separarDocumentos:e.separarDocumentos,reservaEspecial:e.reservaEspecial},null,8,["reserva","anoMat","configuracion","data","niveles","grados","secciones","onGrabar","separarDocumentos","reservaEspecial"])]}),_:1},8,["modelValue","title","class"])])}o(56285);var He=o(80340),Be=o(39231),ze=o(84603),We={class:"col"},Ke={class:"q-ma-sm"},Je={class:"row justify-between"},Ye={class:"row"},Ze={style:{"max-height":"70vh","overflow-y":"auto"},bordered:"",separator:""},ea={class:"col row"},aa={class:"col"},oa={key:0,class:"col q-pa-xs border-field q-mb-sm"},ta={class:"leyenda"},na={class:"col row justify-around"},la={key:1,class:"col row justify-around"},ia={class:"col q-pa-xs border-field"},ra={class:"leyenda text-bold"},sa={class:"col row justify-around"},ua={class:"col row justify-around q-ma-sm"},ca={class:"row"},da={key:3,class:"col row justify-around q-ma-sm"},ma={key:2,class:"col"},fa={class:"col row justify-between"},pa={key:0,class:"msj-error"},ha={key:1},va={class:"q-table q-table-horizontal-separator q-card"},ba={class:"ancho-texto"},ga={style:{"text-align":"center"}},Ca=["innerHTML"],Oa={class:"col row justify-end"};function Aa(e,a){var o=(0,l.g2)("q-btn"),t=(0,l.g2)("q-select"),r=(0,l.g2)("sie-editor"),s=(0,l.g2)("q-list-header"),u=(0,l.g2)("q-search"),c=(0,l.g2)("q-item-section"),d=(0,l.g2)("q-item"),m=(0,l.g2)("q-tooltip"),f=(0,l.g2)("q-item-label"),p=(0,l.g2)("q-list"),h=(0,l.g2)("q-layout-drawer"),v=(0,l.g2)("sie-modal"),b=(0,l.g2)("q-tab"),g=(0,l.g2)("q-field"),C=(0,l.g2)("q-toggle"),O=(0,l.g2)("q-input"),A=(0,l.g2)("sie-select"),I=(0,l.g2)("q-tab-pane"),E=(0,l.g2)("sie-upload"),D=(0,l.g2)("q-table"),T=(0,l.g2)("q-icon"),S=(0,l.g2)("draggable"),R=(0,l.g2)("q-tabs"),k=(0,l.g2)("q-toolbar");return(0,l.uX)(),(0,l.CE)("div",We,[(0,l.bF)(v,{modelValue:e.modalNvAceptacion,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.modalNvAceptacion=a}),title:"Aceptacion",onSubmit:a[7]||(a[7]=function(a){return e.agregarAutorizacion(e.nvAceptacionData)}),maximized:""},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"lateral-btn",icon:"format_list_bulleted",color:"secondary",onClick:a[0]||(a[0]=function(a){return e.barraLateral=!0})}),(0,l.Lk)("div",Ke,[(0,l.bF)(t,{class:"col q-if-outlined",options:e.tipoAceptacionFiltrado,modelValue:e.nvAceptacionData.TIPO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.nvAceptacionData.TIPO=a}),"float-label":e.$t("tipo")},null,8,["options","modelValue","float-label"]),(0,l.Q3)('fieldset.col.q-pa-xs.border-field.q-mb-smlegend.leyenda Documento por:\ndiv.col.row.wrap.justify-between.q-ma-xs(style="height: 25vh;overflow-y: scroll;")\n  template(v-for="campo in campos" :key="campo.campo")\n    div.col-5\n      b {{campo.desc +": "}}\n      span {{campo.campo}}'),(0,l.bF)(r,{class:"col txt",modelValue:e.nvAceptacionData.DESCRIPCION,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.nvAceptacionData.DESCRIPCION=a}),label:e.$t("matricula.descripcion"),extra:{ruler:!0},cleartext:"D004"===e.sie.colcod,ref:"editor"},null,8,["modelValue","label","cleartext"]),(0,l.bF)(h,{side:"right",modelValue:e.barraLateral,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.barraLateral=a}),overlay:!0},{default:(0,l.k6)(function(){return[(0,l.Q3)('q-toolbardiv.column.col\n\n\n  div.row\n    q-search.col.q-if-outlined(v-model="filtrarCampos" placeholder="Filtrar campos")\n'),(0,l.bF)(p,null,{default:(0,l.k6)(function(){return[(0,l.Q3)("q-itemq-item-section"),(0,l.bF)(s,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Je,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("biblioteca.campos")),1),(0,l.bF)(o,{flat:"",dense:"",round:"",icon:"close",onClick:a[3]||(a[3]=function(a){return e.barraLateral=!1})})])]}),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)(function(){return[(0,l.bF)(c,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Ye,[(0,l.bF)(u,{class:"col q-if-outlined",modelValue:e.filtrarCampos,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.filtrarCampos=a}),placeholder:"Filtrar campos"},null,8,["modelValue"])])]}),_:1})]}),_:1}),(0,l.Lk)("div",Ze,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.camposFinal,function(t){return(0,l.uX)(),(0,l.Wv)(d,{key:t.campo},{default:(0,l.k6)(function(){return[(0,l.bF)(c,null,{default:(0,l.k6)(function(){return[(0,l.bF)(f,null,{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"q-mx-sm",dense:"",flat:"",round:"",icon:"copy",size:"sm",onClick:function(a){return e.copiarEtq(t.campo)}},{default:(0,l.k6)(function(){return[(0,l.bF)(m,null,{default:(0,l.k6)(function(){return n()(a[37]||(a[37]=[(0,l.eW)("Copiar etiqueta",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,l.Lk)("span",null,(0,i.v_)(t.campo),1)]}),_:2},1024),(0,l.bF)(f,{caption:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("b",null,(0,i.v_)(t.desc),1)]}),_:2},1024)]}),_:2},1024),(0,l.bF)(c,{avatar:""},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{flat:"",dense:"",round:"",icon:"add",onClick:function(a){return e.addTexto(t.campo)}},null,8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))])]}),_:1}),(0,l.Q3)('div.q-ma-xs(style="max-height: 90vh;overflow-y: auto;")template(v-for="campo in campos" :key="campo.campo")\n  div.row\n    b {{campo.desc +": "}}\n    span {{campo.campo}}\n//template(v-for="campo in campos")\n  div.row\n    b {{campo.desc+": "}}\n    span {{campo.campo}}')]}),_:1},8,["modelValue"])])]}),_:1},8,["modelValue"]),(0,l.bF)(R,{animated:"",swipeable:"",align:"justify",inverted:"",modelValue:e.tabSelect,"onUpdate:modelValue":a[36]||(a[36]=function(a){return e.tabSelect=a})},{title:(0,l.k6)(function(){return[(0,l.bF)(b,{default:"",name:"config",label:"Configuración"}),e.configuracion["M_DOCUMENTO_SECCION"]&&e.dataConfiguracion.TIPO?((0,l.uX)(),(0,l.Wv)(b,{key:0,name:"salon",label:"Aula"})):(0,l.Q3)("v-if",!0),1===e.dataConfiguracion.TIPO||4===e.dataConfiguracion.TIPO||3===e.dataConfiguracion.TIPO&&("S"!==e.reserva||e.reservaEspecial)?((0,l.uX)(),(0,l.Wv)(b,{key:1,name:"documento",label:3===e.dataConfiguracion.TIPO?"Aceptacion":"Documento"},null,8,["label"])):(0,l.Q3)("v-if",!0),e.dataConfiguracion.TIPO&&1!==e.dataConfiguracion.TIPO&&4!==e.dataConfiguracion.TIPO?((0,l.uX)(),(0,l.Wv)(b,{key:2,name:"autorizacion",label:2===e.dataConfiguracion.TIPO?"Autorización":"Documento"},null,8,["label"])):(0,l.Q3)("v-if",!0)]}),default:(0,l.k6)(function(){return[(0,l.bF)(I,{class:"col",name:"config","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ea,[(0,l.bF)(g,{class:"col",error:e.v$.dataConfiguracion.TIPO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{class:"col q-if-outlined",modelValue:e.v$.dataConfiguracion.TIPO.$model,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.v$.dataConfiguracion.TIPO.$model=a}),options:e.tipoDocumentos,"float-label":e.$t("tipo"),readonly:e.ocultaArchivo,onInput:e.selecionarTipo},null,8,["modelValue","options","float-label","readonly","onInput"])]}),_:1},8,["error","error-label"]),(0,l.bF)(C,{modelValue:e.dataConfiguracion.ESTADO,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.dataConfiguracion.ESTADO=a}),"true-value":1,"false-value":0,label:"Activo",color:"secondary"},null,8,["modelValue"])]),(0,l.Lk)("div",aa,[(0,l.bF)(g,{class:"col",error:e.v$.dataConfiguracion.TITULO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(O,{class:"q-if-outlined",modelValue:e.v$.dataConfiguracion.TITULO.$model,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.v$.dataConfiguracion.TITULO.$model=a}),"float-label":e.$t("titulo")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),e.configuracion["M_DOCUMENTO_ALUMNO"]?((0,l.uX)(),(0,l.CE)("fieldset",oa,[(0,l.Lk)("legend",ta,(0,i.v_)(e.$t("Documento por"))+" :",1),(0,l.Lk)("div",na,[a[38]||(a[38]=(0,l.Lk)("span",null,"Nivel y Grado",-1)),(0,l.bF)(C,{modelValue:e.dataConfiguracion.DOCUALUMNO,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.dataConfiguracion.DOCUALUMNO=a}),color:"secondary"},null,8,["modelValue"]),a[39]||(a[39]=(0,l.Lk)("span",null,"Alumno",-1))])])):(0,l.Q3)("v-if",!0),e.dataConfiguracion.DOCUALUMNO?((0,l.uX)(),(0,l.Wv)(A,{key:2,class:"col",type:"outlined",modelValue:e.dataConfiguracion.ALUCOD,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.dataConfiguracion.ALUCOD=a}),options:e.listaAlumnos,label:"NOMCOMP",val:"ALUCOD",placeholder:"Estudiante"},null,8,["modelValue","options"])):((0,l.uX)(),(0,l.CE)("div",la,[e.configuracion["M_DOCUMENTO_SECCION"]?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(A,{class:"col",type:"outlined",modelValue:e.dataConfiguracion.INSTRUCOD,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.dataConfiguracion.INSTRUCOD=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel"},null,8,["modelValue","options"]),(0,l.bF)(A,{class:"col",type:"outlined",modelValue:e.dataConfiguracion.GRADOCOD,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.dataConfiguracion.GRADOCOD=a}),options:e.grados[e.dataConfiguracion.INSTRUCOD],label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado"},null,8,["modelValue","options"]),e.configuracion["M_DOCUMENTO_SECCION"]?((0,l.uX)(),(0,l.Wv)(A,{key:0,class:"col",type:"outlined",modelValue:e.dataConfiguracion.SECCIONCOD,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.dataConfiguracion.SECCIONCOD=a}),options:e.secciones[e.dataConfiguracion.INSTRUCOD+e.dataConfiguracion.GRADOCOD],label:"SECCIONDES",val:"SECCIONCOD",placeholder:"ngs.seccion"},null,8,["modelValue","options"])):(0,l.Q3)("v-if",!0)],64))])),(0,l.bF)(g,{class:"col",error:e.v$.dataConfiguracion.IMPRIMIR.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.Lk)("fieldset",ia,[(0,l.Lk)("legend",ra,(0,i.v_)(e.$t("botones.descargar"))+" :",1),(0,l.Lk)("div",sa,[e.separarDocumentos?((0,l.uX)(),(0,l.Wv)(C,{key:0,modelValue:e.dataConfiguracion.DESCARGA_BIENVENIDA,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.dataConfiguracion.DESCARGA_BIENVENIDA=a}),"true-value":1,"false-value":0,label:"Mostrar en la bienvenida",color:"secondary",readonly:4===e.dataConfiguracion.TIPO},null,8,["modelValue","readonly"])):(0,l.Q3)("v-if",!0),(0,l.bF)(C,{modelValue:e.dataConfiguracion.DESCARGA_INICIO,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.dataConfiguracion.DESCARGA_INICIO=a}),"true-value":1,"false-value":0,label:e.$t("matricula.alinicio"),color:"secondary",readonly:4===e.dataConfiguracion.TIPO||1===e.dataConfiguracion.DESCARGA_BIENVENIDA},null,8,["modelValue","label","readonly"]),(0,l.bF)(C,{modelValue:e.dataConfiguracion.DESCARGA_FINAL,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.dataConfiguracion.DESCARGA_FINAL=a}),"true-value":1,"false-value":0,label:e.$t("matricula.alfinal"),color:"secondary",readonly:4===e.dataConfiguracion.TIPO},null,8,["modelValue","label","readonly"])])])]}),_:1},8,["error","error-label"]),(0,l.Lk)("div",ua,[(0,l.bF)(C,{class:"col",modelValue:e.dataConfiguracion.ANT_ALUMNO,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.dataConfiguracion.ANT_ALUMNO=a}),"true-value":1,"false-value":0,label:e.$t("matricula.solonuevos"),color:"secondary",disable:1==e.dataConfiguracion.SOLO_ANT},null,8,["modelValue","label","disable"]),(0,l.bF)(C,{class:"col",modelValue:e.dataConfiguracion.SOLO_ANT,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.dataConfiguracion.SOLO_ANT=a}),"true-value":1,"false-value":0,label:"Solo Antiguos",color:"secondary",disable:1==e.dataConfiguracion.ANT_ALUMNO},null,8,["modelValue","disable"]),4!==e.dataConfiguracion.TIPO?((0,l.uX)(),(0,l.Wv)(C,{key:0,class:"col",modelValue:e.dataConfiguracion.LISTA,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.dataConfiguracion.LISTA=a}),"true-value":1,"false-value":0,label:e.$t("matricula.listadeutiles"),color:"secondary"},null,8,["modelValue","label"])):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("div",ca,[e.dataConfiguracion.TIPO&&"2"==e.configuracion.M_SEPARA_SUBIDA_VALIDACION||1===e.configuracion.M_DOCUMENTO_ESPECIAL?((0,l.uX)(),(0,l.Wv)(A,{key:0,class:"col",type:"outlined",modelValue:e.dataConfiguracion.SECUCOD,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.dataConfiguracion.SECUCOD=a}),options:e.documentos,label:"SECUDES",val:"SECUCOD",placeholder:"Documento"},null,8,["modelValue","options"])):(0,l.Q3)("v-if",!0),e.dataConfiguracion.SECUCOD&&e.especial&&2===e.dataConfiguracion.TIPO||1===e.configuracion.M_DOCUMENTO_ESPECIAL?((0,l.uX)(),(0,l.Wv)(o,{key:1,flat:"",dense:"",round:"",onClick:e.limpiarSecucod,icon:"close",color:"red"},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]),e.configuracion.M_CONF_BOTONES||e.configuracion.M_DOCUMENTO_BACHILLERATO?((0,l.uX)(),(0,l.CE)("div",da,[e.configuracion.M_DOCUMENTO_BACHILLERATO?((0,l.uX)(),(0,l.Wv)(C,{key:0,class:"col",modelValue:e.dataConfiguracion.BACHILLERATO,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.dataConfiguracion.BACHILLERATO=a}),"true-value":1,"false-value":0,label:e.$t("bachillerato"),color:"secondary"},null,8,["modelValue","label"])):(0,l.Q3)("v-if",!0),e.configuracion.M_CONF_BOTONES?((0,l.uX)(),(0,l.Wv)(A,{key:1,class:"col",type:"outlined",modelValue:e.dataConfiguracion.ID_BTN,"onUpdate:modelValue":a[24]||(a[24]=function(a){return e.dataConfiguracion.ID_BTN=a}),options:e.listaBotones,label:"TEXTO",val:"ID_BTN",placeholder:"Botón"},null,8,["modelValue","options"])):(0,l.Q3)("v-if",!0),e.configuracion.M_CONF_BOTONES&&e.configuracion.M_DOCUMENTO_BACHILLERATO?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",ma))])):(0,l.Q3)("v-if",!0)]}),_:1}),(0,l.bF)(I,{class:"col",name:"documento","keep-alive":""},{default:(0,l.k6)(function(){return[e.ocultaArchivo||3===e.dataConfiguracion.TIPO?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(g,{key:0,error:e.v$.detalleDocumento.IMAGEN.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(E,{onUpload:e.addFile,icon:"file",title:e.$t("subirArchivos"),allow:["pdf"]},null,8,["onUpload","title"])]}),_:1},8,["error","error-label"])),(0,l.bF)(t,{class:"q-if-outlined",modelValue:e.detalleDocumento.TIPO_ACEPTACION,"onUpdate:modelValue":a[25]||(a[25]=function(a){return e.detalleDocumento.TIPO_ACEPTACION=a}),options:e.aceptacionTipo,"float-label":"Presentación de Aceptación"},null,8,["modelValue","options"]),0!==e.detalleDocumento.TIPO_ACEPTACION?((0,l.uX)(),(0,l.Wv)(g,{key:1,error:e.v$.detalleDocumento.MODO_ACEPTACION.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{class:"q-if-outlined",modelValue:e.v$.detalleDocumento.MODO_ACEPTACION.$model,"onUpdate:modelValue":a[26]||(a[26]=function(a){return e.v$.detalleDocumento.MODO_ACEPTACION.$model=a}),options:e.aceptacionModo,"float-label":"Tipo de Aceptación"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])):(0,l.Q3)("v-if",!0),1===e.detalleDocumento.TIPO_ACEPTACION?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(g,{count:30,error:e.v$.detalleDocumento.MSJ_NO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[1===e.detalleDocumento.MODO_ACEPTACION?((0,l.uX)(),(0,l.Wv)(O,{key:0,class:"q-if-outlined",modelValue:e.v$.detalleDocumento.MSJ_NO.$model,"onUpdate:modelValue":a[27]||(a[27]=function(a){return e.v$.detalleDocumento.MSJ_NO.$model=a}),maxlength:"30","float-label":"Negación"},null,8,["modelValue"])):(0,l.Q3)("v-if",!0)]}),_:1},8,["error","error-label"]),(0,l.bF)(g,{count:30,error:e.v$.detalleDocumento.MSJ_SI.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(O,{class:"q-if-outlined",modelValue:e.v$.detalleDocumento.MSJ_SI.$model,"onUpdate:modelValue":a[28]||(a[28]=function(a){return e.v$.detalleDocumento.MSJ_SI.$model=a}),maxlength:"30","float-label":"Aceptación"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])],64)):(0,l.Q3)("v-if",!0),2===e.detalleDocumento.TIPO_ACEPTACION?((0,l.uX)(),(0,l.CE)(l.FK,{key:3},[(0,l.bF)(g,{count:500,error:e.v$.detalleDocumento.MSJ_NO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[1===e.detalleDocumento.MODO_ACEPTACION?((0,l.uX)(),(0,l.Wv)(O,{key:0,class:"q-if-outlined",modelValue:e.detalleDocumento.MSJ_NO,"onUpdate:modelValue":a[29]||(a[29]=function(a){return e.detalleDocumento.MSJ_NO=a}),maxlength:"500","float-label":"Negación",type:"textarea",rows:"2"},null,8,["modelValue"])):(0,l.Q3)("v-if",!0)]}),_:1},8,["error","error-label"]),(0,l.bF)(g,{count:500,error:e.v$.detalleDocumento.MSJ_SI.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(O,{class:"q-if-outlined",modelValue:e.detalleDocumento.MSJ_SI,"onUpdate:modelValue":a[30]||(a[30]=function(a){return e.detalleDocumento.MSJ_SI=a}),maxlength:"500","float-label":"Aceptación",type:"textarea",rows:"2"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])],64)):(0,l.Q3)("v-if",!0),0!==e.configuracion.M_MENSAJE_DOCUMENTO&&0!==e.detalleDocumento.TIPO_ACEPTACION?((0,l.uX)(),(0,l.Wv)(C,{key:4,class:"col",modelValue:e.dataConfiguracion.ENVIAR_MENSAJE,"onUpdate:modelValue":a[31]||(a[31]=function(a){return e.dataConfiguracion.ENVIAR_MENSAJE=a}),"true-value":1,"false-value":0,label:"Enviar mensaje",color:"secondary"},null,8,["modelValue"])):(0,l.Q3)("v-if",!0)]}),_:1}),(0,l.bF)(I,{class:"col",name:"salon","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.bF)(D,{"hide-bottom":"",data:e.dataAulas,columns:e.columns,selection:"multiple",selected:e.aulasSelect,"onUpdate:selected":a[33]||(a[33]=function(a){return e.aulasSelect=a}),"row-key":"NEMO",style:{"max-height":"70vh"},filter:e.filter},{"top-right":(0,l.k6)(function(o){return[(0,l.bF)(u,{modelValue:e.filter,"onUpdate:modelValue":a[32]||(a[32]=function(a){return e.filter=a})},null,8,["modelValue"])]}),_:1},8,["data","columns","selected","filter"])]}),_:1}),(0,l.bF)(I,{class:"col",name:"autorizacion","keep-alive":"",style:{"overflow-y":"scroll"}},{default:(0,l.k6)(function(){return[a[42]||(a[42]=(0,l.Lk)("div",{class:"q-table-middle"},null,-1)),(0,l.Lk)("div",fa,[e.v$.autorizacion.$error?((0,l.uX)(),(0,l.CE)("span",pa,"Debe ingresar al menos un registro")):((0,l.uX)(),(0,l.CE)("div",ha)),(0,l.bF)(o,{dense:"",flat:"",round:"",icon:"add",onClick:a[34]||(a[34]=function(a){return e.nuevaAceptacion()})})]),(0,l.Lk)("table",va,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,[(0,l.bF)(T,{name:"import_export",size:"20px"})]),(0,l.Lk)("th",ba,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("matricula.descripcion")),1)]),(0,l.Lk)("th",null,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("tipo")),1)]),(0,l.Lk)("th",null,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("activo")),1)]),a[40]||(a[40]=(0,l.Lk)("th",null,null,-1)),a[41]||(a[41]=(0,l.Lk)("th",null,null,-1))])]),(0,l.bF)(S,{modelValue:e.detalleAutorizacion,"onUpdate:modelValue":a[35]||(a[35]=function(a){return e.detalleAutorizacion=a}),tag:"tbody",onChange:e.ordenaAutorizacion},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.detalleAutorizacion,function(a,n){return(0,l.uX)(),(0,l.CE)("tr",{key:a.ORDEN},[(0,l.Lk)("td",ga,[(0,l.bF)(T,{name:"blur_on",size:"20px"})]),(0,l.Lk)("td",{innerHTML:a.DESCRIPCION},null,8,Ca),(0,l.Lk)("td",null,[(0,l.bF)(t,{modelValue:a.TIPO,"onUpdate:modelValue":function(e){return a.TIPO=e},options:e.tipoAceptacion,readonly:""},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,l.Lk)("td",null,[(0,l.bF)(C,{modelValue:a.ESTADO,"onUpdate:modelValue":function(e){return a.ESTADO=e},"true-value":"S","false-value":"N",color:"secondary",onInput:function(o){return e.disableAut(a)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]),(0,l.Lk)("td",null,[(0,l.bF)(o,{dense:"",raised:"",flat:"",round:"",icon:"edit",onClick:function(o){return e.nuevaAceptacion(a)}},null,8,["onClick"])]),(0,l.Lk)("td",null,[(0,l.bF)(o,{dense:"",raised:"",flat:"",round:"",icon:"delete",onClick:function(o){return e.eliminarAutorizacion(a,n)}},null,8,["onClick"])])])}),128))]}),_:1},8,["modelValue","onChange"])])]}),_:1})]}),_:1},8,["modelValue"]),(0,l.bF)(k,{class:"bg-grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Oa,[(0,l.bF)(o,{color:"primary",label:e.$t("botones.guardar"),onClick:e.guardarDocumento},null,8,["label","onClick"])])]}),_:1})])}o(30683),o(74260),o(52133),o(32203),o(6724),o(11777);var Ia=o(82640),Ea=o(33950),Da=o(59089),Ta=o(81288),Sa=o(53999),Ra=o(90124),ka=o(25173),Ma=o(13796),Na=o(9736),Va=Be.Hi,Fa={setup:function(){var e=(0,v.fG)();return{v$:e}},emits:["grabar"],props:["reserva","anoMat","data","configuracion","niveles","grados","secciones","reservaEspecial","separarDocumentos"],components:{QTooltip:b.nC,QListHeader:b.XR,QInput1:Na.A,QPageSticky:b._U,QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,QSelect:b.Si,QToggle:b.c5,sieSelect:C.A,QTable:H.A,SieModal:Z.A,sieEditor:B.A,draggable:Va,QLayoutFooter:b.Dl,sieUpload:Da.A,filterArray:K.filterArray,QField:b.Om,QInput:b.ie,QBtn:b.Il,QSearch:b.Ks,QIcon:b.bP,QToolbar:b.ZV,QLayoutDrawer:b.D2,QList:Sa.A,QItem:Ra.A,QItemSection:ka.A,QItemLabel:Ma.A},data:function(){return{barraLateral:!1,filtrarCampos:null,sie:(0,A["default"])(),dataConfiguracion:{INSTRUCOD:"T",GRADOCOD:"T"},documentos:[],especial:!1,ocultaArchivo:null,tipoDocumentos:[{label:"Subir Documento",value:1},{label:"Doc. Creado",value:3}],listaBotones:[],listaAlumnos:[],autorizacion:!1,detalleAutorizacion:[],detalleDocumento:{},aceptacionTipo:[{label:"Ninguno",value:0},{label:"Botón",value:1},{label:"Texto",value:2}],aceptacionModo:[{label:"Abierta",value:1},{label:"Cerrada",value:2}],tipoAceptacion:[{label:"ENCABEZADO",value:3,formulario:!1},{label:"CUERPO",value:2,formulario:!1},{label:"ABIERTO",value:1,formulario:!0},{label:"CERRADO",value:0,formulario:!0},{label:"PIE",value:4,formulario:!1}],tipoAceptacionFiltrado:[],modalDocumento:!0,modalNvAceptacion:!1,nvAceptacionData:{TIPO:2,DESCRIPCION:null,ESTADO:"S"},filter:null,campos:[{campo:"{{ALUCOD}}",desc:"Codigo del Alumno"},{campo:"{{ALUCODANT}}",desc:"Codigo de banco del Alumno"},{campo:"{{EMAIL}}",desc:"Correo del Alumno"},{campo:"{{NOMCOMP}}",desc:"Nombre del Alumno"},{campo:"{{APEPAT}}",desc:"Apellido Paterno del Alumno"},{campo:"{{APEMAT}}",desc:"Apellido Materno del Alumno"},{campo:"{{NOMBRES}}",desc:"Nombre del Alumno"},{campo:"{{DOCIDETIPO}}",desc:"Tipo de Documento del Alumno"},{campo:"{{DOCIDENRO}}",desc:"Documento del Alumno"},{campo:"{{FECNAC}}",desc:"Fecha de nacimiento del Estudiante"},{campo:"{{FAMDIR}}",desc:"Dirección de la Familia"},{campo:"{{INSTRUDES}}",desc:"Nivel a llevar"},{campo:"{{GRADODES}}",desc:"Grado a Llevar"},{campo:"{{SECCIONCOD}}",desc:"Sección a Llevar"},{campo:"{{FAMCOD}}",desc:"Codigo de Familia"},{campo:"{{FAMDES}}",desc:"Descripcion de la Familia"},{campo:"{{PADNOM}}",desc:"Nombre del Padre"},{campo:"{{MADNOM}}",desc:"Nombre de la Madre"},{campo:"{{APONOM}}",desc:"Nombre de la Apoderado"},{campo:"{{DOCIDETIPOPAD}}",desc:"Tipo de Documento Padre"},{campo:"{{DOCUPAD}}",desc:"Documento Padre"},{campo:"{{DOCIDETIPOMAD}}",desc:"Tipo de Documento Madre"},{campo:"{{DOCUMAD}}",desc:"Documento Madre"},{campo:"{{DOCUAPO}}",desc:"Documento Apoderado"},{campo:"{{DIRPAD}}",desc:"Dirección Padre"},{campo:"{{DIRMAD}}",desc:"Dirección Madre"},{campo:"{{DIRAPO}}",desc:"Dirección Apoderado"},{campo:"{{TELPAD}}",desc:"Teléfono Padre"},{campo:"{{TELMAD}}",desc:"Teléfono Madre"},{campo:"{{TELAPO}}",desc:"Teléfono Apoderado"},{campo:"{{CELPAD}}",desc:"Celular Padre"},{campo:"{{CELMAD}}",desc:"Celular Madre"},{campo:"{{CELAPO}}",desc:"Celular Apoderado"},{campo:"{{TRATELPAD}}",desc:"Teléfono trabajo Padre"},{campo:"{{TRATELMAD}}",desc:"Teléfono trabajo Madre"},{campo:"{{TRATELAPO}}",desc:"Teléfono trabajo Apoderado"},{campo:"{{MAILPAD}}",desc:"Correo Padre"},{campo:"{{MAILMAD}}",desc:"Correo Madre"},{campo:"{{MAILAPO}}",desc:"Correo Apoderado"},{campo:"{{PADOCUPA}}",desc:"Ocupación Padre"},{campo:"{{MADOCUPA}}",desc:"Ocupación Madre"},{campo:"{{APOOCUPA}}",desc:"Ocupación Apoderado"},{campo:"{{PADESTCIV}}",desc:"Estado civil Padre"},{campo:"{{MADESTCIV}}",desc:"Estado civil Madre"},{campo:"{{APOESTCIV}}",desc:"Estado civil Apoderado"},{campo:"{{FAMRESP}}",desc:"Responsable de Pago"},{campo:"{{FAMRESPMAT}}",desc:"Responsable de Matricula"},{campo:"{{FAMRESPTDOC}}",desc:"Tipo de Documento Responsable de Pago"},{campo:"{{FAMRESPDOC}}",desc:"Documento Responsable de Pago"},{campo:"{{FAMRESPMATDOC}}",desc:"Documento Responsable de Matricula"},{campo:"{{FAMRESPMATTDOC}}",desc:"Tipo de Documento Responsable de Matricula"},{campo:"{{PARENTESCORESP}}",desc:"Parentesco responsable de pago"},{campo:"{{PARENTESCORESPMAT}}",desc:"Parentesco responsable de matricula"},{campo:"{{MONTOMATRICULA}}",desc:"Monto matrícula"},{campo:"{{FAMRESPDEP}}",desc:"Departamento Responsable de Pago"},{campo:"{{FAMRESPDIST}}",desc:"Distrito Responsable de Pago"},{campo:"{{FAMRESPMATDEP}}",desc:"Departamento de responsable de matricula"},{campo:"{{FAMRESPMATDIST}}",desc:"Distrito de responsable de matricula"},{campo:"{{FAMRESPDIR}}",desc:"Direccion Responsable de Pago"},{campo:"{{FAMRESPMATDIR}}",desc:"Direccion Responsable de matricula"},{campo:"{{FAMRESPMAIL}}",desc:"Correo Responsable de Pago"},{campo:"{{FAMRESPMAIL2}}",desc:"Otro correo Responsable de Pago"},{campo:"{{FAMRESPMATMAIL}}",desc:"Correo Responsable de matricula"},{campo:"{{FAMRESPMATMAIL2}}",desc:"Otro correo Responsable de matricula"},{campo:"{{FAMRESPCEL}}",desc:"Celular Responsable de Pago"},{campo:"{{FAMRESPMATCEL}}",desc:"Celular Responsable de matricula"},{campo:"{{FAMRESPTEL}}",desc:"Teléfono Responsable de Pago"},{campo:"{{FAMRESPMATTEL}}",desc:"Teléfono Responsable de matricula"}],objImg:{},idDetalle:null,dataAulas:[],aulasSelect:[],columns:[{name:"NEMODES",label:this.$t("aula"),field:"NEMODES",align:"left"}],tabSelect:""}},methods:{copiarEtq:function(e){var a=document.createElement("textarea");a.value=e,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select();try{var o=document.execCommand("copy");o?this.$notify("Etiqueta copiada correctamente"):this.$notify("No se pudo copiar la etiqueta","error")}catch(e){this.$notify("Error al copiar","error")}document.body.removeChild(a)},addTexto:function(e){this.nvAceptacionData.DESCRIPCION=this.nvAceptacionData.DESCRIPCION+" "+e},disableAut:function(e){var a=e.ID,o=e.ESTADO,t={ID:a,ESTADO:o};J.$http.post("api/HyoMatriculaautorizaciones/grabaAutorizaciones",{actualiza:t})},eliminarAutorizacion:function(e,a){var o=this,t={ID:e.ID};(0,ee.dialogConfirm)({message:this.$t("mensajes.m0006.confirmacion")}).then(function(n){n&&(e.ID?J.$http.post("api/HyoMatriculaautorizaciones/eliminaAutorizacion",t).then(function(e){var a=e.json,t="warning"===a.icono?"error":a.icono;(0,z["default"])(o.$t("mensajes."+a.mensaje),t),"error"!==t&&o.cargaAutorizaciones()}):o.detalleAutorizacion.splice(a,1))})},addFile:function(e){var a=this;(0,Ea.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){a.detalleDocumento.objImg=e}).catch(function(){})},cargaAutorizaciones:function(){var e=this;J.$http.get("api/HyoMatriculaautorizaciones/obtAutorizaciones",{params:{confId:this.data.infoDocumento.ID}}).then(function(a){var o=a.json;o.forEach(function(e,a){e.$index=a}),e.detalleAutorizacion=o})},guardarDocumento:function(){var e=this;if(this.v$.$touch(),this.v$.$invalid)this.v$.dataConfiguracion.$invalid?this.tabSelect="config":this.v$.detalleDocumento.$invalid?this.tabSelect="documento":this.v$.salones?this.v$.autorizacion.$invalid||(this.tabSelect="autorizacion"):this.tabSelect="salon";else{var a={dataConfig:this.dataConfiguracion};[1,4].indexOf(this.dataConfiguracion.TIPO)>=0?a.dataDoc=this.detalleDocumento:(3===this.dataConfiguracion.TIPO&&Object.keys(this.detalleDocumento).forEach(function(o){"objImg"!==o&&(a.dataConfig[o]=e.detalleDocumento[o])}),a.detAut=this.detalleAutorizacion),this.configuracion["M_DOCUMENTO_SECCION"]&&(a.salones=this.aulasSelect),this.$emit("grabar",a)}},selecionarTipo:function(e){4===e&&(this.dataConfiguracion.DESCARGA_INICIO=1)},nuevaAceptacion:function(e){var a=this;this.filtrarCampos=null,this.nvAceptacionData=e||{TIPO:2,DESCRIPCION:null,ESTADO:"S",ORDEN:this.detalleAutorizacion.length+1},this.tipoAceptacionFiltrado=n()(this.tipoAceptacion),2!==this.dataConfiguracion.TIPO&&(this.tipoAceptacionFiltrado=(0,K.filterArray)(!1,{field:"formulario",list:this.tipoAceptacion}));var o=[];this.detalleAutorizacion.forEach(function(t){var n=t.TIPO;n&&[3,4].indexOf(n)>=0&&(!e||n!==e.TIPO)&&o.unshift(a.tipoAceptacionFiltrado.map(function(e){var a=e.value;return a}).indexOf(n))}),o.length>0&&o.forEach(function(e){a.tipoAceptacionFiltrado.splice(e,1)}),this.modalNvAceptacion=!0},limpiarSecucod:function(){this.dataConfiguracion.SECUCOD=null},agregarAutorizacion:function(e){if((e.TIPO||0===e.TIPO)&&e.DESCRIPCION){if(e.ID){this.detalleAutorizacion[e.ORDEN-1]=e;var a=x()({},e);delete a.$index,J.$http.post("api/HyoMatriculaautorizaciones/grabaAutorizaciones",{actualiza:a})}else{if(this.data.infoDocumento.ID){var o=x()({},e);o.padre=this.idDetalle,J.$http.post("api/HyoMatriculaautorizaciones/grabaAutorizaciones",{graba:o})}e.ORDEN?this.detalleAutorizacion[e.ORDEN-1]=e:this.detalleAutorizacion.push(e)}this.modalNvAceptacion=!1}},ordenaAutorizacion:function(e){if(e=e.moved,e.element.ID){var a=[];this.detalleAutorizacion.forEach(function(e,o){e.ORDEN!==o+1&&(e.ORDEN=o+1,a.push({ID:e.ID,ORDEN:o+1}))}),J.$http.get("api/HyoMatriculaautorizaciones/actualizaOrden",{params:{arreglo:a}})}else this.detalleAutorizacion.forEach(function(e,a){e.ORDEN!==a+1&&(e.ORDEN=a+1)})},cargaSalones:function(e){var a=this;J.$http.get("api/HyoSalones/getSalonesMatricula",{params:{ID:e,ANO:this.anoMat}}).then(function(e){a.dataAulas=e,a.aulasSelect=[],e.forEach(function(e){e.ID&&a.aulasSelect.push(e)})})}},validations:function(){var e=this,a=function(){return 1===e.dataConfiguracion.DESCARGA_INICIO||1===e.dataConfiguracion.DESCARGA_FINAL||1===e.dataConfiguracion.DESCARGA_BIENVENIDA},o=function(){return[1,3].indexOf(e.dataConfiguracion.TIPO)<0||0===e.detalleDocumento.TIPO_ACEPTACION||null!==e.detalleDocumento.MODO_ACEPTACION},t=function(){return[1,3].indexOf(e.dataConfiguracion.TIPO)<0||0===e.detalleDocumento.TIPO_ACEPTACION||null!==e.detalleDocumento.MSJ_SI},n=function(){return[1,3].indexOf(e.dataConfiguracion.TIPO)<0||0===e.detalleDocumento.TIPO_ACEPTACION||null!==e.detalleDocumento.MSJ_NO||1!==e.detalleDocumento.MODO_ACEPTACION},l=function(){return 2!==e.dataConfiguracion.TIPO||e.detalleAutorizacion.length>0},i=function(){return e.ocultaArchivo||1!==e.dataConfiguracion.TIPO||Object.keys(e.detalleDocumento.objImg).length>0},r=function(){return!e.configuracion["M_DOCUMENTO_SECCION"]||e.aulasSelect.length>0};return{dataConfiguracion:{TIPO:{required:Ia.mw},TITULO:{required:Ia.mw},IMPRIMIR:{validaImprimir:a}},detalleDocumento:{MODO_ACEPTACION:{validarModo:o},MSJ_SI:{validaSi:t},MSJ_NO:{validaNo:n},IMAGEN:{validaImagen:i}},autorizacion:{validaAutorizacion:l},salones:r}},mounted:function(){var e=this;switch(("S"!==this.reserva||this.reservaEspecial)&&(this.tipoDocumentos.push({label:"Formulario",value:2}),this.especial=!0,J.$http.get("api/HyoTablaSe/obtArrayDatos",{params:{princods:["docusMatricula"],objOrden:{campos:"SECUDES",orden:"asc"}}}).then(function(a){var o=a.json;e.documentos=o.alias})),this.sie.colcod){case"0212":this.campos.push({campo:"{{PADVIVE}}",desc:"Padre vive"}),this.campos.push({campo:"{{MADVIVE}}",desc:"Madre vive"}),this.campos.push({campo:"{{PADVIVEHIJO}}",desc:"Padre vive con el educando"}),this.campos.push({campo:"{{MADVIVEHIJO}}",desc:"Madre vive con el educando"}),this.campos.push({campo:"{{NUMHERMANO}}",desc:"Número de hermanos"});break;case"0500":this.campos=[].concat(n()(this.campos),[{campo:"{{FAMDIREREF}}",desc:"Edificio - Piso - Dpto. - Interior"},{campo:"{{RESPDIREREF}}",desc:"Refrencia responsable de pago"},{campo:"{{RESPROV}}",desc:"Provincia responsable de pago"}]);break}this.sie.colcod,this.ocultaArchivo=!!this.data.infoDocumento.ID,this.detalleAutorizacion=[],this.detalleDocumento={TIPO_ACEPTACION:0,MODO_ACEPTACION:null,MSJ_SI:null,ESPECIAL:null,MSJ_NO:null,objImg:{}},this.configuracion["M_CONF_BOTONES"]&&J.$http.get("api/HyoMatriculaBotones/getMatriculaBotones",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;[0,1].indexOf(o.length)+1&&o.unshift({ID_BTN:null,TEXTO:"Ninguno"}),e.listaBotones=o}),this.configuracion["M_DOCUMENTO_ALUMNO"]&&J.$http.get("api/HyoAlumnos/obtAlumnosDisponibles",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;e.listaAlumnos=o}),this.dataConfiguracion={TIPO:null,ORDEN:null,ANO:this.anoMat,DESCARGA_INICIO:0,DESCARGA_BIENVENIDA:0,DESCARGA_FINAL:0,LISTA:0,BACHILLERATO:0,ANT_ALUMNO:0,ID_BTN:null,GRUPO:null,INSTRUCOD:"T",GRADOCOD:"T",SECCIONCOD:"T",TITULO:null,DOCUALUMNO:!1,ALUCOD:null,ESTADO:1,IMPRIMIR:null,SOLO_ANT:0,ENVIAR_MENSAJE:0};var a=[],o=[{campo:"{{MONTOPEN}}",desc:"Monto de pensiones"},{campo:"{{MONTOTOT}}",desc:"Monto total de pensiones"},{campo:"{{HOY}}",desc:"Fecha Actual"},{campo:"{{FECHAMATRICULA}}",desc:"Fecha de matrícula"},{campo:"{{PAGINA}}",desc:"Número de página"},{campo:"{{PAGINAS}}",desc:"Número total de páginas"},{campo:"{{SEGURO}}",desc:"Nombre del Seguro"},{campo:"{{NUMSEGURO}}",desc:"Nro Seguro Particular"},{campo:"{{FAMDIST}}",desc:"Distrito Familia"}];switch("0500"===this.sie.colcod&&o.push({campo:"{{FAMPROV}}",desc:"Provincia Familia"}),1===this.configuracion["M_SUBIR_FIRMAS"]?(o.unshift({campo:"{{FIRMAFAMRESM}}",desc:"Firma responsable de matricula"}),o.unshift({campo:"{{FIRMAFAMRESP}}",desc:"Firma responsable de pago"}),o.unshift({campo:"{{FIRMAAPODERADO}}",desc:"Firma Apoderado"}),o.unshift({campo:"{{FIRMAMADRE}}",desc:"Firma Madre"}),o.unshift({campo:"{{FIRMAPADRE}}",desc:"Firma Padre"})):2===Number(this.configuracion["M_SUBIR_FIRMAS"])&&(o.unshift({campo:"{{FIRMAAPODERADO}}",desc:"Firma Apoderado"}),o.unshift({campo:"{{FIRMAMADRE}}",desc:"Firma Madre"}),o.unshift({campo:"{{FIRMAPADRE}}",desc:"Firma Padre"})),this.campos=[].concat(n()(this.campos),o),this.sie.colcod){case"0212":a=[{campo:"{{RESPACADINFO}}",desc:"Informacion del Responsable Academico"}];break;case"0027":a=[{campo:"{{DEPARTAMENTORESP}}",desc:"Departamento Responsable de Matrícula"},{campo:"{{PROVINCIARESP}}",desc:"Provincia Responsable de Matrícula"},{campo:"{{URBANIZACIONRESP}}",desc:"Urbanización Responsable de Matrícula"}];break;case"0084":a=[{campo:"{{VENCSEGURO}}",desc:"Fecha de vencimiento del seguro"},{campo:"{{CLINICA}}",desc:"Clínica de Preferencia"}];break;case"0010":a=[{campo:"{{REPLEGAL}}",desc:"Representante legal"},{campo:"{{FAMRESPLEGDOC}}",desc:"Documento Representante legal"},{campo:"{{FAMRESPLEGDIR}}",desc:"Direcciòn Representante legal"},{campo:"{{FAMRESPLEGMAIL}}",desc:"Correo Representante legal"},{campo:"{{FAMRESPLEGCEL}}",desc:"Celular Representante legal"},{campo:"{{FAMRESPLEGTEL}}",desc:"Telefono Representante legal"}];break;case"0521":a=[{campo:"{{OCUPAPAD}}",desc:"Ocupación padre"},{campo:"{{OCUPAMAD}}",desc:"Ocupación madre"},{campo:"{{OCUAPO}}",desc:"Ocupación apoderado"},{campo:"{{OCUPARES}}",desc:"Ocupación responsable de pago"},{campo:"{{OCUPARESM}}",desc:"Ocupación responsable de matricula"}];break;case"0490":var t=this.campos.find(function(e){return"{{FAMRESP}}"===e.campo});t.desc="Emitir boleta de pago a",a=[{campo:"{{FAMRESP2}}",desc:"Responsable de pago"}];break}if(this.campos=[].concat(n()(this.campos),n()(a)),this.ocultaArchivo){if("0073"===this.sie.colcod){var l=[{campo:"{{MONTOIMAT}}",desc:"Monto Inicial de Matricula"},{campo:"{{MONTODMAT}}",desc:"Monto Descuento de Matricula"},{campo:"{{MONTOFMAT}}",desc:"Monto Final de Matricula"},{campo:"{{MONTOIPEN}}",desc:"Monto Inicial de Pension"},{campo:"{{MONTODPEN}}",desc:"Monto Descuento de Pension"},{campo:"{{MONTOFPEN}}",desc:"Monto Final de Pension"}];this.campos=[].concat(n()(this.campos),l)}this.dataConfiguracion.TITULO=this.data.infoDocumento.TITULO;var i={id:this.data.infoDocumento.ID,tipo:this.data.infoDocumento.TIPO,configuracion:this.configuracion};J.$http.post("api/HyoMatriculadocumentosconf/obtDetalleDocumento",i).then(function(a){var o=a.json,t=o;console.log(e.configuracion["M_DOCUMENTO_SECCION"]),e.configuracion["M_DOCUMENTO_SECCION"]&&e.cargaSalones(e.data.infoDocumento.ID),e.idDetalle=o.IDAUTORIZACION,o.IDAUTORIZACION&&(e.dataConfiguracion.IDAUTORIZACION=o.IDAUTORIZACION),e.dataConfiguracion.ID=t.ID,e.dataConfiguracion.ESTADO=t.ESTADO,e.dataConfiguracion.TIPO=t.TIPO,e.dataConfiguracion.ORDEN=t.ORDEN,e.dataConfiguracion.ANO=t.ANO,e.dataConfiguracion.DESCARGA_INICIO=t.DESCARGA_INICIO,e.dataConfiguracion.DESCARGA_FINAL=t.DESCARGA_FINAL,e.dataConfiguracion.LISTA=t.LISTA,e.dataConfiguracion.BACHILLERATO=t.BACHILLERATO,e.dataConfiguracion.ID_BTN=t.ID_BTN,e.dataConfiguracion.GRUPO=t.GRUPO,e.dataConfiguracion.ANT_ALUMNO=t.ANT_ALUMNO,e.dataConfiguracion.ALUCOD=t.ALUCOD,e.dataConfiguracion.IDGRADO=t.IDGRADO,e.dataConfiguracion.IDDOCUMENTO=t.IDDOCUMENTO,e.dataConfiguracion.SOLO_ANT=t.SOLO_ANT,e.dataConfiguracion.ENVIAR_MENSAJE=t.ENVIAR_MENSAJE,e.dataConfiguracion.DESCARGA_BIENVENIDA=t.DESCARGA_BIENVENIDA,e.configuracion["M_DOCUMENTO_SECCION"]||(e.dataConfiguracion.INSTRUCOD=t.INSTRUCOD,e.dataConfiguracion.GRADOCOD=t.GRADOCOD,e.dataConfiguracion.SECCIONCOD=t.SECCIONCOD),t.ALUCOD&&(e.dataConfiguracion.DOCUALUMNO=!0),e.detalleDocumento.TIPO_ACEPTACION=t.TIPO_ACEPTACION,e.detalleDocumento.MODO_ACEPTACION=t.MODO_ACEPTACION,e.detalleDocumento.MSJ_SI=t.MSJ_SI,e.detalleDocumento.ESPECIAL=t.ESPECIAL,e.detalleDocumento.MSJ_NO=t.MSJ_NO,e.dataConfiguracion.SECUCOD=t.SECUCOD}),1!==this.data.infoDocumento.TIPO&&this.cargaAutorizaciones()}else this.cargaSalones()},computed:{isLess:function(){return(0,Ta.isLess)()},camposFinal:function(){var e=this;return this.filtrarCampos&&this.filtrarCampos.length>0?this.campos.filter(function(a){return a.desc.toLowerCase().indexOf(e.filtrarCampos.toLowerCase())>=0||a.campo.toLowerCase().indexOf(e.filtrarCampos.toLowerCase())>=0}):this.campos}}};const _a=(0,E.A)(Fa,[["render",Aa]]);var ya=_a,Pa=o(62006),La=Be.Hi,Ua={setup:function(){var e=(0,v.fG)();return{v$:e}},emits:["close"],props:["reserva","anoMat","hideHead","add","reservaEspecial"],components:{sieVacio:He.A,draggable:La,QTable:H.A,QPageSticky:b._U,QScrollArea:g.A,siePdf:ze.A,SieModal:Z.A,QTabs:b.uw,QTab:b.zu,QTd:b.Ef,QTr:b.qh,QTabPane:b.dg,sieUpload:Da.A,sieSelect:C.A,documento:ya,QSelect:b.Si,QCheckbox:b.vZ,QRadio:b.$,QCollapsible:b.eS,QDownloadFile:Pa.A,QList:b.Mb,QItem:b.H0,QIcon:b.bP,QBtn:b.Il,QTooltip:b.nC,QSearch:b.Ks,QItemMain:b.mF,QItemSide:b.n1,QItemTile:b.lp},data:function(){return{bloqueado:!1,sie:(0,A["default"])(),modalDetalle:!1,detalleModal:{},documentos:{columns:[{name:"ORDENAR",align:"center"},{name:"TITULO",label:this.$t("titulo"),field:"TITULO",align:"left"},{name:"USUCOD",label:this.$t("usuario.nombre"),field:"USUCOD",align:"center"},{name:"FH_REGISTRO",label:this.$t("siedatepicker.date"),field:"FH_REGISTRO",align:"center"}]},columnsRespuesta:[{name:"NOMCOMP",align:"center",field:"NOMCOMP",label:this.$t("estudiante")},{name:"RESPUESTA",align:"center",field:"RESPUESTA",label:this.$t("respuesta")},{name:"DEL",align:"center",field:"RESPUESTA"}],columnsRespuestaEsp:[{name:"DESCRIPCION",align:"left",field:"DESCRIPCION",label:this.$t("documento")},{name:"RESPUESTA",align:"center",field:"RESPUESTA",label:this.$t("respuesta.respuesta")},{name:"DEL",align:"center",field:"DEL"}],filterRespuesta:null,dataDocumentos:[],arrOpciones:[],cargando:!1,permiso:(0,A["default"])().ruta.nivel,modalVer:!1,dataVer:{TITULO:null},modalDocumento:!1,propsDocumento:{tituloModal:null,bloquearDocumento:!1},niveles:[],grados:[],objImg:{},TITULO:null,INSTRUCOD:null,GRADOCOD:null,validar:!1,LISTA:"N",aceptacion:null,tipacept:"N",msj1:null,msj2:null,ID:null,ORDEN:null,DECLARACION:null,DECLARACION_MSJ:null,flag:"N",dataDocumento:{},configuracion:{},esArchivo:!1,secciones:{},dataModalPrev:{},alto:0,separarDocumentos:!1,tipoDocumentos:[{label:"Documento",value:1}]}},methods:{date:function(e,a){return(0,Y.Ay)(e,a)},handleResize:function(){var e=this.hideHead?170:200;this.alto=window.innerHeight-e+"px"},cargaDocumentos:function(){var e=this;J.$http.post("api/HyoMatriculadocumentosconf/getDocumentosAno",{ano:this.anoMat,reserva:!!this.reserva}).then(function(a){var o=a.json;e.dataDocumentos=o})},filtrarRespEspeciales:function(e){this.dataVer.dataFiltrada=e.length>0?(0,K.filterArray)(this.filterRespuesta,{field:"NOMCOMP",list:this.dataVer.infoRespuesta.data}):this.dataVer.infoRespuesta.data},setInfoRespuestas:function(e,a){var o=this;a&&"undefined"!==a||(a=!1),this.dataVer.infoRespuesta={},J.$http.get("api/HyoMatriculadocumentosconf/getRespuestas",{params:{ID:e.IDDETALLE,TIPO:e.TIPO}}).then(function(e){var t=e.json;o.dataVer.infoRespuesta=t,o.cargando=!1,o.modalVer=a,o.filtrarRespEspeciales(o.filterRespuesta)})},deleteRespuestas:function(){var e=this,a=this.dataVer.TIPODOC,o=this.dataModalPrev.IDDETALLE;(0,ee.dialogDelete)({message:"¿Está seguro de eliminar esta información?"}).then(function(t){t&&(0,ee.dialogDelete)({title:"¿Está completamente seguro de eliminar esta información?",message:"Este proceso es irreversible"}).then(function(t){t&&J.$http.post("api/HyoMatriculadocumentosconf/eliminarTodos",{ID:o,TIPO:a}).then(function(a){var o=a.json;o.type||e.setInfoRespuestas(e.dataModalPrev,!1),(0,z["default"])(e.$t("mensajes."+o.msg),o.type)})})})},deleteRespuesta:function(e){var a=this,o=e.ALUCOD,t=e.ID,n=this.dataVer.TIPODOC;(0,ee.dialogDelete)().then(function(e){e&&J.$http.post("api/HyoMatriculadocumentosconf/deleteRespuesta",{ID:t,TIPO:n,ALUCOD:o}).then(function(e){var o=e.json;o.type||a.setInfoRespuestas(a.dataModalPrev,!1),(0,z["default"])(a.$t("mensajes."+o.msg),o.type)})})},updateRespuesta:function(e){var a=this,o=e.ALUCOD,t=e.ID,n=e.RESPUESTA,l=this.dataVer.TIPODOC;J.$http.post("api/HyoMatriculadocumentosconf/editarRespuesta",{ID:t,TIPO:l,ALUCOD:o,RESPUESTA:n}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o.msg),o.type),o.type||a.setInfoRespuestas(a.dataModalPrev,!1)})},abrirModalVer:function(e){var a=this;this.dataVer={},this.cargando=!0,this.filterRespuesta="",this.dataModalPrev=e,this.esArchivo=[1,4].indexOf(e.TIPO)>=0,this.dataVer.TITULO="Detalle de "+e.TITULO,this.dataVer.TIPODOC=e.TIPO,this.dataVer.EXTENSION=e.EXTENSION,this.dataVer.ID=e.ID,this.esArchivo?(this.dataVer.URL=this.sie.api+"/HyoMatriculadocumentos/descargar/"+e.IDDETALLE+"/"+e.ANO+"/"+e.TITULO+"?access_token="+this.sie.token,this.setInfoRespuestas(e,!0),this.modalVer=!0):J.$http.get("api/HyoMatriculaautorizaciones/obtAutorizaciones",{params:{padre:e.IDDETALLE,estado:"S"}}).then(function(o){var t=o.json;a.dataVer.info=t,a.dataVer.URL=a.sie.api+"/HyoMatriculaautcabeceras/reporte/"+e.IDDETALLE+"/null/"+a.anoMat+"/0/0?access_token="+a.sie.token,a.setInfoRespuestas(e,!0)})},agregar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.TITULO=null,this.objImg={},this.validar=!1,this.propsDocumento.bloquearDocumento=!1,this.propsDocumento.tituloModal="Nuevo Documento",this.INSTRUCOD=null,this.GRADOCOD=null,this.propsDocumento.ORDEN=this.dataDocumentos.length+1,this.propsDocumento.infoDocumento=e,e.TITULO?this.permiso>2&&(this.propsDocumento.bloquearDocumento=!0,this.propsDocumento.tituloModal="Editar "+e.TITULO,this.modalDocumento=!0):this.permiso>1&&(this.modalDocumento=!0)},addFile:function(e){var a=this;(0,Ea.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(o){a.objImg=o,a.propsDocumento.nombreTemporal=o.name;var t=e[0].name.substring(0,e[0].name.lastIndexOf("."));a.TITULO=t}).catch(function(){})},guardarDocumento:function(e){var a=this,o=e.dataConfig,t=e.dataDoc,n=e.detAut,l=e.salones,i={};i.cabecera={ESTADO:o.ESTADO,ORDEN:o.ORDEN||this.dataDocumentos.length+1,DESCARGA_INICIO:o.DESCARGA_INICIO,DESCARGA_FINAL:o.DESCARGA_FINAL,LISTA:o.LISTA,BACHILLERATO:o.BACHILLERATO,ANT_ALUMNO:o.ANT_ALUMNO,SOLO_ANT:o.SOLO_ANT,ID_BTN:o.ID_BTN,GRUPO:o.GRUPO,ALUCOD:o.ALUCOD,RESERVA:this.reserva?1:0,ENVIAR_MENSAJE:o.ENVIAR_MENSAJE},this.separarDocumentos&&(i.cabecera.DESCARGA_BIENVENIDA=o.DESCARGA_BIENVENIDA,1===o.DESCARGA_BIENVENIDA&&(i.cabecera.DESCARGA_INICIO=0)),this.reserva||(i.cabecera.SECUCOD=o.SECUCOD),this.configuracion["M_DOCUMENTO_SECCION"]?i.grados=l:i.grado={INSTRUCOD:o.INSTRUCOD,GRADOCOD:o.GRADOCOD},[1,4].indexOf(o.TIPO)>=0?(i.documento={TITULO:o.TITULO},i.documento=x()(x()({},t),i.documento)):(i.autorizacion={TITULO:o.TITULO,detalle:n},3===o.TIPO&&(i.autorizacion.TIPO_ACEPTACION=o.TIPO_ACEPTACION,i.autorizacion.MODO_ACEPTACION=o.MODO_ACEPTACION,i.autorizacion.MSJ_NO=o.MSJ_NO,i.autorizacion.MSJ_SI=o.MSJ_SI)),o.ID?(i.cabecera.ID=o.ID,this.configuracion["M_DOCUMENTO_SECCION"]?(i.grados=l,delete i.grado):i.grado.ID=o.IDGRADO,[1,4].indexOf(o.TIPO)>=0?(i.documento.ID=o.IDDOCUMENTO,delete i.documento.objImg):(i.autorizacion.ID_AUTORIZACION=o.IDAUTORIZACION,i.cabecera.IDAUTORIZACION&&delete i.cabecera.IDAUTORIZACION,delete i.autorizacion.detalle),J.$http.post("api/HyoMatriculadocumentosconf/updateDocumento",i).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0001"===o?"success":"error"),a.modalDocumento=!1,a.cargaDocumentos()})):(i.cabecera.TIPO=o.TIPO,i.cabecera.ANO=o.ANO,J.$http.post("api/HyoMatriculadocumentosconf/saveDocumento",i).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0001"===o?"success":"error"),a.modalDocumento=!1,a.cargaDocumentos()}))},imprimirRespuestas:function(){console.log(this.dataVer);var e=this.dataVer.TIPODOC,a="intranet/reporte-node/reporte",o={repcod:"respuestas2020",documento:this.dataVer.ID,noRegistrados:!0,reserva:this.reserva,ano:this.anoMat,anomat:this.anoMat};3===e?o.repcod="respuestasDoc":2===e&&(o.repcod="resumenAutorizaciones2020",o.chkConsolidado="S"),console.log({TIPO:e}),o.n="T",o.g="T",o.s="T",(0,ae.exportFilePhp)(o,a,"Reporte ")},ordenarDocumento:function(){if(this.permiso>2){var e=[];this.dataDocumentos.forEach(function(a,o){a.ORDEN!==o+1&&(a.ORDEN=o+1,e.push({id:a.ID,orden:a.ORDEN}))}),e.length>0&&J.$http.post("api/HyoMatriculadocumentosconf/updateOrden",{params:e})}},eliminarDocumento:function(e){var a=this;return h()(f()().m(function o(){var t,n;return f()().w(function(o){while(1)switch(o.n){case 0:if(!(a.permiso>2)){o.n=2;break}return console.log(e),o.n=1,J.$http.get("api/HyoMatriculadocumentosconf/getRespuestas",{params:{ID:e.IDDETALLE,TIPO:e.TIPO}});case 1:t=o.v,n=t.json,n.estado?(0,ee.dialogConfirm)({message:"Debe eliminar primero las respuestas",title:"Atención... Documento con respuestas",ok:"Ir a Detalle",cancel:"Salir"}).then(function(o){o&&a.abrirModalVer(e)}):(0,ee.dialogConfirm)({title:a.$t("mensajes.m0006.confirmacion"),message:a.$t("mensajes.m0010"),ok:a.$t("botones.si"),cancel:a.$t("botones.no")}).then(function(o){if(o){var t=e.ID;J.$http.get("api/HyoMatriculadocumentosconf/deleteDocumento",{params:{id:t}}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o)),a.cargaDocumentos()}).catch(function(e){var o=e.error;(0,z["default"])(a.$t("mensajes."+o.message),"error")})}}),o.n=3;break;case 2:(0,ee.dialogConfirm)({title:"No tiene permisos para realizar esta accion",cancel:!1});case 3:return o.a(2)}},o)}))()},openModalDetalle:function(e){this.modalDetalle=!0,this.detalleModal=e}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},validations:function(){var e=this.propsDocumento;return{TITULO:{required:Ia.mw},INSTRUCOD:{required:Ia.mw},GRADOCOD:{required:Ia.mw},objImg:{required:(0,Ia.F5)(function(a){return!e.bloquearDocumento})}}},mounted:function(){var e=this;J.$http.get("api/HyoMatriculaparametros/obtParametros",{params:{ano:this.anoMat,isReserva:this.reserva}}).then(function(a){var o=a.json;o.forEach(function(a){["separadocumentos"].indexOf(a.TIPO)>=0&&(e.separarDocumentos="S"===a.ESTADO)})}),window.addEventListener("resize",this.handleResize),this.handleResize(),this.cargaDocumentos(),this.tipoDocumentos.push({label:"Doc. Creado",value:3}),this.tipoDocumentos.push({label:"Formulario",value:2}),this.reserva||this.tipoDocumentos.push({label:"Doc. Compromiso",value:4}),J.$http.get("api/HyoInstrus/obtInstru").then(function(a){var o=a.json;o.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=o}),J.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:!0,todos:"T"}}).then(function(a){var o=a.json;e.grados=o}),J.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:this.anoMat,agrupado:!0}}).then(function(a){var o=a.json;e.configuracion=o,e.bloqueado=1===o.M_BLOQUEA_DOCUMENTOS,o["M_DOCUMENTO_SECCION"]&&J.$http.get("api/HyoSecciones/obtSecciones",{params:{ano:e.anoMat,todos:"T",agrupado:!0}}).then(function(a){var o=a.json;e.secciones=o})})},computed:{isLess:function(){return(0,Ta.isLess)()},buttons:function(){var e=[];return this.permiso>1&&e.push({label:"Agregar",icon:"add",click:this.agregar}),e}},watch:{add:function(e){1===e&&(this.agregar(),this.$emit("close"))}}};const $a=(0,E.A)(Ua,[["render",Ge]]);var qa=$a,wa=o(29104),Qa={class:"col bg-white"},ja={class:"q-table-middle"},xa={class:"q-table q-table-horizontal-separator q-card"},Xa={key:0},Ga={key:1,class:"text-bold"},Ha={key:2,class:"text-bold"},Ba={key:0,style:{"text-align":"center"}},za={key:0},Wa={key:1,class:"row justify-center"},Ka={key:1},Ja={key:0,class:"row justify-center"},Ya={key:2},Za={key:0,class:"row justify-center"},eo={class:"row justify-around"},ao={class:"col-5 column"},oo={class:"col q-pa-sm"};function to(e,a){var o=(0,l.g2)("q-icon"),t=(0,l.g2)("q-input"),n=(0,l.g2)("q-popup-edit"),r=(0,l.g2)("q-toggle"),s=(0,l.g2)("q-btn"),u=(0,l.g2)("draggable"),c=(0,l.g2)("modal-configuracion"),d=(0,l.g2)("q-item"),m=(0,l.g2)("q-list"),f=(0,l.g2)("q-field"),p=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",Qa,[(0,l.Lk)("div",ja,[(0,l.Lk)("table",xa,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[e.permiso>2?((0,l.uX)(),(0,l.CE)("th",Xa,[(0,l.bF)(o,{name:"import_export",size:"20px"})])):(0,l.Q3)("v-if",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.cabeceras,function(a,o){return(0,l.uX)(),(0,l.CE)("th",{key:o,class:"text-bold"},(0,i.v_)(e.$t(a.label)),1)}),128)),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",Ga,(0,i.v_)(e.$t("botones.configurar")),1)):(0,l.Q3)("v-if",!0),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",Ha,(0,i.v_)(e.$t("configuracionMatricula.aviso.aviso")),1)):(0,l.Q3)("v-if",!0)])]),(0,l.bF)(u,{modelValue:e.listaParametros,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.listaParametros=a}),tag:"tbody",onChange:e.ordenarParametro},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaParametros,function(a,u){return(0,l.uX)(),(0,l.CE)("tr",{key:a.ID},[e.permiso>2?((0,l.uX)(),(0,l.CE)("td",Ba,[(0,l.bo)((0,l.bF)(o,{name:"blur_on",size:"20px"},null,512),[[wa.aG,!a.noArrastrar]])])):(0,l.Q3)("v-if",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.cabeceras,function(o,s){return(0,l.uX)(),(0,l.CE)("td",{key:s},["switch"!==o.tipo?((0,l.uX)(),(0,l.CE)("span",za,[(0,l.eW)((0,i.v_)(a[o.campo]),1),(0,l.bF)(n,{modelValue:a[o.campo],"onUpdate:modelValue":function(e){return a[o.campo]=e},onShow:function(t){return e.abreEditar(a[o.campo])},onHide:function(o){return e.terminaEdicion(a)}},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{modelValue:a[o.campo],"onUpdate:modelValue":function(e){return a[o.campo]=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onShow","onHide"])])):((0,l.uX)(),(0,l.CE)("div",Wa,[(0,l.bo)((0,l.bF)(r,{disable:e.permiso<=2,"true-value":"S","false-value":"N",modelValue:a[o.campo],"onUpdate:modelValue":function(e){return a[o.campo]=e},color:"secondary",onInput:function(o){return e.cambiarToggle(a)}},null,8,["disable","modelValue","onUpdate:modelValue","onInput"]),[[wa.aG,!a.noEditable]])]))])}),128)),e.permiso>2?((0,l.uX)(),(0,l.CE)("td",Ka,[a.noConfigurar?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",Ja,[(0,l.bF)(s,{icon:"build",round:"",dense:"",flat:"",onClick:function(o){return e.configurar(a.TIPO,a.ID,a.DESCRIPCION)}},null,8,["onClick"])]))])):(0,l.Q3)("v-if",!0),e.permiso>2?((0,l.uX)(),(0,l.CE)("td",Ya,[a.noAviso?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",Za,[(0,l.bF)(s,{icon:"add_alert",round:"",dense:"",flat:"",onClick:function(o){return e.configurarAvisos(a)}},null,8,["onClick"])]))])):(0,l.Q3)("v-if",!0)])}),128))]}),_:1},8,["modelValue","onChange"])])]),e.modalConfigurar?((0,l.uX)(),(0,l.Wv)(c,{key:0,dataInfo:e.dataDetalle,configuracion:e.configuracion,ano:e.anoMat,onCerrar:e.cerrarModal},null,8,["dataInfo","configuracion","ano","onCerrar"])):(0,l.Q3)("v-if",!0),(0,l.bF)(p,{modelValue:e.modalAvisos,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.modalAvisos=a}),onSubmit:e.grabarAlertas,title:e.tituloConfigAviso},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",eo,[(0,l.Lk)("div",ao,[(0,l.bF)(m,{highlight:"","inset-separator":""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.avisosTipo,function(a){return(0,l.uX)(),(0,l.Wv)(d,{class:(0,i.C4)(["text-bold",{"fondo-seleccionado":e.avisoSelecionado===a.TIPO}]),onClick:function(o){return e.avisoSelecionado=a.TIPO}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t(a.msg)),1)]}),_:2},1032,["onClick","class"])}),256))]}),_:1})]),(0,l.Lk)("div",oo,[(0,l.bF)(f,{count:140},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{class:"q-if-outlined",modelValue:e.avisosTipo[e.avisoSelecionado-1].TEXTO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.avisosTipo[e.avisoSelecionado-1].TEXTO=a}),type:"textarea",maxlength:"140",rows:"3"},null,8,["modelValue"])]}),_:1})])])]}),_:1},8,["modelValue","onSubmit","title"])])}var no={class:"column"},lo={class:"q-pa-sm q-table q-table-horizontal-separator q-card"},io={class:"text-bold"},ro={key:0,class:"text-bold"},so=["innerHTML"],uo={key:0,class:"row justify-center"},co={class:"column q-ma-sm"};function mo(e,a){var o=(0,l.g2)("q-checkbox"),t=(0,l.g2)("q-toggle"),n=(0,l.g2)("q-select"),r=(0,l.g2)("sie-modal"),s=(0,l.g2)("q-list-header"),u=(0,l.g2)("q-item-main"),c=(0,l.g2)("q-item"),d=(0,l.g2)("q-list");return(0,l.uX)(),(0,l.CE)("div",no,[(0,l.bF)(r,{modelValue:e.modalEstado,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.modalEstado=a}),title:"Configurar "+e.dataInfo.descripcion,ok:e.$t("botones.guardar"),onSubmit:e.guardar,onClose:e.cerrar},{default:(0,l.k6)(function(){return[(0,l.Lk)("table",lo,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[a[3]||(a[3]=(0,l.Lk)("th",null,null,-1)),(0,l.Lk)("th",io,(0,i.v_)(e.$t("detalle")),1),e.campoAdicionalDocumentos?((0,l.uX)(),(0,l.CE)("th",ro,(0,i.v_)(e.$t("subirArchivo")),1)):(0,l.Q3)("v-if",!0)])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaDetalle,function(a){return(0,l.uX)(),(0,l.CE)("tr",{key:a.ID_DETALLE},[(0,l.Lk)("td",null,[(0,l.bF)(o,{modelValue:a.MARCADO,"onUpdate:modelValue":function(e){return a.MARCADO=e},color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Lk)("td",{innerHTML:a.DESCRIPCION},null,8,so),e.campoAdicionalDocumentos?((0,l.uX)(),(0,l.CE)("td",uo,[e.documentosOpcionales?((0,l.uX)(),(0,l.Wv)(n,{key:1,class:"col",modelValue:a.SUBIR,"onUpdate:modelValue":function(e){return a.SUBIR=e},options:e.tipoEntrega},null,8,["modelValue","onUpdate:modelValue","options"])):((0,l.uX)(),(0,l.Wv)(t,{key:0,class:"col",modelValue:a.SUBIR,"onUpdate:modelValue":function(e){return a.SUBIR=e},color:"secondary",disable:!a.MARCADO,"true-value":1,"false-value":0},null,8,["modelValue","onUpdate:modelValue","disable"])),(0,l.bF)(n,{class:"col q-if-outlined",modelValue:a.FORMATO,"onUpdate:modelValue":function(e){return a.FORMATO=e},options:e.tipoDocumento,"float-label":"Formato de Adjunto",disable:0===a.SUBIR||!a.MARCADO},null,8,["modelValue","onUpdate:modelValue","options","disable"])])):(0,l.Q3)("v-if",!0)])}),128))])])]}),_:1},8,["modelValue","title","ok","onSubmit","onClose"]),(0,l.bF)(r,{modelValue:e.modalDetalleExoneraciones,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.modalDetalleExoneraciones=a}),onSubmit:a[2]||(a[2]=function(a){return e.modalDetalleExoneraciones=!1}),title:"Alumnos Exonerados"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",co,[(0,l.bF)(d,{highlight:"","inset-separator":""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.exonerados,function(a,o){return(0,l.uX)(),(0,l.CE)(l.FK,{key:e.key},[(0,l.bF)(s,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o),1)]}),_:2},1024),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a,function(e,a){return(0,l.uX)(),(0,l.Wv)(c,null,{default:(0,l.k6)(function(){return[(0,l.bF)(u,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.NOMCOMP),1)]}),_:2},1024)]}),_:2},1024)}),256))],64)}),128))]}),_:1})])]}),_:1},8,["modelValue"])])}var fo={emits:["cerrar"],components:{SieModal:Z.A,QCheckbox:b.vZ,QToggle:b.c5,QSelect:b.Si,QList:b.Mb,QListHeader:b.XR,QItem:b.H0,QItemMain:b.mF},props:["dataInfo","configuracion","ano","isGreater"],data:function(){return{listaDetalle:[],listaSeleccionados:[],modalDetalleExoneraciones:!1,exonerados:{},modalEstado:!0,tipoEntrega:[{label:"No",value:0},{label:"Opcional",value:2},{label:"Obligatorio",value:1}],tipoDocumento:[{label:"PDF - Imagen",value:0},{label:"PDF",value:2},{label:"Imagen",value:1}],ID:null,campoAdicionalDocumentos:this.configuracion.M_SUBIR_PENDIENTES&&"documentos"===this.dataInfo.tipo,documentosOpcionales:this.configuracion.M_SUBIR_PENDIENTES&&this.configuracion.M_DOCUMENTO_OPCIONAL&&"documentos"===this.dataInfo.tipo}},methods:{guardar:function(){var e=this,a=[],o=[],t=[],n=[],l=[],i="";this.listaDetalle.forEach(function(r,s){if(e.campoAdicionalDocumentos&&(0===r.SUBIR||r.IDSUBIR||n.push({parametro:r.PARAMETRO,tipo:r.SUBIR,formato:r.FORMATO}),0===r.SUBIR&&r.IDSUBIR&&t.push(r.IDSUBIR),0!==r.SUBIR&&r.IDSUBIR&&(r.SUBIRBASE!==r.SUBIR||r.FORMATO!==r.FORMATOBASE))){var u={id:r.IDSUBIR};r.SUBIRBASE!==r.SUBIR&&(u.tipo=r.SUBIR),r.FORMATO!==r.FORMATOBASE&&(u.formato=r.FORMATO),l.push(u)}0===s&&(i=r.TIPO),r.ID_DETALLE?r.MARCADO||a.push(r.ID_DETALLE):r.MARCADO&&o.push({VALOR:r.PARAMETRO,descripcion:r.DESCRIPCION,PARAMETROS_ID:e.ID})});var r=function(){J.$http.post("api/HyoParametrosdet/registrarDetalle",{eliminar:a,agregar:o,parametro:i}).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.mensaje),o.tipo),o.tipo||(e.modalEstado=!1,e.cerrar())})};a.length>0||o.length>0?a.length>0?J.$http.get("api/HyoMatriculaexoneraciones/retornaExoneraciones",{params:{ids:a}}).then(function(a){var o=a.json;if(0===Object.keys(o).length)r();else{var t=e.$t("mensajes.e0035");e.$q.notify({message:t,position:"top-right",color:"warning",actions:[{label:e.$t("botones.verDetalles"),handler:function(){e.exonerados=o,e.modalDetalleExoneraciones=!0}}]})}}):r():this.cerrar(),(t.length>0||n.length>0||l.length>0)&&J.$http.post("api/HyoMatriculasubirdoc/grabarInformacion",{borrar:t,grabar:n,ano:this.ano,actualizar:l}).then(function(t){t.json;a.length>0||o.length,e.modalEstado=!1})},cerrar:function(){this.$emit("cerrar")}},mounted:function(){var e=this,a=this.dataInfo.tipo,o=this.dataInfo.parametrosId;this.ID=this.dataInfo.parametrosId;var t={tipo:a,parametros_id:o,esDocumentoEspecial:this.campoAdicionalDocumentos,ano:this.ano};J.$http.post("api/HyoParametrosdet/obtDetalleGeneral",t).then(function(a){var o=a.json;e.listaDetalle=o.datos})}};const po=(0,E.A)(fo,[["render",mo]]);var ho=po,vo=Be.Hi,bo={components:{sieSelect:C.A,QTable:H.A,draggable:vo,QToggle:b.c5,QPopupEdit:b.GT,SieModal:Z.A,QCheckbox:b.vZ,QList:b.Mb,QItem:b.H0,modalConfiguracion:ho,QIcon:b.bP,QInput:b.ie,QBtn:b.Il,QField:b.Om},props:["anoMat","configuracion","isReserva"],data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,listaParametros:[],cabeceras:[{label:"matricula.descripcion",campo:"DESCRIPCION"},{label:"matricula.activo",campo:"ESTADO",tipo:"switch"}],dataInicial:[],dataEditar:null,modalConfigurar:!1,titulo:null,listaDetalle:[],listaSeleccionados:[],modalDetalleExoneraciones:!1,exonerados:{},id:null,avisosTipo:[{TEXTO:""}],avisoSelecionado:1,modalAvisos:!1,dataDetalle:{},tituloConfigAviso:null}},methods:{obtParametrosAno:function(){var e=this;J.$http.get("api/HyoMatriculaparametros/obtParametros",{params:{ano:this.anoMat,isReserva:this.isReserva}}).then(function(a){var o=a.json;o.forEach(function(a){a.NESTADO="S"===a.ESTADO?e.$t("botones.si"):e.$t("botones.no"),a.noArrastrar=["movilidad","titulo","separadocumentos"].indexOf(a.TIPO)>=0,a.noEditable=["titulo"].indexOf(a.TIPO)>=0,a.noConfigurar=["titulo","separadocumentos","cursos","biblioteca"].indexOf(a.TIPO)>=0,a.noAviso=["titulo","separadocumentos","cursos"].indexOf(a.TIPO)>=0}),e.listaParametros=o,e.dataInicial=o})},cerrarModal:function(){this.modalConfigurar=!1},ordenarParametro:function(e){if(this.permiso<=2)return!1;var a=[];if(!e.moved.element.noEditable&&e.moved.oldIndex>=2&&e.moved.newIndex>=2)for(var o=2;o<this.listaParametros.length;o++){var t=this.listaParametros[o];if(t.ORDEN-1!==o){var n=o+1;a.push({id:t.ID,orden:n}),t.ORDEN=n}}else this.listaParametros=this.dataInicial;a.length>0&&J.$http.get("api/HyoMatriculaparametros/actualizaOrden",{params:{parametros:a}})},abreEditar:function(e){this.dataEditar=e},terminaEdicion:function(e){if(e.DESCRIPCION!==this.dataEditar){var a={valor:e.DESCRIPCION,id:e.ID,tipo:e.TIPO,campo:"DESCRIPCION",ano:this.anoMat};this.grabarCambio(a)}},cambiarToggle:function(e){var a={valor:e.ESTADO,id:e.ID,tipo:e.TIPO,campo:"ESTADO",ano:this.anoMat};this.grabarCambio(a)},grabarCambio:function(e){var a=this;J.$http.get("api/HyoMatriculaparametros/actualizarParametroId",{params:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o.mensaje),o.tipo)})},configurar:function(e,a,o){this.modalConfigurar=!0,this.titulo=o,this.dataDetalle={tipo:e,parametrosId:a,descripcion:o},this.ID=a,this.listaDetalle=[],this.listaSeleccionados=[]},grabarConfiguracion:function(){var e=this,a=[],o=[],t="";this.listaDetalle.forEach(function(n,l){0===l&&(t=n.TIPO),n.ID_DETALLE?n.MARCADO||a.push(n.ID_DETALLE):n.MARCADO&&o.push({VALOR:n.PARAMETRO,descripcion:n.DESCRIPCION,PARAMETROS_ID:e.ID})});var n=function(){J.$http.post("api/HyoParametrosdet/registrarDetalle",{eliminar:a,agregar:o,parametro:t}).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.mensaje),o.tipo),o.tipo||(e.modalConfigurar=!1)})};(a.length>0||o.length>0)&&(a.length>0?J.$http.get("api/HyoMatriculaexoneraciones/retornaExoneraciones",{params:{ids:a}}).then(function(a){var o=a.json;if(0===Object.keys(o).length)n();else{var t=e.$t("mensajes.e0035");e.modalConfigurar=!1,e.$q.notify({message:t,position:(0,Ta.isGreater)()?"top-right":"bottom",color:"warning",actions:[{label:e.$t("botones.verDetalles"),handler:function(){e.exonerados=o,e.modalDetalleExoneraciones=!0}}]})}}):n())},configurarAvisos:function(e){var a=this;this.modalAvisos=!0,this.tituloConfigAviso="Configurar avisos de "+e.DESCRIPCION,this.avisosTipo=[{TIPO:1,msg:"configuracionMatricula.aviso.alerta",TEXTO:"",IDPARAMETRO:e.ID},{TIPO:2,msg:"configuracionMatricula.aviso.mensaje",TEXTO:"",IDPARAMETRO:e.ID},{TIPO:3,msg:"configuracionMatricula.aviso.exonera",TEXTO:"",IDPARAMETRO:e.ID}],J.$http.get("api/HyoMatriculaparametros/obtAvisoByTipoId",{params:{parametros:e}}).then(function(e){var o=e.json;o.forEach(function(e){a.avisosTipo[e.TIPO-1].TEXTO=e.TEXTO})})},grabarAlertas:function(){var e=this,a={data:this.avisosTipo,id_parametro:this.avisosTipo[0].IDPARAMETRO};J.$http.post("api/HyoMatriculaavisos/grabarAviso",a).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.mensaje),o.tipo),o.tipo||(e.modalAvisos=!1)})}},mounted:function(){this.obtParametrosAno()}};const go=(0,E.A)(bo,[["render",to]]);var Co=go,Oo={class:"bg-white q-pa-sm"},Ao={class:"q-pa-xs"},Io={class:"q-ma-sm"},Eo={class:"q-ma-xs",style:{"max-height":"70vh","overflow-y":"auto"}},Do={class:"row"},To={class:"row"},So={class:"q-ma-xs"},Ro={class:"row"},ko={class:"col"},Mo={class:"row"},No={key:0,class:"col row"},Vo={class:"col q-px-xs q-mx-xs q-mb-sm border-field"},Fo={class:"leyenda"},_o={class:"col row wrap justify-between q-ma-xs"},yo={key:1,class:"col row"},Po={class:"col q-px-xs q-mx-xs q-mb-sm border-field"},Lo={class:"col row-md wrap justify-between q-ma-xs"},Uo={key:2,class:"col row"},$o={class:"col column"},qo={key:1,class:"q-ma-xs"},wo={class:"q-table q-table-horizontal-separator q-card"},Qo={class:"ancho-texto"},jo={class:"row justify-center"},xo=["innerHTML"],Xo={class:"row justify-center"},Go={class:"row justify-center"},Ho={class:"row justify-end"};function Bo(e,a){var o=(0,l.g2)("sie-upload"),t=(0,l.g2)("sie-pdf"),n=(0,l.g2)("sie-modal"),r=(0,l.g2)("q-btn"),s=(0,l.g2)("q-toolbar"),u=(0,l.g2)("q-layout-drawer"),c=(0,l.g2)("q-select"),d=(0,l.g2)("sie-editor"),m=(0,l.g2)("header-btn"),f=(0,l.g2)("q-toggle"),p=(0,l.g2)("q-input"),h=(0,l.g2)("q-field"),v=(0,l.g2)("q-icon"),b=(0,l.g2)("draggable");return(0,l.uX)(),(0,l.CE)("div",Oo,[(0,l.bo)((0,l.bF)(o,{allow:["jpg","png","jpeg"],onUpload:e.uploadFondo,ref:"upload"},null,8,["onUpload"]),[[wa.aG,!1]]),(0,l.bF)(n,{modelValue:e.modalVP,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.modalVP=a})},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Ao,[(0,l.bF)(t,{class:"col",src:e.url,style:{"min-width":"50vw",height:"85vh"}},null,8,["src"])])]}),_:1},8,["modelValue"]),(0,l.bF)(n,{modelValue:e.modalContenido,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.modalContenido=a}),onSubmit:e.guardarContenido},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Io,[(0,l.bF)(u,{side:"right",modelValue:e.barraConst,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.barraConst=a}),overlay:!0},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{class:"justify-between"},{default:(0,l.k6)(function(){return[(0,l.Lk)("span",null,(0,i.v_)(e.$t("biblioteca.campos")),1),(0,l.bF)(r,{flat:"",dense:"",round:"",icon:"close",onClick:a[1]||(a[1]=function(a){return e.barraConst=!1})})]}),_:1}),(0,l.Lk)("div",Eo,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.camposConstancia,function(a){return(0,l.uX)(),(0,l.CE)("div",Do,[(0,l.Lk)("b",null,(0,i.v_)(e.$t(a.desc)+": "),1),(0,l.Lk)("span",null,(0,i.v_)(a.campo),1)])}),256))])]}),_:1},8,["modelValue"]),(0,l.bF)(r,{class:"lateral-btn",icon:"format_list_bulleted",color:"secondary",onClick:a[3]||(a[3]=function(a){return e.barraConst=!0})}),(0,l.Lk)("div",To,[(0,l.bF)(c,{class:"q-if-outlined col",modelValue:e.infoModal.TIPO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.infoModal.TIPO=a}),options:e.tiposConstancia,"float-label":"Tipo",disable:e.infoModal.esEdit},null,8,["modelValue","options","disable"])]),(0,l.bF)(d,{class:"col",modelValue:e.infoModal.CONTENIDO,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.infoModal.CONTENIDO=a}),label:e.$t("matricula.descripcion"),extra:{ruler:!0}},null,8,["modelValue","label"])])]}),_:1},8,["modelValue","onSubmit"]),e.hideHead?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(m,{key:0,buttons:e.botones},null,8,["buttons"])),(0,l.bF)(u,{side:"right",modelValue:e.barraLateral,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.barraLateral=a}),overlay:!0},{default:(0,l.k6)(function(){return[(0,l.bF)(s,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("span",null,(0,i.v_)(e.$t("biblioteca.campos")),1)]}),_:1}),(0,l.Lk)("div",So,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.campos,function(a){return(0,l.uX)(),(0,l.CE)("div",Ro,[(0,l.Lk)("b",null,(0,i.v_)(e.$t(a.titulo)+": "),1),(0,l.Lk)("span",null,(0,i.v_)(a.campo),1)])}),256))])]}),_:1},8,["modelValue"]),e.isGreater?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(r,{key:1,class:"lateral-btn",icon:"format_list_bulleted",color:"secondary",onClick:a[8]||(a[8]=function(a){return e.barraLateral=!0})})),(0,l.Lk)("div",ko,[(0,l.Lk)("div",Mo,[e.soloBotones?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(c,{key:0,class:"col q-if-outlined",modelValue:e.momento,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.momento=a}),options:e.momentos,"float-label":e.$t("mostrarMensaje"),onInput:e.cambiarMomento},null,8,["modelValue","options","float-label","onInput"])),"S"===e.momento||e.soloBotones?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e.momento&&["C"].indexOf(e.momento)<0?((0,l.uX)(),(0,l.Wv)(f,{key:0,modelValue:e.data.PERMANENTE,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.data.PERMANENTE=a}),label:"Permanente","true-value":"1","false-value":"0",color:"secondary"},null,8,["modelValue"])):(0,l.Q3)("v-if",!0),e.momento&&"1"===e.data.PERMANENTE?((0,l.uX)(),(0,l.Wv)(p,{key:1,class:"q-if-outlined",modelValue:e.data.MSJ_BOTON,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.data.MSJ_BOTON=a}),"float-label":e.$t("Descripción"),maxlength:"50"},null,8,["modelValue","float-label"])):(0,l.Q3)("v-if",!0)],64))]),e.isGreater&&!e.soloBotones&&["C"].indexOf(e.momento)<0?((0,l.uX)(),(0,l.CE)("div",No,[(0,l.Lk)("fieldset",Vo,[(0,l.Lk)("legend",Fo,(0,i.v_)(e.$t("biblioteca.campos")),1),(0,l.Lk)("div",_o,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.campos,function(a){return(0,l.uX)(),(0,l.CE)("div",{key:a.titulo,class:"col-5"},[(0,l.Lk)("b",null,(0,i.v_)(e.$t(a.titulo)+": "),1),(0,l.Lk)("span",null,(0,i.v_)(a.campo),1)])}),128))])])])):(0,l.Q3)("v-if",!0),"F"===e.momento?((0,l.uX)(),(0,l.CE)("div",yo,[(0,l.Lk)("fieldset",Po,[a[20]||(a[20]=(0,l.Lk)("legend",{class:"leyenda"},"Imprimir Documentos del Sistema",-1)),(0,l.Lk)("div",Lo,[(0,l.bF)(f,{class:"col-5",modelValue:e.data.VERCONSTANCIA,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.data.VERCONSTANCIA=a}),label:e.$t("mostrarConst"),"true-value":"S","false-value":"N"},null,8,["modelValue","label"]),e.isReserva?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(f,{key:0,class:"col-5",modelValue:e.data.VERFICHA,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.data.VERFICHA=a}),label:e.$t("mostrarFicha"),"true-value":"S","false-value":"N"},null,8,["modelValue","label"])),(0,l.bF)(f,{class:"col-5",modelValue:e.data.VERMOV,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.data.VERMOV=a}),label:e.$t("fichaMovilidad"),"true-value":"S","false-value":"N"},null,8,["modelValue","label"]),(0,l.bF)(f,{class:"col-5",modelValue:e.data.VERDESASTRE,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.data.VERDESASTRE=a}),label:e.$t("fichaDesastres"),"true-value":"S","false-value":"N"},null,8,["modelValue","label"])])])])):(0,l.Q3)("v-if",!0),["T","M","D"].indexOf(e.momento)>=0?((0,l.uX)(),(0,l.CE)("div",Uo,[(0,l.bF)(p,{class:"col q-if-outlined",modelValue:e.data.TITULO,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.data.TITULO=a}),"float-label":e.$t("ASUNTO"),maxlength:"100"},null,8,["modelValue","float-label"])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",$o,[["S","C"].indexOf(e.momento)<0&&!e.soloBotones?((0,l.uX)(),(0,l.Wv)(d,{key:0,class:"col",modelValue:e.data.MENSAJE,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.data.MENSAJE=a}),label:e.$t("matricula.mensaje")},null,8,["modelValue","label"])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[["C"].indexOf(e.momento)<0&&!e.soloBotones?((0,l.uX)(),(0,l.Wv)(h,{key:0,class:"q-px-xs q-mx-xs q-mb-sm",count:140},{default:(0,l.k6)(function(){return[(0,l.bF)(p,{class:"col q-if-outlined no-margin",modelValue:e.data.MENSAJE,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.data.MENSAJE=a}),"float-label":e.$t("matricula.mensaje"),maxlength:"140"},null,8,["modelValue","float-label"])]}),_:1})):((0,l.uX)(),(0,l.CE)("div",qo,[(0,l.Lk)("table",wo,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,[(0,l.bF)(v,{name:"import_export",size:"20px"})]),(0,l.Lk)("th",Qo,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("matricula.descripcion")),1)]),(0,l.Lk)("th",null,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("tipo")),1)]),(0,l.Lk)("th",null,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("activo")),1)]),a[21]||(a[21]=(0,l.Lk)("th",null,null,-1))])]),(0,l.bF)(b,{modelValue:e.infoBody,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.infoBody=a}),tag:"tbody",onChange:e.ordenaAutorizacion},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoBody,function(a,o){return(0,l.uX)(),(0,l.CE)("tr",{key:o},[(0,l.Lk)("td",null,[(0,l.Lk)("div",jo,[(0,l.bF)(v,{name:"blur_on",size:"20px"})])]),(0,l.Lk)("td",{innerHTML:a.CONTENIDO},null,8,xo),(0,l.Lk)("td",null,[(0,l.Lk)("div",Xo,[(0,l.bF)(c,{class:"q-if-outlined",modelValue:a.TIPO,"onUpdate:modelValue":function(e){return a.TIPO=e},options:e.tiposConstancia,disable:""},null,8,["modelValue","onUpdate:modelValue","options"])])]),(0,l.Lk)("td",null,[(0,l.Lk)("div",Go,[(0,l.bF)(f,{modelValue:a.ACTIVO,"onUpdate:modelValue":function(e){return a.ACTIVO=e},"true-value":1,"false-value":0,onInput:function(o){return e.actualizarDetalle([a])}},null,8,["modelValue","onUpdate:modelValue","onInput"])])]),(0,l.Lk)("td",null,[(0,l.Lk)("div",Ho,[(0,l.bF)(r,{flat:"",dense:"",round:"",icon:"edit",onClick:function(o){return e.nuevoContenido(a)}},null,8,["onClick"]),(0,l.bF)(r,{flat:"",dense:"",round:"",icon:"delete",onClick:function(o){return e.eliminarDetalle(a)}},null,8,["onClick"])])])])}),128))]}),_:1},8,["modelValue","onChange"])])]))],64))])])])}var zo=Be.Hi,Wo={emits:["close"],components:{QSelect:b.Si,QToggle:b.c5,sieEditor:B.A,QPageSticky:b._U,QLayoutDrawer:b.D2,sieModal:Z.A,draggable:zo,siePdf:ze.A,sieUpload:Da.A,QToolbar:b.ZV,QBtn:b.Il,QInput:b.ie,QField:b.Om,QIcon:b.bP},data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,momento:null,barraLateral:!1,barraConst:!1,tiposConstancia:[{value:0,label:this.$t("Cabecera")},{value:1,label:this.$t("Cuerpo")},{value:2,label:this.$t("Pie")}],modalVP:!1,url:null,camposConstancia:[{campo:"{{ANO}}",desc:"Año"},{campo:"{{NIVEL}}",desc:"Nivel"},{campo:"{{GRADO}}",desc:"Grado"},{campo:"{{SECCION}}",desc:"Sección"},{campo:"{{SECCIOND}}",desc:"Descripción de la sección"},{campo:"{{NOMBRE}}",desc:"Nombre del estudiante"},{campo:"{{TIPDOCU}}",desc:"Tipo de documento del estudiante"},{campo:"{{DOCALU}}",desc:"Número de documento del estudiante"},{campo:"{{DOCPEN}}",desc:"Documentos Pendientes"},{campo:"{{CURPEN}}",desc:"Cursos pendientes"},{campo:"{{COMPPEN}}",desc:"Competencias pendientes"},{campo:"{{FECIMP}}",desc:"Fecha de Impresión"},{campo:"{{FECHA}}",desc:"Fecha de proceso"},{campo:"{{HORA}}",desc:"Hora del proceso"},{campo:"{{FECHORA}}",desc:"Fecha y hora del proceso"},{campo:"{{IP}}",desc:"Dirección IP"},{campo:"{{RESPAGNOM}}",desc:"Nombre R. Pago"},{campo:"{{RESPAGDOC}}",desc:"Documento  R. Pago"},{campo:"{{RESPAGPAR}}",desc:"Parentesco  R. Pago"},{campo:"{{RESMATNOM}}",desc:"Nombre R. Matrícula"},{campo:"{{RESMATDOC}}",desc:"Documento R. Matrícula"},{campo:"{{RESMATPAR}}",desc:"Parentesco R. Matrícula"},{campo:"{{PADNOM}}",desc:"Nombre del Padre"},{campo:"{{PADDOC}}",desc:"Documento del Padre"},{campo:"{{PADCEL}}",desc:"Celular del Padre"},{campo:"{{MADNOM}}",desc:"Nombre del Madre"},{campo:"{{MADDOC}}",desc:"Documento del Madre"},{campo:"{{MADCEL}}",desc:"Celular del Madre"},{campo:"{{APONOM}}",desc:"Nombre del Apoderado"},{campo:"{{APODOC}}",desc:"Documento del Apoderado"},{campo:"{{APOCEL}}",desc:"Celular del Apoderado"}],momentos:[{value:"F",label:this.$t("matricula.alfinal")}],botones:[],data:{PERMANENTE:"0"},dataBase:{},campos:[{titulo:"codigo",campo:"{{ALUCOD}}"},{titulo:"Codigo de Banco",campo:"{{ALUCODANT}}"},{titulo:"apepat",campo:"{{APEPAT}}"},{titulo:"apemat",campo:"{{APEMAT}}"},{titulo:"nombres",campo:"{{NOMBRES}}"},{titulo:"apellidosynombres",campo:"{{NOMCOMP}}"},{titulo:"sexo.sexo",campo:"{{SEXO}}"},{titulo:"ngs.nivel",campo:"{{NIVEL}}"},{titulo:"usuario.nombre",campo:"{{USUARIO}}"},{titulo:"grado",campo:"{{GRADO}}"}],modalContenido:!1,infoModal:{},tituloModal:"",infoBody:[],infoHead:{},fotoUpd:!1}},props:["anoMat","configuracion","isReserva","add","soloBotones","hideHead"],methods:{cargarCabecera:function(){var e=this;return h()(f()().m(function a(){return f()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/ConstanciaCabeceraController/getConstanciaCabecera",{params:{ano:e.anoMat,tipo:e.isReserva?0:1}});case 1:e.infoHead=a.v,Array.isArray(e.infoHead)&&(e.infoHead={TITULO:"",ANO:e.anoMat,TIPO:e.isReserva?0:1}),e.botones=[{label:"Agregar",icon:"add",click:e.addContent},{label:"Vista Previa",icon:"remove_red_eye",click:e.verModalVistaPrevia},{label:"Guardar",icon:"save",click:e.grabarMensaje}],e.infoHead.TITULO&&e.infoHead.TITULO.length>0?e.botones.push({label:"Eliminar fondo",icon:"close",click:e.eliminarFondo}):e.botones.push({label:"Importar Fondo",icon:"import_export",click:e.importFile}),e.infoHead.fotoUpd=!1;case 2:return a.a(2)}},a)}))()},cargaDetalle:function(){var e=this;return h()(f()().m(function a(){return f()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/ConstanciaDetalleController/getConstanciaDetalle",{params:{ano:e.anoMat,tipo:e.isReserva?0:1}});case 1:e.infoBody=a.v;case 2:return a.a(2)}},a)}))()},cargaConstancia:function(){var e=this;return h()(f()().m(function a(){return f()().w(function(a){while(1)switch(a.n){case 0:e.cargarCabecera(),e.cargaDetalle();case 1:return a.a(2)}},a)}))()},eliminarFondo:function(){this.infoHead.TITULO=null,this.saveConstancia()},cambiarMomento:function(e){this.data=this.dataBase[e]||{ANO:this.anoMat,MOMENTO:e,PERMANENTE:"0",VERCONSTANCIA:"N",VERFICHA:"N",VERMOV:"N",VERDESASTRE:"N"}},cargarInfo:function(){var e=this;J.$http.get("api/HyoMatriculamensaje/obtMensajeAno",{params:{isReserva:this.isReserva,ano:this.anoMat,momento:["I","F","A","Z","T","P","S","D","M"]}}).then(function(a){var o=a.json;o.forEach(function(a){e.dataBase[a.MOMENTO]=a}),e.momento=e.momento||o[0].MOMENTO,e.cambiarMomento(e.momento)})},verModalVistaPrevia:function(){this.modalVP=!0,this.url="".concat(this.sie.api,"/HyoMatricula/reporte/0/").concat(this.anoMat,"/").concat(this.isReserva?0:1,"/0/0?access_token=").concat(this.sie.token)},actualizarDetalle:function(e){var a=this;return h()(f()().m(function o(){var t,n,l;return f()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.$http.post("api/ConstanciaDetalleController/updateConstanciaDetalle",{lista:e});case 1:t=o.v,n=t.msg,l=t.type,l||a.cargaDetalle(),a.notify(a.$t("mensajes."+n),l);case 2:return o.a(2)}},o)}))()},ordenaAutorizacion:function(e){var a=this;return h()(f()().m(function o(){var t;return f()().w(function(o){while(1)switch(o.n){case 0:e=e.moved,a.infoHead.ID&&(t=[],a.infoBody.forEach(function(e,a){var o=e.ORDEN,n=e.ID;o!==a+1&&t.push({ORDEN:a+1,ID:n})}),a.actualizarDetalle(t));case 1:return o.a(2)}},o)}))()},guardarContenido:function(){var e=this;return h()(f()().m(function a(){var o,t,n,l,i,r;return f()().w(function(a){while(1)switch(a.n){case 0:if(!e.infoModal.TIPO&&0!==e.infoModal.TIPO||!e.infoModal.CONTENIDO){a.n=5;break}if(!e.infoModal.esEdit){a.n=2;break}return a.n=1,e.$http.post("api/ConstanciaDetalleController/updateConstanciaDetalle",{lista:[e.infoModal]});case 1:o=a.v,t=o.msg,n=o.type,n||(e.cargaDetalle(),e.modalContenido=!1),e.notify(e.$t("mensajes."+t),n),a.n=5;break;case 2:if(!e.infoHead.ID){a.n=4;break}return a.n=3,J.$http.post("api/ConstanciaDetalleController/addConstanciaDetalle",{data:[e.infoModal]});case 3:l=a.v,i=l.msg,r=l.type,e.$notify(e.$t("mensajes."+i),r),r||(e.modalContenido=!1,e.cargaDetalle()),a.n=5;break;case 4:e.infoBody.push(e.infoModal),e.modalContenido=!1;case 5:return a.a(2)}},a)}))()},saveMensaje:function(){var e=this;return h()(f()().m(function a(){return f()().w(function(a){while(1)switch(a.n){case 0:e.data.isReserva=e.isReserva,J.$http.post("api/HyoMatriculamensaje/saveMensaje",e.data).then(function(a){var o=a.json;(0,z["default"])(e.$t(o.message),o.tipo),e.cargarInfo()});case 1:return a.a(2)}},a)}))()},saveConstancia:function(){var e=this;return h()(f()().m(function a(){var o,t,n,l,i;return f()().w(function(a){while(1)switch(a.n){case 0:if(!(e.infoBody.length>0)){a.n=7;break}return a.n=1,J.$http.post("api/ConstanciaCabeceraController/addConstanciaCabecera",{data:e.infoHead});case 1:if(o=a.v,t=o.msg,n=o.type,l=o.ID,n){a.n=5;break}if(!l){a.n=3;break}return i=[],e.infoBody.forEach(function(e,a){var o=e.TIPO,t=e.CONTENIDO;i.push({TIPO:o,CONTENIDO:t,ORDEN:a+1,ID_CABECERA:l})}),a.n=2,J.$http.post("api/ConstanciaDetalleController/addConstanciaDetalle",{data:i});case 2:e.$notify(e.$t("mensajes."+t),n),e.cargaConstancia(),a.n=4;break;case 3:e.$notify(e.$t("mensajes."+t),n),e.cargaConstancia();case 4:a.n=6;break;case 5:e.$notify(e.$t("mensajes."+t),n);case 6:a.n=8;break;case 7:0===e.infoBody.length&&e.$notify("Debe agregar contenido a la constancia","error");case 8:return a.a(2)}},a)}))()},grabarMensaje:function(){var e=this;return h()(f()().m(function a(){return f()().w(function(a){while(1)switch(a.n){case 0:"C"!==e.momento&&e.saveMensaje(),("C"===e.momento||e.soloBotones)&&e.saveConstancia();case 1:return a.a(2)}},a)}))()},nuevoContenido:function(e){this.modalContenido=!0,e?(e.esEdit=!0,this.infoModal=e,this.tituloModal="Editar Contenido"):(this.tituloModal="Agregar Contenido",this.infoModal={TIPO:null,CONTENIDO:null,ACTIVO:1,ORDEN:this.infoBody.length+1},this.infoHead.ID&&(this.infoModal.ID_CABECERA=this.infoHead.ID))},addContent:function(){this.nuevoContenido()},eliminarDetalle:function(e){var a=this,o=e.ID;(0,ee.dialogDelete)().then(function(){var e=h()(f()().m(function e(t){var n;return f()().w(function(e){while(1)switch(e.n){case 0:if(console.log(t),!t){e.n=2;break}return e.n=1,a.$http.delete("api/ConstanciaDetalleController/deleteConstanciaDetalle",{params:{id:o}});case 1:n=e.v,1===n.code&&(a.cargaDetalle(),a.$notify(n.message));case 2:return e.a(2)}},e)}));return function(a){return e.apply(this,arguments)}}())},uploadFondo:function(e){var a=this;return h()(f()().m(function o(){var t,n,l,i;return f()().w(function(o){while(1)switch(o.p=o.n){case 0:return t=e[0],o.p=1,o.n=2,(0,Ea.Upload)({url:"api/HyoArchivo/tmp/upload",file:t});case 2:n=o.v,l="fondo".concat(a.isReserva?0:1,".").concat(n.originalFilename.substring(n.originalFilename.lastIndexOf(".")+1)),i="".concat(a.sie.ano,"/constancia/").concat(l),a.infoHead.TITULO=i,a.infoHead.tmp=n.name,a.infoHead.filename=l,a.infoHead.fotoUpd=!0,console.log(n),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},importFile:function(){this.$refs.upload.$el.querySelector("input").click()}},mounted:function(){var e=this;return h()(f()().m(function a(){var o;return f()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoMatriculamensaje/obtConfiguracionInicial",{params:{ano:e.anoMat}});case 1:o=a.v,e.camposConstancia=o.campos,e.configuracion["M_OCULTA_BIENVENIDA"]?e.soloBotones||(e.momento="F"):e.momentos.unshift({value:"I",label:e.$t("matricula.alinicio")}),e.soloBotones&&(e.momento="F"),e.configuracion["M_MENSAJE_INGRESO"]&&e.momentos.push({value:"Z",label:e.$t("matricula.alingreso")}),e.configuracion["M_MENSAJE_FINAL"]&&e.momentos.push({value:"M",label:e.$t("matricula.mailalfinal")}),e.configuracion["M_ENVIAR_MENSAJE_TRANSFERIR"]&&e.momentos.push({value:"T",label:e.$t("matricula.alTransferir")}),e.configuracion["M_MENSAJE_PAGO"]&&e.momentos.push({value:"P",label:e.$t("matricula.alPagar")}),e.configuracion["M_ENVIAR_SMS"]&&e.momentos.push({value:"S",label:e.$t("matricula.sms")}),e.configuracion["M_MENSAJE_DOCUMENTO"]&&e.momentos.push({value:"D",label:e.$t("matricula.msjDocumento")}),["0001","0019","0014","0193","0375","0212","0516"].indexOf((0,A["default"])().colcod)<0&&e.momentos.push({value:"C",label:e.$t("Constancia")}),e.cargarInfo();case 2:return a.a(2)}},a)}))()},watch:{add:function(e){1===e&&(this.grabarMensaje(),this.$emit("close"))},dataBase:function(e){console.log(e)},momento:function(e){"S"===e?(this.campos=[{titulo:"codigo",campo:"{{CODIGO}}"}],2===this.configuracion["M_ENVIAR_SMS"]?this.campos.push({titulo:"alumno",campo:"{{ALUNOM}}"}):this.campos.push({titulo:"familia",campo:"{{FAMDES}}"})):(this.campos=[{titulo:"codigo",campo:"{{ALUCOD}}"},{titulo:"Codigo de Banco",campo:"{{ALUCODANT}}"},{titulo:"apepat",campo:"{{APEPAT}}"},{titulo:"apemat",campo:"{{APEMAT}}"},{titulo:"nombres",campo:"{{NOMBRES}}"},{titulo:"apellidosynombres",campo:"{{NOMCOMP}}"},{titulo:"sexo.sexo",campo:"{{SEXO}}"},{titulo:"ngs.nivel",campo:"{{NIVEL}}"},{titulo:"usuario.nombre",campo:"{{USUARIO}}"},{titulo:"grado",campo:"{{GRADO}}"}],this.configuracion["M_MENSAJE_DOCUMENTO"]&&"D"===e&&this.campos.push({titulo:"detalle",campo:"{{DETALLEDOC}}"}),"F"===e&&(this.data&&0!==Object.keys(this.data).length||(this.data.VERCONSTANCIA="N",this.data.VERFICHA="N",this.data.VERMOV="N",this.data.VERDESASTRE="N"))),3===this.permiso&&("C"===e||this.soloBotones?this.cargaConstancia():this.botones=[{label:"Guardar",icon:"save",click:this.grabarMensaje}])}},computed:{isGreater:function(){return(0,Ta.isGreater)()}}};const Ko=(0,E.A)(Wo,[["render",Bo]]);var Jo=Ko,Yo={class:"col bg-white q-pa-sm"},Zo={class:"col bg-white"},et={class:"q-table-middle"},at={class:"q-table q-table-horizontal-separator q-card"},ot={key:0},tt={class:"text-bold"},nt={class:"text-bold"},lt={class:"text-bold"},it={class:"text-bold"},rt={key:0,style:{"text-align":"center"}},st={class:"row justify-center"},ut={key:1},ct={key:2,style:{color:"red"}},dt={key:3,colspan:"2"};function mt(e,a){var o=(0,l.g2)("q-icon"),t=(0,l.g2)("q-input"),n=(0,l.g2)("q-popup-edit"),r=(0,l.g2)("q-toggle"),s=(0,l.g2)("draggable");return(0,l.uX)(),(0,l.CE)("div",Yo,[(0,l.Lk)("div",Zo,[(0,l.Lk)("div",et,[(0,l.Lk)("table",at,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[e.permiso>2?((0,l.uX)(),(0,l.CE)("th",ot,[(0,l.bF)(o,{name:"import_export",size:"20px"})])):(0,l.Q3)("v-if",!0),(0,l.Lk)("th",tt,(0,i.v_)(e.$t("matricula.descripcion")),1),(0,l.Lk)("th",nt,(0,i.v_)(e.$t("matricula.activo")),1),(0,l.Lk)("th",lt,(0,i.v_)(e.$t("configuracionMatricula.aviso.aviso")),1),(0,l.Lk)("th",it,(0,i.v_)(e.$t("matricula.error")),1)])]),(0,l.bF)(s,{modelValue:e.listaPasos,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.listaPasos=a}),tag:"tbody",onChange:e.ordenarPasos},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaPasos,function(a,s){return(0,l.uX)(),(0,l.CE)("tr",{key:a.ANO+a.PASO},[e.permiso>2?((0,l.uX)(),(0,l.CE)("td",rt,[(0,l.bo)((0,l.bF)(o,{name:"blur_on",size:"20px"},null,512),[[wa.aG,!a.noEditable]])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("td",null,[(0,l.eW)((0,i.v_)(a.DESCRIPCION),1),(0,l.bF)(n,{modelValue:a.DESCRIPCION,"onUpdate:modelValue":function(e){return a.DESCRIPCION=e},onShow:function(o){return e.abreEditar(a.DESCRIPCION)},onSave:function(o){return e.terminaEdicion(a,"DESCRIPCION")},buttons:"","label-cancel":e.$t("botones.cancelar"),"label-set":e.$t("botones.guardar")},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{modelValue:a.DESCRIPCION,"onUpdate:modelValue":function(e){return a.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onShow","onSave","label-cancel","label-set"])]),(0,l.Lk)("td",null,[(0,l.Lk)("div",st,[(0,l.bF)(r,{"true-value":"S","false-value":"N",modelValue:a.ESTADO,"onUpdate:modelValue":function(e){return a.ESTADO=e},readonly:e.permiso<=2||a.noDesactiva,onInput:function(o){return e.terminaEdicion(a,"ESTADO")},color:"secondary"},null,8,["modelValue","onUpdate:modelValue","readonly","onInput"])])]),a.noAviso?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("td",ut,[(0,l.eW)((0,i.v_)(a.AVISO),1),e.permiso>2?((0,l.uX)(),(0,l.Wv)(n,{key:0,modelValue:a.AVISO,"onUpdate:modelValue":function(e){return a.AVISO=e},onShow:function(o){return e.abreEditar(a.AVISO)},onSave:function(o){return e.terminaEdicion(a,"AVISO")},buttons:"","label-cancel":e.$t("botones.cancelar"),"label-set":e.$t("botones.guardar")},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{modelValue:a.AVISO,"onUpdate:modelValue":function(e){return a.AVISO=e},type:"textarea",maxlength:"300"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onShow","onSave","label-cancel","label-set"])):(0,l.Q3)("v-if",!0)])),a.noAviso?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("td",ct,[(0,l.eW)((0,i.v_)(a.MENSAJE),1),e.permiso>2?((0,l.uX)(),(0,l.Wv)(n,{key:0,modelValue:a.MENSAJE,"onUpdate:modelValue":function(e){return a.MENSAJE=e},onShow:function(o){return e.abreEditar(a.MENSAJE)},onSave:function(o){return e.terminaEdicion(a,"MENSAJE")},buttons:"","label-cancel":e.$t("botones.cancelar"),"label-set":e.$t("botones.guardar")},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{modelValue:a.MENSAJE,"onUpdate:modelValue":function(e){return a.MENSAJE=e},type:"textarea",maxlength:"300"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onShow","onSave","label-cancel","label-set"])):(0,l.Q3)("v-if",!0)])),a.noAviso?((0,l.uX)(),(0,l.CE)("td",dt)):(0,l.Q3)("v-if",!0)])}),128))]}),_:1},8,["modelValue","onChange"])])])])])}var ft=Be.Hi,pt={components:{QSelect:b.Si,QToggle:b.c5,sieEditor:B.A,QPageSticky:b._U,draggable:ft,QPopupEdit:b.GT,QIcon:b.bP,QInput:b.ie},data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,listaPasos:[],siNo:[{label:"Si",value:"S"},{label:"No",value:"N"}],dataEditar:null}},props:["anoMat","configuracion","isReserva"],methods:{cargarInfo:function(){var e=this;J.$http.get("api/HyoMatriculaorden/obtOrden",{params:{ano:this.anoMat,orden:-1,isReserva:this.isReserva}}).then(function(a){var o=a.json;o.forEach(function(e){e.noEditable=["inicio"].indexOf(e.PASO)>=0,e.noAviso=["bienvenida","clave"].indexOf(e.PASO)>=0,e.noDesactiva=["inicio","documentos","sDocumentos","sms","clave"].indexOf(e.PASO)>=0}),e.listaPasos=o})},ordenarPasos:function(e){var a=this,o=[],t=!1;if(this.configuracion.M_TALLERES&&0!==this.configuracion.M_TALLERES||this.configuracion.M_SUBIR_PENDIENTES&&this.configuracion.M_SEPARA_SUBIDA_VALIDACION&&0!==this.configuracion.M_SUBIR_PENDIENTES&&1===this.configuracion.M_SEPARA_SUBIDA_VALIDACION){var n=this.listaPasos.length-1;e.moved.oldIndex!==n&&e.moved.newIndex!==n&&["talleres","sDocumentos"].indexOf(e.moved.PASO)}if(this.permiso<=2||e.moved.element.noEditable||t)return this.cargarInfo(),!1;if(e.moved.oldIndex>=1&&e.moved.newIndex>=1){for(var l=1;l<this.listaPasos.length;l++){var i=this.listaPasos[l];if(i.ORDEN-1!==l){var r=l+1;o.push({paso:i.PASO,orden:r,ano:this.anoMat,FLGTIPO:i.FLGTIPO}),i.ORDEN=r}}J.$http.get("api/HyoMatriculaorden/actualizaOrden",{params:{parametros:o}}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o.mensaje),"check"===o.icono?"success":"error"),"check"===o.icono&&a.cargarInfo()})}},abreEditar:function(e){this.dataEditar=e},terminaEdicion:function(e,a){var o=this;if(e[a]!==this.dataEditar){var t={ano:e.ANO,paso:e.PASO,tipo:a,valor:e[a],FLGTIPO:e.FLGTIPO};this.dataEditar=null,J.$http.post("api/HyoMatriculaorden/actualizarPasos",t).then(function(e){var t=e.json;(0,z["default"])(o.$t("mensajes."+t.mensaje,a)),"success"===a&&o.cargarInfo()})}}},mounted:function(){this.cargarInfo()}};const ht=(0,E.A)(pt,[["render",mt]]);var vt=ht,bt=o(96760),gt=o(21675),Ct={class:"q-mt-sm"},Ot={class:"q-ma-sm"},At={class:"row q-col-gutter-sm"},It={class:"row q-col-gutter-sm"},Et={class:"row"},Dt={key:0,class:"column q-card q-ma-sm"},Tt={class:"absolute-full flex flex-center"},St={class:"row justify-center text-primary"};function Rt(e,a){var o=this,t=(0,l.g2)("q-btn"),r=(0,l.g2)("q-toolbar"),s=(0,l.g2)("q-select"),u=(0,l.g2)("q-datetime"),c=(0,l.g2)("q-field"),d=(0,l.g2)("sie-table"),m=(0,l.g2)("q-badge"),f=(0,l.g2)("q-linear-progress"),p=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(p,{class:"modal-validar",modelValue:e.modalOpen,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.modalOpen=a}),title:"Regenerar Documentos",onClose:e.cerrar,ok:!1},{footer:(0,l.k6)(function(){return[(0,l.bF)(r,{class:"row justify-end",inverted:""},{default:(0,l.k6)(function(){return[e.reportes.length>0?((0,l.uX)(),(0,l.Wv)(t,{key:0,color:"primary",loading:e.reprocesar,onClick:e.procesar},{default:(0,l.k6)(function(){return n()(a[8]||(a[8]=[(0,l.eW)("Reprocesar",-1)]))}),_:1},8,["loading","onClick"])):(0,l.Q3)("v-if",!0)]}),_:1})]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",Ct,[(0,l.Lk)("div",Ot,[(0,l.Lk)("div",At,[(0,l.bF)(s,{class:"col",modelValue:e.params.INSTRUCOD,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.params.INSTRUCOD=a}),options:e.instrus,"option-value":"INSTRUCOD","option-label":"INSTRUDES",label:"Nivel",onInput:a[1]||(a[1]=function(a){return e.params.GRADOCOD=null}),readonly:e.reprocesar},null,8,["modelValue","options","readonly"]),(0,l.bF)(s,{class:"col",modelValue:e.params.GRADOCOD,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.params.GRADOCOD=a}),options:e.grads,"option-value":"GRADOCOD","option-label":"GRADODES",label:"Grados",onInput:a[3]||(a[3]=function(a){return e.params.SECCIONCOD=null}),readonly:e.reprocesar},null,8,["modelValue","options","readonly"]),(0,l.bF)(s,{class:"col",modelValue:e.params.SECCIONCOD,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.params.SECCIONCOD=a}),options:e.secciones[e.params.INSTRUCOD+e.params.GRADOCOD],"option-value":"SECCIONCOD","option-label":"SECCIONDES",label:"Sección",onInput:e.filtrarDatos,readonly:e.reprocesar},null,8,["modelValue","options","onInput","readonly"])]),(0,l.Lk)("div",It,[(0,l.bF)(c,{class:"col",icon:"calendar"},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{class:"col q-if-outlined",modelValue:e.fecIni,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.fecIni=a}),"float-label":e.$t("desde"),format:"DD/MM/YYYY",onInput:e.filtrarDatos},null,8,["modelValue","float-label","onInput"])]}),_:1}),(0,l.bF)(c,{class:"col",icon:"calendar"},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{class:"col q-if-outlined",modelValue:e.fecFin,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.fecFin=a}),format:"DD/MM/YYYY","float-label":e.$t("hasta"),onInput:e.filtrarDatos},null,8,["modelValue","float-label","onInput"])]}),_:1})])]),!e.reprocesar&&e.reportes.length>0?((0,l.uX)(),(0,l.Wv)(d,{key:0,class:"q-mt-xs",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 280px)","show-search":!1,context:o,columns:e.columns,data:e.reportes,config:e.config,selection:"multiple",ref:"tablaReportes","load-disabled":e.disabled},{beforeBottom:(0,l.k6)(function(){return[(0,l.Lk)("div",Et,[a[9]||(a[9]=(0,l.Lk)("div",{class:"text-bold"},"Estudiantes: ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.dataReproc.length),1)])]}),_:1},8,["columns","data","config","load-disabled"])):(0,l.Q3)("v-if",!0)]),e.reprocesar?((0,l.uX)(),(0,l.CE)("div",Dt,[(0,l.bF)(f,{stripe:"",size:"40px",value:e.procentajeCompletado,label:e.procentajeTexto},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Tt,[(0,l.bF)(m,{color:"white","text-color":"secondary",label:e.procentajeTexto},null,8,["label"])])]}),_:1},8,["value","label"]),(0,l.Lk)("div",St,[(0,l.Lk)("span",null,(0,i.v_)(e.cantProcesados)+" documentos generados de "+(0,i.v_)(e.cantRegistros),1)])])):(0,l.Q3)("v-if",!0)]}),_:1},8,["modelValue","onClose"])}o(57817),o(15547),o(81813),o(68017);var kt=o(33777),Mt=o(16648),Nt=o(34963),Vt=o(62565),Ft={emits:["closeModal"],props:["ano","alucodsSelect","permiso","configuracion","niveles","grados"],components:{QSelect:Mt.A,SieTable:kt.A,QLinearProgress:Nt.A,QBadge:Vt.A,QDatetime:b.T5,QToolbar:b.ZV,QBtn:b.Il,QField:b.Om},data:function(){return{modalOpen:!0,secciones:{},instrus:[],dataBase:[],dataReproc:[],reportes:[],reprocesar:!1,disabled:{},cantRegistros:0,cantProcesados:0,procentajeCompletado:0,fecIni:null,fecFin:null,params:{INSTRUCOD:"",GRADOCOD:"",SECCIONCOD:"",RESERVA:!1,ALUCOD:"ALUCOD",ANO:this.ano,TOKEN:(0,A["default"])().token,configuracion:this.configuracion},columns:[{name:"TITULO",label:"Documento",align:"left",field:"TITULO"}]}},methods:{seleccionarSeccion:function(){var e=this;return h()(f()().m(function a(){var o,t,n,l;return f()().w(function(a){while(1)switch(a.n){case 0:if(o=[],e.disabled.key="$$index",t=[],e.dataBase.forEach(function(a){a.INSTRUCOD===e.params.INSTRUCOD&&a.GRADOCOD===e.params.GRADOCOD&&(a.SECCIONCOD!==e.params.SECCIONCOD&&"T"!==e.params.SECCIONCOD||o.push(a))}),e.dataReproc=o,!e.params.INSTRUCOD||!e.params.GRADOCOD){a.n=2;break}return a.n=1,J.$http.post("api/HyoReportesmatricula/getReportes",e.params);case 1:n=a.v,l=n.json,l.forEach(function(e,a){e.$$index=a,1===e.TIPO&&1===e.subTipo&&t.push(e)}),e.reportes=l;case 2:e.disabled.values=[].concat(t);case 3:return a.a(2)}},a)}))()},cerrar:function(){this.modalOpen=!1,this.$emit("closeModal")},filtrarDatos:function(){var e=this;return h()(f()().m(function a(){var o;return f()().w(function(a){while(1)switch(a.n){case 0:return e.dataBase=[],a.n=1,J.$http.get("api/MatriculaReservaController/getReservados",{params:{ano:e.ano,fecIni:e.fecIni,fecFin:e.fecFin,instrucod:e.params.INSTRUCOD,gradocod:e.params.GRADOCOD,seccioncod:e.params.SECCIONCOD}});case 1:o=a.v,o.forEach(function(a){a.BLOQUEADO&&"S"===a.BLOQUEADO.trim()?(a.MATRI_INTRADET="B",a.IP=a.IP_BLOQUEO):a.MATRI_INTRADET=a.MATRI_INTRA,e.dataBase.push(a)}),e.datosMatricula=o,e.dataReproc=o,e.seleccionarSeccion();case 2:return a.a(2)}},a)}))()},procesar:function(){var e=this;return h()(f()().m(function a(){var o,t;return f()().w(function(a){while(1)switch(a.n){case 0:e.cantRegistros=0,e.cantProcesados=0,e.procentajeCompletado=0,o=e.$refs.tablaReportes.rowsSelected(),e.cantRegistros=o.length*e.dataReproc.length,e.reprocesar=o.length>0,t=e.dataReproc.length-1;case 1:if(!(t>=0)){a.n=4;break}return a.n=2,e.genDocumento(o,e.dataReproc[t],e.ano);case 2:e.cantProcesados===e.cantRegistros&&(setTimeout(function(){e.reprocesar=!1},"1000"),e.$notify("Documentos Regenerados completamente"));case 3:t--,a.n=1;break;case 4:return a.a(2)}},a)}))()},genDocumento:function(e,a,o){var t=this;return h()(f()().m(function n(){var l;return f()().w(function(n){while(1)switch(n.n){case 0:l=e.length-1;case 1:if(!(l>=0)){n.n=3;break}return n.n=2,t.procesarReportes(e[l],a,o);case 2:l--,n.n=1;break;case 3:return n.a(2)}},n)}))()},procesarReportes:function(e,a,o){var t=this;return h()(f()().m(function o(){var n;return f()().w(function(o){while(1)switch(o.n){case 0:if(n=x()({},e),n.url=n.url.replace(/ALUCOD/g,a.ALUCOD).replace(/Fundefined/g,"F"+a.FAMCOD).replace(/PFAM=&/g,"PFAM="+a.FAMCOD+"&").replace(/famcod=&/g,"famcod="+a.FAMCOD+"&"),n.path&&(n.path=n.path.replace(/ALUCOD/g,a.ALUCOD).replace(/Fundefined/g,"F"+a.FAMCOD).replace(/PFAM=&/g,"PFAM="+a.FAMCOD+"&").replace(/famcod=&/g,"famcod="+a.FAMCOD+"&")),n.parametros&&n.parametros.codalu&&(n.parametros.ALUCOD=a.ALUCOD,n.parametros.alucod=a.ALUCOD,n.parametros.id=a.ALUCOD,n.parametros.codalu=a.ALUCOD,n.parametros.usucod="F"+a.FAMCOD,n.parametros.famcod=a.FAMCOD,n.parametros.PFAM=a.FAMCOD),console.log(n),"e"===n.TIPO){o.n=6;break}if(1!==n.TIPO){o.n=4;break}if(1===n.LISTA){o.n=2;break}return o.n=1,J.$http.get("api"+n.url.split("api")[1],{params:n.parametros});case 1:o.n=3;break;case 2:return o.n=3,J.$http.get(n.url);case 3:o.n=5;break;case 4:if("n"!==n.TIPO&&n.TIPO){o.n=5;break}return o.n=5,J.$http.get(n.url);case 5:o.n=7;break;case 6:return o.n=7,J.$http.get((0,A["default"])().url+"/"+n.url,{params:n.parametros});case 7:t.cantProcesados++,t.procentajeCompletado=t.cantProcesados/t.cantRegistros;case 8:return o.a(2)}},o)}))()}},computed:{grads:function(){var e=[];return this.params.INSTRUCOD&&this.grados[this.params.INSTRUCOD].forEach(function(a){var o=a.GRADOCOD,t=a.GRADODES;"T"!==o&&e.push({GRADOCOD:o,GRADODES:t})}),e},procentajeTexto:function(){return Number.parseFloat(100*this.procentajeCompletado).toFixed(2)+" %"},config:function(){}},mounted:function(){var e=this;this.modalOpen=!0,this.niveles.forEach(function(a){var o=a.INSTRUCOD,t=a.INSTRUDES;"T"!==o&&e.instrus.push({INSTRUCOD:o,INSTRUDES:t})}),console.log(this.ano),J.$http.post("api/HyoReportesmatricula/cargaInicialGeneral",{ano:this.ano,todos:"T",agrupado:"S",pregunta:!0}).then(function(a){var o=a.json;e.secciones=o.secciones}),this.filtrarDatos(),this.params={INSTRUCOD:"",GRADOCOD:"",SECCIONCOD:"",RESERVA:!0,ALUCOD:"ALUCOD",ANO:this.ano,TOKEN:(0,A["default"])().token,configuracion:this.configuracion}}};const _t=(0,E.A)(Ft,[["render",Rt]]);var yt=_t,Pt={components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,QTable:H.A,QSelect:b.Si,QPageSticky:b._U,QFab:b.l6,QFabAction:b.B$,QDatetime:b.T5,sieModal:Z.A,QToggle:b.c5,sieEditor:B.A,QTd:b.Ef,documentos:qa,sieSelect:C.A,parametros:Co,mensaje:Jo,orden:vt,validar:bt.A,reportesMatricula:gt.A,regenerar:yt,QSearch:b.Ks,QBtn:b.Il,QInput:b.ie,QTooltip:b.nC,QList:b.Mb,QItem:b.H0,QItemMain:b.mF,QItemSide:b.n1},props:["anoMat","configuracion"],data:function(){return{sie:(0,A["default"])(),estadosReserva:[],dataReservas:[],transferirMatricula:0,niveles:[],grados:[],modalRegen:!1,tablaReservas:{columns:[{name:"ALUCOD",field:"ALUCOD",label:this.$t("codigo"),align:"center"},{name:"NOMCOMP",field:"NOMCOMP",label:this.$t("apellidosynombres"),align:"left"},{name:"INSTRUCOD",field:"INSTRUCOD",label:this.$t("ngs.ngs"),align:"center"},{name:"ETIQUETA",field:"ETIQUETA",label:this.$t("matricula.estado"),align:"center"},{name:"FECHA",field:"FECHA",label:this.$t("matricula.fecha"),align:"center"},{name:"HORA",field:"HORA",label:this.$t("matricula.hora"),align:"center"},{name:"IP",field:"IP",label:this.$t("IP"),align:"center"},{name:"ELIMINAR",field:"ELIMINAR",align:"center"}],registrosSeleccionados:[],tipoSeleccion:"multiple",filter:""},tablaBloqueo:{columns:[{name:"ALUCOD",field:"ALUCOD",label:this.$t("codigo"),align:"center"},{name:"NOMCOMP",field:"NOMCOMP",label:this.$t("apellidosynombres"),align:"left"},{name:"INSTRUCOD",field:"INSTRUCOD",label:this.$t("ngs.ngs"),align:"center"},{name:"AESTADO",field:"AESTADO",label:this.$t("matricula.estado"),align:"left"}],registrosSeleccionados:[],tipoSeleccion:"multiple",filter:""},filtroEstado:"%",fecIni:null,fecFin:null,acceso:(0,A["default"])().ruta.nivel>=2,permiso:(0,A["default"])().ruta.nivel,dataReservasInicial:[],modalBloqueo:!1,alumnosBloqueo:[],soloBloqueados:!1,alumnosBloqueoBase:[],etiquetasMensaje:[{titulo:"codigo",campo:"{{ALUCOD}}"},{titulo:"apellidosynombres",campo:"{{NOMCOMP}}"},{titulo:"usuario.nombre",campo:"{{USUARIO}}"},{titulo:"ngs.nivel",campo:"{{NIVEL}}"},{titulo:"grado",campo:"{{GRADO}}"},{titulo:"colegio",campo:"{{COLNAME}}"}],mensaje:null,tabSelect:null,cargando:!1,reportes:[],modalImprimir:!1,instrucod:"T",gradocod:"T",alto:null,showAdicional:!1,adicionalOpen:!1,validarDeuda:!1,modalFecven:!1,fecVenc:new Date,noReserva:!1,idReserva:null,regenDoc:!1,alumnoSelect:{},modalPrintIndividual:!1,parametros:{},estadoPrev:null}},methods:{cerrarRegen:function(){this.modalRegen=!1,console.log("xxxx")},openRegen:function(){this.modalRegen=!0,console.log("xxxx")},validarReserva:function(e){this.adicionalOpen="validar"},limpiarOpen:function(){this.adicionalOpen=!1},handleResize:function(){var e=255;this.alto=window.innerHeight-e},openVencimiento:function(){var e=this;return h()(f()().m(function a(){var o,t;return f()().w(function(a){while(1)switch(a.n){case 0:return e.modalFecven=!0,o={ano:e.anoMat,idmattipo:[1]},a.n=1,e.$http("api/MatriculaFechaController/getInfoAnoMatriculaConfiguracion",{params:o});case 1:t=a.v,t.length>0&&(e.fecVenc=t[0].LIMITE_DEUDAS?t[0].LIMITE_DEUDAS:new Date,e.idReserva=t[0].IDMATFECHA);case 2:return a.a(2)}},a)}))()},grabarVencimiento:function(){var e=this;return h()(f()().m(function a(){var o;return f()().w(function(a){while(1)switch(a.n){case 0:return o={IDMATFECHA:e.idReserva,info:{LIMITE_DEUDAS:e.fecVenc}},a.n=1,J.$http.post("api/MatriculaFechaController/updateMatriculaFecha",{params:o});case 1:return a.a(2)}},a)}))()},cargaReservas:function(){var e=this,a={ano:this.anoMat,transferirMatricula:1===this.transferirMatricula,isMatricula:!(("P"!==this.filtroEstado||this.showAdicional)&&!this.showAdicional)};J.$http.get("api/HyoMatriculareserva/listarReservas",{params:a}).then(function(a){var o=a.json;o.forEach(function(a){if(a.INSTRUCOD=a.INSTRUCOD+a.GRADOCOD+a.SECCIONCOD,a.FECHAOROGINAL=a.FECHA,a.FECHA=(0,Y.Ay)(a.FH_RESERVA,"DD/MM/YYYY"),a.HORA=(0,Y.Ay)(a.FH_RESERVA,"hh:mm A"),a.BLOQ)a.ETIQUETA="Bloqueado",a.ESTADO="B";else switch(a.ETIQUETA){case"A":["0629","0630","0631"].indexOf(e.sie.colcod)>=0?a.ETIQUETA="Ratificado":a.ETIQUETA="Reservado";break;case"N":e.noReserva?["0629","0630","0631"].indexOf(e.sie.colcod)>=0?a.ETIQUETA="No Ratificado":a.ETIQUETA="No Reservado":(["0629","0630","0631"].indexOf(e.sie.colcod)>=0?a.ETIQUETA="Por Ratificar":a.ETIQUETA="Pendiente",a.ESTADO="P");break;case"C":a.ETIQUETA="Cancelado";break;default:"1"===a.BLOQ?(a.ETIQUETA="Bloqueado",a.ESTADO="B"):(["0629","0630","0631"].indexOf(e.sie.colcod)>=0?a.ETIQUETA="Por Ratificar":a.ETIQUETA="Pendiente",a.ESTADO="P");break}}),e.dataReservasInicial=o,e.filtrarDatos()})},filtrarDatos:function(){var e=this;this.showAdicional||("P"===this.filtroEstado&&"P"!==this.estadoPrev||"P"!==this.filtroEstado&&"P"===this.estadoPrev)&&(this.cargaReservas(),this.estadoPrev=this.filtroEstado),this.dataReservas=n()(this.dataReservasInicial),"%"!==this.filtroEstado&&(this.dataReservas=(0,K.filterArray)(this.filtroEstado,{field:"ESTADO",list:this.dataReservas||[]})),"T"!==this.instrucod&&(this.dataReservas=(0,K.filterArray)(this.instrucod,{field:"INSTRUCOD",list:this.dataReservas||[]}),"T"!==this.gradocod&&(this.dataReservas=(0,K.filterArray)(this.gradocod,{field:"GRADOCOD",list:this.dataReservas||[]})));var a=[];this.dataReservas.forEach(function(o,t){if(o.FECHAOROGINAL=new Date(o.FH_RESERVA),e.fecIni&&o.FECHAOROGINAL<new Date(e.fecIni)&&a.unshift(t),e.fecFin){var n=new Date(new Date(e.fecFin).setDate(new Date(e.fecFin).getDate()+1));o.FECHAOROGINAL>n&&a.indexOf(t)<0&&a.unshift(t)}}),a.forEach(function(a){e.dataReservas.splice(a,1)}),this.estadoPrev=this.filtroEstado},abrirModalBloquear:function(){var e=this;this.modalBloqueo=!0,this.tablaBloqueo.registrosSeleccionados=[];var a={ano:this.anoMat,momento:["B"]};Promise.all([J.$http.get("api/HyoMatriculamensaje/obtMensajeAno",{params:a}),J.$http.get("api/HyoMatriculaReserva/listarAlumnos",{params:a})]).then(function(a){var o=G()(a,2),t=o[0],n=o[1];e.mensaje=t.json[0]&&t.json[0].MENSAJE?t.json[0].MENSAJE:null,n.json.forEach(function(a){a.INSTRUCOD=a.INSTRUCOD+a.GRADOCOD+a.SECCIONCOD,a.AESTADO=e.$t("alumnoestado."+a.AESTADO),"1"===a.BLOQ&&e.tablaBloqueo.registrosSeleccionados.push(a)}),e.alumnosBloqueoBase=n.json,e.filtrarBloqueo()})},filtrarBloqueo:function(e){this.alumnosBloqueo=e?this.tablaBloqueo.registrosSeleccionados:n()(this.alumnosBloqueoBase)},grabarModal:function(){var e=this;if(this.cargando=!0,"bloqueo"===this.tabSelect){var a={parametros:{insertar:[],actualizar:[],eliminar:[],actualizard:[],ano:this.anoMat}},o=Object.keys((0,W["default"])(this.tablaBloqueo.registrosSeleccionados,"ALUCOD"));this.alumnosBloqueo.forEach(function(e){o.indexOf(e.ALUCOD)>=0?e.BLOQ||(e.RESTADO?a.parametros.actualizar.push(e.ALUCOD):a.parametros.insertar.push(e.ALUCOD)):e.BLOQ&&(e.RESTADO?a.parametros.actualizard.push(e.ALUCOD):a.parametros.eliminar.push(e.ALUCOD))}),a.parametros.insertar.length>0||a.parametros.eliminar.length>0||a.parametros.actualizar.length>0||a.parametros.actualizard.length>0?J.$http.get("api/HyoMatriculareserva/agregarBloqueo",{params:a}).then(function(a){var o=a.json,t="Ok"===o.mensaje?"mensajes.m0001":"mensajes.m0009",n="Ok"===o.mensaje?"success":"error";(0,z["default"])(e.$t(t),n),"Ok"===o.mensaje&&(e.cargaReservas(),e.modalBloqueo=!1),e.cargando=!1}):(this.cargando=!1,(0,z["default"])(this.$t("mensajes.m0011"),"error"))}else this.mensaje.length>0&&J.$http.post("api/HyoMatriculamensaje/insertarMensaje",{ano:this.anoMat,mensaje:this.mensaje,momento:"B"}).then(function(a){var o=a.json,t="check"===o.icono?"success":"error";(0,z["default"])(e.$t("mensajes."+o.mensaje),t),"error"!==t&&(e.modalBloqueo=!1),e.cargando=!1})},eliminarMensaje:function(){var e=this;J.$http.get("api/HyoMatriculamensaje/eliminarMensaje",{params:{ano:this.anoMat,momento:"B"}}).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.mensaje),"success"===o.tipo?"success":"error"),"success"===o.tipo&&(e.mensaje=null)})},seleccionarNivel:function(){this.gradocod="T",this.filtrarDatos()},eliminarReserva:function(e){var a=this;(0,ee.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(o){if(o){var t={ano:a.anoMat};e?t.alucod=[e]:(t.alucod=[],a.tablaReservas.registrosSeleccionados.forEach(function(e){t.alucod.push(e.ALUCOD)})),J.$http.get("api/HyoMatriculareserva/eliminaReserva",{params:{parametros:t}}).then(function(e){var o=e.json;(0,z["default"])(a.$t(o.msj),"info"===o.tipo?"error":"success"),"info"!==o.tipo&&a.cargaReservas()})}})},transferirReservas:function(e){var a=this,o=[];e.forEach(function(e){0===e.MATRICULADO&&o.push(e.ALUCOD)}),o.length>0&&J.$http.post("api/HyoMatriculareserva/transferirReserva",{alucods:o,ano:this.anoMat}).then(function(e){var o=e.json;(0,z["default"])(a.$t(o.msg),o.type),o.type||(a.cargaReservas(),a.tablaReservas.registrosSeleccionados=[])})},abrirModalImprimir:function(){if(1===this.tablaReservas.registrosSeleccionados.length&&this.anoMat>=2025)"A"===this.tablaReservas.registrosSeleccionados[0].ESTADO&&(this.alumnoSelect=this.tablaReservas.registrosSeleccionados[0],this.modalPrintIndividual=!0);else{var e="Reporte de Reservas",a="Reporte de No Reservados",o="Reporte de No Reservados con pagos";this.noReserva&&(e="Reporte de Procesados",a="Reporte de No Procesados"),["0629","0630","0631"].indexOf(this.sie.colcod)>=0&&(e="Reporte de Ratificados",a="Reporte de No Ratificados",o="Reporte de No Ratificados con pagos"),this.reportes=[{titulo:e,formats:["pdf"],parametros:{filtrado:"F",ano:this.anoMat,repcod:"listadoReservas",tipo:0,fecIni:this.fecIni,fecFin:this.fecFin}}],this.reportes[0].formats=["pdf","xls"],"0253"!==this.sie.colcod&&this.reportes.push({titulo:a,formats:["pdf","xls"],parametros:{filtrado:"F",ano:this.anoMat,repcod:"listadoReservas",tipo:1}}),"0212"===this.sie.colcod&&(1===this.tablaReservas.registrosSeleccionados.length&&(this.reportes.push({titulo:"Constancia de Reserva",formats:["pdf"],parametros:{alucod:this.tablaReservas.registrosSeleccionados[0].ALUCOD,ano:this.anoMat,repcod:"constanciaReserva",modprint:"1"}}),this.reportes.push({titulo:"Compromiso de Pago de COPAFA",formats:["pdf"],parametros:{alucod:this.tablaReservas.registrosSeleccionados[0].ALUCOD,ano:this.anoMat,repcod:"constanciaReserva",modprint:"2"}}),this.reportes.push({titulo:"Compromiso de Pago de Fundación",formats:["pdf"],parametros:{alucod:this.tablaReservas.registrosSeleccionados[0].ALUCOD,ano:this.anoMat,repcod:"constanciaReserva",modprint:"3"}})),this.reportes.push({titulo:"Listado de Compromisos por Salon",formats:["pdf"],parametros:{ano:this.anoMat,repcod:"constanciaReserva",modprint:"4"}})),this.validarDeuda&&this.reportes.push({titulo:o,formats:["pdf","xls"],parametros:{filtrado:"F",ano:this.anoMat,repcod:"listadoReservas",tipo:3}}),this.modalImprimir=!0}},imprimir:function(e,a){e=x()(x()({},e),{formato:a,format:a,especial:this.noReserva}),(0,ae.exportFilePhp)(e,"intranet/reporte-node/reporte")}},mounted:function(){var e=this;this.showAdicional=1===this.configuracion.M_RESERVA_MATRICULA,this.validarDeuda=1===this.configuracion["R_VALIDAR_PAGO"],this.noReserva=1===this.configuracion["R_PERMITE_NORESERVA"],this.regenDoc=this.anoMat>=2025,J.$http.post("api/HyoMatriculaparametros/obtParametros",{ano:this.anoMat,tipo:"titulo",isReserva:this.reserva}).then(function(a){var o=a.json;e.parametros=o[0],e.parametros.reserva=!0}),J.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:this.anoMat,agrupado:!0}}).then(function(a){var o=a.json;e.transferirMatricula=o.R_TRANSFERIR_RESERVA,1===o.R_TRANSFERIR_RESERVA&&e.tablaReservas.columns.push({name:"MATRICULADO",field:"MATRICULADO",label:e.$t("Matriculado"),align:"center"}),e.cargaReservas()}),window.addEventListener("resize",this.handleResize),this.handleResize(),this.estadosReserva=[{value:"%",label:this.showAdicional?this.$t("matricula.todos"):"Procesados"},{value:"A",label:this.$t("matricula.reservado")},{value:"C",label:this.$t("matricula.cancelado")},{value:"B",label:this.$t("matricula.bloqueado")}],this.noReserva?this.estadosReserva.push({value:"N",label:"No Reservado"}):this.estadosReserva.push({value:"P",label:this.$t("pendiente")}),this.configuracion.M_RESERVA_MATRICULA,J.$http.get("api/HyoInstrus/obtInstru").then(function(a){var o=a.json;o.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=o}),J.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:"true",todos:"T"}}).then(function(a){var o=a.json;e.grados=o})},unmounted:function(){window.removeEventListener("resize",this.handleResize)}};const Lt=(0,E.A)(Pt,[["render",Q]]);var Ut=Lt,$t={class:"col"};function qt(e,a){var o=(0,l.g2)("q-tab"),t=(0,l.g2)("q-tooltip"),n=(0,l.g2)("q-btn"),r=(0,l.g2)("q-page-sticky"),s=(0,l.g2)("q-tabs");return(0,l.uX)(),(0,l.CE)("div",$t,[e.cargando?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(s,{key:0,animated:"",swipeable:e.isLess,inverted:"",modelValue:e.tabSelect,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tabSelect=a})},{title:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.tabs,function(e,a){return(0,l.uX)(),(0,l.Wv)(o,{key:a,name:e.valor,label:e.titulo,default:"cTalleTipo"===e},null,8,["name","label","default"])}),128))]}),default:(0,l.k6)(function(){return[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.tabSelect),{class:"q-ma-sm",anoMat:e.anoMat,id:1,configuracion:e.configuracion,"keep-alive":"",alto:e.alto,ref:"cargaInit",talleresVue:e.talleresVue},null,8,["anoMat","configuracion","alto","talleresVue"])),e.procesarGrupos&&e.ocultaBoton.indexOf(e.tabSelect)<0?((0,l.uX)(),(0,l.Wv)(r,{key:0,position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{round:"",fab:"",icon:"cogs",color:"secondary",onClick:e.procesarGrupo},{default:(0,l.k6)(function(){return[(0,l.bF)(t,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.procesar")),1)]}),_:1})]}),_:1},8,["onClick"])]}),_:1})):(0,l.Q3)("v-if",!0)]}),_:1},8,["swipeable","modelValue"]))])}var wt={class:"col q-card"},Qt={key:0,class:"col row"},jt={class:"q-pt-md-sm"},xt={key:1,class:"col row"},Xt={key:1,class:"col row justify-end"};function Gt(e,a){var o=(0,l.g2)("q-btn"),t=(0,l.g2)("q-td"),n=(0,l.g2)("q-input"),r=(0,l.g2)("q-field"),s=(0,l.g2)("q-popup-edit"),u=(0,l.g2)("q-table");return(0,l.uX)(),(0,l.CE)("div",wt,[(0,l.bF)(u,{class:"cabecera-talleres",data:e.tiposTaller,columns:e.tablaTipos.columns,selection:"multiple",selected:e.tablaTipos.registrosSeleccionados,"onUpdate:selected":a[3]||(a[3]=function(a){return e.tablaTipos.registrosSeleccionados=a}),filter:e.tablaTipos.filter,style:(0,i.Tr)({"max-height":e.alto}),"row-key":"ID"},{"body-cell-ELIMINAR":(0,l.k6)(function(a){return[(0,l.bF)(t,{props:a},{default:(0,l.k6)(function(){return[0===e.tablaTipos.registrosSeleccionados.length?((0,l.uX)(),(0,l.Wv)(o,{key:0,class:"cursor-pointer",round:"",flat:"",dense:"",icon:"delete",onClick:function(o){return e.deleteSimple(a.row.ID)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-DESCRIPCION":(0,l.k6)(function(a){return[(0,l.bF)(t,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.DESCRIPCION),1),(0,l.bF)(s,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e},onSave:function(o){return e.saveTipo(a.row.DESCRIPCION,a.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{count:""},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]}),"top-right":(0,l.k6)(function(t){return[0===e.tablaTipos.registrosSeleccionados.length?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[e.actRegistro?((0,l.uX)(),(0,l.CE)("div",Qt,[(0,l.bF)(n,{class:"col q-if-outlined no-bottom",modelValue:e.nvTipo,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.nvTipo=a}),placeholder:e.$t("matricula.descripcion")},null,8,["modelValue","placeholder"]),(0,l.Lk)("div",jt,[(0,l.bF)(o,{round:"",dense:"",flat:"",icon:"close",onClick:e.limpiarRegistro},null,8,["onClick"]),(0,l.bF)(o,{round:"",dense:"",flat:"",icon:"save",onClick:a[1]||(a[1]=function(a){return e.saveTipo(e.nvTipo,{})})})])])):((0,l.uX)(),(0,l.CE)("div",xt,[a[4]||(a[4]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.bF)(o,{round:"",dense:"",flat:"",icon:"add",onClick:a[2]||(a[2]=function(a){return e.actRegistro=!e.actRegistro})})]))],64)):((0,l.uX)(),(0,l.CE)("div",Xt,[(0,l.bF)(o,{class:"cursor-pointer",round:"",flat:"",dense:"",icon:"delete",onClick:e.deleteBloque},null,8,["onClick"])]))]}),_:1},8,["data","columns","selected","filter","style"])])}var Ht={components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,sieSelect:C.A,QTable:H.A,QTd:b.Ef,QPopupEdit:b.GT,QPageSticky:b._U,QBtn:b.Il,QField:b.Om,QInput:b.ie},props:["anoMat","configuracion","alto","talleresVue"],data:function(){return{sie:(0,A["default"])(),tiposTaller:[],nvTipo:null,actRegistro:!1,tablaTipos:{columns:[{name:"DESCRIPCION",field:"DESCRIPCION",align:"left",label:this.$t("matricula.descripcion")},{name:"ELIMINAR",field:"ELIMINAR",align:"right"}],registrosSeleccionados:[],filter:""},procesarGrupos:!1}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{cargaInicial:function(){var e=this;J.$http.get("api/HyoMattipotaller/obtTiposTalleres").then(function(a){var o=a.json;e.tiposTaller=o})},ejecutarDelete:function(e){var a=this;(0,ee.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(o){o&&J.$http.get("api/HyoMattipotaller/eliminarTipoTaller",{params:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0006.ok"===o?"success":"error"),"m0006.ok"===o&&a.cargaInicial()})})},deleteBloque:function(){var e=this.tablaTipos.registrosSeleccionados.map(function(e){var a=e.ID;return a});this.ejecutarDelete({ids:e})},deleteSimple:function(e){this.ejecutarDelete({id:e})},saveTipo:function(e,a){var o=this,t=a.ID;J.$http.get("api/HyoMattipotaller/nuevoTipo",{params:{tipo:e,id:t}}).then(function(e){var a=e.json;["m0012","m0001"].indexOf(a)>=0?((0,z["default"])(o.$t("mensajes."+a),"success"),o.actRegistro=!1,o.cargaInicial()):(0,z["default"])(o.$t("mensajes.e0006"),"error")})},limpiarRegistro:function(){this.nvTipo=null,this.actRegistro=!1}},mounted:function(){this.cargaInicial()}};const Bt=(0,E.A)(Ht,[["render",Gt]]);var zt=Bt,Wt={class:"col q-card"};function Kt(e,a){var o=(0,l.g2)("sie-vacio"),t=(0,l.g2)("q-btn"),n=(0,l.g2)("q-td"),r=(0,l.g2)("q-input"),s=(0,l.g2)("q-field"),u=(0,l.g2)("q-popup-edit"),c=(0,l.g2)("q-select"),d=(0,l.g2)("q-search"),m=(0,l.g2)("q-table");return(0,l.uX)(),(0,l.CE)("div",Wt,[0===e.tiposTaller.length?((0,l.uX)(),(0,l.Wv)(o,{key:0,title:"No puede configurar los talleres",subtitle:"Primero debe configurar los tipos de taller"})):((0,l.uX)(),(0,l.Wv)(m,{key:1,class:"cabecera-talleres",data:e.talleres,columns:e.tablaTalleres.columns,selection:"multiple",selected:e.tablaTalleres.registrosSeleccionados,"onUpdate:selected":a[6]||(a[6]=function(a){return e.tablaTalleres.registrosSeleccionados=a}),filter:e.tablaTalleres.filter,style:(0,i.Tr)({"max-height":e.alto}),"row-key":"ID"},{"body-cell-ELIMINAR":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[0===e.tablaTalleres.registrosSeleccionados.length?((0,l.uX)(),(0,l.Wv)(t,{key:0,class:"cursor-pointer",round:"",flat:"",dense:"",icon:"delete",onClick:function(o){return e.deleteSimple(a.row.ID)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-DESCRIPCION":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.DESCRIPCION),1),(0,l.bF)(u,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e},onSave:function(o){return e.saveTaller(a.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{count:""},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]}),"body-cell-TIPODESC":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.TIPODESC),1),(0,l.bF)(u,{modelValue:a.row.ID_TIPO,"onUpdate:modelValue":function(e){return a.row.ID_TIPO=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(c,{modelValue:a.row.ID_TIPO,"onUpdate:modelValue":function(e){return a.row.ID_TIPO=e},options:e.tiposTaller,onInput:function(o){return e.saveTaller(a.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-SEXODES":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.SEXODES),1),(0,l.bF)(u,{modelValue:a.row.SEXO,"onUpdate:modelValue":function(e){return a.row.SEXO=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(c,{modelValue:a.row.SEXO,"onUpdate:modelValue":function(e){return a.row.SEXO=e},options:e.sexos,onInput:function(o){return e.saveTaller(a.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"top-right":(0,l.k6)(function(o){return[e.actNvTaller?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.bF)(c,{class:"q-if-outlined col-3",modelValue:e.nvRegistro.ID_TIPO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.nvRegistro.ID_TIPO=a}),options:e.tiposTaller,"float-label":e.$t("tipo")},null,8,["modelValue","options","float-label"]),(0,l.bF)(r,{class:"q-if-outlined col",modelValue:e.nvRegistro.DESCRIPCION,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.nvRegistro.DESCRIPCION=a}),"float-label":e.$t("matricula.descripcion")},null,8,["modelValue","float-label"]),(0,l.bF)(c,{class:"q-if-outlined col-3",modelValue:e.nvRegistro.SEXO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.nvRegistro.SEXO=a}),options:e.sexos,"float-label":e.$t("sexo.sexo")},null,8,["modelValue","options","float-label"]),(0,l.Lk)("div",null,[(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"close",onClick:e.limpiarNuevo},null,8,["onClick"]),(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"save",onClick:a[5]||(a[5]=function(a){return e.saveTaller(e.nvRegistro)})})])],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[0===e.tablaTalleres.registrosSeleccionados.length?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(d,{class:"col",modelValue:e.tablaTalleres.filter,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tablaTalleres.filter=a})},null,8,["modelValue"]),(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"add",onClick:a[1]||(a[1]=function(a){return e.actNvTaller=!e.actNvTaller})})],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[a[7]||(a[7]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"delete",onClick:e.deleteBloque},null,8,["onClick"])],64))],64))]}),_:1},8,["data","columns","selected","filter","style"]))])}var Jt={components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,sieSelect:C.A,QTable:H.A,QTd:b.Ef,QPopupEdit:b.GT,QPageSticky:b._U,QSelect:b.Si,sieVacio:He.A,QBtn:b.Il,QField:b.Om,QInput:b.ie,QSearch:b.Ks},props:["anoMat","configuracion","alto"],data:function(){return{sie:(0,A["default"])(),tiposTaller:[],procesarGrupos:!!this.configuracion["M_TALLERES_GRUPOS"],talleres:[],actNvTaller:!1,sexos:[{value:"M",label:"Masculino"},{value:"F",label:"Femenino"},{value:"A",label:"Ambos"}],nvRegistro:{ID_TIPO:null,DESCRIPCION:null,SEXO:"A"},tablaTalleres:{columns:[{name:"TIPODESC",field:"TIPODESC",sortable:!0,align:"left",label:this.$t("tipo")},{name:"DESCRIPCION",field:"DESCRIPCION",sortable:!0,align:"left",label:this.$t("matricula.descripcion")},{name:"SEXODES",field:"SEXODES",sortable:!0,align:"left",label:this.$t("sexo.sexo")},{name:"ELIMINAR",field:"ELIMINAR",align:"right"}],registrosSeleccionados:[],filter:""}}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{cargaInicial:function(){var e=this;J.$http.get("api/HyoMattaller/obtTalleres").then(function(a){var o=a.json;e.talleres=o})},deleteRegistros:function(e){var a=this;J.$http.get("api/HyoMattaller/eliminarTaller",{params:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0006.ok"===o?"success":"error"),"m0006.ok"===o&&(a.tablaTalleres.registrosSeleccionados=[],a.cargaInicial())})},deleteSimple:function(e){this.deleteRegistros({id:e})},deleteBloque:function(){var e=this.tablaTalleres.registrosSeleccionados.map(function(e){var a=e.ID;return a});this.deleteRegistros({ids:e})},limpiarNuevo:function(){this.nvRegistro={ID_TIPO:null,DESCRIPCION:null,SEXO:"A"},this.actNvTaller=!1},saveTaller:function(e){var a=this,o=e.ID,t=e.ID_TIPO,n=e.DESCRIPCION,l=e.SEXO;t&&n&&l&&J.$http.get("api/HyoMattaller/saveTalleres",{params:{ID:o,ID_TIPO:t,DESCRIPCION:n,SEXO:l}}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0001"===o?"success":"error"),"m0001"===o&&(a.cargaInicial(),a.limpiarNuevo())})}},mounted:function(){var e=this;J.$http.get("api/HyoMattipotaller/obtTiposTalleres").then(function(a){var o=a.json;e.tiposTaller=o.map(function(e){return{label:e.DESCRIPCION,value:e.ID}})}),this.cargaInicial()}};const Yt=(0,E.A)(Jt,[["render",Kt]]);var Zt=Yt,en={class:"col q-card"},an={key:0,class:"col row"},on={class:"q-pt-md-sm"},tn={key:0,class:"col row"},nn={key:1,class:"col row"};function ln(e,a){var o=(0,l.g2)("sie-vacio"),t=(0,l.g2)("q-btn"),n=(0,l.g2)("q-td"),r=(0,l.g2)("q-checkbox"),s=(0,l.g2)("q-datetime"),u=(0,l.g2)("q-popup-edit"),c=(0,l.g2)("q-select"),d=(0,l.g2)("q-search"),m=(0,l.g2)("q-table");return(0,l.uX)(),(0,l.CE)("div",en,[0===e.talleres.length&&0==e.dataTalleresAno.length?((0,l.uX)(),(0,l.Wv)(o,{key:0,title:"No puede configurar los talleres pro año",subtitle:"Primero debe configurar los talleres"})):((0,l.uX)(),(0,l.Wv)(m,{key:1,class:"cabecera-talleres",data:e.dataTalleresAno,columns:e.tablaTalleresAno.columns,selection:"multiple",selected:e.tablaTalleresAno.registrosSeleccionados,"onUpdate:selected":a[6]||(a[6]=function(a){return e.tablaTalleresAno.registrosSeleccionados=a}),filter:e.tablaTalleresAno.filter,style:(0,i.Tr)({"max-height":e.alto}),"row-key":"ID"},{"body-cell-ELIMINAR":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[0===e.tablaTalleresAno.registrosSeleccionados.length?((0,l.uX)(),(0,l.Wv)(t,{key:0,flat:"",round:"",dense:"",icon:"delete",onClick:function(o){return e.deleteSimple(a.row)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-ANUAL":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{modelValue:a.row.ANUAL,"onUpdate:modelValue":function(e){return a.row.ANUAL=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(o){return e.setAnual(a.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-HORAINI":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(a.row.HORAINI,"hh:mm A")),1),(0,l.bF)(u,{modelValue:a.row.HORAINI,"onUpdate:modelValue":function(e){return a.row.HORAINI=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{modelValue:a.row.HORAINI,"onUpdate:modelValue":function(e){return a.row.HORAINI=e},type:"time",format:"hh:mm A",onInput:function(o){return e.saveTipo(a.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-HORAFIN":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(a.row.HORAFIN,"hh:mm A")),1),(0,l.bF)(u,{modelValue:a.row.HORAFIN,"onUpdate:modelValue":function(e){return a.row.HORAFIN=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{modelValue:a.row.HORAFIN,"onUpdate:modelValue":function(e){return a.row.HORAFIN=e},type:"time",format:"hh:mm A",onInput:function(o){return e.saveTipo(a.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"top-right":(0,l.k6)(function(o){return[e.openNew?((0,l.uX)(),(0,l.CE)("div",an,[(0,l.bF)(c,{class:"q-if-outlined col",modelValue:e.dataNew.ID_TALLER,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.dataNew.ID_TALLER=a}),options:e.talleres,"float-label":e.$t("taller")},null,8,["modelValue","options","float-label"]),(0,l.bF)(s,{class:"q-if-outlined",modelValue:e.dataNew.HORAINI,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.dataNew.HORAINI=a}),type:"time",format:"hh:mm A","float-label":e.$t("horainicio")},null,8,["modelValue","float-label"]),(0,l.bF)(s,{class:"q-if-outlined",modelValue:e.dataNew.HORAFIN,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.dataNew.HORAFIN=a}),type:"time",format:"hh:mm A","float-label":e.$t("horafin")},null,8,["modelValue","float-label"]),(0,l.Lk)("div",on,[(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"close",onClick:e.limpiarNuevo},null,8,["onClick"]),(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"save",onClick:a[3]||(a[3]=function(a){return e.saveTipo(e.dataNew)})})])])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e.tablaTalleresAno.registrosSeleccionados.length>0?((0,l.uX)(),(0,l.CE)("div",tn,[a[7]||(a[7]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"delete",onClick:e.deleteBloque},null,8,["onClick"])])):((0,l.uX)(),(0,l.CE)("div",nn,[(0,l.bF)(d,{class:"q-if-outlined col",modelValue:e.tablaTalleresAno.filter,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.tablaTalleresAno.filter=a})},null,8,["modelValue"]),(0,l.bF)(t,{round:"",dense:"",flat:"",icon:"add",onClick:a[5]||(a[5]=function(a){return e.openNew=!e.openNew})})]))],64))]}),_:1},8,["data","columns","selected","filter","style"]))])}var rn={components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,sieSelect:C.A,QTd:b.Ef,QPopupEdit:b.GT,QPageSticky:b._U,QSelect:b.Si,QTable:H.A,sieVacio:He.A,QDatetime:b.T5,QCheckbox:b.vZ,QBtn:b.Il,QSearch:b.Ks},props:["anoMat","configuracion","alto","procesado"],data:function(){return{sie:(0,A["default"])(),talleres:[],talleresTmp:[],procesarGrupos:!!this.configuracion["M_TALLERES_GRUPOS"],dataTalleresAno:[],openNew:!1,dataNew:{ID_TALLER:null,HORAINI:null,HORAFIN:null,ANO:this.anoMat},tablaTalleresAno:{columns:[{name:"DESCRIPCION",field:"DESCRIPCION",sortable:!0,align:"left",label:this.$t("matricula.descripcion")},{name:"HORAINI",field:"HORAINI",label:this.$t("horainicio")},{name:"HORAFIN",field:"HORAFIN",label:this.$t("horafin")}],registrosSeleccionados:[],filter:""}}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{date:Y.Ay,cargaInicial:function(){var e=this;J.$http.get("api/HyoMattallerano/obtTallerAno",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;e.dataTalleresAno=o;var t=o.map(function(e){var a=e.ID_TALLER;return a});e.talleres=[],t.length===e.talleresTmp.length||e.talleresTmp.forEach(function(a){var o=a.value,n=a.label;t.indexOf(o)<0&&e.talleres.push({value:o,label:n})})})},deleteApi:function(e){var a=this;(0,ee.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(o){o&&J.$http.get("api/HyoMattallerano/eliminarTaller",{params:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0006.ok"===o?"success":"error"),"m0006.ok"===o&&a.cargaInicial()})})},deleteSimple:function(e){var a=e.ID;this.deleteApi({id:a})},deleteBloque:function(){var e=this.tablaTalleresAno.registrosSeleccionados.map(function(e){var a=e.ID;return a});this.deleteApi({ids:e})},grabarInfo:function(e){var a=this;J.$http.get("api/HyoMattallerano/saveTallerAno",{params:e}).then(function(e){var o=e.json;["m0012","m0001"].indexOf(o)>=0?((0,z["default"])(a.$t("mensajes."+o),"success"),a.limpiarNuevo(),a.cargaInicial()):(0,z["default"])(a.$t("mensajes.e0006"),"error")})},saveTipo:function(e){var a=e.ANO,o=e.HORAFIN,t=e.HORAINI,n=e.ID,l=e.ID_TALLER;a&&o&&t&&l&&this.grabarInfo({ANO:a,HORAFIN:o,HORAINI:t,ID:n,ID_TALLER:l})},limpiarNuevo:function(){this.dataNew={ID_TALLER:null,HORAINI:null,HORAFIN:null,ANO:this.anoMat},this.openNew=!1},setAnual:function(e){var a=e.ID,o=e.ANUAL;this.grabarInfo({ID:a,ANUAL:o})}},watch:{procesado:function(){this.procesado&&this.cargaInicial()}},mounted:function(){var e=this;"0363"===this.sie.colcod&&(this.tablaTalleresAno.columns.push({name:"ANUAL",field:"ANUAL",align:"center",label:this.$t("anual")}),this.tablaTalleresAno.columns.push({name:"ELIMINAR",field:"ELIMINAR",align:"right"})),J.$http.get("api/HyoMattaller/obtTalleres").then(function(a){var o=a.json;e.talleresTmp=o.map(function(e){var a=e.ID,o=e.DESCRIPCION;return{label:o,value:a}}),e.cargaInicial()})}};const sn=(0,E.A)(rn,[["render",ln]]);var un=sn,cn={class:"col q-card"};function dn(e,a){return(0,l.uX)(),(0,l.CE)("div",cn,[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.tipoShow),{anoMat:e.anoMat,configuracion:e.configuracion,alto:e.alto,talleresVue:e.talleresVue,ref:"cargaInit"},null,8,["anoMat","configuracion","alto","talleresVue"]))])}var mn={class:"col q-card"},fn={key:0,class:"row col justify-around"},pn={class:"row q-x-sm items-center"},hn={key:1,class:"row col justify-end"},vn={class:"q-ma-xs"};function bn(e,a){var o=(0,l.g2)("q-btn"),t=(0,l.g2)("q-td"),n=(0,l.g2)("sie-select"),r=(0,l.g2)("q-popup-edit"),s=(0,l.g2)("q-input"),u=(0,l.g2)("q-search"),c=(0,l.g2)("q-table"),d=(0,l.g2)("q-field"),m=(0,l.g2)("q-checkbox"),f=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",mn,[(0,l.bF)(c,{class:"cabecera-talleres",data:e.talleresGrado.data,columns:e.talleresGrado.columns,selection:"multiple",selected:e.talleresGrado.registrosSeleccionados,"onUpdate:selected":a[3]||(a[3]=function(a){return e.talleresGrado.registrosSeleccionados=a}),filter:e.talleresGrado.filter,style:(0,i.Tr)({"max-height":e.alto}),"row-key":"ID"},{"body-cell-ELIMINAR":(0,l.k6)(function(a){return[(0,l.bF)(t,{props:a},{default:(0,l.k6)(function(){return[0===e.talleresGrado.registrosSeleccionados.length&&e.verGrupos?((0,l.uX)(),(0,l.Wv)(o,{key:0,flat:"",round:"",dense:"",icon:"edit",onClick:function(o){return e.agregarRegistro(a.row)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0),0===e.talleresGrado.registrosSeleccionados.length?((0,l.uX)(),(0,l.Wv)(o,{key:1,flat:"",round:"",dense:"",icon:"delete",onClick:function(o){return e.deleteSimple(a.row)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-NOMCOMP":(0,l.k6)(function(a){return[(0,l.bF)(t,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.NOMCOMP),1),(0,l.bF)(r,{modelValue:a.row.NOMCOMP,"onUpdate:modelValue":function(e){return a.row.NOMCOMP=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{type:"outlined",modelValue:a.row.PROFCOD,"onUpdate:modelValue":function(e){return a.row.PROFCOD=e},options:e.profes,label:"USUNOM",val:"profcod"},null,8,["modelValue","onUpdate:modelValue","options"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-MAXGRUPO":(0,l.k6)(function(a){return[(0,l.bF)(t,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.MAXGRUPO),1),(0,l.bF)(r,{modelValue:a.row.MAXGRUPO,"onUpdate:modelValue":function(e){return a.row.MAXGRUPO=e},onHide:function(o){return e.grabarCupos(a.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{modelValue:a.row.MAXGRUPO,"onUpdate:modelValue":function(e){return a.row.MAXGRUPO=e},type:"number"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])]}),_:2},1032,["props"])]}),"top-right":(0,l.k6)(function(){return[0===e.talleresGrado.registrosSeleccionados.length?((0,l.uX)(),(0,l.CE)("div",fn,[(0,l.bF)(u,{class:"col",modelValue:e.talleresGrado.filter,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.talleresGrado.filter=a})},null,8,["modelValue"]),(0,l.Lk)("div",pn,[(0,l.bF)(o,{class:"q-mr-xs",round:"",dense:"",flat:"",icon:"add",onClick:a[1]||(a[1]=function(a){return e.agregarRegistro()})}),e.talleresAgrupados?((0,l.uX)(),(0,l.Wv)(o,{key:0,class:"q-mr-xs",round:"",dense:"",flat:"",icon:e.verGrupos?"person":"ambito",onClick:a[2]||(a[2]=function(a){return e.verGrupos=!e.verGrupos})},null,8,["icon"])):(0,l.Q3)("v-if",!0)])])):((0,l.uX)(),(0,l.CE)("div",hn,[(0,l.bF)(o,{class:"q-mr-xs",round:"",dense:"",flat:"",icon:"delete",onClick:e.deleteBloque},null,8,["onClick"])]))]}),_:1},8,["data","columns","selected","filter","style"]),(0,l.bF)(f,{modelValue:e.modalOpen,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.modalOpen=a}),onSubmit:e.grabarInfo,onClose:e.cerrar},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",vn,[1===e.modalTipo?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(d,{error:e.v$.dataEdit.ID_TALLER_ANO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{placeholder:"taller",type:"outlined",modelValue:e.v$.dataEdit.ID_TALLER_ANO.$model,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.v$.dataEdit.ID_TALLER_ANO.$model=a}),options:e.talleresAno,label:"DESCRIPCION",val:"ID"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),(0,l.bF)(n,{type:"outlined",modelValue:e.dataEdit.PROFCOD,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.dataEdit.PROFCOD=a}),options:e.profes,label:"USUNOM",val:"PROFCOD",placeholder:"profesor"},null,8,["modelValue","options"]),(0,l.bF)(d,{error:e.v$.dataEdit.INSTRUCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{type:"outlined",modelValue:e.v$.dataEdit.INSTRUCOD.$model,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.v$.dataEdit.INSTRUCOD.$model=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),(0,l.bF)(d,{error:e.v$.dataEdit.GRADOCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{type:"outlined",modelValue:e.v$.dataEdit.GRADOCOD.$model,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.v$.dataEdit.GRADOCOD.$model=a}),options:e.gradosSimple[e.dataEdit.INSTRUCOD],label:"label",val:"value",placeholder:"ngs.grado"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),(0,l.bF)(d,{error:e.v$.dataEdit.MAXGRUPO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{class:"q-if-outlined",modelValue:e.v$.dataEdit.MAXGRUPO.$model,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.v$.dataEdit.MAXGRUPO.$model=a}),"float-label":"Cupos",type:"number",min:"0"},null,8,["modelValue"])]}),_:1},8,["error","error-label"]),(0,l.bF)(m,{modelValue:e.insContinua,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.insContinua=a}),label:"No cerrar Ventana"},null,8,["modelValue"])],64)):((0,l.uX)(),(0,l.Wv)(c,{key:1,data:e.gradosTodos,columns:e.tablaGrados.columns,selection:"multiple",selected:e.tablaGrados.registrosSeleccionados,"onUpdate:selected":a[10]||(a[10]=function(a){return e.tablaGrados.registrosSeleccionados=a}),style:(0,i.Tr)({"max-height":e.alto}),"row-key":"INSTRUGRA"},null,8,["data","columns","selected","style"]))])]}),_:1},8,["modelValue","onSubmit","onClose"])])}var gn={setup:function(){var e=(0,v.fG)();return{v$:e}},components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,sieSelect:C.A,QTable:H.A,QTd:b.Ef,QPopupEdit:b.GT,QPageSticky:b._U,QSelect:b.Si,sieVacio:He.A,sieModal:Z.A,QCheckbox:b.vZ,QBtn:b.Il,QInput:b.ie,QSearch:b.Ks,QField:b.Om},props:["anoMat","configuracion","alto"],data:function(){return{sie:(0,A["default"])(),talleresAgrupados:!this.configuracion["M_TALLERES_SIN_GRADO"],verGrupos:!1,dataAsignacion:[],dataGrupos:[],gradosSimple:{},gradosTodos:[],niveles:[],talleresAno:[],modalTipo:null,insContinua:!1,dataEdit:{ID_TALLER_ANO:null,INSTRUCOD:null,GRADOCOD:null,MAXGRUPO:null},profes:[],grabado:!1,modalOpen:!1,tablaGrados:{columns:[{name:"INSTRUDES",field:"INSTRUDES",label:this.$t("ngs.nivel")},{name:"GRADODES",field:"GRADODES",label:this.$t("ngs.grado")}],registrosSeleccionados:[]},talleresGrado:{columns:[],registrosSeleccionados:[],filter:"",data:[]}}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{cargaInicial:function(){var e=this,a={ano:this.anoMat},o=[J.$http.get("api/HyoMatgruponivel/obrGruposNivel",{params:a})];this.talleresAgrupados&&o.push(J.$http.get("api/matgruponivelgrados/getInformacionInicial",{params:a})),Promise.all(o).then(function(a){var o=G()(a,2),t=o[0],n=o[1];e.dataAsignacion=t.json,n&&(e.dataGrupos=n.json),e.asignarCabeceras()})},asignarCabeceras:function(){var e=[{name:"DESCRIPCION",field:"DESCRIPCION",sortable:!0,align:"left",label:this.$t("matricula.descripcion")},{name:"NOMCOMP",field:"NOMCOMP",label:this.$t("profesor")},{name:"INSTRUCOD",field:"INSTRUCOD",label:this.$t("ngs.nivel")},{name:"GRADOCOD",field:"GRADOCOD",label:this.$t("ngs.grado")},{name:"MAXGRUPO",field:"MAXGRUPO",label:this.$t("cupos")},{name:"ELIMINAR",field:"ELIMINAR",align:"left"}];this.verGrupos?(e=[{name:"DESCRIPCION",field:"DESCRIPCION",sortable:!0,align:"left",label:this.$t("matricula.descripcion")},{name:"ELIMINAR",field:"ELIMINAR",align:"left"}],this.talleresGrado.data=this.dataGrupos):this.talleresGrado.data=this.dataAsignacion,this.talleresGrado.columns=n()(e)},abrirModalSalones:function(){this.dataEdit={ID_TALLER_ANO:null,INSTRUCOD:null,GRADOCOD:null,MAXGRUPO:null},this.modalTipo=1},abrirModalGrupos:function(e){var a=this;this.dataEdit=e||{ANO:this.anoMat},this.modalTipo=2;var o=[];this.talleresGrado.registrosSeleccionados=[],this.dataGrupos.forEach(function(e){e.DETALLE.forEach(function(e){var a=e.INSTRUCOD,t=e.GRADOCOD;o.push(a+t)})});var t=function(e,o){a.gradosTodos=[],Object.keys(a.gradosSimple).forEach(function(t){a.gradosSimple[t].forEach(function(t){var n=t.instrucod,l=t.value,i=t.label,r=t.INSTRUDES;(e.indexOf(n+l)<0||o.indexOf(n+l)>=0)&&a.gradosTodos.push({INSTRUGRA:n+l,INSTRUCOD:n,GRADOCOD:l,GRADODES:i,INSTRUDES:r})})}),a.gradosTodos.forEach(function(e){o.indexOf(e.INSTRUCOD+e.GRADOCOD)>=0&&a.tablaGrados.registrosSeleccionados.push(e)})},n=[];e?(e.DETALLE.forEach(function(e){n.push(e.INSTRUCOD+e.GRADOCOD)}),this.talleresGrado.registrosSeleccionados=[],t(o,n)):t(o,[])},agregarRegistro:function(e){this.verGrupos?this.abrirModalGrupos(e):this.abrirModalSalones(),this.modalOpen=!0},grabarCupos:function(e){var a=this,o=[J.$http.post("api/HyoMatgruponivel/saveGrupoNivel",e)];this.talleresAgrupados&&o.push(J.$http.get("api/HyoMatgruponivel/ejecutaAdicional",{params:e})),Promise.all(o).then(function(e){var o=G()(e,2),t=o[0],n=(o[1],"error"),l="e0006";"m0001"===t.json&&(n="success",l="m0001",a.cargaInicial(),a.modalOpen=a.insContinua),(0,z["default"])(a.$t("mensajes."+l),n)})},grabarInfo:function(){var e=this;if(this.v$.$touch(),!this.v$.$invalid)if(1===this.modalTipo){var a=x()({},this.dataEdit);this.grabarCupos(a)}else if(this.tablaGrados.registrosSeleccionados.length>0){var o={ano:this.dataEdit.ANO,nivegra:this.tablaGrados.registrosSeleccionados};this.dataEdit.ID&&(o.id=this.dataEdit.ID),o.nivegra.map(function(e){return e["INSTRUGRA"]}),J.$http.post("api/matgruponivelgrados/agregarNivelGrado",o).then(function(a){var o=a.json,t="e0006",n="error";"m0001"===o&&(t=o,n="success",e.cargaInicial(),e.modalOpen=!1),(0,z["default"])(e.$t("mensajes."+t),n)})}},cerrar:function(){this.tablaGrados.registrosSeleccionados=[]},deleteApi:function(e){var a=this;(0,ee.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010")}).then(function(o){if(o){var t="api/HyoMatgruponivel/eliminarTaller";2===a.modalTipo&&(t="api/matgruponivelgrado/eliminarGrupo"),J.$http.get(t,{params:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0006.ok"===o?"success":"error"),"m0006.ok"===o&&(a.cargaInicial(),a.talleresGrado.registrosSeleccionados=[])})}})},deleteSimple:function(e){var a=e.ID;this.deleteApi({id:a})},deleteBloque:function(){var e=this.talleresGrado.registrosSeleccionados.map(function(e){var a=e.ID;return a});this.deleteApi({ids:e})}},watch:{verGrupos:function(){this.asignarCabeceras()}},validations:function(){var e=this,a=function(){return 1!==e.modalTipo||null!==e.dataEdit.ID_TALLER_ANO},o=function(){return 1!==e.modalTipo||null!==e.dataEdit.INSTRUCOD},t=function(){return 1!==e.modalTipo||null!==e.dataEdit.GRADOCOD},n=function(){return 1!==e.modalTipo||e.dataEdit.MAXGRUPO>0},l={dataEdit:{ID_TALLER_ANO:{validaTalleres:a},INSTRUCOD:{validaNivel:o},GRADOCOD:{validaGrado:t},MAXGRUPO:{validaCupos:n}}};return l},mounted:function(){var e=this;J.$http.get("api/HyoMatgruponivel/obtDatosIniciales",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;e.gradosSimple=o.gradosSimple,e.niveles=o.niveles,e.talleresAno=o.talleresAno,e.profes=o.profes,e.cargaInicial(),e.asignarCabeceras()})}};const Cn=(0,E.A)(gn,[["render",bn]]);var On=Cn,An={class:"col q-card"},In={key:0,class:"row col justify-around"};function En(e,a){var o=(0,l.g2)("q-input"),t=(0,l.g2)("q-popup-edit"),n=(0,l.g2)("q-td"),r=(0,l.g2)("q-search"),s=(0,l.g2)("q-table");return(0,l.uX)(),(0,l.CE)("div",An,[(0,l.bF)(s,{data:e.talleresGrado.data,columns:e.talleresGrado.columns,selection:"multiple",selected:e.talleresGrado.registrosSeleccionados,"onUpdate:selected":a[1]||(a[1]=function(a){return e.talleresGrado.registrosSeleccionados=a}),filter:e.talleresGrado.filter,style:(0,i.Tr)({"max-height":e.alto}),"row-key":"ID_TALLER_CLASE"},{"body-cell-CUPOS":(0,l.k6)(function(a){return[(0,l.bF)(n,{props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.CUPOS),1),(0,l.bF)(t,{modelValue:a.row.CUPOS,"onUpdate:modelValue":function(e){return a.row.CUPOS=e},onHide:function(o){return e.grabarCupos(a.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{modelValue:a.row.CUPOS,"onUpdate:modelValue":function(e){return a.row.CUPOS=e},type:"number"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])]}),_:2},1032,["props"])]}),"top-right":(0,l.k6)(function(){return[0===e.talleresGrado.registrosSeleccionados.length?((0,l.uX)(),(0,l.CE)("div",In,[(0,l.bF)(r,{class:"col",modelValue:e.talleresGrado.filter,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.talleresGrado.filter=a})},null,8,["modelValue"])])):(0,l.Q3)("v-if",!0)]}),_:1},8,["data","columns","selected","filter","style"])])}var Dn={setup:function(){var e=(0,v.fG)();return{v$:e}},components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,sieSelect:C.A,QTable:H.A,QTd:b.Ef,QPopupEdit:b.GT,QPageSticky:b._U,QSelect:b.Si,sieVacio:He.A,sieModal:Z.A,QCheckbox:b.vZ,QInput:b.ie,QSearch:b.Ks},props:["anoMat","configuracion","alto"],data:function(){return{sie:(0,A["default"])(),talleresGrado:{columns:[{name:"TALLER",field:"TALLER",sortable:!0,align:"left",label:this.$t("matricula.descripcion")},{name:"DESCRIPCION",field:"DESCRIPCION",sortable:!0,align:"left",label:this.$t("matricula.descripcion")},{name:"CUPOS",field:"CUPOS",label:this.$t("intranet.matricula.talleres.cupos")},{name:"PERIODOS",field:"PERIODOS",align:"left",label:this.$t("cupos")}],registrosSeleccionados:[],filter:"",data:[]}}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{cargaInicial:function(){var e=this,a={ano:this.anoMat};J.$http.get("api/HyoTallerclase/obtTalleresCreados",{params:a}).then(function(a){var o=a.json;e.talleresGrado.data=o})},grabarCupos:function(e){var a=this;J.$http.get("api/HyoTallerclase/updateCupos",{params:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o.msg),o.type)})}},watch:{verGrupos:function(){this.asignarCabeceras()}},validations:function(){var e=this,a=function(){return 1!==e.modalTipo||null!==e.dataEdit.ID_TALLER_ANO},o=function(){return 1!==e.modalTipo||null!==e.dataEdit.INSTRUCOD},t=function(){return 1!==e.modalTipo||null!==e.dataEdit.GRADOCOD},n=function(){return 1!==e.modalTipo||e.dataEdit.MAXGRUPO>0},l={dataEdit:{ID_TALLER_ANO:{validaTalleres:a},INSTRUCOD:{validaNivel:o},GRADOCOD:{validaGrado:t},MAXGRUPO:{validaCupos:n}}};return l},mounted:function(){this.cargaInicial()}};const Tn=(0,E.A)(Dn,[["render",En]]);var Sn=Tn,Rn={components:{vue:Sn,zend:On},props:["anoMat","configuracion","alto","talleresVue"],data:function(){return{tipoShow:null}},methods:{cargaInicial:function(){this.$refs.cargaInit.cargaInicial()}},mounted:function(){this.tipoShow=this.talleresVue&&this.configuracion["M_TALLERES_GRUPOS"]?"vue":"zend"}};const kn=(0,E.A)(Rn,[["render",dn]]);var Mn=kn,Nn={class:"col q-card"},Vn={class:"col row justify-end"},Fn={class:"col q-ma-xs"};function _n(e,a){var o=(0,l.g2)("q-btn"),t=(0,l.g2)("q-td"),n=(0,l.g2)("q-table"),r=(0,l.g2)("sie-select"),s=(0,l.g2)("q-field"),u=(0,l.g2)("q-input"),c=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",Nn,[(0,l.bF)(n,{class:"cabecera-talleres",data:e.dataOpciones,columns:e.columns,style:(0,i.Tr)({"max-height":e.alto}),"row-key":"ID"},{"body-cell-ELIMINAR":(0,l.k6)(function(a){return[(0,l.bF)(t,{props:a},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{flat:"",round:"",dense:"",icon:"edit",onClick:function(o){return e.modalAbrir(a.row)}},null,8,["onClick"]),(0,l.bF)(o,{flat:"",round:"",dense:"",icon:"delete",onClick:function(o){return e.borrar(a.row)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),"top-right":(0,l.k6)(function(){return[(0,l.Lk)("div",Vn,[(0,l.bF)(o,{flat:"",round:"",dense:"",icon:"add",onClick:a[0]||(a[0]=function(a){return e.modalAbrir()})})])]}),_:1},8,["data","columns","style"]),(0,l.bF)(c,{modelValue:e.modalAdd,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.modalAdd=a}),onSubmit:e.grabarNv},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Fn,[(0,l.bF)(s,{error:e.v$.dataNuevo.nivel.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{type:"outlined",modelValue:e.v$.dataNuevo.nivel.$model,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.v$.dataNuevo.nivel.$model=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:e.$t("ngs.nivel")},null,8,["modelValue","options","placeholder"])]}),_:1},8,["error","error-label"]),(0,l.bF)(s,{error:e.v$.dataNuevo.grado.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{type:"outlined",modelValue:e.v$.dataNuevo.grado.$model,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.v$.dataNuevo.grado.$model=a}),options:e.grados[e.dataNuevo.nivel],label:"GRADODES",val:"GRADOCOD",placeholder:e.$t("ngs.grado")},null,8,["modelValue","options","placeholder"])]}),_:1},8,["error","error-label"]),(0,l.bF)(s,{error:e.v$.dataNuevo.tipo.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{type:"outlined",modelValue:e.v$.dataNuevo.tipo.$model,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.v$.dataNuevo.tipo.$model=a}),options:e.tiposTaller,label:"DESCRIPCION",val:"ID",placeholder:e.$t("ngs.tipo")},null,8,["modelValue","options","placeholder"])]}),_:1},8,["error","error-label"]),(0,l.bF)(s,{error:e.v$.dataNuevo.cant.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{class:"q-if-outlined",modelValue:e.v$.dataNuevo.cant.$model,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.v$.dataNuevo.cant.$model=a}),type:"number","float-label":e.$t("biblioteca.cantidad")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])]}),_:1},8,["modelValue","onSubmit"])])}o(9240);var yn={setup:function(){var e=(0,v.fG)();return{v$:e}},components:{QTd:b.Ef,sieSelect:C.A,QTable:H.A,sieModal:Z.A,QBtn:b.Il,QField:b.Om,QInput:b.ie},props:["anoMat","configuracion","alto"],data:function(){return{sie:(0,A["default"])(),modalAdd:!1,dataOpciones:[],tiposTaller:[],dataNuevo:{nivel:null,grado:null,tipo:null,anio:null,cant:null},niveles:[],grados:{},columns:[{name:"INSTRUDES",field:"INSTRUDES",align:"left",label:this.$t("ngs.nivel")},{name:"GRADODES",field:"GRADODES",align:"left",label:this.$t("ngs.grado")},{name:"TIPO_NOMBRE",field:"TIPO_NOMBRE",align:"center",label:this.$t("ngs.tipo")},{name:"CANTIDAD",field:"CANTIDAD",align:"center",label:this.$t("biblioteca.cantidad")},{name:"ELIMINAR",field:"ELIMINAR",align:"right"}]}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{cargaInicial:function(){var e=this;J.$http.get("api/HyoCfgTalleres/listadoCfgTalleres",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;e.dataOpciones=o})},grabarNv:function(){var e=this;this.v$.$touch();var a=0;if(!this.v$.$invalid){if("T"===this.dataNuevo.nivel&&"T"===this.dataNuevo.grado&&0===this.dataNuevo.tipo&&this.dataOpciones.length>1)return(0,z["default"])(this.$t("mensajes.e0033"),"error"),!1;for(var o in this.dataOpciones){var t=this.dataOpciones[o],n=t.GRADOCOD,l=t.INSTRUCOD,i=t.TIPO_ID,r=t.__index;if(this.dataNuevo.nivel===l&&this.dataNuevo.grado===n&&this.dataNuevo.tipo===i&&this.dataNuevo.indice!==r){(0,z["default"])(this.$t("mensajes.e0057"),"error"),a++;break}if(0===i){if("T"===this.dataNuevo.nivel&&this.dataOpciones.length>1&&this.dataNuevo.indice!==r){(0,z["default"])(this.$t("mensajes.e0033"),"error"),a++;break}if(l===this.dataNuevo.nivel){if("T"===this.dataNuevo.grado&&"T"!==n&&this.dataNuevo.indice!==r){(0,z["default"])(this.$t("mensajes.e0059"),"error"),a++;break}if(this.dataNuevo.grado===n&&this.dataNuevo.indice!==r){(0,z["default"])(this.$t("mensajes.e0057"),"error"),a++;break}if("T"===n&&this.dataNuevo.indice!==r){(0,z["default"])(this.$t("mensajes.e0030"),"error"),a++;break}}}else if(0!==this.dataNuevo.tipo&&l===this.dataNuevo.nivel&&n===this.dataNuevo.grado&&this.dataNuevo.indice!==r&&this.dataNuevo.tipo===i){(0,z["default"])(this.$t("mensajes.e0030"),"error"),a++;break}}this.dataOpciones.some(function(o){o.GRADOCOD,o.INSTRUCOD;var t=o.TIPO_ID;if(!e.dataNuevo.indice&&0===t&&0!==e.dataNuevo.tipo&&"T"===e.dataNuevo.nivel&&e.dataOpciones.length>1)return(0,z["default"])(e.$t("mensajes.e0033"),"error"),a++,t}),0===a&&J.$http.post("api/HyoCfgTalleres/grabarCfgTaller",{data:this.dataNuevo}).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.msg),"m0001"===o.msg?"success":"error"),"m0001"===o.msg&&(e.cargaInicial(),e.modalAdd=!1)})}},modalAbrir:function(e){this.dataNuevo=e?{nivel:e.INSTRUCOD,grado:e.GRADOCOD,tipo:e.TIPO_ID,anio:this.anoMat,cant:e.CANTIDAD,indice:e.__index}:{nivel:null,grado:null,tipo:null,anio:this.anoMat,cant:null},this.modalAdd=!0},borrar:function(e){var a=this,o={nivel:e.INSTRUCOD,grado:e.GRADOCOD,tipo:e.TIPO_ID};(0,ee.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(e){e&&J.$http.post("api/HyoCfgtalleres/eliminarCfgTaller",{data:o,ano:a.anoMat}).then(function(e){var o=e.json,t=a.$t("mensajes.m0006."+o.msg),n="success";"ok"!==o.msg&&(n="error"),(0,z["default"])(t,n),"ok"===o.msg&&a.cargaInicial()})})}},validations:function(){var e=this,a=function(){return e.dataNuevo.cant>0&&e.dataNuevo.cant<5},o={dataNuevo:{nivel:{required:Ia.mw},grado:{required:Ia.mw},tipo:{required:Ia.mw},anio:{required:Ia.mw},cant:{validaCant:a}}};return o},mounted:function(){var e=this;this.cargaInicial(),Promise.all([J.$http.get("api/HyoMattipotaller/obtTiposTalleres"),J.$http.get("api/HyoInstrus/obtInstru",{params:{todos:"T"}}),J.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:"S",todos:"T"}})]).then(function(a){var o=G()(a,3),t=o[0],n=o[1],l=o[2];e.niveles=n.json,t.json.unshift({ID:0,DESCRIPCION:"General"}),e.tiposTaller=t.json,e.grados=l.json})}};const Pn=(0,E.A)(yn,[["render",_n]]);var Ln=Pn,Un={class:"col q-card"},$n={class:"column col"},qn={class:"text-bold"},wn={sublabel:""},Qn={class:"q-table q-card"},jn={class:"row justify-end col"},xn={class:"row col"},Xn={class:"col column q-pa-sm"},Gn={key:0,class:"col-6 column q-pa-sm"},Hn={class:"row justify-center q-ma-sm"};function Bn(e,a){var o=(0,l.g2)("q-search"),t=(0,l.g2)("sie-select"),n=(0,l.g2)("q-btn"),r=(0,l.g2)("q-item"),s=(0,l.g2)("q-collapsible"),u=(0,l.g2)("q-scroll-area"),c=(0,l.g2)("q-list"),d=(0,l.g2)("q-radio"),m=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",Un,[(0,l.bF)(c,{separator:""},{default:(0,l.k6)(function(){return[(0,l.bF)(r,null,{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"col q-if-outlined",modelValue:e.filtro.busqueda,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.filtro.busqueda=a}),onInput:e.filtrar},null,8,["modelValue","onInput"]),(0,l.bF)(t,{type:"outlined",modelValue:e.filtro.nivel,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.filtro.nivel=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:e.$t("ngs.nivel"),onInput:a[2]||(a[2]=function(a){e.filtrar(),e.filtro.grado="T"})},null,8,["modelValue","options","placeholder"]),(0,l.bF)(t,{type:"outlined",modelValue:e.filtro.grado,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.filtro.grado=a}),options:e.grados[e.filtro.nivel],label:"label",val:"value",placeholder:e.$t("ngs.grado"),onInput:a[4]||(a[4]=function(a){return e.filtrar()})},null,8,["modelValue","options","placeholder"]),(0,l.bF)(n,{round:"",flat:"",dense:"",icon:"print",onClick:a[5]||(a[5]=function(a){return e.modalPrint=!0})})]}),_:1}),(0,l.bF)(u,{style:(0,i.Tr)({height:e.newAlto})},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dataAlumnos,function(o){return(0,l.uX)(),(0,l.CE)(l.FK,null,[o.DETALLE.length>0?((0,l.uX)(),(0,l.Wv)(s,{key:0},{header:(0,l.k6)(function(){return[(0,l.Lk)("div",$n,[(0,l.Lk)("label",qn,(0,i.v_)(o.NOMCOMP),1),(0,l.Lk)("label",wn,(0,i.v_)(o.INSTRUDES)+" "+(0,i.v_)(o.GRADODES),1)])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("table",Qn,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,(0,i.v_)(e.$t("taller")),1),a[12]||(a[12]=(0,l.Lk)("th",null,"Periodo / Prioridad",-1)),a[13]||(a[13]=(0,l.Lk)("th",null,"Tipo",-1))])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.DETALLE,function(e){return(0,l.uX)(),(0,l.CE)("tr",null,[(0,l.Lk)("td",null,(0,i.v_)(e.DESCRIPCION),1),(0,l.Lk)("td",null,(0,i.v_)(e.PRIORIDAD),1),(0,l.Lk)("td",null,(0,i.v_)(e.CURSO),1)])}),256))])])]}),_:2},1024)):(0,l.Q3)("v-if",!0)],64)}),256))]}),_:1},8,["style"]),(0,l.bF)(r,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",jn,[(0,l.Lk)("span",null,"Total de Alumnos "+(0,i.v_)(e.dataAlumnos.length),1)])]}),_:1})]}),_:1}),(0,l.bF)(m,{modelValue:e.modalPrint,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.modalPrint=a}),title:"imprimir"},{footer:(0,l.k6)(function(){return[(0,l.Lk)("div",Hn,[2!==e.infoReporte.reporte?((0,l.uX)(),(0,l.Wv)(n,{key:0,class:"q-mr-xs",color:"secondary",label:"Exp. Excel",icon:"file_excel",onClick:a[9]||(a[9]=function(a){return e.imprimirReporte("xls")})})):(0,l.Q3)("v-if",!0),e.infoReporte.reporte?((0,l.uX)(),(0,l.Wv)(n,{key:1,color:"secondary",label:"Exp. PDF",icon:"file_pdf",onClick:a[10]||(a[10]=function(a){return e.imprimirReporte("pdf")})})):(0,l.Q3)("v-if",!0)])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",xn,[(0,l.Lk)("div",Xn,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.reportes,function(a,o){return(0,l.uX)(),(0,l.Wv)(d,{key:o,modelValue:e.infoReporte.reporte,"onUpdate:modelValue":function(a){return e.infoReporte.reporte=a},label:a.label,val:a.id,color:"secondary"},null,8,["modelValue","onUpdate:modelValue","label","val"])}),128))]),e.infoReporte&&3!==e.infoReporte.reporte?((0,l.uX)(),(0,l.CE)("div",Gn,[(0,l.bF)(t,{type:"outlined",modelValue:e.infoReporte.nivel,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.infoReporte.nivel=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:e.$t("ngs.nivel"),onInput:a[7]||(a[7]=function(a){return e.infoReporte.grado="T"})},null,8,["modelValue","options","placeholder"]),(0,l.bF)(t,{type:"outlined",modelValue:e.infoReporte.grado,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.infoReporte.grado=a}),options:e.grados[e.infoReporte.nivel],label:"label",val:"value",placeholder:e.$t("ngs.grado")},null,8,["modelValue","options","placeholder"])])):(0,l.Q3)("v-if",!0)])]}),_:1},8,["modelValue"])])}var zn={components:{QItem:b.H0,QList:b.Mb,sieSelect:C.A,QCollapsible:b.eS,QScrollArea:g.A,sieModal:Z.A,QRadio:b.$,QSearch:b.Ks,QBtn:b.Il},props:["anoMat","configuracion","alto","talleresVue"],data:function(){return{infoReporte:{reporte:null,nivel:"T",grado:"T",repcod:"reporteTalleres"},sie:(0,A["default"])(),dataAlumnos:[],alumnosBase:[],newAlto:null,niveles:[],grados:{},talleres:[],matriculadosSinTalleres:[],modalNvTaller:!1,alumnoSelect:null,modalPrint:!1,filtro:{busqueda:null,taller:"T",nivel:"T",grado:"T"},reportes:[{label:"Listado de Matriculados",id:1},{label:"Resumen de Matriculados",id:2}]}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{agregarTallerAlumno:function(){var e=this;J.$http.get("api/HyoMatalumnotaller/getmatriculadosSinTaller",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;e.matriculadosSinTalleres=o,e.modalNvTaller=!0})},cargaInicial:function(){var e=this;J.$http.get("api/HyoMatalumnotaller/getMatriculadosAgrupado",{params:{ano:this.anoMat,nuevo:this.talleresVue&&1===this.configuracion["M_TALLERES_GRUPOS"]}}).then(function(a){var o=a.json;e.alumnosBase=o,e.filtrar()})},validar:function(e,a,o){return new Promise(function(t,n){"T"!==a&&(e=(0,K.filterArray)(a,{field:o,list:e||[]})),t(e)})},imprimirReporte:function(e){var a=x()(x()({},this.infoReporte),{format:e,ano:this.anoMat}),o="intranet/reporte-node/reporte";(0,ae.exportFilePhp)(a,o,"Reporte ")},filtrar:function(){var e=this;this.dataAlumnos=n()(this.alumnosBase),"T"!==this.filtro.taller&&this.dataAlumnos.forEach(function(a,o){a.DETALLE=(0,K.filterArray)(e.filtro.taller,{field:"ID_TALLER_ANO",list:a.DETALLE||[]})}),this.filtro.busqueda&&this.filtro.busqueda.length>0&&(this.dataAlumnos=(0,K.filterArray)(this.filtro.busqueda,{field:"NOMCOMP",list:this.dataAlumnos||[]})),this.validar(this.dataAlumnos,this.filtro.nivel,"INSTRUCOD").then(function(a){return e.validar(a,e.filtro.grado,"GRADOCOD")}).then(function(a){e.dataAlumnos=n()(a)})}},mounted:function(){var e=this;this.cargaInicial();var a=this.alto.substring(0,this.alto.length-2);this.newAlto=a-30+"px","0212"===this.sie.colcod&&this.reportes.push({label:"Listado de Matriculados por Prioridad",id:3}),J.$http.get("api/HyoMatgruponivel/obtDatosIniciales",{params:{ano:this.anoMat,todos:"T"}}).then(function(a){var o=a.json,t=o.niveles,n=o.gradosTodos,l=o.talleresAno;l.unshift({ID:"T",DESCRIPCION:"Todos"}),e.niveles=t,e.grados=n,e.talleres=l})}};const Wn=(0,E.A)(zn,[["render",Bn]]);var Kn=Wn,Jn={components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,sieSelect:C.A,cTalleTipo:zt,cTaller:Zt,cTalleGrado:un,cTalleProfe:Mn,cTalleOpcion:Ln,cTalleAlumno:Kn,QPageSticky:b._U,QBtn:b.Il,QTooltip:b.nC},props:["anoMat"],data:function(){return{sie:(0,A["default"])(),alto:"0px",cargando:!0,tabs:[{titulo:"Conf. Tipos de Taller",valor:"cTalleTipo"},{titulo:"Conf. Talleres",valor:"cTaller"},{titulo:"Conf. Taller Año",valor:"cTalleGrado"},{titulo:"Asignacion Taller Grado",valor:"cTalleProfe"},{titulo:"Conf. Opcion Taller",valor:"cTalleOpcion"},{titulo:"Listado Matriculados",valor:"cTalleAlumno"}],tabSelect:"",procesarGrupos:!1,configuracion:{},talleresVue:!1,ocultaBoton:["cTalleOpcion","cTalleAlumno"]}},computed:{isLess:function(){return(0,Ta.isLess)()}},methods:{handleResize:function(){var e=this.procesarGrupos?235:170;this.alto=window.innerHeight-e+"px"},cTalleTipo:function(){var e=this;return new Promise(function(a,o){J.$http.get("api/HyoMattipotaller/procesaTipoTaller",{params:{talleresVue:e.talleresVue}}).then(function(e){var o=e.json;a(o)})})},cTaller:function(){var e=this;return new Promise(function(a,o){J.$http.get("api/HyoMattaller/generaTalleresGrupo",{params:{talleresVue:e.talleresVue}}).then(function(e){var o=e.json;a(o)})})},cTalleGrado:function(){var e=this;return new Promise(function(a,o){J.$http.get("api/HyoMattallerano/generaTalleresAno",{params:{ano:e.anoMat,talleresVue:e.talleresVue}}).then(function(e){var o=e.json;a(o)})})},cTalleProfe:function(){var e=this;return new Promise(function(a,o){if(console.log(e.talleresVue),e.talleresVue){var t={ano:e.anoMat};J.$http.get("api/HyoTallerclase/procesarTalleres",{params:t}).then(function(e){var o=e.json;a(o)})}else J.$http.get("api/HyoMattaller/generaTalleresGrupo").then(function(e){var o=e.json;a(o)})})},procesarGrupo:function(){var e=this;this[this.tabSelect]().then(function(a){(0,z["default"])(e.$t("mensajes."+a),"success"),e.$refs.cargaInit.cargaInicial()})}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){var e=this;this.tabSelect="cTalleTipo",(0,Ta.isNuevoRegistro)(this.anoMat).then(function(a){e.talleresVue=a}),J.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:this.anoMat,agrupado:!0}}).then(function(a){var o=a.json;e.procesarGrupos=!!o["M_TALLERES_GRUPOS"],e.configuracion=o,e.cargando=!1,window.addEventListener("resize",e.handleResize),e.handleResize()})}};const Yn=(0,E.A)(Jn,[["render",qt]]);var Zn=Yn;function el(e,a){var o=(0,l.g2)("q-tab"),t=(0,l.g2)("q-tabs"),n=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(n,null,{default:(0,l.k6)(function(){return[(0,l.bF)(t,{animated:"",swipeable:e.isLess,inverted:"",modelValue:e.tabSelect,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tabSelect=a})},{title:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.tabs,function(a,t){return(0,l.uX)(),(0,l.Wv)(o,{key:t,name:a,label:e.$t("matricula."+a),default:"parametros"===a},null,8,["name","label","default"])}),128))]}),default:(0,l.k6)(function(){return[((0,l.uX)(),(0,l.Wv)((0,l.$y)(e.currentTab),{class:"q-ma-sm",anoMat:e.anoMat,ano:e.anoMat,id:1,configuracion:e.configuracion,"keep-alive":"",style:{height:"80vh","overflow-y":"scroll"},isReserva:!1},null,8,["anoMat","ano","configuracion"]))]}),_:1},8,["swipeable","modelValue"])]}),_:1})}var al=o(83866),ol={class:"col bg-white q-pa-sm"},tl={class:"col bg-white"},nl={class:"q-table-middle"},ll={class:"q-table q-table-horizontal-separator q-card"},il={key:0},rl={class:"text-bold"},sl={class:"text-bold"},ul={key:0,style:{"text-align":"center"}},cl={class:"col-7"};function dl(e,a){var o=(0,l.g2)("q-icon"),t=(0,l.g2)("q-input"),n=(0,l.g2)("q-popup-edit"),r=(0,l.g2)("draggable");return(0,l.uX)(),(0,l.CE)("div",ol,[(0,l.Lk)("div",tl,[(0,l.Lk)("div",nl,[(0,l.Lk)("table",ll,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[e.permiso>2?((0,l.uX)(),(0,l.CE)("th",il,[(0,l.bF)(o,{name:"import_export",size:"20px"})])):(0,l.Q3)("v-if",!0),(0,l.Lk)("th",rl,(0,i.v_)(e.$t("tipo")),1),(0,l.Lk)("th",sl,(0,i.v_)(e.$t("matricula.descripcion")),1)])]),(0,l.bF)(r,{modelValue:e.listaPasos,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.listaPasos=a}),tag:"tbody",onChange:e.ordenarPasos},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaPasos,function(a,r){return(0,l.uX)(),(0,l.CE)("tr",{key:a.TIPO},[e.permiso>2?((0,l.uX)(),(0,l.CE)("td",ul,[(0,l.bo)((0,l.bF)(o,{name:"blur_on",size:"20px"},null,512),[[wa.aG,!a.noEditable]])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("td",null,(0,i.v_)(a.TIPO),1),(0,l.Lk)("td",cl,[(0,l.eW)((0,i.v_)(a.DESCRIPCION),1),e.permiso>2?((0,l.uX)(),(0,l.Wv)(n,{key:0,modelValue:a.DESCRIPCION,"onUpdate:modelValue":function(e){return a.DESCRIPCION=e},onShow:function(o){return e.abreEditar(a.DESCRIPCION)},onSave:function(o){return e.terminaEdicion(a,"DESCRIPCION")},buttons:"","label-cancel":e.$t("botones.cancelar"),"label-set":e.$t("botones.guardar")},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{modelValue:a.DESCRIPCION,"onUpdate:modelValue":function(e){return a.DESCRIPCION=e},maxlength:"30"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onShow","onSave","label-cancel","label-set"])):(0,l.Q3)("v-if",!0)])])}),128))]}),_:1},8,["modelValue","onChange"])])])])])}var ml=Be.Hi,fl={components:{QSelect:b.Si,QToggle:b.c5,sieEditor:B.A,QPageSticky:b._U,draggable:ml,QPopupEdit:b.GT,QIcon:b.bP,QInput:b.ie},data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,listaPasos:[],siNo:[{label:"Si",value:"S"},{label:"No",value:"N"}],dataEditar:null}},props:["anoMat","configuracion"],methods:{cargarInfo:function(){var e=this;J.$http.get("api/HyoCamposmatriculatipo/obtTiposCampos").then(function(a){var o=a.json;o.forEach(function(e){e.noEditable=["ALUMNO"].indexOf(e.TIPO)>=0}),e.listaPasos=o})},ordenarPasos:function(e){var a=this,o=[];if(this.permiso<=2||e.moved.element.noEditable)return this.cargarInfo(),!1;if(e.moved.oldIndex>=1&&e.moved.newIndex>=1){for(var t=1;t<this.listaPasos.length;t++){var n=this.listaPasos[t];if(n.ORDEN-1!==t){var l=t+1;o.push({tipo:n.TIPO,orden:l}),n.ORDEN=l}}J.$http.post("api/HyoCamposmatriculatipo/updateOrden",{parametros:o}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o.mensaje),"check"===o.icono?"success":"error"),"check"===o.icono&&a.cargarInfo()})}},abreEditar:function(e){this.dataEditar=e},terminaEdicion:function(e){var a=this;if(e.DESCRIPCION!==this.dataEditar){var o={tipo:e.TIPO,descripcion:e.DESCRIPCION};this.dataEditar=null,J.$http.get("api/HyoCamposmatriculatipo/editarTiposCampos",{params:o}).then(function(e){var o=e.json,t="m0001"===o.msg?"success":"error";(0,z["default"])(a.$t("mensajes."+o.msg),t),"success"===t&&a.cargarInfo()})}}},mounted:function(){this.cargarInfo(),console.log(this.configuracion)}};const pl=(0,E.A)(fl,[["render",dl]]);var hl=pl,vl=o(42771),bl={class:"col bg-white q-pa-sm"},gl={class:"col bg-white"},Cl={class:"q-ma-sm"},Ol={class:"col q-px-xs q-mx-xs q-mb-sm border-field"},Al={class:"col column"},Il={class:"q-table q-table-horizontal-separator q-card"},El={key:0},Dl={class:"text-bold"},Tl={class:"text-bold"},Sl={key:1},Rl={key:2},kl={key:0,style:{"text-align":"center"}},Ml={class:"row justify-center"},Nl={key:1},Vl={class:"row justify-center"},Fl={key:2},_l={class:"row justify-center"};function yl(e,a){var o=(0,l.g2)("q-btn"),t=(0,l.g2)("q-input"),n=(0,l.g2)("sie-editor"),r=(0,l.g2)("sie-modal"),s=(0,l.g2)("q-icon"),u=(0,l.g2)("draggable"),c=(0,l.g2)("q-page-sticky");return(0,l.uX)(),(0,l.CE)("div",bl,[(0,l.Lk)("div",gl,[(0,l.bF)(r,{modelValue:e.modalNuevoBtn,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.modalNuevoBtn=a}),onSubmit:a[3]||(a[3]=function(a){return e.grabarBtn(e.btnDesc)})},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Cl,[(0,l.Lk)("fieldset",Ol,[a[6]||(a[6]=(0,l.Lk)("legend",{class:"leyenda"},"Seleccione un Icono",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.icons,function(a){return(0,l.uX)(),(0,l.Wv)(o,{key:a.idx,flat:"",dense:"",icon:a.name,color:e.btnDesc.ICONO===a.name?"secondary":"",onClick:function(o){return e.btnDesc.ICONO=a.name}},null,8,["icon","color","onClick"])}),128))]),(0,l.bF)(t,{class:"q-if-outlined",modelValue:e.btnDesc.TEXTO,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.btnDesc.TEXTO=a}),"float-label":"Texto del boton"},null,8,["modelValue"]),(0,l.Lk)("div",Al,[(0,l.bF)(n,{class:"col",modelValue:e.btnDesc.MENSAJE,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.btnDesc.MENSAJE=a}),label:e.$t("matricula.mensaje")},null,8,["modelValue","label"])])])]}),_:1},8,["modelValue"])]),(0,l.Lk)("table",Il,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[e.permiso>2?((0,l.uX)(),(0,l.CE)("th",El,[(0,l.bF)(s,{name:"import_export",size:"20px"})])):(0,l.Q3)("v-if",!0),(0,l.Lk)("th",Dl,(0,i.v_)(e.$t("Texto de botón")),1),(0,l.Lk)("th",Tl,(0,i.v_)(e.$t("Icono")),1),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",Sl,(0,i.v_)(e.$t("botones.editar")),1)):(0,l.Q3)("v-if",!0),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",Rl,(0,i.v_)(e.$t("botones.eliminar")),1)):(0,l.Q3)("v-if",!0)])]),(0,l.bF)(u,{modelValue:e.listaBotones,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.listaBotones=a}),tag:"tbody",onChange:e.ordenarBtn},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaBotones,function(a,t){return(0,l.uX)(),(0,l.CE)("tr",{key:a.ID_BTN},[e.permiso>2?((0,l.uX)(),(0,l.CE)("td",kl,[(0,l.bF)(s,{name:"blur_on",size:"20px"})])):(0,l.Q3)("v-if",!0),(0,l.Lk)("td",null,(0,i.v_)(a.TEXTO),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",Ml,[(0,l.bF)(s,{name:a.ICONO,size:"20px"},null,8,["name"])])]),e.permiso>2?((0,l.uX)(),(0,l.CE)("td",Nl,[(0,l.Lk)("div",Vl,[(0,l.bF)(o,{icon:"edit",flat:"",dense:"",round:"",onClick:function(o){return e.modalBtn(a)}},null,8,["onClick"])])])):(0,l.Q3)("v-if",!0),e.permiso>2?((0,l.uX)(),(0,l.CE)("td",Fl,[(0,l.Lk)("div",_l,[(0,l.bF)(o,{icon:"delete",flat:"",dense:"",round:"",onClick:function(o){return e.deleteBtn(a)}},null,8,["onClick"])])])):(0,l.Q3)("v-if",!0)])}),128))]}),_:1},8,["modelValue","onChange"])]),(0,l.bF)(c,{position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{fab:"",round:"",size:"xl",icon:"add",color:"secondary",onClick:a[5]||(a[5]=function(a){return e.modalBtn()})})]}),_:1})])}var Pl=Be.Hi,Ll={components:{QSelect:b.Si,QToggle:b.c5,sieEditor:B.A,QPageSticky:b._U,draggable:Pl,QPopupEdit:b.GT,SieModal:Z.A,QBtn:b.Il,QInput:b.ie,QIcon:b.bP},data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,listaBotones:[],modalNuevoBtn:!1,siNo:[{label:"Si",value:"S"},{label:"No",value:"N"}],dataEditar:null,icons:[{name:"address_book",selected:!1,idx:0},{name:"plus_square",selected:!1,idx:1},{name:"cap_graduate",selected:!1,idx:2},{name:"write",selected:!1,idx:3},{name:"work",selected:!1,idx:4},{name:"book",selected:!1,idx:5},{name:"check_square_o",selected:!1,idx:6},{name:"add",selected:!1,idx:7},{name:"medkit",selected:!1,idx:8},{name:"file_text_o",selected:!1,idx:9},{name:"file_text",selected:!1,idx:10},{name:"documents",selected:!1,idx:11},{name:"pencil_square",selected:!1,idx:12},{name:"hospital",selected:!1,idx:13},{name:"folder_star",selected:!1,idx:14},{name:"flag",selected:!1,idx:15},{name:"accessibility",selected:!1,idx:16},{name:"healing",selected:!1,idx:17},{name:"record_voice_over",selected:!1,idx:18},{name:"security",selected:!1,idx:19},{name:"verified_user",selected:!1,idx:20},{name:"man_woman",selected:!1,idx:21},{name:"male",selected:!1,idx:22},{name:"kids",selected:!1,idx:23},{name:"graduate",selected:!1,idx:24},{name:"graduate_girl",selected:!1,idx:25}],btnDesc:{ANO:null,ICONO:null,MENSAJE:null,ORDEN:null,TEXTO:null}}},props:["anoMat","configuracion"],methods:{cargarInfo:function(){var e=this;J.$http.get("api/HyoMatriculaBotones/getMatriculaBotones",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;e.listaBotones=o})},resetBtn:function(){this.btnDesc={ANO:this.anoMat,ICONO:null,MENSAJE:null,ORDEN:this.listaBotones.length+1,TEXTO:null}},ordenarBtn:function(){var e=this,a=[];if(this.permiso<=2)return this.cargarInfo(),!1;for(var o=1;o<this.listaBotones.length;o++){var t=this.listaBotones[o];if(t.ORDEN-1!==o){var n=o+1;a.push({ID_BTN:t.ID_BTN,orden:n}),t.ORDEN=n}}J.$http.post("api/HyoMatriculaBotones/updateOrden",{data:a}).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.mensaje),"check"===o.icono?"success":"error"),"check"===o.icono&&e.cargarInfo()})},deleteBtn:function(e){var a=this;(0,ee.dialogConfirm)({message:this.$t("mensajes.m0006.confirmacion")}).then(function(o){o&&J.$http.post("api/HyoMatriculaBotones/deleteMatriculaBotones",{idBtn:e.ID_BTN}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes.m0006."+o),"ok"===o?"success":"error"),"ok"===o&&a.cargarInfo()})})},modalBtn:function(e){e?this.btnDesc=e:this.resetBtn(),this.modalNuevoBtn=!0},grabarBtn:function(e){var a=this,o={data:e};e.ID_BTN?(o.idBtn=e.ID_BTN,J.$http.post("api/HyoMatriculaBotones/updateMatriculaBotones",o).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o),"m0001"===o?"success":"error"),a.modalNuevoBtn=!1,a.cargarInfo()})):J.$http.post("api/HyoMatriculaBotones/createMatriculaBotones",o).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+(o.message||o)),"m0001"===o?"success":"error"),a.modalNuevoBtn=!1,a.cargarInfo()})},seleccionaBtn:function(e){this.icons.forEach(function(a){a.name===e?a.selected=!0:a.selected=!1})}},mounted:function(){this.cargarInfo()}};const Ul=(0,E.A)(Ll,[["render",yl]]);var $l=Ul,ql={class:"col bg-white q-pa-sm"},wl={class:"row col"};function Ql(e,a){var o=(0,l.g2)("q-tooltip"),t=(0,l.g2)("q-btn"),r=(0,l.g2)("q-td"),s=(0,l.g2)("q-search"),u=(0,l.g2)("q-table");return(0,l.uX)(),(0,l.CE)("div",ql,[(0,l.bF)(u,{data:e.datosTabla,columns:e.columnsTabla,"row-key":"famcod",style:(0,i.Tr)({height:e.alto+"px"}),filter:e.tableFilter},{"body-cell-RESET":(0,l.k6)(function(i){return[(0,l.bF)(r,{props:i},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{dense:"",round:"",flat:"",icon:"settings_backup_restore",disable:e.cargando,onClick:function(a){return e.resetIndividual(i.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(o,null,{default:(0,l.k6)(function(){return n()(a[3]||(a[3]=[(0,l.eW)("Resetear Clave",-1)]))}),_:1})]}),_:1},8,["disable","onClick"]),(0,l.bF)(t,{dense:"",round:"",flat:"",icon:"send",disable:e.cargando,onClick:function(a){return e.sendIndividual(i.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(o,null,{default:(0,l.k6)(function(){return n()(a[4]||(a[4]=[(0,l.eW)("Enviar Clave",-1)]))}),_:1})]}),_:1},8,["disable","onClick"])]}),_:2},1032,["props"])]}),"top-right":(0,l.k6)(function(){return[(0,l.Lk)("div",wl,[(0,l.bF)(s,{class:"col",modelValue:e.tableFilter,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tableFilter=a}),"hide-underline":""},null,8,["modelValue"]),e.permiso>2?((0,l.uX)(),(0,l.Wv)(t,{key:0,dense:"",round:"",flat:"",disable:e.cargando,icon:"settings_backup_restore",onClick:a[1]||(a[1]=function(a){return e.resetearBloque(e.datosTabla)})},{default:(0,l.k6)(function(){return[(0,l.bF)(o,null,{default:(0,l.k6)(function(){return n()(a[5]||(a[5]=[(0,l.eW)("Resetar clave a Listados",-1)]))}),_:1})]}),_:1},8,["disable"])):(0,l.Q3)("v-if",!0),(0,l.bF)(t,{dense:"",round:"",flat:"",disable:e.cargando,icon:"send",onClick:a[2]||(a[2]=function(a){return e.sendBloque(e.datosTabla)})},{default:(0,l.k6)(function(){return[(0,l.bF)(o,null,{default:(0,l.k6)(function(){return n()(a[6]||(a[6]=[(0,l.eW)("Enviar clave a Listados",-1)]))}),_:1})]}),_:1},8,["disable"])])]}),_:1},8,["data","columns","style","filter"])])}var jl=Be.Hi,xl={components:{QSelect:b.Si,QToggle:b.c5,sieEditor:B.A,QPageSticky:b._U,draggable:jl,QPopupEdit:b.GT,SieModal:Z.A,QTable:H.A,QTd:b.Ef,QBtn:b.Il,QTooltip:b.nC,QSearch:b.Ks},data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,datosTabla:[],alto:null,tableFilter:null,columnsTabla:[{name:"FAMDES",label:"FAMDES",field:"FAMDES",align:"left",sortable:!0,required:!0},{name:"CLAVE",label:"CLAVE",field:"CLAVE",align:"left",sortable:!0,required:!0}],cargando:!1}},props:["anoMat","configuracion"],methods:{handleResize:function(){var e=255;this.alto=window.innerHeight-e},cargaInicial:function(){var e=this;J.$http.get("api/HyoFamilias/obtFamiliasPassMatricula").then(function(a){var o=a.json;e.datosTabla=o})},resetClave:function(e){var a=this;J.$http.post("api/HyoFamilias/generarClaveAleatoria",{famcods:e}).then(function(o){var t=o.json;"m0001"===t&&(a.cargaInicial(),a.sendClave(e),a.cargando=!1),(0,z["default"])(a.$t("mensajes."+t),"m0001"===t?"success":"error")})},resetIndividual:function(e){var a=this,o=e.FAMCOD;(0,ee.dialogConfirm)({title:"¿Esta seguro de resetear la contraseña de este usuario?",message:this.$t("mensajes.m0010")}).then(function(e){!0===e&&(a.cargando=!0,a.resetClave([o]))})},sendClave:function(e){var a=this;J.$http.post("api/HyoFamilias/enviarClaveAleatoria",{famcods:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o.msg),o.type)})},sendIndividual:function(e){var a=e.FAMCOD;this.sendClave([a])},sendBloque:function(e){this.sendClave(this.infoFamcods(e))},infoFamcods:function(e){var a=this.tableFilter?(0,K.filterArray)(this.tableFilter,{field:"FAMDES",list:e}):e,o=[];return a.forEach(function(e){o.push(e.FAMCOD)}),o},resetearBloque:function(e){var a=this;(0,ee.dialogConfirm)({title:"¿Esta seguro de resetear la contraseña de este usuario?",message:this.$t("mensajes.m0010")}).then(function(o){!0===o&&(a.cargando=!0,a.resetClave(a.infoFamcods(e)))})}},mounted:function(){this.cargaInicial(),window.addEventListener("resize",this.handleResize),this.handleResize(),this.permiso>2&&this.columnsTabla.push({name:"RESET",label:"",field:"RESET",align:"left",sortable:!0,required:!0})},unmounted:function(){window.removeEventListener("resize",this.handleResize)}};const Xl=(0,E.A)(xl,[["render",Ql]]);var Gl=Xl,Hl={class:"col bg-white"},Bl={class:"row justify-around"},zl={class:"col row"},Wl={class:"col row"},Kl={class:"col"},Jl={class:"row"},Yl={class:"q-ma-sm"},Zl={key:2,class:"col q-pa-xs border-field q-mb-sm"},ei={class:"row"};function ai(e,a){var o=(0,l.g2)("q-datetime"),t=(0,l.g2)("q-field"),n=(0,l.g2)("q-select"),r=(0,l.g2)("sie-select"),s=(0,l.g2)("q-search"),u=(0,l.g2)("q-btn"),c=(0,l.g2)("q-tooltip"),d=(0,l.g2)("q-table"),m=(0,l.g2)("q-option-group"),f=(0,l.g2)("q-toolbar"),p=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",Hl,[(0,l.Lk)("div",Bl,[(0,l.Lk)("div",zl,[(0,l.bF)(t,{class:"col",icon:"calendar"},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"col q-if-outlined",modelValue:e.fecIni,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.fecIni=a}),"float-label":e.$t("desde"),format:"DD/MM/YYYY",onInput:e.filtrarDatos},null,8,["modelValue","float-label","onInput"])]}),_:1}),(0,l.bF)(t,{class:"col",icon:"calendar"},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"col q-if-outlined",modelValue:e.fecFin,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.fecFin=a}),format:"DD/MM/YYYY","float-label":e.$t("hasta"),onInput:e.filtrarDatos},null,8,["modelValue","float-label","onInput"])]}),_:1})]),(0,l.Lk)("div",Wl,[(0,l.Lk)("div",Kl,[(0,l.bF)(n,{class:"q-if-outlined",options:e.siNo,modelValue:e.estado,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.estado=a}),"float-label":"Procesado",onInput:e.filtrarDatos},null,8,["options","modelValue","onInput"])])])]),(0,l.Lk)("div",Jl,[(0,l.bF)(r,{class:"col",type:"outlined",modelValue:e.instrucod,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.instrucod=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",onInput:e.seleccionarNivel},null,8,["modelValue","options","onInput"]),(0,l.bF)(r,{class:"col",type:"outlined",modelValue:e.gradocod,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.gradocod=a}),options:e.grados[e.instrucod],label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado",onInput:e.filtrarDatos},null,8,["modelValue","options","onInput"])]),(0,l.bF)(d,{data:e.dataFiltrada,columns:e.columnas,"row-key":"ALUCOD",style:(0,i.Tr)({"max-height":e.alto}),filter:e.filtro,selection:"multiple",selected:e.seleccionados,"onUpdate:selected":a[7]||(a[7]=function(a){return e.seleccionados=a})},{"top-right":(0,l.k6)(function(o){return[(0,l.bF)(s,{class:"col",modelValue:e.filtro,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.filtro=a})},null,8,["modelValue"]),e.seleccionados.length>0?((0,l.uX)(),(0,l.Wv)(u,{key:0,dense:"",flat:"",round:"",icon:"delete",onClick:e.eliminarData},null,8,["onClick"])):(0,l.Q3)("v-if",!0),(0,l.bF)(u,{dense:"",flat:"",round:"",icon:"print",onClick:a[6]||(a[6]=function(a){return e.modalPrint=!0})},{default:(0,l.k6)(function(){return[(0,l.bF)(c,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1})]}),_:1},8,["data","columns","style","filter","selected"]),(0,l.bF)(p,{modelValue:e.modalPrint,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.modalPrint=a}),title:"Imprimir Reportes",footer:!1},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Yl,[(0,l.bF)(r,{class:"col",type:"outlined",modelValue:e.reporte.modo,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.reporte.modo=a}),options:e.tipoReporte,label:"label",val:"value",placeholder:"Tipo de Reporte"},null,8,["modelValue","options"]),1===e.reporte.modo?((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"col",type:"outlined",modelValue:e.reporte.tipo,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.reporte.tipo=a}),options:e.siNoReporte,label:"label",val:"value",placeholder:"Procesado"},null,8,["modelValue","options"])):(0,l.Q3)("v-if",!0),4===e.reporte.modo?((0,l.uX)(),(0,l.Wv)(r,{key:1,class:"col",type:"outlined",modelValue:e.reporte.estado,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.reporte.estado=a}),options:e.estadosDatos,label:"label",val:"value",placeholder:"Procesado"},null,8,["modelValue","options"])):(0,l.Q3)("v-if",!0),e.reporte.modo<3?((0,l.uX)(),(0,l.CE)("fieldset",Zl,[a[18]||(a[18]=(0,l.Lk)("legend",{class:"leyenda"},"Orden :",-1)),(0,l.bF)(m,{inline:"",type:"radio",modelValue:e.reporte.orden,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.reporte.orden=a}),options:e.ordenReporte},null,8,["modelValue","options"])])):(0,l.Q3)("v-if",!0),3===e.reporte.modo?((0,l.uX)(),(0,l.Wv)(r,{key:3,class:"col",type:"outlined",modelValue:e.reporte.documento,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.reporte.documento=a}),options:e.listaDocumentos,label:"TITULO",val:"ID",placeholder:"documento"},null,8,["modelValue","options"])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",ei,[(0,l.bF)(r,{class:"col",type:"outlined",modelValue:e.reporte.instrucod,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.reporte.instrucod=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel"},null,8,["modelValue","options"]),(0,l.bF)(r,{class:"col",type:"outlined",modelValue:e.reporte.gradocod,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.reporte.gradocod=a}),options:e.grados[e.reporte.instrucod],label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado"},null,8,["modelValue","options"])]),(0,l.bF)(f,{class:"row justify-end",inverted:""},{default:(0,l.k6)(function(){return[e.reporte.modo>=3?((0,l.uX)(),(0,l.Wv)(u,{key:0,class:"q-mr-sm",label:"Exp. Excel",color:"primary",onClick:a[15]||(a[15]=function(a){return e.imprimir("xls")})})):(0,l.Q3)("v-if",!0),(0,l.bF)(u,{class:"q-mr-sm",label:e.$t("botones.imprimir"),color:"primary",onClick:a[16]||(a[16]=function(a){return e.imprimir("pdf")})},null,8,["label"])]}),_:1})])]}),_:1},8,["modelValue"])])}var oi=Be.Hi,ti={components:{QSelect:b.Si,sieEditor:B.A,QDatetime:b.T5,draggable:oi,SieModal:Z.A,QTable:H.A,sieSelect:C.A,dialogConfirm:ee.dialogConfirm,QRadio:b.$,QOptionGroup:b.EX,QField:b.Om,QSearch:b.Ks,QBtn:b.Il,QTooltip:b.nC,QToolbar:b.ZV},data:function(){return{modalPrint:!1,sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,listaBotones:[],modalNuevoBtn:!1,dataBase:[],dataFiltrada:[],filtro:null,alto:"0",listaDocumentos:[],columnas:[{name:"ALUCOD",field:"ALUCOD",align:"left",label:this.$t("codigo")},{name:"NOMCOMP",field:"NOMCOMP",align:"left",label:this.$t("apellidosynombres")},{name:"NGS",field:function(e){return e["INSTRUCOD"]+e.GRADOCOD+e.SECCIONCOD},align:"left",label:this.$t("ngs.ngs"),sortable:!0},{name:"ESTADO",field:"ESTADODES",align:"left",label:this.$t("matricula.estado"),sortable:!0},{name:"FECHA",field:function(e){return(0,Y.Ay)(e["FH_RESPUESTA"],"DD/MM/YYYY hh:mm A")},align:"left",label:this.$t("fecha"),sortable:!0}],siNo:[{label:"Todos",value:"T"},{label:"Si",value:"S"},{label:"No",value:"N"},{label:"Rechazado",value:"R"}],siNoReporte:[{label:"Si",value:"S"},{label:"No",value:"N"}],ordenReporte:[{label:"Alfabetico",value:1},{label:"Salon",value:2}],tipoReporte:[{label:"Listado",value:1},{label:"Detalle respuestas",value:2},{label:"Respuestas",value:3},{label:"Detalle Estado",value:4}],seleccionados:[],estadosDatos:[{label:"Sin Registrar",value:1},{label:"Pendiente",value:2},{label:"Rechazado",value:3},{label:"Aprobado",value:4}],dataEditar:null,fecIni:null,fecFin:null,sinTransferir:!1,instrucod:"T",gradocod:"T",niveles:[],grados:{},estado:"S",reporte:{tipo:"S",orden:1,instrucod:"T",gradocod:"T",modo:1,documento:"T",estado:4}}},props:["anoMat"],methods:{handleResize:function(){this.alto=window.innerHeight-270+"px"},cargarInfo:function(){var e=this;J.$http.get("api/HyoDeclaracionalumno/obtProcesados",{params:{ano:this.anoMat}}).then(function(a){var o=a.json;e.dataBase=o,e.filtrarDatos(),e.seleccionados=[]})},filtrarDatos:function(){var e=this;this.dataFiltrada=[],this.dataBase.forEach(function(a){var o=1;if("T"!==e.estado)if("S"===e.estado){var t=[2,3,4];t.indexOf(a.ESTADO)<0&&(o=0)}else"N"===e.estado?1!==a.ESTADO&&(o=0):"R"===e.estado&&3!==a.ESTADO&&(o=0);if(e.fecIni&&e.fecIni>a.FH_RESPUESTA&&(o=0),e.fecFin){var n=new Date(new Date(e.fecFin).setHours(23,59,59));n<new Date(a.FH_RESPUESTA)&&(o=0)}"T"!==e.instrucod&&(a.INSTRUCOD!==e.instrucod||"T"!==e.gradocod&&e.gradocod!==a.GRADOCOD)&&(o=0),0!==o&&e.dataFiltrada.push(a)})},seleccionarNivel:function(e){this.gradocod="T",this.filtrarDatos()},eliminarData:function(){var e=this;(0,ee.dialogConfirm)({title:this.$t("confirmar"),message:this.$t("mensajes.m0010")}).then(function(a){if(a){var o=[],t=[];e.seleccionados.forEach(function(e){e.ID&&0===e.CANDOCU?o.push(e.ID):e.CANDOCU>0&&t.push(e)}),o.length>0?J.$http.post("api/HyoDeclaracionalumno/eliminarDeclaracion",{arrIds:o}).then(function(a){var o=a.json;"m0013"===o.mensaje&&t.length>0&&(o.mensaje="m0128"),(0,z["default"])(e.$t("mensajes."+o.mensaje),o.icono),e.cargarInfo()}):t.length>0&&(0,z["default"])("Debe eliminar los documentos de los alumnos seleccionados","error")}})},imprimir:function(e){var a="intranet/reporte-node/reporte",o=this.reporte;o.repcod="listadoCOndiciones",o.ano=this.anoMat,o.formato=e,(0,ae["default"])(o,a,"Reporte ")}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},watch:{modalPrint:function(e){var a=this;e&&J.$http.post("api/HyoMatriculadocumentosconf/obtDocumentosCondiciones",{ano:this.anoMat}).then(function(e){var o=e.json;a.listaDocumentos=o,o.length>0&&(a.reporte.documento=o[0].ID)})}},mounted:function(){var e=this;this.cargarInfo(),J.$http.get("api/HyoInstrus/obtInstru").then(function(a){var o=a.json;o.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=o}),J.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:"true",todos:"T"}}).then(function(a){var o=a.json;e.grados=o}),window.addEventListener("resize",this.handleResize),this.handleResize()}};const ni=(0,E.A)(ti,[["render",ai]]);var li=ni,ii={class:"col bg-white q-pa-sm"},ri={class:"col bg-white row"},si={class:"q-item-icon q-item-inverted flex flex-center bg-green"};function ui(e,a){var o=(0,l.g2)("q-icon"),t=(0,l.g2)("q-item-side"),n=(0,l.g2)("q-item-tile"),r=(0,l.g2)("q-item-main"),s=(0,l.g2)("q-item"),u=(0,l.g2)("q-list"),c=(0,l.g2)("q-popover"),d=(0,l.g2)("q-btn"),m=(0,l.g2)("router-view"),f=(0,l.gN)("close-overlay");return(0,l.uX)(),(0,l.CE)("div",ii,[(0,l.Lk)("div",ri,[(0,l.bF)(u,{highlight:"","inset-separator":"",class:(0,i.C4)({"col-md-4 col-0":!!e.formSelect,"col-12":!e.formSelect,"overflow-auto":!0,"q-pb-xl":!0})},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaEncuestas,function(m,p){return(0,l.uX)(),(0,l.Wv)(s,{key:p,onClick:function(a){return e.seleccionaEncuesta(m)},class:(0,i.C4)({"bg-green":m.ACTIVO})},{default:(0,l.k6)(function(){return[m.ACTIVO?((0,l.uX)(),(0,l.Wv)(t,{key:0},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",si,[(0,l.bF)(o,{name:"check_circle",size:"40px"})])]}),_:1})):((0,l.uX)(),(0,l.Wv)(t,{key:1},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",{class:"q-item-icon q-item-inverted flex flex-center",style:(0,i.Tr)({"background-color":m.COLOR})},[(0,l.bF)(o,{name:m.ICONO},null,8,["name"])],4)]}),_:2},1024)),(0,l.bF)(r,null,{default:(0,l.k6)(function(){return[(0,l.bF)(n,{label:"",class:(0,i.C4)({"text-white":m.ACTIVO})},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(m.TITULO),1)]}),_:2},1032,["class"]),(0,l.bF)(n,{sublabel:"",class:(0,i.C4)({"text-white":m.ACTIVO})},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(m.DESCRIPCION),1)]}),_:2},1032,["class"])]}),_:2},1024),(0,l.bF)(t,{right:""},{default:(0,l.k6)(function(){return[(0,l.bF)(d,{flat:"",round:"",dense:"",icon:"more_vert",onClick:a[0]||(a[0]=function(e){return e.stopPropagation()})},{default:(0,l.k6)(function(){return[(0,l.bF)(c,null,{default:(0,l.k6)(function(){return[(0,l.bF)(u,{link:"",style:{"min-width":"250px"}},{default:(0,l.k6)(function(){return[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(s,{onClick:(0,wa.D$)(function(a){return e.ver(m.ID_FORMULARIO)},["stop"])},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{icon:"pageview"}),(0,l.bF)(r,{label:"Ver"})]}),_:1},8,["onClick"])),[[f]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(s,{onClick:(0,wa.D$)(function(a){return e.seleccionaEncuesta(m)},["stop"])},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{icon:"playlist_add"}),(0,l.bF)(r,{label:"Asignar"})]}),_:1},8,["onClick"])),[[f]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(s,{onClick:(0,wa.D$)(function(a){return e.editar(m.ID_FORMULARIO)},["stop"])},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{icon:"edit"}),(0,l.bF)(r,{label:"Editar"})]}),_:1},8,["onClick"])),[[f]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["onClick","class"])}),128))]}),_:1},8,["class"]),e.formSelect?((0,l.uX)(),(0,l.Wv)(m,{key:0,class:"col-md-8 col-12 q-pa-sm-sm column overflow-auto relative-position bg-white-mobile"})):(0,l.Q3)("v-if",!0)])])}var ci=o(99637),di=o(2476),mi=o(81519),fi=o(70662),pi=Be.Hi,hi={components:{QSelect:b.Si,QToggle:b.c5,sieEditor:B.A,QPageSticky:b._U,draggable:pi,QPopupEdit:b.GT,QList:b.Mb,QItem:b.H0,verFormulario:mi["default"],asignar:fi["default"],nuevoFormulario:di["default"],QItemSide:b.n1,QIcon:b.bP,QItemMain:b.mF,QItemTile:b.lp,QBtn:b.Il,QPopover:b.VM},data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,listaEncuestas:[],siNo:[{label:"Si",value:"S"},{label:"No",value:"N"}],dataEditar:null,accion:null,formSelect:null}},props:["anoMat","configuracion","id"],methods:{cargarInfo:function(){var e=this;J.$http.get("api/HyoFormulario/obtFormularioTipoDetalle",{params:{tipo:4,ano:this.anoMat}}).then(function(a){var o=a.json;(0,ci["default"])(o,function(e){e.ACTIVO=e.DETALLE.length>0}),e.listaEncuestas=o})},seleccionaEncuesta:function(e){var a=this;e.DETALLE.length<=0?(0,ee.dialogConfirm)({title:"No hay encuestas Asignadas...",message:"¿Desea asignar esta encuesta al proceso de matricula Actual?"}).then(function(o){o&&J.$http.post("api/HyoMatriculaFecha/addFormularioFecha",{idFormulario:e.ID_FORMULARIO,ano:a.anoMat}).then(function(){a.cargarInfo()})}):(this.formSelect=e.ID_FORMULARIO,this.asignarRouter("intranet.configuracionMatricula.asignar",parseInt(e.ID_FORMULARIO)))},ver:function(e){this.formSelect=e,this.asignarRouter("intranet.configuracionMatricula.verFormulario",e)},editar:function(e){this.formSelect=e,this.asignarRouter("intranet.configuracionMatricula.editarFormulario",e)},asignarRouter:function(e,a){this.$router.push({name:e,params:{id:a}})}},mounted:function(){this.cargarInfo()}};const vi=(0,E.A)(hi,[["render",ui]]);var bi=vi,gi={class:"col bg-white q-pa-sm"},Ci={class:"row"},Oi={class:"col-xs-12 col-md-7 q-pa-sm"},Ai={class:"row q-pa-sm"},Ii={class:"col"},Ei={class:"row q-px-sm"},Di={class:"col"},Ti={class:"row q-px-sm"},Si={class:"col1"},Ri={class:"col-xs-12 col-md-5 q-pa-sm"},ki={class:"row"},Mi={class:"col"},Ni={class:"row q-px-sm"};function Vi(e,a){var o=(0,l.g2)("q-btn"),t=(0,l.g2)("q-page-sticky"),n=(0,l.g2)("q-input"),r=(0,l.g2)("q-chips-input"),s=(0,l.g2)("sie-editor"),u=(0,l.g2)("q-card"),c=(0,l.g2)("sie-select"),d=(0,l.g2)("q-table"),m=(0,l.g2)("sie-cloud"),f=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",gi,[3===e.acceso?((0,l.uX)(),(0,l.Wv)(t,{key:0,position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{fab:"",round:"",color:"secondary",icon:"send",onClick:e.enviarMensaje},null,8,["onClick"])]}),_:1})):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",Ci,[(0,l.Lk)("div",Oi,[(0,l.bF)(u,{class:"bg-white"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Ai,[(0,l.Lk)("div",Ii,[(0,l.bF)(n,{class:"q-if-outlined",modelValue:e.asunto,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.asunto=a}),"float-label":e.$t("intranet.mensajeria.asunto")},null,8,["modelValue","float-label"])]),(0,l.bF)(o,{class:"q-my-sm",round:"",color:"dark",icon:"paperclip",dense:"",flat:"",onClick:e.abrirAdjuntos},null,8,["onClick"])]),(0,l.Lk)("div",Ei,[(0,l.Lk)("div",Di,[(0,l.bF)(r,{class:"q-if-outlined",modelValue:e.chipAdjuntos,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.chipAdjuntos=a}),readonly:"","float-label":"Adjuntos"},null,8,["modelValue"])])]),(0,l.Lk)("div",Ti,[(0,l.Lk)("div",Si,[(0,l.bF)(s,{modelValue:e.mensajeCorreo,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.mensajeCorreo=a})},null,8,["modelValue"])])])]}),_:1})]),(0,l.Lk)("div",Ri,[(0,l.bF)(u,{class:"bg-white"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ki,[(0,l.Lk)("div",Mi,[(0,l.bF)(c,{class:"col",type:"outlined",modelValue:e.tipoSelect,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.tipoSelect=a}),options:e.tipo,label:"label",val:"value",placeholder:"Tipo de Envío",onInput:a[4]||(a[4]=function(a){return e.seleccionaTipo(e.tipo)})},null,8,["modelValue","options"]),(0,l.Lk)("div",Ni,[(0,l.bF)(c,{class:"col",type:"outlined",modelValue:e.nivel,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.nivel=a}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",onInput:e.filtrarNgs},null,8,["modelValue","options","onInput"]),(0,l.bF)(c,{class:"col",type:"outlined",modelValue:e.grado,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.grado=a}),options:e.gradosTemp[e.nivel],label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado",onInput:e.filtrarNgs},null,8,["modelValue","options","onInput"])]),(0,l.bF)(d,{data:e.infoEstudiantes,style:(0,i.Tr)({"max-height":e.alto}),columns:e.columnas,"row-key":"ALUCOD",color:"secondary",selection:e.selection,selected:e.selected,"onUpdate:selected":a[7]||(a[7]=function(a){return e.selected=a}),loading:e.loading},null,8,["data","style","columns","selection","selected","loading"])])])]}),_:1})]),(0,l.bF)(f,{class:"siedeudas-modal-adjuntos",modelValue:e.modalAdjuntos,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.modalAdjuntos=a}),title:"Adjuntar",header:!0,footer:!0,onSubmit:e.agregarAdjunto},{default:(0,l.k6)(function(){return[(0,l.bF)(m,{modelValue:e.adjuntos,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.adjuntos=a})},null,8,["modelValue"])]}),_:1},8,["modelValue","onSubmit"])])])}var Fi=o(32195),_i={components:{QSelect:b.Si,QToggle:b.c5,QTable:H.A,QTh:b.EJ,QTr:b.qh,QTd:b.Ef,QTableColumns:b.$s,QPageSticky:b._U,QChipsInput:b.XX,sieEditor:B.A,sieSelect:C.A,sieInfo:A["default"],sieCloud:Fi.A,sieModal:Z.A,QBtn:b.Il,QCard:b.C$,QInput:b.ie},data:function(){return{acceso:(0,A["default"])().ruta.nivel,asunto:null,chipAdjuntos:[],mensajeCorreo:null,infoEstudiantes:[],preInfoEstudiantes:[],loading:!1,modalAdjuntos:!1,adjuntos:[],selected:[],alto:"0px",selection:"multiple",tipoSelect:null,columnas:[{name:"NOMCOMP",label:this.$t("intranet.estudiante"),field:"NOMCOMP",align:"left",sortable:!0}],tipo:[{label:"Alumnos con pagos realizados y No matriculados",value:1}],niveles:[],gradosTemp:{},seccionesTemp:[],nivel:"T",grado:"T",seccion:"T"}},props:["anoMat","configuracion"],methods:{isLess:function(){return(0,Ta.isLess)()},abrirAdjuntos:function(){this.modalAdjuntos=!0},agregarAdjunto:function(){var e=this;(0,ci["default"])(this.adjuntos,function(a){e.chipAdjuntos.push(a.name)}),this.modalAdjuntos=!1},handleResize:function(){this.alto=window.innerHeight-250+"px"},seleccionaTipo:function(e){var a=this;this.loading=!0;var o=null;switch(e){case 1:o=J.$http.get("api/HyoMatriculaparametros/obtFamilasSinDeudas",{params:{ano:this.anoMat}});break}o&&o.then(function(e){var o=e.json;a.loading=!1,a.preInfoEstudiantes=o,a.filtrarNgs()})},enviarMensaje:function(){var e=this;if(this.asunto&&""!==this.asunto)if(this.mensajeCorreo&&""!==this.mensajeCorreo)if(0===this.selected.length)(0,z["default"])("Debe seleccionar al menos un destinatario","warning");else{this.$q.loading.show();var a={adjunto:this.adjuntos,asunto:this.asunto,contenido:this.mensajeCorreo,destinatario:this.selected};J.$http.post("api/HyoMatricula/enviarMensajeGeneral",a).then(function(a){var o=a.json;e.$q.loading.hide(),(0,z["default"])(e.$t("mensajes."+o.message),o.type),"sucess"===o.type&&(e.selected=[],e.adjuntos=[],e.asunto=null,e.mensajeCorreo=null)})}else(0,z["default"])("Debe colocar el mensaje","warning");else(0,z["default"])("Debe colocar el asunto","warning")},filtrarNgs:function(){var e=this;if("T"!==this.nivel){this.infoEstudiantes=[];var a=0;this.preInfoEstudiantes.forEach(function(o){a=0,(o.INSTRUCOD!==e.nivel||"T"!==e.grado&&o.GRADOCOD!==e.grado)&&(a=1),0===a&&e.infoEstudiantes.push(o)})}else this.infoEstudiantes=this.preInfoEstudiantes}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){var e=this;this.seleccionaTipo(1),this.handleResize(),J.$http.get("api/HyoInstrus/obtInstru").then(function(a){var o=a.json;o.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=o}),J.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:!0,todos:"T"}}).then(function(a){var o=a.json;e.gradosTemp=o})}};const yi=(0,E.A)(_i,[["render",Vi]]);var Pi=yi,Li=o(31497),Ui=o(13526),$i=o(25654),qi={class:"col q-card"},wi={class:"col q-ma-xs"},Qi={class:"col row justify-end q-ma-xs"},ji={class:"q-table q-table-horizontal-separator q-card"},xi={key:0},Xi={class:"col justify-center"},Gi={class:"col justify-center"},Hi={class:"col justify-center"},Bi={class:"col justify-center"},zi={key:1},Wi={key:0,style:{"text-align":"center"}},Ki={key:1};function Ji(e,a){var o=(0,l.g2)("q-select"),t=(0,l.g2)("q-field"),n=(0,l.g2)("q-input"),r=(0,l.g2)("sie-modal"),s=(0,l.g2)("q-btn"),u=(0,l.g2)("q-icon"),c=(0,l.g2)("q-popup-edit"),d=(0,l.g2)("draggable");return(0,l.uX)(),(0,l.CE)("div",qi,[(0,l.bF)(r,{modelValue:e.modalNvAutorizacion,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.modalNvAutorizacion=a}),title:"Nueva Autorización",onSubmit:e.grabarAutorizacion},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",wi,[(0,l.bF)(t,{error:e.v$.nvAut.tipo.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"q-if-outlined",options:e.tipoAceptacion,modelValue:e.v$.nvAut.tipo.$model,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.v$.nvAut.tipo.$model=a}),"float-label":e.$t("tipo")},null,8,["options","modelValue","float-label"])]}),_:1},8,["error","error-label"]),(0,l.bF)(t,{error:e.v$.nvAut.descripcion.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{class:"q-if-outlined",modelValue:e.v$.nvAut.descripcion.$model,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.v$.nvAut.descripcion.$model=a}),type:"textarea","float-label":e.$t("matricula.descripcion")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])]}),_:1},8,["modelValue","onSubmit"]),(0,l.Lk)("div",Qi,[e.permiso>1?((0,l.uX)(),(0,l.Wv)(s,{key:0,icon:"add",flat:"",dense:"",round:"",onClick:e.abrirModal},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("table",ji,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[e.permiso>2?((0,l.uX)(),(0,l.CE)("th",xi,[(0,l.Lk)("div",Xi,[(0,l.bF)(u,{name:"import_export"})])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("th",null,[(0,l.Lk)("div",Gi,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("matricula.descripcion")),1)])]),(0,l.Lk)("th",null,[(0,l.Lk)("div",Hi,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("matricula.activo")),1)])]),(0,l.Lk)("th",null,[(0,l.Lk)("div",Bi,[(0,l.Lk)("span",null,(0,i.v_)(e.$t("tipo")),1)])]),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",zi)):(0,l.Q3)("v-if",!0)])]),(0,l.bF)(d,{modelValue:e.listaAutorizaciones,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.listaAutorizaciones=a}),tag:"tbody",onChange:e.ordenarAutorizaciones},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.listaAutorizaciones,function(a,t){return(0,l.uX)(),(0,l.CE)("tr",null,[e.permiso>2?((0,l.uX)(),(0,l.CE)("td",Wi,[(0,l.bF)(u,{name:"blur_on",size:"20px"})])):(0,l.Q3)("v-if",!0),(0,l.Lk)("td",null,[(0,l.Lk)("span",null,(0,i.v_)(a.DESCRIPCION),1),e.permiso>2?((0,l.uX)(),(0,l.Wv)(c,{key:0,modelValue:a.DESCRIPCION,"onUpdate:modelValue":function(e){return a.DESCRIPCION=e},onSave:function(o){return e.editarInformacion(a.ID,"DESCRIPCION",a.DESCRIPCION)},buttons:""},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{modelValue:a.DESCRIPCION,"onUpdate:modelValue":function(e){return a.DESCRIPCION=e},type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("td",null,[(0,l.bF)(o,{options:e.siNo,modelValue:a.ESTADO,"onUpdate:modelValue":function(e){return a.ESTADO=e},disable:e.permiso<=2,onInput:function(o){return e.editarInformacion(a.ID,"ESTADO",a.ESTADO)}},null,8,["options","modelValue","onUpdate:modelValue","disable","onInput"])]),(0,l.Lk)("td",null,[(0,l.bF)(o,{options:e.tipoAceptacion,modelValue:a.TIPO,"onUpdate:modelValue":function(e){return a.TIPO=e},disable:e.permiso<=2,onInput:function(o){return e.editarInformacion(a.ID,"TIPO",a.TIPO)}},null,8,["options","modelValue","onUpdate:modelValue","disable","onInput"])]),e.permiso>2?((0,l.uX)(),(0,l.CE)("th",Ki,[(0,l.bF)(s,{icon:"delete",flat:"",dense:"",round:"",onClick:function(o){return e.deleteAutorizacion(a.ID)}},null,8,["onClick"])])):(0,l.Q3)("v-if",!0)])}),256))]}),_:1},8,["modelValue","onChange"])])])}var Yi=Be.Hi,Zi={setup:function(){var e=(0,v.fG)();return{v$:e}},components:{QSelect:b.Si,QToggle:b.c5,sieEditor:B.A,QPageSticky:b._U,draggable:Yi,QPopupEdit:b.GT,SieModal:Z.A,QTable:H.A,QField:b.Om,QInput:b.ie,QBtn:b.Il,QIcon:b.bP},data:function(){return{sie:(0,A["default"])(),permiso:(0,A["default"])().ruta.nivel,listaAutorizaciones:[],siNo:[{label:"Si",value:"S"},{label:"No",value:"N"}],tipoAceptacion:[{value:1,label:"ABIERTO"},{value:0,label:"CERRADO"}],modalNvAutorizacion:!1,nvAut:{tipo:0,descripcion:null,orden:1,estado:"S"}}},props:["anoMat","configuracion"],methods:{abrirModal:function(){this.modalNvAutorizacion=!0,this.nvAut={tipo:0,descripcion:null,orden:this.listaAutorizaciones.length+1,estado:"S"}},grabarAutorizacion:function(){var e=this;this.v$.$touch(),this.v$.$invalid||J.$http.post("api/HyoMatriculaautorizaciones/grabaAutorizaciones",{graba:this.nvAut}).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.mensaje),o.type),"success"===o.type&&(e.modalNvAutorizacion=!1,e.cargaInicial())})},ordenarAutorizaciones:function(){var e=this;if(!(this.permiso>2))return!1;var a=[];this.listaAutorizaciones.forEach(function(e,o){e.ORDEN!==o+1&&a.push({id:e.ID,campo:"ORDEN",valor:o+1})}),a.length>0&&J.$http.get("api/HyoMatriculaautorizaciones/updateOrden",{params:{arrOrden:a}}).then(function(a){var o=a.json;(0,z["default"])(e.$t("mensajes."+o.message),o.type),"m0001"===o.message&&e.cargaInicial()})},cargaInicial:function(){var e=this;J.$http.get("api/HyoMatriculaautorizaciones/obtAutorizaciones").then(function(a){var o=a.json;e.listaAutorizaciones=o})},editarInformacion:function(e,a,o){var t=this;this.permiso>2&&J.$http.get("api/HyoMatriculaautorizaciones/updateInformacion",{params:{id:e,campo:a,valor:o}}).then(function(e){var a=e.json;(0,z["default"])(t.$t("mensajes."+a.message),a.type),"m0001"===a.message&&t.cargaInicial()})},deleteAutorizacion:function(e){var a=this;(0,ee.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010")}).then(function(o){o&&J.$http.post("api/HyoMatriculaautorizaciones/eliminaAutorizacion",{ID:e}).then(function(e){var o=e.json;(0,z["default"])(a.$t("mensajes."+o.mensaje),o.type),"success"===o.type&&a.cargaInicial()})})}},validations:function(){var e={nvAut:{tipo:{required:Ia.mw},descripcion:{required:Ia.mw},orden:{required:Ia.mw},estado:{required:Ia.mw}}};return e},mounted:function(){this.cargaInicial()}};const er=(0,E.A)(Zi,[["render",Ji]]);var ar=er,or={class:"row q-px-sm q-pt-sm"},tr={class:"row col"},nr={class:"col-xs-12 col-md-4"},lr={class:"col-xs-6 col-md-4"},ir={class:"col-xs-6 col-md-4"},rr={class:"column col scroll-y"},sr={class:"row"},ur={class:"col-md-7 col-xs-12 q-pa-xs"},cr={class:"col"},dr={class:"text-bold q-body-1"},mr={class:"col-md-5 col-xs-12 q-pa-xs"},fr={class:"col"},pr={class:"text-bold q-body-1"};function hr(e,a){var o=(0,l.g2)("ordenar"),t=(0,l.g2)("sie-modal"),n=(0,l.g2)("q-input"),r=(0,l.g2)("q-select"),s=(0,l.g2)("q-btn"),u=(0,l.g2)("q-td"),c=(0,l.g2)("q-field"),d=(0,l.g2)("q-popup-edit"),m=(0,l.g2)("q-tr"),f=(0,l.g2)("q-table"),p=(0,l.g2)("q-card"),h=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(h,{class:"ficha bg-white"},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{class:"intranet--matricula--ordenar",modelValue:e.modalOrden,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.modalOrden=a}),footer:!1,title:"Ordenar Fichas"},{default:(0,l.k6)(function(){return[(0,l.bF)(o)]}),_:1},8,["modelValue"]),(0,l.Lk)("div",or,[(0,l.Lk)("div",tr,[(0,l.Lk)("div",nr,[(0,l.bF)(n,{class:"q-if-outlined",modelValue:e.cbusca,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.cbusca=a}),"float-label":e.$t("campo")},null,8,["modelValue","float-label"])]),(0,l.Lk)("div",lr,[(0,l.bF)(r,{class:"q-if-outlined",modelValue:e.filtroCampo,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.filtroCampo=a}),options:e.filtroCampos,"float-label":e.$t("matricula.fichas")},null,8,["modelValue","options","float-label"])]),(0,l.Lk)("div",ir,[(0,l.bF)(r,{class:"q-if-outlined",modelValue:e.filtroEstado,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.filtroEstado=a}),options:e.listEstados,"float-label":e.$t("acceso")},null,8,["modelValue","options","float-label"])])]),e.verOrdenar?((0,l.uX)(),(0,l.Wv)(s,{key:0,flat:"",round:"",icon:"import_export",onClick:a[4]||(a[4]=function(a){return e.modalOrden=!0})})):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("div",rr,[(0,l.Lk)("div",sr,[(0,l.Lk)("div",ur,[(0,l.bF)(f,{"table-style":"height: 75vh",pagination:e.paginationTabla,"onUpdate:pagination":a[5]||(a[5]=function(a){return e.paginationTabla=a}),data:e.datosTabla,columns:e.columnsTabla,"row-key":"name",loading:e.loading,"hide-bottom":""},{body:(0,l.k6)(function(a){return[(0,l.bF)(m,{props:a},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{key:"TIPO",props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.TIPO),1)]}),_:2},1032,["props"]),(0,l.bF)(u,{key:"DESCRIPCION",props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.DESCRIPCION),1),(0,l.bF)(d,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e},onSave:function(o){return e.actualizarCampo(a.row,"descripcion")}},{default:(0,l.k6)(function(){return[(0,l.bF)(c,{count:""},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"]),(0,l.bF)(u,{key:"ACCESO",props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.getAcceso(a.row.ACCESO,e.estados)),1),(0,l.bF)(d,{modelValue:a.row.ACCESO,"onUpdate:modelValue":function(e){return a.row.ACCESO=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{modelValue:a.row.ACCESO,"onUpdate:modelValue":function(e){return a.row.ACCESO=e},options:e.estados,onInput:function(o){return e.actualizarCampo(a.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","columns","loading"]),(0,l.bF)(p,{class:"q-pa-md full-width text-right"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",cr,[a[7]||(a[7]=(0,l.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,l.Lk)("span",dr,(0,i.v_)(e.datosTabla.length),1)])]}),_:1})]),(0,l.Lk)("div",mr,[(0,l.bF)(f,{"table-style":"height: 75vh",pagination:e.paginationTablaCAMPOHER,"onUpdate:pagination":a[6]||(a[6]=function(a){return e.paginationTablaCAMPOHER=a}),data:e.datosTablaCAMPOHER,columns:e.columnsTablaCAMPOHER,"row-key":"name",loading:e.loadingCAMPOHER,"hide-bottom":""},{body:(0,l.k6)(function(a){return[(0,l.bF)(m,{props:a},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{key:"DESCRIPCION",props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.DESCRIPCION),1),(0,l.bF)(d,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e},onSave:function(o){return e.actualizarCampo(a.row,"descripcion")}},{default:(0,l.k6)(function(){return[(0,l.bF)(c,{count:""},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{modelValue:a.row.DESCRIPCION,"onUpdate:modelValue":function(e){return a.row.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"]),(0,l.bF)(u,{key:"CAMPOPADDES",props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(a.row.CAMPOPADDES),1)]}),_:2},1032,["props"]),(0,l.bF)(u,{key:"ACCESO",props:a},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.getAcceso(a.row.ACCESO,e.estados)),1),(0,l.bF)(d,{modelValue:a.row.ACCESO,"onUpdate:modelValue":function(e){return a.row.ACCESO=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{modelValue:a.row.ACCESO,"onUpdate:modelValue":function(e){return a.row.ACCESO=e},options:e.estados,onInput:function(o){return e.actualizarCampo(a.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","columns","loading"]),(0,l.bF)(p,{class:"q-pa-md full-width text-right"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",fr,[a[8]||(a[8]=(0,l.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,l.Lk)("span",pr,(0,i.v_)(e.datosTablaCAMPOHER.length),1)])]}),_:1})])])])]}),_:1})}var vr=o(29724),br=Be.Hi,gr={components:{QTable:b.kH,QTh:b.EJ,QTr:b.qh,QTd:b.Ef,QTableColumns:b.$s,QPopupEdit:b.GT,QSelect:b.Si,draggable:br,ordenar:vr.A,sieModal:Z.A,QPage:b.Tu,QInput:b.ie,QBtn:b.Il,QField:b.Om,QCard:b.C$},props:["id"],data:function(){return{verOrdenar:["SIE","SIEWEB"].indexOf((0,A["default"])().usucod)>=0&&(0,A["default"])().ruta.nivel>2,estados:[{label:this.$t("campos.oculto"),value:"4"},{label:this.$t("campos.opcional"),value:"1"},{label:this.$t("campos.obligatorio"),value:"2"},{label:this.$t("campos.bloqueado"),value:"3"},{label:this.$t("campos.opcionalNuevos"),value:"5"},{label:this.$t("campos.obligatorioNuevos"),value:"6"},{label:"Forzado",value:"7"},{label:"Forzado antiguos",value:"8"},{label:"Forzado nuevos",value:"9"}],filtroEstado:"T",modalOrden:!1,filtroCampo:"Todos",cbusca:"",filtroCampos:[],datosTablaCAMPOHERTemp:[],columnsTablaCAMPOHER:[{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0,required:!1},{name:"CAMPOPADDES",label:"Padre",field:"CAMPOPADDES",align:"left",sortable:!0,required:!1},{name:"ACCESO",label:"Acceso",field:"ACCESO",align:"left",sortable:!0,required:!1}],paginationTablaCAMPOHER:{page:1,rowsPerPage:1e3},datosTablaTemp:[],columnsTabla:[{name:"TIPO",label:"FICHAS",field:"TIPO",align:"left",sortable:!0,required:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0,required:!1},{name:"ACCESO",label:"Acceso",field:"ACCESO",align:"left",sortable:!0,required:!1}],paginationTabla:{page:1,rowsPerPage:1e3},loading:!1,loadingCAMPOHER:!1}},computed:{datosTabla:function(){var e=this.datosTablaTemp;return""!==this.cbusca&&(e=(0,K.filterArray)(this.cbusca,{field:"DESCRIPCION",list:e})),"Todos"!==this.filtroCampo&&(e=(0,K.filterArray)(this.filtroCampo,{field:"TIPO",list:e})),"T"!==this.filtroEstado&&(e=(0,K.filterArray)(this.filtroEstado,{field:"ACCESO",list:e})),e},datosTablaCAMPOHER:function(){var e=this.datosTablaCAMPOHERTemp;return""!==this.cbusca&&(e=(0,K.filterArray)(this.cbusca,{field:"DESCRIPCION",list:e})),"Todos"!==this.filtroCampo&&(e=(0,K.filterArray)(this.filtroCampo,{field:"TIPO",list:e})),"T"!==this.filtroEstado&&(e=(0,K.filterArray)(this.filtroEstado,{field:"ACCESO",list:e})),e},listEstados:function(){var e=n()(this.estados);return e.unshift({label:"Todos",value:"T"}),e}},methods:{obtCamposMatricula:function(){var e=this;this.loading=!0,this.loadingCAMPOHER=!0;var a=[],o=[],t={configuracion:"S",opcion:this.id};Promise.all([J.$http.get("api/HyoCamposmatricula/obtCamposMatriculaNew",{params:t}),J.$http.get("api/HyoCamposmatricula/obtTiposCampos")]).then(function(t){var n=[{label:"Todos",value:"Todos"}];(0,ci["default"])(t[1].json,function(e){n.push({label:e.TIPO,value:e.TIPO})}),e.filtroCampos=n,(0,ci["default"])(t[0].json,function(e){e.CAMPOHER?a.push(e):o.push(e)}),(0,ci["default"])(o,function(e,a){e.indice=a}),(0,ci["default"])(a,function(e,a){e.indice=a}),e.datosTablaCAMPOHERTemp=a,e.datosTablaTemp=o,e.loading=!1,e.loadingCAMPOHER=!1})},actualizarCampo:function(e,a){var o=this;if(-1!==["ALUCOD","FAMCOD"].indexOf(e.CAMPO)&&-1===["3","4"].indexOf(e.ACCESO))return(0,z["default"])("No se puede asignar este permiso al campo","warning"),!1;var t={id:e.ID};"descripcion"===a?t.descripcion=e.DESCRIPCION:(t.acceso=e.ACCESO,t.opcion=this.id),J.$http.get("api/HyoCamposmatriculaacceso/actualizarEstado",{params:t}).then(function(e){var a=e.json;(0,z["default"])(o.$t("mensajes."+a.mensaje),"success")}).catch(function(e){(0,z["default"])("Error","warning"),o.obtCamposMatricula()})},getAcceso:function(e,a){var o=a.find(function(a){return a.value===e});return o.label}},watch:{id:function(e){this.obtCamposMatricula()}},created:function(){this.obtCamposMatricula()}};const Cr=(0,E.A)(gr,[["render",hr]]);var Or=Cr,Ar={components:{QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,sieSelect:C.A,parametros:Co,documentos:qa,condiciones:li,matricula:vl.A,fichas:Or,mensaje:Jo,orden:vt,tfichas:hl,firmas:Ui.A,documentosEntregados:Li.A,botones:$l,configEncuesta:bi,cfgAutorizaciones:ar,clavesMatricula:Gl,envioMensajes:Pi,resumen:$i.A,asignacion:al.A,QPage:b.Tu},props:["anoMat","configuracion"],data:function(){return{sie:(0,A["default"])(),tabs:["parametros","documentos","matricula","fichas","mensaje","orden"],tabSelect:""}},computed:{isLess:function(){return(0,Ta.isLess)()},tabMap:function(){return{parametros:this.$options.components.parametros,documentos:this.$options.components.documentos,matricula:this.$options.components.matricula,fichas:this.$options.components.fichas,mensaje:this.$options.components.mensaje,orden:this.$options.components.orden,resumen:this.$options.components.resumen,firmas:this.$options.components.firmas,documentosEntregados:this.$options.components.documentosEntregados,cfgAutorizaciones:this.$options.components.cfgAutorizaciones,clavesMatricula:this.$options.components.clavesMatricula,tfichas:this.$options.components.tfichas,botones:this.$options.components.botones,configEncuesta:this.$options.components.configEncuesta,envioMensajes:this.$options.components.envioMensajes}},currentTab:function(){return this.tabMap[this.tabSelect]||null}},methods:{},mounted:function(){var e=this;this.tabSelect="parametros",J.$http.get("api/HyoColegios/obtenerDatosDeColegio").then(function(a){var o=a.json;4===o.SISTEMA&&e.tabs.splice(2,1)}),this.tabs.push("resumen"),this.configuracion.M_SUBIR_FIRMAS&&this.tabs.push("firmas"),this.configuracion.M_SUBIR_PENDIENTES&&!this.configuracion.M_RESERVA_MATRICULA&&this.tabs.push("documentosEntregados"),this.configuracion.M_AUTORIZACIONES&&this.tabs.push("cfgAutorizaciones"),this.configuracion.M_CLAVE_MATRICULA&&this.tabs.push("clavesMatricula"),this.tabs.push("tfichas"),this.configuracion.M_CONF_BOTONES&&this.tabs.push("botones"),this.configuracion.M_ENCUESTA_MATRICULA&&this.tabs.push("configEncuesta"),J.$http.get("api/HyoSistemasWeb/obtEstadoSistemas",{params:{sistemas:["02","26"]}}).then(function(a){var o=a.json;Array.isArray(o)&&o.length>0&&o.forEach(function(a){"1"!==a.EST||e.tabs.find(function(e){return"envioMensajes"===e})||e.tabs.push("envioMensajes")})})}};const Ir=(0,E.A)(Ar,[["render",el]]);var Er=Ir,Dr={class:"col-3 text-bold"},Tr={class:"row col-6"},Sr={class:"row"},Rr={class:"q column"},kr={key:0};function Mr(e,a){var o=(0,l.g2)("q-datetime"),t=(0,l.g2)("q-tooltip"),n=(0,l.g2)("q-btn"),r=(0,l.g2)("q-item-main"),s=(0,l.g2)("q-item");return(0,l.uX)(),(0,l.Wv)(s,null,{default:(0,l.k6)(function(){return[(0,l.bF)(r,{class:"row justify-between items-center"},{default:(0,l.k6)(function(){return[(0,l.Lk)("span",Dr,(0,i.v_)(e.title),1),(0,l.Lk)("div",Tr,[(0,l.bF)(o,{class:"q-if-outlined no-bottom",modelValue:e.startModel,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.startModel=a}),type:"date",format:"DD/MM/YYYY","format-model":"date","float-label":e.$t("fechainicio")},null,8,["modelValue","float-label"]),(0,l.bF)(o,{class:"q-if-outlined no-bottom",modelValue:e.endModel,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.endModel=a}),type:"date",format:"DD/MM/YYYY","format-model":"date","float-label":e.$t("fechafin")},null,8,["modelValue","float-label"])]),(0,l.Lk)("div",Sr,[e.isGrados?((0,l.uX)(),(0,l.Wv)(n,{key:0,flat:"",round:"",icon:"format_list_bulleted",onClick:a[2]||(a[2]=function(a){return e.agregarFechas(e.id)})},{default:(0,l.k6)(function(){return[(0,l.bF)(t,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Rr,[a[4]||(a[4]=(0,l.Lk)("div",{class:"text-bold"},"Listado de Salones",-1)),e.salonesDet[e.matfecha]&&e.salonesDet[e.matfecha].length>0?((0,l.uX)(),(0,l.CE)("span",kr,(0,i.v_)(e.salonesDet[e.matfecha][0].NGS),1)):(0,l.Q3)("v-if",!0)])]}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0),(0,l.bF)(n,{flat:"",round:"",icon:"delete",onClick:a[3]||(a[3]=function(a){return e.eliminarRegistro(e.id)})})])]}),_:1})]}),_:1})}var Nr={emits:["eliminar","fechas","update:start","update:end"],components:{QTable:b.kH,QTr:b.qh,QTd:b.Ef,QTooltip:b.nC,QLayoutHeader:b.t1,QToolbar:b.ZV,QCard:b.C$,QDatetime:b.T5,QItemMain:b.mF,QItemTile:b.lp,sieModal:Z.A,QItem:b.H0,QBtn:b.Il},props:{isGrados:{type:Boolean},id:{type:Number},start:{type:Date},end:{type:Date},title:{type:String},access:{type:Boolean},salonesDet:{type:Object},matfecha:{type:Number}},methods:{eliminarRegistro:function(e){this.access&&this.$emit("eliminar",e)},agregarFechas:function(e){this.$emit("fechas",e)}},computed:{startModel:{get:function(){return this.start},set:function(e){this.$emit("update:start",e)}},endModel:{get:function(){return this.end},set:function(e){this.$emit("update:end",e)}}}};const Vr=(0,E.A)(Nr,[["render",Mr]]);var Fr=Vr;function _r(e,a){var o=(0,l.g2)("q-list-header"),t=(0,l.g2)("q-list"),i=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(i,{modelValue:e.abrir,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.abrir=a}),title:"Configuracion de Matricula"},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{highlight:""},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"row","q-toolbar":""},{default:(0,l.k6)(function(){return n()(a[1]||(a[1]=[(0,l.Lk)("span",null,"Parametro",-1),(0,l.Lk)("span",null,"Estado",-1)]))}),_:1})]}),_:1})]}),_:1},8,["modelValue"])}var yr={components:{QToolbar:b.ZV,QList:b.Mb,sieModal:Z.A,QListHeader:b.XR,QItem:b.H0,QItemSide:b.n1,QItemTile:b.lp,QItemMain:b.mF,QTooltip:b.nC},props:["ano"],data:function(){return{sie:(0,A["default"])(),listaAnos:[],abrir:!0,configuracion:[]}},mounted:function(){}};const Pr=(0,E.A)(yr,[["render",_r]]);var Lr=Pr,Ur={setup:function(){var e=(0,v.fG)();return{v$:e}},components:{general:T,sieSelect:C.A,QCard:b.C$,QList:b.Mb,QListHeader:b.XR,QDatetime:b.T5,QPageSticky:b._U,QFab:b.l6,QFabAction:b.B$,sieModal:Z.A,QPopover:b.VM,filaFecha:Fr,dialogConfirm:ee.dialogConfirm,QBtnGroup:b.bk,QBtnDropdown:b.B4,QItem:b.H0,QItemSide:b.n1,QItemMain:b.mF,QItemTile:b.lp,modal:Lr,QScrollArea:g.A,creserva:Ut,QSelect:b.Si,cmatricula:Er,cfgTalleres:Zn,documentosEntregados:Li.A,SieTable:kt.A,QPage:b.Tu,QSearch:b.Ks,QToolbar:b.ZV,QBtn:b.Il,QTooltip:b.nC},data:function(){return{sie:(0,A["default"])(),dataAnos:[],titSelect:0,listTitulos:[],anoMatricula:"",accesoConfig:3===(0,A["default"])().ruta.nivel&&["SIE","SIEWEB"].indexOf((0,A["default"])().usucod)>=0,accesoElimniar:3===(0,A["default"])().ruta.nivel,listaFechas:[],modalAgregar:!1,procesoTipo:[],procesoBloqueado:[],listaConfiguracion:[],listaConfiguracionFinal:[],modalAbierto:!1,salonesDet:{},configuracion:{},combos:{grillasCombos:[{label:"Texto",value:0},{label:"Grillas",value:1}],siNo:[{label:"Si",value:1},{label:"No",value:0}],cierreFinal:[{label:"No",value:0},{label:"Final",value:1},{label:"Cierre",value:2}],estadoMatricula:[{label:"Matriculado",value:0},{label:"Pre Matriculado",value:1},{label:"En Proceso",value:2},{label:"Por Ratificar",value:3}],relacionNiveles:[{label:"Ninguno",value:0},{label:"Inicial",value:1},{label:"Primaria",value:2},{label:"Secundaria",value:3},{label:"Inicial - Primaria",value:4},{label:"Inicial - Secundaria",value:5},{label:"Primaria - Secundaria",value:6},{label:"Todos",value:7}],smsConfig:[{label:"No",value:0},{label:"Por Familia",value:1},{label:"Por Alumno",value:2}],estadoCondiciones:[{label:"Pendiente",value:2},{label:"Aprobado",value:4}],noDocumentos:[{label:"No",value:0},{label:"Por documento",value:1},{label:"En bloque",value:2}],familiaResponsable:[{label:"No",value:0},{label:"Responsable",value:1},{label:"Padres",value:2}],tipoDeuda:[{label:"individual",value:0},{label:"Familiar",value:1}]},configSalones:[{name:"NEMODES",field:"NEMODES",label:this.$t("Salones"),align:"center"}],modalSalones:!1,search:null,configuracionBase:[],configGen:{},configuracionFinal:{},modalFechas:!1,salones:[],salonesBase:[],idSelect:null,loadSalones:{key:"NEMO",values:[]},indexSelect:null}},methods:{filtrar:function(e){e&&e.length>0?this.configuracion=(0,K.filterArray)(e,{field:"PARAM_DESC",list:this.configuracionBase}):this.configuracion=n()(this.configuracionBase)},editFechas:function(e){var a=this;return h()(f()().m(function o(){return f()().w(function(o){while(1)switch(o.n){case 0:if(a.loadSalones.values=[],a.indexSelect=e,a.listaFechas[e].salones){o.n=2;break}return o.n=1,a.$http.get("api/MatriculaFechaSalonController/getListaGeneral",{params:{parametros:{ano:a.anoMatricula,id:a.listaFechas[e].IDMATFECHA}}});case 1:a.salones=o.v,a.salonesBase=[],a.salones.forEach(function(e){var o=e.ID,t=e.INSTRUCOD,n=e.GRADOCOD,l=e.SECCIONCOD,i=e.NEMO;o&&a.salonesBase.push({NEMO:i,INSTRUCOD:t,GRADOCOD:n,SECCIONCOD:l})}),a.salones.forEach(function(e){e.ID&&a.loadSalones.values.push(e.NEMO)}),o.n=3;break;case 2:a.salones=a.listaFechas[e].salones,a.loadSalones.values=a.listaFechas[e].dataSelect.add||[];case 3:a.modalSalones=!0,a.listaFechas[e].IDMATFECHA?a.idSelect=a.listaFechas[e].IDMATFECHA:a.listaFechas[e].salones=a.salones;case 4:return o.a(2)}},o)}))()},saveSalones:function(){var e=this;return h()(f()().m(function a(){var o,t,n,l,i,r,s,u;return f()().w(function(a){while(1)switch(a.p=a.n){case 0:if(o=[],t=[],n=e.$refs.tablaSalones.rowsSelected(),n.length>0&&(n.forEach(function(e){var a=e.ID,t=e.INSTRUCOD,n=e.GRADOCOD,l=e.SECCIONCOD,i=e.NEMO;a||o.push({INSTRUCOD:t,GRADOCOD:n,SECCIONCOD:l,NEMO:i})}),e.salonesBase.length>0&&(l=0,e.salonesBase.forEach(function(e){var a=e.NEMO,o=e.INSTRUCOD,i=e.GRADOCOD,r=e.SECCIONCOD;n.forEach(function(e){a===e.NEMO&&(l=1)}),0===l&&t.push({INSTRUCOD:o,GRADOCOD:i,SECCIONCOD:r})}))),i={add:o,del:t},!(o.length>0||t.length>0)){a.n=8;break}if(!e.idSelect){a.n=6;break}return i.IDMATFECHA=e.idSelect,a.n=1,e.$confirmar("¿Está seguro de guardar esta información?");case 1:if(r=a.v,!r){a.n=5;break}if(!r){a.n=5;break}return a.p=2,a.n=3,e.$http.post("api/MatriculaFechaSalonController/addMatriculaFechaSalon",{data:i});case 3:s=a.v,e.$notify(s),e.modalSalones=!1,a.n=5;break;case 4:a.p=4,u=a.v,e.$notify(u,"error");case 5:a.n=7;break;case 6:e.listaFechas[e.indexSelect].dataSelect=i,e.modalSalones=!1;case 7:a.n=9;break;case 8:e.notify("No hay cambios por realizar","error");case 9:return a.a(2)}},a,null,[[2,4]])}))()},abrirModal:function(){var e=this;this.modalAbierto=!0,this.search=null,J.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:this.anoMatricula}}).then(function(a){var o=a.json;e.configuracionBase=o,e.filtrar()})},seleccionaTitulo:function(e){this.titSelect=e.valor},cambiarAno:function(e){var a=this;return h()(f()().m(function o(){var t,n,l;return f()().w(function(o){while(1)switch(o.n){case 0:return console.log({ano:e,agrupado:!0}),o.n=1,J.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:e,agrupado:!0}});case 1:if(t=o.v,!t.json.M_GRADOS){o.n=3;break}return n={ano:e},o.n=2,a.$http.get("api/MatriculaFechaSalonController/getMatriculaFechaSalon",{params:{parametros:n}});case 2:a.salonesDet=o.v;case 3:return o.n=4,J.$http.get("api/MatriculaFechaController/getFechas",{params:{ano:e}});case 4:l=o.v,a.configGen=t.json,a.configuracionFinal=t.json,a.listTitulos=l.opciones,a.listaConfiguracion=l.config,a.listaConfiguracionFinal=(0,K.filterArray)(!0,{field:"estado",list:l.opciones}),a.procesoBloqueado=l.bloqueados,a.configuracionFinal.M_SUBIR_PENDIENTES&&a.configuracionFinal.M_RESERVA_MATRICULA&&a.listaConfiguracionFinal.splice(1,0,{estado:!0,icono:"pencil_square",titulo:"matricula.documentosEntregados",valor:"documentosEntregados"}),l.fechas.forEach(function(e){e.FH_INICIO=new Date(e.FH_INICIO),e.FH_FIN=new Date(e.FH_FIN)}),a.listaFechas=l.fechas,a.seleccionaTitulo(a.listaConfiguracionFinal[0]),console.log(a.listaConfiguracionFinal);case 5:return o.a(2)}},o)}))()},validarSeleccionados:function(){var e=this;this.procesoBloqueado=[],this.listaFechas.forEach(function(a){1===a.IDMATTIPO?e.procesoBloqueado.push(a.IDMATTIPO):5!==a.IDMATTIPO||e.configuracionFinal.M_GRADOS?1===a.IDMATTIPO||e.configuracionFinal.M_GRADOS||e.procesoBloqueado.push(5):(e.procesoBloqueado.push(2),e.procesoBloqueado.push(3),e.procesoBloqueado.push(4),e.procesoBloqueado.push(7))})},eliminarRegistro:function(e){var a=this;this.listaFechas[e].IDMATFECHA?(0,ee.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010"),ok:this.$t("botones.si"),cancel:this.$t("botones.no")}).then(function(o){if(o){var t={parametros:{IDMATFECHA:a.listaFechas[e].IDMATFECHA}};J.$http.get("api/HyoMatriculafecha/eliminaFecha",{params:t}).then(function(e){var o=e.json;(0,ee.dialogConfirm)({title:a.$t("mensajes."+o.mensaje),ok:a.$t("botones.aceptar"),cancel:!1}).then(function(e){e&&"m0013"===o.mensaje&&a.cambiarAno(a.anoMatricula)})})}}):this.listaFechas.splice(e,1)},agregaParametro:function(e){this.listaFechas.push(e),this.validarSeleccionados()},guardar:function(){var e=this;return h()(f()().m(function a(){var o;return f()().w(function(a){while(1)switch(a.p=a.n){case 0:if(e.v$.$touch(),e.v$.$invalid){a.n=4;break}return console.log(e.listaFechas),e.listaFechas.forEach(function(e){e.salones&&delete e.salones}),a.p=1,a.n=2,e.$http.post("api/MatriculaFechaController/addMatriculaFecha",{ano:e.anoMatricula,filas:e.listaFechas});case 2:o=a.v,e.cambiarAno(e.anoMatricula),console.log(o),a.n=4;break;case 3:a.p=3,a.v;case 4:return a.a(2)}},a,null,[[1,3]])}))()},guardarConfiguracion:function(){var e=this;J.$http.post("api/HyoMatriculaconfiguracion/guardarConfiguracion",{arrConfig:this.configuracion}).then(function(a){var o=a.json;e.modalAbierto=!1,"mensajes.m0001"===o&&e.cambiarAno(e.anoMatricula)})}},created:function(){var e=this;return h()(f()().m(function a(){return f()().w(function(a){while(1)switch(a.n){case 0:J.$http.get("api/HyoMatriculaTipo/traeTipoMatricula").then(function(a){var o=a.json;e.procesoTipo=o}),J.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:e.anoMat,agrupado:!0}}).then(function(){var a=h()(f()().m(function a(o){var t;return f()().w(function(a){while(1)switch(a.n){case 0:t=o.json,e.configuracionFinal=t;case 1:return a.a(2)}},a)}));return function(e){return a.apply(this,arguments)}}()),J.$http.get("api/HyoAnos/obtAnos").then(function(a){var o=a.json;e.dataAnos=o,e.anoMatricula=e.sie.ano.toString(),e.cambiarAno(e.anoMatricula)});case 1:return a.a(2)}},a)}))()},validations:{listaFechas:{required:Ia.mw,$each:{FH_INICIO:{required:Ia.mw},FH_FIN:{required:Ia.mw}}}}};const $r=(0,E.A)(Ur,[["render",d]]);var qr=$r}}]);