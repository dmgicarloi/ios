"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[30673],{30673:function(e,l,o){o.r(l),o.d(l,{default:function(){return T}});var a=o(8445),n=o.n(a),t=o(61758),r={class:"column col q-ma-sm"},i={class:"column full-height q-pa-sm"},s={class:"row justify-end q-gutter-sm q-mt-md"},u={class:"q-ma-sm"},d={class:"q-col-gutter-sm"},c={class:"row q-col-gutter-sm col"},m={class:"row q-col-gutter-sm col"},f={class:"row q-col-gutter-sm col"},p={class:"column q-ma-sm"},E={class:"q-col-gutter-sm"},R={class:"row-md col q-col-gutter-sm"},C={class:"row-md col q-col-gutter-sm"},b={class:"row-md col q-col-gutter-sm"},D={class:"row-md col q-col-gutter-sm"},O={class:"row-md col q-col-gutter-sm"},S={class:"row-md col q-col-gutter-sm"},A={class:"q-card col q-mt-sm q-pa-md"},N={class:"row q-col-gutter-sm"};function V(e,l){var o=(0,t.g2)("header-btn"),a=(0,t.g2)("q-input"),V=(0,t.g2)("q-btn"),P=(0,t.g2)("sie-modal"),g=(0,t.g2)("q-list-header"),h=(0,t.g2)("q-select"),I=(0,t.g2)("sie-table");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(o,{name:"Relación de Pre Interesados"}),(0,t.bF)(P,{modelValue:e.modalComentario,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.modalComentario=l}),title:"Comentario PreInteresado",footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",i,[(0,t.bF)(a,{modelValue:e.datoComentario,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.datoComentario=l}),type:"textarea",label:"Comentario",rows:10},null,8,["modelValue"])]),(0,t.Lk)("div",s,[(0,t.bF)(V,{label:"Cancelar",flat:"",onClick:e.cerrarModalComentario},null,8,["onClick"]),(0,t.bF)(V,{label:"Guardar",color:"primary",onClick:e.guardarComentario},null,8,["onClick"])])]}),_:1},8,["modelValue"]),(0,t.bF)(P,{modelValue:e.modalDetalle,"onUpdate:modelValue":l[21]||(l[21]=function(l){return e.modalDetalle=l}),title:"Detalle de postulacion de "+e.infoDetalle.NOMCOMP,footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",u,[(0,t.bF)(g,{class:"bg-secondary text-white"},{default:(0,t.k6)(function(){return n()(l[24]||(l[24]=[(0,t.eW)("Datos del Postulante",-1)]))}),_:1}),(0,t.Lk)("div",d,[(0,t.Lk)("div",c,[(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.ANO,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.infoDetalle.ANO=l}),readonly:"",label:"Año"},null,8,["modelValue"]),(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.INSTRUDES,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.infoDetalle.INSTRUDES=l}),readonly:"",label:"Nivel"},null,8,["modelValue"]),(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.GRADODES,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.infoDetalle.GRADODES=l}),readonly:"",label:"Grado"},null,8,["modelValue"])]),(0,t.Lk)("div",m,[(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.NOMCOMP,"onUpdate:modelValue":l[5]||(l[5]=function(l){return e.infoDetalle.NOMCOMP=l}),readonly:"",label:"Nombre Completo"},null,8,["modelValue"])]),(0,t.Lk)("div",f,[(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.FECNACCONV,"onUpdate:modelValue":l[6]||(l[6]=function(l){return e.infoDetalle.FECNACCONV=l}),readonly:"",label:"Nombre Completo",type:"date"},null,8,["modelValue"]),(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.COLPROCEDENCIA,"onUpdate:modelValue":l[7]||(l[7]=function(l){return e.infoDetalle.COLPROCEDENCIA=l}),readonly:"",label:"Colegio de procedencia"},null,8,["modelValue"]),(0,t.bF)(h,{class:"col",modelValue:e.infoDetalle.HERMANOS,"onUpdate:modelValue":l[8]||(l[8]=function(l){return e.infoDetalle.HERMANOS=l}),options:e.siNo,label:"Hermanos SANJO",readonly:""},null,8,["modelValue","options"])])]),(0,t.bF)(g,{class:"bg-secondary text-white q-my-sm"},{default:(0,t.k6)(function(){return n()(l[25]||(l[25]=[(0,t.eW)("Datos del Responsable",-1)]))}),_:1}),(0,t.Lk)("div",p,[(0,t.Lk)("div",E,[(0,t.Lk)("div",R,[(0,t.bF)(h,{class:"col",modelValue:e.infoDetalle.RESPPARENTESCO,"onUpdate:modelValue":l[9]||(l[9]=function(l){return e.infoDetalle.RESPPARENTESCO=l}),options:e.parentescos,readonly:"","option-value":"value","option-label":"label",label:"Parentesco"},null,8,["modelValue","options"]),(0,t.bF)(h,{class:"col",options:e.tipoDocumentos,label:"Tipo d. identidad","option-value":"ID_TIPODOC","option-label":"ABREVIATURA",modelValue:e.infoDetalle.RESPTIPDOC,"onUpdate:modelValue":l[10]||(l[10]=function(l){return e.infoDetalle.RESPTIPDOC=l})},null,8,["options","modelValue"]),(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.RESPNUMDOC,"onUpdate:modelValue":l[11]||(l[11]=function(l){return e.infoDetalle.RESPNUMDOC=l}),label:"Numero d. identidad",readonly:""},null,8,["modelValue"])]),(0,t.Lk)("div",C,[(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.RESPNOMCOMP,"onUpdate:modelValue":l[12]||(l[12]=function(l){return e.infoDetalle.RESPNOMCOMP=l}),label:"Nombres Completos",style:{"text-transform":"uppercase"},readonly:""},null,8,["modelValue"])]),(0,t.Lk)("div",b,[(0,t.bF)(h,{class:"col",modelValue:e.infoDetalle.RESPEXALUMNO,"onUpdate:modelValue":l[13]||(l[13]=function(l){return e.infoDetalle.RESPEXALUMNO=l}),label:"Papás Ex Alumno SJO",readonly:"",options:e.siNo},null,8,["modelValue","options"]),1===e.infoDetalle.RESPEXALUMNO?((0,t.uX)(),(0,t.Wv)(a,{key:0,class:"col",modelValue:e.infoDetalle.RESPANIO_PROMOCION,"onUpdate:modelValue":l[14]||(l[14]=function(l){return e.infoDetalle.RESPANIO_PROMOCION=l}),label:"Año de Promoción",readonly:""},null,8,["modelValue"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",D,[(0,t.bF)(h,{class:"col",readonly:"",modelValue:e.infoDetalle.RESPESREFERIDO,"onUpdate:modelValue":l[15]||(l[15]=function(l){return e.infoDetalle.RESPESREFERIDO=l}),label:"¿Es Recomendado por una familia?",options:e.siNo,"emit-value":""},null,8,["modelValue","options"]),1===e.infoDetalle.RESPESREFERIDO?((0,t.uX)(),(0,t.Wv)(a,{key:0,class:"col",readonly:"",modelValue:e.infoDetalle.RESPFAMREFERENCIA,"onUpdate:modelValue":l[16]||(l[16]=function(l){return e.infoDetalle.RESPFAMREFERENCIA=l}),label:"Familia que le recomienda "},null,8,["modelValue"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",O,[(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.RESPEMAIL1,"onUpdate:modelValue":l[17]||(l[17]=function(l){return e.infoDetalle.RESPEMAIL1=l}),readonly:"",label:"Correo Electrónico (Gmail)"},null,8,["modelValue"]),(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.RESPEMAIL2,"onUpdate:modelValue":l[18]||(l[18]=function(l){return e.infoDetalle.RESPEMAIL2=l}),readonly:"",label:"Correo Electrónico adicional (Gmail)"},null,8,["modelValue"])]),(0,t.Lk)("div",S,[(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.RESPCELULAR1,"onUpdate:modelValue":l[19]||(l[19]=function(l){return e.infoDetalle.RESPCELULAR1=l}),readonly:"",label:"Télefono celular"},null,8,["modelValue"]),(0,t.bF)(a,{class:"col",modelValue:e.infoDetalle.RESPCELULAR2,"onUpdate:modelValue":l[20]||(l[20]=function(l){return e.infoDetalle.RESPCELULAR2=l}),label:"Télefono celular adicional",readonly:""},null,8,["modelValue"])])])])])]}),_:1},8,["modelValue","title"]),(0,t.Lk)("div",A,[(0,t.Lk)("div",N,[(0,t.bF)(a,{class:"col",modelValue:e.inputFilter,"onUpdate:modelValue":l[22]||(l[22]=function(l){return e.inputFilter=l}),onInput:e.init},null,8,["modelValue","onInput"]),(0,t.bF)(h,{class:"col",modelValue:e.anoSelect,"onUpdate:modelValue":l[23]||(l[23]=function(l){return e.anoSelect=l}),options:e.anos,"option-value":"ANO","option-label":"ANO",label:"Año de postulacion"},null,8,["modelValue","options"])]),(0,t.bF)(I,{class:"q-mt-sm q-card",columns:e.columns,data:e.dataRegistrados,context:this,css:{height:"calc(100vh - 180px)"},"show-search":!1,"show-refresh":!0,onRefresh:e.init,config:e.config},null,8,["columns","data","onRefresh","config"])])])}var P=o(76080),g=o.n(P),h=o(45254),I=o.n(h),v=o(6123),F=o(33777),M=o(16648),U=o(9736),L=o(33001),k=o(30640),y={components:{sieTable:F.A,QSelect:M.A,QInput:U.A,QBtn:v.Il,sieModal:k.A,QListHeader:v.XR},data:function(){return{preDataRegistrados:[],dataRegistrados:[],anoSelect:null,inputFilter:null,modalDetalle:!1,infoDetalle:{},modalComentario:!1,datoComentario:"",filaComentario:null,anos:[],tipoDocumentos:[],siNo:[{value:1,label:"Si"},{value:0,label:"No"}],parentescos:[{value:1,label:"Padre"},{value:2,label:"Madre"},{value:2,label:"Apoderado"}],columns:[{name:"ANO",label:"Año",align:"center",field:"ANO"},{name:"NOMCOMP",label:"Postulante",align:"left",field:"NOMCOMP"},{name:"FH_REGISTRO",label:"F. Registro",align:"center",field:"FH_REGISTRO"},{name:"INSTRUDES",label:"Nivel",align:"center",field:"INSTRUDES"},{name:"GRADODES",label:"Grado",align:"center",field:"GRADODES"},{name:"RESPFAMREFERENCIA",label:"Familia que recomienda",align:"left",field:"RESPFAMREFERENCIA"},{name:"COLPROCEDENCIA",label:"Colegio de procedencia",align:"left",field:"COLPROCEDENCIA"},{name:"HERMANOS",label:"Hermanos SANJO",align:"center",field:"HERMANOS"},{name:"RESPEXALUMNO",label:"Papás Ex Alumno SJO",align:"center",field:"RESPEXALUMNO"},{name:"ACTIONS",align:"center",field:"ACTIONS"}]}},computed:{config:function(){return{FH_REGISTRO:{component:"date",edit:!1},HERMANOS:{component:"select",options:this.siNo,edit:!1},RESPEXALUMNO:{component:"select",options:this.siNo,edit:!1},ACTIONS:{component:"button",icon:["info as detalle","import_export as transferir","delete as eliminar","comment as comentario"],validate:{transferir:function(e){return 0===e.TRANSFERIDO},eliminar:function(e){return!0},comentario:function(e){return!0}},detalle:function(e){this.modalDetalle=!0,this.infoDetalle=e},comentario:function(e){this.abrirComentario(e)},transferir:function(e){var l=this;return I()(g()().m(function o(){var a,n,t;return g()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.n=1,l.$confirmar("¿Está seguro de transferir a este pre Interesado?");case 1:if(a=o.v,!a){o.n=7;break}return o.p=2,o.n=3,l.$http.post("api/PreInteresadoController/transferirPreInt",{data:e});case 3:if(n=o.v,l.$notify(n.message),!n.message){o.n=5;break}return o.n=4,l.$http.post("api/PreInteresadoController/updatePreInteresado",{params:{TRANSFERIDO:1},id:e.ID});case 4:l.init();case 5:o.n=7;break;case 6:o.p=6,t=o.v,l.$notify(t.message,"error");case 7:return o.a(2)}},o,null,[[2,6]])}))()},eliminar:function(e){var l=this;return I()(g()().m(function o(){var a,n,t;return g()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.n=1,l.$confirmar("¿Está seguro de eliminar este pre Interesado?");case 1:if(a=o.v,!a){o.n=5;break}return o.p=2,o.n=3,l.$http.delete("api/PreInteresadoController/deletePreInteresado",{params:{data:e}});case 3:n=o.v,l.$notify(n.message),n.message&&l.init(),o.n=5;break;case 4:o.p=4,t=o.v,l.$notify(t.message,"error");case 5:return o.a(2)}},o,null,[[2,4]])}))()}}}}},methods:{init:function(){var e=this;return I()(g()().m(function l(){var o;return g()().w(function(l){while(1)switch(l.n){case 0:return o={},"Todos"!==e.anoSelect&&(o.ANO=e.anoSelect),l.n=1,e.$http.get("api/PreInteresadoController/getPreInteresado",{params:{parametros:o}});case 1:e.preDataRegistrados=l.v,e.filtrar();case 2:return l.a(2)}},l)}))()},filtrar:function(){this.inputFilter&&this.inputFilter.length>0?this.dataRegistrados=(0,L.filterArray)(this.inputFilter,{field:["NOMCOMP","INSTRUDES","GRADODES"],list:this.preDataRegistrados})||[]:this.dataRegistrados=n()(this.preDataRegistrados)},abrirComentario:function(e){this.filaComentario=e,this.datoComentario=e.COMENTARIO||"",this.modalComentario=!0},cerrarModalComentario:function(){this.modalComentario=!1,this.datoComentario="",this.filaComentario=null},guardarComentario:function(){var e=this;return I()(g()().m(function l(){var o,a;return g()().w(function(l){while(1)switch(l.p=l.n){case 0:if(e.filaComentario){l.n=1;break}return l.a(2);case 1:return l.p=1,l.n=2,e.$http.post("api/PreInteresadoController/updatePreInteresado",{params:{COMENTARIO:e.datoComentario},id:e.filaComentario.ID});case 2:if(o=l.v,e.$notify(o.message||"Comentario actualizado"),!o.message){l.n=3;break}return e.cerrarModalComentario(),l.n=3,e.init();case 3:l.n=5;break;case 4:l.p=4,a=l.v,e.$notify(a.message,"error");case 5:return l.a(2)}},l,null,[[1,4]])}))()}},created:function(){var e=this;return I()(g()().m(function l(){var o,a,t;return g()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,e.$http.get("api/PreInteresadosController/getCargaInicial");case 1:o=l.v,a=o.anos,t=o.resTipoDocumentos,e.anos=n()(a),e.tipoDocumentos=n()(t),e.anos.length>1?(e.anos.unshift({ANO:"Todos"}),e.anoSelect="Todos"):e.anoSelect=e.anos[0].ANO,e.init();case 2:return l.a(2)}},l)}))()}},w=o(12807);const q=(0,w.A)(y,[["render",V]]);var T=q}}]);