"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[76528],{76528:function(e,a,n){n.r(a),n.d(a,{default:function(){return Xa}});var o=n(61758);function r(e,a){var n=(0,o.g2)("q-tab"),r=(0,o.g2)("q-tabs"),t=(0,o.g2)("formularioRegistro"),l=(0,o.g2)("q-tab-panel"),i=(0,o.g2)("cronograma"),s=(0,o.g2)("cronogramaProfesor"),u=(0,o.g2)("grupos"),c=(0,o.g2)("asignarGrupoSalon"),d=(0,o.g2)("asignarAlumnosGrupo"),m=(0,o.g2)("q-tab-panels"),f=(0,o.g2)("q-card-section"),g=(0,o.g2)("q-card"),p=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(p,{class:"ficha-sintomatologica q-pa-sm sie-flat"},{default:(0,o.k6)(function(){return[(0,o.bF)(g,null,{default:(0,o.k6)(function(){return[(0,o.bF)(f,null,{default:(0,o.k6)(function(){return[(0,o.bF)(r,{class:"text-teal",align:"left",dense:!0,modelValue:e.tabFicha,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tabFicha=a})},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{class:"text-primary","no-caps":"",name:"ficha",label:"Ficha Sintomatológica"}),(0,o.bF)(n,{class:"text-primary","no-caps":"",name:"cronograma",label:"Cronogramas"}),(0,o.bF)(n,{class:"text-primary","no-caps":"",name:"cronograma_profesor",label:"Cronograma Personal"}),(0,o.bF)(n,{class:"text-primary","no-caps":"",name:"grupos",label:"Grupos"}),(0,o.bF)(n,{class:"text-primary","no-caps":"",name:"grupos_salones",label:"Asociar Grupos a salones"}),(0,o.bF)(n,{class:"text-primary","no-caps":"",name:"grupos_alumnos",label:"Asignar alumnos a grupos"})]}),_:1},8,["modelValue"]),(0,o.bF)(m,{modelValue:e.tabFicha,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.tabFicha=a}),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,o.k6)(function(){return[(0,o.bF)(l,{name:"ficha",style:{height:"calc(100vh - 140px)"}},{default:(0,o.k6)(function(){return[(0,o.bF)(t,{tipo:1})]}),_:1}),(0,o.bF)(l,{name:"cronograma"},{default:(0,o.k6)(function(){return[(0,o.bF)(i)]}),_:1}),(0,o.bF)(l,{name:"cronograma_profesor"},{default:(0,o.k6)(function(){return[(0,o.bF)(s)]}),_:1}),(0,o.bF)(l,{name:"grupos"},{default:(0,o.k6)(function(){return[(0,o.bF)(u)]}),_:1}),(0,o.bF)(l,{name:"grupos_salones"},{default:(0,o.k6)(function(){return[(0,o.bF)(c)]}),_:1}),(0,o.bF)(l,{name:"grupos_alumnos"},{default:(0,o.k6)(function(){return[(0,o.bF)(d)]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})}var t=n(76080),l=n.n(t),i=n(45254),s=n.n(i),u=n(6123),c=n(82327),d=n(26697),m=n(53093),f=n(53811),g=n(43346),p=n(88567),b=n(95718),v=n(11091),h=n(57668),C=n(58790),I={class:"col-12"},F={class:"row q-ma-lg-sm"},A={class:"col-xs-12 col-md-3"},w={class:"col-xs-12 col-md-3"},k={class:"col-xs-12 col-md-2"},S={class:"col-xs-12 col-md-2"},O={class:"col-xs-12 col-md-2"},D={class:"row"},_={class:"col-12"},E={class:"row q-pa-sm q-col-gutter-sm"},G={class:"col-xs-12 col-sm-3"},P={class:"col-xs-12 col-sm-3"},N={class:"col-xs-12 col-sm-3"},L={class:"col-xs-12 col-sm-3"},V={class:"row q-pa-sm q-col-gutter-sm"},R={class:"col-xs-12 col-sm-4"},q={class:"col-xs-12 col-sm-4"},x={class:"col-xs-12 col-sm-4"},M={class:"row q-pa-sm q-col-gutter-sm"},U={class:"col text-center"},H={key:0},y={class:"q-pa-sm q-col-gutter-sm"},Q={class:"row"},T={class:"col col-xs-12 col-md-6 row"},Y={class:"q-pa-lg-sm text-right wdia"};function $(e,a){var n=this,r=(0,o.g2)("header-btn"),t=(0,o.g2)("q-datetime"),l=(0,o.g2)("q-select"),i=(0,o.g2)("sie-table"),s=(0,o.g2)("q-card-section"),u=(0,o.g2)("q-card"),c=(0,o.g2)("modalCronograma"),d=(0,o.g2)("q-spinner-oval"),m=(0,o.g2)("q-inner-loading"),f=(0,o.g2)("q-input"),g=(0,o.g2)("q-btn"),p=(0,o.g2)("q-icon"),b=(0,o.g2)("q-form"),v=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.CE)("div",I,[(0,o.bF)(u,null,{default:(0,o.k6)(function(){return[(0,o.bF)(r,{name:"Cronogramas",buttons:e.buttons},null,8,["buttons"]),(0,o.Lk)("div",F,[(0,o.Lk)("div",A,[(0,o.bF)(t,{class:"q-if-outlined",onInput:e.realizarFiltro,modelValue:e.fechaPaseIni,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.fechaPaseIni=a}),"float-label":"Fecha Inicio",type:"date",format:"DD/MM/YYYY"},null,8,["onInput","modelValue"])]),(0,o.Lk)("div",w,[(0,o.bF)(t,{class:"q-if-outlined",onInput:e.realizarFiltro,modelValue:e.fechaPaseFin,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.fechaPaseFin=a}),"float-label":"Fecha Fin",type:"date",format:"DD/MM/YYYY"},null,8,["onInput","modelValue"])]),(0,o.Lk)("div",k,[(0,o.bF)(l,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.instrucod,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.vmFiltro.instrucod=a}),options:e.niveles,"float-label":e.$t("ngs.nivel"),onInput:e.cambiarNivel},null,8,["modelValue","options","float-label","onInput"])]),(0,o.Lk)("div",S,[(0,o.bF)(l,{class:"q-if-outlined",modelValue:e.vmFiltro.gradocod,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.vmFiltro.gradocod=a}),options:e.grados,"float-label":e.$t("ngs.grado"),onInput:e.cambiarGrado},null,8,["modelValue","options","float-label","onInput"])]),(0,o.Lk)("div",O,[(0,o.bF)(l,{class:"q-if-outlined",modelValue:e.vmFiltro.id_grupo,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.vmFiltro.id_grupo=a}),options:e.grupos,"float-label":e.$t("grupo"),onInput:e.cambiarGrupo},null,8,["modelValue","options","float-label","onInput"])])]),(0,o.bF)(s,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",D,[(0,o.Lk)("div",_,[(0,o.bF)(i,{style:{height:"calc(100vh - 260px)"},data:e.cronograma.data,columns:e.fields,config:e.config,context:n},null,8,["data","columns","config"])])])]}),_:1})]}),_:1}),e.openModal?((0,o.uX)(),(0,o.Wv)(c,{key:0,onCerrarModal:a[5]||(a[5]=function(a){return e.openModal=!1}),onEjecucionModal:e.recargarData},null,8,["onEjecucionModal"])):(0,o.Q3)("v-if",!0),(0,o.bF)(v,{class:"modal-cronograma-brae",modelValue:e.openModalEdit,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.openModalEdit=a}),title:"Cronograma de ingreso al colegio",footer:!1},{default:(0,o.k6)(function(){return[(0,o.bF)(m,{visible:e.loadingModal},{default:(0,o.k6)(function(){return[(0,o.bF)(d,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,o.bF)(b,{ref:"form"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",E,[(0,o.Lk)("div",G,[(0,o.bF)(f,{modelValue:e.frm.INSTRUDES,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.frm.INSTRUDES=a}),label:"Nivel",disable:""},null,8,["modelValue"])]),(0,o.Lk)("div",P,[(0,o.bF)(f,{modelValue:e.frm.GRADODES,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.frm.GRADODES=a}),label:"Grado",disable:""},null,8,["modelValue"])]),(0,o.Lk)("div",N,[(0,o.bF)(f,{modelValue:e.frm.SECCIONCOD,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.frm.SECCIONCOD=a}),label:"Sección",disable:""},null,8,["modelValue"])]),(0,o.Lk)("div",L,[(0,o.bF)(f,{modelValue:e.frm.GRUPO,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.frm.GRUPO=a}),label:"Grupo",disable:""},null,8,["modelValue"])])]),(0,o.Lk)("div",V,[(0,o.Lk)("div",R,[(0,o.bF)(t,{class:"q-if-outlined",modelValue:e.frm.FH_PASE,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.frm.FH_PASE=a}),label:"Ingreso al colegio","float-label":"Ingreso al colegio",type:"datetime",format:"DD/MM/YYYY HH:mm",rules:[function(e){return null!==e&&""!==e||"Indique la fecha de pase"}]},null,8,["modelValue","rules"])]),(0,o.Lk)("div",q,[(0,o.bF)(t,{class:"q-if-outlined",modelValue:e.frm.FH_INICIO,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.frm.FH_INICIO=a}),label:"Inicio de registro","float-label":"Inicio de registro",type:"datetime",format:"DD/MM/YYYY HH:mm",rules:[function(e){return null!==e&&""!==e||"Indique la fecha para iniciar el registro"}]},null,8,["modelValue","rules"])]),(0,o.Lk)("div",x,[(0,o.bF)(t,{class:"q-if-outlined",modelValue:e.frm.FH_CIERRE,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.frm.FH_CIERRE=a}),label:"Cierre de registro","float-label":"Cierre de registro",type:"datetime",format:"DD/MM/YYYY HH:mm",rules:[function(e){return null!==e&&""!==e||"Indique la fecha para finalizar el registro"}]},null,8,["modelValue","rules"])])]),(0,o.Lk)("div",M,[(0,o.Lk)("div",U,[e.sie.ruta.nivel>1?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"q-mr-lg-sm bg-primary text-white",label:e.$t("botones.guardar"),"no-caps":"",flat:"",onClick:e.grabarCronograma},null,8,["label","onClick"])):(0,o.Q3)("v-if",!0)])]),e.fechasExtra.length>0?((0,o.uX)(),(0,o.CE)("div",H,[a[14]||(a[14]=(0,o.Lk)("hr",null,null,-1)),a[15]||(a[15]=(0,o.Lk)("div",{class:"q-ma-lg-sm q-px-sm text-deep-purple-14"},[(0,o.Lk)("div",{class:"col self-center"},[(0,o.Lk)("div",null,[(0,o.eW)("La Ficha Sintomatológica será válida "),(0,o.Lk)("b",null," también "),(0,o.eW)(" para los siguientes día(s):")])])],-1)),(0,o.Lk)("div",y,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fechasExtra,function(a,n){return(0,o.uX)(),(0,o.CE)("div",Q,[(0,o.Lk)("div",T,[(0,o.Lk)("div",Y,(0,C.v_)(e.nameDayShort(a.FH_PASE)),1),(0,o.bF)(t,{class:"col q-if-outlined",modelValue:a.FH_PASE,"onUpdate:modelValue":function(e){return a.FH_PASE=e},"float-label":"Ingreso al colegio",type:"datetime",format:"DD/MM/YYYY HH:mm"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.bF)(p,{class:"cursor-pointer q-ml-sm",name:"save",size:"18px",color:"primary",onClick:function(n){return e.guardarFecha(a)}},null,8,["onClick"]),(0,o.bF)(p,{class:"cursor-pointer q-ml-sm",name:"delete",size:"18px",color:"primary",onClick:function(o){return e.eliminarFecha(a,n)}},null,8,["onClick"])])])}),256))])])):(0,o.Q3)("v-if",!0)]}),_:1},512)]}),_:1},8,["modelValue"])])}n(52133),n(89571),n(50310),n(6724),n(83190);var X=n(9736),z=n(80660),W={getFrm:function(e,a){var n={};return n=e||{ID_CRONOGRAMA:"",ANO:a.ano,INSTRUCOD:"T",GRADOCOD:"T",SECCIONCOD:"T",FH_PASE:"",FH_INICIO:"",FH_CIERRE:"",USUCOD:a.usucod},n},getCronogramas:function(e){return z.$http.get("api/FichaSintomatologica/getCronogramas",{params:{data:e}})},getCronogramaFechas:function(e){return z.$http.get("api/CovidCronograma/getDetalleFechas",{params:{idCronograma:e}})},getNiveles:function(){return z.$http.get("api/HyoInstrus/obtInstru")},getGrados:function(e){return z.$http.get("api/HyoGradoNivs/obtGrados",{params:e})},getSecciones:function(e){return z.$http.get("api/HyoSalones/obtSecciones",{params:e})},saveCronograma:function(e){return z.$http.post("api/FichaSintomatologica/saveCronograma",e)},deleteCronograma:function(e){return z.$http.post("api/FichaSintomatologica/deleteCronograma",e)}},j=n(30545),B=n(30640),K=n(93616),J=n(65229),Z=n(81288),ee=n(2739),ae=n(982),ne=n(69027),oe={data:function(){return{config:{FH_PASE:{component:"datetime",edit:!1},FH_PASE_CIERRE:{component:"datetime",edit:!1},FH_INICIO:{component:"datetime",edit:!1},FH_CIERRE:{component:"datetime",edit:!1},ACCION:{component:"button",icon:["edit as editar","delete"],permisos:{editar:"> 1",delete:"=== 3"},editar:function(e){var a=this;return s()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:a.editar(e);case 1:return n.a(2)}},n)}))()},delete:function(e){this.eliminar(e)},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"INSTRUDES",label:"Nivel",field:"INSTRUDES",align:"left",sortable:!0},{name:"GRADODES",label:"Grado",field:"GRADODES",align:"left",sortable:!0},{name:"SECCIONCOD",label:"Sección",field:"SECCIONCOD",align:"left",sortable:!0},{name:"GRUPO",label:"Grupo",field:"GRUPO",align:"left",sortable:!0},{name:"TOT_DIAS",label:"Días F.S",field:"TOT_DIAS",align:"center",sortable:!0},{name:"FH_PASE",label:"Ingreso al colegio (Inicio)",field:"FH_PASE",align:"left",sortable:!0},{name:"FH_PASE_CIERRE",label:"Ingreso al colegio (Fin)",field:"FH_PASE_CIERRE",align:"left",sortable:!0},{name:"FH_INICIO",label:"Inicio de registro",field:"FH_INICIO",align:"left",sortable:!0},{name:"FH_CIERRE",label:"Cierre de registro",field:"FH_CIERRE",align:"left",sortable:!0},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:70}]}}},re=n(45341),te=n(8445),le=n.n(te),ie=n(29104),se={class:"row q-ma-lg-sm q-px-sm text-weight-bold text-info"},ue={class:"col-auto flex-center"},ce={class:"row q-ma-lg-sm"},de={class:"col-md-3"},me={class:"col-md-3"},fe={class:"col-md-3"},ge={class:"col-md-3"},pe={class:"q-ma-lg-sm"},be={class:"col-12"},ve={class:"row"},he={class:"col col-md-5 row"},Ce={class:"q-pa-lg-sm text-right wdia"},Ie={class:"row"},Fe={class:"col text-center"},Ae={class:"row q-ma-lg-sm"},we={class:"col"},ke={class:"row"},Se={class:"col-xs-12 col-md-4"},Oe={class:"col-xs-12 col-md-4"},De={class:"col-xs-12 col-md-4"},_e={class:"row"},Ee={class:"col q-ma-sm"},Ge={key:0};function Pe(e,a){var n=(0,o.g2)("q-icon"),r=(0,o.g2)("q-datetime"),t=(0,o.g2)("q-btn"),l=(0,o.g2)("q-select"),i=(0,o.g2)("q-spinner-oval"),s=(0,o.g2)("q-td"),u=(0,o.g2)("q-table"),c=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.Wv)(c,{class:"modalCronogramaFechas",modelValue:e.verModal,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.verModal=a}),title:"Cronograma de ingreso al colegio",footer:!1,header:!0,onClose:e.cerrarModal},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",se,[(0,o.Lk)("div",ue,[(0,o.bF)(n,{class:"q-mr-sm",name:"info",size:"28px"})]),a[10]||(a[10]=(0,o.Lk)("div",{class:"col self-center"},[(0,o.Lk)("div",null,"Seleccionar los salones para actualizar los datos")],-1))]),(0,o.Lk)("div",ce,[(0,o.Lk)("div",de,[(0,o.bF)(r,{class:"q-if-outlined",modelValue:e.fechaPase,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.fechaPase=a}),"float-label":"Ingreso al colegio",type:"datetime",format:"DD/MM/YYYY HH:mm",disable:e.loading},null,8,["modelValue","disable"])]),(0,o.Lk)("div",me,[(0,o.bF)(r,{class:"q-if-outlined",modelValue:e.fechaIni,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.fechaIni=a}),"float-label":"Inicio de registro",type:"datetime",format:"DD/MM/YYYY HH:mm",disable:e.loading},null,8,["modelValue","disable"])]),(0,o.Lk)("div",fe,[(0,o.bF)(r,{class:"q-if-outlined",modelValue:e.fechaFin,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.fechaFin=a}),"float-label":"Cierre de registro",type:"datetime",format:"DD/MM/YYYY HH:mm",disable:e.loading},null,8,["modelValue","disable"])]),(0,o.Lk)("div",ge,[e.sie.ruta.nivel>1?((0,o.uX)(),(0,o.Wv)(t,{key:0,class:"bg-secondary text-white",label:"Añadir día(s)","no-caps":"",flat:"",onClick:a[3]||(a[3]=function(a){return e.agregarDias()}),disable:e.loading},null,8,["disable"])):(0,o.Q3)("v-if",!0)])]),(0,o.Lk)("div",pe,[(0,o.bo)((0,o.Lk)("div",be,le()(a[11]||(a[11]=[(0,o.Lk)("div",{class:"q-ma-lg-sm q-px-sm text-deep-purple-14"},[(0,o.Lk)("div",{class:"col self-center"},[(0,o.Lk)("div",null,[(0,o.eW)("La Ficha Sintomatológica será válida "),(0,o.Lk)("b",null," también "),(0,o.eW)(" para los siguientes días:")])])],-1)])),512),[[ie.aG,e.fechasExtra.length>0]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.fechasExtra,function(a,t){return(0,o.uX)(),(0,o.CE)("div",ve,[(0,o.Lk)("div",he,[(0,o.Lk)("div",Ce,(0,C.v_)(e.nameDayShort(a.fecha)),1),(0,o.bF)(r,{class:"col q-if-outlined",modelValue:a.fecha,"onUpdate:modelValue":function(e){return a.fecha=e},"float-label":"Ingreso al colegio",type:"datetime",format:"DD/MM/YYYY HH:mm",disable:e.loading},null,8,["modelValue","onUpdate:modelValue","disable"]),(0,o.bF)(n,{class:"cursor-pointer q-mr-sm",name:"delete",size:"18px",color:"primary",onClick:function(a){return e.eliminarFecha(t)}},null,8,["onClick"])])])}),256))]),(0,o.Lk)("div",Ie,[(0,o.Lk)("div",Fe,[e.sie.ruta.nivel>1?((0,o.uX)(),(0,o.Wv)(t,{key:0,class:"q-mr-lg-sm bg-primary text-white",label:"Guardar","no-caps":"",flat:"",onClick:a[4]||(a[4]=function(a){return e.procesar()}),disable:e.loading},null,8,["disable"])):(0,o.Q3)("v-if",!0)])]),a[12]||(a[12]=(0,o.Lk)("hr",null,null,-1)),(0,o.Lk)("div",Ae,[(0,o.Lk)("div",we,[(0,o.Lk)("div",ke,[(0,o.Lk)("div",Se,[(0,o.bF)(l,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.instrucod,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.vmFiltro.instrucod=a}),options:e.niveles,"float-label":e.$t("ngs.nivel"),onInput:e.cambiarNivel,disable:e.loading},null,8,["modelValue","options","float-label","onInput","disable"])]),(0,o.Lk)("div",Oe,[(0,o.bF)(l,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.gradocod,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.vmFiltro.gradocod=a}),options:e.grados,"float-label":e.$t("ngs.grado"),onInput:e.cambiarGrado,disable:e.loading},null,8,["modelValue","options","float-label","onInput","disable"])]),(0,o.Lk)("div",De,[(0,o.bF)(l,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.id_grupo,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.vmFiltro.id_grupo=a}),options:e.grupos,"float-label":e.$t("grupo"),onInput:e.cambiarGrupo,disable:e.loading},null,8,["modelValue","options","float-label","onInput","disable"])])])])]),(0,o.Lk)("div",_e,[(0,o.Lk)("div",Ee,[(0,o.bF)(u,{style:{height:"50vh"},selection:e.configTabla.tipoSeleccion,"row-key":"ID",color:"secondary",data:e.dataTabla,columns:e.configTabla.columnas,selected:e.configTabla.registrosSeleccionados,"onUpdate:selected":a[8]||(a[8]=function(a){return e.configTabla.registrosSeleccionados=a})},{"body-cell-ESTADOPROCESO":(0,o.k6)(function(e){return[(0,o.bF)(s,{props:e},{default:(0,o.k6)(function(){return[0==e.value?((0,o.uX)(),(0,o.CE)("p",Ge)):-1==e.value?((0,o.uX)(),(0,o.Wv)(i,{key:1,color:"primary",size:"15px"})):1==e.value?((0,o.uX)(),(0,o.Wv)(n,{key:2,class:"text-green",name:"check",size:"24px"})):2==e.value?((0,o.uX)(),(0,o.Wv)(n,{key:3,class:"text-red",name:"error",size:"24px"})):(0,o.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","selected"])])])]}),_:1},8,["modelValue","onClose"])}n(12563),n(30683),n(39866),n(10239),n(90095),n(62692),n(13715);var Ne=n(51082),Le=n(26319),Ve={emits:["cerrarModal","ejecucionModal"],mixins:[re.A],components:{QDatetime:u.T5,QSelect:u.Si,QInnerLoading:u.SQ,QSpinnerOval:u.VA,QTable:j.A,QTh:u.EJ,QTr:u.qh,QTd:u.Ef,sieDate:Ne.A,sieModal:B.A,QIcon:u.bP,QBtn:u.Il},data:function(){return{sie:(0,h["default"])(),verModal:!0,configTabla:{},fechasExtra:[],fechaPase:new Date,fechaIni:new Date,fechaFin:new Date,loading:!1}},computed:{},methods:{nameDayShort:Le.nameDayShort,cerrarModal:function(){this.$emit("cerrarModal")},realizarFiltro:function(){this.configTabla.registrosSeleccionados=[]},configurarTabla:function(){var e={};e.columnas=[{name:"NGS",label:this.$t("ngs.ngs"),field:"NGS",align:"left",sortable:!0},{name:"NEMODES",label:this.$t("ambito"),field:"NEMODES",align:"left",sortable:!0},{name:"GRUPO",label:"GRUPO",field:"GRUPO",align:"left",sortable:!0},{name:"ESTADOPROCESO",label:"-",field:"ESTADOPROCESO",align:"center",sortable:!0}],e.registrosSeleccionados=[],e.tipoSeleccion="multiple",this.configTabla=e},resetaerEstado:function(){this.salones.forEach(function(e){e.ESTADOPROCESO=0})},procesar:function(){var e=this;return s()(l()().m(function a(){var n,o,r,t,i,s,u,c,d,m,f,g,p,b;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:if(n=e.configTabla.registrosSeleccionados,0!==n.length){a.n=1;break}return(0,ae["default"])("Seleccione un salón","error"),a.a(2);case 1:if(!(e.fechaIni.getTime()>e.fechaPase.getTime())){a.n=2;break}return(0,ae["default"])("La Fecha de Inicio no puede ser mayor a la Fecha de ingreso","error"),a.a(2);case 2:if(!(e.fechaIni.getTime()>e.fechaFin.getTime())){a.n=3;break}return(0,ae["default"])("La Fecha de Inicio no puede ser mayor a la Fecha Final","error"),a.a(2);case 3:o=[],r=e.fechasExtra.concat({fecha:e.fechaPase}),t=0;case 4:if(!(t<r.length)){a.n=7;break}if(i=new Date(r[t].fecha),s=(0,Le.formatDate)(i,"DD/MM/YYYY"),!o.includes(s)){a.n=5;break}return(0,ae["default"])("La Fecha ".concat(s," se está duplicando"),"error"),a.a(2);case 5:o.push(s);case 6:t++,a.n=4;break;case 7:e.loading=!0,u=null,c=0,e.resetaerEstado(),a.p=8,d=0;case 9:if(!(d<n.length)){a.n=13;break}return m=n[d],f=m["__index"],u=f,e.dataTabla[f].ESTADOPROCESO=-1,a.n=10,z.$http.post("api/FichaSintomatologica/saveCronograma",{data:{ANO:m.ANO,INSTRUCOD:m.INSTRUCOD,GRADOCOD:m.GRADOCOD,SECCIONCOD:m.SECCIONCOD,ID_GRUPO:m.ID_GRUPO,FH_PASE:e.fechaPase,FH_INICIO:e.fechaIni,FH_CIERRE:e.fechaFin,fehasExtras:e.fechasExtra}});case 10:if(g=a.v,p=g.status,e.dataTabla[f].ESTADOPROCESO=p,1!==p){a.n=11;break}c++,a.n=12;break;case 11:throw new Error(g.message);case 12:d++,a.n=9;break;case 13:(0,ae["default"])(e.$t("mensajes.m0008"),"success"),a.n=15;break;case 14:a.p=14,b=a.v,null!==u&&(e.dataTabla[u].ESTADOPROCESO=2),(0,ae["default"])(b.message||b.error.message,"error");case 15:c>0&&e.$emit("ejecucionModal"),e.loading=!1;case 16:return a.a(2)}},a,null,[[8,14]])}))()},ultimoDia:function(){for(var e=new Date(this.fechaPase),a=0;a<this.fechasExtra.length;a++){var n=new Date(this.fechasExtra[a].fecha);n.getTime()>e.getTime()&&(e=n)}return e},agregarDias:function(){var e=this.ultimoDia(),a=1,n=5,o=6;e.getDay()===n?a=3:e.getDay()===o&&(a=2),e.setDate(e.getDate()+a),this.fechasExtra.push({fecha:e})},eliminarFecha:function(e){this.fechasExtra.splice(e,1)}},created:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:e.configurarTabla();case 1:return a.a(2)}},a)}))()}},Re=n(12807);const qe=(0,Re.A)(Ve,[["render",Pe]]);var xe=qe,Me={mixins:[oe,re.A],directives:{sieActive:J.A},components:{modalCronograma:xe,QInnerLoading:u.SQ,QSpinnerOval:u.VA,QSelect:u.Si,QInput:X.A,sieModal:B.A,sieSelect:K.A,QForm:ee.A,QTable:j.A,QTd:u.Ef,QDatetime:u.T5,date:u.p6,QCard:p.A,QCardSection:b.A,QBtn:u.Il,QIcon:u.bP},props:{},data:function(){var e=this;return{sie:(0,h["default"])(),frm:{},fechasExtra:[],loadingModal:!1,buttons:[{icon:"plus",label:"Agregar",permiso:">1",click:function(){e.openModal=!0}}],cronograma:{data:[]},fechaPaseIni:new Date,fechaPaseFin:new Date,gradosAgrupados:[],openModal:!1,openModalEdit:!1}},computed:{isLess:function(){return(0,Z.isLess)()}},methods:{nameDayShort:Le.nameDayShort,realizarFiltro:function(){this.initCronograma()},initCronograma:function(){var e=this;return s()(l()().m(function a(){var n;return l()().w(function(a){while(1)switch(a.n){case 0:return n={instrucod:e.vmFiltro.instrucod,gradocod:e.vmFiltro.gradocod,id_grupo:e.vmFiltro.id_grupo,fechaPaseIni:e.fechaPaseIni,fechaPaseFin:e.fechaPaseFin},a.n=1,W.getCronogramas(n);case 1:e.cronograma.data=a.v;case 2:return a.a(2)}},a)}))()},editar:function(e){var a=this;return s()(l()().m(function n(){var o;return l()().w(function(n){while(1)switch(n.n){case 0:return a.loadingModal=!0,a.fechasExtra=[],a.frm=e,a.frm.FH_INICIO=new Date(e.FH_INICIO),a.frm.FH_PASE=new Date(e.FH_PASE),a.frm.FH_CIERRE=new Date(e.FH_CIERRE),a.openModalEdit=!0,n.n=1,W.getCronogramaFechas(e.ID_CRONOGRAMA);case 1:o=n.v,a.fechasExtra=o.map(function(e){return e.FH_PASE=new Date(e.FH_PASE),e}),a.loadingModal=!1;case 2:return n.a(2)}},n)}))()},guardarFecha:function(e){return s()(l()().m(function a(){var n,o,r,t;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,W.saveCronograma({data:e});case 1:n=a.v,o=n.message,(0,ae["default"])(o,"success"),a.n=3;break;case 2:a.p=2,t=a.v,r=t.error,(0,ae["default"])(r.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()},eliminarFecha:function(e,a){var n=this;return s()(l()().m(function o(){var r;return l()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.eliminar(e);case 1:r=o.v,1===r&&n.fechasExtra.splice(a,1);case 2:return o.a(2)}},o)}))()},grabarCronograma:function(){var e=this;return s()(l()().m(function a(){var n,o,r,t,i;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,e.$refs.form.validate();case 1:if(n=a.v,n){a.n=2;break}return(0,ae["default"])("Por favor complete la información solicitada","warning"),a.a(2,!1);case 2:if(!(e.frm.FH_INICIO.getTime()>e.frm.FH_PASE.getTime())){a.n=3;break}return(0,ae["default"])("La Fecha de Inicio no puede ser mayor a la Fecha de ingreso","error"),a.a(2);case 3:if(!(e.frm.FH_INICIO.getTime()>e.frm.FH_CIERRE.getTime())){a.n=4;break}return(0,ae["default"])("La Fecha de Inicio no puede ser mayor a la Fecha Final","error"),a.a(2);case 4:return a.p=4,a.n=5,W.saveCronograma({data:e.frm});case 5:o=a.v,r=o.message,e.initCronograma(),(0,ae["default"])(r,"success"),a.n=7;break;case 6:a.p=6,i=a.v,t=i.error,(0,ae["default"])(t.message,"warning");case 7:return a.a(2)}},a,null,[[4,6]])}))()},eliminar:function(e){var a=this;return s()(l()().m(function n(){var o,r,t,i,s;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,(0,ne.dialogConfirm)({message:"¿Está seguro de eliminar este cronograma?"});case 1:if(o=n.v,!o){n.n=5;break}return n.p=2,n.n=3,W.deleteCronograma({idCronograma:e.ID_CRONOGRAMA});case 3:return r=n.v,t=r.message,a.initCronograma(),(0,ae["default"])(t,"success"),n.a(2,1);case 4:return n.p=4,s=n.v,i=s.error,(0,ae["default"])(i.message,"warning"),n.a(2,0);case 5:return n.a(2)}},n,null,[[2,4]])}))()},recargarData:function(){this.initCronograma()}},created:function(){return s()(l()().m(function e(){return l()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()}};const Ue=(0,Re.A)(Me,[["render",$]]);var He=Ue,ye={class:"col-12"},Qe={class:"row q-ma-lg-sm"},Te={class:"col-xs-12 col-md-3"},Ye={class:"col-xs-12 col-md-3"},$e={class:"row"},Xe={class:"col-12"},ze={class:"q-pa-sm q-col-gutter-sm"},We={class:"row"},je={class:"col-xs-12 col-sm-6"},Be={class:"col-xs-12 col-sm-6"},Ke={class:"row"},Je={class:"col text-center"};function Ze(e,a){var n=this,r=(0,o.g2)("header-btn"),t=(0,o.g2)("q-datetime"),l=(0,o.g2)("sie-table"),i=(0,o.g2)("q-card-section"),s=(0,o.g2)("q-card"),u=(0,o.g2)("q-spinner-oval"),c=(0,o.g2)("q-inner-loading"),d=(0,o.g2)("q-btn"),m=(0,o.g2)("q-form"),f=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.CE)("div",ye,[(0,o.bF)(s,null,{default:(0,o.k6)(function(){return[(0,o.bF)(r,{name:"Cronograma Personal",buttons:e.buttons},null,8,["buttons"]),(0,o.Lk)("div",Qe,[(0,o.Lk)("div",Te,[(0,o.bF)(t,{class:"q-if-outlined",onInput:e.realizarFiltro,modelValue:e.fechaPaseIni,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.fechaPaseIni=a}),"float-label":"Fecha Inicio",type:"date",format:"DD/MM/YYYY"},null,8,["onInput","modelValue"])]),(0,o.Lk)("div",Ye,[(0,o.bF)(t,{class:"q-if-outlined",onInput:e.realizarFiltro,modelValue:e.fechaPaseFin,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.fechaPaseFin=a}),"float-label":"Fecha Fin",type:"date",format:"DD/MM/YYYY"},null,8,["onInput","modelValue"])])]),(0,o.bF)(i,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",$e,[(0,o.Lk)("div",Xe,[(0,o.bF)(l,{style:{height:"calc(100vh - 260px)"},data:e.dataCronograma,columns:e.fields,config:e.config,context:n},null,8,["data","columns","config"])])])]}),_:1})]}),_:1}),(0,o.bF)(f,{class:"modalCronogramaProfesor",modelValue:e.openModal,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.openModal=a}),title:"Cronograma",footer:!1},{default:(0,o.k6)(function(){return[(0,o.bF)(c,{visible:e.loadingModal},{default:(0,o.k6)(function(){return[(0,o.bF)(u,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,o.bF)(m,{ref:"form"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",ze,[a[5]||(a[5]=(0,o.Lk)("div",{class:"row"},[(0,o.Lk)("div",{class:"col text-center text-bold"},"Pase de ingreso al colegio:")],-1)),(0,o.Lk)("div",We,[(0,o.Lk)("div",je,[(0,o.bF)(t,{class:"q-if-outlined",modelValue:e.frm.FH_PASE_INICIO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.frm.FH_PASE_INICIO=a}),"float-label":"Desde",type:"date",format:"DD/MM/YYYY"},null,8,["modelValue"])]),(0,o.Lk)("div",Be,[(0,o.bF)(t,{class:"q-if-outlined",modelValue:e.frm.FH_PASE_FIN,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.frm.FH_PASE_FIN=a}),"float-label":"Hasta",type:"date",format:"DD/MM/YYYY"},null,8,["modelValue"])])]),(0,o.Lk)("div",Ke,[(0,o.Lk)("div",Je,[e.sie.ruta.nivel>1?((0,o.uX)(),(0,o.Wv)(d,{key:0,class:"q-mr-lg-sm bg-primary text-white",label:e.$t("botones.guardar"),"no-caps":"",flat:"",onClick:e.grabarCronograma},null,8,["label","onClick"])):(0,o.Q3)("v-if",!0)])])])]}),_:1},512)]}),_:1},8,["modelValue"])])}var ea={saveCronograma:function(e){return z.$http.post("api/CovidCronogramaProfe/saveCronograma",e)},getCronogramas:function(e,a){return z.$http.get("api/CovidCronogramaProfe/getCronogramas",{params:{fechaInicio:e,fechaFin:a}})},deleteCronograma:function(e){return z.$http.post("api/CovidCronogramaProfe/deleteCronograma",{idCronograma:e})}},aa={data:function(){return{config:{FH_INICIO:{component:"datetime",edit:!1},FH_CIERRE:{component:"datetime",edit:!1},FH_PASE_INICIO:{component:"date",edit:!1},FH_PASE_FIN:{component:"date",edit:!1},ACCION:{component:"button",icon:["edit as editar","delete"],permisos:{editar:"> 1",delete:"=== 3"},editar:function(e){this.editar(e)},delete:function(e){this.eliminar(e)},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"FH_PASE_INICIO",label:"Ingreso al colegio (Inicio)",field:"FH_PASE_INICIO",align:"center",sortable:!0},{name:"FH_PASE_FIN",label:"Ingreso al colegio (Fin)",field:"FH_PASE_FIN",align:"center",sortable:!0},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:70}]}}},na={mixins:[aa],components:{QInnerLoading:u.SQ,QSpinnerOval:u.VA,QSelect:u.Si,QInput:X.A,sieModal:B.A,sieSelect:K.A,QForm:ee.A,QTable:j.A,QTd:u.Ef,QDatetime:u.T5,date:u.p6,QCard:p.A,QCardSection:b.A,QBtn:u.Il},data:function(){var e=this;return{sie:(0,h["default"])(),frm:{},loadingModal:!1,buttons:[{icon:"plus",label:"Agregar",permiso:">1",click:function(){e.agregarRegistro()}}],dataCronograma:[],fechaPaseIni:new Date,fechaPaseFin:new Date((0,h["default"])().ano,12,0),openModal:!1,isNew:!1}},methods:{resetearForm:function(){this.frm={ID_CRONOGRAMA:null,FH_PASE_INICIO:new Date,FH_PASE_FIN:new Date}},agregarRegistro:function(){this.isNew=!0,this.openModal=!0,this.resetearForm()},editar:function(e){this.isNew=!1,this.openModal=!0,this.resetearForm(),this.frm.ID_CRONOGRAMA=e.ID_CRONOGRAMA,this.frm.FH_PASE_INICIO=new Date(e.FH_PASE_INICIO),this.frm.FH_PASE_FIN=new Date(e.FH_PASE_FIN)},realizarFiltro:function(){this.cargarDataGrilla()},cargarDataGrilla:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ea.getCronogramas(e.fechaPaseIni,e.fechaPaseFin);case 1:e.dataCronograma=a.v;case 2:return a.a(2)}},a)}))()},grabarCronograma:function(){var e=this;return s()(l()().m(function a(){var n,o,r,t,i;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,e.$refs.form.validate();case 1:if(n=a.v,n){a.n=2;break}return(0,ae["default"])("Por favor complete la información solicitada","warning"),a.a(2,!1);case 2:if(e.frm.FH_PASE_INICIO){a.n=3;break}return(0,ae["default"])("Indique la fecha de inicio del pase","warning"),a.a(2,!1);case 3:if(e.frm.FH_PASE_FIN){a.n=4;break}return(0,ae["default"])("Indique la fecha fin del pase","warning"),a.a(2,!1);case 4:if(!(new Date(e.frm.FH_PASE_INICIO).getTime()>new Date(e.frm.FH_PASE_FIN).getTime())){a.n=5;break}return(0,ae["default"])("Ingreso: La fecha de inicio no puede ser mayor a la fecha final","warning"),a.a(2,!1);case 5:return a.p=5,a.n=6,ea.saveCronograma({data:e.frm});case 6:o=a.v,r=o.message,e.openModal=!1,e.cargarDataGrilla(),(0,ae["default"])(r,"success"),a.n=8;break;case 7:a.p=7,i=a.v,t=i.error,(0,ae["default"])(t.message,"warning");case 8:return a.a(2)}},a,null,[[5,7]])}))()},eliminar:function(e){var a=this;return s()(l()().m(function n(){var o,r,t,i,s;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,(0,ne.dialogConfirm)({message:"¿Está seguro de eliminar este cronograma?"});case 1:if(o=n.v,!o){n.n=5;break}return n.p=2,n.n=3,ea.deleteCronograma(e.ID_CRONOGRAMA);case 3:return r=n.v,t=r.message,a.cargarDataGrilla(),(0,ae["default"])(t,"success"),n.a(2,1);case 4:return n.p=4,s=n.v,i=s.error,(0,ae["default"])(i.message,"warning"),n.a(2,0);case 5:return n.a(2)}},n,null,[[2,4]])}))()}},created:function(){this.cargarDataGrilla()}};const oa=(0,Re.A)(na,[["render",Ze]]);var ra=oa,ta={class:"col-12"},la={class:"row"},ia={class:"col-12"},sa={class:"row q-pa-sm q-col-gutter-sm"},ua={class:"col-xs-12 col-sm-12"};function ca(e,a){var n=this,r=(0,o.g2)("header-btn"),t=(0,o.g2)("sie-table"),l=(0,o.g2)("q-card-section"),i=(0,o.g2)("q-card"),s=(0,o.g2)("q-input"),u=(0,o.g2)("q-form"),c=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.CE)("div",ta,[(0,o.bF)(i,null,{default:(0,o.k6)(function(){return[(0,o.bF)(r,{name:"Grupos",buttons:e.buttons},null,8,["buttons"]),(0,o.bF)(l,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",la,[(0,o.Lk)("div",ia,[(0,o.bF)(t,{style:{height:"calc(100vh - 200px)"},data:e.rows,columns:e.fields,config:e.config,context:n},null,8,["data","columns","config"])])])]}),_:1})]}),_:1}),(0,o.bF)(c,{class:"modal-grupo",modelValue:e.modalGrupo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.modalGrupo=a}),title:"Grupo",ok:e.$t("botones.guardar"),footer:e.sie.ruta.nivel>=2,onSubmit:e.grabarGrupo,css:{minWidth:"50vw"}},{default:(0,o.k6)(function(){return[(0,o.bF)(u,{class:"column",ref:"form"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",sa,[(0,o.Lk)("div",ua,[(0,o.bF)(s,{modelValue:e.frm.DESCRIPCION,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.frm.DESCRIPCION=a}),label:"Descripción",maxlength:"200","float-label":"Descripción",rules:[function(e){return e&&e.length>0||"Campo requerido"}]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","ok","footer","onSubmit"])])}var da=n(16648),ma={getFrm:function(e){var a={};return a=e||{ID_GRUPO:"",DESCRIPCION:""},a},getGrupos:function(e){return z.$http.get("api/CovidGrupos/getGrupos",{params:{idGrupo:e}})},saveGrupo:function(e){return z.$http.post("api/CovidGrupos/saveGrupo",e)},deleteGrupo:function(e){return z.$http.post("api/CovidGrupos/deleteGrupo",e)}},fa={data:function(){return{config:{ACCION:{component:"button",icon:["edit as editar","delete"],permisos:{editar:"> 1",delete:"=== 3"},editar:function(e){var a=this;return s()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:a.editar(e);case 1:return n.a(2)}},n)}))()},delete:function(e){this.eliminar(e)},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"ID_GRUPO",label:"Id Grupo",field:"ID_GRUPO",align:"left",sortable:!0},{name:"DESCRIPCION",label:"Grupo",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:70}]}}},ga={mixins:[fa],directives:{sieActive:J.A},components:{QSelect:da.A,QInput:X.A,sieModal:B.A,sieSelect:K.A,QForm:ee.A,QCard:p.A,QCardSection:b.A},props:{},data:function(){var e=this;return{sie:(0,h["default"])(),frm:{},buttons:[{icon:"plus",label:"Agregar",click:function(){e.editar(null)}}],modalGrupo:!1}},computed:{isLess:function(){return(0,Z.isLess)()}},methods:{editar:function(e){var a=this;return s()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:a.frm=ma.getFrm(e),a.modalGrupo=!0;case 1:return n.a(2)}},n)}))()},grabarGrupo:function(){var e=this;return s()(l()().m(function a(){var n,o,r,t,i;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,e.$refs.form.validate();case 1:if(n=a.v,n){a.n=2;break}return(0,ae["default"])("Por favor complete la información solicitada","warning"),a.a(2,!1);case 2:return a.p=2,a.n=3,ma.saveGrupo({data:e.frm});case 3:o=a.v,r=o.message,e.modalGrupo=!1,e.listar(),(0,ae["default"])(r,"success"),a.n=5;break;case 4:a.p=4,i=a.v,t=i.error,(0,ae["default"])(t.message,"warning");case 5:return a.a(2)}},a,null,[[2,4]])}))()},eliminar:function(e){var a=this;return s()(l()().m(function n(){var o,r,t,i,s;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:if(1!==e.ID_GRUPO){n.n=1;break}return(0,ae["default"])("No se puede eliminar este grupo","warning"),n.a(2,!1);case 1:return n.n=2,(0,ne.dialogConfirm)({message:"¿Está seguro de eliminar este grupo?"});case 2:if(o=n.v,!o){n.n=6;break}return n.p=3,n.n=4,ma.deleteGrupo({idGrupo:e.ID_GRUPO});case 4:r=n.v,t=r.message,a.listar(),(0,ae["default"])(t,"success"),n.n=6;break;case 5:n.p=5,s=n.v,i=s.error,(0,ae["default"])(i.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},listar:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ma.getGrupos();case 1:e.rows=a.v;case 2:return a.a(2)}},a)}))()}},created:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:e.listar();case 1:return a.a(2)}},a)}))()}};const pa=(0,Re.A)(ga,[["render",ca]]);var ba=pa,va={class:"col-12"},ha={class:"row"},Ca={class:"col-12"},Ia={class:"row q-pa-sm q-col-gutter-sm"},Fa={class:"col-xs-12 col-sm-12"},Aa={class:"col-xs-12 col-sm-12"};function wa(e,a){var n=this,r=(0,o.g2)("header-btn"),t=(0,o.g2)("sie-table"),l=(0,o.g2)("q-card-section"),i=(0,o.g2)("q-card"),s=(0,o.g2)("q-select"),u=(0,o.g2)("q-form"),c=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.CE)("div",va,[(0,o.bF)(i,null,{default:(0,o.k6)(function(){return[(0,o.bF)(r,{name:"Asociar grupos a Salones",buttons:e.buttons},null,8,["buttons"]),(0,o.bF)(l,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",ha,[(0,o.Lk)("div",Ca,[(0,o.bF)(t,{style:{height:"calc(100vh - 220px)"},data:e.rows,columns:e.fields,config:e.config,context:n},null,8,["data","columns","config"])])])]}),_:1})]}),_:1}),(0,o.bF)(c,{class:"modal-grupo",modelValue:e.modalGrupo,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.modalGrupo=a}),title:"Agregar grupo a salón",ok:e.$t("botones.guardar"),footer:e.sie.ruta.nivel>=2,onSubmit:e.asignarGrupoSalon,css:{minWidth:"50vw"}},{default:(0,o.k6)(function(){return[(0,o.bF)(u,{class:"column",ref:"form"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Ia,[(0,o.Lk)("div",Fa,[(0,o.bF)(s,{modelValue:e.frm.NEMO,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.frm.NEMO=a}),options:e.salones,label:"Salones",rules:[function(e){return!!e||"Campo requerido"}]},null,8,["modelValue","options","rules"])]),(0,o.Lk)("div",Aa,[(0,o.bF)(s,{modelValue:e.frm.ID_GRUPO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.frm.ID_GRUPO=a}),"option-value":"ID_GRUPO","option-label":"DESCRIPCION",options:e.grupos,label:"Grupos",rules:[function(e){return!!e||"Campo requerido"}]},null,8,["modelValue","options","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","ok","footer","onSubmit"])])}n(71225),n(5962);var ka={getFrm:function(e){var a={};return e?(a=e,a["ID_GRUPO_OLD"]=a.ID_GRUPO,a["NEMO_OLD"]=a.NEMO,a["ACCION"]=2):a={ID_GRUPO:"",NEMO:"",ID_GRUPO_OLD:"",NEMO_OLD:"",ACCION:1},a},getGrupos:function(){return z.$http.get("api/CovidGrupos/getGrupos")},getComboSalones:function(){return z.$http.post("api/salon/getComboSalonesOrdenados")},getComboSalonesSinGrupo:function(){return z.$http.get("api/CovidGrupos/getComboSalonesSinGrupo")},getSalonesGrupo:function(e){return z.$http.get("api/CovidGrupos/getSalonesGrupo",{params:{idGrupo:e}})},saveAsignarGrupoSalon:function(e){return z.$http.post("api/CovidGrupos/saveAsignarGrupoSalon",e)},deleteAsignacionGrupoSalon:function(e){return z.$http.post("api/CovidGrupos/deleteAsignacionGrupoSalon",e)}},Sa={data:function(){return{config:{ACCION:{component:"button",icon:["delete"],permisos:{delete:"=== 3"},editar:function(e){var a=this;return s()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:a.editar(e);case 1:return n.a(2)}},n)}))()},delete:function(e){this.eliminar(e)},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"NGS",label:"NGS",field:"NGS",align:"left",sortable:!0},{name:"NEMODES",label:"Salon",field:"NEMODES",align:"left",sortable:!0},{name:"DESCRIPCION",label:"Grupo",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:70}]}}},Oa={mixins:[Sa],directives:{sieActive:J.A},components:{QSelect:da.A,QInput:X.A,sieModal:B.A,sieSelect:K.A,QForm:ee.A,QCard:p.A,QCardSection:b.A},props:{},data:function(){var e=this;return{sie:(0,h["default"])(),frm:{},salones:[],grupos:[],buttons:[{icon:"plus",label:"Agregar",click:function(){e.editar(null)}}],modalGrupo:!1}},computed:{isLess:function(){return(0,Z.isLess)()}},methods:{editar:function(e){var a=this;return s()(l()().m(function n(){var o;return l()().w(function(n){while(1)switch(n.n){case 0:if(0!==a.salones.length){n.n=2;break}return n.n=1,ka.getComboSalones();case 1:a.salones=n.v;case 2:if(0!==a.grupos.length){n.n=4;break}return n.n=3,ka.getGrupos();case 3:o=n.v,a.grupos=o.filter(function(e){return 1!==e.ID_GRUPO});case 4:return n.n=5,ka.getFrm(e);case 5:a.frm=n.v,a.modalGrupo=!0;case 6:return n.a(2)}},n)}))()},asignarGrupoSalon:function(){var e=this;return s()(l()().m(function a(){var n,o,r,t,i;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,e.$refs.form.validate();case 1:if(n=a.v,n){a.n=2;break}return(0,ae["default"])("Por favor complete la información solicitada","warning"),a.a(2,!1);case 2:return a.p=2,a.n=3,ka.saveAsignarGrupoSalon({data:e.frm});case 3:o=a.v,r=o.message,e.modalGrupo=!1,e.listar(),(0,ae["default"])(r,"success"),a.n=5;break;case 4:a.p=4,i=a.v,t=i.error,(0,ae["default"])(t.message,"warning");case 5:return a.a(2)}},a,null,[[2,4]])}))()},eliminar:function(e){var a=this;return s()(l()().m(function n(){var o,r,t,i,s;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,(0,ne.dialogConfirm)({message:"¿Está seguro de eliminar este grupo?"});case 1:if(o=n.v,!o){n.n=5;break}return n.p=2,n.n=3,ka.deleteAsignacionGrupoSalon({idGrupo:e.ID_GRUPO,nemo:e.NEMO});case 3:r=n.v,t=r.message,a.listar(),(0,ae["default"])(t,"success"),n.n=5;break;case 4:n.p=4,s=n.v,i=s.error,(0,ae["default"])(i.message,"warning");case 5:return n.a(2)}},n,null,[[2,4]])}))()},listar:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ka.getSalonesGrupo();case 1:e.rows=a.v;case 2:return a.a(2)}},a)}))()}},created:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:e.listar();case 1:return a.a(2)}},a)}))()}};const Da=(0,Re.A)(Oa,[["render",wa]]);var _a=Da,Ea={class:"col-12"},Ga={class:"row q-pa-sm q-col-gutter-sm"},Pa={class:"col-xs-12 col-sm-6"},Na={class:"col-xs-12 col-sm-6"},La={class:"row"},Va={class:"col-12"},Ra={class:"row"},qa={class:"col-12"};function xa(e,a){var n=this,r=(0,o.g2)("header-btn"),t=(0,o.g2)("q-select"),l=(0,o.g2)("q-card-section"),i=(0,o.g2)("q-separator"),s=(0,o.g2)("sie-table"),u=(0,o.g2)("q-card"),c=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.CE)("div",Ea,[(0,o.bF)(u,null,{default:(0,o.k6)(function(){return[(0,o.bF)(r,{name:"Asignar alumnos a grupos",buttons:e.buttons},null,8,["buttons"]),(0,o.bF)(l,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Ga,[(0,o.Lk)("div",Pa,[(0,o.bF)(t,{modelValue:e.nemo,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.nemo=a}),options:e.salones,label:"Salones",onInput:e.cargarGrupos},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",Na,[(0,o.bF)(t,{modelValue:e.grupo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.grupo=a}),"option-value":"ID_GRUPO","option-label":"DESCRIPCION",options:e.grupos,onInput:a[2]||(a[2]=function(a){return e.listarAlumnos()})},null,8,["modelValue","options"])])])]}),_:1}),(0,o.bF)(i),(0,o.bF)(l,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",La,[(0,o.Lk)("div",Va,[(0,o.bF)(s,{selection:"multiple",ref:"asociados",style:{height:"calc(100vh - 265px)"},data:e.rows,columns:e.fields,config:e.config,context:n},null,8,["data","columns","config"])])])]}),_:1})]}),_:1}),(0,o.bF)(c,{class:"modal-alumnos-grupo",modelValue:e.modalAlumnoGrupo,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.modalAlumnoGrupo=a}),title:"Asignar alumnos al grupo",ok:e.$t("botones.agregar"),footer:e.sie.ruta.nivel>=2,onSubmit:e.asignarAlumnosGrupo,css:{minWidth:"50vw",minHeight:"50vh"}},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Ra,[(0,o.Lk)("div",qa,[(0,o.bF)(s,{selection:"multiple",ref:"alumnos",style:{height:"calc(100vh -70px)"},data:e.rowsAlumnos,columns:e.fieldsAlumnos,config:e.config,context:n},null,8,["data","columns","config"])])])]}),_:1},8,["modelValue","ok","footer","onSubmit"])])}n(74260),n(32203);var Ma=n(53380),Ua={getFrm:function(e){var a={};return e?(a=e,a["ID_GRUPO_OLD"]=a.ID_GRUPO,a["NEMO_OLD"]=a.NEMO,a["ACCION"]=2):a={ID_GRUPO:"",NEMO:"",ID_GRUPO_OLD:"",NEMO_OLD:"",ACCION:1},a},getAlumnosGrupo:function(e,a){return z.$http.get("api/CovidGrupos/getAlumnosGrupo",{params:{grupo:e,nemo:a}})},getComboSalonesConGrupo:function(){return z.$http.get("api/CovidGrupos/getComboSalonesConGrupo")},getComboGruposSalon:function(e){return z.$http.get("api/CovidGrupos/getComboGruposSalon",{params:{nemo:e}})},getAlumnosSalonSinGrupos:function(e){return z.$http.get("api/CovidGrupos/getAlumnosSalonSinGrupos",{params:{nemo:e}})},saveAsignarAlumnosGrupo:function(e){return z.$http.post("api/CovidGrupos/saveAsignarAlumnosGrupo",e)},deleteAsignacionAlumno:function(e){return z.$http.post("api/CovidGrupos/deleteAsignacionAlumno",e)}},Ha={data:function(){return{config:{},rows:[],fields:[{name:"ALUCOD",label:"Código",field:"ALUCOD",align:"left",sortable:!0},{name:"NOMCOMP",label:"Apellidos y Nombres",field:"NOMCOMP",align:"left",sortable:!0},{name:"GRUPO",label:"Grupo",field:"GRUPO",align:"left",sortable:!0}],rowsAlumnos:[],fieldsAlumnos:[{name:"ALUCOD",label:"Código",field:"ALUCOD",align:"left",sortable:!0},{name:"NOMCOMP",label:"Apellidos y Nombres",field:"NOMCOMP",align:"left",sortable:!0}]}}},ya={mixins:[Ha],directives:{sieActive:J.A},components:{QSelect:da.A,QInput:X.A,sieModal:B.A,sieSelect:K.A,QForm:ee.A,QCard:p.A,QCardSection:b.A,QSeparator:Ma.A},props:{},data:function(){var e=this;return{sie:(0,h["default"])(),frm:{},salones:[],grupos:[{ID_GRUPO:"",DESCRIPCION:"Seleccione.."}],buttons:[{icon:"plus",label:"Agregar",click:function(){e.seleccionarAlumnos()}},{icon:"delete",label:"Eliminar",click:function(){e.deleteAsignacionAlumno()}}],nemo:"",grupo:"",modalAlumnoGrupo:!1}},computed:{isLess:function(){return(0,Z.isLess)()}},methods:{listarAlumnos:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:if(e.rows=[],!e.grupo){a.n=2;break}return a.n=1,Ua.getAlumnosGrupo(e.grupo,e.nemo);case 1:e.rows=a.v;case 2:return a.a(2)}},a)}))()},cargarGrupos:function(){var e=this;return s()(l()().m(function a(){var n;return l()().w(function(a){while(1)switch(a.n){case 0:if(e.grupos=[],e.rows=[],!e.nemo){a.n=2;break}return a.n=1,Ua.getComboGruposSalon(e.nemo);case 1:e.grupos=a.v,e.grupos.unshift({ID_GRUPO:"",DESCRIPCION:"Seleccione.."});case 2:e.grupo?(n=e.grupos.find(function(a){return a.ID_GRUPO===e.grupo}),n?(e.grupo=n.ID_GRUPO,e.listarAlumnos()):e.grupo=""):e.grupo="";case 3:return a.a(2)}},a)}))()},seleccionarAlumnos:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Ua.getAlumnosSalonSinGrupos(e.nemo);case 1:e.rowsAlumnos=a.v,e.modalAlumnoGrupo=!0;case 2:return a.a(2)}},a)}))()},asignarAlumnosGrupo:function(){var e=this;return s()(l()().m(function a(){var n,o,r,t,i;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:if(n=e.$refs.alumnos.rowsSelected(["ALUCOD"]),0!==n.length){a.n=1;break}return(0,ae["default"])("Por favor seleccione los alumnos","warning"),a.a(2,!1);case 1:if(e.nemo){a.n=2;break}return(0,ae["default"])("Por favor seleccione un salón","warning"),a.a(2,!1);case 2:if(e.grupo){a.n=3;break}return(0,ae["default"])("Por favor seleccione un grupo","warning"),a.a(2,!1);case 3:return a.p=3,a.n=4,Ua.saveAsignarAlumnosGrupo({nemo:e.nemo,idGrupo:e.grupo,alumnos:n});case 4:o=a.v,r=o.message,e.modalAlumnoGrupo=!1,e.listarAlumnos(),(0,ae["default"])(r,"success"),a.n=6;break;case 5:a.p=5,i=a.v,t=i.error,(0,ae["default"])(t.message,"warning");case 6:return a.a(2)}},a,null,[[3,5]])}))()},deleteAsignacionAlumno:function(e){var a=this;return s()(l()().m(function e(){var n,o,r,t,i,s;return l()().w(function(e){while(1)switch(e.p=e.n){case 0:if(n=a.$refs.asociados.rowsSelected(["ALUCOD"]),0===n.length&&(0,ae["default"])("Por favor seleccione los alumnos","warning"),a.nemo){e.n=1;break}return(0,ae["default"])("Por favor seleccione un salón","warning"),e.a(2,!1);case 1:return e.n=2,(0,ne.dialogConfirm)({message:"¿Está seguro de eliminar a los alumnos del grupo?"});case 2:if(o=e.v,!o){e.n=6;break}return e.p=3,e.n=4,Ua.deleteAsignacionAlumno({nemo:a.nemo,idGrupo:a.grupo,alumnos:n});case 4:r=e.v,t=r.message,a.modalAlumnoGrupo=!1,a.listarAlumnos(),(0,ae["default"])(t,"success"),e.n=6;break;case 5:e.p=5,s=e.v,i=s.error,(0,ae["default"])(i.message,"warning");case 6:return e.a(2)}},e,null,[[3,5]])}))()}},created:function(){var e=this;return s()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Ua.getComboSalonesConGrupo();case 1:e.salones=a.v;case 2:return a.a(2)}},a)}))()}};const Qa=(0,Re.A)(ya,[["render",xa]]);var Ta=Qa,Ya={components:{QTabPanels:f.A,QTabPanel:g.A,QItem:c.A,QTabs:d.A,QTab:m.A,QCard:p.A,QCardSection:b.A,formularioRegistro:v.A,cronograma:He,cronogramaProfesor:ra,grupos:ba,asignarGrupoSalon:_a,asignarAlumnosGrupo:Ta,QPage:u.Tu},data:function(){return{sie:(0,h["default"])(),tabFicha:"ficha",tipo:1}},methods:{},created:function(){return s()(l()().m(function e(){return l()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()}};const $a=(0,Re.A)(Ya,[["render",r]]);var Xa=$a}}]);