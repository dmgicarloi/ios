"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[19742],{19742:function(e,l,a){a.r(l),a.d(l,{default:function(){return ae}});var n=a(61758),o={class:"row q-col-gutter-sm"},r={class:"col-xs-12 col-md-4"},t={class:"col-xs-12 col-md-8"},i={class:"row q-col-gutter-sm"},u={class:"col-12"},s={class:"col-6"},c={class:"col-6"},A={class:"col-12"},d={class:"col-4"},f={class:"col-4"},m={class:"col-4"},T={class:"col-4"},R={class:"col-4"},p={class:"col-4"},S={class:"col-4"},b={key:0,class:"col-4"},O={key:1,class:"col-4"},v={key:2,class:"col-4"},E={key:3,class:"col-6"},C={key:4,class:"col-6"},g={key:5,class:"col-6"},V={key:6,class:"col-6"},I={class:"col-12"};function h(e,l){var a=this,h=(0,n.g2)("header-btn"),L=(0,n.g2)("q-spinner-oval"),U=(0,n.g2)("q-inner-loading"),M=(0,n.g2)("sie-table"),F=(0,n.g2)("q-input"),k=(0,n.g2)("q-select"),N=(0,n.g2)("q-form"),w=(0,n.g2)("q-card-section"),D=(0,n.g2)("q-card"),P=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(P,{class:"registroTansportista q-px-sm q-pt-sm sie-flat"},{default:(0,n.k6)(function(){return[(0,n.bF)(D,null,{default:(0,n.k6)(function(){return[(0,n.bF)(h,{name:"Registro de Transportista",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(w,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",o,[(0,n.Lk)("div",r,[(0,n.bF)(U,{visible:e.loadingDetalle},{default:(0,n.k6)(function(){return[(0,n.bF)(L,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,n.bF)(M,{selection:"single",context:a,onRowSelected:e.seleccionarFila,css:"height:calc(100vh - 140px)",search:"Buscar Transportista",columns:e.configTbl.columnas,data:e.dataDetalle,config:e.dinamicos},null,8,["onRowSelected","columns","data","config"])]),(0,n.Lk)("div",t,[(0,n.bF)(N,{class:"column",ref:"form"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[(0,n.Lk)("div",u,[(0,n.bF)(F,{modelValue:e.frm.TRACOD,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.frm.TRACOD=l}),label:"Código","float-label":"Código",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",s,[(0,n.bF)(F,{modelValue:e.frm.TRAAPE,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.frm.TRAAPE=l}),label:"Apellidos","float-label":"Apellidos",rules:[function(e){return e.length>=3||"Porfavor indique un dato correcto"}]},null,8,["modelValue","rules"])]),(0,n.Lk)("div",c,[(0,n.bF)(F,{modelValue:e.frm.TRANOM,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.frm.TRANOM=l}),label:"Nombres","float-label":"Nombres",rules:[function(e){return e.length>=3||"Porfavor indique un dato correcto"}]},null,8,["modelValue","rules"])]),(0,n.Lk)("div",A,[(0,n.bF)(F,{modelValue:e.frm.TRADIR,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.frm.TRADIR=l}),label:"Dirección","float-label":"Dirección"},null,8,["modelValue"])]),(0,n.Lk)("div",d,[(0,n.bF)(F,{modelValue:e.frm.TRADOC,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.frm.TRADOC=l}),label:"Documento","float-label":"Documento",rules:[e.validarDocumento]},null,8,["modelValue","rules"])]),(0,n.Lk)("div",f,[(0,n.bF)(F,{modelValue:e.frm.TRATEL,"onUpdate:modelValue":l[5]||(l[5]=function(l){return e.frm.TRATEL=l}),label:"Teléfono","float-label":"Teléfono",rules:[e.validarTelefono]},null,8,["modelValue","rules"])]),(0,n.Lk)("div",m,[(0,n.bF)(F,{modelValue:e.frm.TRACEL,"onUpdate:modelValue":l[6]||(l[6]=function(l){return e.frm.TRACEL=l}),label:"Celular","float-label":"Celular",rules:[e.validarTelefono]},null,8,["modelValue","rules"])]),(0,n.Lk)("div",T,[(0,n.bF)(k,{modelValue:e.frm.TRASEX,"onUpdate:modelValue":l[7]||(l[7]=function(l){return e.frm.TRASEX=l}),options:e.selectSexo,label:e.$t("sexo.sexo"),"float-label":e.$t("sexo.sexo")},null,8,["modelValue","options","label","float-label"])]),(0,n.Lk)("div",R,[(0,n.bF)(F,{modelValue:e.frm.TRAMARCA,"onUpdate:modelValue":l[8]||(l[8]=function(l){return e.frm.TRAMARCA=l}),label:"Marca","float-label":"Marca",maxlength:"30"},null,8,["modelValue"])]),(0,n.Lk)("div",p,[(0,n.bF)(F,{modelValue:e.frm.TRAPLACA,"onUpdate:modelValue":l[9]||(l[9]=function(l){return e.frm.TRAPLACA=l}),label:"Nº Placa","float-label":"Nº Placa",maxlength:"10"},null,8,["modelValue"])]),(0,n.Lk)("div",S,[(0,n.bF)(F,{modelValue:e.frm.TRABRE,"onUpdate:modelValue":l[10]||(l[10]=function(l){return e.frm.TRABRE=l}),label:"Nº Brevete","float-label":"Nº Brevete",maxlength:"10"},null,8,["modelValue"])]),e.USATRASTICKER?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.bF)(F,{modelValue:e.frm.TRASTICKER,"onUpdate:modelValue":l[11]||(l[11]=function(l){return e.frm.TRASTICKER=l}),label:"Sticker","float-label":"Sticker",mask:"####################"},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.USATRAMODELOVEHI?((0,n.uX)(),(0,n.CE)("div",O,[(0,n.bF)(F,{modelValue:e.frm.TRAMODELOVEHI,"onUpdate:modelValue":l[12]||(l[12]=function(l){return e.frm.TRAMODELOVEHI=l}),label:"Mod. Vehículo","float-label":"Mod. Vehículo",maxlength:"20"},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.USATRANROASIENTOSFIJOS?((0,n.uX)(),(0,n.CE)("div",v,[(0,n.bF)(F,{modelValue:e.frm.TRANROASIENTOSFIJOS,"onUpdate:modelValue":l[13]||(l[13]=function(l){return e.frm.TRANROASIENTOSFIJOS=l}),label:"N° Asientos Fijos","float-label":"N° Asientos Fijos"},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.USATRANROPASAJEROS?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.bF)(F,{modelValue:e.frm.TRANROPASAJEROS,"onUpdate:modelValue":l[14]||(l[14]=function(l){return e.frm.TRANROPASAJEROS=l}),label:"N° de Pasajeros: ","float-label":"N° de Pasajeros: "},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.USATRACLASE?((0,n.uX)(),(0,n.CE)("div",C,[(0,n.bF)(F,{modelValue:e.frm.TRACLASE,"onUpdate:modelValue":l[15]||(l[15]=function(l){return e.frm.TRACLASE=l}),label:"Clase","float-label":"Clase",maxlength:"5"},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.USATRACATEGORIA?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.bF)(F,{modelValue:e.frm.TRACATEGORIA,"onUpdate:modelValue":l[16]||(l[16]=function(l){return e.frm.TRACATEGORIA=l}),label:"Categoría","float-label":"Categoría",maxlength:"5"},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.USATRATIEMMOVI?((0,n.uX)(),(0,n.CE)("div",V,[(0,n.bF)(F,{modelValue:e.frm.TRATIEMMOVI,"onUpdate:modelValue":l[17]||(l[17]=function(l){return e.frm.TRATIEMMOVI=l}),label:"Tiempo Movilidad","float-label":"Tiempo Movilidad"},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",I,[(0,n.bF)(k,{modelValue:e.frm.ACTIVO,"onUpdate:modelValue":l[18]||(l[18]=function(l){return e.frm.ACTIVO=l}),options:e.estado,label:"Activo","float-label":"Activo"},null,8,["modelValue","options"])])])]}),_:1},512)])])]}),_:1})]}),_:1})]}),_:1})}var L=a(76080),U=a.n(L),M=a(45254),F=a.n(M),k=(a(76921),a(13600),a(52776),a(37406),a(84433),a(44264),a(6123)),N=a(50425),w=a(9736),D=a(16648),P=a(88567),x=a(95718),Q=a(53380),$=a(88865),y=a(66824),J=a(30640),q=a(93616),G=a(80340),X=a(57668),_=a(65229),H=a(80660),B=a(81288),K=a(2739),j=a(33777),Z={data:function(){return{dinamicos:{ACCIONES:{component:"button",icon:["edit","delete"],permisos:{edit:"> 1",delete:"=== 3"},edit:function(e){this.modalEditar(e)},delete:function(e){this.eliminar(e)},flat:!0,color:"primary"}},configTbl:{columnas:[]},dataDetalle:[]}}},z=a(2819),W=a(39893),Y={directives:{sieActive:_.A},mixins:[Z],components:{QCard:P.A,QCardSection:x.A,QSeparator:Q.A,QItemSection:$.A,QItemLabel:y.A,QInnerLoading:k.SQ,QSpinnerOval:k.VA,QSelect:D.A,QInput:w.A,QTable:N.A,sieModal:J.A,sieSelect:q.A,sieVacio:G.A,QForm:K.A,sieTable:j.A,exportFilePhp:z.exportFilePhp,validarCampoTipo:W.validarCampoTipo,QPage:k.Tu},data:function(){var e=this;return{loadingDetalle:!1,sie:(0,X["default"])(),buttons:[{label:"Agregar",icon:"plus",click:this.agregar},{icon:"save",label:"Guardar",click:this.grabar},{icon:"delete",label:"Eliminar",click:this.eliminar},{icon:"file_pdf",label:"Pdf",click:function(){e.imprimir("pdf")},permiso:">= 1"},{icon:"file_excel",label:"Xls",click:function(){e.imprimir("xls")},permiso:">= 1"}],selectSexo:[{label:"Seleccione...",icon:"man_woman",value:"T"},{label:this.$t("sexo.M"),icon:"specialist_user",value:"M"},{label:this.$t("sexo.F"),icon:"woman",value:"F"}],estado:[{label:"Seleccione",value:"S"},{label:"Activo",value:1},{label:"Inactivo",value:0}],rowSelected:{},frm:{TRACOD:"",TRAAPE:"",TRANOM:"",TRANOMCOM:"",TRADIR:"",TRAMARCA:"",TRAPLACA:"",TRATEL:"",TRADOC:"",TRABRE:"",TRASEX:"T",ZONA:"",ACTIVO:"S",FLAG:"R",TRACEL:"",TRATIEMMOVI:"",TRAMODELOVEHI:"",TRANROASIENTOSFIJOS:"",TRANROPASAJEROS:"",TRACLASE:"",TRACATEGORIA:""},USATRACEL:!1,USATRATIEMMOVI:!1,USATRASTICKER:!1,USATRAMODELOVEHI:!1,USATRANROASIENTOSFIJOS:!1,USATRANROPASAJEROS:!1,USATRACLASE:!1,USATRACATEGORIA:!1}},computed:{isLess:function(){return(0,B.isLess)()}},methods:{configurarTabla:function(){this.configTbl.columnas=[{name:"TRACOD",label:"Código",field:"TRACOD",align:"left",sortable:!0},{name:"TRANOMCOM",label:"Apellidos y nombres",field:"TRANOMCOM",align:"left",sortable:!0}]},validarTelefono:function(e){return!e||(0,W.validarCampoTipo)(e,"telefonos")},agregar:function(){var e=this;return F()(U()().m(function l(){var a,n;return U()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,H.$http.get("api/TransporController/getCodigo");case 1:a=l.v,n=a.CODIGO,e.frm={TRACOD:n,TRAAPE:"",TRANOM:"",TRANOMCOM:"",TRADIR:"",TRAMARCA:"",TRAPLACA:"",TRATEL:"",TRADOC:"",TRABRE:"",TRASEX:"T",ZONA:"",ACTIVO:"S",FLAG:"R",TRACEL:"",TRATIEMMOVI:"",TRAMODELOVEHI:"",TRANROASIENTOSFIJOS:"",TRANROPASAJEROS:"",TRACLASE:"",TRACATEGORIA:""};case 2:return l.a(2)}},l)}))()},seleccionarFila:function(e){var l=this;return F()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:l.rowSelected=e,l.frm=e,l.frm.FLAG="U";case 1:return a.a(2)}},a)}))()},eliminar:function(){var e=this;return F()(U()().m(function l(){return U()().w(function(l){while(1)switch(l.n){case 0:if(e.rowSelected){l.n=1;break}return e.$notify("Por favor seleccione registro a eliminar","warning"),l.a(2,!1);case 1:e.$confirm("¿Realmente desea eliminar este registro?","delete").onOk(F()(U()().m(function l(){var a,n,o;return U()().w(function(l){while(1)switch(l.p=l.n){case 0:return l.p=0,l.n=1,e.$http.delete("api/TransporController/deleteTranspor",{params:{id:e.rowSelected.TRACOD}});case 1:return a=l.v,n=a.message,e.$notify(n,"success"),l.n=2,e.getTransportistas({});case 2:e.dataDetalle=l.v,e.agregar(),l.n=4;break;case 3:l.p=3,o=l.v,e.$notify(o.error.message||"Ocurrió un problema de conexión.","warning");case 4:return l.a(2)}},l,null,[[0,3]])})));case 2:return l.a(2)}},l)}))()},validarDocumento:function(e){var l=new RegExp("^[0-9]{8}$");return l=new RegExp("^[-a-zA-Z0-9]{5,12}$"),!!l.test(e)||"Documento invalido"},imprimir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pdf",l={};l["formato"]=e,l["repcod"]="listadoDeTransportistas",(0,z.exportFilePhp)(l,"intranet/reporte-node/reporte","listadoDeTransportistas")},grabar:function(){var e=this;return F()(U()().m(function l(){var a,n,o,r;return U()().w(function(l){while(1)switch(l.p=l.n){case 0:return l.n=1,e.$refs.form.validate();case 1:if(a=l.v,a){l.n=2;break}return e.$notify("Por favor verifique los campos marcados en rojo","warning"),l.a(2,!1);case 2:if("S"!==e.frm.ACTIVO){l.n=3;break}return e.$notify("Por favor seleccione el estado del transportista","warning"),l.a(2,!1);case 3:return l.p=3,l.n=4,e.$http.post("api/TransporController/guardarTranspor",{data:e.frm});case 4:return n=l.v,o=n.message,e.$notify(o,"success"),l.n=5,e.getTransportistas({});case 5:e.dataDetalle=l.v,l.n=7;break;case 6:l.p=6,r=l.v,e.$notify(r.error.message,"warning");case 7:return l.a(2)}},l,null,[[3,6]])}))()},getTransportistas:function(e){return F()(U()().m(function l(){return U()().w(function(l){while(1)switch(l.n){case 0:return l.a(2,H.$http.get("api/TransporController/getTranspor",{params:{parametros:e}}))}},l)}))()},getConfiguracion:function(){var e=this;return F()(U()().m(function l(){var a;return U()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,H.$http.get("api/TransporController/getConfiguracion");case 1:a=l.v,e.USATRACEL=a.USATRACEL,e.USATRATIEMMOVI=a.USATRATIEMMOVI,e.USATRAMODELOVEHI=a.USATRAMODELOVEHI,e.USATRANROASIENTOSFIJOS=a.USATRANROASIENTOSFIJOS,e.USATRANROPASAJEROS=a.USATRANROPASAJEROS,e.USATRACLASE=a.USATRACLASE,e.USATRACATEGORIA=a.USATRACATEGORIA,e.USATRASTICKER=a.USATRASTICKER||!1;case 2:return l.a(2)}},l)}))()}},created:function(){var e=this;return F()(U()().m(function l(){return U()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,e.getConfiguracion();case 1:return l.n=2,e.configurarTabla();case 2:return l.n=3,e.getTransportistas({});case 3:e.dataDetalle=l.v,e.agregar();case 4:return l.a(2)}},l)}))()}},ee=a(12807);const le=(0,ee.A)(Y,[["render",h]]);var ae=le}}]);