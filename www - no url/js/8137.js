"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[8137],{8137:function(e,s,o){o.r(s),o.d(s,{default:function(){return k}});var a=o(61758),i=o(58790),l={class:"col-xs-12 col-md-6"},t={class:"row"},n={class:"col-xs-6"},r={class:"col-xs-6"},c={class:"row"},u={class:"col-xs-6"},d={class:"col-xs-6"},f={key:0,class:"row"},p={class:"col-xs-4"},h={class:"col-xs-4"},m={class:"col-xs-4"},b={class:"row justify-center"};function v(e,s){var o=(0,a.g2)("q-datetime"),v=(0,a.g2)("sie-select"),D=(0,a.g2)("q-select"),C=(0,a.g2)("q-btn"),g=(0,a.g2)("q-card"),O=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(O,{class:(0,i.C4)(["usoMensajeria column",e.isLess?"bg-white":""])},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",{class:(0,i.C4)(["row col justify-center",e.isLess?"":"items-center"])},[(0,a.Lk)("div",l,[(0,a.bF)(g,{class:(0,i.C4)(["q-px-md q-py-lg",e.isLess?"no-shadow":""])},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",t,[(0,a.Lk)("div",n,[(0,a.bF)(o,{class:"q-if-outlined",modelValue:e.desde,"onUpdate:modelValue":s[0]||(s[0]=function(s){return e.desde=s}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("desde")},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",r,[(0,a.bF)(o,{class:"q-if-outlined",modelValue:e.hasta,"onUpdate:modelValue":s[1]||(s[1]=function(s){return e.hasta=s}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("hasta")},null,8,["modelValue","float-label"])])]),(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.bF)(v,{type:"outlined",modelValue:e.perfil,"onUpdate:modelValue":s[2]||(s[2]=function(s){return e.perfil=s}),options:e.perfiles,onSelected:e.cargarUsuarios,label:"TIPNOM",val:"TIPCOD",placeholder:"navbar.perfil"},null,8,["modelValue","options","onSelected"])]),(0,a.Lk)("div",d,[(0,a.bF)(v,{type:"outlined",modelValue:e.usuario,"onUpdate:modelValue":s[3]||(s[3]=function(s){return e.usuario=s}),options:e.usuarios,label:"USUNOM",val:"USUCOD",placeholder:"usuario.nombre",disable:"004"===e.perfil||"005"===e.perfil},null,8,["modelValue","options","disable"])])]),"004"===e.perfil||"005"===e.perfil?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",p,[(0,a.bF)(D,{class:"q-if-outlined",modelValue:e.nivel,"onUpdate:modelValue":s[4]||(s[4]=function(s){return e.nivel=s}),options:e.niveles,onInput:e.cambiarNivel,"float-label":e.$t("ngs.nivel")},null,8,["modelValue","options","onInput","float-label"])]),(0,a.Lk)("div",h,[(0,a.bF)(D,{class:"q-if-outlined",modelValue:e.grado,"onUpdate:modelValue":s[5]||(s[5]=function(s){return e.grado=s}),options:e.grados,disable:e.disabledGrado,onInput:e.cambiarGrado,"float-label":e.$t("ngs.grado")},null,8,["modelValue","options","disable","onInput","float-label"])]),(0,a.Lk)("div",m,[(0,a.bF)(D,{class:"q-if-outlined",modelValue:e.seccion,"onUpdate:modelValue":s[6]||(s[6]=function(s){return e.seccion=s}),options:e.secciones,disable:e.disabledSeccion,"float-label":e.$t("ngs.seccion"),onInput:e.cargarUsuarios},null,8,["modelValue","options","disable","float-label","onInput"])])])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",b,[(0,a.bF)(C,{class:"q-mx-xs",icon:"file_pdf",color:"secondary",onClick:s[7]||(s[7]=function(s){return e.imprimir("pdf")}),label:"PDF"}),(0,a.bF)(C,{class:"q-mx-xs",icon:"file_excel",color:"secondary",onClick:s[8]||(s[8]=function(s){return e.imprimir("xls")}),label:"EXCEL"})])]}),_:1},8,["class"])])],2)]}),_:1},8,["class"])}o(52133),o(50310),o(6724),o(83190),o(68017);var D=o(6123),C=o(54760),g=o(57668),O=o(93616),S=o(80660),I=o(81288),T={components:{QSelect:D.Si,QDatetime:D.T5,QPageSticky:D._U,QRadio:D.$,QFab:D.l6,QFabAction:D.B$,sieInfo:g["default"],sieSelect:O.A,QPage:D.Tu,QCard:D.C$,QBtn:D.Il},data:function(){return{sieInfo:(0,g["default"])(),perfiles:[],perfil:{},usuarios:[],usuario:{},gradosAgrupados:[],niveles:[],nivel:"",grados:[{label:"Todos",value:{GRADOCOD:"T",GRADODES:"Todos"}}],grado:"",disabledGrado:!0,secciones:[{label:"Todos",value:{SECCIONCOD:"T",SECCIONDES:"Todos"}}],seccion:"",disabledSeccion:!0,desde:new Date,hasta:new Date,formato:"",mostrar:!1}},computed:{isLess:function(){return(0,I.isLess)()},url:function(){var e=this.sieInfo.url+"/intranet/reporte-node/reporte",s={tipcod:this.perfil,instrucod:"T"===this.nivel.INSTRUCOD?"%":this.nivel.INSTRUCOD,gradocod:"T"===this.grado.GRADOCOD?"%":this.grado.GRADOCOD,seccioncod:"T"===this.seccion.SECCIONCOD?"%":this.seccion.SECCIONCOD,fechaDesde:D.p6.formatDate(this.desde,"DD/MM/YYYY"),fechaHasta:D.p6.formatDate(this.hasta,"DD/MM/YYYY"),usucod:this.usuario,repcod:"usoMensajeria",ano:this.sieInfo.ano,usunom:this.sieInfo.nombre.trim(),formato:this.formato};return e+"?"+(0,C.stringify)(s)}},methods:{init:function(){var e=this;S.$http.get("api/HyoInstrus/obtInstru").then(function(s){var o=s.json;o.unshift({INSTRUDES:"Todos",INSTRUCOD:"T"}),e.niveles=o.map(function(e){return{label:e.INSTRUDES,value:e}}),e.nivel=e.niveles[0].value,e.grado=e.grados[0].value,e.seccion=e.secciones[0].value}),S.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:"s",todos:"s"}}).then(function(s){var o=s.json;e.gradosAgrupados=o}),S.$http.get("api/HyoPerfiles/obtPerfilesExistentes",{params:{unicos:"s"}}).then(function(s){var o=s.json;o.unshift({TIPCOD:"%",TIPNOM:"Todos"}),e.perfiles=o,e.perfil=e.perfiles[0].TIPCOD,e.cargarUsuarios()})},cargarUsuarios:function(){var e=this,s={gradocod:"T"===this.grado.GRADOCOD?"%":this.grado.GRADOCOD,instrucod:"T"===this.nivel.INSTRUCOD?"%":this.nivel.INSTRUCOD,seccioncod:"T"===this.seccion.SECCIONCOD?"%":this.seccion.SECCIONCOD,tipcod:"T"===this.perfil?"%":this.perfil};S.$http.get("api/HyoUsuario/obtUsuariosporPerfil",{params:s}).then(function(s){var o=s.json;e.usuarios=o,e.usuario=e.usuarios[0].USUCOD})},cambiarNivel:function(e){this.grados=this.gradosAgrupados[e.INSTRUCOD].map(function(e){return{label:e.GRADODES,value:e}}),this.grado=this.grados[0].value,this.seccion=this.secciones[0].value,this.disabledGrado=!1,"T"===e.INSTRUCOD&&(this.disabledSeccion=!0,this.disabledGrado=!0),this.cargarUsuarios()},cambiarGrado:function(e){var s=this;S.$http.get("api/HyoSalones/obtSecciones",{params:{gradocod:e.GRADOCOD,instrucod:e.INSTRUCOD}}).then(function(o){var a=o.json;a.unshift({SECCIONDES:"Todos",SECCIONCOD:"T"}),s.secciones=a.map(function(e){return{label:e.SECCIONDES,value:e}}),s.seccion=s.secciones[0].value,s.disabledSeccion=!1,"T"===e.GRADOCOD&&(s.disabledSeccion=!0)}),this.cargarUsuarios()},imprimir:function(e){this.formato=e,(0,D.KN)(this.url)}},created:function(){this.init()}},U=o(12807);const N=(0,U.A)(T,[["render",v]]);var k=N}}]);