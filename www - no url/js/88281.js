"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[88281],{88281:function(a,o,t){t.r(o),t.d(o,{default:function(){return pa}});t(56285);var e=t(61758),n=t(58790),i={class:"row col no-wrap"},l={class:"col-3 scroll-y q-px-md-sm q-py-sm"},u={class:"col bg-white overflow-auto no-wrap"},r={class:"q-table-middle"},c={class:"q-table q-table-horizontal-separator q-card"},s={class:"text-bold"},d={class:"text-bold"},f={class:"text-bold"},p={class:"text-bold"},m={class:"text-bold"};function O(a,o){var t=(0,e.g2)("header-btn"),O=(0,e.g2)("q-icon"),I=(0,e.g2)("q-item-side"),A=(0,e.g2)("q-item-main"),D=(0,e.g2)("q-item"),b=(0,e.g2)("q-list"),C=(0,e.g2)("q-card"),g=(0,e.g2)("q-tab"),T=(0,e.g2)("q-td"),h=(0,e.g2)("q-toggle"),v=(0,e.g2)("q-tr"),E=(0,e.g2)("q-table"),S=(0,e.g2)("q-tab-pane"),N=(0,e.g2)("q-th"),P=(0,e.g2)("q-radio"),M=(0,e.g2)("q-tabs"),k=(0,e.g2)("documento"),F=(0,e.g2)("sie-modal"),R=(0,e.g2)("citacion-menu"),_=(0,e.g2)("q-layout-drawer"),L=(0,e.g2)("router-view"),U=(0,e.g2)("q-page");return(0,e.uX)(),(0,e.Wv)(U,{class:(0,n.C4)(["bg-white-mobile intranet-citacion-configuracion",{"q-pa-sm":a.isGreater}])},{default:(0,e.k6)(function(){return[(0,e.bF)(t,{name:a.$t("configuracion"),buttons:a.buttonsConfig},null,8,["name","buttons"]),(0,e.Lk)("div",i,[(0,e.Lk)("div",l,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.myMenu,function(o,t){return(0,e.uX)(),(0,e.CE)(e.FK,null,["principal"===t?((0,e.uX)(),(0,e.Wv)(C,{key:0,class:"q-card-mobile"},{default:(0,e.k6)(function(){return[(0,e.bF)(b,{class:"q-pa-none",link:"",separator:"","no-border":""},{default:(0,e.k6)(function(){return[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(o.child,function(o,i){return(0,e.uX)(),(0,e.Wv)(D,{key:i,class:(0,n.C4)(["q-py-none",{"q-item-active":"configuracion"===o.CARPETA}]),disabled:a.inactive,onClick:function(e){return a.action(t,o)}},{default:(0,e.k6)(function(){return[(0,e.bF)(I,null,{default:(0,e.k6)(function(){return[(0,e.bF)(O,{style:(0,n.Tr)({color:a.inactive?"silver":o.COLOR}),name:o.ICONO},null,8,["style","name"])]}),_:2},1024),(0,e.bF)(A,null,{default:(0,e.k6)(function(){return["configuracion"===o.CARPETA?((0,e.uX)(),(0,e.CE)("span",{key:0,class:"q-body-1",style:(0,n.Tr)({color:a.inactive?"silver":"black"})},(0,n.v_)(a.$t("intranet.mensajeria.configuracion")),5)):(0,e.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["disabled","class","onClick"])}),128))]}),_:2},1024)]}),_:2},1024)):(0,e.Q3)("v-if",!0)],64)}),256))]),(0,e.Lk)("div",u,[(0,e.bF)(M,{class:"q-tabs-flex",modelValue:a.selectTab,"onUpdate:modelValue":o[3]||(o[3]=function(o){return a.selectTab=o}),inverted:""},{title:(0,e.k6)(function(){return[(0,e.bF)(g,{name:"tab-1",label:"Mostrar citas"}),(0,e.bF)(g,{name:"tab-2",label:"Mostrar horarios de atención"})]}),default:(0,e.k6)(function(){return[(0,e.bF)(S,{name:"tab-1"},{default:(0,e.k6)(function(){return[o[5]||(o[5]=(0,e.Lk)("div",null,"Indique que perfiles podrán visualizar todas las citas generadas.",-1)),o[6]||(o[6]=(0,e.Lk)("br",null,null,-1)),(0,e.bF)(E,{data:a.tableDataDest,columns:a.columnsDest,pagination:a.paginationDest,"onUpdate:pagination":o[0]||(o[0]=function(o){return a.paginationDest=o}),"row-key":"TIPCODAC"},{body:(0,e.k6)(function(o){return[(0,e.bF)(v,{props:o},{default:(0,e.k6)(function(){return[(0,e.bF)(T,{data:"Perfiles",key:"TIPNOM",props:o},{default:(0,e.k6)(function(){return[(0,e.eW)((0,n.v_)(o.row.TIPNOM),1)]}),_:2},1032,["props"]),(0,e.bF)(T,null,{default:(0,e.k6)(function(){return[(0,e.bF)(h,{disable:!a.access,modelValue:o.row.ESTADO,"onUpdate:modelValue":function(a){return o.row.ESTADO=a},onInput:function(t){return a.updateProfile(o.row)},"true-value":"S","false-value":"N"},null,8,["disable","modelValue","onUpdate:modelValue","onInput"])]}),_:2},1024)]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1}),(0,e.bF)(S,{name:"tab-2"},{default:(0,e.k6)(function(){return[o[7]||(o[7]=(0,e.Lk)("div",null,"Indique que perfiles podrán visualizar los horarios de atención de todo el personal.",-1)),o[8]||(o[8]=(0,e.Lk)("br",null,null,-1)),(0,e.bF)(E,{data:a.tableDataDestHorario,columns:a.columnsDest,pagination:a.paginationDest,"onUpdate:pagination":o[1]||(o[1]=function(o){return a.paginationDest=o}),"row-key":"TIPCODAC"},{body:(0,e.k6)(function(o){return[(0,e.bF)(v,{props:o},{default:(0,e.k6)(function(){return[(0,e.bF)(T,{data:"Perfiles",key:"TIPNOM",props:o},{default:(0,e.k6)(function(){return[(0,e.eW)((0,n.v_)(o.row.TIPNOM),1)]}),_:2},1032,["props"]),(0,e.bF)(T,null,{default:(0,e.k6)(function(){return[(0,e.bF)(h,{disable:!a.access,modelValue:o.row.ESTADO,"onUpdate:modelValue":function(a){return o.row.ESTADO=a},onInput:function(t){return a.updateProfileHorario(o.row)},"true-value":"S","false-value":"N"},null,8,["disable","modelValue","onUpdate:modelValue","onInput"])]}),_:2},1024)]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1}),(0,e.bF)(S,{name:"tab-3"},{default:(0,e.k6)(function(){return[(0,e.bF)(t,{buttons:a.buttons},null,8,["buttons"]),(0,e.Lk)("div",r,[(0,e.Lk)("table",c,[(0,e.Lk)("thead",null,[(0,e.Lk)("tr",null,[(0,e.Lk)("th",null,[(0,e.bF)(O,{name:"import_export",size:"20px"})]),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.documentos.columns,function(a){return(0,e.uX)(),(0,e.CE)("th",s,(0,n.v_)(a.label),1)}),256)),(0,e.Lk)("th",d,(0,n.v_)(a.$t("tipo")),1),(0,e.Lk)("th",f,(0,n.v_)(a.$t("botones.ver")),1),(0,e.Lk)("th",p,(0,n.v_)(a.$t("botones.editar")),1),(0,e.Lk)("th",m,(0,n.v_)(a.$t("botones.eliminar")),1)])])])])]}),_:1}),(0,e.bF)(S,{name:"tab-4"},{default:(0,e.k6)(function(){return[(0,e.bF)(E,{data:a.tableDataListado,columns:a.columns,pagination:a.paginationDest,"onUpdate:pagination":o[2]||(o[2]=function(o){return a.paginationDest=o}),"row-key":"TIPCODAC"},{header:(0,e.k6)(function(a){return[(0,e.bF)(v,null,{default:(0,e.k6)(function(){return[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.cols,function(o){return(0,e.uX)(),(0,e.Wv)(N,{key:o.name,props:a},{default:(0,e.k6)(function(){return[(0,e.eW)((0,n.v_)(o.label),1)]}),_:2},1032,["props"])}),128)),o[9]||(o[9]=(0,e.Lk)("th",null,null,-1))]}),_:2},1024)]}),body:(0,e.k6)(function(o){return[(0,e.bF)(v,{props:o},{default:(0,e.k6)(function(){return[(0,e.bF)(T,{data:"Perfil",key:"TIPNOM",props:o},{default:(0,e.k6)(function(){return[(0,e.eW)((0,n.v_)(o.row.TIPNOM),1)]}),_:2},1032,["props"]),(0,e.bF)(T,null,{default:(0,e.k6)(function(){return[(0,e.bF)(P,{class:"q-pr-sm",disable:!a.access,onInput:function(t){return a.changeState("A",o.row)},modelValue:o.row.MOSTRAR,"onUpdate:modelValue":function(a){return o.row.MOSTRAR=a},val:"A",label:"Ambos"},null,8,["disable","onInput","modelValue","onUpdate:modelValue"]),(0,e.bF)(P,{class:"q-pr-sm",disable:!a.access,onInput:function(t){return a.changeState("C",o.row)},modelValue:o.row.MOSTRAR,"onUpdate:modelValue":function(a){return o.row.MOSTRAR=a},val:"C",label:"Cargo"},null,8,["disable","onInput","modelValue","onUpdate:modelValue"]),(0,e.bF)(P,{class:"q-pr-sm",disable:!a.access,onInput:function(t){return a.changeState("M",o.row)},modelValue:o.row.MOSTRAR,"onUpdate:modelValue":function(a){return o.row.MOSTRAR=a},val:"M",label:"Cursos"},null,8,["disable","onInput","modelValue","onUpdate:modelValue"]),(0,e.bF)(P,{class:"q-pr-sm",disable:!a.access,onInput:function(t){return a.changeState("N",o.row)},modelValue:o.row.MOSTRAR,"onUpdate:modelValue":function(a){return o.row.MOSTRAR=a},val:"N",label:"Ninguno"},null,8,["disable","onInput","modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1})]}),_:1},8,["modelValue"])]),(0,e.bF)(F,{class:(0,n.C4)(["modal-viewer",{"modal-especial-general":a.isGreater}]),modelValue:a.modalDocumento,"onUpdate:modelValue":o[4]||(o[4]=function(o){return a.modalDocumento=o}),title:a.propsDocumento.tituloModal,footer:!1},{default:(0,e.k6)(function(){return[(0,e.bF)(k,{data:a.propsDocumento,onGrabar:a.guardarDocumento},null,8,["data","onGrabar"])]}),_:1},8,["modelValue","title","class"]),a.isGreater?(0,e.Q3)("v-if",!0):((0,e.uX)(),(0,e.Wv)(_,{key:0,class:"bg-white",side:"right","content-class":"column"},{default:(0,e.k6)(function(){return[(0,e.bF)(R,{class:"col column"})]}),_:1})),(0,e.bF)(L,{class:"col"})])]}),_:1},8,["class"])}var I=t(76080),A=t.n(I),D=t(63053),b=t.n(D),C=t(45254),g=t.n(C),T=(t(10239),t(50310),t(90095),t(83190),t(13715),t(6123)),h=t(96122),v=t(80660),E=t(57668),S=t(982),N=t(13813),P=t(47035),M=t(81288),k={class:"col"},F={class:"col row"},R={class:"col"},_={class:"col row justify-between"},L={key:0,class:"msj-error"},U={key:1},y={class:"q-table q-table-horizontal-separator q-card"},$={class:"ancho-texto"},q={style:{"text-align":"center"}},V=["innerHTML"],w={class:"q-ma-sm"},z={class:"col q-pa-xs border-field q-mb-sm"},H={class:"col row wrap justify-between q-ma-xs",style:{height:"25vh","overflow-y":"scroll"}},Q={class:"col row justify-end"};function G(a,o){var t=(0,e.g2)("q-tab"),i=(0,e.g2)("q-select"),l=(0,e.g2)("q-field"),u=(0,e.g2)("q-toggle"),r=(0,e.g2)("q-input"),c=(0,e.g2)("q-tab-pane"),s=(0,e.g2)("sie-upload"),d=(0,e.g2)("q-btn"),f=(0,e.g2)("q-icon"),p=(0,e.g2)("draggable"),m=(0,e.g2)("q-tabs"),O=(0,e.g2)("sie-editor"),I=(0,e.g2)("sie-modal"),A=(0,e.g2)("q-toolbar");return(0,e.uX)(),(0,e.CE)("div",k,[(0,e.bF)(m,{animated:"",swipeable:"",align:"justify",inverted:"",modelValue:a.tabSelect,"onUpdate:modelValue":o[5]||(o[5]=function(o){return a.tabSelect=o})},{title:(0,e.k6)(function(){return[(0,e.bF)(t,{default:"",name:"config",label:"Configuración"}),1===a.dataConfiguracion.TIPO||4===a.dataConfiguracion.TIPO?((0,e.uX)(),(0,e.Wv)(t,{key:0,name:"documento",label:"Documento"})):(0,e.Q3)("v-if",!0),a.dataConfiguracion.TIPO&&1!==a.dataConfiguracion.TIPO&&4!==a.dataConfiguracion.TIPO?((0,e.uX)(),(0,e.Wv)(t,{key:1,name:"autorizacion",label:2===a.dataConfiguracion.TIPO?"Autorización":"Documento"},null,8,["label"])):(0,e.Q3)("v-if",!0)]}),default:(0,e.k6)(function(){return[(0,e.bF)(c,{class:"col",name:"config","keep-alive":""},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",F,[(0,e.bF)(l,{class:"col",error:a.v$.dataConfiguracion.TIPO.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,e.k6)(function(){return[(0,e.bF)(i,{class:"col q-if-outlined",modelValue:a.v$.dataConfiguracion.TIPO.$model,"onUpdate:modelValue":o[0]||(o[0]=function(o){return a.v$.dataConfiguracion.TIPO.$model=o}),options:a.tipoDocumentos,"float-label":a.$t("tipo"),readonly:a.ocultaArchivo,onInput:a.selecionarTipo},null,8,["modelValue","options","float-label","readonly","onInput"])]}),_:1},8,["error","error-label"]),(0,e.bF)(u,{modelValue:a.dataConfiguracion.ESTADO,"onUpdate:modelValue":o[1]||(o[1]=function(o){return a.dataConfiguracion.ESTADO=o}),"true-value":1,"false-value":0,label:"Activo",color:"secondary"},null,8,["modelValue"])]),(0,e.Lk)("div",R,[(0,e.bF)(l,{class:"col",error:a.v$.dataConfiguracion.TITULO.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,e.k6)(function(){return[(0,e.bF)(r,{class:"q-if-outlined",modelValue:a.v$.dataConfiguracion.TITULO.$model,"onUpdate:modelValue":o[2]||(o[2]=function(o){return a.v$.dataConfiguracion.TITULO.$model=o}),"float-label":a.$t("titulo")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])]}),_:1}),(0,e.bF)(c,{class:"col",name:"documento","keep-alive":""},{default:(0,e.k6)(function(){return[a.ocultaArchivo||3===a.dataConfiguracion.TIPO?(0,e.Q3)("v-if",!0):((0,e.uX)(),(0,e.Wv)(l,{key:0,error:a.v$.detalleDocumento.IMAGEN.$error,"error-label":a.$t("validaciones.requerido")},{default:(0,e.k6)(function(){return[(0,e.bF)(s,{onUpload:a.addFile,icon:"file",title:a.$t("subirArchivos"),allow:["pdf"]},null,8,["onUpload","title"])]}),_:1},8,["error","error-label"]))]}),_:1}),(0,e.bF)(c,{class:"col",name:"autorizacion","keep-alive":"",style:{"overflow-y":"scroll"}},{default:(0,e.k6)(function(){return[o[12]||(o[12]=(0,e.Lk)("div",{class:"q-table-middle"},null,-1)),(0,e.Lk)("div",_,[a.v$.autorizacion.$error?((0,e.uX)(),(0,e.CE)("span",L,"Debe ingresar al menos un registro")):((0,e.uX)(),(0,e.CE)("div",U)),(0,e.bF)(d,{dense:"",flat:"",round:"",icon:"add",onClick:o[3]||(o[3]=function(o){return a.nuevaAceptacion()})})]),(0,e.Lk)("table",y,[(0,e.Lk)("thead",null,[(0,e.Lk)("tr",null,[(0,e.Lk)("th",null,[(0,e.bF)(f,{name:"import_export",size:"20px"})]),(0,e.Lk)("th",$,[(0,e.Lk)("span",null,(0,n.v_)(a.$t("matricula.descripcion")),1)]),(0,e.Lk)("th",null,[(0,e.Lk)("span",null,(0,n.v_)(a.$t("tipo")),1)]),(0,e.Lk)("th",null,[(0,e.Lk)("span",null,(0,n.v_)(a.$t("activo")),1)]),o[10]||(o[10]=(0,e.Lk)("th",null,null,-1)),o[11]||(o[11]=(0,e.Lk)("th",null,null,-1))])]),(0,e.bF)(p,{modelValue:a.detalleAutorizacion,"onUpdate:modelValue":o[4]||(o[4]=function(o){return a.detalleAutorizacion=o}),tag:"tbody",onChange:a.ordenaAutorizacion},{default:(0,e.k6)(function(){return[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.detalleAutorizacion,function(o,t){return(0,e.uX)(),(0,e.CE)("tr",{key:o.ORDEN},[(0,e.Lk)("td",q,[(0,e.bF)(f,{name:"blur_on",size:"20px"})]),(0,e.Lk)("td",{innerHTML:o.DESCRIPCION},null,8,V),(0,e.Lk)("td",null,[(0,e.bF)(i,{modelValue:o.TIPO,"onUpdate:modelValue":function(a){return o.TIPO=a},options:a.tipoAceptacion,readonly:""},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,e.Lk)("td",null,[(0,e.bF)(u,{modelValue:o.ESTADO,"onUpdate:modelValue":function(a){return o.ESTADO=a},"true-value":"S","false-value":"N",color:"secondary",onInput:function(t){return a.disableAut(o)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]),(0,e.Lk)("td",null,[(0,e.bF)(d,{dense:"",raised:"",flat:"",round:"",icon:"edit",onClick:function(t){return a.nuevaAceptacion(o)}},null,8,["onClick"])]),(0,e.Lk)("td",null,[(0,e.bF)(d,{dense:"",raised:"",flat:"",round:"",icon:"delete",onClick:function(e){return a.eliminarAutorizacion(o,t)}},null,8,["onClick"])])])}),128))]}),_:1},8,["modelValue","onChange"])])]}),_:1})]}),_:1},8,["modelValue"]),(0,e.bF)(I,{modelValue:a.modalNvAceptacion,"onUpdate:modelValue":o[8]||(o[8]=function(o){return a.modalNvAceptacion=o}),title:"Documento",onSubmit:o[9]||(o[9]=function(o){return a.agregarAutorizacion(a.nvAceptacionData)})},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",w,[(0,e.bF)(i,{class:"col q-if-outlined",options:a.tipoAceptacionFiltrado,modelValue:a.nvAceptacionData.TIPO,"onUpdate:modelValue":o[6]||(o[6]=function(o){return a.nvAceptacionData.TIPO=o}),"float-label":a.$t("tipo")},null,8,["options","modelValue","float-label"]),(0,e.Lk)("fieldset",z,[o[13]||(o[13]=(0,e.Lk)("legend",{class:"leyenda"},"Documento por:",-1)),(0,e.Lk)("div",H,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.campos,function(a){return(0,e.uX)(),(0,e.CE)("div",{key:a.campo,class:"col-5"},[(0,e.Lk)("b",null,(0,n.v_)(a.desc+": "),1),(0,e.Lk)("span",null,(0,n.v_)(a.campo),1)])}),128))])]),(0,e.bF)(O,{class:"col",modelValue:a.nvAceptacionData.DESCRIPCION,"onUpdate:modelValue":o[7]||(o[7]=function(o){return a.nvAceptacionData.DESCRIPCION=o}),label:a.$t("matricula.descripcion"),extra:{ruler:!0}},null,8,["modelValue","label"])])]}),_:1},8,["modelValue"]),(0,e.bF)(A,{class:"bg-grey-2"},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",Q,[(0,e.bF)(d,{color:"primary",label:a.$t("botones.guardar"),onClick:a.guardarDocumento},null,8,["label","onClick"])])]}),_:1})])}var j=t(57008),x=t.n(j),X=t(8445),B=t.n(X),J=(t(30683),t(52133),t(89571),t(6724),t(515),t(83972)),W=t(30545),K=t(93616),Z=t(30640),Y=t(6083),aa=t(59089),oa=t(39231),ta=t(33950),ea=t(33001),na=t(69027),ia=t(82640),la=oa.Hi,ua={setup:function(){var a=(0,J.fG)();return{v$:a}},emits:["grabar"],props:["data","configuracion","niveles","grados","secciones"],components:{QPageSticky:T._U,QTabs:T.uw,QTab:T.zu,QTabPane:T.dg,QSelect:T.Si,QToggle:T.c5,QLayoutFooter:T.Dl,QTable:W.A,sieSelect:K.A,sieModal:Z.A,sieEditor:Y.A,draggable:la,sieUpload:aa.A,filterArray:ea.filterArray,QField:T.Om,QInput:T.ie,QBtn:T.Il,QIcon:T.bP,QToolbar:T.ZV},data:function(){return{sie:(0,E["default"])(),dataConfiguracion:{INSTRUCOD:"T",GRADOCOD:"T"},documentos:[],especial:!1,ocultaArchivo:null,tipoDocumentos:[{label:"Subir Documento",value:1},{label:"Doc. Creado",value:3}],listaBotones:[],listaAlumnos:[],autorizacion:!1,detalleAutorizacion:[],detalleDocumento:{},tipoAceptacion:[{label:"ENCABEZADO",value:3,formulario:!1},{label:"CUERPO",value:2,formulario:!1},{label:"PIE",value:4,formulario:!1}],tipoAceptacionFiltrado:[],modalDocumento:!0,modalNvAceptacion:!1,nvAceptacionData:{TIPO:2,DESCRIPCION:null,ESTADO:"S"},filter:null,campos:[{campo:"{{ALUCOD}}",desc:"Codigo del Alumno"},{campo:"{{NOMCOMP}}",desc:"Nombre completo del Alumno"},{campo:"{{FAMTEL}}",desc:"Teléfono Familia"},{campo:"{{FAMDIR}}",desc:"Dirección Familia"},{campo:"{{MODO}}",desc:"Modalidad"},{campo:"{{SALA}}",desc:"Sala"},{campo:"{{ASUNTO}}",desc:"Asunto"},{campo:"{{FECHA}}",desc:"Fecha"},{campo:"{{FH_INICIO}}",desc:"Hora Inicio"},{campo:"{{FH_FIN}}",desc:"Hora Fin"},{campo:"{{ENTREVISTADOS}}",desc:"Entrevistador"},{campo:"{{ENTREVISTADORES}}",desc:"Entrevistadores"}],objImg:{},idDetalle:null,dataAulas:[],aulasSelect:[],tabSelect:""}},methods:{disableAut:function(a){var o=a.ID,t=a.ESTADO,e={ID:o,ESTADO:t};v.$http.post("api/HyoMatriculaautorizaciones/grabaAutorizaciones",{actualiza:e})},eliminarAutorizacion:function(a,o){var t=this,e={ID:a.ID};(0,na.dialogConfirm)({message:this.$t("mensajes.m0006.confirmacion")}).then(function(n){n&&(a.ID?v.$http.post("api/HyoMatriculaautorizaciones/eliminaAutorizacion",e).then(function(a){var o=a.json,e="warning"===o.icono?"error":o.icono;(0,S["default"])(t.$t("mensajes."+o.mensaje),e),"error"!==e&&t.cargaAutorizaciones()}):t.detalleAutorizacion.splice(o,1))})},addFile:function(a){var o=this;(0,ta.Upload)({url:"api/HyoArchivo/tmp/upload",file:a[0]}).then(function(a){o.detalleDocumento.objImg=a}).catch(function(){})},cargaAutorizaciones:function(){var a=this;v.$http.get("api/HyoMatriculaautorizaciones/obtAutorizaciones",{params:{confId:this.data.infoDocumento.ID}}).then(function(o){var t=o.json;t.forEach(function(a,o){a.$index=o}),a.detalleAutorizacion=t})},guardarDocumento:function(){var a=this;if(this.v$.$touch(),this.v$.$invalid)this.v$.dataConfiguracion.$invalid?this.tabSelect="config":this.v$.detalleDocumento.$invalid&&(this.tabSelect="documento");else{var o={dataConfig:this.dataConfiguracion};[1,4].indexOf(this.dataConfiguracion.TIPO)>=0?o.dataDoc=this.detalleDocumento:(3===this.dataConfiguracion.TIPO&&Object.keys(this.detalleDocumento).forEach(function(t){"objImg"!==t&&(o.dataConfig[t]=a.detalleDocumento[t])}),o.detAut=this.detalleAutorizacion),this.configuracion["M_DOCUMENTO_SECCION"]&&(o.salones=this.aulasSelect),this.$emit("grabar",o)}},selecionarTipo:function(a){4===a&&(this.dataConfiguracion.DESCARGA_INICIO=1)},nuevaAceptacion:function(a){var o=this;this.nvAceptacionData=a||{TIPO:2,DESCRIPCION:null,ESTADO:"S",ORDEN:this.detalleAutorizacion.length+1},this.tipoAceptacionFiltrado=B()(this.tipoAceptacion),2!==this.dataConfiguracion.TIPO&&(this.tipoAceptacionFiltrado=(0,ea.filterArray)(!1,{field:"formulario",list:this.tipoAceptacion}));var t=[];this.detalleAutorizacion.forEach(function(e){var n=e.TIPO;n&&[3,4].indexOf(n)>=0&&(!a||n!==a.TIPO)&&t.unshift(o.tipoAceptacionFiltrado.map(function(a){var o=a.value;return o}).indexOf(n))}),t.length>0&&t.forEach(function(a){o.tipoAceptacionFiltrado.splice(a,1)}),this.modalNvAceptacion=!0},limpiarSecucod:function(){this.dataConfiguracion.SECUCOD=null},agregarAutorizacion:function(a){if((a.TIPO||0===a.TIPO)&&a.DESCRIPCION){if(a.ID){this.detalleAutorizacion[a.ORDEN-1]=a;var o=x()({},a);delete o.$index,v.$http.post("api/HyoMatriculaautorizaciones/grabaAutorizaciones",{actualiza:o})}else{if(this.data.infoDocumento.ID){var t=x()({},a);t.padre=this.idDetalle,v.$http.post("api/HyoMatriculaautorizaciones/grabaAutorizaciones",{graba:t})}a.ORDEN?this.detalleAutorizacion[a.ORDEN-1]=a:this.detalleAutorizacion.push(a)}this.modalNvAceptacion=!1}},ordenaAutorizacion:function(a){if(a=a.moved,a.element.ID){var o=[];this.detalleAutorizacion.forEach(function(a,t){a.ORDEN!==t+1&&(a.ORDEN=t+1,o.push({ID:a.ID,ORDEN:t+1}))}),v.$http.get("api/HyoMatriculaautorizaciones/actualizaOrden",{params:{arreglo:o}})}else this.detalleAutorizacion.forEach(function(a,o){a.ORDEN!==o+1&&(a.ORDEN=o+1)})},cargaSalones:function(a){var o=this;v.$http.get("api/HyoSalones/getSalonesMatricula",{params:{ID:a,ANO:this.anoMat}}).then(function(a){o.dataAulas=a,o.aulasSelect=[],a.forEach(function(a){a.ID&&o.aulasSelect.push(a)})})}},validations:function(){var a=this,o=function(){return 1===a.dataConfiguracion.DESCARGA_INICIO||1===a.dataConfiguracion.DESCARGA_FINAL},t=function(){return[1,3].indexOf(a.dataConfiguracion.TIPO)<0||0===a.detalleDocumento.TIPO_ACEPTACION||null!==a.detalleDocumento.MODO_ACEPTACION},e=function(){return[1,3].indexOf(a.dataConfiguracion.TIPO)<0||0===a.detalleDocumento.TIPO_ACEPTACION||null!==a.detalleDocumento.MSJ_SI},n=function(){return[1,3].indexOf(a.dataConfiguracion.TIPO)<0||0===a.detalleDocumento.TIPO_ACEPTACION||null!==a.detalleDocumento.MSJ_NO||1!==a.detalleDocumento.MODO_ACEPTACION},i=function(){return 2!==a.dataConfiguracion.TIPO||a.detalleAutorizacion.length>0},l=function(){return a.ocultaArchivo||1!==a.dataConfiguracion.TIPO||Object.keys(a.detalleDocumento.objImg).length>0},u=function(){return!a.configuracion["M_DOCUMENTO_SECCION"]||a.aulasSelect.length>0};return{dataConfiguracion:{TIPO:{required:ia.mw},TITULO:{required:ia.mw},IMPRIMIR:{validaImprimir:o}},detalleDocumento:{MODO_ACEPTACION:{validarModo:t},MSJ_SI:{validaSi:e},MSJ_NO:{validaNo:n},IMAGEN:{validaImagen:l}},autorizacion:{validaAutorizacion:i},salones:u}},mounted:function(){var a=this;"S"!==this.reserva&&(this.tipoDocumentos.push({label:"Formulario",value:2}),this.especial=!0,v.$http.get("api/HyoTablaSe/obtArrayDatos",{params:{princods:["docusMatricula"],objOrden:{campos:"SECUDES",orden:"asc"}}}).then(function(o){var t=o.json;a.documentos=t.alias})),console.log("data",this.data),this.ocultaArchivo=!!this.data.infoDocumento.ID,this.detalleAutorizacion=[],this.detalleDocumento={TIPO_ACEPTACION:0,MODO_ACEPTACION:null,MSJ_SI:null,ESPECIAL:null,MSJ_NO:null,objImg:{}},this.configuracion["M_CONF_BOTONES"]&&v.$http.get("api/HyoMatriculaBotones/getMatriculaBotones",{params:{ano:this.anoMat}}).then(function(o){var t=o.json;[0,1].indexOf(t.length)+1&&t.unshift({ID_BTN:null,TEXTO:"Ninguno"}),a.listaBotones=t}),this.configuracion["M_DOCUMENTO_ALUMNO"]&&v.$http.get("api/HyoAlumnos/obtAlumnosDisponibles",{params:{ano:this.anoMat}}).then(function(o){var t=o.json;a.listaAlumnos=t}),this.dataConfiguracion={TIPO:null,ORDEN:null,ANO:this.anoMat,DESCARGA_INICIO:0,DESCARGA_FINAL:0,LISTA:0,BACHILLERATO:0,ANT_ALUMNO:0,ID_BTN:null,GRUPO:null,INSTRUCOD:"T",GRADOCOD:"T",SECCIONCOD:"T",TITULO:null,DOCUALUMNO:!1,ALUCOD:null,ESTADO:1,IMPRIMIR:null,SOLO_ANT:0,ENVIAR_MENSAJE:0};var o=[],t=[{campo:"{{MONTOPEN}}",desc:"Monto de pensiones"},{campo:"{{MONTOTOT}}",desc:"Monto total de pensiones"},{campo:"{{HOY}}",desc:"Fecha Actual"},{campo:"{{FECHAMATRICULA}}",desc:"Fecha de matrícula"},{campo:"{{PAGINA}}",desc:"Número de página"},{campo:"{{PAGINAS}}",desc:"Número total de páginas"},{campo:"{{SEGURO}}",desc:"Nombre del Seguro"},{campo:"{{NUMSEGURO}}",desc:"Nro Seguro Particular"},{campo:"{{FAMDIST}}",desc:"Distrito Familia"}];if(1==this.configuracion["M_SUBIR_FIRMAS"]?(t.unshift({campo:"{{FIRMAFAMRESM}}",desc:"Firma responsable de matricula"}),t.unshift({campo:"{{FIRMAFAMRESP}}",desc:"Firma responsable de pago"}),t.unshift({campo:"{{FIRMAAPODERADO}}",desc:"Firma Apoderado"}),t.unshift({campo:"{{FIRMAMADRE}}",desc:"Firma Madre"}),t.unshift({campo:"{{FIRMAPADRE}}",desc:"Firma Padre"})):2==this.configuracion["M_SUBIR_FIRMAS"]&&(t.unshift({campo:"{{FIRMAAPODERADO}}",desc:"Firma Apoderado"}),t.unshift({campo:"{{FIRMAMADRE}}",desc:"Firma Madre"}),t.unshift({campo:"{{FIRMAPADRE}}",desc:"Firma Padre"})),this.campos=[].concat(B()(this.campos),t),this.campos=[].concat(B()(this.campos),o),this.ocultaArchivo){this.dataConfiguracion.TITULO=this.data.infoDocumento.TITULO;var e={id:this.data.infoDocumento.ID,tipo:this.data.infoDocumento.TIPO,configuracion:this.configuracion};v.$http.post("api/HyoMatriculadocumentosconf/obtDetalleDocumento",e).then(function(o){var t=o.json,e=t;console.log(a.configuracion["M_DOCUMENTO_SECCION"]),a.configuracion["M_DOCUMENTO_SECCION"]&&a.cargaSalones(a.data.infoDocumento.ID),a.idDetalle=t.IDAUTORIZACION,t.IDAUTORIZACION&&(a.dataConfiguracion.IDAUTORIZACION=t.IDAUTORIZACION),a.dataConfiguracion.ID=e.ID,a.dataConfiguracion.ESTADO=e.ESTADO,a.dataConfiguracion.TIPO=e.TIPO,a.dataConfiguracion.ORDEN=e.ORDEN,a.dataConfiguracion.ANO=e.ANO,a.dataConfiguracion.DESCARGA_INICIO=e.DESCARGA_INICIO,a.dataConfiguracion.DESCARGA_FINAL=e.DESCARGA_FINAL,a.dataConfiguracion.LISTA=e.LISTA,a.dataConfiguracion.BACHILLERATO=e.BACHILLERATO,a.dataConfiguracion.ID_BTN=e.ID_BTN,a.dataConfiguracion.GRUPO=e.GRUPO,a.dataConfiguracion.ANT_ALUMNO=e.ANT_ALUMNO,a.dataConfiguracion.ALUCOD=e.ALUCOD,a.dataConfiguracion.IDGRADO=e.IDGRADO,a.dataConfiguracion.IDDOCUMENTO=e.IDDOCUMENTO,a.dataConfiguracion.SOLO_ANT=e.SOLO_ANT,a.dataConfiguracion.ENVIAR_MENSAJE=e.ENVIAR_MENSAJE,a.configuracion["M_DOCUMENTO_SECCION"]||(a.dataConfiguracion.INSTRUCOD=e.INSTRUCOD,a.dataConfiguracion.GRADOCOD=e.GRADOCOD,a.dataConfiguracion.SECCIONCOD=e.SECCIONCOD),e.ALUCOD&&(a.dataConfiguracion.DOCUALUMNO=!0),a.detalleDocumento.TIPO_ACEPTACION=e.TIPO_ACEPTACION,a.detalleDocumento.MODO_ACEPTACION=e.MODO_ACEPTACION,a.detalleDocumento.MSJ_SI=e.MSJ_SI,a.detalleDocumento.ESPECIAL=e.ESPECIAL,a.detalleDocumento.MSJ_NO=e.MSJ_NO,a.dataConfiguracion.SECUCOD=e.SECUCOD}),1!==this.data.infoDocumento.TIPO&&this.cargaAutorizaciones()}else this.cargaSalones()},computed:{isLess:function(){return(0,M.isLess)()}}},ra=t(12807);const ca=(0,ra.A)(ua,[["render",G]]);var sa=ca,da={components:{QPageSticky:T._U,QTabs:T.uw,QTab:T.zu,QTabPane:T.dg,QTable:T.kH,QTh:T.EJ,QTr:T.qh,QTd:T.Ef,QRadio:T.$,QToggle:T.c5,QList:T.Mb,QItem:T.H0,QItemMain:T.mF,QItemSide:T.n1,QPopover:T.VM,QSelect:T.Si,QScrollArea:h.A,documento:sa,SieModal:Z.A,QPage:T.Tu,QCard:T.C$,QIcon:T.bP,QLayoutDrawer:T.D2},data:function(){var a=this;return{data:{},inactive:!1,selectTab:"tab-1",dataSelect:[],tableDataDest:[],tableDataDestHorario:[],tableDataListado:[],perfilesIntranet:[],access:!1,modulo:"intranet",myMenu:{principal:{child:[{USUCOD:"CONFIGURATION",CARPETA:"configuracion",TIPO:"S",ICONO:"settings",COLOR:"#2196F3"}]}},columnsDest:[{name:"TIPNOM",required:!0,label:"Perfiles",field:"TIPNOM",align:"left"},{name:"ESTADO",required:!0,label:"Estado",field:"ESTADO",align:"left"}],columns:[{name:"TIPNOM",required:!0,label:"Perfil",field:"TIPNOM",align:"left"}],documentos:{columns:[{name:"ORDENAR",align:"center"},{name:"TITULO",label:this.$t("titulo"),field:"TITULO",align:"left"},{name:"USUCOD",label:this.$t("usuario.nombre"),field:"USUCOD",align:"center"},{name:"FH_REGISTRO",label:this.$t("siedatepicker.date"),field:"FH_REGISTRO",align:"center"}]},buttons:[{icon:"plus",label:"Nuevo",click:function(){a.crearDocumento()}}],buttonsConfig:[{icon:"arrow_back",label:"Atrás",click:function(){a.$router.push({name:"".concat(a.modulo,".citacion.listado")})}}],propsDocumento:{tituloModal:null,bloquearDocumento:!1},modalDocumento:!1,paginationDest:{page:1,rowsPerPage:8}}},computed:{isGreater:function(){return(0,M.isGreater)()}},methods:{updateProfile:function(a){var o=this;v.$http.post("api/HyoCita/updatePerfilesDiponibles",{estado:a.ESTADO,tipcod:a.TIPCOD,tipnom:a.TIPNOM}).then(function(a){var t=a.json;(0,S["default"])(o.$t("mensajes."+t))}).catch(function(){(0,S["default"])("Ha ocurrido un problema en tu conexión vuelve a intentarlo.","warning")})},updateProfileHorario:function(a){var o=this;v.$http.post("api/HyoCita/updatePerfilesDiponiblesHorario",{estado:a.ESTADO,tipcod:a.TIPCOD,tipnom:a.TIPNOM}).then(function(a){var t=a.json;(0,S["default"])(o.$t("mensajes."+t))}).catch(function(){(0,S["default"])("Ha ocurrido un problema en tu conexión vuelve a intentarlo.","warning")})},changeState:function(a,o){var t=this;v.$http.post("api/HyoCita/updatePerfilesDiponiblesCitaListado",{estado:o.ESTADO,tipcod:o.TIPCOD,tipnom:o.TIPNOM,mostrar:a}).then(function(a){var o=a.json;(0,S["default"])(t.$t("mensajes."+o))}).catch(function(){(0,S["default"])("Ha ocurrido un problema en tu conexión vuelve a intentarlo.","warning")})},crearDocumento:function(a){this.modalDocumento=!0,this.propsDocumento.bloquearDocumento=!1,this.propsDocumento.tituloModal="Nuevo Documento"},guardarDocumento:function(){}},created:function(){var a=this;return g()(A()().m(function o(){var t,e,n;return A()().w(function(o){while(1)switch(o.n){case 0:return null!==(t=a.$router)&&void 0!==t&&null!==(t=t.options)&&void 0!==t&&t.history&&"object"===b()(a.$route)&&(e=a.$route.name.split("."),a.modulo=e[0]),o.n=1,v.$http.get("api/HyoTipusus/obtPerfilesIntranet");case 1:n=o.v,a.perfilesIntranet=(0,N["default"])(n.json,function(a){return{MOSTRAR:a.MOSTRAR,ESTADO:"N",TIPCOD:a.TIPCOD,TIPNOM:a.TIPNOM}}),(0,v.$http)("api/HyoCita/obtPerfilesDiponiblesCitas",{}).then(function(o){var t=o.json,e=[];a.perfilesIntranet.forEach(function(a){var o=0;if(t.forEach(function(t){t.TIPCOD===a.TIPCOD&&(e.push(t),o++)}),!o){var n={MOSTRAR:"N",ESTADO:"N",TIPCOD:a.TIPCOD,TIPNOM:a.TIPNOM};e.push(n)}}),a.tableDataDest=(0,P["default"])(e,"asc","TIPNOM")}),(0,v.$http)("api/HyoCita/obtPerfilesDiponiblesCitaHorario",{}).then(function(o){var t=o.json,e=[];a.perfilesIntranet.forEach(function(a){var o=0;if(t.forEach(function(t){t.TIPCOD===a.TIPCOD&&(e.push(t),o++)}),!o){var n={MOSTRAR:"N",ESTADO:"N",TIPCOD:a.TIPCOD,TIPNOM:a.TIPNOM};e.push(n)}}),a.tableDataDestHorario=(0,P["default"])(e,"asc","TIPNOM")}),(0,v.$http)("api/HyoCita/obtPerfilesDiponiblesCitaListado",{}).then(function(o){var t=o.json,e=[];a.perfilesIntranet.forEach(function(a){var o=0;if(t.forEach(function(t){t.TIPCOD===a.TIPCOD&&(e.push(t),o++)}),!o){var n={MOSTRAR:a.MOSTRAR,ESTADO:"S",TIPCOD:a.TIPCOD,TIPNOM:a.TIPNOM};e.push(n)}}),a.tableDataListado=(0,P["default"])(e,"asc","TIPNOM")}),a.access=["SIE","SIEWEB","DEMO"].indexOf((0,E["default"])().usucod)>=0;case 2:return o.a(2)}},o)}))()}};const fa=(0,ra.A)(da,[["render",O]]);var pa=fa}}]);