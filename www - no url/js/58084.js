"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[58084],{58084:function(e,o,l){l.r(o),l.d(o,{default:function(){return be}});var n=l(8445),a=l.n(n),t=l(61758),i=l(58790),r={class:"q-ma-sm column"},s={class:"q-col-gutter-sm"},u={class:"row q-col-gutter-sm"},c={class:"row q-col-gutter-sm"},d={class:"row q-col-gutter-sm"},m={class:"row q-col-gutter-sm"},f={class:"q-mb-sm"},p={class:"q-mb-sm"},O={class:"row q-col-gutter-sm"},b={class:"q-mb-sm"},g={class:"row q-col-gutter-sm"},D={class:"q-ma-sm"},I={class:"q-mb-sm"},E={class:"row q-col-gutter-sm"},h={class:"q-mb-sm"},C={class:"row q-col-gutter-sm"},P={class:"q-mb-sm"},v={class:"row q-col-gutter-sm"},A={class:"q-mb-sm"},S={class:"column q-col-gutter-sm"},T={class:"q-mb-sm"},N={class:"row q-col-gutter-sm"},R={class:"q-mb-sm"},F={class:"row q-col-gutter-sm"},M={class:"q-mb-sm"},V={class:"row q-col-gutter-sm"},k={class:"row justify-end col"},w={class:"row justify-end col"},_={class:"q-my-sm"},U={class:"q-card column"},q={class:"q-ma-sm"},L={class:"q-col-gutter-sm"},y={class:"row q-col-gutter-sm"},$={class:"col-4 row q-col-gutter-sm"},G={class:"row q-col-gutter-sm"},x={class:"col-4 row q-col-gutter-sm"};function H(e,o){var l=this,n=(0,t.g2)("sie-pdf"),H=(0,t.g2)("sie-modal"),J=(0,t.g2)("q-input"),Q=(0,t.g2)("q-select"),j=(0,t.g2)("q-list-header"),B=(0,t.g2)("q-icon"),Y=(0,t.g2)("q-item-section"),W=(0,t.g2)("q-item-label"),X=(0,t.g2)("q-item"),z=(0,t.g2)("q-list"),Z=(0,t.g2)("sie-upload"),K=(0,t.g2)("sie-table"),ee=(0,t.g2)("q-form"),oe=(0,t.g2)("header-btn"),le=(0,t.g2)("q-tab"),ne=(0,t.g2)("q-btn"),ae=(0,t.g2)("q-toolbar"),te=(0,t.g2)("q-tab-pane"),ie=(0,t.g2)("q-tabs"),re=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(re,{class:"intranet--horario q-pa-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(H,{class:"modal-pdf",modelValue:e.modalPdf,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.modalPdf=o}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{class:"pdf-content",src:e.rutaPdf},null,8,["src"])]}),_:1},8,["modelValue"]),(0,t.bF)(H,{class:"modal-configuracion",modelValue:e.modalDetail,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.modalDetail=o}),title:"Detalle de "+e.infoDetalle.IDNEW,ok:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",s,[(0,t.Lk)("div",u,[(0,t.bF)(J,{class:"col",modelValue:e.infoDetalle.NOMCOMP,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.infoDetalle.NOMCOMP=o}),readonly:"",label:"Solicitado para"},null,8,["modelValue"])]),(0,t.Lk)("div",c,[(0,t.bF)(Q,{class:"col",modelValue:e.infoDetalle.ID_IMPRESION,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.infoDetalle.ID_IMPRESION=o}),options:e.tipos,"option-value":"ID","option-label":"CAMPODES",label:"Área",readonly:""},null,8,["modelValue","options"])]),(0,t.Lk)("div",d,[(0,t.bF)(J,{class:"col",modelValue:e.infoDetalle.IDNEW,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.infoDetalle.IDNEW=o}),readonly:"",label:"Codigo"},null,8,["modelValue"]),(0,t.bF)(J,{class:"col",modelValue:e.infoDetalle.FH_REGISTRO,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.infoDetalle.FH_REGISTRO=o}),readonly:"",label:"Fecha Solicitud"},null,8,["modelValue"]),(0,t.bF)(J,{class:"col",modelValue:e.infoDetalle.FECHA,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.infoDetalle.FECHA=o}),readonly:"",label:"Fecha Impresion",type:"date"},null,8,["modelValue"])]),(0,t.Lk)("div",m,[(0,t.bF)(J,{class:"col",modelValue:e.infoDetalle.CANTIDAD,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.infoDetalle.CANTIDAD=o}),label:"Cantidad",readonly:""},null,8,["modelValue"]),(0,t.bF)(Q,{class:"col",modelValue:e.infoDetalle.TAMANO_PAPEL,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.infoDetalle.TAMANO_PAPEL=o}),options:e.tamPap,"option-value":"SECUCOD","option-label":"SECUDES",label:"Tamaño de papel",readonly:""},null,8,["modelValue","options"])]),(0,t.Lk)("div",f,[e.infoDetalle.ADJUNTOS&&e.infoDetalle.ADJUNTOS.length>0?((0,t.uX)(),(0,t.Wv)(z,{key:0},{default:(0,t.k6)(function(){return[(0,t.bF)(j,null,{default:(0,t.k6)(function(){return a()(o[33]||(o[33]=[(0,t.eW)("Archivos",-1)]))}),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.infoDetalle.ADJUNTOS,function(o){return(0,t.uX)(),(0,t.Wv)(X,{clickable:"",onClick:function(l){return e.showPdf(o)}},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{avatar:"",top:""},{default:(0,t.k6)(function(){return[(0,t.bF)(B,{name:"file_pdf_o"})]}),_:1}),(0,t.bF)(Y,null,{default:(0,t.k6)(function(){return[(0,t.bF)(W,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,i.v_)(o.ADJUNTO_NOMBRE),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["onClick"])}),256))]}),_:1})):(0,t.Q3)("v-if",!0),(0,t.Q3)('div.row.q-col-gutter-sm(v-if="infoDetalle.ADJUNTOS && infoDetalle.ADJUNTOS.length>0")fieldset.col.q-px-xs.q-mx-xs.q-mb-sm.border-field\n  legend.leyenda Documentos\n  template(v-for="adjunto in infoDetalle.ADJUNTOS")\n    .row\n      q-btn.col(@click="showPdf(adjunto)" icon="file_pdf_o" :label="adjunto.ADJUNTO_NOMBRE")\n    //q-download-file(:src="getUrl(adjunto)" :item="adjunto" :name="adjunto.ADJUNTO_NOMBRE" :extension="adjunto.EXTENSION" :inline="false" v-if="adjunto.EXTENSION")\n    //span {{getUrl(adjunto)}}')]),(0,t.Lk)("div",p,[(0,t.Lk)("div",O,[(0,t.bF)(Q,{class:"col",modelValue:e.infoDetalle.TIPO_PAPEL,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.infoDetalle.TIPO_PAPEL=o}),options:e.tipo,"option-value":"SECUCOD","option-label":"SECUDES",label:"Tipo de papel",readonly:""},null,8,["modelValue","options"]),(0,t.bF)(Q,{class:"col",modelValue:e.infoDetalle.ORIENTACION,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.infoDetalle.ORIENTACION=o}),options:e.orientacion,"option-value":"SECUCOD","option-label":"SECUDES",label:"Orientación",readonly:""},null,8,["modelValue","options"]),(0,t.bF)(Q,{class:"col",modelValue:e.infoDetalle.ENGRAPADO,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.infoDetalle.ENGRAPADO=o}),options:e.engrapado,"option-value":"SECUCOD","option-label":"SECUDES",label:"Engrapado",readonly:""},null,8,["modelValue","options"])])]),(0,t.Lk)("div",b,[(0,t.Lk)("div",g,[(0,t.bF)(J,{class:"col",modelValue:e.infoDetalle.COMENTARIO_REGISTRO,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.infoDetalle.COMENTARIO_REGISTRO=o}),label:"Comentario",type:"textarea",readonly:""},null,8,["modelValue"])])])])])]}),_:1},8,["modelValue","title"]),(0,t.bF)(H,{class:"modal-configuracion",modelValue:e.modalNew,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.modalNew=o}),title:e.tituloModal,escClick:!0,esc:!0,onSubmit:e.saveForm},{default:(0,t.k6)(function(){return[(0,t.bF)(ee,{ref:"myForm"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",D,[(0,t.Lk)("div",I,[(0,t.Lk)("div",E,[(0,t.bF)(Q,{class:"col",modelValue:e.infoModal.PROFCOD,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.infoModal.PROFCOD=o}),options:e.personal,"option-value":"PROFCOD","option-label":"NOMCOMP",label:"Personal",onInput:e.selectProfe,rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","onInput","rules"])])]),(0,t.Lk)("div",h,[(0,t.Lk)("div",C,[(0,t.bF)(J,{class:"col",modelValue:e.infoModal.ID,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.infoModal.ID=o}),label:"N° Pedido",disable:""},null,8,["modelValue"]),(0,t.bF)(Q,{class:"col","emit-value":"",modelValue:e.infoModal.TIPO,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.infoModal.TIPO=o}),options:e.tipos,"option-value":"ID","option-label":"CAMPODES",label:"Área",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","rules"])])]),(0,t.Lk)("div",P,[(0,t.Lk)("div",v,[(0,t.bF)(J,{class:"col",modelValue:e.infoModal.FECHA,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.infoModal.FECHA=o}),label:"Fecha",type:"date",min:e.fecMinima},null,8,["modelValue","min"]),(0,t.bF)(J,{class:"col",modelValue:e.infoModal.CANTIDAD,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.infoModal.CANTIDAD=o}),label:"Cantidad",type:"number",min:"1",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","rules"]),(0,t.bF)(Q,{class:"col",modelValue:e.infoModal.TAMANO_PAPEL,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.infoModal.TAMANO_PAPEL=o}),options:e.tamPap,"option-value":"SECUCOD","option-label":"SECUDES",label:"Tamaño de papel",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","rules"])])]),(0,t.Lk)("div",A,[(0,t.Lk)("div",S,[(0,t.bF)(Z,{onUpload:e.addFile,icon:"file",title:e.$t("subirArchivos"),allow:["pdf"],modelValue:e.fileupd,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.fileupd=o}),onlyButton:!0,preview:!1},{contenido:(0,t.k6)(function(){return a()(o[34]||(o[34]=[]))}),_:1},8,["onUpload","title","modelValue"]),e.fileupd.files.length>0?((0,t.uX)(),(0,t.Wv)(K,{key:0,columns:e.columnsDocs,data:e.fileupd.files,"hide-bottom":!0,context:l,"show-search":!1,css:"max-height: calc(100vh - 260px)",config:e.configDocumentos},null,8,["columns","data","config"])):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",T,[(0,t.Lk)("div",N,[(0,t.bF)(Q,{class:"col",modelValue:e.infoModal.PPH,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.infoModal.PPH=o}),options:e.paginas,"option-value":"SECUCOD","option-label":"SECUDES",label:"Páginas por hoja",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","rules"]),(0,t.bF)(Q,{class:"col",modelValue:e.infoModal.DOBLE_CARA,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.infoModal.DOBLE_CARA=o}),options:e.doblecara,"option-value":"SECUCOD","option-label":"SECUDES",label:"Doble Cara",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","rules"])])]),(0,t.Lk)("div",R,[(0,t.Lk)("div",F,[(0,t.bF)(Q,{class:"col",modelValue:e.infoModal.TIPO_PAPEL,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.infoModal.TIPO_PAPEL=o}),options:e.tipo,"option-value":"SECUCOD","option-label":"SECUDES",label:"Tipo de papel",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","rules"]),(0,t.bF)(Q,{class:"col",modelValue:e.infoModal.ORIENTACION,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.infoModal.ORIENTACION=o}),options:e.orientacion,"option-value":"SECUCOD","option-label":"SECUDES",label:"Orientación",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","rules"]),(0,t.bF)(Q,{class:"col",modelValue:e.infoModal.ENGRAPADO,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.infoModal.ENGRAPADO=o}),options:e.engrapado,"option-value":"SECUCOD","option-label":"SECUDES",label:"Engrapado",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","options","rules"])])]),(0,t.Lk)("div",M,[(0,t.Lk)("div",V,[(0,t.bF)(J,{class:"col",modelValue:e.infoModal.COMENTARIO_REGISTRO,"onUpdate:modelValue":o[25]||(o[25]=function(o){return e.infoModal.COMENTARIO_REGISTRO=o}),label:"Comentario",type:"textarea",rules:[function(e){return!!e||"Este campo es obligatorio"}]},null,8,["modelValue","rules"])])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"]),(0,t.bF)(oe,{name:"Solicitud de impresiones",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(H,{class:"modal-configuracion",modelValue:e.modalConfig,"onUpdate:modelValue":o[27]||(o[27]=function(o){return e.modalConfig=o}),title:"Configuración",footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(ie,{inverted:""},{title:(0,t.k6)(function(){return[(0,t.bF)(le,{label:"Registro Otros",name:"registro",default:""}),(0,t.bF)(le,{label:"Impresión",name:"impresion"})]}),default:(0,t.k6)(function(){return[(0,t.bF)(te,{name:"registro"},{default:(0,t.k6)(function(){return[o[36]||(o[36]=(0,t.Lk)("span",{style:{"font-size":"12px"}},"Seleccione el personal que tendrá permitido solicitar impresiones por otro personal",-1)),(0,t.bF)(K,{class:"q-mt-sm",columns:e.columnsRegistro,data:e.personalRegistro,"hide-bottom":!0,context:l,selection:"multiple",css:"height: calc(100vh - 260px)","load-selection":e.pRegistroSelect,ref:"tablaRegistro"},null,8,["columns","data","load-selection"]),(0,t.bF)(ae,{inverted:""},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",k,[(0,t.bF)(ne,{color:"primary",onClick:e.guardarRegistro},{default:(0,t.k6)(function(){return a()(o[35]||(o[35]=[(0,t.eW)("Guardar",-1)]))}),_:1},8,["onClick"])])]}),_:1})]}),_:1}),(0,t.bF)(te,{name:"impresion"},{default:(0,t.k6)(function(){return[o[38]||(o[38]=(0,t.Lk)("span",{style:{"font-size":"12px"}},"Seleccione el personal que atendera la impresion y a quien notificara los documentos por imprimir",-1)),(0,t.bF)(K,{class:"q-mt-sm",columns:e.columnsImpresion,data:e.personalImpresion,"hide-bottom":!0,context:l,selection:"multiple",css:"height: calc(100vh - 260px)","load-selection":e.pImpresionSelect,ref:"tablaImpresion"},null,8,["columns","data","load-selection"]),(0,t.bF)(ae,{inverted:""},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",w,[(0,t.bF)(ne,{color:"primary",onClick:e.guardarImprimir},{default:(0,t.k6)(function(){return a()(o[37]||(o[37]=[(0,t.eW)("Guardar",-1)]))}),_:1},8,["onClick"])])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["modelValue"]),(0,t.Lk)("div",_,[(0,t.Lk)("div",U,[(0,t.Lk)("div",q,[(0,t.Lk)("div",L,[(0,t.Lk)("div",y,[(0,t.bF)(Q,{class:"col",modelValue:e.profeSelect,"onUpdate:modelValue":o[28]||(o[28]=function(o){return e.profeSelect=o}),options:e.profes,"option-value":"PROFCOD","option-label":"NOMCOMP",label:"Personal",readonly:!e.marcaOtros,onInput:e.cargarPedidos},null,8,["modelValue","options","readonly","onInput"]),(0,t.Lk)("div",$,[(0,t.bF)(J,{class:"col",type:"date",label:"Desde",modelValue:e.f_inicio,"onUpdate:modelValue":o[29]||(o[29]=function(o){return e.f_inicio=o}),onInput:e.cargarPedidos},null,8,["modelValue","onInput"]),(0,t.bF)(J,{class:"col",type:"date",label:"Hasta",modelValue:e.f_fin,"onUpdate:modelValue":o[30]||(o[30]=function(o){return e.f_fin=o}),onInput:e.cargarPedidos},null,8,["modelValue","onInput"])])]),(0,t.Lk)("div",G,[(0,t.bF)(J,{class:"col",modelValue:e.buscar,"onUpdate:modelValue":o[31]||(o[31]=function(o){return e.buscar=o}),label:"Buscar"},{prepend:(0,t.k6)(function(){return[(0,t.bF)(B,{name:"search"})]}),_:1},8,["modelValue"]),(0,t.Lk)("div",x,[(0,t.bF)(Q,{class:"col",modelValue:e.estadoSelect,"onUpdate:modelValue":o[32]||(o[32]=function(o){return e.estadoSelect=o}),options:e.estados,"option-value":"ID","option-label":"DESCRIPCION",label:"Estado",onInput:e.cargarPedidos,"emit-value":"","map-options":"",outlined:"",multiple:"","use-chips":"","stack-label":"",color:"secondary"},null,8,["modelValue","options","onInput"])])])])])]),(0,t.bF)(K,{class:"q-mt-sm",columns:e.columns,data:e.pedidos,"show-search":!1,"hide-bottom":!0,context:l,css:"height: calc(100vh - 225px)",config:e.config},null,8,["columns","data","config"])])]}),_:1})}var J=l(99550),Q=l.n(J),j=l(76080),B=l.n(j),Y=l(57008),W=l.n(Y),X=l(45254),z=l.n(X),Z=(l(30683),l(74260),l(83077),l(23825),l(52133),l(10239),l(89571),l(56285),l(50310),l(32203),l(90095),l(6724),l(515),l(83190),l(27153),l(66307),l(13715),l(24066),l(6123)),K=l(33777),ee=l(30640),oe=l(9736),le=l(16648),ne=l(57668),ae=l(2739),te=l(59089),ie=l(33950),re=l(62006),se=l(18105),ue=l(84603),ce=l(65673),de=l(82327),me=l(88865),fe={components:{QList:ce.A,QItem:de.A,QItemSection:me.A,siePdf:ue.A,SieTable:K.A,sieModal:ee.A,QInput:oe.A,QSelect:le.A,QListHeader:Z.XR,QTab:Z.zu,QTabs:Z.uw,QTabPane:Z.dg,sieUpload:te.A,QForm:ae.A,QDownloadFile:re.A,QPage:Z.Tu,QToolbar:Z.ZV,QBtn:Z.Il,QIcon:Z.bP},data:function(){return{fileupd:{files:[]},rutaPdf:null,modalPdf:!1,modalNew:!1,estados:[],permiso:(0,ne["default"])().ruta.nivel>2,f_inicio:(new Date).getFullYear()+"-01-01",f_fin:(new Date).getFullYear()+"-12-31",personal:[],profeSelect:"T",buscar:null,estadoSelect:[],modalConfig:!1,personalRegistro:[],personalImpresion:[],personalTodos:[],fecMinima:null,tamPap:[],paginas:[],tipo:[],doblecara:[],orientacion:[],engrapado:[],tipos:[],pRegistroSelect:{key:"PROFCOD",values:[]},pImpresionSelect:{key:"PROFCOD",values:[]},columns:[{name:"IDNEW",label:"Número de pedido",align:"left",field:"IDNEW"},{name:"F_REGISTRO",label:"Fecha",align:"left",field:"F_REGISTRO"},{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"},{name:"ADJUNTOS",label:"Documentos",align:"left",field:"ADJUNTOS"},{name:"CANTIDAD",label:"Copias",align:"center",field:"CANTIDAD"},{name:"ESTADO",label:"Estado",align:"center",field:"ESTADO"},{name:"ACTIONS",align:"center",field:"ACTIONS"}],columnsRegistro:[{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"}],columnsImpresion:[{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"}],pedidos:[],tituloModal:null,marcaOtros:!1,modalDetail:!1,infoModal:{ID:null,TIPO:null,FECHA:(new Date).toLocaleDateString("en-CA",{timeZone:"America/Lima"}),CANTIDAD:1,TAMANO_PAPEL:null,TIPO_PAPEL:null,ORIENTACION:null,ENGRAPADO:null,COMENTARIO_REGISTRO:null,AREA:null,editable:!0},configDocumentos:{actions:{component:"button",icon:["delete"],delete:function(e){console.log(),this.fileupd.files.splice(this.fileupd.files.findIndex(function(o){return o.name===e.name}),1),console.log(e)}}},infoDetalle:{}}},methods:{showPdf:function(e){this.modalPdf=!0,this.rutaPdf=this.getUrl(e)},saveForm:function(){var e=this;return z()(B()().m(function o(){var l,n,a;return B()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$refs.myForm.validate();case 1:if(l=o.v,!(l&&e.fileupd.files.length>0)){o.n=5;break}return o.n=2,e.$confirmar("¿Está seguro de guardar esta informacion?");case 2:if(n=o.v,!n){o.n=4;break}return a=W()(W()({},e.infoModal),{adjuntos:e.fileupd.files}),o.n=3,e.$http.post("api/ImpresionController/saveImpresion",{params:a});case 3:o.v,e.cargarPedidos(),e.modalNew=!1;case 4:o.n=6;break;case 5:l?0===e.fileupd.files.length&&e.$notify("Debe adjuntar al menos 1 archivo","error"):e.$notify("Debe llenar todos los campos","error");case 6:return o.a(2)}},o)}))()},getUrl:function(e){var o=e.ID,l=e.IMPRESION_ID,n=e.EXTENSION,a=e.ADJUNTO_RUTA,t=e.ADJUNTO_NOMBRE,i=a.split("/"),r=Q()(i,1),s=r[0],u="?ID=".concat(o,"&IMPRESION_ID=").concat(l,"&EXTENSION=").concat(n,"&ADJUNTO_RUTA=").concat(a,"&ANO=").concat(s,"&ADJUNTO_NOMBRE=").concat(t,"&token2=").concat((0,ne["default"])().token,"&access_token=").concat((0,ne["default"])().token),c=(0,ne["default"])().api+"/ImpresionController/getFile"+u;return c},openModalConfig:function(){var e=this;return z()(B()().m(function o(){var l;return B()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/ProfeController/getProfData");case 1:l=o.v,e.personalRegistro=a()(l.data),e.personalImpresion=a()(l.data),l.forEach(function(o){o.IMPRESOR&&e.pImpresionSelect.values.push(o),o.IMPRIME_OTROS&&e.pRegistroSelect.values.push(o)}),e.modalConfig=!0;case 2:return o.a(2)}},o)}))()},openNew:function(e){var o=this;return z()(B()().m(function l(){return B()().w(function(l){while(1)switch(l.n){case 0:if(o.infoModal.editable=!e||0===Object.keys(e).length,e&&0!==Object.keys(e).length){l.n=2;break}return o.tituloModal="Nueva solicitud de impresión",o.infoModal={ID:null,TIPO:null,FECHA:o.fecMinima,CANTIDAD:1,TAMANO_PAPEL:null,TIPO_PAPEL:null,ORIENTACION:null,ENGRAPADO:null,COMENTARIO_REGISTRO:null,AREA:null,editable:!0},o.fileupd.files=[],l.n=1,o.$http.get("api/ImpresionController/getNewId");case 1:o.infoModal.ID=l.v,o.marcaOtros||(o.infoModal.PROFCOD=(0,ne["default"])().profcod,o.selectProfe((0,ne["default"])().profcod));case 2:o.modalNew=!0;case 3:return l.a(2)}},l)}))()},getNew:function(){this.openNew()},cargarPedidos:function(){var e=this;return z()(B()().m(function o(){var l;return B()().w(function(o){while(1)switch(o.n){case 0:return l={},l.ESTADO=e.estadoSelect,l.F_INICIO=e.f_inicio,l.F_FIN=e.f_fin,l.PROFCOD=e.profeSelect,o.n=1,e.$http.get("api/ImpresionController/getImpresion",{params:{parametros:l}});case 1:e.pedidos=o.v;case 2:return o.a(2)}},o)}))()},guardarRegistro:function(){var e=this;return z()(B()().m(function o(){var l,n,a;return B()().w(function(o){while(1)switch(o.n){case 0:return l=[],n=e.$refs.tablaRegistro.rowsSelected().map(function(e){var o=e.PROFCOD;return o}),a=e.pRegistroSelect.values.map(function(e){var o=e.PROFCOD;return o}),n.length>0&&n.forEach(function(e){a.indexOf(e)<0&&l.push({PROFCOD:e,IMPRIME_OTROS:1})}),a.length>0&&a.forEach(function(e){n.indexOf(e)<0&&l.push({PROFCOD:e,IMPRIME_OTROS:0})}),o.n=1,e.$http.post("api/ProfeController/updatePersonalBloque",{data:l});case 1:o.v;case 2:return o.a(2)}},o)}))()},guardarImprimir:function(){var e=this;return z()(B()().m(function o(){var l,n,a;return B()().w(function(o){while(1)switch(o.n){case 0:return l=[],n=e.$refs.tablaImpresion.rowsSelected().map(function(e){var o=e.PROFCOD;return o}),a=e.pImpresionSelect.values.map(function(e){var o=e.PROFCOD;return o}),n.length>0&&n.forEach(function(e){a.indexOf(e)<0&&l.push({PROFCOD:e,IMPRESOR:1})}),a.length>0&&a.forEach(function(e){n.indexOf(e)<0&&l.push({PROFCOD:e,IMPRESOR:0})}),o.n=1,e.$http.post("api/ProfeController/updatePersonalBloque",{data:l});case 1:o.v;case 2:return o.a(2)}},o)}))()},addFile:function(e){var o=this;(0,ie.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){o.fileupd.files.push(e)}).catch(function(){})},selectProfe:function(e){var o=this;return z()(B()().m(function l(){return B()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,o.$http.get("api/PersonaImpresionController/getTipos",{params:{params:{PROFCOD:e,ESTADO:!0}}});case 1:o.tipos=l.v;case 2:return l.a(2)}},l)}))()},date:se.Ay},computed:{buttons:function(){var e=[];return this.permiso&&e.push({label:"Agregar",icon:"add",click:this.getNew}),e},profes:function(){return this.marcaOtros?[{PROFCOD:"T",NOMCOMP:"Todos"}].concat(a()(this.personal)):a()(this.personal)},columnsDocs:function(){var e=[{name:"originalFilename",label:"Archivo",align:"left",field:"originalFilename"}];return this.infoModal.editable&&e.push({name:"actions",align:"center",field:"actions"}),e},config:function(){return{F_REGISTRO:{component:"date",edit:!1,clear:!0},ADJUNTOS:{renderHtml:function(e,o,l){var n=e.ADJUNTOS.map(function(e){var o=e.ADJUNTO_NOMBRE;return o});return l.chips({items:n})}},ESTADO:{renderHtml:function(e,o,l){var n=this.estados.find(function(o){var l=o.ID;return l===e.ESTADO});return l.chips({items:[n.DESCRIPCION],background:n["BG_COLOR"],color:n["TEXT_COLOR"]})}},ACTIONS:{component:"button",icon:["info","delete as eliminar"],info:function(e){var o=this;this.selectProfe(e.PROFCOD),this.infoDetalle=W()({},e),this.modalDetail=!0,this.infoDetalle.FECHA=this.date(e.F_REGISTRO,"YYYY-MM-DD"),this.infoDetalle.FH_REGISTRO=this.date(e.FH_REGISTRO,"DD/MM/YYYY HH:mm"),this.infoDetalle.NOMCOMP=this.personal.find(function(o){var l=o.PROFCOD;return l===e.PROFCOD}).NOMCOMP,this.infoDetalle.obsSeg="",this.infoDetalle.SEGUIMIENTO.forEach(function(e){o.infoDetalle.obsSeg+="".concat(o.date(e.FH_REGISTRO,"DD/MM/YYYY HH:mm")," - ").concat(e.NOMCOMP,": ").concat(e.OBSERVACION,"\n")})},eliminar:function(e){var o=this;return z()(B()().m(function l(){var n,a;return B()().w(function(l){while(1)switch(l.p=l.n){case 0:return l.n=1,o.$confirmar("¿Está seguro de eliminar esta información?");case 1:if(n=l.v,!n){l.n=6;break}return a=e.ID,l.p=2,l.n=3,o.$http.delete("api/ImpresionController/deleteImpresion",{params:{id:a}});case 3:o.$notify("Eliminado correctamente"),o.cargarPedidos(),l.n=5;break;case 4:l.p=4,l.v,o.$notify("No se pudo eliminar","error");case 5:console.log(e);case 6:return l.a(2)}},l,null,[[2,4]])}))()},validate:{eliminar:function(e){return this.permiso&&1===e.ESTADO}},flat:!0,round:!0}}}},watch:{},created:function(){var e=this;return z()(B()().m(function o(){var l,n,a,t;return B()().w(function(o){while(1)switch(o.n){case 0:return l=new Date,n=new Date(l),n.setDate(l.getDate()+1),e.fecMinima=n.toLocaleDateString("en-CA",{timeZone:"America/Lima"}),Promise.all([e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I05"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I06"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I07"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I08"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I09"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I11"}}}})]).then(function(o){var l=Q()(o,6),n=l[0],a=l[1],t=l[2],i=l[3],r=l[4],s=l[5];e.tamPap=n,e.paginas=a,e.tipo=t,e.doblecara=i,e.orientacion=r,e.engrapado=s}),o.n=1,e.$http.get("api/ImpresionController/getEstados");case 1:if(e.estados=o.v,!(0,ne["default"])().esAdministrador){o.n=2;break}t=!0,o.n=4;break;case 2:return o.n=3,e.$http.get("api/ImpresionController/getPermisoTodos");case 3:t=o.v;case 4:if(e.marcaOtros=t,!e.marcaOtros){o.n=6;break}return o.n=5,e.$http.get("api/ProfeController/getProfData");case 5:a=o.v,a=a.data,e.personal=a,o.n=7;break;case 6:e.personal=[{PROFCOD:(0,ne["default"])().profcod,NOMCOMP:(0,ne["default"])().nombre}],e.profeSelect=(0,ne["default"])().profcod;case 7:e.cargarPedidos();case 8:return o.a(2)}},o)}))()}},pe=l(12807);const Oe=(0,pe.A)(fe,[["render",H]]);var be=Oe}}]);