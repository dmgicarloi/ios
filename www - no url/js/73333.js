"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[73333],{73333:function(e,r,n){n.r(r),n.d(r,{default:function(){return $}});var a=n(61758),o={class:"row"},t={class:"col-xs-12"},l={class:"row q-pa-sm q-col-gutter-sm"},c={class:"col-xs-12 col-sm-6"},s={class:"col-xs-12"},i={class:"col-xs-12"},u={class:"col-xs-12"},m={class:"col-xs-12 col-sm-6"},f={class:"col-xs-12 col-sm-6"},d={class:"col-xs-12 col-sm-6"};function E(e,r){var n=this,E=(0,a.g2)("header-btn"),p=(0,a.g2)("sie-table"),O=(0,a.g2)("q-card-section"),C=(0,a.g2)("q-card"),I=(0,a.g2)("q-checkbox"),A=(0,a.g2)("q-input"),L=(0,a.g2)("q-select"),w=(0,a.g2)("q-form"),v=(0,a.g2)("sie-modal"),g=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(g,{class:"q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(C,{flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(E,{name:"Mantenimiento Local",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(O,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",o,[(0,a.Lk)("div",t,[(0,a.bF)(p,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableLocalEmpresa",onRowSelected:e.rowSelectLocalEmpresa,css:"height:calc(100vh - 140px)",context:n},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,a.bF)(v,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":r[7]||(r[7]=function(r){return e.openAdd=r}),css:{width:"500px"},title:"create"===e.action?"Agregar Local":"Modificar Local",onSubmit:e.saveAcccion},{default:(0,a.k6)(function(){return[(0,a.bF)(w,{ref:"refForm"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",l,[(0,a.Lk)("div",c,[(0,a.bF)(I,{modelValue:e.form.ACTIVO,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.form.ACTIVO=r}),"true-value":1,"false-value":0,label:"Activo"},null,8,["modelValue"])]),(0,a.Lk)("div",s,[(0,a.bF)(A,{modelValue:e.form.NOMBRE,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.form.NOMBRE=r}),label:"Nombre *",rules:[e.required]},null,8,["modelValue","rules"])]),(0,a.Lk)("div",i,[(0,a.bF)(A,{type:"textarea",counter:"",modelValue:e.form.DIRECCION,"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.form.DIRECCION=r}),label:"Dirección *",rules:[e.required]},null,8,["modelValue","rules"])]),(0,a.Lk)("div",u,[(0,a.bF)(A,{modelValue:e.form.ZONA,"onUpdate:modelValue":r[3]||(r[3]=function(r){return e.form.ZONA=r}),label:"Zona"},null,8,["modelValue"])]),(0,a.Lk)("div",m,[(0,a.bF)(A,{modelValue:e.form.TELEFONO,"onUpdate:modelValue":r[4]||(r[4]=function(r){return e.form.TELEFONO=r}),label:"Teléfono"},null,8,["modelValue"])]),(0,a.Lk)("div",f,[(0,a.bF)(L,{modelValue:e.form.EMPCOD,"onUpdate:modelValue":r[5]||(r[5]=function(r){return e.form.EMPCOD=r}),label:"Empresa",options:e.empresas,"emit-value":"","option-label":"RAZONSOCIAL","option-value":"EMPCOD",rules:[e.required]},null,8,["modelValue","options","rules"])]),(0,a.Lk)("div",d,[(0,a.bF)(I,{modelValue:e.form.PRINCIPAL,"onUpdate:modelValue":r[6]||(r[6]=function(r){return e.form.PRINCIPAL=r}),"true-value":1,"false-value":0,label:"Principal"},null,8,["modelValue"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var p=n(57008),O=n.n(p),C=n(99550),I=n.n(C),A=n(76080),L=n.n(A),w=n(45254),v=n.n(w),g=(n(89571),n(6123)),D={data:function(){return{config:{ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,r){var n=this;return v()(L()().m(function e(){return L()().w(function(e){while(1)switch(e.n){case 0:return n.rowLocalEmpresa=r,e.n=1,n.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,r){var n=this;return v()(L()().m(function e(){return L()().w(function(e){while(1)switch(e.n){case 0:return n.rowLocalEmpresa=r,e.n=1,n.deleteLocalEmpresa();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0},PRINCIPAL:{renderHtml:function(e,r,n){return n.checkbox({trueValue:1,value:e.PRINCIPAL})}}},rows:[],fields:[{name:"ID_LOCAL",label:"Código",field:"ID_LOCAL",align:"center",sortable:!0},{name:"NOMBRE",label:"Local",field:"NOMBRE",align:"left",sortable:!0},{name:"PRINCIPAL",label:"Principal",field:"PRINCIPAL",align:"center",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:80}]}}},h=n(39893),b=n(81288),N=n(2739),P=n(16648),R=n(9736),k=n(88567),M=n(95718),V=n(43136),S=n(3112),F={mixins:[D,V.initialConfig],components:{QForm:N.A,QInput:R.A,QSelect:P.A,QCard:k.A,QCardSection:M.A,QCheckbox:S.A,QPage:g.Tu},data:function(){return{required:h.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowLocalEmpresa:null,empresas:[],form:{NOMBRE:null,DIRECCION:null,ZONA:null,TELEFONO:null,SEDECOD:null,EMPCOD:null,ACTIVO:1,ACADEMICO:0,ID_COLEGIO:null,PRINCIPAL:0}}},methods:{openAgregar:function(){var e=this;return v()(L()().m(function r(){return L()().w(function(r){while(1)switch(r.n){case 0:return e.action="create",e.rowLocalEmpresa=null,(0,b.clear)(e.form),e.form.ACTIVO=1,e.form.ACADEMICO=0,e.form.PRINCIPAL=0,e.openAdd=!0,r.n=1,e.readCEmpresa();case 1:e.form.EMPCOD=e.empcod||null;case 2:return r.a(2)}},r)}))()},openActualizar:function(){var e=this;return v()(L()().m(function r(){var n,a,o;return L()().w(function(r){while(1)switch(r.n){case 0:if(e.rowLocalEmpresa){r.n=1;break}e.$notify("Selecciona un registro","info"),r.n=4;break;case 1:return r.n=2,e.readCEmpresa();case 2:return e.action="update",r.n=3,e.getEmpresa(["lem.*"],e.rowLocalEmpresa.ID_LOCAL);case 3:n=r.v,a=I()(n,1),o=a[0],e.form.NOMBRE=o.NOMBRE,e.form.DIRECCION=o.DIRECCION,e.form.ZONA=o.ZONA,e.form.TELEFONO=o.TELEFONO,e.form.SEDECOD=o.SEDECOD,e.form.EMPCOD=o.EMPCOD,e.form.ACTIVO=o.ACTIVO,e.form.ACADEMICO=o.ACADEMICO,e.form.ID_COLEGIO=o.ID_COLEGIO,e.form.PRINCIPAL=o.PRINCIPAL,e.openAdd=!0;case 4:return r.a(2)}},r)}))()},saveAcccion:function(){var e=this;return v()(L()().m(function r(){var n,a,o;return L()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.$refs.refForm.validate();case 1:if(n=r.v,n){r.n=2;break}return r.a(2);case 2:if("create"!==e.action){r.n=4;break}return r.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:a=r.v,a&&e.createLocalEmpresa(),r.n=6;break;case 4:return r.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:o=r.v,o&&e.updateLocalEmpresa();case 6:return r.a(2)}},r)}))()},rowSelectLocalEmpresa:function(e,r){this.rowLocalEmpresa=r},createLocalEmpresa:function(){var e=this;return v()(L()().m(function r(){var n,a,o,t,l,c;return L()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,n=O()({},e.form),r.n=1,e.$http.post("api/HyoSedes/createSede",{data:n});case 1:a=r.v,o=a.result,t=a.message,l={ID_LOCAL:o.ID_LOCAL,NOMBRE:e.form.NOMBRE,DIRECCION:e.form.DIRECCION,ZONA:e.form.ZONA,TELEFONO:e.form.TELEFONO,SEDECOD:e.form.SEDECOD,EMPCOD:e.form.EMPCOD,ACTIVO:e.form.ACTIVO,ACADEMICO:e.form.ACADEMICO,ID_COLEGIO:e.form.ID_COLEGIO,PRINCIPAL:e.form.PRINCIPAL},e.rows.unshift(l),e.openAdd=!1,e.$notify(t,"success"),r.n=3;break;case 2:r.p=2,c=r.v,e.$notify(c.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()},getEmpresa:function(){var e=arguments,r=this;return v()(L()().m(function n(){var a,o,t,l,c,s;return L()().w(function(n){while(1)switch(n.p=n.n){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:null,o=e.length>1&&void 0!==e[1]?e[1]:null,n.p=1,t=r.form.EMPCOD||r.empcod,l={empcod:t,fields:a},o&&(l.id_local=o),n.n=2,r.$http.get("api/HyoSedes/getSedesByEmpresa",{params:l});case 2:return c=n.v,n.a(2,c);case 3:n.p=3,s=n.v,r.$notify(s.message,"warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},readLocalEmpresa:function(){var e=this;return v()(L()().m(function r(){return L()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.getEmpresa();case 1:e.rows=r.v;case 2:return r.a(2)}},r)}))()},readCEmpresa:function(){var e=this;return v()(L()().m(function r(){var n,a;return L()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,e.$http.get("api/HyoEmpresas/getAllEmpresa",{params:{fields:["EMPCOD","RAZONSOCIAL"]}});case 1:n=r.v,e.empresas=n,r.n=3;break;case 2:r.p=2,a=r.v,e.$notify(a.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()},deleteLocalEmpresa:function(){var e=this;return v()(L()().m(function r(){var n,a,o,t;return L()().w(function(r){while(1)switch(r.p=r.n){case 0:if(e.rowLocalEmpresa){r.n=1;break}e.$notify("Selecciona un registro","info"),r.n=6;break;case 1:return r.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(n=r.v,!n){r.n=6;break}return r.p=3,r.n=4,e.$http.delete("api/HyoSedes/deleteSede",{params:{empcod:e.rowLocalEmpresa.EMPCOD,id_local:e.rowLocalEmpresa.ID_LOCAL}});case 4:a=r.v,o=a.message,e.rows.splice(e.rows.indexOf(e.rowLocalEmpresa),1),e.rowLocalEmpresa=null,e.$notify(o,"success"),r.n=6;break;case 5:r.p=5,t=r.v,e.$notify(t.message,"warning");case 6:return r.a(2)}},r,null,[[3,5]])}))()},updateLocalEmpresa:function(){var e=this;return v()(L()().m(function r(){var n,a,o,t;return L()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,n=e.$refs.tableLocalEmpresa,r.n=1,e.$http.put("api/HyoSedes/updateSede",{empcod:e.rowLocalEmpresa.EMPCOD,id_local:e.rowLocalEmpresa.ID_LOCAL,data:{NOMBRE:e.form.NOMBRE,DIRECCION:e.form.DIRECCION,ZONA:e.form.ZONA,TELEFONO:e.form.TELEFONO,SEDECOD:e.form.SEDECOD,EMPCOD:e.form.EMPCOD,ACTIVO:e.form.ACTIVO,ACADEMICO:e.form.ACADEMICO,ID_COLEGIO:e.form.ID_COLEGIO,PRINCIPAL:e.form.PRINCIPAL}});case 1:a=r.v,o=a.message,e.openAdd=!1,n.updateRow(e.rowLocalEmpresa,e.form),e.$notify(o,"success"),r.n=3;break;case 2:r.p=2,t=r.v,e.$notify(t.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()}},created:function(){var e=this;return v()(L()().m(function r(){return L()().w(function(r){while(1)switch(r.n){case 0:try{e.readLocalEmpresa()}catch(r){e.$notify(r.message,"warning")}case 1:return r.a(2)}},r)}))()}},T=n(12807);const _=(0,T.A)(F,[["render",E]]);var $=_}}]);