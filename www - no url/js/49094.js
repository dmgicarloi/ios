"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[49094],{49094:function(e,r,t){t.r(r),t.d(r,{default:function(){return R}});var n=t(61758),i={class:"row q-col-gutter-sm"},o={class:"col-xs-12"},a={class:"col-xs-12"},l={class:"row q-pa-sm q-col-gutter-sm"},u={class:"col-xs-12"},s={class:"col-xs-12"};function c(e,r){var t=this,c=(0,n.g2)("header-btn"),f=(0,n.g2)("sie-table"),p=(0,n.g2)("q-card-section"),d=(0,n.g2)("q-card"),m=(0,n.g2)("q-input"),w=(0,n.g2)("q-form"),h=(0,n.g2)("sie-modal"),U=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(U,{class:"q-pa-sm sie-flat"},{default:(0,n.k6)(function(){return[(0,n.bF)(d,{flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[(0,n.Lk)("div",o,[(0,n.bF)(c,{name:"Grupo de Útiles",buttons:e.buttons},null,8,["buttons"])]),(0,n.Lk)("div",a,[(0,n.bF)(f,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableUtilGrupo",onRowSelected:e.rowSelectUtilGrupo,css:"height:calc(100vh - 170px)",context:t},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,n.bF)(h,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.openAdd=r}),css:{width:"500px"},title:"create"===e.action?"Agregar":"Modificar",onSubmit:e.saveAcccion},{default:(0,n.k6)(function(){return[(0,n.bF)(w,{ref:"refForm"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[(0,n.Lk)("div",u,[(0,n.bF)(m,{type:"textarea",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.form.DESCRIPCION=r}),label:"DESCRIPCION",rules:[e.required]},null,8,["modelValue","rules"])]),(0,n.Lk)("div",s,[(0,n.bF)(m,{type:"number",min:"0",modelValue:e.form.ORDEN,"onUpdate:modelValue":r[1]||(r[1]=function(r){return e.form.ORDEN=r}),label:"Orden",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var f=t(76080),p=t.n(f),d=t(45254),m=t.n(d),w=(t(89571),t(6123)),h={data:function(){return{config:{ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,r){var t=this;return m()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return t.rowUtilGrupo=r,e.n=1,t.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,r){var t=this;return m()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return t.rowUtilGrupo=r,e.n=1,t.deleteUtilGrupo();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"ID_UTIL_GRUPO",label:"Código",field:"ID_UTIL_GRUPO",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:90}]}}},U=t(39893),g=t(81288),b=t(2739),I=t(9736),v=t(88567),G=t(95718),O={mixins:[h],components:{QForm:b.A,QInput:I.A,QCard:v.A,QCardSection:G.A,QPage:w.Tu},data:function(){return{required:U.require,buttons:[{label:"Agregar",icon:"plus",permiso:">1",click:this.openAgregar}],openAdd:!1,action:"create",rowUtilGrupo:null,form:{DESCRIPCION:null,ORDEN:1}}},methods:{openAgregar:function(){this.action="create",this.rowUtilGrupo=null,(0,g.clear)(this.form),this.ORDEN=1,this.openAdd=!0},openActualizar:function(){this.rowUtilGrupo?(this.action="update",this.form.DESCRIPCION=this.rowUtilGrupo.DESCRIPCION,this.form.ORDEN=this.rowUtilGrupo.ORDEN,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return m()(p()().m(function r(){var t,n,i;return p()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.$refs.refForm.validate();case 1:if(t=r.v,t){r.n=2;break}return r.a(2);case 2:if("create"!==e.action){r.n=4;break}return r.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:n=r.v,n&&e.createUtilGrupo(),r.n=6;break;case 4:return r.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:i=r.v,i&&e.updateUtilGrupo();case 6:return r.a(2)}},r)}))()},rowSelectUtilGrupo:function(e,r){this.rowUtilGrupo=r},createUtilGrupo:function(){var e=this;return m()(p()().m(function r(){var t,n,i,o,a;return p()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,e.$http.post("api/UtilGrupoController/addUtilGrupo",{data:e.form});case 1:t=r.v,n=t.data,i=t.message,o={ID_UTIL_GRUPO:n.ID_UTIL_GRUPO,ORDEN:e.form.ORDEN,DESCRIPCION:e.form.DESCRIPCION},e.rows.unshift(o),e.openAdd=!1,e.$notify(i,"success"),r.n=3;break;case 2:r.p=2,a=r.v,e.$notify(a.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()},readUtilGrupo:function(){var e=this;return m()(p()().m(function r(){var t,n;return p()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,e.$http.get("api/UtilGrupoController/getUtilGrupo",{params:{}});case 1:t=r.v,e.rows=t,r.n=3;break;case 2:r.p=2,n=r.v,e.$notify(n.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()},deleteUtilGrupo:function(){var e=this;return m()(p()().m(function r(){var t,n,i,o;return p()().w(function(r){while(1)switch(r.p=r.n){case 0:if(e.rowUtilGrupo){r.n=1;break}e.$notify("Selecciona un registro","info"),r.n=6;break;case 1:return r.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(t=r.v,!t){r.n=6;break}return r.p=3,r.n=4,e.$http.delete("api/UtilGrupoController/deleteUtilGrupo",{params:{ID_UTIL_GRUPO:e.rowUtilGrupo.ID_UTIL_GRUPO}});case 4:n=r.v,i=n.message,e.rows.splice(e.rows.indexOf(e.rowUtilGrupo),1),e.rowUtilGrupo=null,e.$notify(i,"success"),r.n=6;break;case 5:r.p=5,o=r.v,e.$notify(o.message,"warning");case 6:return r.a(2)}},r,null,[[3,5]])}))()},updateUtilGrupo:function(){var e=this;return m()(p()().m(function r(){var t,n,i,o;return p()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,t=e.$refs.tableUtilGrupo,r.n=1,e.$http.post("api/UtilGrupoController/updateUtilGrupo",{ID_UTIL_GRUPO:e.rowUtilGrupo.ID_UTIL_GRUPO,params:{DESCRIPCION:e.form.DESCRIPCION,ORDEN:e.form.ORDEN}});case 1:n=r.v,i=n.message,e.openAdd=!1,t.updateRow(e.rowUtilGrupo,e.form),e.$notify(i,"success"),r.n=3;break;case 2:r.p=2,o=r.v,e.$notify(o.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()}},created:function(){var e=this;return m()(p()().m(function r(){var t;return p()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,e.readUtilGrupo();case 1:r.n=3;break;case 2:r.p=2,t=r.v,e.$notify(t.message,"warning");case 3:return r.a(2)}},r,null,[[0,2]])}))()}},C=t(12807);const D=(0,C.A)(O,[["render",c]]);var R=D}}]);