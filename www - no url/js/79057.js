"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[79057],{79057:function(e,n,o){o.r(n),o.d(n,{default:function(){return we}});var r=o(61758);function a(e,n){var o=(0,r.g2)("asignacionSalones");return(0,r.uX)(),(0,r.Wv)(o)}var t=o(76080),i=o.n(t),l=o(45254),c=o.n(l),u={class:"row"},s={class:"col-xs-12 listaDetalle"},d={key:1,class:"column"},m={class:"row q-px-sm q-pt-sm"},p={class:"col-xs-12"},f={class:"col-xs-12"},b={class:"row q-pa-sm"},g={class:"col-xs-12"};function C(e,n){var o=this,a=(0,r.g2)("header-btn"),t=(0,r.g2)("q-spinner-oval"),i=(0,r.g2)("q-inner-loading"),l=(0,r.g2)("sie-table"),c=(0,r.g2)("sie-vacio"),C=(0,r.g2)("modal-salones"),v=(0,r.g2)("modal-cierre"),h=(0,r.g2)("q-select"),I=(0,r.g2)("q-form"),E=(0,r.g2)("q-btn"),S=(0,r.g2)("q-toolbar"),V=(0,r.g2)("q-option-group"),A=(0,r.g2)("sie-modal"),O=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(O,{class:"academico-salones q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(a,{name:"Salones",buttons:e.buttons},null,8,["buttons"]),(0,r.Lk)("div",u,[(0,r.Lk)("div",s,[(0,r.bF)(i,{visible:e.loadingDetalle},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.dataDetalle.length>0?((0,r.uX)(),(0,r.Wv)(l,{key:0,class:"q-px-sm q-pt-sm sticky",selection:"single",context:o,permiso:"> 1",css:"height: calc(100vh - 120px)",search:"Buscar","save-cells":"",columns:e.configTbl.columnas,data:e.dataDetalle,config:e.dinamicos},null,8,["columns","data","config"])):((0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(c,{icon:"settings_applications"})]))])]),e.openModalSalones?((0,r.uX)(),(0,r.Wv)(C,{key:0,accion:e.accionModal,dataSalon:e.dataSalon,onCerrarModal:e.cerrarModal},null,8,["accion","dataSalon","onCerrarModal"])):(0,r.Q3)("v-if",!0),e.openModalCierre?((0,r.uX)(),(0,r.Wv)(v,{key:1,onCerrarModalCierre:e.cerrarModalCierre},null,8,["onCerrarModalCierre"])):(0,r.Q3)("v-if",!0),(0,r.bF)(A,{class:"modal-reportes",modelValue:e.reporte.modal,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.reporte.modal=n}),title:"Reportes",header:!0,footer:e.sie.ruta.nivel>=1,ok:!1},{footer:(0,r.k6)(function(){return[(0,r.bF)(S,{class:"justify-end",color:"grey-2"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(E,{class:"q-mx-xs",icon:"file_pdf",label:"PDF",color:"primary",onClick:n[2]||(n[2]=function(n){return e.verReporte("pdf")})}),(0,r.bF)(E,{class:"q-mx-xs",icon:"file_excel",label:"Excel",color:"primary",onClick:n[3]||(n[3]=function(n){return e.verReporte("xls")})})])]}),_:1})]}),footerMobile:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(E,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:n[4]||(n[4]=function(n){return e.verReporte("pdf")})}),(0,r.bF)(E,{flat:"",round:"",dense:"",icon:"file_excel",onClick:n[5]||(n[5]=function(n){return e.verReporte("xls")})})])]}),default:(0,r.k6)(function(){return[(0,r.bF)(I,{ref:"form"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",m,[(0,r.Lk)("div",p,[(0,r.bF)(h,{modelValue:e.reporte.sano,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.reporte.sano=n}),options:e.reporte.anios,label:"Año",rules:[function(e){return null!==e&&""!==e||"Indique el Año"}]},null,8,["modelValue","options","rules"])]),(0,r.Lk)("div",f,[(0,r.bF)(h,{modelValue:e.reporte.nacad,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.reporte.nacad=n}),options:e.reporte.niveles,label:"Nivel académico:",rules:[function(e){return null!==e&&""!==e||"Indique el Nivel académico"}]},null,8,["modelValue","options","rules"])])])]}),_:1},512),(0,r.Lk)("div",b,[(0,r.Lk)("div",g,[(0,r.bF)(V,{color:"secondary",type:"radio",modelValue:e.reporte.repcod,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.reporte.repcod=n}),options:e.reporte.repcods},null,8,["modelValue","options"])])])]}),_:1},8,["modelValue","footer"])]}),_:1})}o(30683),o(56285);var v=o(6123),h=o(9736),I=o(16648),E=o(70313),S=o(30640),V=o(93616),A=o(80340),O=o(33777),P=o(2819),w=o(57668),R=o(65229),k=o(81288),L=o(2739),x=o(8445),G=o.n(x),F=(o(71225),o(50310),o(5962),o(83190),{class:"col-xs-12 col-sm-6 col-md-3"}),y={class:"col-xs-12 col-sm-6 col-md-3"},U={key:0,class:"col-xs-12 col-sm-6 col-md-3"},N={class:"row q-col-gutter-sm"},M={class:"col-xs-12 col-sm-6 col-md-3"},_={class:"col-xs-12 col-sm-6 col-md-3"},D={class:"col-xs-12 col-sm-6 col-md-3"},q={class:"col-xs-12 col-sm-6 col-md-3"},B={class:"col-xs-12 col-sm-6 col-md-3"},Q={class:"col-xs-12 col-sm-6 col-md-3"},$={class:"col-xs-12 col-sm-6 col-md-3"},z={class:"col-xs-12 col-sm-6 col-md-3"},X={class:"col-xs-12 col-sm-6 col-md-3"},T={class:"col-xs-12 col-sm-4"},H={class:"col-xs-12 col-sm-5"},W={key:0,class:"col-xs-12 col-sm-6 col-md-3"},K={key:1,class:"col-xs-12"},j={key:2,class:"col-xs-12"};function J(e,n){var o=(0,r.g2)("q-btn"),a=(0,r.g2)("q-input"),t=(0,r.g2)("q-select"),i=(0,r.g2)("q-checkbox"),l=(0,r.g2)("q-form"),c=(0,r.g2)("sie-modal");return(0,r.uX)(),(0,r.Wv)(c,{class:"modal-salon","esc-click":"",modelValue:e.openModal.salon,"onUpdate:modelValue":n[21]||(n[21]=function(n){return e.openModal.salon=n}),title:"Salón: Información Básica",header:!0,footer:e.sie.ruta.nivel>=2,ok:e.$t("botones.guardar"),loading:e.loadingModal,onSubmit:n[22]||(n[22]=function(n){return e.grabarDatos(e.mGrabar.accion)}),esc:!0,onClose:e.cerrarModal},{footerMobile:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(o,{icon:"plus",dense:"",round:"",color:"primary"})])]}),preButtonFooter:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(o,{class:"q-mx-xs",color:"primary",icon:"add",onClick:e.nuevo},{default:(0,r.k6)(function(){return G()(n[23]||(n[23]=[(0,r.eW)("Nuevo",-1)]))}),_:1},8,["onClick"])])]}),default:(0,r.k6)(function(){return[(0,r.bF)(l,{class:"row q-pa-sm q-pt-md q-col-gutter-sm",ref:"form"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",F,[(0,r.bF)(a,{readonly:"",modelValue:e.mGrabar.nemo,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.mGrabar.nemo=n}),label:"Código",maxlength:"2"},null,8,["modelValue"])]),(0,r.Lk)("div",y,[(0,r.bF)(a,{modelValue:e.mGrabar.ano,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.mGrabar.ano=n}),label:"Ano",maxlength:"4"},null,8,["modelValue"])]),e.cupos?((0,r.uX)(),(0,r.CE)("div",U,[(0,r.bF)(a,{modelValue:e.mGrabar.cupos,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.mGrabar.cupos=n}),type:"number",label:"Cupos",onKeyup:n[3]||(n[3]=function(n){return e.funciones.maxLength(n,3)}),rules:[function(e){return null!==e&&""!==e||"Indique el número de cupos por salon"}]},null,8,["modelValue","rules"])])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",N,[(0,r.Lk)("div",M,[(0,r.bF)(t,{modelValue:e.mGrabar.instrucod,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.mGrabar.instrucod=n}),options:e.niveles,onInput:e.cargarGrados,label:"Nivel",rules:[function(e){return null!==e&&""!==e||"Indique el nivel"}]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",_,[(0,r.bF)(t,{modelValue:e.mGrabar.gradocod,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.mGrabar.gradocod=n}),options:e.grados,label:"Grado",rules:[function(e){return null!==e&&""!==e||"Indique el grado"}]},null,8,["modelValue","options","rules"])]),(0,r.Lk)("div",D,[(0,r.bF)(t,{modelValue:e.mGrabar.seccioncod,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.mGrabar.seccioncod=n}),options:e.secciones,label:"Sección",rules:[function(e){return null!==e&&""!==e||"Indique la sección"}]},null,8,["modelValue","options","rules"])]),(0,r.Lk)("div",q,[(0,r.bF)(t,{modelValue:e.mGrabar.turnocod,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.mGrabar.turnocod=n}),options:e.turnos,label:"Turno",rules:[function(e){return null!==e&&""!==e||"Indique el turno"}]},null,8,["modelValue","options","rules"])]),(0,r.Lk)("div",B,[(0,r.bF)(t,{modelValue:e.mGrabar.aulacod,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.mGrabar.aulacod=n}),options:e.aulas,label:"Aula",rules:[function(e){return null!==e&&""!==e||"Indique el aula"}]},null,8,["modelValue","options","rules"])]),(0,r.Lk)("div",Q,[(0,r.bF)(t,{modelValue:e.mGrabar.pericod,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.mGrabar.pericod=n}),options:e.periodos,onInput:e.cargarPerinum,label:"Periodo",rules:[function(e){return null!==e&&""!==e||"Indique el periodo"}]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",$,[(0,r.bF)(a,{readonly:"",modelValue:e.mGrabar.perinum,"onUpdate:modelValue":n[10]||(n[10]=function(n){return e.mGrabar.perinum=n}),label:"Num. Periodos",type:"number",onKeyup:n[11]||(n[11]=function(n){return e.funciones.maxLength(n,1)})},null,8,["modelValue"])]),(0,r.Lk)("div",z,[(0,r.bF)(a,{modelValue:e.mGrabar.pericie,"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.mGrabar.pericie=n}),label:"Per. Cierre",type:"number",onKeyup:n[13]||(n[13]=function(n){return e.funciones.maxLength(n,1)})},null,8,["modelValue"])]),(0,r.Lk)("div",X,[(0,r.bF)(a,{modelValue:e.mGrabar.pericco,"onUpdate:modelValue":n[14]||(n[14]=function(n){return e.mGrabar.pericco=n}),label:"Per. Cierre Cond",type:"number",onKeyup:n[15]||(n[15]=function(n){return e.funciones.maxLength(n,1)})},null,8,["modelValue"])]),(0,r.Lk)("div",T,[(0,r.bF)(t,{modelValue:e.mGrabar.profcod,"onUpdate:modelValue":n[16]||(n[16]=function(n){return e.mGrabar.profcod=n}),options:e.profesores,label:"Tutor",any:"profesores",onFilter:e.filter,"use-input":"","hide-selected":"","fill-input":""},null,8,["modelValue","options","onFilter"])]),(0,r.Lk)("div",H,[(0,r.bF)(a,{modelValue:e.mGrabar.nemodes,"onUpdate:modelValue":n[17]||(n[17]=function(n){return e.mGrabar.nemodes=n}),label:"Nombre Salón"},null,8,["modelValue"])]),e.sedes?((0,r.uX)(),(0,r.CE)("div",W,[(0,r.bF)(t,{modelValue:e.mGrabar.loccod,"onUpdate:modelValue":n[18]||(n[18]=function(n){return e.mGrabar.loccod=n}),options:e.dataSedes,label:"Sede",onFilter:e.filter},null,8,["modelValue","options","onFilter"])])):(0,r.Q3)("v-if",!0),e.bachillerato?((0,r.uX)(),(0,r.CE)("div",K,[(0,r.bF)(i,{modelValue:e.mGrabar.equi,"onUpdate:modelValue":n[19]||(n[19]=function(n){return e.mGrabar.equi=n}),label:"Equivalente a Bachillerato"},null,8,["modelValue"])])):(0,r.Q3)("v-if",!0),e.direccionAcademica?((0,r.uX)(),(0,r.CE)("div",j,[(0,r.bF)(a,{modelValue:e.mGrabar.norma,"onUpdate:modelValue":n[20]||(n[20]=function(n){return e.mGrabar.norma=n}),label:"Dirección Académica"},null,8,["modelValue"])])):(0,r.Q3)("v-if",!0)])]}),_:1},512)]}),_:1},8,["modelValue","footer","ok","loading","onClose"])}o(74260),o(32203),o(70199),o(11777),o(515),o(7346);var Z=o(80660),Y={grabarDatosSalon:function(e){return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,Z.$http.post("api/SalonController/grabarDatosSalon",{params:e}))}},n)}))()},getConfiguracion:function(e){return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,Z.$http.get("api/SalonController/getConfiguracion",{params:{data:e}}))}},n)}))()},cargarGrados:function(e,n){return c()(i()().m(function o(){return i()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,Z.$http.get("api/SalonController/getCargarGrados",{params:{nivel:e,accion:n}}))}},o)}))()}},ee=Y,ne=o(33001),oe={maxLength:function(e,n){e.target.value.length>n&&(e.target.value=e.target.value.substr(0,n))}},re={emits:["cerrarModal"],directives:{sieActive:R.A},components:{QSelect:I.A,QInput:h.A,sieModal:S.A,sieSelect:V.A,QForm:L.A,QBtn:v.Il,QCheckbox:v.vZ},props:{accion:{type:Number,default:1},dataSalon:{type:Object,default:{}}},data:function(){return{funciones:oe,sie:(0,w["default"])(),loadingModal:!1,openModal:{salon:!1,cierre:!1},profesores:[],dataSedes:[],cprofesores:[],niveles:[],grados:[],aulas:[],secciones:[],periodos:[],turnos:[],nombrePromocion:!1,progEspecial:!1,bachillerato:!1,cupos:!1,direccionAcademica:!1,tutor2:!1,sedes:!1,cierreInterEval:!1,cierreObs:!1,mGrabar:{title:"Salón: Información Básica",accion:1,ngsOriginal:"",ngsNew:""},configuracion:{}}},computed:{isLess:function(){return(0,k.isLess)()}},methods:{maxLength:function(e){e.target.value.length>1&&(e.target.value=e.target.value.substr(0,1))},formatearModalSalon:function(){for(var e=["nemo","instrucod","turnocod","gradocod","profcod","aulacod","seccioncod","pericod","perinum","pericie","pericco","nemodes","ngsOriginal","ngsNew","cupos","loccod"],n=0;n<e.length;n++)this.mGrabar[e[n]]="";this.mGrabar["ano"]=this.sie.ano,this.mGrabar.accion=1,this.grados=[{label:"Seleccione",value:""}]},modalAgregar:function(){var e=this;return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:return e.formatearModalSalon(),n.n=1,e.getConfiguracion(1);case 1:e.openModal.salon=!0;case 2:return n.a(2)}},n)}))()},modalEditar:function(e){var n=this;return c()(i()().m(function o(){var r;return i()().w(function(o){while(1)switch(o.n){case 0:for(r in e)n.mGrabar[r.toLowerCase()]=e[r];return o.n=1,n.getConfiguracion(2);case 1:n.mGrabar.ngsOriginal=n.agregarNgs(),n.mGrabar.accion=2,n.openModal.salon=!0;case 2:return o.a(2)}},o)}))()},agregarNgs:function(){return this.mGrabar.instrucod+this.mGrabar.gradocod+this.mGrabar.seccioncod},getConfiguracion:function(e){var n=this;return c()(i()().m(function o(){var r,a;return i()().w(function(o){while(1)switch(o.n){case 0:return r=n.mGrabar.instrucod||"",o.n=1,ee.getConfiguracion({accion:e,nivel:r});case 1:a=o.v,n.niveles=a.niveles,n.turnos=a.turnos,n.profesores=a.profesores,n.dataSedes=a.dataSedes,n.cprofesores=JSON.parse(JSON.stringify(n.profesores)),n.aulas=a.aulas,n.secciones=a.secciones,n.grados=a.grados,n.periodos=a.periodos,n.nombrePromocion=a.nombrePromocion,n.progEspecial=a.progEspecial,n.bachillerato=a.bachillerato,n.cupos=a.cupos,n.direccionAcademica=a.direccionAcademica,n.tutor2=a.tutor2,n.sedes=a.sedes,n.cierreInterEval=a.cierreInterEval,n.cierreObs=a.cierreObs;case 2:return o.a(2)}},o)}))()},grabarDatos:function(){var e=this;return c()(i()().m(function n(){var o,r,a,t,l,c,u,s;return i()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,e.$refs.form.validate();case 1:if(o=n.v,o){n.n=2;break}return e.$notify("Por favor complete la información solicitada","warning"),n.a(2,!1);case 2:if(r=e.mGrabar.pericie,a=e.mGrabar.pericco,!r||!(r>e.mGrabar.perinum||r<1)){n.n=3;break}return e.$notify("El periodo de cierre no es valido","warning"),n.a(2,!1);case 3:if(!a||!(a>e.mGrabar.perinum||a<1)){n.n=4;break}return e.$notify("El periodo de cierre de conducta no es valido","warning"),n.a(2,!1);case 4:return 2===e.mGrabar.accion&&(e.mGrabar.ngsNew=e.agregarNgs()),n.p=5,n.n=6,ee.grabarDatosSalon(e.mGrabar);case 6:t=n.v,l=t.message,c=t.data,1===e.mGrabar.accion?(e.mGrabar.ngsOriginal=e.agregarNgs(),e.mGrabar.accion=2,e.mGrabar.nemo=c):2===e.mGrabar.accion&&(e.mGrabar.ngsOriginal=e.mGrabar.ngsNew),e.$notify(l,"success"),n.n=8;break;case 7:n.p=7,s=n.v,u=s.error,e.$notify(u.message,"error");case 8:return n.a(2)}},n,null,[[5,7]])}))()},cargarGrados:function(e){var n=this;return c()(i()().m(function o(){return i()().w(function(o){while(1)switch(o.n){case 0:return e||n.$notify("Debe seleccionar un nivel para cargar el grado","warning"),o.n=1,ee.cargarGrados(e,n.mGrabar.accion);case 1:n.grados=o.v;case 2:return o.a(2)}},o)}))()},cargarPerinum:function(e){if(!e)return!1;var n=this.periodos.find(function(n){return n.value===e});this.mGrabar["perinum"]=n.perinum},cerrarModal:function(){this.$emit("cerrarModal")},nuevo:function(){var e=this;this.$confirm("Desea agregar un nuevo Salón?","info").onOk(function(n){e.formatearModalSalon()})},filter:function(e,n,o,r){var a=this;n(function(){var n=a["c"+r];a[r]=(0,ne.filterArray)(e,{field:["label","value"],list:n})})}},created:function(){1===this.accion?this.modalAgregar():this.modalEditar(this.dataSalon)}},ae=o(12807);const te=(0,ae.A)(re,[["render",J]]);var ie=te,le={class:"col-xs-12 col-sm-4"},ce={class:"col-xs-12 col-sm-4"},ue={class:"col-xs-12 col-sm-4"},se={class:"col-xs-12 col-sm-4"},de={class:"col-xs-12 col-sm-4"},me={class:"col-xs-12 col-sm-4"},pe={class:"col-xs-12 col-sm-4"},fe={class:"col-xs-12 col-sm-4"};function be(e,n){var o=(0,r.g2)("q-btn"),a=(0,r.g2)("q-select"),t=(0,r.g2)("q-form"),i=(0,r.g2)("sie-modal");return(0,r.uX)(),(0,r.Wv)(i,{class:"modal-cierre","esc-click":"",modelValue:e.openModal,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.openModal=n}),title:"Cierre de Periodos",header:!0,footer:e.sie.ruta.nivel>=2,ok:e.$t("botones.guardar"),loading:e.loadingModal,onSubmit:n[9]||(n[9]=function(n){return e.grabarCierre()}),esc:!0,onClose:e.cerrarModalCierre},{footerMobile:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(o,{icon:"plus",dense:"",round:"",color:"primary"})])]}),default:(0,r.k6)(function(){return[(0,r.bF)(t,{class:"row q-pa-sm q-pt-md q-col-gutter-sm"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",le,[(0,r.bF)(a,{modelValue:e.mCierre.instrucod,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.mCierre.instrucod=n}),options:e.config.niveles,onInput:e.cargarGrados,label:"Nivel"},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",ce,[(0,r.bF)(a,{modelValue:e.mCierre.turnocod,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.mCierre.turnocod=n}),options:e.config.turnos,label:"Turno"},null,8,["modelValue","options"])]),(0,r.Lk)("div",ue,[(0,r.bF)(a,{modelValue:e.mCierre.gradocod,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.mCierre.gradocod=n}),options:e.config.grados,label:"Grado"},null,8,["modelValue","options"])]),(0,r.Lk)("div",se,[(0,r.bF)(a,{modelValue:e.mCierre.seccioncod,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.mCierre.seccioncod=n}),options:e.config.secciones,label:"Sección"},null,8,["modelValue","options"])]),(0,r.Lk)("div",de,[(0,r.bF)(a,{modelValue:e.mCierre.tipcal,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.mCierre.tipcal=n}),options:e.config.tipcales,label:"Tipo de Calificación:"},null,8,["modelValue","options"])]),(0,r.Lk)("div",me,[(0,r.bF)(a,{modelValue:e.mCierre.pericie,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.mCierre.pericie=n}),options:e.config.pericies,label:"Notas por Periodo"},null,8,["modelValue","options"])]),(0,r.Lk)("div",pe,[(0,r.bF)(a,{modelValue:e.mCierre.pericieanual,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.mCierre.pericieanual=n}),options:e.config.periodoAnual,label:"Notas Anuales"},null,8,["modelValue","options"])]),(0,r.Lk)("div",fe,[(0,r.bF)(a,{modelValue:e.mCierre.pericco,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.mCierre.pericco=n}),options:e.config.pericies,label:"Conducta"},null,8,["modelValue","options"])])]}),_:1})]}),_:1},8,["modelValue","footer","ok","loading","onClose"])}var ge={cierrePeriodos:function(e){return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,Z.$http.post("api/SalonController/cierrePeriodos",{params:e}))}},n)}))()},getConfiguracion:function(e){return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,Z.$http.get("api/SalonController/getConfiguracion",{params:{data:e}}))}},n)}))()},cargarGrados:function(e,n){return c()(i()().m(function o(){return i()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,Z.$http.get("api/SalonController/getCargarGrados",{params:{nivel:e,accion:n}}))}},o)}))()}},Ce=ge,ve={emits:["cerrarModalCierre"],directives:{sieActive:R.A},components:{QSelect:I.A,QInput:h.A,sieModal:S.A,sieSelect:V.A,QForm:L.A,QBtn:v.Il},props:{},data:function(){return{funciones:oe,sie:(0,w["default"])(),loadingModal:!1,openModal:!1,config:{},mCierre:{accion:3}}},computed:{isLess:function(){return(0,k.isLess)()}},methods:{cargarGrados:function(e){var n=this;return c()(i()().m(function o(){return i()().w(function(o){while(1)switch(o.n){case 0:return e||n.$notify("Debe seleccionar un nivel para cargar el grado","warning"),o.n=1,Ce.cargarGrados(e,n.mCierre.accion);case 1:n.config.grados=o.v;case 2:return o.a(2)}},o)}))()},abrirModal:function(e){var n=this;return c()(i()().m(function o(){var r,a,t;return i()().w(function(o){while(1)switch(o.n){case 0:return r=n.mCierre.instrucod||"",o.n=1,Ce.getConfiguracion({accion:e,nivel:r});case 1:for(n.config=o.v,n.mCierre["instrucod"]="%",n.mCierre["turnocod"]="%",n.mCierre["gradocod"]="%",n.mCierre["seccioncod"]="%",n.mCierre["tipcal"]="%",n.mCierre["pericie"]="",n.mCierre["pericieanual"]=0,n.mCierre["pericco"]="",a=["pericieo","periciec","pericobs","pericobs2","pericie_obsxcond","nivel","pericie_informe","pericie_obsxcur","pericie_obsxinter"],t=0;t<a.length;t++)n.config[a[t]]&&(n.mCierre[a[t]]="");n.openModal=!0;case 2:return o.a(2)}},o)}))()},cerrarModalCierre:function(){this.$emit("cerrarModalCierre")},grabarCierre:function(){var e=this;return c()(i()().m(function n(){var o,r,a,t;return i()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,Ce.cierrePeriodos(e.mCierre);case 1:o=n.v,r=o.message,e.$notify(r,"success"),n.n=3;break;case 2:n.p=2,t=n.v,a=t.error,e.$notify(a.message,"error");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){this.abrirModal(3)}};const he=(0,ae.A)(ve,[["render",be]]);var Ie=he,Ee={data:function(){return{dinamicos:{ANO:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return this.actualizarCampo(e,o,"ANO")}},PERICCO:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICCO||(e.PERICCO=null),this.actualizarCampo(e,o,"PERICCO")}},PERICIE:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICIE||(e.PERICIE=null),this.actualizarCampo(e,o,"PERICIE")}},PERICIEANUAL:{renderHtml:function(e,n,o){return e.SEREC=e.PERICIEANUAL?e.PERICIEANUAL:0,o.checkbox({value:e.PERICIEANUAL,trueValue:1})},renderAction:function(e,n){var o=e.PERICIEANUAL;return 1===e.PERICIEANUAL?(e.PERICIEANUAL=0,n.PERICIEANUAL=0):(e.PERICIEANUAL=1,n.PERICIEANUAL=1),this.actualizarCampo(e,o,"PERICIEANUAL")}},PERICIEO:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICIEO||(e.PERICIEO=null),this.actualizarCampo(e,o,"PERICIEO")}},PERICIE_OBSXCUR:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICIE_OBSXCUR||(e.PERICIE_OBSXCUR=null),this.actualizarCampo(e,o,"PERICIE_OBSXCUR")}},PERICIEC:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICIEC||(e.PERICIEC=null),this.actualizarCampo(e,o,"PERICIEC")}},PERIASIS:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERIASIS||(e.PERIASIS=null),this.actualizarCampo(e,o,"PERIASIS")}},PERICIE_INFORME:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICIE_INFORME||(e.PERICIE_INFORME=null),this.actualizarCampo(e,o,"PERICIE_INFORME")}},PERICIE_OBSXCOND:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICIE_OBSXCOND||(e.PERICIE_OBSXCOND=null),this.actualizarCampo(e,o,"PERICIE_OBSXCOND")}},PERICIE_OBSXINTER:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICIE_OBSXINTER||(e.PERICIE_OBSXINTER=null),this.actualizarCampo(e,o,"PERICIE_OBSXINTER")}},PERICOBS:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICOBS||(e.PERICOBS=null),this.actualizarCampo(e,o,"PERICOBS")}},PERICOBS2:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.PERICOBS2||(e.PERICOBS2=null),this.actualizarCampo(e,o,"PERICOBS2")}},NIVEL:{component:"input",type:"number",autoSelect:!0,maxlength:1,input:function(e,n,o){return e.NIVEL||(e.NIVEL=null),this.actualizarCampo(e,o,"NIVEL")}},PROFCOD:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"PROFCOD")}},PROFCOD2:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"PROFCOD2")}},TIPO_PROC_ANUAL:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"TIPO_PROC_ANUAL")},edit:!1},PROFCOD3:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"PROFCOD3")}},PROFCOD4:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"PROFCOD4")}},PROFCOD5:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"PROFCOD5")}},PROFCOD6:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"PROFCOD6")}},PROFACTA:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"PROFACTA")}},LOCCOD:{component:"select",label:"Seleccione",optionValue:"SECUCOD",optionLabel:"SECUDES",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"LOCCOD")}},NORMA:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"NORMA")}},CALIF_R:{component:"select",label:"Seleccione",optionValue:"SECUCOD",optionLabel:"SECUDES",options:[],input:function(e,n,o){return this.actualizarCampo(e,o,"CALIF_R")}},EQUI_BACHI:{renderHtml:function(e,n,o){return e.EQUI_BACHI=e.EQUI_BACHI?e.EQUI_BACHI:"N",o.checkbox({value:e.EQUI_BACHI,trueValue:"S"})},renderAction:function(e,n){var o=e.EQUI_BACHI;return"S"===e.EQUI_BACHI?(n.EQUI_BACHI="N",e.EQUI_BACHI="N"):(e.EQUI_BACHI="S",n.EQUI_BACHI="S"),this.actualizarCampo(e,o,"EQUI_BACHI")}},ACCIONES:{component:"button",icon:["edit","delete"],permisos:{edit:"> 1",delete:"=== 3"},edit:function(e){this.modalEditar(e,1)},delete:function(e){this.eliminar(e)},tooltip:{edit:"Editar",delete:"Eliminar"},flat:!0,color:"primary"},CUPOS:{component:"input",type:"number",autoSelect:!0,maxlength:3,input:function(e,n,o){return this.actualizarCampo(e,o,"CUPOS")}}},configTbl:{columnas:[]},dataDetalle:[]}}},Se=(o(78786),{directives:{sieActive:R.A},mixins:[Ee],components:{modalSalones:ie,modalCierre:Ie,QCard:v.C$,QPopover:v.VM,QModalLayout:v.hT,QInnerLoading:v.SQ,QSpinnerOval:v.VA,QToggle:v.c5,QSelect:I.A,QInput:h.A,QOptionGroup:v.EX,sieModal:S.A,sieSelect:V.A,sieVacio:A.A,sieTable:O.A,QForm:L.A,exportFilePhp:P.exportFilePhp,QPage:v.Tu,QToolbar:v.ZV,QBtn:v.Il},data:function(){return{funciones:oe,sie:(0,w["default"])(),openModalSalones:!1,openModalCierre:!1,accionModal:1,dataSalon:{},loadingDetalle:!1,loadingModal:!1,openModal:{salon:!1,cierre:!1},selection:"",dataCampos:{profesores:[],psicologos:[]},profesores:[],psicologos:[],niveles:[],grados:[],aulas:[],secciones:[],periodos:[],turnos:[],mGrabar:{title:"Salón: Información Básica",grabar:1,ngsOriginal:"",ngsNew:""},mCierre:{grabar:3},reporte:{modal:!1,repcods:[],repcod:"tipo1",anios:[],niveles:[],sano:"",nacad:""},buttons:[{label:"Imprimir",icon:"print",click:this.imprimir},{label:"Cierre",icon:"block",click:this.cierrePeriodos,permiso:"> 1"},{label:"Nuevo",icon:"add",click:this.modalAgregar,permiso:"> 1"}]}},computed:{isLess:function(){return(0,k.isLess)()}},methods:{getAsignacionSalones:function(){var e=this;return c()(i()().m(function n(){var o,r,a,t,l;return i()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,e.loadingDetalle=!0,n.n=1,E.A.getAsignacionSalones({ano:e.sie.ano});case 1:if(o=n.v,o.columnas){n.n=2;break}return e.loadingDetalle=!1,n.a(2,!1);case 2:for(r={},r.columnas=o.columnas,r.paginacion={page:1,rowsPerPage:500},e.configTbl=r,e.dataDetalle=o.data,a=0;a<r.columnas.length;a++)t=r.columnas[a],Object.prototype.hasOwnProperty.call(t,"data")&&e.dinamicos.hasOwnProperty(t.name)&&(e.dinamicos[t.name].options=o.dataCampos[t.data]);n.n=4;break;case 3:n.p=3,l=n.v,console.log("error",l),e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 4:e.loadingDetalle=!1;case 5:return n.a(2)}},n,null,[[0,3]])}))()},modalAgregar:function(){this.dataSalon={},this.accionModal=1,this.openModalSalones=!0},cerrarModal:function(){this.getAsignacionSalones(),this.openModalSalones=!1},cerrarModalCierre:function(){this.getAsignacionSalones(),this.openModalCierre=!1},modalEditar:function(e){var n=this;return c()(i()().m(function o(){return i()().w(function(o){while(1)switch(o.n){case 0:n.dataSalon=e,n.accionModal=2,n.openModalSalones=!0;case 1:return o.a(2)}},o)}))()},cierrePeriodos:function(){var e=this;return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:e.openModalCierre=!0;case 1:return n.a(2)}},n)}))()},imprimir:function(){var e=this;return c()(i()().m(function n(){var o;return i()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,E.A.getConfiguracionReporte();case 1:o=n.v,e.reporte.repcods=o.reportes,e.reporte.anios=o.anios,e.reporte.niveles=o.niveles,e.reporte.sano=e.sie.ano,e.reporte.nacad="T",e.reporte.modal=!0;case 2:return n.a(2)}},n)}))()},verReporte:function(e){var n=this;return c()(i()().m(function o(){var r,a;return i()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$refs.form.validate();case 1:if(r=o.v,r){o.n=2;break}return n.$notify("Por favor complete la información solicitada","warning"),o.a(2,!1);case 2:a={case:n.reporte.repcod,formato:e,sano:n.reporte.sano,nacad:n.reporte.nacad,usucod:(0,w["default"])().usucod},(0,P.exportFilePhp)(a,"academico/salones/reporte");case 3:return o.a(2)}},o)}))()},eliminar:function(e){var n=this;return c()(i()().m(function o(){return i()().w(function(o){while(1)switch(o.n){case 0:n.$confirm("¿Realmente desea eliminar?","info").onOk(function(){var o=c()(i()().m(function o(r){var a,t,l,c;return i()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,E.A.deleteSalon({params:{idSalon:e.NEMO,ngs:"".concat(e.INSTRUCOD).concat(e.GRADOCOD).concat(e.SECCIONCOD),ano:e.ANO,idConducta:e.ID_CONDUCTA_SALON}});case 1:a=o.v,t=a.message,n.$notify(t,"success"),n.getAsignacionSalones(),o.n=3;break;case 2:o.p=2,c=o.v,l=c.error,n.$notify(l.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}));return function(e){return o.apply(this,arguments)}}());case 1:return o.a(2)}},o)}))()},actualizarCampo:function(e,n,o){var r=this;return c()(i()().m(function a(){var t,l,c,u,s;return i()().w(function(a){while(1)switch(a.p=a.n){case 0:if(o&&e){a.n=1;break}return r.$notify("No se puede actualizar la data","warning"),a.a(2,!1);case 1:if(n!==e[o]&&(n||null!==e[o])){a.n=2;break}return a.a(2,!1);case 2:return t={},t[o]=e[o],a.p=3,a.n=4,E.A.updateCampo({data:t,cond:e.NEMO});case 4:return l=a.v,c=l.message,r.$notify(c,"success"),a.a(2,!0);case 5:return a.p=5,s=a.v,u=s.error,r.$notify(u.message,"warning"),a.a(2,!1)}},a,null,[[3,5]])}))()}},created:function(){var e=this;return c()(i()().m(function n(){return i()().w(function(n){while(1)switch(n.n){case 0:e.getAsignacionSalones();case 1:return n.a(2)}},n)}))()}});const Ve=(0,ae.A)(Se,[["render",C]]);var Ae=Ve,Oe={components:{asignacionSalones:Ae},props:{},data:function(){return{}},computed:{},methods:{},created:function(){return c()(i()().m(function e(){return i()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()}};const Pe=(0,ae.A)(Oe,[["render",a]]);var we=Pe}}]);