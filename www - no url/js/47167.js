"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[47167],{47167:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var o=a(61758),i={class:"row items-center no-wrap"},l={class:"col-auto"},r={class:"row"},n={class:"col-xs-12 col-md-6"},d={class:"col-xs-12 col-md-6"};function s(e,t){var a=(0,o.g2)("q-btn"),s=(0,o.g2)("q-card-section"),u=(0,o.g2)("q-separator"),m=(0,o.g2)("q-select"),c=(0,o.g2)("create-grid"),f=(0,o.g2)("tipo-cambio"),h=(0,o.g2)("q-card"),p=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(p,null,{default:(0,o.k6)(function(){return[(0,o.bF)(h,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(s,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",i,[t[4]||(t[4]=(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("div",{class:"text-h6"},"Tipo de Cambio")],-1)),(0,o.Lk)("div",l,[e.nivelAcceso>=2?((0,o.uX)(),(0,o.Wv)(a,{key:0,class:"q-mr-sm",icon:"add",color:"primary",label:"Nuevo",size:"sm",onClick:e.agregar},null,8,["onClick"])):(0,o.Q3)("v-if",!0)])])]}),_:1}),(0,o.bF)(u),(0,o.bF)(s,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[(0,o.bF)(m,{class:"q-if-outlined",modelValue:e.anio,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.anio=t}),options:e.anios,onInput:e.filtrar,label:"Año"},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",d,[(0,o.bF)(m,{class:"q-if-outlined",modelValue:e.mes,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.mes=t}),options:e.meses,onInput:e.filtrar,label:"Mes"},null,8,["modelValue","options","onInput"])])]),(0,o.bF)(c,{onClickedit:e.edit,refresh:e.refresh,config:e.config,methodDelete:e.methodDelete,methodGet:e.methodGet},null,8,["onClickedit","refresh","config","methodDelete","methodGet"])]}),_:1}),e.openModal?((0,o.uX)(),(0,o.Wv)(f,{key:0,onUpdated:t[2]||(t[2]=function(t){return e.refresh=e.refresh+1}),dataform:e.dataform,idFormulario:22,modal:!0,modelValue:e.openModal,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.openModal=t}),methodUpdate:"HyoTipoCambioController/updateTipoCambio",methodAdd:"HyoTipoCambioController/addTipoCambio"},null,8,["dataform","modelValue"])):(0,o.Q3)("v-if",!0)]}),_:1})]}),_:1})}var u=a(57008),m=a.n(u),c=(a(77507),a(52133),a(10239),a(23513),a(50310),a(6724),a(83190),a(80660)),f=a(57668),h=a(7729),p=a(30640),C=a(42037),A=a(26697),g=a(53093),b=a(43346),v=a(53811),M=a(88567),T=a(95718),F=a(53380),N=a(6123),k=a(16648),D=a(57176),I=a(18105),w={props:{title:{type:String,default:"Cajas por Usuario"},subtitle:{type:String,default:null}},components:{tipoCambio:D.A,createGrid:h.A,QCard:M.A,QCardSection:T.A,QSeparator:F.A,QTabs:A.A,QTab:g.A,QTabPanels:v.A,QTabPanel:b.A,QPagination:N.ao,sieModal:p.A,QSearch:N.Ks,QSelect:k.A,QPage:N.Tu,QBtn:N.Il},data:function(){return{methodGet:"HyoTipoCambioController/getTipoCambio",methodDelete:"cajaController/deleteTipoCambio",refresh:1,nivelAcceso:(0,f["default"])().ruta.nivel,dataEdit:{},vjson:2,rowData:[],columnDefs:[],frameworkComponents:null,pagina:1,max:10,schema:{},openModal:!1,titleModalAdd:"",idFormulario:23,campoDelete:["ID_CAJA_USU"],campoMsgDelete:"NOMCOMP",campos:[],order:null,routeEdit:null,routeAdd:null,paramsEdit:{},modoAdd:1,modoEdit:1,dataform:{},refreshModal:1,openModalApertura:!1,monedas:[],config:{vjson:1,tabla:[{width:80,headerName:"Código",field:"ID_CAMBIO",hide:!0},{width:190,headerName:"Fecha",field:"FECCAM",valueFormatter:function(e){return(0,I.Ay)(e.value,"DD/MM/YYYY")}},{width:190,headerName:"Moneda Nacional",field:"MONNOMNAC"},{width:190,headerName:"Moneda de cambio",field:"MONNOM"},{width:110,headerName:"Compra",field:"COMPRA",valueFormatter:C.toFixed,decimales:this.decimales,cellClass:"text-right"},{width:110,headerName:"Venta",field:"VENTA",valueFormatter:C.toFixed,decimales:this.decimales,cellClass:"text-right"},{width:150,headerName:"Venta contabilidad",field:"VENTCONTA",valueFormatter:C.toFixed,decimales:this.decimales,cellClass:"text-right"},{width:150,headerName:"Compra contabilidad",field:"COMPCONTA",valueFormatter:C.toFixed,decimales:this.decimales,cellClass:"text-right"}],btnEdit:!0,btnDelete:!1,idFormulario:23,primary:["ID_CAMBIO"],campoMsgDelete:"ID_CAMBIO",order:null},decimales:2,mes:"T",anio:"T",anios:[],meses:[]}},methods:{filtrar:function(){var e={};"T"===this.mes&&"T"===this.anio||("T"!==this.mes&&(e.mes=this.mes),"T"!==this.anio&&(e.anio=this.anio));var t=m()({},this.config);t.filtro=e,this.config=t},loadList:function(){this.refresh=this.refresh+1},updatedForm:function(e){var t=e.ID_CAJA_USU,a=e.FECHA,o=e.TURNO;if(t&&a&&o){a=a.split("/").reverse().join("/");var i=m()({},this.configGrid);i.filtro={ID_CAJA_USU:t,FECHA:a,TURNO:o},this.configGrid=i,this.dataAperturaInicial=this.$refs.grid.rowData}},edit:function(e){this.openModal=!0;var t=e.data.FECCAM.slice(0,10);this.dataform=m()(m()({},e.data),{},{FECCAM:t})},agregar:function(e){this.dataform={},1===this.modoAdd?this.openModal=!0:this.$router.push({name:this.routeAdd})},getMonedas:function(){return c.$http.get("api/cobroController/getMoneda",{params:{response:"combo"}})},getFiltros:function(){var e=this;c.$http.get("api/tipoCambioController/getFiltros").then(function(t){var a=t.anios,o=t.meses,i=a.map(function(e){return{label:e.ANO,value:e.ID}});i.unshift({label:"Todos",value:"T"}),e.anios=i;var l=o.map(function(e){return{label:e.MESDES,value:e.MESINT}});l.unshift({label:"Todos",value:"T"}),e.meses=l})}},created:function(){this.getFiltros()}},O=a(12807);const E=(0,O.A)(w,[["render",s]]);var Q=E}}]);