"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[54689],{54689:function(e,t,n){n.r(t),n.d(t,{default:function(){return Wt}});var a=n(61758),o={class:"col column q-pa-sm"},r={class:"col colum"},i={class:"col column"},l={class:"col column"};function c(e,t){var n=(0,a.g2)("cabecera"),c=(0,a.g2)("archivo"),u=(0,a.g2)("q-step"),s=(0,a.g2)("estructura"),d=(0,a.g2)("planestudio"),f=(0,a.g2)("otrosComponentes"),p=(0,a.g2)("q-stepper"),m=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(m,null,{default:(0,a.k6)(function(){return[(0,a.bF)(p,{class:"q-stepper-pci",modelValue:e.stepActivo,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.stepActivo=t}),"header-nav":"",animated:"","done-color":"primary","active-color":"secondary",flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(u,{name:1,title:"Archivo",icon:"document_list",done:e.stepArchivo},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{step:1,btnAtras:!1,titulo:"Listado PCI",nombreBtn:"Continuar",onContinuar:e.continuar},null,8,["onContinuar"]),(0,a.Lk)("div",o,[(0,a.bF)(c,{onInicializarPciSeleccionado:e.inicializarPciSeleccionado,onViewEstructura:e.viewEstructura},null,8,["onInicializarPciSeleccionado","onViewEstructura"])])]}),_:1},8,["done"]),(0,a.bF)(u,{name:2,title:"Estructura",icon:"banco_datos",done:e.stepEstructura,"header-nav":e.fasePci>=2},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{step:2,titulo:e.dataPci.DESCRIPCION,nombreBtn:"Continuar",onContinuar:e.continuar,onAtras:e.atras},null,8,["titulo","onContinuar","onAtras"]),(0,a.Lk)("div",r,[(0,a.bF)(s,{pci:e.dataPci},null,8,["pci"])])]}),_:1},8,["done","header-nav"]),(0,a.bF)(u,{name:3,title:"Plan Estudio",icon:"time_table",done:e.stepPlan,"header-nav":e.fasePci>=2},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{step:3,titulo:e.dataPci.DESCRIPCION,nombreBtn:"Continuar",onContinuar:e.continuar,onAtras:e.atras},null,8,["titulo","onContinuar","onAtras"]),(0,a.Lk)("div",i,[(0,a.bF)(d,{pci:e.dataPci},null,8,["pci"])])]}),_:1},8,["done","header-nav"]),(0,a.bF)(u,{name:4,title:"Otros Componentes",icon:"playlist_add",done:e.stepOtros,"header-nav":e.fasePci>=2},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{step:4,titulo:e.dataPci.DESCRIPCION,nombreBtn:"Finalizar",onContinuar:e.continuar,onAtras:e.atras},null,8,["titulo","onContinuar","onAtras"]),(0,a.Lk)("div",l,[(0,a.bF)(f,{idPci:e.dataPci.ID},null,8,["idPci"])])]}),_:1},8,["done","header-nav"])]}),_:1},8,["modelValue"])]}),_:1})}var u=n(6123),s=n(9736),d=n(58714),f=n(74723),p=n(60760),m=n(30640),g=n(30545),b=n(59089),h=n(84603),v=n(80340),C=n(16648),I=n(58790),A={class:"pci-archivo"},k={class:"row"},D={class:"col-xs-12 col-sm-12 col-md-12 col-xl-12 q-pa-sm"},E={class:"row q-pa-sm"},O={class:"col-12 q-pb-sm"},_={class:"col-12"},P={class:"col-12"},S={key:1,class:"column col items-center justify-center"};function T(e,t){var n=(0,a.g2)("q-td"),o=(0,a.g2)("q-toggle"),r=(0,a.g2)("q-item-side"),i=(0,a.g2)("q-item-main"),l=(0,a.g2)("q-item"),c=(0,a.g2)("q-list"),u=(0,a.g2)("q-popover"),s=(0,a.g2)("q-icon"),d=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),p=(0,a.g2)("q-select"),m=(0,a.g2)("q-input"),g=(0,a.g2)("sie-upload"),b=(0,a.g2)("sie-modal"),h=(0,a.g2)("sie-pdf"),v=(0,a.g2)("sie-vacio"),C=(0,a.g2)("q-btn"),T=(0,a.g2)("q-page-sticky"),y=(0,a.gN)("close-overlay");return(0,a.uX)(),(0,a.CE)("div",A,[(0,a.Lk)("div",k,[(0,a.Lk)("div",D,[(0,a.bF)(f,{color:"secondary",data:e.dataPci.data,columns:e.dataPci.columns},{body:(0,a.k6)(function(t){return[(0,a.bF)(d,{props:t,class:(0,I.C4)(1===t.row.ESTADO?{"bg-green-2":!0}:{"bg-grey-2":!0})},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{key:"ANO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(t.row.ANO),1)]}),_:2},1032,["props"]),(0,a.bF)(n,{key:"FH_AUDITORIA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.date(t.row.FH_AUDITORIA)),1)]}),_:2},1032,["props"]),(0,a.bF)(n,{key:"DESCRIPCION",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(t.row.DESCRIPCION),1)]}),_:2},1032,["props"]),(0,a.bF)(n,{key:"EDITABLE",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(o,{modelValue:t.row.EDITABLE,"onUpdate:modelValue":function(e){return t.row.EDITABLE=e},onInput:function(n){return e.changeEditable(t.row)},"true-value":1,"false-value":0,"checked-icon":"lock_open","unchecked-icon":"lock_outline",disable:1===t.row.ESTADO||!e.acceso},null,8,["modelValue","onUpdate:modelValue","onInput","disable"])]}),_:2},1032,["props"]),(0,a.bF)(n,{key:"OPCIONES",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(s,{name:"more_vert"},{default:(0,a.k6)(function(){return[(0,a.bF)(u,{style:{"min-width":"200px"}},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"no-border",link:""},{default:(0,a.k6)(function(){return[(t.row.ESTADO||1===t.row.EDITABLE)&&e.acceso?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(l,{key:0,onClick:function(n){return e.abrirModalForm(t.row)}},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{icon:"edit",color:"black"}),(0,a.bF)(i,{label:e.$t("botones.editar")},null,8,["label"])]}),_:1},8,["onClick"])),[[y]]):(0,a.Q3)("v-if",!0),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(l,{onClick:function(n){return e.viewDocumento(t.row)}},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{icon:"remove_red_eye",color:"black"}),(0,a.bF)(i,{label:e.$t("botones.verDocumento")},null,8,["label"])]}),_:1},8,["onClick"])),[[y]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(l,{onClick:function(n){return e.viewEstructura(t.row)}},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{icon:"contenidos",color:"black"}),(0,a.bF)(i,{label:e.$t("botones.verContenido")},null,8,["label"])]}),_:1},8,["onClick"])),[[y]]),1!==t.row.ESTADO&&0!==t.row.TOTEST||!e.acceso?(0,a.Q3)("v-if",!0):(0,a.bo)(((0,a.uX)(),(0,a.Wv)(l,{key:1,onClick:function(n){return e.deletePci(t.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{icon:"delete",color:"black"}),(0,a.bF)(i,{label:e.$t("botones.eliminar")},null,8,["label"])]}),_:1},8,["onClick"])),[[y]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["props"])]}),_:2},1032,["props","class"])]}),_:1},8,["data","columns"])])]),(0,a.bF)(b,{class:"modal-pci",modelValue:e.modalForm,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.modalForm=t}),footer:!0,ok:e.$t("botones.guardar"),header:!0,title:e.tituloModal,onSubmit:e.savePci,"esc-click":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",E,[(0,a.Lk)("div",O,[(0,a.bF)(p,{outlined:"",modelValue:e.year,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.year=t}),options:e.dataYears,"option-label":"ANO","option-value":"ANO",label:e.$t("ano")},null,8,["modelValue","options","label"])]),(0,a.Lk)("div",_,[(0,a.bF)(m,{rules:[function(t){return!!t||e.$t("mensajes.m0020")}],modelValue:e.descripcion,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.descripcion=t}),label:"Descripción","error-message":e.$t("mensajes.m0020"),error:e.v$.descripcion.$error},null,8,["rules","modelValue","error-message","error"])]),(0,a.Lk)("div",P,[(0,a.bF)(g,{onUpload:e.addFile,icon:"file",title:e.$t("subirArchivos"),allow:["pdf"]},null,8,["onUpload","title"])])])]}),_:1},8,["modelValue","ok","title","onSubmit"]),(0,a.bF)(b,{class:"documento",modelValue:e.openDocumento,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.openDocumento=t}),column:"",title:e.tituloDocumento,header:!0,ok:!1,footer:!1},{default:(0,a.k6)(function(){return[e.urlPciActivo?((0,a.uX)(),(0,a.Wv)(h,{key:0,class:"col",src:e.urlPciActivo,"no-download":!0},null,8,["src"])):((0,a.uX)(),(0,a.CE)("div",S,[(0,a.bF)(v,{class:"col",icon:"phonelink_erase"})]))]}),_:1},8,["modelValue","title"]),(0,a.bF)(T,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,a.k6)(function(){return[e.acceso?((0,a.uX)(),(0,a.Wv)(C,{key:0,fab:"",round:"",color:"secondary",icon:"plus",onClick:t[4]||(t[4]=function(t){return e.abrirModalForm()})})):(0,a.Q3)("v-if",!0)]}),_:1})])}var y=n(63053),F=n.n(y),R=(n(74260),n(56285),n(50310),n(32203),n(515),n(83190),n(27153),n(62540),n(83972)),U=n(18105),N=n(33950),q=n(57668),L=n(80660),V={getTodos:function(){return L.$http.get("api/HyoPcpci/getTodos")},getPciActivo:function(){return L.$http.get("api/HyoPcpci/getPciActivo")},savePci:function(e){return L.$http.post("api/HyoPcpci/savePci",e)},updatePci:function(e){return L.$http.post("api/HyoPcpci/updatePci",e)},getAnios:function(){return L.$http.get("api/HyoAnos/getAnios")},deletePci:function(e){return L.$http.post("api/HyoPcpci/deletePci",e)},updateEditablePci:function(e){return L.$http.put("api/HyoPcpci/updateEditablePci",e)}},Q=n(982),M=n(69027),w=n(82640),$=function(e){return(0,U.Ay)(e,"DD/MM/YYYY HH:mm")},x={setup:function(){var e=(0,R.fG)();return{v$:e}},emits:["viewEstructura","inicializarPciSeleccionado"],components:{QTable:g.A,QTr:u.qh,QTd:u.Ef,QTooltip:u.nC,QPopover:u.VM,QToggle:u.c5,QInnerLoading:u.SQ,QSpinnerOval:u.VA,sieModal:m.A,notify:Q["default"],QPageSticky:u._U,siePdf:h.A,sieUpload:b.A,sieVacio:v.A,QSelect:C.S,QInput:s.A,QBtn:u.Il,Upload:N.Upload,sieInfo:q["default"],QIcon:u.bP,QList:u.Mb,QItem:u.H0,QItemSide:u.n1,QItemMain:u.mF},data:function(){var e=(0,q["default"])();return{sie:e,acceso:(0,q["default"])().ruta.nivel>2,dataPci:{data:[],columns:[{name:"ANO",label:"AÑO",field:"ANO",align:"left",sortable:!0},{name:"FH_AUDITORIA",label:"FECHA CARGA",field:"FH_AUDITORIA",align:"left",sortable:!0},{name:"DESCRIPCION",label:"ARCHIVO",field:"DESCRIPCION",align:"left",sortable:!0},{name:"EDITABLE",label:"EDITABLE",field:"EDITABLE",align:"center"},{name:"OPCIONES",label:"",field:"OPCIONES",align:"center"}]},modalForm:!1,objArchivo:null,idPci:0,descripcion:"",dataYears:[{ANO:"2020"}],year:"",tituloModal:"Nuevo PCI",openDocumento:!1,tituloDocumento:"",editando:!1,urlPciActivo:null,dataPciSeleccionado:{}}},validations:{descripcion:{required:w.mw}},methods:{date:$,abrirModalForm:function(e){if("object"===F()(e)){if(0===e.EDITABLE)return void(0,Q["default"])("No puede editar un PCI inactivo","warning");this.tituloModal="Editar ( "+e.DESCRIPCION+" )",this.year=e.ANO+"",this.descripcion=e.DESCRIPCION,this.idPci=e.ID,this.editando=!0}else this.tituloModal="Nuevo PCI",this.year=""+this.sie.ano,this.descripcion="",this.idPci=0,this.editando=!1;this.objArchivo={},this.modalForm=!0},addFile:function(e){var t=this;(0,N.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){t.objArchivo=e}).catch(function(){})},savePci:function(){var e=this;this.v$.$touch();var t="object"===F()(this.objArchivo)&&Object.keys(this.objArchivo).length>0?this.objArchivo.name:"",n={archivoTemp:t,ano:this.year,descripcion:this.descripcion};if(!this.v$.$invalid)return this.editando?this.updatePci(n):void V.savePci(n).then(function(t){t.json;e.getTodos(),e.modalForm=!1,(0,Q["default"])(e.$t("mensajes.m0001"),"success")}).catch(function(t){(0,Q["default"])(e.$t(t.error.message),"warning")})},updatePci:function(e){var t=this;e.id=this.idPci,V.updatePci(e).then(function(e){e.json;t.getTodos(),t.modalForm=!1,(0,Q["default"])(t.$t("mensajes.m0001"),"success")}).catch(function(e){(0,Q["default"])(t.$t(e.error.message),"warning")})},deletePci:function(e){var t=this;(0,M.dialogConfirm)({message:this.$t("mensajes.m0006.confirmacion")}).then(function(n){n&&V.deletePci({id:e}).then(function(){t.getTodos(),(0,Q["default"])(t.$t("mensajes.m0006.ok"),"success")}).catch(function(e){(0,Q["default"])(t.$t(e.error.message),"warning")})})},viewDocumento:function(e){this.urlPciActivo=this.generarUrl(e.RUTA),this.tituloDocumento=e.DESCRIPCION,this.openDocumento=!0},viewEstructura:function(e){this.dataPciSeleccionado=e,this.$emit("viewEstructura",this.dataPciSeleccionado)},generarUrl:function(e){return this.sie.api+"/HyoPcpci/descargar/"+e+"/documento_pci?sie-token="+this.sie.token},getAnios:function(){var e=this;V.getAnios().then(function(t){e.dataYears=t})},getTodos:function(){var e=this;V.getTodos().then(function(t){e.dataPci.data=t,e.dataPciSeleccionado=t.find(function(e){return 1===e.ESTADO}),e.inicializarPciSeleccionado()}).catch(function(e){console.log("error")})},inicializarPciSeleccionado:function(){this.$emit("inicializarPciSeleccionado",this.dataPciSeleccionado)},changeEditable:function(e){var t=this,n={id:e.ID,editable:e.EDITABLE};V.updateEditablePci(n).catch(function(e){console.log(e.error.message)}).finally(function(){t.getTodos()})}},created:function(){this.getAnios(),this.getTodos()}},j=n(12807);const X=(0,j.A)(x,[["render",T]]);var H=X,W=n(29104),B={class:"col bg-white shadow-1 q-pa-sm"},G={class:"row items-center"},z={class:"row gutter-md q-pa-md items-start"},K={class:"col-xs-12 col-sm-3"},Y={class:"col-xs-12 col-sm-3"},J={class:"row"},Z={class:"col-auto"},ee={class:"col"},te={class:"col-xs-12 col-sm-2"},ne={class:"col-xs-12 col-sm-4"},ae={class:"col-12"};function oe(e,t){var n=(0,a.g2)("q-btn"),o=(0,a.g2)("q-item"),r=(0,a.g2)("q-list"),i=(0,a.g2)("q-popover"),l=(0,a.g2)("q-tree"),c=(0,a.g2)("q-input"),u=(0,a.g2)("q-icon"),s=(0,a.g2)("q-color"),d=(0,a.g2)("q-popup-proxy"),f=(0,a.g2)("q-select"),p=(0,a.g2)("sie-modal"),m=(0,a.g2)("q-page-sticky"),g=(0,a.gN)("close-overlay");return(0,a.uX)(),(0,a.CE)("div",B,[(0,a.bF)(l,{nodes:e.dataEstructura,"node-key":"ID_PC_PCI_ESTRUCTURA","label-key":"DESCRIPCION",ref:"treeEstructura"},{"default-header":(0,a.k6)(function(t){return[(0,a.Lk)("div",G,[(0,a.Lk)("div",null,(0,I.v_)(t.node.DESCRIPCION),1),e.acceso?((0,a.uX)(),(0,a.Wv)(n,{key:0,round:"",color:"dark",icon:"more_vert",dense:"",flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{style:{"min-width":"150px"}},{default:(0,a.k6)(function(){return[(0,a.bF)(r,null,{default:(0,a.k6)(function(){return[(0,a.bF)(o,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[(0,a.bo)((0,a.bF)(n,{class:"full-width",flat:"","no-caps":"",icon:"add",label:e.$t("botones.agregar"),outline:!1,size:"14px",onClick:function(n){return e.openModal(t.node)},align:"left"},null,8,["label","onClick"]),[[g]])]}),_:2},1024),(0,a.bF)(o,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[(0,a.bo)((0,a.bF)(n,{class:"full-width",flat:"","no-caps":"",icon:"edit",label:e.$t("botones.editar"),outline:!1,size:"14px",onClick:function(n){return e.openModal(t.node,!0)},align:"left"},null,8,["label","onClick"]),[[g]])]}),_:2},1024),(0,a.bF)(o,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[(0,a.bo)((0,a.bF)(n,{class:"full-width",flat:"","no-caps":"",icon:"delete",label:e.$t("botones.eliminar"),outline:!1,size:"14px",align:"left",onClick:function(n){return e.deleteItem(t.node.ID_PC_PCI_ESTRUCTURA)}},null,8,["label","onClick"]),[[g]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,a.Q3)("v-if",!0)])]}),_:1},8,["nodes"]),(0,a.bF)(p,{title:e.title,modelValue:e.modal,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.modal=t}),css:{width:"40%"},ok:"Guardar",onSubmit:e.process,onShow:e.getNivelUso,onClose:e.cleanModal,"esc-click":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",z,[(0,a.Lk)("div",K,[(0,a.bF)(c,{modelValue:e.form.ABREVIATURA,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.ABREVIATURA=t}),label:"Abreviatura"},null,8,["modelValue"])]),(0,a.Lk)("div",Y,[(0,a.Lk)("div",J,[(0,a.Lk)("div",Z,[(0,a.bF)(u,{name:"simbolo11",size:"30px",style:(0,I.Tr)({color:e.form.COLOR})},null,8,["style"])]),(0,a.Lk)("div",ee,[(0,a.bF)(c,{filled:"",modelValue:e.form.COLOR,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.COLOR=t}),label:"Color","error-message":e.$t("mensajes.m0020"),error:e.v$.form.COLOR.$error},{append:(0,a.k6)(function(){return[(0,a.bF)(u,{class:"cursor-pointer",name:"colorize"},{default:(0,a.k6)(function(){return[(0,a.bF)(d,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)(function(){return[(0,a.bF)(s,{modelValue:e.form.COLOR,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.COLOR=t}),"no-header":"","no-footer":"","default-view":"palette",palette:e.paleta},null,8,["modelValue","palette"])]}),_:1})]}),_:1})]}),_:1},8,["modelValue","error-message","error"])])])]),(0,a.Lk)("div",te,[(0,a.bF)(c,{modelValue:e.form.ORDEN,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.ORDEN=t}),label:"Orden","error-message":e.$t("mensajes.m0020"),error:e.v$.form.ORDEN.$error},null,8,["modelValue","error-message","error"])]),(0,a.Lk)("div",ne,[(0,a.bF)(f,{modelValue:e.form.ID_PC_NIVEL_USO,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.ID_PC_NIVEL_USO=t}),options:e.listaNivelUso,"option-label":"DESCRIPCION","option-value":"ID_PC_NIVEL_USO",label:"Nivel de Uso","error-message":e.$t("mensajes.m0020"),error:e.v$.form.ID_PC_NIVEL_USO.$error},null,8,["modelValue","options","error-message","error"])]),(0,a.Lk)("div",ae,[(0,a.bF)(c,{modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.DESCRIPCION=t}),label:"Descripción","error-message":e.$t("mensajes.m0020"),error:e.v$.form.DESCRIPCION.$error},null,8,["modelValue","error-message","error"])])])]}),_:1},8,["title","modelValue","onSubmit","onShow","onClose"]),e.acceso?((0,a.uX)(),(0,a.Wv)(m,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{fab:"",round:"",color:"secondary",icon:"add",onClick:(0,W.D$)(e.openModal,["prevent"])},null,8,["onClick"])]}),_:1})):(0,a.Q3)("v-if",!0)])}n(48426);var re=n(52220),ie=n(96303),le={getEstructura:function(e){return L.$http.get("api/HyoPcEstructura/getEstructura",{params:e})},save:function(e){return L.$http.post("api/HyoPcEstructura/saveEstructura",{data:e})},update:function(e){return L.$http.put("api/HyoPcEstructura/updateEstructura",e)},delete:function(e){return L.$http.delete("api/HyoPcEstructura/deleteEstructura",{params:e})}},ce=n(95477),ue=n(91768),se={mixins:[u.VM],methods:{toggle:function(e){return e&&e.stopPropagation(),this[this.showing?"hide":"show"](e)}}},de={setup:function(){var e=(0,R.fG)();return{v$:e}},props:{pci:{type:Object,required:!0}},components:{QTree:re.A,QField:ie.A,QInput:s.A,QSelect:C.S,QPageSticky:u._U,QPopover:se,sieModal:m.A,QPopupProxy:ce.A,QColor:ue.A,QBtn:u.Il,QList:u.Mb,QItem:u.H0,QIcon:u.bP},data:function(){return{isEdit:!1,dataEstructura:[],modal:!1,listaNivelUso:[],title:"Nuevo",paleta:["#d98880","#f1948a","#c39bd3","#bb8fce","#7fb3d5","#85c1e9","#76d7c4","#73c6b6","#7dcea0","#82e0aa","#f7dc6f","#f8c471","#f0b27a","#e59866","#ffffff","#f4f6f7","#bfc9ca","#b2babb","#85929e","#808b96"],form:{ID_PC_PCI:this.pci.ID,ID_PC_PCI_ESTRUCTURA_REF:null,DESCRIPCION:"",ABREVIATURA:"",COLOR:"#ffffff",ORDEN:1,ID_PC_NIVEL_USO:""}}},validations:{form:{ID_PC_NIVEL_USO:{required:w.mw},DESCRIPCION:{required:w.mw},COLOR:{required:w.mw},ORDEN:{required:w.mw}}},methods:{init:function(){this.getEstructura()},openModal:function(e,t){t&&!0===t&&(this.isEdit=t,this.title="Editar",delete e["children"],this.form=Object.assign({},e)),e&&(Object.prototype.hasOwnProperty.call(e,"DESCRIPCION")||Object.prototype.hasOwnProperty.call(e,"ID_PC_PCI_ESTRUCTURA"))&&(t||(this.form["ID_PC_PCI_ESTRUCTURA_REF"]=e.ID_PC_PCI_ESTRUCTURA),this.title+=" (".concat(e.DESCRIPCION,")")),this.modal=!0},cleanModal:function(){this.isEdit=!1,this.modal=!1,this.title="Nuevo",this.form={ID_PC_PCI:this.pci.ID,ID_PC_PCI_ESTRUCTURA_REF:null,DESCRIPCION:"",ABREVIATURA:"",COLOR:"#ffffff",ORDEN:1,ID_PC_NIVEL_USO:""},this.v$.$reset()},getNivelUso:function(){var e=this;this.$http.get("api/HyoPcNivelUso/getNivelUso").then(function(t){e.listaNivelUso=t.json}).catch(function(e){console.log(e)})},getEstructura:function(){var e=this,t={id:this.pci.ID};le.getEstructura(t).then(function(t){return e.dataEstructura=t.json,e.$nextTick()}).then(function(){e.$refs.treeEstructura.expandAll()}).catch(function(e){console.log(e.error.message)})},process:function(){this.v$.$touch(),this.v$.$invalid||(this.isEdit?this.editItem():this.saveItem())},editItem:function(){var e=this,t={id:this.form.ID_PC_PCI_ESTRUCTURA,data:this.form};le.update(t).then(function(t){(0,Q["default"])(t.json.message),e.modal=!1}).then(function(){e.getEstructura()}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},saveItem:function(){var e=this;le.save(this.form).then(function(t){(0,Q["default"])(t.json.message),e.modal=!1}).then(function(){e.getEstructura()}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},deleteItem:function(e){var t=this,n={id:e};(0,M.dialogConfirm)({message:"¿Estas seguro de eliminar este registro?"}).then(function(e){if(e)return le.delete(n)}).then(function(e){(0,Q["default"])(e.json.message)}).then(function(){t.getEstructura()}).catch(function(e){(0,Q["default"])(e.error.message,"error")})}},computed:{acceso:function(){return(0,q["default"])().ruta.nivel>2&&(1===this.pci.ESTADO||1===this.pci.EDITABLE)}},created:function(){this.init()}};const fe=(0,j.A)(de,[["render",oe]]);var pe=fe,me=n(8445),ge=n.n(me),be={class:"col column q-pa-sm bg-white shadow-1"},he={key:0},ve={class:"row"},Ce={class:"col"},Ie={key:0,class:"q-mt-md col"},Ae={key:1,class:"q-mt-sm"},ke=["colspan"],De={width:"60"},Ee={key:0},Oe=["colspan"],_e={class:"row items-center justify-between"},Pe={class:"col"},Se=["readonly","onUpdate:modelValue","onKeyup"],Te={class:"col-auto"},ye={class:"no-padding"},Fe=["readonly","onUpdate:modelValue","onKeyup"],Re={class:"child"},Ue={class:"row items-center justify-between"},Ne={class:"col"},qe=["onUpdate:modelValue","readonly"],Le={class:"col-auto"},Ve={class:"no-padding"},Qe=["readonly","onUpdate:modelValue","onKeyup"],Me={class:"row q-pa-sm"},we={class:"col-12 q-pt-sm"},$e={key:1};function xe(e,t){var n=(0,a.g2)("q-select"),o=(0,a.g2)("sie-vacio"),r=(0,a.g2)("q-tooltip"),i=(0,a.g2)("q-input"),l=(0,a.g2)("q-popup-edit"),c=(0,a.g2)("q-btn"),u=(0,a.g2)("q-item"),s=(0,a.g2)("q-list"),d=(0,a.g2)("q-popover"),f=(0,a.g2)("q-markup-table"),p=(0,a.g2)("q-spinner-gears"),m=(0,a.g2)("q-inner-loading"),g=(0,a.g2)("q-fab"),b=(0,a.g2)("q-page-sticky"),h=(0,a.g2)("sie-modal"),v=(0,a.g2)("programacionArea"),C=(0,a.gN)("close-overlay");return(0,a.uX)(),(0,a.CE)("div",be,[e.tieneArea?((0,a.uX)(),(0,a.CE)("div",$e,[(0,a.bF)(v,{onRegresar:e.regresar,area:e.areaSeleccionada,idPci:e.pci.ID,nivelInstru:this.nivelInstru},null,8,["onRegresar","area","idPci","nivelInstru"])])):((0,a.uX)(),(0,a.CE)("div",he,[(0,a.Lk)("div",ve,[(0,a.Lk)("div",Ce,[(0,a.bF)(n,{modelValue:e.formData.instrucod,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formData.instrucod=t}),options:e.niveles,"option-label":"INSTRUDES","option-value":"INSTRUCOD",onInput:e.loadData,label:"Nivel"},null,8,["modelValue","options","onInput"])])]),""===e.formData.instrucod?((0,a.uX)(),(0,a.CE)("div",Ie,[(0,a.bF)(o,{title:"Debe seleccionar un nivel"})])):((0,a.uX)(),(0,a.CE)("div",Ae,[(0,a.bo)((0,a.bF)(f,{separator:"cell"},{default:(0,a.k6)(function(){return[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[t[7]||(t[7]=(0,a.Lk)("th",{rowspan:"2"},"Áreas / Asignaturas",-1)),(0,a.Lk)("th",{colspan:e.grados.length},"Distribución de Horas",8,ke)]),(0,a.Lk)("tr",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.grados,function(e){return(0,a.uX)(),(0,a.CE)("th",De,(0,I.v_)(e.GRADODES),1)}),256))])]),e.formData.data.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(e.formData.data,function(n,o){return(0,a.uX)(),(0,a.CE)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,[(0,a.Lk)("div",_e,[(0,a.Lk)("span",Pe,[(0,a.bo)((0,a.Lk)("input",{class:"full-width full-height border-trans",readonly:!e.acceso,type:"text","onUpdate:modelValue":function(e){return n.CURSONOM=e},onKeyup:(0,W.jR)(function(t){return e.updateItemContenido(n)},["enter"])},null,40,Se),[[W.Jo,n.CURSONOM]])]),(0,a.Lk)("span",Te,[(0,a.bF)(c,{round:"",color:"primary",icon:"repeat",dense:"",flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{anchor:"center left",self:"center right"},{default:(0,a.k6)(function(){return ge()(t[8]||(t[8]=[(0,a.eW)("Horas en bloque",-1)]))}),_:1}),e.acceso?((0,a.uX)(),(0,a.Wv)(l,{key:0,modelValue:e.hora,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.hora=t}),buttons:"",onSave:function(t){return e.setHorasEnBloque(n)},onShow:e.cleanHoraEnBloque},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{class:"q-if-outlined",type:"number",modelValue:e.hora,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.hora=t})},null,8,["modelValue"])]}),_:1},8,["modelValue","onSave","onShow"])):(0,a.Q3)("v-if",!0)]}),_:2},1024),(0,a.bF)(c,{round:"",color:"dark",icon:"more_vert",dense:"",flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(d,{style:{"min-width":"150px"}},{default:(0,a.k6)(function(){return[(0,a.bF)(s,null,{default:(0,a.k6)(function(){return[(0,a.bF)(u,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[(0,a.bo)((0,a.bF)(c,{class:"full-width",flat:"","no-caps":"",icon:"time_table",label:"Programar Área",outline:!1,size:"14px",align:"left",onClick:function(t){return e.programarArea(n)}},null,8,["onClick"]),[[C]])]}),_:2},1024),(0,a.bF)(u,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[e.acceso?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"full-width",flat:"","no-caps":"",icon:"assignment",label:"Fundamentación",outline:!1,size:"14px",align:"left",onClick:function(t){return e.fundamentarArea(n,o)}},null,8,["onClick"])),[[C]]):(0,a.Q3)("v-if",!0)]}),_:2},1024),(0,a.bF)(u,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[e.acceso?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"full-width",flat:"","no-caps":"",icon:"add",label:e.$t("botones.agregar"),outline:!1,size:"14px",align:"left",onClick:function(t){return e.addSubItem(n)}},null,8,["label","onClick"])),[[C]]):(0,a.Q3)("v-if",!0)]}),_:2},1024),(0,a.bF)(u,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[e.acceso?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"full-width",flat:"","no-caps":"",icon:"edit",label:e.$t("botones.eliminar"),outline:!1,size:"14px",align:"left",onClick:function(t){return e.deleteItem(n.CURSOCOD)}},null,8,["label","onClick"])),[[C]]):(0,a.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)])])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.grados,function(t){return(0,a.uX)(),(0,a.CE)("td",ye,[(0,a.bo)((0,a.Lk)("input",{class:"full-width full-height text-center border-trans",readonly:!e.acceso,minlength:"1",maxlength:"2",type:"text","onUpdate:modelValue":function(e){return n.GRADOS[t.GRADOCOD].NRO_HORA=e},onKeyup:(0,W.jR)(function(a){return e.updateItemPlanEstudio(n.GRADOS[t.GRADOCOD])},["enter"])},null,40,Fe),[[W.Jo,n.GRADOS[t.GRADOCOD].NRO_HORA]])])}),256))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.children,function(n,r){return(0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",Re,[(0,a.Lk)("div",Ue,[(0,a.Lk)("span",Ne,[(0,a.bo)((0,a.Lk)("input",{class:"full-width full-height border-trans",type:"text","onUpdate:modelValue":function(e){return n.CURSONOM=e},readonly:!e.acceso},null,8,qe),[[W.Jo,n.CURSONOM]])]),(0,a.Lk)("span",Le,[(0,a.bF)(c,{round:"",color:"primary",icon:"repeat",dense:"",flat:""},{default:(0,a.k6)(function(){return[e.acceso?((0,a.uX)(),(0,a.Wv)(l,{key:0,modelValue:e.hora,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.hora=t}),buttons:"",onSave:function(t){return e.setHorasEnBloque(n)},onShow:e.cleanHoraEnBloque},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{class:"q-if-outlined",type:"number",modelValue:e.hora,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.hora=t})},null,8,["modelValue"])]}),_:1},8,["modelValue","onSave","onShow"])):(0,a.Q3)("v-if",!0)]}),_:2},1024),(0,a.bF)(c,{round:"",color:"dark",icon:"more_vert",dense:"",flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(d,{style:{"min-width":"150px"}},{default:(0,a.k6)(function(){return[e.acceso?((0,a.uX)(),(0,a.Wv)(s,{key:0},{default:(0,a.k6)(function(){return[(0,a.bF)(u,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[e.acceso?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"full-width",flat:"","no-caps":"",icon:"assignment",label:"Fundamentación",outline:!1,size:"14px",align:"left",onClick:function(t){return e.fundamentarArea(n,o,r)}},null,8,["onClick"])),[[C]]):(0,a.Q3)("v-if",!0)]}),_:2},1024),(0,a.bF)(u,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[(0,a.bo)((0,a.bF)(c,{class:"full-width",flat:"","no-caps":"",icon:"edit",label:e.$t("botones.eliminar"),outline:!1,size:"14px",align:"left",onClick:function(t){return e.deleteItem(n.CURSOCOD)}},null,8,["label","onClick"]),[[C]])]}),_:2},1024)]}),_:2},1024)):(0,a.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)])])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.grados,function(t){return(0,a.uX)(),(0,a.CE)("td",Ve,[(0,a.bo)((0,a.Lk)("input",{class:"full-width full-height text-center border-trans",readonly:!e.acceso,minlength:"1",maxlength:"2",type:"text","onUpdate:modelValue":function(e){return n.GRADOS[t.GRADOCOD].NRO_HORA=e},onKeyup:(0,W.jR)(function(a){return e.updateItemPlanEstudio(n.GRADOS[t.GRADOCOD])},["enter"])},null,40,Qe),[[W.Jo,n.GRADOS[t.GRADOCOD].NRO_HORA]])])}),256))])}),256))])}),256)):((0,a.uX)(),(0,a.CE)("tbody",Ee,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{class:"tex-center",colspan:e.grados.length+1},"No hay plan de estudios disponible",8,Oe)])]))]}),_:1},512),[[W.aG,e.showTable]]),(0,a.bF)(m,{visible:e.visible},{default:(0,a.k6)(function(){return[(0,a.bF)(p,{size:"50px",color:"primary"}),t[9]||(t[9]=(0,a.Lk)("p",{class:"q-mt-xs"},"Cargando Plan de Estudios, por favor espere ...",-1))]}),_:1},8,["visible"])])),e.showTable&&e.acceso?((0,a.uX)(),(0,a.Wv)(b,{key:2,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,a.k6)(function(){return[(0,a.bF)(g,{color:"secondary",icon:"dots_vertical",direction:"up"},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{fab:"",round:"",color:"secondary",icon:"save",onClick:e.saveContenido},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{anchor:"center left",self:"center right"},{default:(0,a.k6)(function(){return ge()(t[10]||(t[10]=[(0,a.eW)("Guardar",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,a.bF)(c,{fab:"",round:"",color:"secondary",icon:"add",onClick:e.addItem},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{anchor:"center left",self:"center right"},{default:(0,a.k6)(function(){return ge()(t[11]||(t[11]=[(0,a.eW)("Nueva Área",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0),(0,a.bF)(h,{class:"modal-description",modelValue:e.dataModal.modalDescripcion,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.dataModal.modalDescripcion=t}),footer:!0,ok:e.$t("botones.guardar"),header:!0,title:e.dataModal.titleModal,onSubmit:e.updateDescripcion,"esc-click":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Me,[(0,a.Lk)("div",we,[(0,a.bF)(i,{modelValue:e.dataModal.descripcionArea,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dataModal.descripcionArea=t}),label:"Fundamentación",type:"textarea",rows:"20"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","ok","title","onSubmit"])]))])}n(10239),n(90095),n(13715);var je=n(96662),Xe={class:"pci-programacion"},He={class:"row gutter-sm"},We={class:"col"},Be={class:"row q-pa-sm"},Ge={class:"col-12 q-pb-sm"},ze={class:"col-12"},Ke={class:"row q-pa-sm"},Ye={class:"col-8 q-pr-sm"},Je={class:"col-12 q-pb-sm"},Ze={key:0,class:"col-12"},et={"slot-scope":"{ item, index }"},tt={class:"col-4"};function nt(e,t){var n=this,o=(0,a.g2)("q-btn"),r=(0,a.g2)("q-tab"),i=(0,a.g2)("q-tabs"),l=(0,a.g2)("q-card"),c=(0,a.g2)("q-item-label"),u=(0,a.g2)("q-item-section"),s=(0,a.g2)("q-item"),d=(0,a.g2)("acordeon"),f=(0,a.g2)("q-list"),p=(0,a.g2)("sie-vacio"),m=(0,a.g2)("q-tab-panel"),g=(0,a.g2)("q-tab-panels"),b=(0,a.g2)("q-input"),h=(0,a.g2)("sie-modal"),v=(0,a.g2)("q-radio"),C=(0,a.g2)("q-virtual-scroll");return(0,a.uX)(),(0,a.CE)("div",Xe,[(0,a.Lk)("div",He,[(0,a.Lk)("div",null,[(0,a.bF)(o,{class:"full-width",color:"primary",onClick:e.regresar,label:"Plan Estudio",icon:"arrow_back"},null,8,["onClick"]),(0,a.bF)(l,{class:"q-my-sm",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{modelValue:e.tabSelected,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.tabSelected=t}),vertical:"","active-bg-color":"grey-5","active-color":"primary"},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.allTabs,function(t){return(0,a.uX)(),(0,a.Wv)(r,{key:t.ID,class:"q-tab-prog",name:t.ID,label:t.DESCRIPCION,onClick:function(n){return e.openTabs(t)}},null,8,["name","label","onClick"])}),128))]}),_:1},8,["modelValue"])]}),_:1})]),(0,a.Lk)("div",We,[(0,a.bF)(s,null,{default:(0,a.k6)(function(){return[(0,a.bF)(u,null,{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"q-subheading"},{default:(0,a.k6)(function(){return[t[10]||(t[10]=(0,a.Lk)("span",{class:"text-weight-bold q-pr-xs"},"Nivel:",-1)),(0,a.Lk)("span",null,(0,I.v_)(n.nivelInstru.INSTRUDES),1)]}),_:1})]}),_:1})]}),_:1}),(0,a.bF)(s,{class:"q-mb-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(u,null,{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"q-subheading"},{default:(0,a.k6)(function(){return[t[11]||(t[11]=(0,a.Lk)("span",{class:"text-weight-bold q-pr-xs"},"Área:",-1)),(0,a.Lk)("span",null,(0,I.v_)(n.area.CURSONOM),1)]}),_:1})]}),_:1})]}),_:1}),(0,a.bF)(l,{flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(g,{modelValue:e.tabSelected,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tabSelected=t}),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.allTabs,function(t){return(0,a.uX)(),(0,a.Wv)(m,{key:t.ID,name:t.ID,style:{padding:"0 !important"}},{default:(0,a.k6)(function(){return[t.ID===e.tabSelected&&e.tabDetalle.length>0?((0,a.uX)(),(0,a.Wv)(f,{key:0,class:"no-padding"},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tabDetalle,function(t,n){return(0,a.uX)(),(0,a.Wv)(d,{key:t.ID,acceso:e.acceso,nivel:1,cartel:t,onOpenModalAgregar:e.openModalAgregar},null,8,["acceso","cartel","onOpenModalAgregar"])}),128))]}),_:1})):((0,a.uX)(),(0,a.Wv)(p,{key:1}))]}),_:2},1032,["name"])}),128))]}),_:1},8,["modelValue"])]}),_:1})])]),(0,a.bF)(h,{class:"modal-cartel",modelValue:e.modalAgregar,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.modalAgregar=t}),footer:!0,ok:e.$t("botones.guardar"),header:!0,title:e.tituloModalAgregar,onClose:e.closeModalAgregar,onSubmit:e.saveContenido,"esc-click":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Be,[(0,a.Lk)("div",Ge,[(0,a.bF)(b,{modelValue:e.formAgregar.TITULO,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formAgregar.TITULO=t}),label:"Título",type:"textarea",rows:"9"},null,8,["modelValue"])]),(0,a.Lk)("div",ze,[(0,a.bF)(b,{modelValue:e.formAgregar.DESCRIPCION,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formAgregar.DESCRIPCION=t}),label:"Descripción",type:"textarea",rows:"9"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","ok","title","onClose","onSubmit"]),(0,a.bF)(h,{class:"modal-cartel-pa",modelValue:e.modalAgregar,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.modalAgregar=t}),footer:!0,ok:e.$t("botones.guardar"),header:!0,title:e.tituloModalAgregar,onClose:e.closeModalAgregar,onSubmit:e.saveContenido,"esc-click":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Ke,[(0,a.Lk)("div",Ye,[(0,a.Lk)("div",Je,[(0,a.bF)(b,{modelValue:e.formAgregar.TITULO,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formAgregar.TITULO=t}),label:"Título",type:"textarea",rows:"9"},null,8,["modelValue"])]),e.bancoData.length>0?((0,a.uX)(),(0,a.CE)("div",Ze,[(0,a.bF)(C,{style:{"max-height":"500px"},items:e.bancoData,separator:""},{default:(0,a.k6)(function(){return[(0,a.Lk)("template",et,[((0,a.uX)(),(0,a.Wv)(s,{key:e.index,dense:""},{default:(0,a.k6)(function(){return[(0,a.bF)(u,null,{default:(0,a.k6)(function(){return[(0,a.bF)(v,{modelValue:e.selectBanco,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.selectBanco=t}),val:e.item.ID_PC_PCI_CONTENIDO_BANCO,color:"secondary",label:e.item.TITULO,onInput:t[7]||(t[7]=function(t){return e.agregarBanco(e.item)}),dense:""},null,8,["modelValue","val","label"])]}),_:1})]}),_:1}))])]}),_:1},8,["items"])])):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",tt,[(0,a.bF)(b,{modelValue:e.formAgregar.DESCRIPCION,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.formAgregar.DESCRIPCION=t}),label:"Descripción",type:"textarea",rows:"30"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","ok","title","onClose","onSubmit"])])}n(11777),n(2064);var at=n(26697),ot=n(53093),rt=n(53811),it=n(43346),lt=n(22926),ct=n(88567),ut=n(95718),st=n(53380),dt=n(88865),ft=n(66824),pt=n(34262),mt=n(82327),gt=n(88706),bt=n(54387),ht=n(99515);function vt(e,t){var n=(0,a.g2)("q-item-section"),o=(0,a.g2)("q-tooltip"),r=(0,a.g2)("q-btn"),i=(0,a.g2)("q-icon"),l=(0,a.g2)("q-item"),c=(0,a.g2)("q-list"),u=(0,a.g2)("q-menu"),s=(0,a.g2)("acordeon"),d=(0,a.g2)("q-expansion-item");return 0===e.cartel.children.length?((0,a.uX)(),(0,a.Wv)(l,{key:0,class:"q-acordeon",style:(0,I.Tr)({paddingLeft:e.getPaddingLeft(e.nivel),background:e.cartel.COLOR})},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{class:(0,I.C4)({"text-bold":1===e.cartel.ESTADO||0===e.cartel.ESTADO})},{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.cartel.TITULO),1)]}),_:1},8,["class"]),e.acceso?((0,a.uX)(),(0,a.Wv)(n,{key:0,side:""},{default:(0,a.k6)(function(){return[1===e.cartel.ESTADO?((0,a.uX)(),(0,a.Wv)(r,{key:0,icon:"add_circle",round:"",dense:"",color:"black",flat:"",onClick:t[0]||(t[0]=(0,W.D$)(function(t){return e.$emit("openModalAgregar",{item:e.cartel,status:1})},["stop"]))},{default:(0,a.k6)(function(){return[(0,a.bF)(o,{anchor:"center left",self:"center right"},{default:(0,a.k6)(function(){return ge()(t[7]||(t[7]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0),2===e.cartel.ESTADO?((0,a.uX)(),(0,a.Wv)(r,{key:1,icon:"more_vert",round:"",dense:"",color:"dark",flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(u,{style:{"min-width":"200px"},"stop-propagation":""},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"no-border no-padding",link:""},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{onClick:t[1]||(t[1]=function(t){return e.$emit("openModalAgregar",{item:e.cartel,status:2})}),clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{size:"20px",name:"edit"})]}),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.$t("botones.editar")),1)]}),_:1})]}),_:1}),(0,a.bF)(l,{onClick:t[2]||(t[2]=function(t){return e.$emit("openModalAgregar",{item:e.cartel,status:3})}),clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{size:"20px",name:"delete"})]}),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1})]}),_:1})]}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0)]}),_:1})):(0,a.Q3)("v-if",!0)]}),_:1},8,["style"])):((0,a.uX)(),(0,a.Wv)(d,{key:1,class:"q-acordeon","switch-toggle-side":"","dense-toggle":"","expand-separator":"","header-style":{paddingLeft:e.getPaddingLeft(e.nivel),background:e.cartel.COLOR}},{header:(0,a.k6)(function(){return[(0,a.bF)(n,{class:(0,I.C4)({"text-bold":1===e.cartel.ESTADO||0===e.cartel.ESTADO})},{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.cartel.TITULO),1)]}),_:1},8,["class"]),e.acceso?((0,a.uX)(),(0,a.Wv)(n,{key:0,side:""},{default:(0,a.k6)(function(){return[1===e.cartel.ESTADO?((0,a.uX)(),(0,a.Wv)(r,{key:0,icon:"add_circle",round:"",dense:"",color:"black",flat:"",onClick:t[3]||(t[3]=(0,W.D$)(function(t){return e.$emit("openModalAgregar",{item:e.cartel,status:1})},["stop"]))},{default:(0,a.k6)(function(){return[(0,a.bF)(o,{anchor:"center left",self:"center right"},{default:(0,a.k6)(function(){return ge()(t[8]||(t[8]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0),2===e.cartel.ESTADO?((0,a.uX)(),(0,a.Wv)(r,{key:1,icon:"more_vert",round:"",dense:"",color:"dark",flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(u,{style:{"min-width":"200px"},"stop-propagation":""},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"no-border no-padding",link:""},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{onClick:t[4]||(t[4]=function(t){return e.$emit("openModalAgregar",{item:e.cartel,status:2})}),clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{size:"20px",name:"edit"})]}),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.$t("botones.editar")),1)]}),_:1})]}),_:1}),(0,a.bF)(l,{onClick:t[5]||(t[5]=function(t){return e.$emit("openModalAgregar",{item:e.cartel,status:3})}),clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{avatar:""},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{size:"20px",name:"delete"})]}),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1})]}),_:1})]}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0)]}),_:1})):(0,a.Q3)("v-if",!0)]}),default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.cartel.children,function(n,o){return(0,a.uX)(),(0,a.Wv)(s,{key:n.ID,nivel:e.nivel+1,acceso:e.acceso,cartel:n,onOpenModalAgregar:t[6]||(t[6]=function(t){return e.$emit("openModalAgregar",t)})},null,8,["nivel","acceso","cartel"])}),128))]}),_:1},8,["header-style"]))}var Ct={emits:["continuar","atras"],name:"acordeon",props:{nivel:{type:Number,default:1},cartel:{type:Object,required:!0},acceso:{type:Boolean,default:!1}},components:{QExpansionItem:lt.A,QSeparator:st.A,QItemSection:dt.A,QCard:ct.A,QCardSection:ut.A,QBtn:u.Il,QIcon:pt.A,QItem:mt.A,QMenu:gt.A,QTooltip:u.nC,QPageSticky:u._U,QList:u.Mb},data:function(){return{}},methods:{continuar:function(e){this.$emit("continuar",e)},atras:function(e){this.$emit("atras",e)},getPaddingLeft:function(e){return 1===e?"15px !important":"".concat(17*e,"px !important")}},created:function(){}};const It=(0,j.A)(Ct,[["render",vt]]);var At=It,kt=n(33001),Dt={setup:function(){var e=(0,R.fG)();return{v$:e}},emits:["regresar"],components:{QTabs:at.A,QTab:ot.A,QTabPanels:rt.A,QTabPanel:it.A,QList:u.Mb,QExpansionItem:lt.A,QCard:ct.A,QCardSection:ut.A,QItemLabel:ft.A,QSeparator:st.A,QItemSection:dt.A,QIcon:pt.A,QItem:mt.A,QMenu:gt.A,QVirtualScroll:bt.A,QRadio:ht.A,sieModal:m.A,QInput:s.A,acordeon:At,sieVacio:v.A,sieInfo:q["default"],QBtn:u.Il},props:{area:{type:Object,required:!0},idPci:{type:Number,required:!0},nivelInstru:{type:Object,required:!0}},computed:{bancoData:function(){var e=(0,kt.filterArray)(this.formAgregar.TITULO,{field:"TITULO",list:this.dataBanco});return""===this.formAgregar.TITULO&&(this.selectBanco=""),Object.freeze(e)}},data:function(){var e=(0,q["default"])();return{sie:e,acceso:e.ruta.nivel>2,allTabs:[{name:"competencias",label:"Competencias"},{name:"contenidos",label:"Contenidos"},{name:"estrategias",label:"Estrategias"}],tabSelected:"",tabDetalle:{},modalAgregar:!1,tituloModalAgregar:"Agregar",formAgregar:{TITULO:"",DESCRIPCION:"",EDITANDO:!1},dataEditable:{},dataBanco:[],selectBanco:""}},validations:{form:{DESCRIPCION:{required:w.mw}}},methods:{openModalAgregar:function(e){var t=e.item,n=e.status;1===n||2===n?this.cargarModalAgregar(t,n):this.deleteContenido(t)},cargarModalAgregar:function(e,t){2===t&&(this.formAgregar.EDITANDO=!0,this.tituloModalAgregar="Editar",this.formAgregar.TITULO=e.TITULO,this.formAgregar.DESCRIPCION=e.DESCRIPCION),this.dataEditable=e,this.getListarPorEstructura(),this.modalAgregar=!0},deleteContenido:function(e){var t=this,n={id:e.ID};(0,M.dialogConfirm)({message:"¿Estas seguro de eliminar este registro?"}).then(function(e){if(e)return t.$http.delete("api/HyoPcContenido/deleteContenido",{params:n})}).then(function(e){(0,Q["default"])(e.json.message)}).then(function(){t.openTabs({ID:t.tabSelected}),t.closeModalAgregar()}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},saveContenido:function(){if(void 0===this.dataEditable.ID)return(0,Q["default"])("Faltan datos"),!1;this.formAgregar.EDITANDO?this.updateItemContenido():this.saveContenidoPlan()},saveContenidoPlan:function(){var e=this,t={idEstructura:this.dataEditable.ID_ESTRUCTURA,idContenido:this.dataEditable.ID_CONTENIDO_REF,titulo:this.formAgregar.TITULO,descripcion:this.formAgregar.DESCRIPCION,instrucod:this.dataEditable.ID_INSTRU,idCiclo:this.dataEditable.ID_CICLO,idGrado:this.dataEditable.ID_GRADO};this.$http.post("api/HyoPcContenido/saveContenidoPlan",t).then(function(t){e.openTabs({ID:e.tabSelected}),e.closeModalAgregar(),(0,Q["default"])(t.json.message)}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},updateItemContenido:function(){var e=this,t={id:this.dataEditable.ID,titulo:this.formAgregar.TITULO,descripcion:this.formAgregar.DESCRIPCION};this.$http.put("api/HyoPcContenido/updateTitulo",t).then(function(t){e.openTabs({ID:e.tabSelected}),e.closeModalAgregar(),(0,Q["default"])(t.json.message)}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},closeModalAgregar:function(){this.formAgregar.EDITANDO=!1,this.formAgregar.TITULO="",this.formAgregar.DESCRIPCION="",this.tituloModalAgregar="Agregar",this.modalAgregar=!1},regresar:function(){this.$emit("regresar")},openTabs:function(e){var t=this,n={idCurso:this.area.CURSOCOD,idCartel:e.ID,idInstru:this.nivelInstru.INSTRUCOD};this.$http.get("api/HyoPcContenido/getCartelEstructura",{params:n}).then(function(e){t.tabDetalle=e.json}).catch(function(e){console.log(e.error.message)})},getCartel:function(){var e=this,t={id:this.idPci};this.$http.get("api/HyoPcEstructura/getCartel",{params:t}).then(function(t){t.json.length>0&&(e.allTabs=t.json,e.tabSelected=e.allTabs[0].ID,e.openTabs(e.allTabs[0]))}).catch(function(e){console.log(e.error.message)})},getListarPorEstructura:function(){var e=this,t={id:this.dataEditable.ID_ESTRUCTURA};this.$http.get("api/HyoPcContenidoBanco/getListarPorEstructura",{params:t}).then(function(t){t.json.length>0&&(e.dataBanco=t.json)}).catch(function(e){console.log(e.error.message)})},agregarBanco:function(e){this.formAgregar.TITULO=e.TITULO}},created:function(){this.getCartel()}};const Et=(0,j.A)(Dt,[["render",nt]]);var Ot=Et,_t={props:{pci:{type:Object,required:!0}},components:{QPopover:u.VM,QMarkupTable:je.A,sieVacio:v.A,QInput:s.A,QSelect:C.S,QPageSticky:u._U,QInnerLoading:u.SQ,QSpinnerGears:u.hV,programacionArea:Ot,QFab:u.l6,QPopupEdit:u.GT,QTooltip:u.nC,sieInfo:q["default"],sieModal:m.A,QBtn:u.Il,QList:u.Mb,QItem:u.H0},directives:{focus:{inserted:function(e){e.focus()}}},data:function(){var e=(0,q["default"])();return{sie:e,acceso:(0,q["default"])().ruta.nivel>2,visible:!1,showTable:!1,niveles:[{INSTRUCOD:"I",INSTRUDES:"Inicial"},{INSTRUCOD:"P",INSTRUDES:"Primaria"},{INSTRUCOD:"S",INSTRUDES:"Secundaria"}],grados:[],formData:{instrucod:"",id_pc_pci:"",data:{}},hora:"",areaSeleccionada:{},nivelInstru:"",dataModal:{descripcionArea:"",modalDescripcion:!1,editable:{}}}},methods:{init:function(){this.getNiveles()},newItem:function(){var e={};return this.grados.forEach(function(t){e[t.GRADOCOD]={GRADOCOD:t.GRADOCOD,NRO_HORA:0}}),{CURSONOM:"",GRADOS:e}},addItem:function(){var e=this.newItem();e.children=[],this.formData.data.unshift(e)},addSubItem:function(e){e.children.push(this.newItem())},programarArea:function(e){this.areaSeleccionada=e},getNiveles:function(){var e=this;this.$http.get("api/HyoPcPlanEstudio/getNivelesByUsuario").then(function(t){t.json.length>0&&(e.niveles=t.json)}).catch(function(e){console.log(e.error.message)})},loadData:function(){this.getGrados(),this.getContenidoPlanEstudio()},getGrados:function(){var e=this;this.visible=!0,this.showTable=!1;var t={instrucod:this.formData.instrucod};this.nivelInstru=this.niveles.find(function(t){return t.INSTRUCOD===e.formData.instrucod}),this.$http.get("api/HyoGradoNivs/getGradosByNivel",{params:t}).then(function(t){e.grados=t.json}).catch(function(e){console.log(e)}).finally(function(){e.visible=!1,e.showTable=!0})},getContenidoPlanEstudio:function(){var e=this,t={idPci:this.formData.id_pc_pci,idInstru:this.formData.instrucod};this.$http.get("api/HyoPcContenido/getPlanEstructura",{params:t}).then(function(t){e.formData.data=t.json}).catch(function(e){console.log(e)})},cleanHoraEnBloque:function(){this.hora=""},setHorasEnBloque:function(e){for(var t=Object.keys(e.GRADOS),n=0;n<t.length;n++){var a=t[n],o=e.GRADOS[a];o.NRO_HORA=this.hora}this.updateBulk(e)},saveContenido:function(){var e=this;this.$http.post("api/HyoPcContenido/saveContenido",this.formData).then(function(e){(0,Q["default"])(e.json.message)}).then(function(){e.getContenidoPlanEstudio()}).catch(function(e){console.log(e)})},updateItemContenido:function(e){if(e.CURSOCOD){var t={id:e.CURSOCOD,titulo:e.CURSONOM};this.$http.put("api/HyoPcContenido/updateTitulo",t).then(function(e){(0,Q["default"])(e.json.message)}).catch(function(e){(0,Q["default"])(e.error.message,"error")})}},updateItemPlanEstudio:function(e){if(e.ID_GDHORA){var t={id:e.ID_GDHORA,hora:e.NRO_HORA};this.$http.put("api/HyoPcPlanEstudio/updateHora",t).then(function(e){(0,Q["default"])(e.json.message)}).catch(function(e){console.log(e.error.message,"error")})}},updateBulk:function(e){if(e.CURSOCOD){var t={data:e.GRADOS};this.$http.put("api/HyoPcPlanEstudio/updateBulkHora",t).then(function(e){(0,Q["default"])(e.json.message)}).catch(function(e){(0,Q["default"])(e.error.message,"error")})}},deleteItem:function(e){var t=this,n={id:e};(0,M.dialogConfirm)({message:"¿Estas seguro de eliminar este registro?"}).then(function(e){if(e)return t.$http.delete("api/HyoPcContenido/deleteContenido",{params:n})}).then(function(e){(0,Q["default"])(e.json.message)}).then(function(){t.getContenidoPlanEstudio()}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},regresar:function(){this.areaSeleccionada={}},fundamentarArea:function(e,t,n){this.dataModal.titleModal=e.CURSONOM,this.dataModal.indexModal=t,this.dataModal.indexCModal=n,this.dataModal.descripcionArea=e.FUNDAMENTACION,this.dataModal.editable=e,this.dataModal.modalDescripcion=!0},updateDescripcion:function(){var e=this,t={id:this.dataModal.editable.CURSOCOD,descripcion:this.dataModal.descripcionArea};this.$http.put("api/HyoPcContenido/updateDescripcion",t).then(function(t){2===e.dataModal.editable.NIVEL_USO?e.formData.data[e.dataModal.indexModal].FUNDAMENTACION=e.descripcionArea:e.formData.data[e.dataModal.indexModal].children[e.dataModal.indexCModal].FUNDAMENTACION=e.dataModal.descripcionArea,e.closeModalDescripcion(),(0,Q["default"])(t.json.message)}).catch(function(e){console.log(e.error.message,"error")})},closeModalDescripcion:function(){this.dataModal.descripcionArea="",this.dataModal.editable={},this.dataModal.modalDescripcion=!1}},mounted:function(){this.formData["id_pc_pci"]=this.pci.ID},computed:{tieneArea:function(e){return Object.keys(this.areaSeleccionada).length>0}},created:function(){this.init()}};const Pt=(0,j.A)(_t,[["render",xe]]);var St=Pt,Tt={class:"pci-otros-componentes q-pa-sm bg-white"},yt={class:"row gutter-sm"},Ft={class:"col"},Rt={class:"row q-pa-sm"},Ut={class:"col-12 q-pb-sm"},Nt={class:"col-12"};function qt(e,t){var n=(0,a.g2)("q-tab"),o=(0,a.g2)("q-tabs"),r=(0,a.g2)("q-card"),i=(0,a.g2)("acordeon"),l=(0,a.g2)("q-list"),c=(0,a.g2)("sie-vacio"),u=(0,a.g2)("q-tab-panel"),s=(0,a.g2)("q-tab-panels"),d=(0,a.g2)("q-input"),f=(0,a.g2)("sie-modal"),p=(0,a.g2)("q-tooltip"),m=(0,a.g2)("q-btn"),g=(0,a.g2)("q-page-sticky");return(0,a.uX)(),(0,a.CE)("div",Tt,[(0,a.Lk)("div",yt,[(0,a.Lk)("div",null,[(0,a.bF)(r,{class:"q-my-sm",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(o,{modelValue:e.tabSelected,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.tabSelected=t}),vertical:"","active-bg-color":"grey-5","active-color":"primary"},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.allTabs,function(t){return(0,a.uX)(),(0,a.Wv)(n,{key:t.ID,class:"q-tab-prog",name:t.ID,label:t.DESCRIPCION,onClick:function(n){return e.openTabs(t)}},null,8,["name","label","onClick"])}),128))]}),_:1},8,["modelValue"])]}),_:1})]),(0,a.Lk)("div",Ft,[(0,a.bF)(r,{flat:""},{default:(0,a.k6)(function(){return[(0,a.bF)(s,{modelValue:e.tabSelected,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tabSelected=t}),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.allTabs,function(t){return(0,a.uX)(),(0,a.Wv)(u,{key:t.ID,name:t.ID,style:{padding:"0 !important"}},{default:(0,a.k6)(function(){return[t.ID===e.tabSelected&&e.tabDetalle.length>0?((0,a.uX)(),(0,a.Wv)(l,{key:0,class:"no-padding"},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tabDetalle,function(t,n){return(0,a.uX)(),(0,a.Wv)(i,{key:t.ID,nivel:1,cartel:t,onOpenModalAgregar:e.openModalAgregar,acceso:e.acceso},null,8,["cartel","onOpenModalAgregar","acceso"])}),128))]}),_:1})):((0,a.uX)(),(0,a.Wv)(c,{key:1}))]}),_:2},1032,["name"])}),128))]}),_:1},8,["modelValue"])]}),_:1})])]),(0,a.bF)(f,{class:"modal-cartel",modelValue:e.modalAgregar,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.modalAgregar=t}),footer:!0,ok:e.$t("botones.guardar"),header:!0,title:e.tituloModalAgregar,onClose:e.closeModalAgregar,onSubmit:e.saveContenido,"esc-click":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Rt,[(0,a.Lk)("div",Ut,[(0,a.bF)(d,{modelValue:e.formAgregar.TITULO,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formAgregar.TITULO=t}),label:"Título",type:"textarea",rows:"9"},null,8,["modelValue"])]),(0,a.Lk)("div",Nt,[(0,a.bF)(d,{modelValue:e.formAgregar.DESCRIPCION,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formAgregar.DESCRIPCION=t}),label:"Descripción",type:"textarea",rows:"9"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","ok","title","onClose","onSubmit"]),(0,a.bF)(g,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,a.k6)(function(){return[e.acceso?((0,a.uX)(),(0,a.Wv)(m,{key:0,fab:"",round:"",color:"secondary",icon:"plus",onClick:t[5]||(t[5]=function(t){return e.openModalAgregar({item:e.dataTabSelected,status:1})})},{default:(0,a.k6)(function(){return[(0,a.bF)(p,{anchor:"center left",self:"center right"},{default:(0,a.k6)(function(){return ge()(t[6]||(t[6]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0)]}),_:1})])}var Lt={setup:function(){var e=(0,R.fG)();return{v$:e}},emits:["regresar"],components:{QTabs:at.A,QTab:ot.A,QTabPanels:rt.A,QTabPanel:it.A,QList:u.Mb,QExpansionItem:lt.A,QCard:ct.A,QCardSection:ut.A,QItemLabel:ft.A,QSeparator:st.A,QItemSection:dt.A,QIcon:pt.A,QItem:mt.A,QMenu:gt.A,QTooltip:u.nC,sieModal:m.A,QInput:s.A,acordeon:At,sieVacio:v.A,QPageSticky:u._U,QBtn:u.Il,sieInfo:q["default"]},props:{idPci:{type:Number,required:!0}},data:function(){var e=(0,q["default"])();return{sie:e,acceso:(0,q["default"])().ruta.nivel>2,allTabs:[{name:"competencias",label:"Competencias"},{name:"contenidos",label:"Contenidos"},{name:"estrategias",label:"Estrategias"}],tabSelected:"",dataTabSelected:{},tabDetalle:{},modalAgregar:!1,tituloModalAgregar:"Agregar",formAgregar:{TITULO:"",DESCRIPCION:"",EDITANDO:!1},dataEditable:{}}},validations:{form:{DESCRIPCION:{required:w.mw}}},methods:{openModalAgregar:function(e){var t=e.item,n=e.status;this.dataEditable=t,1===n||2===n?this.cargarModalAgregar(t,n):this.deleteContenido(t)},cargarModalAgregar:function(e,t){2===t&&(this.formAgregar.EDITANDO=!0,this.tituloModalAgregar="Editar",this.formAgregar.TITULO=e.TITULO,this.formAgregar.DESCRIPCION=e.DESCRIPCION),this.modalAgregar=!0},deleteContenido:function(e){var t=this,n={id:e.ID};(0,M.dialogConfirm)({message:"¿Estas seguro de eliminar este registro?"}).then(function(e){if(e)return t.$http.delete("api/HyoPcContenido/deleteContenido",{params:n})}).then(function(e){(0,Q["default"])(e.json.message)}).then(function(){t.openTabs({ID:e.ID_ESTRUCTURA}),t.closeModalAgregar()}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},saveContenido:function(){if(void 0===this.dataEditable.ID)return(0,Q["default"])("Faltan datos"),!1;this.formAgregar.EDITANDO?this.updateItemContenido():this.saveContenidoPlan()},saveContenidoPlan:function(){var e=this,t={idEstructura:this.dataEditable.ID_ESTRUCTURA,idContenido:this.dataEditable.ID_CONTENIDO_REF,titulo:this.formAgregar.TITULO,descripcion:this.formAgregar.DESCRIPCION,instrucod:"",idCiclo:0,idGrado:0};this.$http.post("api/HyoPcContenido/saveContenidoPlan",t).then(function(t){e.openTabs({ID:e.tabSelected}),e.closeModalAgregar(),(0,Q["default"])(t.json.message)}).catch(function(e){(0,Q["default"])(e.error.message,"error")})},updateItemContenido:function(){var e=this;if(this.dataEditable.ID){var t={id:this.dataEditable.ID,titulo:this.formAgregar.TITULO};this.$http.put("api/HyoPcContenido/updateTitulo",t).then(function(t){e.openTabs({ID:e.dataEditable.ID_ESTRUCTURA}),e.closeModalAgregar(),(0,Q["default"])(t.json.message)}).catch(function(e){(0,Q["default"])(e.error.message,"error")})}},closeModalAgregar:function(){this.formAgregar.EDITANDO=!1,this.formAgregar.TITULO="",this.formAgregar.DESCRIPCION="",this.tituloModalAgregar="Agregar",this.modalAgregar=!1},regresar:function(){this.$emit("regresar")},openTabs:function(e){var t=this;this.dataTabSelected=e,this.dataTabSelected["ID_CONTENIDO_REF"]=0,this.dataTabSelected["ID_ESTRUCTURA"]=this.dataTabSelected.ID;var n={idCurso:0,idCartel:e.ID,idInstru:""};this.$http.get("api/HyoPcContenido/getCartelEstructura",{params:n}).then(function(e){t.tabDetalle=e.json}).catch(function(e){console.log(e.error.message)})},getCartel:function(){var e=this,t={id:this.idPci};this.$http.get("api/HyoPcEstructura/getEstructuraByInstitucion",{params:t}).then(function(t){t.json.length>0&&(e.allTabs=t.json,e.tabSelected=e.allTabs[0].ID,e.openTabs(e.allTabs[0]))}).catch(function(e){console.log(e.error.message)})}},created:function(){this.getCartel()}};const Vt=(0,j.A)(Lt,[["render",qt]]);var Qt=Vt,Mt={class:"row q-mb-sm"};function wt(e,t){var n=(0,a.g2)("q-toolbar-title"),o=(0,a.g2)("q-btn"),r=(0,a.g2)("q-stepper-navigation"),i=(0,a.g2)("q-toolbar");return(0,a.uX)(),(0,a.CE)("div",Mt,[(0,a.bF)(i,{class:"shadow-1 z-fab",inverted:""},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{class:"q-pa-none"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,I.v_)(e.titulo),1)]}),_:1}),(0,a.bF)(r,{class:"navegacionPci"},{default:(0,a.k6)(function(){return[e.btnAtras?((0,a.uX)(),(0,a.Wv)(o,{key:0,class:"q-ml-sm",flat:"",onClick:t[0]||(t[0]=function(t){return e.atras(e.step)}),color:"primary",label:"Atras"})):(0,a.Q3)("v-if",!0),(0,a.bF)(o,{onClick:t[1]||(t[1]=function(t){return e.continuar(e.step)}),color:"primary",label:e.nombreBtn},null,8,["label"])]}),_:1})]}),_:1})])}var $t={emits:["continuar","atras"],props:{step:{type:Number,required:!0},titulo:String,nombreBtn:String,btnAtras:{type:Boolean,default:!0}},components:{QStepperNavigation:p.A,QBtn:u.Il,QToolbar:u.ZV,QToolbarTitle:u.r_},data:function(){return{}},methods:{continuar:function(e){this.$emit("continuar",e)},atras:function(e){this.$emit("atras",e)}},created:function(){}};const xt=(0,j.A)($t,[["render",wt]]);var jt=xt,Xt={components:{QTable:g.A,QTr:u.qh,QTd:u.Ef,QTooltip:u.nC,QPopover:u.VM,QToggle:u.c5,QInnerLoading:u.SQ,QSpinnerOval:u.VA,sieModal:m.A,notify:Q["default"],QPageSticky:u._U,siePdf:h.A,sieUpload:b.A,sieVacio:v.A,QSelect:C.S,QInput:s.A,QStepper:d.A,QStep:f.A,QStepperNavigation:p.A,QBtn:u.Il,archivo:H,estructura:pe,planestudio:St,otrosComponentes:Qt,cabecera:jt,QPage:u.Tu},data:function(){return{fasePci:1,stepActivo:1,stepArchivo:!1,stepEstructura:!1,stepPlan:!1,stepOtros:!1,dataPci:{}}},methods:{continuar:function(e){e>this.fasePci&&(this.fasePci=e),this.stepActivo=e+1},atras:function(e){this.stepActivo=e-1,this.fasePci=this.stepActivo},validarNavegacion:function(){this.stepArchivo=this.fasePci>=1,this.stepEstructura=this.fasePci>=2,this.stepPlan=this.fasePci>=3,this.stepOtros=this.fasePci>=4},viewEstructura:function(e){this.inicializarPciSeleccionado(e),this.stepActivo=2,this.continuar(1)},inicializarPciSeleccionado:function(e){this.dataPci=e,this.fasePci=e.FASE,this.validarNavegacion()}},created:function(){}};const Ht=(0,j.A)(Xt,[["render",c]]);var Wt=Ht}}]);