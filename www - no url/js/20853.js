"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[20853],{20853:function(e,o,t){t.r(o),t.d(o,{default:function(){return Fe}});var n=t(8445),a=t.n(n),l=t(61758),i=t(58790),u={class:"q-ma-sm"},r={class:"num uppercase"},s={key:1,class:"col q-px-xs q-mx-xs q-mb-sm border-field"},c={class:"leyenda"},d={class:"row"},f={class:"col q-px-xs q-mx-xs q-mb-sm border-field"},I={class:"leyenda"},m={class:"row"},p={class:"row"},O={class:"row q-ma-xs"},h={class:"row q-gutter-sm"},F={class:"row leyenda"},D={class:"row leyenda"},v={class:"num uppercase"},_={class:"dia uppercase"};function A(e,o){var t=(0,l.g2)("header-btn"),n=(0,l.g2)("relacion-justificaciones"),A=(0,l.g2)("sie-modal"),b=(0,l.g2)("new-justificacion"),C=(0,l.g2)("q-list-header"),k=(0,l.g2)("q-checkbox"),T=(0,l.g2)("q-item-side"),M=(0,l.g2)("q-item-main"),S=(0,l.g2)("q-item"),E=(0,l.g2)("q-list"),g=(0,l.g2)("q-chip"),w=(0,l.g2)("sie-select"),N=(0,l.g2)("q-input"),R=(0,l.g2)("sie-upload"),y=(0,l.g2)("q-btn"),V=(0,l.g2)("q-item-section"),P=(0,l.g2)("q-item-label"),L=(0,l.g2)("q-item-separator"),q=(0,l.g2)("q-scroll-area"),H=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(H,{class:"column q-ma-xs q-card"},{default:(0,l.k6)(function(){return[(0,l.bF)(t,{name:"Seguimiento de Asistencia",buttons:e.buttons},null,8,["buttons"]),(0,l.bF)(A,{class:"modal-editado",modelValue:e.modalListado,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.modalListado=o}),title:"Relacion de solicitudes",footer:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{PROFCOD:e.PROFCOD},null,8,["PROFCOD"])]}),_:1},8,["modelValue"]),(0,l.bF)(A,{class:"modal-editado",modelValue:e.modalAdd,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.modalAdd=o}),footer:!1,title:"Nueva justificación"},{default:(0,l.k6)(function(){return[(0,l.bF)(b,{tipos:e.tiposJusti,motivos:e.motivosJusti,PROFCOD:e.PROFCOD,onCerrarModal:e.closeModalNew},null,8,["tipos","motivos","PROFCOD","onCerrarModal"])]}),_:1},8,["modelValue"]),(0,l.bF)(A,{class:"modal-editado",modelValue:e.modalJustificar,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.modalJustificar=o}),onSubmit:e.saveJustificacion,footer:2!==e.infoModal.ESTADO||e.alowRejustifica&&2===e.infoModal.ESTADO},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",u,[e.infoModal.ID_JUSTIFICACION?((0,l.uX)(),(0,l.CE)("fieldset",s,[(0,l.Lk)("legend",c,(0,i.v_)(e.$t("Fechas")),1),(0,l.Lk)("div",d,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoModal.fechas,function(o){return(0,l.uX)(),(0,l.Wv)(g,{small:"",color:"secondary"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(o.FECHA,"DD/MM")),1)]}),_:2},1024)}),256))])])):((0,l.uX)(),(0,l.Wv)(E,{key:0,highlight:"",style:{"max-height":"20vw","overflow-x":"auto"}},{default:(0,l.k6)(function(){return[(0,l.bF)(C,null,{default:(0,l.k6)(function(){return a()(o[10]||(o[10]=[(0,l.eW)("Fechas",-1)]))}),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fechasModal,function(t){return(0,l.uX)(),(0,l.Wv)(S,null,{default:(0,l.k6)(function(){return[(0,l.bF)(T,null,{default:(0,l.k6)(function(){return[(0,l.bF)(k,{modelValue:e.fechasSelectModal,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.fechasSelectModal=o}),val:t.ID_ASISTENCIA,disable:t.locked},null,8,["modelValue","val","disable"])]}),_:2},1024),(0,l.bF)(M,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("span",r,(0,i.v_)(e.date(t.F_ASISTENCIA,"DD/MM")),1)]}),_:2},1024)]}),_:2},1024)}),256))]}),_:1})),(0,l.bF)(w,{type:"outlined",noBottom:"",modelValue:e.infoModal.ID_TIPO,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.infoModal.ID_TIPO=o}),options:e.tiposJusti,label:"DESCRIPCION",val:"ID_TIPO",placeholder:"Estado",readonly:!!e.infoModal.ID_JUSTIFICACION},null,8,["modelValue","options","readonly"]),(0,l.bF)(w,{type:"outlined",noBottom:"",modelValue:e.infoModal.ID_MOTIVO,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.infoModal.ID_MOTIVO=o}),options:e.motivosJusti,label:"DESCRIPCION",val:"ID_MOTIVO",placeholder:"Motivo",readonly:!!e.infoModal.ID_JUSTIFICACION},null,8,["modelValue","options","readonly"]),(0,l.bF)(N,{class:"q-if-outlined",modelValue:e.infoModal.COMENTARIO,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.infoModal.COMENTARIO=o}),"float-label":"Comentario",type:"textarea",rows:"3",readonly:1===e.infoModal.ESTADO||0===e.infoModal.ESTADO||!e.alowRejustifica&&2===e.infoModal.ESTADO},null,8,["modelValue","readonly"]),1===e.infoModal.ESTADO||2===e.infoModal.ESTADO?((0,l.uX)(),(0,l.Wv)(N,{key:2,class:"q-if-outlined",modelValue:e.infoModal.COMENTARIO_MODIFICACION,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.infoModal.COMENTARIO_MODIFICACION=o}),"float-label":"Comentario"+(1===e.infoModal.ESTADO?" de Aceptación":" de Rechazo"),type:"textarea",rows:"3",readonly:!0},null,8,["modelValue","float-label"])):(0,l.Q3)("v-if",!0),(0,l.Lk)("fieldset",f,[(0,l.Lk)("legend",I,(0,i.v_)(e.$t("Archivos")),1),e.infoModal.ID_JUSTIFICACION?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.infoModal.files,function(e){return(0,l.uX)(),(0,l.Wv)(g,{color:"secondary"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.NOMBRE_REAL),1)]}),_:2},1024)}),256)):(0,l.Q3)("v-if",!0),!e.infoModal.ID_JUSTIFICACION||2===e.infoModal.ESTADO&&e.alowRejustifica?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",m,[o[11]||(o[11]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.bF)(R,{onUpload:e.addFile2,icon:"file",multiple:!0,allow:e.formatos,modelValue:e.files,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.files=o}),onlyButton:!0,preview:!1,title:"Subir Archivos"},null,8,["onUpload","allow","modelValue"])]),(0,l.Lk)("div",p,[(0,l.bF)(E,{class:"col",highlight:"",style:{"max-height":"20vw","overflow-x":"auto"}},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.files,function(o,t){return(0,l.uX)(),(0,l.Wv)(S,null,{default:(0,l.k6)(function(){return[(0,l.bF)(M,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.originalFilename),1)]}),_:2},1024),(0,l.bF)(T,{right:""},{default:(0,l.k6)(function(){return[(0,l.bF)(y,{flat:"",dense:"",round:"",icon:"close",color:"red",onClick:function(o){return e.borrarDocumento(t)}},null,8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),256))]}),_:1})])],64)):(0,l.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","onSubmit","footer"]),(0,l.Lk)("div",O,[e.showAll?((0,l.uX)(),(0,l.Wv)(w,{key:0,class:"col",type:"outlined",modelValue:e.PROFCOD,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.PROFCOD=o}),label:"NOMCOMP",val:"PROFCOD",options:e.infoProfes,placeholder:"Profesor",onInput:e.seleccionarProfesor},null,8,["modelValue","options","onInput"])):(0,l.Q3)("v-if",!0)]),e.PROFCOD?((0,l.uX)(),(0,l.Wv)(q,{key:0,class:"q-table-middle q-card q-ma-sm",style:{height:"82vh"}},{default:(0,l.k6)(function(){return[(0,l.bF)(E,{highlight:""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoAsistencia,function(t){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(C,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(t[0].MESDES),1)]}),_:2},1024),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t,function(t){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(S,null,{default:(0,l.k6)(function(){return[(0,l.bF)(V,{avatar:""},{default:(0,l.k6)(function(){return[(0,l.bF)(g,{class:"text-center chipEspecial",style:(0,i.Tr)({"background-color":t.COLOR,color:"white"})},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(t.ABREV),1)]}),_:2},1032,["style"])]}),_:2},1024),(0,l.bF)(V,null,{default:(0,l.k6)(function(){return[(0,l.bF)(P,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(t.DESCRIPCION),1)]}),_:2},1024),(0,l.bF)(P,{caption:"",lines:"2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",h,[t.FH_INGRESO?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",F,[o[12]||(o[12]=(0,l.Lk)("div",{class:"text-bold"},"Ingreso: ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.date(t.FH_INGRESO,"DD/MM/YY HH:mm")),1)]),(0,l.Lk)("div",D,[o[13]||(o[13]=(0,l.Lk)("div",{class:"text-bold"},"Salida: ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.date(t.FH_SALIDA,"DD/MM/YY HH:mm")),1)])],64)):(0,l.Q3)("v-if",!0),t.ESTADO>=-1?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e.showBtn||t.ESTADO>-1?((0,l.uX)(),(0,l.Wv)(y,{key:0,dense:"",color:t.BTNCOLOR,onClick:function(o){return e.modalEditar(t)}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(t.BTNDESC),1)]}),_:2},1032,["color","onClick"])):(0,l.Q3)("v-if",!0)],64)):(0,l.Q3)("v-if",!0)])]}),_:2},1024)]}),_:2},1024),(0,l.bF)(V,{class:"text-center text-bold",side:"",top:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",v,(0,i.v_)(e.date(t.F_ASISTENCIA,"DD")),1),(0,l.Lk)("div",_,(0,i.v_)(e.date(t.F_ASISTENCIA,"MMM")),1)]}),_:2},1024)]}),_:2},1024),(0,l.bF)(L)],64)}),256))],64)}),256))]}),_:1})]}),_:1})):(0,l.Q3)("v-if",!0)]}),_:1})}var b=t(57008),C=t.n(b),k=t(76080),T=t.n(k),M=t(45254),S=t.n(M),E=(t(30683),t(10239),t(89571),t(50310),t(90095),t(515),t(83190),t(13715),t(6123)),g=t(96122),w=t(57668),N=t(80660),R=t(93616),y=t(18105),V=t(30640),P=t(59089),L=t(33950),q=t(982),H={class:"column"},Q={class:"q-ma-sm"},U={class:"row"},J={class:"row"},x={class:"col q-px-xs q-mx-xs q-mb-sm border-field"},j={class:"leyenda"},X={class:"row"},W={class:"row"};function Y(e,o){var t=(0,l.g2)("q-datetime"),n=(0,l.g2)("sie-select"),u=(0,l.g2)("q-input"),r=(0,l.g2)("sie-upload"),s=(0,l.g2)("q-item-main"),c=(0,l.g2)("q-btn"),d=(0,l.g2)("q-item-side"),f=(0,l.g2)("q-item"),I=(0,l.g2)("q-list"),m=(0,l.g2)("q-toolbar-title"),p=(0,l.g2)("q-toolbar");return(0,l.uX)(),(0,l.CE)("div",H,[(0,l.Lk)("div",Q,[(0,l.Lk)("div",U,[(0,l.bF)(t,{class:"q-if-outlined q-mx-xs col",modelValue:e.F_INICIO,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.F_INICIO=o}),"float-label":"Desde",type:"date",format:"DD/MM/YYYY"},null,8,["modelValue"]),(0,l.bF)(t,{class:"q-if-outlined q-mx-xs col",modelValue:e.F_FIN,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.F_FIN=o}),"float-label":"Hasta",type:"date",format:"DD/MM/YYYY"},null,8,["modelValue"])]),(0,l.bF)(n,{options:e.tipos,val:"ID_TIPO",label:"DESCRIPCION",placeholder:"Tipo",type:"outlined",modelValue:e.ID_TIPO,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.ID_TIPO=o}),onSelected:e.seleccionarTipo},null,8,["options","modelValue","onSelected"]),(0,l.bF)(n,{options:e.motivos,val:"ID_MOTIVO",label:"DESCRIPCION",placeholder:"Motivo",type:"outlined",modelValue:e.ID_MOTIVO,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.ID_MOTIVO=o})},null,8,["options","modelValue"]),(0,l.Lk)("div",J,[e.crearTurnoEspecial?((0,l.uX)(),(0,l.Wv)(t,{key:0,class:"q-if-outlined q-mx-xs col",modelValue:e.H_INGRESO,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.H_INGRESO=o}),"float-label":"H. ingreso",type:"time",format:"HH:mm"},null,8,["modelValue"])):(0,l.Q3)("v-if",!0),e.crearTurnoEspecial||e.justificaSalida?((0,l.uX)(),(0,l.Wv)(t,{key:1,class:"q-if-outlined q-mx-xs col",modelValue:e.H_SALIDA,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.H_SALIDA=o}),"float-label":"H. Salida",type:"time",format:"HH:mm"},null,8,["modelValue"])):(0,l.Q3)("v-if",!0)]),(0,l.bF)(u,{class:"q-if-outlined",modelValue:e.COMENTARIO,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.COMENTARIO=o}),"float-label":"Comentario",type:"textarea",rows:"3"},null,8,["modelValue"]),(0,l.Lk)("fieldset",x,[(0,l.Lk)("legend",j,(0,i.v_)(e.$t("Archivos")),1),(0,l.Lk)("div",X,[o[8]||(o[8]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.bF)(r,{onUpload:e.addFile2,icon:"file",multiple:!0,allow:e.formatos,modelValue:e.files,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.files=o}),onlyButton:!0,preview:!1,title:"Subir Archivos"},null,8,["onUpload","allow","modelValue"])]),(0,l.Lk)("div",W,[(0,l.bF)(I,{class:"col",highlight:"",style:{"max-height":"20vw","overflow-x":"auto"}},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.files,function(o,t){return(0,l.uX)(),(0,l.Wv)(f,null,{default:(0,l.k6)(function(){return[(0,l.bF)(s,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.originalFilename),1)]}),_:2},1024),(0,l.bF)(d,{right:""},{default:(0,l.k6)(function(){return[(0,l.bF)(c,{flat:"",dense:"",round:"",icon:"close",color:"red",onClick:function(o){return e.borrarDocumento(t)}},null,8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),256))]}),_:1})])])]),(0,l.bF)(p,{inverted:""},{default:(0,l.k6)(function(){return[(0,l.bF)(m,{class:"col"}),(0,l.bF)(c,{dense:"",color:"primary",onClick:e.grabarNuevo},{default:(0,l.k6)(function(){return a()(o[9]||(o[9]=[(0,l.eW)("Aceptar",-1)]))}),_:1},8,["onClick"])]}),_:1}),(0,l.Q3)("span {{tipos}}"),(0,l.Q3)("span {{motivos}}")])}var $={emits:["cerrarModal"],props:["tipos","motivos","PROFCOD"],components:{sieSelect:R.A,QDatetime:E.T5,sieUpload:P.A,QList:E.Mb,QItem:E.H0,QItemMain:E.mF,QItemSide:E.n1,QToolbar:E.ZV,QToolbarTitle:E.r_,QInput:E.ie,QBtn:E.Il},data:function(){return{ID_TIPO:null,ID_MOTIVO:null,F_INICIO:new Date,F_FIN:new Date,COMENTARIO:null,modificaAsistencia:!1,crearTurnoEspecial:!1,justificaSalida:!1,H_INGRESO:new Date((new Date).setHours(8,0,0)),H_SALIDA:new Date((new Date).setHours(18,0,0)),files:[],formatos:["pdf","doc","docx","jpg","jpeg"]}},methods:{grabarNuevo:function(){var e=this;return S()(T()().m(function o(){var t,n;return T()().w(function(o){while(1)switch(o.n){case 0:if(e.ID_TIPO){o.n=1;break}(0,q["default"])("Debe seleccionar un tipo de justificación","error"),o.n=6;break;case 1:if(e.ID_MOTIVO){o.n=2;break}(0,q["default"])("Debe seleccionar un motivo de justificación","error"),o.n=6;break;case 2:if(e.COMENTARIO){o.n=3;break}(0,q["default"])("Debe registrar un comentario de justificación","error"),o.n=6;break;case 3:if(0!==e.files.length){o.n=4;break}(0,q["default"])("Debe agregar documentos para la justificación","error"),o.n=6;break;case 4:return t={ID_TIPO:e.ID_TIPO,F_INICIO:e.F_INICIO,F_FIN:e.F_FIN,PROFCOD:e.PROFCOD,COMENTARIO:e.COMENTARIO,H_INGRESO:e.H_INGRESO,H_SALIDA:e.H_SALIDA,files:e.files,ID_MOTIVO:e.ID_MOTIVO},o.n=5,N.$http.post("api/HyoApjustificacion/saveJustificacionFecha",{info:t});case 5:if(n=o.v,(0,q["default"])(e.$t("mensajes."+n)),"m0001"!==n){o.n=6;break}return e.$emit("cerrarModal"),o.n=6,N.$http.post("api/HyoApjustificacion/sendMensaje",{info:t});case 6:return o.a(2)}},o)}))()},seleccionarTipo:function(e){1===e.CREA_TE?(this.crearTurnoEspecial=!0,this.justificaSalida=!1):1===e.JUSTIFICA_S&&(this.crearTurnoEspecial=!1,this.justificaSalida=!0)},addFile2:function(e){var o=this;e.forEach(function(e){(0,L.Upload)({url:"api/HyoArchivo/tmp/upload",file:e}).then(function(e){o.files.push(e)}).catch(function(){})})},borrarDocumento:function(e){this.files.splice(e,1)}}},B=t(12807);const G=(0,B.A)($,[["render",Y]]);var K=G,z={class:"q-ma-sm"},Z={class:"row justify-end"},ee={class:"column"},oe={class:"row"},te={class:"span"},ne={class:"row"},ae={class:"span"},le={class:"row wrap"};function ie(e,o){var t=(0,l.g2)("q-datetime"),n=(0,l.g2)("q-select"),a=(0,l.g2)("q-tooltip"),u=(0,l.g2)("q-icon"),r=(0,l.g2)("q-td"),s=(0,l.g2)("q-chip"),c=(0,l.g2)("q-table");return(0,l.uX)(),(0,l.CE)("div",z,[(0,l.Lk)("div",Z,[(0,l.bF)(t,{class:"q-if-outlined col",modelValue:e.F_INI,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.F_INI=o}),type:"date",format:"DD/MM/YYYY","float-label":"Desde: ",onInput:e.init},null,8,["modelValue","onInput"]),(0,l.bF)(t,{class:"q-if-outlined col",modelValue:e.F_FIN,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.F_FIN=o}),type:"date",format:"DD/MM/YYYY","float-label":"Hasta: ",onInput:e.init},null,8,["modelValue","onInput"]),(0,l.bF)(n,{class:"q-if-outlined col",modelValue:e.estadoFiltro,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.estadoFiltro=o}),options:e.listaEstados,"float-label":"Estado",onInput:e.filtrar},null,8,["modelValue","options","onInput"])]),(0,l.bF)(c,{columns:e.campos,data:e.dataSolicitudes},{"body-cell-DETALLE":(0,l.k6)(function(e){return[(0,l.bF)(r,{props:e},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{name:"info"},{default:(0,l.k6)(function(){return[(0,l.bF)(a,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ee,[(0,l.Lk)("div",oe,[o[3]||(o[3]=(0,l.Lk)("div",{class:"text-bold"},"Comentario : ",-1)),(0,l.Lk)("div",te,(0,i.v_)(e.row.COMENTARIO),1)]),(0,l.Lk)("div",ne,[o[4]||(o[4]=(0,l.Lk)("div",{class:"text-bold"},"Comentario de modificación : ",-1)),(0,l.Lk)("div",ae,(0,i.v_)(e.row.COMENTARIO_MODIFICACION),1)])])]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["props"])]}),"body-cell-ESTADO":(0,l.k6)(function(e){return[(0,l.bF)(r,{props:e,style:(0,i.Tr)({"background-color":e.row.ESTADOINFO.color})},{default:(0,l.k6)(function(){return[(0,l.Lk)("span",null,(0,i.v_)(e.row.ESTADOINFO.abr),1)]}),_:2},1032,["props","style"])]}),"body-cell-FH_REGISTRO":(0,l.k6)(function(o){return[(0,l.bF)(r,{props:o},{default:(0,l.k6)(function(){return[(0,l.Lk)("span",null,(0,i.v_)(e.date(o.row.FH_REGISTRO,"DD/MM/YYYY")),1)]}),_:2},1032,["props"])]}),"body-cell-FECHAS":(0,l.k6)(function(o){return[(0,l.bF)(r,{props:o},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",le,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.row.FECHAS,function(o,t){return(0,l.uX)(),(0,l.Wv)(s,{class:"chipUnico",color:"secondary",small:""},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(o.FECHA,"DD/MM")),1)]}),_:2},1024)}),256))])]}),_:2},1032,["props"])]}),_:1},8,["columns","data"])])}var ue=t(30545),re=t(33001),se={components:{QTable:ue.A,QDatetime:E.T5,QSelect:E.Si,QSearch:E.Ks,QTd:E.Ef,QChip:E.wQ,QTooltip:E.nC,QIcon:E.bP},props:["PROFCOD"],data:function(){return{F_INI:new Date,F_FIN:new Date,estadoFiltro:"T",filter:null,dataSolicitudes:[],dataInicial:[],listaEstados:[{value:"T",label:"Todos"},{value:0,label:"Pendiente"},{value:1,label:"Aprobado"},{value:2,label:"Rechazado"}],campos:[{name:"TIPO",label:"Tipo",align:"left",field:"TIPO"},{name:"ESTADO",label:"Estado",align:"center",field:"ESTADO"},{name:"FH_REGISTRO",label:"F. Registro",align:"left",field:"FH_REGISTRO"},{name:"MOTIVO",label:"Motivo",align:"left",field:"MOTIVO"},{name:"FECHAS",label:"F. Asistencia",align:"left",field:"FECHAS"},{name:"DETALLE",align:"right",field:"DETALLE"}]}},methods:{date:y.Ay,init:function(){var e=this;return S()(T()().m(function o(){var t;return T()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,N.$http.get("api/HyoApjustificacion/getMyJustificaciones",{params:{info:{F_INI:e.F_INI,F_FIN:e.F_FIN,PROFCOD:e.PROFCOD}}});case 1:t=o.v,e.dataInicial=t,e.filtrar();case 2:return o.a(2)}},o)}))()},filtrar:function(){"T"!==this.estadoFiltro?this.dataSolicitudes=(0,re.filterArray)(this.estadoFiltro,{field:"ESTADO",list:this.dataInicial||[]}):this.dataSolicitudes=a()(this.dataInicial)}},mounted:function(){var e=new Date;this.F_INI=new Date(e.setDate(e.getDate()-e.getDay()+1)),this.F_FIN=new Date(e.setDate(e.getDate()-e.getDay()+7)),this.init()}};const ce=(0,B.A)(se,[["render",ie]]);var de=ce,fe=t(65673),Ie=t(82327),me=t(88865),pe=t(66824),Oe={components:{sieSelect:R.A,QListHeader:E.XR,QItemMain:E.mF,QItemSeparator:E.CL,QItemSide:E.n1,QItemTile:E.lp,QScrollArea:g.A,QChip:E.wQ,sieModal:V.A,QCheckbox:E.vZ,sieUpload:P.A,QChipsInput:E.XX,newJustificacion:K,relacionJustificaciones:de,QList:fe.A,QItem:Ie.A,QItemSection:me.A,QItemLabel:pe.A,QPage:E.Tu,QInput:E.ie,QBtn:E.Il},data:function(){return{sie:(0,w["default"])(),alto:null,infoProfes:[],infoAsistencia:{},PROFCOD:null,tiposJusti:[],motivosJusti:[],modalJustificar:!1,fechasModal:[],fechasSelectModal:[],tipoSelect:null,motivoSelect:[],formatos:[],files:[],modalAdd:!1,modalListado:!1,showAll:!1,modalAddData:{},requiereAdjunto:!0,showBtn:3===(0,w["default"])().ruta.nivel,objPermitidos:[],alowRejustifica:!0,isAmerica:"0540"===(0,w["default"])().colcod,infoModal:{}}},computed:{buttons:function(){var e=[];return this.PROFCOD&&(e.push({label:"Relación",icon:"list",click:this.openModalListado}),this.showBtn&&e.push({label:"nuevo",icon:"add",click:this.openModalNew})),e}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},methods:{date:y.Ay,openModalListado:function(){this.modalListado=!0},openModalNew:function(){this.modalAdd=!0},closeModalNew:function(){this.modalAdd=!1,this.seleccionarProfesor()},handleResize:function(){var e=150;this.alto=window.innerHeight-e+"px"},init:function(){var e=this;return S()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,N.$http.get("api/HyoJefaturapersona/getPersonal");case 1:e.infoProfes=o.v;case 2:return o.a(2)}},o)}))()},seleccionarProfesor:function(){var e=this;return S()(T()().m(function o(){var t;return T()().w(function(o){while(1)switch(o.n){case 0:return t={PROFCOD:e.PROFCOD},o.n=1,N.$http.get("api/HyoApasistencia/getAsistenciaSeguimiento",{params:{info:t}});case 1:e.infoAsistencia=o.v;case 2:return o.a(2)}},o)}))()},addFile2:function(e){var o=this;e.forEach(function(e){(0,L.Upload)({url:"api/HyoArchivo/tmp/upload",file:e}).then(function(e){o.files.push(e)}).catch(function(){})})},modalEditar:function(e){var o=this;return S()(T()().m(function t(){var n,a;return T()().w(function(t){while(1)switch(t.n){case 0:if(o.showBtn||1===e.ESTADO){t.n=1;break}o.modalJustificar=!1,t.n=4;break;case 1:if(o.modalJustificar=!0,n=[],o.files=[],e.ID_JUSTIFICACION){t.n=2;break}o.infoModal={ID_MOTIVO:null,ID_TIPO:null,COMENTARIO:null,info:e,data:[],PROFCOD:o.PROFCOD,ESTADO:e.ESTADO},e.locked=!0,n.push(e),o.fechasSelectModal=[],o.fechasSelectModal.push(e.ID_ASISTENCIA),Object.keys(o.infoAsistencia).forEach(function(t){o.infoAsistencia[t].forEach(function(o){o.ID_ASISTENCIA!==e.ID_ASISTENCIA&&o.ID_TIPO===e.ID_TIPO&&o.ESTADO===e.ESTADO&&n.push(o)})}),o.fechasModal=n,o.tiposJusti.forEach(function(t){t.TIPO_JUSTIFICADO===e.VJUSTIFICACION&&(o.infoModal.ID_TIPO=t.ID_TIPO)}),t.n=4;break;case 2:return t.n=3,N.$http.get("api/HyoApjustificacion/getJustificacionDetalle",{params:{info:{ID:e.ID_JUSTIFICACION}}});case 3:a=t.v,o.infoModal=a.infoBase,o.infoModal.ID_JUSTIFICACION=e.ID_JUSTIFICACION,o.infoModal.fechas=a.infoFechas,o.infoModal.files=a.infoDocs;case 4:return t.a(2)}},t)}))()},borrarDocumento:function(e){this.files.splice(e,1)},saveJustificacion:function(){var e=this;return S()(T()().m(function o(){var t,n,a,l,i;return T()().w(function(o){while(1)switch(o.n){case 0:if(!([0,1].indexOf(e.infoModal.ESTADO)>=0)&&e.showBtn){o.n=1;break}e.modalJustificar=!1,o.n=6;break;case 1:if(e.infoModal.ID_MOTIVO){o.n=2;break}(0,q["default"])("Debe seleccionar un motivo","error"),o.n=6;break;case 2:if(e.infoModal.COMENTARIO){o.n=3;break}(0,q["default"])("Debe ingresar un comentario","error"),o.n=6;break;case 3:if(0!==e.files.length||e.infoModal.ID_JUSTIFICACION||!e.requiereAdjunto){o.n=4;break}(0,q["default"])("Debe adjuntar al menos un documento","error"),o.n=6;break;case 4:return t=C()({},e.infoModal),t.files=e.files,t.fechas=e.fechasSelectModal,n=e.infoModal.ID_JUSTIFICACION?"editJustificacionAsign":"saveJustificacionID",o.n=5,N.$http.post("api/HyoApjustificacion/".concat(n),{info:t});case 5:if(a=o.v,l="m0001"===a?"success":"error",(0,q["default"])(e.$t("mensajes."+a),l),"m0001"!==a){o.n=6;break}return e.seleccionarProfesor(),e.modalJustificar=!1,i=[],e.infoModal.ID_JUSTIFICACION?e.infoModal.fechas.forEach(function(e){i.push(e.ID_ASISTENCIA)}):i=e.fechasSelectModal,o.n=6,N.$http.post("api/HyoApjustificacion/sendMensaje",{info:{PROFCOD:e.PROFCOD,IDS:i}});case 6:return o.a(2)}},o)}))()},retornaHoraIS:function(e){var o="";if(this.isAmerica){var t=(0,y.Ay)(e.FH_INGRESO,"hh:mm a")||"-- : --",n=(0,y.Ay)(e.FH_SALIDA,"hh:mm a")||"-- : --";o="Hora Ingreso: ".concat(t," &nbsp; &nbsp;  Hora Salida: ").concat(n)}return o}},created:function(){var e=this;return S()(T()().m(function o(){var t,n,a,l,i,u,r;return T()().w(function(o){while(1)switch(o.n){case 0:return N.$http.get("api/HyoUsuario/obtAccesoPersonal",{params:{usucod:e.sie.usucod}}).then(function(){var o=S()(T()().m(function o(t){var n;return T()().w(function(o){while(1)switch(o.n){case 0:n=t.json,n||"001"===e.sie.tipcod?(e.init(),e.showAll=!0):(e.PROFCOD=e.sie.profcod,e.seleccionarProfesor());case 1:return o.a(2)}},o)}));return function(e){return o.apply(this,arguments)}}()),o.n=1,N.$http.get("api/HyoApjustificaciontipo/getTipos");case 1:return e.tiposJusti=o.v,o.n=2,N.$http.get("api/HyoApjustificacionmotivo/getMotivos");case 2:return e.motivosJusti=o.v,o.n=3,e.$http.get("api/HyoConfigurajustificaciones/getJustificaciones",{params:{tipoJustificacion:1,agrupado:!0}});case 3:t=o.v,n=t.P_A_OBLIGATORIO,a=t.P_A_PDF,l=t.P_A_JPG,i=t.P_A_PNG,u=t.P_A_DOC,r=t.P_A_REJUSTIFICA,e.requiereAdjunto=n,e.alowRejustifica=r,u&&(e.formatos.push("doc"),e.formatos.push("docx")),a&&e.formatos.push("pdf"),l&&(e.formatos.push("jpg"),e.formatos.push("jpeg")),i&&e.formatos.push("png"),e.handleResize();case 4:return o.a(2)}},o)}))()}};const he=(0,B.A)(Oe,[["render",A]]);var Fe=he}}]);