"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[57458],{57458:function(e,a,t){t.r(a),t.d(a,{default:function(){return de}});var o=t(61758),l=t(58790),n={key:0,class:"row q-pt-md q-px-sm"},i={class:"col"},r={class:"column col"},s={class:"col-xs-12 col-md-6 q-px-sm"},u={if:"!esOtros"},d={class:"row"},c={class:"col"},f={class:"col"},m={class:"row"},p={class:"col"},b={class:"col"},v={class:"row"},O={class:"col"},C={key:0,class:"row"},h={class:"col"},E={key:1,class:"row"},k={class:"col"},A={class:"text-black"},g={class:"row"},L={class:"col"},_={key:0,class:"row"},F={class:"row"},S={class:"col"},D={class:"row"},I={class:"col"},U={class:"row q-pt-md q-px-sm"},N={class:"col"},y={class:"row q-px-sm"},$={class:"col"},R={class:"col"},M={class:"text-bold q-body-1"};function q(e,a){var t=(0,o.g2)("header-btn"),q=(0,o.g2)("sie-select"),w=(0,o.g2)("q-card-title"),T=(0,o.g2)("q-card-separator"),V=(0,o.g2)("q-datetime"),P=(0,o.g2)("q-field"),Q=(0,o.g2)("q-input"),B=(0,o.g2)("q-option-group"),H=(0,o.g2)("q-card-main"),G=(0,o.g2)("q-card"),x=(0,o.g2)("q-checkbox"),W=(0,o.g2)("q-tab"),X=(0,o.g2)("q-td"),j=(0,o.g2)("q-tr"),Y=(0,o.g2)("q-table"),z=(0,o.g2)("q-tab-pane"),J=(0,o.g2)("q-tabs"),Z=(0,o.g2)("sie-modal"),K=(0,o.g2)("q-toolbar-title"),ee=(0,o.g2)("q-btn"),ae=(0,o.g2)("q-item-main"),te=(0,o.g2)("q-item"),oe=(0,o.g2)("q-list"),le=(0,o.g2)("q-popover"),ne=(0,o.g2)("q-toolbar"),ie=(0,o.g2)("q-page"),re=(0,o.gN)("close-overlay");return(0,o.uX)(),(0,o.Wv)(ie,{class:"citacion-editar bg-white"},{default:(0,o.k6)(function(){return[e.alucodGlobal?((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",i,[e.isLess?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(t,{key:0,name:e.reprogramarCita,buttons:e.buttons},null,8,["name","buttons"])),4!==e.infoCita.ID_TIPO_CITA?((0,o.uX)(),(0,o.Wv)(q,{key:1,class:"q-pa-sm-xs",type:"outlined",modelValue:e.alucod,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.alucod=a}),options:e.alumnos,label:"NOMCOMP",val:"ALUCOD",disable:!0,placeholder:e.salon},null,8,["modelValue","options","placeholder"])):(0,o.Q3)("v-if",!0)])])):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",r,[(0,o.Lk)("div",{class:(0,l.C4)(["row q-px-sm",e.alucodGlobal?"":"q-pt-md"])},[(0,o.Lk)("div",s,[e.esOtros?((0,o.uX)(),(0,o.Wv)(G,{key:0},{default:(0,o.k6)(function(){return[(0,o.bF)(w,{class:"q-py-xs"},{subtitle:(0,o.k6)(function(){return[(0,o.Lk)("span",u,(0,l.v_)(e.profe?e.profe.USUNOM:""),1)]}),default:(0,o.k6)(function(){return[a[17]||(a[17]=(0,o.eW)("Detalle Entrevista",-1))]}),_:1}),(0,o.bF)(T),(0,o.bF)(H,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.bF)(P,{error:e.v$.formEntrevista.fecha.$error||e.disponible,"error-label":e.v$.formEntrevista.fecha.$error?e.$t("validaciones.requerido"):e.disponible?"Día no disponible":""},{default:(0,o.k6)(function(){return[(0,o.bF)(V,{class:"q-if-outlined",modelValue:e.v$.formEntrevista.fecha.$model,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.v$.formEntrevista.fecha.$model=a}),format:"DD/MM/YYYY","float-label":"Fecha",min:e.minDate,disable:"detalle"===e.accion},null,8,["modelValue","min","disable"])]}),_:1},8,["error","error-label"])]),(0,o.Lk)("div",f,[(0,o.bF)(q,{type:"outlined",modelValue:e.formEntrevista.sala,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.formEntrevista.sala=a}),options:e.salas,label:"SECUDES",val:"SECUCOD",placeholder:"Sala"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",m,[(0,o.Lk)("div",p,[(0,o.bF)(P,{error:e.v$.formEntrevista.inicio.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,o.k6)(function(){return[(0,o.bF)(V,{class:"q-if-outlined",type:"time",modelValue:e.v$.formEntrevista.inicio.$model,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.v$.formEntrevista.inicio.$model=a}),format:"hh:mm a","float-label":e.$t("horainicio"),disable:"detalle"===e.accion},null,8,["modelValue","float-label","disable"])]}),_:1},8,["error","error-label"])]),(0,o.Lk)("div",b,[(0,o.bF)(P,{error:e.v$.formEntrevista.fin.$error,"error-label":e.$t("validaciones-requerido")},{default:(0,o.k6)(function(){return[(0,o.bF)(V,{class:"q-if-outlined",type:"time",modelValue:e.v$.formEntrevista.fin.$model,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.v$.formEntrevista.fin.$model=a}),format:"hh:mm a","float-label":e.$t("horafin"),disable:"detalle"===e.accion},null,8,["modelValue","float-label","disable"])]}),_:1},8,["error","error-label"])])]),(0,o.Lk)("div",v,[(0,o.Lk)("div",O,[(0,o.bF)(P,{error:e.v$.formEntrevista.asunto.$error,"error-label":e.$t("validaciones-requerido")},{default:(0,o.k6)(function(){return[(0,o.bF)(Q,{class:"q-if-outlined",modelValue:e.v$.formEntrevista.asunto.$model,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.v$.formEntrevista.asunto.$model=a}),disable:"detalle"===e.accion,"float-label":"Asunto"},null,8,["modelValue","disable"])]}),_:1},8,["error","error-label"])])]),e.colegiosEnlace?((0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",h,[(0,o.bF)(P,null,{default:(0,o.k6)(function(){return[(0,o.bF)(Q,{class:"q-if-outlined",modelValue:e.formEntrevista.enlace,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.formEntrevista.enlace=a}),"float-label":"Enlace"},null,8,["modelValue"])]}),_:1})])])):(0,o.Q3)("v-if",!0),e.editModalidad?((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("div",k,[(0,o.bF)(B,{class:"q-if-outlined",modelValue:e.modo,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.modo=a}),options:e.tipoModo,disable:"detalle"===e.accion,color:"primary",inline:""},null,8,["modelValue","options","disable"])])])):(0,o.Q3)("v-if",!0)]}),_:1})]}),_:1})):(0,o.Q3)("v-if",!0),e.estCancelado?((0,o.uX)(),(0,o.Wv)(G,{key:1,class:"q-my-md"},{default:(0,o.k6)(function(){return[(0,o.bF)(w,{class:"q-py-xs"},{subtitle:(0,o.k6)(function(){return[(0,o.Lk)("span",A,(0,l.v_)(e.estado||"")+" ("+(0,l.v_)(e.userCancel)+")",1)]}),default:(0,o.k6)(function(){return[a[18]||(a[18]=(0,o.eW)("Estado",-1))]}),_:1}),(0,o.bF)(T),(0,o.bF)(H,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",g,[(0,o.Lk)("div",L,[(0,o.bF)(P,{count:150},{default:(0,o.k6)(function(){return[(0,o.bF)(Q,{class:"q-if-outlined",type:"textarea",modelValue:e.motivo,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.motivo=a}),rows:"3","float-label":"Motivo",disable:!0},null,8,["modelValue"])]}),_:1})])])]}),_:1})]}),_:1})):(0,o.Q3)("v-if",!0)]),(0,o.Lk)("div",{class:(0,l.C4)(["col-xs-12 col-md-6 q-px-sm",e.isLess?"q-pt-sm":""])},[e.citaEstudiante?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.bF)(x,{class:"q-if-outlined no-bottom m-checkbox",modelValue:e.soloEstudiante,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.soloEstudiante=a}),label:e.$t("Solo al Estudiante"),disable:"detalle"===e.accion},null,8,["modelValue","label","disable"])])):(0,o.Q3)("v-if",!0),(0,o.bF)(G,null,{default:(0,o.k6)(function(){return[(0,o.bF)(J,{inverted:"",modelValue:e.tabSelect,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.tabSelect=a})},{title:(0,o.k6)(function(){return[e.alucodGlobal?((0,o.uX)(),(0,o.Wv)(W,{key:0,name:"entrevistados",label:"Entrevistados"})):(0,o.Q3)("v-if",!0),(0,o.bF)(W,{name:"entrevistadores",label:"Entrevistadores"})]}),default:(0,o.k6)(function(){return[e.alucodGlobal?((0,o.uX)(),(0,o.Wv)(z,{key:0,name:"entrevistados"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",F,[(0,o.Lk)("div",S,[(0,o.bF)(Y,{"table-style":"height: 50vh",pagination:e.pagination,"onUpdate:pagination":a[10]||(a[10]=function(a){return e.pagination=a}),data:e.tablaEntrevistados,columns:e.columns,color:"secondary","hide-bottom":""},{body:(0,o.k6)(function(e){return[(0,o.bF)(j,{props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(X,{key:"PARENTESCO",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.row["PARENTESCO"]),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"NOMBRE",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.row["NOMBRE"]),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","columns"])])])]}),_:1})):(0,o.Q3)("v-if",!0),(0,o.bF)(z,{name:"entrevistadores"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",D,[(0,o.Lk)("div",I,[(0,o.bF)(Y,{"table-style":"height: 50vh",pagination:e.paginationEntrevistadores,"onUpdate:pagination":a[11]||(a[11]=function(a){return e.paginationEntrevistadores=a}),data:e.tablaEntrevistadores,columns:e.columnsEntrevistadores,color:"secondary","hide-bottom":""},{body:(0,o.k6)(function(e){return[(0,o.bF)(j,{props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(X,{key:"RESPONSABLE",props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(x,{modelValue:e.row["RESPONSABLE"],"onUpdate:modelValue":function(a){return e.row["RESPONSABLE"]=a},"true-value":1,"false-value":0,color:"#51d0a6",disable:""},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"OBLIGATORIO",props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(x,{modelValue:e.row["OBLIGATORIO"],"onUpdate:modelValue":function(a){return e.row["OBLIGATORIO"]=a},"true-value":1,"false-value":0,color:"#51d0a6",disable:""},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"USUCOD",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.row["USUCOD"]),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"NOMBRE",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.row["NOMBRE"]),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"CARGONOM",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.row["CARGONOM"]),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","columns"])])])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})],2)],2)]),(0,o.bF)(Z,{class:"modal-horarios-citas",modelValue:e.horarioCita.modalHorario,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.horarioCita.modalHorario=a}),title:"Horarios de Citas",header:!0,footer:!1,ok:!1},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",U,[(0,o.Lk)("div",N,[(0,o.bF)(V,{class:"q-if-outlined",modelValue:e.horarioCita.fecha,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.horarioCita.fecha=a}),format:"DD/MM/YYYY","float-label":"Buscar por día",onInput:e.verHorarios},null,8,["modelValue","onInput"])])]),(0,o.Lk)("div",y,[(0,o.Lk)("div",$,[(0,o.bF)(Y,{"table-style":"height: 30vh",pagination:e.horarioCita.pagination,"onUpdate:pagination":a[14]||(a[14]=function(a){return e.horarioCita.pagination=a}),data:e.horarioCita.data,columns:e.horarioCita.columns,color:"secondary","hide-bottom":""},{body:(0,o.k6)(function(a){return[(0,o.bF)(j,{props:a},{default:(0,o.k6)(function(){return[(0,o.bF)(X,{key:"FH_INICIO",props:a},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.date(a.row["FH_INICIO"],"DD/MM/YY")),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"HORA_INICIO",props:a},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.date(a.row["FH_INICIO"],"hh:mm A")),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"FH_FIN",props:a},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.date(a.row["FH_FIN"],"hh:mm A")),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"SALANOM",props:a},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(a.row["SALANOM"]),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"ALUNOM",props:a},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(a.row["ALUNOM"]),1)]}),_:2},1032,["props"]),(0,o.bF)(X,{key:"RESP",props:a},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(a.row["RESP"]),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","columns"]),(0,o.bF)(G,{class:"q-pa-md full-width text-right"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",R,[a[19]||(a[19]=(0,o.Lk)("span",{class:"q-body-1"},"Total:",-1)),(0,o.Lk)("span",M,(0,l.v_)(e.horarioCita.data.length),1)])]}),_:1})])])]}),_:1},8,["modelValue"]),e.isLess?((0,o.uX)(),(0,o.Wv)(ne,{key:1,class:"fixed-top q-toolbar-menu",inverted:""},{default:(0,o.k6)(function(){return[(0,o.bF)(K,{class:"q-pl-none"}),(0,o.bF)(ee,{flat:"",round:"",dense:"",icon:"arrow_back",color:"white",onClick:e.validationModulo},null,8,["onClick"]),(0,o.bF)(ee,{flat:"",round:"",dense:"",icon:"more_vert",color:"white"},{default:(0,o.k6)(function(){return[(0,o.bF)(le,null,{default:(0,o.k6)(function(){return[(0,o.bF)(oe,{"no-border":"",link:"",highlight:""},{default:(0,o.k6)(function(){return["editar"===e.accion?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(te,{key:0},{default:(0,o.k6)(function(){return[(0,o.bF)(ae,{class:"q-body-1",label:"Actualizar",onClick:e.actualizarCita},null,8,["onClick"])]}),_:1})),[[re]]):(0,o.Q3)("v-if",!0),e.esOtros?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(te,{key:1},{default:(0,o.k6)(function(){return[(0,o.bF)(ae,{class:"q-body-1",label:"Horario",onClick:a[16]||(a[16]=function(a){return e.horarioCita.modalHorario=!0})})]}),_:1})),[[re]]):(0,o.Q3)("v-if",!0)]}),_:1})]}),_:1})]}),_:1})]}),_:1})):(0,o.Q3)("v-if",!0)]}),_:1})}var w=t(76080),T=t.n(w),V=t(8445),P=t.n(V),Q=t(63053),B=t.n(Q),H=t(45254),G=t.n(H),x=(t(30683),t(10239),t(56285),t(83972)),W=t(6123),X=t(93616),j=t(30640),Y=t(92173),z=t(40155),J=t(80660),Z=t(18105),K=t(982),ee=t(78786),ae=t(13813),te=t(57668),oe=t(99637),le=t(33001),ne=t(82640),ie=t(81288),re={setup:function(){var e=(0,x.fG)();return{v$:e}},components:{QPageSticky:W._U,QFab:W.l6,QFabAction:W.B$,QDatetime:W.T5,QTable:W.kH,QTh:W.EJ,QTr:W.qh,QTd:W.Ef,QTableColumns:W.$s,QCheckbox:z.A,QTooltip:W.nC,QTabs:W.uw,QTab:W.zu,QTabPane:W.dg,QDialog:W.OQ,QOptionGroup:W.EX,sieSelect:X.A,sieModal:j.A,sieEstudiantes:Y.Ay,QPage:W.Tu,QCard:W.C$,QCardTitle:W.u0,QCardSeparator:W.d6,QCardMain:W.d1,QField:W.Om,QInput:W.ie,QToolbar:W.ZV,QToolbarTitle:W.r_,QBtn:W.Il,QPopover:W.VM,QList:W.Mb,QItem:W.H0,QItemMain:W.mF},props:["id","estado_id","estado","accion"],data:function(){var e=this;return{sieInfo:(0,te["default"])(),esFamilia:(0,te["default"])().esFamilia,esAdministrador:(0,te["default"])().esAdministrador,esOtros:(0,te["default"])().esOtros,esDocente:(0,te["default"])().esDocente,usuSolicitante:"",usuCreador:"",responsable:"",perfilCreador:!1,colegio:(0,ee["default"])(["0090"],(0,te["default"])().colcod)>=0,editModalidad:!1,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),modulo:"intranet",colegiosEnlace:!0,alumnos:[],alucod:"",alumno:"",salon:"",alucodGlobal:null,excluidos:[],infoCita:{},parentescos:[],perfiles:[],motivoCita:[],motivo:null,userCancel:null,profe:null,salas:[],formEntrevista:{fecha:null,sala:null,inicio:null,fin:null,asunto:null,enlace:null},entrevistados:{parentesco:null,nombre:null},tablaEntrevistados:[],columns:[{name:"PARENTESCO",label:this.colegio?"Tipo":"Entrevistado",field:"PARENTESCO",align:"center",sortable:!1},{name:"NOMBRE",label:this.$t("Nombre"),field:"NOMBRE",align:"center",sortable:!1}],pagination:{page:1,rowsPerPage:50},entrevistadores:{personal:null,cargo:null},tablaEntrevistadores:[],columnsEntrevistadores:[{name:"RESPONSABLE",label:this.$t("Respo."),field:"RESPONSABLE",align:"center",sortable:!1},{name:"OBLIGATORIO",label:this.$t("Oblig."),field:"OBLIGATORIO",align:"center",sortable:!1},{name:"USUCOD",label:this.$t("Usuario"),field:"USUCOD",align:"center",sortable:!1},{name:"NOMBRE",label:this.$t("Nombre"),field:"NOMBRE",align:"center",sortable:!1},{name:"CARGONOM",label:this.$t("Cargo"),field:"CARGONOM",align:"center",sortable:!1}],paginationEntrevistadores:{page:1,rowsPerPage:50},tabSelect:"entrevistados",horarioCita:{modalHorario:!1,fecha:null,data:[],columns:[{name:"FH_INICIO",label:this.$t("Fecha"),field:"FH_INICIO",align:"center",sortable:!0},{name:"HORA_INICIO",label:this.$t("Hora Ini"),field:"FH_INICIO",align:"center",sortable:!0},{name:"FH_FIN",label:this.$t("Hora Fin"),field:"FH_FIN",align:"center",sortable:!0},{name:"SALANOM",label:this.$t("Sala"),field:"SALANOM",align:"center",sortable:!0},{name:"ALUNOM",label:this.$t("Apellidos y Nombres"),field:"ALUNOM",align:"center",sortable:!0},{name:"RESP",label:this.$t("Responsable"),field:"RESP",align:"center",sortable:!0}],pagination:{page:1,rowsPerPage:50}},listaDisponibles:[],modo:null,tipoModo:[{value:1,label:"Virtual"},{value:2,label:"Presencial"}],buttons:[{icon:"arrow_back",label:"Atrás",click:function(){e.validationModulo()}}],reprogramarCita:"Reprogramar Entrevista",citaEstudiante:(0,ee["default"])(["0032","0582"],(0,te["default"])().colcod)>=0,soloEstudiante:!1}},computed:{disponible:function(){return!!this.formEntrevista.fecha&&(!(this.formEntrevista.fecha<this.minDate)&&this.diasDispon(this.formEntrevista.fecha))},estCancelado:function(){return 4===this.estado_id},isLess:function(){return(0,ie.isLess)()}},methods:{date:Z.Ay,init:function(){var e=this;return G()(T()().m(function a(){var t,o,l,n,i,r,s,u,d,c,f,m,p,b,v,O,C;return T()().w(function(a){while(1)switch(a.n){case 0:if(null!==(t=e.$router)&&void 0!==t&&null!==(t=t.options)&&void 0!==t&&t.history&&"object"===B()(e.$route)&&(o=e.$route.name.split("."),e.modulo=o[0]),!(e.id&&e.estado_id&&e.estado&&e.accion)){a.n=11;break}return a.n=1,J.$http.get("api/HyoFeriados/obtFeriados");case 1:return u=a.v,a.n=2,J.$http.get("api/HyoCitafecha/obtExcluidos");case 2:return d=a.v,l={feriados:u,excluidos:d},n=(0,ae["default"])(l.feriados.json,function(e){return(0,Z.Ay)(e.FECFER,"DD/MM")}),i=(0,ae["default"])(l.excluidos.json,function(e){return(0,Z.Ay)(e.FECHA,"DD/MM")}),e.excluidos=[].concat(P()(n),P()(i)),a.n=3,J.$http.get("api/HyoAlumnos/listarAlumnosHijos",{params:{parametros:{}}});case 3:return c=a.v,a.n=4,J.$http.get("api/HyoCita/obtDataCita",{params:{idcita:e.id}});case 4:return f=a.v,a.n=5,J.$http.get("api/HyoCita/obtParentesco");case 5:return m=a.v,a.n=6,J.$http.get("api/HyoCita/obtPerfilesSolicitante");case 6:return p=a.v,a.n=7,J.$http.get("api/HyoCita/obtCitaCancelada",{params:{idcita:e.id}});case 7:return b=a.v,a.n=8,J.$http.get("api/HyoCitadet/obtDetalleCitas",{params:{idcita:e.id}});case 8:return v=a.v,a.n=9,J.$http.post("api/HyoTablaSe/datosSe",{princod:"202"});case 9:return O=a.v,a.n=10,J.$http.get("api/HyoCita/editModalidad");case 10:C=a.v,r={alumnos:c,infoCita:f,dataParentesco:m,perfiles:p,motivoCita:b,detalleCita:v,salas:O,modalidad:C},s=r.infoCita.json,e.alucodGlobal=s.ALUCOD,e.infoCita=s,e.usuSolicitante=s.USUCOD_SOLICITANTE,e.usuCreador=s.USUCOD_CREADOR,e.responsable=s.RESPONSABLE,e.soloEstudiante=!!s.SOLO_ESTUDIANTE,e.parentescos=r.dataParentesco.json,e.perfiles=r.perfiles.json,e.motivoCita=r.motivoCita.json,e.alumnos=r.alumnos.json,e.salas=r.salas.listar,e.alucod=s.ALUCOD||"",e.salon=s.ALUCOD?(0,le.filterArray)(s.ALUCOD,{field:"ALUCOD",list:e.alumnos})[0].NEMODES:"",e.alumno=s.ALUCOD?(0,le.filterArray)(s.ALUCOD,{field:"ALUCOD",list:e.alumnos})[0]:null,e.motivoCita.length>0&&(e.motivo=e.motivoCita[0].MOTIVO,e.userCancel=e.motivoCita[0].USUNOM),e.perfilCreador=(0,ee["default"])(e.perfiles,function(a){var t=a.TIPCOD;return t===e.sieInfo.tipcod})>=0,e.formEntrevista.fecha=new Date(s.FH_INICIO),e.formEntrevista.sala=s.SALA,e.formEntrevista.inicio=new Date(s.FH_INICIO),e.formEntrevista.fin=new Date(s.FH_FIN),e.formEntrevista.asunto=s.ASUNTO,e.formEntrevista.enlace=s.ENLACE,e.modo=s.MODO,e.editModalidad=r.modalidad.json.editModalidad,4===s.ID_TIPO_CITA&&(e.reprogramarCita+=" (Grupal)"),e.esOtros&&(e.usuSolicitante===e.sieInfo.usucod||e.perfilCreador)&&e.buttons.push({icon:"calendar",label:"Horario",click:function(){e.horarioCita.modalHorario=!0}}),"editar"!==e.accion||e.usuCreador!==e.sieInfo.usucod&&e.usuSolicitante!==e.sieInfo.usucod&&!e.perfilCreador&&e.responsable!==e.sieInfo.usucod||e.buttons.push({icon:"save",label:"Guardar",click:function(){e.actualizarCita()}}),(0,oe["default"])(r.detalleCita.json,function(a){if(e.alucodGlobal)if(a.PARENTESCO_ID){var t=(0,le.filterArray)(a.PARENTESCO_ID,{field:"CODENTRES",list:e.parentescos});a.PARENTESCO=t[0].TIPONOM,e.tablaEntrevistados.push(a)}else e.tablaEntrevistadores.push(a);else e.tablaEntrevistadores.push(a)}),e.tabSelect=e.alucodGlobal?"entrevistados":"entrevistadores",a.n=12;break;case 11:e.validationModulo();case 12:return a.a(2)}},a)}))()},actualizarCita:function(){var e=this;if(this.v$.formEntrevista.$touch(),!this.v$.formEntrevista.$error){var a=this.tablaEntrevistados,t=(0,ae["default"])(a,function(e){return{USUCOD:e.USUCOD,NOMBRE:e.NOMBRE,PARENTESCO_ID:e.PARENTESCO_ID,ALUCOD:e.ALUCOD}}),o=[],l={alucod:"",fh_inicio:(0,ie.fechaTiempo)(this.formEntrevista.fecha,this.formEntrevista.inicio),fh_fin:(0,ie.fechaTiempo)(this.formEntrevista.fecha,this.formEntrevista.fin),sala:this.formEntrevista.sala,asunto:this.formEntrevista.asunto,enlace:this.formEntrevista.enlace,solicitador:"",entrevistados:t,entrevistadores:o,solo_estudiante:this.soloEstudiante};this.modo&&(l.modo=this.modo),this.esOtros&&(this.tablaEntrevistadores.length>0&&(0,oe["default"])(this.tablaEntrevistadores,function(a){e.alucodGlobal?o.push({USUCOD:a.USUCOD,NOMBRE:a.NOMBRE,OBLIGATORIO:a.OBLIGATORIO,RESPONSABLE:a.RESPONSABLE,ALUCOD:e.infoCita.ALUCOD&&!e.alumno?e.infoCita.ALUCOD:e.alumno?e.alumno.ALUCOD:""}):0===a.RESPONSABLE?t.push({USUCOD:a.USUCOD,NOMBRE:a.NOMBRE,OBLIGATORIO:a.OBLIGATORIO,RESPONSABLE:a.RESPONSABLE,ALUCOD:e.infoCita.ALUCOD&&!e.alumno?e.infoCita.ALUCOD:e.alumno?e.alumno.ALUCOD:""}):o.push({USUCOD:a.USUCOD,NOMBRE:a.NOMBRE,OBLIGATORIO:a.OBLIGATORIO,RESPONSABLE:a.RESPONSABLE,ALUCOD:e.infoCita.ALUCOD&&!e.alumno?e.infoCita.ALUCOD:e.alumno?e.alumno.ALUCOD:""})}),l["entrevistadores"]=o),this.$q.dialog({title:"¿Desea enviar una alerta?",ok:"ACEPTAR",cancel:"CANCELAR"}).onOk(function(){return J.$http.post("api/HyoCita/actualizarCita",{idcita:e.id,objCita:l,alerta:1}).then(function(){(0,K["default"])("Se actualizo correctamente","success"),e.validationModulo()}).catch(function(e){(0,K["default"])(e.error.message,"warning")})}).onCancel(function(){return 0})}},verHorarios:function(){var e=this;J.$http.get("api/HyoCita/obtEntrevistasReg",{params:{fecha:this.horarioCita.fecha}}).then(function(a){e.horarioCita.data=a.json})},diasDispon:function(e){var a=(0,ee["default"])(this.excluidos,(0,Z.Ay)(e,"DD/MM"))>=0;return a},validationModulo:function(){"intranet"===this.modulo?this.$router.push("/".concat(this.modulo,"/citacion/listado")):this.$router.push({name:"".concat(this.modulo,".citacion")})}},validations:function(){var e={formEntrevista:{fecha:{required:ne.mw},inicio:{required:ne.mw},fin:{required:ne.mw},asunto:{required:ne.mw}}};return e},created:function(){this.init()}},se=t(12807);const ue=(0,se.A)(re,[["render",q]]);var de=ue}}]);