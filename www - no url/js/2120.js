"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[2120],{2120:function(e,l,a){a.r(l),a.d(l,{default:function(){return se}});var o=a(8445),n=a.n(o),t=a(61758),i=a(58790),r={class:"q-ma-sm column"},s={class:"q-col-gutter-sm"},u={class:"row q-col-gutter-sm"},c={class:"row q-col-gutter-sm"},d={class:"row q-col-gutter-sm"},f={class:"row q-col-gutter-sm"},p={class:"q-mb-sm"},m={class:"q-mb-sm"},O={class:"row q-col-gutter-sm"},D={class:"q-mb-sm"},E={class:"row q-col-gutter-sm"},I={class:"col row q-gutter-sm"},T={class:"col row q-gutter-sm"},A={class:"col row q-gutter-sm"},C={key:0,class:"column q-ma-sm"},b={class:"col row q-gutter-sm"},S={class:"q-ma-xs"},g={class:"col row q-gutter-sm"},h={class:"q-ma-xs"},v={class:"col row q-gutter-sm"},N={class:"q-my-sm"},R={class:"q-card column"},P={class:"q-ma-sm"},M={class:"q-col-gutter-sm"},F={class:"row q-col-gutter-sm"},V={class:"col-4 row q-col-gutter-sm"},w={class:"row q-col-gutter-sm"},_={class:"col-4 row q-col-gutter-sm"};function k(e,l){var a=this,o=(0,t.g2)("header-btn"),k=(0,t.g2)("sie-pdf"),U=(0,t.g2)("sie-modal"),q=(0,t.g2)("q-input"),y=(0,t.g2)("q-select"),L=(0,t.g2)("q-list-header"),H=(0,t.g2)("q-icon"),$=(0,t.g2)("q-item-section"),G=(0,t.g2)("q-item-label"),Q=(0,t.g2)("q-item"),J=(0,t.g2)("q-list"),x=(0,t.g2)("q-btn"),B=(0,t.g2)("sie-table"),X=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(X,{class:"intranet--horario q-pa-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(o,{name:"Aprobación de impresiones"}),(0,t.bF)(U,{class:"modal-pdf",modelValue:e.modalPdf,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.modalPdf=l}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(k,{class:"pdf-content",src:e.rutaPdf},null,8,["src"])]}),_:1},8,["modelValue"]),(0,t.bF)(U,{class:"modal-configuracion",modelValue:e.modalDetail,"onUpdate:modelValue":l[18]||(l[18]=function(l){return e.modalDetail=l}),title:"Detalle de "+e.infoDetalle.IDNEW,ok:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",s,[(0,t.Lk)("div",u,[(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.NOMCOMP,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.infoDetalle.NOMCOMP=l}),readonly:"",label:"Solicitado para"},null,8,["modelValue"])]),(0,t.Lk)("div",c,[(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.ID_IMPRESION,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.infoDetalle.ID_IMPRESION=l}),options:e.tipos,"option-value":"ID","option-label":"CAMPODES",label:"Área",readonly:""},null,8,["modelValue","options"])]),(0,t.Lk)("div",d,[(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.IDNEW,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.infoDetalle.IDNEW=l}),readonly:"",label:"Codigo"},null,8,["modelValue"]),(0,t.Q3)('q-input.col(v-model="infoDetalle.FECHA" readonly label="Fecha" type="date")'),(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.FH_REGISTRO,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.infoDetalle.FH_REGISTRO=l}),readonly:"",label:"Fecha Solicitud"},null,8,["modelValue"]),(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.FECHA,"onUpdate:modelValue":l[5]||(l[5]=function(l){return e.infoDetalle.FECHA=l}),readonly:"",label:"Fecha Impresion",type:"date"},null,8,["modelValue"])]),(0,t.Lk)("div",f,[(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.CANTIDAD,"onUpdate:modelValue":l[6]||(l[6]=function(l){return e.infoDetalle.CANTIDAD=l}),label:"Cantidad",readonly:""},null,8,["modelValue"]),(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.TAMANO_PAPEL,"onUpdate:modelValue":l[7]||(l[7]=function(l){return e.infoDetalle.TAMANO_PAPEL=l}),options:e.tamPap,"option-value":"SECUCOD","option-label":"SECUDES",label:"Tamaño de papel",readonly:""},null,8,["modelValue","options"])]),(0,t.Lk)("div",p,[e.infoDetalle.ADJUNTOS&&e.infoDetalle.ADJUNTOS.length>0?((0,t.uX)(),(0,t.Wv)(J,{key:0},{default:(0,t.k6)(function(){return[(0,t.bF)(L,null,{default:(0,t.k6)(function(){return n()(l[24]||(l[24]=[(0,t.eW)("Archivos",-1)]))}),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.infoDetalle.ADJUNTOS,function(l){return(0,t.uX)(),(0,t.Wv)(Q,{clickable:"",onClick:function(a){return e.showPdf(l)}},{default:(0,t.k6)(function(){return[(0,t.bF)($,{avatar:"",top:""},{default:(0,t.k6)(function(){return[(0,t.bF)(H,{name:"file_pdf_o"})]}),_:1}),(0,t.bF)($,null,{default:(0,t.k6)(function(){return[(0,t.bF)(G,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,i.v_)(l.ADJUNTO_NOMBRE),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["onClick"])}),256)),(0,t.Q3)('div.row.q-col-gutter-sm(v-if="infoDetalle.ADJUNTOS && infoDetalle.ADJUNTOS.length>0")fieldset.col.q-px-xs.q-mx-xs.q-mb-sm.border-field\n  legend.leyenda Documentos\n  template(v-for="adjunto in infoDetalle.ADJUNTOS")\n    .row\n      q-btn.col(@click="showPdf(adjunto)" icon="file_pdf_o" :label="adjunto.ADJUNTO_NOMBRE")\n    //q-download-file(:src="getUrl(adjunto)" :item="adjunto" :name="adjunto.ADJUNTO_NOMBRE" :extension="adjunto.EXTENSION" :inline="false" v-if="adjunto.EXTENSION")\n    //span {{getUrl(adjunto)}}')]}),_:1})):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",m,[(0,t.Lk)("div",O,[(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.TIPO_PAPEL,"onUpdate:modelValue":l[8]||(l[8]=function(l){return e.infoDetalle.TIPO_PAPEL=l}),options:e.tipo,"option-value":"SECUCOD","option-label":"SECUDES",label:"Tipo de papel",readonly:""},null,8,["modelValue","options"]),(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.ORIENTACION,"onUpdate:modelValue":l[9]||(l[9]=function(l){return e.infoDetalle.ORIENTACION=l}),options:e.orientacion,"option-value":"SECUCOD","option-label":"SECUDES",label:"Orientación",readonly:""},null,8,["modelValue","options"]),(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.ENGRAPADO,"onUpdate:modelValue":l[10]||(l[10]=function(l){return e.infoDetalle.ENGRAPADO=l}),options:e.engrapado,"option-value":"SECUCOD","option-label":"SECUDES",label:"Engrapado",readonly:""},null,8,["modelValue","options"])])]),(0,t.Lk)("div",D,[(0,t.Lk)("div",E,[(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.COMENTARIO_REGISTRO,"onUpdate:modelValue":l[11]||(l[11]=function(l){return e.infoDetalle.COMENTARIO_REGISTRO=l}),label:"Comentario",type:"textarea",readonly:""},null,8,["modelValue"])])]),e.infoDetalle.NESTADO==e.infoDetalle.ESTADO?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",I,[(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.NESTADO,"onUpdate:modelValue":l[12]||(l[12]=function(l){return e.infoDetalle.NESTADO=l}),options:e.estadosConfirm,"option-value":"ID","option-label":"DESCRIPCION",label:"Estado Final","emit-value":"","map-options":"",outlined:"",readonly:""},null,8,["modelValue","options"])]),e.infoDetalle.NESTADO&&2!==e.infoDetalle.NESTADO?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",T,[(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.MOTIVO_RECHAZO,"onUpdate:modelValue":l[13]||(l[13]=function(l){return e.infoDetalle.MOTIVO_RECHAZO=l}),options:e.secundarios,"option-value":"SECUCOD","option-label":"SECUDES",label:"Motivo de "+(3===e.infoDetalle.NESTADO?"Observación":"Rechazo"),readonly:""},null,8,["modelValue","options","label"])]),(0,t.Lk)("div",A,[(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.COMENTARIO,"onUpdate:modelValue":l[14]||(l[14]=function(l){return e.infoDetalle.COMENTARIO=l}),label:"Comentario",type:"textarea",readonly:""},null,8,["modelValue"])])],64)):(0,t.Q3)("v-if",!0)],64)):(0,t.Q3)("v-if",!0)])]),e.infoDetalle.NESTADO!==e.infoDetalle.ESTADO&&e.infoDetalle.EstadoCarga?((0,t.uX)(),(0,t.CE)("div",C,[(0,t.Lk)("div",b,[(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.NESTADO,"onUpdate:modelValue":l[15]||(l[15]=function(l){return e.infoDetalle.NESTADO=l}),options:e.estadosConfirm,"option-value":"ID","option-label":"DESCRIPCION",label:"Estado Final","emit-value":"","map-options":"",outlined:"",readonly:1!==e.infoDetalle.ESTADO},null,8,["modelValue","options","readonly"]),e.infoDetalle.NESTADO!==e.infoDetalle.ESTADO?((0,t.uX)(),(0,t.Wv)(x,{key:0,color:"primary",label:"Aceptar",onClick:e.saveDoc},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]),e.infoDetalle.NESTADO&&2!==e.infoDetalle.NESTADO?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",S,[(0,t.Lk)("div",g,[(0,t.bF)(y,{class:"col",modelValue:e.infoDetalle.MOTIVO_RECHAZO,"onUpdate:modelValue":l[16]||(l[16]=function(l){return e.infoDetalle.MOTIVO_RECHAZO=l}),options:e.secundarios,"option-value":"SECUCOD","option-label":"SECUDES",label:"Motivo de "+(3===e.infoDetalle.NESTADO?"Observación":"Rechazo"),readonly:1!==e.infoDetalle.ESTADO},null,8,["modelValue","options","label","readonly"])])]),(0,t.Lk)("div",h,[(0,t.Lk)("div",v,[(0,t.bF)(q,{class:"col",modelValue:e.infoDetalle.COMENTARIO,"onUpdate:modelValue":l[17]||(l[17]=function(l){return e.infoDetalle.COMENTARIO=l}),label:"Comentario",type:"textarea",readonly:1!==e.infoDetalle.ESTADO},null,8,["modelValue","readonly"])])])],64)):(0,t.Q3)("v-if",!0)])):(0,t.Q3)("v-if",!0)]}),_:1},8,["modelValue","title"]),(0,t.Lk)("div",N,[(0,t.Lk)("div",R,[(0,t.Lk)("div",P,[(0,t.Lk)("div",M,[(0,t.Lk)("div",F,[(0,t.bF)(y,{class:"col",modelValue:e.profeSelect,"onUpdate:modelValue":l[19]||(l[19]=function(l){return e.profeSelect=l}),options:e.profes,"option-value":"PROFCOD","option-label":"NOMCOMP",label:"Personal",onInput:e.cargarPedidos},null,8,["modelValue","options","onInput"]),(0,t.Lk)("div",V,[(0,t.bF)(q,{class:"col",type:"date",label:"Desde",modelValue:e.f_inicio,"onUpdate:modelValue":l[20]||(l[20]=function(l){return e.f_inicio=l}),onInput:e.cargarPedidos},null,8,["modelValue","onInput"]),(0,t.bF)(q,{class:"col",type:"date",label:"Hasta",modelValue:e.f_fin,"onUpdate:modelValue":l[21]||(l[21]=function(l){return e.f_fin=l}),onInput:e.cargarPedidos},null,8,["modelValue","onInput"])])]),(0,t.Lk)("div",w,[(0,t.bF)(q,{class:"col",modelValue:e.buscar,"onUpdate:modelValue":l[22]||(l[22]=function(l){return e.buscar=l}),label:"Buscar"},{prepend:(0,t.k6)(function(){return[(0,t.bF)(H,{name:"search"})]}),_:1},8,["modelValue"]),(0,t.Lk)("div",_,[(0,t.bF)(y,{class:"col",modelValue:e.estadoSelect,"onUpdate:modelValue":l[23]||(l[23]=function(l){return e.estadoSelect=l}),options:e.estados,"option-value":"ID","option-label":"DESCRIPCION",label:"Estado",onInput:e.cargarPedidos,"emit-value":"","map-options":"",outlined:"",multiple:"","use-chips":"","stack-label":""},null,8,["modelValue","options","onInput"])])])])])]),(0,t.bF)(B,{class:"q-mt-sm",columns:e.columns,data:e.pedidos,"show-search":!1,"hide-bottom":!0,context:a,css:"height: calc(100vh - 225px)",config:e.config},null,8,["columns","data","config"])])]}),_:1})}var U=a(99550),q=a.n(U),y=a(76080),L=a.n(y),H=a(57008),$=a.n(H),G=a(45254),Q=a.n(G),J=(a(30683),a(71225),a(74260),a(83077),a(39866),a(23825),a(52133),a(10239),a(89571),a(56285),a(50310),a(5962),a(32203),a(90095),a(6724),a(515),a(83190),a(27153),a(66307),a(13715),a(24066),a(6123)),x=a(33777),B=a(30640),X=a(9736),j=a(16648),W=a(57668),Y=a(2739),Z=a(59089),z=a(33950),K=a(62006),ee=a(18105),le=a(84603),ae=a(65673),oe=a(82327),ne=a(88865),te={components:{QList:ae.A,QItem:oe.A,QItemSection:ne.A,siePdf:le.A,SieTable:x.A,sieModal:B.A,QInput:X.A,QSelect:j.A,QListHeader:J.XR,QTab:J.zu,QTabs:J.uw,QTabPane:J.dg,sieUpload:Z.A,QForm:Y.A,QDownloadFile:K.A,QPage:J.Tu,QBtn:J.Il,QIcon:J.bP},data:function(){return{rutaPdf:null,modalPdf:!1,fileupd:{files:[]},modalNew:!1,estados:[],estadosBase:[],estadosConfirm:[],permiso:(0,W["default"])().ruta.nivel>2,f_inicio:(new Date).getFullYear()+"-01-01",f_fin:(new Date).getFullYear()+"-12-31",personal:[],profeSelect:"T",buscar:null,estadoSelect:[],secundarios:[],modalConfig:!1,personalRegistro:[],personalImpresion:[],personalTodos:[],tamPap:[],paginas:[],tipo:[],doblecara:[],orientacion:[],engrapado:[],tipos:[],pRegistroSelect:{key:"PROFCOD",values:[]},pImpresionSelect:{key:"PROFCOD",values:[]},columns:[{name:"IDNEW",label:"Número de pedido",align:"left",field:"IDNEW"},{name:"F_REGISTRO",label:"Fecha",align:"left",field:"F_REGISTRO"},{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"},{name:"ADJUNTOS",label:"Documentos",align:"left",field:"ADJUNTOS"},{name:"CANTIDAD",label:"Copias",align:"center",field:"CANTIDAD"},{name:"ESTADO",label:"Estado",align:"center",field:"ESTADO"},{name:"ACTIONS",align:"center",field:"ACTIONS"}],columnsRegistro:[{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"}],columnsImpresion:[{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"}],pedidos:[],tituloModal:null,marcaOtros:!1,modalDetail:!1,infoModal:{ID:null,TIPO:null,FECHA:(new Date).toISOString().split("T")[0],CANTIDAD:1,TAMANO_PAPEL:null,TIPO_PAPEL:null,ORIENTACION:null,ENGRAPADO:null,COMENTARIO_REGISTRO:null,AREA:null,editable:!0},configDocumentos:{actions:{component:"button",icon:["delete"],delete:function(e){console.log(),this.fileupd.files.splice(this.fileupd.files.findIndex(function(l){return l.name===e.name}),1),console.log(e)}}},infoDetalle:{}}},methods:{showPdf:function(e){this.modalPdf=!0,this.rutaPdf=this.getUrl(e)},openModal:function(e,l){var a=this;return Q()(L()().m(function o(){return L()().w(function(o){while(1)switch(o.n){case 0:return a.selectProfe(e.PROFCOD),a.infoDetalle=$()({},e),a.infoDetalle.EstadoCarga=l,a.modalDetail=!0,a.infoDetalle.FECHA=a.date(e.F_REGISTRO,"YYYY-MM-DD"),a.infoDetalle.FH_REGISTRO=a.date(e.FH_REGISTRO,"DD/MM/YYYY HH:mm"),a.infoDetalle.NOMCOMP=a.personal.find(function(l){var a=l.PROFCOD;return a===e.PROFCOD}).NOMCOMP,o.n=1,a.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I10"}}}});case 1:a.secundarios=o.v,l||1===e.ESTADO||(l=e.ESTADO),a.infoDetalle.SEGUIMIENTO&&a.infoDetalle.SEGUIMIENTO[0]?a.infoDetalle=$()($()({},a.infoDetalle),{NESTADO:a.infoDetalle.SEGUIMIENTO[0].ESTADO||l,COMENTARIO:a.infoDetalle.SEGUIMIENTO[0].COMENTARIO||null,MOTIVO_RECHAZO:a.infoDetalle.SEGUIMIENTO[0].MOTIVO_RECHAZO||null}):a.infoDetalle=$()($()({},a.infoDetalle),{NESTADO:l,COMENTARIO:null,MOTIVO_RECHAZO:null});case 2:return o.a(2)}},o)}))()},saveDoc:function(){var e=this;return Q()(L()().m(function l(){var a,o;return L()().w(function(l){while(1)switch(l.p=l.n){case 0:if(e.infoDetalle.NESTADO&&(2===e.infoDetalle.NESTADO||e.infoDetalle.MOTIVO_RECHAZO&&e.infoDetalle.COMENTARIO)){l.n=1;break}e.$notify("Debe llenar todos los campos","error"),l.n=7;break;case 1:return l.n=2,e.$confirmar("¿Está seguro de guardar esta información?");case 2:if(a=l.v,!a){l.n=7;break}return o={IMPRESION_ID:e.infoDetalle.ID,COMENTARIO:e.infoDetalle.COMENTARIO,ESTADO:e.infoDetalle.NESTADO,MOTIVO_RECHAZO:e.infoDetalle.MOTIVO_RECHAZO,PROFCOD:e.infoDetalle.PROFCOD,FECHA:e.infoDetalle.FECHA},l.p=3,l.n=4,e.$http.post("api/ImpresionController/saveComentario",{params:o});case 4:e.$notify("Guardado Correctamente"),e.cargarPedidos(),e.modalDetail=!1,l.n=6;break;case 5:l.p=5,l.v;case 6:console.log({params:o});case 7:return l.a(2)}},l,null,[[3,5]])}))()},saveForm:function(){var e=this;return Q()(L()().m(function l(){var a,o,n;return L()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,e.$refs.myForm.validate();case 1:if(a=l.v,!(a&&e.fileupd.files.length>0)){l.n=5;break}return l.n=2,e.$confirmar("¿Está seguro de guardar esta informacion?");case 2:if(o=l.v,!o){l.n=4;break}return n=$()($()({},e.infoModal),{adjuntos:e.fileupd.files}),l.n=3,e.$http.post("api/ImpresionController/saveImpresion",{params:n});case 3:l.v,e.cargarPedidos(),e.modalNew=!1;case 4:l.n=6;break;case 5:a?0===e.fileupd.files.length&&e.$notify("Debe adjuntar al menos 1 archivo","error"):e.$notify("Debe llenar todos los campos","error");case 6:return l.a(2)}},l)}))()},getUrl:function(e){var l=e.ID,a=e.IMPRESION_ID,o=e.EXTENSION,n=e.ADJUNTO_RUTA,t=e.ADJUNTO_NOMBRE,i=n.split("/"),r=q()(i,1),s=r[0],u="?ID=".concat(l,"&IMPRESION_ID=").concat(a,"&EXTENSION=").concat(o,"&ADJUNTO_RUTA=").concat(n,"&ANO=").concat(s,"&ADJUNTO_NOMBRE=").concat(t,"&token2=").concat((0,W["default"])().token,"&access_token=").concat((0,W["default"])().token),c=(0,W["default"])().api+"/ImpresionController/getFile"+u;return c},openModalConfig:function(){var e=this;return Q()(L()().m(function l(){var a;return L()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,e.$http.get("api/ProfeController/getProfData");case 1:a=l.v,e.personalRegistro=n()(a.data),e.personalImpresion=n()(a.data),a.forEach(function(l){l.IMPRESOR&&e.pImpresionSelect.values.push(l),l.IMPRIME_OTROS&&e.pRegistroSelect.values.push(l)}),e.modalConfig=!0;case 2:return l.a(2)}},l)}))()},openNew:function(e){var l=this;return Q()(L()().m(function a(){return L()().w(function(a){while(1)switch(a.n){case 0:if(l.infoModal.editable=!e||0===Object.keys(e).length,e&&0!==Object.keys(e).length){a.n=2;break}return l.tituloModal="Nueva solicitud de impresión",l.infoModal={ID:null,TIPO:null,FECHA:(new Date).toISOString().split("T")[0],CANTIDAD:1,TAMANO_PAPEL:null,TIPO_PAPEL:null,ORIENTACION:null,ENGRAPADO:null,COMENTARIO_REGISTRO:null,AREA:null,editable:!0},l.fileupd.files=[],a.n=1,l.$http.get("api/ImpresionController/getNewId");case 1:l.infoModal.ID=a.v,l.marcaOtros||(l.infoModal.PROFCOD=(0,W["default"])().profcod,l.selectProfe((0,W["default"])().profcod));case 2:l.modalNew=!0;case 3:return a.a(2)}},a)}))()},getNew:function(){this.openNew()},cargarPedidos:function(){var e=this;return Q()(L()().m(function l(){var a;return L()().w(function(l){while(1)switch(l.n){case 0:return a={},a.ESTADO=e.estadoSelect,a.F_INICIO=e.f_inicio,a.F_FIN=e.f_fin,a.PROFCOD=e.profeSelect,l.n=1,e.$http.get("api/ImpresionController/getImpresion",{params:{parametros:a}});case 1:e.pedidos=l.v;case 2:return l.a(2)}},l)}))()},guardarRegistro:function(){var e=this;return Q()(L()().m(function l(){var a,o,n;return L()().w(function(l){while(1)switch(l.n){case 0:return a=[],o=e.$refs.tablaRegistro.rowsSelected().map(function(e){var l=e.PROFCOD;return l}),n=e.pRegistroSelect.values.map(function(e){var l=e.PROFCOD;return l}),o.length>0&&o.forEach(function(e){n.indexOf(e)<0&&a.push({PROFCOD:e,IMPRIME_OTROS:1})}),n.length>0&&n.forEach(function(e){o.indexOf(e)<0&&a.push({PROFCOD:e,IMPRIME_OTROS:0})}),l.n=1,e.$http.post("api/ProfeController/updatePersonalBloque",{data:a});case 1:l.v;case 2:return l.a(2)}},l)}))()},guardarImprimir:function(){var e=this;return Q()(L()().m(function l(){var a,o,n;return L()().w(function(l){while(1)switch(l.n){case 0:return a=[],o=e.$refs.tablaImpresion.rowsSelected().map(function(e){var l=e.PROFCOD;return l}),n=e.pImpresionSelect.values.map(function(e){var l=e.PROFCOD;return l}),o.length>0&&o.forEach(function(e){n.indexOf(e)<0&&a.push({PROFCOD:e,IMPRESOR:1})}),n.length>0&&n.forEach(function(e){o.indexOf(e)<0&&a.push({PROFCOD:e,IMPRESOR:0})}),l.n=1,e.$http.post("api/ProfeController/updatePersonalBloque",{data:a});case 1:l.v;case 2:return l.a(2)}},l)}))()},addFile:function(e){var l=this;(0,z.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){l.fileupd.files.push(e)}).catch(function(){})},selectProfe:function(e){var l=this;return Q()(L()().m(function a(){return L()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,l.$http.get("api/PersonaImpresionController/getTipos",{params:{params:{PROFCOD:e}}});case 1:l.tipos=a.v;case 2:return a.a(2)}},a)}))()},date:ee.Ay},computed:{buttons:function(){var e=[];return this.permiso&&e.push({label:"Agregar",icon:"add",click:this.getNew}),e},profes:function(){return this.marcaOtros?[{PROFCOD:"T",NOMCOMP:"Todos"}].concat(n()(this.personal)):n()(this.personal)},columnsDocs:function(){var e=[{name:"originalFilename",label:"Archivo",align:"left",field:"originalFilename"}];return this.infoModal.editable&&e.push({name:"actions",align:"center",field:"actions"}),e},config:function(){return{F_REGISTRO:{component:"date",edit:!1,clear:!0},ADJUNTOS:{renderHtml:function(e,l,a){var o=e.ADJUNTOS.map(function(e){var l=e.ADJUNTO_NOMBRE;return l});return a.chips({items:o})}},ESTADO:{renderHtml:function(e,l,a){var o=this.estados.find(function(l){var a=l.ID;return a===e.ESTADO});return a.chips({items:[o.DESCRIPCION],background:o["BG_COLOR"],color:o["TEXT_COLOR"]})}},ACTIONS:{component:"button",icon:["info as detalle","done_all as aceptar","remove_red_eye as observar","close as rechazar"],detalle:function(e){this.openModal(e,null)},aceptar:function(e){this.openModal(e,2)},observar:function(e){this.openModal(e,3)},rechazar:function(e){this.openModal(e,4)},validate:{aceptar:function(e){return this.permiso&&1===e.ESTADO},observar:function(e){return this.permiso&&1===e.ESTADO},rechazar:function(e){return this.permiso&&1===e.ESTADO}},flat:!0,round:!0}}}},watch:{},created:function(){var e=this;return Q()(L()().m(function l(){var a;return L()().w(function(l){while(1)switch(l.n){case 0:return Promise.all([e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I05"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I06"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I07"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I08"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I09"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I11"}}}})]).then(function(l){var a=q()(l,6),o=a[0],n=a[1],t=a[2],i=a[3],r=a[4],s=a[5];e.tamPap=o,e.paginas=n,e.tipo=t,e.doblecara=i,e.orientacion=r,e.engrapado=s}),l.n=1,e.$http.get("api/ImpresionController/getEstados");case 1:return e.estadosBase=l.v,e.estados=e.estadosBase.filter(function(e){return[1,2,3,4].includes(e.ID)}),e.estadosConfirm=e.estadosBase.filter(function(e){return[1].includes(e.ESTADO_REQUERIDO)}),e.estadoSelect=[1],e.marcaOtros=!0,e.cargarPedidos(),l.n=2,e.$http.get("api/ProfeController/getProfData");case 2:a=l.v,a=a.data,e.personal=a,e.profeSelect="T";case 3:return l.a(2)}},l)}))()}},ie=a(12807);const re=(0,ie.A)(te,[["render",k]]);var se=re}}]);