"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[40668],{40668:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var r=t(61758),a={class:"row q-col-gutter-sm"},i={class:"col-xs-12"},u={class:"col-xs-12"},l={class:"row q-pa-sm q-col-gutter-sm"},o={class:"col-xs-12"};function s(e,n){var t=this,s=(0,r.g2)("header-btn"),c=(0,r.g2)("sie-table"),f=(0,r.g2)("q-card-section"),d=(0,r.g2)("q-card"),b=(0,r.g2)("q-input"),m=(0,r.g2)("q-form"),p=(0,r.g2)("sie-modal"),w=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(w,{class:"q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(d,{flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(f,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",a,[(0,r.Lk)("div",i,[(0,r.bF)(s,{name:"Mantenimiento Club",buttons:e.buttons},null,8,["buttons"])]),(0,r.Lk)("div",u,[(0,r.bF)(c,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableClub",onRowSelected:e.rowSelectClub,css:"height:calc(100vh - 170px)",context:t},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,r.bF)(p,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Club":"Modificar Club",onSubmit:e.saveAcccion},{default:(0,r.k6)(function(){return[(0,r.bF)(m,{class:"q-pt-sm",ref:"refForm"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",l,[(0,r.Lk)("div",o,[(0,r.bF)(b,{modelValue:e.form.NOMBRE,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.NOMBRE=n}),label:"Nombre",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var c=t(76080),f=t.n(c),d=t(45254),b=t.n(d),m=(t(89571),t(6123)),p={data:function(){return{config:{ID_CLUB:{renderHtml:function(e,n){return n("span",{},e.ID_CLUB)},style:{width:"60px"}},ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,n){var t=this;return b()(f()().m(function e(){return f()().w(function(e){while(1)switch(e.n){case 0:return t.rowClub=n,e.n=1,t.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var t=this;return b()(f()().m(function e(){return f()().w(function(e){while(1)switch(e.n){case 0:return t.rowClub=n,e.n=1,t.deleteClub();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"NOMBRE",label:"Club",field:"NOMBRE",align:"left",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center"}]}}},w=t(39893),C=t(81288),h=t(2739),g=t(9736),v=t(88567),k=t(95718),A={mixins:[p],components:{QForm:h.A,QInput:g.A,QCard:v.A,QCardSection:k.A,QPage:m.Tu},data:function(){return{required:w.require,buttons:[{label:"Agregar",icon:"plus",permiso:">1",click:this.openAgregar}],openAdd:!1,action:"create",rowClub:null,form:{NOMBRE:null}}},methods:{openAgregar:function(){this.action="create",this.rowClub=null,(0,C.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowClub?(this.action="update",this.form.NOMBRE=this.rowClub.NOMBRE,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return b()(f()().m(function n(){var t;return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(t=n.v,t){n.n=2;break}return n.a(2);case 2:"create"===e.action?e.createClub():e.updateClub();case 3:return n.a(2)}},n)}))()},rowSelectClub:function(e,n){this.rowClub=n},createClub:function(){var e=this;return b()(f()().m(function n(){var t,r,a,i,u;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/ClubController/addClub",{data:e.form});case 1:t=n.v,r=t.data,a=t.message,i={ID_CLUB:r.ID_CLUB,NOMBRE:e.form.NOMBRE},e.rows.unshift(i),e.openAdd=!1,e.$notify(a,"success"),n.n=3;break;case 2:n.p=2,u=n.v,e.$notify(u.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readClub:function(){var e=this;return b()(f()().m(function n(){var t,r;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/ClubController/getClub");case 1:t=n.v,e.rows=t,n.n=3;break;case 2:n.p=2,r=n.v,e.$notify(r.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deleteClub:function(){var e=this;return b()(f()().m(function n(){var t,r,a,i;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowClub){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(t=n.v,!t){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/ClubController/deleteClub",{params:{id:e.rowClub.ID_CLUB}});case 4:r=n.v,a=r.message,e.rows.splice(e.rows.indexOf(e.rowClub),1),e.rowClub=null,e.$notify(a,"success"),n.n=6;break;case 5:n.p=5,i=n.v,e.$notify(i.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateClub:function(){var e=this;return b()(f()().m(function n(){var t,r,a,i;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,t=e.$refs.tableClub,n.n=1,e.$http.post("api/ClubController/updateClub",{id:e.rowClub.ID_CLUB,params:{NOMBRE:e.form.NOMBRE}});case 1:r=n.v,a=r.message,e.openAdd=!1,t.updateRow(e.rowClub,e.form),e.$notify(a,"success"),n.n=3;break;case 2:n.p=2,i=n.v,e.$notify(i.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){var e=this;return b()(f()().m(function n(){var t;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.readClub();case 1:n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},B=t(12807);const $=(0,B.A)(A,[["render",s]]);var N=$}}]);