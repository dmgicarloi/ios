"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[66542],{66542:function(e,t,i){i.r(t),i.d(t,{default:function(){return L}});var n=i(8445),r=i.n(n),a=i(61758),o={class:"row"},l={class:"col-12 sie-flat"},c={class:"row"},s={class:"col-12 sie-flat"},u={class:"row"},d={class:"col-12 sie-flat"},m={class:"row q-ma-sm"},f={class:"col-12 q-pa-md"},g={class:"col-12 q-pa-md"},p={class:"col-12 q-pa-md"};function b(e,t){var i=this,n=(0,a.g2)("header-btn"),b=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-separator"),C=(0,a.g2)("sie-table"),h=(0,a.g2)("q-card"),S=(0,a.g2)("q-input"),w=(0,a.g2)("q-field"),E=(0,a.g2)("sie-modal"),k=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(k,{class:"q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(h,null,{default:(0,a.k6)(function(){return[(0,a.bF)(n,{name:"Seguro y Clinicas",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(b,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",{class:"tabs-personalized mr-xl",style:{"justify-content":"initial!important"},onClick:t[0]||(t[0]=function(){return e.gatActiveTabs&&e.gatActiveTabs.apply(e,arguments)})},r()(t[5]||(t[5]=[(0,a.Lk)("p",{style:{width:"20%"},active:"active",tabsItem:"getClinica",tab:""},"Clinicas",-1),(0,a.Lk)("p",{style:{width:"30%"},active:"",tabsItem:"getParticulares",tab:""}," Seguros Particulares",-1),(0,a.Lk)("p",{style:{width:"30%"},active:"",tabsItem:"getTipoSeguro",tab:""}," Tipos de Seguros",-1)])))]}),_:1}),(0,a.bF)(v),"getClinica"==e.tabsActive?((0,a.uX)(),(0,a.Wv)(b,{key:0},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",o,[(0,a.Lk)("div",l,[(0,a.bF)(C,{class:"q-ma-none",data:e.rows,columns:e.fields,config:e.config,context:i,css:{height:"71vh"},onRowSelected:e.rowSelectDetalle},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})):(0,a.Q3)("v-if",!0),"getParticulares"==e.tabsActive?((0,a.uX)(),(0,a.Wv)(b,{key:1},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",c,[(0,a.Lk)("div",s,[(0,a.bF)(C,{class:"q-ma-none",data:e.rows,columns:e.fields,config:e.config,context:i,css:{height:"71vh"},onRowSelected:e.rowSelectDetalle},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})):(0,a.Q3)("v-if",!0),"getTipoSeguro"==e.tabsActive?((0,a.uX)(),(0,a.Wv)(b,{key:2},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",u,[(0,a.Lk)("div",d,[(0,a.bF)(C,{class:"q-ma-none",data:e.rows,columns:e.fieldsTipoSeguro,config:e.config,context:i,css:{height:"71vh"},onRowSelected:e.rowSelectDetalle},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})):(0,a.Q3)("v-if",!0)]}),_:1}),(0,a.bF)(E,{modelValue:e.openModalAgregar,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.openModalAgregar=t}),escClick:!0,esc:!0,title:e.title,ok:"Grabar",onSubmit:e.grabar,icon_ok:"check"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",m,[(0,a.Lk)("div",f,[(0,a.bF)(w,{error:e.v$.form.codigo.$error,"error-label":"Campo requerido"},{default:(0,a.k6)(function(){return[(0,a.bF)(S,{modelValue:e.form.codigo,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.codigo=t}),outlined:"",label:"Código",disable:e.editable},null,8,["modelValue","disable"])]}),_:1},8,["error"])]),(0,a.Lk)("div",g,[(0,a.bF)(w,{error:e.v$.form.descripcion.$error,"error-label":"Campo requerido"},{default:(0,a.k6)(function(){return[(0,a.bF)(S,{modelValue:e.form.descripcion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.descripcion=t}),label:"Descripcion"},null,8,["modelValue"])]}),_:1},8,["error"])]),(0,a.Lk)("div",p,[(0,a.bF)(S,{modelValue:e.form.equivalencia,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.equivalencia=t}),label:e.labelModal},null,8,["modelValue","label"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var v=i(76080),C=i.n(v),h=i(45254),S=i.n(h),w=(i(71587),i(52133),i(50310),i(6724),i(83190),i(66307),i(68017),i(83972)),E=i(6123),k=i(30545),A=i(9736),D=i(53380),U=i(33777),q=i(82640),T=i(2819),$={data:function(){var e=this;return{config:{SECUDES:{component:"input",edit:!0,autoFocus:!0,input:function(t,i){e.setDescripcion(t,i)}},SECUEQU:{component:"input",edit:!0,autoFocus:!0,input:function(t,i){e.setEquivalencia(t,i)}},ACTION:{component:"button",icon:["delete as eliminar"],tooltip:{eliminar:"Eliminar"},eliminar:function(e){var t=this;this.$confirm("¿Está seguro de eliminar este registro? ¡El Proceso es irreversible!","delete").onOk(S()(C()().m(function i(){return C()().w(function(i){while(1)switch(i.n){case 0:t.eliminarRegistro(e);case 1:return i.a(2)}},i)})))},permisos:{eliminar:"===3"},flat:!0,dense:!0,color:"primary"}},rows:[],fields:[{sortable:!0,name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center"},{sortable:!0,name:"SECUDES",label:"Descripción",field:"SECUDES",align:"center"},{name:"SECUEQU",label:"Telefono",field:"SECUEQU",align:"center"},{name:"ACTION",label:"",field:"ACTION",align:"center"}],fieldsTipoSeguro:[{sortable:!0,name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center"},{sortable:!0,name:"SECUDES",label:"Descripción",field:"SECUDES",align:"center"},{name:"SECUEQU",label:"Equivalencia",field:"SECUEQU",align:"center"},{name:"ACTION",label:"",field:"ACTION",align:"center"}]}}},F=i(982),R=i(30640),I=i(80660),Q=i(57668),y={setup:function(){var e=(0,w.fG)();return{v$:e}},mixins:[$],components:{sieModal:R.A,sieTable:U.A,QTable:k.A,QInput:A.A,QSeparator:D.A,QPage:E.Tu,QCard:E.C$,QField:E.Om},data:function(){var e=this;return{sie:(0,Q["default"])(),form:{princod:null,codigo:null,descripcion:null,equivalencia:null},labelModal:"Telefono",nombreCampo:"Telefono",tabsActive:"getClinica",title:"Registro de Clinicas",openModalAgregar:!1,editable:!1,buttons:[{icon:"addcircle",label:"Agregar",tooltip:"Agregar Registro",click:function(){var t=S()(C()().m(function t(){var i,n;return C()().w(function(t){while(1)switch(t.n){case 0:if(e.openModalAgregar=!0,e.clearForm(),e.v$.form.$reset(),i="getClinica"===e.tabsActive?"003":"213",e.title="getClinica"===e.tabsActive?"Registro de Clinicas":"getParticulares"===e.tabsActive?"Registro de Seguros Particulares":"Registro de Aseguradoras",e.labelModal="getTipoSeguro"===e.tabsActive?"Abreviatura":"Telefono",e.form.princod=i,"getTipoSeguro"===e.tabsActive){t.n=2;break}return t.n=1,I.$http.get("api/mantenimientoController/getCodeByPrincod",{params:{params:{PRINCOD:i}}});case 1:n=t.v,e.form.codigo=n,e.editable=!0,t.n=3;break;case 2:e.form.princod="ASE",e.editable=!1;case 3:return t.a(2)}},t)}));function i(){return t.apply(this,arguments)}return i}()},{icon:"print",label:"Imprimir",tooltip:"Imprimir",click:function(){switch(e.tabsActive){case"getClinica":(0,T.exportFilePhp)(null,"medico/mantenimiento-seguros/reportes/tipo/003");break;case"getParticulares":(0,T.exportFilePhp)(null,"medico/mantenimiento-seguros/reportes/tipo/213");break;case"getTipoSeguro":(0,T.exportFilePhp)(null,"medico/mantenimiento-seguros/reportes/tipo/ASE");break}}}],rowSelectedDetalle:{}}},methods:{clearForm:function(){this.form.codigo="",this.form.descripcion="",this.form.equivalencia=""},grabar:function(){var e=this;return S()(C()().m(function t(){var i,n,r;return C()().w(function(t){while(1)switch(t.p=t.n){case 0:if(e.v$.form.$touch(),!e.v$.form.$error){t.n=1;break}return(0,F["default"])("Complete los campos requeridos","warning"),t.a(2,0);case 1:return i={PRINCOD:e.form.princod,SECUCOD:e.form.codigo,SECUDES:e.form.descripcion,SECUEQU:e.form.equivalencia,ESTADO:1},t.p=2,t.n=3,I.$http.post("api/mantenimientoController/agregarRegistro",{params:i});case 3:n=t.v,(0,F["default"])(n.message,"success"),e.openModalAgregar=!1,t.n=5;break;case 4:t.p=4,r=t.v,(0,F["default"])(r.message,"warning");case 5:e.getData();case 6:return t.a(2)}},t,null,[[2,4]])}))()},eliminarRegistro:function(e){var t=this;return S()(C()().m(function i(){return C()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,I.$http.post("api/mantenimientoController/eliminarRegistro",{params:e});case 1:(0,F["default"])("Registro Eliminado","success"),t.getData();case 2:return i.a(2)}},i)}))()},setDescripcion:function(e,t){var i=this;return S()(C()().m(function e(){return C()().w(function(e){while(1)switch(e.n){case 0:if(i.rowSelectedDetalle.SECUDES===t.SECUDES){e.n=1;break}return e.n=1,I.$http.post("api/mantenimientoController/setDescripcion",{params:t});case 1:return e.a(2)}},e)}))()},setEquivalencia:function(e,t){var i=this;return S()(C()().m(function e(){return C()().w(function(e){while(1)switch(e.n){case 0:if(i.rowSelectedDetalle.SECUEQU===t.SECUEQU){e.n=2;break}return e.n=1,I.$http.post("api/mantenimientoController/setEquivalencia",{params:t});case 1:(0,F["default"])("Registro Actualizado","success");case 2:return e.a(2)}},e)}))()},getData:function(){var e=this;return S()(C()().m(function t(){var i;return C()().w(function(t){while(1)switch(t.n){case 0:i=e.tabsActive,t.n="getClinica"===i?1:"getParticulares"===i?3:"getTipoSeguro"===i?5:7;break;case 1:return t.n=2,I.$http.get("api/mantenimientoController/getClinica");case 2:return e.rows=t.v,t.a(3,7);case 3:return t.n=4,I.$http.get("api/mantenimientoController/getParticulares");case 4:return e.rows=t.v,t.a(3,7);case 5:return t.n=6,I.$http.get("api/mantenimientoController/getTipoSeguro");case 6:return e.rows=t.v,t.a(3,7);case 7:return t.a(2)}},t)}))()},gatActiveTabs:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;if(t){var n=e.target.parentElement.children;if(n.length>0&&e.target.attributes.tabsItem){var r=e.target.attributes.tabsItem.textContent.trim();this.tabsActive=r,this.nombreCampo="getTipoSeguro"!==r?"Telefono":"Equivalencia",this.getData(),Array.from(n).map(function(e){e.attributes.tabsItem.textContent.trim()===r?e.attributes.active.textContent="active":e.attributes.active.textContent=""})}}else if(i){var a=document.querySelectorAll("[tab]");Array.from(a).map(function(e){"clinica"===e.getAttribute("tabsItem")?e.setAttribute("active","active"):e.setAttribute("active","")})}},rowSelectDetalle:function(e){this.rowSelectedDetalle=e}},computed:{permiso:function(){return this.sie.ruta.nivel}},validations:function(){var e={form:{codigo:{required:q.mw},descripcion:{required:q.mw}}};return e},created:function(){var e=this;return S()(C()().m(function t(){return C()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,I.$http.get("api/mantenimientoController/getClinica");case 1:e.rows=t.v;case 2:return t.a(2)}},t)}))()}},P=i(12807);const O=(0,P.A)(y,[["render",b]]);var L=O}}]);