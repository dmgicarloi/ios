"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[56670],{56670:function(o,e,n){n.r(e),n.d(e,{default:function(){return Q}});var t=n(61758),a={class:"row"},r={class:"col-xs-4 col-md-2"},i={key:0,class:"col-xs-4 col-md-6"},l={class:"col-xs-4 col-md-2"},u={key:0,class:"col-xs-4 col-md-2"},s={class:"col-xs-4 col-md-2"},c={class:"row"},d={class:"col-xs-12"};function p(o,e){var n=this,p=(0,t.g2)("header-btn"),m=(0,t.g2)("sie-select"),f=(0,t.g2)("q-card-section"),A=(0,t.g2)("sie-table"),C=(0,t.g2)("q-card-main"),O=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(O,{class:"sie-flat pasebrae bg-white q-pa-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(C,{class:"q-pa-none"},{default:(0,t.k6)(function(){return[o.checked?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(p,{key:0,name:"Exportación de Carnets",buttons:o.buttons},null,8,["buttons"])),(0,t.bF)(f,{class:"q-pa-none"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",a,[(0,t.Lk)("div",r,[(0,t.bF)(m,{type:"outlined",modelValue:o.duracod,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.duracod=e}),val:"DURACOD",label:"DURADES",options:o.optPeriodo,readonly:!1,placeholder:"Periodo",onInput:o.cambiarPeriodo},null,8,["modelValue","options","onInput"])]),o.checked?((0,t.uX)(),(0,t.CE)("div",i,[o.isFamAlu?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(m,{key:0,type:"outlined",modelValue:o.persona,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.persona=e}),val:"ID_PERSONA",label:"NOMCOMP",options:o.optionAlumnos,readonly:!1,placeholder:"Alumno",onSelected:o.cambiarAlumno},null,8,["modelValue","options","onSelected"]))])):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(m,{class:"col-md-2",type:"outlined",modelValue:o.tipocod,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.tipocod=e}),val:"TIPOCOD",label:"TIPODES",options:o.optTipogrupovac,readonly:!1,placeholder:"Programa",onInput:o.cambiarPrograma},null,8,["modelValue","options","onInput"]),(0,t.bF)(m,{class:"col-md-2",type:"outlined",modelValue:o.gruvacod,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.gruvacod=e}),val:"GRUVACOD",label:"GRUVADES",options:o.optGrupo,readonly:!1,placeholder:"Grupo",onInput:o.cambiarGrupo},null,8,["modelValue","options","onInput"]),(0,t.Lk)("div",l,[(0,t.bF)(m,{type:"outlined",modelValue:o.idCursoPeriodo,"onUpdate:modelValue":e[4]||(e[4]=function(e){return o.idCursoPeriodo=e}),val:"ID_CURSO_PERIODO",label:"CURSO",options:o.comboCursos,readonly:!1,placeholder:"Curso",onInput:o.cambiarCurso},null,8,["modelValue","options","onInput"])]),o.itemCurso.NUMTURNOS>1?((0,t.uX)(),(0,t.CE)("div",u,[(0,t.bF)(m,{type:"outlined",modelValue:o.vaccod,"onUpdate:modelValue":e[5]||(e[5]=function(e){return o.vaccod=e}),val:"VACCOD",label:"TURNODES",options:o.optTurnos,readonly:!1,placeholder:"Turno",onInput:o.cambiarTurno},null,8,["modelValue","options","onInput"])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",s,[(0,t.bF)(m,{type:"outlined",modelValue:o.estado,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.estado=e}),val:"value",label:"label",options:o.optionEstados,readonly:!1,placeholder:"Estado",onInput:o.cambiarTurno},null,8,["modelValue","options","onInput"])])],64))])]}),_:1}),(0,t.bF)(f,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",c,[(0,t.Lk)("div",d,[(0,t.bF)(A,{css:"height:calc(100vh - 220px)",ref:"tabla","row-key":"ID_INSCRIPCION_DETALLE",selection:"multiple",context:n,columns:o.columnsAlumnos,data:o.dataInscripciones,selected:o.seleccionados,"onUpdate:selected":e[7]||(e[7]=function(e){return o.seleccionados=e}),config:o.config},null,8,["columns","data","selected","config"])])])]}),_:1})]}),_:1})]}),_:1})}var m=n(8445),f=n.n(m),A=n(76080),C=n.n(A),O=n(45254),D=n.n(O),h=(n(30683),n(71225),n(74260),n(39866),n(77507),n(52133),n(10239),n(89571),n(50310),n(5962),n(32203),n(6724),n(83190),n(52776),n(62692),n(33092),n(6123)),I=n(26697),E=n(53093),g=n(53811),S=n(43346),b=n(11654),v=n(9736),R=n(16648),P=n(88567),T=n(95718),U=n(80340),N=n(57668),w=n(65229),F=n(982),G=n(92173),V=n(30640),M=n(93616),k=n(88865),Y={data:function(){return{configAlumnos:{},columnsAlumnos:[{label:"Código",name:"ALUCOD",field:"ALUCOD",align:"left",sortable:!0},{label:"DNI",name:"DNI",field:"DNI",align:"left",sortable:!0},{label:"Apellidos",name:"APELLIDOS",field:"APELLIDOS",align:"left",sortable:!0},{label:"Nombres",name:"NOMBRES",field:"NOMBRES",align:"left",sortable:!0},{label:"Grupo",name:"GRUVADES",field:"GRUVADES",align:"left",sortable:!0},{label:"Curso",name:"CURSODES",field:"CURSODES",align:"left",sortable:!0},{label:"Estado",name:"ESTADODES",field:"ESTADODES",align:"left"},{label:"Horario",name:"HORARIO",field:"HORARIO",align:"left",sortable:!0}]}}},_=n(2819),L={directives:{sieActive:w.A},components:{QItemSection:k.A,QSearch:h.Ks,sieSelect:M.A,QToolbar:h.ZV,QTabs:I.A,QTab:E.A,QTabPanels:g.A,QTabPanel:S.A,QBtn:b.A,QSelect:R.A,QInput:v.A,QPageSticky:h._U,QFab:h.l6,QCard:P.A,QFabAction:h.B$,QCardSection:T.A,QInnerLoading:h.SQ,QSpinnerOval:h.VA,sieVacio:U.A,sieEstudiantes:G.Ay,sieModal:V.A,QPage:h.Tu,QCardMain:h.d1},mixins:[Y],data:function(){return{buttons:[{icon:"apps_line",label:"Imprimir Stickers",tooltip:"Imprimir Stickers",click:this.imprimirStickers,disable:this.permiso>1},{icon:"contact_card",label:"Imprimir Carnets",tooltip:"Imprimir Carnets",click:this.imprimirCarnets,disable:this.permiso>1}],idCursoPeriodo:null,gruvacod:null,duracoddes:"",cursonom:"",optionAlumnos:[],dataInscripcionDetalle:[],alumno:{},config:{},configAlumnos:{},duracod:null,sie:(0,N["default"])(),dataAlumnos:[],isFamAlu:(0,N["default"])().esFamilia||(0,N["default"])().esFamiliaAdmision||(0,N["default"])().esEstudiante||["E01","E02"].includes((0,N["default"])().tipcod),optPeriodo:[],dataCursos:[],columns:[{label:"Código",name:"VACCOD",field:"VACCOD",align:"left"},{label:"Curso",name:"CURSODES",field:"CURSODES",align:"left"},{label:"Mes",name:"MESDES",field:"MESDES",align:"left"},{label:"Horario",name:"HORARIO",field:"HORARIO",align:"left"},{label:"Profesor",name:"NOMCOMP",field:"NOMCOMP",align:"left"},{label:"Aula",name:"AULADES",field:"AULADES",align:"left"},{label:"N° Pago",name:"NUMPAGO",field:"NUMPAGO",align:"left"},{label:"Monto",name:"MONTOPAG",field:"MONTOPAG",align:"left"},{label:"Fecha de pago",name:"FECPAG",field:"FECPAG",align:"left"},{label:"Estado",name:"ESTADODES",field:"ESTADODES",align:"left"},{label:"Fec Ini",name:"FECINI",field:"FECINI",align:"left"},{label:"Fec Fin",name:"FECFIN",field:"FECFIN",align:"left"}],optTipoAlumno:[{label:"Interno",value:1},{label:"Externo",value:3}],optPrograma:[{label:"SummerSkillaa",value:"I"},{label:"SummerSkil2sss",value:"E"}],tipoAlumno:1,idPrograma:null,idTaller:null,talleres:[{label:"BASQUET",value:"I"},{label:"FUTBOL",value:"E"},{label:"KARATE",value:"K"}],buscar:"",visible:!1,optGrupo:[],objEnviar:[],objActual:[],pase:{},persona:"",isFamExterna:"E01"===(0,N["default"])().tipcod,rutaEscudo:(0,N["default"])().host+"/api/HyoEscudo/imagen/logo",colegio:(0,N["default"])().colname,checked:!1,titleCheked:"Talleres por alumno",optTipogrupovac:[],tipocod:null,optCtCurso:[],itemCurso:{NUMTURNOS:0},cursocod:null,optTurnos:[],vaccod:null,seleccionados:[],estado:null,optionEstados:[{label:"Todos",value:null},{label:"Inscrito",value:1},{label:"Pagado",value:2},{label:"Gratuito",value:3},{label:"Exonerado",value:6}]}},methods:{cambiarGrupo:function(){this.idCursoPeriodo=null,this.vaccod=null,this.itemCurso={},this.columnsAlumnos.map(function(o){return o.label}).includes("Horario")||this.columnsAlumnos.push({label:"Horario",name:"HORARIO",field:"HORARIO",align:"left"})},imprimirStickers:function(){var o=this.$refs.tabla.rowsSelected(),e=o.map(function(o){return o.ID_INSCRIPCION_DETALLE});if(o.length>1e3)return this.$alert("Solo puede imprimir 1000 Carnets como máximo.","warning");if(0===o.length)return this.$alert("Marque un item para imprimir.","warning");var n={repcod:"reportesStickerQrPorCursoBloque",formato:"pdf",IDS:e.join(",")};(0,_.exportFilePhp)(n,"webservice/reportes/reporte")},imprimirCarnets:function(){var o=this.$refs.tabla.rowsSelected(),e=o.map(function(o){return o.ID_INSCRIPCION_DETALLE});if(o.length>1e3)return this.$alert("Solo puede imprimir 1000 Carnets como máximo.","warning");if(0===o.length)return this.$alert("Marque un item para imprimir.","warning");var n={repcod:"reportesCarnetQrPorCursoBloque",formato:"pdf",IDS:e.join(",")};(0,_.exportFilePhp)(n,"webservice/reportes/reporte")},modifyString:function(o){var e=o.indexOf("A");return-1===e?o:o.substring(0,e)},anular:function(){var o=this,e=this.$refs.tabla.rowsSelected();if(this.isFamAlu)for(var n=0;n<e.length;n++){var t=e[n];if(2===t.ESTADO)return this.$alert("Su inscripción esta finalizada, si desea anular la inscripción por motivo de cambio o retiro, debe comunicarse con el colegio.","warning")}var a=e.map(function(o){return o.ID_INSCRIPCION_DETALLE});if(!a.length)return(0,F["default"])("No hay cursos Seleccionados","warning");this.$confirm("¿Realmente desea Anular los cursos Seleccionados?","warning").onOk(D()(C()().m(function e(){return C()().w(function(e){while(1)switch(e.n){case 0:o.$http.post("api/InscripcionController/anular",{data:a}).then(function(){var e=D()(C()().m(function e(n){return C()().w(function(e){while(1)switch(e.n){case 0:o.loadGrupo(),(0,F["default"])(n.message,"success");case 1:return e.a(2)}},e)}));return function(o){return e.apply(this,arguments)}}()).catch(function(o){(0,F["default"])("Ocurrió un error","warning")});case 1:return e.a(2)}},e)})))},getAlumnos:function(){var o=this;return D()(C()().m(function e(){var n;return C()().w(function(e){while(1)switch(e.n){case 0:return n=o.duracod,e.n=1,o.$http.get("api/InscripcionController/getAlumnosConInscripcion",{params:{params:{duracod:n,ano:o.sie.ano}}});case 1:return o.optionAlumnos=e.v,e.a(2,1)}},e)}))()},seleccionarFila:function(o){var e=this;return D()(C()().m(function o(){return C()().w(function(o){while(1)switch(o.n){case 0:e.dataInscripcionDetalle=[],e.cursonom="";case 1:return o.a(2)}},o)}))()},getDetalleInscripcion:function(o){var e=this;return this.$http.get("api/InscripcionController/getDetalleInscripcion",{params:{params:o}}).then(function(o){return e.dataInscripcionDetalle=o.map(function(o){return o.ESTADODES="G"===o.TIPOCOB?"Gratuito":o.NUMTAL||o.NUMPAGO?"PAGADO":6===o.ESTADO?"EXONERADO":"",o.FECINI=h.p6.formatDate(o.FECINI,"DD/MM/YYYY"),o.FECPAG=o.FECPAG?h.p6.formatDate(o.FECPAG,"DD/MM/YYYY"):"-",o.FECFIN=h.p6.formatDate(o.FECFIN,"DD/MM/YYYY"),o}),o})},getDuracodActivo:function(){var o=this;return this.$http.get("api/InscripcionController/getPeriodo").then(function(e){o.optPeriodo=e;var n=e.find(function(o){return"S"===o.VIGENTE});o.duracod=n.DURACOD,o.duracoddes=n.DURADES})},elegirTaller:function(o){},cambiarPrograma:function(o){this.getCtCurso({duracod:this.duracod,tipocod:this.tipocod,ano:this.sie.ano,noanulado:1}),this.dataInscripcionDetalle=[],this.cursonom=""},cambiarTipoAlumno:function(){},cambiarAlumno:function(o){var e=this;return D()(C()().m(function n(){return C()().w(function(n){while(1)switch(n.n){case 0:e.tipoAlumno=1===o.ID_PERFIL?1:3,e.alumno=o,e.loadGrupo(),e.dataInscripcionDetalle=[],e.cursonom="";case 1:return n.a(2)}},n)}))()},cambiarPeriodo:function(){var o=this;return D()(C()().m(function e(){return C()().w(function(e){while(1)switch(e.n){case 0:return o.duracoddes=o.optPeriodo.filter(function(e){return e.DURACOD===o.duracod})[0].DURADES,o.tipocod=null,o.idCursoPeriodo=null,o.dataAlumnos=[],o.dataCursos=[],o.optionAlumnos=[],o.dataInscripcionDetalle=[],o.cursonom="",o.columnsAlumnos.map(function(o){return o.label}).includes("Horario")||o.columnsAlumnos.push({label:"Horario",name:"HORARIO",field:"HORARIO",align:"left"}),o.getGrupoTipo(),e.n=1,o.getCtCurso({duracod:o.duracod,tipocod:o.tipocod,ano:o.sie.ano,noanulado:1});case 1:o.getInscripciones();case 2:return e.a(2)}},e)}))()},cambiarCurso:function(o){var e=this;return D()(C()().m(function o(){var n;return C()().w(function(o){while(1)switch(o.n){case 0:if(e.vaccod=null,e.itemCurso={},n=e.optCtCurso.find(function(o){return o.ID_CURSO_PERIODO===e.idCursoPeriodo}),!n){o.n=2;break}if(e.itemCurso=n,!(e.itemCurso.NUMTURNOS>1)){o.n=2;break}return o.n=1,e.getHorario();case 1:return o.n=2,e.cambiarTurno();case 2:return o.a(2)}},o)}))()},cambiarTurno:function(){var o=this;return D()(C()().m(function e(){return C()().w(function(e){while(1)switch(e.n){case 0:null===o.vaccod?o.columnsAlumnos.map(function(o){return o.label}).includes("Horario")||o.columnsAlumnos.push({label:"Horario",name:"HORARIO",field:"HORARIO",align:"left"}):o.vaccod&&o.columnsAlumnos.map(function(e){"Horario"===e.label&&o.columnsAlumnos.splice(o.columnsAlumnos.indexOf(e),1)});case 1:return e.a(2)}},e)}))()},getInscripciones:function(){var o=this;return D()(C()().m(function e(){var n,t,a;return C()().w(function(e){while(1)switch(e.n){case 0:return o.dataInscripcionDetalle=[],o.cursonom="",n=o.optCtCurso.find(function(e){return e.VACCOD===o.itemCurso.VACCOD}),t={duracod:o.duracod,gruvacod:o.gruvacod,ano:o.sie.ano},n&&n.ID_CURSO_PERIODO&&(t.id_curso_periodo=n.ID_CURSO_PERIODO),e.n=1,o.getAlumnosByCurso(t);case 1:a=e.v,o.dataAlumnos=a.map(function(o){return o.FECPAG=o.FECPAG?h.p6.formatDate(o.FECPAG,"DD/MM/YYYY"):"-",o.ESTADODES=3===o.ESTADO?"GRATUITO":2===o.ESTADO?"PAGADO":6===o.ESTADO?"EXONERADO":"INSCRITO",o});case 2:return e.a(2)}},e)}))()},getHorario:function(){var o=this;return D()(C()().m(function e(){var n;return C()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.$http.get("api/CtCursoPeriodoController/getHorario",{params:{idCursoPeriodo:o.itemCurso.ID_CURSO_PERIODO}});case 1:n=e.v,o.optTurnos=n.map(function(o){var e="".concat(h.p6.formatDate(o.HORAINI,"DD-MM-YYYY HH:mm")).split(" ")[1],n="".concat(h.p6.formatDate(o.HORAFIN,"DD-MM-YYYY HH:mm")).split(" ")[1];return o.TURNODES="".concat(o.VALOR," (").concat(e," - ").concat(n,")"),o}),o.optTurnos.unshift({VACCOD:null,TURNO:null,TURNODES:"TODOS"});case 2:return e.a(2)}},e)}))()},getGrupoTipo:function(){var o=this;this.$http.get("api/InscripcionController/getTipoGrupoVac",{params:{parametros:{enUso:1,duracod:this.duracod,ano:this.sie.ano}}}).then(function(e){e.unshift({TIPOCOD:null,TIPODES:"TODOS"}),o.optTipogrupovac=f()(e)})},getPeriodos:function(){var o=this;this.$http.get("api/InscripcionController/getPeriodo").then(function(e){o.optPeriodo=e})},loadGrupo:function(o){var e=this,n={noanulado:1,id_persona:this.alumno.ID_PERSONA,alucod:this.alumno.ALUCOD,ano:this.sie.ano,duracod:this.duracod,tipocod:this.idPrograma,proalu:this.tipoAlumno};this.$http.get("api/InscripcionController/getCursosPorAlumno",{params:{params:n}}).then(function(o){e.dataCursos=o.map(function(o){return o.NUMPAGO=o.NUMPAG?o.NUMTAL+"-"+o.NUMPAG:"-",o.ESTADODES="G"===o.TIPOCOB?"Gratuito":2===o.ESTADO?"PAGADO":6===o.ESTADO?"EXONERADO":"INSCRITO",o.FECINI=h.p6.formatDate(o.FECINI,"DD/MM/YYYY"),o.FECPAG=o.FECPAG?h.p6.formatDate(o.FECPAG,"DD/MM/YYYY"):"-",o.FECFIN=h.p6.formatDate(o.FECFIN,"DD/MM/YYYY"),o})})},getCtCurso:function(){var o=arguments,e=this;return D()(C()().m(function n(){var t,a,r,i;return C()().w(function(n){while(1)switch(n.n){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},t.conInscritos=1,a=[],r=[],n.n=1,e.$http.get("api/CtCursoPeriodoController/getListaCursos",{params:{params:t}}).then(function(o){e.optCtCurso=o.map(function(o){return o.CURSO="".concat(o.VACCOD," - ").concat(o.CURSODES),o.ESTADODES=1===o.ESTADO?"PENDIENTE":2===o.ESTADO?"PAGADO":6===o.ESTADO?"EXONERADO":4===o.ESTADO?"BECADO":"INSCRITO",r.includes(o.GRUVACOD)||(r.push(o.GRUVACOD),a.push({GRUVACOD:o.GRUVACOD,GRUVADES:o.GRUVADES})),o})});case 1:return i=n.v,a.unshift({GRUVACOD:null,GRUVADES:"TODOS"}),e.optGrupo=a,n.a(2,i)}},n)}))()},getAlumnosByCurso:function(o){var e=this;return D()(C()().m(function n(){var t;return C()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/InscripcionController/getListarInscritos",{params:{params:o}});case 1:return t=n.v,n.a(2,t)}},n)}))()},actionChecked:function(){this.dataInscripcionDetalle=[],this.cursonom="",this.checked?this.titleCheked="Talleres por alumno":this.titleCheked="Alumnos por taller"},getIntegerAfterA:function(o){if(o){var e=o.match(/A(\d+)/);return e?parseInt(e[1],10):null}return null}},computed:{permiso:function(){return this.sie.ruta.nivel},dataInscripciones:function(){var o=this,e=f()(this.dataAlumnos),n=this.getIntegerAfterA(this.vaccod),t=e.filter(function(e){var t=!0;return o.estado&&(t=t&&e.ESTADO===o.estado),o.tipocod&&(t=t&&e.TIPOCOD===o.tipocod),o.gruvacod&&(t=t&&e.GRUVACOD===o.gruvacod),o.idCursoPeriodo&&(t=t&&e.ID_CURSO_PERIODO===o.idCursoPeriodo),n&&(t=t&&e.TURNO===n),t});return t},comboCursos:function(){var o=this,e=this.optCtCurso.filter(function(e){return!o.gruvacod||e.GRUVACOD===o.gruvacod});return e.unshift({VACCOD:null,CURSO:"TODOS"}),e}},created:function(){var o=this;return D()(C()().m(function e(){return C()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.getDuracodActivo();case 1:return e.n=2,o.getGrupoTipo();case 2:return e.n=3,o.getCtCurso({duracod:o.duracod,tipocod:o.tipocod,ano:o.sie.ano,noanulado:1});case 3:o.getInscripciones();case 4:return e.a(2)}},e)}))()}},H=n(12807);const y=(0,H.A)(L,[["render",p]]);var Q=y}}]);