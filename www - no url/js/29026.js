"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[29026],{29026:function(e,t,o){o.r(t),o.d(t,{default:function(){return I}});var n=o(61758),a=o(58790),l={class:"row q-ma-sm"},i={class:"row q-ma-sm"},u={class:"q-card"},d={class:"row justify-center items-center"},r={class:"row justify-center items-center"};function s(e,t){var o=(0,n.g2)("q-input"),s=(0,n.g2)("q-select"),c=(0,n.g2)("sie-modal"),m=(0,n.g2)("header-btn"),f=(0,n.g2)("q-btn"),p=(0,n.g2)("q-td"),A=(0,n.g2)("q-popup-edit"),O=(0,n.g2)("sie-select"),h=(0,n.g2)("q-toggle"),b=(0,n.g2)("q-table"),g=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(g,{class:"q-ma-xs"},{default:(0,n.k6)(function(){return[(0,n.bF)(c,{modelValue:e.modalCopia,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.modalCopia=t}),title:"Agregar Año",onSubmit:e.saveCopy},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[(0,n.bF)(o,{class:"q-if-outlined col","float-label":"Origen",modelValue:e.ANOORIG,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.ANOORIG=t}),readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",i,[(0,n.bF)(s,{class:"q-if-outlined col",noBottom:"",modelValue:e.ANODEST,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.ANODEST=t}),options:e.anosCopia,"float-label":"Destino"},null,8,["modelValue","options"])])]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(c,{modelValue:e.modalNuevo,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.modalNuevo=t}),title:"Agregar Año",onSubmit:e.saveNew},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{class:"q-if-outlined",modelValue:e.infoAdd.ANIO,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.infoAdd.ANIO=t}),"float-label":e.$t("ano")},null,8,["modelValue","float-label"]),(0,n.bF)(o,{class:"q-if-outlined",modelValue:e.infoAdd.NOMBRE,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.infoAdd.NOMBRE=t}),"float-label":e.$t("descripcion"),type:"textarea",rows:"4",maxlength:"250"},null,8,["modelValue","float-label"])]}),_:1},8,["modelValue","onSubmit"]),(0,n.Lk)("div",u,[(0,n.bF)(m,{name:"Mantenimiento Año",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(b,{class:"q-card q-ma-sm",data:e.dataAnos,columns:e.columns,"row-key":"ANIO",style:(0,a.Tr)({"max-height":e.alto}),"hide-bottom":""},{"body-cell-EDIT":(0,n.k6)(function(t){return[(0,n.bF)(p,{props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{class:"q-btn-item",flat:"",dense:"",icon:"delete",size:"md",onClick:function(o){return e.eliminarAno(t.row)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),"body-cell-NOMBRE":(0,n.k6)(function(l){return[(0,n.bF)(p,{props:l},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,a.v_)(l.row.NOMBRE),1),(0,n.bF)(A,{modelValue:e.txtEdited.NOMBRE,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.txtEdited.NOMBRE=t}),onSave:t[8]||(t[8]=function(t){return e.modificarAno({fila:e.txtEdited,TIPO:"NOMBRE"})}),onShow:function(t){return e.editText(l.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{modelValue:e.txtEdited.NOMBRE,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.txtEdited.NOMBRE=t})},null,8,["modelValue"])]}),_:1},8,["modelValue","onShow"])]}),_:2},1032,["props"])]}),"body-cell-ESTADO":(0,n.k6)(function(o){return[(0,n.bF)(p,{props:o,onClick:function(t){return e.campoAct={CAMPO:"ESTADO",ANO:o.row.ANIO}}},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,a.v_)(e.estadosDesc[o.row.ESTADO]),1),(0,n.bF)(A,{modelValue:e.txtEdited.ESTADO,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.txtEdited.ESTADO=t}),onSave:t[12]||(t[12]=function(t){return e.modificarAno({fila:e.txtEdited,TIPO:"ESTADO"})}),onShow:function(t){return e.editText(o.row)}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",d,[(0,n.bF)(O,{type:"outlined",noBottom:"",modelValue:e.txtEdited.ESTADO,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.txtEdited.ESTADO=t}),options:e.estados,label:"label",val:"value",onInput:t[10]||(t[10]=function(t){return e.modificarAno({fila:e.txtEdited,TIPO:"ESTADO"})})},null,8,["modelValue","options"])])]}),_:1},8,["modelValue","onShow"])]}),_:2},1032,["props","onClick"])]}),"body-cell-ACTIVO":(0,n.k6)(function(t){return[(0,n.bF)(p,{props:t,onClick:function(o){return e.campoAct={CAMPO:"ACTIVO",ANO:t.row.ANIO}}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",r,[(0,n.bF)(h,{color:"secondary",onInput:function(o){return e.validarVigente(t.row)},"true-value":1,"false-value":0,modelValue:t.row.ACTIVO,"onUpdate:modelValue":function(e){return t.row.ACTIVO=e},disable:"ACTIVO"!==e.campoAct.CAMPO||e.campoAct.ANO!==t.row.ANIO},null,8,["onInput","modelValue","onUpdate:modelValue","disable"])])]}),_:2},1032,["props","onClick"])]}),_:1},8,["data","columns","style"])])]}),_:1})}var c=o(57008),m=o.n(c),f=(o(10239),o(50310),o(90095),o(83190),o(44264),o(13715),o(6123)),p=o(80660),A=o(57668),O=o(93616),h=o(982),b=o(69027),g=o(30640),N=o(30545),E={components:{QSelect:f.Si,QToggle:f.c5,QCheckbox:f.vZ,sieSelect:O.A,QTable:N.A,QTd:f.Ef,QTr:f.qh,QPopupEdit:f.GT,sieModal:g.A,QPage:f.Tu,QInput:f.ie,QBtn:f.Il},data:function(){return{dataAnos:[],anoAct:null,sie:(0,A["default"])(),campoAct:{},alto:null,txtEdited:{},modalNuevo:!1,infoAdd:{ANIO:"",NOMBRE:""},estados:[{value:"I",label:"Inicio"},{value:"P",label:"Proceso"},{value:"C",label:"Cierre"}],estadosDesc:{I:"Inicio",P:"Proceso",C:"Cierre"},columns:[{name:"ANIO",label:this.$t("ano"),field:"ANIO",align:"center",sortable:!0},{name:"NOMBRE",label:this.$t("Descripción"),field:"NOMBRE",align:"left"},{name:"ESTADO",label:this.$t("Estado"),field:"ESTADO",align:"center"},{name:"ACTIVO",label:this.$t("Vigente"),field:"ACTIVO",align:"center"},{name:"EDIT",field:"EDIT",align:"right"}],modalCopia:!1,anosCopia:[],ANOORIG:(0,A["default"])().ano.toString(),ANODEST:null}},created:function(){this.init(),this.handleResize()},computed:{buttons:function(){var e=[];return e.push({label:"Nuevo",icon:"add",click:this.openNew}),e.push({label:"Copiar Datos",icon:"copy",click:this.copiarDocumentos}),e.push({label:"Migrar",icon:"cogs",click:this.migrarDocumentos}),e}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){var e=220;this.alto=window.innerHeight-e+"px"},init:function(){var e=this;p.$http.get("api/HyoAnoadm/obtAnosAdmisionNew").then(function(t){e.dataAnos=t.data,e.anoAct=t.anoAct,e.campoAct={}})},migrarDocumentos:function(){p.$http.post("api/HyoAnoadm/copyFiles")},validarVigente:function(e){if(0===e.ACTIVO)return this.campoAct={},this.init(),(0,h["default"])("No puede desmarcar el estado de un proceso Vigente, debe marcar otro proceso","error"),!1;this.modificarAno({fila:e,TIPO:"ACTIVO"})},modificarAno:function(e){var t=this,o=e.fila,n=e.TIPO;p.$http.post("api/HyoAnoadm/editAno",{valores:{TIPO:n,ANIO:o.ANIO,VALOR:o[n]}}).then(function(e){var o=e.msg;t.init(),(0,h["default"])(t.$t("mensajes."+o))})},editText:function(e){this.txtEdited=m()({},e)},eliminarAno:function(e){var t=this,o=e.ANIO;(0,b.dialogDelete)({message:this.$t("mensajes.m0006.confirmacion")}).then(function(e){e&&p.$http.post("api/HyoAnoadm/deleteAno",{ano:o}).then(function(e){var o=e.msg,n=e.type;(0,h["default"])(t.$t("mensajes."+o),n),t.init()})})},openNew:function(){this.modalNuevo=!0},saveNew:function(){var e=this;(0,b.dialogConfirm)({title:"Aviso",message:"¿Está seguro de registrar esta información?"}).then(function(t){t&&p.$http.post("api/HyoAnoadm/saveAno",{info:e.infoAdd}).then(function(t){(0,h["default"])(e.$t("mensajes."+t)),e.modalNuevo=!1,e.init()})}),console.log(this.infoAdd)},copiarDocumentos:function(){var e=this;this.modalCopia=!0,this.anosCopia=[],this.ANOORIG=(0,A["default"])().ano.toString(),this.ANODEST=null,this.dataAnos.forEach(function(t){var o=t.ANIO,n=""+o;e.ANOORIG!==n&&e.anosCopia.push({value:n,label:n})})},saveCopy:function(){var e=this;this.ANODEST?(0,b.dialogConfirm)({title:"Atención",message:"¿Está seguro de realizar este proceso?"}).then(function(t){t&&p.$http.post("api/HyoAnoadm/copyDocumentos",{info:{ANOORIG:e.ANOORIG,ANODEST:e.ANODEST}}).then(function(t){(0,h["default"])(e.$t("mensajes."+t)),e.modalCopia=!1})}):(0,b.alertModal)("Atención","Debe llenar el año de destino"),console.log(this.ANODEST)}}},v=o(12807);const V=(0,v.A)(E,[["render",s]]);var I=V}}]);