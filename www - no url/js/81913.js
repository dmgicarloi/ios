"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[81913],{81913:function(e,a,o){o.r(a),o.d(a,{default:function(){return fe}});var r=o(61758),n=o(58790),t={class:"row items-center no-wrap"},l={class:"col row"},i={class:"text-h6"},s={class:"col-auto"},u={class:"row q-ma-xs q-col-gutter-sm"},c={class:"col-xs-12 col-sm-6"},d={class:"row q-ma-xs q-col-gutter-sm"},m={class:"col-xs-12"},A={class:"col-xs-12 col-sm-6"},f={class:"col-xs-12 col-sm-6"},C={class:"col-xs-12 col-sm-6"},g={class:"col-xs-12 col-sm-6"},O={class:"col-xs-12 col-sm-6"},I={class:"col-xs-12 col-sm-6"},p={class:"col-xs-12 col-sm-6"},h={class:"col-xs-12 col-sm-6"},E={class:"col-xs-12 col-sm-6"},D={class:"col-xs-12 col-sm-6"},N={class:"col-xs-12 col-sm-6"},S={class:"row q-ma-xs q-col-gutter-sm"},v={class:"col-xs-12"},b={class:"col-xs-12"},w={class:"row q-ma-xs q-col-gutter-sm"};function M(e,a){var o=(0,r.g2)("q-icon"),M=(0,r.g2)("crearBotones"),R=(0,r.g2)("q-card-section"),_=(0,r.g2)("q-separator"),T=(0,r.g2)("q-select"),k=(0,r.g2)("q-input"),G=(0,r.g2)("q-checkbox"),L=(0,r.g2)("sie-grid"),F=(0,r.g2)("footer-grid"),V=(0,r.g2)("q-card");return(0,r.uX)(),(0,r.Wv)(V,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(R,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",t,[(0,r.Lk)("div",l,[(0,r.bF)(o,{class:"cursor-pointer back",name:"arrow_back",onClick:e.volver},null,8,["onClick"]),(0,r.Lk)("div",i,(0,n.v_)(e.title),1)]),(0,r.Lk)("div",s,[(0,r.bF)(M,{buttons:e.botones,nivelAcceso:e.nivelAcceso,option:e.nameOption},null,8,["buttons","nivelAcceso","option"])])])]}),_:1}),(0,r.bF)(_),(0,r.bF)(R,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",u,[(0,r.Lk)("div",c,[(0,r.Lk)("div",d,[(0,r.Lk)("div",m,[(0,r.bF)(T,{modelValue:e.ID_CATEGORIA_ANO,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.ID_CATEGORIA_ANO=a}),"option-label":"label","option-value":"value",label:"Categoria de Cobro",options:e.catAnio,onInput:e.getCategoriaData},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",A,[(0,r.bF)(k,{modelValue:e.infoCaregoria.INSTRUDES,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.infoCaregoria.INSTRUDES=a}),label:"Nivel",readonly:""},null,8,["modelValue"])]),(0,r.Lk)("div",f,[(0,r.bF)(k,{modelValue:e.infoCaregoria.GRADODES,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.infoCaregoria.GRADODES=a}),label:"Grado",readonly:""},null,8,["modelValue"])]),(0,r.Lk)("div",C,[(0,r.bF)(k,{modelValue:e.infoCaregoria.SECCIONDES,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.infoCaregoria.SECCIONDES=a}),label:"Sección",readonly:""},null,8,["modelValue"])]),(0,r.Lk)("div",g,[(0,r.bF)(k,{modelValue:e.infoCaregoria.MONEDA,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.infoCaregoria.MONEDA=a}),label:"Moneda",readonly:""},null,8,["modelValue"])]),(0,r.Lk)("div",O,[(0,r.bF)(k,{modelValue:e.infoCaregoria.MONTO,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.infoCaregoria.MONTO=a}),label:"Monto",readonly:"",style:{"text-align":"rigth"}},null,8,["modelValue"])]),(0,r.Lk)("div",I,[(0,r.bF)(k,{modelValue:e.infoCaregoria.DESCUENTO,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.infoCaregoria.DESCUENTO=a}),label:"Descuento",readonly:"",style:{"text-align":"rigth"}},null,8,["modelValue"])]),(0,r.Lk)("div",p,[(0,r.bF)(T,{modelValue:e.form.MESINI,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.form.MESINI=a}),"option-label":"label","option-value":"value",label:"Mes inicio",options:e.mes},null,8,["modelValue","options"])]),(0,r.Lk)("div",h,[(0,r.bF)(T,{modelValue:e.form.MESFIN,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.form.MESFIN=a}),"option-label":"label","option-value":"value",label:"Mes fin",options:e.mes},null,8,["modelValue","options"])]),(0,r.Lk)("div",E,[(0,r.bF)(G,{modelValue:e.repetir,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.repetir=a}),label:"Continuar Registrando"},null,8,["modelValue"])]),(0,r.Lk)("div",D,[(0,r.bF)(G,{modelValue:e.valAlumCatExists,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.valAlumCatExists=a}),"true-value":1,"false-value":0,label:"Alumnos sin categoría",onInput:e.getCategoriaData},null,8,["modelValue","onInput"])])])]),(0,r.Lk)("div",N,[(0,r.Lk)("div",S,[(0,r.Lk)("div",v,[(0,r.bF)(k,{class:"placeholder",modelValue:e.alumnoSearchModal,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.alumnoSearchModal=a}),label:"Buscar Alumno",placeholder:"Ingrese nombre",onInput:e.searchName},null,8,["modelValue","onInput"])]),(0,r.Lk)("div",b,[(0,r.Lk)("div",w,[(0,r.bF)(L,{class:"ag-theme-balham width-table-catPersonas",columnDefs:e.columnDefsModal,frameworkComponents:e.frameworkComponentsModal,rowData:e.rowDataModal,onGridReady:e.onGridReadyModal,rowSelection:"multiple",style:{width:"100vh",height:"60vh"}},null,8,["columnDefs","frameworkComponents","rowData","onGridReady"])]),(0,r.bF)(F,{onLoad:e.getCategoriaData,modelValue:e.pagina,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.pagina=a}),max:e.pages,style:{width:"100%","padding-top":"0"},rows:e.rowDataModal},null,8,["onLoad","modelValue","max","rows"])])])])])]}),_:1})]}),_:1})}var R=o(41562),_=o.n(R),T=o(76080),k=o.n(T),G=o(8445),L=o.n(G),F=o(45254),V=o.n(F),U=(o(30683),o(71225),o(39866),o(52133),o(10239),o(50310),o(5962),o(90095),o(6724),o(15547),o(83190),o(62692),o(13715),o(36408)),x=o(96330),P=o(27560),y=o(80660),Q=o(19852),q=o(7729),$=o(30640),B=o(26697),X=o(53093),H=o(2739),K=o(43346),W=o(53811),j=o(88567),z=o(95718),J=o(53380),Y=o(99515),Z=o(3112),ee=o(93616),ae=o(80340),oe=o(6123),re=o(78840),ne=o(54267),te=o(54489),le=o(57668),ie=o(64208),se=o(75177),ue=o(41615),ce=o(64303),de={components:{actionButton:re.A,sieGrid:U.A,sieVacio:ae.A,headerGrid:x.A,footerGrid:P.A,sieSelect:ee.A,QRadio:Y.A,QForm:H.A,QCheckbox:Z.A,createGrid:q.A,formulario:Q.A,QCard:j.A,QCardSection:z.A,QSeparator:J.A,QTabs:B.A,QTab:X.A,QTabPanels:W.A,QTabPanel:K.A,QPagination:oe.ao,sieModal:$.A,QSearch:oe.Ks,QSelect:te.S,QInput:ie.A,crearBotones:ce.A,QOptionGroup:oe.EX,QIcon:oe.bP},mixins:[se.A],data:function(){return{nameOption:"CategoriaPersonas",nivelAcceso:(0,le["default"])().ruta.nivel,title:"Asignación de Categorías de Cobro",arrayMeses:[],mes:(0,ne.generarMeses)(),persona:[],anio:[],categoriasAlumno:[],repetir:!1,alum:[],perfi:[],catAnio:[],catAnioFilter:[],columnDefsModal:[],frameworkComponentsModal:[],rowDataModal:[],apiModal:null,paramtrosAlumno:{},ano:"",seccion:"",grado:"",nivel:"",moneda:"",monto:0,descuento:0,ID_CATEGORIA_ANO:"",indexs:[],valAlumCatExists:0,parametrosAlumnos:{},storeCategoriaAnio:[],infoCaregoria:{INSTRUDES:"",GRADODES:"",SECCIONDES:"",MONTO:0,DESCUENTO:0,MONEDA:"",ANIO:""},form:{ID_CATEGORIA_ALUMNO:this.$route.params.id||0,ID_CATEGORIA_ANO:0,ALUCOD:"",MESINI:"03",MESFIN:"12",FECHA_CREACION:"",ID_PERFIL:ue["default"].PERFIL_ALUMNO,ID_PERSONA:""},alumnoSearchModal:"",pages:1,pagina:1,rowDataInitial:[]}},methods:{searchName:function(){var e=this;return V()(k()().m(function a(){var o;return k()().w(function(a){while(1)switch(a.n){case 0:o=L()(e.rowDataInitial),e.rowDataInitial.length>0&&(o=o.filter(function(a){return a.NOMBRE.toLowerCase().includes(e.alumnoSearchModal.toLowerCase())})),e.rowDataModal=o;case 1:return a.a(2)}},a)}))()},volver:function(){window.history.go(-1)},crearBotones:function(){this.botones=[{label:"Guardar",icon:"save",click:this.submit,minAcceso:ue["default"].LECTURA_ESCRITURA}]},getMonth:function(){var e=this;return V()(k()().m(function a(){return k()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ue["default"].MESES();case 1:e.arrayMeses=a.v;case 2:return a.a(2)}},a)}))()},getAnios:function(){var e=this;return V()(k()().m(function a(){return k()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ue["default"].API_ANIOS();case 1:e.anio=a.v;case 2:return a.a(2)}},a)}))()},onGridReadyModal:function(e){this.apiModal=e.api},clear:function(e){e||(this.ID_CATEGORIA_ANO="",this.form.MESINI="",this.form.MESFIN="",this.infoCaregoria={INSTRUDES:"",GRADODES:"",SECCIONDES:"",MONTO:0,DESCUENTO:0,MONEDA:"",ANIO:""},this.infoCaregoria.monto=0,this.rowDataModal=[],this.alumnoSearchModal=""),this.getCategoriaData()},insertCategoria:function(){var e=this;return V()(k()().m(function a(){var o;return k()().w(function(a){while(1)switch(a.n){case 0:if(e.form.MESINI&&e.form.MESFIN){a.n=1;break}return a.a(2,e.$alert("No se seleccionó los meses para la categoría","warning"));case 1:if(o=e.apiModal.getSelectedRows(),0!==o.length){a.n=2;break}return a.a(2,e.$alert("No se seleccionaron ningún alumno(a)","warning"));case 2:e.$confirm("¿Esta seguro de asignar las categorías?","info").onOk(V()(k()().m(function a(){var r,n,t,l,i,s,u,c;return k()().w(function(a){while(1)switch(a.p=a.n){case 0:r={correctamente:[],errores:[]},n=o.map(function(a){return{ID_PERSONA:a.ID_PERSONA,ALUCOD:a.CODIGO,ID_CATEGORIA_ANO:e.ID_CATEGORIA_ANO,ID_PERFIL:ue["default"].PERFIL_ALUMNO,MESINI:e.form.MESINI,MESFIN:e.form.MESFIN,ANO:(0,le["default"])().ano}}),t=_()(n),a.p=1,t.s();case 2:if((l=t.n()).done){a.n=7;break}return i=l.value,a.p=3,a.n=4,y.$http.post("api/CategoriaCobroController/addCategoriaAlumno",{data:i});case 4:s=a.v,r.correctamente.push(s),a.n=6;break;case 5:a.p=5,u=a.v,r.errores.push(u.error.message);case 6:a.n=2;break;case 7:a.n=9;break;case 8:a.p=8,c=a.v,t.e(c);case 9:return a.p=9,t.f(),a.f(9);case 10:0===r.errores.length&&r.correctamente.length>0?(e.$alert("(".concat(r.correctamente.length,") Categorias Registradas Satisfactoriamente"),"success"),e.clear(e.repetir)):r.errores.length>0&&r.correctamente.length>0?(e.clear(e.repetir),e.$alert("(".concat(r.correctamente.length,") Categorias Registradas pero (").concat(r.errores.length,") Categorías con problemas"),"success")):r.errores.length>0&&(1===o.length?e.$alert(r.errores[0],"warning"):e.$alert("(".concat(r.errores.length,") Registro con problemas al registrar"),"warning"));case 11:return a.a(2)}},a,null,[[3,5],[1,8,9,10]])})));case 3:return a.a(2)}},a)}))()},submit:function(){this.insertCategoria()},getCategoriaData:function(){var e=this;return V()(k()().m(function a(){var o,r;return k()().w(function(a){while(1)switch(a.n){case 0:if(e.form.ID_PERFIL!==ue["default"].PERFIL_ALUMNO){a.n=2;break}return o=[],e.storeCategoriaAnio.forEach(function(a){a.ID_CATEGORIA_ANO===e.ID_CATEGORIA_ANO&&o.push(a)}),0!==o.length&&(r=o[0],e.parametrosAlumnos.INSTRUCOD=r.INSTRUCOD,e.parametrosAlumnos.GRADOCOD=r.GRADOCOD,e.parametrosAlumnos.SECCIONCOD=r.SECCIONCOD,e.infoCaregoria.ANIO=r.ANIO,e.infoCaregoria.INSTRUDES=r.INSTRUDES,e.infoCaregoria.GRADODES=r.GRADODES,e.infoCaregoria.SECCIONDES=r.SECCIONDES,e.infoCaregoria.MONTO=r.MONTO.toFixed(2),e.infoCaregoria.DESCUENTO=r.DESCUENTO.toFixed(2),e.infoCaregoria.MONEDA=r.MONEDA),e.form.MESINI="03",e.form.MESFIN="12",e.columnDefsModal=[{headerName:"Código",field:"CODIGO",width:100},{headerName:"Apellidos y Nombres",field:"NOMBRE",width:250},{headerName:"Id Persona",field:"ID_PERSONA",hide:!0},{headerName:"NGS",field:"NGS",width:50}],a.n=1,e.getAlumnos();case 1:e.rowDataModal=a.v,a.n=4;break;case 2:return e.columnDefs=[{headerName:"Código",field:"ID_PERSONA"},{headerName:"Apellidos y Nombres",field:"NOMBRE",width:250}],a.n=3,e.getPerPerfil();case 3:e.rowDataModal=a.v;case 4:e.rowDataInitial=L()(e.rowDataModal),e.searchName();case 5:return a.a(2)}},a)}))()},getPerPerfil:function(e){var a=this;return V()(k()().m(function e(){return k()().w(function(e){while(1)switch(e.n){case 0:return a.persona=[],a.selectPersona="",e.a(2,y.$http.get("api/personaController/getPersonaPerfil",{params:{params:{id_perfil:a.form.ID_PERFIL}}}))}},e)}))()},getAlumnos:function(){var e=this;return V()(k()().m(function a(){var o;return k()().w(function(a){while(1)switch(a.n){case 0:if(!e.ID_CATEGORIA_ANO){a.n=1;break}return o={ID_CATEGORIA_ANO:e.ID_CATEGORIA_ANO,GRADOCOD:"T"===e.parametrosAlumnos.GRADOCOD?"%":e.parametrosAlumnos.GRADOCOD,SECCIONCOD:"T"===e.parametrosAlumnos.SECCIONCOD?"%":e.parametrosAlumnos.SECCIONCOD,INSTRUCOD:"T"===e.parametrosAlumnos.INSTRUCOD?"%":e.parametrosAlumnos.INSTRUCOD,ALUMNO:e.alumnoSearchModal+"%",valAlumCatExists:e.valAlumCatExists},a.a(2,y.$http.get("api/CategoriaCobroController/getAlumnos",{params:{parametros:o}}));case 1:return a.a(2,[])}},a)}))()},getPerfiles:function(){return V()(k()().m(function e(){return k()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,ue["default"].API_PERFILES())}},e)}))()},getCatAnio:function(){var e=this;return V()(k()().m(function a(){var o,r;return k()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,y.$http.get("api/CategoriaCobroController/getCategoriaAnio",{params:{params:{response:"list",ano:(0,le["default"])().ano}}});case 1:o=a.v,e.storeCategoriaAnio=o,r=[],e.catAnioFilter.push({label:"Todos",value:""}),o.map(function(a){r.includes(a.ID_CATEGORIA_ANO)||(e.catAnioFilter.push({value:a.ID_CATEGORIA_ANO,label:a.CATEGORIA_ANIO}),e.catAnio.push({value:a.ID_CATEGORIA_ANO,label:a.CATEGORIA_ANIO}),e.indexs.push(a),r.push(a.CATEGORIA_ANIO))});case 2:return a.a(2)}},a)}))()}},beforeMount:function(){var e=this;return V()(k()().m(function a(){return k()().w(function(a){while(1)switch(a.n){case 0:e.crearBotones(),e.getPerfiles(),e.getMonth(),e.getCatAnio(),e.getAnios();case 1:return a.a(2)}},a)}))()}},me=o(12807);const Ae=(0,me.A)(de,[["render",M]]);var fe=Ae}}]);