"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[26114],{26114:function(n,e,o){o.r(e),o.d(e,{default:function(){return y}});var t=o(8445),a=o.n(t),i=o(61758),l={class:"row q-col-gutter-sm"},r={class:"col-xs-12"},u={class:"row q-pa-sm"},c={class:"col-12 q-pa-sm"},s={class:"col-12 q-pa-sm"},d={class:"col-12 q-pa-sm"};function m(n,e){var o=this,t=(0,i.g2)("q-spinner-oval"),m=(0,i.g2)("q-inner-loading"),f=(0,i.g2)("sie-table"),p=(0,i.g2)("q-card-section"),A=(0,i.g2)("q-card"),g=(0,i.g2)("q-tooltip"),b=(0,i.g2)("q-fab-action"),h=(0,i.g2)("q-fab"),v=(0,i.g2)("q-page-sticky"),w=(0,i.g2)("q-input"),E=(0,i.g2)("q-field"),k=(0,i.g2)("q-select"),N=(0,i.g2)("sie-modal"),S=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(S,null,{default:(0,i.k6)(function(){return[(0,i.bF)(A,null,{default:(0,i.k6)(function(){return[(0,i.Q3)('header-btn(name="Definición de  año vacacional" :buttons="buttons")'),(0,i.bF)(p,null,{default:(0,i.k6)(function(){return[(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.bF)(t,{size:"50px",color:"primary"})]}),_:1}),(0,i.Lk)("div",l,[(0,i.Q3)('.col-xs-12.col-sm-6.col-md-4.col-xl-3q-select(v-model="tipoAlumno" :options="tipoAlumnos" label="Alumnos")'),(0,i.Lk)("div",r,[(0,i.bF)(f,{"save-cells":"",selection:"single",context:o,css:"height:calc(100vh - 140px)",search:"Buscar Alumno",columns:n.columns,onRowSelected:n.rowSelected,data:n.rows,config:n.config},null,8,["columns","onRowSelected","data","config"])])])]}),_:1})]}),_:1}),(0,i.bF)(v,{position:"bottom-right",offset:[20,20]},{default:(0,i.k6)(function(){return[(0,i.bF)(h,{color:"secondary",icon:"more_vert",direction:"up"},{default:(0,i.k6)(function(){return[(0,i.bF)(b,{color:"secondary",icon:"plus",onClick:n.nuevo},{default:(0,i.k6)(function(){return[(0,i.bF)(g,null,{default:(0,i.k6)(function(){return a()(e[4]||(e[4]=[(0,i.eW)("Nuevo",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})]}),_:1}),(0,i.bF)(N,{class:"modal-adicional",modelValue:n.modalAgregar,"onUpdate:modelValue":e[3]||(e[3]=function(e){return n.modalAgregar=e}),header:!0,title:"Fechas Adicionales",onSubmit:n.grabar},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",u,[(0,i.Q3)('.col-12q-checkbox(v-if="eventName" class="q-if-outlined no-bottom m-checkbox" v-model="adicional.tutoria" :label="$t(\'tutoria\')")'),(0,i.Lk)("div",c,[(0,i.bF)(E,{count:60},{default:(0,i.k6)(function(){return[(0,i.bF)(w,{class:"q-if-outlined no-bottom",type:"text",modelValue:n.rowAno.ANO,"onUpdate:modelValue":e[0]||(e[0]=function(e){return n.rowAno.ANO=e}),"float-label":"Año vacacional",onKeypress:n.soloNumber},null,8,["modelValue","onKeypress"])]}),_:1})]),(0,i.Lk)("div",s,[(0,i.bF)(E,null,{default:(0,i.k6)(function(){return[(0,i.bF)(w,{class:"q-if-outlined no-bottom",type:"text",modelValue:n.rowAno.DES,"onUpdate:modelValue":e[1]||(e[1]=function(e){return n.rowAno.DES=e}),"float-label":"Descripcion"},null,8,["modelValue"])]}),_:1})]),(0,i.Lk)("div",d,[(0,i.bF)(k,{modelValue:n.rowAno.VIGENTE,"onUpdate:modelValue":e[2]||(e[2]=function(e){return n.rowAno.VIGENTE=e}),options:n.sino,label:"Vigente"},null,8,["modelValue","options"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var f=o(76080),p=o.n(f),A=o(45254),g=o.n(A),b=(o(71225),o(50310),o(5962),o(83190),o(52776),o(84433),{data:function(){var n=this;return{config:{ANO:{component:"input",autoSelect:!0,autoFocus:!0,input:this.actualizarCampo},DES:{component:"input",autoSelect:!0,autoFocus:!0,input:this.actualizarCampo},VIGENTE:{component:"select",options:[{label:"Sí",value:"S"},{label:"No",value:"N"}],autoSelect:!0,autoFocus:!0,input:this.actualizarCampo},DELETE:{component:"button",icon:["delete as eliminar"],tooltip:{ver:"Ver",editar:"Editar",eliminar:"Eliminar"},eliminar:function(e){console.log(e),n.eliminarAnio(e)},permisos:{eliminar:"===3"},flat:!0,dense:!0}},columns:[{name:"ANO",label:"Año",field:"ANO",align:"left"},{label:"Descripción",name:"DES",field:"DES",align:"left"},{name:"VIGENTE",label:"vigente",field:"VIGENTE",align:"left"},{name:"DELETE",label:"Eliminar",field:"DELETE",align:"left"}]}}}),h=o(88865),v=o(95718),w=o(30640),E=o(6123),k=o(16648),N=o(80660),S={getAnios:function(n){return N.$http.get("api/MantenimientoController/getAniovac",{params:{params:{tipo:n,order:{sidx:"ANO",sord:"DESC"}}}})},grabarAnio:function(n){return N.$http.post("api/MantenimientoController/grabarAnio",{data:n})},updateAnioVac:function(n){return N.$http.post("api/MantenimientoController/updateAnioVac",{data:n,ANO:n.ANO})},deleteAnio:function(n){return N.$http.delete("api/MantenimientoController/deleteAnioVac",{params:{ANO:n}})}},V={components:{QFab:E.l6,QFabAction:E.B$,QPageSticky:E._U,QSelect:k.A,QItemSection:h.A,QCardSection:v.A,QInnerLoading:E.SQ,sieModal:w.A,QSpinnerOval:E.VA,QPage:E.Tu,QCard:E.C$,QTooltip:E.nC,QField:E.Om,QInput:E.ie},mixins:[b],data:function(){return{rowAno:{ANO:"",DES:"",VIGENTE:""},sino:[{label:"Si",value:"S"},{label:"No",value:"N"}],modalAgregar:!1,dataAlumno:[],buttons:[{icon:"cogs",label:"Procesar",click:this.procesar}],tipoAlumnos:[{label:"Matriculados",value:"S"},{label:"Todos",value:"T"},{label:"Matriculados y Nuevos",value:"MN"}],tipoAlumno:"S"}},computed:{rows:function(){return this.dataAlumno}},methods:{clear:function(){this.rowAno={VIGENTE:"N"}},actualizarCampo:function(n,e){var o=this;return g()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:console.log("row, name:",n,name),S.updateAnioVac(n).then(function(n){o.getAnios(),o.$notify(n.message,"success"),o.clear()});case 1:return e.a(2)}},e)}))()},nuevo:function(){this.clear(),this.modalAgregar=!0},eliminarAnio:function(n){var e=this;console.log("eliminarAnio:"),S.deleteAnio(n.ANO).then(function(n){e.getAnios(),e.$notify(n.message,"success")})},validarFormulario:function(n,e){var o=this;return g()(p()().m(function e(){var t,a;return p()().w(function(e){while(1)switch(e.n){case 0:if(t=!0,n){e.n=4;break}if(a=/^[0-9]*$/,a.test(o.rowAno.ANO)){e.n=1;break}return o.$notify("Por favor ingresa un año correcto","warning"),e.a(2);case 1:if(!o.rows.filter(function(n){return n.ANO===o.rowAno.ANO}).length){e.n=2;break}return o.$notify("El año ".concat(o.rowAno.ANO," ya existe"),"warning"),e.a(2);case 2:if(!o.rows.filter(function(n){return n.DES===o.rowAno.DES}).length){e.n=3;break}return o.$notify('La descripción "'.concat(o.rowAno.DES,'" ya existe'),"warning"),e.a(2);case 3:e.n=4;break;case 4:return e.a(2,t)}},e)}))()},grabar:function(){var n=this;this.validarFormulario()&&S.grabarAnio(this.rowAno).then(function(e){n.getAnios(),n.$notify(e.message,"success"),n.modalAgregar=!1})},rowSelected:function(){},getAnios:function(){var n=this;return g()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,S.getAnios("");case 1:n.dataAlumno=e.v;case 2:return e.a(2)}},e)}))()},soloNumber:function(n){var e=n.which?n.which:n.keyCode;(e<48||e>57)&&n.preventDefault()}},created:function(){this.getAnios()}},F=o(12807);const q=(0,F.A)(V,[["render",m]]);var y=q}}]);