"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[99704],{99704:function(e,a,n){n.r(a),n.d(a,{default:function(){return O}});var t=n(61758),o={class:"q-ma-xs column"},i={class:"q-gutter-sm"},r={class:"row col q-mt-xs"},l={class:"column col q-ml-xs"},s={key:0,class:"q-card"},c={key:1,class:"q-card"},u={class:"q-pa-md"},d={class:"q-gutter-md"},f={class:"row q-col-gutter-sm"},m={class:"row q-col-gutter-sm"};function p(e,a){var n=this,p=(0,t.g2)("header-btn"),g=(0,t.g2)("q-input"),h=(0,t.g2)("sie-modal"),v=(0,t.g2)("sie-table"),S=(0,t.g2)("q-toggle"),b=(0,t.g2)("q-toolbar"),E=(0,t.g2)("sie-editor"),C=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(C,{class:"intranet--horario q-pa-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(p,{name:"Configuracion de Libro de Reclamaciones",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(h,{modelValue:e.modalAdd,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.modalAdd=a}),title:"Nuevo registro en Banco de datos",onSubmit:e.saveSecudes},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.Lk)("div",i,[(0,t.bF)(g,{modelValue:e.dataAdd.SECUCOD,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.dataAdd.SECUCOD=a}),disable:"",label:"Código"},null,8,["modelValue"]),(0,t.bF)(g,{modelValue:e.dataAdd.SECUDES,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.dataAdd.SECUDES=a}),label:"Detalle",rules:[function(e){return!!e||"Este campo es obligatorio"}],maxlength:"200"},null,8,["modelValue","rules"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.Lk)("div",r,[(0,t.bF)(v,{class:"col-4 q-card",columns:e.columnsPrincipal,data:e.principales,search:"Buscar",onRowSelected:e.click,config:e.configPrincipal,css:"height: calc(100vh - 105px)","hide-bottom":!0,context:n},null,8,["columns","data","onRowSelected","config"]),(0,t.Lk)("div",l,[e.itemSelected?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[e.isEspecial?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(b,{class:"row justify-between"},{default:(0,t.k6)(function(){return[a[6]||(a[6]=(0,t.Lk)("div",{class:"text-bold"},"Configuracion de Notificación/Aviso",-1)),(0,t.bF)(S,{modelValue:e.infoAviso.ACTIVO,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.infoAviso.ACTIVO=a}),label:"Activo","true-value":1,"false-value":0,color:"secondary"},null,8,["modelValue"])]}),_:1}),(0,t.Lk)("div",u,[(0,t.Lk)("div",d,[(0,t.Lk)("div",f,[(0,t.bF)(g,{class:"col",modelValue:e.infoAviso.TITULO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.infoAviso.TITULO=a}),label:"Título del aviso",rules:[function(e){return!!e||"Este campo es obligatorio"}],maxlength:"100"},null,8,["modelValue","rules"])]),(0,t.Lk)("div",m,[(0,t.bF)(E,{modelValue:e.infoAviso.MENSAJE,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.infoAviso.MENSAJE=a}),label:"Mensaje"},null,8,["modelValue"])])])])])):((0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(v,{columns:e.columnsDetalle,data:e.secundarios,search:"Buscar",css:"height: calc(100vh - 125px)","hide-bottom":!0,context:n,config:e.configSecundario,"show-refresh":!0,onRefresh:e.getSecundarios},null,8,["columns","data","config","onRefresh"])]))],64)):(0,t.Q3)("v-if",!0)])])]}),_:1})}var g=n(8445),h=n.n(g),v=n(76080),S=n.n(v),b=n(45254),E=n.n(b),C=(n(52133),n(10239),n(50310),n(6724),n(83190),n(44264),n(2369),n(6123)),A=n(33777),w=n(30640),k=n(9736),U=n(16648),D=n(57668),T=n(6083),I={components:{SieTable:A.A,sieModal:w.A,QInput:k.A,QSelect:U.A,sieInfo:D["default"],sieEditor:T.A,QPage:C.Tu,QToolbar:C.ZV,QToggle:C.c5},data:function(){return{principales:[],secundarios:[],isEspecial:!1,prinSelect:null,modalAdd:!1,valSecundario:null,acceso:(0,D["default"])().ruta.nivel>2,infoAviso:{},areas:[],itemSelected:!1,dataAdd:{PRINCOD:null,SECUCOD:null,SECUDES:null,SECUEQU:null},columnsPrincipal:[{name:"PRINDES",label:"Tipo",align:"left",field:"PRINDES"}],columnsDetalle:[{name:"SECUCOD",label:"Código",align:"left",field:"SECUCOD"},{name:"SECUDES",label:"Detalle",align:"left",field:"SECUDES"}],showSubAreas:!1,areaSelect:null,configPrincipal:{},configSecundario:{SECUDES:{component:"input",input:function(e){this.saveEdit(e)}}}}},methods:{click:function(e){var a=this;return E()(S()().m(function n(){var t;return S()().w(function(n){while(1)switch(n.n){case 0:if(a.prinSelect=e.PRINCOD,a.isEspecial=!0===e.ESPECIAL,a.itemSelected=!0,e.ESPECIAL){n.n=1;break}a.getSecundarios(),n.n=3;break;case 1:return n.n=2,a.$http.get("api/libroReclamacionesController/getLibroReclamaciones");case 2:t=n.v,t&&t.length>0?a.infoAviso=t[0]:a.infoAviso={ACTIVO:1,TITULO:"",CUERPO:""};case 3:return n.a(2)}},n)}))()},saveAviso:function(){var e=this;return E()(S()().m(function a(){var n,t,o;return S()().w(function(a){while(1)switch(a.p=a.n){case 0:return console.log(e.infoAviso),a.n=1,e.$confirmar("¿Está seguro de guardar su información?");case 1:if(n=a.v,!n){a.n=5;break}return t=e.infoAviso,a.p=2,a.n=3,e.$http.post("api/libroReclamacionesController/saveAviso",{data:t});case 3:e.$notify("Información guardada correctamente"),a.n=5;break;case 4:a.p=4,o=a.v,e.$notify(o.message,"error");case 5:return a.a(2)}},a,null,[[2,4]])}))()},saveEdit:function(e){var a=this;return E()(S()().m(function n(){var t,o,i;return S()().w(function(n){while(1)switch(n.p=n.n){case 0:return t=e,n.p=1,n.n=2,a.$http.post("api/TablaSeController/updateTablaSe",{params:t});case 2:o=n.v,a.getSecundarios(),a.$notify(o.message),n.n=4;break;case 3:n.p=3,i=n.v,a.$notify(i.message,"error");case 4:console.log(e);case 5:return n.a(2)}},n,null,[[1,3]])}))()},getSecundarios:function(){var e=this;return E()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return e.secundarios=[],a.n=1,e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:e.prinSelect}}}});case 1:e.secundarios=a.v;case 2:return a.a(2)}},a)}))()},getAreas:function(){var e=this;return E()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I01"}}}});case 1:e.areas=a.v;case 2:return a.a(2)}},a)}))()},openModalAdd:function(){var e="0001";if(this.secundarios.length>0){var a=Math.max.apply(Math,h()(this.secundarios.map(function(e){return parseInt(e.SECUCOD,10)})));e=(a+1).toString().padStart(4,"0")}this.dataAdd={PRINCOD:this.prinSelect,SECUCOD:e,SECUDES:null,SECUEQU:null},this.modalAdd=!0},saveSecudes:function(){var e=this;return E()(S()().m(function a(){var n,t,o,i;return S()().w(function(a){while(1)switch(a.p=a.n){case 0:if(!(e.dataAdd.SECUDES&&e.dataAdd.SECUDES.length>0)){a.n=5;break}return a.n=1,e.$confirmar("¿Está seguro de guardar su información?");case 1:if(n=a.v,!n){a.n=5;break}return t=e.dataAdd,t.id=e.dataAdd.SECUCOD,a.p=2,a.n=3,e.$http.post("api/TablaSeController/addTablaSe",{data:t});case 3:o=a.v,e.$notify(o.message),e.getSecundarios(),e.getAreas(),e.modalAdd=!1,a.n=5;break;case 4:a.p=4,i=a.v,e.$notify(i.message,"error");case 5:return a.a(2)}},a,null,[[2,4]])}))()}},computed:{buttons:function(){var e=[];return this.prinSelect&&("xxx"!==this.prinSelect?e.push({label:"Agregar",icon:"add",click:this.openModalAdd}):e.push({label:"Grabar",icon:"save",click:this.saveAviso})),e}},watch:{prinSelect:function(e){this.configPrincipal={PRINDES:{renderHtml:function(a,n,t,o){a.PRINCOD===e?o["$$background"]="secondary":o["$$background"]="white"}}}}},created:function(){var e=this;return E()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return e.getAreas(),a.n=1,e.$http.get("api/HyoTablapr/obtRegistros",{params:{info:{princod:["R01","R02"]}}});case 1:e.principales=a.v,e.principales.unshift({PRINDES:"Aviso",PRINCOD:"xxx",ESPECIAL:!0});case 2:return a.a(2)}},a)}))()}},V=n(12807);const R=(0,V.A)(I,[["render",p]]);var O=R}}]);