"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[65502],{65502:function(e,t,a){a.r(t),a.d(t,{default:function(){return xt}});var o=a(8445),i=a.n(o),l=(a(71225),a(50310),a(5962),a(83190),a(61758)),n=a(58790),r={class:"col q-my-sm text-right"},s={class:"row bg-white q-px-sm"},u={key:0,class:"q-my-sm"},c={class:"row border-bottom bg-white q-px-sm q-pb-sm"},d={class:"reservas-disponibles relative-position"},f={class:"col overflow-auto"},b={key:0,class:"q-pa-md"},m=["innerHTML"],p={key:1,class:"row"},g={class:"col-12"},h={class:"q-body-3 text-bold q-pa-md"},v={class:"row q-px-md"},k={key:2,class:"row"},D={class:"col-12"},I={class:"q-body-3 text-bold q-pa-md"},C={class:"bg-white shadow-1 full-height"},F={key:3,class:"row"},E={class:"col-12"},L={class:"q-body-3 text-bold q-pa-md"},q={class:"bg-white shadow-1 full-height"},y={key:5,class:"row q-px-md"},_={class:"column col items-center justify-center",style:{height:"80vh"}},A={class:"row q-px-md"},S={class:"col-12"},M={class:"col-12"},x={class:"col-8"},O={class:"col-4"},T={class:"col-12"},R={class:"col-8"},N={class:"col-4"},P={class:"col-12"},B={class:"col-6"},w={key:1,class:"col-12"},U={key:2,class:"col-6"},V={key:3,class:"col-6"},Q={key:4,class:"col-12"},W={class:"row"},X={class:"col text-center"},$={class:"q-gutter-sm"},j={key:0},Y={key:1,class:"column col items-center justify-center"},H={class:"row col q-pa-sm"},G={class:"col-md-12"};function z(e,t){var a=this,o=(0,l.g2)("q-btn"),z=(0,l.g2)("q-chip"),K=(0,l.g2)("q-tooltip"),Z=(0,l.g2)("sie-estudiantes"),J=(0,l.g2)("q-search"),ee=(0,l.g2)("sie-select"),te=(0,l.g2)("q-icon"),ae=(0,l.g2)("q-card-title"),oe=(0,l.g2)("q-card-media"),ie=(0,l.g2)("q-card-main"),le=(0,l.g2)("q-card"),ne=(0,l.g2)("q-spinner-oval"),re=(0,l.g2)("q-inner-loading"),se=(0,l.g2)("q-item-tile"),ue=(0,l.g2)("slide"),ce=(0,l.g2)("carousel"),de=(0,l.g2)("q-spinner-dots"),fe=(0,l.g2)("bm-card"),be=(0,l.g2)("q-infinite-scroll"),me=(0,l.g2)("sie-vacio"),pe=(0,l.g2)("q-item"),ge=(0,l.g2)("q-list"),he=(0,l.g2)("q-input"),ve=(0,l.g2)("bm-modal-detalle"),ke=(0,l.g2)("q-toolbar"),De=(0,l.g2)("sie-pdf"),Ie=(0,l.g2)("sie-modal"),Ce=(0,l.g2)("q-avatar"),Fe=(0,l.g2)("q-item-section"),Ee=(0,l.g2)("q-item-label"),Le=(0,l.g2)("q-modal"),qe=(0,l.g2)("q-toolbar-title"),ye=(0,l.g2)("q-page"),_e=(0,l.gN)("close-overlay"),Ae=(0,l.gN)("lazy"),Se=(0,l.gN)("ripple");return(0,l.uX)(),(0,l.Wv)(ye,{class:"catalogoBiblioteca"},{default:(0,l.k6)(function(){return[e.mostrarEnlaceExterno?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,n.C4)(["row bg-white q-pt-sm q-pb-none",e.isLess?"q-px-none":"q-px-xl"])},[(0,l.Lk)("div",r,[(0,l.bF)(o,{label:"Biblioteca Virtual",icon:"external_link",color:"primary",loading:e.loadingEnlaceExterno,disable:e.loadingEnlaceExterno,onClick:e.irBliotecaVitual},null,8,["loading","disable","onClick"])])],2)):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",{class:(0,n.C4)(["row bg-white q-pt-sm q-pb-none",e.isLess?"q-px-none":"q-px-xl"])},[(0,l.Lk)("div",{class:(0,n.C4)(["col-12",e.isLess?"text-center":"text-right"])},[e.sanciones?((0,l.uX)(),(0,l.Wv)(z,{key:0,class:(0,n.C4)(e.isLess?"full-width":""),square:e.isLess,small:"",color:"red","text-color":"white",icon:"info"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.$t("biblioteca.sancionado")),1)]}),_:1},8,["class","square"])):(0,l.Q3)("v-if",!0)],2)],2),(0,l.Lk)("div",s,[e.isLess?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",u,[e.flagbusqueda&&a.muestraInicio?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(o,{key:0,flat:"",round:"",dense:"",icon:"arrow_back",onClick:t[0]||(t[0]=function(t){return e.atras()})},{default:(0,l.k6)(function(){return[(0,l.bF)(K,null,{default:(0,l.k6)(function(){return i()(t[22]||(t[22]=[(0,l.eW)("Atrás",-1)]))}),_:1})]}),_:1})),[[_e]]):(0,l.Q3)("v-if",!0)])),e.sieInfo.esFamilia||e.sieInfo.esEstudiante?((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,n.C4)(e.isLess?"col-12":"col")},[(0,l.bF)(Z,{modelValue:e.solcod,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.solcod=t}),onSelected:e.cambiarAlumno},null,8,["modelValue","onSelected"])],2)):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",{class:(0,n.C4)(e.isLess?"col-12":"col")},[(0,l.bF)(J,{class:"q-if-outlined",modelValue:e.buscarCatalogo,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.buscarCatalogo=t}),onKeyup:e.filtrar},null,8,["modelValue","onKeyup"])],2),(0,l.Lk)("div",{class:(0,n.C4)(e.isLess?"col-12":"col")},[(0,l.bF)(ee,{type:"outlined",modelValue:e.buscarFormato,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.buscarFormato=t}),options:e.formatos,label:"DESC",val:"ID",placeholder:"biblioteca.formato",onSelected:e.filtroFormato},null,8,["modelValue","options","onSelected"])],2),(0,l.Lk)("div",{class:(0,n.C4)(e.isLess?"col-11":"col")},[(0,l.bF)(ee,{type:"outlined",modelValue:e.buscarBiblioteca,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.buscarBiblioteca=t}),options:e.bibliotecas,label:"DESC",val:"ID",placeholder:"biblioteca.biblioteca",onSelected:e.filtroBiblioteca},null,8,["modelValue","options","onSelected"])],2),(0,l.Lk)("div",{class:(0,n.C4)(e.isLess?"col-1":"q-my-sm")},[(0,l.bF)(o,{flat:"",round:"",dense:"",icon:"filter_search",disable:e.loading,size:"md",onClick:e.abrirFiltros},{default:(0,l.k6)(function(){return[(0,l.bF)(K,null,{default:(0,l.k6)(function(){return i()(t[23]||(t[23]=[(0,l.eW)("Más filtros",-1)]))}),_:1})]}),_:1},8,["disable","onClick"])],2)]),(0,l.Lk)("div",c,[(0,l.Lk)("div",{class:(0,n.C4)(["q-caption text-bold",e.isLess?"col-7":"col-3 q-px-md"])},[(0,l.Lk)("div",d,[(0,l.eW)((0,n.v_)(e.$t("intranet.reservalibros.reservasDisponibles")),1),(0,l.bF)(z,{floating:"",pointing:"left",color:"primary"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.NdiasMaximoPrestamo.NUMDIPONIBLES),1)]}),_:1})])],2),e.books.length>0&&e.flagbusqueda?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,n.C4)(["q-caption text-right",e.isLess?"col-5 q-px-sm":"col-9 q-px-xl"])},[(0,l.bF)(te,{class:"q-px-xs cursor-pointer",name:"print",size:"20px",onClick:e.verReporte},{default:(0,l.k6)(function(){return[(0,l.bF)(K,null,{default:(0,l.k6)(function(){return i()(t[24]||(t[24]=[(0,l.eW)("Imprimir",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,l.bF)(te,{class:"q-px-xs cursor-pointer",name:"email",size:"20px",onClick:e.enviarMensajeria},{default:(0,l.k6)(function(){return[(0,l.bF)(K,null,{default:(0,l.k6)(function(){return i()(t[25]||(t[25]=[(0,l.eW)("Enviar Correo",-1)]))}),_:1})]}),_:1},8,["onClick"]),!e.noDescarga&&e.permiso?((0,l.uX)(),(0,l.Wv)(te,{key:0,class:"q-px-xs cursor-pointer",name:"file_pdf",size:"20px",onClick:e.reporteVisualizaciones},{default:(0,l.k6)(function(){return[(0,l.bF)(K,null,{default:(0,l.k6)(function(){return i()(t[26]||(t[26]=[(0,l.eW)("Reporte de visualizaciones",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,l.Q3)("v-if",!0)],2)):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("div",f,[e.mensajeCatalogo?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.Lk)("div",{innerHTML:e.mensajeCatalogo},null,8,m)])):(0,l.Q3)("v-if",!0),e.categorias.length>0&&e.flagInicio?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",g,[(0,l.Lk)("div",h,(0,n.v_)(e.$t("intranet.reservalibros.tituloCategorias")),1)]),(0,l.Lk)("div",v,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.categorias,function(t){return(0,l.uX)(),(0,l.CE)("div",{key:t.ID,class:"col-xs-4 col-sm-2 col-md-2 col-xl-2 q-pa-sm q-pl-none"},[(0,l.bF)(le,{class:"categorias",style:{"min-height":"10px"}},{default:(0,l.k6)(function(){return[(0,l.bF)(ie,null,{default:(0,l.k6)(function(){return[(0,l.bF)(oe,{class:"cursor-pointer",onClick:function(a){return e.filtro(t.NOMBRE,e.campoCategoria)}},{default:(0,l.k6)(function(){return[(0,l.bo)((0,l.Lk)("img",null,null,512),[[Ae,{src:e.generarUrlImagenCat(t),error:"statics/img/bmcategoriadefault.png"}]]),(0,l.bF)(ae,{class:"q-pa-none q-body-1 text-bold text-center",onClick:function(a){return e.filtro(t.NOMBRE,e.campoCategoria)}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.NOMBRE),1)]}),_:2},1032,["onClick"])]}),_:2},1032,["onClick"])]}),_:2},1024)]}),_:2},1024)])}),128))])])):(0,l.Q3)("v-if",!0),e.recomendados.length>0&&e.flagInicio?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)(re,{visible:e.loading},{default:(0,l.k6)(function(){return[(0,l.bF)(ne,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,l.Lk)("div",D,[(0,l.Lk)("div",I,[(0,l.eW)((0,n.v_)(e.$t("intranet.reservalibros.tituloRecomendados")),1),(0,l.bF)(ce,{class:"q-pa-sm",perPageCustom:[[360,2],[480,3],[768,5],[1024,6],[1360,7]],paginationColor:"#e82b5a"},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.recomendados,function(t,a){return(0,l.uX)(),(0,l.Wv)(ue,{key:t.FICHACOD,class:"recomendados q-px-sm"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",C,[(0,l.bF)(oe,{class:"cursor-pointer",onClick:function(o){return e.loadModal(t,a)}},{default:(0,l.k6)(function(){return[(0,l.bo)((0,l.Lk)("img",null,null,512),[[Ae,{src:e.generarUrlImagen(t),error:"statics/img/librodefault.png"}]])]}),_:2},1032,["onClick"]),(0,l.bF)(ie,null,{default:(0,l.k6)(function(){return[(0,l.bF)(se,{class:"q-caption text-bold",label:"",lines:"2",onClick:function(o){return e.loadModal(t,a)}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.TITULO),1)]}),_:2},1032,["onClick"]),(0,l.bF)(se,{class:"q-caption",sublabel:"",onClick:function(a){return e.filtrodetalle(t.AUTOR,"100a")}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.AUTOR),1)]}),_:2},1032,["onClick"])]}),_:2},1024)])]}),_:2},1024)}),128))]}),_:1})])])])):(0,l.Q3)("v-if",!0),e.digitales.length>0&&e.flagInicio?((0,l.uX)(),(0,l.CE)("div",F,[(0,l.bF)(re,{visible:e.loading},{default:(0,l.k6)(function(){return[(0,l.bF)(ne,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,l.Lk)("div",E,[(0,l.Lk)("div",L,[(0,l.eW)((0,n.v_)(e.$t("intranet.reservalibros.materialDigital")),1),(0,l.bF)(ce,{class:"q-pa-sm",perPageCustom:[[360,2],[480,3],[768,5],[1024,6],[1360,7]],paginationColor:"#e82b5a"},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.digitales,function(t,a){return(0,l.uX)(),(0,l.Wv)(ue,{key:t.ID_MATERIAL,class:"digitales q-px-sm"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",q,[(0,l.bF)(oe,{class:"cursor-pointer",onClick:function(a){return e.loadMaterialDigital(t)}},{default:(0,l.k6)(function(){return[(0,l.bo)((0,l.Lk)("img",null,null,512),[[Ae,{src:e.generarUrlImagen(t),error:"statics/img/librodefault.png"}]])]}),_:2},1032,["onClick"]),(0,l.bF)(ie,null,{default:(0,l.k6)(function(){return[(0,l.bF)(se,{class:"cursor-pointer q-caption text-bold",label:"",lines:"2",onClick:function(a){return e.loadMaterialDigital(t)}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.TITULO),1)]}),_:2},1032,["onClick"]),(0,l.bF)(se,{class:"q-caption",sublabel:"",onClick:function(a){return e.filtrodetalle(t.AUTOR,"100a")}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.AUTOR),1)]}),_:2},1032,["onClick"])]}),_:2},1024)])]}),_:2},1024)}),128))]}),_:1})])])])):(0,l.Q3)("v-if",!0),e.books.length>0&&e.flagbusqueda?((0,l.uX)(),(0,l.Wv)(be,{key:4,handler:e.cargarLibros,ref:"scrollLibros"},{default:(0,l.k6)(function(){return[(0,l.bF)(fe,{libros:e.books,flag:e.flagbusqueda,NdiasMaximoPrestamo:e.NdiasMaximoPrestamo,sanciones:e.sanciones,sieInfo:e.sieInfo,alumno:e.alumno,onFiltro:e.filtro,onCerrarModalDetalle:e.cerrarModalDetalle,onLoadModal:e.loadModal,onDecrementarReservas:e.decrementarReservas,onLoadMaterialDigital:e.loadMaterialDigital,ref:"bmcard","no-descarga":e.noDescarga},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",{class:(0,n.C4)(e.classCarga)},[(0,l.bF)(de,{size:60})],2)]}),_:1},8,["libros","flag","NdiasMaximoPrestamo","sanciones","sieInfo","alumno","onFiltro","onCerrarModalDetalle","onLoadModal","onDecrementarReservas","onLoadMaterialDigital","no-descarga"])]}),_:1},8,["handler"])):e.flagbusqueda?((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",_,[(0,l.bF)(me,{class:"col"})])])):(0,l.Q3)("v-if",!0)]),(0,l.bF)(Le,{modelValue:e.openFiltros,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.openFiltros=t}),position:"right","content-classes":"full-height","content-css":{"max-height":"100vh","max-width":"40vw"}},{default:(0,l.k6)(function(){return[(0,l.bF)(ge,{class:"q-pa-none",separator:"","no-border":"",highlight:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(pe,{class:"q-py-none column items-end justify-end"},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{size:"md",rounded:"",dense:"",flat:"",round:"",icon:"close",onClick:t[5]||(t[5]=function(t){return e.openFiltros=!1})})]}),_:1})]}),_:1}),(0,l.Lk)("div",A,[(0,l.Lk)("div",S,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.tipoBusqueda,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.filter.tipoBusqueda=t}),options:e.tiposBusqueda,onSelected:e.resetFilter,label:"DESC",val:"ID",placeholder:"biblioteca.tipoBusqueda"},null,8,["modelValue","options","onSelected"])]),[1].indexOf(e.filter.tipoBusqueda)>=0?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",M,[(0,l.bF)(he,{class:"q-if-outlined q-mb-none",modelValue:e.filter.text1,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.filter.text1=t}),"float-label":"Encontrar"},null,8,["modelValue"])]),(0,l.Lk)("div",x,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.campo1,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.filter.campo1=t}),options:e.campos,label:"DESC",val:"ID",placeholder:"biblioteca.campos"},null,8,["modelValue","options"])]),(0,l.Lk)("div",O,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.operador1,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.filter.operador1=t}),options:e.operadores,label:"DESC",val:"ID",placeholder:"Oper."},null,8,["modelValue","options"])]),(0,l.Lk)("div",T,[(0,l.bF)(he,{class:"q-if-outlined",modelValue:e.filter.text2,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.filter.text2=t}),"float-label":e.$t("biblioteca.encontrar")},null,8,["modelValue","float-label"])]),(0,l.Lk)("div",R,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.campo2,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.filter.campo2=t}),options:e.campos,label:"DESC",val:"ID",placeholder:"biblioteca.campos"},null,8,["modelValue","options"])]),(0,l.Lk)("div",N,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.operador2,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.filter.operador2=t}),options:e.operadores,label:"DESC",val:"ID",placeholder:"Oper."},null,8,["modelValue","options"])]),(0,l.Lk)("div",P,[(0,l.bF)(he,{class:"q-if-outlined",modelValue:e.filter.text3,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.filter.text3=t}),"float-label":"Encontrar"},null,8,["modelValue"])]),(0,l.Lk)("div",B,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.campo3,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.filter.campo3=t}),options:e.campos,label:"DESC",val:"ID",placeholder:"biblioteca.campos"},null,8,["modelValue","options"])])],64)):(0,l.Q3)("v-if",!0),[0,2,3,4].indexOf(e.filter.tipoBusqueda)>=0?((0,l.uX)(),(0,l.CE)("div",w,[(0,l.bF)(he,{class:"q-if-outlined",modelValue:e.filter.text,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.filter.text=t}),"float-label":"Encontrar"},null,8,["modelValue"])])):(0,l.Q3)("v-if",!0),[0].indexOf(e.filter.tipoBusqueda)>=0?((0,l.uX)(),(0,l.CE)("div",U,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.campo,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.filter.campo=t}),options:e.campos,label:"DESC",val:"ID",placeholder:"biblioteca.campos"},null,8,["modelValue","options"])])):(0,l.Q3)("v-if",!0),[0,1].indexOf(e.filter.tipoBusqueda)>=0?((0,l.uX)(),(0,l.CE)("div",V,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.tipoMaterial,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.filter.tipoMaterial=t}),options:e.materiales,label:"DESC",val:"ID",placeholder:"biblioteca.tipoMaterial"},null,8,["modelValue","options"])])):(0,l.Q3)("v-if",!0),[0,1,5].indexOf(e.filter.tipoBusqueda)>=0?((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.bF)(ee,{type:"outlined",modelValue:e.filter.biblioteca,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.filter.biblioteca=t}),options:e.bibliotecas,label:"DESC",val:"ID",placeholder:"biblioteca.biblioteca"},null,8,["modelValue","options"])])):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("div",W,[(0,l.Lk)("div",X,[(0,l.bF)(o,{label:"Buscar",icon:"search",color:"primary",onClick:e.busquedaFiltrada},null,8,["onClick"])])]),e.modalDetalle?((0,l.uX)(),(0,l.Wv)(ve,{key:0,alumno:e.alumno,posicion:e.currentPosicion,disponibles:e.currentDisponibles,reservasDisponibles:e.NdiasMaximoPrestamo.NUMDIPONIBLES,id:e.currentId,sanciones:e.sanciones,reserva:e.currentReserva,sieInfo:e.sieInfo,onCerrarModal:e.cerrarModalDetalle,onDecrementarDisponibles:e.decrementarDisponibles},null,8,["alumno","posicion","disponibles","reservasDisponibles","id","sanciones","reserva","sieInfo","onCerrarModal","onDecrementarDisponibles"])):(0,l.Q3)("v-if",!0),(0,l.bF)(Ie,{class:"modal-material",column:"",modelValue:e.openMaterialDigital,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.openMaterialDigital=t}),title:e.tituloMaterial,header:!0,ok:!1,footer:!!e.urlMaterialDigital&&!e.noDescarga},(0,l.eX)({footerMobile:(0,l.k6)(function(){return[e.urlMaterialDigital&&!e.noDescarga?((0,l.uX)(),(0,l.CE)("div",j,[(0,l.bF)(o,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:e.downloadUrl},null,8,["onClick"])])):(0,l.Q3)("v-if",!0)]}),default:(0,l.k6)(function(){return[e.urlMaterialDigital?((0,l.uX)(),(0,l.Wv)(De,{key:0,class:"col",src:e.urlMaterialDigital,"no-download":""},null,8,["src"])):((0,l.uX)(),(0,l.CE)("div",Y,[(0,l.bF)(me,{class:"col",icon:"phonelink_erase"})]))]}),_:2},[e.urlMaterialDigital&&!e.noDescarga?{name:"footer",fn:(0,l.k6)(function(){return[(0,l.bF)(ke,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",$,[(0,l.bF)(o,{label:"DESCARGAR PDF",color:"primary",onClick:e.downloadUrl},null,8,["onClick"])])]}),_:1})]}),key:"0"}:void 0]),1032,["modelValue","title","footer"]),(0,l.bF)(Ie,{class:"modal-digitales",column:"",modelValue:e.openMaterialesDigitales,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.openMaterialesDigitales=t}),title:e.tituloMateriales,header:!0,ok:!1,footer:!1},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",H,[(0,l.Lk)("div",G,[e.dataMateriales.length>0?((0,l.uX)(),(0,l.Wv)(ge,{key:0,class:"bg-white full-height q-my-sm q-pa-sm",highlight:"",link:"",separator:""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dataMateriales,function(t,a){return(0,l.bo)(((0,l.uX)(),(0,l.Wv)(pe,{key:t.ID_MATERIAL,clickable:"",onClick:function(a){return e.loadMaterialDigital(t)},"active-class":"bg-grey-12 text-grey-8"},{default:(0,l.k6)(function(){return[(0,l.bF)(Fe,{avatar:""},{default:(0,l.k6)(function(){return[(0,l.bF)(Ce,{icon:2===t.TIPO_MATERIAL?"link":"file_pdf",size:"md","text-color":"white",color:"primary"},null,8,["icon"])]}),_:2},1024),(0,l.bF)(Fe,null,{default:(0,l.k6)(function(){return[(0,l.bF)(Ee,{label:"",lines:"2"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.TITULO),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["onClick"])),[[Se]])}),128))]}),_:1})):(0,l.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","title"])]}),_:1},8,["modelValue"]),e.isLess&&e.flagbusqueda?((0,l.uX)(),(0,l.Wv)(ke,{key:1,class:"fixed-top q-toolbar-menu",inverted:""},{default:(0,l.k6)(function(){return[(0,l.bF)(qe),(0,l.bF)(o,{flat:"",round:"",dense:"",icon:"arrow_back",color:"white"})]}),_:1})):(0,l.Q3)("v-if",!0)]}),_:1})}var K=a(76080),Z=a.n(K),J=a(45254),ee=a.n(J),te=(a(12563),a(30683),a(39866),a(515),a(27153),a(62540),a(68017),a(6123)),ae=a(57668),oe=a(30640),ie=a(93616),le=a(80660),ne={getLibros:function(e){return le.$http.get("api/HyoCatalogo/obtenerCatalogo",{params:e})},getRecomendados:function(){return le.$http.get("api/HyoCatalogo/recomendados")},getCategorias:function(e){return le.$http.get("api/HyoCatalogo/categorias")},getDatosInicio:function(e,t,a){return le.$http.get("api/HyoCatalogo/getDatosInicio",{params:{instrucod:e,gradocod:t,alucod:a}})},getDatosAlumno:function(){return le.$http.get("api/HyoCatalogo/getDatosAlumno")},getDetalle:function(e){return le.$http.get("api/HyoCatalogo/getDetalle",{params:{id:e}})},getSanciones:function(e){return le.$http.get("api/HyoCatalogo/getSanciones",{params:{alucod:e}})},NdiasMaximoPrestamo:function(e,t){return le.$http.get("api/HyoCatalogo/NdiasMaximoPrestamo",{params:{alucod:e,usucod:t}})},getFiltrosFormatos:function(){return le.$http.get("api/HyoCatalogo/getFiltrosFormatos")},getInfoWebExternal:function(){return le.$http.get("api/HyoSistemaExterno/biblioteca").then(function(e){var t=e.json;return t}).catch(function(e){return Promise.reject(new Error(e.error.message))})},materialesFicha:function(e){return le.$http.get("api/HyoCatalogo/materialesFicha",{params:{id:e}})}},re=a(84603),se=a(38088),ue=a(982),ce=a(80340),de=a(81288),fe=(a(56285),{class:"bmCard"}),be={key:0,class:"col column"},me={class:"col scroll-y"},pe={class:"img-libro"},ge={class:"col"},he={class:"col"},ve={class:"col"},ke={class:"col"},De={class:"col"},Ie={class:"col"},Ce={class:"col"},Fe={class:"q-caption"},Ee={class:"q-caption"},Le={class:"q-px-sm q-pt-xs inline-block full-width"},qe={class:"disponibles float-left q-caption text-bold vertical-middle q-pt-xs",color:"primary"},ye={class:"q-gutter-sm"},_e={class:"q-pa-md col column"},Ae={class:"col"},Se={class:"row"},Me={class:"col-12"};function xe(e,t){var a=(0,l.g2)("q-item-side"),o=(0,l.g2)("q-item-tile"),r=(0,l.g2)("q-chip"),s=(0,l.g2)("q-icon"),u=(0,l.g2)("q-item-main"),c=(0,l.g2)("q-checkbox"),d=(0,l.g2)("q-item"),f=(0,l.g2)("q-card-separator"),b=(0,l.g2)("q-btn"),m=(0,l.g2)("bm-boton-reservar"),p=(0,l.g2)("q-card"),g=(0,l.g2)("bm-modal-detalle"),h=(0,l.g2)("q-toolbar"),v=(0,l.g2)("q-search"),k=(0,l.g2)("q-select"),D=(0,l.g2)("q-th"),I=(0,l.g2)("q-tr"),C=(0,l.g2)("q-td"),F=(0,l.g2)("q-item-section"),E=(0,l.g2)("q-item-label"),L=(0,l.g2)("q-card-section"),q=(0,l.g2)("q-table"),y=(0,l.g2)("sie-modal"),_=(0,l.gN)("lazy");return(0,l.uX)(),(0,l.CE)("div",fe,[e.libros.length>0&&e.flag?((0,l.uX)(),(0,l.CE)("div",be,[(0,l.Lk)("div",me,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.libros,function(g,h){return(0,l.uX)(),(0,l.Wv)(p,{key:h,class:"lista q-card-mobile q-ma-md-sm"},{default:(0,l.k6)(function(){return[(0,l.bF)(d,{class:"contenedor"},{default:(0,l.k6)(function(){return[(0,l.bF)(a,{class:"cursor-pointer",onClick:function(t){return e.loadModal(g,h)}},{default:(0,l.k6)(function(){return[(0,l.bo)((0,l.Lk)("img",pe,null,512),[[_,{src:e.generarUrlImagen(g),error:"statics/img/librodefault.png"}]])]}),_:2},1032,["onClick"]),(0,l.bF)(u,null,{default:(0,l.k6)(function(){return[(0,l.bF)(o,{class:"text-titulo cursor-pointer",label:"",onClick:function(t){return e.loadModal(g,h)}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(g.TITULO),1)]}),_:2},1032,["onClick"]),g.MOSTRARSUBTITULO&&g.SUBTITULO?((0,l.uX)(),(0,l.Wv)(o,{key:0,class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(o,{class:"text-bold"},{default:(0,l.k6)(function(){return i()(t[8]||(t[8]=[(0,l.eW)("Subtitulo:",-1)]))}),_:1})]),(0,l.Lk)("div",ge,[(0,l.bF)(o,{class:"q-pl-sm"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(g.SUBTITULO),1)]}),_:2},1024)])]}),_:2},1024)):(0,l.Q3)("v-if",!0),g.MOSTRARDEWEY?((0,l.uX)(),(0,l.Wv)(o,{key:1,class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(o,{class:"text-bold"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(g.LABELDEWEY),1)]}),_:2},1024)]),(0,l.Lk)("div",he,[(0,l.bF)(o,{class:"q-pl-sm"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(g.CATALOGO),1)]}),_:2},1024)])]}),_:2},1024)):(0,l.Q3)("v-if",!0),(0,l.bF)(o,{class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(o,{class:"text-bold"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.$t("biblioteca.autor"))+":",1)]}),_:1})]),(0,l.Lk)("div",ve,[(0,l.bF)(o,{class:"q-pl-sm"},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.AUTOR,function(t,a){return(0,l.uX)(),(0,l.Wv)(r,{key:a,class:"q-chip-hover cursor-pointer",dense:"","text-color":"primary",onClick:function(a){return e.filtro(t,"100a")}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t),1)]}),_:2},1032,["onClick"])}),128))]}),_:2},1024)])]}),_:2},1024),g.MOSTRAREDITORIAL&&g.PIE_IMPRENTA?((0,l.uX)(),(0,l.Wv)(o,{key:2,class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(o,{class:"text-bold"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.$t("biblioteca.editorial"))+":",1)]}),_:1})]),(0,l.Lk)("div",ke,[(0,l.bF)(o,{class:"q-pl-sm"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(g.PIE_IMPRENTA),1)]}),_:2},1024)])]}),_:2},1024)):(0,l.Q3)("v-if",!0),(0,l.bF)(o,{class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(o,{class:"text-bold"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.$t("biblioteca.temas"))+":",1)]}),_:1})]),(0,l.Lk)("div",De,[(0,l.bF)(o,{class:"q-pl-sm"},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.MATERIA,function(t,a){return(0,l.uX)(),(0,l.Wv)(r,{key:a,class:"q-chip-hover cursor-pointer",dense:"","text-color":"primary",onClick:function(a){return e.filtro(t,"650a")}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t),1)]}),_:2},1032,["onClick"])}),128))]}),_:2},1024)])]}),_:2},1024),g.MOSTRARNOTA?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(o,{key:3,class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(o,{class:"text-bold"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.$t("biblioteca.descripcionFisica"))+":",1)]}),_:1})]),(0,l.Lk)("div",Ie,[(0,l.bF)(o,{class:"q-pl-sm"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(g.DESCRIPCION_FISICA),1)]}),_:2},1024)])]}),_:2},1024)),g.MOSTRARNOTA&&g.NOTA?((0,l.uX)(),(0,l.Wv)(o,{key:4,class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(o,{class:"text-bold"},{default:(0,l.k6)(function(){return i()(t[9]||(t[9]=[(0,l.eW)("Nota General:",-1)]))}),_:1})]),(0,l.Lk)("div",Ce,[(0,l.bF)(o,{class:"q-pl-sm"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(g.NOTA),1)]}),_:2},1024)])]}),_:2},1024)):(0,l.Q3)("v-if",!0),2!==g.TIPO&&g.CANTDIGITAL&&!e.noDescarga&&e.permiso?((0,l.uX)(),(0,l.Wv)(o,{key:5,class:"row items-center justify-end q-gutter-sm q-pa-sm",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{name:"remove_red_eye",size:"20px"}),(0,l.Lk)("div",Fe,(0,n.v_)(g.LEIDOS),1),(0,l.bF)(s,{name:"file_download",size:"20px"}),(0,l.Lk)("div",Ee,(0,n.v_)(g.DESCARGAS),1)]}),_:2},1024)):(0,l.Q3)("v-if",!0)]}),_:2},1024),(0,l.bF)(a,null,{default:(0,l.k6)(function(){return[(0,l.bF)(c,{class:"absolute-top-right q-ma-sm",modelValue:g.CHECKED,"onUpdate:modelValue":function(e){return g.CHECKED=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1024),(0,l.bF)(f),(0,l.Lk)("div",Le,[(0,l.Lk)("div",qe,(0,n.v_)(g.TEXTODISPONIBLE),1),2!==g.TIPO&&g.CANTDIGITAL?((0,l.uX)(),(0,l.Wv)(b,{key:0,class:"q-mx-xs float-right",color:"primary",size:"sm",label:g.LABELPDF,onClick:function(t){return e.loadMaterialDigital(g)}},{default:(0,l.k6)(function(){return[g.LABELPDF?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(s,{key:0,name:"file_pdf",size:"16px"}))]}),_:2},1032,["label","onClick"])):(0,l.Q3)("v-if",!0),1!==g.TIPO?((0,l.uX)(),(0,l.Wv)(m,{key:1,class:"q-mx-xs float-right",color:"primary",size:"sm",posicion:h,alumno:e.alumno,reservaDisponible:e.reservaDisponible,disable:!e.reservaDisponible||0===g.DISPONIBLES||e.NdiasMaximoPrestamo.NUMDIPONIBLES<=0||!g.RESERVA||e.sanciones||e.noUsuarios,label:e.$t("botones.reserva"),libro:g.FICHACOD,onHabilitarBotones:e.habilitarBotones,onDecrementarDisponibles:e.decrementarDisponibles},null,8,["posicion","alumno","reservaDisponible","disable","label","libro","onHabilitarBotones","onDecrementarDisponibles"])):(0,l.Q3)("v-if",!0),(0,l.bF)(b,{class:"float-right",color:"primary",size:"sm",label:e.$t("botones.detalle"),onClick:function(t){return e.loadModal(g,h)}},null,8,["label","onClick"]),2!==g.TIPO&&g.CANTDIGITAL&&!e.noDescarga&&e.permiso?((0,l.uX)(),(0,l.Wv)(b,{key:2,class:"q-mx-xs float-right",color:"primary",size:"sm",label:"VISITAS",onClick:function(t){return e.listadoLecturaBmFicha(g.FICHACOD)}},null,8,["onClick"])):(0,l.Q3)("v-if",!0)])]}),_:2},1024)}),128))])])):(0,l.Q3)("v-if",!0),e.modalDetalle?((0,l.uX)(),(0,l.Wv)(g,{key:1,id:e.currentId,disponibles:e.currentDisponibles,reserva:e.currentReserva,reservasDisponibles:e.NdiasMaximoPrestamo.NUMDIPONIBLES,posicion:e.currentPosicion,alumno:e.alumno,sanciones:e.sanciones,sieInfo:e.sieInfo,onCerrarModal:e.cerrarModalDetalle,onDecrementarDisponibles:e.decrementarDisponibles},null,8,["id","disponibles","reserva","reservasDisponibles","posicion","alumno","sanciones","sieInfo","onCerrarModal","onDecrementarDisponibles"])):(0,l.Q3)("v-if",!0),(0,l.bF)(y,{class:"modal--bm-ficha-lectura",modelValue:e.modalLeidos,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.modalLeidos=t}),title:"Leídos / Descargas",column:"",ok:!1,footer:!0},{footer:(0,l.k6)(function(){return[(0,l.bF)(h,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ye,[(0,l.bF)(b,{label:"DESCARGAR PDF",color:"primary",onClick:t[0]||(t[0]=function(t){return e.imprimirLectura("pdf")})}),(0,l.bF)(b,{label:"DESCARGAR EXCEL",color:"primary",onClick:t[1]||(t[1]=function(t){return e.imprimirLectura("xls")})})])]}),_:1})]}),footerMobile:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(b,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:t[2]||(t[2]=function(t){return e.imprimirLectura("pdf")})}),(0,l.bF)(b,{flat:"",round:"",dense:"",icon:"file_excel",onClick:t[3]||(t[3]=function(t){return e.imprimirLectura("xls")})})])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",_e,[(0,l.bF)(q,{class:"col",dense:"",flat:"",bordered:"","wrap-cells":"",data:e.data,columns:e.columns,"visible-columns":e.visibleColumns,pagination:e.pagination,"onUpdate:pagination":t[6]||(t[6]=function(t){return e.pagination=t}),"rows-per-page-options":[0],"row-key":e.rowKey,filter:e.filter},{top:(0,l.k6)(function(a){return[(0,l.Lk)("div",Ae,[(0,l.bF)(v,{"hide-underline":"",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.filter=t})},null,8,["modelValue"])]),(0,l.bF)(k,{label:"Perfiles",options:e.perfiles,modelValue:e.filter,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.filter=t})},null,8,["options","modelValue"])]}),header:(0,l.k6)(function(e){return[(0,l.bF)(I,{props:e},{default:(0,l.k6)(function(){return[(0,l.bF)(D,{"auto-width":""}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.cols,function(t){return(0,l.uX)(),(0,l.Wv)(D,{key:t.name,props:e},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.label),1)]}),_:2},1032,["props"])}),128))]}),_:2},1032,["props"])]}),body:(0,l.k6)(function(e){return[(0,l.bF)(I,{props:e},{default:(0,l.k6)(function(){return[(0,l.bF)(C,{"auto-width":""},{default:(0,l.k6)(function(){return[e.row.DETALLE_LEIDOS.length||e.row.DETALLE_DESCARGAS.length?((0,l.uX)(),(0,l.Wv)(s,{key:0,class:"cursor-pointer",onClick:function(t){return e.expand=!e.expand},size:"17px",name:e.expand?"chevron_down":"chevron_right"},null,8,["onClick","name"])):(0,l.Q3)("v-if",!0)]}),_:2},1024),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.cols,function(t,a){return(0,l.uX)(),(0,l.Wv)(C,{key:t.name,props:e},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(t.value),1)]}),_:2},1032,["props"])}),128))]}),_:2},1032,["props"]),e.expand?((0,l.uX)(),(0,l.Wv)(I,{key:0,props:e},{default:(0,l.k6)(function(){return[(0,l.bF)(C,{colspan:"100%"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Se,[(0,l.Lk)("div",Me,[(0,l.bF)(p,{dense:"",flat:"",bordered:""},{default:(0,l.k6)(function(){return[(0,l.bF)(L,null,{default:(0,l.k6)(function(){return[e.row.DETALLE_LEIDOS.length?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(d,null,{default:(0,l.k6)(function(){return[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{name:"visibility",size:"sm"})]}),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(E,null,{default:(0,l.k6)(function(){return i()(t[10]||(t[10]=[(0,l.Lk)("strong",null,"Leídos:",-1)]))}),_:1})]}),_:1})]}),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.row.DETALLE_LEIDOS,function(e){return(0,l.uX)(),(0,l.Wv)(d,null,{default:(0,l.k6)(function(){return[(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return i()(t[11]||(t[11]=[(0,l.Lk)("strong",null,"Fecha de lectura:",-1)]))}),_:1}),(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.FH_REGISTRO),1)]}),_:2},1024)]}),_:2},1024),(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return i()(t[12]||(t[12]=[(0,l.Lk)("strong",null,"IP:",-1)]))}),_:1}),(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.IP),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)}),256))],64)):(0,l.Q3)("v-if",!0),e.row.DETALLE_DESCARGAS.length?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.bF)(d,null,{default:(0,l.k6)(function(){return[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{name:"file_download",size:"sm"})]}),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(E,null,{default:(0,l.k6)(function(){return i()(t[13]||(t[13]=[(0,l.Lk)("strong",null,"Descargas:",-1)]))}),_:1})]}),_:1})]}),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.row.DETALLE_DESCARGAS,function(e){return(0,l.uX)(),(0,l.Wv)(d,null,{default:(0,l.k6)(function(){return[(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return i()(t[14]||(t[14]=[(0,l.Lk)("strong",null,"Fecha de descarga:",-1)]))}),_:1}),(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.FH_REGISTRO),1)]}),_:2},1024)]}),_:2},1024),(0,l.bF)(F,null,{default:(0,l.k6)(function(){return[(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return i()(t[15]||(t[15]=[(0,l.Lk)("strong",null,"IP:",-1)]))}),_:1}),(0,l.bF)(E,{caption:""},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.IP),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)}),256))],64)):(0,l.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)])])]}),_:2},1024)]}),_:2},1032,["props"])):(0,l.Q3)("v-if",!0)]}),_:1},8,["data","columns","visible-columns","pagination","row-key","filter"])])]}),_:1},8,["modelValue"])])}a(71587),a(23825),a(52133),a(10239),a(6724),a(39300),a(17225),a(28743),a(12858),a(32071),a(55520),a(2775),a(46203),a(66307),a(24066);var Oe=a(2819),Te=a(33001),Re=a(13813),Ne=a(18105),Pe={getBibliograficos:function(e){return le.$http.get("api/HyoCatalogo/getBibliograficos",{params:{ids:e}})},getDetalle:function(e){return le.$http.get("api/HyoCatalogo/getDetalle",{params:{id:e}})},NdiasMaximoPrestamo:function(e,t){return le.$http.get("api/HyoCatalogo/NdiasMaximoPrestamo",{params:{alucod:e,usucod:t}})},getPrestamosReservas:function(e){return le.$http.get("api/HyoCatalogo/getPrestamosReservasFicha",{params:{id:e}})},reservarTitulo:function(e,t,a,o){return le.$http.post("api/HyoCatalogo/reservarTitulo",{reservaFicha:e,fechaPrestamo:t,fechaDevolucion:a,fechaReserva:o})},getLibros:function(e){return le.$http.get("api/HyoCatalogo/obtenerCatalogo",{params:e})},obtLecturas:function(e){return le.$http.get("api/HyoCatalogo/listadoLecturaBmFicha",{params:{id:e}})}},Be=a(51082),we={class:"bmModalDetalle"},Ue={class:"row q-pa-md detalle"},Ve={class:"col-md-2 col-xs-12"},Qe={class:"imagen",style:{"max-width":"200px",margin:"0 auto"}},We={class:"fit"},Xe={class:"col-md-10 col-xs-12"},$e={class:"row"},je=["innerHTML"],Ye={class:"row"},He={class:"col-xs-12"};function Ge(e,t){var a=(0,l.g2)("q-carousel-slide"),o=(0,l.g2)("q-btn"),i=(0,l.g2)("q-carousel-control"),r=(0,l.g2)("q-carousel"),s=(0,l.g2)("q-item-tile"),u=(0,l.g2)("q-item-main"),c=(0,l.g2)("q-item"),d=(0,l.g2)("q-tab"),f=(0,l.g2)("q-item-side"),b=(0,l.g2)("q-list"),m=(0,l.g2)("q-tab-pane"),p=(0,l.g2)("q-td"),g=(0,l.g2)("q-table"),h=(0,l.g2)("q-tabs"),v=(0,l.g2)("bm-boton-reservar"),k=(0,l.g2)("q-toolbar"),D=(0,l.g2)("sie-modal"),I=(0,l.gN)("lazy");return(0,l.uX)(),(0,l.CE)("div",we,[(0,l.bF)(D,{class:"modal-detalle-libro",modelValue:e.open,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.open=t}),title:e.$t("intranet.reservalibros.informacionBibliografica"),header:!0,ok:!1,loading:e.loading,onClose:e.cerrarModal},{footer:(0,l.k6)(function(){return[(0,l.RG)(e.$slots,"default",{},function(){return[(0,l.bF)(k,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[1!==e.detalleTipo?((0,l.uX)(),(0,l.Wv)(v,{key:0,class:"q-mx-xs",type:"submit",alumno:e.alumno,disable:e.noUsuarios||!e.reserva||e.sanciones||0===e.disponibles||e.reservasDisponibles<=0,libro:e.id,onDecrementarDisponibles:e.decrementarDisponibles},null,8,["alumno","disable","libro","onDecrementarDisponibles"])):(0,l.Q3)("v-if",!0)])]}),_:1})]})]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",Ue,[(0,l.Lk)("div",Ve,[(0,l.Lk)("div",Qe,[(0,l.bF)(r,{infinite:"",color:"white",modelValue:e.slide,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.slide=t}),"quick-nav":"",height:"200px"},{"control-button":(0,l.k6)(function(t){return[(0,l.bF)(i,{position:"top-right",offset:[18,22]},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{push:"",round:"",dense:"",color:"white","text-color":"primary",icon:e.fullscreen?"fullscreen_exit":"fullscreen",onClick:function(e){return t.toggleFullscreen()}},null,8,["icon","onClick"])]}),_:2},1024)]}),default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.imagenesDetalle,function(t,o){return(0,l.uX)(),(0,l.Wv)(a,{key:o,class:"carousel-Modal-detalle flex bg-white q-pa-none",name:o+1},{default:(0,l.k6)(function(){return[(0,l.bo)((0,l.Lk)("img",We,null,512),[[I,{src:e.generarUrlImagen(t),error:"statics/img/librodefault.png"}]])]}),_:2},1032,["name"])}),128))]}),_:1},8,["modelValue"])])]),(0,l.Lk)("div",Xe,[(0,l.bF)(c,null,{default:(0,l.k6)(function(){return[(0,l.bF)(u,null,{default:(0,l.k6)(function(){return[(0,l.bF)(s,{class:"row"},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{class:"q-subheading"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.detalleTitulo),1)]}),_:1})]}),_:1}),(0,l.bF)(s,{class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{class:"text-bold textlink",onClick:t[1]||(t[1]=function(t){return e.filtroDetalle(e.detalleAutor,"100a")})},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.detalleAutor),1)]}),_:1})]}),_:1}),(0,l.bF)(s,{class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.bF)(s,null,{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.detalleFormato),1)]}),_:1})]}),_:1}),(0,l.bF)(s,{class:"row",sublabel:""},{default:(0,l.k6)(function(){return[(0,l.bF)(s,{class:"text-justify q-my-md"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.detalleResumen),1)]}),_:1})]}),_:1})]}),_:1})]}),_:1})])]),(0,l.bF)(h,{inverted:"",animated:"",swipeable:e.isLess,modelValue:e.tabSelected,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.tabSelected=t})},{title:(0,l.k6)(function(){return[(0,l.bF)(d,{default:"",name:"tab-1",label:e.$t("intranet.reservalibros.detalleMayuscula")},null,8,["label"]),(0,l.bF)(d,{name:"tab-2",label:e.$t("intranet.reservalibros.bibliografico"),onClick:t[2]||(t[2]=function(t){return e.bibliografia()})},null,8,["label"]),1!==e.detalleTipo?((0,l.uX)(),(0,l.Wv)(d,{key:0,name:"tab-3",label:e.$t("intranet.reservalibros.prestamosReservas"),onClick:t[3]||(t[3]=function(t){return e.getPrestamosReservas(e.id)})},null,8,["label"])):(0,l.Q3)("v-if",!0)]}),default:(0,l.k6)(function(){return[(0,l.bF)(m,{name:"tab-1","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.bF)(b,{class:"no-border"},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.datosDetalle,function(e,t){return(0,l.uX)(),(0,l.Wv)(c,{key:t,class:"row q-py-none",style:{"min-height":"25px"}},{default:(0,l.k6)(function(){return[(0,l.bF)(u,{class:"q-caption text-bold col-xs-5 col-sm-4 col-md-2 col-xl-2 border"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.ETIQUETA)+":",1)]}),_:2},1024),(0,l.bF)(f,{class:"q-caption col-xs-6 col-sm-7 col-md-9 col-xl-8"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.DESCRIPCION),1)]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})]}),_:1}),(0,l.bF)(m,{name:"tab-2","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",$e,[(0,l.Lk)("div",{class:"col-xs-12 q-subheading q-py-md",innerHTML:e.textBibliografia},null,8,je)])]}),_:1}),1!==e.detalleTipo?((0,l.uX)(),(0,l.Wv)(m,{key:0,name:"tab-3","keep-alive":""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Ye,[(0,l.Lk)("div",He,[(0,l.bF)(g,{"table-style":"height: 57vh",color:"secondary",pagination:e.prestamosReservas.pagination,"onUpdate:pagination":t[4]||(t[4]=function(t){return e.prestamosReservas.pagination=t}),"hide-bottom":"",data:e.prestamosReservas.data,columns:e.prestamosReservas.columns,"row-key":"NUMINGRESO"},{"body-cell-VALESTADO":(0,l.k6)(function(e){return[(0,l.bF)(p,{props:e,class:(0,n.C4)("Disponible"!==e.row.VALESTADO?"text-red":"text-positive")},{default:(0,l.k6)(function(){return[(0,l.eW)((0,n.v_)(e.row.VALESTADO),1)]}),_:2},1032,["props","class"])]}),_:1},8,["pagination","data","columns"])])])]}),_:1})):(0,l.Q3)("v-if",!0)]}),_:1},8,["swipeable","modelValue"])]}),_:3},8,["modelValue","title","loading","onClose"])])}a(11777);var ze={class:"row q-pa-sm"},Ke={class:"col-12"},Ze={class:"col-12"},Je={class:"col-12"};function et(e,t){var a=(0,l.g2)("q-btn"),o=(0,l.g2)("q-datetime"),i=(0,l.g2)("sie-date"),n=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(a,{label:e.$t(e.label),color:e.color,disable:e.disable,size:e.size,onClick:e.abrirReserva},null,8,["label","color","disable","size","onClick"]),(0,l.bF)(n,{class:"modal-reserva-libro",modelValue:e.openReserva,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.openReserva=t}),title:e.$t("intranet.reservalibros.reservarTitulo"),onSubmit:e.reservarTitulo,header:!0,ok:e.$t("botones.reserva")},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ze,[(0,l.Lk)("div",Ke,[(0,l.bF)(o,{class:"q-if-outlined",modelValue:e.fechaReserva,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fechaReserva=t}),disable:"","float-label":e.$t("fechareserva"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"])]),(0,l.Lk)("div",Ze,[(0,l.bF)(i,{modelValue:e.fechaPrestamo,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fechaPrestamo=t}),options:e.diasDispon,onInput:e.seleccionaDia,placeholder:e.$t("fechaprestamo")},null,8,["modelValue","options","onInput","placeholder"])]),(0,l.Lk)("div",Je,[(0,l.bF)(o,{class:"q-if-outlined",modelValue:e.fechaDevolucion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fechaDevolucion=t}),disable:"","float-label":e.$t("fecharetorno"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"])])])]}),_:1},8,["modelValue","title","onSubmit","ok"])])}var tt={getFeriados:function(){return le.$http.get("api/HyoFeriados/obtFeriados")},NdiasMaximoPrestamo:function(e,t){return le.$http.get("api/HyoCatalogo/NdiasMaximoPrestamo",{params:{alucod:e,usucod:t}})},reservarTitulo:function(e){return le.$http.post("api/HyoCatalogo/reservarTitulo",e)}},at={emits:["habilitarBotones","decrementarDisponibles"],props:{label:{type:String,default:"botones.reserva"},disable:Boolean,size:String,color:{type:String,default:"primary"},libro:{type:Number,required:!0},reservaDisponible:{type:Boolean,default:!0},alumno:{type:Object,default:function(){}},posicion:{type:Number}},components:{sieModal:oe.A,sieDate:Be.A,date:te.p6,QDatetime:te.T5,QBtn:te.Il},data:function(){return{feriados:[],predias:[],hoy:(0,Ne.Ay)(new Date,"YYYY/MM/DD"),openReserva:!1,fechaPrestamo:new Date,fechaDevolucion:new Date,fechaReserva:new Date,contDias:0,sieInfo:(0,ae["default"])(),loadingReservar:!1,btnHabilitado:!1}},methods:{abrirReserva:function(){var e=this;tt.getFeriados().then(function(t){var a=t.json;e.feriados=a.map(function(e){var t=new Date(e.FECFER).setHours(0,0,0,0);return(0,Ne.Ay)(t,"YYYY/MM/DD")})});var t="",a="";Object.keys(this.alumno).length>0&&(t=this.alumno.ALUCOD,a=this.alumno.USUCOD),tt.NdiasMaximoPrestamo(t,a).then(function(t){var a=t.json;e.predias=a,e.obtDiaPrestamoDevolucion()})},obtDiaPrestamoDevolucion:function(){if(0===this.predias[0].NUMDIPONIBLES)this.$emit("habilitarBotones",!1),(0,ue["default"])(this.$t("mensajes.m0100"),"warning");else{var e,t=0,a=this.predias[0].DIANUM,o=this.fechaPrestamo,i=te.p6.getDayOfWeek(o),l=!0;if([6,7].indexOf(i)>=0){var n=!1;while(!1===n)o=te.p6.addToDate(o,{days:1}),e=(0,Ne.Ay)(o,"YYYY/MM/DD"),i=te.p6.getDayOfWeek(o),l=this.feriados.indexOf(e)>=0,n=!l&&[6,7].indexOf(i)<0;this.fechaPrestamo=o}var r=this.fechaPrestamo;while(t<a){r=te.p6.addToDate(r,{days:1}),e=(0,Ne.Ay)(r,"YYYY/MM/DD");var s=te.p6.getDayOfWeek(r),u=this.feriados.indexOf(e)>=0;!u&&[6,7].indexOf(s)<0&&t++}this.fechaDevolucion=r,this.openReserva=!0}},obtDiaFinal:function(){if(0===this.predias[0].NUMDIPONIBLES)this.reservaDisponible=!1,(0,ue["default"])(this.$t("mensajes.m0100"),"warning");else{this.openReserva=!0;var e,t=0,a=this.predias[0].DIANUM,o=this.fechaPrestamo;while(t<a){o=te.p6.addToDate(o,{days:1}),e=(0,Ne.Ay)(o,"YYYY/MM/DD");var i=te.p6.getDayOfWeek(o),l=this.feriados.indexOf(e)>=0;!l&&[6,7].indexOf(i)<0&&t++}this.fechaDevolucion=o}},reservarTitulo:function(){var e=this;this.loadingReservar=!0;var t="",a="",o="";Object.keys(this.alumno).length>0&&(t=this.alumno.ALUCOD,a=this.alumno.USUCOD,o=this.alumno.NOMCOMP),tt.reservarTitulo({reservaFicha:this.libro,fechaPrestamo:(0,Ne.Ay)(this.fechaPrestamo,"DD/MM/YYYY"),fechaDevolucion:(0,Ne.Ay)(this.fechaDevolucion,"DD/MM/YYYY"),fechaReserva:(0,Ne.Ay)(this.fechaReserva,"DD/MM/YYYY"),alucod:t,usucod:a,nomcomp:o}).then(function(t){var a=t.json;return e.loadingReservar=!1,e.openReserva=!1,1===a.estado?(e.$emit("decrementarDisponibles",e.posicion),(0,ue["default"])(e.$t("mensajes.m0095"),"success"),!0):((0,ue["default"])(e.$t("mensajes.m0099"),"warning"),!1)}).catch(function(t){e.loadingReservar=!1,e.openReserva=!1,(0,ue["default"])(e.$t(t.error.message),"warning")})},seleccionaDia:function(){this.obtDiaFinal()},diasDispon:function(e){var t=te.p6.getDayOfWeek(e),a=(0,Ne.Ay)(e,"D");"1"===a&&(this.contDias=0);var o=this.feriados.indexOf(e)>=0,i=!o&&[6,7].indexOf(t)<0&&e>=this.hoy;return i&&(this.contDias++,this.contDias>3&&(i=!1)),i}},created:function(){}},ot=a(12807);const it=(0,ot.A)(at,[["render",et]]);var lt=it,nt=function(e){return(0,Ne.Ay)(e,"DD/MM/YYYY")},rt={emits:["cerrarModal","abrirReserva","decrementarDisponibles"],components:{QCarousel:te.ci,QCarouselSlide:te.xp,QCarouselControl:te.rG,QTabs:te.uw,QTab:te.zu,QTabPane:te.dg,QTable:te.kH,QTr:te.qh,QTd:te.Ef,QDatetime:te.T5,sieModal:oe.A,bmBotonReservar:lt,QBtn:te.Il,QItem:te.H0,QItemMain:te.mF,QItemTile:te.lp,QList:te.Mb,QItemSide:te.n1,QToolbar:te.ZV},props:{id:{type:Number,required:!0},sanciones:{type:Boolean,default:!1},reserva:Boolean,alumno:{type:Object,default:function(){}},posicion:{type:Number},disponibles:{type:Number},reservasDisponibles:{type:Number},sieInfo:{type:Object,default:function(){}}},data:function(){return{open:!0,loading:!1,datosDetalle:[],imagenesDetalle:[],detalleFicha:0,detalleTitulo:"",detalleIsbn:"",imagenIsbn:!1,detalleAutor:"",detalleFormato:"",detalleResumen:"",detalleTipo:2,bibliografico:{},tabSelected:"tab-1",textBibliografia:"",noUsuarios:!1,slide:1,fullscreen:!1,prestamosReservas:{data:[],columns:[{name:"NUMINGRESO",label:"NÚMERO DE INGRESO",field:"NUMINGRESO",align:"left",sortable:!0},{name:"PARTE",label:"CÓDIGO",field:"PARTE",align:"left",sortable:!0},{name:"VALESTADO",label:"DISPONIBILIDAD",field:"VALESTADO",align:"left",sortable:!0},{name:"UBICADES",label:"UBICACIÓN",field:"UBICADES",align:"left",sortable:!0},{name:"FECPREF",label:"DEVOLUCIÓN",field:"FECPREF",align:"left",format:nt,sortable:!0},{name:"FECRES",label:"RESERVA",field:"FECRES",align:"left",format:nt,sortable:!0}],pagination:{page:1,rowsPerPage:500}}}},computed:{isLess:function(){return(0,de.isLess)()}},mounted:function(){this.openModal()},created:function(){this.noUsuarios=["SIE","SIEWEB"].indexOf(this.sieInfo.USUCOD)>-1},methods:{openModal:function(){var e=this;this.loading=!0,Pe.getDetalle(this.id).then(function(t){e.datosDetalle=t.datos,e.imagenesDetalle=t.imagenes,e.detalleFicha=e.id,e.detalleTitulo=t.titulo,e.detalleIsbn=t.isbn,e.imagenIsbn=t.IMAGENISBN,e.detalleAutor=t.autor,e.detalleFormato=t.formato,e.detalleTipo=t.tipo,e.detalleResumen=t.resumen,e.bibliografico=t.bibliografico,e.loading=!1}).catch(function(t){e.loading=!1})},cerrarModal:function(){this.$emit("cerrarModal")},openReserva:function(){this.$emit("abrirReserva")},filtroDetalle:function(){},getPrestamosReservas:function(e,t){var a=this;Pe.getPrestamosReservas(e).then(function(e){a.prestamosReservas.data=e}).catch(function(e){(0,ue["default"])(a.$t("mensajes.m0103"),"warning")})},bibliografia:function(){var e="Sin Autor. ",t="",a="",o="";this.bibliografico.autor&&(e="".concat(this.bibliografico.autor,". ")),this.bibliografico.public_year&&(t="(".concat(this.bibliografico.public_year,"). ")),this.bibliografico.editorial&&(a="".concat(this.bibliografico.editorial,".")),this.bibliografico.subtitulo&&(o=":".concat(this.bibliografico.subtitulo.trim())),this.textBibliografia="".concat(e).concat(t,"<b><i>").concat(this.bibliografico.titulo).concat(o,". </i></b>").concat(a)},decrementarDisponibles:function(e){this.$emit("decrementarDisponibles",this.posicion)},generarUrlImagen:function(e){if(this.imagenIsbn){var t=this.detalleIsbn||-1;return"https://covers.openlibrary.org/b/isbn/".concat(t,"-M.jpg?default=false")}return this.sieInfo.api+"/HyoCatalogo/descargarImagenes/"+e.IMG+"?sie-token="+this.sieInfo.token}},watch:{}};const st=(0,ot.A)(rt,[["render",Ge]]);var ut=st,ct=a(88567),dt=a(95718),ft=a(50425),bt=a(82351),mt=a(52617),pt=a(94509),gt=a(65673),ht=a(82327),vt=a(88865),kt=a(66824),Dt=a(16648),It={data:function(){return{modalLeidos:!1,data:[],columns:[{name:"TIPNOM",label:"Perfil",field:"TIPNOM",align:"left"},{name:"USUCOD",label:"Código",field:"USUCOD",align:"left",sortable:!0},{name:"USUNOM",label:"Apellidos y nombres",field:"USUNOM",align:"left",sortable:!0},{name:"LEIDOS",label:"N° de Vistas",field:"LEIDOS",align:"center"},{name:"DESCARGAS",label:"N° de Descargas",field:"DESCARGAS",align:"center"}],visibleColumns:["TIPNOM","USUCOD","USUNOM","LEIDOS","DESCARGAS"],filter:null,pagination:{rowsPerPage:0},rowKey:"USUCOD",perfiles:[]}}},Ct=function(e){return(0,Ne.Ay)(e,"DD/MM/YYYY")},Ft={emits:["filtro","filtrodetalle","decrementarReservas","loadMaterialDigital"],mixins:[It],props:{libros:{type:Array,default:function(){return[]}},flag:{type:Boolean,default:!1},sanciones:{type:Boolean,default:!1},alumno:{type:Object,default:function(){}},NdiasMaximoPrestamo:{type:Object,default:function(){}},sieInfo:{type:Object,default:function(){}},noDescarga:{type:Boolean,default:!0}},components:{date:te.p6,QChip:te.wQ,QCheckbox:te.vZ,sieModal:oe.A,sieVacio:ce.A,sieDate:Be.A,Carousel:se.F,Slide:se.q,bmModalDetalle:ut,bmBotonReservar:lt,QCard:ct.A,QCardSection:dt.A,QTable:ft.A,QTr:bt.A,QTh:mt.A,QTd:pt.A,QList:gt.A,QItem:ht.A,QItemSection:vt.A,QItemLabel:kt.A,QSelect:Dt.S,QItemSide:te.n1,QItemMain:te.mF,QItemTile:te.lp,QIcon:te.bP,QCardSeparator:te.d6,QBtn:te.Il,QToolbar:te.ZV,QSearch:te.Ks},data:function(){return{openDetalle:!1,noUsuarios:!1,datosDetalle:[],imagenesDetalle:[],detalleFicha:0,detalleTitulo:"",detalleAutor:"",detalleFormato:"",detalleResumen:"",bibliografico:{},detalleId:0,check:[],reservaFicha:0,currentId:0,currentPosicion:0,currentReserva:!1,modalDetalle:!1,reservaDisponible:!0,loadingDetalle:!1,prestamosReservas:{data:[],columns:[{name:"NUMINGRESO",label:"NÚMERO DE INGRESO",field:"NUMINGRESO",align:"left",sortable:!0},{name:"PARTE",label:"CÓDIGO",field:"PARTE",align:"left",sortable:!0},{name:"VALESTADO",label:"DISPONIBILIDAD",field:"VALESTADO",align:"left",sortable:!0},{name:"FECPREF",label:"DEVOLUCIÓN",field:"FECPREF",align:"left",format:Ct,sortable:!0},{name:"FECRES",label:"RESERVA",field:"FECRES",align:"left",format:Ct,sortable:!0}],pagination:{page:1,rowsPerPage:500}}}},computed:{isLess:function(){return(0,de.isLess)()},permiso:function(){return this.sieInfo.ruta.nivel>=2&&["SIE","SIEWEB","FCANDIA","GCARDENAS"].indexOf(this.sieInfo.usucod)>-1}},methods:{habilitarBotones:function(e){this.reservaDisponible=e},verReporte:function(){this.listarBibliograficos().then(function(e){var t={repcod:"listadoBibliografico",formato:"docx",listado:e};(0,Oe.exportFilePhp)(t,"webservice/reportes/reporte")})},enviarMensajeria:function(){var e=this;this.listarBibliograficos().then(function(t){t='<b style="font-size: 12pt;">Bibliográfico</b><p>&nbsp;</p>'+t,e.$router.push({name:"intranet.mensajeria.redactar",params:{type:3},query:{body:t}})})},listarBibliograficos:function(){var e=this;if(this.check=(0,Te.filterArray)(!0,{field:"CHECKED",list:this.libros}),0!==this.check.length){var t="";return this.check=(0,Re["default"])(this.check,function(e){return e.FICHACOD}),Pe.getBibliograficos(this.check).then(function(a){for(var o=0;o<e.check.length;o++)t+=e.crearFormatoApa(a[e.check[o]]);return t})}(0,ue["default"])("Debe seleccionar títulos","info")},crearFormatoApa:function(e){if(!e)return"";var t=e.titulo?"".concat(e.titulo,"."):"",a=e.autor?"".concat(e.autor,". "):"Sin Autor. ",o=e.public_year?"(".concat(e.public_year,"). "):"",i=e.lugar_publicacion?"".concat(e.lugar_publicacion,": "):"",l=e.editorial?"".concat(e.editorial,"."):"";return"<b><i>".concat(a,"</i></b>").concat(o).concat(t).concat(i).concat(l,"<p>&nbsp;</p>")},loadModal:function(e,t,a){this.currentPosicion=t,this.currentId=e.FICHACOD,this.currentReserva=e.RESERVA,this.currentDisponibles=e.DISPONIBLES,this.modalDetalle=!0},cerrarModalDetalle:function(){this.modalDetalle=!1},filtro:function(e,t){this.$emit("filtro",e,t)},filtrodetalle:function(e,t){this.openDetalle=!1,this.$emit("filtrodetalle",e,t)},decrementarDisponibles:function(e){this.libros[e].DISPONIBLES>0&&(this.libros[e].DISPONIBLES=this.libros[e].DISPONIBLES-1,this.libros[e].TEXTODISPONIBLE=this.libros[e].DISPONIBLES+(this.libros[e].DISPONIBLES>1?" disponibles":" disponible")),this.$emit("decrementarReservas"),0===this.libros[e].DISPONIBLES&&(this.modalDetalle=!1)},loadMaterialDigital:function(e){this.$emit("loadMaterialDigital",e)},generarUrlImagen:function(e){if(e.IMAGENISBN){var t=e.ISBN||-1;return"https://covers.openlibrary.org/b/isbn/".concat(t,"-M.jpg?default=false")}return this.sieInfo.api+"/HyoCatalogo/descargarImagenes/"+e.IMG+"?sie-token="+this.sieInfo.token},listadoLecturaBmFicha:function(e){var t=this;return ee()(Z()().m(function a(){return Z()().w(function(a){while(1)switch(a.n){case 0:return t.idAdjunto=e,a.n=1,Pe.obtLecturas(e);case 1:t.data=a.v,t.perfiles=Array.from(new Set(t.data.map(function(e){return e.TIPNOM}))).map(function(e){return{label:e,value:e}}),t.perfiles.unshift({label:"Todos",value:null}),t.modalLeidos=!0;case 2:return a.a(2)}},a)}))()},imprimirLectura:function(e){var t={id:this.idAdjunto,repcod:"reporteLecturaBmFicha",formato:e};(0,Oe.exportFilePhp)(t,"webservice/reportes/reporte","Reporte Lectura de Adjunto")}},created:function(){this.noUsuarios=["SIE","SIEWEB"].indexOf(this.sieInfo.usucod)>-1,Object.keys(this.NdiasMaximoPrestamo).length>0&&0===this.NdiasMaximoPrestamo.NUMDIPONIBLES&&(this.reservaDisponible=!1)}};const Et=(0,ot.A)(Ft,[["render",xe]]);var Lt=Et,qt=a(92173),yt=a(74656),_t=a(95655),At=a(78131),St={components:{QInnerLoading:te.SQ,QSpinnerOval:te.VA,QCarousel:te.ci,QCarouselSlide:te.xp,QChip:te.wQ,Carousel:se.F,Slide:se.q,date:te.p6,QModal:te.tU,sieModal:oe.A,sieSelect:ie.A,QTooltip:te.nC,bmCard:Lt,siePdf:re.A,bmModalDetalle:ut,QInfiniteScroll:te.nN,QSpinnerDots:te.FS,sieEstudiantes:qt.Ay,sieVacio:ce.A,QList:gt.A,QItem:ht.A,QItemSection:vt.A,QItemLabel:kt.A,QAvatar:yt.A,QPage:te.Tu,QBtn:te.Il,QSearch:te.Ks,QIcon:te.bP,QCard:te.C$,QCardMain:te.d1,QCardMedia:te.wy,QCardTitle:te.u0,QItemTile:te.lp,QInput:te.ie,QToolbar:te.ZV,QToolbarTitle:te.r_},data:function(){return{sieInfo:(0,ae["default"])(),esPersonal:(0,ae["default"])().esDocente,esAdministrador:(0,ae["default"])().esAdministrador,esEstudiante:(0,ae["default"])().esEstudiante,esFamilia:(0,ae["default"])().esFamilia,campoCategoria:"0245"===(0,ae["default"])().colcod?"T":"650a",busquedaDefault:"0540"===(0,ae["default"])().colcod?"AYT":"T",mostrarEnlaceExterno:"0084"===(0,ae["default"])().colcod&&!(0,ae["default"])().esFamilia,noDescarga:!["0193","0098","0372"].includes((0,ae["default"])().colcod),loadingEnlaceExterno:!1,buscarCatalogo:"",buscarFormato:"0271"===(0,ae["default"])().colcod?"T":2,buscarBiblioteca:"",flagbusqueda:!1,flagInicio:!0,imgdefault:"",loading:!1,recomendados:[],categorias:[],digitaes:[],books:[],openDetalle:!1,sanciones:!1,openFiltros:!1,reservaDisponible:!0,currentPosicion:0,currentDisponibles:0,currentId:0,currentReserva:!1,modalDetalle:!1,instrucod:"",gradocod:"",solcod:null,alumno:{},alucod:"",usucod:"",NdiasMaximoPrestamo:{},digitales:[],dataMateriales:[],urlMaterialDigital:"",openMaterialDigital:!1,openMaterialesDigitales:!1,muestraInicio:!0,tituloMaterial:"",tituloMateriales:"",mensajeCatalogo:"",tiposBusqueda:[{ID:0,DESC:"Búsqueda simple"},{ID:1,DESC:"Búsqueda Avanzada"},{ID:2,DESC:"Codigo de catálogo"},{ID:3,DESC:"Por autor"},{ID:4,DESC:"Por editorial"},{ID:5,DESC:"Por biblioteca"}],formatos:[{ID:"T",DESC:"Todos"},{ID:1,DESC:"Digital"},{ID:2,DESC:"Fisico"},{ID:3,DESC:"Fisico y Digital"}],campos:[{ID:"T",DESC:"Todos"}],materiales:[{ID:"T",DESC:"Todos"}],bibliotecas:[{ID:"T",DESC:"Todos"}],operadores:[{ID:"AND",DESC:"Y"},{ID:"OR",DESC:"O"}],filter:{tipoBusqueda:0,text:"",campo:"T",tipoMaterial:"T",biblioteca:"T",text1:"",campo1:"T",text2:"",campo2:"T",text3:"",campo3:"T",operador1:"AND",operador2:"AND"},busqueda:{parametros:{},detalle:!1,filtros:!1,lastAjaxTime:0,lastAjaxLength:12,bloque:0,datos:[],loading:!1},classCarga:{row:!0,"justify-center":!0,hidden:!1},file:null}},computed:{isLess:function(){return(0,de.isLess)()},permiso:function(){return this.sieInfo.ruta.nivel>=2&&["SIE","SIEWEB","FCANDIA","GCARDENAS"].indexOf(this.sieInfo.usucod)>-1}},created:function(){!this.esFamilia&&this.sieInfo.usucod&&(this.usucod=this.sieInfo.usucod),(this.esPersonal||this.esAdministrador||this.sieInfo.esOtros)&&this.datosInicio()},methods:{datosInicio:function(){var e=this;ne.getDatosInicio(this.instrucod,this.gradocod,this.alucod).then(function(t){e.categorias=t.categorias,e.recomendados=t.recomendados,e.digitales=t.digitales,e.bibliotecas=t.bibliotecas,e.mensajeCatalogo=t.mensajeCatalogo||"",0===e.categorias.length&&0===e.recomendados.length&&0===e.digitales.length&&(e.muestraInicio=!1,e.filtroFormato())}),(this.esEstudiante||this.esFamilia)&&this.alucod&&ne.getSanciones(this.alucod).then(function(t){t.length>0&&(e.sanciones=!0)}),(this.usucod||this.alucod)&&-1===["SIE","SIEWEB"].indexOf(this.usucod)&&ne.NdiasMaximoPrestamo(this.alucod,this.usucod).then(function(t){var a=t.json;e.NdiasMaximoPrestamo=a[0]})},parametrosBusqueda:function(e,t){var a="AYT"===t?6:0;return{params:{tipoBusqueda:a,campo:t,text:e,tipoMaterial:"T",instrucod:this.instrucod,gradocod:this.gradocod,formato:this.buscarFormato,biblioteca:this.buscarBiblioteca}}},resetearBusqueda:function(e,t,a){this.busqueda={parametros:e,detalle:t,filtros:a,lastAjaxTime:0,lastAjaxLength:12,bloque:0,datos:[],loading:!1,alucod:this.alucod,scroll:!1},this.$refs.scrollLibros&&this.$refs.scrollLibros.resume(),this.cargarLibros(null,function(){})},filtrar:function(e){13===e.keyCode&&this.resetearBusqueda(this.parametrosBusqueda(this.buscarCatalogo.trim(),this.busquedaDefault),!1,!1)},filtroFormato:function(){this.buscarFormato&&this.resetearBusqueda(this.parametrosBusqueda(this.buscarCatalogo.trim(),this.busquedaDefault),!1,!1)},filtroBiblioteca:function(){if(this.flagInicio&&"T"===this.buscarBiblioteca)return!1;this.buscarBiblioteca&&this.resetearBusqueda(this.parametrosBusqueda(this.buscarCatalogo.trim(),this.busquedaDefault),!1,!1)},filtro:function(e,t){if(""===e||"Sin Autor"===e)return!1;this.resetearBusqueda(this.parametrosBusqueda(e.trim(),t.trim()),!1,!1)},filtrodetalle:function(e,t){if("Sin Autor"===e)return!1;this.resetearBusqueda(this.parametrosBusqueda(e.trim(),t.trim()),!0,!1)},cargarLibros:function(e,t){var a=this;if(this.busqueda.loading)return t();if(0===Object.keys(this.busqueda.parametros).length)return t();var o=this.busqueda.lastAjaxLength;if(o>=12){this.busqueda.lastAjaxTime=Date.now(),this.classCarga.hidden=!1;var l=this.busqueda.parametros;l.params.bloque=this.busqueda.bloque,this.busqueda.loading=!0,ne.getLibros(l).then(function(e){a.busqueda.loading=!1;var o=[].concat(i()(a.busqueda.datos),i()(e)),l=e.length;a.busqueda.lastAjaxLength=l,a.flagbusqueda=!0,a.flagInicio=!1,!1===a.busqueda.scroll&&(a.books=[]),a.busqueda.scroll=!0,l>0&&(a.books=o,a.busqueda.bloque+=l,a.busqueda.datos=o,a.busqueda.detalle&&(a.openDetalle=!1),a.busqueda.filtros&&(a.openFiltros=!1)),a.classCarga.hidden=!0,t()}).catch(function(e){(0,ue["default"])(a.$t(e.error.message),"warning")}).finally(function(){a.busqueda.loading=!1})}else this.busqueda.scroll=!1,t(!0)},atras:function(e){this.flagInicio=!0,this.flagbusqueda=!1,this.buscarBiblioteca="T"},resetFilter:function(){[0,2,3,4].indexOf(this.filter.tipoBusqueda)>=0?(this.filter.text="",this.filter.campo="T"):(this.filter.text1="",this.filter.text2="",this.filter.text3="",this.filter.campo1="T",this.filter.campo2="T",this.filter.campo3="T",this.filter.operador1="AND",this.filter.operador2="AND")},abrirFiltros:function(){var e=this;this.campos.length<=1?ne.getFiltrosFormatos().then(function(t){e.campos=t.filtros,e.materiales=t.formatos,e.openFiltros=!0}).catch(function(t){(0,ue["default"])(e.$t(t.error.message),"warning")}):this.openFiltros=!0},busquedaFiltrada:function(){if([0,2,3,4].indexOf(this.filter.tipoBusqueda)>=0&&!this.filter.text&&"T"===this.filter.tipoMaterial)return(0,ue["default"])(this.$t("mensajes.m0102"),"warning"),!1;if(1===this.filter.tipoBusqueda&&!this.filter.text1&&!this.filter.text2&&!this.filter.text)return(0,ue["default"])(this.$t("mensajes.m0099"),"warning"),!1;var e={params:this.filter};e.params.instrucod=this.instrucod,e.params.gradocod=this.gradocod,this.resetearBusqueda(e,!1,!0)},loadModal:function(e,t,a){this.currentId=e.FICHACOD,this.currentReserva=e.RESERVA,this.currentPosicion=t,this.currentDisponibles=e.DISPONIBLES,this.modalDetalle=!0},cerrarModalDetalle:function(){this.modalDetalle=!1},decrementarDisponibles:function(e){this.recomendados[e].DISPONIBLES>0&&(this.recomendados[e].DISPONIBLES=this.recomendados[e].DISPONIBLES-1,this.recomendados[e].TEXTODISPONIBLE=this.recomendados[e].DISPONIBLES+(this.recomendados[e].DISPONIBLES>1?" disponibles":" disponible")),this.decrementarReservas(),0===this.recomendados[e].DISPONIBLES&&(this.modalDetalle=!1)},decrementarReservas:function(){this.NdiasMaximoPrestamo.NUMDIPONIBLES=this.NdiasMaximoPrestamo.NUMDIPONIBLES-1},verReporte:function(){this.$refs.bmcard.verReporte()},enviarMensajeria:function(){this.$refs.bmcard.enviarMensajeria()},reporteVisualizaciones:function(){var e={repcod:"reporteLecturaBmFichaGeneral",formato:"pdf"};(0,Oe.exportFilePhp)(e,"webservice/reportes/reporte")},cambiarAlumno:function(e){if(this.alumno={},0===Object.keys(e))return!1;this.instrucod=e.INSTRUCOD,this.gradocod=e.GRADOCOD,this.alucod=e.ALUCOD||"",this.usucod=e.USUCOD||"",this.alumno=e,this.datosInicio()},loadMaterialDigital:function(e){return Object.prototype.hasOwnProperty.call(e,"TIPO_MATERIAL")||this.openMaterialesDigitales?Object.prototype.hasOwnProperty.call(e,"TIPO_MATERIAL")&&2===e.TIPO_MATERIAL?(window.open(e.RUTA_ARCHIVO,"_blank"),!1):(this.urlMaterialDigital=this.vistaUrl(e),this.file=e.ID_MATERIAL,this.openMaterialDigital=!0,void(this.tituloMaterial=e.TITULO)):(this.listarMaterialesDigitales(e),!1)},listarMaterialesDigitales:function(e){var t=this;return ee()(Z()().m(function a(){var o;return Z()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ne.materialesFicha(e.FICHACOD);case 1:if(o=a.v,1!==o.length){a.n=2;break}return t.loadMaterialDigital(o[0]),a.a(2,!1);case 2:t.dataMateriales=o,t.tituloMateriales=e.TITULO,t.openMaterialesDigitales=!0;case 3:return a.a(2)}},a)}))()},vistaUrl:function(e){var t=e.ID_MATERIAL;return"".concat(this.sieInfo.api,"/HyoCatalogo/vista/").concat(t,"/Material Digital?sie-token=").concat(this.sieInfo.token)},downloadUrl:function(){var e=this.file;e&&(0,At["default"])("".concat(this.sieInfo.api,"/HyoCatalogo/descargar/").concat(e,"/Material Digital?sie-token=").concat(this.sieInfo.token),"Material Digital")},generarUrlImagen:function(e){if(e.IMAGENISBN){var t=e.ISBN||-1;return"https://covers.openlibrary.org/b/isbn/".concat(t,"-M.jpg?default=false")}return this.sieInfo.api+"/HyoCatalogo/descargarImagenes/"+e.IMG+"?sie-token="+this.sieInfo.token},generarUrlImagenCat:function(e){var t=e.ID;return this.sieInfo.api+"/HyoCatalogo/descargarImagenCategoria/"+t+"/3/"+this.instrucod+"?sie-token="+this.sieInfo.token},irBliotecaVitual:function(){var e=this;return ee()(Z()().m(function t(){var a,o;return Z()().w(function(t){while(1)switch(t.p=t.n){case 0:return e.loadingEnlaceExterno=!0,t.p=1,t.n=2,ne.getInfoWebExternal();case 2:if(a=t.v,!a.isLink){t.n=3;break}(0,_t.openUrlFormData)(a.url,a.paramsForm),t.n=4;break;case 3:throw new Error("No Habilitado");case 4:t.n=6;break;case 5:t.p=5,o=t.v,(0,ue["default"])(o.message,"error");case 6:e.loadingEnlaceExterno=!1;case 7:return t.a(2)}},t,null,[[1,5]])}))()}}};const Mt=(0,ot.A)(St,[["render",z]]);var xt=Mt}}]);