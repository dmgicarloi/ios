"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[10482],{10482:function(e,n,r){r.r(n),r.d(n,{default:function(){return P}});var a=r(61758),t={class:"row"},o={class:"col-xs-12"},i={key:1,class:"column"},l={class:"row q-pa-sm q-col-gutter-sm"},c={class:"col-xs-12"},s={class:"col-xs-12"},u={class:"col-xs-12"},d={class:"col-xs-12"};function f(e,n){var r=this,f=(0,a.g2)("header-btn"),m=(0,a.g2)("q-spinner-oval"),g=(0,a.g2)("q-inner-loading"),p=(0,a.g2)("sie-table"),v=(0,a.g2)("sie-vacio"),D=(0,a.g2)("q-card-section"),h=(0,a.g2)("q-card"),R=(0,a.g2)("q-select"),N=(0,a.g2)("q-form"),S=(0,a.g2)("sie-modal"),b=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(b,{class:"precede q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(h,null,{default:(0,a.k6)(function(){return[(0,a.bF)(f,{name:"Precedencia",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(D,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",t,[(0,a.Lk)("div",o,[(0,a.bF)(g,{visible:e.loadingDetalle},{default:(0,a.k6)(function(){return[(0,a.bF)(m,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.dataDetalle.length>0?((0,a.uX)(),(0,a.Wv)(p,{key:0,selection:"single",showSearch:!1,context:r,css:"height:calc(100vh - 90px)",columns:e.configTbl.columnas,data:e.dataDetalle,config:e.dinamicos},null,8,["columns","data","config"])):((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(v,{icon:"settings_applications",style:{height:"calc(100vh - 90px)"}})]))])])]}),_:1})]}),_:1}),(0,a.bF)(S,{class:"modal-precede",modelValue:e.openModal,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.openModal=n}),title:"Precedencia",ok:e.$t("botones.guardar"),footer:!0,onSubmit:e.grabarDatos,onClose:e.cerrarModal},{default:(0,a.k6)(function(){return[(0,a.bF)(N,{class:"column",ref:"form"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",l,[(0,a.Lk)("div",c,[(0,a.bF)(R,{class:"q-ma-none",label:"Nivel a LLevar",type:"outlined",readonly:e.actReadOnly,"option-value":"INSTRUCOD","option-label":"INSTRUDES",modelValue:e.frm.instrucodl,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.frm.instrucodl=n}),options:e.niveles,onInput:e.selectNivelL},null,8,["readonly","modelValue","options","onInput"])]),(0,a.Lk)("div",s,[(0,a.bF)(R,{class:"q-ma-none",label:"Grado a LLevar",type:"outlined",readonly:e.actReadOnly,"option-value":"GRADOCOD","option-label":"GRADODES",modelValue:e.frm.gradocodl,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.frm.gradocodl=n}),options:e.grados},null,8,["readonly","modelValue","options"])]),(0,a.Lk)("div",u,[(0,a.bF)(R,{class:"q-ma-none",label:"Nivel Requerido",type:"outlined","option-value":"INSTRUCOD","option-label":"INSTRUDES",modelValue:e.frm.instrucodr,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.frm.instrucodr=n}),options:e.nivelesr,onInput:e.selectNivelR},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",d,[(0,a.bF)(R,{class:"q-ma-none",label:"Grado Requerido",type:"outlined","option-value":"GRADOCOD","option-label":"GRADODES",modelValue:e.frm.gradocodr,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.frm.gradocodr=n}),options:e.gradosr},null,8,["modelValue","options"])])])]}),_:1},512)]}),_:1},8,["modelValue","ok","onSubmit","onClose"])]}),_:1})}var m=r(76080),g=r.n(m),p=r(45254),v=r.n(p),D=(r(52133),r(10239),r(50310),r(6724),r(83190),r(6123)),h=r(88567),R=r(95718),N=r(53380),S=r(9736),b=r(16648),O=r(30640),w=r(80340),A=r(57668),C=r(65229),G=r(81288),I=r(2739),T=r(33777),k={data:function(){return{dinamicos:{ACCIONES:{component:"button",icon:["edit","delete"],permisos:{edit:"> 1",delete:"=== 3"},edit:function(e){this.modalEditar(e)},delete:function(e){this.eliminar(e)},flat:!0,color:"primary"}},configTbl:{columnas:[]},dataDetalle:[]}}},L=r(80660),U=r(2819),E={directives:{sieActive:C.A},mixins:[k],components:{QD:D.T5,QCard:h.A,QCardSection:R.A,QSeparator:N.A,QInnerLoading:D.SQ,QSpinnerOval:D.VA,QSelect:b.A,QInput:S.A,QOptionGroup:D.EX,sieModal:O.A,sieVacio:w.A,QForm:I.A,sieTable:T.A,QCheckbox:D.vZ,QPage:D.Tu},props:{},computed:{isLess:function(){return(0,G.isLess)()},claseBtn:function(){return this.configTbl.registrosSeleccionados.length>0?"text-secondary":"text-grey"}},data:function(){var e=this;return{buttons:[{icon:"add",label:"Agregar",permiso:"> 1",click:function(){e.modalEditar({})}},{icon:"print",label:"Imprimir",permiso:">= 1",click:function(){e.imprimir()}}],sie:(0,A["default"])(),config:{},dataSalones:[],loadingDetalle:!1,dataDetalle:[],niveles:[],grados:[],nivelesr:[],gradosr:[],openModal:!1,actReadOnly:!1,frm:{instrucodlk:"N",gradocodlk:"N",instrucodl:"N",instrucodr:"N",gradocodl:"N",gradocodr:"N",flag:"R"},defaultNiveles:{INSTRUDES:"Ninguno",INSTRUCOD:"N"},defaultGrados:{GRADODES:"Ninguno",GRADOCOD:"N"},infoSalones:[],ng:[]}},methods:{configurarTabla:function(){var e=this;return v()(g()().m(function n(){return g()().w(function(n){while(1)switch(n.n){case 0:e.configTbl.columnas=[{name:"INSTRUDESL",label:"Nivel a LLevar",field:"INSTRUDESL",align:"left",sortable:!0},{name:"GRADODESL",label:"Grado a LLevar",field:"GRADODESL",align:"left",sortable:!0},{name:"INSTRUDESR",label:"Nivel Requerido",field:"INSTRUDESR",align:"left",sortable:!0},{name:"GRADODESR",label:"Grado Requerido",field:"GRADODESR",align:"left",sortable:!0},{name:"ACCIONES",label:"Acciones",align:"center",tipo:"acciones"}],e.configTbl.paginacion={page:1,rowsPerPage:500},e.dataDetalle=[];case 1:return n.a(2)}},n)}))()},imprimir:function(){var e={formato:"pdf",repcod:"listadoPrecedencias"};(0,U.exportFilePhp)(e,"intranet/reporte-node/reporte","listadoPrecedencias")},eliminar:function(e){var n=this,r={instrucodl:e.INSTRUCODL,gradocodl:e.GRADOCODL};this.$confirm("¿Realmente desea eliminar este registro?","delete").onOk(v()(g()().m(function e(){var a,t;return g()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.$http.delete("api/PrecedeController/deletePrecede",{params:{parametros:r}});case 1:a=e.v,t=a.message,n.$notify(t,"success"),n.getPrecedencias(),e.n=3;break;case 2:e.p=2,e.v,n.$notify("Ocurrió un problema de conexión.","warning");case 3:return e.a(2)}},e,null,[[0,2]])})))},generarNg:function(e){var n=this;return v()(g()().m(function r(){var a;return g()().w(function(r){while(1)switch(r.n){case 0:a={},e.map(function(e){a[e.INSTRUCOD]||(a[e.INSTRUCOD]={INSTRUCOD:e.INSTRUCOD,INSTRUDES:e.INSTRUDES,GRADOS:{}}),a[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]||(a[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]={GRADOCOD:e.GRADOCOD,GRADODES:e.GRADODES})}),n.ng=a;case 1:return r.a(2)}},r)}))()},getNiveles:function(){var e=[];for(var n in this.ng)e.push(this.ng[n]);return e.unshift(this.defaultNiveles),e},selectNivelL:function(e){var n=this;return v()(g()().m(function r(){return g()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,n.selectNivel(e);case 1:n.grados=r.v,n.frm.gradocodl="Ninguno";case 2:return r.a(2)}},r)}))()},selectNivelR:function(e){var n=this;return v()(g()().m(function r(){return g()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,n.selectNivel(e);case 1:n.gradosr=r.v,n.frm.gradocodr="Ninguno";case 2:return r.a(2)}},r)}))()},selectNivel:function(e){var n=[];if(e){var r=this.ng[e].GRADOS;for(var a in r)n.push(r[a])}return n.unshift(this.defaultGrados),n},getPrecedencias:function(){var e=this;return v()(g()().m(function n(){return g()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,L.$http.get("api/PrecedeController/getPrecedencias");case 1:e.dataDetalle=n.v;case 2:return n.a(2)}},n)}))()},limpiar:function(){var e=this;return v()(g()().m(function n(){return g()().w(function(n){while(1)switch(n.n){case 0:e.grados=[e.defaultGrados],e.gradosr=[e.defaultGrados],e.frm.instrucodl="N",e.frm.instrucodr="N",e.frm.gradocodl="N",e.frm.gradocodr="N",e.frm.flag="R",e.actReadOnly=!1;case 1:return n.a(2)}},n)}))()},modalEditar:function(e){var n=this;return v()(g()().m(function r(){return g()().w(function(r){while(1)switch(r.n){case 0:e.INSTRUDESL?(n.frm.flag="U",n.actReadOnly=!0):(n.frm.flag="R",n.actReadOnly=!1),n.frm.instrucodlk=e.INSTRUCODL||"N",n.frm.gradocodlk=e.GRADOCODL||"N",n.frm.instrucodl=e.INSTRUCODL||"N",n.frm.instrucodr=e.INSTRUCODR||"N",n.frm.gradocodl=e.GRADOCODL||"N",n.frm.gradocodr=e.GRADOCODR||"N",n.abrirModal();case 1:return r.a(2)}},r)}))()},abrirModal:function(){var e=this;return v()(g()().m(function n(){return g()().w(function(n){while(1)switch(n.n){case 0:e.openModal=!0;case 1:return n.a(2)}},n)}))()},grabarDatos:function(){var e=this;return v()(g()().m(function n(){var r,a,t,o;return g()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/PrecedeController/guardarPrecede",{data:e.frm});case 1:r=n.v,a=r.message,e.$notify(a,"success"),e.getPrecedencias(),e.cerrarModal(),n.n=3;break;case 2:n.p=2,o=n.v,t=o.message,o.error&&(t=o.error.message||"Ocurrió un problema de conexión."),e.$notify(t,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},cerrarModal:function(){var e=this;return v()(g()().m(function n(){return g()().w(function(n){while(1)switch(n.n){case 0:e.limpiar(),e.openModal=!1;case 1:return n.a(2)}},n)}))()}},created:function(){var e=this;return v()(g()().m(function n(){var r;return g()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.configurarTabla();case 1:return e.getPrecedencias(),n.n=2,L.$http.get("api/SalonController/getInfoSalones",{params:{parametros:{}}});case 2:return e.infoSalones=n.v,n.n=3,e.generarNg(e.infoSalones);case 3:return n.n=4,e.getNiveles();case 4:r=n.v,e.niveles=r,e.nivelesr=r,e.limpiar();case 5:return n.a(2)}},n)}))()}},y=r(12807);const q=(0,y.A)(E,[["render",f]]);var P=q}}]);