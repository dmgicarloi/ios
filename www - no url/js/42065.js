"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[42065],{42065:function(e,o,a){a.r(o),a.d(o,{default:function(){return ae}});var t=a(8445),n=a.n(t),i=(a(71225),a(50310),a(5962),a(83190),a(61758)),l={class:"row items-center no-wrap"},s={class:"col-auto"},r={class:"row"},c={class:"col-xs-12 col-sm-2 q-pa-xs"},d={class:"col-xs-12 col-sm-2 q-pa-xs"},u={class:"col-xs-12 col-sm-8 q-pa-xs"},m={class:"col-auto"},p={class:"col-auto"},f={class:"row q-ma-xs q-col-gutter-sm"},b={class:"col-xs-6"},h={class:"col-xs-6"},g={class:"col-xs-12"},v={class:"col-xs-6"},O={class:"col-xs-6"},C={class:"col-xs-12"},B={class:"col-xd-6"},w={class:"col-auto"},A={class:"row q-ma-xs q-col-gutter-sm"},k={class:"col-xs-12"};function M(e,o){var a=(0,i.g2)("crearBotones"),t=(0,i.g2)("q-card-section"),M=(0,i.g2)("q-separator"),E=(0,i.g2)("tesoreriaLoading"),D=(0,i.g2)("q-select"),L=(0,i.g2)("q-input"),S=(0,i.g2)("sie-grid"),R=(0,i.g2)("footer-grid"),I=(0,i.g2)("q-option-group"),V=(0,i.g2)("q-checkbox"),T=(0,i.g2)("sie-modal"),F=(0,i.g2)("q-card");return(0,i.uX)(),(0,i.Wv)(F,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,i.k6)(function(){return[(0,i.bF)(t,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",l,[o[14]||(o[14]=(0,i.Lk)("div",{class:"col"},[(0,i.Lk)("div",{class:"text-h6"},"Becas Otorgadas")],-1)),(0,i.Lk)("div",s,[(0,i.bF)(a,{buttons:e.botones,nivelAcceso:e.nivelAcceso,opcion:e.nameComponente},null,8,["buttons","nivelAcceso","opcion"])])])]}),_:1}),(0,i.bF)(M),(0,i.bF)(E,{modelValue:e.loading.showLoading,total:e.loading.total,procesados:e.loading.procesados},null,8,["modelValue","total","procesados"]),(0,i.bF)(t,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",r,[(0,i.Lk)("div",c,[(0,i.bF)(D,{modelValue:e.selectAnio,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.selectAnio=o}),"option-value":"ID","option-label":"ANO",options:e.anio,label:"Año",onInput:e.filter},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",d,[(0,i.bF)(L,{modelValue:e.codigo,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.codigo=o}),placeholder:"Ingrese el código",label:"Código",onInput:e.filter},null,8,["modelValue","onInput"])]),(0,i.Lk)("div",u,[(0,i.bF)(L,{modelValue:e.nombre,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.nombre=o}),placeholder:"Ingrese el apellido y nombre del alumno",label:"Nombre",onInput:e.filter},null,8,["modelValue","onInput"])])]),o[15]||(o[15]=(0,i.Lk)("div",{class:"row"},null,-1)),(0,i.Lk)("div",null,[(0,i.bF)(S,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,frameworkComponents:e.frameworkComponents,onGridReady:e.onGridReady,rowSelection:"multiple",defaultColDef:e.defaultColDef,floatingFilter:!0,enableCellTextSelection:!0},null,8,["columnDefs","rowData","frameworkComponents","onGridReady","defaultColDef"]),(0,i.bF)(R,{modelValue:e.pagina,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.pagina=o}),max:e.pages,onLoad:e.getBecasOtorgadas,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])])]}),_:1}),(0,i.bF)(T,{modelValue:e.modalReporte,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.modalReporte=o}),labelButtonOk:"Imprimir",iconButtonOk:"print",onSubmit:e.generarReporte},{default:(0,i.k6)(function(){return[o[19]||(o[19]=(0,i.Lk)("form",{class:"form",id:"form"},null,-1)),(0,i.bF)(t,null,{default:(0,i.k6)(function(){return n()(o[16]||(o[16]=[(0,i.Lk)("div",{class:"row items-center no-wrap"},[(0,i.Lk)("div",{class:"col"},[(0,i.Lk)("div",{class:"text-h6"},"Reporte Becas")])],-1)]))}),_:1}),(0,i.bF)(M),(0,i.bF)(t,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",m,[(0,i.bF)(I,{color:"primary",type:"radio",modelValue:e.form.reporte,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.form.reporte=o}),options:e.optionReportes,onInput:e.cambiarOpcion},null,8,["modelValue","options","onInput"])])]}),_:1}),(0,i.bF)(M),(0,i.bF)(t,null,{default:(0,i.k6)(function(){return[o[17]||(o[17]=(0,i.Lk)("div",{class:"row items-center no-wrap"},[(0,i.Lk)("div",{class:"col"},[(0,i.Lk)("div",{class:"text-h6",style:{"text-align":"center","font-weight":"bolder"}},"Parámetros")])],-1)),(0,i.Lk)("div",p,[(0,i.Lk)("div",f,[(0,i.Lk)("div",b,[(0,i.bF)(D,{placeholder:"Seleccione Año",label:"Año","option-label":"label","option-value":"value",options:e.dataAnios,modelValue:e.form.anio,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.anio=o}),disable:e.disable.anio},null,8,["options","modelValue","disable"])]),(0,i.Lk)("div",h,[(0,i.bF)(D,{placeholder:"Seleccione Mes",label:"Mes","option-label":"label","option-value":"value",options:e.dataMeses,modelValue:e.form.mes,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.form.mes=o}),disable:e.disable.mes},null,8,["options","modelValue","disable"])]),(0,i.Lk)("div",g,[(0,i.bF)(D,{placeholder:"Seleccione beca",label:"Beca","option-label":"BECADES","option-value":"ID_BECA",options:e.dataBeca,modelValue:e.form.beca,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.form.beca=o}),disable:e.disable.beca},null,8,["options","modelValue","disable"])]),(0,i.Lk)("div",v,[(0,i.bF)(D,{placeholder:"Seleccione motivo",label:"Motivo Beca","option-label":"MOTBECDES","option-value":"MOTBECCOD",options:e.dataMotivoBeca,modelValue:e.form.motivo,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.form.motivo=o}),disable:e.disable.motivo},null,8,["options","modelValue","disable"])]),(0,i.Lk)("div",O,[(0,i.bF)(D,{placeholder:"Seleccione Moneda",label:"Moneda","option-label":"MONNOM","option-value":"MONCOD",options:e.selectMonedas,modelValue:e.form.moncod,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.form.moncod=o}),disable:e.disable.concob},null,8,["options","modelValue","disable"])]),(0,i.Lk)("div",C,[(0,i.bF)(D,{placeholder:"Seleccione concepto",label:"Concepto de Cobro","option-label":"CONDES","option-value":"CONCOB",options:e.selectConcepto,modelValue:e.form.concob,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.form.concob=o}),disable:e.disable.concob},null,8,["options","modelValue","disable"])]),(0,i.Lk)("div",B,[(0,i.bF)(V,{label:"Muestra antes de la Matrícula",modelValue:e.form.matricula,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.form.matricula=o}),"true-value":1,"false-value":0},null,8,["modelValue"])])])])]}),_:1}),(0,i.bF)(t,null,{default:(0,i.k6)(function(){return[o[18]||(o[18]=(0,i.Lk)("div",{class:"row items-center no-wrap"},[(0,i.Lk)("div",{class:"col"},[(0,i.Lk)("div",{class:"text-h6",style:{"text-align":"center","font-weight":"bolder"}},"Formato")])],-1)),(0,i.Lk)("div",w,[(0,i.Lk)("div",A,[(0,i.Lk)("div",k,[(0,i.bF)(I,{inline:"",color:"primary",type:"radio",modelValue:e.seleccionarFormato,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.seleccionarFormato=o}),options:e.botonesReportes},null,8,["modelValue","options"])])])])]}),_:1})]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var E=a(99550),D=a.n(E),L=a(41562),S=a.n(L),R=a(76080),I=a.n(R),V=a(45254),T=a.n(V),F=(a(30683),a(23825),a(10239),a(48426),a(32408),a(27153),a(44264),a(66307),a(24066),a(88567)),N=a(95718),x=a(53380),_=a(64208),U=a(54489),y=a(80660),q=a(36408),$=a(27560),P=a(96330),G=a(64446),Q=a(78840),j=a(57668),H=a(75177),X=a(6123),z=a(41615),W=a(64303),Y=a(75053),Z=a(6557),J=a(17915),K={components:{QCheckbox:X.vZ,headerGrid:P.A,sieGrid:q.A,QCard:F.A,QCardSection:N.A,QSeparator:x.A,QInput:_.A,QSelect:U.S,footerGrid:$.A,crearBotones:W.A,sieModal:Y.A,QOptionGroup:X.EX,tesoreriaLoading:J.A},mixins:[H.A],data:function(){return{nameComponente:"becasListar",nivelAcceso:(0,j["default"])().ruta.nivel,codigo:"",nombre:"",columnDefs:null,rowData:[],conceptos:[],selectConcepto:"",monedas:[],selectMonedas:"",api:null,frameworkComponents:null,anio:[],selectAnio:(0,j["default"])().ano.toString(),pagina:1,pages:1,botones:[],modalReporte:!1,botonesReportes:[],optionReportes:[{label:"Relación de Alumnos Becados por mes.",value:"Mes"},{label:"Relación de Alumnos Becados por tipo de Beca",value:"Tipo"},{label:"Relación total de Alumnos Becados",value:"Total"},{label:"Relación Alumnos Becados",value:"Rela"},{label:"Relación Alumnos Becados por motivo de Beca.",value:"Motivo"},{label:"Nómina de Becados.",value:"Nomina"},{label:"Resumen Mensual.",value:"resumenMensual"}],formReporte:{},dataBeca:[],dataMotivoBeca:[],dataAnios:[],dataMeses:[],disable:{anio:!1,mes:!1,motivo:!1,beca:!1,concob:!1},form:{anio:String((0,j["default"])().ano),mes:"01",motivo:"T",beca:"T",matricula:0,reporte:"Mes",concob:"01",moncod:"001"},seleccionarFormato:"pdf",rowDataInitial:[],defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0,suppressDragLeaveHidesColumns:!0},loading:{showLoading:!1,procesados:0,total:0}}},mounted:function(){this.getBecas(),this.getAños(),this.getMotivoBeca(),this.getMeses(),this.cambiarOpcion()},methods:{cambiarOpcion:function(){var e=document.getElementById("form");e&&(e.innerHTML=""),"Mes"===this.form.reporte&&(this.disable.anio=!1,this.disable.mes=!1,this.disable.beca=!0,this.form.beca=z["default"].TODOS,this.disable.motivo=!0,this.form.motivo=z["default"].TODOS,this.disable.concob=!0),"Tipo"===this.form.reporte&&(this.disable.anio=!1,this.disable.mes=!1,this.disable.beca=!1,this.disable.motivo=!0,this.disable.concob=!0,this.form.motivo=z["default"].TODOS),"Total"===this.form.reporte&&(this.disable.anio=!1,this.disable.mes=!0,this.form.mes="01",this.disable.beca=!0,this.disable.motivo=!0,this.form.motivo=z["default"].TODOS,this.disable.concob=!0),"Rela"===this.form.reporte&&(this.disable.anio=!1,this.disable.mes=!1,this.disable.beca=!1,this.disable.motivo=!0,this.form.motivo=z["default"].TODOS,this.disable.concob=!0),"Motivo"===this.form.reporte&&(this.disable.anio=!1,this.disable.mes=!1,this.disable.beca=!0,this.form.beca=z["default"].TODOS,this.disable.motivo=!1,this.form.motivo=z["default"].TODOS,this.disable.concob=!0),"Nomina"===this.form.reporte&&(this.disable.anio=!1,this.disable.mes=!0,this.form.mes="01",this.disable.beca=!1,this.form.beca=z["default"].TODOS,this.disable.motivo=!0,this.form.motivo=z["default"].TODOS,this.disable.concob=!0),"resumenMensual"===this.form.reporte&&(this.disable.anio=!1,this.disable.mes=!1,this.disable.beca=!0,this.form.beca=z["default"].TODOS,this.disable.motivo=!0,this.form.motivo=z["default"].TODOS,this.disable.concob=!1)},crearBotonesReportes:function(){this.botonesReportes=[{label:"PDF",value:"pdf"},{label:"EXCEL",value:"xlsx"}]},"getAños":function(){var e=this;return T()(I()().m(function o(){return I()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,z["default"].API_ANIOS();case 1:e.dataAnios=o.v;case 2:return o.a(2)}},o)}))()},getMeses:function(){var e=this;return T()(I()().m(function o(){return I()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,z["default"].MESES();case 1:e.dataMeses=o.v;case 2:return o.a(2)}},o)}))()},getBecas:function(){var e=this;return T()(I()().m(function o(){var a;return I()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,y.$http.get("api/becaController/getBeca",{params:{parametros:{response:"list",ANIO:z["default"].CURRENT_YEAR}}});case 1:a=o.v,a.unshift({BECADES:"Todos",ID_BECA:"T"}),e.dataBeca=a;case 2:return o.a(2)}},o)}))()},getMotivoBeca:function(){var e=this;return T()(I()().m(function o(){var a;return I()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,y.$http.get("api/becaController/getMotivosDeBeca",{params:{parametros:{response:"combo"}}});case 1:a=o.v,a.unshift({MOTBECDES:"Todos",MOTBECCOD:"T"}),e.dataMotivoBeca=a;case 2:return o.a(2)}},o)}))()},getConceptos:function(){var e=this;return T()(I()().m(function o(){var a;return I()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,y.$http.get("api/concobroController/getConceptos",{params:{parametros:{activo:1}}});case 1:a=o.v,e.selectConcepto=a;case 2:return o.a(2)}},o)}))()},getMonedas:function(){var e=this;return T()(I()().m(function o(){var a;return I()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,y.$http.get("api/cobroController/getMoneda");case 1:a=o.v,e.selectMonedas=a;case 2:return o.a(2)}},o)}))()},generarReporte:function(){var e=document.getElementById("form"),o={tipReport:"becas",matriculados:this.form.matricula,repcod:"becas",report:this.form.reporte,format:this.seleccionarFormato,concob:this.form.concob,moncod:this.form.moncod};this.disable.anio||(o.anio=this.form.anio),this.disable.mes||(o.mes=this.form.mes),this.disable.motivo||(o.motivo=this.form.motivo),this.disable.beca||(o.beca=this.form.beca),z["default"].FORMULARIO_REPORTES(e,o)},crearBotones:function(){this.botones=[{label:"Reportes",icon:"print",click:this.abriModalReporte,minAcceso:z["default"].SOLO_LECTURA},{label:"Eliminar",icon:"delete",click:this.eliminarBecasOtorgadasMasiva,minAcceso:z["default"].SOLO_LECTURA},{label:"Agregar",icon:"add",click:this.nuevo,minAcceso:z["default"].LECTURA_ESCRITURA}]},abriModalReporte:function(){this.modalReporte=!0},nuevo:function(){this.$router.push({name:"tesoreria.asignacionBecas.form"})},filter:function(){var e=this;return T()(I()().m(function o(){var a,t,i;return I()().w(function(o){while(1)switch(o.n){case 0:return a={NOMCOMP:e.nombre,ALUCOD:e.codigo,ANOBEC:e.selectAnio},t=n()(e.rowDataInitial),o.n=1,(0,Z.A)({keys:a,data:t});case 1:i=o.v,e.rowData=i;case 2:return o.a(2)}},o)}))()},getBecasOtorgadas:function(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={vjson:1,pagina:this.pagina};Object.assign(a,o),y.$http.get("api/becaController/getCantidadBecasOtorgadas",{params:{parametros:a}}).then(function(o){e.addModified(o),e.rowData=o,e.rowDataInitial=n()(e.rowData),e.filter()})},onGridReady:function(e){this.api=e.api},eliminarBecasOtorgadasMasiva:function(){var e=this;return T()(I()().m(function o(){var a;return I()().w(function(o){while(1)switch(o.n){case 0:if(a=e.api.getSelectedRows(),0!==a.length){o.n=1;break}return o.a(2,e.$alert("No se seleccino ninguna beca"));case 1:e.$confirm("¿Está seguro de eliminar las beca(".concat(a.length,") otorgada?"),"save").onOk(T()(I()().m(function o(){var t,n,i,l,s,r,c,d,u,m,p,f;return I()().w(function(o){while(1)switch(o.p=o.n){case 0:t=[],e.loading.showLoading=!0,e.loading.total=a.length,e.loading.procesados=0,n=S()(a),o.p=1,n.s();case 2:if((i=n.n()).done){o.n=8;break}return l=i.value,o.p=3,o.n=4,e.eliminarBecaOtorgada(l);case 4:l.status="success",t.push(l),o.n=6;break;case 5:o.p=5,p=o.v,l.status="error",l.message=p.error?p.error.message:p.message,t.push(l);case 6:return o.p=6,e.loading.procesados++,o.f(6);case 7:o.n=2;break;case 8:o.n=10;break;case 9:o.p=9,f=o.v,n.e(f);case 10:return o.p=10,n.f(),o.f(10);case 11:e.loading.showLoading=!1,s=Object.groupBy(t,function(e){return e.status}),r=s.error,c=s.success,d={message:"",icon:""},!r||1!==r.length||c&&0!==c.length||(u=D()(r,1),m=u[0],d.message=m.message,d.icon="warning"),r&&r.length>1&&(!c||0===c.length)&&(d.message="(".concat(r.length,")Becas no eliminadas."),d.icon="warning"),c&&c.length>0&&(d.message="(".concat(c.length,")Becas eliminadas satisfactoriamente"),d.icon="success"),c&&c.length>0&&r&&r.length>0&&(d.message="(".concat(c.length,")Becas eliminadas satisfactoriamente,<br>(").concat(r.length,")Becas no eliminadas"),d.icon="success"),e.getBecasOtorgadas(),e.$alert(d.message,d.icon,!0);case 12:return o.a(2)}},o,null,[[3,5,6,7],[1,9,10,11]])})));case 2:return o.a(2)}},o)}))()},eliminarBecaOtorgada:function(e){return T()(I()().m(function o(){return I()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,y.$http.delete("api/becaController/deleteBecaOto",{params:{datos:{ID_BECA_OTO:e.ID_BECA_OTO}}}))}},o)}))()}},beforeMount:function(){var e=this;this.getMonedas(),this.getConceptos(),this.crearBotones(),this.crearBotonesReportes(),y.$http.get("api/anioController/getAnios",{params:{parametros:{response:"combo"}}}).then(function(o){e.anio=o}),this.frameworkComponents={agSelect:G.A,actionButton:Q.A};var o=this,a=y.$http.get("api/MesesController/getMeses",{params:{parametros:{response:"combo"}}});Promise.all([a]).then(function(a){var t=D()(a,1);t[0];e.columnDefs=[{headerName:"Id",field:"ID_BECA_OTO",sortable:!0,width:80},{headerName:"Año",field:"ANOBEC",width:60},{headerName:"Código",field:"ALUCOD",sortable:!0,width:90},{headerName:"Apellido y Nombres",sortable:!0,field:"NOMCOMP",width:250},{headerName:"Beca",field:"BECADES",width:170},{headerName:"Motivo",field:"MOTIVO",width:140},{headerName:"Tipo de Beca",field:"BECATIPODES",width:100},{headerName:"Mes Inicio",field:"MESINIBECDES",width:100},{headerName:"Mes Fin",field:"MESFINBECDES",width:100},{headerName:"",cellRenderer:Q.A,cellRendererParams:{label:"Editar",title:"Editar",onClick:function(e){this.$router.push({name:"tesoreria.asignacionBecas.form",params:{id:e.data.ID_BECA_OTO}})}},filter:!1,hide:e.nivelAcceso<z["default"].LECTURA_ESCRITURA,width:40},{headerName:"",filter:!1,cellRenderer:Q.A,cellRendererParams:{icon:"delete",label:"Eliminar",title:"Eliminar",onClick:function(e){var a=[e.data],t={ID_BECA_OTO:a[0].ID_BECA_OTO,ALUCOD:a[0].ALUCOD,ANOBEC:a[0].ANOBEC,MESINIBEC:a[0].MESINIBEC,MESFINBEC:a[0].MESFINBEC};o.eliminarBecaOtorgada(t)}},hide:!0,width:40}],e.getBecasOtorgadas()})}},ee=a(12807);const oe=(0,ee.A)(K,[["render",M]]);var ae=oe}}]);