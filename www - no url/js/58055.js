"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[58055],{80436:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var a=n(61758),i=n(58790),o={class:"col-xs-12 col-md-6"},l={class:"row q-pa-sm gutter-xs"},s={class:"col-xs-12"},c={class:"col-xs-12"},r={class:"row q-pa-md justify-center"};function u(e,t){var n=(0,a.g2)("sie-select"),u=(0,a.g2)("q-btn"),d=(0,a.g2)("q-card"),p=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(p,{class:(0,i.C4)(["reportesAcceso column",e.isLess?"bg-white":""])},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",{class:(0,i.C4)(["row col justify-center",e.isLess?"":"items-center"])},[(0,a.Lk)("div",o,[(0,a.Q3)("card"),(0,a.bF)(d,{class:(0,i.C4)(["q-px-md q-py-lg",e.isLess?"no-shadow":""])},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",l,[(0,a.Lk)("div",s,[(0,a.bF)(n,{type:"outlined",modelValue:e.ano,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.ano=t}),options:e.dataAniovac,label:"ANO",val:"ANO",placeholder:"Año"},null,8,["modelValue","options"])]),(0,a.Lk)("div",c,[(0,a.bF)(n,{type:"outlined",modelValue:e.periodo,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.periodo=t}),options:e.dataDuravac,label:"DURADES",val:"DURACOD",placeholder:"Periodo"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",r,[e.nivelAcceso?((0,a.uX)(),(0,a.Wv)(u,{key:0,class:"q-mx-xs",icon:"save",color:"secondary",onClick:e.grabar,label:"GRABAR"},null,8,["onClick"])):(0,a.Q3)("v-if",!0)])]}),_:1},8,["class"])])],2)]}),_:1},8,["class"])}n(52133),n(50310),n(6724),n(83190);var d=n(6123),p=n(57668),v=n(80660),h=n(81288),m=(n(18105),n(69027)),f=n(16648),g=(n(2819),n(88275)),C=n(93616),A=(n(3927),n(982)),b=n(76080),k=n.n(b),y=n(45254),D=n.n(y),S=(n(71225),n(10239),n(5962),{emits:["update:modelValue","input"],components:{sieSelect:C.A},props:{nemo:{type:String},cursocod:{type:String},grupocod:{type:String},bimecod:{type:String}},watch:{nemo:function(e){this.getCompetencias()},cursocod:function(e){this.getCompetencias()},grupocod:function(e){this.getCompetencias()},bimecod:function(e){this.getCompetencias()}},data:function(){return{value:null,dataCompetencias:[],niveles:[],competencia:null}},methods:{getCompetencias:function(){var e=this,t={nemo:this.nemo,cursocod:this.cursocod,grupocod:this.grupocod,bimecod:this.bimecod};this.$http.get("api/HyoCritdescs/getDescripcion",{params:t}).then(function(t){e.dataCompetencias=t;var n=[];t.length>0&&(n.push({data:t,nivel:0,value:null,parent:null,level:t[0].level}),e.niveles=n)})},getChildren:function(e){var t=e.data,n=e.value,a=e.parent,i=a?a.split("|"):[],o=null;if(i.length>0){i.push(n);for(var l=0;l<i.length;l++)t=this.getChildren({data:t,value:i[l]});o=t}else for(var s=0;s<t.length;s++)t[s].value===n&&(o=t[s].children);return o},inputCompetencia:function(e){var t=this;return function(n){t.cambiaCompetencia(n,e)}},cambiaCompetencia:function(e,t){var n=t.parent,a=this.getChildren({data:this.dataCompetencias,value:e,parent:n});if(a){var i=n?n+"|"+e:e,o=this.niveles.filter(function(e){return e.nivel<=t.nivel});o.push({data:a,value:null,nivel:t.nivel+1,parent:i,level:a[0].level}),this.niveles=o}else this.competencia=e,this.$emit("update:modelValue",e),this.$emit("input",e)}},render:function(){for(var e=[],t=0;t<this.niveles.length;t++){var n=this.niveles[t];e.push((0,a.h)(C.A,{type:"outlined",modelValue:n.value,options:n.data,label:"label",val:"value",placeholder:n.level,onInput:this.inputCompetencia(n)}))}if(this.niveles)return(0,a.h)("div",{class:"col-xs-12"},e)},created:function(){var e=this;return D()(k()().m(function t(){return k()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getCompetencias();case 1:return t.a(2)}},t)}))()}}),w={components:{Competencias:S,sieSelect:C.A,sieSalones:g.Ay,QSelect:f.S,QDatetime:d.T5,QPageSticky:d._U,QFab:d.l6,QFabAction:d.B$,sieInfo:p["default"],alertModal:m.alertModal,QPage:d.Tu,QCard:d.C$,QBtn:d.Il},data:function(){return{nivelAcceso:null,dataDuravac:[],dataAniovac:[],ano:null,periodo:null,sieInfo:(0,p["default"])(),contenidos:[],competencia:null}},computed:{isLess:function(){return(0,h.isLess)()}},methods:{getAniovac:function(e){var t=this;v.$http.get("api/MantenimientoController/getAniovac").then(function(e){t.dataAniovac=e.map(function(e){return"S"==e.VIGENTE&&(t.ano=e.ANO),e})})},getDuravac:function(e){var t=this;v.$http.get("api/MantenimientoController/getDuravac").then(function(e){t.dataDuravac=e.map(function(e){return"S"==e.VIGENTE&&(t.periodo=e.DURACOD),e})})},grabar:function(){var e=this;v.$http.post("api/MantenimientoController/asignarAniovac",{DURACOD:this.periodo,ANO:this.ano}).then(function(t){e.$store.dispatch("usuario/setYear",e.ano),(0,A["default"])("Año y periodo Actualizados","success")})}},created:function(){this.nivelAcceso=this.sieInfo.ruta.nivel>1,this.getAniovac(),this.getDuravac()}},L=n(12807);const V=(0,L.A)(w,[["render",u]]);var Q=V}}]);