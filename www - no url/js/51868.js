"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[51868],{29487:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var o=t(61758),r=t(58790),a={class:"row"},l={class:"col-xs-12 col-sm-6 row"},i={class:"text-h6"},u={class:"col-xs-12 col-sm-6 column"},s={class:"col"},c={class:"col-12 column items-end justify-center"},m={class:"flex"},f={class:"flex-item"},C={class:"flex-item"},d={class:"flex-item"},O={class:"flex-item margin-top"},p={class:"flex-item"},D={class:"col-12"};function E(e,n){var t=(0,o.g2)("q-icon"),E=(0,o.g2)("q-btn"),h=(0,o.g2)("q-card-section"),N=(0,o.g2)("q-separator"),A=(0,o.g2)("q-select"),v=(0,o.g2)("q-date"),I=(0,o.g2)("q-popup-proxy"),g=(0,o.g2)("q-input"),F=(0,o.g2)("q-checkbox"),b=(0,o.g2)("q-card");return(0,o.uX)(),(0,o.Wv)(b,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(h,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.Lk)("div",l,[(0,o.bF)(t,{class:"cursor-pointer back",name:"arrow_back",onClick:e.volver},null,8,["onClick"]),(0,o.Lk)("div",i,(0,r.v_)(e.titleForm),1)]),(0,o.Lk)("div",u,[(0,o.Lk)("div",s,[(0,o.Lk)("div",c,[(0,o.Lk)("div",null,[(0,o.bF)(E,{class:"q-mb-xs q-mr-sm",size:"sm",icon:"save",label:"Guardar",color:"primary",onClick:e.submitEvent},null,8,["onClick"])])]),n[13]||(n[13]=(0,o.Lk)("div",{class:"col-12 column items-end justify-center"},null,-1))])])])]}),_:1}),(0,o.bF)(N),(0,o.bF)(h,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",m,[(0,o.Lk)("div",f,[(0,o.bF)(A,{class:"margin-top",style:{width:"40%"},modelValue:e.form.ANOCAL,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.ANOCAL=n}),"option-value":"value","option-label":"label",options:e.opAnios,label:"Años",onInput:e.selectMont},null,8,["modelValue","options","onInput"]),(0,o.bF)(A,{class:"margin-top",style:{width:"40%"},"option-value":"value",modelValue:e.form.MESCAL,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.MESCAL=n}),"option-label":"label",options:e.monthsOptions,label:"Mes",onInput:e.selectMont},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",C,[(0,o.bF)(A,{style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.CONCOB,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.form.CONCOB=n}),options:e.concepOpt,label:"Concepto"},null,8,["modelValue","options"]),(0,o.bF)(A,{style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.ID_PERFIL,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.form.ID_PERFIL=n}),options:e.perfil,label:"Perfil"},null,8,["modelValue","options"])]),(0,o.Lk)("div",d,[(0,o.bF)(A,{class:"width",style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.INSTRUCOD,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.form.INSTRUCOD=n}),options:e.nivOption,label:"Nivel",onInput:e.getGrados},null,8,["modelValue","options","onInput"]),(0,o.bF)(A,{class:"width",style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.GRADOCOD,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.form.GRADOCOD=n}),options:e.gradOption,label:"Grado"},null,8,["modelValue","options"])]),(0,o.Lk)("div",O,[(0,o.bF)(g,{style:{width:"40%"},"reverse-fill-mask":"",modelValue:e.form.FECEMI,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.form.FECEMI=n}),maxlength:"10",mask:"####/##/##",label:"Fecha"},{append:(0,o.k6)(function(){return[(0,o.bF)(t,{class:"cursor-pointer",name:"date_range"},{default:(0,o.k6)(function(){return[(0,o.bF)(I,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)(function(){return[(0,o.bF)(v,{mask:"YYYY/MM/DD",modelValue:e.form.FECEMI,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.form.FECEMI=n})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"]),(0,o.bF)(g,{style:{width:"40%"},"reverse-fill-mask":"",modelValue:e.form.FECVEN,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.form.FECVEN=n}),maxlength:"10",mask:"####/##/##",label:"Fecha"},{append:(0,o.k6)(function(){return[(0,o.bF)(t,{class:"cursor-pointer",name:"date_range"},{default:(0,o.k6)(function(){return[(0,o.bF)(I,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)(function(){return[(0,o.bF)(v,{mask:"YYYY/MM/DD",modelValue:e.form.FECVEN,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.form.FECVEN=n})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,o.Lk)("div",p,[(0,o.bF)(A,{style:{width:"40%"},"option-value":"value","option-label":"label",options:e.monOption,label:"Moneda",modelValue:e.form.MONCOD,"onUpdate:modelValue":n[10]||(n[10]=function(n){return e.form.MONCOD=n})},null,8,["options","modelValue"]),(0,o.bF)(g,{mstyle:"width: 40%",type:"number",label:"Descuento",placeholder:"Ingrese Monto de Descuento",modelValue:e.form.MONTO,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.form.MONTO=n})},null,8,["modelValue"])]),(0,o.Lk)("div",D,[(0,o.bF)(F,{modelValue:e.repetir,"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.repetir=n}),label:"Continuar registrando?"},null,8,["modelValue"])])])]}),_:1})]}),_:1})}var h=t(76080),N=t.n(h),A=t(45254),v=t.n(A),I=(t(30683),t(71225),t(52133),t(10239),t(50310),t(5962),t(6724),t(83190),t(52776),t(81813),t(68017),t(88567)),g=t(95718),F=t(20456),b=t(53380),L=t(3112),M=t(19852),w=t(57668),R=t(54489),V=t(80660),k=t(64208),S=t(4437),P=t(6123),T=t(95477),_=t(41615),U={components:{QCheckbox:L.A,QCard:I.A,QCardSection:g.A,QCardActions:F.A,QSeparator:b.A,formulario:M.A,QInput:k.A,QSelect:R.S,QDate:S.A,QDatetime:P.T5,QPopupProxy:T.A,QIcon:P.bP,QBtn:P.Il},data:function(){return{repetir:!1,title:"",titleForm:"Agregar Calendario de Descuento",monthsOptions:[],concepOpt:[],nivOption:[],gradOption:[],monOption:[],afecOption:[],tipOption:[],opAnios:[],perfil:[],ID_CALENDAR:this.$route.params.id||0,form:{ID_PERFIL:"",ANOCAL:"",MESCAL:"",CONCOB:"",INSTRUCOD:"",GRADOCOD:"",MONCOD:"",FECEMI:"",FECVEN:"",MONTO:"",TIPAFE:"I",PERCOB:"P",DEUDACOD:"",SECCIONCOD:"T",TIPO_CALENDARIO:2,CONDICION:""}}},methods:{validate:function(e){var n="";return e.MESCAL?e.CONCOB?e.ID_PERFIL?e.INSTRUCOD?e.GRADOCOD?e.FECEMI?e.FECVEN?e.MONCOD?"number"!==typeof e.MONTO&&(n="No se registro correctamente el monto del calendario"):n="No se seleccionó el tipo de moneda del calendario":n="No se seleccionó la fecha de vencimiento del calendario":n=" No seleccionó la fecha de emision del calendario":n=" No seleccionó el grado del concepto":n=" No seleccionó el nivel del concepto":n=" No seleccionó el perfil del concepto":n="No seleccionó el concepto del calendario":n=" No seleccionó el mes del calendario",n.trim().length>0?{status:"error",exception:n}:{status:"ok"}},volver:function(){this.$router.push({name:"tesoreria.asignacionDescuentos.listar"})},selectMont:function(e){var n=new Date(this.form.ANOCAL.value,e,0).getDate();this.form.FECEMI="".concat(this.form.ANOCAL.value,"/").concat(e,"/01"),this.form.FECVEN="".concat(this.form.ANOCAL.value,"/").concat(e,"/").concat(n)},submitEvent:function(){0!==this.ID_CALENDAR?this.updateCalendario():this.nuevoCalendario()},getAnio:function(){var e=this;return v()(N()().m(function n(){var t;return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,V.$http.get("api/anioController/getAnios");case 1:t=n.v,t.map(function(n){e.opAnios.push({label:n.ANO,value:n.ANO})}),e.form.ANOCAL={value:(0,w["default"])().ano,label:(0,w["default"])().ano};case 2:return n.a(2)}},n)}))()},updateCalendario:function(){var e=this;return v()(N()().m(function n(){var t;return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.validate(e.form);case 1:t=n.v,"error"===t.status?e.$alert(t.exception,"warning"):e.$confirm("Desea realemente editar este calendario de descuento ?","warning").onOk(v()(N()().m(function n(){return N()().w(function(n){while(1)switch(n.n){case 0:try{e.$http.post("api/calendarController/updateCalendar",{params:{ID_CALENDAR:e.ID_CALENDAR,ID_PERFIL:e.form.ID_PERFIL,ANOCAL:e.form.ANOCAL.value||e.form.ANOCAL,MESCAL:e.form.MESCAL,CONCOB:e.form.CONCOB,INSTRUCOD:e.form.INSTRUCOD,GRADOCOD:e.form.GRADOCOD,MONCOD:e.form.MONCOD,FECEMI:e.form.FECEMI,FECVEN:e.form.FECVEN,MONTO:e.form.MONTO,TIPAFE:"I",PERCOB:"P",DEUDACOD:"",SECCIONCOD:"T",TIPO_CALENDARIO:2,CONDICION:""}}),e.$alert("El calendario de descuento fue actualizado","success")}catch(n){e.$alert(n.error.message,"warning")}case 1:return n.a(2)}},n)})));case 2:return n.a(2)}},n)}))()},getPerfiles:function(){var e=this;return v()(N()().m(function n(){return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,_["default"].API_PERFILES();case 1:e.perfil=n.v;case 2:return n.a(2)}},n)}))()},nuevoCalendario:function(){var e=this;return v()(N()().m(function n(){var t;return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.validate(e.form);case 1:t=n.v,"error"===t.status?e.$alert(t.exception,"warning"):e.$confirm("Desea agregar el calendario de descuento ?","warning").onOk(v()(N()().m(function n(){var t;return N()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,console.log(e.form.ANOCAL),n.n=1,e.$http.post("api/calendarController/addCalendar",{data:{ID_PERFIL:e.form.ID_PERFIL,ANOCAL:e.form.ANOCAL.value,MESCAL:e.form.MESCAL,CONCOB:e.form.CONCOB,INSTRUCOD:e.form.INSTRUCOD,GRADOCOD:e.form.GRADOCOD,MONCOD:e.form.MONCOD,FECEMI:e.form.FECEMI,FECVEN:e.form.FECVEN,MONTO:e.form.MONTO,TIPAFE:"I",PERCOB:"P",DEUDACOD:"",SECCIONCOD:"T",TIPO_CALENDARIO:2,CONDICION:""}});case 1:e.$alert("El calendario  de descuento fue agreagdo sastifactoriamente","success"),e.repetir||0!==e.ID_CALENDAR||e.clear(),n.n=3;break;case 2:n.p=2,t=n.v,e.$alert(t.error.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])})));case 2:return n.a(2)}},n)}))()},getAno:function(){return(0,w["default"])().ano},getConceptos:function(){var e=this;return v()(N()().m(function n(){var t;return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,V.$http.get("api/CalendarController/getConceptos");case 1:t=n.v,t.map(function(n){return e.concepOpt.push({label:n.CONDES,value:n.CONCOB})});case 2:return n.a(2)}},n)}))()},getNivel:function(){var e=this;return v()(N()().m(function n(){var t;return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,V.$http.get("api/CalendarController/getNivel");case 1:t=n.v,t.map(function(n){return e.nivOption.push({label:n.INSTRUDES,value:n.INSTRUCOD})});case 2:return n.a(2)}},n)}))()},getMonedas:function(){var e=this;return v()(N()().m(function n(){return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,_["default"].API_MONEDAS();case 1:e.monOption=n.v;case 2:return n.a(2)}},n)}))()},getGrados:function(e){var n=this;return v()(N()().m(function e(){var t,o;return N()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,V.$http.get("api/CalendarController/getGrado");case 1:t=e.v,o=t.filter(function(e){return e.INSTRUCOD===n.form.INSTRUCOD}),n.gradOption=[],o.map(function(e){return n.gradOption.push({label:e.GRADODES,value:e.GRADOCOD})});case 2:return e.a(2)}},e)}))()},dayConverter:function(e){return e.replace("T"," ").split(" ")[0].replace(/-/g,"/")},searchCalendar:function(){var e=this;return v()(N()().m(function n(){var t;return N()().w(function(n){while(1)switch(n.n){case 0:if(0===e.ID_CALENDAR){n.n=2;break}return n.n=1,e.$http.get("api/CalendarController/getCalendarDesc",{params:{parametros:{ID_CALENDAR:e.ID_CALENDAR}}});case 1:t=n.v,e.form.ID_PERFIL=t[0]["ID_PERFIL"],e.form.MESCAL=t[0]["MESCOB"],e.form.ANOCAL=t[0]["ANOCOB"],e.form.CONCOB=t[0]["CONCOB"],e.form.INSTRUCOD=t[0]["INSTRUCOD"],e.form.GRADOCOD=t[0]["GRADOCOD"],e.form.MONCOD=t[0]["MONCOD"],e.form.FECEMI=e.dayConverter(t[0]["FECEMI"]),e.form.FECVEN=e.dayConverter(t[0]["FECVEN"]),e.form.MONTO=t[0]["MONTO"],e.form.TIPAFE=t[0]["TIPAFE"],e.form.PERCOB=t[0]["PERCOB"],e.form.SECCIONCOD=t[0]["SECCIONCOD"],e.getGrados();case 2:return n.a(2)}},n)}))()},clear:function(){this.form.ID_PERFIL="",this.form.ANOCAL="",this.form.MESCAL="",this.form.CONCOB="",this.form.INSTRUCOD="",this.form.GRADOCOD="",this.form.MONCOD="",this.form.FECEMI="",this.form.FECVEN="",this.form.MONTO="",this.form.TIPAFE="",this.form.PERCOD="",this.form.DEUDACOD="",this.form.SECCIONCOD=""},getMonth:function(){var e=this;return v()(N()().m(function n(){var t,o;return N()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,V.$http.get("api/CalendarController/getMeses");case 1:t=n.v,t.map(function(n){return e.monthsOptions.push({label:n.VALOR,value:n.CLAVE})}),n.n=3;break;case 2:n.p=2,o=n.v,e.$alert(o.error.message);case 3:return n.a(2)}},n,null,[[0,2]])}))()}},mounted:function(){this.getConceptos(),this.getPerfiles(),this.getNivel(),this.getGrados(),this.getMonedas(),this.searchCalendar(),this.getMonth(),this.getAnio()}},y=t(12807);const x=(0,y.A)(U,[["render",E]]);var B=x}}]);