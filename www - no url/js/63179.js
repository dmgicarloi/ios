"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[63179],{63179:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(61758);function i(e,n){var t=this,i=(0,r.g2)("sie-table"),o=(0,r.g2)("q-card-section"),a=(0,r.g2)("q-card"),s=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(s,{class:"carnet-personal q-pa-sm"},{default:(0,r.k6)(function(){return[(0,r.bF)(a,null,{default:(0,r.k6)(function(){return[(0,r.Q3)('header-btn(name="Carnet Personal" :buttons="buttons")'),(0,r.bF)(o,null,{default:(0,r.k6)(function(){return[(0,r.bF)(i,{data:e.rows,columns:e.fields,selection:"multiple",config:e.config,ref:"profe",context:t,css:{height:"78vh"}},null,8,["data","columns","config"])]}),_:1})]}),_:1})]}),_:1})}var o=t(76080),a=t.n(o),s=t(45254),c=t.n(s),l=(t(39866),t(6123)),u=t(95718),f={data:function(){return{config:{},rows:[],fields:[{name:"PROFCOD",label:"CÃ³digo",field:"PROFCOD",align:"left",sortable:!0},{name:"NOMCOMP",label:"Nombres",field:"NOMCOMP",align:"left",sortable:!0},{name:"USUCOD",label:"Usuario",field:"USUCOD",align:"left",sortable:!0}]}}},d=t(57668),p=t(81288),h=t(78131),g=t(2819),m={mixins:[f],components:{QCardSection:u.A,QPage:l.Tu,QCard:l.C$},data:function(){var e=this;return{sie:(0,d["default"])(),isReportePersonalizadoQR:["0325","0023"].includes((0,d["default"])().colcod),buttons:[{icon:"folder_download",label:"Descargar QR",click:function(){e.exportar()}},{icon:"contact_card",label:"Exportar carnet",click:function(){e.imprimir()}}]}},computed:{isLess:function(){return(0,p.isLess)()}},methods:{profeSelected:function(){return this.$refs.profe.rowsSelected(["PROFCOD"])},imprimir:function(){var e=this.profeSelected();if(0===e.length)return this.$notify("Seleccione al menos un registro","warning"),!1;if(this.isReportePersonalizadoQR){var n=e,t={ano:this.sie.ano,repcod:"carnetAsistenciaQrProfe",modoImpresion:"pdf",profcods:n};(0,g.exportFilePhp)(t,"webservice/reportes/reporte")}else{var r="?codigos="+e,i=this.sie.api+"/Profe/generarCarnet"+r+"&token2="+this.sie.token+"&access_token="+this.sie.token;(0,h["default"])(i,"data.html",!0)}},exportar:function(){var e=this.profeSelected();if(0===e.length)return this.$notify("Seleccione al menos un registro","warning"),!1;var n="?codigos="+e,t=this.sie.api+"/Profe/generarQrDescargaBloque"+n+"&access_token="+this.sie.token;(0,h["default"])(t,"data.zip")},listPersonal:function(){var e=this;return c()(a()().m(function n(){return a()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/Profe/listPersonal");case 1:e.rows=n.v;case 2:return n.a(2)}},n)}))()}},created:function(){var e=this;return c()(a()().m(function n(){return a()().w(function(n){while(1)switch(n.n){case 0:e.listPersonal();case 1:return n.a(2)}},n)}))()}},b=t(12807);const P=(0,b.A)(m,[["render",i]]);var v=P}}]);