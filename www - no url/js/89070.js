"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[89070],{89070:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var a=n(61758);function l(e,t){var n=(0,a.g2)("q-tab"),l=(0,a.g2)("q-tabs"),o=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(o,{class:"column q-card"},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{animated:"",swipeable:"",align:"justify",inverted:"",modelValue:e.tabSelect,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.tabSelect=t})},{title:(0,a.k6)(function(){return[(0,a.bF)(n,{default:"",name:"info",label:"info"}),(0,a.bF)(n,{name:"caracteristicas",label:"Caracteristica"})]}),default:(0,a.k6)(function(){return[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.tabSelect),{class:"q-ma-sm","keep-alive":"",style:{height:"80vh","overflow-y":"scroll"},sie:e.sie},null,8,["sie"]))]}),_:1},8,["modelValue"])]}),_:1})}var o=n(6123),i=n(58790),u={class:"column"},r={class:"q-ma-sm",style:{"max-heigth":"40vh"}},s={class:"row justify-center"},c=["src"],d={key:0},f={key:0,class:"row justify-end"},m={key:1,class:"row justify-center"};function I(e,t){var n=(0,a.g2)("header-btn"),l=(0,a.g2)("q-input"),o=(0,a.g2)("sie-modal"),I=(0,a.g2)("q-checkbox"),p=(0,a.g2)("q-td"),b=(0,a.g2)("q-btn"),C=(0,a.g2)("q-select"),A=(0,a.g2)("q-field"),T=(0,a.g2)("q-popup-edit"),E=(0,a.g2)("q-tr"),h=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.bF)(n,{name:"Registro de Tablet",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(o,{modelValue:e.modalAdd,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.modalAdd=t}),title:e.titulo,onSubmit:t[1]||(t[1]=function(t){return e.saveModal(e.modalInfo)}),footer:!e.modalInfo.info},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",r,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.campos,function(t){return(0,a.uX)(),(0,a.Wv)(l,{class:"q-if-outlined",modelValue:e.modalInfo[t.ID_CARACTERISTICA],"onUpdate:modelValue":function(n){return e.modalInfo[t.ID_CARACTERISTICA]=n},"float-label":t.DESCRIPCION,disable:e.modalInfo.info},null,8,["modelValue","onUpdate:modelValue","float-label","disable"])}),256)),(0,a.Lk)("div",s,[e.modalInfo.info?((0,a.uX)(),(0,a.CE)("img",{key:0,class:"col",src:e.modalInfo.qr},null,8,c)):(0,a.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","title","footer"]),(0,a.bF)(h,{class:"q-card",data:e.cractActuales,columns:e.columns,"row-key":"ID_CARACTERISTICA",style:{"max-height":"70vh"},selection:"multiple",selected:e.infoSelect,"onUpdate:selected":t[3]||(t[3]=function(t){return e.infoSelect=t})},{body:(0,a.k6)(function(n){return[(0,a.bF)(E,{props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(p,null,{default:(0,a.k6)(function(){return[(0,a.bF)(I,{modelValue:e.infoSelect,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.infoSelect=t}),val:n.row},null,8,["modelValue","val"])]}),_:2},1024),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.columns,function(t){return(0,a.uX)(),(0,a.Wv)(p,{key:t.field},{default:(0,a.k6)(function(){return[t.campoEditable?((0,a.uX)(),(0,a.CE)("span",d,(0,i.v_)(n.row[t.field]),1)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},["EDIT"===t.field?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(b,{flat:"",dense:"",round:"",icon:"info",onClick:function(t){return e.openEdit(n.row,!0)}},null,8,["onClick"]),(0,a.bF)(b,{flat:"",dense:"",round:"",icon:"edit",onClick:function(t){return e.openEdit(n.row)}},null,8,["onClick"]),(0,a.bF)(b,{flat:"",dense:"",round:"",icon:"delete",onClick:function(t){return e.eliminarTablet(n.row)}},null,8,["onClick"])])):((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("span",null,(0,i.v_)(e.estadosObj[n.row.ESTADO]),1)]))],64)),t.editable?((0,a.uX)(),(0,a.Wv)(T,{key:2,modelValue:n.row[t.field],"onUpdate:modelValue":function(e){return n.row[t.field]=e},disable:"ESTADO"===t.field&&2===n.row.ESTADO,onSave:function(a){return e.saveModal(n.row,t.realName)}},{default:(0,a.k6)(function(){return["ESTADO"===t.field?((0,a.uX)(),(0,a.Wv)(C,{key:0,class:"q-if-outlined",modelValue:n.row.ESTADO,"onUpdate:modelValue":function(e){return n.row.ESTADO=e},options:e.estados,"float-label":"Estado",onInput:function(t){return e.saveModal(n.row,"ESTADO")}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])):((0,a.uX)(),(0,a.Wv)(A,{key:1,count:""},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{modelValue:n.row[t.field],"onUpdate:modelValue":function(e){return n.row[t.field]=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024))]}),_:2},1032,["modelValue","onUpdate:modelValue","disable","onSave"])):(0,a.Q3)("v-if",!0)]}),_:2},1024)}),128))]}),_:2},1032,["props"])]}),_:1},8,["data","columns","selected"])])}n(30683),n(23825),n(10239),n(50310),n(90095),n(70199),n(83190),n(27153),n(66307),n(13715),n(24066);var p=n(80660),b=n(30640),C=n(30545),A=n(982),T=n(69027),E=n(78131),h={components:{sieModal:b.A,QCheckbox:o.vZ,QTable:C.A,QTd:o.Ef,QToggle:o.c5,QPopupEdit:o.GT,QInput:o.ie,QSelect:o.Si,QTr:o.qh,QBtn:o.Il,QField:o.Om},props:["sie"],data:function(){return{cractActuales:[],columns:[],campos:[],modalAdd:!1,modalInfo:{},estados:[{label:"No Disponible",value:0},{label:"Disponible",value:1},{label:"Perdida",value:3}],infoSelect:[],estadosObj:{0:"No Disponible",1:"Disponible",2:"Prestado",3:"Perdida"},titulo:null}},methods:{openModal:function(){var e=this;this.modalInfo={},p.$http.get("api/HyoTabletcaracteristicas/getCaracteristicas").then(function(t){var n=t.json;e.campos=n,n.forEach(function(t){e.modalInfo[t.ID_CARACTERISTICA]=null}),e.modalAdd=!0,e.titulo="Agregar Tablet"})},openEdit:function(e,t){var n=this,a=e.ID_TABLET;Promise.all([p.$http.get("api/HyoTabletcaracteristicas/getCaracteristicas"),p.$http.get("api/HyoTablets/getDataTablet",{params:{ID_TABLET:a}})]).then(function(e){n.campos=e[0].json,n.modalInfo.ID_TABLET=e[1].json.ID_TABLET;var a=e[1].json.ID_TABLET;e[0].json.forEach(function(l){n.modalInfo[l.ID_CARACTERISTICA]=e[1].json[l.ID_CARACTERISTICA],t&&e[1].json[l.ID_CARACTERISTICA]&&(a=a+"|"+l.DESCRIPCION+"="+e[1].json[l.ID_CARACTERISTICA])}),n.modalInfo.info=t,n.titulo=t?"Información de tablet":"Editar Tablet",t&&(n.modalInfo.qr=n.sie.url+"/".concat(p.API_LMS,"/api/HyoQr/generarQr/")+a),n.modalAdd=!0})},printPdf:function(){var e=this.sie.api+"/HyoTablets/getQrBloque?access_token="+this.sie.token;if(this.infoSelect.length>0){var t=[];this.infoSelect.forEach(function(e){t.push(e.ID_TABLET)}),e="".concat(e,"&ID_TABLET=").concat(JSON.stringify(t))}console.log(e),(0,E["default"])(e,"qr.pdf",!0)},saveModal:function(e,t){var n=this,a={},l="",o=0;if(t){a.info={};var i=["ESTADO"].indexOf(t)>=0?"ESTADO":"CAMPO"+t;a.info[t]=e[i]}else a.info=e,this.campos.forEach(function(t){if(1===t.OBLIGATORIO&&(!e[t.ID_CARACTERISTICA]||0===e[t.ID_CARACTERISTICA].length)){var n=0===l.length?"":", ";l=l+n+t.DESCRIPCION,o++}});0===o?e.ID_TABLET?(a.id=e.ID_TABLET,delete a.info.ID_TABLET,p.$http.post("api/HyoTablets/updateTablet",a).then(function(e){var t=e.json;(0,A["default"])(n.$t("mensajes."+t.msg),t.type),t.type||(n.init(),n.modalAdd=!1)})):p.$http.post("api/HyoTablets/saveTablet",{info:e,estado:1}).then(function(e){var t=e.json;(0,A["default"])(n.$t("mensajes."+t.msg),t.type),t.type||(n.init(),n.modalAdd=!1)}):(0,A["default"])("Los campos "+l+" son obligatorios")},init:function(){var e=this;p.$http.get("api/HyoTablets/getTablets").then(function(t){var n=t.json;e.columns=[],n.heads.forEach(function(t){e.columns.push({name:"CAMPO".concat(t.ID_CARACTERISTICA),label:"".concat(t.DESCRIPCION),field:"CAMPO".concat(t.ID_CARACTERISTICA),align:"left",sortable:!0,realName:t.ID_CARACTERISTICA,campoEditable:!0,editable:!0})}),e.columns.push({name:"ESTADO",label:"Estado",field:"ESTADO",align:"center",realName:"ESTADO",editable:!0}),e.columns.push({name:"EDIT",field:"EDIT",align:"right",sortable:!0}),e.cractActuales=n.info})},eliminarTablet:function(e){var t=this,n=e.ID_TABLET;(0,T.dialogDelete)().then(function(e){e&&p.$http.post("api/HyoTablets/deleteTablet",{ID_TABLET:n}).then(function(e){var n=e.json;(0,A["default"])(t.$t("mensajes."+n.msg),n.type),n.type||t.init()})})}},computed:{buttons:function(){var e=[];return 3===this.sie.ruta.nivel&&(e.push({label:"Agregar",icon:"add",click:this.openModal}),e.push({label:"Imprimir",icon:"print",click:this.printPdf})),e}},mounted:function(){this.init()}},v=n(12807);const g=(0,v.A)(h,[["render",I]]);var D=g,O=n(8445),S=n.n(O),R=n(29104),k={class:"column"},_={class:"q-ma-sm"},V={class:"q-table q-table-horizontal-separator q-card"},y={class:"q-tr"},q={class:"q-th"},L={class:"q-th"},P={class:"q-tr"},F={class:"q-td"},j={class:"q-td"},Q={class:"q-td"},w={class:"row justify-center"},N={class:"q-td"},B={class:"row justify-end"};function U(e,t){var n=(0,a.g2)("header-btn"),l=(0,a.g2)("q-input"),o=(0,a.g2)("q-checkbox"),u=(0,a.g2)("sie-modal"),r=(0,a.g2)("q-icon"),s=(0,a.g2)("q-field"),c=(0,a.g2)("q-popup-edit"),d=(0,a.g2)("q-toggle"),f=(0,a.g2)("q-btn"),m=(0,a.g2)("draggable");return(0,a.uX)(),(0,a.CE)("div",k,[(0,a.bF)(n,{name:"Creación de características",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(u,{modelValue:e.modalAdd,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.modalAdd=t}),title:"Agregar característica",onSubmit:t[3]||(t[3]=function(t){return e.saveModal(e.modalInfo)})},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",_,[(0,a.bF)(l,{class:"q-if-outlined",modelValue:e.modalInfo.DESCRIPCION,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.modalInfo.DESCRIPCION=t}),"float-label":"Descripción"},null,8,["modelValue"]),(0,a.bF)(o,{modelValue:e.modalInfo.OBLIGATORIO,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.modalInfo.OBLIGATORIO=t}),"true-value":1,"false-value":0},{default:(0,a.k6)(function(){return S()(t[5]||(t[5]=[(0,a.eW)("Obligatorio",-1)]))}),_:1},8,["modelValue"])])]}),_:1},8,["modelValue"]),(0,a.Lk)("table",V,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",y,[(0,a.Lk)("th",q,[(0,a.bF)(r,{name:"import_export"})]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.columns,function(e){return(0,a.uX)(),(0,a.CE)("th",L,(0,i.v_)(e.label),1)}),256))])]),(0,a.bF)(m,{modelValue:e.cractActuales,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.cractActuales=t}),tag:"tbody",onChange:e.ordenarPasos},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.cractActuales,function(t){return(0,a.uX)(),(0,a.CE)("tr",P,[(0,a.Lk)("td",F,[(0,a.bo)((0,a.bF)(r,{name:"blur_on",size:"20px"},null,512),[[R.aG,!t.noEditable]])]),(0,a.Lk)("td",j,[(0,a.eW)((0,i.v_)(t["DESCRIPCION"]),1),(0,a.bF)(c,{modelValue:t.DESCRIPCION,"onUpdate:modelValue":function(e){return t.DESCRIPCION=e},onSave:function(n){return e.saveModal(t)}},{default:(0,a.k6)(function(){return[(0,a.bF)(s,{count:""},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{modelValue:t.DESCRIPCION,"onUpdate:modelValue":function(e){return t.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),(0,a.Lk)("td",Q,[(0,a.Lk)("div",w,[(0,a.bF)(d,{modelValue:t.OBLIGATORIO,"onUpdate:modelValue":function(e){return t.OBLIGATORIO=e},"true-value":1,"false-value":0,onInput:function(n){return e.saveModal(t)}},null,8,["modelValue","onUpdate:modelValue","onInput"])])]),(0,a.Lk)("td",N,[(0,a.Lk)("div",B,[(0,a.bF)(f,{flat:"",dense:"",round:"",icon:"delete",onClick:function(n){return e.eliminarCaracteristica(t)}},null,8,["onClick"])])])])}),256))]}),_:1},8,["modelValue","onChange"])])])}var X=n(39231),M=X.Hi,$={components:{sieModal:b.A,QCheckbox:o.vZ,QTable:C.A,QTd:o.Ef,QToggle:o.c5,QPopupEdit:o.GT,draggable:M,QInput:o.ie,QIcon:o.bP,QField:o.Om,QBtn:o.Il},props:["sie"],data:function(){return{cractActuales:[],columns:[{name:"DESCRIPCION",label:"Descripcion",field:"DESCRIPCION",align:"left",sortable:!0},{name:"OBLIGATORIO",label:"Obligatorio",field:"OBLIGATORIO",align:"center"},{name:"DEL",field:"DEL",align:"center"}],modalAdd:!1,modalInfo:{ID_CARACTERISTICA:null,DESCRIPCION:null,OBLIGATORIO:0}}},methods:{ordenarPasos:function(e){var t=[];this.cractActuales.forEach(function(e,n){e.ORDEN!=n+1&&t.push(p.$http.post("api/HyoTabletcaracteristicas/saveCaracteristica",{info:{ID_CARACTERISTICA:e.ID_CARACTERISTICA,ORDEN:n+1}}))}),Promise.all(t),this.init()},openModal:function(){this.modalAdd=!0,this.modalInfo={ID_CARACTERISTICA:null,DESCRIPCION:null,OBLIGATORIO:0}},eliminarCaracteristica:function(e){var t=this;(0,T.dialogDelete)().then(function(n){n&&p.$http.post("api/HyoTabletcaracteristicas/eliminarCaracteristica",{info:e}).then(function(e){var n=e.json;(0,A["default"])(t.$t("mensajes."+n.msg),n.type),n.type||t.init()})})},saveModal:function(e){var t=this;e.DESCRIPCION&&e.DESCRIPCION.length>0?p.$http.post("api/HyoTabletcaracteristicas/saveCaracteristica",{info:e}).then(function(e){var n=e.json;(0,A["default"])(t.$t("mensajes."+n.msg),n.type),n.type||(t.modalAdd=!1,t.init())}):(0,A["default"])("Debe colocar la descripcion del campo","error")},init:function(){var e=this;p.$http.get("api/HyoTabletcaracteristicas/getCaracteristicas").then(function(t){var n=t.json;e.cractActuales=n})}},computed:{buttons:function(){var e=[];return 3===this.sie.ruta.nivel&&e.push({label:"Agregar",icon:"add",click:this.openModal}),e}},mounted:function(){this.init()}};const H=(0,v.A)($,[["render",U]]);var G=H,x=n(57668),W={components:{QTabs:o.uw,QTab:o.zu,QTabPane:o.dg,info:D,caracteristicas:G,QPage:o.Tu},data:function(){return{tabSelect:"info",sie:(0,x["default"])()}}};const K=(0,v.A)(W,[["render",l]]);var z=K}}]);