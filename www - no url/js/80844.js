"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[80844],{80844:function(e,t,o){o.r(t),o.d(t,{default:function(){return je}});var a=o(61758);function n(e,t){var o=(0,a.g2)("nuevo"),n=(0,a.g2)("listado"),i=(0,a.g2)("timeline"),l=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(l,null,{default:(0,a.k6)(function(){return["nuevo"===e.actual?((0,a.uX)(),(0,a.Wv)(o,{key:0,onCambiarVentana:e.cambiarEstado,name:e.titulo,dataEdit:e.dataEdit},null,8,["onCambiarVentana","name","dataEdit"])):(0,a.Q3)("v-if",!0),"listado"===e.actual?((0,a.uX)(),(0,a.Wv)(n,{key:1,onCambiarVentana:e.cambiarEstado},null,8,["onCambiarVentana"])):(0,a.Q3)("v-if",!0),"timeline"===e.actual?((0,a.uX)(),(0,a.Wv)(i,{key:2,onCambiarVentana:e.cambiarEstado,dataEdit:e.dataEdit},null,8,["onCambiarVentana","dataEdit"])):(0,a.Q3)("v-if",!0)]}),_:1})}o(515);var i=o(6123),l=o(57668),r=o(58790),c={class:"column"},s={class:"q-card q-ma-md"},u={class:"row q-gutter-sm q-pa-sm"},d={class:"row q-gutter-sm q-pa-sm"},A={class:"row q-gutter-sm q-pa-sm"},f={class:"row q-gutter-sm q-pa-sm"},v={class:"col q-mx-sm"},I={class:"col column row-sm q-gutter-sm"},m={class:"row q-gutter-sm q-pa-sm justify-end"},O={class:"col"},D={key:0,class:"row q-gutter-sm col"},p={key:1,class:"text-bold"},b={key:1,class:"row q-gutter-xs"},C={class:"column q-pa-sm"},_={class:"q-table q-table-horizontal-separator"},h={class:"q-tr alto-columna"},V={class:"q-td alto-columna"},g={class:"q-td alto-columna"},F={class:"q-td alto-columna"},N={class:"row justify-end",style:{"font-size":"20px"}},E={class:"row q-gutter-sm q-pa-sm justify-end"},k={class:"row"},S={key:0,class:"column q-pa-sm"},T={class:"q-table q-table-horizontal-separator"},L={class:"q-tr alto-columna"},w={class:"q-td alto-columna"},R={class:"q-td alto-columna"},$={class:"row justify-center"},M={class:"row q-gutter-sm q-pa-sm"},q={class:"row q-gutter-sm q-pa-sm"},y={class:"row q-gutter-sm q-pa-sm"},U={class:"row q-gutter-sm q-pa-sm"};function Y(e,t){var o=(0,a.g2)("header-btn"),n=(0,a.g2)("q-input1"),i=(0,a.g2)("q-field"),l=(0,a.g2)("q-select"),Y=(0,a.g2)("q-checkbox"),G=(0,a.g2)("q-btn"),P=(0,a.g2)("q-card"),B=(0,a.g2)("sie-upload"),x=(0,a.g2)("q-download-file");return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(o,{name:e.nombre,buttons:e.buttons},null,8,["name","buttons"]),(0,a.Lk)("div",s,[(0,a.Lk)("div",u,[(0,a.bF)(i,{class:"col"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{modelValue:e.infoActivo.ID_ACTIVO_TXT,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.infoActivo.ID_ACTIVO_TXT=t}),label:"Código",disable:!0},null,8,["modelValue"])]}),_:1}),(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.CODIGO_BARRAS,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.infoActivo.CODIGO_BARRAS=t}),label:"Código de barras",rules:[function(e){return e.length<=12||"Por favor ingrese maximo 12 caractéres"}]},null,8,["modelValue","rules"]),(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.SKU,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.infoActivo.SKU=t}),label:"SKU"},null,8,["modelValue"]),(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.DESCRIPCION.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{modelValue:e.v$.infoActivo.DESCRIPCION.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.v$.infoActivo.DESCRIPCION.$model=t}),label:"Nombre"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",d,[(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.ID_MODALIDAD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"col",modelValue:e.v$.infoActivo.ID_MODALIDAD.$model,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.v$.infoActivo.ID_MODALIDAD.$model=t}),options:e.modalidades,"option-value":"ID_MODALIDAD","option-label":"DESCRIPCION",label:"Modalidad de Adquisición"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),e.infoActivo.ID_MODALIDAD?((0,a.uX)(),(0,a.Wv)(i,{key:0,class:"col",error:e.v$.infoActivo.F_INICIO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{modelValue:e.v$.infoActivo.F_INICIO.$model,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.v$.infoActivo.F_INICIO.$model=t}),type:"date",label:e.modalidadesObj[e.infoActivo.ID_MODALIDAD]["DESC_INICIO"]},null,8,["modelValue","label"])]}),_:1},8,["error","error-label"])):(0,a.Q3)("v-if",!0),e.infoActivo.ID_MODALIDAD&&1===e.modalidadesObj[e.infoActivo.ID_MODALIDAD]["ACTIVA_FIN"]?((0,a.uX)(),(0,a.Wv)(i,{key:1,class:"col",error:e.v$.infoActivo.F_FIN.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{modelValue:e.v$.infoActivo.F_FIN.$model,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.v$.infoActivo.F_FIN.$model=t}),type:"date",label:e.modalidadesObj[e.infoActivo.ID_MODALIDAD]["DESC_FIN"]},null,8,["modelValue","label"])]}),_:1},8,["error","error-label"])):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",A,[(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.ID_ESTADO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"col",modelValue:e.v$.infoActivo.ID_ESTADO.$model,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.v$.infoActivo.ID_ESTADO.$model=t}),options:e.estados,"option-value":"ID_ESTADO","option-label":"DESCRIPCION",label:"Estado"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.MARCA.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{modelValue:e.v$.infoActivo.MARCA.$model,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.v$.infoActivo.MARCA.$model=t}),label:"Marca"},null,8,["modelValue"])]}),_:1},8,["error","error-label"]),(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.MODELO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{modelValue:e.v$.infoActivo.MODELO.$model,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.v$.infoActivo.MODELO.$model=t}),label:"Modelo"},null,8,["modelValue"])]}),_:1},8,["error","error-label"]),(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.ID_PROVEEDOR.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"col",modelValue:e.v$.infoActivo.ID_PROVEEDOR.$model,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.v$.infoActivo.ID_PROVEEDOR.$model=t}),options:e.proveedoresFiltro,"option-value":"ID_PERSONA","option-label":"RAZONSOCIAL",label:"Proveedor","use-input":"",onFilter:e.filterProv},null,8,["modelValue","options","onFilter"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",f,[(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.ID_CATALOGO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"col",modelValue:e.v$.infoActivo.ID_CATALOGO.$model,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.v$.infoActivo.ID_CATALOGO.$model=t}),options:e.dataCatalogos,"option-value":"ID_CATALOGO","option-label":"DESCRIPCION",label:"Catálogo "},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),(0,a.bF)(i,{class:"col",error:e.v$.infoActivo.ID_CONDICION.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"col",modelValue:e.v$.infoActivo.ID_CONDICION.$model,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.v$.infoActivo.ID_CONDICION.$model=t}),options:e.condiciones,"option-value":"ID_CONDICION","option-label":"DESCRIPCION",label:"Condición"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"]),(0,a.bF)(Y,{modelValue:e.infoActivo.IS_VALOR,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.infoActivo.IS_VALOR=t}),"true-value":1,"false-value":0,label:"Sin Valor",color:"secondary"},null,8,["modelValue"]),0===e.infoActivo.IS_VALOR?((0,a.uX)(),(0,a.Wv)(i,{key:0,class:"col",error:e.v$.infoActivo.MONCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"col",modelValue:e.v$.infoActivo.MONCOD.$model,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.v$.infoActivo.MONCOD.$model=t}),options:e.monedas,"option-value":"MONCOD","option-label":"MONNOM",label:"Moneda"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])):(0,a.Q3)("v-if",!0),0===e.infoActivo.IS_VALOR?((0,a.uX)(),(0,a.Wv)(i,{key:1,class:"col",error:e.v$.infoActivo.VALOR.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{modelValue:e.v$.infoActivo.VALOR.$model,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.v$.infoActivo.VALOR.$model=t}),label:"Valor",type:"number"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])):(0,a.Q3)("v-if",!0),(0,a.bF)(Y,{modelValue:e.infoActivo.IS_RESERVABLE,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.infoActivo.IS_RESERVABLE=t}),"true-value":1,"false-value":0,label:"¿Es reservable?",color:"secondary"},null,8,["modelValue"])]),(0,a.Lk)("div",v,[(0,a.Lk)("div",I,[(0,a.bF)(P,{class:"col"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",m,[(0,a.Lk)("div",O,[e.detalleActivo?((0,a.uX)(),(0,a.CE)("div",D,[(0,a.bF)(n,{class:"col",modelValue:e.caracteristica.CAMPO,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.caracteristica.CAMPO=t}),label:"Campo"},null,8,["modelValue"]),(0,a.bF)(n,{class:"col",modelValue:e.caracteristica.DETALLE,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.caracteristica.DETALLE=t}),label:"Detalle"},null,8,["modelValue"])])):((0,a.uX)(),(0,a.CE)("span",p,"Atributos Adicionales"))]),e.detalleActivo?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.bF)(G,{dense:"",icon:"close",label:"Cancelar",color:"primary",onClick:t[20]||(t[20]=function(t){return e.cancelarDetalle()})}),(0,a.bF)(G,{dense:"",icon:"save",label:"Grabar",color:"primary",onClick:e.grabarDetalle},null,8,["onClick"])])):((0,a.uX)(),(0,a.Wv)(G,{key:0,dense:"",icon:"add",label:"Agregar Característica",color:"primary",onClick:t[19]||(t[19]=function(t){return e.showDetalle({})})}))]),(0,a.Lk)("div",C,[(0,a.Lk)("table",_,[t[34]||(t[34]=(0,a.Lk)("thead",{class:"alto-columna"},[(0,a.Lk)("tr",{class:"q-tr alto-columna"},[(0,a.Lk)("th",{class:"q-th alto-columna"},"Campo"),(0,a.Lk)("th",{class:"q-th alto-columna"},"Descripción"),(0,a.Lk)("th",{class:"q-th alto-columna"})])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.listaCaracteristicas,function(t,o){return(0,a.uX)(),(0,a.CE)("tr",h,[(0,a.Lk)("td",V,(0,r.v_)(t.CAMPO),1),(0,a.Lk)("td",g,(0,r.v_)(t.DETALLE),1),(0,a.Lk)("td",F,[(0,a.Lk)("div",N,[(0,a.bF)(G,{flat:"",dense:"",round:"",icon:"edit",onClick:function(o){return e.showDetalle(t)}},null,8,["onClick"]),(0,a.bF)(G,{flat:"",dense:"",round:"",icon:"delete",onClick:function(a){return e.eliminarDetalle(t,o)}},null,8,["onClick"])])])])}),256))])])])]}),_:1}),(0,a.bF)(P,{class:"col"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",E,[t[35]||(t[35]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("span",{class:"text-bold"},"Documentos Adjuntos")],-1)),(0,a.Lk)("div",k,[(0,a.bF)(B,{style:{border:"none !important"},allow:["pdf","jpg","png"],onUpload:e.uploadFile,ref:"upload",multiple:!0,onlyButton:!0,preview:!1},null,8,["onUpload"])])]),e.listaDocs.length>0?((0,a.uX)(),(0,a.CE)("div",S,[(0,a.Lk)("table",T,[t[36]||(t[36]=(0,a.Lk)("thead",{class:"alto-columna"},[(0,a.Lk)("tr",{class:"q-tr alto-columna"},[(0,a.Lk)("th",{class:"q-th alto-columna"},"Documento"),(0,a.Lk)("th",{class:"q-th alto-columna"})])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.listaDocs,function(t,o){return(0,a.uX)(),(0,a.CE)("tr",L,[(0,a.Lk)("td",w,[t.ID?((0,a.uX)(),(0,a.Wv)(x,{key:1,class:"col",src:t.url,item:t,name:t.TITULO,extension:t.EXTENSION,inline:!1},null,8,["src","item","name","extension"])):((0,a.uX)(),(0,a.Wv)(x,{key:0,class:"col",src:t.url,item:t,name:t.originalFilename,extension:t.extension,inline:!1},null,8,["src","item","name","extension"]))]),(0,a.Lk)("td",R,[(0,a.Lk)("div",$,[(0,a.bF)(G,{flat:"",dense:"",round:"",icon:"close",color:"red",onClick:function(a){return e.eliminarArchivo(o,t)}},null,8,["onClick"])])])])}),256))])])])):(0,a.Q3)("v-if",!0)]}),_:1})])]),(0,a.Lk)("div",M,[(0,a.bF)(Y,{class:"col",modelValue:e.infoActivo.IS_SEGURO,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.infoActivo.IS_SEGURO=t}),"true-value":1,"false-value":0,label:"¿Tiene Seguro?",color:"secondary"},null,8,["modelValue"]),1===e.infoActivo.IS_SEGURO?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.F_INICIO_SEGURO,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.infoActivo.F_INICIO_SEGURO=t}),type:"date",label:"Fecha de Inicio"},null,8,["modelValue"]),(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.F_FIN_SEGURO,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.infoActivo.F_FIN_SEGURO=t}),type:"date",label:"Fecha de Fin"},null,8,["modelValue"]),(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.SEGURO_POLIZA,"onUpdate:modelValue":t[24]||(t[24]=function(t){return e.infoActivo.SEGURO_POLIZA=t}),label:"Poliza"},null,8,["modelValue"])],64)):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",q,[(0,a.bF)(Y,{class:"col",modelValue:e.infoActivo.IS_GARANTIA,"onUpdate:modelValue":t[25]||(t[25]=function(t){return e.infoActivo.IS_GARANTIA=t}),"true-value":1,"false-value":0,label:"¿Tiene Garantía?",color:"secondary"},null,8,["modelValue"]),1===e.infoActivo.IS_GARANTIA?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.F_INICIO_GARANTIA,"onUpdate:modelValue":t[26]||(t[26]=function(t){return e.infoActivo.F_INICIO_GARANTIA=t}),type:"date",label:"Fecha de Inicio"},null,8,["modelValue"]),(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.F_FIN_GARANTIA,"onUpdate:modelValue":t[27]||(t[27]=function(t){return e.infoActivo.F_FIN_GARANTIA=t}),type:"date",label:"Fecha de Fin"},null,8,["modelValue"]),t[37]||(t[37]=(0,a.Lk)("div",{class:"col"},null,-1))],64)):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",y,[(0,a.bF)(Y,{class:"col",modelValue:e.infoActivo.IS_BAJA,"onUpdate:modelValue":t[28]||(t[28]=function(t){return e.infoActivo.IS_BAJA=t}),"true-value":1,"false-value":0,label:"¿Dar de baja?",color:"secondary",disable:1===e.infoActivo.IS_DONACION},null,8,["modelValue","disable"]),1===e.infoActivo.IS_BAJA?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(l,{class:"col",modelValue:e.infoActivo.ID_MOTIVO_BAJA,"onUpdate:modelValue":t[29]||(t[29]=function(t){return e.infoActivo.ID_MOTIVO_BAJA=t}),label:"Motivo",options:e.motivosBaja,"option-value":"ID_MOTIVO_BAJA","option-label":"DESCRIPCION"},null,8,["modelValue","options"]),(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.MOTIVO,"onUpdate:modelValue":t[30]||(t[30]=function(t){return e.infoActivo.MOTIVO=t}),label:"Obervación"},null,8,["modelValue"])],64)):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",U,[(0,a.bF)(Y,{class:"col",modelValue:e.infoActivo.IS_DONACION,"onUpdate:modelValue":t[31]||(t[31]=function(t){return e.infoActivo.IS_DONACION=t}),"true-value":1,"false-value":0,label:"¿Donar?",color:"secondary",disable:1===e.infoActivo.IS_BAJA},null,8,["modelValue","disable"]),1===e.infoActivo.IS_DONACION?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(l,{class:"col",modelValue:e.infoActivo.INSTITUCION_BAJA,"onUpdate:modelValue":t[32]||(t[32]=function(t){return e.infoActivo.INSTITUCION_BAJA=t}),label:"Institución",options:e.institucionesDonacion,"option-value":"ID_INSTITUCION","option-label":"DESCRIPCION"},null,8,["modelValue","options"]),(0,a.bF)(n,{class:"col",modelValue:e.infoActivo.MOTIVO,"onUpdate:modelValue":t[33]||(t[33]=function(t){return e.infoActivo.MOTIVO=t}),label:"Obervación"},null,8,["modelValue"])],64)):(0,a.Q3)("v-if",!0)])])])}var G=o(57008),P=o.n(G),B=o(76080),x=o.n(B),X=o(8445),j=o.n(X),Q=o(45254),J=o.n(Q),K=(o(30683),o(71225),o(10239),o(89571),o(56285),o(50310),o(5962),o(90095),o(83190),o(27153),o(13715),o(83972)),W=o(9736),H=o(55973),Z=o(3112),z=o(16648),ee=o(33777),te=o(33950),oe=o(18105),ae=o(82640),ne=o(59089),ie=o(62006),le={setup:function(){var e=(0,K.fG)();return{v$:e}},emits:["cambiarVentana"],components:{QInput1:W.A,QToggle:H.A,SieTable:ee.A,QSelect:z.A,QCheckbox:Z.A,sieUpload:ne.A,QDownloadFile:ie.A,QField:i.Om,QCard:i.C$,QBtn:i.Il},props:{nombre:{type:String,default:"Nuevo Activo"},dataEdit:{type:Object,default:{}}},data:function(){return{infoActivo:{ID_ACTIVO:null,ID_CATALOGO:null,ID_ESTADO:null,SKU:null,CODIGO_BARRAS:null,DESCRIPCION:null,ID_MODALIDAD:null,ID_CONDICION:null,F_INICIO:(0,oe.Ay)(new Date,"YYYY-MM-DD"),F_FIN:(0,oe.Ay)(new Date,"YYYY-MM-DD"),MARCA:null,MODELO:null,IS_VALOR:0,MONCOD:null,VALOR:0,IS_RESERVABLE:0,IS_SEGURO:0,IS_GARANTIA:0,SEGURO_POLIZA:null,IS_DONACION:0,IS_BAJA:0,MOTIVO:null,ID_ACTIVO_TXT:null,ID_MOTIVO_BAJA:null,F_INICIO_SEGURO:(0,oe.Ay)(new Date,"YYYY-MM-DD"),F_FIN_SEGURO:(0,oe.Ay)(new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),"YYYY-MM-DD"),F_INICIO_GARANTIA:(0,oe.Ay)(new Date,"YYYY-MM-DD"),F_FIN_GARANTIA:(0,oe.Ay)(new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),"YYYY-MM-DD")},modalidades:[],modalidadesObj:{},condiciones:[],condicionesObj:{},dataCatalogos:[],estados:[],monedas:[],aseguradoras:[],aseguradorasFiltro:[],motivosBaja:[],institucionesDonacion:[],detalleActivo:!1,caracteristica:{ID_ACTIVO_ATRIBUTO:null,ID_ACTIVO:null,CAMPO:null,DETALLE:null},listaCaracteristicas:[],proveedores:[],proveedoresFiltro:[],listaDocs:[]}},methods:{uploadFile:function(e){var t=this;return J()(x()().m(function o(){var a,n,i,r,c,s,u;return x()().w(function(o){while(1)switch(o.n){case 0:return r=function(){return r=J()(x()().m(function t(){return x()().w(function(t){while(1)switch(t.n){case 0:return t.a(2,new Promise(function(){var t=J()(x()().m(function t(o){var n,i,l;return x()().w(function(t){while(1)switch(t.n){case 0:n=[],i=0;case 1:if(!(i<e.length)){t.n=4;break}return l=n,t.n=2,a(e[i]);case 2:l.push.call(l,t.v);case 3:i++,t.n=1;break;case 4:o(n);case 5:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()))}},t)})),r.apply(this,arguments)},i=function(){return r.apply(this,arguments)},n=function(){return n=J()(x()().m(function e(t){return x()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,new Promise(function(){var e=J()(x()().m(function e(o){var a;return x()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,(0,te.Upload)({url:"api/HyoArchivo/tmp/upload",file:t});case 1:a=e.v,a.url=(0,l["default"])().api+"/HyoArchivo/descargar/tmp/"+a.name+"?access_token="+(0,l["default"])().token,a.extension=a.name.split(".")[1],o(a);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()))}},e)})),n.apply(this,arguments)},a=function(e){return n.apply(this,arguments)},c=[],s=j()(t.listaDocs),u=j(),o.n=1,i();case 1:t.listaDocs=c.concat.call(c,s,u(o.v));case 2:return o.a(2)}},o)}))()},importFile:function(){this.$refs.upload.$el.querySelector("input").click()},cancelarDetalle:function(){this.detalleActivo=!1,this.caracteristica={ID_ACTIVO_ATRIBUTO:null,ID_ACTIVO:null,CAMPO:null,DETALLE:null}},showDetalle:function(e){this.detalleActivo=!0,e&&0===Object.keys(e).length?(this.caracteristica={ID_ACTIVO_ATRIBUTO:null,ID_ACTIVO:null,CAMPO:null,DETALLE:null},this.infoActivo.ID_ACTIVO&&(this.caracteristica.ID_ACTIVO=this.infoActivo.ID_ACTIVO)):this.caracteristica=P()({},e)},grabarDetalle:function(){var e=this;return J()(x()().m(function t(){return x()().w(function(t){while(1)switch(t.p=t.n){case 0:if(!e.caracteristica.CAMPO||!e.caracteristica.DETALLE){t.n=8;break}if(e.caracteristica.ID_ACTIVO||e.infoActivo.ID_ACTIVO){t.n=1;break}e.caracteristica.$index?e.listaCaracteristicas[e.caracteristica.$index]=e.caracteristica:(e.listaCaracteristicas.push(P()(P()({},e.caracteristica),{$index:e.listaCaracteristicas.length})),e.listaCaracteristicas.forEach(function(e,t){e.$index=t})),t.n=7;break;case 1:if(t.p=1,e.caracteristica.$index&&!(e.caracteristica.$index<0)){t.n=3;break}return t.n=2,e.$http.post("api/AfActivoAtributosController/addAfActivoAtributos",{data:P()(P()({},e.caracteristica),{ID_ACTIVO:e.infoActivo.ID_ACTIVO})});case 2:e.cargarCaractersticas(),t.n=5;break;case 3:return t.n=4,e.$http.post("api/AfActivoAtributosController/updateAfActivoAtributos",{params:e.caracteristica,ID_ACTIVO_ATRIBUTO:e.caracteristica.ID_ACTIVO_ATRIBUTO});case 4:e.cargarCaractersticas();case 5:t.n=7;break;case 6:t.p=6,t.v;case 7:e.cancelarDetalle();case 8:return t.a(2)}},t,null,[[1,6]])}))()},volver:function(){this.$emit("cambiarVentana","listado")},saveActivo:function(){var e=this;return J()(x()().m(function t(){var o,a,n,i,l,r,c;return x()().w(function(t){while(1)switch(t.p=t.n){case 0:if(e.v$.$touch(),e.v$.$invalid){t.n=11;break}if(1!==e.infoActivo.IS_SEGURO||e.infoActivo.SEGURO_POLIZA){t.n=1;break}e.$notify("Debe colocar la información del seguro","error"),t.n=11;break;case 1:if(1!==e.infoActivo.IS_BAJA||e.infoActivo.ID_MOTIVO_BAJA&&e.infoActivo.MOTIVO){t.n=2;break}e.$notify("Debe colocar la información de la baja del activo","error"),t.n=11;break;case 2:if(1!==e.infoActivo.IS_DONACION||e.infoActivo.INSTITUCION_BAJA&&e.infoActivo.MOTIVO){t.n=3;break}e.$notify("Debe colocar la información de la donación del activo","error"),t.n=11;break;case 3:return t.n=4,e.$confirmar("¿Desea Registrar este Activo?","Atención");case 4:if(o=t.v,a=e.infoActivo,n=e.listaCaracteristicas,t.p=5,!o){t.n=9;break}return t.n=6,e.$http.post("api/AfActivoController/saveActivo",{dataActivo:a,dataAdicional:n,documentos:e.listaDocs});case 6:if(i=t.v,l=i.message,e.$notify(l),a.ID_ACTIVO){t.n=8;break}return r={okLabel:"Si",cancelLabel:"No",sizeBtn:"md"},t.n=7,e.$confirmar("¿Desea tomar estos datos como base para otro registro?","Atención",r);case 7:c=t.v,c?e.cargaInicial(a):e.volver(),t.n=9;break;case 8:e.volver();case 9:t.n=11;break;case 10:t.p=10,t.v;case 11:return t.a(2)}},t,null,[[5,10]])}))()},cargarCaractersticas:function(){var e=this;return J()(x()().m(function t(){var o;return x()().w(function(t){while(1)switch(t.n){case 0:return e.listaCaracteristicas=[],t.n=1,e.$http.get("api/AfActivoAtributosController/getAfActivoAtributos",{params:{parametros:e.infoActivo}});case 1:o=t.v,o.forEach(function(t,o){e.listaCaracteristicas.push(P()(P()({},t),{$index:o}))});case 2:return t.a(2)}},t)}))()},cargaInicial:function(e){var t=this;return J()(x()().m(function o(){var a,n,i,l,r,c,s,u,d,A;return x()().w(function(o){while(1)switch(o.n){case 0:return a={isNuevo:0===Object.keys(e).length||!e.ID_ACTIVO},o.n=1,t.$http.get("api/AfActivoController/getCargaInicial",{params:a});case 1:return n=o.v,i=n.ID_ACTIVO_TXT,l=n.condiciones,r=n.estados,c=n.modalidades,s=n.modalidadesObj,u=n.condicionesObj,d=n.monedas,A=n.motivosBaja,o.n=2,t.$http.get("api/AfCatalogoController/getAfCatalogo");case 2:return t.dataCatalogos=o.v,o.n=3,t.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"003"}}}});case 3:return t.aseguradoras=o.v,o.n=4,t.$http.get("api/personaController/getPersonasJuridicas");case 4:if(t.proveedores=o.v,t.modalidades=c,t.modalidadesObj=s,t.condicionesObj=u,t.condiciones=l,t.monedas=d,t.estados=r,t.motivosBaja=A,0!==Object.keys(e).length){o.n=5;break}t.infoActivo={ID_ACTIVO:null,ID_CATALOGO:null,ID_ESTADO:1,DESCRIPCION:null,ID_MODALIDAD:1,ID_CONDICION:1,F_INICIO:(0,oe.Ay)(new Date,"YYYY-MM-DD"),F_FIN:(0,oe.Ay)(new Date,"YYYY-MM-DD"),MARCA:null,MODELO:null,IS_VALOR:0,MONCOD:"",VALOR:0,IS_RESERVABLE:1,IS_SEGURO:0,IS_GARANTIA:0,SEGURO_POLIZA:null,IS_DONACION:0,IS_BAJA:0,MOTIVO:null,ID_ACTIVO_TXT:i,ID_MOTIVO_BAJA:null,INSTITUCION_BAJA:null,ID_PROVEEDOR:null,F_INICIO_SEGURO:(0,oe.Ay)(new Date,"YYYY-MM-DD"),F_FIN_SEGURO:(0,oe.Ay)(new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),"YYYY-MM-DD"),F_INICIO_GARANTIA:(0,oe.Ay)(new Date,"YYYY-MM-DD"),F_FIN_GARANTIA:(0,oe.Ay)(new Date((new Date).getFullYear()+1,(new Date).getMonth(),(new Date).getDate()),"YYYY-MM-DD")},o.n=8;break;case 5:if(!e.ID_ACTIVO){o.n=7;break}return o.n=6,t.$http.get("api/afActivoController/getAfActivo",{params:{parametros:e}});case 6:t.infoActivo=o.v,t.infoActivo=t.infoActivo[0],t.infoActivo.F_INICIO=(0,oe.Ay)(new Date(t.infoActivo.F_INICIO),"YYYY-MM-DD"),t.infoActivo.F_FIN=(0,oe.Ay)(new Date(t.infoActivo.F_FIN),"YYYY-MM-DD"),t.infoActivo.F_INICIO_SEGURO=(0,oe.Ay)(new Date(t.infoActivo.F_INICIO_SEGURO),"YYYY-MM-DD"),t.infoActivo.F_FIN_SEGURO=(0,oe.Ay)(new Date(t.infoActivo.F_FIN_SEGURO),"YYYY-MM-DD"),t.infoActivo.F_INICIO_GARANTIA=(0,oe.Ay)(new Date(t.infoActivo.F_INICIO_GARANTIA),"YYYY-MM-DD"),t.infoActivo.F_FIN_GARANTIA=(0,oe.Ay)(new Date(t.infoActivo.F_FIN_GARANTIA),"YYYY-MM-DD"),t.obtenerDocumentos(),o.n=8;break;case 7:t.infoActivo=P()({},e),t.infoActivo.ID_ACTIVO_TXT=i;case 8:return o.a(2)}},o)}))()},obtenerDocumentos:function(){var e=this;return J()(x()().m(function t(){return x()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/AfActivoDocumentosController/getAfActivoDocumentos",{params:{parametros:{id_activo:e.infoActivo.ID_ACTIVO}}});case 1:e.listaDocs=t.v,e.listaDocs.forEach(function(e){e.url=(0,l["default"])().api+"/AfActivoDocumentosController/getDocumento"+"?ID=".concat(e.ID,"&access_token=").concat((0,l["default"])().token)});case 2:return t.a(2)}},t)}))()},filterAse:function(e,t){var o=this;t(""!==e?function(){var t=e.toLowerCase();o.aseguradorasFiltro=o.aseguradoras.filter(function(e){return e.SECUDES.toLowerCase().indexOf(t)>-1})}:function(){o.aseguradorasFiltro=o.aseguradoras})},eliminarArchivo:function(e,t){var o=this;return J()(x()().m(function a(){var n;return x()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,o.$confirmar("¿Está seguro de eliminar este documento?, este proceso sera irreversible");case 1:if(n=a.v,!n){a.n=7;break}if(!t.ID){a.n=6;break}return a.p=2,a.n=3,o.$http.delete("api/AfActivoDocumentosController/deleteAfActivoDocumentos",{params:{id:t.ID}});case 3:o.$notify("Eliminado Correctamente"),o.obtenerDocumentos(),a.n=5;break;case 4:a.p=4,a.v;case 5:a.n=7;break;case 6:o.listaDocs.splice(e,1);case 7:return a.a(2)}},a,null,[[2,4]])}))()},filterProv:function(e,t){var o=this;t(""!==e?function(){var t=e.toLowerCase();o.proveedoresFiltro=o.proveedores.filter(function(e){return e.RAZONSOCIAL.toLowerCase().indexOf(t)>-1})}:function(){o.proveedoresFiltro=o.proveedores})},eliminarDetalle:function(e,t){var o=this;return J()(x()().m(function a(){var n;return x()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,o.$confirmar("¿Está seguro de eliminar?","Confirmar");case 1:if(n=a.v,!n){a.n=5;break}if(e.ID_ACTIVO_ATRIBUTO){a.n=2;break}o.listaCaracteristicas.splice(t,1),a.n=5;break;case 2:return a.p=2,a.n=3,o.$http.post("api/AfActivoAtributosController/eliminarAfActivoAtributos",{id:e.ID_ACTIVO_ATRIBUTO});case 3:o.cargarCaractersticas(),a.n=5;break;case 4:a.p=4,a.v;case 5:return a.a(2)}},a,null,[[2,4]])}))()}},computed:{buttons:function(){var e=[{label:"Volver",icon:"arrow_left",click:this.volver}];return 3===(0,l["default"])().ruta.nivel&&e.push({label:"Grabar",icon:"save",click:this.saveActivo}),e}},validations:function(){var e=this,t=function(){return 0===e.modalidadesObj[e.infoActivo.ID_MODALIDAD]["ACTIVA_FIN"]||e.infoActivo.F_FIN&&e.infoActivo.F_INICIO<e.infoActivo.F_FIN},o=function(){return 1===e.infoActivo.IS_VALOR||e.infoActivo.MONCOD&&e.infoActivo.MONCOD.length>0},a=function(){return 1===e.infoActivo.IS_VALOR||e.infoActivo.VALOR>0},n={infoActivo:{DESCRIPCION:{required:ae.mw},ID_MODALIDAD:{required:ae.mw},F_INICIO:{required:ae.mw},ID_CONDICION:{required:ae.mw},MODELO:{required:ae.mw},MARCA:{required:ae.mw},ID_CATALOGO:{required:ae.mw},ID_ESTADO:{required:ae.mw},ID_PROVEEDOR:{required:ae.mw},F_FIN:{fFinVal:t},MONCOD:{monedaVal:o},VALOR:{montoVal:a}}};return n},mounted:function(){this.cargaInicial(this.dataEdit)},watch:{"infoActivo.F_INICIO":function(e){this.infoActivo.F_FIN<e&&(this.infoActivo.F_FIN=new Date(e),this.infoActivo.F_FIN.setMonth(this.infoActivo.F_FIN.getMonth()+1),this.infoActivo.F_FIN=(0,oe.Ay)(this.infoActivo.F_FIN,"YYYY-MM-DD"))},"infoActivo.F_FIN":function(e){e<this.infoActivo.F_INICIO&&(this.infoActivo.F_INICIO=new Date(e),this.infoActivo.F_INICIO.setMonth(this.infoActivo.F_INICIO.getMonth()-1),this.infoActivo.F_INICIO=(0,oe.Ay)(this.infoActivo.F_INICIO,"YYYY-MM-DD"))}}},re=o(12807);const ce=(0,re.A)(le,[["render",Y]]);var se=ce,ue=(o(52776),o(53113),{class:"column"}),de={key:0,class:"q-ma-sm row"},Ae={class:"row col q-gutter-sm"},fe={class:"row items-center"},ve={class:"q-ma-sm row justify-end"},Ie={class:"q-ma-sm"},me={class:"column q-mb-sm"},Oe={class:"column q-mt-sm"},De={class:"row col"},pe={class:"row q-gutter-sm"};function be(e,t){var o=this,n=(0,a.g2)("header-btn"),i=(0,a.g2)("q-input1"),l=(0,a.g2)("q-toggle"),c=(0,a.g2)("sie-table"),s=(0,a.g2)("sie-modal"),u=(0,a.g2)("q-select"),d=(0,a.g2)("q-icon"),A=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)("div",ue,[(0,a.bF)(n,{name:"Activos",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(s,{modelValue:e.modalDepreciacion,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.modalDepreciacion=t}),title:"Depreciación de activo "+e.datosDepreciacion.DESCRIPCION},{default:(0,a.k6)(function(){return[e.modalDepreciacion?((0,a.uX)(),(0,a.CE)("div",de,[(0,a.Lk)("div",Ae,[(0,a.bF)(i,{class:"col",disable:"",modelValue:e.datosDepreciacion.VALOR,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.datosDepreciacion.VALOR=t}),label:"Valor"},{append:(0,a.k6)(function(){return[(0,a.Lk)("div",fe,[(0,a.Lk)("span",null,(0,r.v_)(e.monsig),1)])]}),_:1},8,["modelValue"]),(0,a.bF)(i,{class:"col",modelValue:e.datosDepreciacion.F_INICIO,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.datosDepreciacion.F_INICIO=t}),type:"date",disable:"",label:"F. Adquisición"},null,8,["modelValue"])])])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",ve,[(0,a.bF)(l,{modelValue:e.datosDepreciacion.ACTUAL,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.datosDepreciacion.ACTUAL=t}),label:"Calcular D. Actual",onInput:e.hallarDepreciacion,"true-value":"S","false-value":"N"},null,8,["modelValue","onInput"])]),(0,a.bF)(c,{class:"q-ma-sm",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(70vh - 180px)","show-search":!1,context:o,columns:e.columnsDepreciacion,data:e.datosDepreciacion.data,config:e.configDepreciacion},null,8,["columns","data","config"])]}),_:1},8,["modelValue","title"]),(0,a.bF)(s,{modelValue:e.modalPrint,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.modalPrint=t}),onSubmit:e.imprimir,title:"Imprimir Etiquetas"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Ie,[(0,a.Lk)("div",me,[(0,a.bF)(u,{class:"col",modelValue:e.tipo,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.tipo=t}),options:e.tipos,label:"Tipo"},null,8,["modelValue","options"])]),(0,a.bF)(u,{modelValue:e.formato,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formato=t}),options:e.etiquetas,label:"Etiqueta"},null,8,["modelValue","options"]),(0,a.Lk)("div",Oe,[(0,a.Lk)("div",De,[e.showLimite()?((0,a.uX)(),(0,a.Wv)(i,{key:0,class:"col",modelValue:e.posInicial,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.posInicial=t}),type:"number",label:"Posición inicial",max:e.limite},null,8,["modelValue","max"])):(0,a.Q3)("v-if",!0)])])])]}),_:1},8,["modelValue","onSubmit"]),(0,a.bF)(A,{class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",pe,[(0,a.bF)(i,{class:"col",modelValue:e.search,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.search=t}),label:e.$t("Buscar"),onInput:e.filtrarActivos},{append:(0,a.k6)(function(){return[(0,a.bF)(d,{name:"search"})]}),_:1},8,["modelValue","label","onInput"]),(0,a.bF)(u,{class:"col",modelValue:e.catalogo,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.catalogo=t}),options:e.dataCatalogos,label:"Catalogo",onInput:e.filtrarActivos},null,8,["modelValue","options","onInput"]),(0,a.bF)(l,{modelValue:e.actSeleccion,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.actSeleccion=t}),"true-value":"S","false-value":"N",label:"Activar Selección"},null,8,["modelValue"])]),(0,a.bF)(c,{class:"q-mt-xs",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 180px)","show-search":!1,context:o,columns:e.columns,data:e.dataActivos,config:e.config,selection:"S"===e.actSeleccion?"multiple":"none",ref:"tablaActivos"},null,8,["columns","data","config","selection"])]}),_:1})])}o(52133),o(6724),o(70199);var Ce=o(33001),_e=o(78131),he=o(30640),Ve={emits:["cambiarVentana"],components:{QInput1:W.A,QToggle:H.A,SieTable:ee.A,QSelect:z.A,sieModal:he.A,QCard:i.C$,QIcon:i.bP},data:function(){return{modalPrint:!1,modalDepreciacion:!1,datosDepreciacion:{data:[]},monedas:{},search:null,dataCatalogos:[],catalogo:"T",dataActivosBase:[],dataActivos:[],proveedores:[],condiciones:[],actSeleccion:"N",condicionesObj:{},etiquetas:[{label:"Pegafan 005",value:"005"},{label:"Pegafan 004",value:"004"},{label:"A4 Horizontal",value:"A4"}],tipos:[{label:"Código de Barras",value:"barras"},{label:"Código QR",value:"qr"}],tipo:"barras",posInicial:1,formato:"005",etiqueta:1,columns:[{name:"ID_ACTIVO_TXT",label:"Id",align:"left",field:"ID_ACTIVO_TXT"},{name:"CODIGO_BARRAS",label:"Código de barras",align:"left",field:"CODIGO_BARRAS"},{name:"DESCRIPCION",label:"Nombre",align:"left",field:"DESCRIPCION"},{name:"SKU",label:"SKU",align:"left",field:"SKU"},{name:"IS_VALOR_TXT",label:"Valor",align:"center",field:"IS_VALOR_TXT"},{name:"F_INICIO",label:"Fecha Adquisición",align:"center",field:"F_INICIO"},{name:"ID_CATALOGO",label:"Catalogo",align:"left",field:"ID_CATALOGO"},{name:"MARCA",label:"Marca",align:"left",field:"MARCA"},{name:"MODELO",label:"Modelo",align:"left",field:"MODELO"},{name:"ID_PROVEEDOR",label:"Proveedor",align:"left",field:"ID_PROVEEDOR"},{name:"IS_SEGURO",label:"Seguro",align:"center",field:"IS_SEGURO"},{name:"ID_CONDICION",label:"Condicion",align:"center",field:"ID_CONDICION"},{name:"ACCIONES",align:"center",field:"ACCIONES"}],config:{},configDepreciacion:{},columnsDepreciacion:[{name:"año",label:"Año",align:"left",field:"año"},{name:"depreciacionAnual",label:"Depreciación",align:"center",field:"depreciacionAnual"},{name:"valorContable",label:"Valor Contable",align:"center",field:"valorContable"}]}},methods:{filtrarCatalogos:function(){},init:function(){var e=this;return J()(x()().m(function t(){return x()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/afActivoController/getAfActivo");case 1:e.dataActivosBase=t.v,e.filtrarActivos();case 2:return t.a(2)}},t)}))()},filtrarActivos:function(){this.search&&this.search.length>0?this.dataActivos=(0,Ce.filterArray)(this.search,{field:["ID_ACTIVO_TXT","DESCRIPCION","MARCA","MODELO","CODIGO_BARRAS","ID_ACTIVO"],list:this.dataActivosBase})||[]:this.dataActivos=j()(this.dataActivosBase),this.catalogo&&"T"!==this.catalogo&&(this.dataActivos=(0,Ce.filterArray)(this.catalogo,{field:["ID_CATALOGO"],list:this.dataActivos})||[])},addActivo:function(e){this.$emit("cambiarVentana","nuevo",e)},newActivo:function(){this.addActivo({})},eliminarActivo:function(e){var t=this;return J()(x()().m(function o(){var a;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.n=1,t.$confirmar("¿Está seguro de eliminar este activo?");case 1:if(a=o.v,o.p=2,!a){o.n=4;break}return o.n=3,t.$http.post("api/AfActivoController/saveActivo",{dataActivo:{ID_ACTIVO:e.ID_ACTIVO,ELIMINADO:1}});case 3:t.$notify("Eliminado Correctamente"),t.init();case 4:o.n=6;break;case 5:o.p=5,o.v;case 6:return o.a(2)}},o,null,[[2,5]])}))()},printxls:function(){},printBarras:function(){this.printEtiquetas("barras")},printQr:function(){this.printEtiquetas("qr")},imprimir:function(){var e=this;return J()(x()().m(function t(){var o,a,n,i;return x()().w(function(t){while(1)switch(t.n){case 0:o=e.$refs.tablaActivos.rowsSelected(),a=o.map(function(e){var t=e.ID_ACTIVO;return t}),n="?tipo=".concat(e.tipo,"&listaActivos=").concat(JSON.stringify(a),"&formato=").concat(e.formato,"&inicio=").concat(e.posInicial,"&token2=").concat((0,l["default"])().token,"&access_token=").concat((0,l["default"])().token),i=(0,l["default"])().api+"/AfActivoController/getListado"+n,console.log(i),(0,_e["default"])(i,"data.pdf   ",!0);case 1:return t.a(2)}},t)}))()},printEtiquetas:function(){var e=this;return J()(x()().m(function t(){var o;return x()().w(function(t){while(1)switch(t.n){case 0:o=e.$refs.tablaActivos.rowsSelected(),o.length>0?e.modalPrint=!0:e.$notify("Debe seleccionar al menos un activo","error"),console.log(e.$refs.tablaActivos.rowSelected());case 1:return t.a(2)}},t)}))()},seguimiento:function(e){this.$emit("cambiarVentana","timeline",e)},showLimite:function(){return["004","005"].indexOf(this.formato)>=0},hallarDepreciacion:function(){var e=this;return J()(x()().m(function t(){var o,a;return x()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/AfActivoController/getDepreciacion",{params:{ID_ACTIVO:e.datosDepreciacion.ID_ACTIVO,ACTUAL:e.datosDepreciacion.ACTUAL}});case 1:o=t.v,a=o.data,e.datosDepreciacion.data=a,e.configDepreciacion={depreciacionAnual:{renderHtml:function(e){return"<span>".concat(this.monsig," ").concat(e.depreciacionAnual,"</span>")}},valorContable:{renderHtml:function(e){return"<span>".concat(this.monsig," ").concat(e.valorContable,"</span>")}}};case 2:return t.a(2)}},t)}))()}},computed:{buttons:function(){var e=[];return 3===(0,l["default"])().ruta.nivel&&e.push({label:"Nuevo",icon:"add",click:this.newActivo}),"S"===this.actSeleccion&&e.push({label:"Imp. Etiquetas",icon:"select_all",click:this.printEtiquetas}),e},monsig:function(){var e=this.datosDepreciacion&&this.datosDepreciacion.MONCOD?this.datosDepreciacion.MONCOD:null,t="";return this.monedas.forEach(function(o){o.MONCOD===e&&(t=o.MONSIG)}),t},limite:function(){switch(this.formato){case"004":return this.posInicial=1,33;case"005":return this.posInicial=1,14;case"A4":return this.posInicial=1,1}}},mounted:function(){var e=this;return J()(x()().m(function t(){var o,a,n,i,l,r;return x()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/AfCatalogoController/getAfCatalogo");case 1:return o=t.v,o.unshift({ID_CATALOGO:"T",DESCRIPCION:"Todos"}),o.forEach(function(t){var o=t.ID_CATALOGO,a=t.DESCRIPCION;e.dataCatalogos.push({value:o,label:a})}),t.n=2,e.$http.get("api/AfActivoController/getCargaInicial",{params:{isNuevo:!1}});case 2:return a=t.v,n=a.condiciones,i=a.condicionesObj,l=a.monedas,e.condicionesObj=i,e.monedas=j()(l),e.condiciones=n.map(function(e){var t=e.DESCRIPCION,o=e.ID_CONDICION;return{label:t,value:o}}),t.n=3,e.$http.get("api/personaController/getPersonasJuridicas");case 3:r=t.v,r.forEach(function(t){var o=t.ID_PERSONA,a=t.RAZONSOCIAL;e.proveedores.push({value:o,label:a})}),e.dataCatalogos.map(function(e){var t=e.ID_CATALOGO,o=e.DESCRIPCION;return{value:t,label:o}}),e.init(),e.config={ID_PROVEEDOR:{component:"select",options:e.proveedores,edit:!1},ID_CONDICION:{component:"select",options:e.condiciones,edit:!1},F_INICIO:{component:"date",edit:!1},ID_CATALOGO:{component:"select",options:e.dataCatalogos,edit:!1},IS_SEGURO:{component:"select",options:[{label:"No",value:0},{label:"Si",value:1}],edit:!1},ACCIONES:{flat:!0,component:"button",permisos:{remove_red_eye:"=== 3",edit:"=== 3",delete:"=== 3"},validate:{depreciacion:function(e){return 1===e.IS_DEPRECIACION&&0===e.IS_VALOR}},icon:["trending_down as depreciacion","remove_red_eye as seguimiento","edit","delete"],tooltip:{depreciacion:"Ver Depreciación",seguimiento:"Ver Movimientos",edit:"Editar",delete:"Eliminar"},seguimiento:function(e){this.seguimiento(e)},edit:function(e){this.addActivo(e)},delete:function(e){this.eliminarActivo(e)},depreciacion:function(e){var t=this;return J()(x()().m(function o(){return x()().w(function(o){while(1)switch(o.n){case 0:t.modalDepreciacion=!0,t.datosDepreciacion=P()(P()({},e),{ACTUAL:"N"}),t.datosDepreciacion.F_INICIO=(0,oe.Ay)(new Date(e.F_INICIO),"YYYY-MM-DD"),t.hallarDepreciacion();case 1:return o.a(2)}},o)}))()}},flat:!0,round:!0,color:"primary"};case 4:return t.a(2)}},t)}))()}};const ge=(0,re.A)(Ve,[["render",be]]);var Fe=ge,Ne={class:"q-page"},Ee={key:0,class:"q-card col q-mx-xl q-my-sm"},ke={class:"column"},Se={class:"row justify-center"},Te={class:"text-bold"},Le={class:"row justify-center",style:{"font-size":"14px"}},we={class:"row"},Re={class:"row"},$e={class:"column q-timeline-subtitle"},Me={class:"text-bold"},qe={class:"q-my-sm"};function ye(e,t){var o=(0,a.g2)("header-btn"),n=(0,a.g2)("q-timeline-entry"),i=(0,a.g2)("q-scroll-area"),l=(0,a.g2)("q-timeline");return(0,a.uX)(),(0,a.CE)("div",Ne,[(0,a.bF)(o,{name:"Timeline de Activo",buttons:e.buttons},null,8,["buttons"]),e.dataEdit&&Object.keys(e.dataEdit).length>0?((0,a.uX)(),(0,a.CE)("div",Ee,[(0,a.bF)(l,{responsive:"",color:"secondary",style:{padding:"0 24px"},"no-hover":""},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{heading:""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",ke,[(0,a.Lk)("div",Se,[(0,a.Lk)("div",Te,(0,r.v_)(e.dataEdit.DESCRIPCION),1)]),(0,a.Lk)("div",Le,[(0,a.Lk)("div",we,[t[0]||(t[0]=(0,a.Lk)("div",{class:"text-bold"},"Veces en Seguro: ",-1)),(0,a.Lk)("span",null,(0,r.v_)(e.dataEdit.SOPORTE)+"   ",1)]),(0,a.Lk)("div",Re,[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-bold"},"Veces en Garantía: ",-1)),(0,a.Lk)("span",null,(0,r.v_)(e.dataEdit.GARANTIA),1)])])])]}),_:1}),(0,a.bF)(i,{style:{width:"100%","max-width":"85vw",height:"calc(100vh - 220px)"},css:"height: calc(100vh - 100px)"},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.infoSeguimiento,function(o){return(0,a.uX)(),(0,a.Wv)(n,{title:o.NOMCOMP,side:o.POS,color:o.COL,icon:o.ICON},{subtitle:(0,a.k6)(function(){return[(0,a.Lk)("div",$e,[(0,a.Lk)("span",null,(0,r.v_)(o.FECHA_SEGUIMIENTO),1),(0,a.Lk)("div",Me,(0,r.v_)(o.OBSERVACION),1)])]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",qe,[(0,a.Lk)("div",{class:(0,r.C4)(["row",{"justify-end":"left"===o.POS&&e.isGreater}])},[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-bold"},"Condicion: ",-1)),(0,a.Lk)("span",null,(0,r.v_)(o.DESCRIPCION),1)],2)])]}),_:2},1032,["title","side","color","icon"])}),256))]}),_:1})]}),_:1})])):(0,a.Q3)("v-if",!0)])}o(68017);var Ue=o(96122),Ye=o(81288),Ge={emits:["cambiarVentana"],components:{QTimeline:i.T,QTimelineEntry:i.HV,QScrollArea:Ue.A},props:{dataEdit:{type:Object,default:{}}},data:function(){return{infoSeguimiento:[]}},methods:{volver:function(){this.$emit("cambiarVentana","listado")}},computed:{buttons:function(){var e=[{label:"Volver",icon:"arrow_left",click:this.volver}];return e},isGreater:function(){return(0,Ye.isGreater)()}},mounted:function(){var e=this;return J()(x()().m(function t(){return x()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/AfActivoLogController/getAfActivoLog",{params:{parametros:e.dataEdit}});case 1:e.infoSeguimiento=t.v,e.infoSeguimiento.forEach(function(e){e.POS=e.POS.trim(),e.FECHA_SEGUIMIENTO=(0,oe.Ay)(e.FH_CAMBIO,"DD/MM/YYYY HH:mm")});case 2:return t.a(2)}},t)}))()}};const Pe=(0,re.A)(Ge,[["render",ye]]);var Be=Pe,xe={components:{nuevo:se,listado:Fe,timeline:Be,QPage:i.Tu},data:function(){return{actual:"listado",dataEdit:{}}},methods:{cambiarEstado:function(e,t){console.log({estado:e,data:t}),this.actual=e,this.dataEdit={},t&&0!==Object.keys(t).length?(this.dataEdit=t,this.titulo="Editar "+t.DESCRIPCION):this.titulo="Nuevo Activo"}},computed:{},mounted:function(){}};const Xe=(0,re.A)(xe,[["render",n]]);var je=Xe}}]);