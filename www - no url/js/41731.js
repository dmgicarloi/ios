"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[41731],{41731:function(n,e,t){t.r(e),t.d(e,{default:function(){return g}});var a=t(61758),r=t(58790),o={class:"row q-col-gutter-md"},i={class:"col-xs-12"};function u(n,e){var t=(0,a.g2)("header-btn"),u=(0,a.g2)("formulario"),c=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-card"),l=(0,a.g2)("sie-modal"),d=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(s,{flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{name:n.tituloForm,auto:!0,buttons:n.botonesForm},null,8,["name","buttons"]),(0,a.bF)(c,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",o,[(0,a.Lk)("div",i,[(0,a.bF)(u,{schema:n.schemas.viewAdmEvento,ref:"formApp",key:"formApp",onClickIconGrid:n.clickIconGrid,onChangeInput:n.changeInput},null,8,["schema","onClickIconGrid","onChangeInput"])])])]}),_:1})]}),_:1}),(0,a.bF)(l,{title:n.configModalSel.titulo,modelValue:n.openModal,"onUpdate:modelValue":e[0]||(e[0]=function(e){return n.openModal=e}),ok:n.btnOk,onSubmit:n.submit},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:(0,r.C4)(n.classContModal)},{default:(0,a.k6)(function(){return[(0,a.bF)(u,{schema:n.schemaModal,ref:"formModal",key:"formModal",onClickIconGrid:n.clickIconGrid,onChangeInput:n.changeInput,modal:!0},null,8,["schema","onClickIconGrid","onChangeInput"])]}),_:1},8,["class"])]}),_:1},8,["title","modelValue","ok","onSubmit"])]}),_:1})}var c=t(76080),s=t.n(c),l=t(45254),d=t.n(l),m=(t(39866),t(10239),t(35534),t(83190),t(44264),t(6123)),f=t(65848),p=t(40714),h={mixins:[f.A,p.A],data:function(){var n=this.init();return n.classContModal="",n.sie.idEvento=0,n.btnOk=!1,n.maxAcompanantes=1,n},methods:{updateGrid:function(){var n=this;return d()(s()().m(function e(){var t,a,r,o,i,u;return s()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.getInputValue("formApp","INPUT_1");case 1:return t=e.v,e.n=2,n.getInputValue("formApp","ID_EVENTO_TIPO");case 2:return a=e.v,e.n=3,n.getInputValue("formApp","FH_INICIO");case 3:return r=e.v,e.n=4,n.getInputValue("formApp","FH_FINAL");case 4:o=e.v,i={anio:t},a.toString().length>0&&(u=a.split("-"),i.idEventoTipo=u[0],i.flagTipo=u[1]),r.length>0&&o.length>0&&(i.rangoEvento={desde:r,hasta:o}),n.reloadGrid("formApp","GRID_1",i);case 5:return e.a(2)}},e)}))()},filtrarDatos:function(n,e,t){var a=this;return d()(s()().m(function n(){return s()().w(function(n){while(1)switch(n.n){case 0:a.$nextTick(d()(s()().m(function n(){var e,r;return s()().w(function(n){while(1)switch(n.n){case 0:if(!["FH_INICIO","FH_FINAL"].includes(t)){n.n=3;break}return n.n=1,a.getInputValue("formApp","FH_INICIO");case 1:return e=n.v,n.n=2,a.getInputValue("formApp","FH_FINAL");case 2:if(r=n.v,0!==e.length&&0!==r.length){n.n=3;break}return n.a(2,!1);case 3:return n.n=4,a.updateGrid();case 4:return n.a(2)}},n)})));case 1:return n.a(2)}},n)}))()},modalEventoDetalle:function(n,e,t){var a=this;return d()(s()().m(function e(){return s()().w(function(e){while(1)switch(e.n){case 0:return a.sie.idEvento=n.ID_EVENTO,e.n=1,a.runModal(null,"admEventoDetalle","I");case 1:return e.a(2)}},e)}))()},addInscripcion:function(n,e,t){var a=this;return d()(s()().m(function e(){return s()().w(function(e){while(1)switch(e.n){case 0:a.runModal({evento:n,VIRTUAL:n.VIRTUAL},"eventoFamilia","I");case 1:return e.a(2)}},e)}))()},preModal:function(n,e,t){var a=this;return d()(s()().m(function e(){var t;return s()().w(function(e){while(1)switch(e.n){case 0:t=a.configModalSel.codigoFormulario,e.n="admEvento"===t?1:"admEventoDetalle"===t?2:"eventoFamilia"===t?3:4;break;case 1:return a.classContModal="cont-modal-md",a.btnOk="GRABAR",e.a(3,4);case 2:return a.classContModal="cont-modal-lg",a.btnOk="GRABAR",e.a(3,4);case 3:return a.classContModal=0===n.VIRTUAL?"cont-modal-lg":"cont-modal-md",a.btnOk="INSCRIBIR",e.a(3,4);case 4:return e.a(2,n)}},e)}))()},postModal:function(n,e,t){switch(this.configModalSel.codigoFormulario){case"eventoFamilia":if(0===n.VIRTUAL){for(var a=[],r=1;r<=this.maxAcompanantes;r++)a.push({APELLIDOS:"",NOMBRES:"",TELEFONO:"",PARENTESCO:""});this.$refs["formModal"].rows["GRID_1"]=a}break}},preSubmit:function(n){var e=!0;switch(this.configModalSel.codigoFormulario){case"admEventoDetalle":var t=this.$refs["formModal"].rows["GRID_2"];n=t,0===t.length&&(this.$notify("No existen registros para modificar","warning"),e=!1);break;case"eventoFamilia":n.evento.FECHA_EVENTO=this.formatMoment(n.evento.FH_EVENTO_BD,"dddd, D  MMMM  YYYY"),n.evento.HORA_EVENTO=this.formatMoment(n.evento.FH_EVENTO_BD,"hh:mm a");var a=0===n.evento.VIRTUAL?this.$refs["formModal"].$refs["GRID_1"].selected:[];n.EXTERNOS=a;break}return{res:e,data:n}},postSubmit:function(n){var e=this;return d()(s()().m(function n(){var t,a;return s()().w(function(n){while(1)switch(n.n){case 0:a=e.configModalSel.codigoFormulario,n.n="admEvento"===a?1:"eventoFamilia"===a?4:6;break;case 1:return n.n=2,e.getInputValue("formApp","INPUT_1");case 2:return t=n.v,n.n=3,e.reloadGrid("formApp","GRID_1",{anio:t});case 3:return n.a(3,6);case 4:return n.n=5,e.updateGrid();case 5:return n.a(3,6);case 6:return n.a(2)}},n)}))()},postDelete:function(n){var e=this;return d()(s()().m(function n(){var t,a;return s()().w(function(n){while(1)switch(n.n){case 0:a=e.configModalSel.codigoFormulario,n.n="admEvento"===a?1:4;break;case 1:return n.n=2,e.getInputValue("formApp","INPUT_1");case 2:return t=n.v,n.n=3,e.reloadGrid("formApp","GRID_1",{anio:t});case 3:return n.a(3,4);case 4:return n.a(2)}},n)}))()}},created:function(){var n=this;return d()(s()().m(function e(){var t,a,r;return s()().w(function(e){while(1)switch(e.n){case 0:return t=[{id:"viewAdmEvento",ref:"formApp"}],n.loadSchemas(t),e.n=1,n.getParametrosAdmision(["MAX_ACOMPANANTES_EVENTOS"]);case 1:a=e.v,r=parseInt(n.striptags(a.MAX_ACOMPANANTES_EVENTOS)),n.maxAcompanantes=Number.isInteger(r)?r:1;case 2:return e.a(2)}},e)}))()},components:{QPage:m.Tu,QCard:m.C$}},v=t(12807);const I=(0,v.A)(h,[["render",u]]);var g=I}}]);