"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[73781],{73781:function(n,i,e){e.r(i),e.d(i,{default:function(){return V}});var t=e(61758),r=e(58790),a={class:"column col q-gutter-sm q-px-sm q-pt-sm"},o={class:"col column"},s={class:"col row q-col-gutter-sm"},u={class:"col"},c={class:"col column relative-position"};function l(n,i){var e=(0,t.g2)("q-icon"),l=(0,t.g2)("q-item-section"),f=(0,t.g2)("q-item-label"),m=(0,t.g2)("q-item"),d=(0,t.g2)("q-list"),v=(0,t.g2)("q-card"),g=(0,t.g2)("q-spinner-oval"),p=(0,t.g2)("q-inner-loading"),h=(0,t.g2)("ver"),b=(0,t.g2)("sie-vacio"),w=(0,t.gN)("ripple");return(0,t.uX)(),(0,t.CE)("div",a,[(0,t.Lk)("div",o,[(0,t.Lk)("div",s,[(0,t.Lk)("div",{class:(0,r.C4)(["column",[{"col-3":!n.isLess,"col-12":n.isLess}]])},[(0,t.Lk)("div",u,[(0,t.bF)(v,null,{default:(0,t.k6)(function(){return[(0,t.bF)(d,{separator:"",link:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.formularios,function(i,a){return(0,t.bo)(((0,t.uX)(),(0,t.Wv)(m,{key:i.ID_FORMULARIO,clickable:"",active:n.id===i.ID_FORMULARIO,"active-class":"bg-teal-1",onClick:function(e){return n.ver(i.ID_HISTORIA_FORMULARIO)}},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{avatar:""},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",{class:"q-item-icon q-item-inverted flex flex-center",style:(0,r.Tr)({"background-color":i.COLOR})},[(0,t.bF)(e,{name:i.ICONO},null,8,["name"])],4)]}),_:2},1024),(0,t.bF)(l,null,{default:(0,t.k6)(function(){return[(0,t.bF)(f,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(i.TITULO),1)]}),_:2},1024),(0,t.bF)(f,{caption:""},{default:(0,t.k6)(function(){return[(0,t.eW)((0,r.v_)(i.DESCRIPCION),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["active","onClick"])),[[w]])}),128))]}),_:1})]}),_:1})])],2),(0,t.Lk)("div",{class:(0,r.C4)(["column",[{"col-9":!n.isLess,"col-12":n.isLess}]])},[(0,t.Lk)("div",c,[(0,t.bF)(p,{visible:n.loading},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),n.id?((0,t.uX)(),(0,t.Wv)(h,{key:0,"id-historia":n.id},null,8,["id-historia"])):((0,t.uX)(),(0,t.Wv)(b,{key:1,class:"col",title:"Seleccione un cuestionario",icon:"file_edit"}))])],2)])])])}var f=e(76080),m=e.n(f),d=e(45254),v=e.n(d),g=e(6123),p=e(88567),h=e(65673),b=e(82327),w=e(88865),k=e(66824),F=e(38739),S=e(80340),L={class:"col column"},I={class:"row"},T={class:"col"};function y(n,i){var e=(0,t.g2)("q-spinner"),r=(0,t.g2)("q-inner-loading"),a=(0,t.g2)("q-select"),o=(0,t.g2)("detail-form"),s=(0,t.g2)("formly"),u=(0,t.g2)("sie-vacio");return(0,t.uX)(),(0,t.CE)("div",L,[(0,t.bF)(r,{class:"bg-white z-top",visible:n.loading},{default:(0,t.k6)(function(){return[(0,t.bF)(e,{size:"3em",color:"primary"})]}),_:1},8,["visible"]),(0,t.Lk)("div",I,[(0,t.Lk)("div",T,[(0,t.bF)(a,{class:"q-if-outlined","float-label":"Seleccionar Estudiante",modelValue:n.usucod,"onUpdate:modelValue":i[0]||(i[0]=function(i){return n.usucod=i}),options:n.destinatarios,filter:"",onInput:n.loadForm},null,8,["modelValue","options","onInput"])])]),n.valid?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"col",data:n.form,"is-submit":"",onSubmit:n.submit,onStart:n.start,onEnd:n.end,print:n.final&&n.finalTest,ref:"formly","disable-comment":""},{default:(0,t.k6)(function(){return[n.detail?((0,t.uX)(),(0,t.Wv)(o,{key:0,id:n.id},null,8,["id"])):(0,t.Q3)("v-if",!0)]}),_:1},8,["data","onSubmit","onStart","onEnd","print"])):((0,t.uX)(),(0,t.Wv)(u,{key:1,class:"col column",title:n.message,icon:n.icon},null,8,["title","icon"]))])}e(11777);var _=e(41482),q=e(60167),A=e(5106),Q=e(80660),C={getDestinatarios:function(n){return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.a(2,Q.$http.get("api/frmformulario/getDestinatariosCuestionario",{params:{id:n,nr:!0,matricula:!1}}))}},i)}))()},getHistoria:function(n){return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.a(2,Q.$http.get("api/HyoFormulario/getHistory",{params:n}))}},i)}))()},save:function(n){return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.a(2,Q.$http.post("api/HyoFormulario/save",n))}},i)}))()},start:function(n){return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.a(2,Q.$http.post("api/HyoFormulario/startForm",n))}},i)}))()}},H=e(982),O="intranet.formularios.noMostrarFormulario",$="info",D={components:{QInnerLoading:g.SQ,QSpinner:_.A,QSelect:g.Si,Formly:q.A,DetailForm:A.A,SieVacio:S.A},props:{idHistoria:[Number,String]},data:function(){return{destinatarios:[],usucod:null,icon:$,message:O,form:{},valid:!1,detail:!1,endQuiz:!1,isSave:!1,endTime:!1,final:!1,finalTest:!1,loading:!1}},methods:{getDestinatarios:function(n){var i=this;return v()(m()().m(function e(){return m()().w(function(e){while(1)switch(e.n){case 0:return i.loading=!0,e.n=1,C.getDestinatarios(n);case 1:i.destinatarios=e.v,i.loading=!1;case 2:return e.a(2)}},e)}))()},buildForm:function(n,i){var e=this;return v()(m()().m(function t(){var r,a,o;return m()().w(function(t){while(1)switch(t.p=t.n){case 0:if("number"!==typeof n||0===n){t.n=5;break}return e.loading=!0,e.valid=!1,e.form={},t.p=1,r={id:n,detail:e.detail,matricula:!1,usucod:i},t.n=2,C.getHistoria(r);case 2:a=t.v,e.final=a.final,e.isSave=a.final,e.finalTest=a.finalTest,e.$nextTick(function(){e.form=a}),e.valid=!0,t.n=4;break;case 3:t.p=3,o=t.v,e.valid=!1,o&&o.error&&o.error.params?(e.message=o.error.message||O,o.error.params.success?(e.icon="timer_on",e.valid=!0,e.$nextTick(function(){e.form={error:!0,final:!0,continue:!0,message:e.message,time:o.error.params.time}})):(e.icon="timer_off",e.$nextTick(function(){e.form={}}))):(e.message=o.error?o.error.message:O,e.icon=$,e.$nextTick(function(){e.form={}}));case 4:e.loading=!1,t.n=6;break;case 5:e.valid=!1,e.form={};case 6:return t.a(2)}},t,null,[[1,3]])}))()},submit:function(n){var i=this;return v()(m()().m(function e(){var t,r,a;return m()().w(function(e){while(1)switch(e.p=e.n){case 0:if(!i.usucod){e.n=5;break}return i.loading=!0,t=i.form&&i.form.idHistoriaUsuario,i.form={},e.p=1,r={idForm:i.idHistoria,idUser:t,fields:n,matricula:!1,endQuiz:i.endQuiz,usucod:i.usucod},e.n=2,C.save(r);case 2:a=e.v,i.loading=!1,i.valid=!0,i.isSave=!0,i.final=a.final,i.finalTest=a.finalTest,i.$nextTick(function(){i.form=a}),e.n=4;break;case 3:e.p=3,e.v,i.isSave=!1,i.loading=!1,i.form={};case 4:e.n=6;break;case 5:i.isSave=!1,(0,H["default"])("Seleccione un "+i.label,"warning");case 6:return e.a(2)}},e,null,[[1,3]])}))()},start:function(){var n=this;return v()(m()().m(function i(){var e,t,r;return m()().w(function(i){while(1)switch(i.p=i.n){case 0:return n.loading=!0,i.p=1,e={id:n.idHistoria,usucod:n.usucod},i.n=2,C.start(e);case 2:t=i.v,n.valid=!0,n.loading=!1,n.$nextTick(function(){n.form=t}),i.n=4;break;case 3:i.p=3,r=i.v,r&&r.error.message&&(n.message=r.error.message||O),n.valid=!1,n.loading=!1,n.$nextTick(function(){n.form={}});case 4:return i.a(2)}},i,null,[[1,3]])}))()},end:function(){var n=this;this.form&&this.form.error?((0,H["default"])("Se cargará el examen","info"),setTimeout(function(){n.buildForm(n.idHistoria,n.usucod)},200)):(this.$refs.formly.endTime=!0,this.$refs.formly.submit(),this.$refs.formly.secuence&&this.loadForm(),(0,H["default"])("Terminó el examen","info"))},loadForm:function(){var n=this;return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,n.buildForm(n.idHistoria,n.usucod);case 1:return i.a(2)}},i)}))()}},created:function(){var n=this;return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,n.getDestinatarios(n.idHistoria);case 1:return i.a(2)}},i)}))()},watch:{idHistoria:function(n){var i=this;return v()(m()().m(function e(){return m()().w(function(e){while(1)switch(e.n){case 0:return i.form={},i.destinatarios=[],i.usucod=null,i.valid=!1,e.n=1,i.getDestinatarios(n);case 1:return e.a(2)}},e)}))()}}},x=e(12807);const R=(0,x.A)(D,[["render",y]]);var X=R,W=e(81288),z={getFormularios:function(){return v()(m()().m(function n(){return m()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,Q.$http.get("api/frmformulario/getCuestionariosDisponibles"))}},n)}))()}},E={components:{QInnerLoading:g.SQ,QSpinnerOval:g.VA,QCard:p.A,QList:h.A,QItem:b.A,QItemSection:w.A,QItemLabel:k.A,QOptionGroup:F.A,SieVacio:S.A,Ver:X,QIcon:g.bP},data:function(){return{formularios:[],tipoFormularios:[{value:1,label:"Disponibles"},{value:2,label:"Realizados"}],id:null,loading:!1}},computed:{isLess:function(){return(0,W.isLess)()}},methods:{getFormularios:function(){var n=this;return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,z.getFormularios();case 1:n.formularios=i.v;case 2:return i.a(2)}},i)}))()},cambiarDisponible:function(){var n=this;return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return n.formularios=[],i.n=1,n.getFormularios();case 1:return i.a(2)}},i)}))()},ver:function(n){this.id=n}},created:function(){var n=this;return v()(m()().m(function i(){return m()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,n.getFormularios();case 1:return i.a(2)}},i)}))()},watch:{id:function(){}}};const U=(0,x.A)(E,[["render",l]]);var V=U}}]);