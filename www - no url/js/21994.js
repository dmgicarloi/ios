"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[21994],{21994:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(61758),a={class:"row q-col-gutter-md"},o={class:"col-xs-12"};function i(e,n){var t=(0,r.g2)("header-btn"),i=(0,r.g2)("formulario"),s=(0,r.g2)("q-card-section"),u=(0,r.g2)("q-card"),c=(0,r.g2)("q-checkbox"),l=(0,r.g2)("sie-modal"),d=(0,r.g2)("listar-sedes"),f=(0,r.g2)("sie-table"),m=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(m,{class:"q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(u,{flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{name:e.tituloForm,auto:!0,buttons:e.botonesForm},null,8,["name","buttons"]),(0,r.bF)(s,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",a,[(0,r.Lk)("div",o,[(0,r.bF)(i,{schema:e.schemas.viewAdmGrado,ref:"formApp",key:"formApp",onClickIconGrid:e.clickIconGrid,onChangeInput:e.changeInput,onInputEditor:e.inputEditor},null,8,["schema","onClickIconGrid","onChangeInput","onInputEditor"])])])]}),_:1})]}),_:1}),(0,r.bF)(l,{title:e.configModalSel.titulo,modelValue:e.openModal,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.openModal=n}),ok:"GRABAR",onSubmit:e.submit},{default:(0,r.k6)(function(){return[(0,r.bF)(s,{class:"cont-modal-sm"},{default:(0,r.k6)(function(){return[(0,r.bF)(i,{schema:e.schemaModal,ref:"formModal",key:"formModal",modal:!0},null,8,["schema"]),e.esAgregar?((0,r.uX)(),(0,r.Wv)(c,{key:0,class:"text-bold",modelValue:e.insContinua,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.insContinua=n}),label:"Inserción contínua","true-value":"S","false-value":"N"},null,8,["modelValue"])):(0,r.Q3)("v-if",!0)]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,r.bF)(l,{title:e.modalSedes.titulo,modelValue:e.modalSedes.open,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.modalSedes.open=n}),onSubmit:e.seleccionarSedes},{default:(0,r.k6)(function(){return[(0,r.bF)(s,{class:"full-width"},{default:(0,r.k6)(function(){return[(0,r.bF)(d,{ref:"listaSedes",selected:e.modalSedes.selected},null,8,["selected"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,r.bF)(l,{title:e.modalProcSedes.titulo,modelValue:e.modalProcSedes.open,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modalProcSedes.open=n}),ok:"GRABAR",onSubmit:e.updateGradosSedes},{default:(0,r.k6)(function(){return[(0,r.bF)(s,{class:"full-width"},{default:(0,r.k6)(function(){return[(0,r.bF)(f,{selection:"single","show-search":!1,columns:e.configSedes.fields,data:e.configSedes.rows,config:e.configSedes.config},null,8,["columns","data","config"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var s=t(76080),u=t.n(s),c=t(45254),l=t.n(c),d=(t(52133),t(50310),t(6724),t(48426),t(83190),t(6123)),f=t(80660),m=t(10213),p=t(65848),h=t(40714),g=(t(10239),{data:function(){},methods:{gridGradosSedes:function(e){var n={LIMITE:{component:"input",type:"number",autoSelect:!0,autoFocus:!0,renderHtml:function(e,n){return n("span",{},e.LIMITE)}}},t=[{name:"EMPDES",label:"Sede",field:"EMPDES",align:"left",sortable:!0},{name:"LIMITE",label:"Aforo",field:"LIMITE",align:"center",wrap:!0,sortable:!0}];return e.manejaNee&&(n.LIMITE_NEE={component:"input",type:"number",autoSelect:!0,autoFocus:!0,renderHtml:function(e,n){return n("span",{},e.LIMITE_NEE)}},t.push({name:"LIMITE_NEE",label:"Aforo NEE",field:"LIMITE_NEE",align:"center",wrap:!0,sortable:!0})),{config:n,rows:[],fields:t}}}}),E=t(7968),w={mixins:[p.A,h.A,g],components:{listarSedes:E.A,QPage:d.Tu,QCard:d.C$,QCheckbox:d.vZ},data:function(){var e=this.init();return e.esAgregar=!0,e.insContinua="S",e.sie.manejaSedes=!1,e.sie.manejaNee=!1,e.sie.restringeGeneros=!1,e.modalSedes={open:!1,titulo:"Seleccionar Sedes",selected:[]},e.modalProcSedes={open:!1,titulo:"",id_grado:0},e.configSedes={},e},methods:{updateGrid:function(){var e=this;return l()(u()().m(function n(){var t,r,a;return u()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getInputValue("formApp","INPUT_1");case 1:return t=n.v,n.n=2,e.getInputValue("formApp","INPUT_2");case 2:r=n.v,a={anio:t},2===r.length&&("%"!==r[0]&&(a.nivel=r[0]),"%"!==r[1]&&(a.grado=r[1])),e.reloadGrid("formApp","GRID_1",a);case 3:return n.a(2)}},n)}))()},filtrarDatos:function(e,n,t){var r=this;return l()(u()().m(function e(){return u()().w(function(e){while(1)switch(e.n){case 0:r.$nextTick(l()(u()().m(function e(){return u()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,r.updateGrid();case 1:return e.a(2)}},e)})));case 1:return e.a(2)}},e)}))()},preModal:function(e,n,t){var r=this;return l()(u()().m(function n(){var a,o;return u()().w(function(n){while(1)switch(n.n){case 0:if(a="I"===t,!a){n.n=2;break}return n.n=1,r.getInputValue("formApp","INPUT_1");case 1:o=n.v,e={ANIO:o},n.n=3;break;case 2:e.INPUT_1=e.NIVEL+""+e.GRADO;case 3:return r.esAgregar=a,n.a(2,e)}},n)}))()},preSubmit:function(e){return e.NIVEL=e.INPUT_1[0],e.GRADO=e.INPUT_1[1],delete e.INSCRITOS,delete e.DISPONIBLES,delete e.LIMITE,this.sie.manejaSedes&&delete e.AFORO,this.sie.manejaNee&&delete e.AFORO_NEE,this.isFormCustom=this.esAgregar&&"S"===this.insContinua,{res:!0,data:e}},postSubmit:function(e){var n=this;return l()(u()().m(function e(){return u()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.updateGrid();case 1:return e.a(2)}},e)}))()},postDelete:function(e){var n=this;return l()(u()().m(function e(){return u()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.updateGrid();case 1:return e.a(2)}},e)}))()},updateEdadReq:function(e,n){var t=this;return l()(u()().m(function n(){var r;return u()().w(function(n){while(1)switch(n.n){case 0:r={EDAD_REQUERIDA:e.EDAD_REQUERIDA,ID_GRADO:e.ID_GRADO},f.$http.post("api/postulacionController/updateGrado",{data:r}).then(function(){var e=l()(u()().m(function e(n){return u()().w(function(e){while(1)switch(e.n){case 0:return t.$notify(n.message,"success"),e.n=1,t.updateGrid();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t.$notify(e.error.message,"warning")});case 1:return n.a(2)}},n)}))()},verGradosSedes:function(e){var n=this;return l()(u()().m(function t(){var r,a;return u()().w(function(t){while(1)switch(t.n){case 0:return n.modalProcSedes.id_grado=e.ID_GRADO,n.modalProcSedes.titulo="Configurar Procesos por Sedes: "+e.ANIO_NIVEL_GRADO,n.configSedes.rows=[],r={id_grado:n.modalProcSedes.id_grado,manejaNee:n.sie.manejaNee},n.modalSedes.selected.length>0&&(r.sedes=n.modalSedes.selected.map(function(e){return e.EMPCOD})),t.n=1,n.getApiAction("api/postulacionController/getGradosSedes",r);case 1:a=t.v,n.configSedes.rows=a,n.modalProcSedes.open=!0;case 2:return t.a(2)}},t)}))()},updateGradosSedes:function(){var e=this;return l()(u()().m(function n(){return u()().w(function(n){while(1)switch(n.n){case 0:(0,m.confirm)("¿Está seguro de actualizar los registros?","update").onOk(function(){var n={manejaNee:e.sie.manejaNee,id_grado:e.modalProcSedes.id_grado,rows:e.configSedes.rows};f.$http.post("api/postulacionController/updateGradosSedes",{data:n}).then(function(){var n=l()(u()().m(function n(t){var r;return u()().w(function(n){while(1)switch(n.n){case 0:return r=1===t.code?"success":"warning",e.$notify(t.message,r),e.modalProcSedes.open=!1,n.n=1,e.updateGrid();case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()).catch(function(n){e.$notify(n.error.message,"warning")})});case 1:return n.a(2)}},n)}))()},updateAforoNee:function(e,n){var t=this;return l()(u()().m(function n(){var r;return u()().w(function(n){while(1)switch(n.n){case 0:r={AFORO_NEE:e.AFORO_NEE,ID_GRADO:e.ID_GRADO},f.$http.post("api/postulacionController/updateGrado",{data:r}).then(function(){var e=l()(u()().m(function e(n){return u()().w(function(e){while(1)switch(e.n){case 0:return t.$notify(n.message,"success"),e.n=1,t.updateGrid();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t.$notify(e.error.message,"warning")});case 1:return n.a(2)}},n)}))()},updateGenero:function(e,n){var t=this;return l()(u()().m(function n(){var r;return u()().w(function(n){while(1)switch(n.n){case 0:r={GENERO:e.GENERO,ID_GRADO:e.ID_GRADO},f.$http.post("api/postulacionController/updateGrado",{data:r}).then(function(){var e=l()(u()().m(function e(n){return u()().w(function(e){while(1)switch(e.n){case 0:return t.$notify(n.message,"success"),e.n=1,t.updateGrid();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t.$notify(e.error.message,"warning")});case 1:return n.a(2)}},n)}))()}},created:function(){var e=this;return l()(u()().m(function n(){var t,r;return u()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getConstantesAdmision(["AD_MANEJA_SEDES","AD_MANEJA_NEE","AD_RESTRINGE_GENEROS"]);case 1:return t=n.v,e.sie.manejaSedes=t.AD_MANEJA_SEDES,e.sie.manejaNee=t.AD_MANEJA_NEE,e.sie.restringeGeneros=t.AD_RESTRINGE_GENEROS,r=[{id:"viewAdmGrado",ref:"formApp"}],n.n=2,e.loadSchemas(r);case 2:e.$nextTick(l()(u()().m(function n(){var t,r;return u()().w(function(n){while(1)switch(n.n){case 0:if(!e.sie.manejaSedes){n.n=1;break}return e.configSedes=Object.assign({},e.gridGradosSedes(e.sie)),n.n=1,e.addBotonGrid({schema:"viewAdmGrado",index:2,icon:"add_location",eventos:"verGradosSedes",permiso:3});case 1:if(!e.sie.manejaNee){n.n=2;break}return t=e.sie.manejaSedes?null:{name:"AFORO_NEE",component:"input",event:"updateAforoNee"},n.n=2,e.addcolGrid({schema:"viewAdmGrado",index:2,name:"AFORO_NEE",label:"Aforo NEE",align:"left",posi:3,editor:t});case 2:if(!e.sie.restringeGeneros){n.n=3;break}return r={name:"GENERO",component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[{value:"U",label:"Mixto"},{value:"M",label:"Masculino"},{value:"F",label:"Femenino"}],event:"updateGenero"},n.n=3,e.addcolGrid({schema:"viewAdmGrado",index:2,name:"GENERO",label:"Género",align:"left",posi:-1,editor:r});case 3:return n.a(2)}},n)})));case 3:return n.a(2)}},n)}))()}},S=t(12807);const A=(0,S.A)(w,[["render",i]]);var v=A}}]);