"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[91689],{91689:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(8445),s=n.n(a),i=n(61758),r=n(58790),u={class:"row full-height"},o={class:"column items-center full-width"},c={key:0,class:"column col"},l={key:1,class:"full-width"},d={class:"col q-ma-lg q-px-lg full-width"},f={key:0,class:"col q-mx-lg q-px-lg q-py-md full-width"},m=["innerHTML"],p={key:1,class:"row"},h={class:"col row justify-center items-center"},v={class:"q-mr-md"},g={class:"q-ml-md"},b={key:2,class:"col q-ma-lg q-px-lg full-width"};function w(e,t){var n=(0,i.g2)("q-toolbar-title"),a=(0,i.g2)("q-toolbar"),w=(0,i.g2)("sie-vacio"),k=(0,i.g2)("alert"),C=(0,i.g2)("q-btn"),S=(0,i.g2)("q-item-separator"),P=(0,i.g2)("q-item-side"),q=(0,i.g2)("q-item-main"),F=(0,i.g2)("q-item"),y=(0,i.g2)("q-list"),A=(0,i.g2)("q-card-main"),E=(0,i.g2)("q-card"),D=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(D,null,{default:(0,i.k6)(function(){return[(0,i.bF)(a,{class:"shadow-2 z-fab",inverted:""},{default:(0,i.k6)(function(){return[(0,i.bF)(n,{class:"q-pa-none"},{default:(0,i.k6)(function(){return s()(t[0]||(t[0]=[(0,i.eW)("Solicitud de becas",-1)]))}),_:1})]}),_:1}),(0,i.Lk)("div",u,[(0,i.Lk)("div",o,[e.showNoProcess?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.bF)(w,{title:"No existe periodo vigente para el proceso de becas"})])):((0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",d,[(0,i.bF)(k,{color:"grey-4",message:e.message},null,8,["message"])]),2===e.state?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("div",{innerHTML:e.comunicado},null,8,m)])):(0,i.Q3)("v-if",!0),e.isNewFamProcess?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.Lk)("div",h,[(0,i.Lk)("div",v,[(0,i.bF)(C,{color:"primary",size:"lg",label:"SI",onClick:e.sendSolicitud},null,8,["onClick"])]),(0,i.Lk)("div",g,[(0,i.bF)(C,{color:"primary",size:"lg",label:"NO"})])])])):(0,i.Q3)("v-if",!0),e.existenDeudas?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(E,null,{default:(0,i.k6)(function(){return[(0,i.bF)(A,null,{default:(0,i.k6)(function(){return[t[1]||(t[1]=(0,i.Lk)("span",null,[(0,i.Lk)("p",null,[(0,i.Lk)("b",null,"Deudas Pendientes:")])],-1)),(0,i.bF)(y,{class:"no-border"},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.deuAlumnos,function(e){return(0,i.uX)(),(0,i.CE)("div",{key:e.ALUCOD},[(0,i.bF)(S),(0,i.bF)(F,{class:"alumnos"},{default:(0,i.k6)(function(){return[(0,i.bF)(P,{icon:"person"}),(0,i.bF)(q,{class:"label"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(e.NOMCOMP),1)]}),_:2},1024)]}),_:2},1024),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.deudas,function(e){return(0,i.uX)(),(0,i.Wv)(F,{key:e.ID_DEUDA,class:"alumnos deudas"},{default:(0,i.k6)(function(){return[(0,i.bF)(q,{class:"label"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(e.CONDES+" "+e.MESDES+" "+e.ANOCOB),1)]}),_:2},1024)]}),_:2},1024)}),128)),(0,i.bF)(S)])}),128))]}),_:1})]}),_:1})]}),_:1})])):(0,i.Q3)("v-if",!0)]))])])]}),_:1})}var k=n(57008),C=n.n(k),S=n(76080),P=n.n(S),q=n(45254),F=n.n(q),y=(n(74260),n(10239),n(50310),n(32203),n(90095),n(83190),n(13715),n(35463)),A=n(57668),E=n(982),D=n(80340),L=n(36980),M=n(6123),O=-1,_=0,Q=4,T=9,I={components:{Alert:y.A,sieInfo:A["default"],notify:E["default"],sieVacio:D.A,QList:M.Mb,QItemSeparator:M.CL,QListHeader:M.XR,QPage:M.Tu,QToolbar:M.ZV,QToolbarTitle:M.r_,QBtn:M.Il,QCard:M.C$,QCardMain:M.d1,QItem:M.H0,QItemSide:M.n1,QItemMain:M.mF},data:function(){return{state:0,newProcess:!0,haveActivePer:!1,dsMen:[],deudasPendientes:[],deuAlumnos:[],existenDeudas:!1,txtDeudas:"",comunicado:"",isSantisimo:"0057"===(0,A["default"])().colcod,isVcSp:"0081"===(0,A["default"])().colcod,alumno:"alumno prueba"}},methods:{init:function(){this.isSantisimo&&this.validateAnoIng(),this.isVcSp&&this.getDeudasPendientes(),this.validateCurrentState(),this.getMensajes(),this.getComunicado()},validateAnoIng:function(){var e=this;return F()(P()().m(function t(){var n,a,s;return P()().w(function(t){while(1)switch(t.n){case 0:return n={famcod:(0,A["default"])().famcod},t.n=1,e.$http.get("api/HyoBecaSolicitud/checkRequisitosFam",{params:n});case 1:a=t.v,s=a.json,!1===s.passed&&(e.state=O,e.newProcess=!1);case 2:return t.a(2)}},t)}))()},validateCurrentState:function(){var e=this;return F()(P()().m(function t(){var n,a,s;return P()().w(function(t){while(1)switch(t.p=t.n){case 0:return n={famcod:(0,A["default"])().famcod},t.p=1,t.n=2,e.$http.get("api/HyoBecaSolicitud/checkCurrentState",{params:n});case 2:a=t.v,s=a.json,e.state=s.ESTADO,e.newProcess=!1,(e.state>=Q||e.state===T)&&e.$router.push({name:"intranet.becas.proceso"}),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},getMensajes:function(){var e=this;return F()(P()().m(function t(){var n,a,s;return P()().w(function(t){while(1)switch(t.p=t.n){case 0:return n={pagina:1},t.p=1,t.n=2,e.$http.get("api/HyoBecaMensaje/getMensajesPorPagina",{params:n});case 2:a=t.v,s=a.json,e.dsMen=s,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},getDeudasPendientes:function(){var e=this;return F()(P()().m(function t(){var n,a,s,i,r,u;return P()().w(function(t){while(1)switch(t.p=t.n){case 0:return n={famcod:(0,A["default"])().famcod},t.p=1,t.n=2,e.$http.get("api/HyoCobros/obtDeudasPendientesPorFamilia",{params:n});case 2:a=t.v,s=a.json,i={},r=["030403","090232","170012","120049","200110","110658","140005","150043","100090","100196","030392","150105","160049","140116","100087","200025","200045","220078","170044","170076","170010","140005"],u=["20200091","20150053","20190029","002474","001348","20220134","20210117","20130065","20100108","20100011"],r.push.apply(r,u),s.length>0&&(e.isVcSp||e.isSantisimo)&&r.indexOf((0,A["default"])().famcod)<0&&(e.deudasPendientes=s,e.existenDeudas=!0,e.state=_,s.forEach(function(e){i.hasOwnProperty(e.ALUCOD)||(i[e.ALUCOD]=C()(C()({},e),{},{deudas:[]})),i[e.ALUCOD].deudas.push(e)})),e.deuAlumnos=i,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},getComunicado:function(){var e=this;return F()(P()().m(function t(){var n,a;return P()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/HyoBecaMensaje/getComunicado");case 1:n=t.v,a=n.json,e.comunicado=a.TEXTO,t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))()},sendSolicitud:function(){var e=this;return F()(P()().m(function t(){var n,a,s,i;return P()().w(function(t){while(1)switch(t.p=t.n){case 0:return n={famcod:(0,A["default"])().famcod},t.p=1,t.n=2,e.$http.post("api/HyoBecaSolicitud/procesoSolicitud",n);case 2:a=t.v,s=a.json,"Ok"===s.status&&((0,E["default"])(s.message),setTimeout(function(){window.location.reload()},1e3)),t.n=4;break;case 3:t.p=3,i=t.v,(0,E["default"])(i.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()}},computed:C()(C()({},(0,L.aH)("beca",["periodo"])),{},{isNewFamProcess:function(){return(this.state===_||this.newProcess)&&this.deudasPendientes.length<=0},message:function(){var e=this,t={};if(this.deudasPendientes.length>0){var n="Usted no podr√° acceder al proceso de becas hasta regularizar las deudas que tiene a la fecha. <br>";t={TEXTO:n,TIPO_MENSAJE:3}}else this.dsMen.length>0&&(t=this.dsMen.find(function(t){return t.ESTADO_BECA===e.state}));return t},showNoProcess:function(){return 0===this.periodo&&this.state<1}}),mounted:function(){var e=this;return F()(P()().m(function t(){return P()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.init();case 1:return t.a(2)}},t)}))()}},X=n(12807);const j=(0,X.A)(I,[["render",w]]);var H=j}}]);