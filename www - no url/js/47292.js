"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[47292],{47292:function(e,l,a){a.r(l),a.d(l,{default:function(){return G}});var t=a(8445),n=a.n(t),s=a(61758),i=a(58790),r={class:"column"},d={key:0,class:"row"},u={class:"row col"},o={class:"row"},c={class:"row q-my-xs"},v={class:"col"},f={class:"row q-my-xs"},R={class:"col"},k={class:"row q-my-xs"},b={class:"row q-my-xs"},E={class:"row q-my-xs"},m={class:"row q-my-xs"},_={class:"row q-my-xs"},L={class:"row q-my-xs"},p={class:"row q-my-xs"},A={class:"row q-my-xs"},I={class:"row"},D={class:"row q-my-xs"},F={class:"row col"},O={class:"row q-my-xs col"},T={class:"row q-my-xs col"},h={class:"row"},S={class:"row q-my-xs col"},U={class:"row col"},w={class:"row q-my-xs col"},g={class:"row q-my-xs col"},C={class:"column"},x={class:"row"},M={class:"column"},y={class:"row"};function q(e,l){var a=(0,s.g2)("q-item-tile"),t=(0,s.g2)("q-item-main"),q=(0,s.g2)("q-item"),N=(0,s.g2)("q-chip"),Y=(0,s.g2)("q-list-header"),V=(0,s.g2)("q-item-separator"),H=(0,s.g2)("sie-usuario"),Q=(0,s.g2)("q-item-side"),P=(0,s.g2)("sie-modal"),B=(0,s.g2)("header-btn"),X=(0,s.g2)("q-select"),W=(0,s.g2)("q-datetime"),z=(0,s.g2)("q-btn"),K=(0,s.g2)("q-td"),$=(0,s.g2)("q-table");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(P,{class:"reserva--auditoria--sie-modal--detalle-reserva",modelValue:e.modalDetalle,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.modalDetalle=l}),ok:!1,title:"Detalle de Reserva"},{default:(0,s.k6)(function(){return[(0,s.bF)(q,null,{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.bF)(a,{class:"text-bold titulo",label:""},{default:(0,s.k6)(function(){return[(0,s.eW)((0,i.v_)(e.detalleReserva.SALA),1)]}),_:1}),(0,s.bF)(a,{sublabel:""},{default:(0,s.k6)(function(){return[(0,s.bF)(a,{sublabel:""},{default:(0,s.k6)(function(){return[3!==e.detalleReserva.TIPO_RESERVA_ID?((0,s.uX)(),(0,s.CE)("div",d,[l[6]||(l[6]=(0,s.Lk)("div",{class:"text-bold"},"Fecha de reserva: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.date(e.detalleReserva.FECHA,"DD MMMM YYYY"))+" ("+(0,i.v_)(e.detalleReserva.HORA_INICIO)+" - "+(0,i.v_)(e.detalleReserva.HORA_FIN)+")",1)])):(0,s.Q3)("v-if",!0),(0,s.Lk)("div",u,[l[7]||(l[7]=(0,s.Lk)("div",{class:"text-bold"},"Fecha de reserva: ",-1)),(0,s.Lk)("span",null,"Del "+(0,i.v_)(e.date(e.detalleReserva.FECHA,"DD MMMM YYYY"))+" "+(0,i.v_)(e.detalleReserva.HORA_INICIO)+" al "+(0,i.v_)(e.detalleReserva.FECHA_FIN|e.date("DD MMMM YYYY"))+" "+(0,i.v_)(e.detalleReserva.HORA_FIN),1)]),(0,s.Lk)("div",o,[l[8]||(l[8]=(0,s.Lk)("div",{class:"text-bold"},"Fecha de eliminación: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.date(e.detalleReserva.FH_DELETE,"DD MMMM YYYY hh:mm A")),1)])]}),_:1})]}),_:1})]}),_:1})]}),_:1}),3!==e.detalleReserva.TIPO_RESERVA_ID?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[e.detalleReserva.MATERIALES_BASE&&e.detalleReserva.MATERIALES_BASE.length>0?((0,s.uX)(),(0,s.Wv)(q,{key:0,class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",c,[l[9]||(l[9]=(0,s.Lk)("div",{class:"text-bold"},"Materiales base: ",-1)),(0,s.Lk)("div",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.detalleReserva.MATERIALES_BASE,function(e){return(0,s.uX)(),(0,s.Wv)(N,{color:"secondary"},{default:(0,s.k6)(function(){return[(0,s.Lk)("span",null,(0,i.v_)(e.NOMBRE),1)]}),_:2},1024)}),256))])])]}),_:1})]}),_:1})):(0,s.Q3)("v-if",!0),e.detalleReserva.MATERIALES_ADICIONALES&&e.detalleReserva.MATERIALES_ADICIONALES.length>0?((0,s.uX)(),(0,s.Wv)(q,{key:1,class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",f,[l[10]||(l[10]=(0,s.Lk)("div",{class:"text-bold"},"Materiales adicionales: ",-1)),(0,s.Lk)("div",R,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.detalleReserva.MATERIALES_ADICIONALES,function(e){return(0,s.uX)(),(0,s.Wv)(N,{color:"secondary"},{default:(0,s.k6)(function(){return[(0,s.Lk)("span",null,(0,i.v_)(e.NOMBRE),1)]}),_:2},1024)}),256))])])]}),_:1})]}),_:1})):(0,s.Q3)("v-if",!0),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",k,[l[11]||(l[11]=(0,s.Lk)("div",{class:"text-bold"},"Participantes: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.PARTICIPANTES),1)])]}),_:1})]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",b,[l[12]||(l[12]=(0,s.Lk)("div",{class:"text-bold"},"Capacidad: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.CAPACIDAD),1)])]}),_:1})]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",E,[l[13]||(l[13]=(0,s.Lk)("div",{class:"text-bold"},"Observaciones: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.OBSERVACIONES),1)])]}),_:1})]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",m,[l[14]||(l[14]=(0,s.Lk)("div",{class:"text-bold"},"Evento asociado: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.EVENTO_ASOCIADO),1)])]}),_:1})]}),_:1})],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",_,[l[15]||(l[15]=(0,s.Lk)("div",{class:"text-bold"},"Tipo de viaje: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(1===e.detalleReserva.TIPO_VIAJE?"Interno":"Externo"),1)])]}),_:1})]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",L,[l[16]||(l[16]=(0,s.Lk)("div",{class:"text-bold"},"Tipo de movilidad: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.EVENTO_ASOCIADO),1)])]}),_:1})]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",p,[l[17]||(l[17]=(0,s.Lk)("div",{class:"text-bold"},"Capacidad: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.CAPACIDAD),1)])]}),_:1})]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("div",A,[l[18]||(l[18]=(0,s.Lk)("div",{class:"text-bold"},"Observaciones: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.OBSERVACIONES),1)])]}),_:1})]}),_:1}),(0,s.bF)(Y,null,{default:(0,s.k6)(function(){return n()(l[19]||(l[19]=[(0,s.Lk)("span",null,"IDA",-1)]))}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.Lk)("div",I,[(0,s.Lk)("div",D,[l[20]||(l[20]=(0,s.Lk)("div",{class:"text-bold"},"# de Participantes: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.NUMIDA),1)])])]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.Lk)("div",F,[(0,s.Lk)("div",O,[l[21]||(l[21]=(0,s.Lk)("div",{class:"text-bold"},"Partida: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.PARTIDA_IDA),1)]),(0,s.Lk)("div",T,[l[22]||(l[22]=(0,s.Lk)("div",{class:"text-bold"},"Llegada: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.LLEGADA_IDA),1)])])]}),_:1}),(0,s.bF)(Y,null,{default:(0,s.k6)(function(){return n()(l[23]||(l[23]=[(0,s.Lk)("span",null,"RETORNO",-1)]))}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.Lk)("div",h,[(0,s.Lk)("div",S,[l[24]||(l[24]=(0,s.Lk)("div",{class:"text-bold"},"# de Participantes: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.NUMRETORNO),1)])])]}),_:1}),(0,s.bF)(q,{class:"item"},{default:(0,s.k6)(function(){return[(0,s.Lk)("div",U,[(0,s.Lk)("div",w,[l[25]||(l[25]=(0,s.Lk)("div",{class:"text-bold"},"Partida: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.PARTIDA_RETORNO),1)]),(0,s.Lk)("div",g,[l[26]||(l[26]=(0,s.Lk)("div",{class:"text-bold"},"Llegada: ",-1)),(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.LLEGADA_RETORNO),1)])])]}),_:1})],64)),(0,s.bF)(V),(0,s.bF)(Y,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.TITULO),1)]}),_:1}),(0,s.bF)(q,null,{default:(0,s.k6)(function(){return[(0,s.bF)(Q,null,{default:(0,s.k6)(function(){return[(0,s.bF)(H,{usucod:e.detalleReserva.USUCOD,size:"md"},null,8,["usucod"])]}),_:1}),(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.bF)(a,{class:"text-bold",label:""},{default:(0,s.k6)(function(){return[(0,s.eW)((0,i.v_)(e.detalleReserva.NOMBRE_CREADOR),1)]}),_:1}),(0,s.bF)(a,{sublabel:""},{default:(0,s.k6)(function(){return[(0,s.eW)((0,i.v_)(e.detalleReserva.CARGO_CREADOR||e.detalleReserva.PERFIL_CREADOR),1)]}),_:1})]}),_:1})]}),_:1}),e.detalleReserva.TITULO2?((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[(0,s.bF)(Y,null,{default:(0,s.k6)(function(){return[(0,s.Lk)("span",null,(0,i.v_)(e.detalleReserva.TITULO2),1)]}),_:1}),(0,s.bF)(q,null,{default:(0,s.k6)(function(){return[(0,s.bF)(Q,null,{default:(0,s.k6)(function(){return[(0,s.bF)(H,{usucod:e.detalleReserva.USUCOD_DELETE,size:"md"},null,8,["usucod"])]}),_:1}),(0,s.bF)(t,null,{default:(0,s.k6)(function(){return[(0,s.bF)(a,{class:"text-bold",label:""},{default:(0,s.k6)(function(){return[(0,s.eW)((0,i.v_)(e.detalleReserva.USUARIO_DELETE),1)]}),_:1})]}),_:1})]}),_:1})],64)):(0,s.Q3)("v-if",!0)]}),_:1},8,["modelValue"]),(0,s.Lk)("div",C,[(0,s.Lk)("div",x,[(0,s.bF)(B,{name:"Auditoría de Eliminación",style:{width:"100%"}})]),(0,s.Lk)("div",M,[(0,s.Lk)("div",y,[e.tiposReserva.length>0?((0,s.uX)(),(0,s.Wv)(X,{key:0,class:"q-if-outlined col",multiple:"",modelValue:e.unidadSeleccionada,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.unidadSeleccionada=l}),options:e.tiposReserva,filter:e.tiposReserva.length>5,"float-label":"Tipos de Reserva","display-value":e.tiposSeleccionados,onInput:l[2]||(l[2]=function(l){return e.cargarUnidadReservable()})},null,8,["modelValue","options","filter","display-value"])):(0,s.Q3)("v-if",!0),(0,s.bF)(X,{class:"q-if-outlined col",multiple:"",modelValue:e.filtroUnidadReservable,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.filtroUnidadReservable=l}),options:e.filtroReservaUnidadesReservableOption,"display-value":e.unidadesSeleccionadas,filter:"","float-label":"Unidad Reservable",onInput:e.init},null,8,["modelValue","options","display-value","onInput"]),(0,s.bF)(W,{class:"q-if-outlined",modelValue:e.fecIni,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.fecIni=l}),"float-label":"Fecha inicio",format:"DD/MM/YYYY",onInput:e.init},null,8,["modelValue","onInput"]),(0,s.bF)(W,{class:"q-if-outlined",modelValue:e.fecFin,"onUpdate:modelValue":l[5]||(l[5]=function(l){return e.fecFin=l}),"float-label":"Fecha fin",format:"DD/MM/YYYY",onInput:e.init},null,8,["modelValue","onInput"])])])]),(0,s.bF)($,{data:e.eliminados,columns:e.columns,filter:e.filtro,style:(0,i.Tr)({"max-height":e.alto})},{"body-cell-DETALLE":(0,s.k6)(function(l){return[(0,s.bF)(K,{props:l},{default:(0,s.k6)(function(){return[(0,s.bF)(z,{flat:"",dense:"",round:"",icon:"info",onClick:function(a){return e.showDetail(l.row)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","filter","style"])])}var N=a(76080),Y=a.n(N),V=a(45254),H=a.n(V),Q=(a(77507),a(52133),a(50310),a(6724),a(83190),a(6123)),P=a(30545),B=a(18105),X=a(30640),W=a(24974),z={components:{QSelect:Q.Si,QTd:Q.Ef,QDatetime:Q.T5,QTable:P.A,sieModal:X.A,QItem:Q.H0,QItemTile:Q.lp,QItemSeparator:Q.CL,QChip:Q.wQ,sieUsuario:W.A,QListHeader:Q.XR,QItemMain:Q.mF,QItemSide:Q.n1,QBtn:Q.Il},data:function(){return{tiposReserva:[],unidadSeleccionada:[],filtroReservaUnidadesReservableOption:[],filtroUnidadReservable:[],filtro:null,fecIni:new Date((new Date).setDate(1)),fecFin:new Date((new Date).setDate(new Date((new Date).getFullYear(),(new Date).getMonth()+1,0).getDate())),eliminados:[],alto:0,detalleReserva:{},modalDetalle:!1,columns:[{name:"ID",label:"Id",field:"ID",align:"center",sortable:!0},{name:"TIPO",label:"Tipo",field:"TIPO",align:"left",sortable:!0},{name:"UNIDADNOMBRE",label:"Unidad",field:"UNIDADNOMBRE",align:"left",sortable:!0},{name:"USUARIO_RESERVA",label:"Usuario Reserva",field:"USUARIO_RESERVA",align:"left",sortable:!0},{name:"HORARIO",label:"Horario",field:"HORARIO",align:"center",sortable:!0},{name:"USUARIO_DELETE",label:"Usuario eliminación",field:"USUARIO_DELETE",align:"left",sortable:!0},{name:"FH_DELETE",label:"Fecha de Eliminación",field:"FH_DELETE",align:"left",sortable:!0},{name:"DETALLE",field:"DETALLE",align:"left"}]}},methods:{date:B.Ay,handleResize:function(){var e=200;this.alto=window.innerHeight-e+"px"},init:function(){var e=this;return H()(Y()().m(function l(){var a;return Y()().w(function(l){while(1)switch(l.n){case 0:return a={fecIni:e.fecIni,fecFin:e.fecFin,tipo:e.unidadSeleccionada,unidad:e.filtroUnidadReservable},l.n=1,e.$http.get("api/RsReservaController/getReservasEliminadas",{params:{info:a}});case 1:e.eliminados=l.v;case 2:return l.a(2)}},l)}))()},cargarUnidadReservable:function(){var e=this;return H()(Y()().m(function l(){return Y()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,e.$http.get("api/RsUnidadReservableController/getComboUnidadReservable",{params:{tipoReservaId:0==e.unidadSeleccionada.length?0:e.unidadSeleccionada.join(",")}});case 1:return e.filtroReservaUnidadesReservableOption=l.v,l.n=2,e.init();case 2:return l.a(2)}},l)}))()},showDetail:function(e){var l=this;return H()(Y()().m(function a(){var t,n,s,i;return Y()().w(function(a){while(1)switch(a.n){case 0:return t=e.ID,e.FH_DELETE,n=e.USUARIO_DELETE,s=e.USUCOD,a.n=1,l.$http.get("api/RsReservaController/getRsInformacionReserva",{params:{id:t}});case 1:return l.detalleReserva=a.v,a.n=2,l.$http.get("api/RsReservaController/getRsRecursoAdicional",{params:{id:t}});case 2:i=a.v,l.detalleReserva.MATERIALES_BASE=i[1],l.detalleReserva.MATERIALES_ADICIONALES=i[0],l.detalleReserva.FH_DELETE=l.detalleReserva.FH_DELETE,l.detalleReserva.USUARIO_DELETE=n,l.detalleReserva.USUCOD_DELETE=s,l.modalDetalle=!0,l.detalleReserva.TITULO=l.detalleReserva.USUCOD===s?"Creado y Eliminado por: ":"Creado por: ",l.detalleReserva.TITULO2=l.detalleReserva.USUCOD!==s?"Eliminado por: ":null,console.log(l.detalleReserva);case 3:return a.a(2)}},a)}))()}},computed:{unidadesSeleccionadas:function(){var e="Todos";return this.filtroUnidadReservable.length>0&&(e="".concat(this.filtroUnidadReservable.length," unidades Seleccionadas")),e},tiposSeleccionados:function(){var e="Todos";return this.unidadSeleccionada.length>0&&(e="".concat(this.unidadSeleccionada.length," Tipos Seleccionados")),e}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){var e=this;return H()(Y()().m(function l(){var a;return Y()().w(function(l){while(1)switch(l.n){case 0:return window.addEventListener("resize",e.handleResize),e.handleResize(),e.init(),l.n=1,e.$http.get("api/RsTipoReservaController/getRsTipoReserva");case 1:a=l.v,e.tiposReserva=a.map(function(e){var l=e.NOMBRE,a=e.ID;return{label:l,value:a}});case 2:return l.a(2)}},l)}))()}},K=a(12807);const $=(0,K.A)(z,[["render",q]]);var G=$}}]);