(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[18412],{18412:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return Jo}});var i=t(8445),a=t.n(i),r=t(61758),n=t(29104),l=t(89185),s=t.n(l),c={key:0,class:"row q-card q-pa-sm gutter-xs"},u={class:"col-md-10 col-9"},d={class:"row q-gutter-sm q-ma-md-sm selectBorder"},p={class:"col-xs-12 col-md-2"},f={class:"col-xs-12 col-md-2"},v={key:0,class:"col-xs-12 col-md-2"},m={key:1,class:"col-xs-12 col-md-2"},g={key:2,class:"col-xs-12 col-md-2"},h={key:0,class:"row q-gutter-sm q-ma-md-sm"},b={class:"col-xs-12 col-md-2"},S={key:0,class:"col-xs-12 col-md-2"},k={key:1,class:"col-xs-12 col-md-2"},O={key:1,class:"row q-gutter-sm"},P={key:0,class:"col-xs-12 col-md-2"},y={class:"col-md-2 col-3 text-right"},F={class:"row"};function E(e,o){var t=(0,r.g2)("q-select"),i=(0,r.g2)("q-btn"),l=(0,r.g2)("sie-vacio"),E=(0,r.g2)("graficos"),C=(0,r.g2)("preguntas"),N=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(N,{class:"bg-fondo column",id:"graficaEstadistica"},{default:(0,r.k6)(function(){return[e.showPreguntas?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",u,[(0,r.Lk)("div",d,[(0,r.bo)((0,r.Lk)("div",p,[(0,r.bF)(t,{modelValue:e.TIPO_EVA,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.TIPO_EVA=o}),options:e.optTipoEva,label:"Tipo de Evaluación",preSelect:e.preSelected,onSelected:e.seleccionarTipoDeEvaluacion},null,8,["modelValue","options","preSelect","onSelected"])],512),[[n.aG,e.optTipoEva.length>1]]),(0,r.Lk)("div",f,[(0,r.bF)(t,{modelValue:e.modoVisualizacion,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.modoVisualizacion=o}),options:e.optModoVisualizacion,label:"Modo Visualización",preSelect:e.preSelected,onSelected:e.seleccionarModoVisualizacion},null,8,["modelValue","options","preSelect","onSelected"])]),e.modoVisualizacion?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.bF)(t,{modelValue:e.tipoReporte,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.tipoReporte=o}),options:e.optTipoReporte,label:"Enfoque",preSelect:e.preSelected,onSelected:e.seleccionarEnfoque},null,8,["modelValue","options","preSelect","onSelected"])])):(0,r.Q3)("v-if",!0),e.modoVisualizacion?((0,r.uX)(),(0,r.CE)("div",m,[(0,r.bF)(t,{modelValue:e.asignatura,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.asignatura=o}),options:e.optAsignatura,label:"Asignatura",preSelect:e.preSelected,onSelected:e.seleccionarEnfoque},null,8,["modelValue","options","preSelect","onSelected"])])):(0,r.Q3)("v-if",!0),e.isPorPeriodo&&e.tipoReporte?((0,r.uX)(),(0,r.CE)("div",g,[(0,r.bF)(t,{modelValue:e.periodo,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.periodo=o}),options:e.optPeriodos,label:e.$t("periodo"),preSelect:e.preSelected,onSelected:o[5]||(o[5]=function(o){return e.seleccionarPeriodo()})},null,8,["modelValue","options","label","preSelect"])])):(0,r.Q3)("v-if",!0)]),e.isSeleccionValida&&"porCompetencia"==e.tipoReporte?((0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("div",b,[(0,r.bF)(t,{modelValue:e.filtroNGS.instrucod,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.filtroNGS.instrucod=o}),options:e.niveles,preSelect:e.preSelected,onSelected:o[7]||(o[7]=function(o){return e.seleccionarNGS("n")}),label:e.$t("ngs.nivel")},null,8,["modelValue","options","preSelect","label"])]),e.filtroNGS.instrucod?((0,r.uX)(),(0,r.CE)("div",S,[(0,r.bF)(t,{modelValue:e.filtroNGS.gradocod,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.filtroNGS.gradocod=o}),options:e.grados,preSelect:e.preSelected,onSelected:o[9]||(o[9]=function(o){return e.seleccionarNGS("g")}),label:e.$t("ngs.grado")},null,8,["modelValue","options","preSelect","label"])])):(0,r.Q3)("v-if",!0),e.filtroNGS.gradocod?((0,r.uX)(),(0,r.CE)("div",k,[(0,r.bF)(t,{modelValue:e.filtroNGS.id_ambito,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.filtroNGS.id_ambito=o}),options:e.ambitos,preSelect:e.preSelected,onSelected:o[11]||(o[11]=function(o){return e.seleccionarNGS("s")}),label:e.$t("ambito")},null,8,["modelValue","options","preSelect","label"])])):(0,r.Q3)("v-if",!0)])):(0,r.Q3)("v-if",!0),e.isSeleccionValida?((0,r.uX)(),(0,r.CE)("div",O,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.FILTROS,function(o,i){return(0,r.uX)(),(0,r.CE)(r.FK,null,[o.visible?((0,r.uX)(),(0,r.CE)("div",P,[(0,r.bF)(t,{modelValue:o.idOption,"onUpdate:modelValue":function(e){return o.idOption=e},options:o.dataOption,preSelect:e.preSelected,onSelected:function(t){return e.seleccionarFiltro(o,i)},label:o.label},null,8,["modelValue","onUpdate:modelValue","options","preSelect","onSelected","label"])])):(0,r.Q3)("v-if",!0)],64)}),256))])):(0,r.Q3)("v-if",!0)]),(0,r.Lk)("div",y,[(0,r.bF)(i,{class:"q-mx-xs",icon:"help",color:"secondary",onClick:o[12]||(o[12]=function(){return e.showPreguntas=!0}),label:"Preguntas"})])])),(0,r.bo)((0,r.Lk)("div",F,a()(o[14]||(o[14]=[(0,r.Lk)("div",{class:"col-12"},[(0,r.Lk)("img",{src:s(),style:{width:"100%",height:"auto"}})],-1)])),512),[[n.aG,!e.isSeleccionValida&&!e.showPreguntas]]),e.mostrarAviso?(0,r.bo)(((0,r.uX)(),(0,r.Wv)(l,{key:1,class:"col"},null,512)),[[n.aG,e.mostrarAviso]]):e.isSeleccionValida&&e.loadGrafico?(0,r.bo)(((0,r.uX)(),(0,r.Wv)(E,{key:2,class:"q-mt-lg-xs q-mt-md-xs",ref:"refGraficos",tipoGrafica:e.tipoGrafica,modoVisualizacion:e.modoVisualizacion,tipoReporte:e.tipoReporte,periodo:e.periodo,asignatura:e.asignatura,maxPeriodo:e.maxPeriodo,keyFiltro:e.keyFiltro,tituloReporte:e.tituloReporte,filtroNGS:e.filtroNGS,FILTROS:e.FILTROS,FILTROS_INDEX:e.FILTROS_INDEX,onVolver:e._volver,onDetalleGrafico:e._detalleGrafico,onSetOptions:e._setOptions,onFinishLoadApi:e._finishLoadApi},null,8,["tipoGrafica","modoVisualizacion","tipoReporte","periodo","asignatura","maxPeriodo","keyFiltro","tituloReporte","filtroNGS","FILTROS","FILTROS_INDEX","onVolver","onDetalleGrafico","onSetOptions","onFinishLoadApi"])),[[n.aG,!e.showPreguntas]]):(0,r.Q3)("v-if",!0),e.showPreguntas?((0,r.uX)(),(0,r.Wv)(C,{key:3,onVolver:o[13]||(o[13]=function(){return e.showPreguntas=!1}),objDataPregunta:e.objDataPregunta},null,8,["objDataPregunta"])):(0,r.Q3)("v-if",!0)]}),_:1})}var C=t(76080),N=t.n(C),R=t(45254),L=t.n(R),G=(t(12563),t(74260),t(39866),t(77507),t(10239),t(50310),t(32203),t(90095),t(9240),t(83190),t(27153),t(13715),t(6123)),I=t(80660),_={getOptSalones:function(){return L()(N()().m(function e(){var o,t,i,a;return N()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,o={},e.n=1,I.$http.get("api/HyoEstadistica/optNGS",{params:{datos:o}});case 1:return t=e.v,i=t.json,e.a(2,i);case 2:return e.p=2,a=e.v,e.a(2,a)}},e,null,[[0,2]])}))()},getPeriodos:function(){return I.$http.get("api/HyoAmbito/maxPerinum").then(function(e){return e.json}).then(function(e){var o=[{value:null,label:"Seleccione"}];if(1===e.estado)for(var t=1;t<=e.perinum;t++)o.push({label:"Periodo "+t,value:t});return o})}},T=t(16648),w=(t(30683),t(52133),t(6724),t(70199),t(515),t(62692),t(7346),t(30276)),x={COLEGIO:"colegio",PROFESOR:"profesor",NIVEL:"nivel",GRADO:"grado",AMBITO:"ambito",CLASE:"clase",CURSO:"curso",COMPETENCIA:"competencia",EVA_NIVEL2:"eva_nivel2"},D={colegio:{label:"colegio",dataOption:[{value:1,label:"Toda la Institución Educativa"}],idOption:1,keyParam:"colegio"},profesor:{label:"Profesor",dataOption:[{value:1,label:"Todos los docentes"}],idOption:null,keyParam:"profcod"},nivel:{label:(0,w.$t)("ngs.nivel"),dataOption:[],idOption:null,keyParam:"instrucod"},grado:{label:(0,w.$t)("ngs.grado"),dataOption:[],idOption:null,keyParam:"gradocod"},ambito:{label:(0,w.$t)("ambito"),dataOption:[],idOption:null,keyParam:"id_ambito"},clase:{label:(0,w.$t)("curso"),dataOption:[],idOption:null,keyParam:"id_clase"},curso:{label:(0,w.$t)("curso"),dataOption:[],idOption:null,keyParam:"cursocod"},competencia:{label:"Competencia",dataOption:[],idOption:null,keyParam:"id_competencia"},eva_nivel2:{label:"Capacidad",dataOption:[],idOption:null,keyParam:"id_nivel_2"},eva_nivel3:{label:"Desempeño",dataOption:[],idOption:null,keyParam:"id_nivel_3"},eva_nivel4:{label:"nivel4",dataOption:[],idOption:null,keyParam:"id_nivel_4"},eva_nivel5:{label:"nivel5",dataOption:[],idOption:null,keyParam:"id_nivel_5"},eva_nivel6:{label:"nivel6",dataOption:[],idOption:null,keyParam:"id_nivel_6"},eva_nivel7:{label:"nivel7",dataOption:[],idOption:null,keyParam:"id_nivel_7"},eva_nivel8:{label:"nivel8",dataOption:[],idOption:null,keyParam:"id_nivel_8"},eva_nivel9:{label:"nivel9",dataOption:[],idOption:null,keyParam:"id_nivel_9"}};function A(e){return V.apply(this,arguments)}function V(){return V=L()(N()().m(function e(o){var t,i,a,r;return N()().w(function(e){while(1)switch(e.n){case 0:if(t="tipoEva_"+o,void 0!==window._cacheProgramasEstadistica[t]){e.n=2;break}return i={tipoPrograma:1,idPrograma:0,nivel:9,tipo_eva:o},e.n=1,I.$http.get("api/HyoPrograma/obtDatos",{params:i}).then(function(e){var o=e.json;return o}).catch(function(){return[]});case 1:a=e.v,r=a.map(function(e){return e.nivel=e.nivel-1,e}),window._cacheProgramasEstadistica[t]=r;case 2:return e.a(2,window._cacheProgramasEstadistica[t])}},e)})),V.apply(this,arguments)}function q(){return X.apply(this,arguments)}function X(){return X=L()(N()().m(function e(){var o;return N()().w(function(e){while(1)switch(e.n){case 0:if(void 0!==window._cacheOptTipoEva){e.n=2;break}return e.n=1,I.$http.get("api/HyoPrograma/tipoEvaMapa").then(function(e){var o=e.json;return o}).catch(function(){return[]});case 1:o=e.v,window._cacheOptTipoEva=o;case 2:return e.a(2,window._cacheOptTipoEva)}},e)})),X.apply(this,arguments)}window._cacheProgramasEstadistica={};var j=function(){var e=L()(N()().m(function e(o,t){var i,a,r,n,l,s,c,u,d,p,f,v,m;return N()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,A(t);case 1:i=e.v,a=JSON.parse(JSON.stringify(D)),r=[],n=0;case 2:if(!(n<i.length)){e.n=6;break}if(l=i[n],s=l.nivel,!(s<1)){e.n=3;break}return e.a(3,5);case 3:if(c=void 0,1===s?c="competencia":s>=2&&(c="eva_nivel"+s),!r.includes(c)){e.n=4;break}return a[c].label=a[c].label+", "+l.label,e.a(3,5);case 4:a[c].label=l.label,a[c].isNivelEva=!0,a[c].nivelEva=s,r.push(c);case 5:n++,e.n=2;break;case 6:return u=[],d=[],"porNivel"===o?(u=["colegio","nivel","grado","ambito","clase"].concat(r),d=["clase"].concat(r)):"porCurso"===o?(u=["colegio","curso","nivel","grado","ambito"].concat(r),d=["ambito"].concat(r)):"porCompetencia"===o?(u=["colegio","curso"].concat(r),d=["curso"].concat(r)):"porProfesor"===o&&(u=["colegio","nivel","profesor","curso","ambito"].concat(r),d=[]),e.n=7,q();case 7:return p=e.v,f=p.some(function(e){return e.value===t&&!0===e.isEvaDiag}),v={},m=u.map(function(e,o){var i=a[e];return i.visible=!0,i.key=e,i.addProfeGeneral=d.includes(e),i.showRN=!!i.isNivelEva,i.isNivelEva=!!i.isNivelEva,i.nivelEva=i.nivelEva?parseInt(i.nivelEva,10):null,i.tipoEva=t,i.incluirEvaDiag=f,v[e]=o,i}),e.a(2,{FILTROS:m,FILTROS_INDEX:v})}},e)}));return function(o,t){return e.apply(this,arguments)}}(),Q={getOptTipoEva:function(){return L()(N()().m(function e(){var o,t;return N()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,q();case 1:return o=e.v,t=o.map(function(e){return{value:e.value,label:e.label}}),e.a(2,t)}},e)}))()},options:function(e,o){return L()(N()().m(function t(){var i;return N()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,j(e,o);case 1:return i=t.v,t.a(2,i)}},t)}))()},getTextPrimerNivel:function(e){return L()(N()().m(function o(){var t,i,a,r,n;return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,A(e);case 1:t=o.v,i="competencia",a=0;case 2:if(!(a<t.length)){o.n=4;break}if(r=t[a],n=r.nivel,1!==n){o.n=3;break}return i=r.label+"".toLocaleLowerCase(),o.a(3,4);case 3:a++,o.n=2;break;case 4:return o.a(2,i)}},o)}))()},TIPO:x},z=t(58790),$={class:"bg-white col graficos q-pa-sm relative-position scroll-y full-height"},B={key:0},U={class:"row"},M={class:"col text-center"},H={class:"q-mt-lg-sm"},K=["id"],W={class:"row justify-end"},Y={class:"col-md-8 col-9 text-center self-center"},J={class:"q-subheading"},Z={class:"q-title q-mt-md-sm"},ee={class:"q-title q-mt-md-sm"},oe={class:"q-title"},te={class:"q-subheading q-mt-md-sm"},ie={class:"q-subheading q-mt-md-sm"},ae={class:"col-md-2 col-3 text-right"},re={class:"row justify-center q-mt-lg-sm",id:"graficoPadre"},ne={class:"row q-mb-md-sm"},le={class:"col self-center selectBorder"},se={key:0,style:{width:"130px"}},ce={class:"q-pa-lg-md q-pa-xs"},ue={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer-profe"},de={class:"float-right"},pe={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer"},fe={class:"float-right"},ve={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer"},me={class:"float-right"},ge={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer"},he={class:"float-right"},be={class:"col text-center"},Se={class:"row q-mt-lg-sm",id:"graficoHijos"},ke={class:"q-pa-xs q-pl-lg-md q-pr-lg-md"},Oe={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer-profe"},Pe={class:"float-right"},ye={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer"},Fe={class:"float-right"},Ee={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer"},Ce={class:"float-right"},Ne={class:"q-pa-md-sm q-pl-lg-md q-pr-lg-md text-footer"},Re={class:"float-right"},Le={class:"col text-center"};function Ge(e,o){var t=(0,r.g2)("q-spinner-oval"),i=(0,r.g2)("q-inner-loading"),a=(0,r.g2)("sie-vacio"),l=(0,r.g2)("q-btn"),s=(0,r.g2)("viewGrillaEstadistica"),c=(0,r.g2)("q-select"),u=(0,r.g2)("q-tooltip"),d=(0,r.g2)("sie-chart"),p=(0,r.g2)("q-card-separator"),f=(0,r.g2)("q-card-actions"),v=(0,r.g2)("q-card");return(0,r.uX)(),(0,r.CE)("div",$,[(0,r.bF)(i,{class:"q-ma-md-sm bg-white",visible:e.loadingApi},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.chartGeneral.chart?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[e.openDetalleNota?((0,r.uX)(),(0,r.CE)("div",B,[(0,r.Lk)("div",U,[(0,r.Lk)("div",M,[(0,r.bF)(l,{label:e.$t("botones.volver"),color:"primary",onClick:o[0]||(o[0]=function(o){return e.openDetalleNota=!1})},null,8,["label"])])]),(0,r.Lk)("div",H,[(0,r.bF)(s,{idClasePeriodo:e.filtroDetalle.idClasePeriodo,idContenidPrincipal:e.filtroDetalle.idContenidPrincipal,llaveEva:e.filtroDetalle.llaveEva,nivelEva:e.filtroDetalle.nivelEva,nota:e.filtroDetalle.nota,flGrados:e.filtroDetalle.flGrados},null,8,["idClasePeriodo","idContenidPrincipal","llaveEva","nivelEva","nota","flGrados"])])])):((0,r.uX)(),(0,r.CE)("div",{key:1,id:e.idGrafico},[(0,r.Lk)("div",W,[(0,r.Lk)("div",Y,[!e.isPreguntas&&e.tituloReporte.titulo1?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("div",J,(0,z.v_)(e.tituloReporte.titulo),1),(0,r.Lk)("div",Z,(0,z.v_)(e.tituloReporte.titulo1),1),(0,r.Lk)("div",ee,(0,z.v_)(e.tituloReporte.titulo2),1)],64)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Lk)("div",oe,(0,z.v_)(e.tituloReporte.titulo),1),(0,r.Lk)("div",te,(0,z.v_)(e.tituloReporte.titulo1),1),(0,r.Lk)("div",ie,(0,z.v_)(e.tituloReporte.titulo2),1)],64))]),(0,r.Lk)("div",ae,[(0,r.Lk)("div",null,[(0,r.bF)(l,{class:"q-mx-xs",icon:"file_pdf",color:"primary",onClick:o[1]||(o[1]=function(o){return e.imprimir()}),label:"PDF"})])])]),(0,r.Lk)("div",re,[(0,r.Lk)("div",{class:(0,z.C4)(["col-xs-12 q-pa-xs",{"col-md-6":e.isPorPeriodo,"col-md-10":e.isComparativo}])},[(0,r.Lk)("div",ne,[(0,r.Lk)("div",le,[(0,r.bF)(c,{modelValue:e.ordenTipo,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.ordenTipo=o}),options:e.optOrden,onSelected:o[3]||(o[3]=function(o){return e.ordenar()}),label:"Orden:"},null,8,["modelValue","options"])]),e.optTipoGrafica.length>1?((0,r.uX)(),(0,r.CE)("div",se,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.optTipoGrafica,function(o){return(0,r.uX)(),(0,r.Wv)(l,{key:o.value,class:"q-ml-md-md",icon:o.icon,color:"primary",onClick:function(t){return e.cambiarTipoGrafica(o.value)}},{default:(0,r.k6)(function(){return[(0,r.bF)(u,null,{default:(0,r.k6)(function(){return[(0,r.eW)((0,z.v_)(o.label),1)]}),_:2},1024)]}),_:2},1032,["icon","onClick"])}),128))])):(0,r.Q3)("v-if",!0)]),(0,r.bF)(v,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",ce,[(0,r.bF)(d,{style:{height:"220px"},options:e.chartGeneral.chart.chartOptions,data:e.chartGeneral.chart.data,series:e.chartGeneral.chart.series,categories:e.chartGeneral.chart.categories,type:e.typeChart,colors:e.chartGeneral.chart.colors},null,8,["options","data","series","categories","type","colors"])]),e.chartGeneral.profesor?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.bF)(p),(0,r.Lk)("div",ue,[o[5]||(o[5]=(0,r.Lk)("span",{class:"text-bold"},"Profesor",-1)),(0,r.Lk)("span",de,(0,z.v_)(e.chartGeneral.profesor),1)])],64)):(0,r.Q3)("v-if",!0),e.chartGeneral.totalVacio>0?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.bF)(p),(0,r.Lk)("div",pe,[o[6]||(o[6]=(0,r.Lk)("span",{class:"text-bold"},"INC",-1)),(0,r.Lk)("span",fe,(0,z.v_)(e.chartGeneral.totalVacio)+" calificaciones pendientes",1)])],64)):(0,r.Q3)("v-if",!0),e.chartGeneral.totalSN>0?((0,r.uX)(),(0,r.CE)(r.FK,{key:2},[(0,r.bF)(p),(0,r.Lk)("div",ve,[o[7]||(o[7]=(0,r.Lk)("span",{class:"text-bold"},"SN",-1)),(0,r.Lk)("span",me,(0,z.v_)(e.chartGeneral.totalSN)+" calificaciones SN",1)])],64)):(0,r.Q3)("v-if",!0),e.chartGeneral.totalSEQ>0?((0,r.uX)(),(0,r.CE)(r.FK,{key:3},[(0,r.bF)(p),(0,r.Lk)("div",ge,[o[8]||(o[8]=(0,r.Lk)("span",{class:"text-bold"},"SEQ",-1)),(0,r.Lk)("span",he,(0,z.v_)(e.chartGeneral.totalSEQ)+" calificaciones sin equivalencia",1)])],64)):(0,r.Q3)("v-if",!0),e.showBtnVolver?((0,r.uX)(),(0,r.CE)(r.FK,{key:4},[(0,r.bF)(p),(0,r.bF)(f,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",be,[(0,r.bF)(l,{size:"md",label:e.$t("botones.volver"),color:"primary",onClick:o[4]||(o[4]=function(o){return e.volver()})},null,8,["label"])])]}),_:1})],64)):(0,r.Q3)("v-if",!0)]}),_:1})],2)]),(0,r.Lk)("div",Se,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.graficas,function(t,i){var a=t.chart,n=t.idOption,s=t.keyFiltroDet,c=t.totalSN,u=t.totalSEQ,m=t.totalVacio,g=t.profesor;return(0,r.uX)(),(0,r.CE)("div",{key:i,class:(0,z.C4)(["col-xs-12 q-pa-xs",{"col-md-4":e.isPorPeriodo}])},[(0,r.bF)(v,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",ke,[(0,r.bF)(d,{style:{height:"220px"},options:a.chartOptions,data:a.data,series:a.series,categories:a.categories,type:e.typeChart,colors:a.colors},null,8,["options","data","series","categories","type","colors"])]),g?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.bF)(p),(0,r.Lk)("div",Oe,[o[9]||(o[9]=(0,r.Lk)("span",{class:"text-bold"},"Profesor",-1)),(0,r.Lk)("span",Pe,(0,z.v_)(g),1)])],64)):(0,r.Q3)("v-if",!0),m>0?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.bF)(p),(0,r.Lk)("div",ye,[o[10]||(o[10]=(0,r.Lk)("span",{class:"text-bold"},"INC",-1)),(0,r.Lk)("span",Fe,(0,z.v_)(m)+" calificaciones pendientes",1)])],64)):(0,r.Q3)("v-if",!0),c>0?((0,r.uX)(),(0,r.CE)(r.FK,{key:2},[(0,r.bF)(p),(0,r.Lk)("div",Ee,[o[11]||(o[11]=(0,r.Lk)("span",{class:"text-bold"},"SN",-1)),(0,r.Lk)("span",Ce,(0,z.v_)(c)+" calificaciones SN",1)])],64)):(0,r.Q3)("v-if",!0),u>0?((0,r.uX)(),(0,r.CE)(r.FK,{key:3},[(0,r.bF)(p),(0,r.Lk)("div",Ne,[o[12]||(o[12]=(0,r.Lk)("span",{class:"text-bold"},"SEQ",-1)),(0,r.Lk)("span",Re,(0,z.v_)(u)+" calificaciones sin equivalencia",1)])],64)):(0,r.Q3)("v-if",!0),(0,r.bF)(p),e.showBtnDetalle?((0,r.uX)(),(0,r.Wv)(f,{key:4},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",Le,[(0,r.bF)(l,{size:"md",label:e.$t("botones.detalle"),color:"primary",onClick:function(o){return e.detalleGrafico(s,n)}},null,8,["label","onClick"])])]}),_:2},1024)):(0,r.Q3)("v-if",!0)]}),_:2},1024)],2)}),128))])],8,K))],64)):(0,r.bo)(((0,r.uX)(),(0,r.Wv)(a,{key:0,class:"col"},null,512)),[[n.aG,!e.chartGeneral.chart]])])}t(25751);var Ie=t(10270),_e={class:"column",style:{"min-height":"calc(100vh - 235px)"}},Te={class:"col column scroll-y relative-position q-mt-lg-sm bg-white"},we={class:"header q-px-sm q-pt-sm"},xe={class:"boxBotones"},De={class:"datosSelecionAlumno"},Ae={class:"fotoAlumno"},Ve={class:"nombreAlumno"},qe={class:"text-bold"},Xe={class:"nombreTutor"},je={class:"text-bold"},Qe={class:"totalAlumnos"},ze={class:"mensajeRegistro bg-warning mensajeRegistro text-center text-white"},$e={class:"text-bold"};function Be(e,o){var t=(0,r.g2)("q-spinner-oval"),i=(0,r.g2)("q-inner-loading"),a=(0,r.g2)("sie-vacio"),n=(0,r.g2)("q-toggle"),l=(0,r.g2)("sie-usuario"),s=(0,r.g2)("grillaNotas");return(0,r.uX)(),(0,r.CE)("div",_e,[(0,r.Lk)("div",Te,[(0,r.bF)(i,{class:"bg-white",visible:e.cargandoRegistro},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),0===e.dataRegistroNotas.cabeceraNotas.length?((0,r.uX)(),(0,r.Wv)(a,{key:0,class:"col"})):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Lk)("div",we,[(0,r.Lk)("div",xe,[(0,r.Lk)("div",null,[(0,r.bF)(n,{modelValue:e.verTodosLosAlumnos,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.verTodosLosAlumnos=o}),label:"Ver todos los alumnos",color:"secondary",onInput:o[1]||(o[1]=function(o){return e.filtrarAlumnos()})},null,8,["modelValue"])])]),(0,r.Lk)("div",De,[(0,r.Lk)("div",Ae,[(0,r.bF)(l,{class:"sie-usuario-xl",alucod:e.alumnoSelecionado.alucod,debounce:250},null,8,["alucod"])]),(0,r.Lk)("ul",null,[(0,r.Lk)("li",Ve,[(0,r.Lk)("span",qe,(0,z.v_)(e.$t("estudiante"))+":",1),(0,r.Lk)("span",null,(0,z.v_)(e.alumnoSelecionado.nomcomp),1)]),(0,r.Lk)("li",Xe,[(0,r.Lk)("span",je,(0,z.v_)(e.$t("profesor"))+":",1),(0,r.Lk)("span",null,(0,z.v_)(e.profesorClase),1)]),(0,r.Lk)("li",Qe,[o[2]||(o[2]=(0,r.Lk)("span",{class:"text-bold"},"Total de Alumnos:",-1)),(0,r.Lk)("span",null,(0,z.v_)(e.dataRegistroNotas.alumnos.length),1)]),(0,r.Lk)("li",ze,[(0,r.Lk)("span",$e,(0,z.v_)(e.permisosRegistro.mensajeRegistro),1)])])])]),(0,r.bF)(s,{ref:"refRegistroNotas",dataRegistro:e.dataRegistroNotas,editarComentarios:!1,visualizarHistorial:!1,visualizarComentario:!1,direccionEdicion:e.dirEdit,dataAlumnos:e.dataCboAlumno,visualizarRubrica:!1,forzarBloqueo:!0,vistaEstadistica:!0,onRecalcularNotasPorRubrica:function(e){return!1},onFilaAlumnoSelecionado:e.filaAlumnoSelecionado,onGuardarNotasModalRevisar:function(e){return!1}},null,8,["dataRegistro","direccionEdicion","dataAlumnos","onFilaAlumnoSelecionado"])],64))])])}t(11777);var Ue=t(14010),Me=t(43621),He=t(57668),Ke=t(80340),We=t(24974),Ye=t(33001),Je={components:{QSelect:T.S,QPageSticky:G._U,QFab:G.l6,QFabAction:G.B$,sieVacio:Ke.A,QInnerLoading:G.SQ,QSpinnerOval:G.VA,QToggle:G.c5,sieUsuario:We.A,grillaNotas:Ue.A},props:{idClasePeriodo:Number,idContenidPrincipal:Number,nota:String,flGrados:Boolean,nivelEva:Number,llaveEva:{type:[Number,String],default:0}},data:function(){return{dirEdit:"VD",optDirEdit:{VD:{label:"Vertical Derecha",nextDir:"HD",class:"rotate-90"},HD:{label:"Horizontal Derecha",nextDir:"VD",class:""}},dataRegistroNotas:{},permisosRegistro:{},profesorClase:"",ultimaModificacion:"",editarAPartirDelPrograma:100,alumnoSelecionado:{alucod:null,nomcomp:null,nemo:null},cargandoRegistro:!1,grabandoRegistro:!1,verPB:!0,verTodosLosAlumnos:!1,dataAlumnoOrig:[]}},computed:{classDirEdit:function(){return this.optDirEdit[this.dirEdit].class},numPermisoMenu:function(){return(0,He["default"])().ruta["nivel"]},dataCboAlumno:function(){var e=[];return this.dataRegistroNotas.alumnos.forEach(function(o,t){e.push({nombre:o.datos["nomcomp"],nemo:o.datos["nemo"],alucod:o.datos["alucod"],fila:t,idPersona:o.datos["idPersona"]})}),e},dataAlmunoGrilla:function(){var e=this.dataAlumnoOrig;return this.verTodosLosAlumnos&&(e=(0,Ye["default"])(this.dataAlumnoOrig,function(e){return e.datos["flResaltar"]})),e}},methods:{resetearDataRegistro:function(){this.dataRegistroNotas={cabeceraNotas:[],cabeceraAlumno:[],alumnos:[],maxNivel:0,infoClasePeriodo:{},regSoloComentarios:!1,arrBloqueoNotas:[]},this.permisosRegistro={}},filtrarAlumnos:function(){var e=[];e=this.verTodosLosAlumnos?this.dataAlumnoOrig:(0,Ye["default"])(this.dataAlumnoOrig,function(e){return e.datos["flResaltar"]}),this.dataRegistroNotas["alumnos"]=e},cargarDataClase:function(){var e=this;return L()(N()().m(function o(){var t,i,a,r;return N()().w(function(o){while(1)switch(o.p=o.n){case 0:return e.resetearDataRegistro(),e.cargandoRegistro=!0,o.p=1,t={nota:e.nota,flGrados:e.flGrados,nivelEva:e.nivelEva,llaveEva:e.llaveEva},o.n=2,Me.A.obtRegistroNotas(e.idClasePeriodo,e.idContenidPrincipal,1,t);case 2:i=o.v,a=i.infoClasePeriodo,e.dataAlumnoOrig=i.dataAlumno,e.dataRegistroNotas={alumnos:[],maxNivel:i.maxNivel,cabeceraNotas:i.cabeceraNotas,cabeceraAlumno:i.cabeceraAlumno,infoClasePeriodo:a,regSoloComentarios:i.regSoloComentarios,arrBloqueoNotas:[]},e.filtrarAlumnos(),e.permisosRegistro=i.dataPermisoRegistro,e.profesorClase=a.nomProfesor,e.ultimaModificacion=a.muestraUltimaActualizacion&&a.auditoriaRegistro["fecha"]?a.auditoriaRegistro["fecha"]+" - "+a.auditoriaRegistro["usuario"]:"",e.editarAPartirDelPrograma=a.editarAPartirDelPrograma,o.n=4;break;case 3:o.p=3,r=o.v,console.log("error",r);case 4:return e.cargandoRegistro=!1,o.a(2,!0)}},o,null,[[1,3]])}))()},filaAlumnoSelecionado:function(e){this.alumnoSelecionado={alucod:this.dataRegistroNotas.alumnos[e].datos.alucod,nomcomp:this.dataRegistroNotas.alumnos[e].datos.nomcomp,nemo:this.dataRegistroNotas.alumnos[e].datos.nemo,nemoAnt:this.dataRegistroNotas.alumnos[e].datos.nemoAnt,flRevisar:this.dataRegistroNotas.alumnos[e].datos.flRevisar,flResaltar:this.dataRegistroNotas.alumnos[e].datos.flResaltar}}},created:function(){this.resetearDataRegistro(),this.cargarDataClase()}},Ze=t(12807);const eo=(0,Ze.A)(Je,[["render",Be]]);var oo=eo,to=t(84614),io=function(e){var o=(0,He["default"])(),t=G.p6.formatDate(new Date,"DD/MM/YYYY"),i=G.p6.formatDate(new Date,"HH:mm:ss"),a=(0,to.uE)({orientation:"l",unit:"px",format:"a4",hotfixes:["px_scaling"]}),r=document.createElement("div");r.style.width="1062px",r.style.margin="30px 30px 0px 30px";var n=document.createElement("div");n.style.height="50px";var l=document.createElement("div");l.style.width="531px",l.style.display="inline-block";var s=document.createElement("div");s.style.textAlign="left",s.innerHTML=o.colname,l.appendChild(s);var c=document.createElement("div");c.style.textAlign="left",c.innerHTML="SieWeb Intranet",l.appendChild(c);var u=document.createElement("div");u.style.textAlign="left",u.innerHTML="Usuario: "+o.nombre,l.appendChild(u),n.appendChild(l);var d=document.createElement("div");d.style.width="531px",d.style.display="inline-block";var p=document.createElement("div");p.style.textAlign="right",p.innerHTML="Fecha: "+t,d.appendChild(p);var f=document.createElement("div");f.style.textAlign="right",f.innerHTML="Hora: "+i,d.appendChild(f),n.appendChild(d),r.appendChild(n);var v=document.createElement("div");v.style.textAlign="center",v.style.padding="20px 0px",v.style.height="120px";var m=document.getElementById(e).querySelector(".q-title").cloneNode(!0),g=document.getElementById(e).querySelectorAll(".q-subheading");v.appendChild(m);for(var h=0;h<g.length;h++){var b=g[h].cloneNode(!0);v.appendChild(b)}return r.appendChild(v),{doc:a,_content:r}},ao=function(e){var o=io(e),t=o.doc,i=o._content,a=document.getElementById(e).querySelector("#graficoPadre").querySelector("canvas"),r=document.createElement("img");r.style.padding="10px",r.style.margin="5px",r.style.border="1px solid #DDD",r.src=a.toDataURL(),r.height=250;var n=document.createElement("div");n.style.textAlign="center",n.style.paddingBottom="10px",n.appendChild(r),i.appendChild(n);for(var l=document.getElementById(e).querySelector("#graficoHijos").querySelectorAll("canvas"),s=[],c=-1,u=0;u<l.length;u++)u%3===0&&(c++,s[c]=[]),s[c].push(l[u]);s.forEach(function(e,o){var t=document.createElement("div");t.style.textAlign="center";var a=document.createElement("div");a.style.width="100%",0===o?a.style.height="320px":(a.style.height="398px",(o-1)%2===0&&(t.style.paddingTop="120px"));for(var r=0;r<e.length;r++){var n=document.createElement("img");n.style.padding="10px",n.style.margin="5px",n.style.border="1px solid #DDD",n.src=e[r].toDataURL(),n.width=342,t.appendChild(n)}a.appendChild(t),i.appendChild(a)}),t.html(i,{callback:function(e){e.save("Reporte_Porcentaje_de_logro_por_competencia_cortes.pdf")},pagesplit:!0,autoPaging:"slice"})},ro=function(e){for(var o=io(e),t=o.doc,i=o._content,a=null,r=document.getElementById(e).querySelectorAll("canvas"),n=0;n<r.length;n++){var l=r[n].toDataURL(),s=document.createElement("img");s.style.padding="10px",s.style.margin="5px",s.style.border="1px solid #DDD",s.src=l,s.height=250,s.width=1052,a=document.createElement("div"),a.style.textAlign="center",a.appendChild(s),n%2===0?0!==n&&(a.style.paddingTop="133.5px"):1===n?a.style.paddingBottom="67px":n!==r.length-1&&(a.style.paddingBottom="133.5px"),i.appendChild(a)}t.html(i,{callback:function(e){e.save("Reporte_Porcentaje_de_logro_por_competencia_comparaciones.pdf")},pagesplit:!0,autoPaging:"slice"})},no=function(e,o){switch(o){case"porPeriodo":ao(e);break;case"anual":ro(e);break}},lo=no,so=(t(68017),t(49405));function co(e){return!isNaN(e-parseFloat(e))}var uo="INC";function po(){var e={AD:{orden:-10,color:"#18b1a3"},A:{orden:-9,color:"#40e3c2"},B:{orden:-8,color:"#ffbc47"},C:{orden:-7,color:"#f65e5d"},"":{orden:-6,color:"#e7e4e4"},SN:{orden:-5,color:"#b4e4ea"},SEQ:{orden:-4,color:"#b4e4ea"}};return e}var fo=function(e,o,t,i,a){var r=t,n=!0;o&&(r=!1,n=!1,i=!0);var l={layout:{padding:{bottom:r?0:18}},responsive:!0,maintainAspectRatio:!1,legend:{onClick:function(e,t){var i=t.text;o&&(i=String(i.split("-")[0]).trim());var r=i===uo?"":i;a(r)},display:i,position:"right",labels:{fontColor:"#000",fontStyle:"normal"}},scales:{yAxes:[{display:n,ticks:{stepSize:20,suggestedMin:0,suggestedMax:100,callback:function(e,o,t){return e>100?" ":e}}}],xAxes:[{display:r,ticks:{padding:10}}]},title:{display:!0,text:e,fontColor:"#414141"},tooltips:{enabled:o,callbacks:{label:function(e,o){return o.datasets[e.datasetIndex].data[e.index]+"%"}}},animation:{duration:500,onComplete:function(){if(!o){var e=this.chart,t=e.ctx;t.textAlign="center",t.textBaseline="bottom",t.fillStyle="#666",this.data.datasets.forEach(function(o,i){var a=e.controller.getDatasetMeta(i);a.data.forEach(function(e,i){var a=o.data[i]+"%";t.fillText(a,e._model.x,e._model.y-4),t.fillText(e._model.datasetLabel,e._model.x,e._model.base+18)})})}}}};return l},vo=function(e,o){var t=[],i=e.split(" ");if(e.length>65&&i.length>0){var a="";i.forEach(function(e){a.length>0&&a.length+e.length>65&&(t.push(a),a=""),a=a.length>0?a+" "+e:e}),t.push(a)}else t.push(e);return t.push(""),t},mo=function(e){var o=po(),t=e.map(function(e){var t=999;return co(e)?t=parseInt(e,10):o.hasOwnProperty(e)&&(t=o[e].orden),{orden:t,nota:e}});return t.sort(function(e,o){return e.orden-o.orden}),t.map(function(e){return{nota:e.nota}})},go=function(e){var o=[];for(var t in e){var i=0;for(var a in e[t]){var r=e[t][a];i+=r}o.push({periodo:t,totalPeriodo:i,label:"Periodo "+t})}return o},ho=function(e,o,t,i,a,r,n,l){var s="pie"===e||"doughnut"===e,c=po(),u=[],d=[],p=[],f=0,v=0,m=0,g=0,h=0,b=go(t.categorias),S=mo(o);S.forEach(function(e){var o=e.nota,i=["AD","A","B","C"].includes(o),a=[];if(b.forEach(function(e){var i=e.periodo,r=e.totalPeriodo,n=t.categorias[i];if(n.hasOwnProperty(o)){var l=n[o],s=100*l/r,c=(0,so.toFixed)(s,s<1?2:1);s<1&&"0.00"===c&&(c="0.01"),"B"===o||"C"===o?f+=parseFloat(c):"AD"!==o&&"A"!==o||(v+=parseFloat(c)),"SN"===o?m+=l:"SEQ"===o?g+=l:""===o&&(h+=l),a.push(c)}else a.push(null)}),i){if(t.series.includes(o)){var r=""===o?uo:o,n=c.hasOwnProperty(o)?c[o].color:"";s?u.push(r+" - "+a.join(" ; ")+" %"):u.push(r),d.push(n)}else u.push(""),d.push("#ffffff");p.push(a)}});var k=vo(i,a);return{chart:{chartOptions:fo(k,s,r,n,l),data:p,series:u,categories:b.map(function(e){return e.label}),colors:d},porcentajeBC:f,porcentajeAD:v,profesor:a,totalSN:m,totalSEQ:g,totalVacio:h}},bo=ho,So={emits:["finishLoadApi","detalleGrafico","volver","setOptions"],components:{viewGrillaEstadistica:oo,sieChart:Ie.A,QSelect:T.S,sieVacio:Ke.A,QInnerLoading:G.SQ,QSpinnerOval:G.VA,QBtn:G.Il,QTooltip:G.nC,QCard:G.C$,QCardSeparator:G.d6,QCardActions:G.zZ},props:{isPreguntas:{required:!1,type:Boolean,default:!1},ordenCalificacion:{required:!1,type:String,default:"BC"},tipoGrafica:{required:!0,type:String,default:"bar"},modoVisualizacion:{required:!0,type:String},tipoReporte:{required:!0,type:String},periodo:{required:!0},asignatura:{required:!0},maxPeriodo:{required:!0},keyFiltro:{required:!0,type:String},tituloReporte:{required:!0,type:Object},filtroNGS:{required:!0,type:Object},FILTROS:{required:!0,type:Array},FILTROS_INDEX:{required:!0,type:Object}},data:function(){return{idGrafico:"grafico_"+(new Date).getTime(),TIPO:Q.TIPO,typeChart:this.tipoGrafica,filtroDetalle:{idClasePeriodo:null,idContenidPrincipal:null,flGrados:!1,llaveEva:null,nivelEva:null,nota:null},DATA_REPORTE:[],ordenTipo:this.ordenCalificacion,optOrden:[{value:"BC",label:"Ordenar por menor número satisfactorios"},{value:"AD",label:"Ordenar por mayor número satisfactorios"}],loadingApi:!1,graficas:[],chartGeneral:{},openDetalleNota:!1,paramIdCompetencia:null}},computed:{optTipoGrafica:function(){return this.isPorPeriodo?[{value:"bar",label:"Barras",icon:"insert_chart"},{value:"pie",label:"Circular",icon:"pie_chart"}]:[{value:"bar",label:"Barras",icon:"insert_chart"}]},showBtnVolver:function(){return!this.isPreguntas&&this.keyFiltro!==this.TIPO.COLEGIO},showBtnDetalle:function(){if(this.isPreguntas)return!1;var e=this.FILTROS_INDEX[this.keyFiltro];return e!==this.FILTROS.length-2||null===this.FILTROS[e].idOption},isPorPeriodo:function(){return"porPeriodo"===this.modoVisualizacion},isComparativo:function(){return"anual"===this.modoVisualizacion}},methods:{imprimir:function(){lo(this.idGrafico,this.modoVisualizacion)},paramsApi:function(e){var o=this.FILTROS,t={modoVisualizacion:this.modoVisualizacion,tipoReporte:this.tipoReporte,asignatura:this.asignatura,tipoDetalle:e,periodo:this.periodo,maxPeriodo:this.maxPeriodo,ngs:{instrucod:this.filtroNGS.instrucod,gradocod:this.filtroNGS.gradocod,id_ambito:this.filtroNGS.id_ambito}};return o.forEach(function(o){o.key===e&&(t.isNivelEva=o.isNivelEva,t.nivelEva=o.nivelEva,t.tipoEva=o.tipoEva,t.incluirEvaDiag=o.incluirEvaDiag),t[o.keyParam]=o.idOption}),this.paramIdCompetencia=t.id_competencia,t},getEstadistica:function(e){var o=this;return L()(N()().m(function t(){var i,a,r,n;return N()().w(function(t){while(1)switch(t.p=t.n){case 0:return o.loadingApi=!0,t.p=1,i=o.paramsApi(e),t.n=2,I.$http.get("api/HyoEstadistica/getEstadistica",{params:{datos:i}});case 2:return a=t.v,r=a.json,o.loadingApi=!1,t.a(2,r);case 3:return t.p=3,n=t.v,console.error(n),o.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning"),o.loadingApi=!1,t.a(2,{})}},t,null,[[1,3]])}))()},mostrarEstadistica:function(){var e=this;return L()(N()().m(function o(){var t,i;return N()().w(function(o){while(1)switch(o.n){case 0:return t=e.keyFiltro,i=e.FILTROS[e.FILTROS_INDEX[t]+1].key,o.n=1,e.getEstadistica(i);case 1:e.DATA_REPORTE=o.v,e.$emit("finishLoadApi",!0),e.setGraficas(t,i,e.typeChart),e.setOptions(i);case 2:return o.a(2)}},o)}))()},ordenar:function(){this.cambiarTipoGrafica(this.typeChart)},cambiarTipoGrafica:function(e){this.typeChart=e;var o=this.FILTROS[this.FILTROS_INDEX[this.keyFiltro]+1].key;this.setGraficas(this.keyFiltro,o,e)},detalleGrafico:function(e,o){this.$emit("detalleGrafico",e,o)},volver:function(){this.$emit("volver")},setOptions:function(e){var o=this.graficas.map(function(e){return{value:e.idOption,label:e.titleChart,orden:e.ordenOption}});o.sort(function(e,o){return e.orden-o.orden}),o.unshift({value:null,label:"Todos"}),this.$emit("setOptions",e,o)},setConfigObjGrafico:function(e,o){for(var t={},i={},a="",r=0,n=0;n<o.length;n++){var l=o[n],s=l.ID_OPCION,c=l.PERIODO,u=l.NOTA;t.hasOwnProperty(s)||(r++,t[s]={orden:r,idOption:s,keyFiltroDet:e,titleChart:l.LABEL,rowData:l,series:[],categorias:{}},a=l.PROFESOR),t[s].series.includes(u)||t[s].series.push(u),t[s].categorias.hasOwnProperty(c)||(t[s].categorias[c]={}),t[s].categorias[c][u]=l.TOTAL,i.hasOwnProperty(c)||(i[c]={}),i[c].hasOwnProperty(u)||(i[c][u]=0),i[c][u]+=l.TOTAL}var d=[];for(var p in i)for(var f in i[p])d.includes(f)||d.push(f);return{objGraficas:t,seriesGeneal:d,objGeneral:i,profesorGeneral:a}},processData:function(e,o){if("competencia"===e){var t=[],i=[],a=this.paramIdCompetencia;return o.forEach(function(e){e.ID_OPCION.substr(0,a.length)===a?(e.ID_OPCION=a,t.push(e)):i.push(e)}),{dataN1:t,dataN2:i}}return{dataN1:o,dataN2:o}},setGraficas:function(e,o,t){var i=this,a=this.DATA_REPORTE,r=this.processData(e,a),n=r.dataN1,l=r.dataN2,s=this.setConfigObjGrafico(o,l),c=s.objGraficas,u=s.seriesGeneal,d=s.objGeneral,p=s.profesorGeneral,f=u,v=d;if("competencia"===e){var m=this.setConfigObjGrafico(o,n);f=m.seriesGeneal,v=m.objGeneral}var g={series:f,categorias:v},h=this.FILTROS[this.FILTROS_INDEX[e]],b=h.dataOption.find(function(e){return e.value===(h.idOption||1)}),S=Object.keys(b).length>0?b.label:"Todos",k=h.idOption,O=this._isShowNota(e),P=this.isPorPeriodo&&h.addProfeGeneral?p:"";this.chartGeneral=bo(t,f,g,S,P,this.isComparativo,O,function(o){i.modalDetelleNota(o,e,k)});var y=[],F=function(){var e=c[E],o=i._isShowNota(e.keyFiltroDet),a=bo(t,u,e,e.titleChart,e.rowData.PROFESOR,i.isComparativo,o,function(o){i.modalDetelleNota(o,e.keyFiltroDet,e.idOption)});a.idOption=e.idOption,a.titleChart=e.titleChart,a.keyFiltroDet=e.keyFiltroDet,a.ordenOption=e.orden,a.ordenPorcentaje="BC"===i.ordenTipo?a.porcentajeBC:a.porcentajeAD,y.push(a)};for(var E in c)F();y.sort(function(e,o){return e.ordenPorcentaje-o.ordenPorcentaje}).reverse(),this.graficas=y},_isShowNota:function(e){var o=this.FILTROS[this.FILTROS_INDEX[e]],t=!1;return"porCompetencia"===this.tipoReporte?this.filtroNGS.instrucod&&this.filtroNGS.gradocod&&(t=this.isPorPeriodo&&o.showRN):t=this.isPorPeriodo&&o.showRN,t},modalDetelleNota:function(e,o,t){var i=this;return L()(N()().m(function a(){var r,n,l,s,c,u,d;return N()().w(function(a){while(1)switch(a.p=a.n){case 0:if(i.loadingApi=!0,a.p=1,r=i.FILTROS[i.FILTROS_INDEX[o]],!r.isNivelEva){a.n=3;break}return n=i.paramsApi(o,!1),l=i.TIPO.COMPETENCIA===o?t.split("-"):n.id_competencia.split("-"),n.id_programa=l[0],n.indice=l[1],n.nivelEva=r.nivelEva,a.n=2,I.$http.get("api/HyoEstadistica/getIdClasePeriodo",{params:{datos:n}});case 2:s=a.v,c=s.json,u="porCompetencia"===i.tipoReporte&&!i.filtroNGS.id_ambito,i.filtroDetalle={idClasePeriodo:c[0].ID_CLASE_PERIODO,idContenidPrincipal:c[0].ID_CONTENIDO,flGrados:u,llaveEva:i.TIPO.COMPETENCIA===o?c[0].LLAVE_EVA:t,nivelEva:r.nivelEva,nota:e},i.openDetalleNota=!0;case 3:a.n=5;break;case 4:a.p=4,d=a.v,console.log("error",d);case 5:i.loadingApi=!1;case 6:return a.a(2)}},a,null,[[1,4]])}))()}},created:function(){this.mostrarEstadistica()}};const ko=(0,Ze.A)(So,[["render",Ge]]);var Oo=ko,Po={class:"q-card full-height q-pa-sm"},yo={class:"row full-height"},Fo={class:"col-md-3 full-height overflow-auto"},Eo={class:"col text-center q-mb-lg-sm"},Co={class:"col text-center q-mb-lg-sm"},No={class:"col-xs-12 col-md-2"},Ro={style:{width:"25px"}},Lo={class:"nroPregunta"},Go={class:"col"},Io={key:0,class:"col-xs-12 col-md-2 q-mb-md-sm"},_o={key:1,class:"col-xs-12 col-md-2 q-mb-md-sm"},To={key:2,class:"col-xs-12 col-md-2 q-mb-md-sm"},wo={key:3,class:"col-xs-12 col-md-2 q-mb-md-sm"},xo={key:4,class:"col-xs-12 col-md-2 q-mb-md-sm"},Do={key:5,class:"col-xs-12 col-md-2 q-mb-md-sm"},Ao={class:"col-md-9 full-height overflow-auto"};function Vo(e,o){var t=(0,r.g2)("q-btn"),i=(0,r.g2)("q-select"),a=(0,r.g2)("q-collapsible"),n=(0,r.g2)("q-list"),l=(0,r.g2)("graficos");return(0,r.uX)(),(0,r.CE)("div",Po,[(0,r.Lk)("div",yo,[(0,r.Lk)("div",Fo,[o[10]||(o[10]=(0,r.Lk)("div",{class:"col text-center q-mb-lg-sm"},"Preguntas",-1)),(0,r.Lk)("div",Eo,[(0,r.bF)(t,{size:"md",label:e.$t("botones.volver"),color:"primary",onClick:o[0]||(o[0]=function(o){return e.volver()})},null,8,["label"])]),(0,r.Lk)("div",Co,[(0,r.Lk)("div",No,[(0,r.bF)(i,{modelValue:e.asignatura,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.asignatura=o}),options:e.optAsignatura,label:"Asignatura",onSelected:o[2]||(o[2]=function(o){return e.detallePregunta(e.itemSeleccionado)})},null,8,["modelValue","options"])])]),(0,r.bF)(n,null,{default:(0,r.k6)(function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.preguntas,function(t,n){return(0,r.uX)(),(0,r.Wv)(a,{key:n,group:"somegroup",popup:"",onShow:function(o){return e.selectPregunta(t)}},{header:(0,r.k6)(function(){return[(0,r.Lk)("div",Ro,[(0,r.Lk)("span",Lo,(0,z.v_)(t.value),1)]),(0,r.Lk)("div",Go,(0,z.v_)(t.label),1)]}),default:(0,r.k6)(function(){return[t.infoFiltros["periodo"]?((0,r.uX)(),(0,r.CE)("div",Io,[(0,r.bF)(i,{modelValue:e.vmFiltro.periodo,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.vmFiltro.periodo=o}),options:e.dataOpt.periodo,label:e.$t("periodo"),onSelected:function(o){return e.detallePregunta(t)}},null,8,["modelValue","options","label","onSelected"])])):(0,r.Q3)("v-if",!0),t.infoFiltros["nivel"]?((0,r.uX)(),(0,r.CE)("div",_o,[(0,r.bF)(i,{modelValue:e.vmFiltro.nivel,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.vmFiltro.nivel=o}),options:e.niveles,label:e.$t("nivel"),onSelected:function(o){return t.infoFiltros["profesor"]?e.cargarProfesor():e.detallePregunta(t)}},null,8,["modelValue","options","label","onSelected"])])):(0,r.Q3)("v-if",!0),t.infoFiltros["grado"]?((0,r.uX)(),(0,r.CE)("div",To,[(0,r.bF)(i,{modelValue:e.vmFiltro.grado,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.vmFiltro.grado=o}),options:e.grados,label:e.$t("grado"),onSelected:o[6]||(o[6]=function(o){return e.cargarCursos(!0)})},null,8,["modelValue","options","label"])])):(0,r.Q3)("v-if",!0),t.infoFiltros["curso"]?((0,r.uX)(),(0,r.CE)("div",wo,[(0,r.bF)(i,{modelValue:e.vmFiltro.curso,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.vmFiltro.curso=o}),options:e.dataOpt.curso,label:e.$t("curso"),onSelected:function(o){return t.infoFiltros["competencia"]?e.cargarCompetencias():e.detallePregunta(t)}},null,8,["modelValue","options","label","onSelected"])])):(0,r.Q3)("v-if",!0),t.infoFiltros["competencia"]?((0,r.uX)(),(0,r.CE)("div",xo,[(0,r.bF)(i,{modelValue:e.vmFiltro.competencia,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.vmFiltro.competencia=o}),options:e.dataOpt.competencia,label:e.$t("competencia"),onSelected:function(o){return e.detallePregunta(t)}},null,8,["modelValue","options","label","onSelected"])])):(0,r.Q3)("v-if",!0),t.infoFiltros["profesor"]?((0,r.uX)(),(0,r.CE)("div",Do,[(0,r.bF)(i,{modelValue:e.vmFiltro.profesor,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.vmFiltro.profesor=o}),options:e.dataOpt.profesor,label:e.$t("profesor"),onSelected:function(o){return e.detallePregunta(t)}},null,8,["modelValue","options","label","onSelected"])])):(0,r.Q3)("v-if",!0)]}),_:2},1032,["onShow"])}),128))]}),_:1})]),(0,r.Lk)("div",Ao,[e.loadGrafico?((0,r.uX)(),(0,r.Wv)(l,{key:0,ref:"refGraficos",isPreguntas:!0,ordenCalificacion:e.config.ordenCalificacion,tipoGrafica:e.config.tipoGrafica,modoVisualizacion:e.config.modoVisualizacion,tipoReporte:e.config.tipoReporte,asignatura:e.config.asignatura,periodo:e.config.periodo,maxPeriodo:e.maxPeriodo,keyFiltro:e.config.keyFiltro,tituloReporte:e.config.tituloReporte,filtroNGS:e.config.filtroNGS,FILTROS:e.config.FILTROS,FILTROS_INDEX:e.config.FILTROS_INDEX},null,8,["ordenCalificacion","tipoGrafica","modoVisualizacion","tipoReporte","asignatura","periodo","maxPeriodo","keyFiltro","tituloReporte","filtroNGS","FILTROS","FILTROS_INDEX"])):(0,r.Q3)("v-if",!0)])])])}t(52776),t(81813);var qo=t(93616),Xo=t(65673),jo=t(82327),Qo=t(88865),zo=t(66824);t(48426);function $o(e){var o={ordenCalificacion:"BC",tipoGrafica:"bar",modoVisualizacion:null,tipoReporte:null,periodo:null,keyFiltro:null,filtroNGS:{instrucod:null,gradocod:null,id_ambito:null},filtros:[],titulo1:"",titulo2:"",dependeciaFiltros:!1,verFiltros:!0};return Object.assign(o,e)}function Bo(){var e="porPeriodo",o="anual",t="porNivel",i="porCurso",a="porCompetencia",r="porProfesor",n=[{value:1,label:"¿En qué porcentajes se han logrado todas las competencias trabajadas en todo el colegio, segmentadas por período?",labelGrafico:"Porcentajes en los que se han logrado todas las competencias trabajadas, en todo el colegio.",params:$o({modoVisualizacion:e,tipoReporte:t,periodo:1,keyFiltro:"colegio",titulo1:"Periodo 1"}),infoFiltros:{ngs:!1,periodo:!0}},{value:2,label:"¿En qué porcentajes se han logrado todas las competencias, por curso, en todo el colegio, segmentadas por periodo?",labelGrafico:"Porcentajes en los que se han logrado todas las competencias en todo el colegio. [curso]",params:$o({modoVisualizacion:e,tipoReporte:i,periodo:1,keyFiltro:"curso",filtros:[{key:"curso",value:"",label:""}],titulo1:"Periodo 1"}),infoFiltros:{ngs:!1,curso:!0,periodo:!0}},{value:3,label:"¿Cuál es el curso que presenta el menor nivel de logro en todo el colegio, por cada periodo y nivel?",labelGrafico:"Curso que presenta menor nivel de logro en todo el colegio [nivel]",params:$o({modoVisualizacion:e,tipoReporte:a,periodo:1,keyFiltro:"colegio",filtroNGS:{instrucod:"P",gradocod:null,id_ambito:null},titulo1:"Periodo 1"}),infoFiltros:{ngs:!1,nivel:!0,periodo:!0}},{value:4,label:"¿Qué profesores tienen el mayor número de competencias no logradas, segmentadas por periodo y nivel?",labelGrafico:"Los siguientes profesores tienen el mayor número de competencias no logradas. [nivel]",params:$o({modoVisualizacion:e,tipoReporte:r,periodo:1,keyFiltro:"nivel",filtros:[{key:"nivel",value:"I",label:"Inicial"}],titulo1:"Periodo 1"}),infoFiltros:{ngs:!1,nivel:!0,periodo:!0}},{value:5,label:"¿Cuál es el ranking de efectividad por curso en cada periodo?",labelGrafico:"Ranking de efectividad por Curso",params:$o({ordenCalificacion:"AD",modoVisualizacion:e,tipoReporte:i,periodo:1,keyFiltro:"colegio",titulo1:"Periodo 2"}),infoFiltros:{ngs:!1,periodo:!0}},{value:6,label:"¿Cuál es el ranking de efectividad del siguiente nivel de las competencias de cada Curso, segmentadas por Período, Nivel y Grado?",labelGrafico:"Ranking de efectividad del siguiente nivel de cada competencia. [nivel] [grado] [curso] [competencia]",params:$o({ordenCalificacion:"AD",modoVisualizacion:e,tipoReporte:a,periodo:1,keyFiltro:"competencia",filtroNGS:{instrucod:"",gradocod:"",id_ambito:null},filtros:[{key:"curso",value:"",label:""},{key:"competencia",value:"",label:""}],titulo1:"Periodo 1"}),dependeciaFiltros:!0,infoFiltros:{ngs:!0,periodo:!0,nivel:!0,grado:!0,curso:!0,competencia:!0}},{value:7,label:"¿Cuál ha sido el avance del siguiente nivel de las competencias de cada Curso, desarrollado período a período, segmentadas por Nivel y Grado?",labelGrafico:"Avance del siguiente nivel de cada competencia, desarrollado período a período. [nivel] [grado] [curso] [competencia]",params:$o({ordenCalificacion:"AD",modoVisualizacion:o,tipoReporte:a,periodo:null,keyFiltro:"competencia",filtroNGS:{instrucod:"",gradocod:"",id_ambito:null},filtros:[{key:"curso",value:"",label:""},{key:"competencia",value:"",label:""}]}),dependeciaFiltros:!0,infoFiltros:{ngs:!0,nivel:!0,grado:!0,curso:!0,competencia:!0}},{value:8,label:" ¿Cuál es el ranking de efectividad de los docentes, por Curso, Nivel y Período?",labelGrafico:"Ranking de efectividad de docentes [nivel]",params:$o({ordenCalificacion:"AD",modoVisualizacion:e,tipoReporte:r,periodo:1,keyFiltro:"profesor",filtros:[{key:"nivel",value:"",label:""},{key:"curso",value:"",label:""}],titulo1:"Periodo 1"}),dependeciaFiltros:!0,infoFiltros:{ngs:!1,nivel:!0,curso:!0,periodo:!0}},{value:9,label:"¿Cuál es el ranking de efectividad de los cursos a cargo de cada docente por nivel y período?",labelGrafico:"Ranking de efectividad por docentes [nivel] [profesor]",params:$o({ordenCalificacion:"AD",modoVisualizacion:e,tipoReporte:r,periodo:1,keyFiltro:"profesor",filtros:[{key:"nivel",value:"",label:""},{key:"profesor",value:"",label:""}],titulo1:"Periodo 1"}),dependeciaFiltros:!0,infoFiltros:{ngs:!1,nivel:!0,periodo:!0,profesor:!0}}];return n}var Uo={getPreguntas:function(){return Bo()},maxPeriodo:function(){return L()(N()().m(function e(){return N()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,I.$http.get("api/HyoAmbito/maxPerinum").then(function(e){return 1===e.json.estado?e.json.perinum:null}))}},e)}))()},listarCursos:function(e){return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,I.$http.get("api/HyoClase/listarCursoCurGra",{params:{params:e}}).then(function(e){var o=e.json,t=[];return o.forEach(function(e){t.push({value:e.CURSOCOD,label:e.CURSOCOD+" - "+e.CURSONOM})}),t}).catch(function(){return[]}))}},o)}))()},listarCompetencias:function(e){return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,I.$http.get("api/HyoEstadistica/listarCompetencias",{params:{params:e}}).then(function(e){var o=e.json,t=[];return o.forEach(function(e){t.push({value:e.LLAVE,label:e.INDICE+" "+e.DESCRIPCION})}),t}).catch(function(){return[]}))}},o)}))()},listarProfesor:function(e){return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,I.$http.get("api/HyoEstadistica/listarProfesor",{params:{params:e}}).then(function(e){var o=e.json,t=[];return o.forEach(function(e){t.push({value:e.PROFCOD,label:e.NOMCOMP})}),t}).catch(function(){return[]}))}},o)}))()}},Mo={emits:["volver"],components:{sieSelect:qo.A,graficos:Oo,QSelect:T.S,QList:Xo.A,QItem:jo.A,QItemSection:Qo.A,QItemLabel:zo.A,QCollapsible:G.eS,QBtn:G.Il},props:{objDataPregunta:{required:!0,type:Object}},data:function(){return{config:{},preguntas:[],loadGrafico:!1,maxPeriodo:null,currentId:null,itemSeleccionado:null,asignatura:"G",optAsignatura:[{value:"O",label:"Oficiales"},{value:"I",label:"Internos"},{value:"G",label:"Globales"},{value:"T",label:"Totales"},{value:"R",label:"Reportes"}],vmFiltro:{periodo:null,nivel:null,grado:null,curso:null,competencia:null,profesor:null},dataOpt:{periodo:[],curso:[],competencia:[],profesor:[]},dataFiltros:["periodo","nivel","grado","curso","competencia","profesor"]}},computed:{niveles:function(){var e=[],o=this.objDataPregunta.optNGS;for(var t in o)e.push({value:o[t].id,label:o[t].label});return e},grados:function(){var e=[],o=this.objDataPregunta.optNGS;if(null!==this.vmFiltro.nivel){var t=o[this.vmFiltro.nivel].grados;for(var i in t)e.push({value:t[i].id,label:t[i].label})}return e}},methods:{volver:function(){this.$emit("volver",!0)},selectPregunta:function(e){if(this.loadGrafico=!1,this.vmFiltro.competencia=null,this.dataOpt.competencia=[],e.infoFiltros["grado"]&&e.infoFiltros["curso"])this.vmFiltro.grado=null,this.vmFiltro.curso=null,this.dataOpt.curso=[];else if(e.infoFiltros["curso"])this.cargarCursos(!1);else if(e.infoFiltros["profesor"])this.vmFiltro.profesor=null,this.vmFiltro.nivel=null,this.dataOpt.profesor=[];else{var o=this.obtTitulo(e.labelGrafico,e.infoFiltros);""!==o&&this.detallePregunta(e)}},obtLblSelect:function(e){var o=this,t="";switch(e){case"periodo":t="Periodo "+this.vmFiltro.periodo;break;case"nivel":t=this.objDataPregunta.optNGS[this.vmFiltro.nivel].label;break;case"grado":t=this.objDataPregunta.optNGS[this.vmFiltro.nivel].grados[this.vmFiltro.grado].label;break;case"curso":t=this.dataOpt["curso"].find(function(e){return e.value===o.vmFiltro.curso}).label;break;case"competencia":t=this.dataOpt["competencia"].find(function(e){return e.value===o.vmFiltro.competencia}).label;break;case"profesor":t=this.dataOpt["profesor"].find(function(e){return e.value===o.vmFiltro.profesor}).label;break;default:t="";break}return t},obtTitulo:function(e,o){var t=this,i=0;return this.dataFiltros.forEach(function(a){if(o.hasOwnProperty(a)&&(i+=(o.hasOwnProperty(a),o[a]&&t.vmFiltro[a]?0:1),t.vmFiltro[a])){var r="["+a+"]";e.includes(r)&&(e=e.replace(r,t.obtLblSelect(a)))}}),e=i?"":e,e},setFiltrosGrafico:function(e,o){var t=this;return"ngs"===e&&o?(Object.prototype.hasOwnProperty.call(o,"instrucod")&&(o.instrucod=this.vmFiltro.nivel),Object.prototype.hasOwnProperty.call(o,"gradocod")&&(o.gradocod=this.vmFiltro.grado)):o.forEach(function(e,i){var a=o[i].key;o[i].value=t.vmFiltro[a],o[i].label=t.obtLblSelect(a)}),o},detallePregunta:function(e){var o=this;return L()(N()().m(function t(){var i,a,r,n;return N()().w(function(t){while(1)switch(t.n){case 0:if(null!=e){t.n=1;break}return t.a(2,!1);case 1:if(o.itemSeleccionado=e,o.currentId=e.value,i=e.params,a=o.vmFiltro.periodo,r=o.obtTitulo(e.labelGrafico,e.infoFiltros),""!==r){t.n=2;break}return t.a(2,!1);case 2:return i.titulo=r,i.filtros=o.setFiltrosGrafico("filtro",i.filtros),i.filtroNGS&&(i.filtroNGS=o.setFiltrosGrafico("ngs",i.filtroNGS)),t.n=3,Q.options(i.tipoReporte,1);case 3:n=t.v,i.titulo1=i.titulo1?"Periodo "+a:"",i.periodo=null!==i.periodo?a:null,o.config={ordenCalificacion:i.ordenCalificacion,tipoGrafica:i.tipoGrafica,modoVisualizacion:i.modoVisualizacion,tipoReporte:i.tipoReporte,periodo:a,asignatura:o.asignatura,keyFiltro:i.keyFiltro,tituloReporte:{titulo:i.titulo,titulo1:i.titulo1,titulo2:i.titulo2},filtroNGS:i.filtroNGS,FILTROS:n.FILTROS,FILTROS_INDEX:n.FILTROS_INDEX},"filtros"in i&&i.filtros.forEach(function(e){o.config.FILTROS[n.FILTROS_INDEX[e.key]].dataOption=[{value:e.value,label:e.label}],o.config.FILTROS[n.FILTROS_INDEX[e.key]].idOption=e.value}),o.reinicarComponente();case 4:return t.a(2)}},t)}))()},reinicarComponente:function(){var e=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return e.loadGrafico=!1,o.n=1,e.$nextTick();case 1:e.loadGrafico=!0;case 2:return o.a(2)}},o)}))()},cargarProfesor:function(){var e=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Uo.listarProfesor({instrucod:e.vmFiltro.nivel});case 1:e.dataOpt.profesor=o.v;case 2:return o.a(2)}},o)}))()},cargarCursos:function(e){var o=this;return L()(N()().m(function t(){var i;return N()().w(function(t){while(1)switch(t.n){case 0:return i={cursonat:o.cursonat},e&&(i.instrucod=o.vmFiltro.nivel,i.gradocod=o.vmFiltro.grado),o.vmFiltro.curso=null,t.n=1,Uo.listarCursos(i);case 1:o.dataOpt.curso=t.v,o.dataOpt.competencia=[],o.vmFiltro.competencia=null;case 2:return t.a(2)}},t)}))()},cargarCompetencias:function(){var e=this;return L()(N()().m(function o(){var t;return N()().w(function(o){while(1)switch(o.n){case 0:return t={instrucod:e.vmFiltro.nivel,gradocod:e.vmFiltro.grado,cursocod:e.vmFiltro.curso},t.periodo=e.vmFiltro.periodo?e.vmFiltro.periodo:1,o.n=1,Uo.listarCompetencias(t);case 1:e.dataOpt.competencia=o.v,e.vmFiltro.competencia=null;case 2:return o.a(2)}},o)}))()}},created:function(){var e=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Uo.getPreguntas();case 1:e.preguntas=o.v,e.maxPeriodo=e.objDataPregunta.maxPeriodo,e.dataOpt.periodo=e.objDataPregunta.optPeriodos,e.cargarCursos(!1);case 2:return o.a(2)}},o)}))()}};const Ho=(0,Ze.A)(Mo,[["render",Vo]]);var Ko=Ho,Wo={components:{graficos:Oo,preguntas:Ko,QSelect:T.S,sieVacio:Ke.A,QPage:G.Tu,QBtn:G.Il},data:function(){return{mostrarAviso:!1,showPreguntas:!1,loadGrafico:!1,loadingGrafico:!1,TIPO:Q.TIPO,FILTROS:[],FILTROS_INDEX:{},optNGS:{},maxPeriodo:null,filtroNGS:{instrucod:null,gradocod:null,id_ambito:null},filtroDetalle:{idClasePeriodo:null,idPromagama:null,indice:null,nota:null,idContenido:null},keyFiltro:null,tipoGrafica:"bar",TIPO_EVA:1,optTipoEva:[],modoVisualizacion:null,optModoVisualizacion:[{value:null,label:"Seleccione"},{value:"porPeriodo",label:"Cortes"},{value:"anual",label:"Comparaciones"}],tipoReporte:null,optTipoReporte:[{value:null,label:"Seleccione"},{value:"porNivel",label:"Por nivel"},{value:"porCurso",label:"Por curso"},{value:"porCompetencia",label:"Por curso - competencia"},{value:"porProfesor",label:"Por profesor"}],textLabePrimerNivel:"competencia",periodo:null,optPeriodos:[],asignatura:"G",optAsignatura:[{value:"O",label:"Oficiales"},{value:"I",label:"Internos"},{value:"G",label:"Globales"},{value:"T",label:"Totales"},{value:"R",label:"Reportes"}],objDataPregunta:{optPeriodos:[],optNGS:{},maxPeriodo:null}}},computed:{isSeleccionValida:function(){var e=this.modoVisualizacion&&this.tipoReporte;return this.isPorPeriodo&&e&&(e=!!this.periodo),e},isPorPeriodo:function(){return"porPeriodo"===this.modoVisualizacion},isComparativo:function(){return"anual"===this.modoVisualizacion},tituloReporte:function(){var e=this;if(this.FILTROS.length){for(var o=[],t=[],i=this.FILTROS.some(function(o){return o.key===e.TIPO.AMBITO&&o.idOption}),a=!1,r=function(){var r=e.FILTROS[n];if(r.idOption&&r.key!==e.TIPO.COLEGIO){var l=r.dataOption.find(function(e){return e.value===r.idOption});if([e.TIPO.NIVEL,e.TIPO.GRADO].includes(r.key)&&i)return 1;r.idOption&&r.key===e.TIPO.COMPETENCIA&&(a=!0),a?t.push(l.label):o.push(l.label)}},n=0;n<this.FILTROS.length;n++)r();this.tituloNgs&&o.push(this.tituloNgs);var l="Porcentaje de logro por "+this.textLabePrimerNivel+(this.isComparativo?"":" - Periodo "+this.periodo);return{titulo:l,titulo1:o.join(" / "),titulo2:t.join(" / ")}}return{titulo:"",titulo1:"",titulo2:""}},tituloNgs:function(){var e=this,o="";return"porCompetencia"===this.tipoReporte&&(this.filtroNGS.id_ambito?o=this.ambitos.find(function(o){return o.value===e.filtroNGS.id_ambito}).label:(this.filtroNGS.instrucod&&(o=this.niveles.find(function(o){return o.value===e.filtroNGS.instrucod}).label),this.filtroNGS.gradocod&&(o+=" / "+this.grados.find(function(o){return o.value===e.filtroNGS.gradocod}).label))),o},niveles:function(){var e=[{value:null,label:"Todos"}];for(var o in this.optNGS)e.push({value:this.optNGS[o].id,label:this.optNGS[o].label});return e},grados:function(){var e=[{value:null,label:"Todos"}];if(null!==this.filtroNGS.instrucod){var o=this.optNGS[this.filtroNGS.instrucod].grados;for(var t in o)e.push({value:o[t].id,label:o[t].label})}return e},ambitos:function(){var e=[{value:null,label:"Todos"}];if(null!==this.filtroNGS.gradocod){var o=this.optNGS[this.filtroNGS.instrucod].grados[this.filtroNGS.gradocod].ambitos;for(var t in o)e.push({value:o[t].id,label:o[t].label})}return e}},methods:{resetearDataFiltro:function(e){var o=this,t=this.FILTROS_INDEX[e];this.FILTROS.forEach(function(e,i){e.visible=e.key!==o.TIPO.COLEGIO&&i<=t+1&&i<o.FILTROS.length-1,i>t&&(e.idOption=null,e.dataOption=[])})},preSelected:function(){return this.loadingGrafico?(this.$notify("Por favor espere que cargue la información anterior","warning"),Promise.reject(new Error("error"))):Promise.resolve(!0)},init:function(){var e=arguments,o=this;return L()(N()().m(function t(){var i,a;return N()().w(function(t){while(1)switch(t.n){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:"","selectedTipoEvaluacion"===i?(o.modoVisualizacion=null,o.tipoReporte=null,o.periodo=null):"selectedVisualizacion"===i?(o.tipoReporte=null,o.periodo=null,o.asignatura="G"):"selectedEnfoque"===i&&(o.periodo=null),o.loadGrafico=!1,o.tipoGrafica="bar",o.filtroNGS={instrucod:null,gradocod:null,id_ambito:null},!o.isSeleccionValida){t.n=2;break}return t.n=1,Q.options(o.tipoReporte,o.TIPO_EVA);case 1:a=t.v,o.FILTROS=a.FILTROS,o.FILTROS_INDEX=a.FILTROS_INDEX,o.mostrarEstadistica(o.FILTROS[0].key,!0);case 2:return t.a(2)}},t)}))()},seleccionarTipoDeEvaluacion:function(e){var o=this;return L()(N()().m(function t(){return N()().w(function(t){while(1)switch(t.n){case 0:return o.TIPO_EVA=e.value,t.n=1,Q.getTextPrimerNivel(o.TIPO_EVA);case 1:o.textLabePrimerNivel=t.v,o.init("selectedTipoEvaluacion");case 2:return t.a(2)}},t)}))()},seleccionarModoVisualizacion:function(){this.init("selectedVisualizacion")},seleccionarEnfoque:function(){this.init("selectedEnfoque")},seleccionarPeriodo:function(){this.init()},seleccionarFiltro:function(e,o){var t=e.key;null===e.idOption&&(t=this.FILTROS[o-1].key),this.mostrarEstadistica(t)},seleccionarNGS:function(e){"n"===e?(this.filtroNGS.gradocod=null,this.filtroNGS.id_ambito=null):"g"===e&&(this.filtroNGS.id_ambito=null),this.mostrarEstadistica(this.keyFiltro)},mostrarEstadistica:function(e){var o=this;return L()(N()().m(function t(){var i;return N()().w(function(t){while(1)switch(t.n){case 0:if("porCompetencia"!==o.tipoReporte){t.n=1;break}if(i=o.FILTROS[o.FILTROS_INDEX["curso"]].idOption,!i||o.filtroNGS.gradocod||!o.isPorPeriodo){t.n=1;break}return o.$notify("Debe seleccionar un nivel y grado","error"),o.mostrarAviso=!0,t.a(2,!1);case 1:return o.mostrarAviso=!1,o.loadingGrafico=!0,o.keyFiltro=e,o.resetearDataFiltro(e),t.n=2,o.reinicarComponente();case 2:return t.a(2)}},t)}))()},reinicarComponente:function(){var e=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return e.loadGrafico=!1,o.n=1,e.$nextTick();case 1:e.loadGrafico=!0;case 2:return o.a(2)}},o)}))()},_finishLoadApi:function(){this.loadingGrafico=!1},_detalleGrafico:function(e,o){this.FILTROS[this.FILTROS_INDEX[e]].idOption=o,this.mostrarEstadistica(e)},_volver:function(){var e=this.FILTROS[this.FILTROS_INDEX[this.keyFiltro]-1].key;this.mostrarEstadistica(e)},_setOptions:function(e,o){this.FILTROS[this.FILTROS_INDEX[e]].dataOption=o}},created:function(){var e=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,_.getOptSalones();case 1:return e.optNGS=o.v,o.n=2,_.getPeriodos();case 2:return e.optPeriodos=o.v,e.maxPeriodo=e.optPeriodos[e.optPeriodos.length-1].value,o.n=3,Q.getOptTipoEva();case 3:return e.optTipoEva=o.v,o.n=4,Q.getTextPrimerNivel(e.TIPO_EVA);case 4:e.textLabePrimerNivel=o.v,e.objDataPregunta.optPeriodos=e.optPeriodos,e.objDataPregunta.optNGS=e.optNGS,e.objDataPregunta.maxPeriodo=e.maxPeriodo,e.init();case 5:return o.a(2)}},o)}))()}};const Yo=(0,Ze.A)(Wo,[["render",E]]);var Jo=Yo},89185:function(e,o,t){e.exports=t.p+"img/estadistica-mapa.e264fca5.png"}}]);