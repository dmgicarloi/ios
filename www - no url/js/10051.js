"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[10051],{10051:function(n,o,e){e.r(o),e.d(o,{default:function(){return Q}});var t=e(61758),a={class:"row q-gutter-xs"},r={class:"col-xs-4 col-md-2"},i={key:0,class:"col-xs-4 col-md-6"},l={class:"col-xs-4 col-md-2"},u={key:0,class:"col-xs-4 col-md-2"};function c(n,o){var e=this,c=(0,t.g2)("sie-select"),s=(0,t.g2)("q-toggle"),d=(0,t.g2)("q-card-title"),m=(0,t.g2)("header-btn"),p=(0,t.g2)("sie-table"),f=(0,t.g2)("q-card-main"),C=(0,t.g2)("q-card"),A=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(A,{class:"sie-flat pasebrae bg-white q-pa-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(C,null,{default:(0,t.k6)(function(){return[(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",a,[(0,t.Lk)("div",r,[(0,t.bF)(c,{type:"outlined",modelValue:n.duracod,"onUpdate:modelValue":o[0]||(o[0]=function(o){return n.duracod=o}),val:"DURACOD",label:"DURADES",options:n.optPeriodo,readonly:!1,placeholder:"Periodo",onInput:n.cambiarPeriodo},null,8,["modelValue","options","onInput"])]),n.checked?((0,t.uX)(),(0,t.CE)("div",i,[n.isFamAlu?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(c,{key:0,type:"outlined",modelValue:n.persona,"onUpdate:modelValue":o[1]||(o[1]=function(o){return n.persona=o}),val:"ID_PERSONA",label:"NOMCOMP",options:n.optionAlumnos,readonly:!1,placeholder:"Alumno",onSelected:n.cambiarAlumno},null,8,["modelValue","options","onSelected"]))])):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(c,{class:"col-md-2",type:"outlined",modelValue:n.tipocod,"onUpdate:modelValue":o[2]||(o[2]=function(o){return n.tipocod=o}),val:"TIPOCOD",label:"TIPODES",options:n.optTipogrupovac,readonly:!1,placeholder:"Programa",onInput:n.cambiarPrograma},null,8,["modelValue","options","onInput"]),(0,t.bF)(c,{class:"col-md-2",type:"outlined",modelValue:n.gruvacod,"onUpdate:modelValue":o[3]||(o[3]=function(o){return n.gruvacod=o}),val:"GRUVACOD",label:"GRUVADES",options:n.optGrupo,readonly:!1,placeholder:"Grupo",onInput:n.cambiarGrupo},null,8,["modelValue","options","onInput"]),(0,t.Lk)("div",l,[(0,t.bF)(c,{type:"outlined",modelValue:n.cursocod,"onUpdate:modelValue":o[4]||(o[4]=function(o){return n.cursocod=o}),val:"VACCOD",label:"CURSO",options:n.comboCursos,readonly:!1,placeholder:"Curso",onInput:n.cambiarCurso},null,8,["modelValue","options","onInput"])]),n.itemCurso.NUMTURNOS>1?((0,t.uX)(),(0,t.CE)("div",u,[(0,t.bF)(c,{type:"outlined",modelValue:n.vaccod,"onUpdate:modelValue":o[5]||(o[5]=function(o){return n.vaccod=o}),val:"VACCOD",label:"TURNODES",options:n.optTurnos,readonly:!1,placeholder:"Turno",onInput:n.cambiarTurno},null,8,["modelValue","options","onInput"])])):(0,t.Q3)("v-if",!0)],64)),(0,t.bF)(s,{modelValue:n.checked,"onUpdate:modelValue":o[6]||(o[6]=function(o){return n.checked=o}),label:n.titleCheked,onInput:n.actionChecked},null,8,["modelValue","label","onInput"])])]}),_:1}),(0,t.bF)(f,null,{default:(0,t.k6)(function(){return[(0,t.bF)(m,{name:"Inscripciones (".concat(n.duracoddes,")")},null,8,["name"]),n.checked?((0,t.uX)(),(0,t.Wv)(p,{key:0,selection:"single",onRowSelected:n.seleccionarFila,ref:"tabla",data:n.dataCursos,columns:n.columns,config:n.config,context:e,css:"height: 30vh"},null,8,["onRowSelected","data","columns","config"])):((0,t.uX)(),(0,t.Wv)(p,{key:1,selection:"single",onRowSelected:n.seleccionarFila,ref:"tablaAlumnos",data:n.dataAlumnos,columns:n.columnsAlumnos,config:n.configAlumnos,context:e,css:"height: 30vh"},null,8,["onRowSelected","data","columns","config"])),(0,t.bF)(m,{name:"Registros Mensuales ".concat(n.cursonom)},null,8,["name"]),(0,t.bF)(p,{ref:"tablaAlumnos",data:n.dataInscripcionDetalle,columns:n.columns,config:n.config,context:e,css:"height: 30vh"},null,8,["data","columns","config"])]}),_:1})]}),_:1})]}),_:1})}var s=e(8445),d=e.n(s),m=e(41562),p=e.n(m),f=e(76080),C=e.n(f),A=e(45254),O=e.n(A),h=(e(30683),e(71225),e(74260),e(39866),e(23825),e(52133),e(10239),e(89571),e(50310),e(5962),e(32203),e(6724),e(83190),e(39300),e(17225),e(28743),e(12858),e(32071),e(55520),e(2775),e(46203),e(62692),e(66307),e(24066),e(6123)),I=e(26697),D=e(53093),g=e(53811),E=e(43346),S=e(11654),N=e(9736),P=e(16648),v=e(88567),b=e(95718),F=e(80340),R=e(57668),T=e(65229),M=e(982),U=e(92173),G=e(30640),w=e(93616),Y=e(88865),V={data:function(){return{configAlumnos:{FECINI_INS:{component:"date",format:"DD/MM/YYYY",edit:!1},FECFIN_INS:{component:"date",format:"DD/MM/YYYY",edit:!1}},columnsAlumnos:[{label:"Código",name:"ALUCOD",field:"ALUCOD",align:"left"},{label:"Nombres",name:"NOMCOMP_ALUMNO",field:"NOMCOMP_ALUMNO",align:"left"},{label:"Profesor",name:"NOMCOMP_PROFESOR",field:"NOMCOMP_PROFESOR",align:"left"},{label:"Aula",name:"AULADES",field:"AULADES",align:"left"},{label:"N° Pago",name:"NUMPAGO",field:"NUMPAGO",align:"left"},{label:"Monto",name:"MONTOPAG",field:"MONTOPAG",align:"left"},{label:"Fecha inicio",name:"FECINI_INS",field:"FECINI_INS",align:"left"},{label:"Fecha fin",name:"FECFIN_INS",field:"FECFIN_INS",align:"left"},{label:"Fecha de Pago",name:"FECPAG",field:"FECPAG",align:"left"},{label:"Estado",name:"ESTADODES",field:"ESTADODES",align:"left"}]}}},_=e(2819),k={directives:{sieActive:T.A},components:{QItemSection:Y.A,QSearch:h.Ks,sieSelect:w.A,QToolbar:h.ZV,QTabs:I.A,QTab:D.A,QTabPanels:g.A,QTabPanel:E.A,QBtn:S.A,QSelect:P.A,QInput:N.A,QPageSticky:h._U,QFab:h.l6,QCard:v.A,QFabAction:h.B$,QCardSection:b.A,QInnerLoading:h.SQ,QSpinnerOval:h.VA,sieVacio:F.A,sieEstudiantes:U.Ay,sieModal:G.A,QPage:h.Tu,QCardTitle:h.u0,QToggle:h.c5,QCardMain:h.d1},mixins:[V],data:function(){return{buttons:[{icon:"apps_line",label:"Imprimir Stickers",tooltip:"Imprimir Stickers",click:this.imprimirStickers,disable:this.permiso>1,vIf:!this.checked}],gruvacod:null,duracoddes:"",cursonom:"",optionAlumnos:[],dataInscripcionDetalle:[],alumno:{},config:{},duracod:null,sie:(0,R["default"])(),dataAlumnos:[],isFamAlu:(0,R["default"])().esFamilia||(0,R["default"])().esFamiliaAdmision||(0,R["default"])().esEstudiante||["E01","E02"].includes((0,R["default"])().tipcod),optPeriodo:[],dataCursos:[],columns:[{label:"Código",name:"VACCOD",field:"VACCOD",align:"left"},{label:"Curso",name:"CURSODES",field:"CURSODES",align:"left"},{label:"Mes",name:"MESDES",field:"MESDES",align:"left"},{label:"Horario",name:"HORARIO",field:"HORARIO",align:"left"},{label:"Profesor",name:"NOMCOMP",field:"NOMCOMP",align:"left"},{label:"Aula",name:"AULADES",field:"AULADES",align:"left"},{label:"N° Pago",name:"NUMPAGO",field:"NUMPAGO",align:"left"},{label:"Monto",name:"MONTOPAG",field:"MONTOPAG",align:"left"},{label:"Fecha de pago",name:"FECPAG",field:"FECPAG",align:"left"},{label:"Estado",name:"ESTADODES",field:"ESTADODES",align:"left"},{label:"Fec Ini",name:"FECFINI_INSCRIPCION",field:"FECFINI_INSCRIPCION",align:"left"},{label:"Fec Fin",name:"FECFIN_INSCRIPCION",field:"FECFIN_INSCRIPCION",align:"left"}],optTipoAlumno:[{label:"Interno",value:1},{label:"Externo",value:3}],optPrograma:[{label:"SummerSkillaa",value:"I"},{label:"SummerSkil2sss",value:"E"}],tipoAlumno:1,idPrograma:null,idTaller:null,talleres:[{label:"BASQUET",value:"I"},{label:"FUTBOL",value:"E"},{label:"KARATE",value:"K"}],buscar:"",visible:!1,optGrupo:[],objEnviar:[],objActual:[],pase:{},persona:"",isFamExterna:"E01"===(0,R["default"])().tipcod,rutaEscudo:(0,R["default"])().host+"/api/HyoEscudo/imagen/logo",colegio:(0,R["default"])().colname,checked:!0,titleCheked:"Talleres por alumno",optTipogrupovac:[],tipocod:null,optCtCurso:[],itemCurso:{},cursocod:null,optTurnos:[],vaccod:null}},methods:{cambiarGrupo:function(){},imprimirStickers:function(){if(!this.cursocod)return this.$alert("Seleccone un Curso.","warning");var n={repcod:"reportesStickerQrPorCursoBloque",formato:"pdf",id_curso_periodo:parseInt(this.modifyString(this.cursocod),10)};(0,_.exportFilePhp)(n,"webservice/reportes/reporte")},modifyString:function(n){var o=n.indexOf("A");return-1===o?n:n.substring(0,o)},anular:function(){var n=this,o=this.$refs.tabla.rowsSelected();if(this.isFamAlu)for(var e=0;e<o.length;e++){var t=o[e];if(2===t.ESTADO)return this.$alert("Su inscripción esta finalizada, si desea anular la inscripción por motivo de cambio o retiro, debe comunicarse con el colegio.","warning")}var a=o.map(function(n){return n.ID_INSCRIPCION_DETALLE});if(!a.length)return(0,M["default"])("No hay cursos Seleccionados","warning");this.$confirm("¿Realmente desea Anular los cursos Seleccionados?","warning").onOk(O()(C()().m(function o(){return C()().w(function(o){while(1)switch(o.n){case 0:n.$http.post("api/InscripcionController/anular",{data:a}).then(function(){var o=O()(C()().m(function o(e){return C()().w(function(o){while(1)switch(o.n){case 0:n.loadGrupo(),(0,M["default"])(e.message,"success");case 1:return o.a(2)}},o)}));return function(n){return o.apply(this,arguments)}}()).catch(function(n){(0,M["default"])("Ocurrió un error","warning")});case 1:return o.a(2)}},o)})))},getAlumnos:function(){var n=this;return O()(C()().m(function o(){var e,t,a,r,i,l;return C()().w(function(o){while(1)switch(o.n){case 0:return e=n.duracod,o.n=1,n.$http.get("api/InscripcionController/getAlumnosConInscripcion",{params:{params:{duracod:e,ano:n.sie.ano}}});case 1:n.optionAlumnos=o.v,t=[],a=new Set,r=p()(n.optionAlumnos);try{for(r.s();!(i=r.n()).done;)l=i.value,a.has(l.ID_PERSONA)||(a.add(l.ID_PERSONA),t.push(l))}catch(n){r.e(n)}finally{r.f()}return n.optionAlumnos=t,o.a(2,1)}},o)}))()},seleccionarFila:function(n){var o=this;return O()(C()().m(function e(){var t;return C()().w(function(e){while(1)switch(e.n){case 0:if(o.dataInscripcionDetalle=[],o.cursonom="","M"!==n.TIPOCOB){e.n=2;break}return t={idInscripcionDetalle:n.ID_INSCRIPCION_DETALLE},e.n=1,o.getDetalleInscripcion(t);case 1:o.cursonom=" (".concat(n.CURSODES," ").concat(n.HORARIO,")");case 2:return e.a(2)}},e)}))()},getDetalleInscripcion:function(n){var o=this;return this.$http.get("api/InscripcionController/getDetalleInscripcion",{params:{params:n}}).then(function(n){return o.dataInscripcionDetalle=n.map(function(n){return n.ESTADODES="G"===n.TIPOCOB?"Gratuito":n.NUMTAL||n.NUMPAGO?"PAGADO":6===n.ESTADO?"EXONERADO":"",n.FECINI=h.p6.formatDate(n.FECINI,"DD/MM/YYYY"),n.FECPAG=n.FECPAG?h.p6.formatDate(n.FECPAG,"DD/MM/YYYY"):"-",n.FECFIN=h.p6.formatDate(n.FECFIN,"DD/MM/YYYY"),n}),n})},getDuracodActivo:function(){var n=this;return this.$http.get("api/InscripcionController/getPeriodo").then(function(o){n.optPeriodo=o;var e=o.find(function(n){return"S"===n.VIGENTE});n.duracod=e.DURACOD,n.duracoddes=e.DURADES})},elegirTaller:function(n){},cambiarPrograma:function(n){this.getCtCurso({duracod:this.duracod,tipocod:this.tipocod,ano:this.sie.ano,noanulado:1}),this.dataAlumnos=[],this.dataInscripcionDetalle=[],this.cursonom=""},cambiarTipoAlumno:function(){},cambiarAlumno:function(n){var o=this;return O()(C()().m(function e(){return C()().w(function(e){while(1)switch(e.n){case 0:o.tipoAlumno=1===n.ID_PERFIL?1:3,o.alumno=n,o.loadGrupo(),o.dataInscripcionDetalle=[],o.cursonom="";case 1:return e.a(2)}},e)}))()},cambiarPeriodo:function(){var n=this;this.duracoddes=this.optPeriodo.filter(function(o){return o.DURACOD===n.duracod})[0].DURADES,this.tipocod=null,this.cursocod=null,this.dataAlumnos=[],this.dataCursos=[],this.optionAlumnos=[],this.dataInscripcionDetalle=[],this.cursonom="",this.getAlumnos()},cambiarCurso:function(n){var o=this;return O()(C()().m(function n(){var e;return C()().w(function(n){while(1)switch(n.n){case 0:if(o.vaccod="",o.itemCurso=null,e=o.optCtCurso.find(function(n){return n.VACCOD===o.cursocod}),!e){n.n=2;break}if(o.itemCurso=e,!(o.itemCurso.NUMTURNOS>1)){n.n=2;break}return o.dataAlumnos=[],n.n=1,o.getHorario();case 1:return n.a(2);case 2:return n.n=3,o.getInscripciones();case 3:return n.a(2)}},n)}))()},cambiarTurno:function(){var n=this;return O()(C()().m(function o(){return C()().w(function(o){while(1)switch(o.n){case 0:return null===n.vaccod?n.columnsAlumnos.map(function(n){return n.label}).includes("Horario")||n.columnsAlumnos.unshift({label:"Horario",name:"HORARIO",field:"HORARIO",align:"left"}):n.vaccod&&n.columnsAlumnos.map(function(o){"Horario"===o.label&&n.columnsAlumnos.splice(n.columnsAlumnos.indexOf(o),1)}),o.n=1,n.getInscripciones();case 1:return o.a(2)}},o)}))()},getInscripciones:function(){var n=this;return O()(C()().m(function o(){var e,t,a,r;return C()().w(function(o){while(1)switch(o.n){case 0:return n.dataInscripcionDetalle=[],n.cursonom="",e=n.optCtCurso.find(function(o){return o.VACCOD===n.itemCurso.VACCOD}),t=null,a={ano:n.sie.ano,duracod:e.DURACOD,cursocod:e.CURSOCOD,id_curso_periodo:e.ID_CURSO_PERIODO,noanulado:1},n.itemCurso.NUMTURNOS>1?(t=n.optTurnos.find(function(o){return o.VACCOD===n.vaccod}),t&&(t=t.TURNO),a.vaccod=n.vaccod,a.turno=t):(a.vaccod=e.VACCOD,a.turno=e.TURNO),o.n=1,n.getAlumnosByCurso(a);case 1:r=o.v,n.dataAlumnos=r.map(function(n){return n.NOMCOMP_PROFESOR=e.NOMCOMP,n.AULADES=e.AULADES,n.NUMPAGO=n.NUMPAG?n.NUMTAL+"-"+n.NUMPAG:"-",n.FECPAG=n.FECPAG?h.p6.formatDate(n.FECPAG,"DD/MM/YYYY"):"-",n.ESTADODES="G"===e.TIPOCOB?"Gratuito":2===n.ESTADO_INSCRIPCION_DETALLE?"PAGADO":6===n.ESTADO_INSCRIPCION_DETALLE?"EXONERADO":"INSCRITO",n});case 2:return o.a(2)}},o)}))()},getHorario:function(){var n=this;return O()(C()().m(function o(){var e;return C()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$http.get("api/CtCursoPeriodoController/getHorario",{params:{idCursoPeriodo:n.itemCurso.ID_CURSO_PERIODO}});case 1:e=o.v,n.optTurnos=e.map(function(n){var o="".concat(h.p6.formatDate(n.HORAINI,"DD-MM-YYYY HH:mm")).split(" ")[1],e="".concat(h.p6.formatDate(n.HORAFIN,"DD-MM-YYYY HH:mm")).split(" ")[1];return n.TURNODES="".concat(n.VALOR," (").concat(o," - ").concat(e,")"),n}),n.optTurnos.unshift({VACCOD:null,TURNO:null,TURNODES:"TODOS"});case 2:return o.a(2)}},o)}))()},getGrupoTipo:function(){var n=this;this.$http.get("api/InscripcionController/getTipoGrupoVac",{params:{parametros:{enUso:1,duracod:this.duracod,ano:this.sie.ano}}}).then(function(o){o.unshift({TIPOCOD:null,TIPODES:"TODOS"}),n.optTipogrupovac=d()(o)})},getPeriodos:function(){var n=this;this.$http.get("api/InscripcionController/getPeriodo").then(function(o){n.optPeriodo=o})},loadGrupo:function(n){var o=this,e={noanulado:1,id_persona:this.alumno.ID_PERSONA,alucod:this.alumno.ALUCOD,ano:this.sie.ano,duracod:this.duracod,tipocod:this.idPrograma,proalu:this.tipoAlumno};this.$http.get("api/InscripcionController/getCursosPorAlumno",{params:{params:e}}).then(function(n){o.dataCursos=n.map(function(n){return n.NUMPAGO=n.NUMPAG?n.NUMTAL+"-"+n.NUMPAG:"-",n.ESTADODES="G"===n.TIPOCOB?"Gratuito":2===n.ESTADO?"PAGADO":6===n.ESTADO?"EXONERADO":"INSCRITO",n.FECINI=h.p6.formatDate(n.FECINI,"DD/MM/YYYY"),n.FECFIN=h.p6.formatDate(n.FECFIN,"DD/MM/YYYY"),n.FECPAG=n.FECPAG?h.p6.formatDate(n.FECPAG,"DD/MM/YYYY"):"-",n.FECFINI_INSCRIPCION=h.p6.formatDate(n.FECINI_INSCRIPCION,"DD/MM/YYYY"),n.FECFIN_INSCRIPCION=h.p6.formatDate(n.FECFIN_INSCRIPCION,"DD/MM/YYYY"),n})})},getCtCurso:function(){var n=arguments,o=this;return O()(C()().m(function e(){var t,a,r,i;return C()().w(function(e){while(1)switch(e.n){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},t.conInscritos=1,a=[],r=[],e.n=1,o.$http.get("api/CtCursoPeriodoController/getListaCursos",{params:{params:t}}).then(function(n){o.optCtCurso=n.map(function(n){return n.CURSO="".concat(n.VACCOD," - ").concat(n.CURSODES),r.includes(n.GRUVACOD)||(r.push(n.GRUVACOD),a.push({GRUVACOD:n.GRUVACOD,GRUVADES:n.GRUVADES})),n})});case 1:return i=e.v,a.unshift({GRUVACOD:null,GRUVADES:"TODOS"}),o.optGrupo=a,e.a(2,i)}},e)}))()},getAlumnosByCurso:function(n){var o=this;return O()(C()().m(function e(){var t;return C()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.$http.get("api/InscripcionController/getInscripcionesPorCurso",{params:{params:n}});case 1:return t=e.v,e.a(2,t)}},e)}))()},actionChecked:function(){this.dataInscripcionDetalle=[],this.cursonom="",this.checked?this.titleCheked="Talleres por alumno":this.titleCheked="Alumnos por taller"}},computed:{comboCursos:function(){var n=this;return this.optCtCurso.filter(function(o){return!n.gruvacod||o.GRUVACOD===n.gruvacod})},permiso:function(){return this.sie.ruta.nivel}},created:function(){var n=this;return O()(C()().m(function o(){return C()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.getDuracodActivo();case 1:return o.n=2,n.getAlumnos();case 2:return o.n=3,n.getGrupoTipo();case 3:n.getCtCurso({duracod:n.duracod,tipocod:n.tipocod,ano:n.sie.ano,noanulado:1});case 4:return o.a(2)}},o)}))()}},L=e(12807);const y=(0,L.A)(k,[["render",c]]);var Q=y}}]);