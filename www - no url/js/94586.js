"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[94586],{94586:function(e,a,o){o.r(a),o.d(a,{default:function(){return $}});o(39866);var t=o(61758),l={class:"row"},n={class:"col-sm-6"},i={class:"col-sm-6"},r={key:0,class:"row q-col-gutter-sm q-pb-sm"},s={class:"col-xs-12 col-md-3"},c={class:"col-xs-12 col-md-3"},u={class:"col-xs-12 col-md-3"},d={class:"col-xs-12 col-md-3"},p={class:"row q-col-gutter-sm"},m={class:"col-xs-12 col-md-3"},b={class:"col-xs-12 col-md-3"},f={class:"col-xs-12 col-md-6"},v={key:1,class:"row"},g={class:"col-xs-5"},h={class:"col-xs-7"},E={class:"row q-col-gutter-xs"},S={class:"col-sm-6"},C={class:"col-sm-6"};function x(e,a){var o=this,x=(0,t.g2)("header-btn"),k=(0,t.g2)("q-select"),A=(0,t.g2)("q-checkbox"),T=(0,t.g2)("sie-table"),w=(0,t.g2)("q-card-section"),L=(0,t.g2)("q-card"),O=(0,t.g2)("q-btn"),V=(0,t.g2)("q-page-sticky"),N=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(N,{class:"bg-white q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(L,null,{default:(0,t.k6)(function(){return[(0,t.bF)(x,{name:"PANEL DE EXPORTACIÓN A EXCEL",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(w,{style:{height:"calc(100vh - 195px)"}},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",l,[(0,t.Lk)("div",n,[(0,t.Lk)("img",{class:"q-pa-sm",onClick:a[0]||(a[0]=function(a){return e.getCamposTabla("ALUMNO")}),src:"statics/img/export_alumno.png"}),(0,t.Lk)("img",{class:"q-pa-sm",onClick:a[1]||(a[1]=function(a){return e.getCamposTabla("FAMILIA")}),src:"statics/img/export_familia.png"}),(0,t.Lk)("img",{class:"q-pa-sm",onClick:a[2]||(a[2]=function(a){return e.getCamposTabla("AMBOS")}),src:"statics/img/export_ambos.png"}),(0,t.Lk)("img",{class:"q-pa-sm",onClick:a[3]||(a[3]=function(a){return e.getCamposTabla("PROFE")}),src:"statics/img/export_profesor.png"})]),(0,t.Lk)("div",i,["PROFE"!=e.tablaSelected?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",s,[(0,t.bF)(k,{modelValue:e.anio,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.anio=a}),options:e.anios,optionValue:"ANO",optionLabel:"ANO",label:"Año"},null,8,["modelValue","options"])]),(0,t.Lk)("div",c,[(0,t.bF)(k,{modelValue:e.instrucod,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.instrucod=a}),onInput:e.cambiarNivel,options:e.niveles,label:"Nivel"},null,8,["modelValue","onInput","options"])]),(0,t.Lk)("div",u,[(0,t.bF)(k,{modelValue:e.gradocod,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.gradocod=a}),onInput:e.cambiarGrado,options:e.grados,label:"Grado"},null,8,["modelValue","onInput","options"])]),(0,t.Lk)("div",d,[(0,t.bF)(k,{modelValue:e.seccioncod,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.seccioncod=a}),options:e.secciones,optionValue:"SECCIONCOD",optionLabel:"SECCIONDES",label:"Seccion"},null,8,["modelValue","options"])])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",p,[(0,t.Lk)("div",m,[(0,t.bF)(k,{modelValue:e.situacion,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.situacion=a}),options:e.estados,label:"Situación"},null,8,["modelValue","options"])]),(0,t.Lk)("div",b,["PROFE"!=e.tablaSelected?((0,t.uX)(),(0,t.Wv)(k,{key:0,modelValue:e.matricula,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.matricula=a}),options:e.sino,label:"Matriculado"},null,8,["modelValue","options"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",f,["PROFE"!=e.tablaSelected?((0,t.uX)(),(0,t.Wv)(k,{key:0,modelValue:e.hmnoubi,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.hmnoubi=a}),options:e.ubicacion,label:"Ubicación de Hijo"},null,8,["modelValue","options"])):(0,t.Q3)("v-if",!0)])]),"PROFE"!=e.tablaSelected?((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("div",g,[(0,t.bF)(A,{modelValue:e.solonuevos,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.solonuevos=a}),label:"Solo nuevos",reverse:"false"},null,8,["modelValue"])]),(0,t.Lk)("div",h,[["ALUMNO","AMBOS"].includes(e.tablaSelected)?((0,t.uX)(),(0,t.Wv)(A,{key:0,modelValue:e.congrado,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.congrado=a}),label:"Alumnos con Grado al iniciar el Año"},null,8,["modelValue"])):(0,t.Q3)("v-if",!0)])])):(0,t.Q3)("v-if",!0)])]),(0,t.Lk)("div",E,[(0,t.Lk)("div",S,[(0,t.bF)(T,{class:"planCurricular",ref:"tabla1",selection:"multiple",context:o,css:"height:calc(100vh - 305px)",columns:e.columns,onRowSelected:e.rowSelected,data:e.listaExportar,config:e.config},null,8,["columns","onRowSelected","data","config"])]),(0,t.Lk)("div",C,[(0,t.bF)(T,{class:"planCurricular",ref:"tabla2",selection:"multiple",context:o,css:"height:calc(100vh - 305px)",columns:e.columns,onRowSelected:e.rowSelected,data:e.listaExportar2,config:e.config},null,8,["columns","onRowSelected","data","config"])])])]}),_:1})]}),_:1}),(0,t.bF)(V,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(O,{fab:"",round:"",color:"secondary",icon:"cogs",onClick:e.exportar},null,8,["onClick"])]}),_:1})]}),_:1})}var k=o(8445),A=o.n(k),T=o(76080),w=o.n(T),L=o(45254),O=o.n(L),V=(o(30683),o(71225),o(10239),o(50310),o(5962),o(90095),o(83190),o(13715),o(81288)),N={data:function(){return{config:{REPCOD:{component:"checkbox",input:function(e){return O()(w()().m(function a(){return w()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,V.sleep)(5e3);case 1:return console.log("FALSE FALSE",e),a.a(2,!1)}},a)}))()}}},columns:[{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left"},{name:"TABLA",label:"Tabla",field:"TABLA",align:"left"}]}}},I=o(88865),R=o(95718),F=o(16648),D=o(3112),P=o(6123),U=o(982),q=(o(78131),o(2819)),Q=o(80660),y=o(57668),_={getExportarTablas:function(e){return Q.$http.get("api/UtilitarioController/getExportarTablas",{params:{tabla:e}})},generarExcel:function(e){return Q.$http.post("api/UtilitarioController/generarExcel",{data:e})},getGrados:function(e){return Q.$http.get("api/SalonController/getCargarGrados",{params:{nivel:e,accion:3}})},getAllSecciones:function(){return Q.$http.get("api/UtilitarioController/getSecciones")},getSecciones:function(e,a,o){return O()(w()().m(function t(){var l;return w()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,Q.$http.get("api/SalonController/getSecciones",{params:{anio:e,gradocod:o,instrucod:a}});case 1:return l=t.v,l.unshift({SECCIONCOD:"T",SECCIONDES:"Todos"}),t.a(2,l)}},t)}))()},getanios:function(){return Q.$http.get("api/HyoAnos/obtAnos")}},B={components:{QCheckbox:D.A,QPageSticky:P._U,QItemSection:I.A,QCardSection:R.A,QInnerLoading:P.SQ,QSpinnerOval:P.VA,QSelect:F.A,QPage:P.Tu,QCard:P.C$,QBtn:P.Il},mixins:[N],data:function(){return{tablaSelected:null,anio:(0,y["default"])().ano,solonuevos:!1,congrado:!1,instrucod:"T",gradocod:"T",seccioncod:"T",situacion:"A",matricula:"S",hmnoubi:"T",anios:[{label:"2022",value:"2022"}],estados:[{value:"%",label:"Todos"},{value:"A",label:"Activos"},{value:"M",label:"Eval. Postergada"},{value:"E",label:"Ex-Alumno"},{value:"X",label:"Matriculados-Retirados"},{value:"P",label:"Promovidos"},{value:"J",label:"Repitentes"},{value:"S",label:"Req. Recuperación"},{value:"R",label:"Retirados"},{value:"T",label:"Trasladados"},{value:"D",label:"Desistió"}],ubicacion:[{label:"Todos",value:"T"},{label:"Hijo Unico",value:"A"},{label:"Hijo Mayor",value:"P"},{label:"Hijo Intermedio",value:"I"},{label:"Hijo Menor",value:"U"}],niveles:[{label:"Todos",value:"T"},{label:"Inicial",value:"I"},{label:"Primaria",value:"P"},{label:"Secundaria",value:"S"}],grados:[{label:"Todos",value:"T"}],secciones:[{SECCIONCOD:"T",SECCIONDES:"Todos"}],sino:[{label:"Todos",value:"T"},{label:"Sí",value:"S"},{label:"No",value:"N"}],listaExportar:[],listaExportar2:[],buttons:[{icon:"keyboard_arrow_left",aux:[],user:[{cod:0}],click:this.left,round:!0},{icon:"keyboard_arrow_right",click:this.rigth,round:!0}]}},methods:{rowSelected:function(e){},cambiarNivel:function(){var e=this;return O()(w()().m(function a(){return w()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,_.getGrados(e.instrucod);case 1:e.grados=a.v;case 2:return a.a(2)}},a)}))()},cambiarGrado:function(){var e=this;return O()(w()().m(function a(){return w()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,_.getSecciones(e.anio,e.instrucod,e.gradocod);case 1:e.secciones=a.v;case 2:return a.a(2)}},a)}))()},left:function(){var e=this.$refs.tabla2.rowsSelected();this.listaExportar=[].concat(A()(this.listaExportar),A()(e));var a=[];e.forEach(function(e){var o=e.TABLA,t=e.ORDEN;a.push(o+t)});var o=this.listaExportar2.filter(function(e){var o=e.TABLA,t=e.ORDEN;return!a.includes(o+t)});this.listaExportar2=A()(o)},exportar:function(){if(!this.listaExportar2.length)return(0,U["default"])("No hay campos selecionados para Exportar","warning");var e={};this.listaExportar2.forEach(function(a){var o=a.TABLA,t=a.ORDEN;e.hasOwnProperty(o)||(e[o]=[]),e[o].push(t)});var a=(0,Q.getBase)()+"/api/UtilitarioController/generarExcel",o=this.instrucod,t=this.gradocod,l=this.seccioncod,n=this.matricula,i=this.situacion,r=this.hmnoubi,s=this.solonuevos,c=this.congrado,u=this.tablaSelected;(0,q.open)({data:{ano:this.anio,data:e,instrucod:o,gradocod:t,seccioncod:l,matricula:n,situacion:i,hmnoubi:r,solonuevos:s,congrado:c,tabla:u},action:a,filename:"exportacionTablas.xlsx"})},rigth:function(){var e=this.$refs.tabla1.rowsSelected();this.listaExportar2=[].concat(A()(this.listaExportar2),A()(e));var a=[];e.forEach(function(e){var o=e.TABLA,t=e.ORDEN;a.push(o+t)});var o=this.listaExportar.filter(function(e){var o=e.TABLA,t=e.ORDEN;return!a.includes(o+t)});this.listaExportar=A()(o)},getCamposTabla:function(e){var a=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:return a.tablaSelected=e,a.listaExportar2=[],o.n=1,_.getExportarTablas(e);case 1:a.listaExportar=o.v;case 2:return o.a(2)}},o)}))()}},created:function(){var e=this;return O()(w()().m(function a(){var o,t;return w()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,_.getanios();case 1:return o=a.v,a.n=2,_.getAllSecciones(e.anio,e.instrucod,e.gradocod);case 2:return t=a.v,t.unshift({SECCIONCOD:"T",SECCIONDES:"Todos"}),e.secciones=t,a.n=3,o.json;case 3:e.anios=a.v;case 4:return a.a(2)}},a)}))()}},M=o(12807);const X=(0,M.A)(B,[["render",x]]);var $=X}}]);