"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[26723],{26723:function(e,o,a){a.r(o),a.d(o,{default:function(){return go}});var r=a(8445),t=a.n(r),l=a(61758),i=a(58790),n={class:"row q-col-gutter-xs"},s={class:"col-xs-12 col-md-2"},c={class:"col-xs-12 col-md-4"},d={class:"col-xs-12 col-md-6"},u={class:"col-xs-12 col-md-2"},f={class:"col-xs-12 col-md-4"},m={class:"col-xs-12 col-md-6"},p={class:"col-xs-12 listaDetalle"},g={class:"col-10"},b={class:"col-2 text-right"},v={key:0},h={key:1},C={key:1},A={key:1},O={key:1,class:"column"},S={class:"row border-bottom-xs q-pa-lg-md text-bold"},D={class:"col"},E={class:"row q-px-md"},P={class:"col-xs-12 col-md-7"},k={class:"col-xs-12 col-md-5"},_={class:"row"},I={key:0,class:"col-xs-12"},M={key:1,class:"col-xs-12"},N={class:"col-xs-12"},F={class:"row"},R={class:"col"},V={class:"row"},T={class:"col"},$={class:"col"},L={class:"q-pt-sm"},y={class:"row q-pa-sm"},x={class:"col-xs-12"},U={class:"col-xs-12"},q={class:"col-xs-12"},Q={class:"col-xs-12"},w={class:"col-xs-12"},G={class:"col-xs-12"},B={class:"col-xs-12"},X={class:"text-black"},W={class:"row q-pa-sm"},j={class:"col-xs-12"};function J(e,o){var a=(0,l.g2)("header-btn"),r=(0,l.g2)("q-select"),J=(0,l.g2)("selectMultiple"),z=(0,l.g2)("q-spinner-oval"),H=(0,l.g2)("q-inner-loading"),Y=(0,l.g2)("q-search"),Z=(0,l.g2)("q-tooltip"),K=(0,l.g2)("q-btn"),ee=(0,l.g2)("q-icon"),oe=(0,l.g2)("q-td"),ae=(0,l.g2)("q-table"),re=(0,l.g2)("sie-vacio"),te=(0,l.g2)("q-card-section"),le=(0,l.g2)("q-card"),ie=(0,l.g2)("q-toggle"),ne=(0,l.g2)("q-tab"),se=(0,l.g2)("sie-select"),ce=(0,l.g2)("q-input"),de=(0,l.g2)("q-popup-edit"),ue=(0,l.g2)("q-tab-pane"),fe=(0,l.g2)("q-tabs"),me=(0,l.g2)("sie-modal"),pe=(0,l.g2)("q-field"),ge=(0,l.g2)("q-checkbox"),be=(0,l.g2)("q-toolbar"),ve=(0,l.g2)("tipoCalculo"),he=(0,l.g2)("q-option-group"),Ce=(0,l.g2)("congelarNotas"),Ae=(0,l.g2)("copiarClase"),Oe=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(Oe,{class:"intranet--registro-grupos q-pa-sm"},{default:(0,l.k6)(function(){return[(0,l.bF)(le,{dense:"",flat:"",bordered:""},{default:(0,l.k6)(function(){return[(0,l.bF)(a,{name:"Creación de Clases",buttons:e.botones},null,8,["buttons"]),(0,l.bF)(te,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",n,[(0,l.Lk)("div",s,[(0,l.bF)(r,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltro.instrucod,options:e.dataSelect.nivel,"float-label":e.$t("ngs.nivel"),onChange:e.seleccionaInstru,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,l.Lk)("div",c,[(0,l.bF)(r,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltro.gradocod,options:e.grados,"float-label":e.$t("ngs.grado"),onChange:e.seleccionaGrado,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,l.Lk)("div",d,[(0,l.bF)(J,{options:e.dataAmbito,modelValue:e.vmFiltro.ambito,labelSelect:e.$t("ambito"),onChange:e.seleccionaAmbito},null,8,["options","modelValue","labelSelect","onChange"])]),(0,l.Lk)("div",u,[(0,l.bF)(r,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.asignatura,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmFiltro.asignatura=o}),options:e.dataSelect.asignatura,"float-label":e.$t("asignaturas"),filter:""},null,8,["modelValue","options","float-label"])]),(0,l.Lk)("div",f,[(0,l.bF)(J,{options:e.dataSelect.curso,modelValue:e.vmFiltro.curso,labelSelect:e.$t("curso"),onChange:e.seleccionaCurso},null,8,["options","modelValue","labelSelect","onChange"])]),(0,l.Lk)("div",m,[(0,l.bF)(J,{options:e.dataSelect.grupo,modelValue:e.vmFiltro.grupo,labelSelect:e.$t("grupo"),onChange:e.seleccionaGrupo},null,8,["options","modelValue","labelSelect","onChange"])]),(0,l.Lk)("div",p,[(0,l.bF)(H,{visible:e.loadingDetalle},{default:(0,l.k6)(function(){return[(0,l.bF)(z,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.dataDetalle.length>0?((0,l.uX)(),(0,l.Wv)(ae,{key:0,class:"htable",selection:e.configTblClase.tipoSeleccion,"row-key":"ID_CLASE",color:"secondary",data:e.dataDetalle,columns:e.configTblClase.columnas,selected:e.configTblClase.registrosSeleccionados,"onUpdate:selected":o[2]||(o[2]=function(o){return e.configTblClase.registrosSeleccionados=o}),pagination:e.configTblClase.paginacion,"onUpdate:pagination":o[3]||(o[3]=function(o){return e.configTblClase.paginacion=o}),filter:e.filtroTabla},{top:(0,l.k6)(function(a){return[(0,l.Lk)("div",g,[(0,l.bF)(Y,{"hide-underline":"",color:"secondary",modelValue:e.filtroTabla,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.filtroTabla=o})},null,8,["modelValue"])]),(0,l.Lk)("div",b,[e.dataDetalle.length&&e.sie.ruta.nivel>=2?((0,l.uX)(),(0,l.Wv)(K,{key:0,flat:"",icon:"edit",class:(0,i.C4)(e.claseBtn),onClick:e.modalEditarClase},{default:(0,l.k6)(function(){return[(0,l.bF)(Z,{anchor:"center left",self:"center right"},{default:(0,l.k6)(function(){return t()(o[33]||(o[33]=[(0,l.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["class","onClick"])):(0,l.Q3)("v-if",!0),e.dataDetalle.length&&e.sie.ruta.nivel>=3?((0,l.uX)(),(0,l.Wv)(K,{key:1,flat:"",icon:"delete",class:(0,i.C4)(e.claseBtn),onClick:e.eliminarClase},{default:(0,l.k6)(function(){return[(0,l.bF)(Z,{anchor:"center left",self:"center right"},{default:(0,l.k6)(function(){return t()(o[34]||(o[34]=[(0,l.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["class","onClick"])):(0,l.Q3)("v-if",!0)])]}),"body-cell-CURSONOM":(0,l.k6)(function(e){return[(0,l.bF)(oe,{props:e},{default:(0,l.k6)(function(){return[1===e.row.ORIGEN_REPLICA?((0,l.uX)(),(0,l.CE)("span",v,[(0,l.bF)(ee,{color:"green",name:"pesos_criterios"},{default:(0,l.k6)(function(){return[(0,l.bF)(Z,{anchor:"center left",self:"center right"},{default:(0,l.k6)(function(){return t()(o[35]||(o[35]=[(0,l.eW)("Origen de replica",-1)]))}),_:1})]}),_:1})])):((0,l.uX)(),(0,l.CE)("span",h,[(0,l.bF)(ee,{color:"white",name:"close"})])),(0,l.Lk)("span",null,(0,i.v_)(e.row.CURSONOM),1)]}),_:2},1032,["props"])]}),"body-cell-PROFESOR":(0,l.k6)(function(o){return[(0,l.bF)(oe,{class:"cursor-pointer",props:o,onClick:function(a){return e.modalEditarClase(o.row)}},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.PROFESOR),1)]}),_:2},1032,["props","onClick"])]}),"body-cell-ANUAL_REPLICA":(0,l.k6)(function(e){return[(0,l.bF)(oe,{props:e},{default:(0,l.k6)(function(){return[1==e.value?((0,l.uX)(),(0,l.Wv)(ee,{key:0,name:"calendar_check_o"})):((0,l.uX)(),(0,l.CE)("p",C,"-"))]}),_:2},1032,["props"])]}),"body-cell-PROFESORES_CRITERIO":(0,l.k6)(function(e){return[(0,l.bF)(oe,{props:e},{default:(0,l.k6)(function(){return[e.value>0?((0,l.uX)(),(0,l.Wv)(ee,{key:0,name:"teaching"})):((0,l.uX)(),(0,l.CE)("p",A,"-"))]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","selected","pagination","filter"])):((0,l.uX)(),(0,l.CE)("div",O,[(0,l.bF)(re,{icon:"settings_applications"})]))])])]}),_:1})]}),_:1}),(0,l.bF)(me,{class:"modal-editar",modelValue:e.openModal.editar,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.openModal.editar=o}),title:"Editar",header:!0,footer:e.sie.ruta.nivel>=2,ok:e.$t("botones.guardar"),loading:e.loadingModal,onSubmit:e.editarClase},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",S,[(0,l.Lk)("div",D,[(0,l.bF)(ee,{class:"text-primary q-pr-lg-xs",name:"clases",size:"26px"}),(0,l.Lk)("span",null,(0,i.v_)(e.vmEditar.descripcion),1)])]),(0,l.Lk)("div",E,[(0,l.Lk)("div",P,[(0,l.bF)(ie,{class:"q-if-outlined",modelValue:e.vmEditar.replica,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.vmEditar.replica=o}),"true-value":1,"false-value":0,label:e.$t("clase.replicaAnual"),color:"secondary"},null,8,["modelValue","label"])]),(0,l.Lk)("div",k,[(0,l.bF)(ie,{class:"q-if-outlined",modelValue:e.vmEditar.origenReplica,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.vmEditar.origenReplica=o}),"true-value":1,"false-value":0,label:"Origen replica",color:"secondary"},null,8,["modelValue"])])]),(0,l.bF)(fe,{inverted:"",ref:"tabs",animated:""},{title:(0,l.k6)(function(){return[(0,l.bF)(ne,{default:"",name:"tab-1",label:"Profesores de la clase","no-caps":""}),e.mostrarProfesoresPorCriterio?((0,l.uX)(),(0,l.Wv)(ne,{key:0,name:"tab-2",label:"Profesores por criterio"})):(0,l.Q3)("v-if",!0)]}),default:(0,l.k6)(function(){return[(0,l.bF)(ue,{name:"tab-1"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",_,[e.vmEditar.profexPeriodo?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",I,[(0,l.bF)(se,{type:"outlined",modelValue:e.vmEditar.profe,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.vmEditar.profe=o}),options:e.dataModal.profesores,label:"NOMCOMP",val:"ID_PERSONA",placeholder:"profesor",disable:e.vmEditar.profexPeriodo},null,8,["modelValue","options","disable"])])),e.enlaceClase?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.bF)(ce,{class:"q-if-outlined",modelValue:e.dataEnlace.enlace,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.dataEnlace.enlace=o}),maxlength:"800","float-label":"Enlace de Videoconferencia"},null,8,["modelValue"])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",N,[(0,l.bF)(ie,{class:"q-if-outlined",modelValue:e.vmEditar.profexPeriodo,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.vmEditar.profexPeriodo=o}),label:"Profesores por periodo",color:"secondary"},null,8,["modelValue"])])]),e.vmEditar.profexPeriodo?((0,l.uX)(),(0,l.Wv)(ae,{key:0,"table-style":e.isLess?"height: 63vh":"height:30vh",pagination:e.tableProfesores.pag,"onUpdate:pagination":o[9]||(o[9]=function(o){return e.tableProfesores.pag=o}),data:e.tableProfesores.data,columns:e.tableProfesores.columns,"row-key":"__index","hide-bottom":""},{"body-cell-NOMCOMP":(0,l.k6)(function(o){return[(0,l.bF)(oe,{props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.NOMCOMP),1),(0,l.bF)(de,{modelValue:o.row.ID_PERSONA,"onUpdate:modelValue":function(e){return o.row.ID_PERSONA=e}},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{modelValue:o.row.ID_PERSONA,"onUpdate:modelValue":function(e){return o.row.ID_PERSONA=e},options:e.dataModal.tablaProfeOpc,label:"NOMCOMP",val:"ID_PERSONA",onInput:function(a){return e.cambiarProfesor(o.row.ID_PERSONA,o.row.__index)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","pagination","data","columns"])):(0,l.Q3)("v-if",!0)]}),_:1}),(0,l.bF)(ue,{name:"tab-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",F,[(0,l.Lk)("div",R,[(0,l.bF)(se,{type:"outlined",modelValue:e.critProfe.profe,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.critProfe.profe=o}),options:e.critProfe.profesores,label:"NOMCOMP",placeholder:"profesor"},null,8,["modelValue","options"])])]),(0,l.Lk)("div",V,[(0,l.Lk)("div",T,[(0,l.bF)(se,{type:"outlined",modelValue:e.critProfe.programa,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.critProfe.programa=o}),options:e.critProfe.programas,label:"DESCRIPCION",placeholder:"programa",onSelected:e.cambiarPrograma},null,8,["modelValue","options","onSelected"])]),(0,l.Lk)("div",$,[(0,l.bF)(se,{type:"outlined",modelValue:e.critProfe.indice,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.critProfe.indice=o}),options:e.critProfe.indices,label:"label",val:"value",placeholder:"indice"},null,8,["modelValue","options"])]),(0,l.Lk)("div",L,[(0,l.bF)(K,{icon:"plus",round:"",dense:"",color:"primary",onClick:e.addCriterioPorProfesor},null,8,["onClick"])])]),(0,l.bF)(ae,{"table-style":e.isLess?"height: 63vh":"height:30vh",pagination:e.critProfe.pag,"onUpdate:pagination":o[13]||(o[13]=function(o){return e.critProfe.pag=o}),data:e.critProfe.data,columns:e.critProfe.columns,"row-key":"__index","hide-bottom":""},{"body-cell-ELIMINAR":(0,l.k6)(function(o){return[(0,l.bF)(oe,{props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(ee,{class:"cursor-pointer",name:"delete",size:"17px",onClick:function(a){return e.removeCriterioPorProfesor(o.row.__index)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","pagination","data","columns"])]}),_:1})]}),_:1},512)]}),_:1},8,["modelValue","footer","ok","loading","onSubmit"]),(0,l.bF)(me,{class:"modal-agregar",modelValue:e.openModal.agregar,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.openModal.agregar=o}),title:"Agregar",header:!0,footer:e.sie.ruta.nivel>=2,ok:e.$t("botones.guardar"),loading:e.loadingModal,onSubmit:e.agregarClase,onClose:e.cerrarModalAgregar},{footer:(0,l.k6)(function(){return[(0,l.bF)(be,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",X,[(0,l.bF)(ge,{modelValue:e.chkCerrarM,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.chkCerrarM=o}),label:"No cerrar al grabar",color:"secondary","true-value":!0,"false-value":!1},null,8,["modelValue"])]),(0,l.Lk)("div",null,[(0,l.bF)(K,{class:"q-mx-xs",color:"primary",type:"submit"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.$t("botones.guardar")),1)]}),_:1})])]}),_:1})]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",y,[(0,l.Lk)("div",x,[(0,l.bF)(pe,{error:e.v$.vmAgregar.ambito.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{type:"outlined",modelValue:e.v$.vmAgregar.ambito.$model,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.v$.vmAgregar.ambito.$model=o}),options:e.dataModal.ambito,onSelected:e.cambiaAmbitoAgregar,label:"DESCRIPCION",val:"ID_AMBITO",placeholder:"ambito"},null,8,["modelValue","options","onSelected"])]}),_:1},8,["error","error-label"])]),(0,l.Lk)("div",U,[(0,l.bF)(pe,{error:e.v$.vmAgregar.curso.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{type:"outlined",modelValue:e.v$.vmAgregar.curso.$model,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.v$.vmAgregar.curso.$model=o}),options:e.dataModal.curso,onSelected:e.cambiaCursoAgregar,label:"CURSODESC",val:"ID_CURSO",placeholder:"curso"},null,8,["modelValue","options","onSelected"])]}),_:1},8,["error","error-label"])]),(0,l.Lk)("div",q,[(0,l.bF)(pe,{error:e.v$.vmAgregar.grupo.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{type:"outlined",modelValue:e.v$.vmAgregar.grupo.$model,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.v$.vmAgregar.grupo.$model=o}),options:e.dataModal.grupo,label:"label",val:"value",placeholder:"grupo",onBlur:e.v$.vmAgregar.grupo.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error","error-label"])]),(0,l.Lk)("div",Q,[(0,l.bF)(se,{type:"outlined",modelValue:e.vmAgregar.profe,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.vmAgregar.profe=o}),options:e.dataModal.profesores,label:"NOMCOMP",val:"ID_PERSONA",placeholder:"profesor"},null,8,["modelValue","options"])]),(0,l.Lk)("div",w,[(0,l.bF)(pe,{error:e.v$.vmAgregar.programa.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{type:"outlined",modelValue:e.v$.vmAgregar.programa.$model,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.v$.vmAgregar.programa.$model=o}),options:e.dataModal.programa,label:"label",val:"codigo",placeholder:"programa",onBlur:e.v$.vmAgregar.programa.$touch},null,8,["modelValue","options","onBlur"])]}),_:1},8,["error","error-label"])]),(0,l.Lk)("div",G,[(0,l.bF)(r,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmAgregar.periodos,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.vmAgregar.periodos=o}),options:e.dataModal.periodos,"float-label":"Seleccione periodos en los que llevara la clase"},null,8,["modelValue","options"])]),(0,l.Lk)("div",B,[(0,l.bF)(ie,{class:"q-if-outlined",modelValue:e.vmAgregar.anual_replica,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.vmAgregar.anual_replica=o}),"true-value":1,"false-value":0,label:"Replicar criterios en todos los periodos",color:"secondary"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","footer","ok","loading","onSubmit","onClose"]),(0,l.bF)(me,{class:"modalConfigCursos",modelValue:e.openModal.configCalculos,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.openModal.configCalculos=o}),title:"Configuración Cursos Oficiales",header:!0,ok:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(ve,{boolModificar:e.modificarConfigCursos},null,8,["boolModificar"])]}),_:1},8,["modelValue"]),(0,l.bF)(me,{class:"modal-registro-grupos-reportes",modelValue:e.reporte.modal,"onUpdate:modelValue":o[30]||(o[30]=function(o){return e.reporte.modal=o}),title:"Reportes",header:!0,footer:e.sie.ruta.nivel>=1,ok:!1},{footer:(0,l.k6)(function(){return[(0,l.bF)(be,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(K,{class:"q-mx-xs",icon:"file_pdf",label:"PDF",color:"primary",onClick:o[25]||(o[25]=function(o){return e.verReporte("pdf")})}),(0,l.bF)(K,{class:"q-mx-xs",icon:"file_excel",label:"Excel",color:"primary",onClick:o[26]||(o[26]=function(o){return e.verReporte("xls")})})])]}),_:1})]}),footerMobile:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(K,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[27]||(o[27]=function(o){return e.verReporte("pdf")})}),(0,l.bF)(K,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[28]||(o[28]=function(o){return e.verReporte("xls")})})])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",W,[(0,l.Lk)("div",j,[(0,l.bF)(he,{color:"secondary",type:"radio",modelValue:e.reporte.repcod,"onUpdate:modelValue":o[29]||(o[29]=function(o){return e.reporte.repcod=o}),options:e.reporte.repcods},null,8,["modelValue","options"])])])]}),_:1},8,["modelValue","footer"]),e.openModal.congelarNotas?((0,l.uX)(),(0,l.Wv)(Ce,{key:0,modelValue:e.openModal.congelarNotas,"onUpdate:modelValue":o[31]||(o[31]=function(o){return e.openModal.congelarNotas=o}),pDataNivel:e.dataSelect.nivel,pDataGrado:e.gradosTemp,onCerrarModal:e.cerrarComponente},null,8,["modelValue","pDataNivel","pDataGrado","onCerrarModal"])):(0,l.Q3)("v-if",!0),e.openModal.copiaClases?((0,l.uX)(),(0,l.Wv)(Ae,{key:1,modelValue:e.openModal.copiaClases,"onUpdate:modelValue":o[32]||(o[32]=function(o){return e.openModal.copiaClases=o}),pData:e.dataDetalleTemp,infoNivel:e.sie.ruta.nivel,pDataSeleccionada:e.configTblClase.registrosSeleccionados,pDataNivel:e.dataSelect.nivel,pDataGrado:e.gradosTemp,onCerrarModal:e.cerrarComponente},null,8,["modelValue","pData","infoNivel","pDataSeleccionada","pDataNivel","pDataGrado","onCerrarModal"])):(0,l.Q3)("v-if",!0)]}),_:1})}var z=a(57008),H=a.n(z),Y=a(76080),Z=a.n(Y),K=a(45254),ee=a.n(K),oe=a(99550),ae=a.n(oe),re=(a(71225),a(23825),a(10239),a(89571),a(50310),a(5962),a(9240),a(70199),a(515),a(83190),a(27153),a(66307),a(7346),a(24066),a(83972)),te=a(6123),le=a(30545),ie=a(27738),ne=a(30640),se=a(93616),ce=a(80340),de=a(68777),ue=a(13813),fe=a(6583),me=a(69027),pe=a(82640),ge=a(982),be=a(33001),ve=a(99637),he=a(2819),Ce=a(57668),Ae=a(65229),Oe=a(81288),Se=a(99403),De={class:"contCopiaMasa"},Ee={class:"row justify-around q-ma-lg-sm"},Pe={class:"col-xs-12 col-md-8"},ke={class:"row"},_e={class:"col-xs-12 col-md-4"},Ie={class:"col-xs-12 col-md-4"},Me={class:"col-xs-12 col-md-4"},Ne={class:"row q-px-sm text-weight-bold text-info"},Fe={class:"col-auto flex-center"},Re={class:"col self-center"},Ve={class:"row"},Te={class:"col"},$e={key:1};function Le(e,o){var a=(0,l.g2)("q-select"),r=(0,l.g2)("q-icon"),t=(0,l.g2)("q-spinner-oval"),n=(0,l.g2)("q-td"),s=(0,l.g2)("q-table"),c=(0,l.g2)("q-btn"),d=(0,l.g2)("q-toolbar"),u=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(u,{class:"modal-copia-notas",modelValue:e.verModal,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.verModal=o}),title:e.$t("clase.congelarNotas"),onClose:e.cerrarModal,header:!0},{footer:(0,l.k6)(function(){return[(0,l.bF)(d,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(c,{class:"q-mx-xs",label:e.$t("botones.procesar"),disable:e.deshabilitar,color:"primary",onClick:e.procesarAmbitos},null,8,["label","disable","onClick"])])]}),_:1})]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",De,[(0,l.Lk)("div",Ee,[(0,l.Lk)("div",Pe,[(0,l.Lk)("div",ke,[(0,l.Lk)("div",_e,[(0,l.bF)(a,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.instrucod,options:e.pDataNivel,"float-label":e.$t("ngs.nivel"),onChange:e.cambiaNivelDestino},null,8,["modelValue","options","float-label","onChange"])]),(0,l.Lk)("div",Ie,[(0,l.bF)(a,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.gradocod,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmFiltro.gradocod=o}),options:e.grados,"float-label":e.$t("ngs.grado"),onInput:e.listarAmbitos,filter:""},null,8,["modelValue","options","float-label","onInput"])]),(0,l.Lk)("div",Me,[(0,l.bF)(a,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.periodo,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.vmFiltro.periodo=o}),options:e.dtPeriodos,"float-label":e.$t("periodo"),onInput:e.listarAmbitos},null,8,["modelValue","options","float-label","onInput"])])])])]),(0,l.Lk)("div",Ne,[(0,l.Lk)("div",Fe,[(0,l.bF)(r,{class:"q-mr-sm",name:"info",size:"28px"})]),(0,l.Lk)("div",Re,[(0,l.Lk)("div",null,(0,i.v_)(e.$t("mensajes.a0035")),1)])]),(0,l.Lk)("div",Ve,[(0,l.Lk)("div",Te,[(0,l.bF)(s,{class:"q-ma-sm",selection:e.tblAmbito.tipoSeleccion,"row-key":"ID_AMBITO",color:"secondary",data:e.dataAmbitoDes,columns:e.tblAmbito.columnas,selected:e.tblAmbito.registrosSeleccionados,"onUpdate:selected":o[2]||(o[2]=function(o){return e.tblAmbito.registrosSeleccionados=o})},{"body-cell-ESTADOPROCESO":(0,l.k6)(function(e){return[(0,l.bF)(n,{props:e},{default:(0,l.k6)(function(){return[1==e.value?((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"text-green",name:"check",size:"24px"})):(0,l.Q3)("v-if",!0),0==e.value?((0,l.uX)(),(0,l.CE)("p",$e,"-")):(0,l.Q3)("v-if",!0),-1==e.value?((0,l.uX)(),(0,l.Wv)(t,{key:2,color:"primary",size:"15px"})):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-FH_CONGELA_NOTAS":(0,l.k6)(function(o){return[(0,l.bF)(n,{props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(o.value,"DD/MM/YYYY hh:mm a")),1)]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","selected"])])])])]}),_:1},8,["modelValue","title","onClose"])}a(92802);var ye=a(18105),xe={emits:["update:modelValue","input","cerrarModal"],name:"congelarNotas",props:{modelValue:Boolean,pDataNivel:Array,pDataGrado:Array},components:{QCard:te.C$,QFab:te.l6,QFabAction:te.B$,QSelect:te.Si,QInput:te.ie,QInnerLoading:te.SQ,QSpinnerOval:te.VA,QToggle:te.c5,QTable:le.A,QTh:te.EJ,QTr:te.qh,QTd:te.Ef,QPopupEdit:te.GT,QTabs:te.uw,QTab:te.zu,QTabPane:te.dg,sieVacio:ce.A,sieModal:ne.A,Clase:ie.A,QIcon:te.bP,QToolbar:te.ZV,QBtn:te.Il},data:function(){return{vmFiltro:{ambito:[],curso:[],grupo:[],instrucod:null,gradocod:null,periodo:0},tblAmbito:{},dataAmbitoDes:[],dtPeriodos:[],deshabilitar:!0}},computed:{verModal:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}},grados:function(){var e=this,o=this.pDataGrado;return this.vmFiltro["instrucod"]?(o=o.filter(function(o){return e.vmFiltro["instrucod"].indexOf(o.INSTRUCOD)>=0}),o=(0,ue["default"])(o,function(e){return{label:e.GRADODES,value:e.INSTRUCOD+e.GRADOCOD}}),this.vmFiltro["gradocod"]=null):o=[],o}},mounted:function(){},watch:{},methods:{date:ye.Ay,cerrarModal:function(){this.$emit("cerrarModal","congelarNotas")},cambiaNivelDestino:function(e){this.vmFiltro["instrucod"]=e,this.vmFiltro.gradocod=null,this.dataAmbitoDes=[]},listarAmbitos:function(){var e=this;this.tblAmbito["registrosSeleccionados"]=[],this.vmFiltro.gradocod&&this.vmFiltro.periodo>0?ie.A.getPeriodosCN(this.vmFiltro.gradocod,this.vmFiltro.periodo).then(function(o){e.dataAmbitoDes=o,e.tblAmbito["registrosSeleccionados"]=e.dataAmbitoDes,e.deshabilitar=!1}):(this.dataAmbitoDes=[],this.tblAmbito["registrosSeleccionados"]=[])},loadPeriodos:function(e){var o=[];o.push({label:"[Seleccione]",value:0});for(var a=1;a<=e;a++)o.push({label:"PERIODO "+a,value:a});this.dtPeriodos=o},configurarTabla:function(){var e={};e.columnas=[{name:"SALON",label:this.$t("ngs.ngs"),field:"SALON",align:"left",sortable:!0},{name:"DESCRIPCION",label:this.$t("ambito"),field:"DESCRIPCION",align:"left",sortable:!0},{name:"ESTADOPROCESO",label:this.$t("estado"),field:"ESTADOPROCESO",align:"left",sortable:!0},{name:"FH_CONGELA_NOTAS",label:this.$t("ultimaActualizacion"),field:"FH_CONGELA_NOTAS",align:"left",sortable:!0}],e.registrosSeleccionados=[],e.tipoSeleccion="multiple",this.tblAmbito=e},procesarAmbitos:function(){var e=this,o=this.tblAmbito["registrosSeleccionados"];if(0===this.vmFiltro.periodo)return(0,ge["default"])(this.$t("mensajes.a0028"),"error"),!1;if(0===o.length)return(0,ge["default"])(this.$t("validaciones.seleccioneSalon"),"error"),!1;this.deshabilitar=!0;var a=o.reduce(function(o,a,r){return o.then(function(){e.dataAmbitoDes[a["__index"]].ESTADOPROCESO=-1,e.dataAmbitoDes[a["__index"]].FH_CONGELA_NOTAS=null;var o=ie.A.procesarCongelaNotas(a.ID_AMBITO,e.vmFiltro.periodo).then(function(o){return e.dataAmbitoDes[a["__index"]].ESTADOPROCESO=1,e.dataAmbitoDes[a["__index"]].FH_CONGELA_NOTAS=o.fecha,o});return o})},Promise.resolve(1));a.then(function(){(0,ge["default"])(e.$t("mensajes.m0008"),"success")}).catch(function(o){(0,ge["default"])(e.$t("mensajes.m0009"),"error"),e.deshabilitar=!1})}},created:function(){var e=this;ie.A.obtMaxPeriodo().then(function(o){e.loadPeriodos(o)}),this.configurarTabla()}},Ue=a(12807);const qe=(0,Ue.A)(xe,[["render",Le]]);var Qe=qe,we={class:"row q-px-sm q-pt-md q-border"},Ge={class:"col-xs-3"},Be={class:"col-xs-3"},Xe={class:"col-xs-6"},We={class:"col-xs-6"},je={class:"col-xs-6"},Je={key:0,class:"row q-px-sm"},ze={class:"col-xs-12"},He={class:"row q-px-sm q-py-md q-border"},Ye={class:"col-xs-12"},Ze={key:1},Ke={class:"col"},eo={class:"text-bold q-body-1"};function oo(e,o){var a=(0,l.g2)("q-select"),r=(0,l.g2)("sie-select"),t=(0,l.g2)("q-field"),n=(0,l.g2)("q-toggle"),s=(0,l.g2)("q-search"),c=(0,l.g2)("q-icon"),d=(0,l.g2)("q-spinner-oval"),u=(0,l.g2)("q-chip"),f=(0,l.g2)("q-td"),m=(0,l.g2)("q-table"),p=(0,l.g2)("q-card"),g=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(g,{class:"modal-copiar-clase",modelValue:e.copiarClaseModal,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.copiarClaseModal=o}),title:e.$t("clase.copiaClases"),onClose:e.cerrarModal,header:!0,footer:e.infoNivel>=2,ok:e.$t("botones.procesar"),onSubmit:e.enviar},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",we,[o[13]||(o[13]=(0,l.Lk)("div",{class:"text q-caption"},"Clase origen",-1)),(0,l.Lk)("div",Ge,[(0,l.bF)(a,{class:"q-if-outlined",modelValue:e.origen.instrucod,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.origen.instrucod=o}),options:e.origen.niveles,"float-label":e.$t("ngs.nivel"),onInput:o[1]||(o[1]=function(o){return e.resetCampos("curso")})},null,8,["modelValue","options","float-label"])]),(0,l.Lk)("div",Be,[(0,l.bF)(a,{class:"q-if-outlined",modelValue:e.origen.gradocod,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.origen.gradocod=o}),options:e.gradosC,"float-label":e.$t("ngs.grado"),onInput:o[3]||(o[3]=function(o){return e.resetCampos("curso")})},null,8,["modelValue","options","float-label"])]),(0,l.Lk)("div",Xe,[(0,l.bF)(t,{error:e.v$.origen.id_ambito.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{type:"outlined",modelValue:e.v$.origen.id_ambito.$model,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.v$.origen.id_ambito.$model=o}),options:e.ambitos,label:"DESCAMBITO",val:"ID_AMBITO",placeholder:"ambito",onSelected:e.obtCursos},null,8,["modelValue","options","onSelected"])]}),_:1},8,["error","error-label"])]),(0,l.Lk)("div",We,[(0,l.bF)(t,{error:e.v$.origen.id_curso.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{type:"outlined",modelValue:e.v$.origen.id_curso.$model,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.v$.origen.id_curso.$model=o}),options:e.cursos,label:"CURSONOM",val:"ID_CURSO",placeholder:"curso",onSelected:e.obtGrupos},null,8,["modelValue","options","onSelected"])]}),_:1},8,["error","error-label"])]),(0,l.Lk)("div",je,[(0,l.bF)(t,{error:e.v$.origen.grupo.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,l.k6)(function(){return[(0,l.bF)(r,{type:"outlined",modelValue:e.v$.origen.grupo.$model,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.v$.origen.grupo.$model=o}),options:e.grupos,label:"GRUPO",placeholder:"grupo",onSelected:e.obtCursosGrados},null,8,["modelValue","options","onSelected"])]}),_:1},8,["error","error-label"])])]),e.origen.grupo?((0,l.uX)(),(0,l.CE)("div",Je,[(0,l.Lk)("div",ze,[(0,l.bF)(n,{class:"q-if-outlined",modelValue:e.origen.mismoAmbito,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.origen.mismoAmbito=o}),label:"Distinto nivel y grado",color:"secondary",onInput:e.filtroClasesDestino},null,8,["modelValue","onInput"]),(0,l.bF)(n,{class:"q-if-outlined",modelValue:e.origen.copiarProfesor,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.origen.copiarProfesor=o}),label:"Copiar profesor",color:"secondary"},null,8,["modelValue"])])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",He,[o[15]||(o[15]=(0,l.Lk)("div",{class:"text q-caption"},"Clases de destino",-1)),(0,l.Lk)("div",Ye,[(0,l.bF)(m,{selection:e.destino.selection,"row-key":"__index",color:"secondary",data:e.dataDestino,columns:e.destino.columns,pagination:e.destino.pagination,"onUpdate:pagination":o[10]||(o[10]=function(o){return e.destino.pagination=o}),selected:e.destino.selected,"onUpdate:selected":o[11]||(o[11]=function(o){return e.destino.selected=o}),filter:e.destino.filter,"hide-bottom":""},{"top-right":(0,l.k6)(function(a){return[(0,l.bF)(s,{class:"q-if-outlined","hide-underline":"",modelValue:e.destino.filter,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.destino.filter=o}),color:"secondary"},null,8,["modelValue"])]}),"body-cell-ESTADO":(0,l.k6)(function(e){return[(0,l.bF)(f,{props:e},{default:(0,l.k6)(function(){return[1==e.value?((0,l.uX)(),(0,l.Wv)(c,{key:0,class:"text-green",name:"check",size:"24px"})):(0,l.Q3)("v-if",!0),0==e.value?((0,l.uX)(),(0,l.CE)("p",Ze,"-")):(0,l.Q3)("v-if",!0),-1==e.value?((0,l.uX)(),(0,l.Wv)(d,{key:2,color:"primary",size:"15px"})):(0,l.Q3)("v-if",!0),2==e.value?((0,l.uX)(),(0,l.Wv)(u,{key:3,icon:"error",color:"red",small:"",dense:""},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.row.MENSAJE),1)]}),_:2},1024)):(0,l.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","pagination","selected","filter"]),(0,l.bF)(p,{class:"q-pa-md full-width text-right"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",Ke,[o[14]||(o[14]=(0,l.Lk)("span",{class:"q-body-1"},"Seleccionados:",-1)),(0,l.Lk)("span",eo,(0,i.v_)(e.destino.selected.length),1)])]}),_:1})])])]}),_:1},8,["modelValue","title","onClose","footer","ok","onSubmit"])}a(23513),a(11777);var ao=a(8261),ro={setup:function(){var e=(0,re.fG)();return{v$:e}},emits:["update:modelValue","input","cerrarModal"],name:"copiarClase",props:{modelValue:Boolean,infoNivel:Number,pDataNivel:Array,pDataGrado:Array,pDataSeleccionada:Array,pData:Array},components:{QCard:te.C$,QFab:te.l6,QFabAction:te.B$,QCheckbox:te.vZ,QSelect:te.Si,QInput:te.ie,QInnerLoading:te.SQ,QChip:te.wQ,QSpinnerOval:te.VA,QToggle:te.c5,QTable:le.A,QTh:te.EJ,QTr:te.qh,QTd:te.Ef,QPopupEdit:te.GT,QTabs:te.uw,QTab:te.zu,QTabPane:te.dg,sieVacio:ce.A,sieModal:ne.A,Clase:ie.A,sieSelect:se.A,QField:te.Om,QSearch:te.Ks,QIcon:te.bP},data:function(){return{copiarClase:{modal:!1},origen:{data:[],niveles:[],instrucod:null,gradosTemp:[],gradocod:null,id_ambito:null,ambito:null,curso:null,id_curso:null,grupo:null,grupocod:null,mismoAmbito:!1,copiarProfesor:!1},destino:{data:[],columns:[{name:"CURSONOM",label:this.$t("curso"),field:"CURSONOM",align:"center",sortable:!0},{name:"DESCAMBITO",label:this.$t("ambito"),field:"DESCAMBITO",align:"left",sortable:!1},{name:"CURSONAT_DESC",label:this.$t("tipo"),field:"CURSONAT_DESC",align:"center",sortable:!0},{name:"ESTADO",label:"",field:"ESTADO",align:"center",sortable:!1}],pagination:{page:1,rowsPerPage:200},selection:"multiple",selected:[],filter:""},cursos:[],grupos:[],dataDestino:[],dataDestinoTemp:[],claseOrigen:{}}},computed:{copiarClaseModal:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}},gradosC:function(){this.dataDestino=[];var e=this.origen.gradosTemp;return e=(0,ue["default"])((0,be.filterArray)(this.origen.instrucod,{field:"INSTRUCOD",list:e}),function(e){return{label:e.GRADODES,value:e.GRADOCOD}}),e},ambitos:function(){var e=this;this.dataDestino=[];var o=this.origen.instrucod+""+this.origen.gradocod,a=this.origen.data;return a=a.filter(function(a){return e.origen.instrucod&&e.origen.gradocod?a.NGS.slice(0,2)===o?a:void 0:a}),a=(0,ao["default"])(a,"ID_AMBITO"),a}},mounted:function(){},watch:{},methods:{cerrarModal:function(){this.$emit("cerrarModal","copiaClases")},resetCampos:function(e){switch(e){case"curso":this.v$.origen.$reset(),this.origen.ambito=null,this.cursos=[],this.origen.curso=null,this.grupoc=[],this.origen.grupo=null,this.dataDestino=[],this.claseOrigen={},this.dataDestinoTemp=[],this.origen.id_curso=null;break;case"lista":this.destino["selected"]=[];break;case"grupos":this.origen.grupo=null,this.dataDestino=[],this.claseOrigen={},this.dataDestinoTemp=[],this.destino["selected"]=[];break;default:break}},init:function(){this.copiarClase.modal=!0,this.origen.niveles=this.pDataNivel,this.origen.gradosTemp=this.pDataGrado,this.origen.data=this.pData.filter(function(e){return"001"!==e.GRUPOCOD&&0===e.GRUPAL})},obtCursosGrados:function(e){var o=this;this.claseOrigen=e,this.dataDestino=[],ie.A.obtCursosGrados(this.claseOrigen.CURSOCOD,this.claseOrigen.GRUPOCOD).then(function(e){o.dataDestinoTemp=(0,fe["default"])(e),o.filtroClasesDestino(),o.resetCampos("lista")})},filtroClasesDestino:function(){var e=JSON.parse(JSON.stringify(this.dataDestinoTemp));if(0===this.dataDestinoTemp.length)return!1;var o=this.claseOrigen.NGS.substr(0,2);this.origen.mismoAmbito?this.dataDestino=e:this.dataDestino=e.filter(function(e){var a=e.INSTRUCOD+e.GRADOCOD;return a.indexOf(o)>=0})},obtCursos:function(e){this.resetCampos("curso");var o=this.origen.data.filter(function(o){return o.ID_AMBITO===e.ID_AMBITO});this.cursos=(0,ao["default"])(o,"ID_CURSO")},obtGrupos:function(e){var o=this;this.resetCampos("grupos"),this.grupos=this.origen.data.filter(function(e){return e.ID_AMBITO===o.origen.id_ambito&&e.ID_CURSO===o.origen.id_curso})},enviar:function(){var e=this,o=this.destino["selected"];if(0===Object.keys(this.claseOrigen).length)return(0,ge["default"])(this.$t("mensajes.a0028"),"error"),!1;if(0===o.length)return(0,ge["default"])(this.$t("validaciones.seleccioneSalon"),"error"),!1;this.deshabilitar=!0;var a=o.reduce(function(o,a,r){return o.then(function(){if(0===a.ESTADO){e.dataDestino[a["__index"]].ESTADO=-1,e.dataDestino[a["__index"]].CURSONAT_DESC=a.CURSONAT_DESC+" ",e.dataDestino[a["__index"]].MENSAJE="";var o=ie.A.copiarClase(a,e.claseOrigen,e.origen.copiarProfesor).then(function(o){return 1===o.estado?e.dataDestino[a["__index"]].ESTADO=1:(e.dataDestino[a["__index"]].ESTADO=2,e.dataDestino[a["__index"]].MENSAJE=o.mensaje),e.dataDestino[a["__index"]].CURSONAT_DESC=a.CURSONAT_DESC+"  ",o});return o}return 1})},Promise.resolve(1));a.then(function(){(0,ge["default"])(e.$t("mensajes.m0008"),"success")}).catch(function(o){(0,ge["default"])(e.$t("mensajes.m0009"),"error"),e.deshabilitar=!1})}},validations:{origen:{id_ambito:{required:pe.mw},id_curso:{required:pe.mw},grupo:{required:pe.mw}}},created:function(){this.init()}};const to=(0,Ue.A)(ro,[["render",oo]]);var lo=to,io=a(95523),no=a(9736),so=a(95477),co=a(23564),uo=a(88567),fo=a(95718),mo={setup:function(){var e=(0,re.fG)();return{v$:e}},directives:{sieActive:Ae.A},components:{QTime:co.A,QPopupProxy:so.A,sieInput:no.A,QCard:uo.A,QCardSection:fo.A,QPopover:te.VM,QSearch:te.Ks,QModalLayout:te.hT,QCheckbox:te.vZ,QPageSticky:te._U,QInnerLoading:te.SQ,QSpinnerOval:te.VA,QToggle:te.c5,QFab:te.l6,QFabAction:te.B$,QSelect:te.Si,QTable:le.A,QTh:te.EJ,QTr:te.qh,QTd:te.Ef,QTableColumns:te.$s,QPopupEdit:te.GT,QTabs:te.uw,QTab:te.zu,QTabPane:te.dg,QChip:te.wQ,QOptionGroup:te.EX,sieModal:ne.A,sieSelect:se.A,sieVacio:ce.A,virtualList:de.ET,tipoCalculo:Se.A,congelarNotas:Qe,copiarClase:lo,selectMultiple:io.A,QPage:te.Tu,QBtn:te.Il,QTooltip:te.nC,QIcon:te.bP,QInput:te.ie,QField:te.Om,QToolbar:te.ZV},data:function(){return{dataConferencias:{week:"",weeks:[{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Miercoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"Sábado"},{value:7,label:"Domingo"}],toleranciaAntes:0,toleranciaDespues:0,horaInicio:(0,ye.Ay)(new Date,"hh:mm a"),duracion:0},sie:(0,Ce["default"])(),enlaceClase:!1,dataEnlace:{instrucod:null,gradocod:null,seccioncod:null,enlace:null,ngs:null},vmFiltro:{ambito:[],curso:[],grupo:[],instrucod:[],gradocod:[],seccioncod:null,asignatura:"T"},dataSelect:{ambito:[],curso:[],grupo:[],nivel:[],grado:[],seccion:[],asignatura:[]},dataDetalleTemp:[],currentSelectUser:{},vmAgregar:ie.A.getDataClase(),vmEditar:{idClase:null,profe:null,replica:0,programa:null,periodos:[],profexPeriodo:!1,origenReplica:0,descripcion:""},dataModal:{ambito:[],curso:[],grupo:[],profesores:[],escala:[],programa:[],config:[],periodos:[],tablaProfeOpc:[]},openModal:{agregar:!1,replica:!1,editar:!1,copiaClases:!1,configCalculos:!1,congelarNotas:!1},dataReplica:{inicial:[],destino:[],noReplicar:[]},loadingDetalle:!1,loadingModal:!1,selection:"",configTblClase:{},gradosTemp:[],filtroTabla:"",mostrarProfesoresPorCriterio:!1,verConfigCursos:!1,modificarConfigCursos:!1,tableProfesores:{data:[],columns:[{name:"PERIODO",label:this.$t("periodo"),field:"PERIODO",align:"center",sortable:!0},{name:"NOMCOMP",label:this.$t("profesor"),field:"NOMCOMP",align:"left",sortable:!0}],pag:{page:1,rowsPerPage:16}},critProfe:{profesores:[],profe:null,programas:[],programa:null,indices:[],indice:null,data:[],columns:[{name:"NOMCOMP",label:this.$t("profesor"),field:"NOMCOMP",align:"left",sortable:!0},{name:"DESCRIPCION",label:this.$t("matricula.descripcion"),field:"DESCRIPCION",align:"left",sortable:!0},{name:"INDICE",label:this.$t("indice"),field:"INDICE",align:"left",sortable:!0},{name:"ELIMINAR",label:"",field:"ELIMINAR",align:"center",sortable:!1}],pag:{page:1,rowsPerPage:16}},config:{modal:!1,data:[],columns:[{name:"NIVEL",label:this.$t("ngs.nivel"),field:"NIVEL",align:"left",sortable:!0},{name:"LIMITE_REPLICA",label:"Límite replica anual",field:"LIMITE_REPLICA",align:"center",sortable:!1},{name:"EDICION_PESOS_PROFE",label:"Nivel de edición pesos R.N",field:"EDICION_PESOS_PROFE",align:"center",sortable:!1}],pag:{page:1,rowsPerPage:16},options:[],niveles:[]},reporte:{modal:!1,repcods:[],repcod:"profesoresPorCLase"},chkCerrarM:!0,mostrarCongelarNotas:!1}},computed:{botones:function(){var e=this,o=[{icon:"plus",label:"Agregar",permiso:">=2",click:function(){e.modalAgregarClase()}},{icon:"copy",label:"Copiar clases",click:function(){e.openComponente("copiaClases")}}];return this.mostrarCongelarNotas&&o.push({icon:"registro_notas",label:"Congelar Notas",click:function(){e.openComponente("congelarNotas")}}),o.push({icon:"print",label:"Reportes",click:function(){e.openReportes()}}),this.verConfigCursos&&o.push({icon:"settings",label:"Configuración",click:function(){e.openComponente("configCalculos")}}),o},claseBtn:function(){return this.configTblClase.registrosSeleccionados.length>0?"text-secondary":"text-grey"},grados:function(){var e=this,o=this.gradosTemp;return this.vmFiltro["instrucod"].length>0?(o=o.filter(function(o){return e.vmFiltro["instrucod"].some(function(e){return o.INSTRUCOD===e})}),o=(0,ue["default"])(o,function(e){return{label:e.GRADODES,value:e.INSTRUCOD+e.GRADOCOD}})):o=[],o},dataAmbito:function(){var e=this,o=this.dataSelect.ambito;return this.vmFiltro.ambito=[],this.vmFiltro.gradocod.length>0?o=o.filter(function(o){return e.vmFiltro["gradocod"].some(function(e){return 0===o.SALON.indexOf(e)||o.SALON.indexOf(","+e)>0})}):this.vmFiltro.instrucod.length>0&&(o=o.filter(function(o){return e.vmFiltro["instrucod"].some(function(e){return 0===o.SALON.indexOf(e)||o.SALON.indexOf(","+e)>0})})),o=(0,ue["default"])(o,function(e){return{label:e.DESCRIPCION,value:e.ID_AMBITO}}),o},dataDetalle:function(){var e=this,o=this.dataDetalleTemp;this.loadingDetalle=!0;var a={I:["I"],O:["O","D"],G:["O","I","C"],T:[]};return this.vmFiltro.ambito.length>0&&(o=o.filter(function(o){return e.vmFiltro["ambito"].some(function(e){return o.ID_AMBITO===e})})),this.vmFiltro.curso.length>0&&(o=o.filter(function(o){return e.vmFiltro["curso"].some(function(e){return o.ID_CURSO===e})})),this.vmFiltro.grupo.length>0&&(o=o.filter(function(o){return e.vmFiltro["grupo"].some(function(e){return o.GRUPOCOD===e})})),"T"!==this.vmFiltro.asignatura&&"R"!==this.vmFiltro.asignatura?o=o.filter(function(o){return a[e.vmFiltro.asignatura].some(function(e){return o.CURSONAT===e})}):"R"===this.vmFiltro.asignatura&&(o=o.filter(function(e){return parseInt(e.REPORTE)>0})),o=o.filter(function(o){return e.dataAmbito.some(function(e){if(o.ID_AMBITO===e.value)return!0})}),this.loadingDetalle=!1,o},isLess:function(){return(0,Oe.isLess)()}},methods:{setWeekDay:function(){var e={dia_semana:this.dataConferencias.week,duracion:this.dataConferencias.duracion,min_antes:this.dataConferencias.toleranciaAntes,min_despues:this.dataConferencias.toleranciaDespues,hora_inicio:this.dataConferencias.horaInicio};this.dataEnlace.configuracion[this.dataConferencias.week]=e},changeWeekDay:function(){try{this.dataEnlace.configuracion=this.dataEnlace.configuracion||"{}",this.dataEnlace.configuracion=JSON.parse(this.dataEnlace.configuracion)}catch(e){}var e=this.dataEnlace.configuracion[this.dataConferencias.week]||{};this.dataConferencias.toleranciaAntes=e.min_antes||0,this.dataConferencias.toleranciaDespues=e.min_despues||0,this.dataConferencias.horaInicio=e.hora_inicio||(0,ye.Ay)(new Date,"hh:mm a"),this.dataConferencias.duracion=e.duracion||0,this.dataEnlace.configuracion[this.dataConferencias.week]=e},seleccionaInstru:function(e){this.vmFiltro.instrucod=e,this.vmFiltro.gradocod=[]},seleccionaGrado:function(e){this.vmFiltro.gradocod=e},seleccionaAmbito:function(e){this.vmFiltro.ambito=e},seleccionaCurso:function(e){this.vmFiltro.curso=e},seleccionaGrupo:function(e){this.vmFiltro.grupo=e},init:function(){var e=this;this.dataSelect.asignatura=ie.A.getDataAsignatura(),Promise.all([ie.A.configClase(),ie.A.getClaseDetalle(),ie.A.getGrupos(),ie.A.getCursosCurGra(),ie.A.getReportes()]).then(function(o){var a=ae()(o,5),r=a[0],t=a[1],l=a[2],i=a[3],n=a[4],s=ae()(r,4);e.mostrarProfesoresPorCriterio=s[0],e.verConfigCursos=s[1],e.modificarConfigCursos=s[2],e.mostrarCongelarNotas=s[3],e.dataDetalleTemp=t,e.dataSelect.grupo=(0,ue["default"])(l,function(e){return{label:e.GRUPODES,value:e.GRUPOCOD}}),e.dataSelect.curso=(0,ue["default"])(i,function(e){return{label:e.CURSOCOD+"- "+e.CURSONOM,value:e.ID_CURSO}}),e.reporte.repcods=n})},loadAmbito:function(){var e=ee()(Z()().m(function e(){return Z()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,ie.A.getListaAmbito();case 1:this.dataSelect.ambito=e.v;case 2:return e.a(2)}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),obtNGS:function(){var e=this;Promise.all([ie.A.getNiveles(),ie.A.getGrados()]).then(function(o){var a=ae()(o,2),r=a[0],t=a[1];e.dataSelect.nivel=(0,ue["default"])(r,function(e){return{label:e.INSTRUDES,value:e.INSTRUCOD}}),e.gradosTemp=t})},configurarTablaClases:function(){var e={};e.columnas=[{name:"NGS",label:this.$t("ngs"),field:"NGS",align:"left",sortable:!0},{name:"DESCAMBITO",label:this.$t("ambito"),field:"DESCAMBITO",align:"left",sortable:!0},{name:"CURSONAT_DESC",label:this.$t("tipo"),field:"CURSONAT_DESC",align:"left",sortable:!0},{name:"CURSONOM",label:this.$t("curso"),field:"CURSONOM",align:"left",sortable:!0},{name:"GRUPO",label:this.$t("grupo"),field:"GRUPO",align:"center",sortable:!0},{name:"PROFESOR",label:this.$t("profesor"),field:"PROFESOR",align:"left",sortable:!0},{name:"ANUAL_REPLICA",label:"Replica anual",field:"ANUAL_REPLICA",align:"center"}],this.mostrarProfesoresPorCriterio&&e.columnas.push({name:"PROFESORES_CRITERIO",label:"P.C.",field:"PROFESORES_CRITERIO",align:"center",sortable:!0}),e.paginacion={page:1,rowsPerPage:500},e.registrosSeleccionados=[],e.tipoSeleccion="single",e.dataTipoSeleccion=[{label:"Individual",value:"single"},{label:"Multiple",value:"multiple"}],this.configTblClase=e},cargarClase:function(){var e=this;return ie.A.getClaseDetalle().then(function(o){e.dataDetalleTemp=o,e.configTblClase.registrosSeleccionados=[]})},eliminarClase:function(){var e=this,o=this.configTblClase.registrosSeleccionados;0===o.length?(0,ge["default"])("Debe seleccionar un registro","warning"):o.length>1?(0,ge["default"])("solo se elimina de uno en uno","warning"):"D"===o[0].CURSONAT?(0,ge["default"])("No puede eliminar un curso oficial con internos","warning"):(0,me.dialogDelete)().then(function(e){return e?ie.A.eliminarClase(o[0].ID_CLASE).then(function(e){return e}).catch(function(e){if(e=e||"",e.constructor===Object){var o=e,a=o.error;if(a.constructor===Object&&(a.message||"").indexOf("ClassRoom"))return a.message}return!1}):null}).then(function(o){"string"!==typeof o?null!==o&&(o?1===o.estado?((0,ge["default"])(e.$t("mensajes.m0006.ok"),"success"),e.cargarClase()):(0,ge["default"])(e.$t("mensajes."+o.error["message"]),"error"):(0,ge["default"])(e.$t("mensajes.m0006.mal"),"error")):(0,ge["default"])(o,"warning")})},modalAgregarClase:function(){var e=this;this.vmAgregar=ie.A.getDataClase(),this.v$.vmAgregar.$reset(),this.openModal.agregar=!0,this.dataModal.ambito=JSON.parse(JSON.stringify(this.dataSelect.ambito)),this.dataModal.grupo=JSON.parse(JSON.stringify(this.dataSelect.grupo)),this.dataModal.grupo.splice(0,1),this.chkCerrarM=!0,Promise.all([ie.A.getListaEscala(),ie.A.getDataSelectPrograma(),ie.A.getProfesores()]).then(function(o){var a=ae()(o,3),r=a[0],t=a[1],l=a[2];e.dataModal.escala=r,e.dataModal.programa=t,e.dataModal.profesores=l})},cambiaAmbitoAgregar:function(e){var o=this;Promise.all([ie.A.getCursosAmbitoCurGra(e.ID_AMBITO),ie.A.getConfigAmbito(this.vmAgregar.ambito)]).then(function(e){var a=ae()(e,2),r=a[0],t=a[1];o.dataModal.curso=r,o.dataModal.config=t;var l=ie.A.getDataSelectPeriodos(o.dataModal.config[0].PERINUM);o.dataModal.periodos=l[0],o.vmAgregar.periodos=l[1],o.vmAgregar.curso=null})},cambiaCursoAgregar:function(e){this.vmAgregar.nomcurso=e.CURSONOM},agregarClase:function(){var e=this;if(this.v$.vmAgregar.$touch(),!this.v$.vmAgregar.$error){if(this.vmAgregar.periodos.length<=0)return(0,me.alertModal)("Debe seleccionar periodos de la clase"),!1;if(null===this.vmAgregar.grupo)return(0,me.alertModal)("Seleccione Grupo"),!1;ie.A.getVerificaClaseTodos(this.vmAgregar.ambito,this.vmAgregar.curso,this.vmAgregar.grupo).then(function(o){if("001"===e.vmAgregar.grupo)switch(o.estado){case 0:case 2:(0,me.alertModal)('No puede crear la clase con grupo "TODOS"',"Existen otros grupos en el curso");break;case 1:e.grabarClase();break}else switch(o.estado){case 0:(0,me.alertModal)("No puede crear la clase","Existe la clase con grupo todos y notas relacionadas");break;case 1:e.grabarClase();break;case 2:var a=e.$t.bind(e);e.$q.dialog({title:"Se eliminará la clase con grupo todos, ¿Desea continuar?",message:a("mensajes.m0010"),ok:a("botones.si"),cancel:a("botones.no"),preventClose:!0}).onOk(function(){return e.grabarClase(o.idClase)}).onCancel(function(){return!1});break}})}},grabarClase:function(e){var o=this;this.loadingModal=!0,ie.A.grabarClase(this.vmAgregar,e).then(function(e){o.loadingModal=!1,1===e.estado?((0,ge["default"])(o.$t("mensajes.m0064"),"success"),o.chkCerrarM?o.vmAgregar.grupo=null:o.cerrarModalAgregar()):(0,ge["default"])(o.$t("mensajes.e0006"),"error")}).catch(function(e){(0,ge["default"])(o.$t("mensajes."+e.error["message"]),"error"),o.loadingModal=!1})},cerrarModalAgregar:function(){this.openModal.agregar=!1,this.cargarClase()},modalEditarClase:function(e){var o=this,a=null;if(e.ID_CLASE)a=e;else{var r=this.configTblClase.registrosSeleccionados;if(0===r.length)return(0,ge["default"])("Debe seleccionar un registro","warning"),!1;r.length>1&&(0,ge["default"])("solo se edita de uno en uno","warning"),a=r[0]}this.openModal.editar=!0,this.vmEditar.profe=null,this.vmEditar.idClase=a.ID_CLASE,this.vmEditar.replica=a.ANUAL_REPLICA,this.vmEditar.anualReplicaOld=a.ANUAL_REPLICA,this.vmEditar.origenReplica=a.ORIGEN_REPLICA,this.vmEditar.descripcion=a.DESCAMBITO+" - "+a.CURSONOM+" ("+a.GRUPO+")",this.critProfe.profe=null,this.critProfe.programa=null,this.critProfe.indice=null;var t=[ie.A.getPeriodos(a.ID_CLASE),ie.A.getProfesores(),ie.A.obtProgramaDeClase(a.ID_CLASE,"2","="),ie.A.obtProfesoresPorCriterio(a.ID_CLASE)];if(this.enlaceClase){var l=a,i=l.NGS,n=l.CURSOCOD,s=l.GRUPOCOD,c={instrucod:i[0],gradocod:i[1],seccioncod:i[2],grupocod:s,cursocod:n};this.dataEnlace=H()(H()({},c),{},{ngs:i,idClase:a.ID_CLASE}),t.push(ie.A.getEnlace(a.ID_CLASE))}Promise.all(t).then(function(e){o.tableProfesores.data=(0,fe["default"])(e[0]);var r=[];(0,ve["default"])((0,fe["default"])(e[0]),function(e){(0===r.length||-1===r.indexOf(e.ID_PERSONA))&&r.push(e.ID_PERSONA)}),o.vmEditar.profexPeriodo=r.length>1;var t=JSON.parse(JSON.stringify(e[1]));if(e[1].unshift({ID_PERSONA:null,NOMCOMP:"Ninguno",PROFCOD:"000000",USUCOD:"",USUNOM:""}),o.dataModal.tablaProfeOpc=JSON.parse(JSON.stringify(e[1])),o.dataModal.profesores=e[1],e[1].some(function(e){if(e.NOMCOMP===a.PROFESOR)return o.vmEditar.profe=e.ID_PERSONA,!0}),o.critProfe.profesores=t,o.critProfe.programas=(0,fe["default"])(e[2]),o.critProfe.indices=[],o.critProfe.data=(0,fe["default"])(e[3]),e[4]){o.dataEnlace.enlace=e[4].ENLACE||"";try{o.dataEnlace.configuracion=JSON.parse(e[4].CONFIGURACION||"{}")}catch(e){o.dataEnlace.configuracion={}}o.dataEnlace.configuracion[1]=o.dataEnlace.configuracion[1]||{},o.dataConferencias.week=o.dataEnlace.configuracion[1].dia_semana||"",o.dataConferencias.toleranciaAntes=o.dataEnlace.configuracion[1].min_antes||0,o.dataConferencias.toleranciaDespues=o.dataEnlace.configuracion[1].min_despues||0,o.dataConferencias.horaInicio=o.dataEnlace.configuracion[1].hora_inicio||(0,ye.Ay)(new Date,"hh:mm a"),o.dataConferencias.duracion=o.dataEnlace.configuracion[1].duracion||0}})},editarClase:function(){var e=this;this.v$.vmEditar.$touch();var o=this.vmEditar.idClase,a=this.vmEditar.profe,r=this.vmEditar.anualReplicaOld,t=this.vmEditar.replica,l=this.vmEditar.origenReplica,i=this.critProfe.data,n=[],s=!1;if(this.loadingModal=!0,!this.v$.vmEditar.$error){if(this.vmEditar.profexPeriodo){var c=[];if((0,ve["default"])(this.tableProfesores.data,function(e){c.push({ID_CLASE_PERIODO:e.ID_CLASE_PERIODO,ID_PERSONA:e.ID_PERSONA})}),!(c.length>0))return this.loadingModal=!1,(0,ge["default"])("Seleccione al menos un profesor","warning"),!1;n=c,s=!0}else this.loadingModal=!0,n=[],s=!1;ie.A.editarClase(o,a,r,t,n,s,i,l).then(function(o){if(ie.A.updateEnlace(e.dataEnlace,e.dataEnlace.configuracion),e.loadingModal=!1,1===o.estado)return(0,ge["default"])(e.$t("mensajes.m0064"),"success"),e.openModal.editar=!1,e.cargarClase();(0,ge["default"])(e.$t(o.mensaje),"error")}).then(function(){}).catch(function(o){(0,ge["default"])(e.$t("mensajes."+o.error["message"]),"error"),e.loadingModal=!1})}},cambiarProfesor:function(e,o){var a=(0,be.filterArray)(e,{field:"ID_PERSONA",list:this.dataModal.profesores})[0];this.tableProfesores.data[o].NOMCOMP=a&&a.NOMCOMP||""},verReporte:function(e){var o={repcod:this.reporte.repcod,formato:e,ano:(0,Ce["default"])().ano};"profesoresPorCLase"!==this.reporte.repcod&&"profesoresPorCriterio"!==this.reporte.repcod||(o.instrucod=this.vmFiltro["instrucod"],o.gradocod=this.vmFiltro["gradocod"],o.grupocod=this.vmFiltro["grupo"],o.ambito=this.vmFiltro["ambito"],o.curso=this.vmFiltro["curso"]),(0,he.exportFilePhp)(o,"webservice/reportes/reporte")},cambiarPrograma:function(){for(var e=this.critProfe.programa,o=[],a=1;a<=e.LIMITE;a++)o.push({label:a,value:a});this.critProfe.indices=o},addCriterioPorProfesor:function(){if(null!==this.critProfe.profe&&"000000"!==this.critProfe.profe&&null!==this.critProfe.programa&&null!==this.critProfe.indice){var e=this.critProfe.data,o=this.vmEditar.idClase+""+this.critProfe.programa.ID_PROGRAMA+this.critProfe.indice,a={ID:o,ID_CLASE:this.vmEditar.idClase,NOMCOMP:this.critProfe.profe.NOMCOMP,ID_PERSONA:this.critProfe.profe.ID_PERSONA,ID_PROGRAMA:this.critProfe.programa.ID_PROGRAMA,DESCRIPCION:this.critProfe.programa.DESCRIPCION,INDICE:this.critProfe.indice},r=0===(0,be.filterArray)(o,{field:"ID",list:e}).length;r?e.push(a):(0,ge["default"])("El índice ya fue agregado","warning"),this.critProfe.data=e}else(0,ge["default"])("Debes seleccionar profesor, programa e índice","warning")},removeCriterioPorProfesor:function(e){var o=this.critProfe.data;o.splice(e,1),this.critProfe.data=o},openReportes:function(){this.reporte.modal=!0},openComponente:function(e){this.openModal[e]=!0},cerrarComponente:function(e){this.openModal[e]=!1,"copiaClases"===e&&this.cargarClase()},getMensaje:function(e){var o=e?e.split("|"):["","",""];return o[2]}},validations:{vmAgregar:{ambito:{required:pe.mw},curso:{required:pe.mw},grupo:{required:pe.mw},programa:{required:pe.mw}},vmEditar:{},origen:{id_ambito:{required:pe.mw},id_curso:{required:pe.mw},grupo:{required:pe.mw}}},created:function(){var e=this;ie.A.getConstantes(["CURSO_ENLACE"]).then(function(o){e.enlaceClase=!!o&&o.CURSO_ENLACE}),this.init(),this.loadAmbito(),this.obtNGS(),this.configurarTablaClases()}};const po=(0,Ue.A)(mo,[["render",J]]);var go=po}}]);