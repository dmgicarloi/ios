"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[68699],{68699:function(e,a,o){o.r(a),o.d(a,{default:function(){return ne}});var t=o(61758),r={class:"row q-ma-xs q-col-gutter-sm"},l={class:"col-12 col-md-2"},n={class:"col-12 col-md-2"},i={class:"col-12 col-md-2"},s={class:"col-12 col-md-2"},u={class:"col-12 col-md-2"},c={class:"col-12 col-md-2"},d={class:"row"},m={class:"col-xs-12"},f={id:"form"},p={class:"row q-ma-xs q-col-gutter-sm"},b={class:"col-xs-12"},O={class:"row q-ma-xs q-col-gutter-sm"},v={class:"col-xs-12"},h={class:"row q-ma-xs q-col-gutter-sm"},D={class:"col-xs-12 col-sm-4"},E={class:"col-xs-12 col-sm-4"},R={class:"col-xs-12 col-sm-4"},g={class:"row q-ma-xs q-col-gutter-sm"},w={class:"col-xs-8"},C={key:0,class:"col-xs-4"},P={class:"row q-pa-sm q-col-gutter-sm"},M={class:"col-xs-12 col-sm-6"},A={class:"col-xs-12 col-sm-6"};function F(e,a){var o=this,F=(0,t.g2)("header-btn"),k=(0,t.g2)("q-separator"),S=(0,t.g2)("q-select"),T=(0,t.g2)("q-input"),I=(0,t.g2)("q-card-section"),_=(0,t.g2)("sie-table"),N=(0,t.g2)("q-card"),q=(0,t.g2)("q-option-group"),L=(0,t.g2)("q-date"),V=(0,t.g2)("q-popup-proxy"),x=(0,t.g2)("q-icon"),U=(0,t.g2)("sie-modal"),y=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(y,{class:"personal bg-white q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(N,null,{default:(0,t.k6)(function(){return[(0,t.bF)(F,{name:e.titulo,buttons:e.buttons},null,8,["name","buttons"]),(0,t.bF)(k),(0,t.bF)(I,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",l,[(0,t.bF)(S,{options:e.tipoEstado,label:"Filtrar por estado",modelValue:e.valorFiltroEstado,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.valorFiltroEstado=a}),outlined:""},null,8,["options","modelValue"])]),(0,t.Lk)("div",n,[(0,t.bF)(T,{label:"Codigo",placeholder:"Codigo",modelValue:e.params.CODIGO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.params.CODIGO=a}),outlined:""},null,8,["modelValue"])]),(0,t.Lk)("div",i,[(0,t.bF)(T,{label:"Nombre",placeholder:"Nombre",modelValue:e.params.NOMBRE_COMPLETO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.params.NOMBRE_COMPLETO=a}),outlined:""},null,8,["modelValue"])]),(0,t.Lk)("div",s,[(0,t.bF)(T,{label:"Cargo",placeholder:"Cargo",modelValue:e.params.CARGO,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.params.CARGO=a}),outlined:""},null,8,["modelValue"])]),(0,t.Lk)("div",u,[(0,t.bF)(T,{label:"N.Documento",placeholder:"N.Documento",modelValue:e.params.DOCUMENTO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.params.DOCUMENTO=a}),outlined:""},null,8,["modelValue"])]),(0,t.Lk)("div",c,[(0,t.bF)(S,{options:e.tiposDocumentoOriginal,label:"Tipos Documento",modelValue:e.filtroDocumento,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.filtroDocumento=a}),outlined:""},null,8,["options","modelValue"])])])]}),_:1}),(0,t.bF)(I,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",d,[(0,t.Lk)("div",m,[(0,t.bF)(_,{ref:"personal",data:e.listaPersonal,columns:e.fields,config:e.config,context:o,showSearch:!1,css:{height:"calc(100vh - 251px)"},showRefresh:!0,onRowSelected:e.rowSelect,onRefresh:e.getPersonal,selection:"multiple"},null,8,["data","columns","config","onRowSelected","onRefresh"])]),a[21]||(a[21]=(0,t.Lk)("div",{class:"col-12 content-leyenda"},[(0,t.Lk)("div",{class:"row q-gutter-sm"},[(0,t.Lk)("div",{class:"leyenda column items-center justify-center"},[(0,t.Lk)("div",{class:"leyenda-left q-pr-sm"},[(0,t.Lk)("div",{class:"leyenda-color bg-yellow-3"})]),(0,t.Lk)("div",{class:"leyenda-right"},[(0,t.Lk)("span",null,"Retirado")])])])],-1))])]}),_:1})]}),_:1}),(0,t.bF)(U,{modelValue:e.abrirModalReporte,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.abrirModalReporte=a}),showButtonCancel:!1,title:"Ventana de Impresiones",labelButtonOk:"Imprimir",iconButtonOk:"print",onSubmit:e.imprimirReporte},{default:(0,t.k6)(function(){return[(0,t.Lk)("form",f,[a[25]||(a[25]=(0,t.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,t.Lk)("div",{class:"text-h6"},"Reportes Personal")],-1)),(0,t.Lk)("div",p,[(0,t.Lk)("div",b,[(0,t.bF)(q,{modelValue:e.selectReportes,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.selectReportes=a}),options:e.botonReportes,disable:!1,type:"radio",color:"primary",onInput:a[7]||(a[7]=function(a){return e.getReporte(e.selectReportes)})},null,8,["modelValue","options"])]),a[22]||(a[22]=(0,t.Lk)("div",{class:"col-xs-12"},null,-1))]),(0,t.Lk)("div",O,[(0,t.Lk)("div",v,[(0,t.bF)(k)]),a[23]||(a[23]=(0,t.Lk)("div",{class:"col-xs-12"},null,-1))]),a[26]||(a[26]=(0,t.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,t.Lk)("div",{class:"text-h6"},"Parámetros")],-1)),(0,t.Lk)("div",h,[a[24]||(a[24]=(0,t.Lk)("div",{class:"col-xs-12"},null,-1)),(0,t.Lk)("div",D,[(0,t.bF)(S,{modelValue:e.valorParametro,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.valorParametro=a}),options:e.parametroPersonal,label:"Docente",outlined:"",disable:e.bloquearDocente},null,8,["modelValue","options","disable"])]),(0,t.Lk)("div",E,[(0,t.bF)(S,{modelValue:e.valorOrden,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.valorOrden=a}),options:e.ordenAlfabetico,label:"Orden",outlined:"",disable:e.bloquearOrden},null,8,["modelValue","options","disable"])]),(0,t.Lk)("div",R,[(0,t.bF)(T,{modelValue:e.fecha,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.fecha=a}),debounce:"500",maxlength:"10",format:"##/##/####",mask:"##/##/####",label:"Fecha",disable:e.bloquearFecha},{append:(0,t.k6)(function(){return[(0,t.bF)(x,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(V,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(L,{mask:"DD/MM/YYYY",modelValue:e.fecha,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.fecha=a}),onInput:a[11]||(a[11]=function(a){return e.closeModalCalendar("qDateProxy1")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","disable"])])]),(0,t.Lk)("div",g,[(0,t.Lk)("div",w,[(0,t.bF)(q,{color:"primary",inline:!0,type:"radio",modelValue:e.selectFormatoReporte,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.selectFormatoReporte=a}),options:e.reporteFormatos},null,8,["modelValue","options"])]),e.mostrarMeses?((0,t.uX)(),(0,t.CE)("div",C,[(0,t.bF)(S,{label:"Meses",placeholder:"Seleccione un Mes","option-value":"value","option-label":"label",options:e.meses,modelValue:e.seleccionarMes,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.seleccionarMes=a})},null,8,["options","modelValue"])])):(0,t.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(U,{modelValue:e.abrirModalRetirar,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.abrirModalRetirar=a}),showButtonCancel:!1,title:"Retirar Personal en Bloque",labelButtonOk:"Procesar",iconButtonOk:"cogs",onSubmit:e.retirarBloque},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",P,[(0,t.Lk)("div",M,[(0,t.bF)(S,{modelValue:e.selectMotivos,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.selectMotivos=a}),options:e.motivos,label:"Motivo de Salida",outlined:""},null,8,["modelValue","options"])]),(0,t.Lk)("div",A,[(0,t.bF)(T,{modelValue:e.fecsal,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.fecsal=a}),debounce:"500",maxlength:"10",format:"##/##/####",mask:"##/##/####",label:"Fecha Salida"},{append:(0,t.k6)(function(){return[(0,t.bF)(x,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(V,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(L,{mask:"DD/MM/YYYY",modelValue:e.fecsal,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.fecsal=a}),onInput:a[18]||(a[18]=function(a){return e.closeModalCalendar("qDateProxy2")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var k=o(99550),S=o.n(k),T=o(8445),I=o.n(T),_=o(76080),N=o.n(_),q=o(45254),L=o.n(q),V=(o(12563),o(30683),o(71225),o(74260),o(39866),o(77507),o(52133),o(10239),o(50310),o(5962),o(32203),o(6724),o(11777),o(83190),o(44264),o(62692),o(6123)),x=o(80660),U=o(88567),y=o(95718),B=o(2739),$=o(9736),G=o(53380),Y=o(16648),Q=o(4437),H=o(95477),j=o(18105),X=o(99515),z=o(93616),J=o(33777),W=o(41615),K=o(75053),Z=o(38103),ee={data:function(){return{config:{CODIGO:{renderHtml:function(e,a,o,t){return[0].includes(e.ESTADO)?t["$$background"]="yellow-3":t["$$background"]="white",a("span",{},e.PROFCOD)}},FECHA_NACIMIENTO:{component:"date",format:"DD/MM/YYYY",edit:!1},EDITAR:{component:"button",icon:["edit as editar"],editar:function(e,a){var o=this;return L()(N()().m(function e(){return N()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.editar(a);case 1:return e.a(2)}},e)}))()},dense:!0,flat:!0,permisos:{delete:">= 3"}},ELIMINAR:{component:"button",icon:["delete as eliminar"],eliminar:function(e,a){var o=this;return L()(N()().m(function e(){return N()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.eliminar(a);case 1:return e.a(2)}},e)}))()},dense:!0,flat:!0,permisos:{delete:">= 3"}}},rows:[],fields:[{name:"CODIGO",label:"Código",field:"PROFCOD",align:"left",sortable:!0},{name:"NOMBRE_COMPLETO",label:"Apellidos y Nombres",field:"NOMBRE_COMPLETO",align:"left",sortable:!0},{name:"CARGO",label:"Cargo",field:"CARGODES",align:"left",sortable:!0},{name:"DOCENTE",label:"Docente",field:"ES_DOCENTE",align:"left",sortable:!0},{name:"FECHA_NACIMIENTO",label:"Fecha Nac.",field:"FECHA_NACIMIENTO",align:"left",sortable:!0},{name:"TIPO_DOCUMENTO",label:"Tipo Doc.",field:"TIPDOC",align:"left",sortable:!0},{name:"NUMERO_DOCUMENTO",label:"Nro. Doc",field:"NUMDOC",align:"left",sortable:!0},{name:"SEXO",label:"Sexo",field:"SEXODES",align:"center",sortable:!0},{name:"EDITAR",label:"",field:"EDITAR",align:"center"},{name:"ELIMINAR",label:"",field:"ELIMINAR",align:"center"}],selectReportes:1,selectFormatoReporte:"pdf",reporteFormatos:[{label:"PDF",value:"pdf"},{label:"Excel",value:"xlsx"}],botonReportes:[{label:"Relación del Personal Activo",value:1},{label:"Relación del Personal Activo/Nombre",value:2},{label:"Relaci&oacute;n del Personal Retirado",value:3},{label:"Ficha del Personal",value:4},{label:"Ficha medica del Personal",value:5},{label:"Ficha del Personal en blanco",value:6},{label:"Consejeros por Salón",value:7},{label:"Directorio Telefónico",value:8},{label:"Fotos del Personal",value:9},{label:"Certificado de Trabajo",value:10},{label:"Constancia de Trabajo",value:11},{label:"Lista de Cumpleaños",value:12}],bloquearFecha:!0,bloquearOrden:!1,bloquearDocente:!1,mostrarMeses:!1}},methods:{getReporte:function(e){var a=this.botonReportes.find(function(a){return a.value===e});return this.actualizarVisibilidadReporte(e),a},actualizarVisibilidadReporte:function(e){var a=this;return L()(N()().m(function o(){var t;return N()().w(function(o){while(1)switch(o.n){case 0:t=e,o.n=1===t||2===t||3===t?1:4===t||5===t||6===t||7===t?2:8===t||9===t?3:10===t||11===t?4:12===t?5:6;break;case 1:return a.bloquearDocente=!1,a.bloquearFecha=!0,a.bloquearOrden=!1,o.a(3,6);case 2:return a.bloquearDocente=!0,a.bloquearFecha=!0,a.bloquearOrden=!0,o.a(3,6);case 3:return a.bloquearDocente=!1,a.bloquearFecha=!0,a.bloquearOrden=!0,o.a(3,6);case 4:return a.bloquearFecha=!1,a.bloquearDocente=!0,a.bloquearOrden=!0,o.a(3,6);case 5:a.verMeses=!0,a.bloquearFecha=!0,a.bloquearDocente=!0,a.bloquearOrden=!0;case 6:[5,9,10,11].includes(e)?a.reporteFormatos=[{label:"PDF",value:"pdf"}]:a.reporteFormatos=[{label:"PDF",value:"pdf"},{label:"Excel",value:"xlsx"}];case 7:return o.a(2)}},o)}))()}}},ae=o(57668),oe=o(2819),te={mixins:[ee],props:{perfil:{type:[Number,String],default:W["default"].PERFIL_PERSONAL},siscod:{type:[Number,String],default:W["default"].SISCOD_ACADEMICO}},components:{QInnerLoading:V.SQ,QOptionGroup:V.EX,sieModal:K.A,QSpinnerOval:V.VA,sieTable:J.A,QRadio:X.A,QSelect:Y.A,sieSelect:z.A,QCard:U.A,QCardSection:y.A,QForm:B.A,QInput:$.A,QSeparator:G.A,QDate:Q.A,date:j.Ay,QPopupProxy:H.A,QPage:V.Tu,QIcon:V.bP},data:function(){return{api:null,buttons:[{label:"Nuevo",icon:"add",click:this.agregar,permiso:"===3"},{label:"Imprimir",icon:"print",click:this.openModalReporte},{label:"Retirar en Bloque",icon:"user_cancel",click:this.openModalRetirar,permiso:"===3"},{label:"Eliminar en Bloque",icon:"user_del",click:this.eliminarBloque,permiso:"===3"}],rowFila:{},titulo:"Personal",valorFiltroEstado:"2",tipoEstado:[{label:"Todos",value:"2"},{label:"Activo",value:"1"},{label:"Inactivo",value:"0"}],ordenAlfabetico:[{label:"Código",value:"Código"},{label:"Alfabético",value:"Alfabético"}],valorOrden:"Código",parametroPersonal:[{label:"Todos",value:"%"},{label:"Docente",value:"S"},{label:"Otro Personal",value:"N"}],valorParametro:"%",params:{IDPERSONA:"",CODIGO:"",NOMBRE_COMPLETO:"",CARGO:"",ESTUDIO:this.valorFiltroEstado,DOCUMENTO:"",NUMERO_DOCUMENTO:""},rowSelected:{},tiposDocumentoOriginal:[],meses:[],selectAnio:String((0,ae["default"])().ano),fecha:"",filtroDocumento:"Todos",seleccionarMes:"01",selectedReport:null,filaSeleccionada:null,abrirModalReporte:!1,abrirModalRetirar:!1,bloquearFecha:!0,selectMotivos:null,motivos:[],fecsal:null}},computed:{listaPersonal:function(){var e=this,a=this.rows,o=[{label:"PROFCOD",value:this.params.CODIGO},{label:"NOMBRE_COMPLETO",value:this.params.NOMBRE_COMPLETO},{label:"CARGODES",value:this.params.CARGO},{label:"NUMDOC",value:this.params.DOCUMENTO},{label:"ID_TIPODOC",value:this.params.NUMERO_DOCUMENTO}];return o.forEach(function(e){e.value&&(a=a.filter(function(a){return a[e.label]&&a[e.label].toString().toLowerCase().includes(e.value.toLowerCase())}))}),"2"!==this.valorFiltroEstado&&(a=a.filter(function(a){return a.ESTADO.toString()===e.valorFiltroEstado})),"Todos"!==this.filtroDocumento&&(a=a.filter(function(a){return a.ID_TIPODOC===e.filtroDocumento})),a}},methods:{closeModalCalendar:function(e){this.$refs[e].hide()},getPersonal:function(){var e=this;return L()(N()().m(function a(){var o,t,r;return N()().w(function(a){while(1)switch(a.p=a.n){case 0:return o={ID_PERSONA:e.params.IDPERSONA||"",PROFCOD:e.params.CODIGO||"",NOMBRE:e.params.NOMBRE_COMPLETO||"",CARGO:e.params.CARGO||"",NUMDOC:e.params.DOCUMENTO||"",ESTADO:e.params.ESTADO||"",ID_TIPODOC:"Todos"===e.filtroDocumento?"":e.filtroDocumento||""},a.p=1,a.n=2,Z["default"].API_PERSONA_TRABAJADORES(o);case 2:t=a.v,e.rows=t,a.n=4;break;case 3:a.p=3,r=a.v,Error.message("Error al obtener datos de personal:",r);case 4:return a.a(2)}},a,null,[[1,3]])}))()},getParametroPersonal:function(e){var a=this.parametroPersonal.find(function(a){return a.value===e});return a},getOrden:function(e){var a=this.ordenAlfabetico.find(function(a){return a.value===e});return a},rowSelect:function(e,a){this.rowSelected=e,this.rowFila=a},getEstado:function(e){var a=this.tipoEstado.find(function(a){return a.value===e});return a},getDocumento:function(){var e=this;return L()(N()().m(function a(){var o,t;return N()().w(function(a){while(1)switch(a.n){case 0:return o={IDENTIDAD:e.getDocumentoFiltro||""},a.n=1,x.$http.get("api/personaController/getTipoDocumentoIdentidad",{params:o});case 1:t=a.v,e.tiposDocumentoOriginal=[{label:"Todos",value:"Todos"}].concat(I()(t.map(function(e){return{label:e.ABREVIATURA,value:e.ID_TIPODOC}})));case 2:return a.a(2)}},a)}))()},getDocumentoFiltro:function(){var e=this;return L()(N()().m(function a(){return N()().w(function(a){while(1)switch(a.n){case 0:e.getPersonal();case 1:return a.a(2)}},a)}))()},agregar:function(){var e=this;return L()(N()().m(function a(){var o;return N()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,W["default"].OBTENER_ROUTER_AGREGAR_PERSONA_TRABAJADOR(e.siscod);case 1:o=a.v,e.$router.push({name:o});case 2:return a.a(2)}},a)}))()},editar:function(e){var a=this;return L()(N()().m(function o(){var t,r,l,n,i,s;return N()().w(function(o){while(1)switch(o.n){case 0:if(a.perfil!==W["default"].TODOS){o.n=2;break}return o.n=1,x.$http.get("api/personaController/getPerfilesPorPersona",{row:{row:{idPersona:e.ID_PERSONA}}});case 1:t=o.v,r=t.perfiles,l=S()(r,1),n=l[0],a.perfil=n.ID_PERFIL;case 2:return i=e&&e.CODIGO?e.CODIGO:null,o.n=3,W["default"].OBTENER_ROUTER_EDITAR_PERSONA(a.siscod);case 3:return s=o.v,o.n=4,a.$router.push({name:s,params:{id:e.ID_PERSONA,id_perfam:i,perfil:a.perfil},query:{esTaller:a.esTaller,siscod:a.siscod}});case 4:return o.a(2)}},o)}))()},eliminar:function(e){var a=this;return L()(N()().m(function o(){var t;return N()().w(function(o){while(1)switch(o.n){case 0:t=e.NOMBRE_COMPLETO?e.NOMBRE_COMPLETO:e.ID_PERSONA,a.$confirm("¿Está seguro de eliminar a: \n ".concat(t," ?"),"Confirmar eliminación").onOk(L()(N()().m(function o(){var r;return N()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,x.$http.delete("api/personaController/deletePersona",{params:{id:e.ID_PERSONA,id_perfil:e.ID_PERFIL}});case 1:return a.$notify("Personal eliminado satisfactoriamente","success"),o.n=2,a.getPersonal();case 2:o.n=4;break;case 3:o.p=3,r=o.v,a.$alert("No se puede eliminar a ".concat(t,". Error: ").concat(r.message),"Error");case 4:return o.a(2)}},o,null,[[0,3]])})));case 1:return o.a(2)}},o)}))()},openModalReporte:function(){var e=this;return L()(N()().m(function a(){return N()().w(function(a){while(1)switch(a.n){case 0:e.getMeses(),e.abrirModalReporte=!0;case 1:return a.a(2)}},a)}))()},openModalRetirar:function(){var e=this;return L()(N()().m(function a(){var o;return N()().w(function(a){while(1)switch(a.n){case 0:if(e.selectMotivos="",e.fecsal=(0,j.Ay)(new Date,"DD/MM/YYYY"),o=e.$refs.personal.rowsSelected(),0!==o.filter(function(e){return 1===e.ESTADO}).length){a.n=1;break}return e.$notify("Debe seleccionar registros activos","info"),a.a(2);case 1:e.abrirModalRetirar=!0;case 2:return a.a(2)}},a)}))()},retirarBloque:function(){var e=this;return L()(N()().m(function a(){var o,t,r;return N()().w(function(a){while(1)switch(a.n){case 0:if(""!==e.selectMotivos){a.n=1;break}return e.$notify("Debe seleccionar un Motivo","info"),a.a(2);case 1:o=e.$refs.personal.rowsSelected(),t=o.filter(function(e){return 1===e.ESTADO}),r=(e.fecsal||"").split("/").reverse().join("-"),e.$confirm("¿Está seguro de retirar en Bloque?","Confirmar retiro").onOk(L()(N()().m(function a(){var o,l;return N()().w(function(a){while(1)switch(a.p=a.n){case 0:a.p=0,o=0;case 1:if(!(o<t.length)){a.n=3;break}return a.n=2,x.$http.post("api/personaController/retirarPersonal",{params:{id_persona:t[o].ID_PERSONA,id_perfil:t[o].ID_PERFIL,motivo_salida:e.selectMotivos,fecha_fin:r}});case 2:o++,a.n=1;break;case 3:return e.$notify("Personal actualizado satisfactoriamente","success"),e.abrirModalRetirar=!1,a.n=4,e.getPersonal();case 4:a.n=6;break;case 5:a.p=5,l=a.v,e.$alert("No se puede actualizar en Bloque. Error: ".concat(l.message),"Error");case 6:return a.a(2)}},a,null,[[0,5]])})));case 2:return a.a(2)}},a)}))()},eliminarBloque:function(){var e=this;return L()(N()().m(function a(){var o;return N()().w(function(a){while(1)switch(a.n){case 0:if(o=e.$refs.personal.rowsSelected(),0!==o.length){a.n=1;break}return e.$notify("Debe seleccionar registros","info"),a.a(2);case 1:e.$confirm("¿Está seguro de eliminar en Bloque?","Confirmar eliminación").onOk(L()(N()().m(function a(){var t,r;return N()().w(function(a){while(1)switch(a.p=a.n){case 0:a.p=0,t=0;case 1:if(!(t<o.length)){a.n=3;break}return a.n=2,x.$http.delete("api/personaController/deletePersona",{params:{id:o[t].ID_PERSONA,id_perfil:o[t].ID_PERFIL}});case 2:t++,a.n=1;break;case 3:return e.$notify("Personal eliminado satisfactoriamente","success"),a.n=4,e.getPersonal();case 4:a.n=6;break;case 5:a.p=5,r=a.v,e.$alert("No se puede eliminar en Bloque. Error: ".concat(r.message),"Error");case 6:return a.a(2)}},a,null,[[0,5]])})));case 2:return a.a(2)}},a)}))()},getMeses:function(){var e=this;return L()(N()().m(function a(){return N()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,W["default"].MESES();case 1:e.meses=a.v;case 2:return a.a(2)}},a)}))()},imprimirReporte:function(){var e=this.getParametroPersonal(this.valorParametro),a=this.getOrden(this.valorOrden),o=this.getReporte(this.selectReportes),t=this.getEstado(this.valorFiltroEstado),r=this.rows.length>0?this.rows[0].PROFCOD:"",l=this.rowSelected?this.rowSelected.PROFCOD:r,n=this.rows.length>0?this.rows[0].CARGODES:"",i=this.rowSelected?this.rowSelected.CARGODES:n,s=this.meses,u={DOCEST:e.value,ESTADO:t.value,ORDEN:a.label,FECHAHOY:this.fecha,CARGODES:i||"Docente",FORMATO:this.selectFormatoReporte,TIPREPORT:this.selectReportes,REPORT:o?o.label:"",RADIO:o.value,PROFCOD:l,CUMPLE_MES:s,report_cod:"personal_activo",repcod:"nuevoReporteAcademico"};(0,oe.exportFilePhp)(u,"webservice/reportes/reporte")},getMotivos:function(){var e=this;return L()(N()().m(function a(){var o;return N()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoTablaSe/getTablaSeAcademico",{params:{princod:"008"}});case 1:o=a.v,e.motivos=[{label:"- Motivo -",value:""}].concat(I()(o.map(function(e){return{label:e.SECUDES,value:e.SECUCOD}})));case 2:return a.a(2)}},a)}))()}},created:function(){var e=(0,ae["default"])().colcod,a=["0166"],o=["0031","0055","0076"];a.includes(e)||(this.botonReportes=this.botonReportes.filter(function(e){return![10,11].includes(e.value)})),o.includes(e)||(this.botonReportes=this.botonReportes.filter(function(e){return 12!==e.value})),this.fecha=(0,j.Ay)(new Date,"DD/MM/YYYY"),this.getPersonal(),this.getDocumento(),this.getMotivos(),this.rowSelect()}},re=o(12807);const le=(0,re.A)(te,[["render",F]]);var ne=le}}]);