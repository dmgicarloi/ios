"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[43675],{43675:function(e,a,n){n.r(a),n.d(a,{default:function(){return K}});var o=n(8445),t=n.n(o),l=n(61758),r=n(58790),s={class:"q-ma-sm"},i={class:"q-col-gutter-sm"},c={class:"row col"},u={class:"row"},d={class:"row"},m={class:"col q-px-xs q-mx-xs q-mb-sm border-field"},f={class:"leyenda"},p={class:"col row wrap justify-between q-ma-xs"},C={class:"row"},O={class:"row justify-end col"},b={class:"row justify-end col"},A={class:"q-ma-xs"},g={class:"row justify-end q-gutter-sm"},h={class:"q-ma-xs"},D={class:"row justify-end q-gutter-sm"},v={key:1,class:"column q-col-gutter-sm"},F={class:"col row q-col-gutter-sm"},I={class:"col row q-col-gutter-sm"},R={class:"col row q-col-gutter-sm"},E={class:"col row"},S={class:"col q-col-gutter-sm column"},P={class:"row justify-around col"},k={key:0,class:"row"},w={class:"col q-mt-xs"};function M(e,a){var n=this,o=(0,l.g2)("q-select"),M=(0,l.g2)("q-input"),N=(0,l.g2)("sie-editor"),j=(0,l.g2)("sie-modal"),L=(0,l.g2)("q-tab"),T=(0,l.g2)("sie-table"),U=(0,l.g2)("q-btn"),V=(0,l.g2)("q-toolbar"),y=(0,l.g2)("q-tab-pane"),_=(0,l.g2)("q-tabs"),q=(0,l.g2)("header-btn"),$=(0,l.g2)("q-list-header"),Q=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(Q,{class:"intranet--horario q-pa-sm"},{default:(0,l.k6)(function(){return[(0,l.bF)(j,{class:"modal-mensaje",modelValue:e.modalMensaje,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.modalMensaje=a}),title:"Configuración de Mensaje",onSubmit:e.saveMensaje,footer:e.infoMensaje.momento},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",s,[(0,l.Lk)("div",i,[(0,l.Lk)("div",c,[(0,l.bF)(o,{class:"col",modelValue:e.infoMensaje.momento,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.infoMensaje.momento=a}),options:e.infoMensaje.momentos,label:"Momento"},null,8,["modelValue","options"])]),e.infoMensaje.momento?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",u,[(0,l.bF)(M,{class:"col",modelValue:e.infoMensaje.mensajes[e.infoMensaje.momento].ASUNTO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.infoMensaje.mensajes[e.infoMensaje.momento].ASUNTO=a}),label:"Asunto"},null,8,["modelValue"])]),(0,l.Lk)("div",d,[(0,l.Lk)("fieldset",m,[(0,l.Lk)("legend",f,(0,r.v_)(e.$t("biblioteca.campos")),1),(0,l.Lk)("div",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoMensaje.tags[e.infoMensaje.momento],function(a){return(0,l.uX)(),(0,l.CE)("div",{key:a.titulo,class:"col-5"},[(0,l.Lk)("b",null,(0,r.v_)(e.$t(a.DESCRIPCION)+": "),1),(0,l.Lk)("span",null,(0,r.v_)(a.TAG),1)])}),128))])])]),(0,l.Lk)("div",C,[(0,l.bF)(N,{modelValue:e.infoMensaje.mensajes[e.infoMensaje.momento].MENSAJE,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.infoMensaje.mensajes[e.infoMensaje.momento].MENSAJE=a}),label:"Mensaje"},null,8,["modelValue"])])],64)):(0,l.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","onSubmit","footer"]),(0,l.bF)(j,{class:"modal-configuracion",modelValue:e.modalConfig,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.modalConfig=a}),title:"Configuración",footer:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(_,{inverted:""},{title:(0,l.k6)(function(){return[(0,l.bF)(L,{label:"Registro Otros",name:"registro",default:""}),(0,l.bF)(L,{label:"Impresión",name:"impresion"})]}),default:(0,l.k6)(function(){return[(0,l.bF)(y,{name:"registro"},{default:(0,l.k6)(function(){return[a[20]||(a[20]=(0,l.Lk)("span",{style:{"font-size":"12px"}},"Seleccione el personal que tendrá permitido solicitar impresiones por otro personal",-1)),(0,l.bF)(T,{class:"q-mt-sm",columns:e.columnsRegistro,data:e.personalRegistro,"hide-bottom":!0,context:n,selection:"multiple",css:"height: calc(100vh - 260px)","load-selection":e.pRegistroSelect,ref:"tablaRegistro"},null,8,["columns","data","load-selection"]),(0,l.bF)(V,{inverted:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",O,[(0,l.bF)(U,{color:"primary",onClick:e.guardarRegistro},{default:(0,l.k6)(function(){return t()(a[19]||(a[19]=[(0,l.eW)("Guardar",-1)]))}),_:1},8,["onClick"])])]}),_:1})]}),_:1}),(0,l.bF)(y,{name:"impresion"},{default:(0,l.k6)(function(){return[a[22]||(a[22]=(0,l.Lk)("span",{style:{"font-size":"12px"}},"Seleccione el personal que atendera la impresion y a quien notificara los documentos por imprimir",-1)),(0,l.bF)(T,{class:"q-mt-sm",columns:e.columnsImpresion,data:e.personalImpresion,"hide-bottom":!0,context:n,selection:"multiple",css:"height: calc(100vh - 260px)","load-selection":e.pImpresionSelect,ref:"tablaImpresion"},null,8,["columns","data","load-selection"]),(0,l.bF)(V,{inverted:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",b,[(0,l.bF)(U,{color:"primary",onClick:e.guardarImprimir},{default:(0,l.k6)(function(){return t()(a[21]||(a[21]=[(0,l.eW)("Guardar",-1)]))}),_:1},8,["onClick"])])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["modelValue"]),(0,l.bF)(q,{name:"Asignación de Personal",buttons:e.buttons},null,8,["buttons"]),(0,l.bF)(j,{modelValue:e.dataDetalle.modal,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.dataDetalle.modal=a}),title:"Detalle de "+e.dataDetalle.NOMCOMP,footer:e.showDetalle,ok:!1},{footerMobile:(0,l.k6)(function(){return[(0,l.bF)(U,{flat:"",dense:"",round:"",icon:"close"}),e.detalleFormato.ID?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.Wv)(U,{key:0,flat:"",dense:"",round:"",icon:"check",onClick:e.saveDetalle},null,8,["onClick"]))]}),footer:(0,l.k6)(function(){return[(0,l.Lk)("div",A,[(0,l.Lk)("div",g,[(0,l.bF)(U,{color:"primary",dense:"",onClick:a[5]||(a[5]=function(a){return e.showDetalle=!1})},{default:(0,l.k6)(function(){return t()(a[23]||(a[23]=[(0,l.eW)("cancelar",-1)]))}),_:1}),(0,l.bF)(U,{color:"primary",dense:"",onClick:e.saveDetalle},{default:(0,l.k6)(function(){return t()(a[24]||(a[24]=[(0,l.eW)("aceptar",-1)]))}),_:1},8,["onClick"])])])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",h,[e.showDetalle?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",F,[(0,l.bF)(o,{class:"col",modelValue:e.detalleFormato.ANO,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.detalleFormato.ANO=a}),options:e.dataDetalle.options,label:"Año",disable:""},null,8,["modelValue","options"]),(0,l.bF)(o,{class:"col",modelValue:e.detalleFormato.CLASIFICACION,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.detalleFormato.CLASIFICACION=a}),options:e.clasificaciones,label:"Clasificación","option-value":"SECUCOD","option-label":"SECUDES",onInput:a[10]||(a[10]=function(a){return e.updateDetalle("CLASIFICACION")})},null,8,["modelValue","options"])]),(0,l.Lk)("div",I,[(0,l.bF)(o,{class:"col",modelValue:e.detalleFormato.AREA,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.detalleFormato.AREA=a}),options:e.areas,label:"Área","option-value":"SECUCOD","option-label":"SECUDES"},null,8,["modelValue","options"]),(0,l.bF)(o,{class:"col",modelValue:e.detalleFormato.SUBAREA,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.detalleFormato.SUBAREA=a}),options:e.subareas,label:"Subarea","option-value":"SECUCOD","option-label":"SECUDES"},null,8,["modelValue","options"])]),(0,l.Lk)("div",R,[(0,l.bF)(o,{class:"col",modelValue:e.detalleFormato.CARGO,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.detalleFormato.CARGO=a}),options:e.cargos,label:"Cargo","option-value":"SECUCOD","option-label":"SECUDES"},null,8,["modelValue","options"]),(0,l.bF)(o,{class:"col",modelValue:e.detalleFormato.REQ_APROBACION,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.detalleFormato.REQ_APROBACION=a}),options:[{label:"No",value:0},{label:"Si",value:1}],label:"Requiere Aoprobación"},null,8,["modelValue"])]),1===e.detalleFormato.REQ_APROBACION?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",E,[(0,l.bF)($,{class:"col"},{default:(0,l.k6)(function(){return t()(a[26]||(a[26]=[(0,l.eW)("Aprobado por",-1)]))}),_:1})]),(0,l.Lk)("div",S,[(0,l.Lk)("div",P,[e.add?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.bF)(o,{class:"col",modelValue:e.personalAdd,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.personalAdd=a}),options:e.listPersonal,"option-value":"PROFCOD","option-label":"NOMCOMP",label:"Personal","use-input":"",onFilter:e.customFilter},null,8,["modelValue","options","onFilter"]),e.add?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)(U,{flat:"",dense:"",round:"",icon:"close",onClick:a[16]||(a[16]=function(a){return e.add=!1})}),(0,l.bF)(U,{flat:"",dense:"",round:"",icon:"save",onClick:a[17]||(a[17]=function(a){return e.addAprobador(e.personalAdd)})})])):(0,l.Q3)("v-if",!0)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[a[27]||(a[27]=(0,l.Lk)("div",{class:"col"},null,-1)),(0,l.bF)(U,{flat:"",dense:"",round:"",icon:"add",onClick:e.showAdd},null,8,["onClick"])],64))]),(0,l.bF)(T,{class:"col",columns:e.columnsAprobadores,config:e.configAprobador,data:e.detalleAprobador,"show-search":!1,"hide-bottom":!0,context:n},null,8,["columns","config","data"])])],64)):(0,l.Q3)("v-if",!0)])):((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",D,[(0,l.bF)(o,{modelValue:e.dataDetalle.ano,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.dataDetalle.ano=a}),options:e.dataDetalle.options,label:"Ano",disable:""},null,8,["modelValue","options"]),e.acceso?((0,l.uX)(),(0,l.Wv)(U,{key:0,color:"primary",dense:"",icon:"add",onClick:a[7]||(a[7]=function(a){return e.openDetalle({})})},{default:(0,l.k6)(function(){return t()(a[25]||(a[25]=[(0,l.eW)("Agregar",-1)]))}),_:1})):(0,l.Q3)("v-if",!0)]),(0,l.bF)(T,{columns:e.columnsDetalle,config:e.configDetalle,data:e.dataDetalle.detalleFormatos,"show-search":!1,context:n},null,8,["columns","config","data"])],64))])]}),_:1},8,["modelValue","title","footer"]),(0,l.Lk)("div",w,[(0,l.bF)(T,{class:"q-card",columns:e.columns,data:e.listProfes.data,search:"Buscar",config:e.config,css:"height: calc(100vh - 105px)","hide-bottom":!0,context:n},null,8,["columns","data","config"])])]}),_:1})}var N=n(99550),j=n.n(N),L=n(76080),T=n.n(L),U=n(45254),V=n.n(U),y=(n(30683),n(71225),n(74260),n(23825),n(52133),n(10239),n(50310),n(5962),n(32203),n(90095),n(6724),n(9240),n(515),n(83190),n(27153),n(66307),n(13715),n(24066),n(6123)),_=n(6083),q=n(33777),$=n(30640),Q=n(9736),B=n(16648),x=n(57668),G={components:{SieTable:q.A,sieModal:$.A,QInput:Q.A,QSelect:B.A,QTab:y.zu,QTabs:y.uw,QTabPane:y.dg,QListHeader:y.XR,sieEditor:_.A,QPage:y.Tu,QToolbar:y.ZV,QBtn:y.Il},data:function(){return{listProfes:{data:[]},clasificaciones:[],areas:[],subareas:[],cargos:[],showDetalle:!1,acceso:(0,x["default"])().ruta.nivel>2,dataDetalle:{modal:!1,ano:(0,x["default"])().ano,options:[(0,x["default"])().ano],profcod:null,profnom:null},detalleAprobador:[],detalleFormato:{CLASIFICACION:null,AREA:null,SUBAREA:null,CARGO:null,REQ_APROBACION:1},columns:[{name:"NOMCOMP",label:"Apellidos y Nombres",align:"left",field:"NOMCOMP"},{name:"CARNOM",label:"Cargo",align:"left",field:"CARNOM"},{name:"EMAIL",label:"Correo",align:"left",field:"EMAIL"},{name:"ACTIONS",align:"center",field:"ACTIONS"}],columnsDetalle:[{name:"CLASIFICACION",label:"Clasificación",align:"left",field:"CLASIFICACION"},{name:"AREA",label:"Área",align:"left",field:"AREA"},{name:"SUBAREA",label:"Subarea",align:"left",field:"SUBAREA"},{name:"CARGO",label:"Cargo",align:"left",field:"CARGO"},{name:"REQ_APROBACION",label:"Req. Aprobación",align:"center",field:"REQ_APROBACION"},{name:"ESTADO",label:"Estado",align:"center",field:"ESTADO"},{name:"ACTIONS",align:"center",field:"ACTIONS"}],columnsAprobadores:[{name:"PROFCOD",align:"left",field:"PROFCOD"},{name:"ACTIONS",align:"center",field:"ACTIONS"}],columnsRegistro:[{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"}],columnsImpresion:[{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"}],configAprobador:{},add:!1,listPersonal:[],personalAdd:null,modalConfig:!1,personalRegistro:[],personalImpresion:[],pRegistroSelect:{key:"PROFCOD",values:[]},pImpresionSelect:{key:"PROFCOD",values:[]},infoModal:{ID:null,TIPO:[],FECHA:(new Date).toISOString().split("T")[0],CANTIDAD:1,TAMANO_PAPEL:null,TIPO_PAPEL:null,ORIENTACION:null,ENGRAPADO:null,COMENTARIO_REGISTRO:null},modalMensaje:!1,infoMensaje:{momentos:[],tags:[],mensajes:{},momento:null}}},methods:{saveMensaje:function(){var e=this;return V()(T()().m(function a(){var n,o,t,l;return T()().w(function(a){while(1)switch(a.p=a.n){case 0:return n=e.infoMensaje.momento,o=e.infoMensaje.mensajes[n],a.p=1,a.n=2,e.$http.post("api/PersonaImpresionController/saveNotificaciones",{params:o});case 2:t=a.v,e.$notify(t.message),a.n=4;break;case 3:a.p=3,l=a.v,e.$notify("No se pudo gradar la información","error"),console.error(l);case 4:return a.a(2)}},a,null,[[1,3]])}))()},openModalMensaje:function(){var e=this;return V()(T()().m(function a(){var n;return T()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/PersonaImpresionController/getNotificaciones");case 1:n=a.v,e.infoMensaje.momentos=n.cboVals,e.infoMensaje.tags=n.tags,e.infoMensaje.mensajes=n.mensajes,Object.keys(e.infoMensaje.tags).forEach(function(a){e.infoMensaje.tags[a].forEach(function(e){e.TAG="{{"+e.TAG+"}}"})}),e.modalMensaje=!0;case 2:return a.a(2)}},a)}))()},guardarRegistro:function(){var e=this;return V()(T()().m(function a(){var n,o,t;return T()().w(function(a){while(1)switch(a.n){case 0:return n=[],o=e.$refs.tablaRegistro.rowsSelected().map(function(e){var a=e.PROFCOD;return a}),t=e.pRegistroSelect.values.map(function(e){var a=e.PROFCOD;return a}),o.length>0&&o.forEach(function(e){t.indexOf(e)<0&&n.push({PROFCOD:e,IMPRIME_OTROS:1})}),t.length>0&&t.forEach(function(e){o.indexOf(e)<0&&n.push({PROFCOD:e,IMPRIME_OTROS:0})}),a.n=1,e.$http.post("api/ProfeController/updatePersonalBloque",{data:n});case 1:a.v;case 2:return a.a(2)}},a)}))()},guardarImprimir:function(){var e=this;return V()(T()().m(function a(){var n,o,t;return T()().w(function(a){while(1)switch(a.n){case 0:return n=[],o=e.$refs.tablaImpresion.rowsSelected().map(function(e){var a=e.PROFCOD;return a}),t=e.pImpresionSelect.values.map(function(e){var a=e.PROFCOD;return a}),o.length>0&&o.forEach(function(e){t.indexOf(e)<0&&n.push({PROFCOD:e,IMPRESOR:1})}),t.length>0&&t.forEach(function(e){o.indexOf(e)<0&&n.push({PROFCOD:e,IMPRESOR:0})}),a.n=1,e.$http.post("api/ProfeController/updatePersonalBloque",{data:n});case 1:a.v;case 2:return a.a(2)}},a)}))()},init:function(){var e=this;return V()(T()().m(function a(){return T()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/ProfeController/getProfData");case 1:e.listProfes=a.v;case 2:return a.a(2)}},a)}))()},editarDetalle:function(e){var a=this;return V()(T()().m(function n(){return T()().w(function(n){while(1)switch(n.n){case 0:return a.dataDetalle.PROFCOD=e.PROFCOD,a.dataDetalle.NOMCOMP=e.NOMCOMP,a.dataDetalle.ID=e.ID,n.n=1,a.$http.get("api/PersonaImpresionController/getPersonaImpresion",{params:{params:{PROFCOD:a.dataDetalle.PROFCOD}}});case 1:a.dataDetalle.detalleFormatos=n.v,a.detalleAprobador=[],a.showDetalle=!1,a.dataDetalle.modal||(a.dataDetalle.modal=!0);case 2:return n.a(2)}},n)}))()},showAdd:function(){this.add=!0,this.personalAdd=null},cargarDetalle:function(e){var a=this;return V()(T()().m(function n(){var o;return T()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,a.$http.get("api/PersonaImpresionController/getPersonaImpresion",{params:{params:{PROFCOD:e.PROFCOD}}});case 1:o=n.v,a.dataDetalle.detalleFormatos=t()(o);case 2:return n.a(2)}},n)}))()},eliminarFila:function(e){var a=this;return V()(T()().m(function n(){var o,l,r;return T()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.ID){n.n=1;break}o=e.PROFCOD,a.detalleAprobador=a.detalleAprobador.filter(function(e){return e.PROFCOD!==o}),n.n=6;break;case 1:return n.n=2,a.$confirmar("Esta seguro de eliminar este aprobador");case 2:if(l=n.v,!l){n.n=6;break}return console.log({confirmar:l}),n.p=3,n.n=4,a.$http.delete("api/PersonaImpresionController/deleteAprobador",{params:e});case 4:r=n.v,a.detalleAprobador=t()(r),a.$notify("Eliminado correctamente"),n.n=6;break;case 5:n.p=5,n.v;case 6:return n.a(2)}},n,null,[[3,5]])}))()},saveDetalle:function(){var e=this;return V()(T()().m(function a(){var n,o,t,l;return T()().w(function(a){while(1)switch(a.p=a.n){case 0:if(1!==e.detalleFormato.REQ_APROBACION||0!==e.detalleAprobador.length){a.n=1;break}return e.$notify("Debe colocal al menos un aprobador","error"),a.a(2,!1);case 1:return n={CLASIFICACION:e.detalleFormato.CLASIFICACION,AREA:e.detalleFormato.AREA,SUBAREA:e.detalleFormato.SUBAREA,CARGO:e.detalleFormato.CARGO,REQ_APROBACION:e.detalleFormato.REQ_APROBACION,PROFCOD:e.dataDetalle.PROFCOD},e.detalleFormato.ID?n.ID=e.detalleFormato.ID:n.DETALLE=e.detalleAprobador,a.n=2,e.$confirmar("¿Está seguro de guardar esta información?");case 2:if(o=a.v,!o){a.n=7;break}return t=e.detalleFormato.ID?"updatePersonaImpresion":"addPersonaImpresion",a.p=3,a.n=4,e.$http.post("api/PersonaImpresionController/".concat(t),{data:n});case 4:return l=a.v,a.n=5,e.editarDetalle(e.dataDetalle);case 5:e.$notify(l.message),a.n=7;break;case 6:a.p=6,a.v;case 7:return a.a(2)}},a,null,[[3,6]])}))()},openDetalle:function(e){var a=this;return V()(T()().m(function n(){var o;return T()().w(function(n){while(1)switch(n.n){case 0:if(a.configAprobador={PROFCOD:{renderHtml:function(e,a,n,o){var t=e.PROFCOD,l=this.listProfes.data.find(function(e){return e.PROFCOD===t});return a("span",l.NOMCOMP)}},ACTIONS:{component:"button",icon:["delete"],flat:!0,round:!0,color:"primary",delete:function(e){this.eliminarFila(e)}}},!e.ID){n.n=2;break}return a.detalleFormato=e,n.n=1,a.$http.get("api/PersonaImpresionController/getAprobadores",{params:{ID:e.ID}});case 1:o=n.v,a.detalleAprobador=t()(o),n.n=3;break;case 2:a.detalleAprobador=[],a.detalleFormato={CLASIFICACION:null,AREA:null,SUBAREA:null,CARGO:null,REQ_APROBACION:1,ANO:(0,x["default"])().ano};case 3:a.showDetalle=!0;case 4:return n.a(2)}},n)}))()},customFilter:function(e,a){var n=this;this.listPersonal=[],""===e&&a(function(){return n.listProfes.data.forEach(function(e){e.PROFCOD===n.dataDetalle.profcod||n.detalleAprobador.some(function(a){return a.PROFCOD===e.PROFCOD})||n.listPersonal.push(e)}),!1}),a(function(){n.listPersonal=[];var a=e.toLowerCase();return n.listProfes.data.forEach(function(e){if(e.NOMCOMP.toLowerCase().indexOf(a)>-1){var o=e.PROFCOD!==n.dataDetalle.profcod,t=!n.detalleAprobador.some(function(a){return a.PROFCOD===e.PROFCOD});o&&t&&n.listPersonal.push(e)}}),!1})},addAprobador:function(e){var a=this;return V()(T()().m(function n(){var o;return T()().w(function(n){while(1)switch(n.p=n.n){case 0:if(!e){n.n=4;break}if(a.detalleFormato.ID){n.n=1;break}a.detalleAprobador=[].concat(t()(a.detalleAprobador),[{PROFCOD:e}]),a.add=!1,n.n=4;break;case 1:return n.p=1,n.n=2,a.$http.post("api/PersonaImpresionController/saveAprobador",{data:{PROFCOD:e},ID:a.detalleFormato.ID});case 2:o=n.v,a.$notify("Aprobador agregado correctamente"),a.detalleAprobador=t()(o),a.add=!1,n.n=4;break;case 3:n.p=3,n.v;case 4:return n.a(2)}},n,null,[[1,3]])}))()},eliminarDetalle:function(e){var a=this;return V()(T()().m(function n(){var o,t;return T()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,a.$confirmar("¿Está seguro de eliminar este contenido?");case 1:if(o=n.v,n.p=2,!o){n.n=8;break}return a.dataDetalle.detalleFormatos=[],t={id:e.ID,PROFCOD:e.PROFCOD},n.p=3,n.n=4,a.$http.delete("api/PersonaImpresionController/deletePersonaImpresion",{params:t});case 4:a.$notify("guardado correctamente"),a.cargarDetalle(e),n.n=6;break;case 5:n.p=5,n.v;case 6:return a.dataDetalle.modal=!1,n.n=7,a.editarDetalle(a.dataDetalle);case 7:a.$notify("Eliminado correctamente"),console.log({params:t,row:e});case 8:n.n=10;break;case 9:n.p=9,n.v;case 10:return n.a(2)}},n,null,[[3,5],[2,9]])}))()},openConfig:function(){var e=this;return V()(T()().m(function a(){var n;return T()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/ProfeController/getProfData");case 1:n=a.v,e.personalRegistro=t()(n.data),e.personalImpresion=t()(n.data),e.pImpresionSelect.values=[],e.pRegistroSelect.values=[],n.data.forEach(function(a){a.IMPRESOR&&e.pImpresionSelect.values.push(a),a.IMPRIME_OTROS&&e.pRegistroSelect.values.push(a)}),e.modalConfig=!0;case 2:return a.a(2)}},a)}))()}},computed:{config:function(){return{ACTIONS:{component:"button",icon:["remove_red_eye"],flat:!0,round:!0,color:"primary",remove_red_eye:function(e){this.editarDetalle(e)}}}},configDetalle:function(){var e={CLASIFICACION:{component:"select",options:[{SECUCOD:null,SECUDES:"-Ninguno-"}].concat(t()(this.clasificaciones)),optionValue:"SECUCOD",optionLabel:"SECUDES",edit:!1},AREA:{component:"select",options:[{SECUCOD:null,SECUDES:"-Ninguno-"}].concat(t()(this.areas)),optionValue:"SECUCOD",optionLabel:"SECUDES",edit:!1},SUBAREA:{component:"select",options:[{SECUCOD:null,SECUDES:"-Ninguno-"}].concat(t()(this.subareas)),optionValue:"SECUCOD",optionLabel:"SECUDES",edit:!1},CARGO:{component:"select",options:[{SECUCOD:null,SECUDES:"-Ninguno-"}].concat(t()(this.cargos)),optionValue:"SECUCOD",optionLabel:"SECUDES",edit:!1},REQ_APROBACION:{component:"select",options:[{label:"No",value:0},{label:"Si",value:1}],edit:!1},ESTADO:{renderHtml:function(e,a,n){return n.icon({name:"".concat(1===e.ESTADO?"toggle_on":"toggle_off")})},renderAction:function(e,a){var n=this;return V()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return 1===e.ESTADO?(e.ESTADO=0,a.ESTADO=0):(e.ESTADO=1,a.ESTADO=1),console.log({row:e,rowReference:a}),o.p=1,o.n=2,n.$http.post("api/PersonaImpresionController/updatePersonaImpresion",{data:e});case 2:n.$notify("Guardado Correctamente"),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()}}};return this.acceso&&(e.ACTIONS={component:"button",icon:["edit as editar","delete as eliminar"],flat:!0,round:!0,color:"primary",editar:function(e){this.openDetalle(e)},eliminar:function(e){this.eliminarDetalle(e)}}),e},buttons:function(){var e=[];return this.acceso&&(e.push({label:"Configurar Accesos",icon:"config_notas",click:this.openConfig}),e.push({label:"Configurar Mensajes",icon:"contact_mail",click:this.openModalMensaje})),e}},watch:{},created:function(){var e=this;return V()(T()().m(function a(){return T()().w(function(a){while(1)switch(a.n){case 0:e.init(),Promise.all([e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I01"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I02"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I03"}}}}),e.$http.get("api/TablaSeController/getTablaSe",{params:{params:{where:{princod:"I04"}}}})]).then(function(a){var n=j()(a,4),o=n[0],t=n[1],l=n[2],r=n[3];e.areas=o,e.subareas=t,e.cargos=l,e.clasificaciones=r});case 1:return a.a(2)}},a)}))()}},X=n(12807);const W=(0,X.A)(G,[["render",M]]);var K=W}}]);