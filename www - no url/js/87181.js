"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[87181],{87181:function(a,e,r){r.r(e),r.d(e,{default:function(){return q}});var n=r(61758),l={class:"row justify-center q-col-gutter-sm"},i={class:"col-xs-12 col-sm-2"},o={class:"col-xs-12 col-sm-4"},t={class:"col-xs-12 col-sm-2"};function s(a,e){var r=(0,n.g2)("header-btn"),s=(0,n.g2)("q-spinner-oval"),u=(0,n.g2)("q-inner-loading"),c=(0,n.g2)("q-input"),d=(0,n.g2)("q-select"),f=(0,n.g2)("q-form"),m=(0,n.g2)("q-card-section"),p=(0,n.g2)("q-card"),g=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(g,{class:"separa-usuario-familia q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(p,null,{default:(0,n.k6)(function(){return[(0,n.bF)(r,{name:"Separar Usuario Familia",buttons:a.buttons},null,8,["buttons"]),(0,n.bF)(m,{style:{height:"calc(100vh - 115px)"}},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{visible:a.loading},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,n.bF)(f,{ref:"refForm"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[(0,n.Lk)("div",i,[(0,n.bF)(c,{modelValue:a.famcod,"onUpdate:modelValue":e[0]||(e[0]=function(e){return a.famcod=e}),"float-label":"Código de familia",label:"Código de familia",maxlength:"8",rules:[a.campoRequerido],debounce:"500",onKeydown:a.buscarFamilia},null,8,["modelValue","rules","onKeydown"])]),(0,n.Lk)("div",o,[(0,n.bF)(c,{modelValue:a.famdes,"onUpdate:modelValue":e[1]||(e[1]=function(e){return a.famdes=e}),"float-label":"Familia",label:"Familia",readonly:!0},null,8,["modelValue"])]),(0,n.Lk)("div",t,[(0,n.bF)(d,{modelValue:a.famresp,"onUpdate:modelValue":e[2]||(e[2]=function(e){return a.famresp=e}),label:"Asignar Datos",options:a.responsables,rules:[a.campoRequerido]},null,8,["modelValue","options","rules"])])])]}),_:1},512)]}),_:1})]}),_:1})]}),_:1})}var u=r(76080),c=r.n(u),d=r(45254),f=r.n(d),m=r(6123),p=r(88567),g=r(9736),b=r(2739),F=r(16648),h=r(982),v={components:{QCard:p.A,QInput:g.A,QForm:b.A,QSelect:F.A,Notify:h["default"],QInnerLoading:m.SQ,QSpinnerOval:m.VA,QPage:m.Tu},data:function(){return{loading:!1,famcod:null,famdes:null,famresp:null,responsables:[{label:"Madre",value:"M"},{label:"Padre",value:"P"}],buttons:[{icon:"cogs",label:"Procesar",click:this.procesar}]}},methods:{campoRequerido:function(a){return!!a||"Campo requerido"},procesar:function(){var a=this;return f()(c()().m(function e(){var r;return c()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.n=1,a.$refs.refForm.validate();case 1:if(r=e.v,a.famcod){e.n=2;break}return(0,h["default"])("Ingresar Código de Familia","warning"),e.a(2);case 2:if(r||a.famdes){e.n=3;break}return(0,h["default"])("Ingresar Código de Familia","warning"),e.a(2);case 3:if(r||a.famresp){e.n=4;break}return(0,h["default"])("Seleccionar Familiar para asignar datos","warning"),e.a(2);case 4:if(r){e.n=5;break}return(0,h["default"])("Verficar datos","warning"),e.a(2);case 5:return e.p=5,a.loading=!0,e.n=6,a.separarUsuarioFamilia();case 6:(0,h["default"])("Proceso terminado","success"),a.loading=!1,a.limpiar(),e.n=8;break;case 7:e.p=7,e.v,(0,h["default"])("Ocurrió un problema","warning"),a.loading=!1;case 8:return e.a(2)}},e,null,[[5,7]])}))()},limpiar:function(){this.famcod=null,this.famdes=null,this.$refs.refForm.reset()},buscarFamilia:function(a){var e=this;return f()(c()().m(function r(){var n,l;return c()().w(function(r){while(1)switch(r.n){case 0:if(e.famcod){r.n=1;break}return(0,h["default"])("Ingresar Código de Familia","warning"),r.a(2);case 1:if(13!==a.keyCode){r.n=3;break}return n={},n.columnas=["FAMCOD","FAMDES"],n.where={famcod:e.famcod},r.n=2,e.$http.get("api/FamiliaController/getDatosFamilia",{params:{parametros:n}});case 2:l=r.v,l.length>0?e.famdes=l[0].FAMDES:(e.famdes=null,(0,h["default"])("Familia no encontrada","warning"));case 3:return r.a(2)}},r)}))()},separarUsuarioFamilia:function(){var a=this.famcod,e=this.famresp;return this.$http.post("api/FamiliaController/separarUsuarioFamilia",{famcod:a,famresp:e})}}},k=r(12807);const w=(0,k.A)(v,[["render",s]]);var q=w}}]);