"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[88708],{88708:function(e,a,n){n.r(a),n.d(a,{default:function(){return k}});var l=n(61758);function t(e,a){var n=(0,l.g2)("listado"),t=(0,l.g2)("devolucion"),o=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(o,null,{default:(0,l.k6)(function(){return["listado"===e.menuSelect?((0,l.uX)(),(0,l.Wv)(n,{key:0,onCambiarVentana:e.cambiarEstado},null,8,["onCambiarVentana"])):(0,l.Q3)("v-if",!0),"devolucion"===e.menuSelect?((0,l.uX)(),(0,l.Wv)(t,{key:1,onCambiarVentana:e.cambiarEstado},null,8,["onCambiarVentana"])):(0,l.Q3)("v-if",!0),(0,l.Q3)('individual(@cambiarVentana="cambiarEstado"\nv-if="menuSelect===\'individual\'"\n:nombre="titulo"\n:dataEdit="dataEdit"\n)'),(0,l.Q3)('bloque(@cambiarVentana="cambiarEstado"\nv-if="menuSelect===\'bloque\'"\n:nombre="titulo"\n:dataEdit="dataEdit"\n)')]}),_:1})}var o=n(6123),i={class:"q-ma-xs"},r={class:"row q-gutter-sm"},c={class:"q-mt-xs"},u={class:"row q-gutter-sm"},d={class:"q-card q-pa-sm q-ma-sm"},s={class:"row q-gutter-sm q-ma-xs"},m={class:"row q-gutter-sm q-ma-xs col"};function f(e,a){var n=this,t=(0,l.g2)("header-btn"),o=(0,l.g2)("sie-pdf"),f=(0,l.g2)("sie-modal"),I=(0,l.g2)("q-input1"),D=(0,l.g2)("sie-table"),b=(0,l.g2)("q-icon"),C=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(C,null,{default:(0,l.k6)(function(){return[(0,l.bF)(t,{name:"Devoluciones",buttons:e.buttons},null,8,["buttons"]),e.infoPrint?((0,l.uX)(),(0,l.Wv)(f,{key:0,modelValue:e.modalPrint,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.modalPrint=a}),title:"Detalle de "+e.infoPrint.ID_DEVOLUCION_TXT},{default:(0,l.k6)(function(){return[(0,l.Q3)("span {{infoPrint}}"),(0,l.bF)(o,{class:"col",src:e.url(e.infoPrint),style:{"min-height":"60vh","min-width":"50vw"}},null,8,["src"])]}),_:1},8,["modelValue","title"])):(0,l.Q3)("v-if",!0),(0,l.bF)(f,{modelValue:e.modalDetalle,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.modalDetalle=a}),footer:!1,title:"Detalle de "+e.dataDetalle.ID_DEVOLUCION_TXT},{default:(0,l.k6)(function(){return[(0,l.Q3)("span {{dataDetalle}}"),(0,l.Lk)("div",i,[(0,l.Lk)("div",r,[(0,l.bF)(I,{class:"col",disable:!0,modelValue:e.dataDetalle.ID_DEVOLUCION_TXT,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.dataDetalle.ID_DEVOLUCION_TXT=a}),label:"Id. Devolución"},null,8,["modelValue"]),(0,l.bF)(I,{class:"col",disable:!0,modelValue:e.dataDetalle.NOMCOMP,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.dataDetalle.NOMCOMP=a}),label:"Usuario"},null,8,["modelValue"])]),(0,l.Lk)("div",c,[(0,l.Lk)("div",u,[(0,l.bF)(I,{class:"col",disable:!0,modelValue:e.dataDetalle.F_DEVOLUCION,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.dataDetalle.F_DEVOLUCION=a}),label:"Fecha Devolución"},null,8,["modelValue"]),(0,l.bF)(I,{class:"col",disable:!0,modelValue:e.dataDetalle.USUNOM,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.dataDetalle.USUNOM=a}),label:"Usuario de devolución"},null,8,["modelValue"])])]),(0,l.bF)(D,{class:"q-mt-xs",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(60vh - 220px)","show-search":!0,context:n,columns:e.columnsDetalle,data:e.detalle[e.dataDetalle.ID_DEVOLUCION],config:e.configDetalle},null,8,["columns","data","config"])])]}),_:1},8,["modelValue","title"]),(0,l.Lk)("div",d,[(0,l.Lk)("div",s,[(0,l.Lk)("div",m,[(0,l.bF)(I,{class:"col",modelValue:e.filtro.ID_TRANSFERENCIA,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.filtro.ID_TRANSFERENCIA=a}),label:e.$t("Código de Transferencia"),onKeydown:e.buscarTransferencia},{append:(0,l.k6)(function(){return[(0,l.bF)(b,{name:"select_all"})]}),_:1},8,["modelValue","label","onKeydown"]),(0,l.bF)(I,{class:"col",modelValue:e.filtro.F_INICIO,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.filtro.F_INICIO=a}),type:"date",label:"Inicio",onInpuit:e.cambiarFecha},null,8,["modelValue","onInpuit"]),(0,l.bF)(I,{class:"col",modelValue:e.filtro.F_FIN,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.filtro.F_FIN=a}),type:"date",label:"Fin",onInpuit:e.cambiarFecha},null,8,["modelValue","onInpuit"])])]),(0,l.bF)(D,{class:"q-mt-xs",dense:"",flat:"",bordered:"","wrap-cells":"",css:"height: calc(100vh - 220px)","show-search":!0,context:n,columns:e.columns,data:e.data,config:e.config},null,8,["columns","data","config"])])]}),_:1})}var I=n(76080),D=n.n(I),b=n(8445),C=n.n(b),O=n(45254),N=n.n(O),v=(n(30683),n(10239),n(9736)),p=n(33777),_=n(18105),g=n(57668),V=n(30640),h=n(84603),A={emits:["cambiarVentana"],components:{QInput1:v.A,SieTable:p.A,sieModal:V.A,siePdf:h.A,QPage:o.Tu,QIcon:o.bP},data:function(){return{condicionesObj:{},filtro:{ID_TRANSFERENCIA:null,F_INICIO:new Date,F_FIN:new Date},data:[],detalle:{},columns:[{name:"ID_DEVOLUCION_TXT",label:"Id",align:"center",field:"ID_DEVOLUCION_TXT"},{name:"NOMCOMP",label:"Nombre",align:"center",field:"NOMCOMP"},{name:"IDTRANSFERENCIAS_TXT",label:"Cod. transferencia",align:"center",field:"IDTRANSFERENCIAS_TXT"},{name:"ACTIVOS",label:"Activos devueltos",align:"center",field:"ACTIVOS"},{name:"USUNOM",label:"Usuario devolución",align:"center",field:"USUNOM"},{name:"F_DEVOLUCION",label:"Fecha devolución",align:"center",field:"F_DEVOLUCION"},{name:"ACCION",align:"center",field:"ACCION"}],columnsDetalle:[{name:"ID_ACTIVO_TXT",label:"Cod. Activo",align:"center",field:"ID_ACTIVO_TXT"},{name:"DESCRIPCION",label:"Nombre",align:"left",field:"DESCRIPCION"},{name:"ID_TRANSFERENCIA_TXT",label:"Cod. Transferencia",align:"center",field:"ID_TRANSFERENCIA_TXT"},{name:"ID_CONDICION",label:"Condición",align:"center",field:"ID_CONDICION"}],modalDetalle:!1,modalPrint:!1,infoPrint:{},dataDetalle:{},config:{},configDetalle:{}}},methods:{printxls:function(){},init:function(){},url:function(e){return(0,g["default"])().api+"/AfDevolucionController/getConstancia"+"?ID=".concat(e.ID_DEVOLUCION,"&token2=").concat((0,g["default"])().token,"&access_token=").concat((0,g["default"])().token)},nuevo:function(){this.$emit("cambiarVentana","devolucion")},cambiarFecha:function(){this.buscarTransferencia({which:13})},buscarTransferencia:function(e){var a=this;return N()(D()().m(function n(){var l,t,o,i;return D()().w(function(n){while(1)switch(n.n){case 0:if(13!==e.which){n.n=2;break}return l=a.filtro,l.ID_TRANSFERENCIA&&(l.ID_TRANSFERENCIA=parseInt(l.ID_TRANSFERENCIA)),n.n=1,a.$http.get("api/AfDevolucionController/getAfDevolucion",{params:{parametros:l}});case 1:t=n.v,o=t.data,i=t.detalle,a.data=C()(o),a.detalle=i;case 2:return n.a(2)}},n)}))()}},computed:{buttons:function(){var e=[];return 3===(0,g["default"])().ruta.nivel&&e.push({label:"Devolver",icon:"add",click:this.nuevo}),e}},mounted:function(){var e=this;return N()(D()().m(function a(){var n,l,t,o;return D()().w(function(a){while(1)switch(a.n){case 0:return e.init(),a.n=1,e.$http.get("api/AfActivoController/getCargaInicial",{params:{isNuevo:!1}});case 1:return n=a.v,l=n.condicionesObj,e.condicionesObj=l,t=new Date,t.setDate(t.getDate()-7),e.filtro.F_INICIO=(0,_.Ay)(t,"YYYY-MM-DD"),e.filtro.F_FIN=(0,_.Ay)(new Date,"YYYY-MM-DD"),e.buscarTransferencia({which:13}),e.configDetalle={flat:!0,round:!0,color:"primary",ID_CONDICION:{component:"select",renderHtml:function(e,a,n,l){return n.background({text:e["COLORNAME"],color:e.COLOR||null})}}},e.config={F_DEVOLUCION:{component:"date"},ACCION:{component:"button",icon:["remove_red_eye"],remove_red_eye:function(e,a){this.dataDetalle=e,this.dataDetalle.F_DEVOLUCION_FORMAT=(0,_.Ay)(e.F_DEVOLUCION_FORMAT,"YYYY-MM-DD"),this.modalDetalle=!0},imprimir:function(e){this.modalPrint=!0,this.infoPrint=e},tooltip:{remove_red_eye:"Ver Detalle",print:"Imprimir Constancia"},flat:!0,round:!0},flat:!0,round:!0,color:"primary"},a.n=2,e.$http.get("api/AfPlantillaController/getAfPlantilla",{params:{parametros:{id:4}}});case 2:o=a.v,1===o[0].ESTADO&&e.config.ACCION.icon.push("print as imprimir");case 3:return a.a(2)}},a)}))()}},F=n(12807);const T=(0,F.A)(A,[["render",f]]);var E=T,U=n(55824),S={components:{listado:E,devolucion:U.A,QPage:o.Tu},data:function(){return{menuSelect:"listado",titulo:null,dataEdit:{}}},methods:{printxls:function(){},cambiarEstado:function(e,a){console.log({estado:e}),this.menuSelect=e}}};const w=(0,F.A)(S,[["render",t]]);var k=w}}]);