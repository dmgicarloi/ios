"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[44910],{44910:function(n,e,t){t.r(e),t.d(e,{default:function(){return I}});var o=t(61758),a={class:"row"},r={class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},i={class:"row q-col-gutter-sm"},l={class:"col-xs-12"},s={class:"row q-pa-sm q-col-gutter-sm"},u={class:"col-xs-12"},c={class:"col-xs-12"},d={class:"col-xs-12"},f={class:"col-xs-12"};function m(n,e){var t=this,m=(0,o.g2)("header-btn"),p=(0,o.g2)("q-select"),O=(0,o.g2)("q-card-section"),g=(0,o.g2)("sie-table"),v=(0,o.g2)("q-card"),b=(0,o.g2)("q-form"),C=(0,o.g2)("sie-modal"),N=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(N,{class:"bg-white q-pa-sm sie-flat"},{default:(0,o.k6)(function(){return[(0,o.bF)(v,null,{default:(0,o.k6)(function(){return[(0,o.bF)(m,{name:"Reglas de Desempate",buttons:n.buttons},null,8,["buttons"]),(0,o.bF)(O,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.Lk)("div",r,[(0,o.bF)(p,{modelValue:n.anio,"onUpdate:modelValue":e[0]||(e[0]=function(e){return n.anio=e}),options:n.anios,label:"Año","option-value":"ANO","option-label":"ANO",onInput:n.filtrarNoEmpateAnio},null,8,["modelValue","options","onInput"])])])]}),_:1}),(0,o.bF)(O,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",i,[(0,o.Lk)("div",l,[(0,o.bF)(g,{columns:n.fields,data:n.rows,selection:"single",config:n.config,context:t,css:{height:"calc(100vh - 200px)"}},null,8,["columns","data","config"])])])]}),_:1})]}),_:1}),(0,o.bF)(C,{css:{"max-width":"700px"},modelValue:n.openModal,"onUpdate:modelValue":e[4]||(e[4]=function(e){return n.openModal=e}),title:"new"===n.action?"Nuevo":"Editar",onSubmit:n.submit},{default:(0,o.k6)(function(){return[(0,o.bF)(b,{class:"col",ref:"form"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",s,[(0,o.Lk)("div",u,[(0,o.bF)(p,{modelValue:n.anio,"onUpdate:modelValue":e[1]||(e[1]=function(e){return n.anio=e}),options:n.anios,label:"Año","option-value":"ANO","option-label":"ANO",onInput:n.filtrarNoEmpateAnio},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",c,[(0,o.bF)(p,{modelValue:n.nivel,"onUpdate:modelValue":e[2]||(e[2]=function(e){return n.nivel=e}),options:n.niveles,label:"Nivel","option-value":"INSTRUCOD","option-label":"INSTRUDES",rules:[n.notNull],onInput:n.cambiarNivel},null,8,["modelValue","options","rules","onInput"])]),(0,o.Lk)("div",d,[(0,o.bF)(p,{modelValue:n.grado,"onUpdate:modelValue":e[3]||(e[3]=function(e){return n.grado=e}),options:n.grados,label:"Grado","option-value":"GRADOCOD","option-label":"GRADODES",rules:[n.notNull],onInput:n.cambiarGrado},null,8,["modelValue","options","rules","onInput"])]),((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(11,function(e){return(0,o.Lk)("div",f,[(0,o.bF)(p,{modelValue:n.cursos["curso".concat(e)],"onUpdate:modelValue":function(t){return n.cursos["curso".concat(e)]=t},options:n.cursos.cursos,label:"Curso ".concat(e),"option-value":"CURSOCOD","option-label":"CURSONOM"},null,8,["modelValue","onUpdate:modelValue","options","label"])])}),64))])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var p=t(76080),O=t.n(p),g=t(45254),v=t.n(g),b=(t(30683),t(52133),t(50310),t(6724),t(83190),t(6123)),C=t(95718),N=(t(89571),{data:function(){return{config:{ACTION:{component:"button",icon:["edit","delete"],edit:function(n){var e=this;return v()(O()().m(function t(){var o;return O()().w(function(t){while(1)switch(t.n){case 0:return e.action="edit",e.openModal=!0,e.anio=n.ANO,t.n=1,e.getInstru();case 1:return e.niveles=t.v,e.nivel=n.INSTRUCOD,t.n=2,e.cambiarNivel();case 2:return e.grado=n.GRADOCOD,t.n=3,e.cambiarGrado();case 3:for(o=0;o<=11;o++)e.cursos["curso".concat(o)]=n["CURSO".concat(o)];case 4:return t.a(2)}},t)}))()},delete:function(n,e){var t=this;return v()(O()().m(function o(){var a,r;return O()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.n=1,t.$confirmar("¿Desea Eliminar? Al eliminar el proceso sera irreversible.","delete");case 1:if(a=o.v,!a){o.n=5;break}return o.p=2,o.n=3,t.$http.delete("api/HyoInstrus/deleteNoempate",{params:{anio:n.ANO,instrucod:n.INSTRUCOD,gradocod:n.GRADOCOD}});case 3:r=o.v,t.rows.splice(t.rows.indexOf(e),1),t.$notify(r.message,"success"),o.n=5;break;case 4:o.p=4,o.v,t.$notify("No ha sido posible eliminar, intente nuevamente","warning");case 5:return o.a(2)}},o,null,[[2,4]])}))()},dense:!0,flat:!0,round:!0}},rows:[],fields:[{name:"INSTRUDES",label:"Nivel",field:"INSTRUDES",align:"left"},{name:"GRADOCOD",label:"Grado",field:"GRADOCOD",align:"center"},{name:"CURSONOM1",label:"Curso 1",field:"CURSONOM1",align:"left"},{name:"CURSONOM2",label:"Curso 2",field:"CURSONOM2",align:"left"},{name:"CURSONOM3",label:"Curso 3",field:"CURSONOM3",align:"left"},{name:"CURSONOM4",label:"Curso 4",field:"CURSONOM4",align:"left"},{name:"CURSONOM5",label:"Curso 5",field:"CURSONOM5",align:"left"},{name:"CURSONOM6",label:"Curso 6",field:"CURSONOM6",align:"left"},{name:"CURSONOM7",label:"Curso 7",field:"CURSONOM7",align:"left"},{name:"CURSONOM8",label:"Curso 8",field:"CURSONOM8",align:"left"},{name:"CURSONOM9",label:"Curso 9",field:"CURSONOM9",align:"left"},{name:"CURSONOM10",label:"Curso 10",field:"CURSONOM10",align:"left"},{name:"CURSONOM11",label:"Curso 11",field:"CURSONOM11",align:"left"},{name:"ACTION",label:"Acción",width:50,field:"ACTION",align:"center"}]}}}),h=t(30640),w=t(16648),S=t(2739),R=t(57668),U={components:{QCardSection:C.A,sieModal:h.A,QSelect:w.A,QForm:S.A,QPage:b.Tu,QCard:b.C$},mixins:[N],data:function(){var n=this;return{buttons:[{icon:"add",label:"Agregar",click:function(){n.action="new",n.clearFields(),n.openModal=!0}}],openModal:!1,anios:[],anio:(0,R["default"])().ano,niveles:[],nivel:"",grados:[],grado:"",cursos:{},action:"new"}},methods:{filtrarNoEmpateAnio:function(n){var e=this;return v()(O()().m(function t(){return O()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getNoEmpate(n);case 1:e.rows=t.v;case 2:return t.a(2)}},t)}))()},notNull:function(n){return!!n||"Este campo es requerido"},clearFields:function(){this.anio=(0,R["default"])().ano,this.nivel="",this.grados=[],this.grado="",this.cursos.cursos=[];for(var n=1;n<=11;n++)this.cursos["curso".concat(n)]=""},submit:function(){var n=this;return v()(O()().m(function e(){var t,o,a;return O()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.n=1,n.$refs.form.validate();case 1:if(t=e.v,!0!==t){e.n=6;break}for(o={ano:n.anio,instrucod:n.nivel,gradocod:n.grado},a=1;a<=11;a++)o["curso".concat(a)]=n.cursos["curso".concat(a)];return e.p=2,e.n=3,n.$http.post("api/HyoInstrus/updateOrInsertNoempate",{request:o});case 3:return n.$notify("registro ".concat("new"===n.action?"agregado":"actualizado"," correctamente"),"success"),e.n=4,n.getNoEmpate();case 4:n.rows=e.v,n.openModal=!1,e.n=6;break;case 5:e.p=5,e.v,n.$notify("No ha sido posible ".concat("new"===n.action?"insertar":"actualizar",", intente nuevamente"),"warning");case 6:return e.a(2)}},e,null,[[2,5]])}))()},getNoEmpate:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={};return n&&(e.anio=n),this.$http.get("api/HyoInstrus/getNoempate",{params:e})},getAnios:function(){return this.$http.get("api/HyoAnos/getAnios")},getInstru:function(){var n=this;return v()(O()().m(function e(){var t,o;return O()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.$http.get("api/HyoInstrus/obtInstru");case 1:return t=e.v,o=t.json,e.a(2,o)}},e)}))()},cambiarNivel:function(){var n=this;return v()(O()().m(function e(){return O()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.getGrado();case 1:n.grados=e.v;case 2:return e.a(2)}},e)}))()},getGrado:function(){var n=this;return v()(O()().m(function e(){var t,o;return O()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.$http.get("api/HyoGradoNivs/getGradosByNivel",{params:{instrucod:n.nivel}});case 1:return t=e.v,o=t.json,e.a(2,o)}},e)}))()},cambiarGrado:function(){var n=this;return v()(O()().m(function e(){return O()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.getCursos();case 1:n.cursos.cursos=e.v.map(function(n){return n.CURSONOM="".concat(n.CURSOCOD,"|").concat(n.CURSONOM),n});case 2:return e.a(2)}},e)}))()},getCursos:function(){return this.$http.get("api/HyoCursos/obtCursos",{params:{ano:this.anio,instrucod:this.nivel,gradocod:this.grado,cursonat:["T"]}})}},created:function(){var n=this;return v()(O()().m(function e(){var t;return O()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.getAnios();case 1:return n.anios=e.v,e.n=2,n.getInstru();case 2:return n.niveles=e.v,e.n=3,n.getNoEmpate();case 3:for(n.rows=e.v,n.cursos["cursos"]=[],t=1;t<=11;t++)n.cursos["curso".concat(t)]="";case 4:return e.a(2)}},e)}))()}},A=t(12807);const M=(0,A.A)(U,[["render",m]]);var I=M}}]);