"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[64082],{64082:function(e,n,r){r.r(n),r.d(n,{default:function(){return C}});var a=r(61758),t={class:"row"},i={class:"col-xs-12"},o={class:"row q-pa-sm q-col-gutter-sm"},s={class:"col-xs-12"},c={class:"col-xs-12"};function d(e,n){var r=this,d=(0,a.g2)("header-btn"),u=(0,a.g2)("sie-table"),l=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-card"),m=(0,a.g2)("q-input"),A=(0,a.g2)("q-form"),p=(0,a.g2)("sie-modal"),w=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(w,{class:"q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(d,{name:"Mantenimiento Unidad",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(l,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",t,[(0,a.Lk)("div",i,[(0,a.bF)(u,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableUnidad",onRowSelected:e.rowSelectUnidad,css:"height:calc(100vh - 150px)",context:r},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,a.bF)(p,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Unidad":"Modificar Unidad",onSubmit:e.saveAcccion},{default:(0,a.k6)(function(){return[(0,a.bF)(A,{ref:"refForm"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",o,[(0,a.Lk)("div",s,[(0,a.bF)(m,{modelValue:e.form.ABREVIATURA,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.ABREVIATURA=n}),label:"Abreviatura *",rules:[e.required]},null,8,["modelValue","rules"])]),(0,a.Lk)("div",c,[(0,a.bF)(m,{modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.DESCRIPCION=n}),label:"Descripción *",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var u=r(76080),l=r.n(u),f=r(45254),m=r.n(f),A=(r(89571),r(6123)),p={data:function(){return{config:{ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,n){var r=this;return m()(l()().m(function e(){return l()().w(function(e){while(1)switch(e.n){case 0:return r.rowUnidad=n,e.n=1,r.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var r=this;return m()(l()().m(function e(){return l()().w(function(e){while(1)switch(e.n){case 0:return r.rowUnidad=n,e.n=1,r.deleteUnidad();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"IDUNIDAD",label:"Código",field:"IDUNIDAD",align:"center",sortable:!0},{name:"ABREVIATURA",label:"Abreviatura",field:"ABREVIATURA",align:"left",sortable:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:80}]}}},w=r(39893),U=r(81288),h=r(2739),g=r(9736),I=r(88567),b=r(95718),v={mixins:[p],components:{QForm:h.A,QInput:g.A,QCard:I.A,QCardSection:b.A,QPage:A.Tu},data:function(){return{required:w.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowUnidad:null,form:{ABREVIATURA:null,DESCRIPCION:null}}},methods:{openAgregar:function(){this.action="create",this.rowUnidad=null,(0,U.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowUnidad?(this.action="update",this.form.ABREVIATURA=this.rowUnidad.ABREVIATURA,this.form.DESCRIPCION=this.rowUnidad.DESCRIPCION,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return m()(l()().m(function n(){var r,a,t;return l()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(r=n.v,r){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:a=n.v,a&&e.createUnidad(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:t=n.v,t&&e.updateUnidad();case 6:return n.a(2)}},n)}))()},rowSelectUnidad:function(e,n){this.rowUnidad=n},createUnidad:function(){var e=this;return m()(l()().m(function n(){var r,a,t,i,o;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/HyoUnidades/createUnidad",{params:e.form});case 1:r=n.v,a=r.result,t=r.message,i={IDUNIDAD:a.IDUNIDAD,ABREVIATURA:e.form.ABREVIATURA,DESCRIPCION:e.form.DESCRIPCION},e.rows.unshift(i),e.openAdd=!1,e.$notify(t,"success"),n.n=3;break;case 2:n.p=2,o=n.v,e.$notify(o.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readUnidad:function(){var e=this;return m()(l()().m(function n(){var r,a;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/HyoUnidades/readUnidad",{params:{}});case 1:r=n.v,e.rows=r,n.n=3;break;case 2:n.p=2,a=n.v,e.$notify(a.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deleteUnidad:function(){var e=this;return m()(l()().m(function n(){var r,a,t,i;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowUnidad){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(r=n.v,!r){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/HyoUnidades/deleteUnidad",{params:{idunidad:e.rowUnidad.IDUNIDAD}});case 4:a=n.v,t=a.message,e.rows.splice(e.rows.indexOf(e.rowUnidad),1),e.rowUnidad=null,e.$notify(t,"success"),n.n=6;break;case 5:n.p=5,i=n.v,e.$notify(i.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateUnidad:function(){var e=this;return m()(l()().m(function n(){var r,a,t,i;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,r=e.$refs.tableUnidad,n.n=1,e.$http.put("api/HyoUnidades/updateUnidad",{idunidad:e.rowUnidad.IDUNIDAD,params:{ABREVIATURA:e.form.ABREVIATURA,DESCRIPCION:e.form.DESCRIPCION}});case 1:a=n.v,t=a.message,e.openAdd=!1,r.updateRow(e.rowUnidad,e.form),e.$notify(t,"success"),n.n=3;break;case 2:n.p=2,i=n.v,e.$notify(i.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){var e=this;return m()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:try{e.readUnidad()}catch(n){e.$notify(n.message,"warning")}case 1:return n.a(2)}},n)}))()}},R=r(12807);const D=(0,R.A)(v,[["render",d]]);var C=D}}]);