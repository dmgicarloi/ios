"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[63964],{63964:function(e,o,a){a.r(o),a.d(o,{default:function(){return Ge}});a(71225),a(56285),a(50310),a(5962),a(83190);var n=a(61758),l={class:"row q-col-gutter-xs"},t={class:"col-xs-12 col-sm-6"},r={class:"row q-col-gutter-sm"},i={class:"col-12"},u={class:"col-xs-12 col-sm-6"},s={class:"col-xs-12 col-sm-6"},c={class:"col-12"},d={class:"col-xs-12 col-sm-6"},m={class:"row q-col-gutter-sm"},f={class:"col-xs-12 col-sm-6"},p={class:"col-xs-12 col-sm-6"},b={class:"col-xs-12 col-sm-6"},v={class:"col-xs-12 col-sm-6"},g={class:"col-12"},h={class:"row q-gutter-sm q-py-sm justify-start items-start"},A={class:"row q-pa-sm"},V={class:"col-12"},E={class:"row q-pa-sm q-col-gutter-sm"},O={class:"col-xs-12"},D={class:"col-xs-12"},S={class:"col-xs-12"},w={class:"row q-pa-sm q-col-gutter-sm"},M={class:"col-xs-12"},C={class:"col-xs-12"},L={class:"col-xs-12"},R={class:"col-xs-12"},F={class:"row q-pa-sm q-col-gutter-sm"},T={class:"col-xs-12"},k={class:"col-xs-12"},U={class:"col-xs-12"},N={class:"col-xs-12"},y={class:"col-xs-12"};function P(e,o){var a=this,P=(0,n.g2)("header-btn"),$=(0,n.g2)("q-select"),x=(0,n.g2)("q-input"),I=(0,n.g2)("q-card-section"),q=(0,n.g2)("q-separator"),_=(0,n.g2)("sie-table"),G=(0,n.g2)("q-btn"),Q=(0,n.g2)("q-card"),Y=(0,n.g2)("sie-modal"),B=(0,n.g2)("sie-date"),X=(0,n.g2)("cambiar-salon"),z=(0,n.g2)("observaciones"),J=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(J,{class:"q-pa-sm academico-registro-situacion-alumno sie-flat"},{default:(0,n.k6)(function(){return[(0,n.bF)(Q,null,{default:(0,n.k6)(function(){return[(0,n.bF)(P,{name:"Situación del Estudiante",buttons:e.buttons,"max-buttons":e.maxButtons},null,8,["buttons","max-buttons"]),(0,n.bF)(I,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[(0,n.Lk)("div",t,[(0,n.Lk)("div",r,[(0,n.Lk)("div",i,[(0,n.bF)($,{class:"q-ma-none","use-input":"","hide-selected":"","fill-input":"",label:"Salón",type:"outlined","option-value":"value","option-label":"label",modelValue:e.nemo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.nemo=o}),onFilter:e.filter,options:e.data.salones,onInput:e.selectSalon},null,8,["modelValue","onFilter","options","onInput"])]),(0,n.Lk)("div",u,[(0,n.bF)(x,{label:"Nivel",modelValue:e.form.nivel,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.form.nivel=o}),disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",s,[(0,n.bF)(x,{label:"Turno",modelValue:e.form.turno,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.turno=o}),disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",c,[(0,n.bF)(x,{label:"Responsable",modelValue:e.form.responsable,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.responsable=o}),disable:""},null,8,["modelValue"])])])]),(0,n.Lk)("div",d,[(0,n.Lk)("div",m,[(0,n.Lk)("div",f,[(0,n.bF)(x,{label:"Grado",modelValue:e.form.grado,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.form.grado=o}),disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",p,[(0,n.bF)(x,{label:"Sección",modelValue:e.form.seccion,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.seccion=o}),disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",b,[(0,n.bF)(x,{label:"Año",modelValue:e.form.anio,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.form.anio=o}),disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",v,[(0,n.bF)(x,{label:"Cant.Alu",modelValue:e.form.cantidadAlumno,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.form.cantidadAlumno=o}),disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",g,[(0,n.bF)(x,{label:"Alumno",modelValue:e.form.alumno,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.form.alumno=o}),disable:""},null,8,["modelValue"])])])])])]}),_:1}),(0,n.bF)(q),(0,n.bF)(I,null,{default:(0,n.k6)(function(){return[e.dataAlumnos.length>0?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(_,{selection:"single","save-cells":"",permiso:"> 1",css:"height: calc(100vh - 290px)",ref:"table",onRowSelected:e.rowSelected,columns:e.columns,data:e.dataAlumnos,config:e.config,context:a},null,8,["onRowSelected","columns","data","config"]),(0,n.Lk)("div",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tipoEstudiante,function(o,a){return(0,n.uX)(),(0,n.Wv)(G,{class:"full-height text-black text-h3",style:{"font-size":"12px"},dense:"","no-caps":"",size:"sm",label:o.label,color:o.color,icon:o.icon,onClick:function(n){return e.actionEstados(a,o)}},null,8,["label","color","icon","onClick"])}),256))])],64)):(0,n.Q3)("v-if",!0)]}),_:1})]}),_:1}),(0,n.bF)(Y,{modelValue:e.openModalMatriculados,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.openModalMatriculados=o}),title:"Asignar Alumnnos a Grupos",onSubmit:e.agregarMatriculados},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",A,[(0,n.Lk)("div",V,[(0,n.bF)(_,{selection:"multiple",css:"height: calc(100vh - 290px",ref:"matriculados",columns:e.columnsMatriculados,data:e.dataMatriculados,config:e.configMatriculados},null,8,["columns","data","config"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(Y,{modelValue:e.modalFallecidos,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.modalFallecidos=o}),title:"Fallecimiento del Alumno",onSubmit:e.saveFallecido,loading:e.loading},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",E,[(0,n.Lk)("div",O,[(0,n.bF)(x,{modelValue:e.formFallecido.name,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.formFallecido.name=o}),label:"Alumno",disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",D,[(0,n.bF)(B,{modelValue:e.formFallecido.fNac,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.formFallecido.fNac=o}),placeholder:"Fecha de Fallecimiento"},null,8,["modelValue"])]),(0,n.Lk)("div",S,[(0,n.bF)(x,{modelValue:e.formFallecido.observacion,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.formFallecido.observacion=o}),type:"textarea",counter:"",label:"Observación"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit","loading"]),(0,n.bF)(Y,{modelValue:e.modalRetirado,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.modalRetirado=o}),title:"Retiro del Alumno",onSubmit:e.saveRetirados,loading:e.loading},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",w,[(0,n.Lk)("div",M,[(0,n.bF)(x,{modelValue:e.formRetirados.name,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.formRetirados.name=o}),label:"Alumno",disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",C,[(0,n.bF)($,{type:"outlined",modelValue:e.formRetirados.motivo,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.formRetirados.motivo=o}),options:e.motivos,"option-value":"SECUCOD","option-label":"SECUDES",label:"Seleccione Motivo"},null,8,["modelValue","options"])]),(0,n.Lk)("div",L,[(0,n.bF)(B,{modelValue:e.formRetirados.fecret,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.formRetirados.fecret=o}),placeholder:"Fecha de Retiro"},null,8,["modelValue"])]),(0,n.Lk)("div",R,[(0,n.bF)(x,{modelValue:e.formRetirados.observacion,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.formRetirados.observacion=o}),type:"textarea",counter:"",label:"Observación"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit","loading"]),(0,n.bF)(Y,{modelValue:e.modalTraslado,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.modalTraslado=o}),title:"Traslado del alumno",loading:e.loading,onSubmit:e.saveTraslado},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",F,[(0,n.Lk)("div",T,[(0,n.bF)(x,{modelValue:e.formTraslado.name,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.formTraslado.name=o}),label:"Alumno",disable:""},null,8,["modelValue"])]),(0,n.Lk)("div",k,[(0,n.bF)(B,{modelValue:e.formTraslado.fecsal,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.formTraslado.fecsal=o}),placeholder:"Fecha de Traslado"},null,8,["modelValue"])]),(0,n.Lk)("div",U,[(0,n.bF)(x,{modelValue:e.formTraslado.colegioTraslado,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.formTraslado.colegioTraslado=o}),label:"Colegio a Trasladar"},null,8,["modelValue"])]),(0,n.Lk)("div",N,[(0,n.bF)($,{type:"outlined",modelValue:e.formTraslado.motivo,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.formTraslado.motivo=o}),options:e.motivosTraslado,"option-value":"SECUCOD","option-label":"SECUDES",label:"Seleccione Motivo"},null,8,["modelValue","options"])]),(0,n.Lk)("div",y,[(0,n.bF)(x,{modelValue:e.formTraslado.observacion,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.formTraslado.observacion=o}),type:"textarea",counter:"",label:"Observación",maxlength:"200"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","loading","onSubmit"]),(0,n.bF)(X,{modelValue:e.openModalCambiarSalon,"onUpdate:modelValue":o[25]||(o[25]=function(o){return e.openModalCambiarSalon=o}),dataAlumno:e.currentRow||{},onComplete:e.complete},null,8,["modelValue","dataAlumno","onComplete"]),(0,n.bF)(z,{modelValue:e.openModelObservaciones,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.openModelObservaciones=o}),params:e.paramsObservaciones},null,8,["modelValue","params"])]}),_:1})}var $=a(76080),x=a.n($),I=a(45254),q=a.n(I),_=a(8445),G=a.n(_),Q=(a(30683),a(52133),a(10239),a(6724),a(70199),a(515),a(7346),a(6123)),Y=a(88567),B=a(95718),X=a(53380),z=a(16648),J=a(9736),H=a(11654),W=a(33777),j=a(57668),K=a(95655),Z=a(30640),ee={class:"row q-pa-sm q-col-gutter-sm"},oe={class:"col-12"},ae={class:"col-12"},ne={class:"col-12"},le={class:"col-12"},te={class:"col-xs-12 col-sm-6"},re={class:"col-xs-12 col-sm-6"},ie={class:"col-xs-12 col-sm-6"},ue={class:"col-xs-12 col-sm-6"},se={key:0,class:"col-xs-12 col-sm-6"},ce={key:1,class:"col-xs-12 col-sm-6"};function de(e,o){var a=(0,n.g2)("q-input"),l=(0,n.g2)("q-select"),t=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.Wv)(t,{modelValue:e.openModal,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.openModal=o}),title:e.title,onSubmit:e.cambiarSalon,css:{maxWidth:"768px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ee,[(0,n.Lk)("div",oe,[(0,n.bF)(a,{modelValue:e.salon,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.salon=o}),label:"Salón",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",ae,[(0,n.bF)(a,{modelValue:e.anio,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.anio=o}),label:"Año",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",ne,[(0,n.bF)(a,{modelValue:e.alumno,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.alumno=o}),label:"Alumno",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",le,[(0,n.bF)(l,{modelValue:e.nemo,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.nemo=o}),options:e.salones,label:"Salón",onInput:e.seleccionarSalon},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",te,[(0,n.bF)(a,{modelValue:e.instru,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.instru=o}),label:"Instrucción",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",re,[(0,n.bF)(l,{modelValue:e.turno,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.turno=o}),readonly:"",options:e.turnos,label:"Turno","option-value":"TURNOCOD","option-label":"TURNODES"},null,8,["modelValue","options"])]),(0,n.Lk)("div",ie,[(0,n.bF)(a,{modelValue:e.grado,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.grado=o}),label:"Grado",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",ue,[(0,n.bF)(l,{modelValue:e.seccion,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.seccion=o}),readonly:"",options:e.secciones,label:"Sección","option-value":"SECCIONCOD","option-label":"SECCIONDES"},null,8,["modelValue","options"])]),e.usaCupos?((0,n.uX)(),(0,n.CE)("div",se,[(0,n.bF)(a,{modelValue:e.alucanti2,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.alucanti2=o}),label:"Cant. Alu",readonly:""},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.usaCupos?((0,n.uX)(),(0,n.CE)("div",ce,[(0,n.bF)(a,{modelValue:e.cupos,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.cupos=o}),label:"Cupos",readonly:""},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","title","onSubmit"])}var me=a(80660),fe=a(81288),pe={emits:["update:modelValue","input","complete"],props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Cambiar de Salón"},dataAlumno:{type:Object,default:function(){return{}}}},components:{sieModal:Z.A,QInput:J.A,QSelect:z.A},computed:{openModal:{set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)},get:function(){return this.modelValue}},salon:function(){return this.dataAlumno.NEMO},anio:function(){return(0,j["default"])().ano},alumno:function(){return this.dataAlumno.NOMCOMP}},data:function(){return{instru:"",grado:"",aula:"",salones:[],nemo:"",turnos:[],turno:"",secciones:[],seccion:"",anioCambio:"",usaCupos:!1,alucanti2:0,cupos:0}},methods:{seleccionarSalon:function(e){var o=this;return q()(x()().m(function a(){var n;return x()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,o.$http.get("api/SalonController/getDataRum",{params:{nemo:e}});case 1:n=a.v,o.turno=n.TURNOCOD,o.seccion=n.SECCIONCOD,o.anioCambio=n.ANO,o.usaCupos&&(o.alucanti2=n.TOTAL,o.cupos=n.CUPOS);case 2:return a.a(2)}},a)}))()},tienenNotas:function(){var e=this;return q()(x()().m(function o(){var a,n,l,t;return x()().w(function(o){while(1)switch(o.n){case 0:return a=e.anioCambio,n=e.dataAlumno.ID_PERSONA,l={ano:a,id_personas:[n]},o.n=1,e.$http.post("api/SalonAlController/verificaTienenNotas",{params:l});case 1:return t=o.v,o.a(2,t)}},o)}))()},valEstructura:function(){var e=this;return q()(x()().m(function o(){var a,n,l,t,r,i;return x()().w(function(o){while(1)switch(o.n){case 0:return a=!0,n='<div style="overflow-y: scroll;max-height:300px"><b>Se encontraron diferencias en Salones, ¿DESEA CONTINUAR?</b></br></br>',l=e.anioCambio,t=[e.dataAlumno.NEMO,e.nemo],r={ano:l,rowNEMO:t},o.n=1,e.$http.post("api/SalonController/validarEstructuraPorNemo",{params:r});case 1:return i=o.v,i.length>0&&(a=!1,i.map(function(e){n+="<p>".concat(e.msj,"</p></br>")})),n+="</div>",o.a(2,{html:n,valEstructura:a})}},o)}))()},spMessageError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.indexOf("SP_MOVER_CONDUCTA_SALON")>-1?this.$notify("Los criterios del registro de conducta no coinciden.","warning"):e.indexOf("SP_MOVER_NOTAS_SALON")>-1&&this.$notify("Hay indices duplicados, el proceso no puede continuar.","warning"),this.$q.loading.hide()},cambiarSalon:function(){var e=this;return q()(x()().m(function o(){var a,n,l,t,r,i,u,s,c;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.nemo){o.n=1;break}return e.$notify("Debe seleccionar un salón.","warning"),o.a(2);case 1:if(!(e.usaCupos&&e.alucanti2>=e.cupos)){o.n=2;break}return e.$notify("Debe verificar los cupos registrados en el salón.","warning"),o.a(2);case 2:return a=!1,o.n=3,e.tienenNotas();case 3:if(n=o.v,!n){o.n=6;break}return o.n=4,e.valEstructura();case 4:if(l=o.v,t=l.html,r=l.valEstructura,!1!==r){o.n=6;break}return o.n=5,e.$confirmar(t,"info",!0);case 5:if(a=o.v,a){o.n=6;break}return o.a(2);case 6:return o.n=7,e.$http.get("api/situacionEstudianteController/getTotalGruposPorAlumno",{params:{id_persona:e.dataAlumno.ID_PERSONA,nemo:e.dataAlumno.NEMO}});case 7:if(i=o.v,a=!1,!(i.length>0)){o.n=9;break}return o.n=8,e.$confirmar("El alumno tiene grupos relacionados, ¿DESEA CONTINUAR?","info");case 8:a=o.v,o.n=10;break;case 9:a=!0;case 10:if(!a){o.n=14;break}return o.p=11,e.$q.loading.show(),u={alucod:e.dataAlumno.ALUCOD,id_persona:e.dataAlumno.ID_PERSONA,nomcomp:e.dataAlumno.NOMCOMP,nemo:e.dataAlumno.NEMO,newnemo:e.nemo,ano:e.anioCambio},o.n=12,e.$http.post("api/salonAlController/cambioSalonAlumno",{params:u});case 12:s=o.v,e.$notify(s.message,"success"),e.openModal=!1,e.$emit("complete"),e.$q.loading.hide(),o.n=14;break;case 13:o.p=13,c=o.v,e.$notify(c.message,"warning"),e.$q.loading.hide();case 14:return o.a(2)}},o,null,[[11,13]])}))()},getDatosCambiarSalon:function(){var e=arguments,o=this;return q()(x()().m(function a(){var n,l,t,r,i,u,s;return x()().w(function(a){while(1)switch(a.n){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:{},a.n=1,o.$http.get("api/situacionEstudianteController/getCambiarSalon",{params:{nemo:n.NEMO}});case 1:l=a.v,t=l.salones,r=l.seccion,i=l.turno,u=l.instru,s=l.gradoniv,o.salones=t,o.turnos=i,o.secciones=r,o.instru=u,o.grado=s;case 2:return a.a(2)}},a)}))()}},watch:{dataAlumno:function(e){var o=this;return q()(x()().m(function a(){return x()().w(function(a){while(1)switch(a.n){case 0:if(!e.NEMO){a.n=1;break}return o.nemo="",o.turno="",o.seccion="",a.n=1,o.getDatosCambiarSalon(e);case 1:return a.a(2)}},a)}))()}},created:function(){var e=this;return q()(x()().m(function o(){var a,n;return x()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,(0,fe.constantes)(["M_CUPOS_SALON"]);case 1:a=o.v,n=a.M_CUPOS_SALON,e.usaCupos=n||!1;case 2:return o.a(2)}},o)}))()}},be=a(12807);const ve=(0,be.A)(pe,[["render",de]]);var ge=ve,he={class:"row q-pa-sm q-col-gutter-sm"},Ae={class:"col-xs-12"},Ve={class:"col-xs-12"},Ee={class:"col-xs-12"},Oe={class:"col-xs-12 col-sm-6"},De={class:"col-xs-12 col-sm-6"},Se={class:"col-xs-12 col-sm-6"},we={class:"col-xs-12 col-sm-6"};function Me(e,o){var a=(0,n.g2)("q-input"),l=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.Wv)(l,{modelValue:e.openModal,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.openModal=o}),title:e.title,onSubmit:e.saveObservacion},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",he,[(0,n.Lk)("div",Ae,[(0,n.bF)(a,{modelValue:e.form.NOMCOMP,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.form.NOMCOMP=o}),readonly:"",label:"Alumno"},null,8,["modelValue"])]),(0,n.Lk)("div",Ve,[(0,n.bF)(a,{modelValue:e.form.DETALLE,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.form.DETALLE=o}),label:"Texto del Acta final"},null,8,["modelValue"])]),(0,n.Lk)("div",Ee,[(0,n.bF)(a,{modelValue:e.form.DETALLE2,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.DETALLE2=o}),label:"D.D. Acta Eval. Final"},null,8,["modelValue"])]),(0,n.Lk)("div",Oe,[(0,n.bF)(a,{modelValue:e.form.DETALLE4,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.DETALLE4=o}),label:"D.D. Evaluación Postergada"},null,8,["modelValue"])]),(0,n.Lk)("div",De,[(0,n.bF)(a,{modelValue:e.form.DETALLE5,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.form.DETALLE5=o}),label:"D.D. Recuperación"},null,8,["modelValue"])]),(0,n.Lk)("div",Se,[(0,n.bF)(a,{modelValue:e.form.NUMGRUEVP,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.NUMGRUEVP=o}),type:"number",label:"# Grupo de Eval. Postergada"},null,8,["modelValue"])]),(0,n.Lk)("div",we,[(0,n.bF)(a,{modelValue:e.form.NUMGRUEVM,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.form.NUMGRUEVM=o}),type:"number",label:"# Grupo de Recuperación"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","title","onSubmit"])}var Ce={emits:["update:modelValue","input"],props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Observaciones registradas en el Acta de evaluación"},params:{type:Object,default:function(){return{alucod:null,nemo:null}}}},components:{sieModal:Z.A,QInput:J.A},computed:{openModal:{set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)},get:function(){return this.modelValue}}},data:function(){return{form:{NOMCOMP:"",DETALLE:"",DETALLE2:"",DETALLE4:"",DETALLE5:"",NUMGRUEVP:"",NUMGRUEVM:""}}},methods:{saveObservacion:function(){var e=this;return q()(x()().m(function o(){var a,n;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.put("api/SituacionEstudianteController/putObservaciones",{nemo:e.params.nemo,alucod:e.params.alucod,params:{DETALLE:e.form.DETALLE||"",DETALLE2:e.form.DETALLE2||"",DETALLE4:e.form.DETALLE4||"",DETALLE5:e.form.DETALLE5||"",NUMGRUEVP:e.form.NUMGRUEVP||null,NUMGRUEVM:e.form.NUMGRUEVM||null}});case 1:a=o.v,n=a.message,e.$notify(n,"success"),e.openModal=!1,o.n=3;break;case 2:o.p=2,o.v,e.$notify("No ha sido posible actualizar.","warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},getDataForm:function(){var e=arguments,o=this;return q()(x()().m(function a(){var n,l;return x()().w(function(a){while(1)switch(a.n){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:{},a.n=1,o.$http.get("api/SalonAlController/getDataObservacion",{params:{nemo:n.nemo,alucod:n.alucod}});case 1:l=a.v,o.form=l;case 2:return a.a(2)}},a)}))()}},watch:{params:{handler:function(e){e.alucod&&e.nemo&&this.getDataForm(e)}}}};const Le=(0,be.A)(Ce,[["render",Me]]);var Re=Le,Fe=(a(39866),[{label:"Pagante",value:"P"},{label:"Gratuito",value:"G"},{label:"Becado",value:"B"}]),Te={F:{label:"Fallecido",color:"purple",icon:"fallecido",tooltip:"Fallecido"},V:{label:"Vigente",color:"yellow-13",icon:"estudiante",tooltip:"Vigente"},P:{label:"Promovido",color:"green-8",icon:"estudiante",tooltip:"Promovido"},S:{label:"Requiere Recuperación",color:"lime-10",icon:"evaluacion_post",tooltip:"Requiere Recuperación"},J:{label:"Repitente",color:"red",icon:"estudiante",tooltip:"Repitente"},R:{label:"Retirado",color:"grey",icon:"estudiante",tooltip:"Retirado"},T:{label:"Trasladado",color:"blue-4",icon:"translado",tooltip:"Trasladado"},M:{label:"Evaluación Postergada",color:"orange",icon:"recuperacion",tooltip:"Evaluación Postergada"}},ke={P:{label:"Promovido",color:"green-8",icon:"estudiante",tooltip:"Promovido"},J:{label:"Permanencia",color:"red",icon:"estudiante",tooltip:"Permanencia"},S:{label:"Recuperación Pedagógica",color:"lime-10",icon:"evaluacion_post",tooltip:"Recuperación Pedagógica"},V:{label:"Vigente",color:"yellow-13",icon:"estudiante",tooltip:"Vigente"},F:{label:"Fallecido",color:"purple",icon:"fallecido",tooltip:"Fallecido"},R:{label:"Retirado",color:"grey",icon:"estudiante",tooltip:"Retirado"},T:{label:"Trasladado",color:"blue-4",icon:"translado",tooltip:"Trasladado"},M:{label:"Evaluación Postergada",color:"orange",icon:"recuperacion",tooltip:"Evaluación Postergada"}},Ue={computed:{tipoEstudiante:function(){return parseInt(this.sie.ano)>=2023?(2023===parseInt(this.sie.ano)&&(ke.M=Te.M),ke):Te}},data:function(){return{config:{ESTADO:{component:"button",class:"text-black",iconIf:function(){return this.tipoEstudiante},round:!0},ESTADOD:{component:"button",class:"text-black",round:!0,iconIf:function(){return this.tipoEstudiante}},CONDICION:{component:"select",label:"Seleccione",options:Fe},NUMORD:{component:"input",type:"number",autoSelect:!0,maxlength:2},FECMAT:{component:"date",format:"DD/MM/YYYY"},FECRET:{component:"date",format:"DD/MM/YYYY",edit:!1},PADDEF:{renderHtml:function(e,o,a){return a.checkbox({value:e.PADDEF,trueValue:"S"})},renderAction:function(e,o){["N",null,void 0].includes(e.PADDEF)?o.PADDEF="S":o.PADDEF="N"}},MADDEF:{renderHtml:function(e,o,a,n){return a.checkbox({value:e.MADDEF,trueValue:"S"})},renderAction:function(e,o){["N",null,void 0].includes(e.MADDEF)?o.MADDEF="S":o.MADDEF="N"}},INCLUSIVO:{renderHtml:function(e,o,a){return a.checkbox({value:e.INCLUSIVO,trueValue:"1"})},renderAction:function(e,o){["0",null,void 0].includes(e.INCLUSIVO)?o.INCLUSIVO="1":o.INCLUSIVO="0"}},DIPLOMA:{renderHtml:function(e,o,a){return a.checkbox({value:e.DIPLOMA,trueValue:"1"})},renderAction:function(e,o){["0",null,void 0].includes(e.DIPLOMA)?o.DIPLOMA="1":o.DIPLOMA="0"}}},estados:Fe,dataAlumnos:[],columns:[{name:"ESTADO",label:"Fin.",field:"ESTADO"},{name:"ESTADOD",label:"Dic.",field:"ESTADOD"},{name:"ALUCOD",label:"Código",field:"ALUCOD"},{name:"NUMORD",label:"Nro. Orden",field:"NUMORD"},{name:"NOMCOMP",label:"Apellidos y Nombres",field:"NOMCOMP",align:"left"},{name:"CONDICION",label:"Condición",field:"CONDICION"},{name:"FECMAT",label:"Fech. Matrícula",field:"FECMAT"},{name:"FECRET",label:"Fech. Retiro",field:"FECRET"},{name:"PADDEF",label:"No Oficial",field:"PADDEF",align:"center"},{name:"MADDEF",label:"Mat. Condicional",field:"MADDEF",align:"center"}]}}},Ne=[{label:"Vigente",value:"V"},{label:"Ex-Alumno",value:"E"},{label:"Promovido",value:"P"},{label:"Retirado",value:"R"},{label:"Trasladado",value:"T"},{label:"Repitente",value:"J"},{label:"Req. Recuperación",value:"S"},{label:"Eval. Posterg.",value:"M"},{label:"Activo",value:"A"},{label:"Matriculados-Ret.",value:"MR"},{label:"Por matricular",value:"X"},{label:"Desistió",value:"D"},{label:"Fallecido",value:"F"}],ye={data:function(){return{configMatriculados:{ESTADO:{component:"select",edit:!1,options:Ne}},columnsMatriculados:[{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"},{name:"ALUCOD",label:"Código",field:"ALUCOD",align:"center"},{name:"NOMCOMP",label:"Apellido y Nombres",field:"NOMCOMP",align:"left"}],dataMatriculados:[]}}},Pe=a(51082),$e=a(33001),xe=a(18105),Ie={salon:"Debe seleccionar un salón.",alumno:"Debe seleccionar un alumno.",cambios:"No se han realizado cambios."},qe={components:{sieDate:Pe.A,sieTable:W.A,QCard:Y.A,QCardSection:B.A,QSeparator:X.A,QSelect:z.A,QInput:J.A,QBtn:H.A,sieModal:Z.A,cambiarSalon:ge,observaciones:Re,QPage:Q.Tu},mixins:[Ue,ye],data:function(){return{modalFallecidos:!1,modalRetirado:!1,modalTraslado:!1,maxButtons:{0:[0,555],1:[555,700],2:[700]},buttons:[{label:"Agregar Alumno",icon:"plus",click:this.createAlumno,permiso:"> 1"},{label:"Guardar",icon:"save",click:this.updateAlumno,permiso:"> 1"},{label:"Imprimir",icon:"print",click:this.print,permiso:"> 0"},{label:"Quitar Matrícula",icon:"delete",click:this.removeMatricula,permiso:"> 2"},{label:"Cambiar de Salón",icon:"swap_horiz",click:this.changeSalon},{label:"Observación",icon:"remove_red_eye",click:this.observacion,permiso:"> 2"},{label:"Promoción de Salón",icon:"school",click:this.promocionSalon,permiso:"> 2"}],data:{},dataSalones:[],sie:(0,j["default"])(),nemo:"",form:{grado:"",seccion:"",nivel:"",turno:"",anio:"",cantidadAlumno:"",responsable:"",alumno:""},currentRow:null,periodoCierre:"",openModalMatriculados:!1,openModalCambiarSalon:!1,openModelObservaciones:!1,paramsObservaciones:{},formFallecido:{name:"",fNac:null,observacion:""},motivos:[],motivosTraslado:[],formRetirados:{name:"",fecret:null,observacion:"",motivo:""},formTraslado:{name:"",fecsal:null,observacion:"",motivo:"",colegioTraslado:""},loading:!1}},methods:{filter:function(e,o){var a=this;o(function(){var o=G()(a.dataSalones);a.data.salones=(0,$e.filterArray)(e,{field:"label",list:o})})},saveTraslado:function(){var e=this;return q()(x()().m(function o(){var a;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.formTraslado.fecsal){o.n=1;break}return e.$alert("Seleccione fecha","warning"),o.a(2);case 1:return a={alucod:e.currentRow.ALUCOD,nemo:e.nemo,estado:"T",estadod:"T",nameAluRet:e.currentRow.NOMCOMP,fecsal:e.formTraslado.fecsal,coltraslado:e.formTraslado.colegioTraslado,motsalcod:e.formTraslado.motivo,observacion:e.formTraslado.observacion},e.loading=!0,o.p=2,o.n=3,e.$http.put("api/SituacionEstudianteController/putTraslado",{params:a});case 3:e.modalTraslado=!1,e.selectSalon(e.nemo),e.$notify("Proceso Finalizado","success"),o.n=5;break;case 4:o.p=4,o.v,e.$notify("No ha sido posible completar el proceso.","warning");case 5:e.loading=!1;case 6:return o.a(2)}},o,null,[[2,4]])}))()},saveRetirados:function(){var e=this;return q()(x()().m(function o(){var a;return x()().w(function(o){while(1)switch(o.n){case 0:if(e.formRetirados.fecret){o.n=1;break}return e.$alert("Seleccione fecha","warning"),o.a(2);case 1:return a={alucod:e.currentRow.ALUCOD,nemo:e.nemo,estado:"R",estadod:"R",fecret:(0,xe.Ay)(new Date(e.formRetirados.fecret),"DD.MM.YYYY"),motsalcod:e.formRetirados.motivo,observacion:e.formRetirados.observacion,nameAluRet:e.currentRow.NOMCOMP,report_cod:"retirados",repcod:"nuevoReporteAcademico"},o.n=2,e.$http.post((0,me.getOrigin)()+"/webservice/reportes/reporte?sie-token=".concat((0,me.getToken)()),a);case 2:e.modalRetirado=!1,e.selectSalon(e.nemo),e.$notify("Proceso Finalizado","success");case 3:return o.a(2)}},o)}))()},saveFallecido:function(){var e=this;return q()(x()().m(function o(){var a;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.formFallecido.fNac){o.n=1;break}return e.$alert("Debe especificar la Fecha de fallecimiento","warning"),o.a(2);case 1:return a={estado:"F",estadod:"F",nemo:e.nemo,alucod:e.currentRow.ALUCOD,fecret:e.formFallecido.fNac,observacion:e.formFallecido.observacion},e.loading=!0,o.p=2,o.n=3,e.$http.put("api/SituacionEstudianteController/putFallecido",{params:a});case 3:e.modalFallecidos=!1,e.selectSalon(e.nemo),e.$notify("Proceso Finalizado","success"),o.n=5;break;case 4:o.p=4,o.v,e.$notify("No ha sido posible completar el proceso.","warning");case 5:e.loading=!1;case 6:return o.a(2)}},o,null,[[2,4]])}))()},actionEstados:function(e){var o=this;return q()(x()().m(function a(){var n,l,t;return x()().w(function(a){while(1)switch(a.n){case 0:if(o.currentRow){a.n=1;break}return o.$alert("Seleccione un registro","warning"),a.a(2);case 1:if("F"!==e){a.n=3;break}return o.modalFallecidos=!0,a.n=2,o.fallecidos();case 2:return n=a.v,o.formFallecido.name=n.NOMCOMP,o.formFallecido.fNac=n.FECRET,o.formFallecido.observacion=n.DETALLE,a.a(2);case 3:if("R"!==e){a.n=5;break}return o.modalRetirado=!0,a.n=4,o.retirados();case 4:return l=a.v,o.motivos=l.MOTIVOS,o.formRetirados.name=l.NOMCOMP,o.formRetirados.fecret=l.FECRET,o.formRetirados.observacion=l.DETALLE,o.formRetirados.motivo=l.MOTSALCOD,a.a(2);case 5:if("T"!==e){a.n=7;break}return o.modalTraslado=!0,a.n=6,o.traslado();case 6:return t=a.v,o.motivosTraslado=t.MOTIVOS,o.formTraslado.name=t.NOMCOMP,o.formTraslado.fecsal=t.FECSAL,o.formTraslado.colegioTraslado=t.COLTRASLADO,o.formTraslado.observacion=t.DETALLE,o.formTraslado.motivo=t.MOTSALCOD,a.a(2);case 7:"V"===e?(o.currentRow.ESTADO="V",o.currentRow.ESTADOD="V"):"P"===e?(o.currentRow.ESTADO="P",o.currentRow.ESTADOD="P"):"S"===e?(o.currentRow.ESTADO="S",o.currentRow.ESTADOD="S"):"J"===e?(o.currentRow.ESTADO="J",o.currentRow.ESTADOD="J"):"M"===e&&(o.currentRow.ESTADO="M",o.currentRow.ESTADOD="M"),o.$refs.table.rowsUpdate(o.currentRow);case 8:return a.a(2)}},a)}))()},retirados:function(){return this.$http.get("api/SituacionEstudianteController/getInfoRetiro",{params:{nemo:this.nemo,alucod:this.currentRow.ALUCOD,estado:"R"}})},traslado:function(){return this.$http.get("api/SituacionEstudianteController/getInfoRetiro",{params:{nemo:this.nemo,alucod:this.currentRow.ALUCOD,estado:"T"}})},fallecidos:function(){return this.$http.post("api/SituacionEstudianteController/postAlumnosPorEstado",{params:{nemo:this.nemo,alucod:this.currentRow.ALUCOD,estado:"F"}})},agregarMatriculados:function(){var e=this;return q()(x()().m(function o(){var a,n,l,t,r;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:if(a=e.$refs.matriculados.rowsSelected(["ALUCOD"]),!(a.length<1)){o.n=1;break}return e.$notify("Debe seleccionar al menos un alumno.","warning"),o.a(2);case 1:return o.p=1,o.n=2,e.$http.put("api/SituacionEstudianteController/putGrabarAlumnoMatriculado",{nemo:e.nemo,alucods:a});case 2:n=o.v,l=n.message,e.$notify(l,"success"),e.selectSalon(e.nemo),e.openModalMatriculados=!1,o.n=4;break;case 3:o.p=3,r=o.v,t=r.error,e.$notify(t.message,"warning");case 4:return o.a(2)}},o,null,[[1,3]])}))()},rowSelected:function(e,o){var a=this;return q()(x()().m(function n(){return x()().w(function(n){while(1)switch(n.n){case 0:a.currentRow=o,a.form.alumno=e.NOMCOMP;case 1:return n.a(2)}},n)}))()},createAlumno:function(){var e=this;return q()(x()().m(function o(){var a;return x()().w(function(o){while(1)switch(o.n){case 0:if(e.nemo){o.n=1;break}return e.$notify(Ie.salon,"warning"),o.a(2);case 1:return o.n=2,e.$http.get("api/situacionEstudianteController/getMatriculados",{params:{nemo:e.nemo}});case 2:a=o.v,e.dataMatriculados=a,e.openModalMatriculados=!0;case 3:return o.a(2)}},o)}))()},updateAlumno:function(){var e=this;return q()(x()().m(function o(){var a,n,l,t,r;return x()().w(function(o){while(1)switch(o.n){case 0:if(e.nemo){o.n=1;break}return e.$notify(Ie.salon,"warning"),o.a(2);case 1:return o.n=2,e.$confirmar("Desea Modificar Registros","info");case 2:if(a=o.v,!0!==a){o.n=5;break}if(n=e.$refs.table.rowsUpdate(),!(n.length<1)){o.n=3;break}return e.$notify(Ie.cambios,"warning"),o.a(2);case 3:return e.$refs.table.rowsUpdateClear(),l=n.map(function(e){return e.ALUCOD}),o.n=4,e.$http.put("api/situacionEstudianteController/putAlumnosSituacionAlumno",{data:n,alucods:l});case 4:t=o.v,r=t.message,e.$notify(r,"success");case 5:return o.a(2)}},o)}))()},complete:function(){this.selectSalon(this.nemo)},removeMatricula:function(){var e=this;this.nemo?this.currentRow?this.$confirm("Al eliminar, el proceso sera irreversible.","warning").onOk(q()(x()().m(function o(){var a,n;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get((0,me.getOrigin)()+"/webservice/reportes/reporte",{params:{alucod:e.currentRow.ALUCOD,nemo:e.nemo,repcod:"nuevoReporteAcademico",report_cod:"quitarMatricula","sie-token":(0,me.getToken)()}});case 1:a=o.v,n=a.message,e.$notify(n,"success"),e.selectSalon(e.nemo),o.n=3;break;case 2:o.p=2,o.v,e.$notify("No se puede Eliminar, tiene notas Registradas","warning");case 3:return o.a(2)}},o,null,[[0,2]])}))):this.$notify(Ie.alumno,"warning"):this.$notify(Ie.salon,"warning")},print:function(){if(this.nemo){var e="".concat(this.sie.url,"/academico/registro-situacion-alumno/reporte/nemo/").concat(this.nemo);(0,K["default"])(e,"_blank",0,0)}else this.$notify(Ie.salon,"warning")},changeSalon:function(){this.nemo?this.currentRow?this.openModalCambiarSalon=!0:this.$notify(Ie.alumno,"warning"):this.$notify(Ie.salon,"warning")},observacion:function(){var e=this;return q()(x()().m(function o(){return x()().w(function(o){while(1)switch(o.n){case 0:e.nemo?e.currentRow?"f"===e.periodoCierre?e.$notify("El periodo esta cerrado.","warning"):(e.paramsObservaciones={nemo:e.nemo,alucod:e.currentRow.ALUCOD},e.openModelObservaciones=!0):e.$notify(Ie.alumno,"warning"):e.$notify(Ie.salon,"warning");case 1:return o.a(2)}},o)}))()},promocionSalon:function(){var e=this;this.nemo?this.$confirm("Al promover, el proceso sera irreversible. ¿ Desea continuar ?","warning").onOk(function(){var o=q()(x()().m(function o(a){var n,l;return x()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.put("api/SalonAlController/putPromoverSalon",{nemo:e.nemo});case 1:e.$notify(a.message,"success"),o.n=3;break;case 2:o.p=2,l=o.v,n=l.error,e.$notify(n.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}));return function(e){return o.apply(this,arguments)}}()):this.$notify(Ie.salon,"warning")},selectSalon:function(e){var o=this;return q()(x()().m(function a(){var n,l,t,r,i,u,s,c,d,m,f;return x()().w(function(a){while(1)switch(a.n){case 0:return o.currentRow=null,a.n=1,o.getInfoSalon(e);case 1:n=a.v,l=n.cantidadAlumnos,t=n.salonByNemo,r=n.alumnos,i=t.GRADODES,u=t.SECCIONDES,s=t.ANO,c=t.INSTRUDES,d=t.TURNODES,m=t.NOMCOMP,f=t.PERICIE,o.form.grado=i,o.form.seccion=u,o.form.anio=s,o.form.cantidadAlumno=l,o.form.nivel=c,o.form.turno=d,o.form.responsable=m,o.dataAlumnos=r,o.periodoCierre=f;case 2:return a.a(2)}},a)}))()},getInfoSalon:function(e){return this.$http("api/salonController/getSalonByNemo",{params:{nemo:e}})}},created:function(){var e=this;return q()(x()().m(function o(){return x()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http("api/alumnoOController/getSituacionEstudianteForm");case 1:e.data=o.v,e.dataSalones=JSON.parse(JSON.stringify(e.data.salones)),e.columns.push({name:"INCLUSIVO",label:e.data.labelInclusivo,field:"INCLUSIVO",align:"center"}),e.data.usaDiploma&&e.columns.push({name:"DIPLOMA",label:"Diploma",field:"DIPLOMA",align:"left"});case 2:return o.a(2)}},o)}))()}};const _e=(0,be.A)(qe,[["render",P]]);var Ge=_e}}]);