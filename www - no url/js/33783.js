"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[33783],{33783:function(e,a,t){t.r(a),t.d(a,{default:function(){return H}});t(71225),t(50310),t(5962),t(83190);var n=t(61758),o=t(58790),l={class:"medico-pesotalla q-pa-sm"},r={class:"row q-col-gutter-sm"},s={key:0,class:"col-xs-12 col-md-6"},i={key:1,class:"col-xs-12 col-md-6"},u={class:"col-xs-7 col-md-4"},c={class:"col-xs-5 col-md-2 row"},d={class:"q-pt-sm"};function p(e,a){var t=(0,n.g2)("header-btn"),p=(0,n.g2)("q-select"),f=(0,n.g2)("q-datetime"),m=(0,n.g2)("q-toggle"),h=(0,n.g2)("q-td"),b=(0,n.g2)("q-input"),g=(0,n.g2)("q-tr"),v=(0,n.g2)("q-table"),O=(0,n.g2)("q-card-section"),A=(0,n.g2)("q-card"),P=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(P,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[(0,n.bF)(A,{dense:"",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{name:"Registro de peso y talla",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(O,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",r,[e.porSalon?((0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(p,{modelValue:e.nemo,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.nemo=a}),label:"Aula",options:e.salones,"option-value":"NEMO","option-label":"NEMODES",onInput:e.seleccionarSalon},null,8,["modelValue","options","onInput"])])):((0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(p,{modelValue:e.alucod,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.alucod=a}),label:"Estudiantes",options:e.estudiantes,"option-value":"ALUCOD","option-label":"NOMCOMP",onInput:e.selectEstudiante},null,8,["modelValue","options","onInput"])])),(0,n.Lk)("div",u,[(0,n.bF)(f,{modelValue:e.fecha,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.fecha=a}),format:"DD/MM/YYYY",type:"date",label:"Fecha","hide-bottom-space":""},null,8,["modelValue"])]),(0,n.Lk)("div",c,[(0,n.bF)(m,{modelValue:e.porSalon,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.porSalon=a}),label:"Por Salón",dense:""},null,8,["modelValue"])])]),(0,n.Lk)("div",d,[(0,n.bF)(v,{class:"sie-table_alto",data:e.data,columns:e.columns,filter:e.filter,"row-key":"name",dense:"",flat:"",bordered:"","rows-per-page-options":[0],pagination:{rowsPerPage:0}},{body:(0,n.k6)(function(a){return[(0,n.bF)(g,{props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(h,{key:"ALUCOD",props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,o.v_)(a.row.ALUCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(h,{key:"NOMCOMP",props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,o.v_)(a.row.NOMCOMP),1)]}),_:2},1032,["props"]),(0,n.bF)(h,{key:"PESO",props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(b,{type:"number",modelValue:a.row.PESO,"onUpdate:modelValue":function(e){return a.row.PESO=e},onPaste:function(t){return e.pegar(a.row)},"input-style":{width:"30px"}},null,8,["modelValue","onUpdate:modelValue","onPaste"])]}),_:2},1032,["props"]),(0,n.bF)(h,{key:"TALLA",props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(b,{modelValue:a.row.TALLA,"onUpdate:modelValue":function(e){return a.row.TALLA=e},"input-style":{width:"30px"}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),(0,n.bF)(h,{key:"IMC",props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,o.v_)(e.calculaImc(a.row)),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","filter"])])]}),_:1})]}),_:1})])]}),_:1})}var f=t(76080),m=t.n(f),h=t(45254),b=t.n(h),g=t(57008),v=t.n(g),O=t(8445),A=t.n(O),P=(t(30683),t(77507),t(52133),t(10239),t(6724),t(70199),t(515),t(6123)),D=t(80660),w=t(88567),C=t(95718),k=t(50425),L=t(94509),M=t(82351),S=t(55973),I=t(9736),E=t(16648),T=t(50304),y=t(69027),F=t(982),V=t(57668),_=t(26172),N=t(78786),U=t(19434),q=t(83956),x=t(76014),Y={components:{QCard:w.A,QCardSection:C.A,QTable:k.A,QTd:L.A,QTr:M.A,QDatetime:T.A,QToggle:S.A,QInput:I.A,QSelect:E.A,date:P.p6,QPage:P.Tu},directives:{download:U.A},computed:{buttons:function(){var e=this,a=[{icon:"save",label:"Guardar",click:function(){e.guardarPesoTalla()},permiso:">=2"}];return this.porSalon&&(a.push({icon:"print",label:"Imprimir",click:function(){e.imprimir("pdf")},permiso:">=1"}),a.push({icon:"file_excel_new",label:"Formato en blanco",click:function(){e.imprimir("xls")},permiso:">=1"})),a}},data:function(){return{imc:{},salones:[],estudiantes:[],nemo:"",salon:"",alucod:"",fecha:new Date,filter:"",estadoDefault:"Delgadez Severa",estadoPesoTallaDefault:"Desnutrición Severa",porSalon:!0,data:[],columns:[{name:"NOMCOMP",label:"Nombre",align:"left",field:"NOMCOMP",sortable:!0},{name:"PESO",label:"Peso (kg)",align:"left",field:"PESO",sortable:!0},{name:"TALLA",label:"Talla (mt)",align:"left",field:"TALLA",sortable:!0,sort:function(e,a){return parseInt(e,10)-parseInt(a,10)}},{name:"IMC",label:"IMC",align:"left",field:"IMC",sortable:!0,style:"width: 200px"}]}},watch:{fecha:function(e){this.cargarPesoTalla()}},methods:{imprimir:function(e){if(this.nemo){var a="".concat((0,V["default"])().url,"/reportes/reporte?repcod=970&nemo=").concat(this.nemo,"&fecha=").concat(P.p6.formatDate(this.fecha,"MM/DD/YYYY"),"&salon=").concat(this.salon,"&tipo=").concat(e);"xls"===e&&(a+="&blanco=1"),(0,P.KN)(a)}else this.$notify("Debe seleccionar un salón para generar el archivo.","warning")},calculaImc:function(e){var a=e.PESO,t=e.TALLA,n=e.EDAD,o=e.SEXO;if(!a||!t)return"";n||(n=216);var l=this.imc.getImc(n,o,a,t),r="",s="";return Object.keys(l).length>0&&(r=Object.prototype.hasOwnProperty.call(l,"DESCRIPCION")?l.DESCRIPCION:null,s=n>60?null==r?this.estadoDefault:r:null==r?this.estadoPesoTallaDefault:r,r="".concat(s," (").concat(l.IMC,")")),r},pegar:function(e){var a=e.__index,t=(event.clipboardData||window.clipboardData).getData("text");event.preventDefault();var n=A()(this.data),o=t.split("\n"),l=n.length;o.map(function(e){var t=l-a;if(t>0){var o=e.split("\t"),r=parseFloat(o[0]),s=parseFloat(o[1]),i=isFinite(r)?r:"",u=isFinite(s)?s:"";n[a]=v()(v()({},n[a]),{},{PESO:i,TALLA:u})}a++}),this.data=n},clear:function(){this.nemo=null,this.alucod="",this.fecha=new Date,this.data=[]},selectEstudiante:function(e){var a=(0,N["default"])(this.estudiantes,e,{key:"ALUCOD"});if(-1!==a){var t=this.estudiantes[a],n=t.ALUCOD,o=t.NOMCOMP;this.data=[{ALUCOD:n,NOMCOMP:o}]}},guardarPesoTalla:function(){var e=this,a=this.data,t=this.fecha,n=[],o=[];a.map(function(e){var a=e.ALUCOD,l=e.PESO,r=e.TALLA,s=e.NOMCOMP;if(l>0&&r>.4){var i={FECHA:t,CODIGO:a,CODTIPPER:"0000",ALUCOD:a,PESO:l,TALLA:r};n.push(i)}else o.push(s)});var l=o.length>0?"Los datos de los alumnos: \n ".concat(o.join(".\n "),"\n no estan completos, por lo tanto no se guardarán.\n\n ¿Desea continuar?"):"se guardará la talla y peso (podrá visualizarlo en la ficha del alumno)";(0,y.dialogConfirm)({title:"¡Advertencia! ",message:l}).then(function(a){if(a)return D.$http.post("api/HyoPesotal/guardarPesoTalla",{data:n}).then(function(a){(0,F["default"])("Se guardo Correctamente.","success"),e.cargarPesoTalla()}).catch(function(e){var a=e.error;console.error(a),(0,F["default"])("No ha sido posible guardarlos datos.(".concat(a.message,")"),"warning")})}).catch(function(e){console.error(e)})},seleccionarSalon:function(e){var a=(0,N["default"])(this.salones,e,{key:"NEMO"});-1!==a&&(this.salon=this.salones[a].NEMODES),this.cargarPesoTalla()},cargarPesoTalla:function(){var e=this,a=P.p6.formatDate(this.fecha,"MM/DD/YYYY"),t=this.nemo;D.$http.get("api/HyoPesotal/obtPesoTallaXSalonFecha",{params:{nemo:t,fecha:a}}).then(function(a){e.data=a}).catch(function(e){console.error(e)})}},created:function(){var e=this;return b()(m()().m(function a(){var t,n,o,l;return m()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,q.A.getSalones();case 1:return e.salones=a.v,a.n=2,x.A.getEstudiantes({isNemo:!0});case 2:return e.estudiantes=a.v,a.n=3,D.$http.get("api/HyoImc/getImc");case 3:t=a.v,n=t.imc,o=t.enImc,l=t.pesoTalla,e.imc=new _["default"](n,o,l),window.dataImc=n,window.enImc=o,window.enImcString=JSON.stringify(o),a.n=5;break;case 4:a.p=4,a.v;case 5:return a.a(2)}},a,null,[[0,4]])}))()}},Q=t(12807);const X=(0,Q.A)(Y,[["render",p],["__scopeId","data-v-9350d842"]]);var H=X}}]);