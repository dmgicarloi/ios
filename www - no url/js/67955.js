"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[67955],{67955:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});n(10239),n(25751),n(89571),n(50310),n(90095),n(83190),n(13715);var i=n(6123),a=n(61758),r=n(30640);function s(e,t){return i.p6.formatDate(e,t)}function l(e){return s(e,"MMMM YYYY")}function o(e,t){return s(e,"DD/MM/YYYY"+(t?"":" hh:mm:ss A"))}function c(e){var t=new Date(e);return t.setHours(0,0,0,0),t}function u(e){return c(e).getTime()}function h(e,t){return(u(e)-u(t))/864e5}function d(e){var t=c(e);return t.setDate(1),t}function v(e,t,n){var i=c(e).getTime();return c(t).getTime()<=i&&i<=c(n).getTime()}function f(e,t){return c(e).getTime()===c(t).getTime()}var p=n(54387),m={emits:["click"],props:{events:{type:Array,default:function(){return[]}},date:{type:Date}},computed:{title:function(){return s(this.date,"DD MMMM YYYY")}},methods:{onClick:function(e){this.$emit("click",e)}},render:function(){var e=this;return(0,a.h)(p.A,{class:"col",items:this.events,virtualScrollSliceSize:8,virtualScrollItemSize:94},{default:function(t){var n=t.item;return(0,a.h)(i.H0,{class:"calendar-month-detail",style:{"border-left-color":n.COLOR},onClick:function(){return e.onClick(n)}},{default:function(){return[n.SUBCOLOR||n.hasOwnProperty("CARACTER")?(0,a.h)(i.n1,{class:"calendar-event-sub",innerHTML:n.hasOwnProperty("CARACTER")?n.CARACTER:"&nbsp;",style:{"background-color":n.SUBCOLOR}}):null,(0,a.h)(i.mF,{},{default:function(){return[(0,a.h)(i.lp,{label:!0},{default:function(){return n.TITULO}}),(0,a.h)(i.lp,{sublabel:!0},{default:function(){return[(0,a.h)("span","INICIO: "),(0,a.h)("span",o(n.FECINI,n.SOLOFECHA))]}}),(0,a.h)(i.lp,{sublabel:!0},{default:function(){return[(0,a.h)("span","FIN: "),(0,a.h)("span",o(n.FECFIN,n.SOLOFECHA))]}})]}}),(0,a.h)(i.n1,{right:!0,icon:"keyboard_arrow_right",color:"secondary"})]}})},before:function(){return(0,a.h)(i.XR,{class:"text-primary text-bold row"},{default:function(){return[(0,a.h)("div",{class:"col"},e.title),(0,a.h)("div",{class:"calendar-chip"},e.events.length)]}})}})}},y=n(13813),b=n(78786),C=n(33001),k=n(81288),D=(n(11777),n(23540)),E={emits:["click"],props:{size:{type:Number},event:{type:Object},startWeek:{type:Date},endWeek:{type:Date}},computed:{isEvent:function(){return void 0!==this.event},classSize:function(){return"calendar-event-size-".concat(this.size)},colorEvent:function(){if(!0===this.isEvent)return this.event.FERIADO?"#d09dc2":this.event.COLOR},type:function(){if(!0===this.isEvent){var e=this.event.FH_CALENDAR?this.event.FH_CALENDAR:this.event.FECFIN,t=u(this.startWeek)<=u(this.event.FECINI),n=u(e)<=u(this.endWeek);return{"calendar-event-first":t,"calendar-event-last":n}}return"calendar-event-void"}},methods:{onClick:function(){!0===this.isEvent&&this.$emit("click",this.event)},getTooltip:function(e,t){return e&&15===e.TIPO?[t("div",this.event.TITULO),t("div",[t("span","De: "),t("span",e.USUNOM)])]:[t("div",this.event.TITULO),t("div",[t("span","INICIO: "),t("span",o(this.event.FI||this.event.FECINI,this.event.SOLOFECHA))]),t("div",[t("span","FIN: "),t("span",o(this.event.FF||this.event.FECFIN,this.event.SOLOFECHA))])]}},render:function(){var e=this;return(0,a.h)(D.A,{once:!0,threshold:1,class:["calendar-event-wrapper",this.classSize]},{default:function(){return[(0,a.h)("div",{style:{"background-color":e.colorEvent},once:!0,threshold:1,innerHTML:!0===e.isEvent?void 0:"&nbsp;",class:["calendar-event",e.type],onClick:e.onClick},!0===e.isEvent?[e.event.PRETITULO&&(0,a.h)("div",{class:"calendar-event-pretitle"},e.event.PRETITULO),(0,a.h)("div",[(e.event.SUBCOLOR||Object.prototype.hasOwnProperty.call(e.event,"CARACTER"))&&(0,a.h)("span",{class:"calendar-event-sub",style:{"background-color":e.event.SUBCOLOR},innerHTML:Object.prototype.hasOwnProperty.call(e.event,"CARACTER")?e.event.CARACTER:"&nbsp;"}),(0,a.h)("span",e.event.TITULO)]),e.event.SUBTITULO&&(0,a.h)("div",{class:"calendar-event-subtitle"},e.event.SUBTITULO),(0,a.h)(i.nC,{},{default:function(){return e.getTooltip(e.event,a.h)}})]:null)]}})}},I={emits:["click"],props:{eventsWeek:{type:Array,default:function(){return[]}},numberDay:{type:Date},month:{type:Number},isMobile:{type:Boolean}},methods:{onClick:function(){this.$emit("click",this.numberDay,this.eventsDay)}},computed:{eventsDay:function(){var e=this;return this.isMobile?(0,C["default"])(this.eventsWeek,function(t){return v(e.numberDay,t.FECINI,t.FECFIN)}):[]},classes:function(){return"calendar-day"+(0!==this.eventsDay.length?" calendar-day-event":"")+(!0===f(this.numberDay,new Date)?" calendar-day-current":"")+(this.numberDay.getMonth()!==this.month?" calendar-day-other":"")+(0===this.numberDay.getDay()?" calendar-day-holiday":"")}},render:function(){return(0,a.h)("div",{class:["calendar-day",this.classes],onClick:this.onClick},[(0,a.h)("div",{class:"calendar-day-number"},this.numberDay.getDate())])}},g=1;function O(e){return e.FH_CALENDAR?e.FH_CALENDAR:e.FECFIN}var M={emits:["input","update:modelValue","change","event","select"],props:{events:{type:Array,default:function(){return[]}},modelValue:{type:Date,default:function(){return new Date}},selectable:Boolean,mobile:Boolean,expanded:Boolean,fullHeigth:Boolean},data:function(){return{date:new Date,mobileModal:!1,mobileDate:new Date,eventsDay:[]}},watch:{modelValue:function(e){this.date=e}},computed:{isMobile:function(){return!(0,k.isGreater)()||this.mobile}},created:function(){this.modelValue&&(this.date=new Date(this.modelValue))},methods:{changeMonth:function(e){var t=new Date(this.date);t.setMonth(this.date.getMonth()+e),this.date=t,this.$emit("update:modelValue",t),this.$emit("input",t),this.$emit("change",{year:t.getFullYear(),month:t.getMonth()})},onEvent:function(e){this.$emit("event",e)},clickDay:function(e,t){this.isMobile?t&&t.length&&this.clickMobile(e,t):this.selectable&&this.$emit("select",e)},clickMobile:function(e,t){this.mobileModal=!0,this.mobileDate=e,this.eventsDay=t},createEvent:function(e,t,n,i,a){return e(E,{size:t,event:n,startWeek:i,endWeek:a,onClick:this.onEvent})},insertEventWeek:function(e,t,n,i,a,r,s,l){var o=n[r];if(o&&o.start>=s){o.start-s&&t.push(this.createEvent(e,o.start-s)),t.push(this.createEvent(e,o.size,o.event,i,a)),0!==l&&n.splice(r,1);var c=o.start+o.size;if(c<7){var u=(0,b["default"])(n,function(e){return e.id!==o.id&&e.start>=c});u>=0?this.insertEventWeek(e,t,n,i,a,u,c,l+1):this.insertEventWeek(e,t,n,i,a,r,c,l+1)}}else t.push(this.createEvent(e,7-s))},getEventsDay:function(e,t){return this.isMobile?(0,C["default"])(e,function(e){var n=O(e);return v(t,e.FECINI,n)}):[]}},render:function(){for(var e=this,t=this,n=d(t.date),s=n.getFullYear(),o=n.getMonth(),v=6,f=[],p=1-(n.getDay()-g+7)%7,b=function(){var n=[],i=7*k,r=new Date(s,o,i+p),l=new Date(s,o,i+p+6),d=(0,C["default"])(t.events,function(e){var t=O(e);return u(t)<u(l)&&u(t)>=u(r)||u(t)===u(l)||u(t)>u(l)&&u(e.FECINI)<=u(l)});if(!t.isMobile){var v=(0,y["default"])(d,function(e,t){var n=O(e),i=u(e.FECINI)<=u(r)?0:h(e.FECINI,r),a=u(n)>=u(l)?0:h(l,n);return{start:i,end:a,size:7-(i+a),event:e,id:t}}).sort(function(e,t){return e.start-t.start});v.forEach(function(e,i){t.insertEventWeek(a.h,n,v,r,l,i,0,0)})}for(var m=[],b=0;b<7;b++){var D=c(r);D.setDate(D.getDate()+b),m.push((0,a.h)(I,{eventsWeek:d,numberDay:D,month:o,isMobile:e.isMobile,class:{"cursor-pointer":e.selectable},onClick:e.clickDay}))}f.push((0,a.h)("div",{class:["calendar-week-row",{col:e.fullHeigth}]},[(0,a.h)("div",{class:"calendar-week-days row"},m),(0,a.h)("div",{class:"calendar-week-events row"},n)]))},k=0;k<v;k++)b();var D=(0,y["default"])(this.$q.lang.date.daysShort,function(t,n){var i=(n+g)%7;return(0,a.h)("div",{class:"calendar-week-item"},e.$q.lang.date.daysShort[i])});return(0,a.h)(i.C$,{class:{calendar:!0,mobile:t.isMobile,"calendar--expanded":t.expanded,column:this.fullHeigth,col:this.fullHeigth}},{default:function(){return[(0,a.h)("div",{class:"calendar-header row"},[(0,a.h)(i.Il,{icon:"chevron_left",flat:!0,round:!0,onClick:function(){t.changeMonth(-1)}}),(0,a.h)("div",{class:"calendar-header-title col self-center"},l(n)),(0,a.h)(i.Il,{icon:"chevron_right",flat:!0,round:!0,onClick:function(){t.changeMonth(1)}})]),(0,a.h)("div",{class:{"calendar-body":!0,column:e.fullHeigth,col:e.fullHeigth}},[(0,a.h)("div",{class:"calendar-week row"},D),(0,a.h)("div",{class:{"calendar-content":!0,column:e.fullHeigth,col:e.fullHeigth}},f)]),(0,a.h)(r.A,{class:"modal-month",modelValue:t.mobileModal,title:"Seleccione un evento",ok:!1,footer:!1,column:!0,onInput:function(){t.mobileModal=!1}},{default:function(){return[(0,a.h)(m,{events:t.eventsDay,date:t.mobileDate,onClick:t.onEvent})]}})]}})}}}}]);