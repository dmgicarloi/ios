"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[61842],{61842:function(n,o,e){e.r(o),e.d(o,{default:function(){return B}});var t=e(61758),l={class:"q-pa-sm"},a={class:"row q-col-gutter-sm"},i={class:"col-5"},s={class:"col-4"},u={class:"col-3"},r={class:"row q-col-gutter-sm"},c={class:"col"},d={class:"col"},p={class:"col"},m={class:"row q-col-gutter-sm"},f={class:"col-12"};function g(n,o){var e=(0,t.g2)("q-select"),g=(0,t.g2)("q-btn"),C=(0,t.g2)("q-table"),b=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(b,{class:"bg-white"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",l,[(0,t.Lk)("div",a,[(0,t.Lk)("div",i,[(0,t.bF)(e,{class:"q-if-outlined",modelValue:n.nemo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return n.nemo=o}),options:n.salones,"float-label":"Salones",onInput:n.getContenidosByNemo},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",s,[(0,t.bF)(e,{class:"q-if-outlined",modelValue:n.cursocod,"onUpdate:modelValue":o[1]||(o[1]=function(o){return n.cursocod=o}),options:n.cursos,"float-label":"Cursos",onInput:n.getContenidosByNemo},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",u,[(0,t.bF)(e,{class:"q-if-outlined",modelValue:n.idContenidoTipo,"onUpdate:modelValue":o[2]||(o[2]=function(o){return n.idContenidoTipo=o}),options:n.tipos,"float-label":"Tipos",onInput:n.getContenidosByNemo},null,8,["modelValue","options","onInput"])])]),(0,t.Lk)("div",r,[(0,t.Lk)("div",c,[(0,t.bF)(e,{class:"q-if-outlined",modelValue:n.anoDestino,"onUpdate:modelValue":o[3]||(o[3]=function(o){return n.anoDestino=o}),options:n.anosDestino,"float-label":"Año Destino",onInput:n.getContenidosByNemo},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",d,[(0,t.bF)(e,{class:"q-if-outlined",modelValue:n.nemosDestino,"onUpdate:modelValue":o[4]||(o[4]=function(o){return n.nemosDestino=o}),options:n.salonesDestino,multiple:"","float-label":"Salones Destino",onInput:n.getCursosDestino},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",p,[(0,t.bF)(e,{class:"q-if-outlined",modelValue:n.cursoDestino,"onUpdate:modelValue":o[5]||(o[5]=function(o){return n.cursoDestino=o}),options:n.cursosDestino,"float-label":"Cursos Destino"},null,8,["modelValue","options"])]),(0,t.bF)(g,{label:"Copiar contenidos",onClick:n.copiarContenido,color:"primary","no-caps":"",loading:n.loading,disable:n.loading},null,8,["onClick","loading","disable"])]),(0,t.Lk)("div",m,[(0,t.Lk)("div",f,[(0,t.bF)(C,{style:{height:"82vh"},data:n.contenidos,columns:n.columns,"row-key":"ID_CONTENIDO",selection:"multiple",selected:n.selected,"onUpdate:selected":o[6]||(o[6]=function(o){return n.selected=o}),"virtual-scroll":"","hide-bottom":"",pagination:n.pagination,"onUpdate:pagination":o[7]||(o[7]=function(o){return n.pagination=o}),"rows-per-page-options":[0]},null,8,["data","columns","selected","pagination"])])])])]}),_:1})}var C=e(76080),b=e.n(C),D=e(45254),v=e.n(D),O=(e(52133),e(10239),e(50310),e(90095),e(6724),e(83190),e(13715),e(6123)),h=e(50425),I=e(52617),T=e(11654),N=(e(30683),e(80660)),w={getComboSalones:function(){return N.$http.post("api/salon/getComboSalones")},getSalonesNG:function(n,o,e,t){return N.$http.post("api/salon/getSalonesNG",{ano:n,instrucod:o,gradocod:e,seccioncod:t})},getCursosSalon:function(n){var o=n.nemo;return N.$http.get("api/HyoAsignaprs/getCursosClase",{params:{nemo:o}})},getContenidosByNemo:function(n){var o=n.nemo,e=n.cursocod,t=n.grupocod,l=n.bimecod,a=n.idContenidoTipo;return N.$http.post("api/contenido/getContenidosByNemo",{nemo:o,cursocod:e,grupocod:t,bimecod:l,idContenidoTipo:a})},copiarContenido:function(n,o,e){var t={lista:n,nemos:o};return e&&(t.combinacion=e),N.$http.post("api/contenido/copiarContenido",t)},getCursos:function(n,o){return v()(b()().m(function e(){var t;return b()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,N.$http.get("api/HyoAsignaprs/getCursosClase",{params:{ano:n,nemo:o}});case 1:return t=e.v,t=t.map(function(n){return{label:"".concat(n.CURSOCOD," - ").concat(n.CURSONOM),value:"".concat(n.CURSOCOD,"|").concat(n.GRUPOCOD)}}),t.unshift({label:"Ninguno",value:null}),e.a(2,t)}},e)}))()}},S=e(7157),U=e(18105),k=e(78786),E=e(982),V=function(n){var o="-";return n&&(o=(0,U.Ay)(n,"DD/MM/YYYY HH:mm:ss")),o},R={components:{QTable:h.A,QTr:O.qh,QTh:I.A,QTd:O.Ef,QSelect:O.Si,QBtn:T.A,QPage:O.Tu},data:function(){return{salones:[],contenidos:[],columns:[{name:"FH_PUBLICACION",label:"Fecha publicación",align:"left",field:function(n){return n.FH_PUBLICACION},format:V,sortable:!0},{name:"TITULO",label:"Título",align:"left",field:function(n){return n.TITULO},style:"width: 150px"},{name:"CURSONOM",label:"Curso",align:"left",field:function(n){return n.CURSONOM},sortable:!0},{name:"GRUPODES",label:"Grupo",align:"left",field:function(n){return n.GRUPODES}},{name:"BIMECOD",label:"Periodo",align:"center",field:function(n){return n.BIMECOD}},{name:"DIRIGIDO",label:"Dirigido",align:"center",field:function(n){return n.DIRIGIDO}},{name:"TIPO",label:"Tipo",align:"left",field:function(n){return n.TIPO}},{name:"NEMODES",label:"Salón",align:"left",field:function(n){return n.NEMODES}}],pagination:{rowsPerPage:0},selected:[],nemo:null,cursocod:null,grupocod:null,bimecod:null,idContenidoTipo:null,nemosDestino:[],tipos:[],salonesDestino:[],cursos:[],anoDestino:null,anosDestino:[{label:"2022",value:"2022"},{label:"2023",value:"2023"},{label:"2024",value:"2024"},{label:"2025",value:"2025"},{label:"2026",value:"2026"},{label:"2027",value:"2027"},{label:"2028",value:"2028"}],cursoDestino:null,cursosDestino:[],loading:!1}},methods:{init:function(){var n=this;return v()(b()().m(function o(){var e,t;return b()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,w.getComboSalones();case 1:return n.salones=o.v,o.n=2,S.A.getContenidoTipoAll();case 2:e=o.v,t=[{tipoContenido:null,value:null,label:"Todos"}],e.forEach(function(n){30!==n.value&&(n.children&&n.children.length>0?n.children.forEach(function(o){t.push({tipoContenido:n.label,value:o.value,label:o.label})}):t.push({tipoContenido:null,value:n.value,label:n.label}))}),n.tipos=t;case 3:return o.a(2)}},o)}))()},getContenidosByNemo:function(){var n=this;return v()(b()().m(function o(){var e,t,l,a,i,s,u;return b()().w(function(o){while(1)switch(o.n){case 0:return e={},n.nemo&&(e.nemo=n.nemo),n.cursocod&&(e.cursocod=n.cursocod),n.grupocod&&(e.grupocod=n.grupocod),n.bimecod&&(e.bimecod=n.bimecod),n.idContenidoTipo&&(e.idContenidoTipo=n.idContenidoTipo),o.n=1,w.getContenidosByNemo(e);case 1:if(t=o.v,n.contenidos=t,!n.nemo){o.n=4;break}return l=(0,k["default"])(n.salones,function(n){return n.value===e.nemo}),a=null,i=null,s=null,-1!==l&&(a=n.salones[l].instrucod,i=n.salones[l].gradocod,s=n.salones[l].seccioncod),o.n=2,w.getSalonesNG(n.anoDestino,a,i,s);case 2:return n.salonesDestino=o.v,o.n=3,w.getCursosSalon({nemo:n.nemo});case 3:u=o.v,u=u.map(function(n){return{value:n.CURSOCOD,label:n.CURSONOM}}),u.unshift({value:null,label:"Todos"}),n.cursos=u;case 4:return o.a(2)}},o)}))()},copiarContenido:function(){var n=this;return v()(b()().m(function o(){var e,t,l,a,i;return b()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e=n.selected.map(function(n){return{ID_CONTENIDO:n.ID_CONTENIDO,CURSOCOD:n.CURSOCOD,GRUPOCOD:n.GRUPOCOD,BIMECOD:n.BIMECOD,ID_CONTENIDO_TIPO:n.ID_CONTENIDO_TIPO}}),e.length){o.n=1;break}return(0,E["default"])("Debe seleccionar al menos un contenido.","error"),o.a(2);case 1:return n.loading=!0,o.p=2,o.n=3,w.copiarContenido(e,n.nemosDestino,n.cursoDestino);case 3:t=o.v,l=t.message,(0,E["default"])(l,"success"),o.n=5;break;case 4:o.p=4,i=o.v,a=i.error,(0,E["default"])(a.message,"warning");case 5:n.loading=!1;case 6:return o.a(2)}},o,null,[[2,4]])}))()},getCursosDestino:function(){var n=this;return v()(b()().m(function o(){var e;return b()().w(function(o){while(1)switch(o.n){case 0:if(e=n.nemosDestino,1!==e.length){o.n=2;break}return o.n=1,w.getCursos(n.anoDestino,e[0]);case 1:n.cursosDestino=o.v,o.n=3;break;case 2:n.cursosDestino=[];case 3:return o.a(2)}},o)}))()}},created:function(){this.init()}},q=e(12807);const y=(0,q.A)(R,[["render",g]]);var B=y}}]);