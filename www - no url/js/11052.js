"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[11052],{11052:function(e,o,n){n.r(o),n.d(o,{default:function(){return no}});var i=n(8445),t=n.n(i),r=(n(30683),n(61758)),s=n(58790),a=n(29104),c={class:"col column"},l={class:"row q-col-gutter-sm"},d={key:0,class:"col-12"},u={class:"row items-center"},m={key:0,class:"q-px-sm q-py-xs"},f={class:"col-12"},p={key:0,class:"q-px-sm"},h={class:"absolute-bottom"},g={class:"q-gutter-xs"},v={class:"row q-gutter-xs"},b={class:"row items-center q-px-sm"},C={class:"col q-pl-sm"},k={class:"col-12"},A={class:"col-12 col-md-9"},w={class:"row clase-contenido__detail q-col-gutter-sm q-pa-sm"},I={key:0,class:"col-12 clase-contenido__header"},_={class:"row items-center q-gutter-sm"},y={key:0},O={class:"col-12 col-md-8 clase-contenido__contents body-1"},D={key:0,class:"row q-ml-sm"},E={class:"col"},F={class:"row q-py-sm"},T={class:"col-12"},N={key:1,class:"col-12"},S={class:"col-12 col-md-4 clase-contenido__info body-2"},L={class:"row q-col-gutter-sm"},q={class:"col-12"},V={class:"col-12"},M={class:"q-gutter-sm"},Q={key:0,class:"col-12"};function x(e,o){var n=(0,r.g2)("contenido-detalle"),i=(0,r.g2)("crear-contenido"),x=(0,r.g2)("breadcrumb"),P=(0,r.g2)("q-avatar"),z=(0,r.g2)("q-item-section"),R=(0,r.g2)("q-item"),W=(0,r.g2)("q-list"),X=(0,r.g2)("q-popup-proxy"),B=(0,r.g2)("q-btn"),$=(0,r.g2)("q-item-label"),U=(0,r.g2)("q-img"),G=(0,r.g2)("q-separator"),H=(0,r.g2)("sie-usuario"),j=(0,r.g2)("q-card-section"),K=(0,r.g2)("q-card"),Y=(0,r.g2)("q-tooltip"),J=(0,r.g2)("card-header"),Z=(0,r.g2)("card"),ee=(0,r.g2)("menuu"),oe=(0,r.g2)("q-spinner"),ne=(0,r.g2)("q-chip"),ie=(0,r.g2)("card-contenido"),te=(0,r.g2)("sie-vacio"),re=(0,r.g2)("q-infinite-scroll"),se=(0,r.g2)("item"),ae=(0,r.g2)("ver-mas"),ce=(0,r.g2)("treeFolder"),le=(0,r.g2)("modal-video-clase"),de=(0,r.g2)("consolidado"),ue=(0,r.g2)("informe"),me=(0,r.gN)("ripple");return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.bF)(n,{modelValue:e.modalDetalle,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.modalDetalle=o}),menuu:e.menuus,"onUpdate:menuu":o[1]||(o[1]=function(o){return e.menuus=o}),ref:"cDetalle",idContenido:e.id,"onUpdate:idContenido":o[2]||(o[2]=function(o){return e.id=o}),indice:e.indice,"id-etapa":e.infoPeriodo.ID_ETAPA,"student-code":e.alucod,onMove:e.move,onClose:e.setEstados},null,8,["modelValue","menuu","idContenido","indice","id-etapa","student-code","onMove","onClose"]),(0,r.bF)(i,{modelValue:e.modalActualizar,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.modalActualizar=o}),id:e.idContenido,type:e.tipo,nemo:e.nemo,instrucod:e.info.instrucod,gradocod:e.info.gradocod,grupocod:e.grupocod,bimecod:e.periodoActual,cursocod:e.cursocod,indice:e.indice,"id-etapa":e.infoPeriodo.ID_ETAPA,onSave:e.save},null,8,["modelValue","id","type","nemo","instrucod","gradocod","grupocod","bimecod","cursocod","indice","id-etapa","onSave"]),(0,r.Lk)("div",{class:(0,s.C4)(["clase-contenido row col",{wrap:e.isLess,"no-wrap":!e.isLess,"bg-white":e.isLess}])},[(0,r.Lk)("div",{class:(0,s.C4)(["col-12 col-md-3",{"clase-contenido__navigation":!e.isLess}])},[(0,r.Lk)("div",l,[e.isLess?((0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",u,[(0,r.bF)(x,{class:"col",add:e.items,"no-default":!0,homologar:{clase2:"Curso"},onClick:e.onBreadcrumb},null,8,["add","onClick"]),!e.esAlumno&&e.permisoLE&&e.periodoAbierto?((0,r.uX)(),(0,r.CE)("div",m,[(0,r.bF)(B,{class:"q-px-md",label:"Crear",icon:"plus",color:"primary",size:"sm",unelevated:""},{default:(0,r.k6)(function(){return[(0,r.bF)(X,null,{default:(0,r.k6)(function(){return[(0,r.bF)(W,{class:"bg-white"},{default:(0,r.k6)(function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tipos,function(o,n){return(0,r.bo)(((0,r.uX)(),(0,r.Wv)(R,{key:n,clickable:"",onClick:function(n){return e.openCrearContenido(o)}},{default:(0,r.k6)(function(){return[(0,r.bF)(z,{side:""},{default:(0,r.k6)(function(){return[(0,r.bF)(P,{square:"",size:"md",style:(0,s.Tr)({background:o.color||"#dedede"}),"text-color":"white",icon:o.icono},null,8,["style","icon"])]}),_:2},1024),(0,r.bF)(z,null,{default:(0,r.k6)(function(){return[(0,r.eW)((0,s.v_)(o.label),1)]}),_:2},1024)]}),_:2},1032,["onClick"])),[[me]])}),128))]}),_:1})]}),_:1})]}),_:1})])):(0,r.Q3)("v-if",!0)])])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",f,[e.isLess?((0,r.uX)(),(0,r.CE)("div",p,[(0,r.bF)(K,{dense:"",flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(U,{src:e.cursoImg},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",h,[(0,r.bF)(R,{dense:""},{default:(0,r.k6)(function(){return[(0,r.bF)(z,null,{default:(0,r.k6)(function(){return[(0,r.bF)($,{class:"text-h6"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,s.v_)(e.info.nemodes),1)]}),_:1})]}),_:1}),(e.hasInforme||e.hasConsolidado)&&e.removeInformes?((0,r.uX)(),(0,r.Wv)(z,{key:0,side:""},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",g,[e.hasInforme&&!e.indice?((0,r.uX)(),(0,r.Wv)(B,{key:0,round:"",icon:"insert_chart",onClick:e.goInformes,color:"primary",unelevated:"",size:"sm"},null,8,["onClick"])):(0,r.Q3)("v-if",!0),e.hasConsolidado&&!e.indice?((0,r.uX)(),(0,r.Wv)(B,{key:1,round:"",icon:"config_notas",onClick:e.goConsolidado,color:"primary",unelevated:"",size:"sm"},null,8,["onClick"])):(0,r.Q3)("v-if",!0)])]}),_:1})):(0,r.Q3)("v-if",!0)]}),_:1})])]}),_:1},8,["src"]),(0,r.bF)(G),(0,r.bF)(j,{class:"q-pa-sm"},{default:(0,r.k6)(function(){return[(0,r.bF)(R,{dense:""},{default:(0,r.k6)(function(){return[(0,r.bF)(z,null,{default:(0,r.k6)(function(){return[(0,r.bF)($,null,{default:(0,r.k6)(function(){return[(0,r.eW)((0,s.v_)(e.info.cursonom),1)]}),_:1}),(0,r.bF)($,{caption:"",lines:"2"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,s.v_)(e.info.nomcomp),1)]}),_:1})]}),_:1}),(0,r.bF)(z,{avatar:""},{default:(0,r.k6)(function(){return[(0,r.bF)(H,{profcod:e.info.profcod,size:"md"},null,8,["profcod"])]}),_:1})]}),_:1})]}),_:1})]}),_:1})])):((0,r.uX)(),(0,r.Wv)(Z,{key:1,"no-body":!0,flat:""},{header:(0,r.k6)(function(){return[(0,r.bF)(J,{class:(0,s.C4)({"col-xs-6":e.isLess,column:e.isLess,"items-center":e.isLess,"justify-center":e.isLess}),border:!1,label:e.info.nemodes,color:"grey-12",caption:e.info.cursonom},{side:(0,r.k6)(function(){return[e.hasInforme||e.hasConsolidado?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[e.removeInformes?((0,r.uX)(),(0,r.Wv)(z,{key:0,side:""},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",v,[e.hasInforme&&!e.indice?((0,r.uX)(),(0,r.Wv)(B,{key:0,flat:"",round:"",icon:"insert_chart",onClick:e.goInformes},{default:(0,r.k6)(function(){return[(0,r.bF)(Y,null,{default:(0,r.k6)(function(){return t()(o[9]||(o[9]=[(0,r.eW)("Informes",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,r.Q3)("v-if",!0),e.hasConsolidado&&!e.indice?((0,r.uX)(),(0,r.Wv)(B,{key:1,flat:"",round:"",icon:"config_notas",onClick:e.goConsolidado},{default:(0,r.k6)(function(){return[(0,r.bF)(Y,null,{default:(0,r.k6)(function(){return t()(o[10]||(o[10]=[(0,r.eW)("Consolidado",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,r.Q3)("v-if",!0)])]}),_:1})):(0,r.Q3)("v-if",!0)],64)):(0,r.Q3)("v-if",!0)]}),default:(0,r.k6)(function(){return[(0,r.Lk)("div",b,[(0,r.bF)(H,{profcod:e.info.profcod},null,8,["profcod"]),(0,r.Lk)("div",C,(0,s.v_)(e.info.nomcomp),1)])]}),_:1},8,["class","label","caption"])]}),body:(0,r.k6)(function(){return[(0,r.bF)(j,{class:"col-xs-6 flex flex-center"},{default:(0,r.k6)(function(){return[(0,r.bF)(U,{src:e.cursoImg},null,8,["src"])]}),_:1})]}),_:1}))]),(0,r.Lk)("div",k,[(0,r.bF)(ee,{selectChildren:e.id,propChildren:"id_contenido",onClickMenu:e.onMenu,onClickSubMenu:e.onSubMenu,"horizontal-screen":"md",data:e.menuus,"selected-index":e.periodoActual,"text-color":"black"},null,8,["selectChildren","onClickMenu","onClickSubMenu","data","selected-index"])])])],2),(0,r.Lk)("div",A,[(0,r.Lk)("div",w,[e.isLess?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("div",I,[(0,r.Lk)("div",_,[(0,r.bF)(x,{class:"col",add:e.items,"no-default":!0,homologar:{clase2:"Curso"},onClick:e.onBreadcrumb},null,8,["add","onClick"]),!e.esAlumno&&e.permisoLE&&e.periodoAbierto?((0,r.uX)(),(0,r.CE)("div",y,[(0,r.bF)(B,{label:"Crear",icon:"plus",color:"primary",size:"sm",align:"around",unelevated:""},{default:(0,r.k6)(function(){return[(0,r.bF)(X,null,{default:(0,r.k6)(function(){return[(0,r.bF)(W,{padding:!1},{default:(0,r.k6)(function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tipos,function(o,n){return(0,r.bo)(((0,r.uX)(),(0,r.Wv)(R,{key:n,dense:"",clickable:"",onClick:function(n){return e.openCrearContenido(o)}},{default:(0,r.k6)(function(){return[(0,r.bF)(z,{side:""},{default:(0,r.k6)(function(){return[(0,r.bF)(P,{square:"",size:"md",style:(0,s.Tr)({background:o.color||"#dedede"}),"text-color":"white",icon:o.icono},null,8,["style","icon"])]}),_:2},1024),(0,r.bF)(z,null,{default:(0,r.k6)(function(){return[(0,r.bF)($,{lines:"2"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,s.v_)(o.label),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["onClick"])),[[me]])}),128))]}),_:1})]}),_:1})]}),_:1})])):(0,r.Q3)("v-if",!0)])])),(0,r.Lk)("div",O,[e.isLess?(0,r.Q3)("v-if",!0):(0,r.RG)(e.$slots,"body",{key:0},function(){return[null!==e.periodoActual?((0,r.uX)(),(0,r.Wv)(re,{class:"row q-col-gutter-sm",ref:"scrollInfinite",onLoad:e.onLoad,reverse:"","scroll-target":".clase-contenido",key:e.periodoActual},{loading:(0,r.k6)(function(){return[(0,r.bF)(oe,{color:"primary",name:"dots",size:"40px"})]}),default:(0,r.k6)(function(){return[e.contenidos.length>0?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(e.contenidos,function(o,n){return(0,r.uX)(),(0,r.CE)("div",{key:n,class:"col-12"},[(0,r.bF)(ie,{"control-asistencia":e.controlAsistencia,pointer:!0,usucod:o.USUCOD,name:o.USUNOM,description:o.DESCRIPCION,icon:o.ICONO,color:o.COLOR,"text-color":"white",title:o.TITULO,date:e.fDate(o.FH_PUBLICACION),onClick:function(n){return e.onSubMenu(o)},onKeydown:(0,a.jR)(function(n){return e.onSubMenu(o)},["enter"]),"allow-modify":!e.esAlumno&&e.permisoLE&&e.periodoAbierto,"allow-delete":!e.esAlumno&&e.permiso&&e.periodoAbierto,onEditar:function(n){return e.editar(o.ID_CONTENIDO,o.ID_CONTENIDO_TIPO)},onEliminar:function(n){return e.eliminar(o.ID_CONTENIDO)},onEliminarVideo:function(n){return e.eliminarVideo(o)},hasVideo:!!o.VIDEO,onMover:function(n){return e.mover(o)},footer:!1,"info-salon":e.infoSalon,"id-contenido":o.ID_CONTENIDO},(0,r.eX)({icons:(0,r.k6)(function(){return[(20===o.ID_CONTENIDO_TIPO||21===o.ID_CONTENIDO_TIPO||22===o.ID_CONTENIDO_TIPO||23===o.ID_CONTENIDO_TIPO)&&o.VIDEO_ADJUNTO>0?((0,r.uX)(),(0,r.CE)("div",D,[(0,r.Lk)("div",E,[(0,r.bF)(B,{color:"primary",icon:"ondemand_video",round:"",flat:"",onClick:(0,a.D$)(function(n){return e.viewClase(o)},["stop"])},null,8,["onClick"])])])):(0,r.Q3)("v-if",!0)]}),_:2},[6!==o.ID_CONTENIDO_TIPO&&0===o.VISIBLE?{name:"afterBody",fn:(0,r.k6)(function(){return[(0,r.Lk)("div",F,[(0,r.Lk)("div",T,[(0,r.bF)(ne,{icon:"",color:"red-5","text-color":"white",small:"",label:"Pendiente de publicar"})])])]}),key:"0"}:void 0]),1032,["control-asistencia","usucod","name","description","icon","color","title","date","onClick","onKeydown","allow-modify","allow-delete","onEditar","onEliminar","onEliminarVideo","hasVideo","onMover","info-salon","id-contenido"])])}),128)):((0,r.uX)(),(0,r.CE)("div",N,[(0,r.bF)(te,{title:"No hay contenidos.",icon:"assignment_late"})]))]}),_:1},8,["onLoad"])):(0,r.Q3)("v-if",!0)]})]),(0,r.Lk)("div",S,[(0,r.Lk)("div",L,[(0,r.RG)(e.$slots,"aside",{},function(){return[(0,r.Lk)("div",q,[(0,r.bF)(Z,{"no-body":!0},{header:(0,r.k6)(function(){return[(0,r.bF)(J,{icon:e.infoPeriodo.numeroBimestre,label:e.infoPeriodo.BIMEDES,color:"#eeeeee",caption:"".concat(e.fDate2(e.infoPeriodo.FECINI)," - ").concat(e.fDate2(e.infoPeriodo.FECFIN))},null,8,["icon","label","caption"])]}),_:1})])]}),e.enableAsistencia?(0,r.RG)(e.$slots,"aside",{key:0},function(){return[(0,r.Lk)("div",V,[(0,r.Lk)("div",M,[(0,r.bF)(Z,{class:"column q-pa-sm","no-body":""},{body:(0,r.k6)(function(){return[(0,r.bF)(B,{icon:e.btnAsistencia.icon,dense:"",label:e.btnAsistencia.label,color:e.btnAsistencia.color,disable:e.btnAsistencia.checkAsistencia,onClick:e.marcarAsistencia},null,8,["icon","label","color","disable","onClick"])]}),_:1})])])]}):(0,r.Q3)("v-if",!0),(0,r.RG)(e.$slots,"list",{},function(){return[e.dataEstados.length>0&&e.estadoContenido&&!e.indice?((0,r.uX)(),(0,r.CE)("div",Q,[(0,r.bF)(Z,{noBody:!0},{header:(0,r.k6)(function(){return[(0,r.bF)(J,{label:"pen"===e.estadoContenido?"Pendientes":"Próximos"},null,8,["label"])]}),footer:(0,r.k6)(function(){return[(0,r.bF)(ae,{"initial-items":4,data:e.dataEstados},{default:(0,r.k6)(function(o){var n=o.item;o.index;return[(0,r.bF)(se,{class:"q-mb-sm","icon-left":n.ICONO,"text-color-left":"black","color-left":n.COLOR,label:n.TITULO,onClick:function(o){return e.goDetalleContenido(n)},"style-left":{color:"".concat(n.COLOR," !important")}},null,8,["icon-left","color-left","label","onClick","style-left"])]}),_:1},8,["data"])]}),_:1})])):(0,r.Q3)("v-if",!0)]})])])])])],2),((0,r.uX)(),(0,r.Wv)(ce,{onSubmit:e.guardarMover,nemo:e.nemo,cursocod:e.cursocod,grupocod:e.grupocod,bimecod:e.periodoActual,indice:e.indice,modelValue:e.modalFolder,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.modalFolder=o}),key:e.keyTree},null,8,["onSubmit","nemo","cursocod","grupocod","bimecod","indice","modelValue"])),e.openModalViewClass?((0,r.uX)(),(0,r.Wv)(le,{key:0,video:e.configViewClass,onCloseModal:o[5]||(o[5]=function(o){return e.openModalViewClass=!1})},null,8,["video"])):(0,r.Q3)("v-if",!0),(0,r.bF)(de,{modelValue:e.mConsolidado,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.mConsolidado=o}),nemo:e.nemo,cursogrupo:e.cursocod+"-separador-"+e.grupocod,periodo:e.periodoActual,loading:e.lConsolidado,ref:"rConsolidado"},null,8,["modelValue","nemo","cursogrupo","periodo","loading"]),(0,r.bF)(ue,{modelValue:e.mInformes,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.mInformes=o}),nemo:e.nemo,cursocod:e.cursocod,loading:e.lInformes,ref:"rInforme"},null,8,["modelValue","nemo","cursocod","loading"]),!e.esAlumno&&e.permisoLE&&e.periodoAbierto?((0,r.uX)(),(0,r.Wv)(i,{key:1,modelValue:e.modalCrear,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.modalCrear=o}),type:e.tipo,nemo:e.nemo,instrucod:e.info.instrucod,gradocod:e.info.gradocod,grupocod:e.grupocod,bimecod:e.periodoActual,cursocod:e.cursocod,indice:e.indice,"id-etapa":e.infoPeriodo.ID_ETAPA,onSave:e.save},null,8,["modelValue","type","nemo","instrucod","gradocod","grupocod","bimecod","cursocod","indice","id-etapa","onSave"])):(0,r.Q3)("v-if",!0)])}var P=n(76080),z=n.n(P),R=n(45254),W=n.n(R),X=(n(39866),n(10239),n(50310),n(90095),n(11777),n(83190),n(52776),n(81813),n(13715),n(10386)),B=n(53999),$=n(90124),U=n(25173),G=n(13796),H=n(56384),j=n(21797),K=n(6123),Y=n(86718),J=n(14585),Z=n(46431),ee=n(96658),oe=n(95718),ne=n(53399),ie=n(18105),te=n(7636),re=n(51064),se=n(81288),ae=n(8261),ce=n(87422),le=n(18297),de=n(71736),ue=n(43401),me=n(7399),fe={emits:["load"],name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{},disable:Boolean,reverse:Boolean},data:function(){return{index:0,fetching:!1,working:!0}},watch:{disable:function(e){!0===e?this.stop():this.resume()},scrollTarget:function(){this.updateScrollTarget()},debounce:function(e){this.__setDebounce(e)}},methods:{poll:function(){if(!0!==this.disable&&!0!==this.fetching&&!1!==this.working){var e=(0,de.Hj)(this.scrollContainer),o=(0,de.T5)(this.scrollContainer),n=(0,le.uJ)(this.scrollContainer);!1===this.reverse?o+n+this.offset>=e&&this.trigger():o<this.offset&&this.trigger()}},trigger:function(){var e=this;if(!0!==this.disable&&!0!==this.fetching&&!1!==this.working){this.index++,this.fetching=!0;var o=(0,de.Hj)(this.scrollContainer);this.$emit("load",this.index,function(n){!0===e.working&&(e.fetching=!1,e.$nextTick(function(){if(!0===e.reverse){var i=(0,de.Hj)(e.scrollContainer),t=(0,de.T5)(e.scrollContainer),r=i-o;e.scrollContainer.scrollTop=t+r}!0===n?e.stop():e.$el.closest("body")&&e.poll()}))})}},reset:function(){this.index=0},resume:function(){!1===this.working&&(this.working=!0,this.scrollContainer.addEventListener("scroll",this.poll,ue.mG.passive)),this.immediatePoll()},stop:function(){!0===this.working&&(this.working=!1,this.fetching=!1,this.scrollContainer.removeEventListener("scroll",this.poll,ue.mG.passive))},updateScrollTarget:function(){if(this.scrollContainer&&!0===this.working&&this.scrollContainer.removeEventListener("scroll",this.poll,ue.mG.passive),"string"===typeof this.scrollTarget){if(this.scrollContainer=document.querySelector(this.scrollTarget),null===this.scrollContainer)return void console.error('InfiniteScroll: scroll target container "'.concat(this.scrollTarget,'" not found'),this)}else this.scrollContainer=this.scrollTarget===document.defaultView||this.scrollTarget instanceof Element?this.scrollTarget:(0,de.hD)(this.$el);!0===this.working&&this.scrollContainer.addEventListener("scroll",this.poll,ue.mG.passive)},__setDebounce:function(e){e=parseInt(e,10),this.poll=e<=0?this.immediatePoll:(0,ce.A)(this.immediatePoll,!0===isNaN(e)?100:e)}},mounted:function(){if(this.immediatePoll=this.poll,this.__setDebounce(this.debounce),this.updateScrollTarget(),this.immediatePoll(),!0===this.reverse){var e=(0,de.Hj)(this.scrollContainer),o=(0,le.uJ)(this.scrollContainer);this.scrollContainer.scrollTop=e-o}},beforeDestroy:function(){!0===this.working&&this.scrollContainer.removeEventListener("scroll",this.poll,ue.mG.passive)},render:function(){var e=this.$slots.default?this.$slots.default():[],o=!0===this.fetching?[(0,r.h)("div",{class:"q-infinite-scroll__loading"},(0,me["default"])(this,"loading"))]:[];return(0,r.h)("div",{class:"q-infinite-scroll"},!1===this.reverse?e.concat(o):o.concat(e))}};const pe=fe;var he=pe,ge=n(41482),ve=n(35714),be=n(30640),Ce=n(57668),ke=n(96945),Ae=n(982),we=n(95477),Ie=n(74656),_e=n(25133),ye=n(24982),Oe=n(80340),De=n(24974),Ee=n(88567),Fe=n(20456),Te=n(38739),Ne=n(95051),Se=n(60470),Le=n(47206),qe=n(77814),Ve={class:"row q-gutter-sm q-px-sm q-py-md"};function Me(e,o){var n=(0,r.g2)("q-window-resize-observable"),i=(0,r.g2)("q-spinner-oval"),s=(0,r.g2)("q-inner-loading"),a=(0,r.g2)("q-tooltip"),c=(0,r.g2)("q-btn"),l=(0,r.g2)("consolidado-tareas"),d=(0,r.g2)("q-layout-drawer"),u=(0,r.gN)("close-overlay");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(n,{onResize:e.onResize,debounce:500},null,8,["onResize"]),(0,r.bF)(d,{class:"contenido-detalle",side:"right",modelValue:e.val,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.val=o}),width:e.w,mini:!1,overlay:!0,behavior:"desktop"},{default:(0,r.k6)(function(){return[e.loading?((0,r.uX)(),(0,r.Wv)(s,{key:0,visible:e.loading},{default:(0,r.k6)(function(){return[(0,r.bF)(i,{size:"50px",color:"primary"})]}),_:1},8,["visible"])):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Lk)("div",Ve,[o[2]||(o[2]=(0,r.Lk)("div",{class:"col"},"Consolidado Actividades",-1)),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(c,{size:"sm",unelevated:"",round:"",dense:"",color:"grey-5",icon:"close",onClick:e.close},{default:(0,r.k6)(function(){return[(0,r.bF)(a,null,{default:(0,r.k6)(function(){return t()(o[1]||(o[1]=[(0,r.eW)("Cerrar",-1)]))}),_:1})]}),_:1},8,["onClick"])),[[u]])]),(0,r.bF)(l,{nemo:e.nemo,cursogrupo:e.cursogrupo,periodo:e.periodo,header:!1},null,8,["nemo","cursogrupo","periodo"])],64))]}),_:1},8,["modelValue","width"])])}var Qe=n(99524),xe={emits:["update:modelValue","input"],components:{QLayoutDrawer:K.D2,QWindowResizeObservable:K.dC,QInnerLoading:K.SQ,QSpinnerOval:K.VA,ConsolidadoTareas:Qe["default"],QBtn:K.Il,QTooltip:K.nC},props:{modelValue:Boolean,nemo:String,cursogrupo:String,periodo:[Number,String],loading:Boolean},computed:{val:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},data:function(){return{w:300}},methods:{onResize:function(){this.resize()},resize:function(){var e=document.getElementById("q-app"),o=document.querySelector(".body-1"),n=document.querySelector(".body-2"),i=8;e&&o&&n?this.isLess?this.w=e.offsetWidth:this.w=o.offsetWidth+n.offsetWidth+2*i-4:this.w=window.innerWidth},close:function(){this.val=!1}},mounted:function(){this.resize()}},Pe=n(12807);const ze=(0,Pe.A)(xe,[["render",Me]]);var Re=ze,We={class:"row q-gutter-sm q-px-sm q-py-md"};function Xe(e,o){var n=(0,r.g2)("q-window-resize-observable"),i=(0,r.g2)("q-spinner-oval"),s=(0,r.g2)("q-inner-loading"),a=(0,r.g2)("q-tooltip"),c=(0,r.g2)("q-btn"),l=(0,r.g2)("informe"),d=(0,r.g2)("q-layout-drawer"),u=(0,r.gN)("close-overlay");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(n,{onResize:e.onResize,debounce:500},null,8,["onResize"]),(0,r.bF)(d,{side:"right",modelValue:e.val,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.val=o}),width:e.w,mini:!1,overlay:!0,behavior:"desktop"},{default:(0,r.k6)(function(){return[e.loading?((0,r.uX)(),(0,r.Wv)(s,{key:0,visible:e.loading},{default:(0,r.k6)(function(){return[(0,r.bF)(i,{size:"50px",color:"primary"})]}),_:1},8,["visible"])):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Lk)("div",We,[o[2]||(o[2]=(0,r.Lk)("div",{class:"col"},"Informes",-1)),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(c,{size:"sm",unelevated:"",round:"",dense:"",color:"grey-5",icon:"close",onClick:e.close},{default:(0,r.k6)(function(){return[(0,r.bF)(a,null,{default:(0,r.k6)(function(){return t()(o[1]||(o[1]=[(0,r.eW)("Cerrar",-1)]))}),_:1})]}),_:1},8,["onClick"])),[[u]])]),(0,r.bF)(l,{class:"full-height",nemo:e.nemo,cursocod:e.cursocod,header:!1},null,8,["nemo","cursocod"])],64))]}),_:1},8,["modelValue","width"])])}var Be=n(74307),$e={emits:["update:modelValue","input"],components:{QLayoutDrawer:K.D2,QWindowResizeObservable:K.dC,QInnerLoading:K.SQ,QSpinnerOval:K.VA,Informe:Be["default"],QBtn:K.Il,QTooltip:K.nC},props:{modelValue:Boolean,nemo:String,cursocod:String,loading:Boolean},computed:{val:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},data:function(){return{w:300}},methods:{onResize:function(){this.resize()},resize:function(){var e=document.getElementById("q-app"),o=document.querySelector(".body-1"),n=document.querySelector(".body-2"),i=8;e&&o&&n?this.isLess?this.w=e.offsetWidth:this.w=o.offsetWidth+n.offsetWidth+2*i-4:this.w=window.innerWidth},close:function(){this.val=!1}},mounted:function(){this.resize()}};const Ue=(0,Pe.A)($e,[["render",Xe]]);var Ge=Ue,He=n(10213),je=n(84569),Ke=n(69027),Ye=n(7157),Je="intranet.informes",Ze=15,eo={name:"contenido",props:{alucod:String,nemo:String,cursocod:String,grupocod:{type:String,default:"001"},bimecod:[Number,String],indice:[Number,String]},components:{QSeparator:X.A,modalVideoClase:qe.A,treeFolder:Se.A,sieVacio:Oe.A,menuu:ve.A,cardContenido:Y.A,item:J.A,card:Z.A,cardHeader:ee.A,QCardSection:oe.A,QImg:ne.A,verMas:te.A,breadcrumb:re.A,QInfiniteScroll:he,QSpinner:ge.A,sieModal:be.A,contenidoDetalle:ke.A,QPopupProxy:we.A,QList:B.A,QItem:$.A,QItemSection:U.A,QItemLabel:G.A,QAvatar:Ie.A,CrearContenido:_e.A,SieUsuario:De.A,QDialog:j.A,QCard:Ee.A,QCardActions:Fe.A,QOptionGroup:Te.A,QChip:Ne.A,Consolidado:Re,Informe:Ge,QBtn:H.A,QTooltip:K.nC},data:function(){return{sie:(0,Ce["default"])(),controlAsistencia:"N",info:{},infoSalon:{},contenidos:[],periodos:[],infoPeriodo:{},periodoActual:null,periodoAbierto:!0,periodoDescripcion:"",menuus:[],estadoContenido:"",dataEstados:[],modalDetalle:!1,id:"",items:[],tipos:[],tipo:0,instrucod:"",gradocod:"",modalCrear:!1,modalActualizar:!1,idContenido:null,modalFolder:!1,itemOrigen:{},esAlumno:["004","005"].includes((0,Ce["default"])().tipcod),keyTree:1,openModalViewClass:!1,configViewClass:{},mConsolidado:!1,lConsolidado:!0,mInformes:!1,lInformes:!0,btnAsistencia:{labelAsistencia:"Marcar Asistencia",color:"primary",icon:"asistencia",checkAsistencia:!1},enableAsistencia:!1,monitorear:-1!==["D031"].indexOf((0,Ce["default"])().colcod),permisoClase:!0}},computed:{isLess:function(){return(0,se.isLess)("md")},cursoImg:function(){return(0,ye.ID)({api:this.sie.api,token:this.sie.token,nemo:this.nemo,cursocod:this.cursocod,grupocod:this.grupocod})},hasInforme:function(){return!0===this.sie.esOtros&&(0,je.yy)(Je)},hasConsolidado:function(){return!0===this.sie.esOtros||this.esAlumno},permisoLE:function(){return this.sie.esOtros&&this.sie.ruta.nivel>=2&&this.permisoClase},permiso:function(){return this.sie.esOtros&&3===this.sie.ruta.nivel&&this.permisoClase},removeInformes:function(){return"0126"!==this.sie.colcod}},methods:{eliminarVideo:function(e){var o=this;(0,He.confirm)("¿Realmente desea eliminar el video?","delete").onOk(W()(z()().m(function n(){return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.delete("api/hyocontenido/eliminarVideo",{params:{idContenido:e.ID_CONTENIDO}});case 1:e.VIDEO=null,e.VIDEO_ADJUNTO=e.VIDEO_ADJUNTO-1,(0,Ae["default"])("Video eliminardo correctamente.","success"),n.n=3;break;case 2:n.p=2,n.v,(0,Ae["default"])("No ha sido posible eliminar el video","warning");case 3:return n.a(2)}},n,null,[[0,2]])})))},viewClase:function(e){this.configViewClass=(0,Le.videoEmbed)(e.VIDEO,e.TITULO),this.openModalViewClass=!0},onBreadcrumb:function(e){if(e.nemo){var o=this.indice?"intranet.carpetaRecuperacion.clase":"intranet.clase2.curso";this.$router.push({name:o,params:{nemo:e.nemo}})}},getDataBimestre:function(){var e=this;return W()(z()().m(function o(){var n;return z()().w(function(o){while(1)switch(o.n){case 0:n=e.periodoActual,e.periodoActual=null,setTimeout(function(){e.onMenu({bimecod:n})},1e3);case 1:return o.a(2)}},o)}))()},goDetalleContenido:function(e){e.id_contenido=e.id_contenido||e.ID_CONTENIDO,e.ID_CONTENIDO=e.id_contenido||e.ID_CONTENIDO,this.openDetalleContenido(e)},openDetalleContenido:function(e){var o=this;return W()(z()().m(function n(){var i,t,r;return z()().w(function(n){while(1)switch(n.n){case 0:if(!o.monitorear||7!==e.id_tipo_contenido&&7!==e.ID_CONTENIDO_TIPO||!o.sie.esEstudiante){n.n=1;break}i=e.id_historia||e.ID_HISTORIA,t="intranet.clase2.examen-monitoreado",o.$router.push({name:t,params:{nemo:o.nemo,cursocod:o.cursocod,grupocod:o.grupocod,alucod:o.alucod,id:i}}),n.n=3;break;case 1:return r=e.id_contenido||e.ID_CONTENIDO,o.id=r,o.idContenido=r,o.modalDetalle=!0,n.n=2,o.$nextTick();case 2:o.$refs.cDetalle.resize();case 3:return n.a(2)}},n)}))()},onSubMenu:function(e){var o=this;return W()(z()().m(function n(){return z()().w(function(n){while(1)switch(n.n){case 0:o.openDetalleContenido(e);case 1:return n.a(2)}},n)}))()},onMenu:function(e){var o=this;return W()(z()().m(function n(){var i;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return o.modalDetalle=!1,o.dataEstados=[],n.p=1,o.periodoActual=e.bimecod,i={nemo:o.nemo,cursocod:o.cursocod,grupocod:o.grupocod,bimecod:e.bimecod},o.indice&&(i.indice=o.indice,i.ano=String(o.nemo).substring(0,4)),o.infoPeriodo=o.getItemPeriodo(o.periodoActual),o.loadRoutes(),n.n=2,o.setMenu(i,e.bimecod,e.closed);case 2:return o.menuus=n.v,n.n=3,Ye.A.getEstados(i);case 3:o.dataEstados=n.v,n.n=5;break;case 4:n.p=4,n.v,o.$q.notify("");case 5:return n.a(2)}},n,null,[[1,4]])}))()},onLoad:function(e,o){var n=this;return W()(z()().m(function i(){var t,r,s;return z()().w(function(i){while(1)switch(i.p=i.n){case 0:return t=(e-1)*Ze,r={nemo:n.nemo,cursocod:n.cursocod,grupocod:n.grupocod,bimecod:n.periodoActual,limit:Ze,offset:t},n.indice&&(r.indice=n.indice,r.ano=String(n.nemo).substring(0,4)),i.p=1,i.n=2,Ye.A.getAll(r);case 2:s=i.v,s.forEach(function(e){n.contenidos.unshift(e)}),n.contenidos=(0,ae["default"])(n.contenidos,"ID_CONTENIDO"),o(s.length<Ze),i.n=4;break;case 3:i.p=3,i.v,n.$q.notify("No se pueden mostrar los contenidos","warning"),o(!0);case 4:return i.a(2)}},i,null,[[1,3]])}))()},fDate:function(e){return(0,ie.Ay)(e,"DD MMMM YYYY hh:mm:ss aa")},fDate2:function(e){return(0,ie.Ay)(e,"DD/MM/YYYY")},getItemPeriodo:function(e){for(var o=this.periodos.length,n={},i=0;i<o;i++){var t=this.periodos[i];if(t.BIMECOD===e){n=t;break}}var r=/^(.+)\s(.+)$/;return n.numeroBimestre=n.BIMEDES.replace(r,"$1"),n},setMenu:function(e,o,n){var i=this;return W()(z()().m(function t(){var r,s,a,c,l,d;return z()().w(function(t){while(1)switch(t.p=t.n){case 0:return e.onlyFolder=!1,i.periodoAbierto=!n,r=[],t.p=1,t.n=2,Ye.A.getMenu(e);case 2:for(s=t.v,a=i.periodos.length,c=0;c<a;c++)l=i.periodos[c],d={title:l.BIMEDES,bimecod:l.BIMECOD,closed:l.CERRADO},String(l.BIMECOD)===String(o)?(s.length>0&&(d.children=s),r.push(d)):r.push(d);return t.a(2,r);case 3:return t.p=3,t.v,t.a(2,r)}},t,null,[[1,3]])}))()},loadRoutes:function(){var e=[{label:this.info.cursonom,cursocod:this.info.cursocod,nemo:this.info.nemo}];this.infoPeriodo.BIMEDES&&(this.items=e,this.items.push({label:this.infoPeriodo.BIMEDES}))},openCrearContenido:function(e){var o=this;e.children&&e.children.length>0?this.$q.dialog({title:e.label,class:"intranet--clase-contenido-dialog",options:{type:"radio",model:e.children[0].value,items:e.children},ok:{label:"Aceptar",unelevated:!0,size:"sm"},cancel:{color:"negative",label:"Cancelar",unelevated:!0,size:"sm"},persistent:!0}).onOk(function(e){o.tipo=e,o.modalCrear=!0}):(this.tipo=e.value,this.modalCrear=!0)},save:function(){this.getDataBimestre()},editar:function(e,o){this.tipo=o,this.idContenido=e,this.modalActualizar=!0},eliminar:function(e){var o=this;(0,Ke.confirmar)("El contenido se eliminará permanentemente. ¿Está seguro de eliminar el contenido?",W()(z()().m(function n(){var i,t,r,s,a;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,Ye.A.deleteContenido(e);case 1:i=n.v,t=i.json,1===t.estado&&((0,Ae["default"])("El contenido se eliminó correctamente","success"),o.getDataBimestre()),2===t.estado&&(0,Ae["default"])("El formulario tienen respuesta","warning"),n.n=3;break;case 2:n.p=2,a=n.v,r=a.error,s="Ocurrió un error",r.custom&&(s=r.message),r&&501===r.code&&r.message&&(s=r.message),r&&502===r.code?(0,Ke.confirmar)("El contenido tiene Calificaciones ¿Esta seguro de eliminar el contenido?",W()(z()().m(function n(){var i,t,r,s,a;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,Ye.A.deleteContenido(e,1);case 1:i=n.v,t=i.json,1===t.estado&&((0,Ae["default"])("El contenido se eliminó correctamente","success"),o.getDataBimestre()),2===t.estado&&(0,Ae["default"])("El Formulario tiene respuestas","warning"),n.n=3;break;case 2:n.p=2,a=n.v,r=a.error,s="Ocurrió un error",r&&501===r.code&&r.message&&(s=r.message),(0,Ae["default"])(s,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))):(0,Ae["default"])(s,"warning");case 3:return n.a(2)}},n,null,[[0,2]])})))},mover:function(e){this.keyTree=Date.now(),this.itemOrigen=e,this.modalFolder=!0},guardarMover:function(e){var o=this;return W()(z()().m(function n(){var i,t,r,s;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:if(String(e.id_contenido)!==String(o.itemOrigen.ID_CONTENIDO)){n.n=1;break}return(0,Ae["default"])("No puedes mover a la misma carpeta.","warning"),n.a(2);case 1:if(!Object.prototype.hasOwnProperty.call(e,"parent")||-1===e.parent.indexOf(o.itemOrigen.ID_CONTENIDO)){n.n=2;break}return(0,Ae["default"])("No se puede mover hacia una carpeta interna","warning"),n.a(2);case 2:return n.p=2,i={idDestino:e.id_contenido,idOrigen:o.itemOrigen.ID_CONTENIDO,tipo:o.itemOrigen.ID_CONTENIDO_TIPO},n.n=3,o.$http.post("api/HyoContenido/moverContenido",i);case 3:t=n.v,o.getDataBimestre(),(0,Ae["default"])(t,"success"),o.modalFolder=!1,n.n=5;break;case 4:n.p=4,s=n.v,r=s.error,(0,Ae["default"])(r.message,"warning");case 5:return n.a(2)}},n,null,[[2,4]])}))()},goInformes:function(){var e=this;this.mInformes=!0,this.$refs.rInforme.resize(),setTimeout(function(){e.lInformes=!1},1e3)},goConsolidado:function(){var e=this;this.mConsolidado=!0,this.$refs.rConsolidado.resize(),setTimeout(function(){e.lConsolidado=!1},1e3)},marcarAsistencia:function(){var e=this;return W()(z()().m(function o(){var n,i;return z()().w(function(o){while(1)switch(o.n){case 0:return n={cursocod:e.cursocod,grupocod:e.grupocod},"005"!==e.sie.tipcod&&(n.alucod=e.alucod,n.nemo=e.nemo),o.n=1,Ye.A.grabarAsistenciaAlumno(n);case 1:i=o.v,e.habilitarAsistencia(e.cursocod,e.alucod,e.nemo),(0,Ae["default"])(i.message);case 2:return o.a(2)}},o)}))()},habilitarAsistencia:function(e,o,n){var i=this;return W()(z()().m(function t(){var r,s,a,c,l,d;return z()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,Ye.A.habilitarAsistencia({cursocod:e,alucod:o,nemo:n});case 1:r=t.v,s=r.colegioHabilitados,a=r.checkAsistencia,c=r.color,l=r.label,d=r.icono,i.enableAsistencia=s,i.btnAsistencia.checkAsistencia=a,a?(i.btnAsistencia.color=c,i.btnAsistencia.label=l,i.btnAsistencia.icon=d):(i.btnAsistencia.color="primary",i.btnAsistencia.label="Marcar Asistencia",i.btnAsistencia.icon="asistencia");case 2:return t.a(2)}},t)}))()},move:function(e){e||this.getDataBimestre()},setEstados:function(){var e=this;return W()(z()().m(function o(){var n;return z()().w(function(o){while(1)switch(o.n){case 0:return e.dataEstados=[],n={nemo:e.info.nemo,cursocod:e.info.cursocod,grupocod:e.info.grupocod,bimecod:e.periodoActual,estado:e.estadoContenido},e.indice&&(n.indice=e.indice,n.ano=String(e.info.nemo).substring(0,4)),o.n=1,Ye.A.getEstados(n);case 1:e.dataEstados=o.v;case 2:return o.a(2)}},o)}))()}},watch:{periodoActual:function(){this.contenidos=[]}},created:function(){var e=this;return W()(z()().m(function o(){var n,i,t,r,s,a;return z()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/HyoControl/readControl",{params:{campo:"asis_auto"}});case 1:return n=o.v,i=n.NUMERO,e.controlAsistencia=i,t={},o.p=2,r={nemo:e.nemo,cursocod:e.cursocod,grupocod:e.grupocod},e.indice&&(r.recuperacion=1,r.ano=String(e.nemo).substring(0,4)),o.n=3,Ye.A.getInfoCurso(r);case 3:t=o.v,o.n=5;break;case 4:return o.p=4,o.v,s=e.indice?"intranet.carpetaRecuperacion.clase":"intranet.clase2.curso",e.$router.push({name:s}),o.a(2,!1);case 5:return e.info={alucod:e.alucod,nemo:e.nemo,cursocod:e.cursocod,grupocod:e.grupocod,cursonom:t.CURSONOM,nemodes:t.NEMODES,instrucod:t.INSTRUCOD,gradocod:t.GRADOCOD,profcod:t.PROFCOD,nomcomp:t.NOMCOMP},e.infoSalon={NEMO:e.nemo,GRUPOCOD:e.grupocod,CURSOCOD:e.cursocod},a={nemo:e.nemo,cursocod:e.cursocod,grupocod:e.grupocod,bimecod:t.periodoActual},e.indice&&(a.indice=e.indice,a.ano=String(e.nemo).substring(0,4)),["004","005"].includes(e.sie.tipcod)?(e.habilitarAsistencia(e.cursocod,e.alucod,e.nemo),e.estadoContenido="pen"):["001","006"].includes(e.sie.tipcod)&&(e.estadoContenido="pro"),a.estado=e.estadoContenido,o.p=6,o.n=7,Ye.A.getEstados(a);case 7:return e.dataEstados=o.v,o.n=8,Ye.A.getContenidoTipoAll();case 8:e.tipos=o.v,o.n=10;break;case 9:o.p=9,o.v,(0,Ae["default"])("Debe configurar su calendario de periodos","warning");case 10:if(e.periodos=t.periodos,!(e.periodos.length>0)){o.n=12;break}return e.periodoActual=e.bimecod||t.periodoActual,e.infoPeriodo=e.getItemPeriodo(e.periodoActual),o.n=11,e.setMenu(a,e.periodoActual,e.infoPeriodo.CERRADO);case 11:e.menuus=o.v;case 12:e.permisoClase=t.permisoClase,e.loadRoutes(),o.n=14;break;case 13:o.p=13,o.v,(0,Ae["default"])("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 14:return o.a(2)}},o,null,[[6,9],[2,4],[0,13]])}))()},updated:function(){this.$nextTick(function(){var e=document.querySelector(".component-card-contenido"),o=e?e.getBoundingClientRect():{},n=o.width,i=document.querySelectorAll(".component-card-contenido .tamanios-maximos-wh");if(i)for(var t=0;t<i.length;t++)i[t].style.maxWidth=n+"px"})}};const oo=(0,Pe.A)(eo,[["render",x]]);var no=oo}}]);