"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[6694],{6694:function(o,t,e){e.r(t),e.d(t,{default:function(){return M}});var n=e(61758),a=e(58790),i={class:"row q-col-gutter-xs"},r={class:"col-xs-12 col-sm-8"},s={class:"col-xs-12 col-sm-2"},l={class:"row q-col-gutter-sm"},u={key:0,class:"col-xs-12 col-sm-4 scroll",style:{height:"calc(100vh - 257px)"}},c={class:"row items-center justify-center"},d={class:"text-bold"},f={class:"col-xs-12 col-sm-6"};function p(o,t){var e=(0,n.g2)("header-btn"),p=(0,n.g2)("sie-salones"),b=(0,n.g2)("q-select"),C=(0,n.g2)("q-card-section"),m=(0,n.g2)("q-item-tile"),g=(0,n.g2)("q-item-side"),h=(0,n.g2)("sie-usuario"),N=(0,n.g2)("q-item-main"),A=(0,n.g2)("q-item"),O=(0,n.g2)("q-list"),v=(0,n.g2)("detalleNotas"),k=(0,n.g2)("q-card"),S=(0,n.g2)("registroNotas"),I=(0,n.g2)("q-btn"),R=(0,n.g2)("q-toolbar"),Q=(0,n.g2)("sie-modal"),j=(0,n.g2)("registroConducta"),D=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(D,{class:"q-pa-sm intranet-registro-escrutinio sie-flat"},{default:(0,n.k6)(function(){return[(0,n.bF)(k,null,{default:(0,n.k6)(function(){return[(0,n.bF)(e,{name:"evaluacion_postergada"==o.tipoRegistro?"Notas de EvaluaciÃ³n Postergada":"Escrutinio",buttons:[]},null,8,["name"]),(0,n.bF)(C,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[(0,n.Lk)("div",r,[(0,n.bF)(p,{class:"col no-border",modelValue:o.salon,"onUpdate:modelValue":t[0]||(t[0]=function(t){return o.salon=t}),onSeleccionar:o.cambiarSalon,campos:["NEMO","NEMODES","INSTRUDES","INSTRUCOD","GRADOCOD","SECCIONCOD","PROFCOD","SECCIONDES","PERINUM"],todos:!1,tipoRegistro:o.tipoRegistro},null,8,["modelValue","onSeleccionar","tipoRegistro"])]),(0,n.Lk)("div",s,[(0,n.bF)(b,{class:"q-if-outlined",color:"secondary",modelValue:o.periodo,"onUpdate:modelValue":t[1]||(t[1]=function(t){return o.periodo=t}),options:o.optPeriodo,"float-label":"Periodo"},null,8,["modelValue","options"])])])]}),_:1}),(0,n.bF)(C,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[o.dataAlumnos.length>0?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.bF)(O,{class:"q-pa-none",bordered:"",separator:"",highlight:""},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.dataAlumnos,function(t,e){return(0,n.uX)(),(0,n.Wv)(A,{key:e,onClick:function(e){return o.verInfo(t)},clickable:"",active:!0,class:(0,a.C4)({"q-item-active":t.ALUCOD===o.itemSelected,"bg-primary":t.ALUCOD===o.itemSelected,"text-white":t.ALUCOD===o.itemSelected,"cursor-pointer":o.itemSelected===t.ALUCOD})},{default:(0,n.k6)(function(){return[(0,n.bF)(g,null,{default:(0,n.k6)(function(){return[(0,n.bF)(m,{class:(0,a.C4)(t.ALUCOD===o.itemSelected?"text-white":"text-primary")},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",c,[(0,n.Lk)("span",d,(0,a.v_)(t.NUMORD),1)])]}),_:2},1032,["class"])]}),_:2},1024),(0,n.bF)(g,null,{default:(0,n.k6)(function(){return[(0,n.bF)(m,null,{default:(0,n.k6)(function(){return[(0,n.bF)(h,{alucod:t.ALUCOD},null,8,["alucod"])]}),_:2},1024)]}),_:2},1024),(0,n.bF)(N,null,{default:(0,n.k6)(function(){return[(0,n.bF)(m,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,a.v_)(t.NOMCOMP),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1032,["onClick","class"])}),128))]}),_:1})])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",f,[o.verNotas?((0,n.uX)(),(0,n.Wv)(v,{key:0,isEscrutinio:!0,datosAlumno:{nemo:o.objSalon.NEMO,idPersona:o.objAlumno.ID_PERSONA,cambiar:o.flCambiar},ng:o.objSalon.INSTRUCOD+o.objSalon.GRADOCOD,periodo:o.periodo,filtrarOrdenReporte:!0,onObtInfoCurso:o.obtInfoCurso,infoAdic:o.objConducta,tipoRegistro:o.tipoRegistro},null,8,["datosAlumno","ng","periodo","onObtInfoCurso","infoAdic","tipoRegistro"])):(0,n.Q3)("v-if",!0)])])]}),_:1})]}),_:1}),(0,n.bF)(Q,{class:"modalNotas",modelValue:o.openModalNotas,"onUpdate:modelValue":t[2]||(t[2]=function(t){return o.openModalNotas=t}),title:o.lblRegistro,header:!0,esc:"","esc-click":""},{footer:(0,n.k6)(function(){return[(0,n.bF)(R,{class:"justify-end",color:"grey-2"},{default:(0,n.k6)(function(){return[(0,n.bF)(I,{class:"q-mx-xs",color:"primary",icon:"save",onClick:o.grabarNotas,label:"Guardar"},null,8,["onClick"])]}),_:1})]}),default:(0,n.k6)(function(){return[(0,n.bF)(S,{ref:"refRegistroNotasComp",isRegIndividual:!0,objInfoDataNota:o.objInfoNotas,onGuardarNotas:o.refrescarNotas},null,8,["objInfoDataNota","onGuardarNotas"])]}),_:1},8,["modelValue","title"]),(0,n.bF)(Q,{class:"modalNotas",modelValue:o.openModalConducta,"onUpdate:modelValue":t[3]||(t[3]=function(t){return o.openModalConducta=t}),title:"Registro de Conducta",header:!0,esc:"","esc-click":""},{footer:(0,n.k6)(function(){return[(0,n.bF)(R,{class:"justify-end",color:"grey-2"},{default:(0,n.k6)(function(){return[(0,n.bF)(I,{class:"q-mx-xs",color:"primary",icon:"save",onClick:o.grabarNotas,label:"Guardar"},null,8,["onClick"])]}),_:1})]}),default:(0,n.k6)(function(){return[(0,n.bF)(j,{ref:"refRegistroNotasComp",isEscrutinio:!0,objInfoDataConducta:o.objInfoConducta,onGuardarNotas:o.refrescarNotas},null,8,["objInfoDataConducta","onGuardarNotas"])]}),_:1},8,["modelValue"])]}),_:1})}e(10239);var b=e(6123),C=e(30545),m=e(65673),g=e(82327),h=e(88865),N=e(80660),A=(e(6583),{retornaAlumnosSalon:function(o,t){return N.$http.get("api/HyoSalonAl/listarAlumnosNemo",{params:{nemo:o,tipo:t}}).then(function(o){var t=o.json;return t})},getNotasConducta:function(o,t,e){return N.$http.get("api/HyoConductaNota/getNotasConductaPeriodos",{params:{nemo:o,idpersona:t,periodo:e,esEscrutinio:!0}}).then(function(o){var t=o.json;return t})}}),O=e(88275),v=e(30640),k=e(93616),S=e(80340),I=e(24974),R=(e(69027),e(982),e(65229)),Q=e(81288),j=e(79283),D=e(28438),P=e(28665),E={directives:{sieActive:R.A},props:{tipoRegistro:{required:!0,default:"individual",type:String}},components:{QList:m.A,QItem:g.A,QItemSection:h.A,QCard:b.C$,QPopover:b.VM,QSearch:b.Ks,QModalLayout:b.hT,QCheckbox:b.vZ,QPageSticky:b._U,QInnerLoading:b.SQ,QSpinnerOval:b.VA,QToggle:b.c5,QFab:b.l6,QFabAction:b.B$,QSelect:b.Si,QTable:C.A,QTh:b.EJ,QTr:b.qh,QTd:b.Ef,QTableColumns:b.$s,QPopupEdit:b.GT,QTabs:b.uw,QTab:b.zu,QTabPane:b.dg,QChip:b.wQ,QOptionGroup:b.EX,sieModal:v.A,sieSelect:k.A,sieVacio:S.A,sieUsuario:I.A,sieSalones:O.Ay,detalleNotas:j.A,registroNotas:D["default"],registroConducta:P["default"],QPage:b.Tu,QItemSide:b.n1,QItemTile:b.lp,QItemMain:b.mF,QToolbar:b.ZV,QBtn:b.Il},data:function(){return{salon:"",optPeriodo:[],periodo:1,dataAlumnos:[],itemSelected:"",objSalon:{},objAlumno:{},verNotas:!1,openModalNotas:!1,objInfoNotas:{},flCambiar:!0,objConducta:{},objInfoConducta:{},openModalConducta:!1,lblRegistro:"Registro de Notas"}},computed:{isLess:function(){return(0,Q.isLess)()}},methods:{loadPeriodos:function(o){for(var t=[],e=1;e<=o;e++)t.push({label:"PERIODO "+e,value:e});this.optPeriodo=t},reset:function(){this.itemSelected=null,this.objAlumno={},this.verNotas=!1},cambiarSalon:function(o){var t=this;this.objSalon=o,this.loadPeriodos(o.PERINUM),A.retornaAlumnosSalon(o.NEMO,this.tipoRegistro).then(function(o){t.dataAlumnos=o,t.reset()})},obtInfoCurso:function(o){Object.prototype.hasOwnProperty.call(o,"esConducta")&&o.esConducta?(this.openModalConducta=!this.openModalConducta,this.objInfoConducta={idConductaPeriodo:this.objConducta.idConductaPeriodo,idContenido:this.objConducta.idContenidoPer,alucod:this.objAlumno.ALUCOD,periodo:this.periodo,tipoRegistro:this.tipoRegistro}):(this.openModalNotas=!this.openModalNotas,this.lblRegistro="Registro de Notas "+o.cursonom,this.objInfoNotas={cursocod:o.cursocod,idClasePeriodo:o.idClasePeriodo,idContenido:o.idContenido,alucod:this.objAlumno.ALUCOD,periodo:this.periodo,tipoRegistro:this.tipoRegistro})},verInfo:function(o){this.itemSelected=o.ALUCOD,this.objAlumno=o,this.verNotas=!0,this.cargarConducta()},grabarNotas:function(){this.$refs.refRegistroNotasComp.guardarNotas()},refrescarNotas:function(o){o&&(this.openModalConducta&&this.cargarConducta(),this.flCambiar=!this.flCambiar)},cargarConducta:function(){var o=this;A.getNotasConducta(this.objSalon.NEMO,this.objAlumno.ID_PERSONA,this.periodo).then(function(t){if(o.dataConducta=t,t.length>0){var e=t[0];o.objConducta={descripcion:"CONDUCTA",nota:e.NOTA,idConductaPeriodo:e.ID_CONDUCTA_PERIODO,idContenidoPer:e.ID_CONTENIDO_PER}}})}},created:function(){}},F=e(12807);const _=(0,F.A)(E,[["render",p]]);var M=_}}]);