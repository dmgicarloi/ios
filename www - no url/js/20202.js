"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[20202],{20202:function(e,o,n){n.r(o),n.d(o,{default:function(){return O}});var r=n(8445),t=n.n(r),a=n(61758),l=n(58790),i={key:0,class:"col"},u={class:"col"};function p(e,o){var n=(0,a.g2)("q-chip"),r=(0,a.g2)("q-td"),p=(0,a.g2)("q-input"),c=(0,a.g2)("q-field"),s=(0,a.g2)("q-popup-edit"),d=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),D=(0,a.g2)("q-card"),C=(0,a.g2)("q-tooltip"),m=(0,a.g2)("q-fab-action"),A=(0,a.g2)("importar");return(0,a.uX)(),(0,a.Wv)(A,{url:e.url,onImport:e.loadTemplate,onProcess:e.procesar,showHelpText:!e.items.length},{helptext:(0,a.k6)(function(){return t()(o[1]||(o[1]=[(0,a.Lk)("dd",null,"- No modificar el archivo generado por el SIAGIE",-1),(0,a.Lk)("dd",null,"- No insertar columnas ni filas",-1)]))}),grid:(0,a.k6)(function(){return[e.items.length?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(D,null,{default:(0,a.k6)(function(){return[(0,a.bF)(f,{class:"col",data:e.items,columns:e.columns,"row-key":"alucod",pagination:e.pagination,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.pagination=o}),"rows-per-page-options":[0],"hide-bottom":""},{top:(0,a.k6)(function(r){return[(0,a.Lk)("div",u,[(0,a.Lk)("p",null,[o[2]||(o[2]=(0,a.eW)("Total de alumnos",-1)),(0,a.bF)(n,{color:"primary",small:""},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.items.length),1)]}),_:1})])])]}),body:(0,a.k6)(function(e){return[(0,a.bF)(d,{props:e},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{key:"ALUCOD",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.ALUCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"INSTRUCOD",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.INSTRUCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"GRADOCOD",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.GRADOCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"SECCIONCOD",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.SECCIONCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"DOCIDECOD",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.DOCIDECOD),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"DOCIDENRO",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.DOCIDENRO),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"APEPAT",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.APEPAT),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"APEMAT",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.APEMAT),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"NOMBRES",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.NOMBRES),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"FECNAC",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.FECNAC),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"PADNOM",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.PADNOM),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"PADTIPDOC",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.PADTIPDOC),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"PADDOC",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.PADDOC),1),(0,a.bF)(s,{modelValue:e.row.PADDOC,"onUpdate:modelValue":function(o){return e.row.PADDOC=o}},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{count:""},{default:(0,a.k6)(function(){return[(0,a.bF)(p,{modelValue:e.row.PADDOC,"onUpdate:modelValue":function(o){return e.row.PADDOC=o}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"MADNOM",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.MADNOM),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"MADTIPDOC",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.MADTIPDOC),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"MADDOC",props:e},{default:(0,a.k6)(function(){return[(0,a.eW)((0,l.v_)(e.row.MADDOC),1),(0,a.bF)(s,{modelValue:e.row.MADDOC,"onUpdate:modelValue":function(o){return e.row.MADDOC=o}},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{count:""},{default:(0,a.k6)(function(){return[(0,a.bF)(p,{modelValue:e.row.MADDOC,"onUpdate:modelValue":function(o){return e.row.MADDOC=o}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1})])):(0,a.Q3)("v-if",!0)]}),buttons:(0,a.k6)(function(){return[(0,a.bF)(m,{color:"secondary",icon:"broom",onClick:e.limpiar},{default:(0,a.k6)(function(){return[(0,a.bF)(C,{anchor:"center left",self:"center right"},{default:(0,a.k6)(function(){return t()(o[3]||(o[3]=[(0,a.eW)("Limpiar grilla",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1},8,["url","onImport","onProcess","showHelpText"])}n(30683),n(25751);var c=n(6123),s=n(24729),d=n(80340),f=n(982),D=n(46267),C={components:{QTable:c.kH,QTr:c.qh,QTd:c.Ef,QPopupEdit:c.GT,QFab:c.l6,QFabAction:c.B$,Dialog:s.A,QChip:c.wQ,sieVacio:d.A,notify:f["default"],importar:D.A,QCard:c.C$,QField:c.Om,QInput:c.ie,QTooltip:c.nC},data:function(){return{url:"api/HyoExcel/loadData",items:[],abrirModalTipo:!1,tipoMigracion:"",optTipoMigracion:[{label:"Al cierre del año anterior",value:"1"},{label:"Al inicio del año con estudiantes matriculados",value:"2"}],columns:[{name:"ALUCOD",label:"Cód.",field:"ALUCOD",align:"center"},{name:"INSTRUCOD",field:"INSTRUCOD",label:"N",align:"center"},{name:"GRADOCOD",field:"GRADOCOD",label:"G",align:"center"},{name:"SECCIONCOD",field:"SECCIONCOD",label:"S",align:"center"},{name:"DOCIDECOD",field:"DOCIDECOD",label:"Tip. Doc.",align:"center"},{name:"DOCIDENRO",field:"DOCIDENRO",label:"N° Doc.",align:"center"},{name:"APEPAT",field:"APEPAT",label:"Ape. Paterno",align:"center"},{name:"APEMAT",field:"APEMAT",label:"Ape. Materno"},{name:"NOMBRES",field:"NOMBRES",label:"Nombres",align:"center"},{name:"FECNAC",field:"FECNAC",label:"Fec. Nac.",align:"center"},{name:"PADNOM",field:"PADNOM",label:"Padre",align:"center"},{name:"PADTIPDOC",field:"PADTIPDOC",label:"Padre Tip. Doc.",align:"center"},{name:"PADDOC",field:"PADDOC",label:"Padre N° Doc.",align:"center"},{name:"MADNOM",field:"MADNOM",label:"Madre",align:"center"},{name:"MADTIPDOC",field:"MADTIPDOC",label:"Madre Tip. Doc.",align:"center"},{name:"MADDOC",field:"MADDOC",label:"Madre N° Doc.",align:"center"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:2e4}}},methods:{loadTemplate:function(e){this.items=this.items.concat(e.json),this.items.sort(function(e,o){var n=(e.APEPAT||"").toLowerCase(),r=(o.APEPAT||"").toLowerCase(),t=(e.APEMAT||"").toLowerCase(),a=(o.APEMAT||"").toLowerCase();return n<r?-1:n>r?1:t<a?-1:t>a?1:0})},procesar:function(){var e=this;this.items.length>0?this.$q.dialog({title:"Tipo de importación",message:"La data por importar tiene información con grados de estudiantes.",ok:"Procesar",cancel:"Cancelar",options:{type:"radio",model:this.tipoMigracion,items:[{label:"Al cierre del año anterior",value:"1"},{label:"Al inicio del año con estudiantes matriculados",value:"2"}]},preventClose:!0,color:"secondary"}).onOk(function(o){e.tipoMigracion=o,e.$http.post("api/HyoMigracion/migrarFamiliaEstudiante",{data:e.items,tipo:e.tipoMigracion}).then(function(e){(0,f["default"])(e.json.message,"success")}).catch(function(e){(0,f["default"])(e.error.message,"error")})}).onCancel(function(){console.log("cerrado")}):this.$q.dialog({title:"Aviso",message:"No hay información para importar",ok:"Aceptar"})},limpiar:function(){this.items=[]}}},m=n(12807);const A=(0,m.A)(C,[["render",p]]);var O=A}}]);