"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[27370],{27370:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var a=t(61758),o={class:"row q-col-gutter-md"},i={class:"col-xs-12"},r={class:"row q-col-gutter-md"},s={class:"col-xs-12"};function c(e,n){var t=this,c=(0,a.g2)("header-btn"),u=(0,a.g2)("formulario"),d=(0,a.g2)("leyenda-postulantes"),l=(0,a.g2)("q-card-section"),A=(0,a.g2)("q-card"),p=(0,a.g2)("sie-modal"),O=(0,a.g2)("estados-fichas"),m=(0,a.g2)("listar-sedes"),E=(0,a.g2)("q-select"),P=(0,a.g2)("sie-table"),I=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(I,{class:"q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(A,{flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{name:e.tituloForm,auto:!0,buttons:e.botonesForm},null,8,["name","buttons"]),(0,a.bF)(l,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",o,[(0,a.Lk)("div",i,[(0,a.bF)(u,{schema:e.schemas.viewFichasInscripcion,ref:"formApp",key:"formApp",onClickIconGrid:e.clickIconGrid,onChangeInput:e.changeInput,onInputEditor:e.inputEditor},null,8,["schema","onClickIconGrid","onChangeInput","onInputEditor"])])]),(0,a.Lk)("div",r,[(0,a.Lk)("div",s,[(0,a.bF)(d)])])]}),_:1})]}),_:1}),(0,a.bF)(p,{title:e.configModalSel.titulo,modelValue:e.openModal,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.openModal=n}),ok:"GRABAR",onSubmit:e.submit},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"cont-modal-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(u,{schema:e.schemaModal,ref:"formModal",key:"formModal",modal:!0},null,8,["schema"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,a.bF)(p,{title:e.rowModal.titulo,modelValue:e.openModalEstado,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.openModalEstado=n}),footer:!1},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"cont-modal-estados-fichas"},{default:(0,a.k6)(function(){return[(0,a.bF)(O,{postulante:e.rowModal},null,8,["postulante"])]}),_:1})]}),_:1},8,["title","modelValue"]),(0,a.bF)(p,{title:e.modalSedes.titulo,modelValue:e.modalSedes.open,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.modalSedes.open=n}),onSubmit:e.filtrarSedes},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"full-width"},{default:(0,a.k6)(function(){return[(0,a.bF)(m,{ref:"listaSedes",selected:e.modalSedes.selected},null,8,["selected"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,a.bF)(p,{title:e.modalCambioSede.titulo,modelValue:e.modalCambioSede.open,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.modalCambioSede.open=n}),onSubmit:e.updateSedeAdmision},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"cont-modal-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(E,{class:"q-if-outlined",modelValue:e.modalCambioSede.empcod,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modalCambioSede.empcod=n}),options:e.modalCambioSede.items,label:"Sede"},null,8,["modelValue","options"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,a.bF)(p,{title:e.modalReportes.titulo,modelValue:e.modalReportes.open,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.modalReportes.open=n}),ok:!1},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"cont-modal-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(E,{class:"q-if-outlined",modelValue:e.modalReportes.repcod,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.modalReportes.repcod=n}),options:e.modalReportes.items,label:"Reporte",onInput:e.selReporte},null,8,["modelValue","options","onInput"])]}),_:1})]}),_:1},8,["title","modelValue"]),(0,a.bF)(p,{title:e.modalExportar.titulo,modelValue:e.modalExportar.open,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.modalExportar.open=n}),onSubmit:e.exportarDatosAct},{default:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"full-width"},{default:(0,a.k6)(function(){return[(0,a.bF)(P,{data:e.modalExportar.items,columns:e.fields,config:e.config,context:t,showSearch:!1,css:{height:"calc(100vh - 195px)"},selection:e.modalExportar.seleccion,ref:"gridExportar"},null,8,["data","columns","config","selection"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var u=t(63053),d=t.n(u),l=t(76080),A=t.n(l),p=t(45254),O=t.n(p),m=(t(30683),t(71225),t(74260),t(39866),t(52133),t(10239),t(50310),t(5962),t(32203),t(6724),t(92802),t(83190),t(44264),t(6123)),E=t(80660),P=t(10213),I=t(65848),C=t(40714),h=t(61527),f=t(2819),_=t(41615),R=t(7968),D=t(81219),S=t(26319),L={data:function(){var e={};return{config:e,rows:[],fields:[{name:"GRUPO",label:"Grupo",field:"GRUPO",align:"left",sortable:!0},{name:"LABEL",label:"Descripción",field:"LABEL",align:"left",sortable:!0},{name:"CAMPO",label:"Campo",field:"CAMPO",align:"left",sortable:!0}]}}},M={mixins:[I.A,C.A,L],components:{estadosFichas:h["default"],listarSedes:R.A,leyendaPostulantes:D.A,QPage:m.Tu,QCard:m.C$,QSelect:m.Si},data:function(){var e=this.init();return e.sie.fechaNacimiento="",e.openModalEstado=!1,e.idsEstadosAdmision={},e.periodos=[],e.sie.manejaSedes=!1,e.sie.noValidaEdad=!1,e.sie.restringeGeneros=!1,e.sie.addCredencialesFichaAdmision=!1,e.sie.usuarioRegFichaAdmision=!1,e.sie.addColAnioFam=!1,e.sie.addColEstatus=!1,e.sie.addColAsesor=!1,e.sie.addColInfoPago=!1,e.sie.addColOportunidades=!1,e.sie.addConstanciaVacante=!1,e.modalSedes={open:!1,titulo:"Seleccionar Sedes",selected:[]},e.modalCambioSede={open:!1,titulo:"Cambio de Sede",empcod:"",row:{},items:[]},e.modalReportes={open:!1,titulo:"Seleccione un reporte",repcod:"",row:{},items:[],data:[]},e.modalExportar={open:!1,titulo:"Exportar datos",items:[],seleccion:"multiple"},e},methods:{getParams:function(){var e=this;return O()(A()().m(function n(){var t,a,o,i,r,s,c,u,d;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getInputValue("formApp","INPUT_1");case 1:return t=n.v,n.n=2,e.getInputValue("formApp","ID_GRADO");case 2:return a=n.v,n.n=3,e.getInputValue("formApp","ID_MODALIDAD");case 3:return o=n.v,n.n=4,e.getInputValue("formApp","INPUT_2");case 4:return i=n.v,n.n=5,e.getInputValue("formApp","ID_CONDICION");case 5:return r=n.v,n.n=6,e.getInputValue("formApp","ID_ESTADO");case 6:return s=n.v,n.n=7,e.getInputValue("formApp","FH_INICIO");case 7:return c=n.v,n.n=8,e.getInputValue("formApp","FH_FINAL");case 8:return u=n.v,d={postulantesActivos:!0},d.anoadm=t>0?t:0,2===a.toString().length&&(d.instrucod="T"!==a[0]?a[0]:null,d.gradocod="T"!==a[1]?a[1]:null),o>0&&(d.id_modalidad=o),i.length>0&&(d.textoBusqueda=i),r>0&&(d.id_condicion=r),s>0&&(d.id_estado=s),c.length>0&&u.length>0&&(d.rangoInscripcion={desde:c,hasta:u}),e.modalSedes.selected.length>0&&(d.sedes=e.modalSedes.selected.map(function(e){return e.EMPCOD})),n.a(2,d)}},n)}))()},updateGrid:function(){var e=this;return O()(A()().m(function n(){var t;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getParams();case 1:t=n.v,e.reloadGrid("formApp","GRID_1",t);case 2:return n.a(2)}},n)}))()},filtrarDatos:function(e,n,t){var a=this;return O()(A()().m(function e(){return A()().w(function(e){while(1)switch(e.n){case 0:a.$nextTick(O()(A()().m(function e(){var n,o;return A()().w(function(e){while(1)switch(e.n){case 0:if(!["FH_INICIO","FH_FINAL"].includes(t)){e.n=3;break}return e.n=1,a.getInputValue("formApp","FH_INICIO");case 1:return n=e.v,e.n=2,a.getInputValue("formApp","FH_FINAL");case 2:if(o=e.v,0!==n.length&&0!==o.length){e.n=3;break}return e.a(2,!1);case 3:return e.n=4,a.updateGrid();case 4:return e.a(2)}},e)})));case 1:return e.a(2)}},e)}))()},getGrados:function(e,n,t){var a=this;return O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:a.$nextTick(O()(A()().m(function n(){var o;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,a.getApiAction("api/postulacionController/getGrados",{anio:e[t]});case 1:return o=n.v,n.n=2,a.setSelect({id:"ID_GRADO",value:"ID_GRADO",label:"NIVEL_GRADO",data:o,item:{ID_GRADO:0,NIVEL_GRADO:"Seleccione"},limpiar:!0,dataIsOptions:!0});case 2:return n.a(2)}},n)})));case 1:return n.a(2)}},n)}))()},modalCambioProceso:function(e,n,t){var a=this;return O()(A()().m(function n(){var t,o,i;return A()().w(function(n){while(1)switch(n.n){case 0:if(t=!0,!t){n.n=2;break}return e.FECHA_NACIMIENTO=e.FECHA_NACIMIENTO.substr(0,10),o=e.FECHA_NACIMIENTO.split("-"),a.sie.fechaNacimiento=o[2]+"/"+o[1]+"/"+o[0],i={ID_PERFAM:e.ID_PERFAM,ID_FICHA:e.ID_FICHA,ID_PERIODO_ANT:e.ID_PERIODO,ID_PERSONA:e.ID_PERSONA,ID_CONDICION:e.ID_CONDICION,FICHA_ACTIVA:e.FICHA_ACTIVA,FECHA_NACIMIENTO:a.sie.fechaNacimiento,GENERO:e.SEXO_PERSONA},a.sie.manejaSedes&&(i.EMPCOD=e.EMPCOD),n.n=1,a.runModal(i,"fichasInscripcionCambioProc","U");case 1:n.n=3;break;case 2:a.$notify("No puede cambiar una postulación en estado "+e.ESTADO_POSTULACION,"warning");case 3:return n.a(2)}},n)}))()},initReportes:function(){var e=[];e.push({repcod:"FP1",repnom:"Ficha de inscripción",directorio:"postulantes",action:"webservice/reportes-familia/reporte"}),this.sie.addCredencialesFichaAdmision&&e.push({repcod:"157",repnom:"Credenciales de Admisión",directorio:"postulantes",action:"webservice/reportes-admision/jreport"}),this.sie.addConstanciaVacante&&e.push({repcod:"161",repnom:"Constancia de Vacante",directorio:"postulantes",action:"webservice/reportes-admision/jreport"}),this.modalReportes.items=this.sieSelectOptions(e,"repcod","repnom"),this.modalReportes.data=e},getReporte:function(e,n){var t=this;return O()(A()().m(function a(){var o,i,r,s,c,u,d,l;return A()().w(function(a){while(1)switch(a.n){case 0:return o="",a.n=1,E.$http.get("api/personaController/getPersona",{params:{params:{idPersona:e.ID_PERSONA,consulta:{getFamiliares:!0,getPerfiles:!0}}}});case 1:return i=a.v,r=i.familiares,s=i.perfiles,t.siscod===_["default"].SISCOD_ADMISION&&(c=s.find(function(e){return e.ID_PERFIL===_["default"].PERFIL_POSTULANTE}),c&&(o=c.CODIGO)),u=r.find(function(e){return e.ID_REFPER===_["default"].ID_REFPER_FAMILIA.P}),d=r.find(function(e){return e.ID_REFPER===_["default"].ID_REFPER_FAMILIA.M}),l={ANIO:e.ANOADM,ID_FICHA:e.ID_FICHA,ID_PERSONA:e.ID_PERSONA,ID_PERFAM:e.ID_PERFAM,REPCOD:n.repcod,DIRECTORIO:n.directorio,CODIGO:o,ID_PADRE:u?u.ID_PERSONA:0,ID_MADRE:d?d.ID_PERSONA:0,FORMATO:"pdf",FECHAHOY:_["default"].CURRENT_DAY},a.n=2,(0,f.exportFilePhp)(l,n.action,"reporte");case 2:return a.a(2)}},a)}))()},verFicha:function(e,n,t){var a=this;return O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:if(a.modalReportes.repcod="",a.modalReportes.row=e,1!==a.modalReportes.data.length){n.n=2;break}return n.n=1,a.getReporte(e,a.modalReportes.data[0]);case 1:n.n=3;break;case 2:a.modalReportes.open=!0;case 3:return n.a(2)}},n)}))()},selReporte:function(){var e=this;return O()(A()().m(function n(){var t;return A()().w(function(n){while(1)switch(n.n){case 0:return t=e.modalReportes.data.filter(function(n){return n.repcod===e.modalReportes.repcod}),n.n=1,e.getReporte(e.modalReportes.row,t[0]);case 1:return n.a(2)}},n)}))()},verEstado:function(e,n,t){var a=this;return O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:e.titulo="Estado - "+e.NOMCOMP,a.rowModal=e,a.openModalEstado=!0;case 1:return n.a(2)}},n)}))()},initExportar:function(){var e=[];switch(e.push({GRUPO:"Familia",LABEL:"Código Familia",CAMPO:"FAMCOD"}),e.push({GRUPO:"Familia",LABEL:"Nombre Familia",CAMPO:"NOMBRE_FAMILIA"}),e.push({GRUPO:"Familia",LABEL:"Dirección Familia",CAMPO:"DIRECCION_FAM"}),e.push({GRUPO:"Familia",LABEL:"Dirección Familia (ubigeo)",CAMPO:"UBIGEODIR_FAM"}),e.push({GRUPO:"Familia",LABEL:"Dirección Familia (urbanización)",CAMPO:"URBANIZACION_FAM"}),e.push({GRUPO:"Familia",LABEL:"Dirección Familia (referencia)",CAMPO:"REFERENCIADIR_FAM"}),this.sie.manejaSedes&&e.push({GRUPO:"Postulante",LABEL:"Sede",CAMPO:"SEDE"}),e.push({GRUPO:"Postulante",LABEL:"Tipo doc. Postulante",CAMPO:"ABREVIATURA_DOCUMENTO"}),e.push({GRUPO:"Postulante",LABEL:"Nro. doc. Postulante",CAMPO:"NUMERO_DOCUMENTO"}),e.push({GRUPO:"Postulante",LABEL:"Apellido paterno Postulante",CAMPO:"APELLIDO_PATERNO"}),e.push({GRUPO:"Postulante",LABEL:"Apellido materno Postulante",CAMPO:"APELLIDO_MATERNO"}),e.push({GRUPO:"Postulante",LABEL:"Nombre Postulante",CAMPO:"NOMBRE_PERSONA"}),e.push({GRUPO:"Postulante",LABEL:"Sexo Postulante",CAMPO:"SEXO_PERSONA_DESC"}),e.push({GRUPO:"Postulante",LABEL:"Fecha nac. Postulante",CAMPO:"FECHA_NACIMIENTO"}),e.push({GRUPO:"Postulante",LABEL:"Lugar nac. Postulante",CAMPO:"LUGNAC_FAM"}),e.push({GRUPO:"Postulante",LABEL:"Lugar nac (ubigeo). Postulante",CAMPO:"UBIGEONAC_FAM"}),e.push({GRUPO:"Postulante",LABEL:"Teléfonos fijos Postulante",CAMPO:"TELEFONOS_FIJOS"}),e.push({GRUPO:"Postulante",LABEL:"Teléfonos móviles Postulante",CAMPO:"TELEFONOS_MOVILES"}),e.push({GRUPO:"Postulante",LABEL:"Correos Postulante",CAMPO:"CORREOS"}),e.push({GRUPO:"Postulante",LABEL:"Año Admisión",CAMPO:"ANOADM"}),e.push({GRUPO:"Postulante",LABEL:"Nivel Postulante",CAMPO:"INSTRUDES"}),e.push({GRUPO:"Postulante",LABEL:"Grado Postulante",CAMPO:"GRADODES"}),e.push({GRUPO:"Postulante",LABEL:"Cód. Académico Postulante",CAMPO:"ALUCOD"}),e.push({GRUPO:"Postulante",LABEL:"Condición Postulante",CAMPO:"NOMBRE_CONDICION"}),e.push({GRUPO:"Postulante",LABEL:"Fecha registro",CAMPO:"FH_CREACION_FICHA"}),e.push({GRUPO:"Postulante",LABEL:"Estado Postulación",CAMPO:"ESTADO_POSTULACION"}),e.push({GRUPO:"Postulante",LABEL:"Fecha estado",CAMPO:"FH_ESTADO_FICHA"}),e.push({GRUPO:"Postulante",LABEL:"Vive con",CAMPO:"FAMVIVE"}),e.push({GRUPO:"Postulante",LABEL:"Resp. económico",CAMPO:"FAMRESP"}),e.push({GRUPO:"Postulante",LABEL:"Dir. Resp. económico",CAMPO:"DIR_FAMRESP"}),e.push({GRUPO:"Postulante",LABEL:"Dir. Resp. económico (ubigeo)",CAMPO:"UBIGEODIR_FAMRESP"}),e.push({GRUPO:"Postulante",LABEL:"Dir. Resp. económico (urbanización)",CAMPO:"URBANIZACION_RESP"}),e.push({GRUPO:"Postulante",LABEL:"Dir. Resp. económico (referencia)",CAMPO:"REFERENCIADIR_RESP"}),e.push({GRUPO:"Postulante",LABEL:"Colegio Procedencia",CAMPO:"COLEGIO_PROCEDENCIA"}),this.sie.colcod){case"0342":e.push({GRUPO:"Postulante",LABEL:"¿Como se enteró del colegio?",CAMPO:"ADIC_POS_MEDIO_INF_COLEGIO"});break;case"0589":e.push({GRUPO:"Postulante",LABEL:"Estatus",CAMPO:"ESTATUS_POSTULACION"}),e.push({GRUPO:"Postulante",LABEL:"Asesor",CAMPO:"ASESOR"});break}this.sie.addColOportunidades&&e.push({GRUPO:"Postulante",LABEL:"#Oportunidad",CAMPO:"NRO_OPORTUNIDAD"}),this.sie.addColInfoPago&&e.push({GRUPO:"Postulante",LABEL:"Pago",CAMPO:"INFO_PAGO_DA"}),e.push({GRUPO:"Padre",LABEL:"Tipo doc. Padre",CAMPO:"PAD_ABREVIATURA_DOCUMENTO"}),e.push({GRUPO:"Padre",LABEL:"Nro. doc. Padre",CAMPO:"PAD_NUMERO_DOCUMENTO"}),e.push({GRUPO:"Padre",LABEL:"Apellido paterno Padre",CAMPO:"PAD_APELLIDO_PATERNO"}),e.push({GRUPO:"Padre",LABEL:"Apellido materno Padre",CAMPO:"PAD_APELLIDO_MATERNO"}),e.push({GRUPO:"Padre",LABEL:"Nombre Padre",CAMPO:"PAD_NOMBRE_PERSONA"}),e.push({GRUPO:"Padre",LABEL:"Fecha nac. Padre",CAMPO:"PAD_FECHA_NACIMIENTO"}),e.push({GRUPO:"Padre",LABEL:"Teléfonos móviles Padre",CAMPO:"PAD_TELEFONOS_MOVILES"}),e.push({GRUPO:"Padre",LABEL:"Dirección Padre",CAMPO:"PAD_DIRECCION"}),e.push({GRUPO:"Madre",LABEL:"Tipo doc. Madre",CAMPO:"MAD_ABREVIATURA_DOCUMENTO"}),e.push({GRUPO:"Madre",LABEL:"Nro. doc. Madre",CAMPO:"MAD_NUMERO_DOCUMENTO"}),e.push({GRUPO:"Madre",LABEL:"Apellido paterno Madre",CAMPO:"MAD_APELLIDO_PATERNO"}),e.push({GRUPO:"Madre",LABEL:"Apellido materno Madre",CAMPO:"MAD_APELLIDO_MATERNO"}),e.push({GRUPO:"Madre",LABEL:"Nombre Madre",CAMPO:"MAD_NOMBRE_PERSONA"}),e.push({GRUPO:"Madre",LABEL:"Fecha nac. Madre",CAMPO:"MAD_FECHA_NACIMIENTO"}),e.push({GRUPO:"Madre",LABEL:"Teléfonos móviles Madre",CAMPO:"MAD_TELEFONOS_MOVILES"}),e.push({GRUPO:"Madre",LABEL:"Dirección Madre",CAMPO:"MAD_DIRECCION"}),e.push({GRUPO:"Apoderado",LABEL:"Tipo doc. Apoderado",CAMPO:"APO_ABREVIATURA_DOCUMENTO"}),e.push({GRUPO:"Apoderado",LABEL:"Nro. doc. Apoderado",CAMPO:"APO_NUMERO_DOCUMENTO"}),e.push({GRUPO:"Apoderado",LABEL:"Apellido paterno Apoderado",CAMPO:"APO_APELLIDO_PATERNO"}),e.push({GRUPO:"Apoderado",LABEL:"Apellido materno Apoderado",CAMPO:"APO_APELLIDO_MATERNO"}),e.push({GRUPO:"Apoderado",LABEL:"Nombre Apoderado",CAMPO:"APO_NOMBRE_PERSONA"}),e.push({GRUPO:"Apoderado",LABEL:"Fecha nac. Apoderado",CAMPO:"APO_FECHA_NACIMIENTO"}),e.push({GRUPO:"Apoderado",LABEL:"Teléfonos móviles Apoderado",CAMPO:"APO_TELEFONOS_MOVILES"}),e.push({GRUPO:"Apoderado",LABEL:"Dirección Apoderado",CAMPO:"APO_DIRECCION"}),e.push({GRUPO:"Apoderado",LABEL:"Sexo Apoderado",CAMPO:"APO_SEXO_DESC"}),e.push({GRUPO:"Apoderado",LABEL:"Parentesco Apoderado",CAMPO:"APO_PARENTESCO"}),this.modalExportar.items=e;var n={label:"Exportar",icon:"file_excel_new",click:this.exportarDatos,params:{view:"viewFichasInscripcion"}};this.botonesForm=this.botonesForm.concat(n)},exportarDatos:function(){var e=this;return O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:e.modalExportar.open=!0;case 1:return n.a(2)}},n)}))()},exportarDatosAct:function(){var e=this;return O()(A()().m(function n(){var t,a,o,i,r,s;return A()().w(function(n){while(1)switch(n.p=n.n){case 0:if(t=e.$refs["gridExportar"].selected,0!==t.length){n.n=1;break}return e.$notify("Debe seleccionar al menos un(1) campo","warning"),n.a(2,!1);case 1:return n.p=1,n.n=2,e.getParams();case 2:return a=n.v,a.campos=t.map(function(e){return e.CAMPO}),a.order=[{sidx:"F.APELLIDO_PATERNO",sord:"ASC"},{sidx:"F.APELLIDO_MATERNO",sord:"ASC"},{sidx:"F.NOMBRE_PERSONA",sord:"ASC"}],o=t.reduce(function(e,n){return e[n.CAMPO]=n.LABEL,e},{}),a.objLabel=o,a.manejaSedes=e.sie.manejaSedes,n.n=3,E.$http.post("api/postulacionController/postExportarFichas",{params:a});case 3:return i=n.v,r='{"name":"'.concat(i.filename,'","ruta":"').concat(i.ruta,'","tipo":"xlsx"}'),n.n=4,_["default"].DESCARGAR_ARCHIVO(r);case 4:e.$notify("Archivo Descargado Satisfactoriamente","success"),n.n=6;break;case 5:n.p=5,s=n.v,e.$notify(s.error?s.error.message:s.message,"warning");case 6:return n.a(2)}},n,null,[[1,5]])}))()},validaEdad:function(e,n){if(this.sie.noValidaEdad)return!0;var t={C1:1,C2:2,I1:1,I2:2,I3:3,I4:4,I5:5,P1:6,P2:7,P3:8,P4:9,P5:10,P6:11,S1:12,S2:13,S3:14,S4:15,S5:16,IP:4,IK:5,EE:2},a=!0;n=S["default"].convertirFormatoFecha(n,"/","/");var o=S["default"].calculoEdadMinedu(n,e.ANIO),i=e.INSTRUCOD+e.GRADOCOD,r=t[i],s=new Date(n)<new Date("01/01/2011")?2:1,c=2;return a=e.EDAD_REQUERIDA?"object"===d()(r)?r.indexOf(o)>=0:o===r:r-s<=o&&o<=r+c,a},preSubmit:function(e){var n=!0;switch(this.configModalSel.codigoFormulario){case"fichasInscripcionCambioProc":var t=this.periodos.filter(function(n){return n.ID_PERIODO===e.ID_PERIODO});if(this.sie.restringeGeneros){var a=this.verificarGeneroGrado(e.GENERO,t[0]);a&&(this.$notify(a,"warning"),n=!1)}var o=this.validaEdad(t[0]||"",e.FECHA_NACIMIENTO);o||(this.$notify("El postulante no cumple con la edad requerida para el grado","warning"),n=!1);break}return{res:n,data:e}},postSubmit:function(e){var n=this;return O()(A()().m(function e(){var t;return A()().w(function(e){while(1)switch(e.n){case 0:t=n.configModalSel.codigoFormulario,e.n="fichasInscripcionCambioProc"===t?1:3;break;case 1:return e.n=2,n.updateGrid();case 2:return e.a(3,3);case 3:return e.a(2)}},e)}))()},cancelarPostulacion:function(e,n,t){var a=this;return O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:e.FICHA_ACTIVA&&1===e.FICHA_ACTIVA?e.ID_ESTADO_POSTULACION&&e.ID_ESTADO_POSTULACION===a.idsEstadosAdmision.INTERESADO?(0,P.confirm)("¿Está seguro de cancelar la postulación vigente?","add").onOk(function(){E.$http.post("api/postulacionController/cancelarPostulacion",{id_ficha:e.ID_FICHA}).then(function(e){a.$notify(e.message,"success"),a.updateGrid()}).catch(function(e){a.$notify(e.error.message,"warning")})}):a.$notify("Solo se pueden cancelar postulaciones en estado Interesado","warning"):a.$notify("Solo se pueden cancelar postulaciones vigentes","warning");case 1:return n.a(2)}},n)}))()},cambioSede:function(e){var n=this;return O()(A()().m(function t(){return A()().w(function(t){while(1)switch(t.n){case 0:n.modalCambioSede.empcod=e.EMPCOD,n.modalCambioSede.row=e,n.modalCambioSede.open=!0;case 1:return t.a(2)}},t)}))()},updateSedeAdmision:function(){var e=this;return O()(A()().m(function n(){var t;return A()().w(function(n){while(1)switch(n.n){case 0:t=e.modalCambioSede.row.EMPCOD!==e.modalCambioSede.empcod,t?(0,P.confirm)("¿Está seguro de actualizar la sede?","update").onOk(function(){var n={empcod:e.modalCambioSede.empcod,id_ficha:e.modalCambioSede.row.ID_FICHA,id_persona:e.modalCambioSede.row.ID_PERSONA,id_periodo:e.modalCambioSede.row.ID_PERIODO};E.$http.post("api/postulacionController/updateSedeAdmision",{data:n}).then(function(){var n=O()(A()().m(function n(t){var a;return A()().w(function(n){while(1)switch(n.n){case 0:return a=1===t.code?"success":"warning",e.$notify(t.message,a),e.modalCambioSede.open=!1,n.n=1,e.updateGrid();case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()).catch(function(n){e.$notify(n.error.message,"warning")})}):e.$notify("Debe seleccionar una sede distinta a la actual","warning");case 1:return n.a(2)}},n)}))()},updateEstatus:function(e,n){var t=this;return O()(A()().m(function n(){var a;return A()().w(function(n){while(1)switch(n.n){case 0:a={ID_ESTATUS:e.ID_ESTATUS,ID_FICHA:e.ID_FICHA},E.$http.post("api/postulacionController/updateFichaAdmision",{data:a}).then(function(){var e=O()(A()().m(function e(n){return A()().w(function(e){while(1)switch(e.n){case 0:return t.$notify(n.message,"success"),e.n=1,t.updateGrid();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t.$notify(e.error.message,"warning")});case 1:return n.a(2)}},n)}))()},updateAsesor:function(e,n){var t=this;return O()(A()().m(function n(){var a;return A()().w(function(n){while(1)switch(n.n){case 0:a={PROFCOD_ASESOR:e.PROFCOD_ASESOR,ID_FICHA:e.ID_FICHA},E.$http.post("api/postulacionController/updateFichaAdmision",{data:a}).then(function(){var e=O()(A()().m(function e(n){return A()().w(function(e){while(1)switch(e.n){case 0:return t.$notify(n.message,"success"),e.n=1,t.updateGrid();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t.$notify(e.error.message,"warning")});case 1:return n.a(2)}},n)}))()}},created:function(){var e=this;return O()(A()().m(function n(){var t,a,o,i;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getConstantesAdmision(["AD_MANEJA_SEDES","AD_NO_VALIDA_EDAD","AD_RESTRINGE_GENEROS","AD_CREDENCIALES_FICHA_ADMISION","AD_USUARIO_REGISTRO_FICHA_ADMISION","AD_ANOING_FICHAS_INSC","AD_ESTATUS_FICHA_INSC","AD_ASESOR_FICHA_INSC","AD_INFO_PAGO_FICHA_INSC","AD_MAX_OPORTUNIDADES","AD_CONST_VACANTE_FICHA_INSCRIPCION"]);case 1:return t=n.v,e.sie.manejaSedes=t.AD_MANEJA_SEDES,e.sie.noValidaEdad=t.AD_NO_VALIDA_EDAD,e.sie.restringeGeneros=t.AD_RESTRINGE_GENEROS,e.sie.addCredencialesFichaAdmision=t.AD_CREDENCIALES_FICHA_ADMISION,e.sie.usuarioRegFichaAdmision=t.AD_USUARIO_REGISTRO_FICHA_ADMISION,e.sie.addColAnioFam=t.AD_ANOING_FICHAS_INSC,e.sie.addColEstatus=t.AD_ESTATUS_FICHA_INSC,e.sie.addColAsesor=t.AD_ASESOR_FICHA_INSC,e.sie.addColInfoPago=t.AD_INFO_PAGO_FICHA_INSC,e.sie.addColOportunidades=t.AD_MAX_OPORTUNIDADES>1,e.sie.addConstanciaVacante=t.AD_CONST_VACANTE_FICHA_INSCRIPCION,a=[{id:"viewFichasInscripcion",ref:"formApp"}],n.n=2,e.loadSchemas(a);case 2:return e.initReportes(),e.initExportar(),e.sie.manejaSedes&&e.$nextTick(O()(A()().m(function n(){var t,a;return A()().w(function(n){while(1)switch(n.n){case 0:return t={label:"Sedes",icon:"add_location",click:e.verSedes,params:{view:"viewFichasInscripcion"}},e.botonesForm=e.botonesForm.concat(t),n.n=1,e.addcolGrid({schema:"viewFichasInscripcion",index:8,name:"EMPDES",label:"Sede",align:"left"});case 1:return n.n=2,e.addBotonGrid({schema:"viewFichasInscripcion",index:8,icon:"add_location",eventos:"cambioSede",permiso:3});case 2:return n.n=3,e.getApiAction("api/postulacionController/getSedes",{});case 3:a=n.v,e.modalCambioSede.items=e.sieSelectOptions(a,"EMPCOD","EMPDES");case 4:return n.a(2)}},n)}))),e.sie.usuarioRegFichaAdmision&&e.$nextTick(O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.addcolGrid({schema:"viewFichasInscripcion",index:8,name:"USUARIO_REGISTRO",label:"Usuario registro",align:"left",posi:-1});case 1:return n.a(2)}},n)}))),e.sie.addColAnioFam&&e.$nextTick(O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.addcolGrid({schema:"viewFichasInscripcion",index:8,name:"ANOING_FAM",label:"Ing. Familia",align:"left",posi:-1});case 1:return n.a(2)}},n)}))),e.sie.addColEstatus&&e.$nextTick(O()(A()().m(function n(){var t,a,o;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getApiAction("api/postulacionController/getEstatus",{order:{sidx:"NOMBRE",sord:"ASC"}});case 1:return t=n.v,a=e.sieSelectOptions(t,"ID_ESTATUS","NOMBRE"),o={name:"ID_ESTATUS",component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:a,event:"updateEstatus"},n.n=2,e.addcolGrid({schema:"viewFichasInscripcion",index:8,name:"ID_ESTATUS",label:"Estatus",align:"left",posi:-1,editor:o});case 2:return n.a(2)}},n)}))),e.sie.addColAsesor&&e.$nextTick(O()(A()().m(function n(){var t,a,o;return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getApiAction("api/postulacionController/getAsesores",{});case 1:return t=n.v,a=e.sieSelectOptions(t,"PROFCOD","USUCOD"),o={name:"PROFCOD_ASESOR",component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:a,event:"updateAsesor"},n.n=2,e.addcolGrid({schema:"viewFichasInscripcion",index:8,name:"PROFCOD_ASESOR",label:"Asesor",align:"left",posi:-1,editor:o});case 2:return n.a(2)}},n)}))),e.sie.addColInfoPago&&e.$nextTick(O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.addcolGrid({schema:"viewFichasInscripcion",index:8,name:"INFO_PAGO_DA",label:"Pago",align:"left",posi:-1});case 1:return n.a(2)}},n)}))),e.sie.addColOportunidades&&e.$nextTick(O()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.addcolGrid({schema:"viewFichasInscripcion",index:8,name:"NRO_OPORTUNIDAD",label:"#Oportunidad",align:"center",posi:-1});case 1:return n.a(2)}},n)}))),o=[],o.push({id:"estados",dto:"PostulacionDto",method:"getIdsAdmEstado",params:'{"codigos": ["INTERESADO", "ADMITIDO", "INGRESANTE"]}'}),o.push({id:"periodos",dto:"PostulacionDto",method:"getPeriodos",params:"{}"}),n.n=3,e.getAllData(o);case 3:i=n.v,e.idsEstadosAdmision=i.estados,e.periodos=i.periodos;case 4:return n.a(2)}},n)}))()}},N=t(12807);const F=(0,N.A)(M,[["render",c]]);var w=F}}]);