"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[80617],{80617:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ni}});var i=t(8445),o=t.n(i),n=(t(71225),t(39866),t(56285),t(50310),t(5962),t(83190),t(61758)),l=t(29104),r=t(58790),s={class:"row q-col-gutter-sm text-weight-thin text-bold"},c={class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},u={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},d={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},m={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},f={class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},p={class:"row q-gutter-xs"},g={class:"col"},b={class:"col-xs-12"},h={class:"row q-pa-sm q-col-gutter-sm"},v={class:"col-xs-12"},C={class:"col-xs-12"},A={class:"col-xs-12"},M={class:"col-xs-12 column items-end"},E={key:0,class:"row q-gutter-sm"},D={class:"row q-pa-sm q-col-gutter-sm"},w={class:"col-xs-12"},x={class:"col-xs-12"},I={class:"row q-col-gutter-sm q-pb-sm"},k={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},F={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},O={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},R={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},V={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},L={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},y={class:"col-xs-12"},T={class:"row q-col-gutter-sm"},B={class:"col-xs-12 col-sm-6 col-md-4"},S={class:"col-xs-12 col-sm-6 col-md-4"},U={class:"col-xs-12 col-sm-6 col-md-4"},N={class:"col-xs-12 col-sm-6"},P={class:"row q-col-gutter-sm"},q={class:"col-xs-12 col-sm-4"},$={class:"col-xs-12 col-sm-8"},_={class:"row q-gutter-xs"},j={class:"col"},H={class:"col-xs-12 col-sm-6 column justify-center"},G={class:"row q-col-gutter-xs"},Q={class:"col-xs-12 col-sm-6 col-md-6 col-lg-3"},X={class:"col-xs-12 col-sm-6 col-md-6 col-lg-3"},Y={class:"col-xs-12 col-sm-6 col-md-6 col-lg-3"},J={class:"col-xs-12 col-sm-6 col-md-6 col-lg-3"},z={class:"col-xs-12 sie-flat"},W={class:"row q-pa-sm q-col-gutter-sm ficha-row sie-flat"},K={class:"col-xs-12 col-md-9"},Z={class:"row q-gutter-xs"},ee={class:"col-xs-12 col-md-3"},ae={class:"imagen-ficha"},te={key:0,class:"row q-pa-sm q-col-gutter-sm"},ie={class:"col-xs-12"},oe={class:"row q-col-gutter-sm q-pa-sm"},ne={class:"col-xs-12 sie-flat"},le={class:"row q-pa-sm q-col-gutter-sm biblioteca-mantenimiento-catalogacion-registro-bibliografico"},re={class:"col-xs-12"},se={class:"col-xs-12 col-sm-6 col-md-3"},ce={class:"col-xs-12 col-sm-6 col-md-3"},ue={class:"col-xs-12 col-sm-6 col-md-3"},de={class:"col-xs-12 col-sm-6 col-md-3"},me={class:"row q-gutter-xs"},fe={class:"col"},pe={class:"col-xs-12 col-sm-6"},ge={class:"col-xs-12 col-sm-3"},be={class:"col-xs-12 col-sm-3"},he={class:"row q-pa-sm q-col-gutter-sm"},ve={class:"col-xs-12"},Ce={class:"row"},Ae={key:0,class:"col-xs-12 sie-flat"},Me={key:1,class:"col-xs-12 sie-flat"},Ee={class:"col-xs-12"},De={class:"col-xs-12 sie-flat"},we={class:"col-xs-12"},xe={class:"col-xs-12"},Ie={class:"row q-col-gutter-sm"},ke={class:"col-xs-12"},Fe={class:"q-title text-weight-bold"},Oe={class:"q-body-2"},Re={class:"text-grey-7"},Ve={class:"q-body-2"},Le={class:"text-grey-7"},ye={class:"row q-gutter-sm"},Te={class:"col-xs-12"},Be={class:"col-xs-12"},Se={class:"row q-col-gutter-sm"},Ue={class:"col-xs-12"},Ne={class:"row q-gutter-sm"},Pe={key:1,class:"column col items-center justify-center"},qe={class:"row q-pa-sm q-col-gutter-sm"},$e={class:"col-xs-12"},_e={class:"col-xs-12"},je={class:"col-xs-12"},He={class:"col-xs-12"},Ge={class:"col-xs-12"},Qe={class:"row q-col-gutter-lg"},Xe={class:"col-12 text-center"},Ye={class:"column justify-center full-height full-width bg-white"},Je={class:"col-xs-12 text-center q-gutter-sm"},ze={class:"row q-pa-sm q-col-gutter-sm"},We={class:"col-xs-12"},Ke={class:"col-xs-12"},Ze={class:"col-xs-12"},ea={class:"row"},aa={class:"col-12 text-center"},ta={key:0,class:"col-xs-12"},ia={key:1,class:"col-xs-12",style:{padding:"0 !important"}},oa={class:"row q-pa-sm q-col-gutter-sm"},na={class:"col-xs-12"},la={class:"col-xs-12"},ra={class:"row q-pa-sm"},sa={class:"col-xs-12"},ca=["innerHTML"],ua={class:"row q-col-gutter-sm q-pa-sm"},da={class:"col-xs-12"},ma={class:"col-12 sie-flat"},fa={class:"row q-pa-sm"},pa={class:"col-xs-12"},ga={class:"col-12 sie-flat"},ba={class:"row q-pa-sm"},ha={class:"col-xs-12"},va={class:"col-12 sie-flat"},Ca={class:"row q-pa-sm"},Aa={class:"col-xs-12"},Ma={class:"col-12 sie-flat"},Ea={class:"row q-pa-sm"},Da={class:"col-12 q-pb-sm"},wa={class:"col-12"},xa={class:"row q-col-gutter-sm"},Ia={class:"col-xs-12 col-sm-6"},ka={class:"col-xs-12 col-sm-6"},Fa={class:"col-xs-12 col-sm-4"},Oa={class:"col-xs-12 col-sm-4"},Ra={class:"col-xs-12 col-sm-4"},Va={class:"col-12 q-pb-sm"},La={class:"col-12"},ya={class:"row q-col-gutter-sm"},Ta={class:"col-xs-12 col-sm-6"},Ba={class:"col-xs-12 col-sm-6"},Sa={class:"col-xs-12 col-sm-6"},Ua={class:"col-xs-12 col-sm-6"},Na={class:"col-12 q-pb-sm"},Pa={class:"col-12"},qa={class:"row q-col-gutter-sm"},$a={class:"col-xs-12 col-sm-3"},_a={class:"col-xs-12 col-sm-3"},ja={class:"col-xs-12 col-sm-3"},Ha={class:"col-xs-12 col-sm-3"},Ga={class:"col-xs-12"},Qa={class:"col-xs-12"},Xa={class:"col-xs-12"},Ya={class:"col-xs-12"},Ja={class:"col-12 q-pb-sm"},za={class:"row q-col-gutter-sm"},Wa={class:"col-xs-12"},Ka={class:"col-xs-12"},Za={class:"col-xs-12"},et={key:0,class:"col-12 q-pb-sm"},at={key:1,class:"col-12"},tt={class:"row q-pa-sm q-col-gutter-sm"},it={class:"col-xs-12"},ot={class:"q-pl-sm"},nt={class:"col-xs-12"},lt={class:"q-pl-sm"},rt={class:"row q-pa-sm bg-white",style:{"min-width":"400px !important"}},st={class:"col-xs-12"},ct={class:"row q-pa-sm q-col-gutter-sm"},ut={class:"col-6"},dt={class:"col-6"},mt={class:"col-xs-12"},ft={class:"col-xs-12"},pt={class:"col-xs-12"},gt={class:"col-xs-12"},bt={class:"col-xs-12"},ht={class:"row q-col-gutter-sm q-pa-md"},vt={class:"col-xs-12"};function Ct(e,a){var t=this,i=(0,n.g2)("header-btn"),Ct=(0,n.g2)("q-input"),At=(0,n.g2)("q-select"),Mt=(0,n.g2)("q-tooltip"),Et=(0,n.g2)("q-btn"),Dt=(0,n.g2)("sie-table"),wt=(0,n.g2)("q-card-section"),xt=(0,n.g2)("q-card"),It=(0,n.g2)("q-radio"),kt=(0,n.g2)("sie-modal"),Ft=(0,n.g2)("q-checkbox"),Ot=(0,n.g2)("multi-n-g"),Rt=(0,n.g2)("q-carousel-slide"),Vt=(0,n.g2)("q-carousel-control"),Lt=(0,n.g2)("q-carousel"),yt=(0,n.g2)("q-item-label"),Tt=(0,n.g2)("q-icon"),Bt=(0,n.g2)("q-item-section"),St=(0,n.g2)("q-item"),Ut=(0,n.g2)("q-list"),Nt=(0,n.g2)("box-imagen"),Pt=(0,n.g2)("q-toggle"),qt=(0,n.g2)("q-tab"),$t=(0,n.g2)("q-tabs"),_t=(0,n.g2)("q-separator"),jt=(0,n.g2)("marc-basica"),Ht=(0,n.g2)("q-form"),Gt=(0,n.g2)("q-img"),Qt=(0,n.g2)("q-tab-panel"),Xt=(0,n.g2)("q-tab-panels"),Yt=(0,n.g2)("sie-pdf"),Jt=(0,n.g2)("sie-vacio"),zt=(0,n.g2)("sie-upload"),Wt=(0,n.g2)("q-date"),Kt=(0,n.g2)("q-popup-proxy"),Zt=(0,n.g2)("q-dialog"),ei=(0,n.g2)("q-page"),ai=(0,n.gN)("lazy"),ti=(0,n.gN)("ripple");return(0,n.uX)(),(0,n.Wv)(ei,{class:"biblioteca-mantenimiento-catalogacion q-pa-sm sie-flat"},{default:(0,n.k6)(function(){return[(0,n.bF)(xt,{flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{name:"Catalogación de Registros Bibliográficos",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(wt,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",s,[(0,n.Lk)("div",c,[(0,n.bF)(Ct,{modelValue:e.filter.descripcion,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.filter.descripcion=a}),label:"Descripción",debounce:"600",onKeyup:a[1]||(a[1]=(0,l.jR)(function(a){return e.getCatalogacion()},["enter"]))},null,8,["modelValue"])]),(0,n.Lk)("div",u,[(0,n.bF)(At,{modelValue:e.filter.tabla,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.filter.tabla=a}),options:e.filter.tablas,"option-label":"MARCETI","option-value":"MARCCOD",label:"Campos",onInput:a[3]||(a[3]=function(a){e.page=1,e.getCatalogacionTabla()})},null,8,["modelValue","options"])]),(0,n.Lk)("div",d,[(0,n.bF)(At,{modelValue:e.filter.tipo,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.filter.tipo=a}),options:e.filter.tipos,label:"Presentación",onInput:a[5]||(a[5]=function(a){return e.getCatalogacion()})},null,8,["modelValue","options"])]),(0,n.Lk)("div",m,[(0,n.bF)(At,{modelValue:e.filter.formato,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.filter.formato=a}),options:e.filter.formatos,"option-label":"FORDESC","option-value":"FORCOD",label:"Tipo de Formato",onInput:a[7]||(a[7]=function(a){return e.getCatalogacion()})},null,8,["modelValue","options"])]),(0,n.Lk)("div",f,[(0,n.Lk)("div",p,[(0,n.Lk)("div",g,[(0,n.bF)(At,{modelValue:e.filter.bibcod,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.filter.bibcod=a}),"emit-value":"","option-label":"BIBDESC","option-value":"BIBCOD",options:e.bbibliotecas,label:"Biblioteca",onInput:a[9]||(a[9]=function(a){return e.getCatalogacion()})},null,8,["modelValue","options"])]),(0,n.bF)(Et,{icon:"search",color:"primary",dense:"",onClick:a[10]||(a[10]=function(a){return e.getCatalogacion()})},{default:(0,n.k6)(function(){return[(0,n.bF)(Mt,null,{default:(0,n.k6)(function(){return o()(a[119]||(a[119]=[(0,n.eW)("Buscar",-1)]))}),_:1})]}),_:1}),(0,n.bF)(Et,{icon:"broom",color:"primary",dense:"",onClick:a[11]||(a[11]=function(a){return e.limpiar()})},{default:(0,n.k6)(function(){return[(0,n.bF)(Mt,null,{default:(0,n.k6)(function(){return o()(a[120]||(a[120]=[(0,n.eW)("Limpiar",-1)]))}),_:1})]}),_:1})])]),(0,n.Lk)("div",b,[(0,n.bF)(Dt,{ref:"refCatalogacion",columns:e.fields,data:e.rows,selection:"single",config:e.config,context:t,footer:!1,css:{height:"calc(100vh - 210px)"},onRowSelectedDbl:e.editarDblCatalogacion,"show-search":!1,"sort-server":"","total-registros":e.totalRegistros,"total-pagination":e.totalPagination,onListarPagination:e.getCatalogacion},null,8,["columns","data","config","onRowSelectedDbl","total-registros","total-pagination","onListarPagination"])])])]}),_:1})]}),_:1}),(0,n.bF)(kt,{esc:"","esc-click":"",modelValue:e.openModalReportes,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.openModalReportes=a}),title:"Reportes",footer:!1,css:{width:"500px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",h,[a[121]||(a[121]=(0,n.Lk)("div",{class:"col-xs-12"},[(0,n.Lk)("b",null,"Indique una opción")],-1)),(0,n.Lk)("div",v,[(0,n.bF)(It,{dense:"",modelValue:e.tipoReporte,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.tipoReporte=a}),val:1,label:"Reporte inventario"},null,8,["modelValue"])]),(0,n.Lk)("div",C,[(0,n.bF)(It,{dense:"",modelValue:e.tipoReporte,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.tipoReporte=a}),val:2,label:"Reporte resumen inventario"},null,8,["modelValue"])]),(0,n.Lk)("div",A,[(0,n.bF)(It,{dense:"",modelValue:e.tipoReporte,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.tipoReporte=a}),val:3,label:"Reporte de inventario seleccionado"},null,8,["modelValue"])]),(0,n.Lk)("div",M,[1===e.tipoReporte?((0,n.uX)(),(0,n.CE)("div",E,[e.mostrarPdfRep1?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(Et,{key:0,icon:"file_pdf",label:"pdf",color:"primary",onClick:a[15]||(a[15]=function(a){return e.reporte("pdf")})})),(0,n.bF)(Et,{icon:"file_excel",label:"Excel",color:"primary",onClick:a[16]||(a[16]=function(a){return e.reporte("xls")})})])):2===e.tipoReporte?((0,n.uX)(),(0,n.Wv)(Et,{key:1,icon:"file_pdf",label:"pdf",color:"primary",onClick:a[17]||(a[17]=function(a){return e.reporte("pdf")})})):((0,n.uX)(),(0,n.Wv)(Et,{key:2,icon:"file_excel",label:"Excel",color:"primary",onClick:a[18]||(a[18]=function(a){return e.reporte("xls")})}))])])]}),_:1},8,["modelValue"]),(0,n.bF)(kt,{esc:"","esc-click":"",modelValue:e.openModalConsultar,"onUpdate:modelValue":a[40]||(a[40]=function(a){return e.openModalConsultar=a}),title:"Inventario de biblioteca",footer:!1,maximized:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",D,[(0,n.Lk)("div",w,[(0,n.bF)(i,{"padding-x":"",name:"Catalogación de Registros Bibliográficos",buttons:e.buttonsConsultar},null,8,["buttons"])]),(0,n.Lk)("div",x,[(0,n.Lk)("div",I,[(0,n.Lk)("div",k,[(0,n.Lk)("span",null,[a[122]||(a[122]=(0,n.Lk)("b",null,"Nº de Fichas :",-1)),(0,n.Lk)("span",null,(0,r.v_)(e.contadoresInventario.fichas),1)])]),(0,n.Lk)("div",F,[(0,n.Lk)("span",null,[a[123]||(a[123]=(0,n.Lk)("b",null,"Nº de Ejemplares :",-1)),(0,n.Lk)("span",null,(0,r.v_)(e.contadoresInventario.ejemplares),1)])]),(0,n.Lk)("div",O,[(0,n.Lk)("span",null,[a[124]||(a[124]=(0,n.Lk)("b",null,"Disponibles :",-1)),(0,n.Lk)("span",null,(0,r.v_)(e.contadoresInventario.disponibles),1)])]),(0,n.Lk)("div",R,[(0,n.Lk)("span",null,[a[125]||(a[125]=(0,n.Lk)("b",null,"Bajas :",-1)),(0,n.Lk)("span",null,(0,r.v_)(e.contadoresInventario.bajas),1)])]),(0,n.Lk)("div",V,[(0,n.Lk)("span",null,[a[126]||(a[126]=(0,n.Lk)("b",null,"Reservados :",-1)),(0,n.Lk)("span",null,(0,r.v_)(e.contadoresInventario.reservados),1)])]),(0,n.Lk)("div",L,[(0,n.Lk)("span",null,[a[127]||(a[127]=(0,n.Lk)("b",null,"Prestados :",-1)),(0,n.Lk)("span",null,(0,r.v_)(e.contadoresInventario.prestados),1)])])])]),(0,n.Lk)("div",y,[(0,n.Lk)("div",T,[(0,n.Lk)("div",B,[(0,n.bF)(At,{modelValue:e.filterConsultar.formato,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.filterConsultar.formato=a}),options:e.filter.formatos,"option-label":"FORDESC","option-value":"FORCOD",label:"Tipo de Formato","emit-value":"",onInput:a[21]||(a[21]=function(a){return e.listarInventario()})},null,8,["modelValue","options"])]),(0,n.Lk)("div",S,[(0,n.bF)(At,{modelValue:e.filterConsultar.bibcod,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.filterConsultar.bibcod=a}),"emit-value":"","option-label":"BIBDESC","option-value":"BIBCOD",options:e.bbibliotecas,label:"Biblioteca",onInput:a[23]||(a[23]=function(a){e.loadUbicacion(e.filterConsultar.bibcod,!0),e.listarInventario()})},null,8,["modelValue","options"])]),(0,n.Lk)("div",U,[(0,n.bF)(At,{modelValue:e.filterConsultar.ubicacod,"onUpdate:modelValue":a[24]||(a[24]=function(a){return e.filterConsultar.ubicacod=a}),"option-label":"UBICADES","option-value":"UBICACOD",options:e.ubicaciones,label:"Ubicación",onInput:a[25]||(a[25]=function(a){return e.listarInventario()})},null,8,["modelValue","options"])])]),(0,n.bF)(Ot,{class:"q-col-gutter-sm q-pt-sm",ref:"refMultiNG","nivel-todos":"","grado-todos":"","class-nivel":"col-xs-12 col-sm-6 col-md-4","class-grado":"col-xs-12 col-sm-6 col-md-4"},{aftergrado:(0,n.k6)(function(){return[(0,n.bF)(Ft,{modelValue:e.filterConsultar.extricto,"onUpdate:modelValue":a[26]||(a[26]=function(a){return e.filterConsultar.extricto=a}),label:"Estricto",dense:""},null,8,["modelValue"])]}),_:1},512)]),(0,n.Lk)("div",N,[(0,n.Lk)("div",P,[(0,n.Lk)("div",q,[(0,n.bF)(Ct,{modelValue:e.filterConsultar.numingreso,"onUpdate:modelValue":a[27]||(a[27]=function(a){return e.filterConsultar.numingreso=a}),label:"Num. Ingreso",onKeyup:a[28]||(a[28]=(0,l.jR)(function(a){return e.listarInventario()},["enter"]))},null,8,["modelValue"])]),(0,n.Lk)("div",$,[(0,n.Lk)("div",_,[(0,n.Lk)("div",j,[(0,n.bF)(Ct,{modelValue:e.filterConsultar.titulo,"onUpdate:modelValue":a[29]||(a[29]=function(a){return e.filterConsultar.titulo=a}),label:"Título",onKeyup:a[30]||(a[30]=(0,l.jR)(function(a){return e.listarInventario()},["enter"]))},null,8,["modelValue"])]),(0,n.bF)(Et,{class:"column justify-center",icon:"search",dense:"",color:"primary",onClick:a[31]||(a[31]=function(a){return e.listarInventario()})}),(0,n.bF)(Et,{class:"column justify-center",icon:"broom",dense:"",color:"primary",onClick:e.limpiarFiltrosConsultar},null,8,["onClick"])])])])]),(0,n.Lk)("div",H,[(0,n.Lk)("div",G,[(0,n.Lk)("div",Q,[(0,n.bF)(Ft,{modelValue:e.filterConsultar.estados,"onUpdate:modelValue":a[32]||(a[32]=function(a){return e.filterConsultar.estados=a}),val:"D",label:"Disponibles",dense:"",onInput:a[33]||(a[33]=function(a){return e.listarInventario()})},null,8,["modelValue"])]),(0,n.Lk)("div",X,[(0,n.bF)(Ft,{modelValue:e.filterConsultar.estados,"onUpdate:modelValue":a[34]||(a[34]=function(a){return e.filterConsultar.estados=a}),val:"R",label:"Reservado",dense:"",onInput:a[35]||(a[35]=function(a){return e.listarInventario()})},null,8,["modelValue"])]),(0,n.Lk)("div",Y,[(0,n.bF)(Ft,{modelValue:e.filterConsultar.estados,"onUpdate:modelValue":a[36]||(a[36]=function(a){return e.filterConsultar.estados=a}),val:"P",label:"Prestado",dense:"",onInput:a[37]||(a[37]=function(a){return e.listarInventario()})},null,8,["modelValue"])]),(0,n.Lk)("div",J,[(0,n.bF)(Ft,{modelValue:e.filterConsultar.estados,"onUpdate:modelValue":a[38]||(a[38]=function(a){return e.filterConsultar.estados=a}),val:"B",label:"Bajas",dense:"",onInput:a[39]||(a[39]=function(a){return e.listarInventario()})},null,8,["modelValue"])])])]),(0,n.Lk)("div",z,[(0,n.bF)(Dt,{class:"grilla-consultar",ref:"refConsultar",onRowSelectedDbl:e.dblSelectConsultar,columns:e.fieldsConsultar,data:e.rowsConsultar,selection:"single",config:e.configConsultar,context:t,css:{height:"calc(100vh - 253px)"},"show-search":!1,"sort-server":"","total-registros":e.totalRegistrosConsultar,"total-pagination":e.totalPaginationConsultar,onListarPagination:e.listarInventario},null,8,["onRowSelectedDbl","columns","data","config","total-registros","total-pagination","onListarPagination"])])])]}),_:1},8,["modelValue"]),(0,n.bF)(kt,{modelValue:e.openModal,"onUpdate:modelValue":a[42]||(a[42]=function(a){return e.openModal=a}),footer:!1,title:"Ficha",css:{width:"740px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",W,[(0,n.Lk)("div",K,[(0,n.Lk)("div",Z,[(0,n.bF)(Dt,{columns:e.fieldsFicha,data:e.rowsFicha,"show-search":!1,selection:"single",config:e.configFicha,context:t,css:{"max-height":"calc(100vh - 374px)",minHeight:"250px"}},null,8,["columns","data","config"])])]),(0,n.Lk)("div",ee,[(0,n.Lk)("div",ae,[(0,n.bF)(Lt,{infinite:"",color:"primary",modelValue:e.slide,"onUpdate:modelValue":a[41]||(a[41]=function(a){return e.slide=a}),"quick-nav":""},{"control-button":(0,n.k6)(function(a){return[(0,n.bF)(Vt,{position:"top-right",offset:[18,22]},{default:(0,n.k6)(function(){return[(0,n.bF)(Et,{push:"",round:"",dense:"",color:"white","text-color":"primary",icon:e.fullscreen?"fullscreen_exit":"fullscreen",onClick:function(e){return a.toggleFullscreen()}},null,8,["icon","onClick"])]}),_:2},1024)]}),default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.imagenes,function(e,a){return(0,n.uX)(),(0,n.Wv)(Rt,{key:a,class:"carousel-ficha flex bg-white q-pa-none",name:a+1},{default:(0,n.k6)(function(){return[(0,n.bo)((0,n.Lk)("img",null,null,512),[[ai,{src:e.SRC_IMG,error:"statics/img/librodefault.png"}]])]}),_:2},1032,["name"])}),128))]}),_:1},8,["modelValue"])])])]),e.materialesDigitales.length>0?((0,n.uX)(),(0,n.CE)("div",te,[(0,n.Lk)("div",ie,[(0,n.bF)(Ut,{bordered:!1},{default:(0,n.k6)(function(){return[(0,n.bF)(yt,{header:""},{default:(0,n.k6)(function(){return o()(a[128]||(a[128]=[(0,n.eW)("Material digital",-1)]))}),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.materialesDigitales,function(a){return(0,n.bo)(((0,n.uX)(),(0,n.Wv)(St,{clickable:"",dense:"",onClick:function(t){return e.verMaterialDigital(a)}},{default:(0,n.k6)(function(){return[(0,n.bF)(Bt,{avatar:""},{default:(0,n.k6)(function(){return[(0,n.bF)(Tt,{name:1===a.TIPO_MATERIAL?"file_pdf":"link",size:"24px",color:"primary"},null,8,["name"])]}),_:2},1024),(0,n.bF)(Bt,null,{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(a.TITULO),1)]}),_:2},1024)]}),_:2},1032,["onClick"])),[[ti]])}),256))]}),_:1})])])):(0,n.Q3)("v-if",!0)]}),_:1},8,["modelValue"]),e.openModalImagen?((0,n.uX)(),(0,n.Wv)(Nt,{key:0,height:"90%",modelValue:e.openModalImagen,"onUpdate:modelValue":a[43]||(a[43]=function(a){return e.openModalImagen=a}),urlImage:e.urlImagenBox,titulo:e.titleBox,maximized:""},null,8,["modelValue","urlImage","titulo"])):(0,n.Q3)("v-if",!0),(0,n.bF)(kt,{esc:"",modelValue:e.openModalCamposMarcBasica,"onUpdate:modelValue":a[44]||(a[44]=function(a){return e.openModalCamposMarcBasica=a}),title:"Agregar Campos",css:{width:"600px"},ok:"Agregar Campos",onSubmit:e.agregarCampos},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",oe,[(0,n.Lk)("div",ne,[(0,n.bF)(Dt,{columns:e.fieldsCamposMarcBasica,data:e.rowsCamposMarcBasica,config:e.configCamposMarcBasica,context:e.context,"check-all-position":"right","show-check-all":"",onMarkAll:e.markAll,css:{"max-height":"330px"}},null,8,["columns","data","config","context","onMarkAll"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(kt,{esc:"",modelValue:e.openModalForm,"onUpdate:modelValue":a[55]||(a[55]=function(a){return e.openModalForm=a}),title:"Registro Bibliográfico ".concat(e.currentCatalogacion.TITULO||""),footer:!1,maximized:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",le,[(0,n.Lk)("div",re,[(0,n.bF)(i,{"padding-x":"",name:"",buttons:e.buttonsRegistroBibliografico},null,8,["buttons"])]),(0,n.Lk)("div",se,[(0,n.bF)(At,{modelValue:e.filterForm.formato,"onUpdate:modelValue":a[45]||(a[45]=function(a){return e.filterForm.formato=a}),options:e.filter.formatos,"option-label":"FORDESC","option-value":"FORCOD",label:"Tipo de Formato","emit-value":"",onInput:a[46]||(a[46]=function(a){return e.cambiarAttAndTab(!1)})},null,8,["modelValue","options"])]),(0,n.Lk)("div",ce,[(0,n.bF)(At,{modelValue:e.filterForm.estilo,"onUpdate:modelValue":a[47]||(a[47]=function(a){return e.filterForm.estilo=a}),options:e.filterForm.estilos,label:"Estilo",onInput:a[48]||(a[48]=function(a){return e.cambiarAttAndTab(!0)})},null,8,["modelValue","options"])]),(0,n.Lk)("div",ue,[(0,n.bF)(At,{modelValue:e.filterForm.uso,"onUpdate:modelValue":a[49]||(a[49]=function(a){return e.filterForm.uso=a}),options:e.filterForm.usos,label:"Uso",onInput:e.cambiarUso},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",de,[(0,n.Lk)("div",me,[(0,n.Lk)("div",fe,[(0,n.bF)(At,{modelValue:e.filterForm.tipo,"onUpdate:modelValue":a[50]||(a[50]=function(a){return e.filterForm.tipo=a}),options:e.filterForm.tipos,label:"Presentación"},null,8,["modelValue","options"])]),(0,n.bF)(Et,{icon:"plus",color:"primary",size:"10px",onClick:e.modalCamposMarcBasica},{default:(0,n.k6)(function(){return[(0,n.bF)(Mt,null,{default:(0,n.k6)(function(){return o()(a[129]||(a[129]=[(0,n.eW)("Agregar Campos",-1)]))}),_:1})]}),_:1},8,["onClick"])])]),(0,n.bo)((0,n.Lk)("div",pe,[(0,n.bF)(Ot,{class:"q-col-gutter-sm",ref:"refMultiNG","nivel-todos":"","grado-todos":"",n:e.nivel,g:e.grado,"class-nivel":"col-xs-12 col-md-6","class-grado":"col-xs-12 col-md-6"},null,8,["n","g"])],512),[[l.aG,"T"!==e.filterForm.uso]]),(0,n.Lk)("div",ge,[(0,n.bF)(Pt,{dense:"",modelValue:e.filterForm.devuelve,"onUpdate:modelValue":a[51]||(a[51]=function(a){return e.filterForm.devuelve=a}),label:"Material de Regalo","true-value":0,"false-value":1},null,8,["modelValue"])]),(0,n.Lk)("div",be,[(0,n.bF)(Pt,{dense:"",modelValue:e.filterForm.estado,"onUpdate:modelValue":a[52]||(a[52]=function(a){return e.filterForm.estado=a}),label:"Disponible","true-value":1,"false-value":0},null,8,["modelValue"])])]),(0,n.bo)((0,n.Lk)("div",he,[(0,n.Lk)("div",ve,[(0,n.bF)(xt,{flat:""},{default:(0,n.k6)(function(){return[(0,n.bF)(wt,{style:{padding:"0"}},{default:(0,n.k6)(function(){return[e.myTabs.length>0?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)($t,{class:"q-gutter-xs custom-tabs",color:"primary",align:"left",dense:!0,modelValue:e.tab,"onUpdate:modelValue":a[53]||(a[53]=function(a){return e.tab=a})},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.myTabs,function(a){return(0,n.bo)(((0,n.uX)(),(0,n.Wv)(qt,{color:"primary","no-caps":"",name:a.name,label:a.title,onClick:function(t){return e.cambiarTab(a)}},{default:(0,n.k6)(function(){return[(0,n.bF)(Mt,null,{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(a.tooltip),1)]}),_:2},1024)]}),_:2},1032,["name","label","onClick"])),[[l.aG,a.show&&!e.isCopy]])}),256))]}),_:1},8,["modelValue"]),(0,n.bF)(_t),(0,n.bF)(Xt,{modelValue:e.tab,"onUpdate:modelValue":a[54]||(a[54]=function(a){return e.tab=a}),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.myTabs,function(t){return(0,n.bo)(((0,n.uX)(),(0,n.Wv)(Qt,{style:{padding:"0 !important"},name:t.name},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ce,[0===t.index&&"pbasica"===e.filterForm.estilo?((0,n.uX)(),(0,n.CE)("div",Ae,[(0,n.bF)(Ht,{ref_for:!0,ref:"formpbasicamarc",onSubmit:e.guardarRegistroBibliografico},{default:(0,n.k6)(function(){return[(0,n.bF)(jt,{context:e.context,type:"pbasica"},null,8,["context"])]}),_:1},8,["onSubmit"])])):"pmarc"!==e.filterForm.estilo||[10,11,12].includes(t.index)?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.CE)("div",Me,[(0,n.bF)(Ht,{ref_for:!0,ref:"formpbasicamarc"},{default:(0,n.k6)(function(){return[(0,n.bF)(jt,{context:e.context,type:"pmarc"},null,8,["context"])]}),_:1},512)])),10===t.index?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.Lk)("div",Ee,[(0,n.bF)(i,{border:!1,"padding-x":"",name:"",buttons:e.buttonsExistencias},null,8,["buttons"])]),(0,n.Lk)("div",De,[(0,n.bF)(Dt,{ref_for:!0,ref:"refExistencias",columns:e.fieldsExistencias,data:e.rowsExistencias,config:e.configExistencias,context:e.context,selection:"multiple",css:{height:"calc(100vh - 300px)"}},null,8,["columns","data","config","context"])])],64)):(0,n.Q3)("v-if",!0),11===t.index?((0,n.uX)(),(0,n.CE)(n.FK,{key:3},[(0,n.Lk)("div",we,[(0,n.bF)(i,{name:"Imágenes",buttons:e.buttonsImagenes},null,8,["buttons"])]),(0,n.Lk)("div",xe,[(0,n.Lk)("div",Ie,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.imagenes,function(t){return(0,n.uX)(),(0,n.CE)("div",ke,[(0,n.bF)(Ut,null,{default:(0,n.k6)(function(){return[(0,n.bF)(St,null,{default:(0,n.k6)(function(){return[(0,n.bF)(Bt,{avatar:""},{default:(0,n.k6)(function(){return[(0,n.bF)(Gt,{class:"cursor-pointer column justify-center",contain:"",src:e.generarUrlImagen(t),style:{height:"100px",width:"100px"},onError:function(a){return e.errorImagen(t)}},null,8,["src","onError"])]}),_:2},1024),(0,n.bF)(Bt,null,{default:(0,n.k6)(function(){return[(0,n.bF)(yt,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("span",Fe,(0,r.v_)(t.TITULO),1)]}),_:2},1024),t.NUMIMAGEN>2?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(yt,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("span",Oe,[a[130]||(a[130]=(0,n.Lk)("span",{class:"text-grey-9 text-bold"},"Descripción :",-1)),(0,n.Lk)("span",Re,(0,r.v_)(t.DESCRIPCION),1)])]}),_:2},1024),(0,n.bF)(yt,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("span",Ve,[a[131]||(a[131]=(0,n.Lk)("span",{class:"text-grey-9 text-bold"},"N° Página :",-1)),(0,n.Lk)("span",Le,(0,r.v_)(t.NUMPAG),1)])]}),_:2},1024)],64)):(0,n.Q3)("v-if",!0),(0,n.bF)(_t,{class:"separator-bottom"}),(0,n.bF)(yt,{caption:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ye,[(0,n.bF)(Et,{class:"q-mt-sm",label:"Editar",unelevated:"",flat:"",dense:"",color:"primary",onClick:function(a){return e.editarImagen(t)}},null,8,["onClick"]),t.NUMIMAGEN>2?((0,n.uX)(),(0,n.Wv)(Et,{key:0,class:"q-mt-sm",label:"Eliminar",unelevated:"",flat:"",dense:"",color:"primary",onClick:function(a){return e.eliminarImagen(t)}},null,8,["onClick"])):(0,n.Q3)("v-if",!0)])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)])}),256))])])],64)):(0,n.Q3)("v-if",!0),12===t.index?((0,n.uX)(),(0,n.CE)(n.FK,{key:4},[(0,n.Lk)("div",Te,[(0,n.bF)(i,{name:"Material Digital",buttons:e.buttonsMaterialesDigitales},null,8,["buttons"])]),(0,n.Lk)("div",Be,[(0,n.Lk)("div",Se,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.materialesDigitales,function(a){return(0,n.uX)(),(0,n.CE)("div",Ue,[(0,n.bF)(Ut,null,{default:(0,n.k6)(function(){return[(0,n.bF)(St,{style:{padding:"0 !important"}},{default:(0,n.k6)(function(){return[(0,n.bF)(Bt,null,{default:(0,n.k6)(function(){return[(0,n.bF)(yt,{class:"q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,[(0,n.Lk)("span",null,[(0,n.bF)(Tt,{name:1===a.TIPO_MATERIAL?"file_pdf":"link",size:"24px",color:"primary"},null,8,["name"])]),(0,n.Lk)("span",null,(0,r.v_)(a.TITULO),1)])]}),_:2},1024),(0,n.bF)(_t,{class:"separator-bottom"}),(0,n.bF)(yt,{class:"q-pa-sm",caption:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ne,[(0,n.bF)(Et,{class:"q-mt-sm",label:"Editar",unelevated:"",flat:"",dense:"",color:"primary",onClick:function(t){return e.editarArchivo(a)}},null,8,["onClick"]),(0,n.bF)(Et,{class:"q-mt-sm",label:"Eliminar",unelevated:"",flat:"",dense:"",color:"primary",onClick:function(t){return e.eliminarArchivo(a)}},null,8,["onClick"]),(0,n.bF)(Et,{class:"q-mt-sm",label:"Visualizar",unelevated:"",flat:"",dense:"",color:"primary",onClick:function(t){return e.verMaterialDigital(a)}},null,8,["onClick"])])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)])}),256))])])],64)):(0,n.Q3)("v-if",!0)])]}),_:2},1032,["name"])),[[l.aG,t.show]])}),256))]}),_:1},8,["modelValue"])],64)):(0,n.Q3)("v-if",!0)]}),_:1})]}),_:1})])],512),[[l.aG,e.showTabs]])]}),_:1},8,["modelValue","title"]),(0,n.bF)(kt,{class:"modal-material",column:"",modelValue:e.openMaterialDigital,"onUpdate:modelValue":a[56]||(a[56]=function(a){return e.openMaterialDigital=a}),title:e.tituloMaterial,footer:!1,header:!0,ok:!1},{default:(0,n.k6)(function(){return[e.urlMaterialDigital?((0,n.uX)(),(0,n.Wv)(Yt,{key:0,class:"col",src:e.urlMaterialDigital},null,8,["src"])):((0,n.uX)(),(0,n.CE)("div",Pe,[(0,n.bF)(Jt,{class:"col",icon:"phonelink_erase"})]))]}),_:1},8,["modelValue","title"]),(0,n.bF)(kt,{esc:"","esc-click":"",modelValue:e.openModalmagenes,"onUpdate:modelValue":a[64]||(a[64]=function(a){return e.openModalmagenes=a}),title:"".concat("update"===e.action?"Actualizar":"Agregar"," Imagen"),css:{width:"600px"},footer:!1,onSubmit:e.sendImage},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",qe,[(0,n.Lk)("div",$e,[(0,n.bF)(At,{modelValue:e.formImagenes.tipoImagen,"onUpdate:modelValue":a[57]||(a[57]=function(a){return e.formImagenes.tipoImagen=a}),options:e.tipoImagenes,"emit-value":"",label:"Tipo Imagen",onInput:e.cambiarTipoImagen},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",_e,[(0,n.bF)(Ct,{modelValue:e.formImagenes.titulo,"onUpdate:modelValue":a[58]||(a[58]=function(a){return e.formImagenes.titulo=a}),readonly:3!==e.formImagenes.tipoImagen,label:"Título"},null,8,["modelValue","readonly"])]),3===e.formImagenes.tipoImagen?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",je,[(0,n.bF)(Ct,{modelValue:e.formImagenes.descripcion,"onUpdate:modelValue":a[59]||(a[59]=function(a){return e.formImagenes.descripcion=a}),label:"Descripción"},null,8,["modelValue"])]),(0,n.Lk)("div",He,[(0,n.bF)(Ct,{modelValue:e.formImagenes.nroPagina,"onUpdate:modelValue":a[60]||(a[60]=function(a){return e.formImagenes.nroPagina=a}),type:"number",label:"Nro Página"},null,8,["modelValue"])])],64)):(0,n.Q3)("v-if",!0),a[132]||(a[132]=(0,n.Lk)("div",{class:"col-xs-12"},[(0,n.Lk)("div",{class:"row"},[(0,n.Lk)("div",{class:"col-xs-12 column justify-center bg-grey-4",style:{height:"30px"}},[(0,n.Lk)("div",{class:"text-color-grey-9 text-center"},[(0,n.Lk)("b",null,"Imágenes mínimo de 200x300 tipos jpg, png")])])])],-1)),(0,n.Lk)("div",Ge,[(0,n.Lk)("div",Qe,[(0,n.Lk)("div",Xe,[(0,n.bo)((0,n.bF)(Ct,{accept:".jpg, .png",ref:"fileImagenes",type:"file",onChange:a[61]||(a[61]=function(a){return e.putImage()})},null,512),[[l.aG,!1]]),(0,n.bF)(Gt,{class:"cursor-pointer column justify-center",contain:"",src:e.image,style:{height:"200px"},onClick:a[62]||(a[62]=function(a){return e.loadImage()})},{error:(0,n.k6)(function(){return[(0,n.Lk)("div",Ye,[(0,n.bF)(Tt,{size:"150px",name:"photo",color:"primary"})])]}),_:1},8,["src"])])])]),(0,n.Lk)("div",Je,[(0,n.bF)(Et,{label:"Grabar",color:"primary",onClick:e.sendImage,loading:e.loading},null,8,["onClick","loading"]),(0,n.bF)(Et,{label:"Cancelar",flat:"",onClick:a[63]||(a[63]=function(a){return e.openModalmagenes=!1})})])])]}),_:1},8,["modelValue","title","onSubmit"]),(0,n.bF)(kt,{cancel:"Cancelar",esc:"","esc-click":"",modelValue:e.openModalArchivos,"onUpdate:modelValue":a[69]||(a[69]=function(a){return e.openModalArchivos=a}),loading:e.loading,title:"Agregar Material Digital",css:{width:"600px"},onSubmit:e.grabarPdf},{default:(0,n.k6)(function(){return[(0,n.bF)(Ht,{ref:"formMaterialDigital"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ze,[(0,n.Lk)("div",We,[(0,n.bF)(At,{disable:"update"===e.actionMaterialDigital,modelValue:e.formMaterialDigital.tipoMaterialDigital,"onUpdate:modelValue":a[65]||(a[65]=function(a){return e.formMaterialDigital.tipoMaterialDigital=a}),options:e.tipoMaterialDigital,"emit-value":"",label:"Tipo Material",onInput:e.cambiarMaterialDigital},null,8,["disable","modelValue","options","onInput"])]),(0,n.Lk)("div",Ke,[(0,n.bF)(Ct,{modelValue:e.formMaterialDigital.titulo,"onUpdate:modelValue":a[66]||(a[66]=function(a){return e.formMaterialDigital.titulo=a}),label:"Título"},null,8,["modelValue"])]),(0,n.Lk)("div",Ze,[(0,n.Lk)("div",ea,[(0,n.Lk)("div",aa,[(0,n.bo)((0,n.bF)(Ct,{accept:".pdf",ref:"fileMaterialDigital",type:"file",onChange:a[67]||(a[67]=function(a){return e.putMaterialDigital()})},null,512),[[l.aG,!1]])]),1===e.formMaterialDigital.tipoMaterialDigital?((0,n.uX)(),(0,n.CE)("div",ta,[(0,n.bF)(zt,{ref:"upload",onUpload:e.addFile,icon:"file",title:"Subir Material digital",allow:["pdf"]},null,8,["onUpload"])])):((0,n.uX)(),(0,n.CE)("div",ia,[(0,n.bF)(Ct,{modelValue:e.formMaterialDigital.urlArchivo,"onUpdate:modelValue":a[68]||(a[68]=function(a){return e.formMaterialDigital.urlArchivo=a}),label:"Enlace/url/link",rules:[e.validateUrl]},null,8,["modelValue","rules"])]))])])])]}),_:1},512)]}),_:1},8,["modelValue","loading","onSubmit"]),(0,n.bF)(kt,{esc:"","esc-click":"",modelValue:e.openModalBaja,"onUpdate:modelValue":a[74]||(a[74]=function(a){return e.openModalBaja=a}),title:"Baja por Título",css:{width:"600px"},onSubmit:e.darDeBaja},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",oa,[(0,n.Lk)("div",na,[(0,n.bF)(Ct,{label:"Fecha",maxlength:"10",format:"##/##/####",modelValue:e.formBaja.bajafecha,"onUpdate:modelValue":a[72]||(a[72]=function(a){return e.formBaja.bajafecha=a}),mask:"##/##/####",readonly:""},{append:(0,n.k6)(function(){return[(0,n.bF)(Tt,{class:"cursor-pointer",name:"date_range"},{default:(0,n.k6)(function(){return[(0,n.bF)(Kt,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)(function(){return[(0,n.bF)(Wt,{mask:"DD/MM/YYYY",modelValue:e.formBaja.bajafecha,"onUpdate:modelValue":a[70]||(a[70]=function(a){return e.formBaja.bajafecha=a}),onInput:a[71]||(a[71]=function(a){return e.$refs.qDateProxy1.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,n.Lk)("div",la,[(0,n.bF)(Ct,{modelValue:e.formBaja.bajamotivo,"onUpdate:modelValue":a[73]||(a[73]=function(a){return e.formBaja.bajamotivo=a}),type:"textarea",label:"Motivo de la baja"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(kt,{modelValue:e.openModalAyuda,"onUpdate:modelValue":a[75]||(a[75]=function(a){return e.openModalAyuda=a}),title:"Ayuda",css:{width:"600px"},footer:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ra,[(0,n.Lk)("div",sa,[(0,n.Lk)("div",{innerHTML:e.currentRowEstiloBasicoMarc.MARCDES},null,8,ca)])])]}),_:1},8,["modelValue"]),(0,n.bF)(kt,{modelValue:e.openModalAutor,"onUpdate:modelValue":a[76]||(a[76]=function(a){return e.openModalAutor=a}),title:"Búsqueda de autores",css:{width:"600px"},footer:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ua,[(0,n.Lk)("div",da,[(0,n.bF)(i,{"padding-x":"",border:!1,name:"",buttons:e.buttonsAutor},null,8,["buttons"])]),(0,n.Lk)("div",ma,[(0,n.bF)(Dt,{ref:"refTableAutor",columns:e.fieldsAutor,data:e.rowsAutor,selection:"single",onRowSelected:e.seleccionarAutor,onRowSelectedDbl:e.seleccionarAutor,config:e.configAutor,context:t,css:{height:"calc(100vh - 260px)"}},null,8,["columns","data","onRowSelected","onRowSelectedDbl","config"])])])]}),_:1},8,["modelValue"]),(0,n.bF)(kt,{modelValue:e.openModalIdioma,"onUpdate:modelValue":a[77]||(a[77]=function(a){return e.openModalIdioma=a}),title:"Búsqueda de idiomas",css:{width:"600px"},footer:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",fa,[(0,n.Lk)("div",pa,[(0,n.bF)(i,{"padding-x":"",border:!1,name:"",buttons:e.buttonsIdioma},null,8,["buttons"])]),(0,n.Lk)("div",ga,[(0,n.bF)(Dt,{ref:"refTableIdioma",columns:e.fieldsIdioma,data:e.rowsIdioma,selection:"single",onRowSelectedDbl:e.seleccionarIdioma,config:e.configIdioma,context:t,css:{height:"calc(100vh - 260px)"}},null,8,["columns","data","onRowSelectedDbl","config"])])])]}),_:1},8,["modelValue"]),(0,n.bF)(kt,{modelValue:e.openModalEditora,"onUpdate:modelValue":a[78]||(a[78]=function(a){return e.openModalEditora=a}),title:"Búsqueda de Editorial",css:{width:"600px"},footer:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ba,[(0,n.Lk)("div",ha,[(0,n.bF)(i,{"padding-x":"",border:!1,name:"",buttons:e.buttonsEditora},null,8,["buttons"])]),(0,n.Lk)("div",va,[(0,n.bF)(Dt,{ref:"refTableEditorial",columns:e.fieldsEditora,data:e.rowsEditora,selection:"single",onRowSelectedDbl:e.seleccionarEditora,config:e.configEditora,context:t,css:{height:"calc(100vh - 260px)"}},null,8,["columns","data","onRowSelectedDbl","config"])])])]}),_:1},8,["modelValue"]),(0,n.bF)(kt,{modelValue:e.openModalMateria,"onUpdate:modelValue":a[79]||(a[79]=function(a){return e.openModalMateria=a}),title:"Búsqueda de Materias",css:{width:"600px"},footer:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ca,[(0,n.Lk)("div",Aa,[(0,n.bF)(i,{"padding-x":"",border:!1,name:"",buttons:e.buttonsMateria},null,8,["buttons"])]),(0,n.Lk)("div",Ma,[(0,n.bF)(Dt,{ref:"refTableMateria",columns:e.fieldsMateria,data:e.rowsMateria,selection:"single",onRowSelectedDbl:e.seleccionarMateria,config:e.configMateria,context:t,css:{height:"calc(100vh - 260px)"}},null,8,["columns","data","onRowSelectedDbl","config"])])])]}),_:1},8,["modelValue"]),(0,n.bF)(kt,{modelValue:e.openModalExistencias,"onUpdate:modelValue":a[104]||(a[104]=function(a){return e.openModalExistencias=a}),title:"Existencias",css:{width:"650px",height:"450px"},esc:"",onSubmit:e.guardarExistencia},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ea,[(0,n.Lk)("div",Da,[(0,n.bF)(i,{border:!1,dense:"",paddingX:"","font-size":"16px",name:"IDENTIFICACIÓN",auto:!1,buttons:[]})]),(0,n.Lk)("div",wa,[(0,n.Lk)("div",xa,[(0,n.Lk)("div",Ia,[(0,n.bF)(Ct,{modelValue:e.formExistencias.prefijo,"onUpdate:modelValue":a[80]||(a[80]=function(a){return e.formExistencias.prefijo=a}),label:"Prefijo"},null,8,["modelValue"])]),(0,n.Lk)("div",ka,[(0,n.bF)(Ct,{modelValue:e.formExistencias.numingreso,"onUpdate:modelValue":a[82]||(a[82]=function(a){return e.formExistencias.numingreso=a}),maxlength:"40",label:"Número Ingreso",readonly:e.habilitarNroIngreso},{append:(0,n.k6)(function(){return[(0,n.bF)(Tt,{class:"cursor-pointer",size:"18px",color:e.habilitarNroIngreso?"negative":"primary",name:e.habilitarNroIngreso?"do_not_disturb_alt":"mode_edit",onClick:a[81]||(a[81]=function(a){return e.habilitarNroIngreso=!e.habilitarNroIngreso})},null,8,["color","name"])]}),_:1},8,["modelValue","readonly"])]),(0,n.Lk)("div",Fa,[(0,n.bF)(Ct,{modelValue:e.formExistencias.parte,"onUpdate:modelValue":a[83]||(a[83]=function(a){return e.formExistencias.parte=a}),label:"Código de Clasificación"},null,8,["modelValue"])]),a[133]||(a[133]=(0,n.Lk)("div",{class:"col-xs-12 col-sm-4 column items-center justify-center"},[(0,n.Lk)("span",null,"Ej: 828.5D43 R71 E.1")],-1)),(0,n.Lk)("div",Oa,[(0,n.bF)(Ct,{modelValue:e.formExistencias.numejemp,"onUpdate:modelValue":a[84]||(a[84]=function(a){return e.formExistencias.numejemp=a}),min:"0",type:"number",label:"Nro Ejemplar"},null,8,["modelValue"])]),(0,n.Lk)("div",Ra,[(0,n.bF)(At,{modelValue:e.formExistencias.solobib,"onUpdate:modelValue":a[85]||(a[85]=function(a){return e.formExistencias.solobib=a}),options:e.confirmar,label:"Sólo biblioteca"},null,8,["modelValue","options"])])])]),(0,n.Lk)("div",Va,[(0,n.bF)(i,{border:!1,dense:"",paddingX:"","font-size":"16px",name:"UBICACIÓN",auto:!1,buttons:[]})]),(0,n.Lk)("div",La,[(0,n.Lk)("div",ya,[(0,n.Lk)("div",Ta,[(0,n.bF)(At,{modelValue:e.formExistencias.bibcod,"onUpdate:modelValue":a[86]||(a[86]=function(a){return e.formExistencias.bibcod=a}),"emit-value":!1,"option-label":"BIBDESC","option-value":"BIBCOD",options:e.bbibliotecas,label:"Biblioteca",onInput:e.loadResponsableUbicacion},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",Ba,[(0,n.bF)(At,{modelValue:e.formExistencias.ubicacod,"onUpdate:modelValue":a[87]||(a[87]=function(a){return e.formExistencias.ubicacod=a}),"option-label":"UBICADES","option-value":"UBICACOD",options:e.ubicaciones,label:"Estantería"},null,8,["modelValue","options"])]),(0,n.Lk)("div",Sa,[(0,n.bF)(At,{modelValue:e.formExistencias.colecod,"onUpdate:modelValue":a[88]||(a[88]=function(a){return e.formExistencias.colecod=a}),"option-label":"COLEDES","option-value":"COLECOD",options:e.colecciones,label:"Colección"},null,8,["modelValue","options"])]),(0,n.Lk)("div",Ua,[(0,n.bF)(Ct,{modelValue:e.responsable,"onUpdate:modelValue":a[89]||(a[89]=function(a){return e.responsable=a}),label:"Responsable",readonly:""},null,8,["modelValue"])])])]),(0,n.Lk)("div",Na,[(0,n.bF)(i,{border:!1,dense:"",paddingX:"","font-size":"16px",name:"ADQUISICIÓN",auto:!1,buttons:[]})]),(0,n.Lk)("div",Pa,[(0,n.Lk)("div",qa,[(0,n.Lk)("div",$a,[(0,n.bF)(At,{modelValue:e.formExistencias.adquisi,"onUpdate:modelValue":a[90]||(a[90]=function(a){return e.formExistencias.adquisi=a}),"option-label":"SECUDES","option-value":"SECUCOD",options:e.adquisiciones,label:"Modo adquisición"},null,8,["modelValue","options"])]),(0,n.Lk)("div",_a,[(0,n.bF)(Ct,{label:"Fecha",maxlength:"10",format:"##/##/####",modelValue:e.formExistencias.fechadq,"onUpdate:modelValue":a[93]||(a[93]=function(a){return e.formExistencias.fechadq=a}),mask:"##/##/####",readonly:""},{append:(0,n.k6)(function(){return[(0,n.bF)(Tt,{class:"cursor-pointer",name:"date_range"},{default:(0,n.k6)(function(){return[(0,n.bF)(Kt,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)(function(){return[(0,n.bF)(Wt,{mask:"DD/MM/YYYY",modelValue:e.formExistencias.fechadq,"onUpdate:modelValue":a[91]||(a[91]=function(a){return e.formExistencias.fechadq=a}),onInput:a[92]||(a[92]=function(a){return e.$refs.qDateProxy.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,n.Lk)("div",ja,[(0,n.bF)(At,{modelValue:e.formExistencias.moncod,"onUpdate:modelValue":a[94]||(a[94]=function(a){return e.formExistencias.moncod=a}),"option-label":"MONNOM","option-value":"MONCOD",options:e.monedas,label:"Moneda"},null,8,["modelValue","options"])]),(0,n.Lk)("div",Ha,[(0,n.bF)(Ct,{modelValue:e.formExistencias.precio,"onUpdate:modelValue":a[95]||(a[95]=function(a){return e.formExistencias.precio=a}),label:"Precio",type:"number"},null,8,["modelValue"])]),(0,n.Lk)("div",Ga,[(0,n.bF)(Ct,{modelValue:e.formExistencias.fuenteadquisi,"onUpdate:modelValue":a[96]||(a[96]=function(a){return e.formExistencias.fuenteadquisi=a}),label:"Fuente de aquisición",maxlength:"100"},null,8,["modelValue"])]),(0,n.Lk)("div",Qa,[(0,n.bF)(Ct,{modelValue:e.formExistencias.estfisico,"onUpdate:modelValue":a[97]||(a[97]=function(a){return e.formExistencias.estfisico=a}),label:"Condición Física",maxlength:"250"},null,8,["modelValue"])]),(0,n.Lk)("div",Xa,[(0,n.bF)(Ct,{type:"textarea",modelValue:e.formExistencias.notabib,"onUpdate:modelValue":a[98]||(a[98]=function(a){return e.formExistencias.notabib=a}),label:"Observaciones del ejemplar",maxlength:"250"},null,8,["modelValue"])]),(0,n.Lk)("div",Ya,[(0,n.bF)(Ft,{modelValue:e.aplicarCambios,"onUpdate:modelValue":a[99]||(a[99]=function(a){return e.aplicarCambios=a}),label:"¿Desea aplicar los datos de ubicación y adquisición a todos los ejemplares de este título?"},null,8,["modelValue"])])])]),(0,n.Lk)("div",Ja,[(0,n.Lk)("div",za,[(0,n.Lk)("div",Wa,["B"!==t.currentExistencia.ID_ESTADO?((0,n.uX)(),(0,n.Wv)(i,{key:0,border:!1,dense:"",paddingX:"","font-size":"16px",name:"BAJA",auto:!1,buttons:e.buttonsBaja},null,8,["buttons"])):((0,n.uX)(),(0,n.Wv)(i,{key:1,border:!1,dense:"",paddingX:"","font-size":"16px",name:"BAJA",auto:!1,buttons:e.buttonDeshacerBaja},null,8,["buttons"]))]),(0,n.Lk)("div",Ka,[(0,n.bF)(Ct,{label:"Fecha",maxlength:"10",format:"##/##/####",modelValue:e.formExistencias.bajafecha,"onUpdate:modelValue":a[102]||(a[102]=function(a){return e.formExistencias.bajafecha=a}),mask:"##/##/####",readonly:""},{append:(0,n.k6)(function(){return[(0,n.bF)(Tt,{class:"cursor-pointer",name:"date_range"},{default:(0,n.k6)(function(){return[(0,n.bF)(Kt,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)(function(){return[(0,n.bF)(Wt,{mask:"DD/MM/YYYY",modelValue:e.formExistencias.bajafecha,"onUpdate:modelValue":a[100]||(a[100]=function(a){return e.formExistencias.bajafecha=a}),onInput:a[101]||(a[101]=function(a){return e.$refs.qDateProxy1.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,n.Lk)("div",Za,[(0,n.bF)(Ct,{type:"textarea",modelValue:e.formExistencias.bajamotivo,"onUpdate:modelValue":a[103]||(a[103]=function(a){return e.formExistencias.bajamotivo=a}),label:"Motivo de la baja",maxlength:"250"},null,8,["modelValue"])])])]),e.auditoria.length>0?((0,n.uX)(),(0,n.CE)("div",et,[(0,n.bF)(i,{border:!1,dense:"",paddingX:"","font-size":"16px",name:"HISTORIAL DE REGISTRO",auto:!1,buttons:[]})])):(0,n.Q3)("v-if",!0),e.auditoria.length>0?((0,n.uX)(),(0,n.CE)("div",at,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.auditoria,function(e,t){return(0,n.uX)(),(0,n.CE)("div",tt,[(0,n.Lk)("div",it,[(0,n.Lk)("span",null,[(0,n.Lk)("b",null,(0,r.v_)("Insertar"===e.ACCION?"Creado por:":"Ult. Actualización: "),1),(0,n.Lk)("span",ot,(0,r.v_)(e.USUNOM),1)])]),(0,n.Lk)("div",nt,[(0,n.Lk)("span",null,[a[134]||(a[134]=(0,n.Lk)("b",null,"Fecha:",-1)),(0,n.Lk)("span",lt,(0,r.v_)(e.FECHA),1)])])])}),256))])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(Zt,{modelValue:e.openModalEditar,"onUpdate:modelValue":a[108]||(a[108]=function(a){return e.openModalEditar=a}),maximized:!e.isGreater,header:!1,footer:!1,css:{"min-height":"40px !important"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",rt,[(0,n.Lk)("div",st,[(0,n.bF)(Ct,{type:(e.currentRowEstiloBasicoMarc.VAL||"").length>20?"textarea":"input",autofocus:"",debounce:"1000",modelValue:e.currentRowEstiloBasicoMarc.VAL,"onUpdate:modelValue":a[105]||(a[105]=function(a){return e.currentRowEstiloBasicoMarc.VAL=a}),onKeyup:a[106]||(a[106]=(0,l.jR)(function(a){return e.setValue()},["enter"])),onInput:a[107]||(a[107]=function(a){return e.setValue(!1)})},null,8,["type","modelValue"])])])]}),_:1},8,["modelValue","maximized"]),(0,n.bF)(kt,{modelValue:e.openModalDuplicarExistencia,"onUpdate:modelValue":a[116]||(a[116]=function(a){return e.openModalDuplicarExistencia=a}),title:"Duplicar Existencias",css:{width:"500px","min-height":"40px !important"},onSubmit:e.guardarDuplicado},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ct,[(0,n.Lk)("div",ut,[(0,n.bF)(It,{modelValue:e.formDuplicarExistencias.codificacion,"onUpdate:modelValue":a[109]||(a[109]=function(a){return e.formDuplicarExistencias.codificacion=a}),val:1,label:"Sistema"},null,8,["modelValue"])]),(0,n.Lk)("div",dt,[(0,n.bF)(It,{modelValue:e.formDuplicarExistencias.codificacion,"onUpdate:modelValue":a[110]||(a[110]=function(a){return e.formDuplicarExistencias.codificacion=a}),val:2,label:"Propia"},null,8,["modelValue"])]),(0,n.Lk)("div",mt,[(0,n.bF)(Ct,{modelValue:e.formDuplicarExistencias.cantidad,"onUpdate:modelValue":a[111]||(a[111]=function(a){return e.formDuplicarExistencias.cantidad=a}),type:"number",label:"Cantidad de ejemplares"},null,8,["modelValue"])]),2===e.formDuplicarExistencias.codificacion?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",ft,[(0,n.bF)(Ct,{disable:"",modelValue:e.formDuplicarExistencias.prefijo,"onUpdate:modelValue":a[112]||(a[112]=function(a){return e.formDuplicarExistencias.prefijo=a}),label:"Prefijo"},null,8,["modelValue"])]),(0,n.Lk)("div",pt,[(0,n.bF)(Ct,{modelValue:e.formDuplicarExistencias.longitud,"onUpdate:modelValue":a[113]||(a[113]=function(a){return e.formDuplicarExistencias.longitud=a}),label:"Longitud del número de ingreso"},null,8,["modelValue"])]),(0,n.Lk)("div",gt,[(0,n.bF)(Ct,{modelValue:e.formDuplicarExistencias.iniciar,"onUpdate:modelValue":a[114]||(a[114]=function(a){return e.formDuplicarExistencias.iniciar=a}),label:"Iniciar en"},null,8,["modelValue"])])],64)):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",bt,[(0,n.bF)(Ct,{disable:"",modelValue:e.formDuplicarExistencias.clasificacion,"onUpdate:modelValue":a[115]||(a[115]=function(a){return e.formDuplicarExistencias.clasificacion=a}),label:"Código de clasificación"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(kt,{title:"Agregar ".concat("Editora"===e.currentMantenimiento?"Editorial":e.currentMantenimiento),modelValue:e.openModalMantenimiento,"onUpdate:modelValue":a[118]||(a[118]=function(a){return e.openModalMantenimiento=a}),onSubmit:e.guardarMantenimiento},{default:(0,n.k6)(function(){return[(0,n.bF)(Ht,{ref:"formMantenimiento"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ht,[(0,n.Lk)("div",vt,[(0,n.bF)(Ct,{modelValue:e.titleMantenimiento,"onUpdate:modelValue":a[117]||(a[117]=function(a){return e.titleMantenimiento=a}),label:e.currentMantenimiento,rules:[e.required]},null,8,["modelValue","label","rules"])])])]}),_:1},512)]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var At=t(99550),Mt=t.n(At),Et=t(41562),Dt=t.n(Et),wt=t(76080),xt=t.n(wt),It=t(45254),kt=t.n(It),Ft=(t(30683),t(23825),t(77507),t(52133),t(10239),t(23513),t(25751),t(89571),t(6724),t(70199),t(56567),t(515),t(52776),t(84433),t(66307),t(68017),t(7346),t(24066),t(57053),t(94013),t(32701),t(67396),t(50923),t(59502),{data:function(){return{config:{USO:{renderHtml:function(e,a,t,i){i.USO=i.USO||"T"}},ACTION:{component:"button",icon:["book_open_page_variant as ficha","edit","delete","copy"],ficha:function(e){var a=this;return kt()(xt()().m(function t(){return xt()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,a.getFicha(e.FICHACOD);case 1:a.openModal=!0;case 2:return t.a(2)}},t)}))()},edit:function(e,a){var t=this;return kt()(xt()().m(function i(){return xt()().w(function(i){while(1)switch(i.n){case 0:return t.filterForm.formato=e.FORCOD,t.filterForm.uso=e.USO,t.filterForm.tipo=String(e.TIPO),t.filterForm.estado=e.ESTADO,t.filterForm.devuelve=e.DEVUELVE,t.currentCatalogacion=a,i.n=1,t.openForm("update");case 1:return i.a(2)}},i)}))()},delete:function(e,a){var t=this;return kt()(xt()().m(function i(){var o,n,l,r;return xt()().w(function(i){while(1)switch(i.p=i.n){case 0:return i.n=1,t.$confirmar("¿Está seguro de eliminar la ficha? ¡El proceso es irreversible y se eliminarán sus existencias!","delete");case 1:if(o=i.v,!o){i.n=5;break}return i.p=2,i.n=3,t.$http.delete("api/HyoBmCatalogacion/eliminarFicha",{params:{fichacod:e.FICHACOD}});case 3:n=i.v,l=n.message,t.rows.splice(t.rows.indexOf(a),1),t.$notify(l,"success"),i.n=5;break;case 4:i.p=4,r=i.v,t.$notify(r.message,"warning");case 5:return i.a(2)}},i,null,[[2,4]])}))()},copy:function(e,a){var t=this;return kt()(xt()().m(function i(){return xt()().w(function(i){while(1)switch(i.n){case 0:return t.filterForm.formato=e.FORCOD,t.filterForm.uso=e.USO,t.currentCatalogacion=a,i.n=1,t.openForm("update",!0);case 1:return i.a(2)}},i)}))()},tooltip:{ficha:"Ficha",edit:"Editar",delete:"Eliminar",copy:"Duplicar"},permisos:{edit:">1",copy:">1",delete:"===3"},dense:!0,flat:!0}},rows:[]}},computed:{fields:function(){var e="0388"===this.sie.colcod,a=e?"ISBN":"Cod. Clasif",t=e?"ISBN":"UBICACION";return[{name:t,label:a,field:t,align:"left",order:!0},{name:"TITULO",label:"Título",field:"TITULO",align:"left",wrap:!0,order:!0},{name:"AUTOR",label:"Autor",field:"AUTOR",align:"left",wrap:!0,width:80,order:!0},{name:"EDITORIAL",label:"Editorial",field:"EDITORIAL",align:"left",wrap:!0,order:!0},{name:"ANIO",label:"Año",field:"ANIO",align:"center",order:!0},{name:"DISPONIBLES",label:"Dis.",field:"DISPONIBLES",align:"center",order:!0},{name:"RESERVADOS",label:"Res.",field:"RESERVADOS",align:"center",order:!0},{name:"PRESTADOS",label:"Pres.",field:"PRESTADOS",align:"center",order:!0},{name:"BAJAS",label:"Baj.",field:"BAJAS",align:"center",order:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:120},{name:"USO",label:"Uso",field:"USO",align:"center",vIf:!1}]}}}),Ot={data:function(){return{configCamposMarcBasica:{CAMPO:{renderHtml:function(e,a,t){return e.MARCCOD===e.MARCCODREF?a("b",{},e.CAMPO):a("span",{style:{paddingLeft:"2em"}},e.MARCNOM)}},ACTION:{renderHtml:function(e,a,t){var i="pbasica"===this.filterForm.estilo?e.PBASICA:e.PMARC;return!0===e.DISABLE?t.checkbox({value:i,trueValue:1,color:"grey-6"}):t.checkbox({value:i,trueValue:1})},renderAction:function(e,a){var t="pbasica"===this.filterForm.estilo?"PBASICA":"PMARC";!1===a.DISABLE&&(e.MARCCOD===e.MARCCODREF?1===e[t]?(this.groupCampos[e.MARCCODREF].map(function(e){return e[t]=0}),a[t]=0):(this.groupCampos[e.MARCCODREF].map(function(e){return e[t]=1}),a[t]=1):1===e[t]?(a[t]=0,this.validateCheckAll(a)):(a[t]=1,this.validateCheckAll(a)))}}},rowsCamposMarcBasica:[],openModalCamposMarcBasica:!1,fieldsCamposMarcBasica:[{name:"CAMPO",label:"Etiquetas",field:"CAMPO",align:"left",sortable:!0,wrap:!0},{name:"ACTION",label:"",field:"ACTION",align:"center",check:!0}]}},methods:{validateCheckAll:function(e){var a,t="pbasica"===this.filterForm.estilo?"PBASICA":"PMARC",i=[],o=this.groupCampos2[e.CABECERA],n=Dt()(o);try{for(n.s();!(a=n.n()).done;){var l=a.value;1===l[t]&&(i[i.length]=l)}}catch(e){n.e(e)}finally{n.f()}this.cabecerasCampos[e.CABECERA][t]=i.length>0?1:0,i.length>0?this.cabecerasCampos[e.CABECERA][t]=1:this.cabecerasCampos[e.CABECERA][t]=0}}},Rt={data:function(){var e=this;return{buttonsAutor:[{label:"Agregar",icon:"plus",click:function(){var a=e.$refs.refTableAutor.filterData;e.titleMantenimiento=a||"",e.currentMantenimiento="Autor",e.openModalMantenimiento=!0}}],configAutor:{},rowsAutor:[],fieldsAutor:[{name:"AUTCOD",label:"Código",field:"AUTCOD",align:"center",sortable:!0},{name:"AUTDES",label:"Nombres",field:"AUTDES",align:"left",sortable:!0,wrap:!0}]}},methods:{seleccionarAutor:function(e){this.currentRowEstiloBasicoMarc.VAL=e.AUTDES,this.currentRowEstiloBasicoMarc.CODIGO=e.AUTCOD,this.setValue(),this.openModalAutor=!1}}},Vt={data:function(){var e=this;return{buttonsIdioma:[{label:"Agregar",icon:"plus",click:function(){var a=e.$refs.refTableIdioma.filterData;e.titleMantenimiento=a||"",e.currentMantenimiento="Idioma",e.openModalMantenimiento=!0}}],configIdioma:{},rowsIdioma:[],fieldsIdioma:[{name:"IDICOD",label:"Código",field:"IDICOD",align:"center",sortable:!0},{name:"IDIDES",label:"Nombres",field:"IDIDES",align:"left",sortable:!0,wrap:!0}]}},methods:{seleccionarIdioma:function(e){this.currentRowEstiloBasicoMarc.VAL=e.IDIDES,this.currentRowEstiloBasicoMarc.CODIGO=e.IDICOD,this.setValue(),this.openModalIdioma=!1}}},Lt={data:function(){var e=this;return{buttonsEditora:[{label:"Agregar",icon:"plus",click:function(){var a=e.$refs.refTableEditorial.filterData;e.titleMantenimiento=a||"",e.currentMantenimiento="Editora",e.openModalMantenimiento=!0}}],configEditora:{},rowsEditora:[],fieldsEditora:[{name:"EDICOD",label:"Código",field:"EDICOD",align:"center",sortable:!0},{name:"EDIDES",label:"Nombres",field:"EDIDES",align:"left",sortable:!0,wrap:!0}]}},methods:{seleccionarEditora:function(e){this.currentRowEstiloBasicoMarc.VAL=e.EDIDES,this.currentRowEstiloBasicoMarc.CODIGO=e.EDICOD,this.setValue(),this.openModalEditora=!1}}},yt={data:function(){var e=this;return{buttonsMateria:[{label:"Agregar",icon:"plus",click:function(){var a=e.$refs.refTableMateria.filterData;e.titleMantenimiento=a||"",e.currentMantenimiento="Materia",e.openModalMantenimiento=!0}}],configMateria:{},rowsMateria:[],fieldsMateria:[{name:"MATCOD",label:"Código",field:"MATCOD",align:"center",sortable:!0},{name:"MATDES",label:"Nombres",field:"MATDES",align:"left",sortable:!0,wrap:!0}]}},methods:{seleccionarMateria:function(e){this.currentRowEstiloBasicoMarc.VAL=e.MATDES,this.currentRowEstiloBasicoMarc.CODIGO=e.MATCOD,this.setValue(),this.openModalMateria=!1}}},Tt={data:function(){return{configFicha:{MARCCOD:{renderHtml:function(e,a){return a("b",{},e.MARCCOD)}}},rowsFicha:[],fieldsFicha:[{name:"MARCCOD",label:"Tipo Documento : Libro",field:"MARCCOD",align:"left",sortable:!0,wrap:!0},{name:"FICHADESC",label:"",field:"FICHADESC",align:"left",sortable:!0,wrap:!0}]}}},Bt=t(57008),St=t.n(Bt),Ut=t(43136),Nt=t(26319),Pt={data:function(){var e=this;return{configExistencias:{UBICACION:{renderHtml:function(e,a){return a("span","".concat(e.BIBDESC||""," - ").concat(e.UBICADES||""))}},ACTION:{component:"button",icon:["edit","delete","copy"],tooltip:{edit:"Editar",delete:"Eliminar",copy:"Copiar"},permisos:{edit:">1",copy:">1",delete:"===3"},edit:function(e,a){var t=this;return kt()(xt()().m(function i(){var o,n,l,r,s,c,u;return xt()().w(function(i){while(1)switch(i.n){case 0:return t.currentExistencia=a,t.actionExistencias="update",t.openModalExistencias=!0,i.n=1,t.loadOptions();case 1:return i.n=2,t.getExistenciaByExistCod(e.EXISTCOD);case 2:return o=i.v,n=Mt()(o,1),l=n[0],i.n=3,t.getAuditoriaExistencia(e.EXISTCOD);case 3:for(r in t.auditoria=i.v,t.auditoria.map(function(e){return e.FECHA=(0,Nt.date)(e.FECHA,"YYYY/MM/DD").dateTimePeru,e}),l.FECHADQ&&(l.FECHADQ=(0,Nt.date)(l.FECHADQ,"YYYY/MM/DD").datePeru),l.BAJAFECHA&&(l.BAJAFECHA=(0,Nt.date)(l.BAJAFECHA,"YYYY/MM/DD").datePeru),t.formExistencias)t.formExistencias[r]=l[r.toUpperCase()];return s=t.bbibliotecas.filter(function(e){return e.BIBCOD===l.BIBCOD}),c=Mt()(s,1),u=c[0],t.formExistencias.moncod=t.monedas?t.monedas[0].MONCOD:null,i.n=4,t.loadResponsableUbicacion(u,!1);case 4:0===t.auditoria.length&&(t.auditoria=[{ACCION:"Insertar",USUNOM:t.responsable,FECHA:l.FECHADQ}]);case 5:return i.a(2)}},i)}))()},delete:function(e,a){var t=this;return kt()(xt()().m(function e(){var i,o,n,l,r,s,c,u;return xt()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.n=1,t.$confirmar("¿Está seguro de eliminar la existencia? ¡El proceso será irreversible!","delete");case 1:if(i=e.v,!i){e.n=5;break}return e.p=2,o=[],o=Array.isArray(a)?a.map(function(e){return e.EXISTCOD}):[a.EXISTCOD],e.n=3,t.$http.post("api/HyoBmCatalogacion/eliminarExistencia",{ids:o});case 3:if(n=e.v,l=n.message,1===o.length)t.rowsExistencias.splice(t.rowsExistencias.indexOf(a),1);else{r=Dt()(a);try{for(r.s();!(s=r.n()).done;)c=s.value,t.rowsExistencias.splice(t.rowsExistencias.indexOf(c),1)}catch(e){r.e(e)}finally{r.f()}}t.$notify(l,"success"),e.n=5;break;case 4:e.p=4,u=e.v,t.$notify(u.message,"warning");case 5:return e.a(2)}},e,null,[[2,4]])}))()},copy:function(e,a){this.currentExistencia=a,this.formDuplicarExistencias.codificacion=1,this.formDuplicarExistencias.prefijo=e.PREFIJO,this.formDuplicarExistencias.clasificacion=e.PARTE,this.formDuplicarExistencias.longitud=e.NUMINGRESO?String(e.NUMINGRESO).length:8,this.openModalDuplicarExistencia=!0},prevent:!0,dense:!0,flat:!0}},rowsExistencias:[],fieldsExistencias:[{name:"NUMINGRESO",label:"Nro Ingreso",field:"NUMINGRESO",align:"center",sortable:!0},{name:"PARTE",label:"Num. Clasificación",field:"PARTE",align:"left",sortable:!0},{name:"NUMEJEMP",label:"Ejemplar",field:"NUMEJEMP",align:"center",sortable:!0},{name:"BIBDESC",label:"",field:"BIBDESC",vIf:!1},{name:"UBICADES",label:"",field:"UBICADES",vIf:!1},{name:"UBICACION",label:"Ubicación",field:"UBICACION",align:"left",sortable:!0},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:90}],buttonsExistencias:[{label:"Agregar Existencia",icon:"plus",click:this.openExistencias,permiso:">1"},{label:"Eliminar Ejemplares",icon:"delete",click:function(){var a=e.$refs.refExistencias[0].rowsSelected(null,null,!0);a.length<1?e.$notify("Debe seleccionar al menos una existencia","warning"):e.configExistencias.ACTION.delete.call(e,{},a)},permiso:"===3"},{label:"Dar de baja título",icon:"vertical_align_bottom",permiso:"===3",click:function(){e.formBaja.bajafecha=(0,Nt.date)(new Date,"DD/MM/YYYY"),e.formBaja.bajamotivo="",e.openModalBaja=!0}}],buttonsBaja:[{label:"Dar de baja",permiso:">1",icon:"check",click:function(){e.bajaExistencia(1)}}],buttonDeshacerBaja:[{label:"Deshacer baja",icon:"delete",permiso:"===3",click:function(){e.bajaExistencia(2)}}],actionExistencias:"create",openModalExistencias:!1,openModalDuplicarExistencia:!1,confirmar:[{label:"Si",value:"Si"},{label:"No",value:"No"}],formExistencias:{prefijo:null,numingreso:null,parte:null,numejemp:1,solobib:"No",fechadq:null,bibcod:null,ubicacod:null,colecod:null,adquisi:null,moncod:null,moneda:null,precio:null,fuenteadquisi:null,estfisico:null,notabib:null,bajafecha:null,bajamotivo:null},formDuplicarExistencias:{codificacion:1,cantidad:1,prefijo:"",longitud:8,iniciar:"",clasificacion:1},responsable:null,bbibliotecas:[],ubicaciones:[{UBICADES:"Todos",UBICACOD:"todos"}],colecciones:[],adquisiciones:[],monedas:[],habilitarNroIngreso:!1,aplicarCambios:!1,currentExistencia:{},openModalBaja:!1,formBaja:{bajafecha:"",bajamotivo:""}}},methods:{darDeBaja:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,e.$confirmar("<b>¿Está seguro de dar de baja las existencias del titulo?</b> ¡El proceso es irreversible!",{icon:"vertical_align_bottom",color:"primary"},!0);case 1:if(t=a.v,!t){a.n=6;break}return i=St()({},e.formBaja),i.bajafecha=(i.bajafecha||"").split("/").reverse().join("/"),i.bajafecha=i.bajafecha?new Date(i.bajafecha):new Date,i.fichacod=e.currentCatalogacion.FICHACOD,a.p=2,a.n=3,e.$http.delete("api/HyoBmCatalogacion/bajaTitulo",{params:i});case 3:return e.openModalBaja=!1,a.n=4,e.getExistencias();case 4:e.$notify("Proceso completado","success"),a.n=6;break;case 5:a.p=5,o=a.v,e.$notify(o.message,"warning");case 6:return a.a(2)}},a,null,[[2,5]])}))()},clearForm:function(){for(var e in this.formExistencias)this.formExistencias[e]=null;this.formExistencias.numejemp=1,this.formExistencias.solobib="No"},loadOptions:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getBBiblioteca();case 1:return a.n=2,e.getColecciones();case 2:return a.n=3,e.getTablaSE();case 3:return a.n=4,e.getMonedas();case 4:return a.a(2)}},a)}))()},guardarExistencia:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n,l,r,s,c,u,d,m,f,p;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,i=St()({},e.formExistencias),i.precio=(0,Ut.redondear)(i.precio,2),e.formExistencias.parte){a.n=1;break}return e.$alert("Indique el código de clasificación del ejemplar (Ref. Código agregado en el lomo del libro)","warning"),a.a(2);case 1:if(e.formExistencias.numejemp){a.n=2;break}return e.$alert("Indique el número del ejemplar","warning"),a.a(2);case 2:if(e.formExistencias.ubicacod){a.n=3;break}return e.$alert("Indique la ubicación de la existencia","warning"),a.a(2);case 3:return i.bibcod=(null===(t=i.bibcod)||void 0===t?void 0:t.BIBCOD)||i.bibcod||"","update"===e.action&&(i.existcod=e.currentExistencia.EXISTCOD),i.fichacod=e.currentCatalogacion.FICHACOD,i.moneda=e.monedas.filter(function(a){return a.MONCOD===e.formExistencias.moncod})[0]["MONSIG"],i.estado=e.currentExistencia.ID_ESTADO,i.aplicar=e.aplicarCambios,a.n=4,e.$http.post("api/HyoBmCatalogacion/guardarExistencias",{action:e.actionExistencias,params:i});case 4:if(o=a.v,n=o.result,e.$notify("Proceso finalizado correctamente","success"),"create"!==e.actionExistencias){a.n=6;break}return l=n.fichacod,r=n.existcod,a.n=5,e.getExistenciasByFichacodAndExistcod(l,r);case 5:s=a.v,c=Mt()(s,1),u=c[0],e.rowsExistencias.unshift(u),a.n=8;break;case 6:return a.n=7,e.getExistenciasByFichacodAndExistcod();case 7:d=a.v,m=Mt()(d,1),f=m[0],e.$refs.refExistencias[0].updateRow(e.currentExistencia,f);case 8:e.openModalExistencias=!1,a.n=10;break;case 9:a.p=9,p=a.v,e.$notify(p.message,"warning");case 10:return a.a(2)}},a,null,[[0,9]])}))()},loadUbicacion:function(e){var a=arguments,t=this;return kt()(xt()().m(function i(){var o;return xt()().w(function(i){while(1)switch(i.n){case 0:return o=a.length>1&&void 0!==a[1]&&a[1],i.n=1,t.$http.get("api/HyoUbica/getUbicacion",{params:{bibcod:e}});case 1:t.ubicaciones=i.v,!0===o&&(t.ubicaciones.unshift({UBICADES:"Todos",UBICACOD:"todos"}),t.filterConsultar.ubicacod="todos");case 2:return i.a(2)}},i)}))()},loadResponsableUbicacion:function(e){var a=arguments,t=this;return kt()(xt()().m(function i(){var o,n,l;return xt()().w(function(i){while(1)switch(i.n){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],l=(null===(o=t.formExistencias.bibcod)||void 0===o?void 0:o.BIBCOD)||t.formExistencias.bibcod||"",i.n=1,t.loadUbicacion(l);case 1:t.responsable=e.RESPONSABLE,n&&(t.formExistencias.ubicacod=t.ubicaciones.length>0?t.ubicaciones[0].UBICACOD:null);case 2:return i.a(2)}},i)}))()},openExistencias:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return e.actionExistencias="create",e.openModalExistencias=!0,e.clearForm(),e.currentExistencia={},a.n=1,e.loadOptions();case 1:e.formExistencias.moncod=e.monedas?e.monedas[0].MONCOD:null;case 2:return a.a(2)}},a)}))()},getExistencias:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoBMExistencias/getExistencias",{params:{fichacod:e.currentCatalogacion.FICHACOD}});case 1:e.rowsExistencias=a.v;case 2:return a.a(2)}},a)}))()},getExistenciasByFichacodAndExistcod:function(e,a){return this.$http.get("api/HyoBMExistencias/getExistencias",{params:{fichacod:e||this.currentCatalogacion.FICHACOD,existcod:a||this.currentExistencia.EXISTCOD}})},getBBiblioteca:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoBBiblioteca/getBBilioteca");case 1:e.bbibliotecas=a.v;case 2:return a.a(2)}},a)}))()},getColecciones:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoColeccio/getColeccion");case 1:e.colecciones=a.v;case 2:return a.a(2)}},a)}))()},getTablaSE:function(){var e=this;return kt()(xt()().m(function a(){var t;return xt()().w(function(a){while(1)switch(a.n){case 0:return t="0023"===e.sie.colcod?"115":"114",a.n=1,e.$http.get("api/HyoTablaSe/getTablaSe",{params:{princod:t}});case 1:e.adquisiciones=a.v;case 2:return a.a(2)}},a)}))()},getMonedas:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/cobroController/getMoneda",{params:{response:"combo"}});case 1:e.monedas=a.v;case 2:return a.a(2)}},a)}))()},getExistenciaByExistCod:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i;return xt()().w(function(t){while(1)switch(t.n){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:0,t.a(2,a.$http.get("api/HyoBMExistencias/getExistenciasByExistCod",{params:{existcod:i}}))}},t)}))()},getAuditoriaExistencia:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i;return xt()().w(function(t){while(1)switch(t.n){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:0,t.a(2,a.$http.get("api/MantenimientosController/getAuditoriaExistencia",{params:{existcod:i}}))}},t)}))()},bajaExistencia:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i,o,n,l,r,s,c,u;return xt()().w(function(t){while(1)switch(t.p=t.n){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:1,i=i||1,t.p=1,1!==i){t.n=3;break}if(a.formExistencias.bajafecha){t.n=2;break}return a.$alert("Fecha de baja es obligatorio","info"),t.a(2);case 2:if(a.formExistencias.bajamotivo){t.n=3;break}return a.$alert("Motivo de baja es obligatorio","info"),t.a(2);case 3:return t.n=4,a.$confirmar(1===i?"¿Desea realmente darle de baja?":"¿Desea realmente deshacer la baja?","info");case 4:if(o=t.v,!o){t.n=7;break}return t.n=5,a.$http.put("api/HyoBmCatalogacion/baja",{params:{existcod:a.currentExistencia.EXISTCOD,bajafecha:a.formExistencias.bajafecha,bajamotivo:a.formExistencias.bajamotivo,tipo:i}});case 5:return n=t.v,l=n.message,t.n=6,a.getExistenciasByFichacodAndExistcod();case 6:r=t.v,s=Mt()(r,1),c=s[0],a.$refs.refExistencias[0].updateRow(a.currentExistencia,c),a.$notify(l,"success"),a.openModalExistencias=!1;case 7:t.n=9;break;case 8:t.p=8,u=t.v,a.$notify(u.message,"warning");case 9:return t.a(2)}},t,null,[[1,8]])}))()},guardarDuplicado:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,t=St()({},e.formDuplicarExistencias),delete t.tipocod,t.cantidad){a.n=1;break}return e.$alert("La cantidad de ejemplares debe ser mayor a 0","warning"),a.a(2);case 1:if(2!==e.formDuplicarExistencias.codificacion){a.n=3;break}if(t.prefijo){a.n=2;break}return e.$alert("Antes de duplicar, edite la existencia y agregue el prefijo del ejemplar","warning"),a.a(2);case 2:if(t.longitud){a.n=3;break}return e.$alert("La longitud del número de ingreso debe ser mayor a 0","warning"),a.a(2);case 3:return t.existcod=e.currentExistencia.EXISTCOD,a.n=4,e.$http.post("api/HyoBmCatalogacion/duplicarExistencia",{params:t});case 4:return i=a.v,o=i.message,e.openModalDuplicarExistencia=!1,a.n=5,e.getExistencias();case 5:e.$notify(o,"success"),a.n=7;break;case 6:a.p=6,n=a.v,e.$alert(n.message,"warning");case 7:return a.a(2)}},a,null,[[0,6]])}))()}}},qt=(t(76921),t(13600),t(37406),t(44264),t(81813),function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a=a||"";var i=new RegExp("^(".concat(e,"){1}([aA-zZ0-9]{1,})"));return!1===t?a.replace(i,"$2"):i.test(a)}),$t=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.MARCCOD===e.MARCCODREF||e.MARCCOD&&!e.MARCCODREF?a:!a},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pbasica";return"pbasica"===e?"rowsEstilobasico":"rowsEstilopmarc"};window.cambiarText=function(){var e=kt()(xt()().m(function e(a,t,i){var o,n,l=arguments;return xt()().w(function(e){while(1)switch(e.n){case 0:o=l.length>3&&void 0!==l[3]?l[3]:"Basica",n=window["data".concat(o)][i],"Marc"===o&&("VAL1"===t||"VAL2"===t)?(n[t]=a.target.value,n.VAL="".concat(n.VAL1).concat(n.VAL2)):n.VAL=a.target.value,window._this.setValue();case 1:return e.a(2)}},e)}));return function(a,t,i){return e.apply(this,arguments)}}(),window.openEditar=function(e,a){if(a)return!0;window._this.newValue=window._this.currentRowEstiloBasicoMarc.VAL,window._this.openModalEditar=!0};var jt={data:function(){return{configEstilobasicoMarc:{HELPER:{component:"button",icon:["help_circle as helper"],helper:function(e){this.currentRowEstiloBasicoMarc=e,this.openModalAyuda=!0},dense:!0,flat:!0,tooltip:{helper:"Ayuda"},validate:{helper:function(e){return $t(e,!0)}},cellStyle:function(){return{width:"17px"}}},MARCCOD:{renderHtml:function(e,a){return $t(e,!0)?a("b",{class:"text-primary"},e.MARCCOD):a("span",{},"")},cellStyle:function(){return{width:"80px !important"}}},GROUP:{renderHtml:function(e,a,t,i){var o="id-".concat(i.$$key),n="pbasica"===this.filterForm.estilo?"Basica":"Marc",l="";if($t(e,!0)){var r=e.MARCCOD!==e.MARCCODREF,s=!!e.MARCVALORAUTO,c="academico-components-sie-table-components-input full-width text-primary",u={id:o,class:c,placeholder:e.MARCNOM||e.PLACEHOLDER,title:e.MARCNOM,value:i.VAL};return r&&(s=!0),l=1===e.MARCREQ&&!e.VAL&&e.MARCVALORAUTO,l&&(c="".concat(c," required"),u.class=c),s&&(u.disabled="disabled",u.class="".concat(c," bg-grey-3")),a("div",{class:"row q-col-gutter-xs"},["pmarc"===this.filterForm.estilo&&r?a("div",{class:"col-1 column justify-center"},[a("input",{class:c,value:i.VAL1,maxlength:1,oninput:"cambiarText(event, 'VAL1', ".concat(i.$$key,", '").concat(n,"')")})]):a("span",{style:{display:"none"}}),"pmarc"===this.filterForm.estilo&&r?a("div",{class:"col-1 column justify-center"},[a("input",{class:c,value:i.VAL2,maxlength:1,oninput:"cambiarText(event, 'VAL2', ".concat(i.$$key,", '").concat(n,"')")})]):a("span",{style:{display:"none"}}),a("div",{class:"pmarc"===this.filterForm.estilo&&r?"col-10":"col-12",onclick:"openEditar(".concat(i.$$key,", ").concat(s,")")},[a("div",{class:"row"},[a("div",{class:"col-12 text-grey-7 text-weight-thin"},i.MARCNOM),a("div",{class:"col-12".concat(l?" required":" border-bottom")},i.VAL)])])])}var d="academico-components-sie-table-components-input full-width text-grey-8";return l=1===e.MARCREQ&&!e.VAL,l&&(d="".concat(d," required")),a("div",{class:"row full-height"},[a("div",{},[a("div",{class:"row full-height"},[a("div",{class:"col-xs-12 column item-center justify-center"},[a("b",{class:"q-pr-sm text-grey-8"},qt(e.PARENT,e.MARCCOD))])])]),a("div",{class:"col column justify-center",onclick:"openEditar(".concat(i.$$key,", ").concat(e.MARCVALORAUTO&&"input"===e.MARCTIPO,")")},[a("div",{class:"row"},[a("div",{class:"col-12 text-grey-7 text-weight-thin"},i.MARCNOM),a("div",{class:"col-12".concat(l?" required":" border-bottom")},i.VAL)])])])},cellStyle:function(e){var a=!1;if($t(e,!0)){var t=e.MARCCOD!==e.MARCCODREF;a=!!e.MARCVALORAUTO,t&&(a=!0)}return $t(e,!1)&&e.MARCVALORAUTO&&"input"===e.MARCTIPO&&(a=!0),{background:a?"#f5f5f5":"",minWidth:"250px !important",whiteSpace:"pre-wrap"}}},ACTIONGROUP:{component:"button",icon:["delete","edit","copy"],tooltip:{delete:"Quitar",edit:"Agregar Valor",copy:"Duplicar"},delete:function(e,a){var t=this;return kt()(xt()().m(function i(){var o,n,l,r;return xt()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,t.$confirmar("Si elimina un campo, este también borrará el contenido si lo tuviera. ¿Desea eliminarlo de todas formas?","delete");case 1:if(o=i.v,!o){i.n=6;break}n=[a],l=a.$$key+1;case 2:if(!(l<t[_t(t.filterForm.estilo)].length)){i.n=5;break}if(!qt(e.MARCCOD,t[_t(t.filterForm.estilo)][l].MARCCOD,!0)){i.n=3;break}n[n.length]=t[_t(t.filterForm.estilo)][l],i.n=4;break;case 3:return i.a(3,5);case 4:l++,i.n=2;break;case 5:for(r=n.length-1;r>=0;r--)t[_t(t.filterForm.estilo)].splice(n[r].$$key,1);case 6:return i.a(2)}},i)}))()},edit:function(e,a){var t=this;return kt()(xt()().m(function e(){return xt()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.actionEdit(a);case 1:return e.a(2)}},e)}))()},toggle:function(e,a){for(var t=[JSON.parse(JSON.stringify(a))],i=a.$$key+1;i<this[_t(this.filterForm.estilo)].length;i++){if(!qt(e.MARCCOD,this[_t(this.filterForm.estilo)][i].MARCCOD,!0))break;t[t.length]=this[_t(this.filterForm.estilo)][i]}t.map(function(e){!0===e.show?e.show=!1:e.show=!0}),a.showToggle=t.length>0},copy:function(e,a){var t=this;return kt()(xt()().m(function i(){var o,n,l,r;return xt()().w(function(i){while(1)switch(i.n){case 0:o=t[_t(t.filterForm.estilo)].length+1,n=[JSON.parse(JSON.stringify(a))],l=a.$$key+1;case 1:if(!(l<t[_t(t.filterForm.estilo)].length)){i.n=4;break}if(!qt(e.MARCCOD,t[_t(t.filterForm.estilo)][l].MARCCOD,!0)){i.n=2;break}n[n.length]=t[_t(t.filterForm.estilo)][l],i.n=3;break;case 2:return i.a(3,4);case 3:l++,i.n=1;break;case 4:return r=n[n.length-1].$$key,n.map(function(e){r++;var a=JSON.parse(JSON.stringify(e));a.IDFICHADET=null,a.IDFICHAVALOR=null,a.COPY=o,a.VAL="",a.VAL1="",a.VAL2="",t[_t(t.filterForm.estilo)].splice(r,0,a)}),i.n=5,t.$nextTick();case 5:"pbasica"===t.filterForm.estilo?window.dataBasica=t.rowsEstilobasico:window.dataMarc=t.dataMarc[t.currentRowEstiloBasicoMarc.tabIndex];case 6:return i.a(2)}},i)}))()},validate:{delete:function(e){return $t(e,!0)&&0===e.MARCREQ},edit:function(e){return $t(e,!0)&&e.MARCVALORAUTO},copy:function(e){return $t(e,!0)&&1===e.MARCREP}},flat:!0,dense:!0,cellStyle:function(){return{width:"80px",minWidth:"80px !important"}}},ACTIONSUBGROUP:{component:"button",icon:["delete","edit","copy"],tooltip:{delete:"Quitar",edit:"Agregar Valor",copy:"Duplicar"},delete:function(e,a){var t=this;return kt()(xt()().m(function e(){var i;return xt()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.$confirmar("Si elimina un campo, este también borrará el contenido si lo tuviera. ¿Desea eliminarlo de todas formas?","delete");case 1:i=e.v,i&&(t[_t(t.filterForm.estilo)].splice(t[_t(t.filterForm.estilo)].indexOf(a),1),t.currentRowEstiloBasicoMarc=a,t.setValue(!1));case 2:return e.a(2)}},e)}))()},edit:function(e,a){var t=this;return kt()(xt()().m(function e(){return xt()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.actionEdit(a);case 1:return e.a(2)}},e)}))()},copy:function(e,a){e.VAL="",e.IDFICHAVALOR=null,e.ISCOPY=!0,this[_t(this.filterForm.estilo)].splice(a.$$key+1,0,e)},validate:{delete:function(e){return $t(e,!1)&&0===e.MARCREQ},edit:function(e){return $t(e,!1)&&e.MARCVALORAUTO},copy:function(e){return $t(e,!1)&&1===e.MARCREP}},flat:!0,dense:!0,cellStyle:function(){return{width:"80px",minWidth:"80px !important"}},color:"grey-8"}},rowsEstilobasico:[],rowsEstilopmarc:[],fieldsEstilobasicoMarc:[{name:"HELPER",label:"-",field:"HELPER",align:"center",maxWidth:50},{name:"MARCCOD",label:"-",field:"MARCCOD",align:"center"},{name:"GROUP",label:"-",field:"GROUP",align:"left"},{name:"ACTIONSUBGROUP",label:"-",field:"ACTIONSUBGROUP",align:"left"},{name:"ACTIONGROUP",label:"-",field:"ACTIONGROUP",align:"left"}]}},methods:{helper:function(e){this.currentRowEstiloBasicoMarc=e,this.openModalAyuda=!0},openEditar:function(e,a){window.openEditar(e,a)},cambiarText:function(e,a,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Basica";e={target:{value:e}},window.cambiarText(e,a,t,i)},actionEdit:function(e){var a=this;return kt()(xt()().m(function t(){var i,o;return xt()().w(function(t){while(1)switch(t.n){case 0:i=e.MARCVALORAUTO,o=i,t.n="000"===o?1:"ultimamodificacion"===o?2:"008"===o?3:"autor"===o?4:"idioma"===o?6:"editora"===o?8:"materia"===o?10:12;break;case 1:return t.a(3,12);case 2:return e.VAL=Nt["default"].formatDate(new Date,"DD/MM/YYYY HH:mm:ss"),t.a(3,12);case 3:return t.a(3,12);case 4:return a.openModalAutor=!0,t.n=5,a.$http.get("api/HyoAutor/getAutor");case 5:return a.rowsAutor=t.v,t.a(3,12);case 6:return a.openModalIdioma=!0,t.n=7,a.$http.get("api/HyoAutor/getIdioma");case 7:return a.rowsIdioma=t.v,t.a(3,12);case 8:return a.openModalEditora=!0,t.n=9,a.$http.get("api/HyoEditora/getEditora");case 9:return a.rowsEditora=t.v,t.a(3,12);case 10:return a.openModalMateria=!0,t.n=11,a.$http.get("api/HyoEditora/getMateria");case 11:return a.rowsMateria=t.v,t.a(3,12);case 12:return t.a(2)}},t)}))()},validateGroup:function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return $t(e,a)},extraerUltimoCaracteres:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qt(e,a,t)}}},Ht=t(2819),Gt=t(37323),Qt={data:function(){return{configConsultar:{FECPREI:{component:"datetime",edit:!1},FECPREF:{component:"date",edit:!1}},pageConsultar:1,totalRegistrosConsultar:"",totalPaginationConsultar:0,filterConsultar:{extricto:!1,numingreso:"",titulo:"",formato:"todos",bibcod:"todos",ubicacod:null,estados:[]},tipoReporte:1,rowsConsultar:[],fieldsConsultar:[{name:"NUMINGRESO",label:"# Ingreso",field:"NUMINGRESO",align:"center",order:!0},{name:"PARTE",label:"Cod. Clasif.",field:"PARTE",align:"left",order:!0,wrap:!0},{name:"TITULO",label:"Título",field:"TITULO",align:"left",order:!0,wrap:!0},{name:"TIPNOM",label:"Solicitó",field:"TIPNOM",align:"left",order:!0},{name:"NOMCOMP",label:"Nombre de Solicitante",field:"NOMCOMP",align:"left",order:!0,wrap:!0},{name:"NGS_CARGO",label:"NGS",field:"NGS_CARGO",align:"left",order:!0,wrap:!0},{name:"NOMESTADO",label:"Estado",field:"NOMESTADO",align:"center",order:!0},{name:"FECPREI",label:"Fecha",field:"FECPREI",align:"center",order:!0,wrap:!0},{name:"FECPREF",label:"Entrega",field:"FECPREF",align:"center",order:!0}],contadoresInventario:{}}},methods:{dblSelectConsultar:function(e,a){var t=this;return kt()(xt()().m(function i(){return xt()().w(function(i){while(1)switch(i.n){case 0:return t.filterForm.formato=e.FORCOD,t.filterForm.uso=e.USO,t.filterForm.estado=e.ESTADO,t.filterForm.devuelve=e.DEVUELVE,t.currentCatalogacion=a,i.n=1,t.openForm("update");case 1:return i.a(2)}},i)}))()},limpiarFiltrosConsultar:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return e.filterConsultar.numingreso="",e.filterConsultar.titulo="",e.filterConsultar.formato="",e.filterConsultar.bibcod=e.bibcodDefault,e.filterConsultar.ubicacod="todos",e.filterConsultar.estados=[],e.$refs.refMultiNG.instrucod=[],e.$refs.refMultiNG.gradocod=[],e.filterConsultar.extricto=!1,a.n=1,e.listarInventario();case 1:return a.a(2)}},a)}))()},listarInventario:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i,o,n,l,r,s,c,u;return xt()().w(function(t){while(1)switch(t.n){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:1,o=e.length>1&&void 0!==e[1]?e[1]:{},a.pageConsultar=i||a.pageConsultar,"todos"===a.filterConsultar.bibcod&&(a.filterConsultar.ubicacod="todos"),n=[],a.$refs.refMultiNG&&(n=a.$refs.refMultiNG.getCombinacionTodos()),l=St()(St()({},a.filterConsultar),{},{page:a.pageConsultar,sort:o,ng:n}),t.n=1,a.$http.get("api/HyoBmCatalogacion/listarInventario",{params:{params:l}});case 1:r=t.v,s=r.data,c=r.totalPagination,u=r.de,a.rowsConsultar=s,a.totalRegistrosConsultar=u,a.totalPaginationConsultar=c;case 2:return t.a(2)}},t)}))()},reporte:function(e){if(3===this.tipoReporte){"todos"===this.filterConsultar.bibcod&&(this.filterConsultar.ubicacod="todos");var a=[];this.$refs.refMultiNG&&(a=this.$refs.refMultiNG.getCombinacionTodos());var t=St()(St()({},this.filterConsultar),{},{page:this.pageConsultar,ng:a}),i="".concat(this.sie.api,"/HyoExportEcel/exportarInventarioCatalogacionExcel?sie-token=").concat(this.sie.token,"&params=").concat(JSON.stringify(t));(0,Gt.Fe)(i)}else{var o={formato:e,report_cod:"inventario",RADIO:this.tipoReporte};(0,Ht.exportFilePhp)(o,"webservice/reportes-biblioteca/reporte")}}}},Xt=t(9736),Yt=t(53399),Jt=t(16648),zt=t(3112),Wt=t(2739),Kt=t(57668),Zt=t(88567),ei=t(95718),ai=t(26697),ti=t(53093),ii=t(53811),oi=t(43346),ni=t(42205),li=t(81288),ri=t(25662),si=t(95477),ci=t(4437),ui=t(99515),di=t(65673),mi=t(82327),fi=t(88865),pi=t(66824),gi=t(53380),bi=t(55973),hi=t(39893),vi=t(6123),Ci={data:function(){return{}}},Ai=t(34262),Mi=t(11654),Ei=function(e){var a=0;e.map(function(e){e.$$key=a,a++})},Di={props:{context:{type:Object,default:function(){return{}}},type:{type:String,default:"pbasica"}},mixins:[Ci],data:function(){return{ctext:{}}},render:function(){var e=this.ctext,a=[],t="pbasica"===this.type?e.rowsEstilobasico:e.rowsEstilopmarc,i="pbasica"===e.filterForm.estilo?"Basica":"Marc";e.filtrarData(),Ei(t);for(var o=function(){var o=t[l],r=[];e.validateGroup(o,!0)&&r.push((0,n.h)("div",{class:"col-1 column items-end justify-center cursor-pointer",style:"width: 50px"},[(0,n.h)(Ai.A,{name:"help_circle",color:"primary",size:"23px",onClick:function(){e.currentRowEstiloBasicoMarc=o,e.openModalAyuda=!0}})])),e.validateGroup(o,!0)&&r.push((0,n.h)("div",{class:"col-1 column justify-center",style:"width: 50px"},[(0,n.h)("div",{class:"row "},[(0,n.h)("div",{class:"col column items-start justify-center text-primary text-center"},[(0,n.h)("div",{class:"row"},[(0,n.h)("div",{class:"row"},[(0,n.h)("div",{class:"col column justify-center"},[(0,n.h)("span",{},o.MARCCOD)])]),(0,n.h)("div",{class:"col"},[(0,n.h)(Ai.A,{class:"q-pl-xs cursor-pointer",style:{visibility:o.CHILDS>1?"visible":"hidden"},name:!0===o.toggle?"caret_down":"caret_right",color:"primary",size:"22px",onClick:function(){o.toggle=!o.toggle,e.configEstilobasicoMarc.ACTIONGROUP.toggle.call(e,JSON.parse(JSON.stringify(o)),o)}})])])])])]));var s=!1;if(e.validateGroup(o,!0)){var c=o.MARCCOD!==o.MARCCODREF,u=!!o.MARCVALORAUTO;c&&(u=!0),s=1===o.MARCREQ&&!o.VAL&&o.MARCVALORAUTO,"pmarc"===e.filterForm.estilo&&c&&r.push((0,n.h)("div",{class:"col-1 column justify-center"},[(0,n.h)(Xt.A,{modelValue:o.VAL1,maxlength:1,debounce:300,onInput:function(a){o.VAL1=a,e.cambiarText(a,"VAL1",o.$$key,i)}})])),"pmarc"===e.filterForm.estilo&&c&&r.push((0,n.h)("div",{class:"col-1 column justify-center"},[(0,n.h)(Xt.A,{modelValue:o.VAL2,maxlength:1,debounce:300,onInput:function(a){o.VAL2=a,e.cambiarText(a,"VAL2",o.$$key,i)}})])),r.push((0,n.h)("div",{class:(e.filterForm.estilo,"col")},[(0,n.h)(Xt.A,{outlined:!1,filled:!0,standout:!0,label:o.MARCNOM,modelValue:o.VAL,disable:u,debounce:300,class:s?"custom-input-border":"",onInput:function(e){o.VAL=e}})])),r.push((0,n.h)("div",{class:"col-1 column justify-center",style:"width: 100px"},[(0,n.h)("div",{class:"row q-gutter-xs"},[e.validateGroup(o,!0)&&0===o.MARCREQ?(0,n.h)(Mi.A,{icon:"delete",color:"primary",flat:!0,dense:!0,size:"11px",round:!0,onClick:function(){Ei(t),e.configEstilobasicoMarc.ACTIONGROUP.delete.call(e,JSON.parse(JSON.stringify(o)),o)}}):(0,n.h)("div"),e.validateGroup(o,!0)&&o.MARCVALORAUTO?(0,n.h)(Mi.A,{icon:"edit",color:"primary",flat:!0,dense:!0,size:"11px",round:!0,onClick:function(){Ei(t),e.configEstilobasicoMarc.ACTIONGROUP.edit.call(e,JSON.parse(JSON.stringify(o)),o)}}):(0,n.h)("div"),e.validateGroup(o,!0)&&1===o.MARCREP?(0,n.h)(Mi.A,{icon:"copy",color:"primary",flat:!0,dense:!0,size:"11px",round:!0,onClick:function(){Ei(t),e.configEstilobasicoMarc.ACTIONGROUP.copy.call(e,JSON.parse(JSON.stringify(o)),o)}}):(0,n.h)("div")])]))}else s=1===o.MARCREQ&&!o.VAL,r.push((0,n.h)("div",{class:"col-1",style:"width: 50px"})),r.push((0,n.h)("div",{class:"col-1",style:"width: 50px"})),r.push((0,n.h)("div",{class:"col-1 column justify-center",style:"width: 50px"},[(0,n.h)(Xt.A,{outlined:!1,filled:!0,standout:!0,disable:!0,debounce:300,modelValue:e.extraerUltimoCaracteres(o.PARENT,o.MARCCOD)})])),r.push((0,n.h)("div",{class:"col column justify-center"},[(0,n.h)(Xt.A,{label:o.MARCNOM,modelValue:o.VAL,disable:o.MARCVALORAUTO&&"input"===o.MARCTIPO,debounce:300,type:"textarea"===o.MARCTIPO?"textarea":"input",class:s?"custom-input-border":"",onInput:function(a){o.VAL=a,e.setValue()}})])),r.push((0,n.h)("div",{class:"col-1 column justify-center",style:"width: 100px"},[(0,n.h)("div",{class:"row q-gutter-xs"},[o.MARCREP&&o.MARCREQ&&o.ISCOPY||e.validateGroup(o,!1)&&0===o.MARCREQ?(0,n.h)(Mi.A,{icon:"delete",color:"primary",flat:!0,dense:!0,size:"11px",round:!0,onClick:function(){Ei(t),e.configEstilobasicoMarc.ACTIONSUBGROUP.delete.call(e,JSON.parse(JSON.stringify(o)),o)}}):(0,n.h)("div"),e.validateGroup(o,!1)&&o.MARCVALORAUTO?(0,n.h)(Mi.A,{icon:"edit",color:"primary",flat:!0,dense:!0,size:"11px",round:!0,onClick:function(){Ei(t),e.configEstilobasicoMarc.ACTIONSUBGROUP.edit.call(e,JSON.parse(JSON.stringify(o)),o)}}):(0,n.h)("div"),e.validateGroup(o,!1)&&1===o.MARCREP?(0,n.h)(Mi.A,{icon:"copy",color:"primary",flat:!0,dense:!0,size:"11px",round:!0,onClick:function(){Ei(t),e.configEstilobasicoMarc.ACTIONSUBGROUP.copy.call(e,JSON.parse(JSON.stringify(o)),o)}}):(0,n.h)("div")])])),r.push((0,n.h)("div",{class:"col-1"}));a.push((0,n.h)("div",{class:"row q-col-gutter-xs ".concat(!0===o.show?"toggle-down":"toggle-up"),style:{padding:"4px 0 2px 0"},onClick:function(a){e.rowSelected(JSON.parse(JSON.stringify(o)),o)}},r))},l=0;l<t.length;l++)o();return(0,n.h)("div",{class:"row biblioteca-mantenimiento-catalogacion"},[(0,n.h)("div",{class:"col-xs-12"},a)])},watch:{context:{immediate:!0,handler:function(e){this.ctext=e}}}};const wi=Di;var xi=wi,Ii=t(69889),ki=t(80340),Fi=t(84603),Oi=t(33950),Ri=t(59089),Vi=t(98361),Li=t(74656),yi=t(38088),Ti=!0;window.dataBasica=null,window.dataMarc=null,window._this={};var Bi={mixins:[Ft,Ot,Tt,jt,Rt,Vt,Lt,yt,Pt,Qt],components:{QList:di.A,QItem:mi.A,QItemSection:fi.A,QItemLabel:pi.A,QPagination:vi.ao,QInput:Xt.A,QSelect:Jt.A,QForm:Wt.A,QImg:Yt.A,QTabs:ai.A,QTab:ti.A,QTabPanels:ii.A,QTabPanel:oi.A,QCard:Zt.A,QCardSection:ei.A,QDialog:ni.A,multiNG:ri.A,QPopupProxy:si.A,QDate:ci.A,QCheckbox:zt.A,QRadio:ui.A,QSeparator:gi.A,MarcBasica:xi,QToggle:bi.A,siePagination:Ii.A,sieVacio:ki.A,siePdf:Fi.A,Upload:Oi.Upload,sieUpload:Ri.A,boxImagen:Vi.A,Carousel:yi.F,Slide:yi.q,QAvatar:Li.A,QCarousel:vi.ci,QCarouselSlide:vi.xp,QCarouselControl:vi.rG,QPage:vi.Tu,QBtn:vi.Il,QTooltip:vi.nC,QIcon:vi.bP},data:function(){var e=this;return{validateUrl:hi.validateUrl,sie:(0,Kt["default"])(),currentMantenimiento:"",titleMantenimiento:"",buttons:[{icon:"add",label:"Agregar",permiso:">1",click:function(){var a=kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return e.filterForm.estado=e.mostrarDisponible?1:0,e.filterForm.devuelve=1,a.n=1,e.openForm();case 1:return a.a(2)}},a)}));function t(){return a.apply(this,arguments)}return t}()},{icon:"search",label:"Consultar Inventario",click:function(){var a=kt()(xt()().m(function a(){var t;return xt()().w(function(a){while(1)switch(a.n){case 0:return e.filterConsultar.bibcod=e.bibcodDefault,a.n=1,e.$http.get("api/HyoBmCatalogacion/getInventarioContadores");case 1:if(t=a.v,"todos"===e.bibcodDefault){a.n=2;break}return a.n=2,e.loadUbicacion(e.bibcodDefault,!0);case 2:e.listarInventario(),e.contadoresInventario=t,e.openModalConsultar=!0;case 3:return a.a(2)}},a)}));function t(){return a.apply(this,arguments)}return t}()}],buttonsRegistroBibliografico:[{icon:"add",label:"Nuevo Registro",permiso:">1",click:function(){var a=kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.openForm();case 1:return a.a(2)}},a)}));function t(){return a.apply(this,arguments)}return t}()},{icon:"save",label:"Guardar",click:this.guardarRegistroBibliografico,loading:!1,permiso:">1"}],openModal:!1,openModalForm:!1,openModalAyuda:!1,openModalAutor:!1,openModalIdioma:!1,openModalEditora:!1,openModalMateria:!1,openModalEditar:!1,action:"create",openModalMantenimiento:!1,currentRowEstiloBasicoMarc:{},bibcodDefault:"todos",filter:{formato:"todos",bibcod:"todos",formatos:[],tipo:"todos",tabla:"todos",tablas:[],tipos:[{label:"Todos",value:"todos"},{label:"Digital",value:1},{label:"Físico",value:2},{label:"Físico y Digital",value:3}],marc:"todos",descripcion:""},filterForm:{formato:"todos",estilo:"pbasica",estilos:[{label:"Básico",value:"pbasica"},{label:"Marc21",value:"pmarc"}],estado:0,devuelve:1,uso:"T",usos:[{label:"Todos",value:"T"},{label:"Estudiantes",value:"E"},{label:"Docentes",value:"D"}],tipo:"2",tipos:[{label:"Digital",value:"1"},{label:"Físico",value:"2"},{label:"Físico y Digital",value:"3"}]},tab:"tab0",titles:["Números de control de información, identificación y clasificación, etc","Entradas principales","Títulos, edición, pie de imprenta","Descripción física","Serie","Notas","Entradas de materia","Entradas secundarias (no materia)","Entradas secundarias de serie,  holdings, etc","Campos locales","Existencias","Imágenes","Material Digital"],myTabs:[],plantillaFormato:[],showTabs:!0,context:{},dataMarc:null,newValue:"",currentCatalogacion:{},currentTipoBusquedas:{},nivel:[],grado:[],page:1,totalPagination:0,totalRegistros:"",openModalConsultar:!1,openModalReportes:!1,openModalmagenes:!1,tipoImagenes:[{label:"Carátula",value:1},{label:"Contracarátula",value:2},{label:"Imagen",value:3}],tipoMaterialDigital:[{label:"PDF",value:1},{label:"Enlace / url / link",value:2}],image:"https://",formImagenes:{tipoImagen:1,titulo:"Carátula",descripcion:"",nroPagina:"",numImagen:3},formMaterialDigital:{tipoMaterialDigital:1,titulo:"",urlArchivo:"",idMaterial:null,tipo:null},mostrarPdfRep1:!1,mostrarDisponible:!1,buttonsConsultar:[{label:"Imprimir Inventario",icon:"print",click:function(){e.openModalReportes=!0}}],buttonsImagenes:[{label:"Agregar Imagen",icon:"plus",permiso:">1",click:function(){e.actionImage="create",e.image="https://",e.formImagenes.tipoImagen=1,e.formImagenes.titulo="Carátula",e.formImagenes.descripcion="",e.formImagenes.nroPagina="",e.openModalmagenes=!0}}],buttonsMaterialesDigitales:[{label:"Agregar Material Digital",icon:"plus",permiso:">1",click:function(){e.actionMaterialDigital="create",e.formMaterialDigital.tipoMaterialDigital=1,e.formMaterialDigital.idMaterial=null,e.formMaterialDigital.titulo="material_digital",e.formMaterialDigital.urlArchivo="",e.formMaterialDigital.tipo=null,e.fileMaterialDigital={},e.fileTipoMaterialDigital={},e.materialDigital=[],e.openModalArchivos=!0}}],actionImage:"create",actionMaterialDigital:"create",fileTipoMaterialDigital:{},materialDigital:[],file:{},imagenes:[],materialesDigitales:[],loading:!1,openModalArchivos:!1,cabecerasCampos:{},groupCampos:{},groupCampos2:{},isCopy:!1,openMaterialDigital:!1,tituloMaterial:"",urlMaterialDigital:"",filePdf:{},openModalImagen:!1,urlImagenBox:"",titleBox:"",slide:1,fullscreen:!1,auditoria:[]}},computed:{isGreater:function(){return(0,li.isGreater)()},tabs:function(){for(var e=[],a=0;a<this.titles.length;a++){var t=this.titles[a],i="".concat(a,"XX");10===a?i="Existencias":11===a?i="Imágenes":12===a&&(i="Material Digital"),e.push({index:a,name:"tab".concat(a),tooltip:t,title:i,show:!1,subtitle:""})}return e}},methods:{require:hi.require,guardarMantenimiento:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n,l,r,s,c,u,d,m,f,p;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,e.$refs.formMantenimiento.validate();case 1:if(t=a.v,t){a.n=2;break}return a.a(2);case 2:return a.p=2,i=String(e.currentMantenimiento||"").toLowerCase(),a.n=3,e.$http.post("api/HyoTablaSe/createSubTablasN1Biblioteca",{params:{nombre:e.titleMantenimiento},secuequ:i});case 3:o=a.v,n=o.item,"autor"===i?(l=n.AUTCOD,r=n.AUTDES,e.rowsAutor.unshift({AUTCOD:l,AUTDES:r})):"editora"===i?(s=n.EDICOD,c=n.EDIDES,e.rowsEditora.unshift({EDICOD:s,EDIDES:c})):"idioma"===i?(u=n.IDICOD,d=n.IDIDES,e.rowsIdioma.unshift({IDICOD:u,IDIDES:d})):"materia"===i&&(m=n.MATCOD,f=n.MATDES,e.rowsMateria.unshift({MATCOD:m,MATDES:f})),e.titleMantenimiento="",e.openModalMantenimiento=!1,a.n=5;break;case 4:a.p=4,p=a.v,e.$notify(p.message,"warning");case 5:return a.a(2)}},a,null,[[2,4]])}))()},editarDblCatalogacion:function(e,a){var t=this;return kt()(xt()().m(function i(){return xt()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,t.config.ACTION.edit.call(t,e,a);case 1:return i.a(2)}},i)}))()},agregarCampos:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n,l;return xt()().w(function(a){while(1)switch(a.n){case 0:return t="pbasica"===e.filterForm.estilo?"PBASICA":"PMARC",i=e.rowsCamposMarcBasica.filter(function(e){return!1===e.DISABLE&&1===e[t]}),o=i.map(function(e){return e.MARCCOD}),a.n=1,e.$http.get("api/HyoBmCatalogacion/agregarCampos",{params:{marccods:o}});case 1:return n=a.v,e.dataMarc=null,e.dataBasica=null,window.dataMarc=null,window.dataBasica=null,e.tab="tab0",e.showTabs=!0,n.map(function(a){for(var t=a.MARCCODREF||a.MARCCOD,i=0;i<e.rowsEstilobasico.length;i++){var o=e.rowsEstilobasico[i],n=o.MARCCODREF||o.MARCCOD;if(t===n&&o.MARCCODREF&&!0!==o.USADO){o.USADO=!0,a.IDFICHADET=o.IDFICHADET;break}}e.rowsEstilobasico.push(a)}),l=e.procesarPlantilla(e.rowsEstilobasico),e.rowsEstilobasico=l,e.generarFormulario(),a.n=2,e.cambiarTab({index:0});case 2:e.loadTextPadre(),e.openModalCamposMarcBasica=!1;case 3:return a.a(2)}},a)}))()},markAll:function(e){var a="pbasica"===this.filterForm.estilo?"PBASICA":"PMARC";this.rowsCamposMarcBasica.map(function(t){!1===t.DISABLE&&(t[a]=!0===e?1:0)})},cambiarMaterialDigital:function(){this.formMaterialDigital.urlArchivo="",this.formMaterialDigital.titulo="material_digital"},editarImagen:function(e){this.actionImage="update",this.formImagenes.tipoImagen=e.NUMIMAGEN,this.formImagenes.numImagen=e.NUMIMAGEN,this.formImagenes.titulo=e.TITULO,this.formImagenes.descripcion=e.DESCRIPCION,this.formImagenes.nroPagina=e.NUMPAG,this.image=this.generarUrlImagen(e),this.openModalmagenes=!0},eliminarImagen:function(e){var a=this;return kt()(xt()().m(function t(){var i,o;return xt()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,a.$confirmar("¿Está seguro de eliminar la imagen?","delete");case 1:if(i=t.v,!i){t.n=5;break}return o={rutaFinal:e.RUTAIMAGEN,tipo:e.ADJUNTO_TIPO,numimagen:e.NUMIMAGEN,fichacod:e.FICHACOD},t.p=2,t.n=3,a.$http.post("api/HyoBmCatalogacion/eliminarImagenesStorage",o);case 3:a.imagenes.splice(a.imagenes.indexOf(e),1),a.$notify("Imagen eliminada","success"),t.n=5;break;case 4:t.p=4,t.v,a.$notify("No ha sido posible eliminar la imagen","warning");case 5:return t.a(2)}},t,null,[[2,4]])}))()},errorImagen:function(e){e.RUTA_ARCHIVO="".concat(this.sie.webhost,"/images/cms/sinimagen-150x150.png")},openFile:function(e){(0,Gt.Fe)(e.RUTA_ARCHIVO)},verMaterialDigital:function(e){if(Object.prototype.hasOwnProperty.call(e,"TIPO_MATERIAL")&&2===e.TIPO_MATERIAL)return window.open(e.RUTA_ARCHIVO,"_blank"),!1;var a=e.ID_MATERIAL;this.urlMaterialDigital="".concat(this.sie.api,"/HyoCatalogo/descargarpdf/").concat(a,"/Material Digital?sie-token=").concat(this.sie.token),this.tituloMaterial=e.TITULO,this.openMaterialDigital=!0},editarArchivo:function(e){this.actionMaterialDigital="update",this.formMaterialDigital.tipoMaterialDigital=e.TIPO_MATERIAL,this.formMaterialDigital.titulo=e.TITULO,this.formMaterialDigital.urlArchivo=e.RUTAARCHIVO,this.formMaterialDigital.idMaterial=e.ID_MATERIAL,this.formMaterialDigital.tipo=e.ADJUNTO_TIPO,this.openModalArchivos=!0},sendImage:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n,l;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:if(1===e.formImagenes.tipoImagen?e.formImagenes.numImagen=1:2===e.formImagenes.tipoImagen?e.formImagenes.numImagen=2:3===e.formImagenes.tipoImagen&&(e.formImagenes.numImagen=3),t=new FormData,t.append("operacion",e.actionImage),t.append("numImagen",e.formImagenes.numImagen),t.append("tipoImagen",e.formImagenes.tipoImagen),t.append("tituloImagen",e.formImagenes.titulo),t.append("descripcionImagen",e.formImagenes.descripcion),t.append("numpagImagen",e.formImagenes.nroPagina||""),t.append("fimagen",e.file),t.append("fichacod",e.currentCatalogacion.FICHACOD),e.loading=!0,"create"!==e.actionImage){a.n=5;break}return a.p=1,a.n=2,e.$http.post("api/HyoBmCatalogacion/guardarImagenFicha",t,{headers:{"Content-Type":"multipart/form-data"}});case 2:i=a.v,i.message,i.data,e.openModalmagenes=!1,a.n=4;break;case 3:a.p=3,n=a.v,e.$notify(n.message,"warning");case 4:a.n=8;break;case 5:return a.p=5,/^(http|https)/g.test(e.image)&&(e.files=[],t.delete("fimagen")),a.n=6,e.$http.post("api/HyoBmCatalogacion/guardarImagenFicha",t,{headers:{"Content-Type":"multipart/form-data"}});case 6:o=a.v,o.message,o.data,e.openModalmagenes=!1,a.n=8;break;case 7:a.p=7,l=a.v,e.$notify(l.message,"warning");case 8:return e.loading=!1,a.n=9,e.listarImagenes();case 9:return a.a(2)}},a,null,[[5,7],[1,3]])}))()},addFile:function(e){this.filePdf=e[0]},grabarPdf:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,e.formMaterialDigital.titulo){a.n=1;break}return e.$alert("Ingrese título","info"),a.a(2);case 1:if(t="",!(Object.entries(e.filePdf).length>0)){a.n=3;break}return a.n=2,(0,Oi.Upload)({url:"api/HyoArchivo/tmp/upload",file:e.filePdf});case 2:i=a.v,t=i.name;case 3:return a.n=4,e.$refs.formMaterialDigital.validate();case 4:if(o=a.v,o){a.n=5;break}return a.a(2);case 5:return e.loading=!0,n={operacion:e.actionMaterialDigital,urlArchivo:e.formMaterialDigital.urlArchivo,tipomaterial:e.formMaterialDigital.tipoMaterialDigital,titulo:e.formMaterialDigital.titulo,filePdf:t,fichacod:e.currentCatalogacion.FICHACOD},e.formMaterialDigital.idMaterial&&(n.idmaterial=e.formMaterialDigital.idMaterial),e.formMaterialDigital.tipo&&(n.tipo=e.formMaterialDigital.tipo),a.n=6,e.$http.post("api/MantenimientosController/addMaterialDigital",{parametros:n});case 6:return a.n=7,e.listarMaterialDigital();case 7:e.openModalArchivos=!1,e.loading=!1,a.n=9;break;case 8:a.p=8,a.v,e.loading=!1,e.$notify("Ha ocurrido un error de conexión, vuelve a intentarlo más tarde","warning");case 9:return a.a(2)}},a,null,[[0,8]])}))()},sendMaterialDigital:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:if(e.formMaterialDigital.titulo){a.n=1;break}return e.$alert("Ingrese título","info"),a.a(2);case 1:if(null!==(t=e.fileTipoMaterialDigital)&&void 0!==t&&t.name){a.n=2;break}if(1!==e.formMaterialDigital.tipoMaterialDigital){a.n=2;break}if("update"===e.actionMaterialDigital){a.n=2;break}return e.$alert("Seleccione un archivo","info"),a.a(2);case 2:return a.n=3,e.$refs.formMaterialDigital.validate();case 3:if(i=a.v,i){a.n=4;break}return a.a(2);case 4:return e.loading=!0,a.p=5,o=new FormData,o.append("operacion",e.actionMaterialDigital),o.append("urlArchivo",e.formMaterialDigital.urlArchivo),o.append("tipomaterial",e.formMaterialDigital.tipoMaterialDigital),o.append("titulo",e.formMaterialDigital.titulo),o.append("filePdf",e.fileTipoMaterialDigital),o.append("fichacod",e.currentCatalogacion.FICHACOD),e.formMaterialDigital.idMaterial&&o.append("idmaterial",e.formMaterialDigital.idMaterial),e.formMaterialDigital.tipo&&o.append("tipo",e.formMaterialDigital.tipo),a.n=6,e.$http.post("api/HyoBmCatalogacion/guardarMaterialDigital",o,{headers:{"Content-Type":"multipart/form-data"}});case 6:return a.n=7,e.listarMaterialDigital();case 7:e.openModalArchivos=!1,a.n=9;break;case 8:a.p=8,a.v,e.$notify("No ha sido posible guardar el material digital","success");case 9:e.loading=!1;case 10:return a.a(2)}},a,null,[[5,8]])}))()},cambiarTipoImagen:function(e){this.formImagenes.titulo=1===e?"Carátula":2===e?"Contracarátula":""},loadImage:function(){this.$refs.fileImagenes.$el.querySelector("input").click()},loadMaterialDigital:function(){this.$refs.fileMaterialDigital.$el.querySelector("input").click()},putImage:function(){try{this.file=this.$refs.fileImagenes.$el.querySelector("input").files[0],this.image=window.URL.createObjectURL(this.file)}catch(e){console.error(e)}},putMaterialDigital:function(){try{this.fileTipoMaterialDigital=this.$refs.fileMaterialDigital.$el.querySelector("input").files[0],this.materialDigital=window.URL.createObjectURL(this.fileTipoMaterialDigital)}catch(e){console.error(e)}},cambiarUso:function(){this.nivel=[],this.grado=[]},getGrupoMarccod:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a=a||this.rowsEstilobasico;var t,i=[],o=Dt()(a);try{for(o.s();!(t=o.n()).done;){var n=t.value;n.IDFICHADET?n.IDFICHADET===this.currentRowEstiloBasicoMarc.IDFICHADET&&this.currentRowEstiloBasicoMarc.PARENT===n.PARENT&&(i[i.length]=n):Object.prototype.hasOwnProperty.call(this.currentRowEstiloBasicoMarc,"COPY")?Object.prototype.hasOwnProperty.call(this.currentRowEstiloBasicoMarc,"COPY")&&this.currentRowEstiloBasicoMarc.COPY===n.COPY&&this.currentRowEstiloBasicoMarc&&n.COPY&&(i[i.length]=n):Object.prototype.hasOwnProperty.call(this.currentRowEstiloBasicoMarc,"COPY")||Object.prototype.hasOwnProperty.call(n,"COPY")||this.currentRowEstiloBasicoMarc.PARENT!==n.PARENT||(i[i.length]=n)}}catch(e){o.e(e)}finally{o.f()}var l=i[0];i=JSON.parse(JSON.stringify(i.slice(1)));var r=i.map(function(a){if(a.VAL&&a.MARCCODREF){var t=e.extraerUltimoCaracteres(a.PARENT,a.MARCCOD);return"$".concat(t," ").concat(a.VAL)}return""});"pbasica"===this.filterForm.estilo?null===l.MARCCODREF?l.VAL=r.join(" "):l.VAL=this.currentRowEstiloBasicoMarc.VAL:null===l.MARCCODREF?(r.unshift("".concat(l.VAL1||"#").concat(l.VAL2||"#")),l.VAL=r.join(" "),l.VAL=l.VAL):l.VAL=this.currentRowEstiloBasicoMarc.VAL},setValue:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i;return xt()().w(function(t){while(1)switch(t.n){case 0:i=!(e.length>0&&void 0!==e[0])||e[0],a.currentRowEstiloBasicoMarc.VAL=a.currentRowEstiloBasicoMarc.VAL||"",a.currentRowEstiloBasicoMarc.VAL1=a.currentRowEstiloBasicoMarc.VAL1||"",a.currentRowEstiloBasicoMarc.VAL2=a.currentRowEstiloBasicoMarc.VAL2||"","pbasica"===a.filterForm.estilo?a.getGrupoMarccod():a.getGrupoMarccod(a.dataMarc[a.currentRowEstiloBasicoMarc.tabIndex]),i&&(a.openModalEditar=!1);case 1:return t.a(2)}},t)}))()},rowSelected:function(e,a){this.currentRowEstiloBasicoMarc=a},getData0And2:function(){var e=[];"pmarc"===this.filterForm.estilo?(e=JSON.parse(JSON.stringify((this.dataMarc||{})["0"]||[])),e=e.concat(JSON.parse(JSON.stringify((this.dataMarc||{})["2"]||[])))):e=this.rowsEstilobasico;var a={},t=(e||[]).filter(function(e){return["020a","082a","245a"].includes(e.MARCCOD)});return t.map(function(e){"020a"===e.MARCCOD?a.isbn=e.VAL:"082a"===e.MARCCOD?a.catalogo=e.VAL:"245a"===e.MARCCOD&&(a.titulo=e.VAL)}),a},filtrarData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.getDataForm(e),t={};for(var i in a){var o=a[i];if(o.length>0){var n=Mt()(o,1),l=n[0];if(l.CHILDS=o.length,"pmarc"===this.filterForm.estilo)l.VAL1=l.VAL1||"",l.VAL2=l.VAL2||"";else if(!e&&!l.VAL)continue;for(var r=0;r<o.length;r++){var s=o[r];t[i]||(t[i]=[]),t[i].push(s)}}}return t},filtrarDataPadreConHijos:function(){var e=this.filtrarData(),a={};for(var t in e){var i=e[t],o=Mt()(i,1),n=o[0];null===n.MARCCODREF&&i.length<2||(a[t]=i)}return a},validarRequeridos:function(){var e=this,a="";if("pmarc"===this.filterForm.estilo){var t=function(t){var i=e.dataMarc[t];i.map(function(i){var o=i.MARCREQ,n=i.MARCNOM,l=i.VAL;l=(l||"").trim(),1===o&&(l||(a+=a?"</br><b>".concat(n,"</b> del tab <b>").concat(e.myTabs[t].title,"</b> es obligatorio"):"<b>".concat(n,"</b> del tab <b>").concat(e.myTabs[t].title,"</b> es obligatorio")))})};for(var i in this.dataMarc)t(i)}else{var o=[];this.rowsEstilobasico.map(function(e,a){e.$$key;var t=e.MARCREQ,i=e.MARCNOM,n=e.VAL;1===t&&(n=(n||"").trim(),n||o.push("<b>(".concat(i,")</b> es obligatorio")))}),a=o.join("</br>")}return{validate:""!==a,message:a}},guardarRegistroBibliografico:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n,l,r,s,c,u,d,m,f,p,g,b,h,v,C,A,M,E,D,w,x,I,k,F,O,R,V;return xt()().w(function(a){while(1)switch(a.p=a.n){case 0:if(!(parseInt(e.tab.split("tab")[1])>=10)){a.n=1;break}return e.tab="tab0",a.n=1,e.$nextTick();case 1:return a.n=2,e.$refs.formpbasicamarc[0].validate();case 2:if(t=a.v,t){a.n=3;break}return a.a(2);case 3:if(i=["T"],"T"===e.filterForm.uso){a.n=4;break}if(i=e.$refs.refMultiNG.getCombinacionTodos(),!(i.length<1)){a.n=4;break}return a.a(2,e.$notify("Nivel y Grado son obligatorios","warning"));case 4:if(o=e.validarRequeridos(),n=o.validate,l=o.message,!n){a.n=5;break}return a.a(2,e.$alert('\n          <div class="row">\n            <div class="col-xs-12 scroll" style="max-height: 200px">\n              '.concat(l,"\n            </div>\n          </div>\n        "),"info",!0));case 5:if(r=e.filtrarData(),s=e.getData0And2(),c=s.isbn,u=s.catalogo,d=s.titulo,m=e.currentCatalogacion.FICHACOD,f=e.filterForm,p=f.formato,g=f.uso,b=f.tipo,h=f.devuelve,v=f.estado,C={fichacod:"create"===e.action?null:m,forcod:p,formato:p,uso:g,tipo:b,titulo:d,catalogo:u,isbn:c,estilo:e.filterForm.estilo,nivel_grado:i,data:r,devuelve:h,estado:v},"create"===e.action)for(A in r){M=r[A],E=Dt()(M);try{for(E.s();!(D=E.n()).done;)w=D.value,w.IDFICHADET=null,w.IDFICHAVALOR=null}catch(e){E.e(e)}finally{E.f()}}return e.buttonsRegistroBibliografico[1].loading=!0,a.p=6,x=JSON.stringify(C),a.n=7,e.$http.post("api/HyoBmCatalogacion/guardarRegistroBibliografico",{permiso:e.sie.ruta.nivel,operacion:"grabarFichaMarc",paramsString:x});case 7:return I=a.v,k=I.fichacod,a.n=8,e.getCatalogacionFichacod(k);case 8:if(F=a.v,O=F.data,R=Mt()(O,1),V=R[0],C.fichacod){a.n=10;break}return e.rows.unshift(V),a.n=9,e.editarDblCatalogacion(V,V);case 9:e.$notify("Se creó la ficha correctamente","success"),a.n=11;break;case 10:e.$refs.refCatalogacion.updateRow(e.currentCatalogacion,V),e.$notify("Se actualizó la ficha correctamente","success");case 11:a.n=13;break;case 12:a.p=12,a.v,e.$notify("No ha sido posible continuar con el proceso, vuelva a intentarlo en un momento","warning");case 13:e.buttonsRegistroBibliografico[1].loading=!1;case 14:return a.a(2)}},a,null,[[6,12]])}))()},cambiarTab:function(e){var a=this;return kt()(xt()().m(function t(){var i;return xt()().w(function(t){while(1)switch(t.n){case 0:if("pmarc"===a.filterForm.estilo&&(a.dataMarc||(i={},a.rowsEstilobasico.map(function(e){var a=e.MARCCOD.charAt(0);e.tabIndex=a,e.PLACEHOLDER=e.MARCNOM,i[a]||(i[a]=[]),i[a].push(e)}),a.dataMarc=i),window.dataMarc=a.dataMarc[e.index],a["rowsEstilopmarc"]=window.dataMarc),10!==e.index){t.n=1;break}return t.n=1,a.getExistencias();case 1:if(11!==e.index){t.n=2;break}return t.n=2,a.listarImagenes();case 2:if(12!==e.index){t.n=3;break}return t.n=3,a.listarMaterialDigital();case 3:return t.a(2)}},t)}))()},listarImagenes:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoBmCatalogacion/listarImagenes",{params:{fichacod:e.currentCatalogacion.FICHACOD}});case 1:e.imagenes=a.v;case 2:return a.a(2)}},a)}))()},generarUrlImagen:function(e){return this.sie.api+"/HyoCatalogo/descargarImagenes/"+e.IMG+"?sie-token="+this.sie.token},listarMaterialDigital:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i;return xt()().w(function(t){while(1)switch(t.n){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:"",t.n=1,a.$http.get("api/HyoBmCatalogacion/listarMaterialDigital",{params:{fichacod:i||a.currentCatalogacion.FICHACOD}});case 1:a.materialesDigitales=t.v;case 2:return t.a(2)}},t)}))()},limpiarTabs:function(){for(var e=this.tabs,a=0;a<=9;a++){var t=e[a];t.subtitle=this.titles[a]}"pbasica"===this.filterForm.estilo?(e[0].title="Catalogación",e[0].subtitle="Catalogación"):(e[0].title="0XX",e[0].subtitle=this.titles[0]),this.myTabs=e},eliminarArchivo:function(e){var a=this;return kt()(xt()().m(function t(){var i,o,n,l;return xt()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,a.$confirmar("¿Está seguro de eliminar?","delete");case 1:if(i=t.v,!i){t.n=6;break}return t.p=2,t.n=3,a.$http.post("api/HyoBmCatalogacion/eliminarArchivoStorage",{params:{tipoMaterial:e.TIPO_MATERIAL,idMaterial:e.ID_MATERIAL,tipo:e.ADJUNTO_TIPO,archivo:e.RUTAARCHIVO}});case 3:return o=t.v,n=o.message,a.$notify(n,"success"),t.n=4,a.listarMaterialDigital();case 4:t.n=6;break;case 5:t.p=5,l=t.v,console.log(l);case 6:return t.a(2)}},t,null,[[2,5]])}))()},generarFormulario:function(){var e=this;if(this.limpiarTabs(),(this.rowsEstilobasico||[]).length>0){var a=["0"],t=0,i=0;this.rowsEstilobasico.map(function(o){o["VAL"]=o.VAL||o.FICHADESC||"",o["VAL1"]=o.VAL1||o.INDICADOR1||"",o["VAL2"]=o.VAL2||o.INDICADOR2||"",o.REFTABLA="null"===o.REFTABLA?null:o.REFTABLA,o.REFTABLA&&(o["CODIGO"]=o.REFTABLA||null);var n=o.MARCCOD,l=o.MARCCODREF;t=n===l?0:1;var r=l&&t?0:1;i=n.charAt(0),r&&"pmarc"===e.filterForm.estilo&&-1===a.indexOf(String(i))&&a.push(i)}),window.dataBasica=this.rowsEstilobasico,this.ocultarTabs(a)}else this.showTabs=!1,this.$alert("<b>Plantilla vacía</b>, Diríjase al menú mantenimiento opción formato y agregue una estructura a su plantilla","info",!0)},loadTextPadre:function(){var e=this;"update"===this.action&&this.rowsEstilobasico.map(function(a){e.currentRowEstiloBasicoMarc=a,e.getGrupoMarccod()})},ocultarTabs:function(e){for(var a=0;a<=12;a++)-1===e.indexOf(String(a))?this.myTabs[a].show=!1:this.myTabs[a].show=!0,"update"===this.action&&[10,11,12].includes(a)&&(this.myTabs[a].show=!0)},openForm:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i,o,n,l,r;return xt()().w(function(t){while(1)switch(t.n){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:"create",o=e.length>1&&void 0!==e[1]&&e[1],a.action=i||"create",a.dataBasica=null,a.dataMarc=null,a.isCopy=!1,a.filterForm.estilo="pbasica",a.nivel=[],a.grado=[],"update"!==a.action){t.n=2;break}return t.n=1,a.$http.get("api/HyoBFichaNG/getFichaNG",{params:{fichacod:a.currentCatalogacion.FICHACOD}});case 1:n=t.v,l=n.nivel,r=n.grado,a.nivel=l,a.grado=r,t.n=3;break;case 2:a.currentCatalogacion={};case 3:return a.openModalForm=!0,t.n=4,a.cambiarAttr("create"===i);case 4:a.loadTextPadre(),!0===o&&(a.action="create",a.isCopy=!0);case 5:return t.a(2)}},t)}))()},required:function(e){return![null,void 0,""].includes(e)||"Campo requerido"},procesarPlantilla:function(e){var a={};e.map(function(e){e.PARENT=e.MARCCODREF||e.MARCCOD,e.PARENT!==e.MARCCOD?e.show=Ti:(e["showToggle"]=!0,e.toggle=Ti,e.show=!0);var t="".concat(e.PARENT).concat(e.IDFICHADET||"");a[t]||(a[t]=[]),a[t].push(e)});var t,i=Object.keys(a).sort(),o=[],n=Dt()(i);try{for(n.s();!(t=n.n()).done;){var l=t.value;o=o.concat(a[l])}}catch(e){n.e(e)}finally{n.f()}return o},getPlantillaFormato:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i,o,n;return xt()().w(function(t){while(1)switch(t.n){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:0,i="create"===a.action?0:a.currentCatalogacion.FICHACOD||0,t.n=1,a.$http.get("api/HyoBmCatalogacion/plantillaFormato",{params:{forcod:"todos"===a.filterForm.formato?0:a.filterForm.formato,estilo:a.filterForm.estilo,fichacod:i}});case 1:o=t.v,n=a.procesarPlantilla(o),a.rowsEstilobasico=n;case 2:return t.a(2)}},t)}))()},cambiarAttr:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i;return xt()().w(function(t){while(1)switch(t.n){case 0:if(i=e.length>0&&void 0!==e[0]&&e[0],a.tab="tab0",a.showTabs=!0,!(a.filter.formatos.length>0)){t.n=2;break}return!0===i&&(a.filterForm.formato=1),t.n=1,a.getPlantillaFormato();case 1:a.generarFormulario();case 2:return t.a(2)}},t)}))()},cambiarAttAndTab:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i;return xt()().w(function(t){while(1)switch(t.n){case 0:if(i=e.length>0&&void 0!==e[0]&&e[0],"update"!==a.action||!1!==i){t.n=1;break}return t.a(2);case 1:return a.dataMarc=null,a.dataBasica=null,window.dataMarc=null,window.dataBasica=null,t.n=2,a.cambiarAttr();case 2:a.cambiarTab({index:0}),a.loadTextPadre();case 3:return t.a(2)}},t)}))()},getMarcFiltro:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoBmMarc/getMarcFiltro");case 1:e.filter.tablas=a.v,e.filter.tablas.unshift({MARCCOD:"todos",MARCETI:"Todos"});case 2:return a.a(2)}},a)}))()},getFormato:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoBmFormato/getFormato");case 1:e.filter.formatos=a.v,e.filter.formatos.length>0&&e.filter.formatos.unshift({FORCOD:"todos",FORDESC:"Todos"});case 2:return a.a(2)}},a)}))()},getCatalogacionTabla:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:if(e.filter.descripcion){a.n=1;break}return a.a(2,!1);case 1:return a.n=2,e.getCatalogacion();case 2:return a.a(2)}},a)}))()},limpiar:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return e.filter.formato="todos",e.filter.bibcod="todos",e.filter.tipo="todos",e.filter.descripcion="",e.filter.tabla="todos",e.page=1,a.n=1,e.getCatalogacion();case 1:return a.a(2)}},a)}))()},getCatalogacion:function(){var e=arguments,a=this;return kt()(xt()().m(function t(){var i,o,n,l,r,s,c;return xt()().w(function(t){while(1)switch(t.n){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:1,o=e.length>1&&void 0!==e[1]?e[1]:{},a.page=i||a.page,n={biblioteca:String(a.filter.bibcod||""),formato:String(a.filter.formato||""),tipo:a.filter.tipo||"",descripcion:a.filter.descripcion||"",marc:a.filter.tabla||"",page:a.page,sort:o},t.n=1,a.$http.get("api/HyoBmCatalogacion/getCatalogacion",{params:n});case 1:l=t.v,r=l.data,s=l.totalPagination,c=l.de,a.totalRegistros=c,a.totalPagination=s,a.rows=r;case 2:return t.a(2)}},t)}))()},getCatalogacionFichacod:function(e){var a=this;return kt()(xt()().m(function t(){return xt()().w(function(t){while(1)switch(t.n){case 0:return t.a(2,a.$http.get("api/HyoBmCatalogacion/getCatalogacion",{params:{fichacod:e}}))}},t)}))()},getFicha:function(e){var a=this;return kt()(xt()().m(function t(){var i,o,n;return xt()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,a.$http.get("api/HyoBmCatalogacion/fichaDetalle",{params:{fichacod:e}});case 1:return i=t.v,o=i.fichaDetalle,n=i.imagenes,a.imagenes=n.map(function(e){return e.SRC_IMG="".concat(a.sie.api,"/HyoCatalogo/descargarImagenes/").concat(e.IMG,"?sie-token=").concat(a.sie.token),e}),t.n=2,a.listarMaterialDigital(e);case 2:a.rowsFicha=o,a.fieldsFicha[0].label="Tipo Documento: ".concat(o[0].FORDESC);case 3:return t.a(2)}},t)}))()},getDataForm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=[];if("pbasica"===this.filterForm.estilo)a=window.dataBasica;else for(var t in this.dataMarc){var i=this.dataMarc[t]||[];a=a.concat(i)}a=a||[];var o={};return a.map(function(a){a.VAL=a.VAL||"",a.VAL1=a.VAL1||"",a.VAL2=a.VAL2||"";var t="",i="".concat(a.PARENT).concat(a.IDFICHADET||"");a.MARCCOD===a.MARCCODREF&&a.VAL?o[i]=[a]:Object.prototype.hasOwnProperty.call(a,"COPY")||a.PARENT!==a.MARCCOD&&a.PARENT!==a.MARCCODREF||!a.VAL?Object.prototype.hasOwnProperty.call(a,"COPY")&&a.VAL?(t=a.COPY,t===a.COPY&&(o["".concat(a.PARENT,"-").concat(a.COPY)]||(o["".concat(a.PARENT,"-").concat(a.COPY)]=[]),o["".concat(a.PARENT,"-").concat(a.COPY)].push(a))):!0===e&&(o[i]?o[i].push(a):o[i]=[a]):(o[i]||(o[i]=[]),o[i].push(a))}),o},modalCamposMarcBasica:function(){var e=this;return kt()(xt()().m(function a(){var t,i,o,n,l,r,s,c,u,d,m;return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoBmCatalogacion/listarCampos",{params:{estilo:e.filterForm.estilo,forcod:e.filterForm.formato}});case 1:for(l in t=a.v,i=e.getMarcCods(!0),o={},t.map(function(e){e.MARCCODREF!==e.MARCCOD&&(e.MARCNOM=(e.MARCCOD||"").substring(3)+" -- "+e.MARCNOM),o[e.MARCCODREF]||(o[e.MARCCODREF]=[]),o[e.MARCCODREF].push(e)}),n=[],o)r=o[l],r.length>1?(s=JSON.parse(JSON.stringify(r[0])),s.MARCCOD=s.MARCCODREF,n.push(s),n=n.concat(r)):(c=JSON.parse(JSON.stringify(r[0])),c.MARCCOD!==c.MARCCODREF&&(c.MARCCOD=c.MARCCODREF,n.push(c)),n.push(r[0]));n.sort(function(e,a){return e.MARCCODREF-a.MARCCODREF}),u={},d={},m="",n.map(function(a){var t="pbasica"===e.filterForm.estilo?"PBASICA":"PMARC";i.indexOf(a.MARCCOD)>-1?(a.DISABLE=!0,a[t]=1):(a.DISABLE=!1,a[t]=0),a.MARCCOD===a.MARCCODREF&&(m=a.MARCCODREF,e.cabecerasCampos[m]=a,u[m]=[a],d[m]=[]),a.MARCCOD!==a.MARCCODREF&&u[m]&&(a.CABECERA=m,u[m][u[m].length]=a,d[m][d[m].length]=a)}),e.groupCampos=u,e.groupCampos2=d,e.rowsCamposMarcBasica=n,e.openModalCamposMarcBasica=!0;case 2:return a.a(2)}},a)}))()},getMarcCods:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.filtrarData(e),t=[];for(var i in a){var o=a[i];o.map(function(e){t.push(e.MARCCOD)})}return t},openBoxImagen:function(e){this.urlImagenBox=e.SRC_IMG,this.titleBox=e.TITULO,this.openModalImagen=!0},configurarBibliotecas:function(){var e=this;return kt()(xt()().m(function a(){var t;return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoBBiblioteca/getBBilioteca");case 1:t=a.v,"T"!==e.sie.acceso_biblio?(t.map(function(a){e.sie.acceso_bibcod===a.BIBCOD&&e.bbibliotecas.push(a)}),e.bibcodDefault=e.sie.acceso_bibcod,e.filter.bibcod=e.bibcodDefault):e.bbibliotecas=t,e.bbibliotecas.length>1&&(e.bbibliotecas.unshift({BIBDESC:"Todos",BIBCOD:"todos"}),e.bibcodDefault="todos",e.filter.bibcod=e.bibcodDefault);case 2:return a.a(2)}},a)}))()}},created:function(){var e=this;return kt()(xt()().m(function a(){return xt()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.configurarBibliotecas();case 1:return a.n=2,e.getCatalogacion();case 2:return a.n=3,e.getMarcFiltro();case 3:return a.n=4,e.getFormato();case 4:e.mostrarPdfRep1=["D004","0084","0388","0078","0071","0057","0015","0245","0076","0042","0065","0005","0205"].includes(e.sie.colcod),e.mostrarDisponible=["0540"].includes(e.sie.colcod);case 5:return a.a(2)}},a)}))()},mounted:function(){this.context=this,window._this=this},unmounted:function(){window.dataMarc=null,window.dataBasica=null}},Si=t(12807);const Ui=(0,Si.A)(Bi,[["render",Ct]]);var Ni=Ui}}]);