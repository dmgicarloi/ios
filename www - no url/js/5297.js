"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[5297],{5297:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var t=r(61758),o={class:"col-xs-12"},i={class:"col-xs-12"};function a(e,n){var r=this,a=(0,t.g2)("header-btn"),s=(0,t.g2)("sie-table"),l=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-card"),u=(0,t.g2)("q-input"),f=(0,t.g2)("sie-ngs"),m=(0,t.g2)("q-form"),d=(0,t.g2)("sie-modal"),p=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(p,{class:"exalumnos-promociones"},{default:(0,t.k6)(function(){return[(0,t.bF)(c,null,{default:(0,t.k6)(function(){return[(0,t.bF)(a,{name:"Promociones",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(l,null,{default:(0,t.k6)(function(){return[(0,t.bF)(s,{data:e.rows,selection:"single",columns:e.fields,ref:"table","save-cells":"",config:e.config,context:r,css:{height:"80vh"}},null,8,["data","columns","config"])]}),_:1})]}),_:1}),(0,t.bF)(d,{class:"modal-q-page exalumnos-promociones",css:{width:"700px"},modelValue:e.openModal,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openModal=n}),title:e.titulo,ok:e.$t("botones.guardar"),footer:!0,onSubmit:e.grabarDatos,onClose:e.cerrarModal},{default:(0,t.k6)(function(){return[(0,t.bF)(m,{class:"row q-pa-sm q-col-gutter-sm",ref:"refForm"},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{class:"q-col-gutter-sm col-xs-12",ref:"refSieGNS","precargar-grado":!1,"class-nivel":"col-xs-12","class-grado":"col-xs-12","class-seccion":"col-xs-12"},{prepend:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.bF)(u,{modelValue:e.frm.ANIO,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.frm.ANIO=n}),label:"Año",rules:[e.validarAnio]},null,8,["modelValue","rules"])]),(0,t.Lk)("div",i,[(0,t.bF)(u,{modelValue:e.frm.NOMBRE,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.frm.NOMBRE=n}),label:"Promoción",rules:[function(e){return e.length>=3||"Porfavor indique un dato correcto"}]},null,8,["modelValue","rules"])])]}),_:1},512)]}),_:1},512)]}),_:1},8,["modelValue","title","ok","onSubmit","onClose"])]}),_:1})}var s=r(76080),l=r.n(s),c=r(45254),u=r.n(c),f=(r(76921),r(13600),r(52776),r(37406),r(84433),r(44264),r(6123)),m=r(95718),d=r(53380),p=r(9736),O=r(95477),g={data:function(){return{config:{PROMOCION:{component:"input",type:"string",permiso:"> 2",maxlength:100,input:function(e){return this.frm=e,this.grabarDatos()}},INSTRUDES:{prevent:!0,renderHtml:function(e,n){return n("span","".concat(e.INSTRUDES?e.INSTRUDES:"Todos"))}},GRADODES:{prevent:!0,renderHtml:function(e,n){return n("span","".concat(e.GRADODES?e.GRADODES:"Todos"))}},SECCIONDES:{prevent:!0,renderHtml:function(e,n){return n("span","".concat(e.SECCIONDES?e.SECCIONDES:"Todos"))}},ACCION:{component:"button",icon:["edit","delete"],permisos:{edit:"=== 3",delete:"=== 3"},tooltip:{edit:"Editar",delete:"Eliminar"},edit:function(e,n){var r=this;this.openModal=!0,this.titulo="Edición: ".concat(e.NOMBRE),this.frm=e,this.$nextTick(u()(l()().m(function e(){return l()().w(function(e){while(1)switch(e.n){case 0:return r.$refs.refSieGNS.ngs.nivel=r.frm.INSTRUCOD,e.n=1,r.$refs.refSieGNS.loadGrados();case 1:return r.$refs.refSieGNS.ngs.grado=r.frm.GRADOCOD,e.n=2,r.$refs.refSieGNS.loadSeccion();case 2:r.$refs.refSieGNS.ngs.seccion=r.frm.SECCIONCOD;case 3:return e.a(2)}},e)})))},delete:function(e){var n=this;this.$confirm("¿Realmente desea eliminar este registro?","delete").onOk(u()(l()().m(function r(){var t,o,i;return l()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,n.$http.delete("api/ExAlumnos/deletePromocion",{params:{id_promocion:e.ID_PROMOCION}});case 1:return t=r.v,o=t.message,n.$notify(o,"success"),r.n=2,n.getPromociones();case 2:r.n=4;break;case 3:r.p=3,i=r.v,n.$notify(i.message,"warning");case 4:return r.a(2)}},r,null,[[0,3]])})))},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"ANIO",label:"Año",field:"ANIO",align:"left",sortable:!0},{name:"NOMBRE",label:"Promoción",field:"NOMBRE",align:"left",sortable:!0},{name:"INSTRUDES",label:"Nivel",field:"INSTRUDES",align:"left",sortable:!0},{name:"GRADODES",label:"Grado",field:"GRADODES",align:"left",sortable:!0},{name:"SECCIONDES",label:"Sección",field:"SECCIONDES",align:"left",sortable:!0},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:100}]}}},S=r(57668),h=r(30640),N=r(2739),C=r(36667),D={mixins:[g],components:{QPopupProxy:O.A,QInput:p.A,QSeparator:d.A,QCardSection:m.A,sieModal:h.A,QForm:N.A,sieNgs:C.A,QPage:f.Tu,QCard:f.C$},data:function(){return{frm:{ID_PROMOCION:"",ANIO:"",NOMBRE:"",INSTRUCOD:"",GRADOCOD:"",SECCIONCOD:""},sie:(0,S["default"])(),currentRow:{},openModal:!1,titulo:"",buttons:[{icon:"plus",label:"Nuevo",click:this.nuevo,permiso:"=== 3"}]}},methods:{limpiar:function(){this.frm.ID_PROMOCION="",this.frm.ANIO="",this.frm.NOMBRE="",this.frm.INSTRUCOD="T",this.frm.GRADOCOD="T",this.frm.SECCIONCOD="T"},validarAnio:function(e){var n=new RegExp("^[0-9]{4}$");return!!n.test(e)||"Porfavor indique un dato correcto"},nuevo:function(){var e=this;return u()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:e.limpiar(),e.openModal=!0,e.titulo="Registro Promoción";case 1:return n.a(2)}},n)}))()},getPromociones:function(){var e=this;return u()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/ExAlumnos/getPromociones");case 1:e.rows=n.v;case 2:return n.a(2)}},n)}))()},grabarDatos:function(){var e=this;return u()(l()().m(function n(){var r,t,o,i,a,s,c,u;return l()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,r=e.$refs.refSieGNS.NGS("object"),t=r.nivel,o=r.grado,i=r.seccion,e.frm.INSTRUCOD="%"===t?"T":t,e.frm.GRADOCOD="%"===o?"T":o,e.frm.SECCIONCOD="%"===i?"T":i,n.n=1,e.$http.post("api/ExAlumnos/savePromocion",{params:e.frm});case 1:return a=n.v,s=a.message,e.$notify(s,"success"),e.cerrarModal(),e.getPromociones(),n.a(2,!0);case 2:return n.p=2,u=n.v,c=u.error,e.$notify(c.message,"warning"),n.a(2,!1)}},n,null,[[0,2]])}))()},cerrarModal:function(){this.openModal=!1}},created:function(){var e=this;return u()(l()().m(function n(){return l()().w(function(n){while(1)switch(n.n){case 0:e.getPromociones();case 1:return n.a(2)}},n)}))()}},b=r(12807);const v=(0,b.A)(D,[["render",a]]);var E=v}}]);