"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[87013],{87013:function(e,t,o){o.r(t),o.d(t,{default:function(){return Dn}});var n=o(8445),a=o.n(n),i=(o(515),o(61758)),r=o(58790),s={class:"row q-col-gutter-sm q-pb-md"},l={class:"col"},c={class:"row q-pt-md q-col-gutter-sm"},u={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},d={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},f={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},m={class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"},p={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},v={class:"col-xs-12 col-sm-6 col-md-6 col-lg-4 q-mt-xs"},h={class:"col-xs-12 col-sm-6 col-md-6 col-lg-4 q-mt-xs"},g={class:"row full-height q-mt-md"},b={class:"col column items-center justify-start"},I={key:0,class:"row q-col-gutter-sm q-pt-md"},A={class:"col-xs-12 col-sm-3 col-md-2 scroll",style:{height:"calc(100vh - 257px)"}},E={class:"col-xs-12 col-sm-9 col-md-10 scroll",style:{height:"calc(100vh - 257px)"}},C={class:"row q-col-gutter-sm q-pa-md"},S={class:"col-xs-12"},O={class:"row q-col-gutter-sm q-pa-md"},k={key:0,class:"col-xs-12"},w={key:1,class:"col-xs-12"},D={key:2,class:"col-xs-12 col-sm-6"},F={key:3,class:"col-xs-12 col-sm-6"},V={key:4,class:"col-xs-12"},P={key:5,class:"col-12 q-pt-sm"},x={key:6,class:"col-xs-12"};function R(e,t){var o=(0,i.g2)("header-btn"),n=(0,i.g2)("q-spinner-oval"),R=(0,i.g2)("q-inner-loading"),N=(0,i.g2)("q-select"),y=(0,i.g2)("sie-select"),U=(0,i.g2)("q-input"),T=(0,i.g2)("q-img"),L=(0,i.g2)("q-item-section"),M=(0,i.g2)("q-item"),_=(0,i.g2)("q-list"),q=(0,i.g2)("datos-alumno"),H=(0,i.g2)("situacion-final"),Q=(0,i.g2)("informe"),$=(0,i.g2)("entrevistas"),X=(0,i.g2)("seguimiento"),G=(0,i.g2)("conducta-anecdotario"),Y=(0,i.g2)("incidencias-conductuales"),W=(0,i.g2)("otros-informes"),B=(0,i.g2)("derivacion"),j=(0,i.g2)("formularios"),J=(0,i.g2)("sie-vacio"),z=(0,i.g2)("q-card-section"),K=(0,i.g2)("q-card"),Z=(0,i.g2)("q-btn"),ee=(0,i.g2)("q-toolbar"),te=(0,i.g2)("q-option-group"),oe=(0,i.g2)("q-date"),ne=(0,i.g2)("q-popup-proxy"),ae=(0,i.g2)("q-icon"),ie=(0,i.g2)("sie-modal"),re=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(re,{class:"registro-informe-psicologico q-pa-sm sie-flat"},{default:(0,i.k6)(function(){return[(0,i.bF)(K,null,{default:(0,i.k6)(function(){return[(0,i.bF)(o,{name:"Ficha Psicológica ",buttons:e.buttons},null,8,["buttons"]),(0,i.bF)(z,{style:{height:"calc(100vh - 125px)"}},{default:(0,i.k6)(function(){return[(0,i.bF)(R,{visible:e.loading},{default:(0,i.k6)(function(){return[(0,i.bF)(n,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,i.Lk)("div",s,[(0,i.Lk)("div",l,[(0,i.Lk)("div",c,[(0,i.Lk)("div",u,[(0,i.bF)(N,{class:"q-ma-none",label:"Nivel",type:"outlined","option-value":"INSTRUCOD","option-label":"INSTRUDES",modelValue:e.nivel,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.nivel=t}),options:e.niveles,onInput:e.selectNivel,readonly:e.bloquearNGS},null,8,["modelValue","options","onInput","readonly"])]),(0,i.Lk)("div",d,[(0,i.bF)(N,{class:"q-ma-none",label:"Grado",type:"outlined","option-value":"GRADOCOD","option-label":"GRADODES",modelValue:e.grado,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.grado=t}),options:e.grados,onInput:e.selectGrado,readonly:e.bloquearNGS},null,8,["modelValue","options","onInput","readonly"])]),(0,i.Lk)("div",f,[(0,i.bF)(N,{class:"q-ma-none",label:"Sección",type:"outlined","option-value":"SECCIONCOD","option-label":"SECCIONDES",modelValue:e.seccion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.seccion=t}),options:e.secciones,onInput:e.selectSeccion,readonly:e.bloquearNGS},null,8,["modelValue","options","onInput","readonly"])]),(0,i.Lk)("div",m,[(0,i.bF)(N,{class:"q-ma-none",label:"Salón",type:"outlined","option-value":"value",emitValue:!1,"option-label":"label",modelValue:e.nemo,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.nemo=t}),options:e.salones,onInput:e.selectSalon},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",p,[(0,i.bF)(y,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.estudiante,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.estudiante=t}),options:e.estudiantes,label:"NOMCOMP",val:"ALUCOD",placeholder:e.$t("alumno"),onSelected:e.selectEstudiante},null,8,["modelValue","options","placeholder","onSelected"])]),(0,i.Lk)("div",v,[(0,i.bF)(U,{modelValue:e.tutor,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.tutor=t}),label:"Tutor",readonly:""},null,8,["modelValue"])]),(0,i.Lk)("div",h,[(0,i.bF)(U,{modelValue:e.salon,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.salon=t}),readonly:""},null,8,["modelValue"])])])]),(0,i.Lk)("div",null,[(0,i.Lk)("div",g,[(0,i.Lk)("div",b,[(0,i.bF)(T,{class:"foto-alumno",src:e.imgAlumno,width:"76px",height:"76px"},{error:(0,i.k6)(function(){return[(0,i.bF)(T,{class:"foto-alumno",src:e.getImageDefault(e.dataAlu.SEXO||e.defaultSexo),width:"76px",height:"76px"},null,8,["src"])]}),_:1},8,["src"])])])])]),e.estudiante?((0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("div",A,[(0,i.bF)(_,{class:"q-pa-none",bordered:"",separator:"",highlight:""},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.tabs,function(t){return(0,i.uX)(),(0,i.Wv)(M,{key:t.ID,clickable:"",active:!0,class:(0,r.C4)({"q-item-active":t.ID===e.tabSelected,"bg-primary":t.ID===e.tabSelected,"text-white":t.ID===e.tabSelected,"cursor-pointer":e.tabSelected===t.ID}),onClick:function(o){return e.openTab(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(L,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(t.DESCRIPCION),1)]}),_:2},1024)]}),_:2},1032,["class","onClick"])}),128))]}),_:1})]),(0,i.Lk)("div",E,["datosAlumnos"===e.tabSelected&&Object.keys(e.dataAlu).length>0?((0,i.uX)(),(0,i.Wv)(q,{key:0,"data-alu":e.dataAlu,"data-fam":e.dataFam,"data-padre":e.dataPadre,"data-hno":e.dataHno,config:e.dataIni,ref:"refDatosAlumno"},null,8,["data-alu","data-fam","data-padre","data-hno","config"])):"situacion"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(H,{key:1,"data-hist":e.dataHist},null,8,["data-hist"])):"informe"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(Q,{key:2,dataInformes:e.dataInformes.informes,"onUpdate:dataInformes":t[7]||(t[7]=function(t){return e.dataInformes.informes=t}),onSetSituacion:e.setSituacion,tipoInformes:e.dataInformes.tipoInformes,alucod:e.estudiante,nemo:e.nemo,configForm:e.dataIni,"cmbo-estado-psi":e.cmboEstadoPsi},null,8,["dataInformes","onSetSituacion","tipoInformes","alucod","nemo","configForm","cmbo-estado-psi"])):"entrevistas"===e.tabSelected?((0,i.uX)(),(0,i.Wv)($,{key:3,dataEntrevistas:e.dataEntrevistas,onSetEntrevistas:e.setEntrevistas,alucod:e.estudiante,nomcomp:e.nomcomp,nemo:e.nemo},null,8,["dataEntrevistas","onSetEntrevistas","alucod","nomcomp","nemo"])):"seguimiento"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(X,{key:4,"data-grid-seguimiento":e.dataGridSeguimiento,onSetSituacion:e.setSituacion,onSetSeguimiento:e.setSeguimiento,"cmbo-seg":e.cmboSeg,"cmbo-estado-psi":e.cmboEstadoPsi,"config-seguimiento":e.dataIni,alucod:e.estudiante,nemo:e.nemo},null,8,["data-grid-seguimiento","onSetSituacion","onSetSeguimiento","cmbo-seg","cmbo-estado-psi","config-seguimiento","alucod","nemo"])):"otrosAntecedentes"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(G,{key:5,"conducta-anecdotario":e.conductaAnecdotario},null,8,["conducta-anecdotario"])):"incidencias"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(Y,{key:6,"incidencias-conductuales":e.infoIncidencias},null,8,["incidencias-conductuales"])):"otrosInformes"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(W,{key:7,dataDocumentos:e.dataOtrosInformes.documentos,"onUpdate:dataDocumentos":t[8]||(t[8]=function(t){return e.dataOtrosInformes.documentos=t}),documentos:e.dataOtrosInformes.docucod,alucod:e.estudiante},null,8,["dataDocumentos","documentos","alucod"])):"derivacion"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(B,{key:8,dataDerivacion:e.dataDerivacion,alucod:e.estudiante,nomcomp:e.nomcomp,nemo:e.nemo},null,8,["dataDerivacion","alucod","nomcomp","nemo"])):"formularios"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(j,{key:9,data:e.dataFormularios},null,8,["data"])):((0,i.uX)(),(0,i.Wv)(J,{key:10}))])])):(0,i.Q3)("v-if",!0)]}),_:1})]}),_:1}),(0,i.bF)(ie,{class:"reportes-informe-psico",modelValue:e.reportes.openModal,"onUpdate:modelValue":t[24]||(t[24]=function(t){return e.reportes.openModal=t}),title:"Imprimir"},{footer:(0,i.k6)(function(){return[(0,i.bF)(ee,{class:"justify-end",color:"grey-2"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(Z,{class:"q-mx-xs",label:"Excel",color:"primary",onClick:t[9]||(t[9]=function(t){return e.verReporte("xls")})}),(0,i.bF)(Z,{class:"q-mx-xs",label:"PDF",color:"primary",onClick:t[10]||(t[10]=function(t){return e.verReporte("pdf")})})])]}),_:1})]}),footerMobile:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(Z,{flat:"",round:"",dense:"",icon:"file_excel",onClick:t[11]||(t[11]=function(t){return e.verReporte("xls")})}),(0,i.bF)(Z,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:t[12]||(t[12]=function(t){return e.verReporte("pdf")})})])]}),default:(0,i.k6)(function(){return[(0,i.Lk)("div",C,[t[25]||(t[25]=(0,i.Lk)("div",{class:"col-12 q-pb-sm"},[(0,i.Lk)("b",null,[(0,i.Lk)("span",null,"Reportes:")])],-1)),(0,i.Lk)("div",S,[(0,i.bF)(te,{color:"secondary",type:"radio",modelValue:e.reportes.repcod,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.reportes.repcod=t}),options:e.reportes.reportes,onInput:e.cambiarReporte},null,8,["modelValue","options","onInput"])])]),(0,i.Lk)("div",O,[t[27]||(t[27]=(0,i.Lk)("div",{class:"col-12 q-pb-sm"},[(0,i.Lk)("b",null,[(0,i.Lk)("span",null,"Parametros:")])],-1)),e.reportes.mostrarEstudiantes?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.bF)(y,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.reportes.estudiante,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.reportes.estudiante=t}),options:e.reportes.estudiantes,label:"NOMCOMP",val:"ALUCOD",placeholder:"Alumno"},null,8,["modelValue","options"])])):(0,i.Q3)("v-if",!0),e.reportes.mostrarPersonal?((0,i.uX)(),(0,i.CE)("div",w,[(0,i.bF)(y,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.reportes.profcod,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.reportes.profcod=t}),options:e.reportes.dataPersonal,label:"NOMCOMP",val:"PROFCOD",placeholder:"Personal"},null,8,["modelValue","options"])])):(0,i.Q3)("v-if",!0),e.reportes.mostrarFechas?((0,i.uX)(),(0,i.CE)("div",D,[(0,i.bF)(U,{label:"Fecha Ini",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.reportes.fecha1,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.reportes.fecha1=t}),mask:"##/##/####",readonly:""},{append:(0,i.k6)(function(){return[(0,i.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,i.k6)(function(){return[(0,i.bF)(ne,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(oe,{mask:"DD/MM/YYYY",modelValue:e.reportes.fecha1,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.reportes.fecha1=t}),onInput:t[17]||(t[17]=function(t){return e.$refs.qDateProxy1.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])):(0,i.Q3)("v-if",!0),e.reportes.mostrarFechas?((0,i.uX)(),(0,i.CE)("div",F,[(0,i.bF)(U,{label:"Fecha Fin",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.reportes.fecha2,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.reportes.fecha2=t}),mask:"##/##/####",readonly:""},{append:(0,i.k6)(function(){return[(0,i.bF)(ae,{class:"cursor-pointer",name:"date_range"},{default:(0,i.k6)(function(){return[(0,i.bF)(ne,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(oe,{mask:"DD/MM/YYYY",modelValue:e.reportes.fecha2,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.reportes.fecha2=t}),onInput:t[20]||(t[20]=function(t){return e.$refs.qDateProxy2.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])):(0,i.Q3)("v-if",!0),e.reportes.mostrarInformes?((0,i.uX)(),(0,i.CE)("div",V,[(0,i.bF)(N,{modelValue:e.reportes.tipoInforme,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.reportes.tipoInforme=t}),options:e.reportes.tipoInformes,"option-label":"PRINDES","option-value":"PRINCOD",label:"Informe"},null,8,["modelValue","options"])])):(0,i.Q3)("v-if",!0),e.reportes.mostrarContenidos?((0,i.uX)(),(0,i.CE)("div",P,a()(t[26]||(t[26]=[(0,i.Lk)("b",null,[(0,i.Lk)("span",null,"Contenidos:")],-1)])))):(0,i.Q3)("v-if",!0),e.reportes.mostrarContenidos?((0,i.uX)(),(0,i.CE)("div",x,[(0,i.bF)(te,{color:"secondary",type:"checkbox",modelValue:e.reportes.contenido,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.reportes.contenido=t}),options:e.reportes.contenidos},null,8,["modelValue","options"])])):(0,i.Q3)("v-if",!0)])]}),_:1},8,["modelValue"])]}),_:1})}var N=o(41562),y=o.n(N),U=o(76080),T=o.n(U),L=o(45254),M=o.n(L),_=(o(30683),o(71225),o(77507),o(52133),o(10239),o(50310),o(5962),o(6724),o(70199),o(83190),o(7346),o(6123)),q=o(88567),H=o(95718),Q=o(53380),$=o(9736),X=o(16648),G=o(72029),Y=o(26697),W=o(53093),B=o(53811),j=o(43346),J=o(57668),z=o(65229),K=o(81288),Z=o(65673),ee=o(82327),te=o(88865),oe=o(93616),ne=o(53399),ae=o(99923),ie=o(39321),re=(o(39866),{class:"row q-col-gutter-sm"}),se={class:"col-xs-12 col-sm-12 col-md-6"},le={class:"row q-col-gutter-sm"},ce={key:0,class:"col-xs-12"},ue={class:"col-xs-12"},de={class:"row"},fe={class:"col-xs-12 q-mt-lg"},me={class:"col-xs-12 col-sm-12 col-md-6"},pe={class:"row q-col-gutter-sm q-card-borde"},ve={key:0,class:"col-xs-12 scroll",style:{height:"calc(100vh - 290px)"}},he={class:"row q-col-gutter-xs"},ge={class:"col-xs-12"},be={class:"row q-col-gutter-xs",style:{position:"relative"}},Ie={class:"col-xs-12"},Ae={key:0,class:"col-xs-12"},Ee={key:1,class:"col-xs-12"},Ce={class:"col-xs-12"},Se={class:"col-xs-12"},Oe={class:"col-xs-12"},ke={class:"col-xs-12"},we={class:"text-primary"},De={class:"col-xs-12"},Fe={class:"text-primary",style:{position:"absolute",top:"0",left:"100%","margin-left":"-20px"}},Ve={key:1,class:"col-xs-12 column items-center"};function Pe(e,t){var o=(0,i.g2)("sie-table"),n=(0,i.g2)("q-btn"),s=(0,i.g2)("q-download-file"),l=(0,i.g2)("q-item-section"),c=(0,i.g2)("q-item"),u=(0,i.g2)("q-item-separator"),d=(0,i.g2)("q-list"),f=(0,i.g2)("q-card-section"),m=(0,i.g2)("q-card"),p=(0,i.g2)("modalComentarioConducta");return(0,i.uX)(),(0,i.CE)("div",re,[(0,i.Lk)("div",se,[(0,i.Lk)("div",le,[e.setResumenNotas?((0,i.uX)(),(0,i.CE)("div",ce,[(0,i.bF)(o,{"show-search":!1,columns:e.fields,data:e.rows,config:e.config,context:this,css:{height:"380px"}},null,8,["columns","data","config"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",ue,[(0,i.bF)(o,{"show-search":!1,columns:e.fieldsConductaPeriodo,data:e.rowsConductaPeriodo,config:e.configConductaPeriodo,context:this,css:{height:"280px"}},null,8,["columns","data","config"])])]),(0,i.Lk)("div",de,[(0,i.Lk)("div",fe,[(0,i.bF)(n,{size:"sm",icon:"notas",label:"Notas",color:"secondary",onClick:e.openModalNotas},null,8,["onClick"])])])]),(0,i.Lk)("div",me,[(0,i.Lk)("div",pe,[t[7]||(t[7]=(0,i.Lk)("div",{class:"col-xs-12"},[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,"Anecdotario")])],-1)),e.Descripcion.length>0?((0,i.uX)(),(0,i.CE)("div",ve,[(0,i.Lk)("div",he,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.Descripcion,function(o,n){return(0,i.uX)(),(0,i.CE)("div",ge,[(0,i.bF)(m,{bordered:""},{default:(0,i.k6)(function(){return[(0,i.bF)(f,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",be,[(0,i.Lk)("div",Ie,[(0,i.Lk)("span",null,[t[0]||(t[0]=(0,i.Lk)("b",null,"Fecha:",-1)),(0,i.Lk)("span",null,(0,r.v_)(e.date(o.HIFEC,"DD/MM/YYYY")),1),t[1]||(t[1]=(0,i.Lk)("b",null,"Hora:",-1)),(0,i.Lk)("span",null,(0,r.v_)(o.HOROBS),1)])]),e.getText(o).isTipo?((0,i.uX)(),(0,i.CE)("div",Ae,[(0,i.Lk)("span",null,[t[2]||(t[2]=(0,i.Lk)("b",null,"Motivo:",-1)),(0,i.Lk)("span",null,(0,r.v_)(e.getText(o).motivo),1)])])):(0,i.Q3)("v-if",!0),e.getText(o).isAccion?((0,i.uX)(),(0,i.CE)("div",Ee,[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,(0,r.v_)(e.getText(o).lblMotivo)+":",1),(0,i.Lk)("span",null,(0,r.v_)(e.getText(o).motivo),1)])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Ce,[(0,i.Lk)("span",null,[t[3]||(t[3]=(0,i.Lk)("b",null,"Usuario:",-1)),(0,i.Lk)("span",null,(0,r.v_)(o.USUNOM),1)])]),(0,i.Lk)("div",Se,[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,(0,r.v_)(e.getText(o).lblTitulo)+":",1),(0,i.Lk)("span",null,(0,r.v_)(o.TITULO),1)])]),(0,i.Lk)("div",Oe,[t[4]||(t[4]=(0,i.Lk)("div",null,[(0,i.Lk)("b",{class:"text-primary"},"detalle:")],-1)),(0,i.Lk)("span",null,(0,r.v_)(o.DETALLE),1)]),(0,i.Lk)("div",ke,[(0,i.Lk)("div",null,[(0,i.Lk)("b",we,(0,r.v_)(e.getText(o).lblAccion)+":",1)]),(0,i.Lk)("span",null,(0,r.v_)(o.ACCION),1)]),e.isObsAdjunto&&Object.keys(e.PIVOT_OBS_ADJUNTO).length>0&&e.PIVOT_OBS_ADJUNTO[o.keyObs]?((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[t[5]||(t[5]=(0,i.Lk)("div",{class:"col-xs-12"},[(0,i.Lk)("div",null,[(0,i.Lk)("b",{class:"text-primary"},"Archivos:")])],-1)),(0,i.Lk)("div",De,[e.PIVOT_OBS_ADJUNTO[o.keyObs]?((0,i.uX)(),(0,i.Wv)(d,{key:0,class:"no-border"},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.PIVOT_OBS_ADJUNTO[o.keyObs],function(t,o){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(c,null,{default:(0,i.k6)(function(){return[(0,i.bF)(l,null,{default:(0,i.k6)(function(){return[(0,i.bF)(s,{src:e.urlArchivo(t),name:t.NOMBRE,inline:!1,noclick:["pptx","xls","xlsx","docx","doc"].includes(t.EXTENSION)},null,8,["src","name","noclick"])]}),_:2},1024)]}),_:2},1024),(0,i.bF)(u,{class:"no-margin"})],64)}),256))]}),_:2},1024)):(0,i.Q3)("v-if",!0)])],64)):(0,i.Q3)("v-if",!0),(0,i.Lk)("span",Fe,[(0,i.Lk)("b",null,(0,r.v_)(n+1),1)])])]}),_:2},1024)]}),_:2},1024)])}),256))])])):((0,i.uX)(),(0,i.CE)("div",Ve,a()(t[6]||(t[6]=[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,"No tiene Observaciones")],-1)]))))])]),e.isOpenModalNotas?((0,i.uX)(),(0,i.Wv)(p,{key:0,idPersona:e.infoConducta.idPersona,alucod:e.infoConducta.alucod,nomcomp:e.infoConducta.nomcomp,nemo:e.infoConducta.nemo,periodo:e.infoConducta.periodo,idConductaPeriodo:e.infoConducta.idConductaPeriodo,configComentarios:{},edicion:!1,dataAlumnos:e.infoConducta.dataAlumnos,isTutor:!1,ngs:e.infoConducta.ngs,menu:"anecdotario",onCerrarModal:e.cerrarModalNotas},null,8,["idPersona","alucod","nomcomp","nemo","periodo","idConductaPeriodo","dataAlumnos","ngs","onCerrarModal"])):(0,i.Q3)("v-if",!0)])}o(68017);var xe={data:function(){return{config:{},rows:[],fields:[{name:"INSIDES",label:"Nota / Bimestre",field:"INSIDES",align:"left"},{name:"TA1",label:"I",field:"TA1",align:"center"},{name:"TA2",label:"II",field:"TA2",align:"center"},{name:"TA3",label:"III",field:"TA3",align:"center"},{name:"TA4",label:"IV",field:"TA4",align:"center"}]}}},Re={data:function(){return{configConductaPeriodo:{},rowsConductaPeriodo:[],fieldsConductaPeriodo:[]}}},Ne=o(18105),ye=o(62006),Ue=o(20447),Te=[{name:"DESCRIPCION",label:"Conducta / Bimestre",field:"DESCRIPCION",align:"left",wrap:!0}],Le={props:{conductaAnecdotario:{type:Object,default:function(){return{}}}},mixins:[xe,Re],components:{QCard:q.A,QCardSection:H.A,QDownloadFile:ye.A,QList:Z.A,QItem:ee.A,QItemSection:te.A,QSeparator:Q.A,modalComentarioConducta:Ue.A,QBtn:_.Il,QItemSeparator:_.CL},data:function(){return{Descripcion:[],setResumenNotas:!1,isConductaVUE:!1,colcod:"",webhost:"",isObsAdjunto:!1,PIVOT_OBS_ADJUNTO:[],infoConducta:{},sieInfo:(0,J["default"])(),isOpenModalNotas:!1}},methods:{date:Ne.Ay,cerrarModalNotas:function(){this.isOpenModalNotas=!1},openModalNotas:function(){this.isOpenModalNotas=!0},urlArchivo:function(e){return"".concat(this.sieInfo.api,"/AnecdotarioController/getArchivoAdjunto?id=").concat(e.ID,"&sie-token=").concat(this.sieInfo.token)},getText:function(e){var t=e.SECUDES||"",o="Motivo",n="Titulo",a="Acción",i=!1,r=!0,s="";if(e.TIPO_REGISTRO)switch(e.TIPO_REGISTRO.trim()){case"entrevista-vue":s="Entrevista";break;case"incidencia":s="Incidencia";break;case"anecdotario":s="Anecdotario";break}switch(this.colcod){case"0019":"entrevista-vue"===(e.TIPO_REGISTRO||"").trim()&&(o="Acción",n="Asunto",a="Acuerdos",i=!0,r=!1);break;case"0078":t+="E"===e.TIPANEC?" ( Entrevista )":"";break}return{motivo:t,lblMotivo:o,lblTitulo:n,lblAccion:a,isTipo:i,isAccion:r,setTipo:s}}},created:function(){},watch:{conductaAnecdotario:{immediate:!0,handler:function(e){var t=e.setResumenNotas,o=e.dataResumenNotas,n=e.dataConducta,a=e.PIVOT_COND_VUE,i=e.isConductaVUE,r=e.Descripcion,s=e.isObsAdjunto,l=e.PIVOT_OBS_ADJUNTO,c=e.infoConducta;o=o.filter(function(e){var t=e.INSICOD||"0";return t=parseInt(t),e.INSICOD=t,0===t});var u=[].concat(Te);u.push({name:"PERIODO1",label:"I",field:"PERIODO1",align:"center",width:32},{name:"PERIODO2",label:"II",field:"PERIODO2",align:"center",width:32},{name:"PERIODO3",label:"III",field:"PERIODO3",align:"center",width:32},{name:"PERIODO4",label:"IV",field:"PERIODO4",align:"center",width:32},{name:"PERIODO0",label:"Total",field:"PERIODO0",align:"center",width:32});var d=(0,J["default"])(),f=d.colcod,m=d.webhost;this.colcod=f,this.webhost=m,this.isObsAdjunto=s,this.setResumenNotas=t,this.isConductaVUE=i,this.Descripcion=r,this.PIVOT_OBS_ADJUNTO=l,this.fieldsConductaPeriodo=u,this.rowsConductaPeriodo=i?a:n,this.infoConducta=c,this.rows=o}}}},Me=o(12807);const _e=(0,Me.A)(Le,[["render",Pe]]);var qe=_e,He=o(52655),Qe=(o(56285),o(29104)),$e={class:"row q-col-gutter-sm informe"},Xe={class:"col-xs-12"},Ge={class:"row q-col-gutter-sm"},Ye={class:"col-xs-12 col-sm-6"},We={key:0,class:"col-xs-12 col-sm-6"},Be={class:"col-xs-12"},je={class:"row q-pa-sm q-col-gutter-xs"},Je={class:"col-xs-12"},ze={key:0,class:"col-xs-12"},Ke={class:"col-xs-12"},Ze={class:"col-xs-12"},et={class:"col-xs-12"},tt={class:"row q-col-gutter-sm q-mb-sm"},ot={class:"col-xs-12 col-md-12"},nt={class:"col-xs-12 col-md-12"},at={key:0,class:"div q-col-gutter-sm q-mb-sm"},it={class:"div"},rt={class:"col-xs-12"};function st(e,t){var o=this,n=(0,i.g2)("header-btn"),a=(0,i.g2)("q-select"),s=(0,i.g2)("q-card-section"),l=(0,i.g2)("q-card"),c=(0,i.g2)("sie-table"),u=(0,i.g2)("q-date"),d=(0,i.g2)("q-popup-proxy"),f=(0,i.g2)("q-icon"),m=(0,i.g2)("q-input"),p=(0,i.g2)("q-checkbox"),v=(0,i.g2)("sie-editor"),h=(0,i.g2)("q-tooltip"),g=(0,i.g2)("q-btn"),b=(0,i.g2)("q-card-separator"),I=(0,i.g2)("q-card-title"),A=(0,i.g2)("q-chip"),E=(0,i.g2)("sie-cloud"),C=(0,i.g2)("sie-modal"),S=(0,i.g2)("q-form"),O=(0,i.g2)("sie-pdf"),k=(0,i.g2)("q-download-file");return(0,i.uX)(),(0,i.CE)("div",$e,[(0,i.Lk)("div",Xe,[(0,i.bF)(l,null,{default:(0,i.k6)(function(){return[(0,i.bF)(n,{name:"",buttons:e.buttons},null,8,["buttons"]),(0,i.bF)(s,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Ge,[(0,i.Lk)("div",Ye,[(0,i.bF)(a,{modelValue:e.tipoInforme,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.tipoInforme=t}),options:e.documentos,"option-label":"PRINDES","option-value":"PRINCOD",label:"Informe Por"},null,8,["modelValue","options"])]),e.usaSitFinalInf?((0,i.uX)(),(0,i.CE)("div",We,[(0,i.bF)(a,{modelValue:e.estadoPsi,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.estadoPsi=t}),options:e.cmboEstadoPsi,label:"Situación Final","option-value":"SECUCOD","option-label":"SECUDES",onInput:e.updateEstadoPsi},null,8,["modelValue","options","onInput"])])):(0,i.Q3)("v-if",!0)])]}),_:1})]}),_:1})]),(0,i.Lk)("div",Be,[(0,i.bF)(c,{"show-search":!1,"show-index":"",columns:e.fields,data:e.filtro,config:e.config,context:this,css:{height:"calc(100vh - 340px)"}},null,8,["columns","data","config"])]),(0,i.bF)(C,{modelValue:e.openModal,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.openModal=t}),title:"Documentos",onSubmit:e.guardarInformeEvaluacion,css:{minWidth:"60vw",maxWidth:"60vw",minHeight:"40vh"},onClose:e.getListadoInformes},{default:(0,i.k6)(function(){return[(0,i.bF)(S,{ref:"form"},{default:(0,i.k6)(function(){return[(0,i.bF)(s,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",je,[(0,i.Lk)("div",Je,[(0,i.bF)(m,{"reverse-fill-mask":"",modelValue:e.fecha,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.fecha=t}),maxlength:"10",mask:"##/##/####",label:"Fecha",rules:[e.notNull]},{append:(0,i.k6)(function(){return[(0,i.bF)(f,{class:"cursor-pointer",name:"date_range"},{default:(0,i.k6)(function(){return[(0,i.bF)(d,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(u,{mask:"DD/MM/YYYY",modelValue:e.fecha,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fecha=t}),onInput:t[3]||(t[3]=function(t){return e.$refs.qDateProxy.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","rules"])]),e.mostrarIntranet?((0,i.uX)(),(0,i.CE)("div",ze,[(0,i.bF)(p,{modelValue:e.mostrar,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.mostrar=t}),label:"Mostrar en la Intranet","true-value":1,"false-value":0},null,8,["modelValue"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Ke,[(0,i.bF)(a,{modelValue:e.documento,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.documento=t}),options:e.documentos,"option-value":"PRINCOD","option-label":"PRINDES",label:"Informe por",onInput:e.getTablaDetalle,rules:[e.notNull]},null,8,["modelValue","options","onInput","rules"])]),(0,i.Lk)("div",Ze,[(0,i.bF)(a,{modelValue:e.secucod,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.secucod=t}),options:e.items,"option-value":"SECUCOD","option-label":"SECUDES",label:"Items",rules:[e.notNull]},null,8,["modelValue","options","rules"])]),(0,i.Lk)("div",et,[(0,i.bF)(v,{class:"col",modelValue:e.detalle,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.detalle=t}),label:"Detalle"},null,8,["modelValue"])])])]}),_:1}),(0,i.bF)(s,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",tt,[(0,i.Lk)("div",ot,[(0,i.bF)(I,null,{right:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(g,{icon:"plus",size:"sm",color:"secondary",onClick:t[9]||(t[9]=function(t){return e.openModalAgregarArchivos()})},{default:(0,i.k6)(function(){return[(0,i.bF)(h,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(e.$t("agregar")),1)]}),_:1})]}),_:1})])]}),default:(0,i.k6)(function(){return[t[14]||(t[14]=(0,i.eW)("Agregar Archivos",-1)),(0,i.bF)(b)]}),_:1})]),(0,i.Lk)("div",nt,[e.archivos&&e.archivos.length>0?((0,i.uX)(),(0,i.CE)("div",at,[(0,i.Lk)("div",it,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.archivos,function(t,o){return(0,i.uX)(),(0,i.Wv)(A,{key:o,class:"q-ma-xs",onRemove:function(t){return e.deleteFile(o)},dense:"",icon:t.ICONO.icon,outline:"",color:"primary","text-color":"white",removable:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(t.name),1)]}),_:2},1032,["onRemove","icon"])}),128))])])):(0,i.Q3)("v-if",!0)]),(0,i.Lk)("div",rt,[(0,i.bF)(c,{"show-search":!1,"show-index":"",columns:e.fieldsDoc,data:e.rowsDoc,config:e.configDoc,context:o,css:{height:"calc(100vh - 340px)"}},null,8,["columns","data","config"])])])]}),_:1}),(0,i.bF)(C,{class:"informe-modal-adjuntos",modelValue:e.addArchivosopen,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.addArchivosopen=t}),title:"Agregar archivos",header:!0,footer:!0,onSubmit:e.closeModalAgregarArchivos,css:{minWidth:"50vw",maxWidth:"60vw",minHeight:"30vh"}},{default:(0,i.k6)(function(){return[(0,i.bF)(E,{modelValue:e.archivos,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.archivos=t})},null,8,["modelValue"])]}),_:1},8,["modelValue","onSubmit"])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit","onClose"]),e.openModalPdf?((0,i.uX)(),(0,i.Wv)(C,{key:0,footer:!1,css:{width:"70%",height:"90%"},modelValue:e.openModalPdf,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.openModalPdf=t}),title:e.titleModalPdf},{default:(0,i.k6)(function(){return[(0,i.bF)(O,{src:e.url,style:{height:"100%"}},null,8,["src"])]}),_:1},8,["modelValue","title"])):(0,i.bo)(((0,i.uX)(),(0,i.Wv)(k,{key:1,ref:"downloadFile",src:e.url},null,8,["src"])),[[Qe.aG,!1]])])}o(89571);var lt={data:function(){return{config:{FECHA:{component:"date",edit:!1},ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:return t.currentRow=e,t.action="update",t.detalle=e.DETALLE_INFORME||"",t.mostrar=e.MOSTRAR,t.documento=e.PRINCOD,o.n=1,t.getTablaDetalle(t.documento);case 1:return o.n=2,t.getListadoDocumentosInforme(e.ID_INFORME);case 2:t.secucod=e.SECUCOD,t.fecha=(0,Ne.Ay)(e.FECHA,"DD/MM/YYYY"),t.openModal=!0;case 3:return o.a(2)}},o)}))()},eliminar:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,t.$confirmar("¿Realmente desea eliminar el registro?","delete");case 1:n=o.v,n&&t.deletePsInforme(e);case 2:return o.a(2)}},o)}))()},flat:!0}},currentRow:{},fields:[{name:"FECHA",label:"Fecha",field:"FECHA",align:"center"},{name:"PRINDES",label:"Tipo informe",field:"PRINDES",align:"left"},{name:"SECUDES",label:"Detalle",field:"SECUDES",align:"left"},{name:"FECHA_ACT",label:"Fecha Act.",field:"FECHA",align:"center"},{name:"USUCOD",label:"Usuario",field:"USUCOD",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},ct=(o(37323),{xlsx:"file_excel",xls:"file_excel",doc:"file_document",docx:"file_document",pdf:"file_pdf",txt:"file_text_o"}),ut={data:function(){return{configDoc:{FECHA:{component:"date",edit:!1},VISUALIZAR:{renderHtml:function(e,t,o){if(e.ARCHIVO){var n=e.ARCHIVO.split(".").reverse()[0];if(n)return o.icon({name:ct[n]||"files_empty"})}return t("span",{},e.ARCHIVO)},renderAction:function(e){var t=e.ARCHIVO.split("."),o=t[t.length-1].toLowerCase();this.titleModalPdf=e.ARCHIVO,this.url=this.getUrl(e),console.log("this.url",this.url),this.openModalPdf="pdf"===o,"pdf"!==o&&this.$refs.downloadFile.onClick()}},ACTION:{component:"button",icon:["delete as eliminar"],eliminar:function(e,t){var o=this;return M()(T()().m(function t(){var n;return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,o.$confirmar("¿Realmente desea eliminar el registro?","delete");case 1:n=t.v,n&&o.deletePsInformeDoc(e);case 2:return t.a(2)}},t)}))()},flat:!0}},rowsDoc:[],currentRowDoc:{},fieldsDoc:[{name:"ARCHIVO",label:"Archivo",field:"ARCHIVO",align:"center"},{name:"FECHA",label:"Fecha y hora.",field:"FECHA",align:"center"},{name:"VISUALIZAR",label:"Visualizar",field:"VISUALIZAR",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},dt=o(2739),ft=o(95477),mt=o(4437),pt=o(30640),vt=o(3112),ht=o(59089),gt=o(32195),bt=o(95051),It=o(6083),At=o(84603),Et={emits:["update:dataInformes","setSituacion"],props:{configForm:{type:Object,default:function(){return{}}},dataInformes:{type:Array,default:function(){return[]}},tipoInformes:{type:Array,default:function(){return[]}},alucod:{type:String},nemo:{type:String},cmboEstadoPsi:{type:Array,default:function(){return[]}}},mixins:[lt,ut],components:{sieModal:pt.A,QSelect:X.A,QInput:$.A,QPopupProxy:ft.A,QDate:mt.A,QForm:dt.A,sieUpload:ht.A,QCheckbox:vt.A,sieCloud:gt.A,QChip:bt.A,sieEditor:It.A,QDownloadFile:ye.A,siePdf:At.A,QCard:_.C$,QIcon:_.bP,QCardTitle:_.u0,QBtn:_.Il,QTooltip:_.nC,QCardSeparator:_.d6},computed:{rows:{get:function(){return this.dataInformes},set:function(e){this.$emit("update:dataInformes",e)}},filtro:function(){var e=this,t=[];return this.tipoInforme?(t=this.rows.filter(function(t){return t.PRINCOD.indexOf(e.tipoInforme)>=0}),t):this.rows}},data:function(){var e=this;return{buttons:[{icon:"plus",label:"Agregar",click:function(){e.action="create",e.detalle="",e.documento="",e.secucod="",e.fecha=(0,Ne.Ay)(new Date,"DD/MM/YYYY"),e.rowsDoc=[],e.openModal=!0}}],openModal:!1,tieneObsDocPsi:!1,usaIDdocpsi:!1,action:"create",fecha:(0,Ne.Ay)(new Date,"DD/MM/YYYY"),secucod:"",origen:!1,mostrarIntranet:!1,mostrar:0,detalle:"",documentos:[],items:[],tipoInforme:"",documento:"",file:{},archivos:[],addArchivosopen:!1,openModalPdf:!1,titleModalPdf:"",url:"",sieInfo:(0,J["default"])(),estadoPsi:"",usaSitFinalInf:!1}},methods:{notNull:function(e){return!!e||"Este campo es requerido"},getUrl:function(e){return e=e||{},"".concat(this.sieInfo.api,"/RegistroInformePsicologicoController/getArchivoAdjunto?id=").concat(e.ID,"&caso=1&sie-token=").concat(this.sieInfo.token)},getTablaDetalle:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,t.$http.get("api/RegistroInformePsicologicoController/getTablaDetalle",{params:{princod:e}});case 1:t.items=o.v,t.items.unshift({SECUCOD:"",SECUDES:"--"}),t.secucod="",o.n=3;break;case 2:o.p=2,o.v,t.items=[];case 3:return o.a(2)}},o,null,[[0,2]])}))()},getListadoDocumentosInforme:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,t.$http.get("api/RegistroInformePsicologicoController/getListadoDocumentosInforme",{params:{id:e}});case 1:t.rowsDoc=o.v,o.n=3;break;case 2:o.p=2,o.v,t.items=[];case 3:return o.a(2)}},o,null,[[0,2]])}))()},deletePsInformeDoc:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,t.$http.delete("api/RegistroInformePsicologicoController/deletePsInformeDoc",{params:{id:e.ID}});case 1:return n=o.v,t.$notify(n.message),o.n=2,t.getListadoDocumentosInforme(e.ID_INFORME);case 2:o.n=4;break;case 3:o.p=3,o.v,t.items=[];case 4:return o.a(2)}},o,null,[[0,3]])}))()},getListadoInformes:function(){var e=this;return M()(T()().m(function t(){var o;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getListadoInformes",{params:{parametros:{alucod:e.alucod,nemo:e.nemo}}});case 1:o=t.v,e.rows=o,t.n=3;break;case 2:t.p=2,t.v,e.items=[];case 3:return t.a(2)}},t,null,[[0,2]])}))()},deletePsInforme:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,t.$http.delete("api/RegistroInformePsicologicoController/deletePsInforme",{params:{id:e.ID_INFORME}});case 1:return n=o.v,t.$notify(n.message),o.n=2,t.getListadoInformes();case 2:o.n=4;break;case 3:o.p=3,o.v,t.items=[];case 4:return o.a(2)}},o,null,[[0,3]])}))()},guardarInformeEvaluacion:function(){var e=this;return M()(T()().m(function t(){var o,n,a;return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$refs.form.validate();case 1:if(o=t.v,!1!==o){t.n=2;break}return t.a(2,!1);case 2:return n={alucod:e.alucod,nemo:e.nemo,princod:e.documento,secucod:e.secucod,fecha:e.fecha,detalle:e.detalle,archivos:e.archivos,mostrar:e.mostrar,idedit:"create"===e.action?"":e.currentRow.ID_INFORME},t.n=3,e.$http.post("api/RegistroInformePsicologicoController/addInforme",{params:n});case 3:return a=t.v,e.$notify(a.message),e.archivos=[],t.n=4,e.getListadoDocumentosInforme(a.data.id);case 4:"create"===e.action&&(e.openModal=!1);case 5:return t.a(2)}},t)}))()},closeModalAgregarArchivos:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:e.addArchivosopen=!1;case 1:return t.a(2)}},t)}))()},deleteFile:function(e){this.archivos.splice(e,1)},openModalAgregarArchivos:function(){this.addArchivosopen=!0},updateEstadoPsi:function(){var e=this;return M()(T()().m(function t(){var o;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.put("api/HyoProfes/actualizarEstadoPsi",{alucod:e.alucod,estado:e.estadoPsi});case 1:o=t.v,e.$emit("setSituacion",e.estadoPsi),e.$notify(o.message),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))()}},created:function(){this.documentos=JSON.parse(JSON.stringify(this.tipoInformes)),this.documentos.unshift({PRINCOD:"",PRINDES:"--"}),this.mostrarIntranet=this.config.mostrarInformeIntranet,this.estadoPsi=this.configForm.estadoActualPsi||"",this.usaSitFinalInf=this.configForm.usaSitFinalInf||!1}};const Ct=(0,Me.A)(Et,[["render",st]]);var St=Ct,Ot={class:"row q-col-gutter-sm"},kt={class:"col-xs-12"},wt={class:"col-xs-12"},Dt={class:"row q-pa-sm q-col-gutter-xs"},Ft={key:0,class:"col-xs-12"},Vt={class:"col-xs-12"},Pt={key:1,class:"col-xs-12"},xt={class:"col-xs-12"},Rt={class:"col-xs-12"},Nt={key:2,class:"col-xs-12"};function yt(e,t){var o=(0,i.g2)("header-btn"),n=(0,i.g2)("sie-table"),a=(0,i.g2)("q-input"),r=(0,i.g2)("q-select"),s=(0,i.g2)("q-date"),l=(0,i.g2)("q-popup-proxy"),c=(0,i.g2)("q-icon"),u=(0,i.g2)("q-checkbox"),d=(0,i.g2)("sie-upload"),f=(0,i.g2)("q-form"),m=(0,i.g2)("sie-modal"),p=(0,i.g2)("sie-pdf"),v=(0,i.g2)("q-download-file");return(0,i.uX)(),(0,i.CE)("div",Ot,[(0,i.Lk)("div",kt,[(0,i.bF)(o,{name:"",buttons:e.buttons},null,8,["buttons"])]),(0,i.Lk)("div",wt,[(0,i.bF)(n,{"show-search":!1,"show-index":"",columns:e.fields,data:e.rows,config:e.config,context:this,css:{height:"calc(100vh - 340px)"}},null,8,["columns","data","config"])]),(0,i.bF)(m,{modelValue:e.openModal,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.openModal=t}),title:"Documentos",onSubmit:e.guardarInforme},{default:(0,i.k6)(function(){return[(0,i.bF)(f,{ref:"form"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Dt,[e.usaTituloDocPsi?((0,i.uX)(),(0,i.CE)("div",Ft,[(0,i.bF)(a,{modelValue:e.titulo,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.titulo=t}),label:"Título",rules:[e.notNull]},null,8,["modelValue","rules"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Vt,[(0,i.bF)(r,{modelValue:e.documento,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.documento=t}),options:e.documentos,"option-label":"SECUDES","option-value":"SECUCOD",label:"Documento",rules:[e.notNull]},null,8,["modelValue","options","rules"])]),e.usaFechaDoc?((0,i.uX)(),(0,i.CE)("div",Pt,[(0,i.bF)(a,{"reverse-fill-mask":"",modelValue:e.fecha,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.fecha=t}),maxlength:"10",mask:"##/##/####",label:"Fecha",rules:[e.notNull]},{append:(0,i.k6)(function(){return[(0,i.bF)(c,{class:"cursor-pointer",name:"date_range"},{default:(0,i.k6)(function(){return[(0,i.bF)(l,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(s,{mask:"DD/MM/YYYY",modelValue:e.fecha,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fecha=t}),onInput:t[3]||(t[3]=function(t){return e.$refs.qDateProxy.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","rules"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",xt,[(0,i.bF)(u,{modelValue:e.origen,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.origen=t}),label:"Origen: Interno *realizado en el colegio","true-value":"I","false-value":"E"},null,8,["modelValue"])]),(0,i.Lk)("div",Rt,[(0,i.bF)(d,{ref:"upload",onUpload:e.addFile,icon:"file",title:"Subir Archivo",allow:["xls","xlsx","doc","docx","pdf","txt"]},null,8,["onUpload"])]),e.tieneObsDocPsi?((0,i.uX)(),(0,i.CE)("div",Nt,[(0,i.bF)(a,{type:"textarea",modelValue:e.observacion,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.observacion=t}),label:"Observación",rules:[e.notNull]},null,8,["modelValue","rules"])])):(0,i.Q3)("v-if",!0)])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit"]),e.openModalPdf?((0,i.uX)(),(0,i.Wv)(m,{key:0,footer:!1,css:{width:"70%",height:"90%"},modelValue:e.openModalPdf,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.openModalPdf=t}),title:e.titleModalPdf},{default:(0,i.k6)(function(){return[(0,i.bF)(p,{src:e.url,style:{height:"100%"}},null,8,["src"])]}),_:1},8,["modelValue","title"])):(0,i.bo)(((0,i.uX)(),(0,i.Wv)(v,{key:1,ref:"downloadFile",src:e.url},null,8,["src"])),[[Qe.aG,!1]])])}o(56567);var Ut={xlsx:"file_excel",xls:"file_excel",doc:"file_document",docx:"file_document",pdf:"file_pdf",txt:"file_text_o"},Tt={data:function(){return{config:{FECHA:{component:"date",edit:!1},ARCHIVO:{renderHtml:function(e,t,o){if(e.ARCHIVO){var n=e.ARCHIVO.split(".").reverse()[0];if(n)return o.icon({name:Ut[n]||"files_empty"})}return t("span",{},e.ARCHIVO)},renderAction:function(e){var t=e.ARCHIVO.split("."),o=t[t.length-1].toLowerCase();this.titleModalPdf=e.ARCHIVO,this.url=this.getUrl(e),this.openModalPdf="pdf"===o,"pdf"!==o&&this.$refs.downloadFile.onClick()}},ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:t.currentRow=e,t.action="update",t.documento=e.DOCUCOD,t.origen=e.ORIGEN?e.ORIGEN.trim():"",t.fecha=(0,Ne.Ay)(e.FECHADOCU,"DD/MM/YYYY"),t.openModal=!0;case 1:return o.a(2)}},o)}))()},eliminar:function(e,t){var o=this;return M()(T()().m(function t(){var n,a;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,o.$confirmar("¿Realmente desea eliminar el registro?","delete");case 1:if(n=t.v,!n){t.n=4;break}return t.n=2,o.$http.delete("api/RegistroInformePsicologicoController/deleteOtrosInforme",{params:{id:e.ID}});case 2:return a=t.v,o.$notify(a.message,"success"),t.n=3,o.getListadoDocumentos();case 3:o.openModal=!1;case 4:t.n=6;break;case 5:t.p=5,t.v,o.$notify("Ha ocurrido un error de conexión, vuelve a intentarlo más tarde","warning");case 6:return t.a(2)}},t,null,[[0,5]])}))()},flat:!0}},currentRow:{},fields:[{name:"SECUDES",label:"Documento",field:"SECUDES",align:"left"},{name:"ARCHIVO",label:"Archivo",field:"ARCHIVO",align:"center"},{name:"FECHA",label:"Fecha Act.",field:"FECHA",align:"center"},{name:"USUCOD",label:"Usuario",field:"USUCOD",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},Lt=o(33950),Mt=(o(80660),{emits:["update:dataDocumentos"],props:{dataDocumentos:{type:Array,default:function(){return[]}},documentos:{type:Array,default:function(){return[]}},dataOtrosInformes:{type:Object,default:function(){return{}}},alucod:{type:String}},computed:{rows:{get:function(){return this.dataDocumentos},set:function(e){this.$emit("update:dataDocumentos",e)}}},mixins:[Tt],components:{sieModal:pt.A,QSelect:X.A,QInput:$.A,QPopupProxy:ft.A,QDate:mt.A,QForm:dt.A,sieUpload:ht.A,QCheckbox:vt.A,QDownloadFile:ye.A,siePdf:At.A,QIcon:_.bP},data:function(){var e=this;return{buttons:[{icon:"plus",label:"Agregar",click:function(){e.action="create",e.observacion="",e.titulo="",e.documento="",e.fecha="",e.origen="I",e.openModal=!0}}],openModal:!1,usaTituloDocPsi:!1,tieneObsDocPsi:!1,usaIDdocpsi:!1,usaFechaDoc:!1,action:"create",titulo:"",fecha:"",observacion:"",documento:"",file:{},origen:"I",openModalPdf:"",titleModalPdf:"",url:"",sieInfo:(0,J["default"])()}},methods:{notNull:function(e){return!!e||"Este campo es requerido"},getListadoDocumentos:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getListadoDocumentos",{params:{alucod:e.alucod}});case 1:e.rows=t.v;case 2:return t.a(2)}},t)}))()},getUrl:function(e){return e=e||{},"".concat(this.sieInfo.api,"/RegistroInformePsicologicoController/getArchivoAdjunto?id=").concat(e.ID,"&caso=2&sie-token=").concat(this.sieInfo.token)},addFile:function(e){this.file=e[0]},guardarInforme:function(){var e=this;return M()(T()().m(function t(){var o,n,a,i;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$refs.form.validate();case 1:if(o=t.v,!1!==o){t.n=2;break}return t.a(2,!1);case 2:if(n="",!(Object.entries(e.file).length>0)){t.n=4;break}return t.n=3,(0,Lt.Upload)({url:"api/HyoArchivo/tmp/upload",file:e.file});case 3:a=t.v,n=a.name;case 4:return i={alucod:e.alucod,docucod:e.documento,archivo:n,fechadocu:e.fecha,origen:e.origen,titulo:e.titulo,idedit:"create"===e.action?"":e.currentRow.ID},t.n=5,e.$http.post("api/RegistroInformePsicologicoController/addOtrosInformes",{params:i});case 5:return t.n=6,e.$http.get("api/RegistroInformePsicologicoController/getListadoInformeOtros",{params:{parametros:{alucod:e.alucod}}});case 6:e.rows=t.v,e.openModal=!1,e.$notify("Se ha subido el archivo satisfactoriamente.","success"),t.n=8;break;case 7:t.p=7,t.v,e.$notify("Ha ocurrido un error de conexión, vuelve a intentarlo más tarde","warning");case 8:return t.a(2)}},t,null,[[0,7]])}))()}},created:function(){}});const _t=(0,Me.A)(Mt,[["render",yt]]);var qt=_t,Ht={class:"row"},Qt={key:0,class:"col-xs-12 q-pb-sm"},$t={class:"col-xs-12"},Xt={class:"row q-col-xs-sm q-pa-sm"},Gt={class:"col-xs-12 q-pb-sm"},Yt={class:"row q-col-gutter-sm q-col-xs-sm q-pa-sm"},Wt={class:"col-xs-12"},Bt={class:"row q-col-gutter-sm"},jt={class:"col-xs-12 col-md-6"},Jt={class:"row q-col-gutter-sm"},zt={key:0,class:"col-xs-12"},Kt={key:1,class:"col-xs-12"},Zt={class:"col-xs-12"},eo={class:"col-xs-12 col-md-6"},to={class:"row q-col-gutter-sm"},oo={key:0,class:"col-xs-12"},no={class:"col-xs-12"},ao={class:"row q-col-gutter-sm"},io={class:"col-xs-12 col-sm-12 col-md-6"},ro={class:"row sie-flat"},so={class:"col-xs-12"},lo={class:"col-xs-12"},co={class:"col-xs-12 col-sm-12 col-md-6"},uo={class:"row sie-flat"},fo={class:"col-xs-12"},mo={class:"col-xs-12"},po={key:0,class:"row q-col-gutter-sm"},vo={key:0,class:"col-xs-12"},ho={key:1,class:"col-xs-12"},go={class:"row q-pa-sm q-col-gutter-sm"},bo={class:"col-xs-12"},Io={class:"col-xs-12"},Ao={class:"col-xs-12"},Eo={class:"row q-pa-sm q-col-gutter-sm"},Co={class:"col-xs-12"},So={class:"col-xs-12"},Oo={class:"col-xs-12"},ko=["src"];function wo(e,t){var o=this,n=(0,i.g2)("header-btn"),a=(0,i.g2)("sie-table"),s=(0,i.g2)("q-select"),l=(0,i.g2)("q-input"),c=(0,i.g2)("q-date"),u=(0,i.g2)("q-popup-proxy"),d=(0,i.g2)("q-icon"),f=(0,i.g2)("q-time"),m=(0,i.g2)("q-radio"),p=(0,i.g2)("sie-modal"),v=(0,i.g2)("q-checkbox");return(0,i.uX)(),(0,i.CE)("div",Ht,[e.configEntrevista.mostrarBotonEntrevista?((0,i.uX)(),(0,i.CE)("div",Qt,[(0,i.bF)(n,{buttons:e.buttons},null,8,["buttons"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",$t,[(0,i.bF)(a,{columns:e.fields,data:e.rows,config:e.config,context:this,css:{height:"calc(100vh - 270px)"}},null,8,["columns","data","config"])]),(0,i.bF)(p,{modelValue:e.openModalAgregar,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.openModalAgregar=t}),maximized:"",footer:!1,title:"Registro de Entrevistas"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Xt,[(0,i.Lk)("div",Gt,[(0,i.bF)(n,{buttons:e.buttonsRegistroEntrevista},null,8,["buttons"])])]),(0,i.Lk)("div",Yt,[(0,i.Lk)("div",Wt,[(0,i.Lk)("div",Bt,[(0,i.Lk)("div",jt,[(0,i.Lk)("div",Jt,[e.configEntrevista.mostrarInfoCombos?((0,i.uX)(),(0,i.CE)("div",zt,[(0,i.bF)(s,{modelValue:e.asunto,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.asunto=t}),options:e.cboTipoAsunto,"option-label":"SECUDES","option-value":"SECUCOD",label:e.configEntrevista.lblAsunto},null,8,["modelValue","options","label"])])):((0,i.uX)(),(0,i.CE)("div",Kt,[(0,i.bF)(l,{modelValue:e.asunto,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.asunto=t}),label:e.configEntrevista.lblAsunto},null,8,["modelValue","label"])])),(0,i.Lk)("div",Zt,[(0,i.bF)(l,{modelValue:e.fecha,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.fecha=t}),label:"Fecha",readonly:""},{append:(0,i.k6)(function(){return[(0,i.bF)(d,{class:"cursor-pointer",name:"date_range"},{default:(0,i.k6)(function(){return[(0,i.bF)(u,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(c,{mask:"DD/MM/YYYY",modelValue:e.fecha,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fecha=t}),onInput:t[3]||(t[3]=function(t){return e.$refs.qDateProxy.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,i.Lk)("div",{class:(0,r.C4)(e.configEntrevista.mostrarHoraFin?"col-xs-6":"col-xs-12")},[(0,i.bF)(l,{modelValue:e.horaIni,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.horaIni=t}),label:"Hora Inicio",format:"##:## SS",mask:"##:## SS",readonly:""},{append:(0,i.k6)(function(){return[(0,i.bF)(d,{class:"cursor-pointer",name:"timer"},{default:(0,i.k6)(function(){return[(0,i.bF)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(f,{mask:"hh:mm A",modelValue:e.horaIni,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.horaIni=t})},null,8,["modelValue"])]}),_:1})]}),_:1})]}),_:1},8,["modelValue"])],2),e.configEntrevista.mostrarHoraFin?((0,i.uX)(),(0,i.CE)("div",{key:2,class:(0,r.C4)(e.configEntrevista.mostrarHoraFin?"col-xs-6":"col-xs-12")},[(0,i.bF)(l,{modelValue:e.horaFin,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.horaFin=t}),label:"Hora Fin",format:"##:## SS",mask:"##:## SS",readonly:""},{append:(0,i.k6)(function(){return[(0,i.bF)(d,{class:"cursor-pointer",name:"timer"},{default:(0,i.k6)(function(){return[(0,i.bF)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(f,{mask:"hh:mm A",modelValue:e.horaFin,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.horaFin=t})},null,8,["modelValue"])]}),_:1})]}),_:1})]}),_:1},8,["modelValue"])],2)):(0,i.Q3)("v-if",!0)])]),(0,i.Lk)("div",eo,[(0,i.Lk)("div",to,[e.configEntrevista.mostrarInfoCombos?((0,i.uX)(),(0,i.CE)("div",oo,[t[24]||(t[24]=(0,i.Lk)("span",{class:"text-bold q-pt-sm"},"Entrevista relacionada:",-1)),(0,i.bF)(m,{modelValue:e.rbRelacion,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.rbRelacion=t}),val:"A",label:"Al alumno"},null,8,["modelValue"]),(0,i.bF)(m,{modelValue:e.rbRelacion,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.rbRelacion=t}),val:"F",label:"A la familia"},null,8,["modelValue"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",no,[t[25]||(t[25]=(0,i.Lk)("span",{class:"text-bold q-pt-sm"},"Estado:",-1)),(0,i.bF)(m,{modelValue:e.rbEstado,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.rbEstado=t}),val:"01",label:"Pendiente"},null,8,["modelValue"]),(0,i.bF)(m,{modelValue:e.rbEstado,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.rbEstado=t}),val:"02",label:"Realizado"},null,8,["modelValue"]),(0,i.bF)(m,{modelValue:e.rbEstado,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.rbEstado=t}),val:"04",label:"No asistió"},null,8,["modelValue"])])])])]),(0,i.Lk)("div",ao,[(0,i.Lk)("div",io,[(0,i.Lk)("div",ro,[(0,i.Lk)("div",so,[(0,i.bF)(n,{auto:!1,name:"Entrevistados","font-size":"14px",buttons:e.buttonsEntrevistados,onSubmit:e.agregarEntrevistado},null,8,["buttons","onSubmit"])]),(0,i.Lk)("div",lo,[(0,i.bF)(a,{ref:"entrevistados","show-index":"",columns:e.fieldsEntrevistados,data:e.rowsEntrevistados,selection:"single",config:e.configEntrevistados,context:o,css:{height:"calc(100vh - 370px)"}},null,8,["columns","data","config"])])])]),(0,i.Lk)("div",co,[(0,i.Lk)("div",uo,[(0,i.Lk)("div",fo,[(0,i.bF)(n,{auto:!1,name:"Entrevistadores","font-size":"14px",buttons:e.buttonsEntrevistadores},null,8,["buttons"])]),(0,i.Lk)("div",mo,[(0,i.bF)(a,{ref:"entrevistadores","show-index":"",columns:e.fieldsEntrevistadores,data:e.rowsEntrevistadores,selection:"single",config:e.configEntrevistadores,context:o,css:{height:"calc(100vh - 370px)"}},null,8,["columns","data","config"])])])])])])]),e.dinamicos?((0,i.uX)(),(0,i.CE)("div",po,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.dinamicos,function(t,o){return(0,i.uX)(),(0,i.CE)(i.FK,null,["combo"===t.tipo?((0,i.uX)(),(0,i.CE)("div",vo,[(0,i.bF)(s,{class:"q-if-outlined",modelValue:t.val,"onUpdate:modelValue":function(e){return t.val=e},options:e.cboAccion,"option-label":"SECUDES","option-value":"SECUCOD",label:"Acción"},null,8,["modelValue","onUpdate:modelValue","options"])])):((0,i.uX)(),(0,i.CE)("div",ho,[(0,i.bF)(l,{class:"q-if-outlined",modelValue:t.val,"onUpdate:modelValue":function(e){return t.val=e},label:t.label,counter:!0,rows:t.rows,maxlength:t.longitud,type:"textarea"},null,8,["modelValue","onUpdate:modelValue","label","rows","maxlength"])]))],64)}),256))])):(0,i.Q3)("v-if",!0)]}),_:1},8,["modelValue"]),(0,i.bF)(p,{modelValue:e.openModalEntrevistados,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.openModalEntrevistados=t}),title:"Agregar Entrevistado",onSubmit:e.agregarEntrevistado},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",go,[(0,i.Lk)("div",bo,[(0,i.bF)(s,{modelValue:e.entrevistados.tipo,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.entrevistados.tipo=t}),options:e.entrevistados.tipos,label:"Tipo",onInput:e.cargarDatosEntrevistados},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",Io,[(0,i.bF)(l,{modelValue:e.entrevistados.nombre,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.entrevistados.nombre=t}),label:"Nombre",readonly:e.nombreLectura},null,8,["modelValue","readonly"])]),(0,i.Lk)("div",Ao,[(0,i.bF)(v,{modelValue:e.entrevistados.repetir,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.entrevistados.repetir=t}),label:"Repetir","true-value":"S","false-value":"N"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,i.bF)(p,{modelValue:e.openModalEntrevistador,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.openModalEntrevistador=t}),title:"Agregar Entrevistador",onSubmit:e.agregarEntrevistador},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Eo,[(0,i.Lk)("div",Co,[(0,i.bF)(s,{modelValue:e.entrevistador.entrevistador,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.entrevistador.entrevistador=t}),options:e.entrevistador.entrevistadores,"option-label":"NOMCOMP","option-value":"PROFCOD","emit-value":!1,label:"Entrevistador",onInput:e.cargarDatosEntrevistador},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",So,[(0,i.bF)(l,{modelValue:e.entrevistador.cargo,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.entrevistador.cargo=t}),label:"Cargo"},null,8,["modelValue"])]),(0,i.Lk)("div",Oo,[(0,i.bF)(v,{modelValue:e.entrevistador.repetir,"onUpdate:modelValue":t[21]||(t[21]=function(t){return e.entrevistador.repetir=t}),label:"Repetir","true-value":"S","false-value":"N"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"]),e.openModalPdf?((0,i.uX)(),(0,i.Wv)(p,{key:1,title:"Detalle de la Cita",modelValue:e.openModalPdf,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.openModalPdf=t}),footer:!1,css:{width:"90vw",height:"90vh"}},{default:(0,i.k6)(function(){return[(0,i.Lk)("iframe",{class:"col sie-frame",src:e.url,width:"100%",height:"100%"},null,8,ko)]}),_:1},8,["modelValue"])):(0,i.Q3)("v-if",!0)])}var Do={"01":"Pendiente","02":"Realizado","03":"Por Confirmar","04":"No asistió"},Fo={data:function(){return{config:{FECHA:{component:"date",edit:!1},ESTADO:{renderHtml:function(e,t,o,n){var a=e.ESTADO||"",i=e.ORIGEN_INTRANET||0,r=this.configEntrevista.getCitasIntranet&&1===i,s=r?a:Do[a]||"Pendiente",l=s.trim();return"Realizado"===l?n["$$background"]="green-2":"No asistió"===l&&(n["$$background"]="red-2"),t("span",{},l)}},ASUNTO:{renderHtml:function(e,t,o,n){var a="";return a=this.configEntrevista.mostrarInfoCombos?e.ASUNTOOPC||"":e.ASUNTO||"",t("span",{},a)}},ACTION:{component:"button",icon:["file_pdf as pdf","edit as editar","delete as eliminar"],pdf:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:t.getUrl(e);case 1:return o.a(2)}},o)}))()},editar:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:return t.codent=e.CODENT,o.n=1,t.getDatosEntrevista();case 1:return o.a(2)}},o)}))()},eliminar:function(e,t){var o=this;return M()(T()().m(function t(){var n,a;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,o.$confirmar("¿Realmente desea eliminar el registro?","delete");case 1:if(n=t.v,!n){t.n=3;break}return t.n=2,o.$http.delete("api/RegistroInformePsicologicoController/deleteEntrevista",{params:{id:e.CODENT}});case 2:return a=t.v,o.$notify(a.message),t.n=3,o.getListadoEntrevistas();case 3:t.n=5;break;case 4:t.p=4,t.v,o.$notify("Ha ocurrido un error de conexión, vuelve a intentarlo más tarde","warning");case 5:return t.a(2)}},t,null,[[0,4]])}))()},validate:{pdf:function(e){var t=e.ORIGEN_INTRANET||0;return this.configEntrevista.getCitasIntranet&&1===t},editar:function(e){var t=e.ORIGEN_INTRANET||0;return!(this.configEntrevista.getCitasIntranet&&1===t)},eliminar:function(e){var t=e.ORIGEN_INTRANET||0;return!(this.configEntrevista.getCitasIntranet&&1===t)}},flat:!0}},fields:[{name:"NOMBRE",label:"Responsable",field:"NOMBRE",align:"left"},{name:"ASUNTO",label:"Asunto",field:"ASUNTO",align:"left"},{name:"FECHA",label:"Fecha",field:"FECHA",align:"left",sortable:!0},{name:"HORAINI",label:"Hora Ini.",field:"HORAINI",align:"left"},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"left"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},Vo=o(23564),Po=o(99515),xo={data:function(){return{configEntrevistados:{ACTION:{component:"button",icon:["delete"],delete:function(e,t){var o=this;return M()(T()().m(function e(){var n;return T()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.$confirmar("¿Seguro de eliminar?","delete");case 1:n=e.v,n&&o.rowsEntrevistados.splice(o.rowsEntrevistados.indexOf(t),1);case 2:return e.a(2)}},e)}))()},dense:!0,flat:!0,round:!0}},rowsEntrevistados:[],fieldsEntrevistados:[{name:"TIPODES",label:"Tipo",field:"TIPODES",align:"center"},{name:"NOMBRE",label:"Nombre",field:"NOMBRE",align:"left"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center"}]}}},Ro={data:function(){return{configEntrevistadores:{RESP:{renderHtml:function(e,t,o){return e.RESP=e.RESP?e.RESP:"N",o.checkbox({value:e.RESP,trueValue:"S"})},renderAction:function(e,t){return"S"===e.RESP?(t.RESP="N",e.RESP="N"):(e.RESP="S",t.RESP="S"),!0}},ACTION:{component:"button",icon:["delete"],delete:function(e,t){var o=this;return M()(T()().m(function e(){var n;return T()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.$confirmar("¿Seguro de eliminar?","delete");case 1:n=e.v,n&&o.rowsEntrevistadores.splice(o.rowsEntrevistadores.indexOf(t),1);case 2:return e.a(2)}},e)}))()},dense:!0,flat:!0,round:!0}},rowsEntrevistadores:[],fieldsEntrevistadores:[{name:"CODIGO",label:"Código",field:"CODIGO",align:"center"},{name:"NOMBRE",label:"Nombre",field:"NOMBRE",align:"left"},{name:"CARGO",label:"Cargo",field:"CARGO",align:"center"},{name:"RESP",label:"Res.",field:"RESP",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center"}]}}},No={emits:["setEntrevistas"],props:{dataEntrevistas:{type:Array,default:function(){return[]}},alucod:{type:String},nomcomp:{type:String},nemo:{type:String}},mixins:[Fo,xo,Ro],components:{QCardSection:H.A,QTime:Vo.A,sieModal:pt.A,QSelect:X.A,QInput:$.A,QDate:mt.A,QCheckbox:vt.A,QPopupProxy:ft.A,QForm:dt.A,QRadio:Po.A,QIcon:_.bP},data:function(){var e=this;return{sieInfo:(0,J["default"])(),rows:[],buttons:[{icon:"add",label:"Agregar",click:function(){e.action="new",e.limpiar(),e.openModalAgregar=!0}}],buttonsRegistroEntrevista:[{icon:"save",label:"Grabar",click:function(){e.grabarEntrevista()}}],buttonsEntrevistados:[{icon:"plus",click:function(){e.limpiarEntrevistado(),e.openModalEntrevistados=!0}}],buttonsEntrevistadores:[{icon:"plus",click:function(){var t=M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:if(0!==e.entrevistador.entrevistadores.length){t.n=2;break}return t.n=1,e.$http.get("api/HyoEntrevista/getProfes");case 1:e.entrevistador.entrevistadores=t.v;case 2:e.openModalEntrevistador=!0;case 3:return t.a(2)}},t)}));function o(){return t.apply(this,arguments)}return o}()}],configEntrevista:{},openModalAgregar:!1,openModalEntrevistados:!1,asunto:"",codent:"",fecha:(0,Ne.Ay)(new Date,"DD/MM/YYYY"),horaIni:(0,Ne.Ay)(new Date,"hh:mm A"),horaFin:"",rbEstado:"01",rbRelacion:"A",nombreLectura:!0,entrevistados:{tipos:[{label:"Seleccione",value:""},{label:"Padre",value:"P"},{label:"Madre",value:"M"},{label:"Apoderado",value:"A"},{label:"Terapeuta",value:"T"},{label:"Alumno(a)",value:"E"},{label:"Otros",value:"O"}],tipo:"",codigo:"",nombre:"",repetir:"N"},entrevistador:{entrevistadores:[],entrevistador:"",cargo:"",repetir:"N"},openModalEntrevistador:!1,dinamicos:[{val:"",campo:"texto",label:"campo 1",longitud:10,rows:3},{val:"",campo:"texto2",label:"campo 2",longitud:1e3,rows:3},{val:"",campo:"texto3",label:"campo 3",longitud:1e3,rows:3}],accion:"",cboTipoAsunto:[],cboAccion:[],url:"",openModalPdf:!1}},methods:{cargarDatosEntrevistados:function(e){var t=this;return M()(T()().m(function o(){var n,a;return T()().w(function(o){while(1)switch(o.n){case 0:if(t.nombreLectura=!0,e){o.n=1;break}return t.$notify("Debe seleccionar un Tipo de Entrevistado","info"),o.a(2);case 1:if("E"!==e){o.n=2;break}return t.entrevistados.nombre=t.nomcomp,o.a(2);case 2:if(!["T","O"].includes(e)){o.n=3;break}return t.nombreLectura=!1,t.entrevistados.nombre="",o.a(2);case 3:return o.n=4,t.$http.get("api/HyoEntrevista/cargarDatosEntrevistados",{params:{alucod:t.alucod,tipo:e}});case 4:n=o.v,a=n.nombre,t.entrevistados.nombre=a;case 5:return o.a(2)}},o)}))()},limpiarEntrevistado:function(){this.entrevistados.tipo="",this.entrevistados.codigo="",this.entrevistados.nombre="",this.entrevistados.repetir="N"},agregarEntrevistado:function(){var e=this.entrevistados,t=e.tipo,o=e.nombre,n=e.codigo,a=e.repetir;if(t)if(o)if(!0!==this.verificarEntrevistado(t)){var i=this.entrevistados.tipos.filter(function(e){return e.value===t});this.rowsEntrevistados.push({TIPO:t,TIPODES:i[0].label,CODIGO:n,NOMBRE:o}),"S"!==a?this.openModalEntrevistados=!1:this.limpiarEntrevistado()}else this.$notify("Entrevistado seleccionado, ya se encuentra en la lista","warning");else this.$notify("Debe Ingresar el nombre del Entrevistado","info");else this.$notify("Debe seleccionar un Tipo de Entrevistado","info")},verificarEntrevistado:function(e){for(var t=!1,o=0;o<this.rowsEntrevistados.length;o++){var n=this.rowsEntrevistados[o];if(n.TIPO===e){t=!0;break}}return t},agregarEntrevistador:function(){var e=this.entrevistador.entrevistador,t=e.CARNOM,o=e.NOMCOMP,n=e.PROFCOD;if(!0!==this.verificarEntrevistador(n)){var a=this.entrevistador.repetir;this.entrevistador.cargo=t,this.rowsEntrevistadores.push({CODIGO:n,NOMBRE:o,CARGO:t}),"S"!==a&&(this.openModalEntrevistador=!1)}else this.$notify("Entrevistador seleccionado, ya se encuentra en la lista","info")},verificarEntrevistador:function(e){for(var t=!1,o=0;o<this.rowsEntrevistadores.length;o++){var n=this.rowsEntrevistadores[o];if(n.CODIGO===e){t=!0;break}}return t},cargarDatosEntrevistador:function(){var e=this.entrevistador.entrevistador.CARNOM;this.entrevistador.cargo=e},getDatosEntrevista:function(){var e=this;return M()(T()().m(function t(){var o,n,a,i;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getDatosEntrevista",{params:{id:e.codent}});case 1:for(o=t.v,n=o.dataEntrevista[0],e.rowsEntrevistados=o.dataEntrevistados||[],e.rowsEntrevistadores=o.dataEntrevistadores||[],e.asunto=n.ASUNTO,e.fecha=(0,Ne.Ay)(n.FECHA,"DD/MM/YYYY"),e.horaIni=n.HORAINI,e.configEntrevista.mostrarHoraFin&&(e.horaFin=n.HORAFIN),e.configEntrevista.mostrarInfoCombos&&(e.rbRelacion=n.RELACIONADO),e.configEntrevista.mostrarInfoCombos&&(e.rbRelacion=n.RELACIONADO),e.rbEstado=n.ESTADO,a=0;a<e.dinamicos.length;a++)i=e.dinamicos[a],e.dinamicos[a].val=n[i.campo];e.action="update",e.openModalAgregar=!0,t.n=3;break;case 2:return t.p=2,t.v,e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning"),t.a(2,!1);case 3:return t.a(2)}},t,null,[[0,2]])}))()},getUrl:function(e){var t={formato:"pdf",case:"conclusion",codent:e.CODENT,ano:this.sieInfo.ano,alumno:e.ALUCOD,repcod:"citas",tipcod:this.sieInfo.tipcod};this.url="".concat(this.sieInfo.url,"/webservice/reportes/reporte/params?sie-token=").concat(this.sieInfo.token,"&case=").concat(t.case,"\n      &formato=").concat(t.formato,"&codent=").concat(t.codent,"&ano=").concat(t.ano,"&alumno=").concat(t.alumno,"&repcod=").concat(t.repcod,"&tipcod=").concat(t.tipcod),this.openModalPdf=!0},getListadoEntrevistados:function(){var e=this;return M()(T()().m(function t(){var o;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getListadoEntrevistados",{params:{id:e.codent}});case 1:o=t.v,e.rowsEntrevistados=o,t.n=3;break;case 2:t.p=2,t.v,e.rowsEntrevistados=[];case 3:return t.a(2)}},t,null,[[0,2]])}))()},getListadoEntrevistadores:function(){var e=this;return M()(T()().m(function t(){var o;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getListadoEntrevistadores",{params:{id:e.codent}});case 1:o=t.v,e.rowsEntrevistadores=o,t.n=3;break;case 2:t.p=2,t.v,e.rowsEntrevistadores=[];case 3:return t.a(2)}},t,null,[[0,2]])}))()},horaToTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.substring(6,8),n=e.substring(0,2),a=e.substring(3,5);("PM"===o&&"12"!==n||"AM"===o&&"12"===n)&&(n=parseInt(e)+12,24===n&&(n="00"));var i={horaTime:"".concat(n,":").concat(a,":00")};return t&&(i.tiempo=100*parseInt(n)+a),i},limpiar:function(){this.codent="",this.asunto="",this.horaIni=(0,Ne.Ay)(new Date,"hh:mm A"),this.horaFin="",this.fecha=(0,Ne.Ay)(new Date,"DD/MM/YYYY"),this.rbEstado="01",this.rowsEntrevistados=[],this.rowsEntrevistadores=[],this.idedit="";for(var e=0;e<this.dinamicos.length;e++)this.dinamicos[e].val=""},getListadoEntrevistas:function(){var e=this;return M()(T()().m(function t(){var o;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getListadoEntrevistas",{params:{parametros:{alucod:e.alucod,nemo:e.nemo}}});case 1:o=t.v,e.rows=o,e.$emit("setEntrevistas",e.rows),t.n=3;break;case 2:t.p=2,t.v,e.items=[];case 3:return t.a(2)}},t,null,[[0,2]])}))()},grabarEntrevista:function(){var e=this;return M()(T()().m(function t(){var o,n,a,i,r,s,l,c;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,o="",n="",""!==e.asunto){t.n=1;break}return e.$notify("Aviso-Debe de ingresar un Asunto","info"),t.a(2,!1);case 1:if(""!==e.fecha){t.n=2;break}return e.$notify("Aviso-Debe de ingresar una Fecha","info"),t.a(2,!1);case 2:if(""!==e.horaIni){t.n=3;break}return e.$notify("Aviso-Debe de ingresar una hora de Inicio","info"),t.a(2,!1);case 3:if(0!==e.rowsEntrevistados.length){t.n=4;break}return e.$notify("Aviso-Debe de ingresar Entrevistados.","info"),t.a(2,!1);case 4:if(0!==e.rowsEntrevistadores.length){t.n=5;break}e.$notify("Aviso-Debe de ingresar Entrevistadores.","info"),t.n=9;break;case 5:a=!1,i=0;case 6:if(!(i<e.rowsEntrevistadores.length)){t.n=8;break}if(r=e.rowsEntrevistadores[i],"S"!==r.RESP){t.n=7;break}return a=!0,t.a(3,8);case 7:i++,t.n=6;break;case 8:if(!1!==a){t.n=9;break}return e.$notify("Aviso-Debe de seleccionar un Responsable entre los Entrevistadores.","info"),t.a(2,!1);case 9:if(o=e.horaToTime(e.horaIni,e.configEntrevista.mostrarHoraFin),s=(e.fecha||"").split("/").reverse().join("/"),l={codent:e.codent,alucod:e.alucod,asunto:e.asunto,horaini:e.horaIni,horainitime:o.horaTime,fecha:e.fecha?new Date(s):new Date,origen:"ps",estado:e.rbEstado,dinamicos:e.dinamicos,entrevistados:e.rowsEntrevistados,entrevistadores:e.rowsEntrevistadores,idedit:"create"===e.action?"":e.codent},!e.configEntrevista.mostrarHoraFin){t.n=12;break}if(""!==e.horaFin){t.n=10;break}return e.$notify("Aviso-Debe de ingresar una hora de Fin","info"),t.a(2,!1);case 10:if(n=e.horaToTime(e.horaFin,!0),!(parseInt(n.tiempo)<=parseInt(o.tiempo))){t.n=11;break}return e.$notify("Aviso-Debe de ingresar un rango de horas correcto","info"),t.a(2,!1);case 11:l.horafin=e.horaFin,l.horafintime=n.horaTime;case 12:return e.configEntrevista.mostrarInfoCombos&&(l.asunto_ps=e.asunto,l.relacionado=e.rbRelacion),t.n=13,e.$http.post("api/RegistroInformePsicologicoController/addEntrevistas",{params:l});case 13:return c=t.v,e.$notify(c.message),t.n=14,e.getListadoEntrevistas();case 14:return e.openModalAgregar=!1,t.a(2,!0);case 15:return t.p=15,t.v,e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo","warning"),t.a(2,!1)}},t,null,[[0,15]])}))()}},created:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getConfigEntrevistas");case 1:e.configEntrevista=t.v,e.dinamicos=e.configEntrevista.dinamicos,e.cboTipoAsunto=e.configEntrevista.mostrarInfoCombos?e.configEntrevista.cboTipoAsunto:[],e.cboAccion=e.configEntrevista.mostrarInfoCombos?e.configEntrevista.cboAccionEntrevista:[];case 2:return t.a(2)}},t)}))()},watch:{dataEntrevistas:{immediate:!0,deep:!0,handler:function(e){this.rows=e}}}};const yo=(0,Me.A)(No,[["render",wo]]);var Uo=yo,To={class:"row"},Lo={class:"col-xs-12"},Mo={class:"row q-col-gutter-sm"},_o={class:"col-xs-12 col-sm-6"},qo={class:"col-xs-12 col-sm-6"},Ho={class:"row q-pa-sm q-col-gutter-sm"},Qo={class:"col-xs-12"},$o={key:0,class:"col-xs-12"},Xo={class:"col-xs-12"},Go={class:"col-xs-12"},Yo={class:"row q-col-gutter-sm q-mb-sm"},Wo={class:"col-xs-12 col-md-12"},Bo={class:"col-xs-12 col-md-12"},jo={key:0,class:"div q-col-gutter-sm q-mb-sm"},Jo={class:"div"},zo={class:"col-xs-12"};function Ko(e,t){var o=this,n=(0,i.g2)("header-btn"),a=(0,i.g2)("q-select"),s=(0,i.g2)("q-card-section"),l=(0,i.g2)("sie-table"),c=(0,i.g2)("q-card"),u=(0,i.g2)("q-date"),d=(0,i.g2)("q-popup-proxy"),f=(0,i.g2)("q-icon"),m=(0,i.g2)("q-input"),p=(0,i.g2)("q-tooltip"),v=(0,i.g2)("q-btn"),h=(0,i.g2)("q-card-separator"),g=(0,i.g2)("q-card-title"),b=(0,i.g2)("q-chip"),I=(0,i.g2)("q-form"),A=(0,i.g2)("sie-modal"),E=(0,i.g2)("sie-cloud"),C=(0,i.g2)("sie-pdf");return(0,i.uX)(),(0,i.CE)("div",To,[(0,i.Lk)("div",Lo,[(0,i.bF)(c,null,{default:(0,i.k6)(function(){return[(0,i.bF)(n,{buttons:e.buttons,auto:!1},null,8,["buttons"]),(0,i.bF)(s,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Mo,[(0,i.Lk)("div",_o,[(0,i.bF)(a,{modelValue:e.seg,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.seg=t}),options:e.cmboSeg,label:"Buscar Por","option-value":"SECUCOD","option-label":"SECUDES",onInput:e.findSeguimiento,"emit-value":!1},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",qo,[(0,i.bF)(a,{modelValue:e.estadoPsi,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.estadoPsi=t}),options:e.cmboEstadoPsi,label:"Situación Final","option-value":"SECUCOD","option-label":"SECUDES",onInput:e.updateEstadoPsi},null,8,["modelValue","options","onInput"])])])]}),_:1}),(0,i.bF)(s,null,{default:(0,i.k6)(function(){return[(0,i.bF)(l,{ref:"seguimiento",columns:e.fields,data:e.rows,config:e.configFields,context:o,css:{height:"calc(100vh - 380px)"}},null,8,["columns","data","config"])]}),_:1})]}),_:1})]),(0,i.bF)(A,{modelValue:e.openModal,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.openModal=t}),title:"Seguimiento",onSubmit:e.guardarSeguimiento,css:{minWidth:"60vw",maxWidth:"60vw",minHeight:"40vh"},onClose:e.cerrarModalSeguimiento},{default:(0,i.k6)(function(){return[(0,i.bF)(I,{ref:"frmSeguimiento",style:{height:"auto"}},{default:(0,i.k6)(function(){return[(0,i.bF)(s,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Ho,[(0,i.Lk)("div",Qo,[(0,i.bF)(m,{modelValue:e.form.fecha,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.fecha=t}),readonly:"",label:"Fecha",format:"##/##/####",mask:"##/##/####",rules:[e.required]},{append:(0,i.k6)(function(){return["new"===e.action?((0,i.uX)(),(0,i.Wv)(f,{key:0,class:"cursor-pointer",name:"date_range"},{default:(0,i.k6)(function(){return[(0,i.bF)(d,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(u,{mask:"DD/MM/YYYY",modelValue:e.form.fecha,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.fecha=t}),onInput:t[3]||(t[3]=function(t){return e.$refs.qDateProxy.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})):(0,i.Q3)("v-if",!0)]}),_:1},8,["modelValue","rules"])]),e.usaHoraSeguimiento?((0,i.uX)(),(0,i.CE)("div",$o,[(0,i.bF)(m,{modelValue:e.form.hora,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.hora=t}),readonly:"",label:"Hora",format:"##:##",mask:"##:##",rules:[e.required]},null,8,["modelValue","rules"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Xo,[(0,i.bF)(a,{modelValue:e.form.tipo,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.tipo=t}),options:e.cmboSegMod,label:"Tipo","option-value":"SECUCOD","option-label":"SECUDES",rules:[e.required]},null,8,["modelValue","options","rules"])]),(0,i.Lk)("div",Go,[(0,i.bF)(m,{modelValue:e.form.observacion,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.observacion=t}),rows:"10",label:"Observación",type:"textarea",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1}),e.usaInfInt?((0,i.uX)(),(0,i.Wv)(s,{key:0},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Yo,[(0,i.Lk)("div",Wo,[(0,i.bF)(g,null,{right:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(v,{icon:"plus",size:"sm",color:"secondary",onClick:t[8]||(t[8]=function(t){return e.openModalAgregarArchivos()})},{default:(0,i.k6)(function(){return[(0,i.bF)(p,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(e.$t("agregar")),1)]}),_:1})]}),_:1})])]}),default:(0,i.k6)(function(){return[t[13]||(t[13]=(0,i.eW)("Agregar Archivos",-1)),(0,i.bF)(h)]}),_:1})]),(0,i.Lk)("div",Bo,[e.archivos&&e.archivos.length>0?((0,i.uX)(),(0,i.CE)("div",jo,[(0,i.Lk)("div",Jo,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.archivos,function(t,o){return(0,i.uX)(),(0,i.Wv)(b,{key:o,class:"q-ma-xs",onRemove:function(t){return e.deleteFile(o)},dense:"",icon:t.ICONO.icon,outline:"",color:"primary","text-color":"white",removable:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(t.name),1)]}),_:2},1032,["onRemove","icon"])}),128))])])):(0,i.Q3)("v-if",!0)]),(0,i.Lk)("div",zo,[(0,i.bF)(l,{"menu-render":"",columns:e.fieldsArchivoSeguimiento,data:e.rowArchivoSeguimiento,config:e.configArchivoSeguimiento,context:o,css:{height:"300px"}},null,8,["columns","data","config"])])])]}),_:1})):(0,i.Q3)("v-if",!0)]}),_:1},512)]}),_:1},8,["modelValue","onSubmit","onClose"]),(0,i.bF)(A,{class:"iseguimiento-modal-adjuntos",modelValue:e.addArchivosopen,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.addArchivosopen=t}),title:"Agregar archivos",header:!0,footer:!0,onSubmit:e.closeModalAgregarArchivos},{default:(0,i.k6)(function(){return[(0,i.bF)(E,{modelValue:e.archivos,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.archivos=t}),allow:["pdf"],"only-local":""},null,8,["modelValue"])]}),_:1},8,["modelValue","onSubmit"]),e.openModalPdf?((0,i.uX)(),(0,i.Wv)(A,{key:0,footer:!1,css:{width:"70%",height:"90%"},modelValue:e.openModalPdf,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.openModalPdf=t}),title:e.titleModalPdf},{default:(0,i.k6)(function(){return[(0,i.bF)(C,{src:e.url,style:{height:"100%"}},null,8,["src"])]}),_:1},8,["modelValue","title"])):(0,i.Q3)("v-if",!0)])}o(74260),o(32203),o(52776),o(81813);var Zo=85,en={data:function(){return{configFields:{FECHA:{component:"date",edit:!1},FECACT:{component:"date",edit:!1},EVALUA:{renderHtml:function(e,t){var o=(String(e.EVALUA)||"").substring(0,Zo);return t("span",o,[t("b",{},(e.EVALUA||"").length>Zo?" ...":"")])},tooltip:function(e){var t=String(e.EVALUA)||"";return t.length>Zo?t:""}},ACTION:{component:"button",icon:["edit","delete"],edit:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:if(t.action="edit",t.form.tipo=e.AREA,t.form.nemo=e.NEMO,t.form.observacion=e.EVALUA,t.form.fechaedit=e.FECHA||"",t.form.fecha=(0,Ne.Ay)(new Date(e.FECHA),"DD/MM/YYYY"),!t.usaInfInt){o.n=1;break}return o.n=1,t.getArchivosSeguimiento(e);case 1:t.openModal=!0;case 2:return o.a(2)}},o)}))()},delete:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,t.$confirmar("¿Realmente desea eliminar el seguimiento?","delete");case 1:n=o.v,n&&t.deleteSeguimiento(e);case 2:return o.a(2)}},o)}))()},tooltip:{edit:"Editar",delete:"Eliminar"},dense:!0,round:!0,flat:!0}},rows:[],fields:[]}}},tn={data:function(){return{configArchivoSeguimiento:{FECREG:{component:"datetime",edit:!1},ACTION:{component:"button",icon:["delete as eliminar"],eliminar:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,t.$confirmar("¿Desea eliminar el documento?","delete");case 1:n=o.v,n&&t.deleteArchivoSeguimiento(e);case 2:return o.a(2)}},o)}))()},tooltip:{eliminar:"Eliminar"},flat:!0,round:!0},VIEW:{renderHtml:function(e,t,o){return o.icon({color:"primary",name:"file_pdf"})},renderAction:function(e){this.titleModalPdf=e.ARCHIVO,this.url=this.getUrl(e),this.openModalPdf=!0}}},rowArchivoSeguimiento:[],fieldsArchivoSeguimiento:[{name:"ARCHIVO",label:"Archivo",field:"ARCHIVO",align:"center"},{name:"FECREG",label:"Fecha y Hora",field:"FECREG",align:"center"},{name:"VIEW",label:"Visualizar",field:"VIEW",align:"center",width:80},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:50}]}}},on=[{name:"SECUDES",label:"Motivo",field:"SECUDES",align:"left"},{name:"EVALUA",label:"Detalle",field:"EVALUA",align:"left"},{name:"FECACT",label:"Fecha Actual",field:"FECACT",align:"center"},{name:"USUCOD",label:"Usuario",field:"USUCOD",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:50}],nn={emits:["setSeguimiento","setSituacion"],props:{dataGridSeguimiento:{type:Array,default:function(){return[]}},cmboSeg:{type:Array,default:function(){return[]}},alucod:{type:String},nemo:{type:String},cmboEstadoPsi:{type:Array,default:function(){return[]}},configSeguimiento:{type:Object,default:function(){return{}}}},mixins:[en,tn],components:{QCardSection:H.A,QSelect:X.A,QInput:$.A,sieModal:pt.A,QDate:mt.A,QPopupProxy:ft.A,QForm:dt.A,sieUpload:ht.A,siePdf:At.A,sieCloud:gt.A,QChip:bt.A,QCard:_.C$,QIcon:_.bP,QCardTitle:_.u0,QBtn:_.Il,QTooltip:_.nC,QCardSeparator:_.d6},data:function(){var e=this;return{buttons:[{icon:"plus",label:"Agregar",click:function(){e.action="new",e.cmboSegMod.length>0&&(e.form.tipo=e.cmboSegMod[0].SECUCOD),e.form.nemo=e.nemo,e.form.fecha="",e.form.hora="",e.form.observacion="",e.rowArchivoSeguimiento=[],e.openModal=!0}}],buttonsSeguimiento:[{icon:"areas_curriculares",label:"Subir Archivo",click:function(){"new"!==e.action?e.$refs.upload.$el.querySelector("input").click():e.$notify("Solo se puede subir archivo al editar","info")}}],seg:{SECUCOD:"%",SECUDES:"Todos"},estadoPsi:"",openModal:!1,usaInfInt:!1,usaHoraSeguimiento:!1,action:"new",form:{fechaedit:"",nemo:"",fecha:"",hora:"",tipo:"",observacion:""},archivos:[],cmboSegMod:[],addArchivosopen:!1,openModalPdf:!1,titleModalPdf:"",url:"",sieInfo:(0,J["default"])()}},methods:{openModalAgregarArchivos:function(){this.addArchivosopen=!0},closeModalAgregarArchivos:function(){this.addArchivosopen=!1},cerrarModalSeguimiento:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getSeguimientoPorAlumno();case 1:e.archivos=[],e.openModal=!1;case 2:return t.a(2)}},t)}))()},deleteFile:function(e){this.archivos.splice(e,1)},getArchivosSeguimiento:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/HyoProfes/listarPorSeguimientoPsicopedagogiaDoc",{params:{nemo:e.form.nemo,alucod:e.alucod,fecha:e.form.fecha.replace(/\//g,"."),area:e.form.tipo}});case 1:e.rowArchivoSeguimiento=t.v;case 2:return t.a(2)}},t)}))()},getSeguimientoPorAlumno:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getSeguimientoPorAlumno",{params:{alucod:e.alucod}});case 1:e.rows=t.v,e.$emit("setSeguimiento",e.rows);case 2:return t.a(2)}},t)}))()},getGridS:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/HyoProfes/getInfoFichaPsicologia",{params:{alucod:e.alucod,extract:"gridS"}});case 1:e.rows=t.v;case 2:return t.a(2)}},t)}))()},guardarSeguimiento:function(){var e=this;return M()(T()().m(function t(){var o,n,a;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,e.$refs.frmSeguimiento.validate();case 1:if(o=t.v,!1!==o){t.n=2;break}return t.a(2,!1);case 2:return n={fecha:e.form.fecha.split("/").reverse().join("-"),tipo:e.form.tipo,detalle:e.form.observacion,alucod:e.alucod,nemo:e.form.nemo,usaHoraSeguimiento:e.usaHoraSeguimiento,archivos:e.archivos,fechaedit:e.form.fechaedit.replace(/\//g,"-"),action:e.action},t.p=3,t.n=4,e.$http.post("api/RegistroInformePsicologicoController/addSeguimiento",{params:n});case 4:return a=t.v,e.$notify(a.message),e.archivos=[],t.n=5,e.getArchivosSeguimiento();case 5:e.accion="edit",t.n=7;break;case 6:t.p=6,t.v,e.$notify("Ocurrió un problema de conexión.","warning");case 7:return t.a(2)}},t,null,[[3,6]])}))()},deleteSeguimiento:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,t.$http.delete("api/RegistroInformePsicologicoController/deleteSeguimiento",{params:{params:{nemo:e.NEMO,alucod:t.alucod,fecha:e.FECHA.replace(/\//g,"-"),area:e.AREA}}});case 1:return n=o.v,t.$notify(n.message),o.n=2,t.getSeguimientoPorAlumno();case 2:o.n=4;break;case 3:o.p=3,o.v,t.$notify("Ocurrió un problema de conexión.","warning");case 4:return o.a(2)}},o,null,[[0,3]])}))()},getUrl:function(e){return e=e||{},"".concat(this.sieInfo.api,"/RegistroInformePsicologicoController/getArchivoAdjunto?id=").concat(e.ID,"&caso=3&sie-token=").concat(this.sieInfo.token)},required:function(e){return!!e||"Campo obligatorio"},findSeguimiento:function(e){console.log("value",e),this.$refs.seguimiento.find("%"===e.SECUCOD?"":e.SECUDES)},updateEstadoPsi:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.put("api/HyoProfes/actualizarEstadoPsi",{alucod:e.alucod,estado:e.estadoPsi});case 1:e.$emit("setSituacion",e.estadoPsi),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))()},deleteArchivoSeguimiento:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,t.$http.delete("api/RegistroInformePsicologicoController/deleteArchivoSeguimiento",{params:{id:e.ID}});case 1:return n=o.v,t.$notify(n.message),o.n=2,t.getArchivosSeguimiento();case 2:o.n=4;break;case 3:o.p=3,o.v,t.items=[];case 4:return o.a(2)}},o,null,[[0,3]])}))()}},watch:{dataGridSeguimiento:{immediate:!0,handler:function(e){var t=this.configSeguimiento,o=t.estadoActualPsi,n=t.usaHoraSeguimiento,a=t.usaInfInt;this.usaHoraSeguimiento=n,this.usaInfInt=a,this.estadoPsi=o||"",this.fields=[].concat(on),!0===n?this.fields.unshift({name:"FECHA",label:"Fecha",field:"FECHA",align:"center"},{name:"HORA",label:"Hora",field:"HORA",align:"center"}):this.fields.unshift({name:"FECHA",label:"Fecha",field:"FECHA",align:"center"}),this.rows=e,this.cmboSegMod=JSON.parse(JSON.stringify(this.cmboSeg)),this.cmboSegMod.shift()}}}};const an=(0,Me.A)(nn,[["render",Ko]]);var rn=an,sn={class:"row"},ln={class:"col-xs-12"},cn=["src"];function un(e,t){var o=(0,i.g2)("sie-table"),n=(0,i.g2)("sie-modal");return(0,i.uX)(),(0,i.CE)("div",sn,[(0,i.Lk)("div",ln,[(0,i.bF)(o,{columns:e.fields,data:e.rows,config:e.config,context:this,css:{height:"calc(100vh - 270px)"}},null,8,["columns","data","config"])]),e.openModalPdf?((0,i.uX)(),(0,i.Wv)(n,{key:0,title:"Detalle de la Derivación",modelValue:e.openModalPdf,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.openModalPdf=t}),footer:!1,css:{width:"90vw",height:"90vh"}},{default:(0,i.k6)(function(){return[(0,i.Lk)("iframe",{class:"col sie-frame",src:e.url,width:"100%",height:"100%"},null,8,cn)]}),_:1},8,["modelValue"])):(0,i.Q3)("v-if",!0)])}var dn={data:function(){return{config:{ACTION:{component:"button",icon:["file_pdf as pdf"],pdf:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:t.getUrl(e);case 1:return o.a(2)}},o)}))()},validate:{pdf:function(e){return!0}},flat:!0}},fields:[{name:"FH_REGISTRO",label:"Fecha y hora registro",field:"FH_REGISTRO",align:"center",width:100,wrap:!0,sortable:!0},{name:"USUNOM_DERIVA",label:"Derivado a",field:"USUNOM_DERIVA",align:"left",width:250,wrap:!0},{name:"USUNOM_REGISTRA",label:"Derivado por",field:"USUNOM_REGISTRA",align:"left",width:250,wrap:!0},{name:"DE_PRIORIDAD_DES",label:"Prioridad",field:"DE_PRIORIDAD_DES",align:"center"},{name:"DE_ETAPA_DES",label:"Estado",field:"DE_ETAPA_DES",align:"center"},{name:"FH_ACTUALIZACION",label:"Última Actualización",field:"FH_ACTUALIZACION",align:"center",width:100,wrap:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},fn={props:{dataDerivacion:{type:Array,default:function(){return[]}},alucod:{type:String},nomcomp:{type:String},nemo:{type:String}},mixins:[dn],components:{QCardSection:H.A,QTime:Vo.A,sieModal:pt.A,QSelect:X.A,QInput:$.A,QDate:mt.A,QCheckbox:vt.A,QPopupProxy:ft.A,QForm:dt.A,QRadio:Po.A},data:function(){return{sieInfo:(0,J["default"])(),rows:[],buttons:[],accion:"",url:"",openModalPdf:!1}},methods:{getUrl:function(e){var t={formato:"pdf",case:"derivacion",repcod:"derivacion",id_derivacion:e.ID_DERIVACION,ano:this.sieInfo.ano,alucod:e.ALUCOD,tipcod:this.sieInfo.tipcod,id_persona:e.ID_PERSONA};this.url="".concat(this.sieInfo.url,"/webservice/reportes/reporte/params?sie-token=").concat(this.sieInfo.token,"&case=").concat(t.case,"\n      &formato=").concat(t.formato,"&id_derivacion=").concat(t.id_derivacion,"&ano=").concat(t.ano,"&alucod=").concat(t.alucod,"&repcod=").concat(t.repcod,"&tipcod=").concat(t.tipcod,"&id_persona=").concat(t.id_persona),this.openModalPdf=!0}},created:function(){return M()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()},watch:{dataDerivacion:{immediate:!0,deep:!0,handler:function(e){this.rows=e}}}};const mn=(0,Me.A)(fn,[["render",un]]);var pn=mn,vn={class:"academico--fichas-psicologicas"};function hn(e,t){var o=(0,i.g2)("sie-table"),n=(0,i.g2)("q-spinner-oval"),a=(0,i.g2)("q-inner-loading"),r=(0,i.g2)("sie-vacio"),s=(0,i.g2)("formly"),l=(0,i.g2)("sie-modal");return(0,i.uX)(),(0,i.CE)("div",vn,[(0,i.bF)(o,{columns:e.fields,data:e.rows,config:e.config,context:this,css:{height:"calc(100vh - 270px)"}},null,8,["columns","data","config"]),(0,i.bF)(l,{modelValue:e.modal,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.modal=t}),title:"Respuestas",ok:!1,cancel:"Cerrar"},{default:(0,i.k6)(function(){return[(0,i.bF)(s,{data:e.historiaUsuario,print:!1},{default:(0,i.k6)(function(){return[(0,i.bF)(a,{visible:e.loading},{default:(0,i.k6)(function(){return[(0,i.bF)(n,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),Object.keys(e.historiaUsuario).length?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(r,{key:0,icon:"do_not_disturb_alt",subtitle:"No existen respuestas."}))]}),_:1},8,["data"])]}),_:1},8,["modelValue"])])}var gn=o(60167),bn=o(80340),In={data:function(){return{config:{FH_INICIO:{component:"date",edit:!1},FH_FIN:{component:"date",edit:!1},ACTION:{component:"button",icon:["remove_red_eye as ver"],permisos:{ver:"> 1"},ver:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,t.getHistoriaUsuario(e);case 1:return o.a(2)}},o)}))()},flat:!0}},fields:[{name:"TITULO",label:"Título de ficha",field:"TITULO",align:"left"},{name:"USUCOD",label:"Código",field:"USUCOD",align:"left"},{name:"USUNOM",label:"Usuario",field:"USUNOM",align:"left"},{name:"FH_INICIO",label:"Fecha Inicio",field:"FH_INICIO",align:"left",sortable:!0},{name:"FH_FIN",label:"Fecha Fin",field:"FH_FIN",align:"left"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},An={components:{QInnerLoading:_.SQ,QSpinnerOval:_.VA,formly:gn.A,SieVacio:bn.A},props:{data:{type:Array,default:function(){return[]}}},data:function(){return{rows:[],modal:!1,historiaUsuario:{},loading:!1}},mixins:[In],methods:{getHistoriaUsuario:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.n){case 0:return t.modal=!0,t.loading=!0,t.historiaUsuario={},o.n=1,t.$http.get("api/HyoFormulario/getPreview",{params:{idHistory:e.ID_HISTORIA_FORMULARIO,idHistoryUser:e.ID_HISTORIA_USUARIO}});case 1:n=o.v,setTimeout(function(){t.historiaUsuario=n}),t.loading=!1;case 2:return o.a(2)}},o)}))()}},watch:{data:{immediate:!0,deep:!0,handler:function(e){this.rows=e}}}};const En=(0,Me.A)(An,[["render",hn]]);var Cn=En,Sn=o(2819),On=o(12143),kn={directives:{sieActive:z.A},components:{QCard:q.A,QCardSection:H.A,QSeparator:Q.A,QSelect:X.A,QInput:$.A,QInnerLoading:_.SQ,QSpinnerOval:_.VA,QOptionGroup:_.EX,QTabs:Y.A,QTab:W.A,QTabPanels:B.A,QTabPanel:j.A,Qsplitter:G.A,QList:Z.A,QItem:ee.A,QItemSection:te.A,sieSelect:oe.A,QImg:ne.A,datosAlumno:ae.A,situacionFinal:ie.A,conductaAnecdotario:qe,incidenciasConductuales:He.A,sieVacio:bn.A,informe:St,OtrosInformes:qt,entrevistas:Uo,seguimiento:rn,derivacion:pn,formularios:Cn,QDate:On.A,QPopupProxy:ft.A,QPage:_.Tu,QToolbar:_.ZV,QBtn:_.Il,QIcon:_.bP},computed:{isLess:function(){return(0,K.isLess)()},imgAlumno:function(){var e="",t=this.dataAlu,o=t.IMG_ALU,n=t.ALUCOD;e=o||n;var a="".concat((0,J["default"])().url,"/fotos/alumnos/").concat(e);return a}},data:function(){return{buttons:[{label:"imprimir",icon:"print",permiso:"> 2",click:this.openImprimir}],sie:(0,J["default"])(),dataIni:[],ngs:[],salones:[],niveles:[],grados:[],secciones:[],estudiantes:[],bloquearNGS:!1,loading:!1,salon:"",nemo:"",nivel:"",grado:"",seccion:"",anio:"",tutor:"",estudiante:"%",nomcomp:"",defaultEstudiantes:{ALUCOD:"",NOMCOMP:"Seleccione"},defaultNiveles:{INSTRUDES:"Seleccione",INSTRUCOD:""},defaultGrados:{GRADODES:"Todos",GRADOCOD:"T"},defaultSecciones:{SECCIONDES:"Todos",SECCIONCOD:"T"},todosNiveles:{INSTRUDES:"Todos",INSTRUCOD:"T"},salonSelected:!1,dataEstudiantes:[],tabs:[],tabSelected:"datosAlumnos",tabDetalle:"No se puede mostrar la opción",dataAlu:{},dataFam:{},dataPadre:[],dataHno:[],dataHist:[],conductaAnecdotario:{},dataInformes:{},dataOtrosInformes:{},dataEntrevistas:[],dataGridSeguimiento:[],dataDerivacion:[],dataFormularios:[],cmboSeg:[],cmboEstadoPsi:[],defaultSexo:"M",infoIncidencias:{ocultaIncidencias:!0,dataIncidencias:[]},reportes:{openModal:!1,tipoReporteModal:"",repcod:"",reportes:[],estudiantes:[],estudiante:"",fecha1:"",fecha2:"",tipoInforme:"0",tipoInformes:[],contenidos:[],mostrarEstudiantes:!1,mostrarFechas:!1,mostrarContenidos:!1,contenido:[],mostrarInformes:!1,mostrarPersonal:!1,dataPersonal:[],profcod:""}}},methods:{openImprimir:function(){var e=this;return M()(T()().m(function t(){var o;return T()().w(function(t){while(1)switch(t.p=t.n){case 0:if(e.estudiante){t.n=1;break}return e.$notify("Debe de seleccionar un alumno","warning"),t.a(2,!1);case 1:return e.reportes.fecha1="",e.reportes.fecha2="",t.p=2,t.n=3,e.$http.get("api/RegistroInformePsicologicoController/getConfigReportes");case 3:o=t.v,e.reportes.reportes=o.reportes,e.reportes.repcod="1",e.reportes.contenidos=o.contenidos,e.reportes.tipoInformes=o.tipoInformes,e.reportes.dataPersonal=o.dataPersonal,e.cambiarReporte(),e.reportes.openModal=!0,t.n=5;break;case 4:t.p=4,t.v,e.reportes.reportes=[],e.reportes.contenidos=[],e.reportes.dataPersonal=[];case 5:return t.a(2)}},t,null,[[2,4]])}))()},verReporte:function(e){var t=this;return M()(T()().m(function o(){var n,a,i,r,s;return T()().w(function(o){while(1)switch(o.n){case 0:if(n=t.estudiantes.filter(function(e){return e.ALUCOD===t.estudiante}),a={repcod:"nuevoReporteAcademico",report_cod:"reporteInformePsicologico",option:t.reportes.repcod,alucod:t.reportes.estudiante,nemo:n[0]?n[0].NEMO:"",fecha1:t.reportes.fecha1.split("/").reverse().join("-"),fecha2:t.reportes.fecha2.split("/").reverse().join("-"),chkAluTodos:t.reportes.estudiante?"":"On",nomPersonal:t.reportes.profcod,princod:t.reportes.tipoInforme,formato:e},t.reportes.contenido.length>0){i=y()(t.reportes.contenido);try{for(i.s();!(r=i.n()).done;)s=r.value,a["chkOpc".concat(s)]=s}catch(e){i.e(e)}finally{i.f()}}(0,Sn.exportFilePhp)(a,"webservice/reportes/reporte");case 1:return o.a(2)}},o)}))()},cambiarReporte:function(){var e=this;return M()(T()().m(function t(){var o;return T()().w(function(t){while(1)switch(t.n){case 0:e.muestraFechaEstudiantes(!1,!1),e.reportes.mostrarContenidos=!1,e.reportes.mostrarInformes=!1,e.reportes.mostrarPersonal=!1,e.reportes.estudiantes=JSON.parse(JSON.stringify(e.estudiantes)),o=e.reportes.repcod,t.n="3"===o?1:"4"===o?2:"5"===o?3:"6"===o?4:"7"===o?5:6;break;case 1:return e.reportes.mostrarPersonal=!0,e.muestraFechaEstudiantes(!1,!0),t.a(3,7);case 2:return e.muestraFechaEstudiantes(!0,!1),e.reportes.mostrarContenidos=!0,t.a(3,7);case 3:return e.muestraFechaEstudiantes(),t.a(3,7);case 4:return e.muestraFechaEstudiantes(),t.a(3,7);case 5:return e.muestraFechaEstudiantes(),e.reportes.mostrarInformes=!0,e.reportes.estudiantes.unshift({ALUCOD:"",NOMCOMP:"- Todos -"}),t.a(3,7);case 6:return e.muestraFechaEstudiantes(!0,!1),t.a(3,7);case 7:return t.a(2)}},t)}))()},muestraFechaEstudiantes:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.reportes.mostrarEstudiantes=e,this.reportes.mostrarFechas=t},openTab:function(e){this.tabSelected=e.ID},selectSalon:function(e){var t=this;return M()(T()().m(function o(){var n,a,i;return T()().w(function(o){while(1)switch(o.n){case 0:!e||["","%"].indexOf(e.value)>-1?(t.salon=e?e.value:"",t.setTodos()):(t.nemo=e.value,n=e.INSTRUCOD,a=e.GRADOCOD,i=e.SECCIONCOD,t.getNiveles(),t.nivel=n,t.selectNivel(n),t.grado=a,t.selectGrado(a),t.seccion=i),t.listarAlumnos();case 1:return o.a(2)}},o)}))()},listarAlumnos:function(){var e=this;return M()(T()().m(function t(){var o,n;return T()().w(function(t){while(1)switch(t.n){case 0:o="".concat(e.nivel).concat(e.grado).concat(e.seccion),n=e.dataEstudiantes.hasOwnProperty(o)?e.dataEstudiantes[o]:[],e.estudiantes=n,e.estudiante="";case 1:return t.a(2)}},t)}))()},generarEstudiantesNgs:function(e){var t={TTT:[]};return e.map(function(e){var o="".concat(e.INSTRUCOD).concat(e.GRADOCOD).concat(e.SECCIONCOD),n="".concat(e.INSTRUCOD).concat(e.GRADOCOD,"T"),a="".concat(e.INSTRUCOD,"TT");t[o]||(t[o]=[]),t[n]||(t[n]=[]),t[a]||(t[a]=[]);var i={ALUCOD:e.ALUCOD,NOMCOMP:e.NOMCOMP,NEMO:e.NEMO,NEMODES:e.NEMODES,PROFENOM:e.TUTOR};t[o].push(JSON.parse(JSON.stringify(i))),t[n].push(JSON.parse(JSON.stringify(i))),t[a].push(JSON.parse(JSON.stringify(i))),t["TTT"].push(JSON.parse(JSON.stringify(i)))}),t},generarNgs:function(e){var t=this;return M()(T()().m(function o(){var n;return T()().w(function(o){while(1)switch(o.n){case 0:n={},e.map(function(e){n[e.INSTRUCOD]||(n[e.INSTRUCOD]={INSTRUCOD:e.INSTRUCOD,INSTRUDES:e.INSTRUDES,GRADOS:{}}),n[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]||(n[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]={GRADOCOD:e.GRADOCOD,GRADODES:e.GRADODES,SECCIONES:{}}),n[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]["SECCIONES"][e.SECCIONCOD]||(n[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]["SECCIONES"][e.SECCIONCOD]={SECCIONCOD:e.SECCIONCOD,SECCIONDES:e.SECCIONDES,NEMO:e.NEMO})}),t.ngs=n,t.getNiveles();case 1:return o.a(2)}},o)}))()},getNiveles:function(){for(var e in this.niveles=[],this.ngs)this.niveles.push(this.ngs[e]);this.niveles.unshift(this.defaultNiveles,this.todosNiveles)},getGrados:function(){for(var e in this.ngs)this.grados.push(this.ngs[e]);this.grados.unshift(this.defaultGrados)},selectNivel:function(e){if(this.grados=[],this.secciones=[],e&&"T"!==e){var t=this.ngs[e].GRADOS?this.ngs[e].GRADOS:[];for(var o in t)this.grados.push(t[o])}this.grados.unshift(this.defaultGrados),this.secciones.unshift(this.defaultSecciones),this.grado="T",this.seccion="T",this.listarAlumnos()},selectGrado:function(e){var t=this.nivel;if(this.secciones=[],e&&"T"!==e){var o=this.ngs[t].GRADOS[e].SECCIONES;for(var n in o)this.secciones.push(o[n])}this.secciones.unshift(this.defaultSecciones),this.seccion="T",this.listarAlumnos()},selectEstudiante:function(e){var t=this;return M()(T()().m(function o(){var n,a,i;return T()().w(function(o){while(1)switch(o.p=o.n){case 0:return t.nomcomp=e.NOMCOMP,o.p=1,n=t.estudiantes.filter(function(e){return e.ALUCOD===t.estudiante}),o.n=2,t.$http.get("api/RegistroInformePsicologicoController/getInformePsicologico",{params:{parametros:{alucod:t.estudiante,nemo:n[0].NEMO}}});case 2:a=o.v,t.dataAlu=a.dataAlu,t.dataFam=a.dataFam,t.dataPadre=a.dataPre,t.dataHno=a.dataHno,t.fotoAlu=a.fotoAlu,t.dataHist=a.dataHist,t.conductaAnecdotario=a.conductaAnecdotario||{},t.dataInformes=a.dataInformes||{},t.dataOtrosInformes=a.dataOtrosInformes||{},t.dataEntrevistas=a.dataEntrevistas||[],t.dataDerivacion=a.dataDerivacion||[],t.dataFormularios=a.dataFormularios||[],i=a.dataSeguimiento||{},t.dataGridSeguimiento=i.dataGridSeguimiento||[],t.infoIncidencias.dataIncidencias=a.dataIncidencias,t.cmboSeg=i.cmboseg||[],t.cmboEstadoPsi=a.cmboEstadoPsi||[],t.dataIni.estadoActualPsi=a.estadoActualPsi||"",t.tabSelected="datosAlumnos",t.tutor=n[0].PROFENOM,t.salon=n[0].NEMODES,t.nemo=n[0].NEMO,o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},setEntrevistas:function(e){this.dataEntrevistas=e},setSeguimiento:function(e){this.dataGridSeguimiento=e},selectSeccion:function(e){var t=this;return M()(T()().m(function o(){var n,a;return T()().w(function(o){while(1)switch(o.n){case 0:n=t.nivel,a=t.grado,"T"!==e&&(t.nemo=t.ngs[n].GRADOS[a].SECCIONES[e].NEMO),t.listarAlumnos();case 1:return o.a(2)}},o)}))()},getImageDefault:function(e){return e="F"===e?"female":"male","".concat(this.sie.webhost,"/images/student_").concat(e,".png")},setEstudiantes:function(){this.estudiantes=[],this.estudiantes.unshift(this.defaultEstudiantes),this.estudiante=""},setTodos:function(){var e=this.nemo?"T":"";this.nivel=e,this.grado=e,this.seccion=e,0===this.grados.length&&this.grados.unshift(this.defaultGrados),0===this.secciones.length&&this.secciones.unshift(this.defaultSecciones),this.listarAlumnos()},setSituacion:function(e){var t=this;return M()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:return t.dataIni.estadoActualPsi=e,o.n=1,t.getDataHist();case 1:return o.a(2)}},o)}))()},getDataHist:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getDataHist",{params:{parametros:{alucod:e.estudiante}}});case 1:e.dataHist=t.v,t.n=3;break;case 2:t.p=2,t.v,e.dataHist=[];case 3:return t.a(2)}},t,null,[[0,2]])}))()}},created:function(){var e=this;return M()(T()().m(function t(){return T()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/RegistroInformePsicologicoController/getConfigInformePsicologico");case 1:return e.dataIni=t.v,e.salones=e.dataIni.dataSalones,e.tabs=e.dataIni.tab,e.dataIni.usaSalonTodos?(e.salones.unshift({label:"Todos",value:"%"}),e.salones.unshift({label:"- Seleccione salón -",value:""})):e.bloquearNGS=!0,e.generarNgs(e.dataIni.infoSalones),t.n=2,e.generarEstudiantesNgs(e.dataIni.dataAlumnos);case 2:e.dataEstudiantes=t.v,e.selectSalon();case 3:return t.a(2)}},t)}))()}};const wn=(0,Me.A)(kn,[["render",R]]);var Dn=wn}}]);