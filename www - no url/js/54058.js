"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[54058],{54058:function(e,n,t){t.r(n),t.d(n,{default:function(){return ge}});var o=t(8445),i=t.n(o),a=t(61758),r=t(58790),l=t(29104),u={class:"intranet--planificacion col column q-pa-sm"},c={class:"row"},s={class:"col column"},d={class:"q-pa-md"},f={class:"row q-col-gutter-sm"},b={class:"col-12"},v={class:"col-12"},m={class:"col-12"},p={class:"col-12"},h={class:"col-12"},k={class:"row"},_={class:"col q-px-sm q-pt-md"},O={class:"row"},g={class:"col q-px-sm"},C={class:"row"},A={class:"col q-px-sm q-pt-md"},F={class:"row q-pt-md-xs"},P={class:"col q-px-sm"},I={class:"row"},N={class:"col"},D={key:1,class:"column",style:{height:"60vh"}},E={class:"column col items-center justify-center"};function y(e,n){var t=(0,a.g2)("header-btn"),o=(0,a.g2)("sie-salones"),y=(0,a.g2)("q-item-label"),$=(0,a.g2)("q-chip"),T=(0,a.g2)("q-item-section"),L=(0,a.g2)("q-item"),S=(0,a.g2)("q-list"),U=(0,a.g2)("q-popover"),q=(0,a.g2)("q-btn"),j=(0,a.g2)("q-separator"),V=(0,a.g2)("q-scroll-area"),R=(0,a.g2)("sie-vacio"),Q=(0,a.g2)("q-card-section"),x=(0,a.g2)("q-card"),w=(0,a.g2)("q-toolbar"),W=(0,a.g2)("q-toolbar-title"),X=(0,a.g2)("q-item-side"),M=(0,a.g2)("q-item-main"),H=(0,a.g2)("q-tooltip"),B=(0,a.g2)("q-icon"),G=(0,a.g2)("q-item-tile"),z=(0,a.g2)("sie-modal"),J=(0,a.g2)("q-input"),K=(0,a.g2)("q-field"),Y=(0,a.g2)("q-toggle"),Z=(0,a.g2)("sie-upload"),ee=(0,a.g2)("q-avatar"),ne=(0,a.g2)("q-select"),te=(0,a.g2)("q-input1"),oe=(0,a.g2)("q-page"),ie=(0,a.gN)("close-overlay");return(0,a.uX)(),(0,a.Wv)(oe,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",u,[(0,a.bF)(x,{class:"col column",dense:"",flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{name:"Planificación"}),(0,a.bF)(Q,{class:"col column q-gutter-sm"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",c,[(0,a.bF)(o,{modelValue:e.nemo,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.nemo=n}),onSeleccionar:e.loadNemo,campos:["NEMO","NEMODES","INSTRUCOD","GRADOCOD"],todos:!1,nuevo:""},null,8,["modelValue","onSeleccionar"])]),(0,a.Lk)("div",s,[e.list&&e.list.length?((0,a.uX)(),(0,a.Wv)(V,{key:0,class:"col q-ba rounded-borders"},{default:(0,a.k6)(function(){return[(0,a.bF)(S,{class:"no-padding no-border",bordered:""},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.list,function(t,o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(L,{clickable:"",dense:"",onClick:function(n){return e.openModal(t)}},{default:(0,a.k6)(function(){return[(0,a.bF)(T,null,{default:(0,a.k6)(function(){return[t.title?((0,a.uX)(),(0,a.Wv)(y,{key:0,class:"text-primary"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(t.title),1)]}),_:2},1024)):(0,a.Q3)("v-if",!0),t.label?((0,a.uX)(),(0,a.Wv)(y,{key:1},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(t.label),1)]}),_:2},1024)):(0,a.Q3)("v-if",!0),t.sublabel?((0,a.uX)(),(0,a.Wv)(y,{key:2,caption:""},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(t.sublabel),1)]}),_:2},1024)):(0,a.Q3)("v-if",!0),(0,a.bF)(y,null,{default:(0,a.k6)(function(){return[(0,a.bF)($,{color:"secondary",dense:"","text-color":"white",size:"13px"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(t.counter),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024),e.tienePermiso||3===e.sie.ruta.nivel&&t.usuarioc?((0,a.uX)(),(0,a.Wv)(T,{key:0,side:""},{default:(0,a.k6)(function(){return[(0,a.bF)(q,{dense:"",flat:"",round:"",icon:"more_vert",onClick:n[1]||(n[1]=(0,l.D$)(function(){},["stop"]))},{default:(0,a.k6)(function(){return[(0,a.bF)(U,null,{default:(0,a.k6)(function(){return[(0,a.bF)(S,{class:"no-padding",dense:""},{default:(0,a.k6)(function(){return[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{onClick:function(n){return e.openForm(0,t,"N",o,"folder")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(T,null,{default:(0,a.k6)(function(){return i()(n[16]||(n[16]=[(0,a.eW)("Crear carpeta",-1)]))}),_:1})]}),_:1},8,["onClick"])),[[ie]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{onClick:function(n){return e.openForm(0,t,"N",o,"file_text")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(T,null,{default:(0,a.k6)(function(){return i()(n[17]||(n[17]=[(0,a.eW)("Subir archivo",-1)]))}),_:1})]}),_:1},8,["onClick"])),[[ie]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,a.Q3)("v-if",!0)]}),_:2},1032,["onClick"]),(0,a.bF)(j)],64)}),256))]}),_:1})]}),_:1})):((0,a.uX)(),(0,a.Wv)(R,{key:1,class:"col",subtitle:"Seleccione un aula para empezar",icon:"person"}))])]}),_:1})]}),_:1})]),(0,a.bF)(z,{class:"silabus",modelValue:e.modal,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modal=n}),footer:!1,ok:!1,ref:"modal",header:"folder"!==e.planificacion.icon,loading:e.loading},{header:(0,a.k6)(function(){return["folder"===e.planificacion.icon?((0,a.uX)(),(0,a.Wv)(w,{key:0},{default:(0,a.k6)(function(){return[(0,a.bF)(q,{flat:"",round:"",dense:"",icon:"arrow_back",onClick:n[2]||(n[2]=function(n){return e.getPlanificacionParent()})})]}),_:1})):(0,a.Q3)("v-if",!0),(0,a.bF)(w,null,{default:(0,a.k6)(function(){return[(0,a.bF)(W,{class:"q-mb-sm"},{subtitle:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.planificacion.subtitle,function(e,n){return(0,a.uX)(),(0,a.CE)("div",{key:n},(0,r.v_)(e),1)}),128))]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",null,(0,r.v_)(e.planificacion.title),1)]}),_:1})]}),_:1})]}),default:(0,a.k6)(function(){return[(0,a.bF)(S,{link:"","no-border":""},{default:(0,a.k6)(function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.planificacion.list,function(t,o){return(0,a.uX)(),(0,a.Wv)(L,{key:o},{default:(0,a.k6)(function(){return[(0,a.bF)(X,{icon:t.icon,color:t.color,inverted:"",onClick:function(n){return e.getPlanificacionChildren(t.id,t)}},null,8,["icon","color","onClick"]),(0,a.bF)(M,{label:t.title,onClick:function(n){return e.getPlanificacionChildren(t.id,t)},sublabel:e.date(t.fh_registro,"DD/MM/YYYY HH:mm:ss")},null,8,["label","onClick","sublabel"]),t.nemo?((0,a.uX)(),(0,a.Wv)(X,{key:0},{default:(0,a.k6)(function(){return[(0,a.bF)(B,{class:"cursor-pointer",name:"university",size:"21px"},{default:(0,a.k6)(function(){return[(0,a.bF)(H,null,{default:(0,a.k6)(function(){return i()(n[18]||(n[18]=[(0,a.eW)("Por Sección",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0),t.count_obs?((0,a.uX)(),(0,a.Wv)(X,{key:1},{default:(0,a.k6)(function(){return[(0,a.bF)(B,{class:"cursor-pointer",name:"comment",size:"23px",style:(0,r.Tr)({color:t.color_obs})},{default:(0,a.k6)(function(){return[(0,a.bF)(H,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(t.tipo),1)]}),_:2},1024)]}),_:2},1032,["style"])]}),_:2},1024)):(0,a.Q3)("v-if",!0),"folder"===t.icon?((0,a.uX)(),(0,a.Wv)(X,{key:2},{default:(0,a.k6)(function(){return[(0,a.bF)(G,{class:"cursor-pointer",icon:"more_vert"},{default:(0,a.k6)(function(){return[(0,a.bF)(U,null,{default:(0,a.k6)(function(){return[(0,a.bF)(S,{class:"no-border",link:""},{default:(0,a.k6)(function(){return[e.sie.ruta.nivel>=2?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:0,onClick:function(n){return e.openForm(1,t,"E",o,"folder")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:e.$t("botones.editar")},null,8,["label"])]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0),3===e.sie.ruta.nivel?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:1,onClick:function(n){return e.eliminar(t,n,"folder")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:e.$t("botones.eliminar")},null,8,["label"])]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0),e.hasCreacionObservacion?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:2,onClick:function(n){return e.crearObservaciones(t,"draft")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:"Crear observaciones"})]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{onClick:function(n){return e.verObservaciones(t,"folder")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:"Ver observaciones"})]}),_:1},8,["onClick"])),[[ie]]),e.sie.ruta.nivel>=2?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:3,onClick:function(n){return e.openForm(1,t,"N",o,"folder")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:e.$t("crearCarpeta")},null,8,["label"])]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0),e.sie.ruta.nivel>=2?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:4,onClick:function(n){return e.openForm(1,t,"N",o,"file_text")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:e.$t("subirArchivo")},null,8,["label"])]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,a.Q3)("v-if",!0),"file_text"===t.icon?((0,a.uX)(),(0,a.Wv)(X,{key:3},{default:(0,a.k6)(function(){return[(0,a.bF)(G,{class:"cursor-pointer",icon:"more_vert"},{default:(0,a.k6)(function(){return[(0,a.bF)(U,null,{default:(0,a.k6)(function(){return[(0,a.bF)(S,{class:"no-border",link:""},{default:(0,a.k6)(function(){return[e.sie.ruta.nivel>=2?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:0,onClick:function(n){return e.openForm(1,t,"E",o,"file_text")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:e.$t("botones.editar")},null,8,["label"])]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0),3===e.sie.ruta.nivel?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:1,onClick:function(n){return e.eliminar(t,n,"file_text")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:e.$t("botones.eliminar")},null,8,["label"])]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0),e.hasCreacionObservacion?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{key:2,onClick:function(n){return e.crearObservaciones(t,"draft")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:"Crear observaciones"})]}),_:1},8,["onClick"])),[[ie]]):(0,a.Q3)("v-if",!0),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{onClick:function(n){return e.verObservaciones(t,"file_text")},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:"Ver observaciones"})]}),_:1},8,["onClick"])),[[ie]]),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L,{onClick:function(n){return e.donwloadArchivo(t)},clickable:""},{default:(0,a.k6)(function(){return[(0,a.bF)(M,{label:e.$t("descargarArchivo")},null,8,["label"])]}),_:1},8,["onClick"])),[[ie]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,a.Q3)("v-if",!0)]}),_:2},1024)}),128))]}),_:1})]}),_:1},8,["modelValue","header","loading"]),(0,a.bF)(z,{class:"modal-carpeta",modelValue:e.form,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.form=n}),footer:!0,ok:e.$t("botones.guardar"),header:!0,title:e.titulo_form,onSubmit:e.save},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",d,[(0,a.Lk)("div",f,[(0,a.Lk)("div",b,[(0,a.bF)(K,{error:e.v$.data_form.titulo.$error,"error-label":"Este campo es requerido"},{default:(0,a.k6)(function(){return[(0,a.bF)(J,{class:"q-if-outlined",modelValue:e.data_form.titulo,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.data_form.titulo=n}),"float-label":e.$t("titulo"),onBlur:e.v$.data_form.titulo.$touch},null,8,["modelValue","float-label","onBlur"])]}),_:1},8,["error"])]),(0,a.Lk)("div",v,[(0,a.bF)(K,null,{default:(0,a.k6)(function(){return[(0,a.bF)(J,{class:"q-if-outlined",modelValue:e.data_form.anotacion,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.data_form.anotacion=n}),"float-label":e.$t("anotacion")},null,8,["modelValue","float-label"])]}),_:1})]),(0,a.Lk)("div",m,[(0,a.bF)(K,{error:e.v$.data_form.orden.$error,"error-label":"Este campo es requerido"},{default:(0,a.k6)(function(){return[(0,a.bF)(J,{class:"q-if-outlined",type:"number",modelValue:e.data_form.orden,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.data_form.orden=n}),"float-label":e.$t("orden"),onBlur:e.v$.data_form.orden.$touch},null,8,["modelValue","float-label","onBlur"])]}),_:1},8,["error"])]),(0,a.Lk)("div",p,[(0,a.bF)(Y,{modelValue:e.xSeccion,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.xSeccion=n}),"true-value":1,"false-value":0,label:"Por sección"},null,8,["modelValue"])]),(0,a.Lk)("div",h,["file_text"===e.tipo&&"N"===e.accion?((0,a.uX)(),(0,a.Wv)(Z,{key:0,onUpload:e.addFile,icon:"file",title:e.$t("subirArchivos"),allow:["pdf","doc","docx","xls","xlsx"]},null,8,["onUpload","title"])):(0,a.Q3)("v-if",!0)])])])]}),_:1},8,["modelValue","ok","title","onSubmit"]),(0,a.bF)(z,{class:"modal-carpeta",modelValue:e.newObservacion,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.newObservacion=n}),footer:!0,ok:e.$t("botones.guardar"),header:!0,title:"Crear Observación",onSubmit:e.grabar},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",k,[(0,a.Lk)("div",_,[(0,a.bF)(ne,{class:"q-if-outlined",modelValue:e.obs,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.obs=n}),options:e.arrEstados,label:"Estado"},{"selected-item":(0,a.k6)(function(e){return[(0,a.Lk)("div",null,(0,r.v_)(e.opt.label),1)]}),option:(0,a.k6)(function(e){return[(0,a.bF)(L,(0,a.v6)(e.itemProps,(0,a.Tb)(e.itemEvents||{})),{default:(0,a.k6)(function(){return[(0,a.bF)(T,null,{default:(0,a.k6)(function(){return[(0,a.eW)((0,r.v_)(e.opt.label),1)]}),_:2},1024),e.opt.color?((0,a.uX)(),(0,a.Wv)(T,{key:0,avatar:"",side:""},{default:(0,a.k6)(function(){return[(0,a.bF)(ee,{icon:"comment","text-color":"white",size:"md",style:(0,r.Tr)({"background-color":e.opt.color})},null,8,["style"])]}),_:2},1024)):(0,a.Q3)("v-if",!0)]}),_:2},1040)]}),_:1},8,["modelValue","options"])])]),(0,a.Lk)("div",O,[(0,a.Lk)("div",g,[(0,a.bF)(K,{count:300},{default:(0,a.k6)(function(){return[(0,a.bF)(te,{class:"q-if-outlined",type:"textarea",modelValue:e.descripcion,"onUpdate:modelValue":n[10]||(n[10]=function(n){return e.descripcion=n}),"max-height":100,"float-label":"Descripción"},null,8,["modelValue"])]}),_:1})])])]}),_:1},8,["modelValue","ok","onSubmit"]),(0,a.bF)(z,{class:"modal-carpeta",modelValue:e.observaciones,"onUpdate:modelValue":n[15]||(n[15]=function(n){return e.observaciones=n}),footer:!1,header:!0,title:e.titulo_obs},{default:(0,a.k6)(function(){return[e.objObservaciones.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("div",C,[(0,a.Lk)("div",A,[(0,a.bF)(ne,{type:"outlined",modelValue:e.obs_data,"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.obs_data=n}),options:e.objObservaciones,label:"Observación",onInput:e.changeObservacion},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",F,[(0,a.Lk)("div",P,[(0,a.bF)(J,{class:"q-if-outlined",modelValue:e.observacion.titulo,"onUpdate:modelValue":n[13]||(n[13]=function(n){return e.observacion.titulo=n}),disable:"","float-label":"Estado"},null,8,["modelValue"])]),(0,a.bF)(ee,{class:"q-ma-md-sm",icon:"comment","text-color":"white",size:"md",style:(0,r.Tr)({"background-color":e.observacion.color})},null,8,["style"])]),(0,a.Lk)("div",I,[(0,a.Lk)("div",N,[(0,a.bF)(K,{count:300},{default:(0,a.k6)(function(){return[(0,a.bF)(te,{class:"q-if-outlined",type:"textarea",modelValue:e.observacion.descripcion,"onUpdate:modelValue":n[14]||(n[14]=function(n){return e.observacion.descripcion=n}),"max-height":100,"float-label":"Descripción:",disable:""},null,8,["modelValue"])]}),_:1})])])],64)):((0,a.uX)(),(0,a.CE)("div",D,[(0,a.Lk)("div",E,[(0,a.bF)(R,{class:"col",icon:"phonelink_erase"})])]))]}),_:1},8,["modelValue","title"])]}),_:1})}var $=t(76080),T=t.n($),L=t(99550),S=t.n(L),U=t(45254),q=t.n(U),j=t(83972),V=t(6123),R=t(88275),Q=t(30640),x=t(80340),w=t(93616),W=t(57668),X=t(59089),M=t(62086),H=t.n(M),B=t(57008),G=t.n(B),z=(t(56285),t(80660)),J=t(13813),K=["id"],Y={getFile:function(e){return e.ESCARPETA||1===e.ID_TIPO_ADJUNTO?{icon:"folder",color:"amber"}:{icon:"file_text",color:"blue"}},getTextCounter:function(e){return e>1?"".concat(e," elementos"):1===e?"1 elemento":"0 elementos"},getObjSilabus:function(e){return G()({id:e.ID,title:e.TITULO,orden:e.ORDEN,anotacion:e.ANOTACION,count_obs:e.OBSERVACIONES>0,color_obs:e.COLOR,tipo:e.TIPO,id_padre:e.IDPADRE?e.IDPADRE:e.ID_PLAN_ADJUNTO_REF,adjunto:e.ADJUNTO,fh_registro:e.FH_REGISTRO,nemo:e.NEMO},this.getFile(e))},getSilabus:function(e){var n=this;return(0,J["default"])(e,function(e){return n.getObjSilabus(e)})},getObjPlanificacionParent:function(e,n){var t=this.getSilabus(e.CHILDREN);return n?{title:e.DESCRIPCION,subtitle:[e.NOMCOMP,this.getTextCounter(t.length)],list:t}:{title:e.title,subtitle:[e.sublabel,this.getTextCounter(t.length)],list:t}},getContenido:function(){var e=q()(T()().m(function e(n){var t,o,i;return T()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,z.$http.get("api/HyoPlanificacion/getPlanAdjunto",{params:n});case 1:return t=e.v,o=t.json,e.n=2,z.$http.get("api/HyoPlanificacion/getPlanAdjuntoById",{params:n});case 2:return i=e.v,e.a(2,G()(G()({},this.getObjSilabus(i.json)),{},{list:this.getSilabus(o)}))}},e,this)}));function n(n){return e.apply(this,arguments)}return n}(),getCursoGrupo:function(){var e=q()(T()().m(function e(n){var t,o,i,a,r=this;return T()().w(function(e){while(1)switch(e.n){case 0:return t=n.id,o=H()(n,K),e.n=1,z.$http.get("api/HyoPlanificacion/getCursoGrupo",{params:G()({id:t},o)});case 1:if(i=e.v,a=i.json,!t){e.n=2;break}return e.a(2,this.getObjPlanificacionParent(a.resultado[0],t));case 2:if(!Array.isArray(a.resultado)||!a.resultado.length){e.n=3;break}return e.a(2,[(0,J["default"])(a.resultado,function(e){var n={title:e.CURSONOM,sublabel:e.NOMCOMP,counter:e.SUB?r.getTextCounter(e.SUB.length):"0 elementos",nemo:e.NEMO,id_plan:e.ID_PLAN,instrucod:e.INSTRUCOD,cursocod:e.CURSOCOD,gradocod:e.GRADOCOD,grupocod:e.GRUPOCOD,CHILDREN:e.SUB,usuarioc:e.USUARIOC};return"001"!==e.GRUPOCOD&&(n.label=e.GRUPODES),n}),a.hasCreacionObservacion]);case 3:return e.a(2,[])}},e,this)}));function n(n){return e.apply(this,arguments)}return n}(),getDefaultData:function(){return{titulo:"",anotacion:"",orden:""}},saveCarpeta:function(e,n,t,o,i,a){if("E"===t){var r={info:{ANOTACION:o.anotacion,IDPLAN:e.id_padre,IDPLANADJUNTO:e.id,ORDEN:o.orden,TITULO:o.titulo},isEditar:!0};return a&&(r.info.NEMO=i),i&&(r.nemo=i),z.$http.post("api/HyoPlanificacion/grabarActualizar",r).then(function(e){var n=e.json;return n}).catch(function(e){return e})}if(0!==n||e.id_padre){var l={info:{ANOTACION:o.anotacion,IDPLAN:e.id_padre,IDPLANADJUNTO:e.id,ORDEN:o.orden,TITULO:o.titulo},isEditar:!1};return a&&(l.info.NEMO=i),i&&(l.nemo=i),z.$http.post("api/HyoPlanificacion/grabarActualizar",l).then(function(e){var n=e.json;return n}).catch(function(e){return e})}var u={info:{ANOTACION:o.anotacion,CURSOCOD:e.cursocod,GRADOCOD:e.gradocod,GRUPOCOD:e.grupocod,IDPLAN:e.id_plan,INSTRUCOD:e.instrucod,ORDEN:o.orden,TITULO:o.titulo},isEditar:!1};return a&&(u.info.NEMO=i),i&&(u.nemo=i),z.$http.post("api/HyoPlanificacion/grabarActualizar",u).then(function(e){var n=e.json;return n}).catch(function(e){return e})},delete:function(e){return z.$http.delete("api/HyoPlanificacion/archivo/"+e.id).then(function(e){var n=e.json;return n}).catch(function(e){return e})},saveArchivo:function(e,n,t,o,i,a,r){if("E"===t){var l={info:{ANOTACION:o.anotacion,IDPLAN:e.id_padre,IDPLANADJUNTO:e.id,ORDEN:o.orden,TITULO:o.titulo},isEditar:!0};return r&&(l.info.NEMO=i),i&&(l.nemo=i),z.$http.post("api/HyoPlanificacion/grabarActualizar",l).then(function(e){var n=e.json;return n})}if(0!==n||e.id_padre){var u={info:{ANOTACION:o.anotacion,IDPLAN:e.id_padre,IDPLANADJUNTO:e.id,ORDEN:o.orden,TITULO:o.titulo,URL:a.name},isEditar:!1};return r&&(u.info.NEMO=i),i&&(u.nemo=i),z.$http.post("api/HyoPlanificacion/grabarActualizar",u).then(function(e){var n=e.json;return n})}var c={info:{ANOTACION:o.anotacion,CURSOCOD:e.cursocod,GRADOCOD:e.gradocod,GRUPOCOD:e.grupocod,IDPLAN:e.id_plan,INSTRUCOD:e.instrucod,ORDEN:o.orden,TITULO:o.titulo,URL:a.name},isEditar:!1};return r&&(c.info.NEMO=i),i&&(c.nemo=i),z.$http.post("api/HyoPlanificacion/grabarActualizar",c).then(function(e){var n=e.json;return n}).catch(function(e){return e})},getObservaciones:function(e){return z.$http.get("api/HyoPlanificacion/getListaObservaciones",{params:{idPlanAdjunto:e}}).then(function(e){var n=e.json;return(0,J["default"])(n,function(e){var n={label:e.INDEX,titulo:e.TIPO,descripcion:e.DESCRIPCION,value:e.ID_OBSERVACION,color:e.COLOR};return n})})},getObservacionesTipo:function(){return z.$http.get("api/HyoPlanificacion/getObservacionesTipo").then(function(e){var n=e.json;return(0,J["default"])(n,function(e){var n={label:e.TIPO,value:e.ID_TIPO_OBSERVACION,color:e.COLOR};return n})})},grabarObservacion:function(e,n,t){var o={idPlanAdjunto:e,observacion:n,tipo:t};return z.$http.post("api/HyoPlanificacion/grabarObservacion",o).then(function(e){var n=e.json;return n})}},Z=t(88567),ee=t(95718),ne=t(74656),te=t(16648),oe=t(9736),ie=t(65673),ae=t(82327),re=t(88865),le=t(66824),ue=t(53380),ce=t(12205),se=t(95051),de=t(55973),fe=t(82640),be=t(982),ve=t(33950),me=t(33001),pe=t(78131),he=t(18105),ke={setup:function(){var e=(0,j.fG)();return{v$:e}},components:{SieSalones:R.Ay,SieModal:Q.A,SieVacio:x.A,SieSelect:w.A,SieUpload:X.A,QCard:Z.A,QCardSection:ee.A,QAvatar:ne.A,QChip:se.A,QToggle:de.A,QSelect:te.A,QInput1:oe.A,QList:ie.A,QItem:ae.A,QItemSection:re.A,QItemLabel:le.A,QSeparator:ue.A,QScrollArea:ce.A,QPage:V.Tu,QBtn:V.Il,QPopover:V.VM,QToolbar:V.ZV,QToolbarTitle:V.r_,QItemSide:V.n1,QItemMain:V.mF,QIcon:V.bP,QTooltip:V.nC,QItemTile:V.lp,QField:V.Om,QInput:V.ie},data:function(){return{sie:(0,W["default"])(),tienePermiso:"T"===(0,W["default"])().acceso_salon&&3===(0,W["default"])().ruta.nivel,planificacion:{},list:[],tempItem:{},modal:!1,loading:!1,nemo:null,form:!1,titulo_form:"",accion:"",datos_contenido:{},nivel:0,data_form:Y.getDefaultData(),tipo:"",objImg:"",observaciones:!1,descripcion:"",newObservacion:!1,arrEstados:[],idPlanAdjunto:null,objObservaciones:[],titulo_obs:"",hasCreacionObservacion:!1,obs:"",obs_data:"",xSeccion:0}},computed:{observacion:function(){var e=this.objObservaciones;return e=(0,me.filterArray)(this.obs_data,{field:"value",list:e}),e[0]}},methods:{date:he.Ay,loadNemo:function(){var e=q()(T()().m(function e(n){var t,o,i,a,r;return T()().w(function(e){while(1)switch(e.n){case 0:return t=n.NEMO,e.n=1,Y.getCursoGrupo({nemo:t});case 1:o=e.v,i=S()(o,2),a=i[0],r=i[1],this.list=a,this.hasCreacionObservacion=r;case 2:return e.a(2)}},e,this)}));function n(n){return e.apply(this,arguments)}return n}(),openModal:function(e){e.CHILDREN&&e.CHILDREN.length>0&&(this.modal=!0,this.tempItem=e,this.planificacion=Y.getObjPlanificacionParent(e))},getPlanificacionId:function(){var e=q()(T()().m(function e(n){var t,o,i,a,r=this;return T()().w(function(e){while(1)switch(e.n){case 0:if(t=n.id,o=n.isParent,i=n.isBack,!this.$refs.modal.transitionLoading){e.n=1;break}return e.a(2,void 0);case 1:if(this.loading,this.loading=!0,!o){e.n=2;break}a=Y.getObjPlanificacionParent(this.tempItem),e.n=4;break;case 2:return e.n=3,Y.getContenido({idPadre:t,nemo:this.nemo});case 3:a=e.v;case 4:this.loading=!1,setTimeout(function(){r.planificacion=a,i?r.$refs.modal.back():r.$refs.modal.next()});case 5:return e.a(2)}},e,this)}));function n(n){return e.apply(this,arguments)}return n}(),getPlanificacionChildren:function(e,n){"folder"===n.icon?this.getPlanificacionId({id:e}):this.donwloadArchivo(n)},getPlanificacionParent:function(){var e=this.planificacion;null===e.id_padre?this.getPlanificacionId({id:e.id_padre,isParent:!0,isBack:!0}):this.getPlanificacionId({id:e.id_padre,isParent:!1,isBack:!0})},openForm:function(e,n,t,o,i){this.v$.data_form.$reset(),this.form=!0,this.titulo_form="E"===t?"folder"===i?this.$t("editarCarpeta"):this.$t("editarArchivo"):"folder"===i?this.$t("crearCarpeta"):this.$t("subirArchivo"),this.accion=t,this.datos_contenido=n,this.nivel=e,this.tipo=i,this.data_form="E"===t?{titulo:n.title,anotacion:n.anotacion,orden:n.orden}:Y.getDefaultData(),this.xSeccion="E"===t&&n.nemo?1:0},save:function(){var e=this,n=this.tipo;this.v$.data_form.$touch(),this.v$.data_form.$error||("folder"===n?Y.saveCarpeta(this.datos_contenido,this.nivel,this.accion,this.data_form,this.nemo,this.xSeccion).then(function(n){0===n[0]||n.dato&&n.dato.IDPLAN?((0,be["default"])(e.$t("botones.listo"),"success"),e.form=!1,e.modal=!1,e.loadNemo({NEMO:e.nemo})):(0,be["default"])(e.$t("mensajes.e0006"),"error")}).catch(function(n){(0,be["default"])(e.$t("mensajes.e0006"),"error")}):""!==this.objImg||"E"===this.accion?Y.saveArchivo(this.datos_contenido,this.nivel,this.accion,this.data_form,this.nemo,this.objImg,this.xSeccion).then(function(n){0===n[0]||n.dato&&n.dato.IDPLAN?((0,be["default"])(e.$t("botones.listo"),"success"),e.form=!1,e.modal=!1,e.loadNemo({NEMO:e.nemo})):(0,be["default"])(e.$t("mensajes.e0006"),"error")}):(0,be["default"])(this.$t("mensajes.e0017"),"warning"))},eliminar:function(e,n,t){var o=this;n.stopPropagation(),this.$q.dialog({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010"),ok:this.$t("botones.si"),cancel:this.$t("botones.no"),preventClose:!0}).onOk(function(){Y.delete(e).then(function(e){(0,be["default"])(o.$t("botones.listo"),"success"),o.modal=!1,o.loadNemo({NEMO:o.nemo})}).catch(function(e){(0,be["default"])(o.$t("mensajes.m0006.mal"),"error")})}).onCancel(function(e){})},addFile:function(e){var n=this;(0,ve.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){n.objImg=e}).catch(function(){})},donwloadArchivo:function(e){e.adjunto&&""!==e.adjunto&&(0,pe["default"])((0,W["default"])().api+"/HyoPlanificacion/archivo/"+e.id+"?access_token="+this.sie.token,e.title+e.adjunto)},grabar:function(){var e=this;Y.grabarObservacion(this.idPlanAdjunto,this.descripcion,this.obs).then(function(){e.newObservacion=!1,(0,be["default"])("Se guardo correctamente","success")}).catch(function(){(0,be["default"])(e.$t("mensajes.e0006"),"error")})},crearObservaciones:function(e){this.obs="",this.descripcion="",this.idPlanAdjunto=e.id,this.newObservacion=!0},verObservaciones:function(e,n){var t=this;this.observaciones=!0,this.titulo_obs="Observaciones: "+e.title,Y.getObservaciones(e.id).then(function(e){t.objObservaciones=e,t.objObservaciones.length>0&&(t.obs=e[0],t.obs_data=e[0].value)})}},validations:{data_form:{titulo:{required:fe.mw},orden:{required:fe.mw,integer:fe.nd}}},created:function(){var e=this;Y.getObservacionesTipo().then(function(n){e.arrEstados=n})}},_e=t(12807);const Oe=(0,_e.A)(ke,[["render",y]]);var ge=Oe}}]);