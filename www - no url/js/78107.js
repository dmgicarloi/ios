"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[78107],{78107:function(e,t,o){o.r(t),o.d(t,{default:function(){return U}});o(12982),o(3110),o(71225),o(50310),o(5962),o(83190);var n=o(61758),l=o(58790),r={class:"row"},a={class:"col-xs-12 col-md-6 q-pl-sm q-pr-md-xs q-pr-xs-sm q-py-md"},i={class:"col-xs-12 col-md-6 q-pl-md-xs q-pl-xs-sm q-pr-sm q-py-md"},u={class:"col"},d={class:"text-bold q-body-1"},c={key:0},s={class:"row q-pa-sm"},m={key:0,class:"col-12"},f={class:"col-12"},p={class:"col-12"};function b(e,t){var o=(0,n.g2)("q-tooltip"),b=(0,n.g2)("q-btn"),D=(0,n.g2)("q-card"),v=(0,n.g2)("q-search"),I=(0,n.g2)("sie-select"),h=(0,n.g2)("q-popup-edit"),g=(0,n.g2)("q-td"),N=(0,n.g2)("q-input"),O=(0,n.g2)("q-field"),C=(0,n.g2)("q-toggle"),S=(0,n.g2)("q-icon"),k=(0,n.g2)("q-table"),E=(0,n.g2)("sie-modal"),w=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(w,{class:"bg-white plantilla-comentario"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",r,[(0,n.Lk)("div",a,[(0,n.bF)(D,{class:"row full width items items-center q-px-sm q-py-xs",style:{"min-height":"52px"}},{default:(0,n.k6)(function(){return[t[12]||(t[12]=(0,n.Lk)("div",{class:"col"},[(0,n.Lk)("span",{class:"text-bold q-body-1"},"Categorias")],-1)),(0,n.Lk)("div",null,[(0,n.bF)(b,{onClick:t[0]||(t[0]=function(t){return e.add(null,null,0)}),round:"",color:"secondary",icon:"plus"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("botones.agregar")),1)]}),_:1})]}),_:1}),(0,n.bF)(b,{class:"q-ml-xs",onClick:t[1]||(t[1]=function(t){return e.eliminar(e.cat.selected,1,0)}),round:"",color:"secondary",icon:"delete"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1})])]}),_:1}),(0,n.bF)(k,{data:e.cat.data,columns:e.cat.columns,selection:e.cat.selection,pagination:e.cat.pagination,selected:e.cat.selected,"onUpdate:selected":t[3]||(t[3]=function(t){return e.cat.selected=t}),"row-key":"ID",color:"secondary","visible-columns":["ID","INSTRUCOD","DESCRIPCION","ESTADO","ORDEN","LOAD"],filter:e.cat.filter},{"top-left":(0,n.k6)(function(o){return[(0,n.bF)(v,{class:"q-if-outlined","hide-underline":"",modelValue:e.cat.filter,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.cat.filter=t})},null,8,["modelValue"])]}),"body-cell-INSTRUCOD":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.INSTRUCOD),1),(0,n.bF)(h,{modelValue:t.row.INSTRUCOD,"onUpdate:modelValue":function(e){return t.row.INSTRUCOD=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(I,{type:"outlined",modelValue:t.row.INSTRUCOD,"onUpdate:modelValue":function(e){return t.row.INSTRUCOD=e},options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",onInput:function(o){return e.actualizar("INSTRUCOD",t.row.INSTRUCOD,t.row.ID)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-DESCRIPCION":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.DESCRIPCION),1),(0,n.bF)(h,{modelValue:t.row.DESCRIPCION,"onUpdate:modelValue":function(e){return t.row.DESCRIPCION=e},onSave:function(o){return e.actualizar("DESCRIPCION",t.row.DESCRIPCION,t.row.ID)}},{default:(0,n.k6)(function(){return[(0,n.bF)(O,{count:200},{default:(0,n.k6)(function(){return[(0,n.bF)(N,{class:"q-if-outlined",type:"textarea",modelValue:t.row.DESCRIPCION,"onUpdate:modelValue":function(e){return t.row.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]}),"body-cell-ESTADO":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(C,{modelValue:t.row.ESTADO,"onUpdate:modelValue":function(e){return t.row.ESTADO=e},color:"secondary","true-value":1,"false-value":0,onInput:function(o){return e.actualizar("ESTADO",t.row.ESTADO,t.row.ID)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-ORDEN":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.ORDEN),1),(0,n.bF)(h,{modelValue:t.row.ORDEN,"onUpdate:modelValue":function(e){return t.row.ORDEN=e},onSave:function(o){return e.actualizar("ORDEN",t.row.ORDEN,t.row.ID)}},{default:(0,n.k6)(function(){return[(0,n.bF)(N,{class:"q-if-outlined",type:"number",modelValue:t.row.ORDEN,"onUpdate:modelValue":function(e){return t.row.ORDEN=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]}),"body-cell-LOAD":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(S,{class:"cursor-pointer",name:"comment",size:"20px",color:"primary",onClick:function(o){return e.getLista(t.row.ID,t.row.INSTRUCOD,t.row.DESCRIPCION)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","selection","pagination","selected","filter"])]),(0,n.Lk)("div",i,[(0,n.bF)(D,{class:"row full width items items-center q-px-sm q-py-xs",style:{"min-height":"52px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",u,[(0,n.Lk)("span",d,(0,l.v_)(e.description),1)]),e.idNivel1?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(b,{onClick:t[4]||(t[4]=function(t){return e.add(e.idNivel1,e.form.instrucod,1)}),round:"",color:"secondary",icon:"plus"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("botones.agregar")),1)]}),_:1})]}),_:1}),(0,n.bF)(b,{class:"q-ml-xs",onClick:t[5]||(t[5]=function(t){return e.eliminar(e.comment.selected,null,1)}),round:"",color:"secondary",icon:"delete"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1})])):(0,n.Q3)("v-if",!0)]}),_:1}),(0,n.bF)(k,{data:e.comment.data,columns:e.comment.columns,selection:e.comment.selection,pagination:e.comment.pagination,selected:e.comment.selected,"onUpdate:selected":t[7]||(t[7]=function(t){return e.comment.selected=t}),"row-key":"ID",color:"secondary","visible-columns":["ID_PADRE","DESCRIPCION","ESTADO","ORDEN"],filter:e.comment.filter},{"top-left":(0,n.k6)(function(o){return[(0,n.bF)(v,{class:"q-if-outlined","hide-underline":"",modelValue:e.comment.filter,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.comment.filter=t})},null,8,["modelValue"])]}),"body-cell-DESCRIPCION":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.DESCRIPCION),1),(0,n.bF)(h,{modelValue:t.row.DESCRIPCION,"onUpdate:modelValue":function(e){return t.row.DESCRIPCION=e},onSave:function(o){return e.actualizar("DESCRIPCION",t.row.DESCRIPCION,t.row.ID)}},{default:(0,n.k6)(function(){return[(0,n.bF)(O,{count:200},{default:(0,n.k6)(function(){return[(0,n.bF)(N,{class:"q-if-outlined",type:"textarea",modelValue:t.row.DESCRIPCION,"onUpdate:modelValue":function(e){return t.row.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]}),"body-cell-ESTADO":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(C,{modelValue:t.row.ESTADO,"onUpdate:modelValue":function(e){return t.row.ESTADO=e},color:"secondary","true-value":1,"false-value":0,onInput:function(o){return e.actualizar("ESTADO",t.row.ESTADO,t.row.ID)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-ORDEN":(0,n.k6)(function(t){return[(0,n.bF)(g,{props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.ORDEN),1),(0,n.bF)(h,{modelValue:t.row.ORDEN,"onUpdate:modelValue":function(e){return t.row.ORDEN=e},onSave:function(o){return e.actualizar("ORDEN",t.row.ORDEN,t.row.ID)}},{default:(0,n.k6)(function(){return[(0,n.bF)(N,{class:"q-if-outlined",type:"number",modelValue:t.row.ORDEN,"onUpdate:modelValue":function(e){return t.row.ORDEN=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","selection","pagination","selected","filter"])])]),(0,n.bF)(E,{class:"plantilla-comentario-modal",modelValue:e.modal,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.modal=t}),title:e.tituloPlantillaNiv,ok:e.$t("botones.guardar"),footer:!0,onSubmit:e.grabar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",s,[e.nivel<=0?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.bF)(O,{error:e.v$.form.instrucod.$error,"error-label":e.errorLabel(e.v$.form.instrucod)},{default:(0,n.k6)(function(){return[(0,n.bF)(I,{type:"outlined",modelValue:e.v$.form.instrucod.$model,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.v$.form.instrucod.$model=t}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",f,[(0,n.bF)(O,{error:e.v$.form.descripcion.$anyError,"error-label":e.errorLabel(e.v$.form.instrucod),count:500},{default:(0,n.k6)(function(){return[(0,n.bF)(N,{class:"q-if-outlined",type:"textarea",rows:5,modelValue:e.v$.form.descripcion.$model,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.v$.form.descripcion.$model=t}),"float-label":e.$t("matricula.descripcion")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,n.Lk)("div",p,[(0,n.bF)(O,{error:e.v$.form.orden.$error,"error-label":e.errorLabel(e.v$.form.orden)},{default:(0,n.k6)(function(){return[(0,n.bF)(N,{class:"q-if-outlined",type:"number",modelValue:e.v$.form.orden.$model,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.v$.form.orden.$model=t}),"float-label":e.$t("orden")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","title","ok","onSubmit"])]}),_:1})}var D=o(83972),v=o(6123),I=o(93616),h=o(30640),g=o(6583),N=o(82640),O=o(66469),C=o(982),S=o(13813),k=o(69027),E=o(87911),w=o(80660),V={default:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{id_padre:e,instrucod:t,tipo:"N",descripcion:null,estado:1,orden:null}},getLista:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return w.$http.get("api/HyoPlantillaComentario/getLista",{params:{idpadre:e}})},grabar:function(e){return w.$http.post("api/HyoPlantillaComentario/insertar",e)},actualizar:function(e,t){return w.$http.post("api/HyoPlantillaComentario/actualizar",{data:e,id:t})},eliminar:function(e){return w.$http.delete("api/HyoPlantillaComentario/eliminar",{params:{ids:e}})}},R={setup:function(){var e=(0,D.fG)();return{v$:e}},components:{QTable:v.kH,QTh:v.EJ,QTr:v.qh,QTd:v.Ef,QToggle:v.c5,QPopupEdit:v.GT,sieSelect:I.A,sieModal:h.A,QPage:v.Tu,QCard:v.C$,QBtn:v.Il,QTooltip:v.nC,QSearch:v.Ks,QField:v.Om,QInput:v.ie,QIcon:v.bP},data:function(){return{cat:{data:[],columns:[{name:"ID",label:this.$t("ID"),field:"ID",align:"center",sortable:!0},{name:"INSTRUCOD",label:this.$t("ngs.nivel"),field:"INSTRUCOD",align:"center",sortable:!0},{name:"TIPO",label:this.$t("tipo"),field:"TIPO",align:"center",sortable:!1},{name:"DESCRIPCION",label:this.$t("matricula.descripcion"),field:"DESCRIPCION",align:"left",sortable:!1},{name:"ESTADO",label:this.$t("matricula.estado"),field:"ESTADO",align:"center",sortable:!1},{name:"ORDEN",label:this.$t("orden"),field:"ORDEN",align:"center",sortable:!0},{name:"LOAD",label:"",field:"LOAD",align:"center"}],pagination:{page:1,rowsPerPage:200},filter:"",selection:"multiple",selected:[]},comment:{data:[],columns:[{name:"ID",label:this.$t("ID"),field:"ID"},{name:"ID_PADRE",label:this.$t("admision.padre"),field:"ID_PADRE",align:"center",sortable:!1},{name:"DESCRIPCION",label:this.$t("matricula.descripcion"),field:"DESCRIPCION",align:"left",sortable:!1},{name:"ESTADO",label:this.$t("matricula.estado"),field:"ESTADO",align:"center",sortable:!1},{name:"ORDEN",label:this.$t("orden"),field:"ORDEN",align:"center",sortable:!0}],pagination:{page:1,rowsPerPage:200},filter:"",selection:"multiple",selected:[]},modal:!1,niveles:[],description:"Comentarios",tituloPlantillaNiv:"Agregar Plantilla",idNivel1:null,nivel:0,instrucod:null,desNiv1Def:"Comentarios (Nivel 1)",form:V["default"]()}},computed:{},methods:{getLista:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Comentarios";this.instrucod=o,V.getLista(t).then(function(l){t?(e.idNivel1=t,e.comment.data=(0,g["default"])(l),e.form=V["default"](t,o),e.description=n,e.comment.selected=[]):(e.cat.data=(0,g["default"])(l),e.form=V["default"](),e.idNivel1=null)})},add:function(e,t,o){var n="";switch(this.form.descripcion=null,this.form.orden=null,o){case 1:this.tituloPlantillaNiv="Plantilla comentario: "+this.description,n=this.idNivel1,this.limpiarDescrip();break}this.modal=!0,this.nivel=o,this.v$.form.$reset(),e||t||(this.form=V["default"](n,t),this.limpiarDatosSubNivs())},grabar:function(){var e=this;switch(this.nivel){case 1:this.form.id_padre=this.idNivel1,this.form.instrucod=this.instrucod;break;default:this.form.id_padre=null;break}this.v$.form.$touch(),this.v$.form.$error||V.grabar(this.form).then(function(t){e.v$.form.$reset(),e.form.id_padre&&e.form.instrucod&&e.description?e.getLista(e.form.id_padre,e.form.instrucod,e.description):e.getLista(),e.limpiarDescrip(),(0,C["default"])("Se grabó correctamente","success")}).catch(function(){(0,C["default"])("No se pudo grabar","warning")})},actualizar:function(e,t,o){var n={};n[e]=t,V.actualizar(n,o).then(function(e){(0,C["default"])("Se actualizó correctamente","success")}).catch(function(){(0,C["default"])("No se pudo actualizar","warning")})},eliminar:function(e,t,o){var n=this,l=(0,S["default"])(e,function(e){return e.ID});(0,k.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){return V.eliminar(l)}).then(function(e){if(e)switch((0,C["default"])("Se eliminó correctamente","success"),o){case 1:n.getLista(n.idNivel1,n.form.instrucod,n.description);break;default:n.getLista(),n.limpiarDatosSubNivs(),n.form=V["default"]();break}}).catch(function(){(0,C["default"])("No se pudo eliminar","warning")})},limpiarDescrip:function(){this.form.descripcion=null,this.form.orden=null},limpiarDatosSubNivs:function(){this.description=this.desNiv1Def,this.comment.data=[]},errorLabel:function(e){return this.$t((0,O["default"])(e))},maxLength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t);else if(this.form.descripcion&&this.form.descripcion>500)return this.form.descripcion=this.form.descripcion.substr(0,500),!1},obtInstru:function(){var e=this;E.A.obtInstru().then(function(t){var o=t.json;e.niveles=o})}},validations:{form:{instrucod:{required:N.mw},tipo:{required:N.mw},descripcion:{required:N.mw,maxLength:(0,N.Ru)(500)},estado:{required:N.mw},orden:{required:N.mw}}},created:function(){this.getLista(),this.obtInstru()}},$=o(12807);const _=(0,$.A)(R,[["render",b]]);var U=_}}]);