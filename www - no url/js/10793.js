"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[10793],{10793:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var r=t(61758),a={class:"row q-col-gutter-xs"},o={class:"col-xs-12 col-sm-6"},i={class:"col-xs-12 col-sm-6"},s={class:"row q-col-gutter-xs"},c={class:"col-xs-12"},l={class:"row sie-flat"},u={class:"col-xs-12"},d={class:"col-xs-12"};function f(e,n){var t=(0,r.g2)("header-btn"),f=(0,r.g2)("q-separator"),g=(0,r.g2)("sie-ngs"),m=(0,r.g2)("autocomplete"),k=(0,r.g2)("q-card-section"),b=(0,r.g2)("sie-table"),v=(0,r.g2)("q-card"),h=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(h,{class:"movimiento-operaciones q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(v,{flat:""},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{name:"Asignar Workbooks:"}),(0,r.bF)(f),(0,r.bF)(k,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",a,[(0,r.Lk)("div",o,[(0,r.bF)(g,{class:"q-col-gutter-sm",ref:"refNG","show-seccion":!1,"class-nivel":"col-xs-12 col-sm-6","class-grado":"col-xs-12 col-sm-6",onNivel:e.cambiarNivel,onGrado:e.cambiarGrado},null,8,["onNivel","onGrado"])]),(0,r.Lk)("div",i,[(0,r.bF)(m,{class:"q-ma-none",modelValue:e.titulo,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.titulo=n}),data:e.titulos,label:"Titulos",keys:e.keysComplete,onSelected:e.selected},null,8,["modelValue","data","keys","onSelected"])])])]}),_:1}),(0,r.bF)(k,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",s,[(0,r.Lk)("div",c,[(0,r.Lk)("div",l,[(0,r.Lk)("div",u,[(0,r.bF)(t,{auto:!1,name:"Workbooks","font-size":"16px",paddingX:"q-px-xs",border:!1})]),(0,r.Lk)("div",d,[(0,r.bF)(b,{ref:"ejemplares",columns:e.fields,data:e.dataWorkbook,config:e.config,css:{height:"calc(100vh - 370px)"},"show-search":!1},null,8,["columns","data","config"])])])])])]}),_:1})]}),_:1})]}),_:1})}var g=t(57008),m=t.n(g),k=t(76080),b=t.n(k),v=t(45254),h=t.n(v),p=t(6123),w=t(88567),A=t(95718),O=t(53380),T=t(9736),G=t(16648),N=t(982),S=t(3042),W=t(99515),E=t(3112),I=t(30640),R=t(78840),D=t(36667),L=t(10213),x=t(57668),C={components:{QCard:w.A,QCardSection:A.A,QSeparator:O.A,QInput:T.A,notify:N["default"],confirm:L.confirm,sieNgs:D.A,QSelect:G.A,sieModal:I.A,autocomplete:S.A,actionButton:R.A,QRadio:W.A,QCheckbox:E.A,QPage:p.Tu},computed:{},data:function(){var e=this;return{titulo:"",sie:(0,x["default"])(),titulos:[],keysComplete:["TITULO","ID_WORBOOKS"],nivel:"",grado:"",dataWorkbook:[],config:{DELETE:{component:"button",icon:["delete as eliminar"],tooltip:{print:"Eliminar"},eliminar:function(){var n=h()(b()().m(function n(t,r){return b()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.eliminarAsignacion(r);case 1:return n.a(2)}},n)}));function t(e,t){return n.apply(this,arguments)}return t}(),flat:!0,dense:!0},FH_REGISTRO:{component:"date",edit:!1,flat:!0,dense:!0}},fields:[{name:"TITULO",label:"Titulo",field:"TITULO",align:"center"},{name:"INSTRUDES",label:"Nivel",field:"INSTRUDES",align:"center"},{name:"GRADODES",label:"Grado",field:"GRADODES",align:"center"},{name:"FH_REGISTRO",label:"Fecha",field:"FH_REGISTRO",align:"center"},{name:"DELETE",label:"",field:"DELETE",align:"center"}]}},methods:{cambiarNivel:function(){var e=this;return h()(b()().m(function n(){return b()().w(function(n){while(1)switch(n.n){case 0:return e.getNG(),n.n=1,e.getWorkbooksByNG();case 1:return n.a(2)}},n)}))()},cambiarGrado:function(){var e=this;return h()(b()().m(function n(){return b()().w(function(n){while(1)switch(n.n){case 0:return e.getNG(),n.n=1,e.getWorkbooksByNG();case 1:return n.a(2)}},n)}))()},getNG:function(){var e=this.$refs.refNG.ngs;this.nivel=e.nivel,this.grado=e.grado},getWorkbooksByNG:function(){var e=this;return h()(b()().m(function n(){var t,r;return b()().w(function(n){while(1)switch(n.n){case 0:return t={anio:e.sie.ano,instrucod:e.nivel,gradocod:e.grado},n.n=1,e.$http.get("api/AsignarWorkbooksController/getAsignacionesByNG",{params:{params:m()({},t)}});case 1:r=n.v,e.dataWorkbook=r;case 2:return n.a(2)}},n)}))()},selected:function(e){var n=this;return h()(b()().m(function t(){var r;return b()().w(function(t){while(1)switch(t.n){case 0:if(n.nivel&&"T"!==n.nivel){t.n=1;break}return(0,N["default"])("Seleccione un Nivel","warning"),t.a(2,0);case 1:if(n.grado&&"T"!==n.grado){t.n=2;break}return(0,N["default"])("Seleccione un Grado","warning"),t.a(2,0);case 2:return n.titulo=e.TITULO,r={TITULO:e.TITULO,ID_WORKBOOKS:e.ID_WORKBOOKS,INSTRUCOD:n.nivel,GRADOCOD:n.grado,ANO:n.sie.ano},t.n=3,n.grabarRegistro(r);case 3:return t.a(2)}},t)}))()},grabarRegistro:function(e){var n=this;return h()(b()().m(function t(){var r;return b()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.$http.post("api/AsignarWorkbooksController/addAsignarWorkbooks",{data:m()({},e)});case 1:return(0,N["default"])("Asignacion registrada exitosamente","success"),t.n=2,n.getWorkbooksByNG();case 2:t.n=4;break;case 3:t.p=3,r=t.v,(0,N["default"])(r.message,"warning");case 4:return t.a(2)}},t,null,[[0,3]])}))()},eliminarAsignacion:function(e){var n=this;return h()(b()().m(function t(){return b()().w(function(t){while(1)switch(t.n){case 0:return(0,L.confirm)("Este proceso es irreversible Â¿Desea continuar?","warning",!1,!1,"Eliminar registro").onOk(function(){var t=h()(b()().m(function t(r){var a;return b()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.$http.delete("api/AsignarWorkbooksController/deleteAsignarWorkbooks",{params:{id:e.ID_ASIGNACION}});case 1:return(0,N["default"])("El registro ah sido eliminado","success"),t.n=2,n.getWorkbooksByNG();case 2:t.n=4;break;case 3:t.p=3,a=t.v,(0,N["default"])(a.message,"warning");case 4:return t.a(2)}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}()),t.a(2,0)}},t)}))()}},created:function(){var e=this;return h()(b()().m(function n(){var t;return b()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/AsignarWorkbooksController/getWorkbooks");case 1:t=n.v,e.titulos=t;case 2:return n.a(2)}},n)}))()}},y=t(12807);const F=(0,y.A)(C,[["render",f]]);var _=F}}]);