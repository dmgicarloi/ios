"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[30027],{30027:function(e,o,n){n.r(o),n.d(o,{default:function(){return we}});var r=n(8445),a=n.n(r),t=n(61758),l={class:"row"},i={class:"col-xs-12"},c={class:"row q-pa-xs"},u={class:"col-12"},s={class:"row"},d={class:"col-12"},m={class:"row q-pa-sm q-col-gutter-sm"},f={class:"col-xs-12"},p={class:"col-xs-12 col-sm-6"},O={class:"row q-gutter-sm"},A={class:"col"},C={class:"col-xs-12 col-sm-6"},I={class:"row q-gutter-sm"},b={class:"col"},D={class:"col-xs-12 col-sm-6"},v={class:"col-xs-12 col-sm-6"},P={class:"col-xs-12"},E={class:"col-xs-12 col-sm-4"},w={class:"col-xs-12 col-sm-4"},g={class:"col-xs-12 col-sm-4"},h={class:"col-xs-12 col-sm-6"},T={class:"col-xs-12 col-sm-6"},M={class:"col-xs-12 col-sm-6"},S={class:"col-xs-12 col-sm-6"},U={class:"col-xs-12"},N={class:"col-xs-12 col-sm-6"},R={class:"col-xs-12 col-sm-6"},k={class:"col-xs-12 col-sm-4"},V={class:"col-xs-12 col-sm-4"},_={class:"col-xs-12 col-sm-4"},F={class:"col-xs-12 col-sm-6"},x={class:"col-xs-12 col-sm-6"},L={class:"row"},y={class:"col-12"},B={class:"row"},G={class:"col-xs-12 sie-flat"},$={class:"row q-pa-sm q-col-gutter-sm sie-flat"},q={class:"col-xs-12 col-sm-6"},K={class:"col-xs-12 col-sm-6"};function X(e,o){var n=this,r=(0,t.g2)("header-btn"),X=(0,t.g2)("sie-table"),H=(0,t.g2)("q-card-section"),Q=(0,t.g2)("q-card"),W=(0,t.g2)("q-tab"),j=(0,t.g2)("q-tabs"),z=(0,t.g2)("q-separator"),J=(0,t.g2)("q-checkbox"),Y=(0,t.g2)("q-select"),Z=(0,t.g2)("q-tooltip"),ee=(0,t.g2)("q-btn"),oe=(0,t.g2)("q-input"),ne=(0,t.g2)("q-form"),re=(0,t.g2)("q-tab-panel"),ae=(0,t.g2)("q-tab-panels"),te=(0,t.g2)("sie-modal"),le=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(le,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(Q,{flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{name:"Mantenimiento Producto",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(H,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",l,[(0,t.Lk)("div",i,[(0,t.bF)(X,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableProducto",onRowSelected:e.rowSelectProducto,css:"height:calc(100vh - 140px)",context:n,"show-refresh":!0,onRefresh:o[0]||(o[0]=function(o){return e.readProducto()})},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,t.bF)(te,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.openAdd=o}),css:{width:"700px"},title:"create"===e.action?"Agregar Producto":"Modificar Producto",onSubmit:e.saveAcccion},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",c,[(0,t.Lk)("div",u,[(0,t.bF)(j,{class:"q-gutter-xs custom-tabs",color:"primary",align:"left",dense:!0,modelValue:e.tab,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.tab=o})},{default:(0,t.k6)(function(){return[(0,t.bF)(W,{color:"primary","no-caps":"",name:"producto",label:"Producto"}),e.rowProducto&&e.rowProducto.IDPRODUCTO?((0,t.uX)(),(0,t.Wv)(W,{key:0,color:"primary","no-caps":"",name:"adicional",label:"Datos Adicionales",onClick:e.readStoProAlm},null,8,["onClick"])):(0,t.Q3)("v-if",!0)]}),_:1},8,["modelValue"]),(0,t.bF)(z),(0,t.bF)(ae,{modelValue:e.tab,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.tab=o}),"keep-alive":"",animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,t.k6)(function(){return[(0,t.bF)(re,{style:{padding:"0 !important"},name:"producto"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",s,[(0,t.Lk)("div",d,[(0,t.bF)(ne,{ref:"refForm"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",m,[(0,t.Lk)("div",f,[(0,t.bF)(J,{dense:"",modelValue:e.form.AFECTOIGV,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.AFECTOIGV=o}),"true-value":1,"false-value":0,label:"Afecto IGV"},null,8,["modelValue"])]),(0,t.Lk)("div",p,[(0,t.Lk)("div",O,[(0,t.Lk)("div",A,[(0,t.bF)(Y,{modelValue:e.form.TIPO_PRODUCTO,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.TIPO_PRODUCTO=o}),options:e.tipoProductos,rules:[e.required],"emit-value":"",label:"Tipo de Producto"},null,8,["modelValue","options","rules"])]),(0,t.bF)(ee,{style:{height:"20px"},icon:"person_book",color:"primary",size:"12px",onClick:e.openProductoProveedor},{default:(0,t.k6)(function(){return[(0,t.bF)(Z,null,{default:(0,t.k6)(function(){return a()(o[27]||(o[27]=[(0,t.eW)("Proveedor",-1)]))}),_:1})]}),_:1},8,["onClick"])])]),(0,t.Lk)("div",C,[(0,t.Lk)("div",I,["update"===e.action?((0,t.uX)(),(0,t.Wv)(ee,{key:0,style:{height:"20px"},icon:"room",color:"primary",size:"12px",onClick:e.openProductoUbicacion},{default:(0,t.k6)(function(){return[(0,t.bF)(Z,null,{default:(0,t.k6)(function(){return a()(o[28]||(o[28]=[(0,t.eW)("Ubicación",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",b,[(0,t.bF)(Y,{modelValue:e.form.ESTADO,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.form.ESTADO=o}),options:e.estados,rules:[e.required],"emit-value":"",label:"Estado"},null,8,["modelValue","options","rules"])])])]),(0,t.Lk)("div",D,[(0,t.bF)(Y,{modelValue:e.form.CONCOB,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.CONCOB=o}),options:e.conceptos,"option-value":"CONCOB","option-label":"CONDES","emit-value":"",label:"Concepto de Cobro *",rules:[e.required]},null,8,["modelValue","options","rules"])]),(0,t.Lk)("div",v,[(0,t.bF)(Y,{modelValue:e.form.CODCTA,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.form.CODCTA=o}),options:e.cuentas,"option-value":"CODCTA","option-label":"CTADES","emit-value":"",label:"Cuenta Contable"},null,8,["modelValue","options"])]),(0,t.Lk)("div",P,[(0,t.bF)(oe,{type:"textarea",counter:"",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.form.DESCRIPCION=o}),label:"Descripcion *",rules:[e.required]},null,8,["modelValue","rules"])]),(0,t.Lk)("div",E,[(0,t.bF)(Y,{disable:"update"===e.action,modelValue:e.form.UNIBASE,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.form.UNIBASE=o}),options:e.unidades,"option-value":"IDUNIDAD","option-label":"DESCRIPCION",rules:[e.required],"emit-value":"",label:"Unidad Base"},null,8,["disable","modelValue","options","rules"])]),(0,t.Lk)("div",w,[(0,t.bF)(Y,{disable:"update"===e.action,modelValue:e.form.UNIOPE,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.form.UNIOPE=o}),options:e.unidades,"option-value":"IDUNIDAD","option-label":"DESCRIPCION",rules:[e.required],"emit-value":"",label:"Unidad Operación"},null,8,["disable","modelValue","options","rules"])]),(0,t.Lk)("div",g,[(0,t.bF)(oe,{disable:"update"===e.action,modelValue:e.form.CANTIDAD_BASE,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.form.CANTIDAD_BASE=o}),type:"number",min:"1",label:"Factor de Conversión",rules:[e.required]},null,8,["disable","modelValue","rules"])]),(0,t.Lk)("div",h,[(0,t.bF)(Y,{modelValue:e.idFamilia,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.idFamilia=o}),label:"Categoría","option-value":"IDFAMALM","option-label":"DESCRIPCION",options:e.familias,onInput:e.readSubFamilias,"emit-value":""},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",T,[(0,t.bF)(Y,{modelValue:e.form.IDSUBFAMALM,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.form.IDSUBFAMALM=o}),label:"Sub Categoría","option-value":"IDSUBFAMALM","option-label":"DESCRIPCION",options:e.subFamilias,"emit-value":""},null,8,["modelValue","options"])]),(0,t.Lk)("div",M,[(0,t.bF)(Y,{modelValue:e.form.IDTIPOEXISTENCIA,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.form.IDTIPOEXISTENCIA=o}),options:e.tipoExistencia,"option-value":"IDTIPOEXISTENCIA","option-label":"DESCRIPCION","emit-value":"",rules:[e.required],label:"Tipo de Existencia *"},null,8,["modelValue","options","rules"])]),(0,t.Lk)("div",S,[(0,t.bF)(Y,{modelValue:e.form.IDMARCA,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.form.IDMARCA=o}),options:e.marcas,"option-value":"IDMARCA","option-label":"DESCRIPCION","emit-value":"",label:"Marca"},null,8,["modelValue","options"])]),(0,t.Lk)("div",U,[(0,t.bF)(oe,{modelValue:e.form.MODELO,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.form.MODELO=o}),label:"Modelo del producto"},null,8,["modelValue"])]),(0,t.Lk)("div",N,[(0,t.bF)(oe,{modelValue:e.form.CODIGO,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.form.CODIGO=o}),label:"Código",disable:1===e.codigoalid},null,8,["modelValue","disable"])]),(0,t.Lk)("div",R,[(0,t.bF)(oe,{modelValue:e.form.CODIGO_BARRA,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.form.CODIGO_BARRA=o}),label:"Código de Barra",disable:1===e.codigoalid},null,8,["modelValue","disable"])]),(0,t.Lk)("div",k,[(0,t.bF)(Y,{modelValue:e.form.MONCOD,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.form.MONCOD=o}),options:e.monedas,"option-value":"MONCOD","option-label":"MONNOM",rules:[e.required],"emit-value":"",label:"Moneda"},null,8,["modelValue","options","rules"])]),(0,t.Lk)("div",V,[(0,t.bF)(oe,{modelValue:e.form.PRECIO_COM,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.form.PRECIO_COM=o}),label:"Precio Compra",type:"number"},null,8,["modelValue"])]),(0,t.Lk)("div",_,[(0,t.bF)(oe,{modelValue:e.form.PRECIO_VEN,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.form.PRECIO_VEN=o}),label:"Precio Venta",type:"number"},null,8,["modelValue"])]),(0,t.Lk)("div",F,[(0,t.bF)(oe,{modelValue:e.form.STOCK_MINIMO,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.form.STOCK_MINIMO=o}),label:"Stock Mínimo",type:"number"},null,8,["modelValue"])]),(0,t.Lk)("div",x,[(0,t.bF)(oe,{modelValue:e.form.STOCK_MAXIMO,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.form.STOCK_MAXIMO=o}),label:"Stock Máximo",type:"number"},null,8,["modelValue"])])])]}),_:1},512)])])]}),_:1}),e.rowProducto&&e.rowProducto.IDPRODUCTO?((0,t.uX)(),(0,t.Wv)(re,{key:0,style:{padding:"0 !important"},name:"adicional"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",L,[(0,t.Lk)("div",y,[(0,t.bF)(X,{type:"normal",data:e.dataExistenciaAlmacen,columns:e.fieldsExistenciaAlmacen,selection:"none",ref:"tableStoProAlm",css:"height:350px",context:n},null,8,["data","columns"])])])]}),_:1})):(0,t.Q3)("v-if",!0)]}),_:1},8,["modelValue"])])])]}),_:1},8,["modelValue","title","onSubmit"]),(0,t.bF)(te,{esc:"","esc-click":"",modelValue:e.openModalProductoProveedor,"onUpdate:modelValue":o[25]||(o[25]=function(o){return e.openModalProductoProveedor=o}),title:"Proveedores por Producto",ok:!1,footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",B,[(0,t.Lk)("div",G,[(0,t.bF)(X,{type:"normal",data:e.rowsProductoProveedor,columns:e.fieldsProductoProveedor,config:e.configProductoProveedor,selection:"single","save-cells":"",ref:"tableProductoProveedor",css:"height:300px",context:n},null,8,["data","columns","config"])])])]}),_:1},8,["modelValue"]),(0,t.bF)(te,{esc:"","esc-click":"",modelValue:e.openModalProductoUbicacion,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.openModalProductoUbicacion=o}),css:{width:"600px"},title:"Asignar Ubicación",ok:!1,footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",$,[(0,t.Lk)("div",q,[(0,t.bF)(X,{type:"normal",data:e.rowsAlmacen,columns:e.fieldsAlmacen,config:e.configAlmacen,selection:"single","save-cells":"",ref:"tableAlmacen",onRowSelected:e.selectAlmacen,css:"height:300px",context:n},null,8,["data","columns","config","onRowSelected"])]),(0,t.Lk)("div",K,[(0,t.bF)(X,{type:"normal",data:e.rowsUbicacion,columns:e.fieldsUbicacion,config:e.configUbicacion,selection:"none","save-cells":"",ref:"tableProductoProveedor",css:"height:300px",context:n},null,8,["data","columns","config"])])])]}),_:1},8,["modelValue"])]}),_:1})}var H=n(57008),Q=n.n(H),W=n(99550),j=n.n(W),z=n(76080),J=n.n(z),Y=n(45254),Z=n.n(Y),ee=(n(71225),n(74260),n(39866),n(52133),n(89571),n(50310),n(5962),n(32203),n(6724),n(83190),n(6123)),oe={data:function(){return{config:{ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,o){var n=this;return Z()(J()().m(function e(){return J()().w(function(e){while(1)switch(e.n){case 0:return n.rowProducto=o,e.n=1,n.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,o){var n=this;return Z()(J()().m(function e(){return J()().w(function(e){while(1)switch(e.n){case 0:return n.rowProducto=o,e.n=1,n.deleteProducto();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},flat:!0,dense:!0},ESTADO:{renderHtml:function(e,o,n){return n.checkbox({trueValue:1,value:e.ESTADO})},renderAction:function(e,o){var n=this;return Z()(J()().m(function r(){var a,t;return J()().w(function(r){while(1)switch(r.p=r.n){case 0:return a=e.ESTADO,1===e.ESTADO?o.ESTADO=0:o.ESTADO=1,r.p=1,t={params:{IDPRODUCTO:e.IDPRODUCTO,ESTADO:o.ESTADO}},r.n=2,n.$http.put("api/HyoArticulos/updateArticulo",t);case 2:r.n=4;break;case 3:r.p=3,r.v,n.$notify("No ha sido posible cambiar el estado"),o.ESTADO=a;case 4:return r.a(2)}},r,null,[[1,3]])}))()}}},rows:[],fields:[{name:"IDPRODUCTO",label:"Id",field:"IDPRODUCTO",align:"center",sortable:!0,width:50},{name:"CODIGO",label:"Código",field:"CODIGO",align:"center",sortable:!0},{name:"CODIGO_BARRA",label:"Código de Barra",field:"CODIGO_BARRA",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center",sortable:!0,width:50},{name:"STOCK_MAXIMO",label:"Stock Min.",field:"STOCK_MAXIMO",align:"center",sortable:!0},{name:"STOCK_MINIMO",label:"Stock Max.",field:"STOCK_MINIMO",align:"center",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:90}]}}},ne={data:function(){return{configAlmacen:{},rowsAlmacen:[],fieldsAlmacen:[{name:"IDALMACEN",label:"Código",field:"IDALMACEN",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Almacén",field:"DESCRIPCION",align:"left",sortable:!0}]}}},re={data:function(){return{configUbicacion:{AGREGADO:{renderHtml:function(e,o,n){return n.checkbox({trueValue:1,value:e.AGREGADO})},renderAction:function(e,o){var n=this;return Z()(J()().m(function r(){var a;return J()().w(function(r){while(1)switch(r.p=r.n){case 0:if(a=e.AGREGADO,1===e.AGREGADO?o.AGREGADO=0:o.AGREGADO=1,r.p=1,0!==o.AGREGADO){r.n=3;break}return r.n=2,n.$http.delete("api/AlmacenUbicacionController/deleteAlmacenUbicacion",{params:{IDALMACEN:n.rowAlmacen.IDALMACEN,ID_UBICACION:e.ID_UBICACION,IDPRODUCTO:n.rowProducto.IDPRODUCTO}});case 2:r.n=4;break;case 3:if(1!==o.AGREGADO){r.n=4;break}return r.n=4,n.$http.post("api/AlmacenUbicacionController/addAlmacenUbicacion",{data:{IDALMACEN:n.rowAlmacen.IDALMACEN,ID_UBICACION:e.ID_UBICACION,IDPRODUCTO:n.rowProducto.IDPRODUCTO}});case 4:r.n=6;break;case 5:r.p=5,r.v,o.AGREGADO=a;case 6:return r.a(2)}},r,null,[[1,5]])}))()}}},rowsUbicacion:[],fieldsUbicacion:[{name:"ID_UBICACION",label:"Código",field:"ID_UBICACION",align:"center",sortable:!0},{name:"UBICACION",label:"Ubicación",field:"UBICACION",align:"left",sortable:!0},{name:"AGREGADO",label:"Agregado",field:"AGREGADO",align:"center",sortable:!0}]}}},ae={data:function(){return{configProductoProveedor:{ACTIVE:{renderHtml:function(e,o,n){return n.checkbox({value:e.ACTIVE,trueValue:1})},renderAction:function(e,o){var n=this;return Z()(J()().m(function r(){var a;return J()().w(function(r){while(1)switch(r.p=r.n){case 0:if(a=e.ACTIVE,1===e.ACTIVE?o.ACTIVE=0:o.ACTIVE=1,r.p=1,"update"!==n.action){r.n=2;break}return r.n=2,n.$http.post("api/HyoArticulos/updateProductoProveedor",{idproducto:n.rowProducto.IDPRODUCTO,id_persona:e.ID_PERSONA});case 2:r.n=4;break;case 3:r.p=3,r.v,o.ACTIVE=a;case 4:return r.a(2)}},r,null,[[1,3]])}))()}}},rowsProductoProveedor:[],fieldsProductoProveedor:[{name:"ID_PERSONA",label:"Código",field:"ID_PERSONA",align:"center",sortable:!0,width:100},{name:"NOMBRE",label:"Descripción",field:"NOMBRE",align:"left",sortable:!0},{name:"ACTIVE",label:"Activo",field:"ACTIVE",align:"center",sortable:!0,width:50}]}}},te=n(39893),le=n(81288),ie=n(2739),ce=n(9736),ue=n(5215),se=n(3112),de=n(88567),me=n(95718),fe=n(43136),pe=n(6583),Oe=n(26697),Ae=n(53093),Ce=n(53811),Ie=n(43346),be=n(53380),De=n(79905),ve={mixins:[oe,ne,re,fe.initialConfig,ae],components:{QForm:ie.A,QInput:ce.A,QCard:de.A,QCardSection:me.A,QSelect:ue.A,QCheckbox:se.A,QTabs:Oe.A,QTab:Ae.A,QTabPanels:Ce.A,QTabPanel:Ie.A,QSeparator:be.A,QPage:ee.Tu,QBtn:ee.Il,QTooltip:ee.nC},data:function(){return{required:te.require,buttons:[{label:"Agregar",icon:"plus",click:this.openAgregar}],openAdd:!1,action:"create",rowProducto:null,rowAlmacen:null,estados:[{label:"Activo",value:1},{label:"Inactivo",value:0}],tipoProductos:[{label:"Producto",value:"P"},{label:"Servicio",value:"S"}],tipoExistencia:[],marcas:[],familias:[],idFamilia:null,subFamilias:[],unidades:[],monedas:[],ubicaciones:[],proveedor:null,openModalProductoProveedor:!1,conceptos:[],cuentas:[],tab:"producto",dataExistenciaAlmacen:[],fieldsExistenciaAlmacen:[{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"MARCA",label:"Marca",field:"MARCA",align:"left",sortable:!0},{name:"UNIDAD",label:"Unidad",field:"UNIDAD",align:"left",sortable:!0},{name:"STOCK",label:"Stock",field:"STOCK",align:"center",sortable:!0}],form:{EMPCOD:null,MONCOD:null,IDMARCA:null,CONCOB:null,CODCTA:null,IDSUBFAMALM:null,UNIBASE:null,UNIOPE:null,CANTIDAD_BASE:1,IDTIPOEXISTENCIA:null,AFECTOIGV:0,MODELO:null,PRECIO_COM:null,PRECIO_VEN:null,CODIGO:null,CODIGO_BARRA:null,DESCRIPCION:null,TIPO_PRODUCTO:"P",ESTADO:1,STOCK_MAXIMO:null,STOCK_MINIMO:null},openModalProductoUbicacion:!1}},methods:{readStoProAlm:function(){var e=this;return Z()(J()().m(function o(){var n,r;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/HyoArticulos/readProductoExistenciasPorAlmacen",{params:{id_local:e.id_local,idproducto:e.rowProducto.IDPRODUCTO}});case 1:n=o.v,e.dataExistenciaAlmacen=n,o.n=3;break;case 2:o.p=2,r=o.v,e.$notify(r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},selectAlmacen:function(e){var o=this;return Z()(J()().m(function n(){return J()().w(function(n){while(1)switch(n.n){case 0:return o.rowAlmacen=e,n.n=1,o.readUbicacionPorAlmacen({IDALMACEN:e.IDALMACEN,IDPRODUCTO:o.rowProducto.IDPRODUCTO});case 1:return n.a(2)}},n)}))()},openProductoProveedor:function(){var e=this;return Z()(J()().m(function o(){return J()().w(function(o){while(1)switch(o.n){case 0:e.openModalProductoProveedor=!0;case 1:return o.a(2)}},o)}))()},openProductoUbicacion:function(){var e=this;return Z()(J()().m(function o(){return J()().w(function(o){while(1)switch(o.n){case 0:return e.openModalProductoUbicacion=!0,"update"===e.action&&(e.rowsUbicacion=[]),o.n=1,e.readAlmacen();case 1:return o.a(2)}},o)}))()},openAgregar:function(){var e=this;return Z()(J()().m(function o(){var n;return J()().w(function(o){while(1)switch(o.n){case 0:return e.action="create",e.rowProducto=null,(0,le.clear)(e.form),n=e.unidades.find(function(e){return["NIU","UNI"].includes(e.ABREVIATURA)}),n&&(e.form.UNIBASE=n.IDUNIDAD,e.form.UNIOPE=n.IDUNIDAD),e.idFamilia=null,e.form.ESTADO=1,e.form.TIPO_PRODUCTO="P",e.form.AFECTOIGV=0,e.form.CANTIDAD_BASE=1,e.form.MONCOD=e.moncod||null,e.tab="producto",e.rowsProductoProveedor=[],o.n=1,e.readProveedor();case 1:e.openAdd=!0;case 2:return o.a(2)}},o)}))()},openActualizar:function(){var e=this;return Z()(J()().m(function o(){var n,r,a,t;return J()().w(function(o){while(1)switch(o.n){case 0:if(e.rowProducto){o.n=1;break}e.$notify("Selecciona un registro","info"),o.n=5;break;case 1:return e.tab="producto",e.action="update",o.n=2,e.getProducto(["producto.*"],e.rowProducto.IDPRODUCTO);case 2:return n=o.v,r=j()(n,1),a=r[0],o.n=3,e.$http.get("api/HyoArticulos/readProductoProveedor",{params:{idproducto:a.IDPRODUCTO}});case 3:return t=o.v,e.rowsProductoProveedor=t,e.form.EMPCOD=a.EMPCOD,e.form.IDMARCA=a.IDMARCA,e.idFamilia=a.IDFAMALM,o.n=4,e.readSubFamilias();case 4:e.form.IDSUBFAMALM=a.IDSUBFAMALM,e.form.MONCOD=a.MONCOD,e.form.CODCTA=a.CODCTA,e.form.CONCOB=a.CONCOB,e.form.UNIBASE=a.UNIBASE,e.form.UNIOPE=a.UNIOPE,e.form.CANTIDAD_BASE=a.CANTIDAD_BASE,e.form.IDTIPOEXISTENCIA=a.IDTIPOEXISTENCIA,e.form.AFECTOIGV=a.AFECTOIGV,e.form.MODELO=a.MODELO,e.form.PRECIO_COM=a.PRECIO_COM,e.form.PRECIO_VEN=a.PRECIO_VEN,e.form.CODIGO=a.CODIGO,e.form.CODIGO_BARRA=a.CODIGO_BARRA,e.form.DESCRIPCION=a.DESCRIPCION,e.form.TIPO_PRODUCTO=a.TIPO_PRODUCTO,e.form.ESTADO=a.ESTADO,e.form.STOCK_MAXIMO=a.STOCK_MAXIMO,e.form.STOCK_MINIMO=a.STOCK_MINIMO,e.openAdd=!0;case 5:return o.a(2)}},o)}))()},saveAcccion:function(){var e=this;return Z()(J()().m(function o(){var n,r,a;return J()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$refs.refForm.validate();case 1:if(n=o.v,n){o.n=2;break}return e.tab="producto",o.a(2);case 2:if("create"!==e.action){o.n=4;break}return o.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:r=o.v,r&&e.createProducto(),o.n=6;break;case 4:return o.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:a=o.v,a&&e.updateProducto();case 6:return o.a(2)}},o)}))()},rowSelectProducto:function(e,o){this.rowProducto=o},createProducto:function(){var e=this;return Z()(J()().m(function o(){var n,r,a,t,l,i,c;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,n=Q()({},e.form),n.EMPCOD=e.empcod,r=e.rowsProductoProveedor.filter(function(e){return 1===e.ACTIVE}).map(function(e){return e.ID_PERSONA}),o.n=1,e.$http.post("api/HyoArticulos/createArticulo",{params:{form:n,productoProveedores:r}});case 1:a=o.v,t=a.result,l=a.message,i={IDPRODUCTO:t.IDPRODUCTO,DESCRIPCION:e.form.DESCRIPCION,ESTADO:e.form.ESTADO,STOCK_MINIMO:e.form.STOCK_MINIMO,STOCK_MAXIMO:e.form.STOCK_MAXIMO,IDFAMALM:e.idFamilia},e.rows.unshift(i),e.openAdd=!1,e.$notify(l,"success"),o.n=3;break;case 2:o.p=2,c=o.v,e.$notify(c.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},readAlmacen:function(){var e=this;return Z()(J()().m(function o(){var n,r;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/HyoAlmacenes/getAlmacenesBySede",{params:{id_local:e.id_local}});case 1:n=o.v,e.rowsAlmacen=n,o.n=3;break;case 2:o.p=2,r=o.v,e.$notify(r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},readUbicacionPorAlmacen:function(){var e=arguments,o=this;return Z()(J()().m(function n(){var r,a,t,l,i;return J()().w(function(n){while(1)switch(n.p=n.n){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:{},a=r.IDALMACEN,t=r.IDPRODUCTO,a||t){n.n=1;break}return o.$alert("Debe seleccionar un almacén y un producto"),n.a(2);case 1:return n.p=1,n.n=2,o.$http.get("api/UbicacionController/getUbicacionPorAlmacen",{params:{parametros:{IDALMACEN:a,IDPRODUCTO:t}}});case 2:l=n.v,o.rowsUbicacion=l,n.n=4;break;case 3:n.p=3,i=n.v,o.$notify(i.message,"warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},readProducto:function(){var e=this;return Z()(J()().m(function o(){return J()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.getProducto();case 1:e.rows=o.v;case 2:return o.a(2)}},o)}))()},readProveedor:function(){var e=this;return Z()(J()().m(function o(){var n,r;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/personaController/getAuxiliar",{params:{params:{pagina:1,filtro:{id_perfil:14,tipo_persona:[1,2]},order:"NOMBRE",vjson:2}}});case 1:n=o.v,n.map(function(e){e.ACTIVE=0}),e.rowsProductoProveedor=n,o.n=3;break;case 2:o.p=2,r=o.v,e.$notify(r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},getProducto:function(){var e=arguments,o=this;return Z()(J()().m(function n(){var r,a,t,l,i;return J()().w(function(n){while(1)switch(n.n){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:["idproducto","descripcion","estado","codigo","codigo_barra","stock_minimo","stock_maximo"],a=e.length>1?e[1]:void 0,t={empcod:o.empcod,fields:r,tipo_producto:""},a&&(t.idProducto=a),n.n=1,o.$http.get("api/HyoArticulos/getAllArticulos",{params:t});case 1:return l=n.v,i=l.json,n.a(2,i)}},n)}))()},readMoneda:function(){var e=this;return Z()(J()().m(function o(){var n;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/HyoMonedas/readMoneda");case 1:e.monedas=o.v,o.n=3;break;case 2:o.p=2,n=o.v,e.$notify(n.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},readConcepto:function(){var e=this;return Z()(J()().m(function o(){var n,r;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/ConcobroController/getConceptos",{params:{parametros:{response:"list",salVarias:!0}}});case 1:n=o.v,n.unshift({CONCOB:null,CONDES:"Ninguno"}),e.conceptos=n,o.n=3;break;case 2:o.p=2,r=o.v,e.$notify(r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},readCuentaContable:function(){var e=this;return Z()(J()().m(function o(){var n,r;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/ContabilidadController/getCuentaContable",{params:{params:{view:"vista",agrupador:"7"}}});case 1:n=o.v,n.unshift({CODCTA:null,CTADES:"Ninguno"}),e.cuentas=n,o.n=3;break;case 2:o.p=2,r=o.v,e.$notify(r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},readUbicacion:function(){var e=this;return Z()(J()().m(function o(){var n,r;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.get("api/UbicacionController/getUbicacion",{params:{}});case 1:n=o.v,e.ubicaciones=n,o.n=3;break;case 2:o.p=2,r=o.v,e.$notify(r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},readTipoExistencia:function(){var e=this;return Z()(J()().m(function o(){var n,r;return J()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoTipoExistencias/getExistencia");case 1:n=o.v,r=(0,pe["default"])(n),e.tipoExistencia=r;case 2:return o.a(2)}},o)}))()},readMarca:function(){var e=this;return Z()(J()().m(function o(){return J()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoMarcas/readMarca");case 1:e.marcas=o.v;case 2:return o.a(2)}},o)}))()},readFamilias:function(){var e=this;return Z()(J()().m(function o(){return J()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoFamAlms/readFamAlm",{params:{empcod:e.empcod}});case 1:e.familias=o.v;case 2:return o.a(2)}},o)}))()},readSubFamilias:function(){var e=this;return Z()(J()().m(function o(){return J()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoSubFams/readSubFam",{params:{idfamalm:e.idFamilia}});case 1:e.subFamilias=o.v;case 2:return o.a(2)}},o)}))()},readUnidad:function(){var e=this;return Z()(J()().m(function o(){return J()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoUnidades/readUnidad");case 1:e.unidades=o.v;case 2:return o.a(2)}},o)}))()},deleteProducto:function(){var e=this;return Z()(J()().m(function o(){var n,r,a,t;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.rowProducto){o.n=1;break}e.$notify("Selecciona un registro","info"),o.n=6;break;case 1:return o.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(n=o.v,!n){o.n=6;break}return o.p=3,o.n=4,e.$http.delete("api/HyoArticulos/deleteArticulo",{params:{empcod:e.empcod,idProducto:e.rowProducto.IDPRODUCTO}});case 4:r=o.v,a=r.message,e.rows.splice(e.rows.indexOf(e.rowProducto),1),e.rowProducto=null,e.$notify(a,"success"),o.n=6;break;case 5:o.p=5,t=o.v,e.$notify(t.message,"warning");case 6:return o.a(2)}},o,null,[[3,5]])}))()},updateProducto:function(){var e=this;return Z()(J()().m(function o(){var n,r,a,t;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,n=e.$refs.tableProducto,o.n=1,e.$http.put("api/HyoArticulos/updateArticulo",{params:{IDPRODUCTO:e.rowProducto.IDPRODUCTO,EMPCOD:e.empcod,CODCTA:e.form.CODCTA,CONCOB:e.form.CONCOB,MONCOD:e.form.MONCOD,IDMARCA:e.form.IDMARCA,IDSUBFAMALM:e.form.IDSUBFAMALM,UNIBASE:e.form.UNIBASE,IDTIPOEXISTENCIA:e.form.IDTIPOEXISTENCIA,AFECTOIGV:e.form.AFECTOIGV,MODELO:e.form.MODELO,PRECIO_COM:e.form.PRECIO_COM,PRECIO_VEN:e.form.PRECIO_VEN,CODIGO:e.form.CODIGO,CODIGO_BARRA:e.form.CODIGO_BARRA,DESCRIPCION:e.form.DESCRIPCION,TIPO_PRODUCTO:e.form.TIPO_PRODUCTO,ESTADO:e.form.ESTADO,STOCK_MAXIMO:e.form.STOCK_MAXIMO,STOCK_MINIMO:e.form.STOCK_MINIMO}});case 1:r=o.v,a=r.message,e.openAdd=!1,n.updateRow(e.rowProducto,e.form),e.$notify(a,"success"),o.n=3;break;case 2:o.p=2,t=o.v,e.$notify(t.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},exportarExcel:function(){(0,De["default"])({path:"demo_postgresql"})}},created:function(){var e=this;return Z()(J()().m(function o(){var n;return J()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.readProducto();case 1:return o.n=2,e.readTipoExistencia();case 2:return o.n=3,e.readMarca();case 3:return o.n=4,e.readFamilias();case 4:return o.n=5,e.readUnidad();case 5:return o.n=6,e.readMoneda();case 6:return o.n=7,e.readUbicacion();case 7:return o.n=8,e.readConcepto();case 8:return o.n=9,e.readCuentaContable();case 9:o.n=11;break;case 10:o.p=10,n=o.v,e.$notify(n.message,"warning");case 11:return o.a(2)}},o,null,[[0,10]])}))()}},Pe=n(12807);const Ee=(0,Pe.A)(ve,[["render",X]]);var we=Ee}}]);