"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[11724],{11724:function(e,a,t){t.r(a),t.d(a,{default:function(){return $}});var n=t(61758);function o(e,a){var t=(0,n.g2)("tablas"),o=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(o,null,{default:(0,n.k6)(function(){return[(0,n.bF)(t,{siscod:"05"})]}),_:1})}var r=t(6123),l=(t(30683),t(52776),t(53113),t(58790)),u={class:"tablas-medico q-pa-sm"},i={class:"row q-col-gutter-sm"},s={class:"col-md-4 col-xs-12"},c={class:"col-md-8 col-xs-12"},d={class:"row justify-center"},f={class:"row q-pa-sm q-col-gutter-sm items-baseline"};function p(e,a){var t=(0,n.g2)("header-btn"),o=(0,n.g2)("q-search"),r=(0,n.g2)("q-td"),p=(0,n.g2)("q-tr"),m=(0,n.g2)("q-table"),b=(0,n.g2)("q-input"),v=(0,n.g2)("q-select"),w=(0,n.g2)("q-popup-edit"),k=(0,n.g2)("q-checkbox"),g=(0,n.g2)("q-btn"),y=(0,n.g2)("q-color"),h=(0,n.g2)("q-banner"),V=(0,n.g2)("q-popup-proxy"),_=(0,n.g2)("q-icon"),T=(0,n.g2)("q-form"),A=(0,n.g2)("q-card-section"),C=(0,n.g2)("q-card"),F=(0,n.g2)("sie-color"),U=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",u,[(0,n.bF)(C,{dense:"",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{name:"Mantenimiento de tablas",buttons:e.tabla.buttons?e.buttons:[]},null,8,["buttons"]),(0,n.bF)(A,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[(0,n.Lk)("div",s,[(0,n.bF)(m,{class:"col sie-table_alto",data:e.tabla_ma.data,columns:e.tabla_ma.columns,"rows-per-page-options":[0],pagination:e.tabla_ma.pagination,"row-key":e.tabla_ma.rowKey,filter:e.tabla_ma.search,dense:"",flat:"",bordered:"","wrap-cells":""},{"top-right":(0,n.k6)(function(t){return[(0,n.bF)(o,{"hide-underline":"",color:"primary",modelValue:e.tabla_ma.search,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tabla_ma.search=a})},null,8,["modelValue"])]}),body:(0,n.k6)(function(a){return[(0,n.bF)(p,{props:a,onClick:function(t){return e.onRow(a)},class:(0,l.C4)([{"selected-row":e.rowKeySelected===a.row.TABCOD}])},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{key:"TABNOM",props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(a.row.TABNOM),1)]}),_:2},1032,["props"])]}),_:2},1032,["props","onClick","class"])]}),_:1},8,["data","columns","pagination","row-key","filter"])]),(0,n.Lk)("div",c,[(0,n.bF)(T,{ref:"form_tabla"},{default:(0,n.k6)(function(){return[(0,n.bF)(m,{class:"col sie-table_alto",data:e.tabla.data,columns:e.tabla.columns,"rows-per-page-options":[0],pagination:e.tabla.pagination,"onUpdate:pagination":a[2]||(a[2]=function(a){return e.tabla.pagination=a}),"row-key":e.tabla.rowKey,filter:e.tabla.search,"table-style":{height:"1px"},dense:"",flat:"",bordered:"","wrap-cells":"","virtual-scroll":""},{"top-right":(0,n.k6)(function(t){return[(0,n.bF)(o,{"hide-underline":"",color:"primary",modelValue:e.tabla.search,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.tabla.search=a})},null,8,["modelValue"])]}),body:(0,n.k6)(function(a){return[(0,n.bF)(p,{props:a},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.cols,function(t){return(0,n.uX)(),(0,n.CE)(n.FK,null,[t.normal?((0,n.uX)(),(0,n.Wv)(r,{key:t.field,props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(a.row[t.field]),1)]}),_:2},1032,["props"])):(0,n.Q3)("v-if",!0),t.popup?((0,n.uX)(),(0,n.Wv)(r,{key:t.field,props:a},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.getLabel(a.row[t.field],t.options)),1),(0,n.bF)(w,{class:"tablas-medico_popup_edit",modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},onSave:function(n){return e.actualizar(a.key,t.field,a.row[t.field])}},{default:(0,n.k6)(function(){return[t.input?((0,n.uX)(),(0,n.Wv)(b,{key:0,modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},type:t.type,rules:e.rules(t.rules)},null,8,["modelValue","onUpdate:modelValue","type","rules"])):(0,n.Q3)("v-if",!0),t.select?((0,n.uX)(),(0,n.Wv)(v,{key:1,modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},options:t.options,rules:e.rules(t.rules),onInput:function(n){return e.actualizar(a.key,t.field,a.row[t.field])}},null,8,["modelValue","onUpdate:modelValue","options","rules","onInput"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])):(0,n.Q3)("v-if",!0),t.nopopup?((0,n.uX)(),(0,n.Wv)(r,{key:t.field,props:a},{default:(0,n.k6)(function(){return[t.checkbox?((0,n.uX)(),(0,n.Wv)(k,{key:0,modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},"true-value":t.true_value,"false-value":t.false_value,color:"secondary",dense:"",onInput:function(n){return e.actualizar(a.key,t.field,a.row[t.field])}},null,8,["modelValue","onUpdate:modelValue","true-value","false-value","onInput"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"])):(0,n.Q3)("v-if",!0),t.pick?((0,n.uX)(),(0,n.Wv)(r,{key:t.field,props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(_,{name:"simbolo3",size:"sm",style:(0,l.Tr)({color:a.row[t.field]||"#FFFFFF"})},{default:(0,n.k6)(function(){return[(0,n.bF)(w,{class:"tablas-medico_popup_edit",ref_for:!0,ref:"popupEdit".concat(t.field).concat(a.key),modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},persistent:!!a.row.modalProxy,onShow:function(n){return e.onPopupEdit(a.row,t,a.key)},onSave:function(n){return e.actualizar(a.key,t.field,a.row[t.field])}},{default:(0,n.k6)(function(){return[t.input?((0,n.uX)(),(0,n.Wv)(b,{key:0,modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},type:t.type,rules:e.rules(t.rules)},null,8,["modelValue","onUpdate:modelValue","type","rules"])):(0,n.Q3)("v-if",!0),t.select?((0,n.uX)(),(0,n.Wv)(v,{key:1,modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},options:t.options,rules:e.rules(t.rules),onInput:function(n){return e.actualizar(a.key,t.field,a.row[t.field])}},null,8,["modelValue","onUpdate:modelValue","options","rules","onInput"])):(0,n.Q3)("v-if",!0),t.color?((0,n.uX)(),(0,n.Wv)(b,{key:2,class:(0,l.C4)(["input-".concat(a.key)]),modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(V,{modelValue:a.row.modalProxy,"onUpdate:modelValue":function(e){return a.row.modalProxy=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(h,{style:{padding:0,background:"transparent"}},{default:(0,n.k6)(function(){return[(0,n.bF)(y,{modelValue:a.row[t.field],"onUpdate:modelValue":function(e){return a.row[t.field]=e},"no-header":""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",d,[(0,n.bF)(g,{label:"Aceptar",flat:"",dense:"",onClick:function(n){return e.onColor(a.key,t.field,a.row)}},null,8,["onClick"])])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["class","modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["modelValue","onUpdate:modelValue","persistent","onShow","onSave"])]}),_:2},1032,["style"])]}),_:2},1032,["props"])):(0,n.Q3)("v-if",!0),t.delete?((0,n.uX)(),(0,n.Wv)(r,{key:t.field,props:a},{default:(0,n.k6)(function(){return[(0,n.bF)(_,{class:"cursor-pointer",name:"delete",size:"xs",color:"primary",onClick:function(t){return e.eliminar(a.key)}},null,8,["onClick"])]}),_:2},1032,["props"])):(0,n.Q3)("v-if",!0)],64)}),256))]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination","row-key","filter"])]}),_:1},512)])])]}),_:1})]}),_:1}),(0,n.bF)(U,{class:"tablas-medico_crear",modelValue:e.modal,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.modal=a}),title:e.tabla.title,ok:"Grabar",icon_ok:"save","esc-click":"",onSubmit:a[4]||(a[4]=function(a){return e.crear(e.tabla.destino,e.tabla.princod)})},{default:(0,n.k6)(function(){return[(0,n.bF)(T,{ref:"form"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",f,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tabla.configForm,function(a){return(0,n.uX)(),(0,n.CE)("div",{class:(0,l.C4)(a.clase)},[a.input?((0,n.uX)(),(0,n.Wv)(b,{key:0,modelValue:a.value,"onUpdate:modelValue":function(e){return a.value=e},label:a.label,type:a.type,disable:a.disable,rules:e.rules(a.rules)},null,8,["modelValue","onUpdate:modelValue","label","type","disable","rules"])):(0,n.Q3)("v-if",!0),a.select?((0,n.uX)(),(0,n.Wv)(v,{key:1,modelValue:a.value,"onUpdate:modelValue":function(e){return a.value=e},label:a.label,options:a.options,disable:a.disable,rules:e.rules(a.rules)},null,8,["modelValue","onUpdate:modelValue","label","options","disable","rules"])):(0,n.Q3)("v-if",!0),a.checkbox?((0,n.uX)(),(0,n.Wv)(k,{key:2,modelValue:a.value,"onUpdate:modelValue":function(e){return a.value=e},label:a.label,disable:a.disable,"true-value":a.trueValue,"false-value":a.falseValue,dense:""},null,8,["modelValue","onUpdate:modelValue","label","disable","true-value","false-value"])):(0,n.Q3)("v-if",!0),a.color?((0,n.uX)(),(0,n.Wv)(F,{key:3,modelValue:a.value,"onUpdate:modelValue":function(e){return a.value=e},boton:""},null,8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)],2)}),256))])]}),_:1},512)]}),_:1},8,["modelValue","title"])])}var m=t(76080),b=t.n(m),v=t(45254),w=t.n(v),k=(t(74260),t(52133),t(50310),t(32203),t(6724),t(83190),t(50425)),g=t(82351),y=t(94509),h=t(88567),V=t(95718),_=t(34262),T=t(2739),A=t(9736),C=t(16648),F=t(3112),U=t(91768),Q=t(11654),I=t(95477),S=t(80103),D=t(982),E=t(73922),q=t(57668),O=t(81288),P=t(30640),X=t(19230),W=(t(39866),t(10239),t(62692),t(80660)),x={getCodes:function(){var e={SANGRE:"0000-0001",ALERGIA:"0000-0002",MEDICINA:"0000-0003",PATOLOGI:"0000-0004",OPERACIO:"0000-0005",HOSPITAL:"0000-0006",PARASITO:"0000-0007",CRISTAL:"0000-0008",PIEL:"0000-0009",DIAGNOS:"0000-0010",VACUNA:"0000-0011",TABLA_SE:"0000-0012",COLEGIO:"0000-0013",EQUI_IMC:"0000-0014"};return e},getTablaMa:function(e){return w()(b()().m(function a(){return b()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,W.$http.get("api/TablasController/getTablaMa",{params:{siscod:e}}))}},a)}))()},getDatosTabla:function(e){return w()(b()().m(function a(){return b()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,W.$http.get("api/TablasController/getDatosTabla",{params:e}))}},a)}))()},saveDatosTabla:function(e){return w()(b()().m(function a(){return b()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,W.$http.post("api/TablasController/saveDatosTabla",{data:e}))}},a)}))()},updateDatosTabla:function(e){return w()(b()().m(function a(){return b()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,W.$http.post("api/TablasController/updateDatosTabla",{data:e}))}},a)}))()},deleteDatosTabla:function(e,a,t){return w()(b()().m(function n(){var o;return b()().w(function(n){while(1)switch(n.n){case 0:return o={key:e,tabla:a},t&&(o.princod=t),n.a(2,W.$http.delete("api/TablasController/deleteDatosTabla",{params:{params:o}}))}},n)}))()},getRules:function(e){for(var a=[],t=function(){var t=e[n];if("required"===t&&a.push(function(e){return!!e||"Campo obligatorio"}),t&&t.includes("maxlength")){var o=parseInt(t.split("-")[1]);a.push(function(e){return e.length<=o||"Máximo ".concat(o," caracteres")})}"isnumber"===t&&a.push(function(e){return!isNaN(e)||"Ingrese un número"})},n=0;n<e.length;n++)t();return a}},K={components:{QPopupEdit:r.GT,QTable:k.A,QTr:g.A,QTd:y.A,QCard:h.A,QCardSection:V.A,QIcon:_.A,QForm:T.A,QInput:A.A,QSelect:C.A,QCheckbox:F.A,QBtn:Q.A,QColor:U.A,QPopupProxy:I.A,QBanner:S.A,SieModal:P.A,SieColor:X.A,QSearch:r.Ks},props:{siscod:String},data:function(){var e=this;return{buttons:[{icon:"add",label:"Agregar",click:function(){e.abrirFormulario()}},{icon:"print",label:"Imprimir",click:function(){e.imprimir()}}],tabla_ma:{data:[],columns:[],pagination:{},rowKey:"",search:""},tabla:{data:[],columns:[],pagination:{},rowKey:"",search:"",configForm:[],title:"",destino:"",princod:null,buttons:!1},rowKeySelected:"",modal:!1,codes:x.getCodes()}},computed:{isLess:function(){return(0,O.isLess)()}},methods:{getTablaMa:function(e){var a=this;return w()(b()().m(function t(){var n,o,r,l,u;return b()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,x.getTablaMa(e);case 1:n=t.v,o=n.data,r=n.columns,l=n.pagination,u=n.rowKey,a.tabla_ma={data:o,columns:r,pagination:l,rowKey:u};case 2:return t.a(2)}},t)}))()},onRow:function(e){var a=this;return w()(b()().m(function t(){var n,o,r,l,u,i,s,c,d;return b()().w(function(t){while(1)switch(t.n){case 0:return n=e.row,t.n=1,x.getDatosTabla({table:n.TABDEST,princod:n.PRINCOD});case 1:o=t.v,r=o.data,l=o.columns,u=o.pagination,i=o.rowKey,s=o.title,c=o.configForm,d=o.buttons,a.tabla={data:r,columns:l,pagination:u,rowKey:i,title:s,configForm:c,destino:n.TABDEST,princod:n.PRINCOD,buttons:d},a.rowKeySelected=n.TABCOD;case 2:return t.a(2)}},t)}))()},onRowTabla:function(e){console.log(e)},abrirFormulario:function(){this.modal=!0},crear:function(e,a){var t=this;return w()(b()().m(function n(){var o,r,l,u,i;return b()().w(function(n){while(1)switch(n.p=n.n){case 0:return o={form:t.tabla.configForm.map(function(e){return{key:e.key,value:e.value}}),table:e,princod:a},n.p=1,n.n=2,t.$refs.form.validate();case 2:if(r=n.v,!r){n.n=5;break}return n.n=3,x.saveDatosTabla(o);case 3:return l=n.v,n.n=4,t.onRow({row:{TABDEST:e,TABCOD:t.rowKeySelected,PRINCOD:a}});case 4:t.$refs.form.reset(),(0,D["default"])(l,"success");case 5:n.n=7;break;case 6:n.p=6,i=n.v,u=i.error,(0,D["default"])(u.message,"error");case 7:return n.a(2)}},n,null,[[1,6]])}))()},actualizar:function(e,a,t){var n=this;return w()(b()().m(function o(){var r,l,u;return b()().w(function(o){while(1)switch(o.p=o.n){case 0:return r={form:{},key:e,table:n.tabla.destino,princod:n.tabla.princod},r.form[a]=t,o.p=1,o.n=2,x.updateDatosTabla(r);case 2:l=o.v,(0,D["default"])(l,"success"),o.n=4;break;case 3:o.p=3,u=o.v,(0,D["default"])(u.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},eliminar:function(e){var a=this;return w()(b()().m(function t(){var n,o,r,l,u,i;return b()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,a.$confirmar("¿Está seguro de eliminar? Esta acción es irreversible.","delete");case 1:if(n=t.v,!n){t.n=4;break}return o=a.tabla.destino,r=a.tabla.princod,t.n=2,x.deleteDatosTabla(e,o,r);case 2:return l=t.v,t.n=3,a.onRow({row:{TABDEST:o,TABCOD:a.rowKeySelected,PRINCOD:r}});case 3:(0,D["default"])(l,"success");case 4:t.n=6;break;case 5:t.p=5,i=t.v,u=i.error,(0,D["default"])(u.message,"error");case 6:return t.a(2)}},t,null,[[0,5]])}))()},rules:function(e){return x.getRules(e)},imprimir:function(){var e=(0,q["default"])(),a="medico/reporte-tablas/reporte/",t=e.url+"/"+a;(0,E["default"])({parametros:{param:this.codes[this.tabla.destino]},metodo:"GET",nombre:"Reporte",url:t,formatoTipo:"formato",formato:"pdf",tipo:(0,O.isLess)()?"download":"vista"})},onPopupEdit:function(e,a,t){if(a.color&&Object.prototype.hasOwnProperty.call(e,"modalProxy")){var n=document.querySelector(".input-".concat(t," input"));setTimeout(function(){n.click()},300)}},onColor:function(e,a,t){t.modalProxy=!1,this.$refs["popupEdit".concat(a).concat(e)][0].$refs.popover.hide()},getLabel:function(e,a){if(a){var t=a.find(function(a){return a.value===e});t&&(e=t.label)}return e}},created:function(){var e=this;return w()(b()().m(function a(){return b()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getTablaMa(e.siscod);case 1:return a.a(2)}},a)}))()}},L=t(12807);const R=(0,L.A)(K,[["render",p],["__scopeId","data-v-58b4bf82"]]);var B=R,M={components:{Tablas:B,QPage:r.Tu}};const N=(0,L.A)(M,[["render",o],["__scopeId","data-v-0b4a7d32"]]);var $=N}}]);