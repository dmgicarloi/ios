"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[73162],{73162:function(e,a,t){t.r(a),t.d(a,{default:function(){return fa}});var o=t(61758),i=t(58790);function l(e,a){var t=(0,o.g2)("q-tab"),l=(0,o.g2)("q-tab-pane"),n=(0,o.g2)("q-tabs"),c=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(c,null,{default:(0,o.k6)(function(){return[(0,o.bF)(n,{class:"col",inverted:"",modelValue:e.selectTab,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.selectTab=a})},{title:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.listaTabs,function(e,a){return(0,o.uX)(),(0,o.Wv)(t,{key:a,class:"q-tabs-flex",label:e.desc,name:e.id,align:"justify"},null,8,["label","name"])}),128))]}),default:(0,o.k6)(function(){return[(0,o.bF)(l,{class:"q-pa-xs",name:e.selectTab,style:(0,i.Tr)({height:e.alto+"px"})},{default:(0,o.k6)(function(){return[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e.selectTab),{alto:e.alto,acceso:e.acceso},null,8,["alto","acceso"]))]}),_:1},8,["name","style"])]}),_:1},8,["modelValue"])]}),_:1})}var n=t(6123),c={class:"row"},s={class:"col q-ma-xs q-pt-md"},r={class:"row col q-ma-md"},d={class:"q-ma-sm"},u={key:0,class:"row"},m={class:"col"},f={key:1,class:"row justify-end"},p={class:"row cursor-pointer q-body-1 items-center q-pb-sm border-th"},A={class:"col-3 q-tp-sm cutText"},I={class:"col column justify-center q-pl-sm"},v={class:"col cutText"},b={class:"col column justify-center q-pl-sm"},g={key:0,class:"col cutText text-right q-pr-lg"},h=["onClick"],D={class:"col-3 q-tp-sm cutText"},T={class:"col column justify-center q-pl-sm"},C={class:"col cutText"},_={class:"col column justify-center q-pl-sm"},P={key:0,class:"row cutText text-right q-pr-lg"},V={class:"q-ma-sm"},k={class:"text-bold"},S={key:0,class:"row q-ma-sm"},O={key:1,class:"row justify-end"},E={class:"row cursor-pointer q-body-1 items-center q-pb-sm border-th"},F={class:"col cutText"},y={class:"col column justify-center q-pl-sm"},U={class:"col column justify-center q-pl-sm"},R={key:0,class:"col cutText text-right q-pr-lg"},L={class:"row cursor-pointer q-body-1 items-center border-td"},N={class:"col cutText"},q={class:"col column justify-center q-pl-sm"},M={class:"col cutText"},$={class:"col column justify-center"},j={key:0,class:"row text-left q-pr-lg"};function H(e,a){var t=(0,o.g2)("sie-editor"),l=(0,o.g2)("sie-modal"),n=(0,o.g2)("q-input"),H=(0,o.g2)("q-btn"),w=(0,o.g2)("q-popup-edit"),Q=(0,o.g2)("virtual-list"),x=(0,o.g2)("sie-select");return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(l,{class:"column",css:{minWidth:"70vw",maxWidth:"80vw"},title:"Editar plantilla "+e.actividadSelect.DESCRIPCION,modelValue:e.modalPlantilla,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.modalPlantilla=a}),onSubmit:e.grabarPlantilla},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",s,[a[7]||(a[7]=(0,o.Lk)("span",{class:"text-bold"},"Etiquetas",-1)),(0,o.Lk)("div",r,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.etkMensajes,function(e,a){return(0,o.uX)(),(0,o.CE)("div",{key:a,class:"col-6 row q-mb-xs"},[(0,o.Lk)("b",null,(0,i.v_)(e.titulo)+":",1),(0,o.Lk)("span",null,(0,i.v_)(e.etk),1)])}),128))]),(0,o.bF)(t,{class:"q-mt-sm",modelValue:e.texto,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.texto=a}),label:e.$t("matricula.mensaje")},null,8,["modelValue","label"])])]}),_:1},8,["title","modelValue","onSubmit"]),(0,o.Lk)("div",{class:"col-6 column q-card",style:(0,i.Tr)({height:e.alto+"px"})},[(0,o.Lk)("div",d,[a[8]||(a[8]=(0,o.Lk)("span",{class:"text-bold"},"Tipo de Actividad",-1)),e.activaAgregar?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",m,[(0,o.bF)(n,{class:"q-if-outlined",modelValue:e.descTipo,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.descTipo=a}),"float-label":e.$t("matricula.descripcion")},null,8,["modelValue","float-label"])]),(0,o.bF)(H,{flat:"",round:"",icon:"save",onClick:a[3]||(a[3]=function(a){return e.grabarTipo(e.descTipo)})}),(0,o.bF)(H,{flat:"",round:"",icon:"close",onClick:e.cancelarAdd},null,8,["onClick"])])):((0,o.uX)(),(0,o.CE)("div",f,[e.acceso>1?((0,o.uX)(),(0,o.Wv)(H,{key:0,flat:"",round:"",icon:"add",onClick:e.nuevoTipo},null,8,["onClick"])):(0,o.Q3)("v-if",!0)])),(0,o.Lk)("div",p,[(0,o.Lk)("div",A,[(0,o.Lk)("b",I,(0,i.v_)(e.$t("codigo")),1)]),(0,o.Lk)("div",v,[(0,o.Lk)("b",b,(0,i.v_)(e.$t("matricula.descripcion")),1)]),e.acceso>2?((0,o.uX)(),(0,o.CE)("div",g)):(0,o.Q3)("v-if",!0)]),(0,o.bF)(Q,{size:42,remain:e.maxLista,options:e.tipoActividad},{item:(0,o.k6)(function(a){var t=a.item;return[(0,o.Lk)("div",{class:(0,i.C4)(["row cursor-pointer q-body-1 items-center border-td",{"custom-selected":e.actividadTipoSelect.ID_ACTIVIDAD_TIPO===t.ID_ACTIVIDAD_TIPO}]),onClick:function(a){return e.selectUser(t)}},[(0,o.Lk)("div",D,[(0,o.Lk)("span",T,(0,i.v_)(t.ID_ACTIVIDAD_TIPO),1)]),(0,o.Lk)("div",C,[(0,o.Lk)("span",_,[(0,o.eW)((0,i.v_)(t.DESCRIPCION),1),e.acceso>2?((0,o.uX)(),(0,o.Wv)(w,{key:0,modelValue:t.DESCRIPCION,"onUpdate:modelValue":function(e){return t.DESCRIPCION=e},onSave:function(a){return e.grabarTipo(t)}},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{modelValue:t.DESCRIPCION,"onUpdate:modelValue":function(e){return t.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,o.Q3)("v-if",!0)])]),e.acceso>2?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.bF)(H,{flat:"",round:"",size:"sm",icon:"delete",onClick:function(a){return e.eliminarTipo(t)}},null,8,["onClick"])])):(0,o.Q3)("v-if",!0)],10,h)]}),_:1},8,["remain","options"])])],4),e.actividadTipoSelect.ID_ACTIVIDAD_TIPO?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"col-6 column q-card",style:(0,i.Tr)({height:e.alto+"px"})},[(0,o.Lk)("div",V,[(0,o.Lk)("span",k,"Actividades de "+(0,i.v_)(e.actividadTipoSelect.DESCRIPCION),1),e.activaAddActividad?((0,o.uX)(),(0,o.CE)("div",S,[(0,o.bF)(x,{class:"col",type:"outlined",noBottom:"",modelValue:e.concob,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.concob=a}),options:e.conceptos,label:"DESCRIPCION",val:"VALOR",placeholder:e.$t("cobros.concepto")},null,8,["modelValue","options","placeholder"]),(0,o.bF)(n,{class:"q-if-outlined",modelValue:e.descActividad,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.descActividad=a}),"float-label":e.$t("matricula.descripcion")},null,8,["modelValue","float-label"]),(0,o.bF)(H,{flat:"",round:"",icon:"save",onClick:e.grabarActividad},null,8,["onClick"]),(0,o.bF)(H,{flat:"",round:"",icon:"close",onClick:e.cancelaAddActividad},null,8,["onClick"])])):((0,o.uX)(),(0,o.CE)("div",O,[e.acceso>1?((0,o.uX)(),(0,o.Wv)(H,{key:0,flat:"",round:"",icon:"add",onClick:a[6]||(a[6]=function(a){return e.activaAddActividad=!0})})):(0,o.Q3)("v-if",!0)])),(0,o.Lk)("div",E,[(0,o.Lk)("div",F,[(0,o.Lk)("b",y,(0,i.v_)(e.$t("matricula.descripcion")),1)]),(0,o.Lk)("div",{class:(0,i.C4)(["col cutText q-pr-lg",{"text-right":e.acceso>2}])},[(0,o.Lk)("b",U,(0,i.v_)(e.$t("cobros.concepto")),1)],2),e.acceso>2?((0,o.uX)(),(0,o.CE)("div",R)):(0,o.Q3)("v-if",!0)]),(0,o.bF)(Q,{size:10,remain:e.maxLista,options:e.listaActividades},{item:(0,o.k6)(function(a){var t=a.item;return[(0,o.Lk)("div",L,[(0,o.Lk)("div",N,[(0,o.Lk)("span",q,[(0,o.eW)((0,i.v_)(t.DESCRIPCION),1),e.acceso>2?((0,o.uX)(),(0,o.Wv)(w,{key:0,modelValue:t.DESCRIPCION,"onUpdate:modelValue":function(e){return t.DESCRIPCION=e},onSave:function(a){return e.grabarActividad(t)}},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{modelValue:t.DESCRIPCION,"onUpdate:modelValue":function(e){return t.DESCRIPCION=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):(0,o.Q3)("v-if",!0)])]),(0,o.Lk)("div",M,[(0,o.Lk)("span",$,[(0,o.eW)((0,i.v_)(t.CONCEPTO),1),e.acceso>2?((0,o.uX)(),(0,o.Wv)(w,{key:0,modelValue:t.CONCOB,"onUpdate:modelValue":function(e){return t.CONCOB=e}},{default:(0,o.k6)(function(){return[(0,o.bF)(x,{class:"col",type:"outlined",noBottom:"",modelValue:t.CONCOB,"onUpdate:modelValue":function(e){return t.CONCOB=e},options:e.conceptos,label:"DESCRIPCION",val:"VALOR",onSelected:function(a){return e.grabarActividad(t)}},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,o.Q3)("v-if",!0)])]),e.acceso>2?((0,o.uX)(),(0,o.CE)("div",j,[(0,o.bF)(H,{flat:"",round:"",size:"sm",icon:"write",onClick:function(a){return e.editarPlantilla(t)}},null,8,["onClick"]),(0,o.bF)(H,{flat:"",round:"",size:"sm",icon:"delete",onClick:function(a){return e.eliminarTipo(t)}},null,8,["onClick"])])):(0,o.Q3)("v-if",!0)])]}),_:1},8,["remain","options"])])],4)):(0,o.Q3)("v-if",!0)])}t(48426);var w=t(34858),Q=t(80660),x=t(65229),G=t(93616),X=t(982),W=t(69027),Y=t(6083),B=t(30640),z={directives:{sieActive:x.A},components:{virtualList:w.Ay,QPopupEdit:n.GT,sieSelect:G.A,sieEditor:Y.A,sieModal:B.A,QInput:n.ie,QBtn:n.Il},data:function(){return{buscado:"",tipoActividad:[],actividadTipoSelect:{},activaAgregar:!1,descTipo:"",actividadTipoSelectDesc:null,listaActividades:[],conceptos:[],activaAddActividad:!1,concob:null,activaEditConcepto:null,descActividad:null,modalPlantilla:null,actividadSelect:{},texto:null,etkMensajes:[{etk:"{{actividadnombre}}",titulo:"Nombre de la Actividad"},{etk:"{{fechainicioactividad}}",titulo:"Inicio de la Actividad"},{etk:"{{fechafinactividad}}",titulo:"Fin de la Actividad"},{etk:"{{fechainicioinvitacion}}",titulo:"Inicio de la Invitación"},{etk:"{{fechafininvitacion}}",titulo:"Fin de la Invitación"},{etk:"{{responsableactividad}}",titulo:"Responsable de la Actividad"},{etk:"{{costo}}",titulo:"Costo de la Actividad"},{etk:"{{fechavenc}}",titulo:"Fecha de Vencimiento"}]}},props:["alto","acceso"],methods:{cargaTipos:function(){var e=this;Q.$http.get("api/HyoActividadtipo/obtTipos").then(function(a){var t=a.json;e.tipoActividad=t})},selectUser:function(e){var a=this;this.actividadTipoSelect=e,e.active=!0,Q.$http.get("api/HyoActividad/obtActividades",{params:{id:this.actividadTipoSelect.ID_ACTIVIDAD_TIPO}}).then(function(e){var t=e.json;a.listaActividades=t})},nuevoTipo:function(){this.activaAgregar=!0},grabarTipo:function(e){var a=this;if(e){var t={};"string"===typeof e?t.DESCRIPCION=e:t={DESCRIPCION:e.DESCRIPCION,ID_ACTIVIDAD_TIPO:e.ID_ACTIVIDAD_TIPO},Q.$http.post("api/HyoActividadtipo/agregarActividad",{objIns:t}).then(function(e){var t=e.json,o="mensajes.m0001"===t?"success":"error";(0,X["default"])(a.$t(t),o),"mensajes.m0001"===t&&(a.cancelarAdd(),a.cargaTipos())})}},cancelarAdd:function(){this.activaAgregar=!1,this.descTipo=null},eliminarTipo:function(e){var a=this,t="api/HyoActividadtipo/eliminarTipo";e.ID_ACTIVIDAD&&(t="api/HyoActividad/eliminarActividad"),(0,W.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010")}).then(function(o){o&&Q.$http.get(t,{params:{fila:e}}).then(function(t){var o=t.json,i="error";"ok"===o&&(i="success"),(0,X["default"])(a.$t("mensajes.m0006."+o),i),"ok"===o&&(e.ID_ACTIVIDAD?a.selectUser(a.actividadTipoSelect):a.cargaTipos())})})},cancelaAddActividad:function(){this.descActividad=null,this.concob=null,this.activaAddActividad=!1},grabarActividad:function(e){var a=this;e.DESCRIPCION||(e={DESCRIPCION:this.descActividad,CONCOB:this.concob,ID_ACTIVIDAD_TIPO:this.actividadTipoSelect.ID_ACTIVIDAD_TIPO}),e.DESCRIPCION&&e.CONCOB&&Q.$http.get("api/HyoActividad/agregarActividad",{params:{fila:e}}).then(function(e){e.json;a.selectUser(a.actividadTipoSelect),a.cancelaAddActividad()})},editarConcepto:function(e){this.activaEditConcepto=!0},editarPlantilla:function(e){var a=this;this.modalPlantilla=!0,this.actividadSelect=Object.assign(e),Q.$http.get("api/HyoActividadplantilla/obtPlantilla",{params:{ID_ACTIVIDAD:e.ID_ACTIVIDAD}}).then(function(e){var t=e.json;a.texto=t[0].TEXTO}),console.log(e)},grabarPlantilla:function(){var e=this;Q.$http.post("api/HyoActividadplantilla/grabarPlantilla",{ID_ACTIVIDAD:this.actividadSelect.ID_ACTIVIDAD,texto:this.texto}).then(function(a){var t=a.json,o="error";"m0001"===t&&(o="success",e.modalPlantilla=!1),(0,X["default"])(e.$t("mensajes."+t),o)})}},computed:{maxLista:function(){return(this.alto-47)/12}},mounted:function(){var e=this;this.cargaTipos(),Q.$http.get("api/HyoConcobro/obtConceptos").then(function(a){var t=a.json;e.conceptos=t})}},Z=t(12807);const K=(0,Z.A)(z,[["render",H]]);var J=K,ee={class:"row"},ae={class:"row cursor-pointer q-body-1 items-center q-pb-sm border-th"},te={class:"col column justify-center q-pl-sm"},oe={key:0,class:"col-1 cutText text-right q-pr-lg"},ie={class:"col"},le={class:"row cursor-pointer q-body-1 items-center border-td"},ne={key:0,class:"col column justify-center q-pl-sm"},ce={key:1,class:"col column justify-center q-pl-sm"},se={key:0,class:"col-1 cutText text-right q-pr-lg"},re={class:"row"},de={class:"row col justify-arround"},ue={class:"row col justify-center"},me={class:"row col justify-center"},fe={class:"row"},pe={class:"row"},Ae={class:"row"},Ie={class:"row"},ve={class:"row"},be={class:"row"},ge={key:0,class:"row justify-end"},he={key:1,class:"row"},De={class:"row cursor-pointer q-body-1 items-center q-pb-sm border-th q-mt-sm"},Te={class:"col-4 q-tp-sm cutText"},Ce={class:"col column justify-center q-pl-sm"},_e={class:"col q-tp-sm cutText"},Pe={class:"col column justify-center q-pl-sm"},Ve={class:"col"},ke={class:"row cursor-pointer q-body-1 items-center border-td"},Se={class:"col-4 q-tp-sm cutText"},Oe={class:"col column justify-center q-pl-sm"},Ee={class:"col q-tp-sm cutText"},Fe={class:"col column justify-center q-pl-sm"};function ye(e,a){var t=(0,o.g2)("q-search"),l=(0,o.g2)("q-btn"),n=(0,o.g2)("virtual-list"),c=(0,o.g2)("q-tab"),s=(0,o.g2)("sie-select"),r=(0,o.g2)("q-toggle"),d=(0,o.g2)("q-item-side"),u=(0,o.g2)("q-item-tile"),m=(0,o.g2)("q-item-main"),f=(0,o.g2)("q-item"),p=(0,o.g2)("q-card-separator"),A=(0,o.g2)("q-datetime"),I=(0,o.g2)("q-card-main"),v=(0,o.g2)("q-card"),b=(0,o.g2)("q-input"),g=(0,o.g2)("q-select"),h=(0,o.g2)("q-tab-pane"),D=(0,o.g2)("sie-tree"),T=(0,o.g2)("q-tabs"),C=(0,o.g2)("sie-modal");return(0,o.uX)(),(0,o.CE)("div",{class:"column q-card",style:(0,i.Tr)({height:e.alto+"px"})},[(0,o.Lk)("div",ee,[(0,o.bF)(t,{class:"no-bottom q-if-outlined col",modelValue:e.buscado,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.buscado=a}),onInput:e.filtrarProgramacion},null,8,["modelValue","onInput"]),e.acceso>1?((0,o.uX)(),(0,o.Wv)(l,{key:0,flat:"",round:"",icon:"add",onClick:e.abrirModalEditar},null,8,["onClick"])):(0,o.Q3)("v-if",!0)]),(0,o.Lk)("div",ae,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.configTblProgramacion.columns,function(a,t){return(0,o.uX)(),(0,o.CE)("div",{key:t,class:"col q-tp-sm cutText"},[(0,o.Lk)("b",te,(0,i.v_)(e.$t(a.label)),1)])}),128)),e.acceso>2?((0,o.uX)(),(0,o.CE)("div",oe)):(0,o.Q3)("v-if",!0)]),(0,o.Lk)("div",ie,[(0,o.bF)(n,{size:42,remain:e.maxLista,options:e.programacionFiltrado},{item:(0,o.k6)(function(a){var t=a.item;return[(0,o.Lk)("div",le,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.configTblProgramacion.columns,function(a,l){return(0,o.uX)(),(0,o.CE)("div",{key:l,class:"col q-tp-sm cutText"},[a.fecha?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.CE)("span",ne,(0,i.v_)(t[a.field]),1)),a.fecha?((0,o.uX)(),(0,o.CE)("span",ce,(0,i.v_)(e.date(t[a.field],"DD/MM/YYYY HH:mm:SS")),1)):(0,o.Q3)("v-if",!0)])}),128)),e.acceso>2?((0,o.uX)(),(0,o.CE)("div",se,[(0,o.bF)(l,{flat:"",round:"",size:"sm",icon:"edit",onClick:function(a){return e.abrirModalEditar(t)}},null,8,["onClick"]),(0,o.bF)(l,{flat:"",round:"",size:"sm",icon:"delete",onClick:function(a){return e.eliminarProgramacion(t)}},null,8,["onClick"])])):(0,o.Q3)("v-if",!0)])]}),_:1},8,["remain","options"])]),(0,o.bF)(C,{css:{minWidth:"70vw"},title:"Artículos",modelValue:e.modalEditar,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.modalEditar=a}),onSubmit:e.grabarProgramacion,"btn-load":e.guardando,"onUpdate:btnLoad":a[24]||(a[24]=function(a){return e.guardando=a})},{default:(0,o.k6)(function(){return[(0,o.bF)(T,{inverted:"",modelValue:e.tabSelected,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.tabSelected=a})},{title:(0,o.k6)(function(){return[(0,o.bF)(c,{class:"q-tabs-flex",label:"Programación",name:"programacion",default:""}),(0,o.bF)(c,{class:"q-tabs-flex",label:"Dirigido",name:"dirigido"}),1!==e.dataProgramacion.MASIVO?((0,o.uX)(),(0,o.Wv)(c,{key:0,class:"q-tabs-flex",label:"Responsable",name:"responsable"})):(0,o.Q3)("v-if",!0)]}),default:(0,o.k6)(function(){return[(0,o.bF)(h,{class:"column",name:"programacion"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",re,[(0,o.bF)(s,{class:"col",type:"outlined",noBottom:"",modelValue:e.dataProgramacion.ID_ACTIVIDAD,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.dataProgramacion.ID_ACTIVIDAD=a}),options:e.listaActividades,label:"DESCRIPCION",val:"ID_ACTIVIDAD",placeholder:e.$t("intranet.actividad")},null,8,["modelValue","options","placeholder"]),(0,o.bF)(r,{modelValue:e.dataProgramacion.GRATUITO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.dataProgramacion.GRATUITO=a}),"true-value":"1","false-value":"0",label:e.$t("gratuito")},null,8,["modelValue","label"])]),(0,o.Lk)("div",de,[(0,o.Lk)("div",ue,[(0,o.bF)(r,{modelValue:e.dataProgramacion.MASIVO,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.dataProgramacion.MASIVO=a}),"true-value":1,"false-value":0,label:e.$t("masivo"),onInput:e.filtraPersonal},null,8,["modelValue","label","onInput"])]),(0,o.Lk)("div",me,[(0,o.bF)(r,{modelValue:e.dataProgramacion.ASISTENCIA_DETALLE,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.dataProgramacion.ASISTENCIA_DETALLE=a}),"true-value":1,"false-value":0,label:e.$t("asistenciaDetallada")},null,8,["modelValue","label"])])]),1===e.dataProgramacion.MASIVO?((0,o.uX)(),(0,o.Wv)(s,{key:0,class:"col",type:"outlined",noBottom:"",modelValue:e.personalSelect,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.personalSelect=a}),options:e.listadoNoSelect,label:"USUNOM",val:"USUCOD",placeholder:e.$t("seguridad.personal"),onSelected:e.addResponsableEsp},null,8,["modelValue","options","placeholder","onSelected"])):(0,o.Q3)("v-if",!0),(0,o.bF)(v,null,{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"card-head-especial"},{default:(0,o.k6)(function(){return[(0,o.bF)(d,{color:"white",icon:"event_available"}),(0,o.bF)(m,null,{default:(0,o.k6)(function(){return[(0,o.bF)(u,{label:""},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.$t("infoActividad")),1)]}),_:1})]}),_:1})]}),_:1}),(0,o.bF)(p),(0,o.bF)(I,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",fe,[(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_ACTIVIDAD_I,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.dataProgramacion.FH_ACTIVIDAD_I=a}),"float-label":e.$t("fechainicio"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"]),(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_ACTIVIDAD_I,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.dataProgramacion.FH_ACTIVIDAD_I=a}),type:"time","float-label":e.$t("horainicio"),format:"hh:mm A"},null,8,["modelValue","float-label"])]),(0,o.Lk)("div",pe,[(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_ACTIVIDAD_F,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.dataProgramacion.FH_ACTIVIDAD_F=a}),"float-label":e.$t("fechafin"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"]),(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_ACTIVIDAD_F,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.dataProgramacion.FH_ACTIVIDAD_F=a}),type:"time","float-label":e.$t("horafin"),format:"hh:mm A"},null,8,["modelValue","float-label"])])]}),_:1})]}),_:1}),(0,o.bF)(v,{class:"q-mt-xs"},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"card-head-especial"},{default:(0,o.k6)(function(){return[(0,o.bF)(d,{color:"white",icon:"insert_invitation"}),(0,o.bF)(m,null,{default:(0,o.k6)(function(){return[(0,o.bF)(u,{label:""},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.$t("infoInvitacion")),1)]}),_:1})]}),_:1})]}),_:1}),(0,o.bF)(p),(0,o.bF)(I,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Ae,[(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_PLAZO_I,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.dataProgramacion.FH_PLAZO_I=a}),"float-label":e.$t("fechainicio"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"]),(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_PLAZO_I,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.dataProgramacion.FH_PLAZO_I=a}),type:"time","float-label":e.$t("horainicio"),format:"hh:mm A"},null,8,["modelValue","float-label"])]),(0,o.Lk)("div",Ie,[(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_PLAZO_F,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.dataProgramacion.FH_PLAZO_F=a}),"float-label":e.$t("fechafin"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"]),(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.FH_PLAZO_F,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.dataProgramacion.FH_PLAZO_F=a}),type:"time","float-label":e.$t("horafin"),format:"hh:mm A"},null,8,["modelValue","float-label"])])]}),_:1})]}),_:1}),"1"!==e.dataProgramacion.GRATUITO?((0,o.uX)(),(0,o.Wv)(v,{key:1,class:"q-mt-xs"},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"card-head-especial"},{default:(0,o.k6)(function(){return[(0,o.bF)(d,{color:"white",icon:"money"}),(0,o.bF)(m,null,{default:(0,o.k6)(function(){return[(0,o.bF)(u,{label:""},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.$t("infoDeuda")),1)]}),_:1})]}),_:1})]}),_:1}),(0,o.bF)(p),(0,o.bF)(I,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",ve,[(0,o.bF)(b,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.IMPORTE,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.dataProgramacion.IMPORTE=a}),"float-label":e.$t("cobros.monto")},null,8,["modelValue","float-label"]),(0,o.bF)(g,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.MONCOD,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.dataProgramacion.MONCOD=a}),"float-label":e.$t("moneda"),options:e.monedas},null,8,["modelValue","float-label","options"])]),(0,o.Lk)("div",be,[(0,o.bF)(g,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.MESCOB,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.dataProgramacion.MESCOB=a}),"float-label":e.$t("mes"),options:e.meses},null,8,["modelValue","float-label","options"]),(0,o.bF)(A,{class:"col no-bottom q-if-outlined",modelValue:e.dataProgramacion.F_VENCIMIENTO,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.dataProgramacion.F_VENCIMIENTO=a}),"float-label":e.$t("plazo"),format:"DD/MM/YYYY"},null,8,["modelValue","float-label"])])]}),_:1})]}),_:1})):(0,o.Q3)("v-if",!0)]}),_:1}),(0,o.bF)(h,{class:"q-card",name:"dirigido"},{default:(0,o.k6)(function(){return[(0,o.bF)(D,{modelValue:e.listaTree,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.listaTree=a})},null,8,["modelValue"])]}),_:1}),(0,o.bF)(h,{class:"q-card",name:"responsable"},{default:(0,o.k6)(function(){return[e.agregarResponsable?((0,o.uX)(),(0,o.CE)("div",he,[(0,o.bF)(s,{class:"col",type:"outlined",noBottom:"",modelValue:e.personalSelect,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.personalSelect=a}),options:e.listadoNoSelect,label:"USUNOM",val:"USUCOD",placeholder:e.$t("seguridad.personal"),onSelected:e.addResponsable},null,8,["modelValue","options","placeholder","onSelected"]),(0,o.bF)(l,{flat:"",round:"",icon:"close",onClick:a[21]||(a[21]=function(a){return e.agregarResponsable=!1})})])):((0,o.uX)(),(0,o.CE)("div",ge,[(0,o.bF)(l,{flat:"",round:"",icon:"add",onClick:a[19]||(a[19]=function(a){return e.agregarResponsable=!0})})])),(0,o.Lk)("div",De,[(0,o.Lk)("div",Te,[(0,o.Lk)("b",Ce,(0,i.v_)(e.$t("seguridad.usuario")),1)]),(0,o.Lk)("div",_e,[(0,o.Lk)("b",Pe,(0,i.v_)(e.$t("seguridad.nombre")),1)])]),(0,o.Lk)("div",Ve,[(0,o.bF)(n,{size:42,remain:8,options:e.listadoSelect},{item:(0,o.k6)(function(a){var t=a.item;return[(0,o.Lk)("div",ke,[(0,o.Lk)("div",Se,[(0,o.Lk)("span",Oe,(0,i.v_)(t.USUCOD),1)]),(0,o.Lk)("div",Ee,[(0,o.Lk)("span",Fe,(0,i.v_)(t.USUNOM),1)]),(0,o.bF)(l,{flat:"",round:"",size:"sm",icon:"delete",onClick:function(a){return e.addResponsable(t)}},null,8,["onClick"])])]}),_:1},8,["options"])])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1},8,["modelValue","onSubmit","btn-load"])],4)}t(10239),t(89571),t(50310),t(90095),t(70199),t(15547),t(515),t(83190),t(27153),t(68017),t(7346),t(13715);var Ue=t(18105),Re=t(59043),Le=t(33001),Ne={directives:{sieActive:x.A},components:{virtualList:w.Ay,QPopupEdit:n.GT,sieSelect:G.A,sieModal:B.A,QTabs:n.uw,QTab:n.zu,QTabPane:n.dg,QCard:n.C$,QDatetime:n.T5,QToggle:n.c5,QSelect:n.Si,sieTree:Re.A,QPopover:n.VM,QSearch:n.Ks,QBtn:n.Il,QItem:n.H0,QItemSide:n.n1,QItemMain:n.mF,QItemTile:n.lp,QCardSeparator:n.d6,QCardMain:n.d1,QInput:n.ie},data:function(){return{configTblProgramacion:{},buscado:null,programacionInicial:[],programacionFiltrado:[],modalEditar:!1,listaActividades:[],dataProgramacion:{ID_ACTIVIDAD_PROGRAMADA:null,ID_ACTIVIDAD:null,FH_ACTIVIDAD_I:new Date,FH_ACTIVIDAD_F:null,MESCOB:null,MONCOD:null,IMPORTE:null,FH_PLAZO_I:null,FH_PLAZO_F:null,F_VENCIMIENTO:null,ACTIVIDAD:null,GRATUITO:"0"},monedas:[],meses:[],listaTree:[],listadoPersonal:[],buscaPersonal:null,agregarResponsable:!1,listadoSelect:[],listadoNoSelect:[],personalSelect:{},eliminaPersonal:[],tabSelected:"programacion",guardando:!1}},props:["alto","acceso"],methods:{date:Ue.Ay,generarTabla:function(){var e={columns:[{name:"ACTIVIDAD",field:"ACTIVIDAD",align:"items-left",label:"matricula.descripcion"},{name:"FH_ACTIVIDAD_I",field:"FH_ACTIVIDAD_I",align:"items-center",fecha:!0,label:"fh_inicio"},{name:"FH_ACTIVIDAD_F",field:"FH_ACTIVIDAD_F",align:"items-center",fecha:!0,label:"fh_fin"},{name:"FH_PLAZO_I",field:"FH_PLAZO_I",align:"items-center",fecha:!0,label:"fh_inicio_i"},{name:"FH_PLAZO_F",field:"FH_PLAZO_F",align:"items-center",fecha:!0,label:"fh_fin_i"},{name:"GRATUITO_DES",field:"GRATUITO_DES",align:"items-center",label:"gratuito"},{name:"IMPORTE_FIN",field:"IMPORTE_FIN",align:"items-center",label:"cobros.monto"}],paginacion:{page:1,rowsPerPage:500},registrosSeleccionados:[],filter:"",estado:"T"};this.configTblProgramacion=e,this.obtProgramacion()},obtProgramacion:function(){var e=this;Q.$http.get("api/HyoActividadprogramada/obtProgramacion").then(function(a){var t=a.json;t.forEach(function(e){e.GRATUITO=e.GRATUITO.trim(),e.GRATUITO_DES="1"===e.GRATUITO?"Si":"No",e.IMPORTE&&(e.IMPORTE_FIN=e.MONSIG+" "+e.IMPORTE.toFixed(2))}),e.programacionInicial=t,e.filtrarProgramacion()})},abrirModalEditar:function(e){var a=this;this.agregarResponsable=!1,e.GRATUITO?this.dataProgramacion=Object.assign(e):this.dataProgramacion={ID_ACTIVIDAD_PROGRAMADA:null,ID_ACTIVIDAD:null,FH_ACTIVIDAD_I:null,FH_ACTIVIDAD_F:null,MESCOB:null,MONCOD:null,IMPORTE:null,FH_PLAZO_I:null,FH_PLAZO_F:null,F_VENCIMIENTO:null,ACTIVIDAD:null,GRATUITO:"1",MASIVO:0,ASISTENCIA_DETALLE:0},this.modalEditar=!0;var t=null;Q.$http.get("api/HyoActividad/obtActividades").then(function(e){var t=e.json;a.listaActividades=t}),this.listaTree=[],this.listadoPersonal=[],e.ID_ACTIVIDAD_PROGRAMADA&&(t=e.ID_ACTIVIDAD_PROGRAMADA,Q.$http.get("api/HyoActividadperfil/obtPerfilActividad",{params:{ID_ACTIVIDAD_PROGRAMADA:e.ID_ACTIVIDAD_PROGRAMADA}}).then(function(e){var t=e.json;t.forEach(function(e){a.listaTree.push(JSON.stringify({tipcod:e.TIPCOD,nemo:e.NEMO}))})})),Q.$http.get("api/HyoActividadencargado/obtPersonal",{params:{id:t}}).then(function(e){var t=e.json;a.listadoPersonal=t,a.filtraPersonal()})},filtraPersonal:function(){if(1===this.dataProgramacion.MASIVO){var e=(0,Le.filterArray)("1",{field:"ENCARGADO",list:this.listadoPersonal});e.length>0&&(this.personalSelect=e[0].USUCOD),this.addResponsableEsp((0,Le.filterArray)("1",{field:"ENCARGADO",list:this.listadoPersonal})[0]),this.listadoNoSelect=this.listadoPersonal}else this.listadoSelect=(0,Le.filterArray)("1",{field:"ENCARGADO",list:this.listadoPersonal}),this.listadoNoSelect=(0,Le.filterArray)("0",{field:"ENCARGADO",list:this.listadoPersonal}),this.agregarResponsable=!1,this.personalSelect=null},limpiaResp:function(){var e=this;return new Promise(function(a,t){e.listadoSelect.length>0&&e.listadoSelect[0].ID_ACTIVIDAD_ENCARGADO&&e.eliminaPersonal.push(e.listadoSelect[0].ID_ACTIVIDAD_ENCARGADO),a(!0)})},addResponsableEsp:function(e){var a=this;this.dataProgramacion.ID_ACTIVIDAD_PROGRAMADA?this.limpiaResp().then(function(){a.listadoSelect=[e]}):this.listadoSelect=[e]},addResponsable:function(e){var a="0";"0"===e.ENCARGADO&&(e.ID_ACTIVIDAD_ENCARGADO&&this.eliminaPersonal.splice(this.eliminaPersonal.indexOf(e.ID_ACTIVIDAD_ENCARGADO),1),a="1"),"1"===e.ENCARGADO&&e.ID_ACTIVIDAD_ENCARGADO&&this.eliminaPersonal.push(e.ID_ACTIVIDAD_ENCARGADO),this.listadoPersonal[e.indice].ENCARGADO=a,this.filtraPersonal()},grabarProgramacion:function(){var e=this;this.guardando=!0;var a={};if(this.dataProgramacion.ID_ACTIVIDAD&&this.dataProgramacion.FH_ACTIVIDAD_I&&this.dataProgramacion.FH_ACTIVIDAD_F&&this.dataProgramacion.FH_PLAZO_I&&this.dataProgramacion.FH_PLAZO_F&&("0"!==this.dataProgramacion.GRATUITO||this.dataProgramacion.IMPORTE&&this.dataProgramacion.MONCOD&&this.dataProgramacion.MESCOB&&this.dataProgramacion.F_VENCIMIENTO))if(0===this.listaTree.length)this.tabSelected="dirigido",this.guardando=!1;else if(0===this.listadoSelect.length&&1!==this.dataProgramacion.MASIVO)this.tabSelected="responsable",this.guardando=!1;else{this.listaTree.forEach(function(e){e=JSON.parse(e),a[e.tipcod]||(a[e.tipcod]=[]),a[e.tipcod].push(e.nemo)});var t={programacion:this.dataProgramacion,responsable:this.listadoSelect,nemo:a};this.eliminaPersonal.length>0&&(t.eliminar=this.eliminaPersonal),Q.$http.post("api/HyoActividadprogramada/insertarActividad",t).then(function(t){var o=t.json;e.guardando=!1,"m0001"===o.msj&&(e.modalEditar=!1,e.obtProgramacion(),e.dataProgramacion.ID_ACTIVIDAD_PROGRAMADA||1!==e.dataProgramacion.MASIVO||(0,W.dialogConfirm)({title:e.$t("mensajes.m0001"),message:e.$t("mensajes.m0097"),ok:e.$t("botones.si"),cancel:e.$t("botones.no")}).then(function(t){t&&e.insertarMasivo(o.ID_ACTIVIDAD_ENCARGADO,a)}))})}else this.tabSelected="programacion",this.guardando=!1},insertarMasivo:function(e,a){var t=this,o={responsable:e,nemo:a};Q.$http.post("api/HyoActividadperfil/insertarDestinatariosMasivo",o).then(function(e){var a=e.json;console.log(a),(0,X["default"])(t.$t("mensajes."+a),"success")})},filtrarProgramacion:function(e){this.programacionFiltrado=e?(0,Le.filterArray)(e,{field:"ACTIVIDAD",list:this.programacionInicial}):this.programacionInicial},eliminarProgramacion:function(e){var a=this,t="api/HyoActividadprogramada/eliminarProgramacion";(0,W.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010")}).then(function(o){if(o){var i={ID_ACTIVIDAD_PROGRAMADA:e.ID_ACTIVIDAD_PROGRAMADA};Q.$http.get(t,{params:i}).then(function(e){var t=e.json,o="error";"ok"===t&&(o="success"),(0,X["default"])(a.$t("mensajes.m0006."+t),o),"ok"===t&&a.generarTabla(a.buscado)})}})}},computed:{maxLista:function(){return(this.alto-47)/46}},mounted:function(){var e=this;this.generarTabla(this.buscado),Q.$http.get("api/HyoMonedas/obtMoneda").then(function(a){a["v"].forEach(function(a){e.monedas.push({label:a[1],value:a[0]})})}),Q.$http.get("api/HyoMeses/obtMeses").then(function(a){var t=a.json;t.forEach(function(a){e.meses.push({label:a["MESDES"],value:a["MESCOD"]})})})}};const qe=(0,Z.A)(Ne,[["render",ye]]);var Me=qe,$e=(t(71225),t(5962),{class:"column q-card"}),je={class:"row q-ma-xs"},He={class:"col row"},we={class:"row justify-center"},Qe={class:"row justify-center"},xe={key:0,class:"row justify-center"},Ge={key:1},Xe={class:"column"},We={class:"q-ml-xs text-bold"},Ye={class:"q-ml-xs"},Be={class:"row justify-center"},ze={class:"col q-card"},Ze={key:0,class:"row q-ma-sm"},Ke={key:1,class:"row q-ma-sm"},Je={class:"q-ma-sm"},ea={class:"row"},aa={class:"col q-ma-md"},ta={class:"row justify-center"},oa={class:"column justify-around"};function ia(e,a){var t=(0,o.g2)("sie-select"),l=(0,o.g2)("q-search"),n=(0,o.g2)("q-tooltip"),c=(0,o.g2)("q-btn"),s=(0,o.g2)("q-icon"),r=(0,o.g2)("q-td"),d=(0,o.g2)("q-table"),u=(0,o.g2)("q-progress"),m=(0,o.g2)("q-card"),f=(0,o.g2)("sie-modal"),p=(0,o.g2)("q-btn-toggle"),A=(0,o.g2)("q-checkbox");return(0,o.uX)(),(0,o.CE)("div",$e,[(0,o.Lk)("div",je,[(0,o.bF)(t,{class:"col",type:"outlined",noBottom:"",modelValue:e.actividad,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.actividad=a}),options:e.listaProgramacion,label:"ACTIVIDAD_CBO",val:"ID_ACTIVIDAD_PROGRAMADA",placeholder:e.$t("intranet.actividad"),onSelected:e.seleccionarActividad},null,8,["modelValue","options","placeholder","onSelected"]),(0,o.bF)(t,{class:"col",type:"outlined",noBottom:"",modelValue:e.encargado,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.encargado=a}),options:e.listadoPersonal,label:"USUNOM",val:"ID_ACTIVIDAD_ENCARGADO",placeholder:e.$t("responsable"),onSelected:e.seleccionarEncargado},null,8,["modelValue","options","placeholder","onSelected"])]),e.encargado?((0,o.uX)(),(0,o.Wv)(d,{key:0,class:"q-ma-xs bg-white table-sie","table-style":"max-height: 60vh","row-key":"USUCOD_PARTICIPANTE",pagination:e.configTblListado.paginacion,"onUpdate:pagination":a[5]||(a[5]=function(a){return e.configTblListado.paginacion=a}),data:e.dataInvitacion,filter:e.configTblListado.filter,columns:e.configTblListado.columns,selection:e.configTblListado.tipoSeleccion,selected:e.configTblListado.registrosSeleccionados,"onUpdate:selected":a[6]||(a[6]=function(a){return e.configTblListado.registrosSeleccionados=a})},{"top-left":(0,o.k6)(function(t){return[(0,o.Lk)("div",He,[(0,o.bF)(l,{class:"col q-if-outlined no-bottom",modelValue:e.configTblListado.filter,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.configTblListado.filter=a})},null,8,["modelValue"]),e.dataInvitacion.length>0?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",round:"",icon:"print"},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{anchor:"bottom middle",self:"top middle",offset:[10,10]},{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,i.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1})):(0,o.Q3)("v-if",!0),e.dataInvitacion.length>0&&e.configTblListado.registrosSeleccionados.length>0?((0,o.uX)(),(0,o.Wv)(c,{key:1,flat:"",round:"",icon:"send",onClick:a[3]||(a[3]=function(a){return e.enviarMensaje(e.configTblListado.registrosSeleccionados)})},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{anchor:"bottom middle",self:"top middle",offset:[10,10]},{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,i.v_)(e.$t("botones.enviar")),1)]}),_:1})]}),_:1})):(0,o.Q3)("v-if",!0),e.configTblListado.registrosSeleccionados.length>0?((0,o.uX)(),(0,o.Wv)(c,{key:2,icon:"delete",flat:"",round:"",onClick:a[4]||(a[4]=function(a){return e.eliminarParticipantes(e.configTblListado.registrosSeleccionados)})},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{anchor:"bottom middle",self:"top middle",offset:[10,10]},{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,i.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1})):(0,o.Q3)("v-if",!0),e.encargado?((0,o.uX)(),(0,o.Wv)(c,{key:3,icon:"add",flat:"",round:"",onClick:e.abrirModalAgregar},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{anchor:"bottom middle",self:"top middle",offset:[10,10]},{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,i.v_)(e.$t("botones.agregar")),1)]}),_:1})]}),_:1},8,["onClick"])):(0,o.Q3)("v-if",!0)])]}),"body-cell-ACEPTADO":(0,o.k6)(function(e){return[(0,o.bF)(r,{class:"col justify-center",props:e},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",we,[1==e.row.ACEPTADO?((0,o.uX)(),(0,o.Wv)(s,{key:0,name:"check_circle",color:"green"})):(0,o.Q3)("v-if",!0),0==e.row.ACEPTADO?((0,o.uX)(),(0,o.Wv)(s,{key:1,name:"remove_circle",color:"red"})):(0,o.Q3)("v-if",!0)])]}),_:2},1032,["props"])]}),"body-cell-ELIMINAR":(0,o.k6)(function(a){return[(0,o.bF)(r,{props:a},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Qe,[e.invitacion&&e.configTblListado.registrosSeleccionados.length<1?((0,o.uX)(),(0,o.Wv)(c,{key:0,flat:"",rounded:"",icon:"delete",onClick:function(t){return e.eliminarParticipantes(a.row)}},null,8,["onClick"])):(0,o.Q3)("v-if",!0)])]}),_:2},1032,["props"])]}),"body-cell-FH_ASISTENCIA":(0,o.k6)(function(a){return[(0,o.bF)(r,{props:a},{default:(0,o.k6)(function(){return[0!==e.detalle&&e.detalle?((0,o.uX)(),(0,o.CE)("div",Ge,[e.detalleAsistencia[a.row.ID_ACTIVIDAD_PARTICIPANTE]&&e.detalleAsistencia[a.row.ID_ACTIVIDAD_PARTICIPANTE].length>0?((0,o.uX)(),(0,o.Wv)(s,{key:0,name:"details"},{default:(0,o.k6)(function(){return[(0,o.bF)(n,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Xe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.detalleAsistencia[a.row.ID_ACTIVIDAD_PARTICIPANTE],function(a,t){return(0,o.uX)(),(0,o.CE)("div",{key:t,class:"row"},[(0,o.bF)(s,{name:e.asistenciaTipo[a.ASISTENCIA].icono,color:e.asistenciaTipo[a.ASISTENCIA].color},null,8,["name","color"]),(0,o.Lk)("span",We,(0,i.v_)(a.PARENTESCO),1),(0,o.Lk)("span",Ye,(0,i.v_)(e.date(a.FH_REGISTRO,"DD/MM/YYYY hh:mm a")),1)])}),128))])]}),_:2},1024)]}),_:2},1024)):((0,o.uX)(),(0,o.Wv)(c,{key:1,flat:"",icon:"add_circle",round:"",size:"10px",onClick:function(t){return e.marcarDetalleAsistencia(a.row)}},null,8,["onClick"]))])):((0,o.uX)(),(0,o.CE)("div",xe,[a.row.FH_ASISTENCIA?((0,o.uX)(),(0,o.Wv)(s,{key:0,name:e.asistenciaTipo[a.row.ASISTENCIA].icono,color:e.asistenciaTipo[a.row.ASISTENCIA].color},null,8,["name","color"])):(0,o.Q3)("v-if",!0),a.row.FH_ASISTENCIA?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(s,{key:1,name:"remove_circle",color:"red"}))]))]}),_:2},1032,["props"])]}),"body-cell-NUMPAG":(0,o.k6)(function(e){return[(0,o.bF)(r,{props:e},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Be,[e.row.NUMPAG?((0,o.uX)(),(0,o.Wv)(s,{key:0,name:"check_circle",color:"green"})):(0,o.Q3)("v-if",!0)])]}),_:2},1032,["props"])]}),_:1},8,["pagination","data","filter","columns","selection","selected"])):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",ze,[e.invitacion&&e.dataInvitacion.length>0?((0,o.uX)(),(0,o.CE)("div",Ze,[(0,o.Lk)("b",null,"Aceptado "+(0,i.v_)(e.completado)+" %",1),(0,o.bF)(u,{class:"col q-ml-sm",percentage:e.completado,style:{height:"10px"}},null,8,["percentage"])])):(0,o.Q3)("v-if",!0),e.asistencia&&e.dataInvitacion.length>0?((0,o.uX)(),(0,o.CE)("div",Ke,[(0,o.Lk)("b",null,"Asistencia "+(0,i.v_)(e.cuentaAsistencia)+" %",1),(0,o.bF)(u,{class:"col q-ml-sm",percentage:e.cuentaAsistencia,style:{height:"10px"},color:"secondary"},null,8,["percentage"])])):(0,o.Q3)("v-if",!0)]),(0,o.bF)(f,{class:"column",css:{minWidth:"70vw"},title:"Editar participantes a "+e.actividadSelectName,modelValue:e.modalUsuarios,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.modalUsuarios=a}),onSubmit:e.grabarDestinatarios},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Je,[(0,o.bF)(t,{class:"col",disable:"",type:"outlined",noBottom:"",modelValue:e.encargado,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.encargado=a}),options:e.listadoPersonal,label:"USUNOM",val:"ID_ACTIVIDAD_ENCARGADO",placeholder:e.$t("responsable")},null,8,["modelValue","options","placeholder"]),(0,o.Lk)("div",ea,[(0,o.bF)(t,{class:"col",type:"outlined",noBottom:"",modelValue:e.perfilSelect,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.perfilSelect=a}),options:e.perfiles,label:"TIPNOM",val:"TIPCOD",placeholder:e.$t("seguridad.perfil"),onSelected:e.seleccionarPerfil},null,8,["modelValue","options","placeholder","onSelected"]),(0,o.bF)(t,{class:"col",type:"outlined",noBottom:"",modelValue:e.salonSelect,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.salonSelect=a}),options:e.salones[e.perfilSelect],label:"NEMODES",val:"NEMO",placeholder:e.$t("salon"),onSelected:e.seleccionarSalon},null,8,["modelValue","options","placeholder","onSelected"])])]),(0,o.bF)(m,{class:"q-ma-sm"},{default:(0,o.k6)(function(){return[(0,o.bF)(d,{class:"col-8","table-style":"max-height: 50vh","row-key":"USUCOD",filter:e.filter,data:e.dataUsuarios,selection:e.tablaUsuariosSelect.tipoSeleccion,selected:e.tablaUsuariosSelect.registrosSeleccionados,"onUpdate:selected":a[11]||(a[11]=function(a){return e.tablaUsuariosSelect.registrosSeleccionados=a}),columns:e.tablaUsuariosSelect.columns,pagination:e.tablaUsuariosSelect.paginacion,"onUpdate:pagination":a[12]||(a[12]=function(a){return e.tablaUsuariosSelect.paginacion=a})},{"top-left":(0,o.k6)(function(t){return[(0,o.bF)(l,{class:"col-5 q-if-outlined no-bottom",modelValue:e.filter,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.filter=a})},null,8,["modelValue"])]}),_:1},8,["filter","data","selection","selected","columns","pagination"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,o.bF)(f,{title:"Seleccionar familiar",modelValue:e.parentescoModal,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.parentescoModal=a}),onSubmit:e.grabarAsistencia},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",aa,[(0,o.Lk)("div",ta,[(0,o.bF)(p,{class:"q-mb-sm",modelValue:e.modRegistro,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.modRegistro=a}),"toggle-color":"secondary",options:e.estados,push:"",glossy:"",rounded:""},null,8,["modelValue","options"])]),a[17]||(a[17]=(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("b",null,"Selecciona el parentesco de quien asistió al evento")],-1)),(0,o.Lk)("div",oa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.parentesco,function(t,i){return(0,o.uX)(),(0,o.Wv)(A,{key:i,modelValue:e.arrParentesco,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.arrParentesco=a}),label:t.value,val:t.id,readonly:t.disable},null,8,["modelValue","label","val","readonly"])}),128))])])]}),_:1},8,["modelValue","onSubmit"])])}var la=t(63053),na=t.n(la),ca={directives:{sieActive:x.A},components:{virtualList:w.Ay,QPopupEdit:n.GT,sieSelect:G.A,sieModal:B.A,QTabs:n.uw,QTab:n.zu,QTabPane:n.dg,QCard:n.C$,QDatetime:n.T5,QToggle:n.c5,QSelect:n.Si,sieTree:Re.A,QPopover:n.VM,QProgress:n.jQ,QKnob:n.EN,QTd:n.Ef,QCheckbox:n.vZ,QBtnToggle:n.QL,QTable:n.kH,QSearch:n.Ks,QBtn:n.Il,QTooltip:n.nC,QIcon:n.bP},data:function(){return{listaProgramacion:[],actividad:null,listadoPersonal:[],encargado:null,cuentaAceptado:0,cuentaTotal:0,completado:0,dataInvitacion:[],cuentaAsistencia:0,configTblListado:{registrosSeleccionados:[],columns:[]},invitacion:!0,asistencia:!1,pago:!1,modalUsuarios:!1,actividadSelectName:"",perfiles:[],salones:[],perfilSelect:"",salonSelect:"",dataUsuarios:[],tablaUsuariosSelect:{},filter:"",seleccionInicial:[],detalle:0,detalleAsistencia:{},modRegistro:"P",asistenciaTipo:{P:{color:"green",icono:"check_circle",label:"Presente"},T:{color:"amber",icono:"info",label:"Tardanza"}},estados:[{label:"Presente",value:"P"},{label:"Tardanza",value:"T"}],parentescoModal:!1,parentesco:[{id:1,value:"Padre"},{id:2,value:"Madre"},{id:3,value:"Apoderado"}],arrParentesco:[],participanteSelect:null}},props:["alto","acceso"],methods:{date:Ue.Ay,seleccionarActividad:function(e){var a=this;console.log(e.ASISTENCIA_DETALLE),this.actividadSelectName=e.ACTIVIDAD_CBO,this.detalle=e.ASISTENCIA_DETALLE,this.asistencia=(new Date).setHours(0,0,0)>=new Date(e.FH_ACTIVIDAD_I).setHours(0,0,0),this.pago=0===e.GRATUITO,Q.$http.get("api/HyoActividadencargado/obtPersonal",{params:{id:e.ID_ACTIVIDAD_PROGRAMADA}}).then(function(e){var t=e.json;a.listadoPersonal=(0,Le.filterArray)("1",{field:"ENCARGADO",list:t})})},seleccionarEncargado:function(e){var a=this;this.cuentaAceptado=0,this.cuentaTotal=0,Q.$http.get("api/HyoActividadparticipante/obtParticipantes",{params:{ID_ACTIVIDAD_ENCARGADO:e.ID_ACTIVIDAD_ENCARGADO}}).then(function(e){var t=e.json,o=t.res.length;a.dataInvitacion=t.res,a.completado=parseFloat((t.aceptado/o*100).toFixed(2)),a.cuentaAsistencia=parseFloat((t.asistencia/o*100).toFixed(2)),a.creaTabla()}),this.detalle&&Q.$http.get("api/HyoActividadparentescoasis/obtAsistenciaParentescoGral",{params:{ID_ACTIVIDAD_ENCARGADO:e.ID_ACTIVIDAD_ENCARGADO}}).then(function(e){var t=e.json;a.detalleAsistencia=t})},creaTabla:function(){var e={};e.columns=[{name:"USUCOD_PARTICIPANTE",field:"USUCOD_PARTICIPANTE",align:"left",label:this.$t("seguridad.usuario")},{name:"USUNOM",field:"USUNOM",align:"left",label:this.$t("seguridad.nombre")}],this.invitacion&&e.columns.push({name:"ACEPTADO",field:"ACEPTADO",align:"center",label:this.$t("Invitacion"),sortable:!0}),this.asistencia&&e.columns.push({name:"FH_ASISTENCIA",field:"FH_ASISTENCIA",align:"center",label:this.$t("Asistencia"),sortable:!0}),this.pago&&e.columns.push({name:"NUMPAG",field:"NUMPAG",align:"center",label:this.$t("Pago"),sortable:!0}),e.columns.push({name:"ELIMINAR",field:"ELIMINAR",align:"center"}),e.paginacion={page:1,rowsPerPage:200},e.registrosSeleccionados=[],e.tipoSeleccion="multiple",e.filter="",this.configTblListado=e},abrirModalAgregar:function(){var e=this;this.salonSelect="",this.perfilSelect="",this.dataUsuarios=[],this.modalUsuarios=!0,Q.$http.get("api/HyoActividadperfil/obtPerfilActividadDetalle",{params:{ID_ACTIVIDAD_PROGRAMADA:this.actividad}}).then(function(a){var t=a.json;e.perfiles=t.perfiles,e.salones=t.salones});var a={};a.columns=[{name:"USUCOD",field:"USUCOD",align:"center",label:this.$t("seguridad.usuario")},{name:"USUNOM",field:"USUNOM",align:"left",label:this.$t("seguridad.nombre")}],a.paginacion={page:1,rowsPerPage:200},a.registrosSeleccionados=[],a.filter="",a.tipoSeleccion="multiple",a.estado="T",this.tablaUsuariosSelect=a},seleccionarPerfil:function(){this.salonSelect="",this.dataUsuarios=[]},seleccionarSalon:function(e){var a=this;this.tablaUsuariosSelect.registrosSeleccionados=[],this.seleccionInicial=[];var t={tipcod:this.perfilSelect,instrucod:e.INSTRUCOD,gradocod:e.GRADOCOD,seccioncod:e.SECCIONCOD,actividad:this.actividad,encargado:this.encargado};Q.$http.get("api/HyoActividadperfil/obtDestinatarios",{params:t}).then(function(e){var t=e.json;a.dataUsuarios=t,t.forEach(function(e){e.ID_ACTIVIDAD_PARTICIPANTE&&(a.tablaUsuariosSelect.registrosSeleccionados.push(e),a.seleccionInicial.push(e.ID_ACTIVIDAD_PARTICIPANTE))})})},grabarDestinatarios:function(){var e=this,a=[],t=[],o=Object.assign(this.tablaUsuariosSelect.registrosSeleccionados),i=Object.assign(this.seleccionInicial);o.forEach(function(e){i.indexOf(e.ID_ACTIVIDAD_PARTICIPANTE)>=0?a.unshift(i.indexOf(e.ID_ACTIVIDAD_PARTICIPANTE)):t.push(e.USUCOD)}),a.forEach(function(e){i.splice(e,1)}),(i.length>0||t.length>0)&&Q.$http.post("api/HyoActividadparticipante/agregarParticipantes",{eliminar:i,agregar:t,encargado:this.encargado}).then(function(a){var o=a.json;"m0001"===o&&(t.length>0&&e.enviarMensaje(t),e.modalUsuarios=!1,e.seleccionarEncargado({ID_ACTIVIDAD_ENCARGADO:e.encargado}))})},eliminarParticipantes:function(e){var a=this,t=[];Array.isArray(e)?this.configTblListado.registrosSeleccionados.forEach(function(e){t.push(e.ID_ACTIVIDAD_PARTICIPANTE)}):t.push(e.ID_ACTIVIDAD_PARTICIPANTE),t.length>0&&(0,W.dialogConfirm)({title:this.$t("mensajes.m0006.confirmacion"),message:this.$t("mensajes.m0010")}).then(function(e){e&&Q.$http.post("api/HyoActividadparticipante/eliminarParticipante",{eliminar:t}).then(function(e){var t=e.json,o="error";"ok"===t&&(o="success"),(0,X["default"])(a.$t("mensajes.m0006."+t),o),"ok"===t&&a.seleccionarEncargado({ID_ACTIVIDAD_ENCARGADO:a.encargado})})})},enviarMensaje:function(e){var a=this,t={id_encargado:this.encargado,arrUsuarios:[]};e.forEach(function(e){"object"===na()(e)?t.arrUsuarios.push(e.USUCOD_PARTICIPANTE):t.arrUsuarios.push(e)}),Q.$http.post("api/HyoActividadplantilla/enviarMensaje",t).then(function(e){var t=e.json;(0,X["default"])(a.$t("mensajes."+t),"success")})},marcarDetalleAsistencia:function(e){this.participanteSelect=e.ID_ACTIVIDAD_PARTICIPANTE,this.arrParentesco=[],this.parentescoModal=!0},grabarAsistencia:function(){var e=this,a={arrParticipante:this.participanteSelect,asistencia:this.modRegistro,parentesco:this.arrParentesco};Q.$http.post("api/HyoActividadparticipante/registrarAsistencia",a).then(function(a){a.json;e.arrParentesco=[],e.seleccionarEncargado({ID_ACTIVIDAD_ENCARGADO:e.encargado}),e.parentescoModal=!1})}},computed:{maxLista:function(){var e=this.alto-157;return e+"px"}},mounted:function(){var e=this;Q.$http.get("api/HyoActividadprogramada/obtProgramacion").then(function(a){var t=a.json;t.forEach(function(e){e.FH_ACTIVIDAD_NI=(0,Ue.Ay)(e.FH_ACTIVIDAD_I,"DD/MM/YYYY hh:mm A"),e.FH_ACTIVIDAD_NF=(0,Ue.Ay)(e.FH_ACTIVIDAD_F,"DD/MM/YYYY hh:mm A"),e.GRATUITO=parseInt(e.GRATUITO.trim()),e.ACTIVIDAD_CBO=e.ACTIVIDAD+" de "+e.FH_ACTIVIDAD_NI+" a "+e.FH_ACTIVIDAD_NF}),e.listaProgramacion=t})}};const sa=(0,Z.A)(ca,[["render",ia]]);var ra=sa,da=t(57668),ua={components:{QTabs:n.uw,QTab:n.zu,QTabPane:n.dg,nuevoTipoActividad:J,programacion:Me,participantes:ra,QPage:n.Tu},data:function(){return{sie:(0,da["default"])(),selectTab:null,listaTabs:[{id:"nuevoTipoActividad",desc:"Tipo / Actividad"},{id:"programacion",desc:"Programación"},{id:"participantes",desc:"Participantes"}],alto:0,acceso:(0,da["default"])().ruta.nivel}},methods:{handleResize:function(){this.alto=window.innerHeight-105}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},created:function(){this.acceso=3,this.selectTab=this.listaTabs[0].id,window.addEventListener("resize",this.handleResize),this.handleResize()}};const ma=(0,Z.A)(ua,[["render",l]]);var fa=ma}}]);