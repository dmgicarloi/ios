"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[75433],{75433:function(e,o,t){t.r(o),t.d(o,{default:function(){return F}});var l=t(61758),a=t(58790),n={class:"q-pa-md bg-white"},r={class:"col-3"},i={class:"col"},u={class:"column q-pa-sm"},s={class:"col"},d={class:"col row items-center"},c={class:"col"},f={class:"col"},m={class:"col"},p={class:"col"},b={class:"col"};function R(e,o){var t=(0,l.g2)("sie-select"),R=(0,l.g2)("q-btn"),S=(0,l.g2)("q-chip"),h=(0,l.g2)("q-td"),_=(0,l.g2)("q-input"),U=(0,l.g2)("q-popup-edit"),V=(0,l.g2)("q-tr"),A=(0,l.g2)("q-table"),v=(0,l.g2)("q-toggle"),k=(0,l.g2)("sie-modal"),L=(0,l.g2)("q-page-sticky");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(A,{data:e.objActual,columns:e.columns,"row-key":"ID_RECURSO"},{top:(0,l.k6)(function(a){return[(0,l.Lk)("div",r,[(0,l.bF)(t,{type:"outlined",modelValue:e.filterSistema,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.filterSistema=o}),options:e.dataSistemas,val:"SISCOD",label:"SISNOM",placeholder:"Sistema",onSelected:e.filtrarRecursos},null,8,["modelValue","options","onSelected"])]),(0,l.Lk)("div",i,[(0,l.bF)(R,{color:"secondary",flat:"",onClick:o[1]||(o[1]=function(o){return e.filterSistema=""}),icon:"broom"})])]}),body:(0,l.k6)(function(o){return[(0,l.bF)(V,{props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(h,{key:"SISNOM",props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(S,{color:"primary"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(o.row.SISNOM),1)]}),_:2},1024)]}),_:2},1032,["props"]),(0,l.bF)(h,{key:"ESTADO",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(o.row.ESTADO),1)]}),_:2},1032,["props"]),(0,l.bF)(h,{key:"URL_MANUAL",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(o.row.URL_MANUAL),1),(0,l.bF)(U,{modelValue:o.row.URL_MANUAL,"onUpdate:modelValue":function(e){return o.row.URL_MANUAL=e},buttons:"",onSave:function(t){return e.editarRecurso(o.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(_,{class:"q-if-outlined",modelValue:o.row.URL_MANUAL,"onUpdate:modelValue":function(e){return o.row.URL_MANUAL=e},"float-label":"Url Manual"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"]),(0,l.bF)(h,{key:"URL_VIDEO",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)(o.row.URL_VIDEO),1),(0,l.bF)(U,{modelValue:o.row.URL_VIDEO,"onUpdate:modelValue":function(e){return o.row.URL_VIDEO=e},buttons:"",onSave:function(t){return e.editarRecurso(o.row)}},{default:(0,l.k6)(function(){return[(0,l.bF)(_,{class:"q-if-outlined",modelValue:o.row.URL_VIDEO,"onUpdate:modelValue":function(e){return o.row.URL_VIDEO=e},"float-label":"Url Video"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"]),(0,l.bF)(h,{key:"PERFIL",props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(S,{color:"primary"},{default:(0,l.k6)(function(){return[(0,l.eW)((0,a.v_)("001"===o.row.PERFIL?"Administrador":"Todos"),1)]}),_:2},1024)]}),_:2},1032,["props"]),(0,l.bF)(h,{key:"ACCIONES",props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(R,{color:"negative",icon:"delete",flat:"",onClick:function(t){return e.eliminarRecurso(o.row.ID_RECURSO)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"]),(0,l.bF)(k,{modelValue:e.showFormNew,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.showFormNew=o}),title:"Añadir recursos",ok:"Guardar",onSubmit:e.grabarRecursos,onShow:e.cargarCombos,onClose:e.limpiarForm,css:{minWidth:"40vw"}},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",u,[(0,l.Lk)("div",s,[(0,l.bF)(t,{type:"outlined",modelValue:e.formRecurso.sistema,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.formRecurso.sistema=o}),options:e.dataSistemas,val:"SISCOD",label:"SISNOM",placeholder:"Sistema",onSelected:e.obtenerMenus},null,8,["modelValue","options","onSelected"])]),(0,l.Lk)("div",d,[(0,l.Lk)("div",c,[(0,l.bF)(t,{type:"outlined",modelValue:e.formRecurso.perfil,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.formRecurso.perfil=o}),options:e.dataPerfil,val:"val",label:"label",placeholder:"Perfil",disable:e.formRecurso.es_admin},null,8,["modelValue","options","disable"])]),(0,l.Lk)("div",f,[(0,l.bF)(v,{label:"Solo Administrador",modelValue:e.formRecurso.es_admin,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.formRecurso.es_admin=o}),"left-label":""},null,8,["modelValue"])])]),(0,l.Lk)("div",m,[(0,l.bF)(t,{type:"outlined",modelValue:e.formRecurso.estado,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.formRecurso.estado=o}),options:e.objMenus,val:"URL",label:"MENUNOM",placeholder:"Menu"},null,8,["modelValue","options"])]),(0,l.Lk)("div",p,[(0,l.bF)(_,{class:"q-if-outlined",modelValue:e.formRecurso.url_manual,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.formRecurso.url_manual=o}),"float-label":"Url Manual"},null,8,["modelValue"])]),(0,l.Lk)("div",b,[(0,l.bF)(_,{class:"q-if-outlined",modelValue:e.formRecurso.url_video,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.formRecurso.url_video=o}),"float-label":"Url Video"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit","onShow","onClose"]),(0,l.bF)(L,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[(0,l.bF)(R,{fab:"",round:"",color:"secondary",icon:"add",onClick:o[9]||(o[9]=function(o){return e.showFormNew=!0})})]}),_:1})])}t(71225),t(50310),t(5962),t(83190),t(27153),t(62540);var S=t(6123),h=t(24729),_=t(30640),U=t(93616),V=t(982),A=t(57668),v=t(33001),k={components:{QTable:S.kH,QTr:S.qh,QTd:S.Ef,QPageSticky:S._U,QToggle:S.c5,QPopupEdit:S.GT,Dialog:h.A,QChip:S.wQ,sieModal:_.A,sieSelect:U.A,notify:V["default"],sieInfo:A["default"],QBtn:S.Il,QInput:S.ie},data:function(){return{showFormNew:!1,filterSistema:"",formRecurso:{sistema:"",estado:"",perfil:"",url_manual:"",url_video:"",es_admin:!1},dataRecursos:[],dataMenus:[],dataSistemas:[],dataPerfil:[{val:"004",label:"Familia"},{val:"005",label:"Alumno"}],columns:[{label:"SISTEMA",name:"SISNOM",field:"SISNOM",align:"center"},{label:"ESTADO",name:"ESTADO",field:"ESTADO",align:"left"},{label:"URL MANUAL",name:"URL_MANUAL",field:"URL_MANUAL",align:"left"},{label:"URL VIDEO",name:"URL_VIDEO",field:"URL_VIDEO",align:"left"},{label:"PERFIL",name:"PERFIL",field:"PERFIL",align:"center"},{label:"ACCIONES",name:"ACCIONES",field:"ACCIONES",align:"center"}]}},methods:{init:function(){this.obtenerRecursos(),this.obtenerSistemas()},cargarCombos:function(){this.obtenerSistemas()},obtenerSistemas:function(){var e=this;this.$http.get("api/HyoAyuda/getSistemas").then(function(o){e.dataSistemas=o.json})},obtenerMenus:function(){var e=this;this.$http.get("api/HyoAyuda/getMenusBySistema",{params:{sistema:this.formRecurso.sistema}}).then(function(o){e.dataMenus=o.json})},filtrarRecursos:function(){var e=this;this.dataRecursos.filter(function(o){return o.SISTEMA===e.filterSistema})},obtenerRecursos:function(){var e=this;this.$http.get("api/HyoAyuda/getRecursosBySistema").then(function(o){e.dataRecursos=o.json})},grabarRecursos:function(){var e=this;this.$http.post("api/HyoAyuda/saveRecursos",{data:this.formRecurso}).then(function(e){(0,V["default"])(e.json.message)}).finally(function(){e.showFormNew=!1,e.obtenerRecursos(),e.limpiarForm()})},editarRecurso:function(e){var o={url_manual:e.URL_MANUAL,url_video:e.URL_VIDEO};this.$http.put("api/HyoAyuda/updateRecursos",{id:e.ID_RECURSO,data:o}).then(function(e){(0,V["default"])(e.json.message)})},eliminarRecurso:function(e){var o=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"Si, eliminar",cancel:"No"}).onOk(function(){o.$http.delete("api/HyoAyuda/deleteRecursos",{params:{id:e}}).then(function(e){(0,V["default"])(e.json.message)}).finally(function(){o.obtenerRecursos()})})},limpiarForm:function(){this.formRecurso={sistema:"",perfil:"",estado:"",url_manual:"",url_video:"",es_admin:!1}}},computed:{objActual:function(){var e=this.dataRecursos;return""!==this.filterSistema&&(e=(0,v.filterArray)(this.filterSistema,{field:"SISTEMA",list:e})),e},objMenus:function(){var e=this.dataMenus;return""!==this.formRecurso.perfil&&(e=(0,v.filterArray)(this.formRecurso.perfil,{field:"TIPCOD",list:e})),this.formRecurso.es_admin&&(e=(0,v.filterArray)(this.formRecurso.perfil,{field:"TIPCOD",list:e})),e}},created:function(){this.init()}},L=t(12807);const g=(0,L.A)(k,[["render",R]]);var F=g}}]);