"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[99195],{99195:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});n(71225),n(50310),n(5962),n(83190);var o=n(61758),i=n(58790),l={class:"row"},a={class:"col q-pt-md"},s={class:"col-auto column items-center justify-center"},r={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-md"},c={class:"row"},u={class:"col-6"},d={class:"col-6"},f={class:"row"},p={class:"col-6"},m={class:"col-6"},h={class:"row"},C={class:"col-6"},g={class:"col-6"},I={class:"row"},b={class:"col-6"},v={class:"col-6"};function F(e,t){var n=(0,o.g2)("q-search"),F=(0,o.g2)("q-btn"),E=(0,o.g2)("q-td"),N=(0,o.g2)("q-table"),D=(0,o.g2)("q-select"),S=(0,o.g2)("q-datetime"),k=(0,o.g2)("sie-modal"),O=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(O,{class:"bg-white q-pa-sm"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",l,[(0,o.Lk)("div",a,[(0,o.bF)(n,{class:"q-if-outlined",color:"primary",modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter=t})},null,8,["modelValue"])]),(0,o.Lk)("div",s,[(0,o.bF)(F,{class:"capitalize",size:"md",color:"secondary",label:"Agregar",icon:"plus",onClick:e.addConfiguration},null,8,["onClick"])])]),(0,o.bF)(N,{class:"bg-white",filter:e.filter,pagination:e.pagination,"onUpdate:pagination":t[1]||(t[1]=function(t){return e.pagination=t}),data:e.data,columns:e.columnsConfiguration,"row-key":"name"},{"body-cell-FECHAINI":(0,o.k6)(function(e){return[(0,o.bF)(E,{props:e},{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,i.v_)(e.value),1)]}),_:2},1032,["props"])]}),"body-cell-FECHAFIN":(0,o.k6)(function(e){return[(0,o.bF)(E,{props:e},{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,i.v_)(e.value),1)]}),_:2},1032,["props"])]}),"body-cell-EDIT":(0,o.k6)(function(t){return[(0,o.bF)(E,{props:t},{default:(0,o.k6)(function(){return[(0,o.bF)(F,{flat:"",dense:"",icon:"edit",color:"faded",onClick:function(n){return e.editar(t.row)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),"body-cell-DELETE":(0,o.k6)(function(t){return[(0,o.bF)(E,{props:t},{default:(0,o.k6)(function(){return[(0,o.bF)(F,{flat:"",dense:"",icon:"delete",color:"faded",onClick:function(n){return e.eliminar(t.row)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["filter","pagination","data","columns"]),(0,o.bF)(k,{css:{"min-width":"500px"},modelValue:e.openModal,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.openModal=t}),title:"Configuraci贸n",onSubmit:e.saveConfiguration},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",r,[(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[(0,o.bF)(D,{modelValue:e.selectNivel,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectNivel=t}),"float-label":"Nivel",options:e.nivel},null,8,["modelValue","options"])]),(0,o.Lk)("div",d,[(0,o.bF)(D,{modelValue:e.selectGrade,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectGrade=t}),"float-label":"Grado",options:e.grados,onInput:e.getSection},null,8,["modelValue","options","onInput"])])]),(0,o.Lk)("div",f,[(0,o.Lk)("div",p,[(0,o.bF)(D,{modelValue:e.selectSection,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.selectSection=t}),"float-label":"Secci贸n",options:e.section},null,8,["modelValue","options"])]),(0,o.Lk)("div",m,[(0,o.bF)(D,{modelValue:e.selectPeriodo,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.selectPeriodo=t}),"float-label":"Periodo",options:e.periodo},null,8,["modelValue","options"])])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",C,[(0,o.bF)(S,{format:"DD/MM/YYYY",modelValue:e.fecIni,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.fecIni=t}),type:"date","float-label":"Fecha inicio"},null,8,["modelValue"])]),(0,o.Lk)("div",g,[(0,o.bF)(S,{format:"hh:mm A",modelValue:e.horIni,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.horIni=t}),type:"time","float-label":"Hora inicio"},null,8,["modelValue"])])]),(0,o.Lk)("div",I,[(0,o.Lk)("div",b,[(0,o.bF)(S,{format:"DD/MM/YYYY",modelValue:e.fecFin,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.fecFin=t}),type:"date","float-label":"Fecha Fin"},null,8,["modelValue"])]),(0,o.Lk)("div",v,[(0,o.bF)(S,{format:"hh:mm A",modelValue:e.horFin,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.horFin=t}),type:"time","float-label":"Hora Fin"},null,8,["modelValue"])])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var E=n(99550),N=n.n(E),D=(n(23825),n(27153),n(66307),n(24066),n(6123)),S=n(80660),k=n(982),O=n(30640),V=n(99637),T=n(81288);function L(e){return D.p6.formatDate(e,"YYYY-MM-DDTHH:mm:ss")}var y={components:{QTable:D.kH,QTr:D.qh,QTd:D.Ef,sieModal:O.A,QSelect:D.Si,QDatetime:D.T5,QPage:D.Tu,QSearch:D.Ks,QBtn:D.Il},data:function(){return{fecIni:"",fecFin:"",horIni:"",horFin:"",openModal:!1,editing:{},data:[],nivel:[],selectNivel:"T",grade:[],selectGrade:"T",section:[{SECCIONCOD:"T",SECCIONDES:"Todos",label:"Todos",value:"T"}],selectSection:"T",periodo:[{label:"I",value:"1"},{label:"II",value:"2"},{label:"III",value:"3"},{label:"IV",value:"4"}],selectPeriodo:"1",search:"",filter:"",type:"",pagination:{page:1,rowsPerPage:10},columnsConfiguration:[{name:"NIVEL",label:"Nivel",align:"left",field:"NIVEL",sortable:!0},{name:"GRADODES",label:"Grado",align:"left",field:"GRADODES",sortable:!0},{name:"SECCIONCOD",label:"Secci贸n",align:"left",field:"SECCIONCOD",sortable:!0},{name:"BIMECOD",label:"Periodo",align:"left",field:"BIMECOD",sortable:!0},{name:"FECHAINI",label:"Inicio",align:"left",field:"FECHAINI",sortable:!0},{name:"FECHAFIN",label:"Fin",align:"left",field:"FECHAFIN",sortable:!0},{name:"EDIT",label:"Editar",align:"left",sortable:!1},{name:"DELETE",label:"Eliminar",align:"left",sortable:!1}]}},methods:{addConfiguration:function(){this.type="IN",this.editing={},this.selectGrade="T",this.selectNivel="T",this.selectPeriodo="1",this.fecIni="",this.fecFin="",this.horIni="",this.horFin="",this.process(),this.openModal=!0},saveConfiguration:function(){var e=this,t={bimecod:this.selectPeriodo,fec_Ini:L((0,T.fechaTiempo)(this.fecIni,this.horIni)),fec_Fin:L((0,T.fechaTiempo)(this.fecFin,this.horFin)),gradocod:this.selectGrade,instrucod:this.selectNivel,seccioncod:this.selectSection};"AC"===this.type&&(t.IDCONF=this.editing.IDCONF),S.$http.post("api/HyoConfigautoeva/insertaActualizaConfig",{datos:t,tipo:this.type}).then(function(t){var n=t.json;1===n.estado?(e.listConfig().then(function(t){var n=t.json;e.data=e.processListConfig(n),e.openModal=!1}),(0,k["default"])(e.$t("mensajes.".concat(n.msg)))):(0,k["default"])(e.$t("mensajes.".concat(n.msg)),"warning")})},removeElement:function(e){var t=this;S.$http.post("api/HyoConfigautoeva/eliminarConf",{ids:e}).then(function(){t.listConfig().then(function(e){var n=e.json;t.data=t.processListConfig(n),(0,k["default"])("Eliminado correctamente")})}).catch(function(){(0,k["default"])("Ha ocurrido un problema con la conexi贸n vuelve a intentarlo","error")})},listConfig:function(){return S.$http.get("api/HyoConfigautoeva/listarConfig")},process:function(){var e=this,t=this.getNivel(),n=this.getGrade(),o=this.getSeccion();Promise.all([t,n,o]).then(function(t){var n=N()(t,3),o=n[0],i=n[1],l=n[2];o.json.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),(0,V["default"])(o.json,function(e){e.label=e.INSTRUDES,e.value=e.INSTRUCOD}),(0,V["default"])(i.json,function(e){(0,V["default"])(e,function(e){e.label=e.GRADODES,e.value=e.GRADOCOD})}),l.json.unshift({SECCIONCOD:"T",SECCIONDES:"Todos"}),(0,V["default"])(l.json,function(e){e.label=e.SECCIONDES,e.value=e.SECCIONCOD}),e.nivel=o.json,e.grade=i.json,e.section=l.json})},processListConfig:function(e){return(0,V["default"])(e,function(e){e.HORINI=new Date(e.FEC_INI),e.HORFIN=new Date(e.FEC_FIN)}),e},editar:function(e){this.editing=e,this.type="AC",this.selectGrade=e.GRADOCOD,this.selectNivel=e.INSTRUCOD,this.selectPeriodo=e.BIMECOD,this.fecIni=e.FEC_INI,this.fecFin=e.FEC_FIN,this.horIni=e.HORINI,this.horFin=e.HORFIN,this.process(),this.openModal=!0},getSection:function(){var e=this;this.getSeccion().then(function(t){var n=t.json;n.unshift({SECCIONCOD:"T",SECCIONDES:"Todos"}),(0,V["default"])(n,function(e){e.label=e.SECCIONDES,e.value=e.SECCIONCOD}),e.section=n})},eliminar:function(e){this.removeElement([e.IDCONF])},getNivel:function(){return S.$http.get("/api/HyoInstrus/obtInstru")},getGrade:function(){return S.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:"S",todos:"S"}})},getSeccion:function(){return S.$http.get("api/HyoSalones/obtSecciones",{params:{gradocod:this.selectGrade,instrucod:this.selectNivel}})}},computed:{grados:function(){return this.grade[this.selectNivel]||[]}},created:function(){var e=this;this.listConfig().then(function(t){var n=t.json;e.data=e.processListConfig(n)})}},H=n(12807);const A=(0,H.A)(y,[["render",F]]);var G=A}}]);