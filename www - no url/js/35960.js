"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[35960],{35960:function(e,a,t){t.r(a),t.d(a,{default:function(){return we}});var o=t(8445),n=t.n(o),r=t(61758),i=t(58790),l=t(29104),c={class:"col-xs-12 col-md-9"},s={class:"row q-ma-xs q-col-gutter-sm"},u={class:"col-xs-3"},d={class:"col-xs-3"},p={class:"col-xs-3"},m={class:"col-xs-3"},f={class:"row q-ma-xs q-col-gutter-sm"},h={class:"col-xs-3"},O={class:"col-xs-6"},g={class:"col-xs-3"},C={class:"row q-ma-xs q-col-gutter-sm"},P={class:"col-xs-12"},A={class:"col-xs-12 col-md-3 flex"},b={class:"col-xs-12"},D={class:"row q-ma-xs q-col-gutter-sm"},v={class:"col-xs-6"},T={class:"col-xs-6"},E={class:"col-xs-6"},M={class:"col-xs-6"},N={class:"row q-ma-xs q-col-gutter-sm"},I={class:"col-xs-6 col-md-2"},R={class:"col-xs-6 col-md-8"},_={class:"col-xs-12 col-md-1"},w={class:"col-xs-12"},S={class:"row q-ma-xs q-col-gutter-sm"},V={class:"col-xs-12 col-sm-2 col-md-6 col-lg-3"},G={class:"col-xs-12 col-sm-6 col-md-6 col-lg-3"},k={class:"col-xs-12 col-sm-6 col-md-6 col-lg-3"},U={class:"col-xs-12 col-sm-6 col-md-6 col-lg-3"},B={class:"q-mt-sm"},F={class:"column ptotal"};function L(e,a){var t=(0,r.g2)("q-page-header"),o=(0,r.g2)("q-separator"),L=(0,r.g2)("q-select"),x=(0,r.g2)("q-input"),y=(0,r.g2)("q-date"),$=(0,r.g2)("q-popup-proxy"),H=(0,r.g2)("q-icon"),q=(0,r.g2)("q-card"),Q=(0,r.g2)("q-card-section"),j=(0,r.g2)("q-btn"),Y=(0,r.g2)("header-grid"),W=(0,r.g2)("sie-grid"),X=(0,r.g2)("consultarComprobante"),K=(0,r.g2)("cambio"),J=(0,r.g2)("AgregarPersona");return(0,r.uX)(),(0,r.Wv)(q,{class:"layout-v1 my-card",flat:"",bordered:"",key:e.count},{default:(0,r.k6)(function(){return[(0,r.bF)(t,{title:e.pageHeader.title,nivelAcceso:e.pageHeader.nivelAcceso,tabs:e.pageHeader.tabs,useTab:e.pageHeader.useTabs,componente:e.pageHeader.componente,botones:e.pageHeader.botones,onActionTab:e.actionTab},null,8,["title","nivelAcceso","tabs","useTab","componente","botones","onActionTab"]),e.pageHeader.tabsKeys.registro===e.pageHeader.tabActive?((0,r.uX)(),(0,r.Wv)(o,{key:0})):(0,r.Q3)("v-if",!0),e.pageHeader.tabsKeys.registro===e.pageHeader.tabActive?((0,r.uX)(),(0,r.Wv)(Q,{key:1,class:"row q-col-gutter-sm"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",c,[(0,r.bF)(q,{class:"q-card-legend",title:"Documento de Salida"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",s,[(0,r.Lk)("div",u,[(0,r.bF)(L,{class:"truncate-label",label:"Talonario","option-label":"TALDES","option-value":"NUMTAL",options:e.talon,modelValue:e.selectTalon,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.selectTalon=a}),onInput:e.getNroRecibo},null,8,["options","modelValue","onInput"])]),(0,r.Lk)("div",d,[(0,r.bF)(x,{readonly:!e.chkTalon,label:"Nro. Documento",modelValue:e.nroRecibo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.nroRecibo=a})},null,8,["readonly","modelValue"])]),(0,r.Lk)("div",p,[(0,r.bF)(x,{label:"Fecha de Pago",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fecha,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.fecha=a}),mask:"##/##/####",readonly:""},{append:(0,r.k6)(function(){return[(0,r.bF)(H,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)($,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(y,{mask:"DD/MM/YYYY",modelValue:e.fecha,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.fecha=a}),onInput:e.closeModal},null,8,["modelValue","onInput"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",m,[(0,r.bF)(L,{label:"Moneda","option-label":"MONNOM","option-value":"MONCOD",options:e.moneda,modelValue:e.selectMoneda,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.selectMoneda=a}),onInput:e.cambiarMoneda},null,8,["options","modelValue","onInput"])])]),(0,r.Lk)("div",f,[(0,r.Lk)("div",h,[(0,r.bF)(L,{class:"truncate-label",label:"Medio de Pago","option-value":"ID_MEDIOPAGO","option-label":"MEDIOPAGO",options:e.medioPago,modelValue:e.selectMedioPagoTipo,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.selectMedioPagoTipo=a}),onInput:e.getTipoCredito},null,8,["options","modelValue","onInput"])]),(0,r.Lk)("div",O,[(0,r.bF)(L,{class:"truncate-label",label:"Cuenta origen","option-label":"CTACTE","option-value":"NUMCTA",options:e.ctaBancaria,modelValue:e.selectCtaBancaria,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.selectCtaBancaria=a}),disable:!e.mostrarCta},null,8,["options","modelValue","disable"])]),(0,r.Lk)("div",g,[(0,r.bF)(x,{label:e.labelVoucher,modelValue:e.voucher,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.voucher=a}),disable:!e.mostrarVoucher},null,8,["label","modelValue","disable"])])]),(0,r.Lk)("div",C,[(0,r.Lk)("div",P,[(0,r.bF)(x,{label:"Observación",modelValue:e.observacion,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.observacion=a}),maxlength:e.sizeObs},null,8,["modelValue","maxlength"])])])]}),_:1})]),(0,r.Lk)("div",A,[(0,r.bF)(q,{class:"q-card-legend full-width",title:""},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",b,[(0,r.bF)(L,{class:"truncate-label",label:"Tipo de Salida",options:e.comboTipoSalida,modelValue:e.selectTipoSalida,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.selectTipoSalida=a}),onInput:e.setTipoSalida},null,8,["options","modelValue","onInput"]),(0,r.bF)(L,{class:"truncate-label",label:"Regimen Tributario",options:e.adelantoPago,modelValue:e.selectAdelantoPago,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.selectAdelantoPago=a}),onInput:e.cambiarRegimenTributario},null,8,["options","modelValue","onInput"])])]}),_:1})])]}),_:1})):(0,r.Q3)("v-if",!0),e.pageHeader.tabsKeys.registro===e.pageHeader.tabActive&&e.showDetraccion?((0,r.uX)(),(0,r.Wv)(Q,{key:2},{default:(0,r.k6)(function(){return[(0,r.bF)(q,{class:"col-12 q-card-legend",title:"Datos de Detracción"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",D,[(0,r.Lk)("div",v,[(0,r.bF)(L,{class:"truncate-label",label:"Cuenta Destino",options:e.comboCtaDetracPersona,modelValue:e.selectCtaDetracPersona,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.selectCtaDetracPersona=a})},null,8,["options","modelValue"])]),(0,r.Lk)("div",T,[(0,r.bF)(L,{class:"truncate-label",modelValue:e.detraccion.TIP_OPER_DETRAC,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.detraccion.TIP_OPER_DETRAC=a}),"option-label":"VALOR","option-value":"CLAVE",options:e.comboTipOperDetrac,label:"Tipo de operación"},null,8,["modelValue","options"])]),(0,r.Lk)("div",E,[(0,r.bF)(L,{class:"truncate-label",modelValue:e.detraccion.TIP_SERV_DETRAC,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.detraccion.TIP_SERV_DETRAC=a}),"option-label":"VALOR","option-value":"CLAVE",options:e.comboTipServDetrac,label:"Tipo de Servicio"},null,8,["modelValue","options"])]),(0,r.Lk)("div",M,[(0,r.bF)(x,{modelValue:e.detraccion.porcentaje,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.detraccion.porcentaje=a}),type:"number",label:"% de Detracción",placeholder:"Ingrese el porcentaje"},null,8,["modelValue"])])])]}),_:1})]}),_:1})):(0,r.Q3)("v-if",!0),e.pageHeader.tabsKeys.registro===e.pageHeader.tabActive?((0,r.uX)(),(0,r.Wv)(Q,{key:3},{default:(0,r.k6)(function(){return[(0,r.bF)(q,{class:"col-12 q-card-legend",title:e.titleGroupPersona},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",N,[(0,r.Lk)("div",I,[(0,r.bF)(L,{class:"truncate-label",label:"Perfil",options:e.perfil,"option-value":"ID_PERFIL","option-label":"DESCRIPCION",modelValue:e.selectPerfil,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.selectPerfil=a}),onInput:e.getPersonaPerfil,disable:e.disablePersona},null,8,["options","modelValue","onInput","disable"])]),(0,r.Lk)("div",R,[(0,r.bF)(L,{class:"truncate-label","option-value":"ID_PERSONA","option-label":"NOMBRE",modelValue:e.selectPersona,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.selectPersona=a}),label:"Persona",options:e.persona,onInput:e.getDatosPersona,disable:e.disablePersona},null,8,["modelValue","options","onInput","disable"])]),(0,r.Lk)("div",_,[(0,r.bF)(j,{class:"btn-decorative",label:e.titleAddBoton,size:"sm",color:"primary",onClick:e.nuevaPersona},null,8,["label","onClick"])]),(0,r.Lk)("div",w,[1===e.selectTipoSalida?((0,r.uX)(),(0,r.Wv)(L,{key:0,class:"truncate-label",label:"Cuenta destino",options:e.comboCtaPersona,modelValue:e.selectCtaPersona,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.selectCtaPersona=a})},null,8,["options","modelValue"])):(0,r.Q3)("v-if",!0)])])]}),_:1},8,["title"])]}),_:1})):(0,r.Q3)("v-if",!0),e.pageHeader.tabsKeys.registro===e.pageHeader.tabActive?((0,r.uX)(),(0,r.Wv)(Q,{key:4},{default:(0,r.k6)(function(){return[(0,r.bF)(q,{class:"col-12 q-card-legend",title:"Documento a pagar"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",S,[(0,r.Lk)("div",V,[(0,r.bF)(L,{class:"truncate-label",label:"Tipo Comprobante","option-value":"ID_COMPROBANTE","option-label":"COMPROBANTE",options:e.dataComprobantes,modelValue:e.selectTipoComprobante,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.selectTipoComprobante=a})},null,8,["options","modelValue"])]),(0,r.Lk)("div",G,[(0,r.bF)(x,{label:"Fecha Emisión",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaDocumento,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.fechaDocumento=a}),mask:"##/##/####",readonly:""},{append:(0,r.k6)(function(){return[(0,r.bF)(H,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)($,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(y,{mask:"DD/MM/YYYY",modelValue:e.fechaDocumento,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.fechaDocumento=a}),onInput:e.closeModal},null,8,["modelValue","onInput"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,r.Lk)("div",k,[(0,r.bF)(x,{label:"Serie",modelValue:e.nroDocumento,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.nroDocumento=a}),maxlength:4},null,8,["modelValue"])]),(0,r.Lk)("div",U,[(0,r.bF)(x,{label:"Correlativo",modelValue:e.correlativoDocumento,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.correlativoDocumento=a}),maxlength:8,type:"numpag"},null,8,["modelValue"])])])]}),_:1}),(0,r.Lk)("div",B,[e.editGrid?((0,r.uX)(),(0,r.Wv)(Y,{key:0},{default:(0,r.k6)(function(){return[e.editGrid?((0,r.uX)(),(0,r.Wv)(j,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,r.k6)(function(){return n()(a[25]||(a[25]=[(0,r.eW)("Agregar",-1)]))}),_:1},8,["onClick"])):(0,r.Q3)("v-if",!0),e.editGrid?((0,r.uX)(),(0,r.Wv)(j,{key:1,class:"q-ma-xs",size:"sm",icon:"delete",color:"primary",onClick:e.deleteRows,flat:""},{default:(0,r.k6)(function(){return n()(a[26]||(a[26]=[(0,r.eW)("Eliminar",-1)]))}),_:1},8,["onClick"])):(0,r.Q3)("v-if",!0)]}),_:1})):(0,r.Q3)("v-if",!0),(0,r.bF)(W,{class:"ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,rowSelection:"multiple",groupUseEntireRow:!0,groupIncludeFooter:!0,frameworkComponents:e.frameworkComponents,stopEditingWhenGridLosesFocus:!0,onCellValueChanged:e.editing,singleClickEdit:!0,style:{height:"calc(100vh - 550px)"}},null,8,["columnDefs","rowData","onGridReady","frameworkComponents","onCellValueChanged"]),(0,r.Lk)("p",F,"Total a Pagar "+(0,i.v_)(e.monsig+": "+e.total),1)])]}),_:1})):(0,r.Q3)("v-if",!0),(0,r.bo)((0,r.bF)(X,{cp:"salidasvarias",lessHeight:"355",tab:"",ref:e.pageHeader.tabsKeys.consultar},null,512),[[l.aG,e.pageHeader.tabsKeys.consultar===e.pageHeader.tabActive]]),e.cambioModal?((0,r.uX)(),(0,r.Wv)(K,{key:5,idFormulario:22,modal:!0,modelValue:e.cambioModal,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.cambioModal=a}),methodUpdate:"TipoCambioController/updateTipoCambio",methodAdd:"TipoCambioController/addTipoCambio"},null,8,["modelValue"])):(0,r.Q3)("v-if",!0),e.personaModal?((0,r.uX)(),(0,r.Wv)(J,{key:6,modelValue:e.personaModal,"onUpdate:modelValue":a[24]||(a[24]=function(a){return e.personaModal=a}),onSubmit:e.submit,salidasVarias:!0,perfilDefecto:e.selectPerfil},null,8,["modelValue","onSubmit","perfilDefecto"])):(0,r.Q3)("v-if",!0)]}),_:1})}var x=t(99550),y=t.n(x),$=t(41562),H=t.n($),q=t(57008),Q=t.n(q),j=t(76080),Y=t.n(j),W=t(45254),X=t.n(W),K=(t(30683),t(74260),t(39866),t(23825),t(10239),t(23513),t(25751),t(50310),t(30317),t(32203),t(90095),t(11777),t(15547),t(515),t(83190),t(27153),t(52776),t(84433),t(44264),t(66307),t(68017),t(13715),t(24066),t(6123)),J=t(88567),z=t(95718),Z=t(53380),ee=t(64208),ae=t(54489),te=t(54267),oe=t(18105),ne=t(12143),re=t(95477),ie=t(3112),le=t(80660),ce=t(36408),se=t(96330),ue=t(64446),de=t(42037),pe=t(70674),me=t(57176),fe=t(99637),he=t(2701),Oe=t(86028),ge=t(9820),Ce=t(57668),Pe=t(38739),Ae=t(75053),be=t(2805),De=t(41615),ve=t(64303),Te=t(74160),Ee=t(2652),Me=t(26319),Ne=t(37013),Ie={components:{QCard:J.A,QDate:ne.A,QPopupProxy:re.A,QCardSection:z.A,QSeparator:Z.A,QInput:ee.A,QSelect:ae.S,QCheckbox:ie.A,QOptionGroup:Pe.A,sieGrid:ce.A,sieModal:Ae.A,headerGrid:se.A,cambio:me.A,crearPersona:he["default"],consultarComprobante:ge.A,AgregarPersona:be.A,crearBotones:ve.A,QPageHeader:Ee.A,reloadPage:Ne["default"],QIcon:K.bP,QBtn:K.Il},data:function(){return{nameComponente:"IngresosVarios",talon:[],selectTalon:null,infoConcepto:[],perfil:[],selectPerfil:De["default"].PERFIL_PROVEEDOR,chkTalon:!1,nroRecibo:"",frameworkComponents:null,fecha:(0,oe.Ay)(new Date,"DD/MM/YYYY"),persona:[],selectPersona:"",medioPago:[],selectMedioPagoTipo:De["default"].MEDIO_PAGO_EFECTIVO,adelantoPago:[],selectAdelantoPago:"",voucher:"",detraccion:{porcentaje:0,NUMCTA:"",NUMCHE:"",TIP_OPER_DETRAC:null,TIP_SERV_DETRAC:null,ID_PERSONA_CTA_BANCO_DETRAC:null},ctaBancaria:[],selectCtaBancaria:"",boletaOrigen:"",moneda:[],title:"Salidas Varias",titleModal:"SIEWEB: Tesorería",nroCuota:0,montoCuotas:0,sinMontoCuotas:0,cantFecven:0,montoCob:0,titleAddBoton:"Agregar Persona",titleGroupPersona:"Datos de Persona",titleCuotas:"",columnDefsCF:null,rowDataCF:null,apiCF:null,editGrid:!0,selectMoneda:null,storeMoneda:{MONNOM:"Soles",MONSIG:"S/",MONCOD:"001"},monsig:"",openModal:!1,nomCliente:"",checkBoxObs:!1,checkBoxCancelado:!0,checkBoxAux:!1,tipoComprobante:null,id_comprobante:De["default"].BOLETA,mostrarAuxiliar:!1,mostrarObservacion:!1,mostrarVoucher:!1,mostrarCta:!1,cacheMonedas:{},observacion:"",columnDefs:null,rowData:null,total:"0.00",perfilDesc:"",cambioModal:!1,personaModal:!1,permisoPerfil:[],PAGO_FORPAG:"",tipoCredito:null,PAGO_ORIPAG:De["default"].ORIPAG_CAJA,origenPago:De["default"].ORIGEN_CAJA,feccam:null,formasDePago:[],labelVoucher:"Nro. Voucher",readonlyVoucher:!0,readonlyBanco:!0,count:0,nivelAcceso:3,botones:[],totalPagoCredito:0,mostrarPermisoPerfil:!1,sizeObs:"",showDetraccion:!1,dataComprobantes:[],selectTipoComprobante:"",numeroDocumento:"",fechaDocumento:De["default"].CURRENT_DAY,nroDocumento:"",correlativoDocumento:"",pageHeader:{tabs:[],useTabs:!0,tabsKeys:{registro:"index",consultar:"consultar"},tabActive:"index",title:"Salidas Varias",botones:[],componente:"",nivelAcceso:(0,Ce["default"])().ruta.nivel},TIPO_ORDEN_COMPRA:"orden",selectTipoSalida:De["default"].TIPO_SALIDA_DIRECTA,comboTipoSalida:De["default"].TIPO_SALIDA,selectCtaPersona:null,comboCtaPersona:[],selectCtaDetracPersona:null,comboCtaDetracPersona:[],comboTipOperDetrac:[],comboTipServDetrac:[],TIP_OPER_DETRAC:null,TIP_SERV_DETRAC:null,PORC_DETRAC:10,disablePersona:!1}},props:{idmovimiento:{type:[String],default:""},path:{type:[String],default:"salida"}},methods:{actionTab:function(e){var a=this;return X()(Y()().m(function t(){var o;return Y()().w(function(t){while(1)switch(t.n){case 0:if(a.pageHeader.tabActive=e,e!==a.pageHeader.tabsKeys.registro){t.n=1;break}return a.pageHeader.title=a.title,a.pageHeader.componente="salidasVarias",a.crearBotones(),a.pageHeader.nivelAcceso=(0,Ce["default"])().ruta.nivel,t.a(2,!0);case 1:return t.n=2,a.$refs[e].actionTab();case 2:o=t.v,a.pageHeader.title=o.title,a.pageHeader.componente=o.componente,a.pageHeader.botones=o.botones,a.pageHeader.nivelAcceso=o.nivelAcceso;case 3:return t.a(2)}},t)}))()},getComprobantes:function(){var e=this;return X()(Y()().m(function a(){var t;return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,le.$http.get("api/talonarioController/getTipoComprobantes",{params:{parametros:{compras:!0}}});case 1:t=a.v,e.dataComprobantes=t.sort(function(e,a){return e.ID_COMPROBANTE>a.ID_COMPROBANTE?1:-1});case 2:return a.a(2)}},a)}))()},getPorcentajeDetraccion:function(){var e=this;return X()(Y()().m(function a(){var t,o,n;return Y()().w(function(a){while(1)switch(a.n){case 0:if(!e.selectPersona){a.n=2;break}return t={params:{idPersona:e.selectPersona,consulta:{getPersona:!0}}},a.n=1,le.$http.get("api/personaController/getPersona",{params:t});case 1:o=a.v,Object.keys(o).length>0&&(n=o.persona,e.detraccion.porcentaje=n[0].PORC_DETRAC,e.detraccion.TIP_OPER_DETRAC=n[0].TIP_OPER_DETRAC,e.detraccion.TIP_SERV_DETRAC=n[0].TIP_SERV_DETRAC);case 2:return a.a(2)}},a)}))()},cambiarRegimenTributario:function(){var e=this;return X()(Y()().m(function a(){return Y()().w(function(a){while(1)switch(a.n){case 0:if(e.showDetraccion=e.selectAdelantoPago===De["default"].TIPO_ADELANTO_PAGO.DETRACCION,!e.showDetraccion){a.n=1;break}return a.n=1,e.getPorcentajeDetraccion();case 1:return a.a(2)}},a)}))()},getDdl:function(){var e=this;return X()(Y()().m(function a(){var t;return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,Te.n)(["PAGO"]);case 1:t=a.v,e.sizeObs=t.PAGO.OBSERVA;case 2:return a.a(2)}},a)}))()},abrirModalTipoCambio:function(){this.cambioModal=!0},crearBotones:function(){this.botones=[],this.path===this.TIPO_ORDEN_COMPRA&&this.botones.push({label:"REGRESAR",icon:"arrow_back",click:this.regresarPagoCompras,minAcceso:1}),this.botones.push({label:"GUARDAR",icon:"save",click:this.guardarSalidasVarios,minAcceso:De["default"].LECTURA_ESCRITURA}),this.pageHeader.botones=this.botones},consultar:function(){this.$router.push({name:"tesoreria.registroConsultarComprobante",params:{cp:"salidasvarias"}})},getChecking:function(){},getCheckingObs:function(){!0===this.checkBoxObs?this.mostrarObservacion=!0:this.mostrarObservacion=!1},mostrarMediosPago:function(e){this.labelVoucher="Nro. Voucher",e===De["default"].MEDIOS_PAGO_GRUPO.TARJETA?(this.mostrarVoucher=!0,this.mostrarCta=!1):[De["default"].MEDIOS_PAGO_GRUPO.BANCO,De["default"].MEDIOS_PAGO_GRUPO.CHEQUE].includes(e)?(this.mostrarVoucher=!0,this.mostrarCta=!0,this.labelVoucher=De["default"].MEDIOS_PAGO_GRUPO.BANCO===e?"Nro. Operación":"Nro. Cheque"):(this.mostrarVoucher=!1,this.mostrarCta=!1)},getCheckingAux:function(){this.getTalonariosUsuario()},getTipoCredito:function(){var e=this;return X()(Y()().m(function a(){var t,o,n;return Y()().w(function(a){while(1)switch(a.n){case 0:t=[],e.medioPago.forEach(function(a){e.selectMedioPagoTipo===a.ID_MEDIOPAGO&&t.push(a)}),0!==t.length&&(o=[].concat(t),n=o[0],e.PAGO_FORPAG=n.FORPAG,e.tipoCredito=n.TIPO_MEDIO,[De["default"].MEDIOS_PAGO_GRUPO.BANCO,De["default"].MEDIOS_PAGO_GRUPO.CHEQUE,De["default"].MEDIOS_PAGO_GRUPO.TARJETA].includes(n.TIPO_MEDIO)?(e.origenPago=De["default"].ORIGEN_BANCO,e.PAGO_ORIPAG=De["default"].ORIPAG_BANCO,De["default"].MEDIOS_PAGO_GRUPO.TARJETA===n.TIPO_MEDIO&&(0===n.NUMCTA.length&&e.$alert("La forma de pago ".concat(n.MEDIOPAGO," no tiene configurado la cuenta bancaria"),"warning"),e.selectCtaBancaria=n.NUMCTA)):(e.origenPago=De["default"].ORIGEN_CAJA,e.PAGO_ORIPAG=De["default"].ORIPAG_CAJA),e.mostrarMediosPago(n.TIPO_MEDIO));case 1:return a.a(2)}},a)}))()},getRows:function(e){var a=[];return(0,fe["default"])(e,function(e){a.push(e.data)}),a},getForm:function(e){if(e.success){var a="";e.form.TIPO_PERSONA===De["default"].PERSONA_NATURAL?a="".concat(e.form.NOMBRES," ").concat(e.form.APELLIDO_PATERNO," ").concat(e.form.APELLIDO_MATERNO," | ").concat(e.form.IDPERSONA):e.form.TIPO_PERSONA===De["default"].PERSONA_JURIDICA&&(a="".concat(e.form.RAZONSOCIAL," | ").concat(e.form.IDPERSONA)),this.persona.unshift({ID_PERSONA:e.form.IDPERSONA,NOMBRE:a}),this.selectPersona=e.form.IDPERSONA}},loadPerfil:function(e){e.idPerfil.push(this.selectPerfil)},nuevaPersona:function(){this.personaModal=!0},validarSalidasVarios:function(e){if(!this.selectPersona)return this.$alert("Debe seleccionar una persona","warning"),!1;if(!this.selectTalon)return this.$alert("Debe seleccionar un talonario","warning"),!1;if(!this.fechaDocumento)return this.$alert("No selecciono fecha de documento de salida","warning"),!1;if(!this.selectTipoComprobante)return this.$alert("No selecciono el tipo de comprobante de salida","warning"),!1;if(!this.nroDocumento||0===this.nroDocumento.trim().length)return this.$alert("No registro la serie del documento","warning"),!1;if(!/^[a-zA-Z0-9]{1,4}$/.test(this.nroDocumento))return this.$alert("No se registro correctamente la serie del documento","warning"),!1;if(!this.correlativoDocumento||0===this.correlativoDocumento.trim().length)return this.$alert("No registro el número del documento","warning"),!1;if(this.selectTipoSalida===De["default"].TIPO_SALIDA_BLOQUE){if(!this.selectCtaBancaria||0===this.selectCtaBancaria.length)return this.$alert("Debe seleccionar la cuenta bancaria origen","warning"),!1;if(!this.selectCtaPersona||0===this.selectCtaPersona.length)return this.$alert("Debe seleccionar la cuenta bancaria de destino del ".concat(this.perfilDesc),"warning"),!1}if(this.showDetraccion){if(!this.selectCtaDetracPersona)return this.$alert("Selecciona una cuenta bancaria de detracción","warning"),!1;if(!this.detraccion.TIP_OPER_DETRAC||0===this.detraccion.TIP_OPER_DETRAC.length)return this.$alert("Debe seleccionar el tipo de operación de la detracción","warning"),!1;if(!this.detraccion.TIP_SERV_DETRAC||0===this.detraccion.TIP_SERV_DETRAC.length)return this.$alert("Debe seleccionar el tipo de servicio de la detracción","warning"),!1;if(0===this.detraccion.porcentaje)return this.$alert("Debe ingresar el porcentaje de la detracción","warning"),!1}var a=this.api.getModel().rowsToDisplay,t={};if(!(a.length>0))return this.$alert("No ha registrado los conceptos para cancelar.","warning"),!1;for(var o=!1,n=0,r=a.length,i=0;i<r;i++){var l=this.api.getModel().rowsToDisplay[i];if(!l.data.concepto){o=!0,n=l.data.item;break}t[l.data.concepto]||(t[l.data.concepto]={item:l.data.item,numero:0}),t[l.data.concepto].item=l.data.item,t[l.data.concepto].concob=l.data.concepto,t[l.data.concepto].numero+=1}var c=[];for(var s in t)if(t[s].numero>1)if(this.infoConcepto[t[s].concob]){var u=this.infoConcepto[t[s].concob];c.push("El item (".concat(t[s].item,") esta duplicado por el concepto (").concat(u.CONDES,")"))}else c.push("El item (".concat(t[s].item,") esta duplicado"));if(c.length>0){var d=[].concat(c),p=d[0];return this.$alert(p,"warning"),!1}return o?(this.$alert("No ha elegido un concepto en el item (".concat(n,")."),"warning"),!1):"openFormaPago"===e&&1!==a.length?(this.$alert("Sólo puede aplicar las formas de pago por 1 concepto a la vez","warning"),!1):"savePago"!==e||!0!==this.checkBoxCancelado||null!==this.selectMedioPagoTipo||(this.$alert("Debe de elegir la forma de Pago","warning"),!1)},validarConceptosIgv:function(){var e=this.api.getSelectedRows();return e.every(function(e){return e.afeigv===De["default"].AFEIGV})},guardarSalidasVarios:function(){var e=this;return X()(Y()().m(function a(){var t,o;return Y()().w(function(a){while(1)switch(a.n){case 0:if(t=e.validarSalidasVarios("savePago"),o=e.getRows(e.api.getModel().rowsToDisplay),!t){a.n=4;break}if(!e.showDetraccion){a.n=3;break}if(0!==e.detraccion.porcentaje){a.n=1;break}return e.$alert("No ha registrado el porcentaje de la Detracción","warning"),a.a(2,!1);case 1:return a.n=2,e.registrarSalidasConDetracion(o);case 2:a.n=4;break;case 3:return a.n=4,e.registrarSalidasVarios(o);case 4:return a.a(2)}},a)}))()},registrarSalidasConDetracion:function(e){var a=this;return X()(Y()().m(function t(){var o,n,r;return Y()().w(function(t){while(1)switch(t.n){case 0:o=[],n=[],e.forEach(function(e){o.push(a.calcularMontoSinDetraccion(Q()({},e))),n.push(a.calcularMontoDetraccion(Q()({},e)))}),r={},a.showDetraccion&&(r={NUMCTA:a.selectCtaBancaria,ID_MEDIOPAGO:De["default"].MEDIO_PAGO_DEPOSITO,NUMCHE:a.voucher,TIP_OPER_DETRAC:a.detraccion.TIP_OPER_DETRAC,TIP_SERV_DETRAC:a.detraccion.TIP_SERV_DETRAC,ID_PERSONA_CTA_BANCO_DETRAC:a.selectCtaDetracPersona,porcentaje:a.detraccion.porcentaje}),a.$confirm("¿Esta seguro de registrar el pago?","info").onOk(X()(Y()().m(function e(){var t,i;return Y()().w(function(e){while(1)switch(e.n){case 0:return a.$q.loading.show(),e.n=1,a.parametrosParaGuardar(o);case 1:return t=e.v,e.n=2,a.parametrosParaGuardar(n,r);case 2:i=e.v,le.$http.post("api/PagoController/postSalidaVarias",{parametros:t}).then(function(e){return a.apiRegistrarSalida(i)}).catch(function(e){var t=e.error;a.$q.loading.hide(),a.$alert(t.message,"warning")});case 3:return e.a(2)}},e)})));case 1:return t.a(2)}},t)}))()},clearForm:function(){this.openModal=!1,this.selectPersona=null,this.formasDePago=[],this.total="0.00",this.observacion="",this.selectCtaBancaria=null,this.voucher="",this.selectMedioPagoTipo=null,this.mostrarVoucher=!1,this.mostrarCta=!1,this.detraccion.NUMCTA=null,this.detraccion.NUMCHE="",this.selectTipoComprobante=null,this.nroDocumento="",this.correlativoDocumento=""},generarFormadePagoGrupal:function(e,a,t){var o=n()(t),r=o[0],i={FECPAG:a.FECEMI,ORIPAG:this.origenPago},l=[];return e.forEach(function(e){l.push({ID_MEDIOPAGO:e.FORMAPAGO,NUMVOU:e.OPERACION,MONTOING:e.INGRESO,MONTOSAL:e.SALIDA,MONCOD:e.MONEDA,CONCOB:r.CONCOB,MESCOB:r.MESCOB,ANOCOB:r.ANOCOB})}),{datos:i,detalle:l}},obtenerMontoDetraccion:function(e){return Number(this.detraccion.porcentaje)>0?Number(e)*Number(this.detraccion.porcentaje)/100:e},calcularMontoSinDetraccion:function(e){var a=this.obtenerMontoDetraccion(e.monto);return e.precio=(e.precio-Number(a/e.cantidad)).toFixed(2),e.monto=e.monto-a,e.subtotal=Number(e.monto),e},calcularMontoDetraccion:function(e){var a=this.obtenerMontoDetraccion(e.monto);return e.precio=a,e.monto=a,e.cantidad=1,e.subtotal=Number(e.monto),e},generarFormaDePagoUnico:function(e,a){var t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[],r=H()(a);try{for(r.s();!(t=r.n()).done;){var i=t.value,l={ID_MEDIOPAGO:this.selectMedioPagoTipo,MONTOING:0,MONTOSAL:i.MONTOPAG,MONCOD:this.selectMoneda,CONCOB:i.CONCOB,MESCOB:i.MESCOB,ANOCOB:i.ANOCOB};this.tipoCredito===De["default"].MEDIOS_PAGO_GRUPO.BANCO?(l.NUMCTA=this.selectCtaBancaria,l.NUMOPE=this.voucher):this.tipoCredito===De["default"].MEDIOS_PAGO_GRUPO.CHEQUE?(l.NUMCTA=this.selectCtaBancaria,l.NUMCHE=this.voucher):this.tipoCredito===De["default"].MEDIOS_PAGO_GRUPO.TARJETA&&(l.NUMVOU=this.voucher,l.NUMCTA=this.selectCtaBancaria),o&&o.NUMCTA&&o.NUMCTA.length>0&&(l.ID_MEDIOPAGO=o.ID_MEDIOPAGO,l.NUMCTA=o.NUMCTA,l.NUMOPE=o.NUMCHE),n.push(l)}}catch(e){r.e(e)}finally{r.f()}var c={FECPAG:e.FECEMI,ORIPAG:this.origenPago,TIPMOV:De["default"].TIPO_MOVIMIENTO_PAGO.SALIDA};return o&&o.NUMCTA&&o.NUMCTA.length>0&&(c.ORIPAG=De["default"].ORIGEN_BANCO),{datos:c,detalle:n}},enumerarItem:function(){var e=[];this.api.forEachNodeAfterFilterAndSort(function(a,t){var o=a.data;o.item=t+1,e.push(o)}),this.api.updateRowData({update:e})},deleteRows:function(){var e=this.api.getSelectedRows();e.length>0?(this.api.updateRowData({remove:e}),this.enumerarItem(),this.calcularTotal()):this.$alert("Debe seleccionar un registro.")},addRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=(0,te.convertToYMD)(this.fecha),t={item:this.api.getModel().rowsToDisplay.length+1,anio:String(a.getFullYear()),mes:("0"+String(a.getMonth()+1)).slice(-2),concepto:"",afeigv:"N",cantidad:1,precio:0,monto:0,mora:0,descuento:0,subtotal:0};e&&e.CONCOB&&(t.cantidad=1,t.concepto=e.CONCOB,t.precio=e.TOTAL,t.monigv=e.MONIGV,t.inaigv=e.INAIGV,t.monto=e.TOTAL,t.subtotal=e.TOTAL,t.afeigv=e.AFEIGV),this.api.updateRowData({add:[t]})},modificandoRow:function(e){var a=e.colDef.field,t=e.data;"cantidad"!==a&&"precio"!==a||(t[a]=parseFloat((0,de.toFixed)(t[a])));var o=0===t.cantidad?1:t.cantidad;t.cantidad=o;var n=t.precio;t.monto=n*o,t.subtotal=t.monto,this.api.updateRowData({update:[t]})},editing:function(e){this.modificandoRow(e),this.calcularTotal()},calcularTotal:function(){var e=0;this.api.getModel().forEachNode(function(a){e+=a.data.subtotal}),this.total=(0,de.toFixed)(e)},cambiarAnioMes:function(){var e=this.fecha.split("/");if(3===e.length){var a=[];this.api.getModel().forEachNode(function(t){var o=String(e[2]),n=String(e[1]);t.data.anio=o,t.data.mes=n,a.push(t.data)}),this.api.updateRowData({update:a})}},closeModal:function(){this.$refs.qDateProxy.hide(),this.cambiarAnioMes()},onGridReady:function(e){this.api=e.api},onGridReadyCF:function(e){this.apiCF=e.api},getDatosPersona:function(e){var a=this;return X()(Y()().m(function e(){var t,o,r;return Y()().w(function(e){while(1)switch(e.n){case 0:if(a.mostrarAuxiliar=!1,a.checkBoxAux=!1,![De["default"].PERFIL_ALUMNO,De["default"].PERFIL_POSTULANTE].includes(a.selectPerfil)){e.n=2;break}return e.n=1,le.$http.get("api/personaController/getPersonaSubcliente",{params:{parametros:{id_persona_subcliente:a.selectPersona}}});case 1:t=e.v,t.length>0&&(o=n()(t),r=o[0],a.nomCliente=r.SUBCLIENTE,r.ID_COMPROBANTE===De["default"].FACTURA&&(a.checkBoxAux=!0,a.mostrarAuxiliar=!0)),e.n=4;break;case 2:return e.n=3,a.obtenerCuentasPersona(a.selectPersona);case 3:if(!a.showDetraccion){e.n=4;break}return e.n=4,a.getPorcentajeDetraccion();case 4:return e.a(2)}},e)}))()},getTalonariosUsuario:function(){var e=this;return X()(Y()().m(function a(){var t,o,r;return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,le.$http.get("api/talonarioController/getTalonariosUsuario",{params:{parametros:{response:"combo",opcionMenu:"salidas"}}});case 1:t=a.v,t.length>0&&(e.talon=t,o=n()(t),r=o[0],e.selectTalon=r.NUMTAL,e.selectTalon&&e.editRecibo());case 2:return a.a(2)}},a)}))()},editRecibo:function(){var e=this;return X()(Y()().m(function a(){return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getNroRecibo(e.selectTalon);case 1:return a.a(2)}},a)}))()},getNroRecibo:function(e){var a=this;return X()(Y()().m(function t(){var o,r,i;return Y()().w(function(t){while(1)switch(t.n){case 0:if(!e){t.n=2;break}return t.n=1,le.$http.get("api/talonarioController/getCorrelativo",{params:{parametros:{response:"combo",numtal:e}}});case 1:o=t.v,o.length>0&&(r=n()(o),i=r[0],a.nroRecibo=i.NUMPAG,a.tipoComprobante=i.ID_COMPROBANTE);case 2:return t.a(2)}},t)}))()},getPerfiles:function(){var e=this;le.$http.get("api/personaController/getPerfiles",{params:{params:{perfiles_tesoreria:!0,salidasVarias:!0}}}).then(function(a){e.perfil=a})},getPersonaPerfil:function(e){var a=this;return X()(Y()().m(function t(){var o;return Y()().w(function(t){while(1)switch(t.n){case 0:return a.mostrarPermisoPerfil=Number(a.selectPerfil)===Number(De["default"].PERFIL_CLIENTE_AUXILIAR),t.n=1,a.$http.get("api/personaController/getPersonaPerfil",{params:{params:{id_perfil:a.selectPerfil||0}}});case 1:o=t.v,a.selectPersona="",a.checkBoxAux=!1,a.mostrarAuxiliar=!1,a.persona=o,a.selectPersona=e||"",a.perfil.length>0&&a.perfil.forEach(function(e){Number(e.ID_PERFIL)===Number(a.selectPerfil)&&(a.perfilDesc=e.DESCRIPCION,a.titleAddBoton="Agregar ".concat(e.DESCRIPCION),a.titleGroupPersona="Datos del ".concat(e.DESCRIPCION))});case 2:return t.a(2)}},t)}))()},setTipoSalida:function(){var e=this;return X()(Y()().m(function a(){var t;return Y()().w(function(a){while(1)switch(a.n){case 0:return e.selectTipoSalida===De["default"].TIPO_SALIDA_BLOQUE&&(t=e.medioPago.find(function(e){return e.ID_MEDIOPAGO===De["default"].MEDIO_PAGO_DEPOSITO}),t&&(e.selectMedioPagoTipo=t.ID_MEDIOPAGO)),a.n=1,e.getTipoCredito();case 1:return a.a(2)}},a)}))()},getMediosPagos:function(){var e=this;return X()(Y()().m(function a(){return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,le.$http.get("api/formaPagoController/getMediosDePago",{params:{parametros:{response:"list",tipo_medio:"I"}}}).then(function(a){e.medioPago=a,e.getTipoCredito()});case 1:return a.a(2)}},a)}))()},getAdelantoPago:function(){var e=this;return X()(Y()().m(function a(){return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,De["default"].SISTEMA_ADELANTO();case 1:e.adelantoPago=a.v;case 2:return a.a(2)}},a)}))()},getCtaBancaria:function(){var e=this;le.$http.get("api/bancoController/getCuentasBancarias",{params:{parametros:{response:"combo"}}}).then(function(a){e.ctaBancaria=a})},getMoneda:function(){var e=this;return X()(Y()().m(function a(){return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,le.$http.get("api/cobroController/getMoneda",{params:{parametros:{response:"combo"}}}).then(function(a){if(0!==a.length){var t=n()(a),o=t[0];e.selectMoneda=o.MONCOD,e.monsig=o.MONSIG,(0,fe["default"])(a,function(a){e.cacheMonedas[a.MONCOD]=a}),e.moneda=a}});case 1:return a.a(2)}},a)}))()},cambiarMoneda:function(){this.storeMoneda={MONNOM:this.cacheMonedas[this.selectMoneda].MONNOM,MONSIG:this.cacheMonedas[this.selectMoneda].MONSIG,MONCOD:this.cacheMonedas[this.selectMoneda].MONCOD},this.monsig=this.cacheMonedas[this.selectMoneda].MONSIG},regresarPagoCompras:function(){this.$router.push({name:"tesoreria.registroPagoProveedores"})},concatenarNroDocumento:function(e,a){return"".concat(String(e).substring(0,4),"-").concat(String(a).substring(0,7))},itemSalidasVarias:function(e){return X()(Y()().m(function a(){var t;return Y()().w(function(a){while(1)switch(a.n){case 0:return t={ANOCOB:e.anio,MESCOB:e.mes,CONCOB:e.concepto,AFEIGV:e.afeigv,PREUNI:e.precio,CANTIDAD:e.cantidad,MONTOCOB:e.monto,MONTODES:e.descuento,MONTOMOR:e.mora,MONTOPAG:e.subtotal,MONTOPEN:0},a.a(2,t)}},a)}))()},cargarDatosProveedor:function(){var e=this;return X()(Y()().m(function a(){var t,o,n;return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoMovAlm/getMovimientoPorPagar",{params:{idmovalm:e.idmovimiento}}).then(function(e){return e});case 1:if(t=a.v,o=t.cabecera,n=t.detalle,!o){a.n=4;break}return e.selectMoneda=o.MONCOD,e.nroDocumento=o.COMPROBANTE_SERIE,e.correlativoDocumento=o.COMPROBANTE_CORRELATIVO,e.selectTipoComprobante=o.ID_COMPROBANTE,e.selectPersona=o.ID_PROVEEDOR,e.fechaDocumento=(0,Me.date)(o.FECHA_EMISION||new Date).datePeru,a.n=2,e.getPersonaPerfil(e.selectPersona);case 2:return a.n=3,e.obtenerCuentasPersona(e.selectPersona);case 3:if(!e.showDetraccion){a.n=4;break}return a.n=4,e.getPorcentajeDetraccion();case 4:n&&Array.isArray(n)?(n.forEach(function(a){e.addRow(a)}),e.calcularTotal()):Array.isArray(n)&&0===n.length&&e.$alert("El movimiento (".concat(e.idmovimiento,") no tiene asociados los conceptos a pagar y/o no hay detalle"),"warning");case 5:return a.a(2)}},a)}))()},obtenerCuentasPersona:function(e){var a=this;return X()(Y()().m(function t(){var o,n,r,i,l,c,s,u;return Y()().w(function(t){while(1)switch(t.n){case 0:return o={idPersona:e},t.n=1,a.$http.get("api/PersonaController/getPersonaCtaBanco",{params:{params:o}});case 1:if(n=t.v,n.length>0){r=H()(n);try{for(r.s();!(i=r.n()).done;)l=i.value,c=l.ID_PERSONA_CTA_BANCO,6===l.TIPO_CTA?(s="".concat(l.DESCRIPCION," | CTA:").concat(l.NRO_CUENTA),a.selectCtaDetracPersona=l.ID_PERSONA_CTA_BANCO,a.comboCtaDetracPersona.push({label:s,value:c})):(u="".concat(l.DESCRIPCION," | CTA:").concat(l.NRO_CUENTA," | CCI:").concat(l.NRO_CCI),1===l.TIPO_USO&&(a.selectCtaPersona=l.ID_PERSONA_CTA_BANCO),a.comboCtaPersona.push({label:u,value:c}))}catch(e){r.e(e)}finally{r.f()}}else a.selectCtaDetracPersona=null,a.comboCtaDetracPersona=[],a.selectCtaPersona=null,a.comboCtaPersona=[];case 2:return t.a(2)}},t)}))()},obtenerTipOperDetrac:function(){var e=this;return X()(Y()().m(function a(){var t;return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,le.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0083"}}});case 1:t=a.v,e.comboTipOperDetrac=t;case 2:return a.a(2)}},a)}))()},obtenerTipServDetrac:function(){var e=this;return X()(Y()().m(function a(){var t;return Y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,le.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0084"}}});case 1:t=a.v,e.comboTipServDetrac=t;case 2:return a.a(2)}},a)}))()},apiRegistrarSalida:function(e){var a=this;return X()(Y()().m(function t(){return Y()().w(function(t){while(1)switch(t.n){case 0:le.$http.post("api/PagoController/postSalidaVarias",{parametros:e}).then(function(e){a.$q.loading.hide(),a.$alert(e.message,"success").onOk(function(){a.rowData=[],a.clearForm(),a.mostrarAuxiliar=!1,a.checkBoxAux=!1,a.editRecibo(),a.$refs[a.pageHeader.tabsKeys.consultar].pagosEmitidos(),a.$confirm("¿Desea Imprimir el Comprobante?","info",!1,!0).onOk(function(){var t=(0,Ce["default"])().origin;if(a.count=a.count+1,e.data.length>0){var o=e.data[0],n=o.NUMPAG,r=o.NUMTAL;De["default"].IMPRIMIR_COMPROBANTE(t,r,n)}})})}).catch(function(e){var t=e.error;a.$q.loading.hide(),a.$alert(t.message,"warning")});case 1:return t.a(2)}},t)}))()},parametrosParaGuardar:function(){var e=arguments,a=this;return X()(Y()().m(function t(){var o,n,r,i,l,c,s;return Y()().w(function(t){while(1)switch(t.n){case 0:o=e.length>0&&void 0!==e[0]?e[0]:{},n=e.length>1&&void 0!==e[1]?e[1]:{},r=[],i={NUMTAL:a.selectTalon,NUMDOC:a.nroRecibo,FECEMI:new Date((0,te.convertToYMD)(a.fecha)),ID_PERFIL:a.selectPerfil,ID_PERSONA:a.selectPersona,ORIPAG:null,NUMCTA:null,NUMCHE:null,CHECK_CANCELADO:!0,ANUPAG:De["default"].PAGO_ANUPAG.CANCELADO,MONCOD:a.selectMoneda,OBSERVACION:a.observacion,EDIT_NUMPAG:a.chkTalon,FCHDOC:new Date((0,te.convertToYMD)(a.fechaDocumento)),TIPDOC:a.selectTipoComprobante,NRODOC:a.concatenarNroDocumento(a.nroDocumento,a.correlativoDocumento),FORPAG:a.PAGO_FORPAG},a.path===a.TIPO_ORDEN_COMPRA&&(i.ID_MOVALM=a.idmovimiento),l=0;case 1:if(!(l<o.length)){t.n=4;break}return s=r,t.n=2,a.itemSalidasVarias(o[l],n);case 2:s.push.call(s,t.v);case 3:l++,t.n=1;break;case 4:return c={},t.n=5,a.generarFormaDePagoUnico(i,r,n);case 5:return c=t.v,i.FECPAG=c.datos.FECPAG,i.ORIPAG=a.PAGO_ORIPAG,a.PAGO_ORIPAG===De["default"].ORIPAG_BANCO&&(i.NUMCTA=a.selectCtaBancaria,i.NUMCHE=a.voucher),Object.keys(n).length>0&&n.NUMCTA&&n.NUMCTA.length>0&&(i.ORIPAG=De["default"].ORIPAG_BANCO,i.NUMCTA=n.NUMCTA,i.NUMCHE=n.NUMCHE,i.PORC_DETRAC=n.porcentaje,i.TIP_OPER_DETRAC=n.TIP_OPER_DETRAC,i.TIP_SERV_DETRAC=n.TIP_SERV_DETRAC,i.ID_PERSONA_CTA_BANCO_DETRAC=n.ID_PERSONA_CTA_BANCO_DETRAC,i.PAGO_DETRACCION=!0),a.selectTipoSalida===De["default"].TIPO_SALIDA_BLOQUE&&0===Object.keys(n).length&&(i.FLAG_SALIDA_BLOQUE=!0,i.ID_PERSONA_CTA_BANCO=a.selectCtaPersona),t.a(2,{pago:i,pagoDet:r,formaPago:c})}},t)}))()},registrarSalidasVarios:function(e){var a=arguments,t=this;return X()(Y()().m(function o(){var n,r;return Y()().w(function(o){while(1)switch(o.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},o.n=1,t.parametrosParaGuardar(e,n);case 1:r=o.v,t.$confirm("¿Esta seguro de registrar el pago?","info").onOk(function(){t.$q.loading.show(),t.apiRegistrarSalida(r)});case 2:return o.a(2)}},o)}))()},submit:function(e){var a=this;return X()(Y()().m(function t(){return Y()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,a.getPersonaPerfil(e);case 1:a.personaModal=!1;case 2:return t.a(2)}},t)}))()}},computed:{},mounted:function(){var e=this;return X()(Y()().m(function a(){return Y()().w(function(a){while(1)switch(a.n){case 0:if(e.path!==e.TIPO_ORDEN_COMPRA){a.n=2;break}return e.title="Pagar Proveedores",e.pageHeader.title="Pagar Proveedores",a.n=1,e.cargarDatosProveedor();case 1:e.editGrid=!1,e.disablePersona=!0,e.selectTipoSalida=De["default"].TIPO_SALIDA_BLOQUE,e.setTipoSalida(),e.crearBotones();case 2:return a.a(2)}},a)}))()},beforeMount:function(){var e=this;return X()(Y()().m(function a(){var t,o,n,r,i;return Y()().w(function(a){while(1)switch(a.n){case 0:return e.path===e.TIPO_ORDEN_COMPRA?e.pageHeader.useTabs=!1:(e.pageHeader.tabs.push({name:"index",label:"Registro"}),e.pageHeader.tabs.push({name:"consultar",label:"Consultar"})),e.getDdl(),e.crearBotones(),e.getTalonariosUsuario(),e.getMediosPagos(),e.getAdelantoPago(),e.getCtaBancaria(),e.getMoneda(),e.obtenerTipOperDetrac(),e.obtenerTipServDetrac(),e.getComprobantes(),a.n=1,e.getPerfiles();case 1:return a.n=2,e.getPersonaPerfil();case 2:return t=le.$http.get("api/anioController/getAnios",{params:{parametros:{response:"combo"}}}),o=(0,te.generarMeses)(),a.n=3,le.$http.get("api/concobroController/getConceptos",{params:{parametros:{salVarias:!0}}});case 3:n=a.v,r=[],e.infoConcepto={},n.length>0&&n.forEach(function(a){r.push({CONCOB:a.CONCOB,CONDES:a.CONDES}),e.infoConcepto[a.CONCOB.toString()]=a}),e.frameworkComponents={select:ue.A},i=e,Promise.all([t,o]).then(function(a){var t=y()(a,2),o=t[0],n=t[1];e.columnDefs=[{headerName:"Item",field:"item",width:60},{headerName:"Año",field:"anio",width:90,editable:!0,cellEditor:(0,pe.A)(e,"anio"),cellEditorParams:{"option-value":"ID","option-label":"ANO",options:o}},{headerName:"Mes",field:"mes",width:100,editable:!0,cellEditor:(0,pe.A)(e,"mes"),cellEditorParams:{"option-value":"value","option-label":"label",options:n}},{headerName:"Concepto",field:"concepto",width:270,editable:!0,cellEditor:(0,pe.A)(e,"concepto"),cellEditorParams:{"option-value":"CONCOB","option-label":"CONDES",debounce:400,options:r,onChange:function(e,a){var t=!1;if(e.getModel().forEachNode(function(e){if(a.concepto===e.data.concepto&&a.item!==e.data.item)return a.concepto="",t=!0,!1}),t)e.updateRowData({update:[a]});else{if(i.infoConcepto[a.concepto]){var o=i.infoConcepto[a.concepto];a.precio=o.MONTO?o.MONTO:0,a.afeigv=o.AFEIGV,o.MONCOD!==i.selectMoneda&&i.$confirm("Tipo de moneda distintos\n                      ¿Desea cambiar la moneda por ".concat(i.cacheMonedas[o.MONCOD].MONNOM,"?\n                      Esto afectará a todos los conceptos elegidos previamente.")).onOk(function(){i.selectMoneda=o.MONCOD})}e.updateRowData({update:[a]}),i.modificandoRow({data:a,colDef:{field:"precio"}}),i.calcularTotal()}}}}],e.path===e.TIPO_ORDEN_COMPRA?e.columnDefs.push({headerName:"Monto Inafecto",field:"inaigv",valueFormatter:de.toFixed,cellClass:"text-right",width:120},{headerName:"IGV",field:"monigv",valueFormatter:de.toFixed,cellClass:"text-right",width:90},{headerName:"Cant",field:"cantidad",width:70,hide:!0},{headerName:"Prec. Unit.",field:"precio",width:100,hide:!0}):e.columnDefs.push({headerName:"Cant",field:"cantidad",width:70,valueFormatter:de.toFixed,cellEditor:Oe.A,cellClass:"text-right",editable:!0},{headerName:"Prec. Unit.",field:"precio",width:100,valueFormatter:de.toFixed,cellEditor:Oe.A,cellClass:"text-right",editable:!0},{headerName:"Monto",field:"monto",valueFormatter:de.toFixed,cellClass:"text-right",width:80}),e.columnDefs.push({headerName:"Subtotal",field:"subtotal",valueFormatter:de.toFixed,cellClass:"text-right",width:100})}),e.rowData=[];case 4:return a.a(2)}},a)}))()}},Re=t(12807);const _e=(0,Re.A)(Ie,[["render",L]]);var we=_e}}]);