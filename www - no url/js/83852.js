"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[83852],{83852:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});a(71225),a(50310),a(5962),a(83190);var l=a(61758),i=a(58790),n={class:"q-ma-sm"},s={class:"row"},o={class:"text-bold"},r={class:"row q-mx-md q-mt-xs"},d={class:"row q-mx-md q-mt-xs"},u={class:"row q-mx-md q-mt-xs"},c={class:"row q-mx-md q-mt-xs"},m={key:0,class:"row q-mx-md q-mt-xs"},v={class:"row q-mx-md q-mt-xs"},f={class:"row q-mx-md q-mt-xs"},k={class:"row q-mx-md q-mt-xs"},E={key:0,class:"row q-mx-md q-mt-xs"},h={key:2,class:"q-card q-mt-sm"},p={class:"row q-mx-md q-mt-xs"},L={class:"row q-mx-md q-mt-xs"},b={class:"row q-mx-md q-mt-xs"},D={class:"q-card q-mt-xs"},R={class:"row q-ma-xs"},_={class:"row"},O={class:"row text-bold q-item-label"},A={key:1,class:"q-item-sublabel"},x={class:"row q-item-sublabel"},S={key:0,class:"text-bold"},g={key:0,class:"row q-item-sublabel"},q={class:"row justify-end q-mb-sm"},T={class:"row justify-end q-mb-sm"},C={key:0,class:"row"};function F(e,t){var a=(0,l.g2)("sie-modal"),F=(0,l.g2)("header-btn"),w=(0,l.g2)("q-search"),Q=(0,l.g2)("q-icon"),I=(0,l.g2)("q-item-main"),M=(0,l.g2)("recojo-archivo"),N=(0,l.g2)("q-item-side"),y=(0,l.g2)("q-btn"),P=(0,l.g2)("q-item"),U=(0,l.g2)("q-list"),H=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(H,{class:"column q-pa-md"},{default:(0,l.k6)(function(){return[(0,l.bF)(a,{modelValue:e.modalDetalle,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.modalDetalle=t})},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",n,[(0,l.Lk)("div",s,[(0,l.Lk)("span",o,"Detalle de permiso "+(0,i.v_)(e.infoDetalle.DESCRIPCION),1)]),t[15]||(t[15]=(0,l.Lk)("div",{class:"text-bold q-my-sm"},"Salida",-1)),(0,l.Lk)("div",r,[t[2]||(t[2]=(0,l.Lk)("div",{class:"text-bold"},"Usuario:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.USUNOM_REGISTRO),1)]),(0,l.Lk)("div",d,[t[3]||(t[3]=(0,l.Lk)("div",{class:"text-bold"},"¿Quien Recoje?  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.NOMCOMP_RECOJO)+" ("+(0,i.v_)(e.infoDetalle.SECUDES_SALIDA)+")",1)]),(0,l.Lk)("div",u,[t[4]||(t[4]=(0,l.Lk)("div",{class:"text-bold"},"Fecha:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.FH_SALIDA_PROP_FORMAT),1)]),(0,l.Lk)("div",c,[t[5]||(t[5]=(0,l.Lk)("div",{class:"text-bold"},"Detalle:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.DETALLE),1)]),e.infoDetalle.ESTADO>2?((0,l.uX)(),(0,l.CE)("div",m,[t[6]||(t[6]=(0,l.Lk)("div",{class:"text-bold"},"Realizado:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.FH_SALIDA_EFECTIVA_FORMAT),1)])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",v,[t[7]||(t[7]=(0,l.Lk)("div",{class:"text-bold"},"¿El estudiante retornarà?  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(1===e.infoDetalle.RETORNA?"Si":"No"),1)]),1===e.infoDetalle.RETORNA?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[t[11]||(t[11]=(0,l.Lk)("div",{class:"text-bold q-my-sm"},"Retorno",-1)),(0,l.Lk)("div",f,[t[8]||(t[8]=(0,l.Lk)("div",{class:"text-bold"},"¿Quien Retorna?  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.NOMCOMP_RETORNO)+" ("+(0,i.v_)(e.infoDetalle.SECUDES_RETORNO)+")",1)]),(0,l.Lk)("div",k,[t[9]||(t[9]=(0,l.Lk)("div",{class:"text-bold"},"Fecha:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.FH_RETORNO_PROP_FORMAT),1)]),4===e.infoDetalle.ESTADO?((0,l.uX)(),(0,l.CE)("div",E,[t[10]||(t[10]=(0,l.Lk)("div",{class:"text-bold"},"Realizado:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.infoDetalle.FH_RETORNO_EFECTIVA_FORMAT),1)])):(0,l.Q3)("v-if",!0)],64)):(0,l.Q3)("v-if",!0),2===e.infoDetalle.ESTADO&&e.showRechazados?((0,l.uX)(),(0,l.CE)("div",h,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoDetalle.ADICIONAL,function(e){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",p,[t[12]||(t[12]=(0,l.Lk)("div",{class:"text-bold"},"Rechazado por :  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.USUNOM),1)]),(0,l.Lk)("div",L,[t[13]||(t[13]=(0,l.Lk)("div",{class:"text-bold"},"Registrado el :  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.FH_REGISTRO_FORMAT),1)]),(0,l.Lk)("div",b,[t[14]||(t[14]=(0,l.Lk)("div",{class:"text-bold"},"Motivo :  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.DETALLE),1)])],64)}),256))])):(0,l.Q3)("v-if",!0)])]}),_:1},8,["modelValue"]),(0,l.bF)(F,{name:"Seguimiento de Permisos"}),(0,l.Lk)("div",D,[(0,l.Lk)("div",R,[(0,l.bF)(w,{class:"q-if-outlined col",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter=t}),onInput:e.filtrarData},null,8,["modelValue","onInput"])])]),(0,l.bF)(U,{class:"q-card q-mt-xs",separator:"",style:(0,i.Tr)({"max-height":e.alto+"px","overflow-y":"auto"})},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.infoSeguimiento,function(a){return(0,l.uX)(),(0,l.Wv)(P,null,{default:(0,l.k6)(function(){return[(0,l.bF)(I,{class:"column"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",_,[1===a.ES_EMERGENCIA?((0,l.uX)(),(0,l.Wv)(Q,{key:0,name:"error",color:"red-14"})):(0,l.Q3)("v-if",!0),(0,l.Lk)("span",O,(0,i.v_)(a.NOMCOMP),1),a.NEMODES?((0,l.uX)(),(0,l.CE)("span",A," ("+(0,i.v_)(a.NEMODES)+")",1)):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("div",x,[t[16]||(t[16]=(0,l.Lk)("div",{class:"text-bold"},"Fecha Salida:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(a.FH_SALIDA_PROP_FORMAT),1),3===a.ESTADO&&2!==a.RETORNA?((0,l.uX)(),(0,l.CE)("div",S,"    Salida Efectuada:   "+(0,i.v_)(a.FH_SALIDA_EFECTIVA_FORMAT),1)):(0,l.Q3)("v-if",!0)]),2!==a.RETORNA?((0,l.uX)(),(0,l.CE)("div",g,[t[17]||(t[17]=(0,l.Lk)("div",{class:"text-bold"},"Fecha Retorno:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(a.FH_RETORNO_PROP_FORMAT),1)])):(0,l.Q3)("v-if",!0)]}),_:2},1024),(0,l.bF)(N,{class:"column",right:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",q,[t[18]||(t[18]=(0,l.Lk)("div",{class:"text-bold"}," Estado:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(e.estadosAprobacion[a.ESTADO].label),1)]),(0,l.Lk)("div",T,[t[19]||(t[19]=(0,l.Lk)("div",{class:"text-bold"}," Motivo:  ",-1)),(0,l.Lk)("span",null,(0,i.v_)(a.DESCRIPCION),1)]),a.ADJUNTO_ORIGINAL?((0,l.uX)(),(0,l.CE)("div",C,[t[20]||(t[20]=(0,l.Lk)("div",{class:"row items-center"},[(0,l.Lk)("div",{class:"text-bold"},"Adjunto:")],-1)),(0,l.bF)(M,{data:a},null,8,["data"])])):(0,l.Q3)("v-if",!0)]}),_:2},1024),(0,l.bF)(N,{class:"column",right:""},{default:(0,l.k6)(function(){return[(0,l.bF)(y,{icon:"info",flat:"",dense:"",round:"",onClick:function(t){return e.openDetalle(a)}},null,8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),256))]}),_:1},8,["style"])]}),_:1})}a(10239),a(90095),a(13715);var w=a(83972),Q=a(6123),I=a(30640),M=a(93616),N=a(30545),y=a(18105),P=a(57668),U=a(80660),H=a(92173),z=a(69027),X=a(982),j=a(67329),$={setup:function(){var e=(0,w.fG)();return{v$:e}},components:{sieModal:I.A,date:y.Ay,QSelect:Q.Si,QToggle:Q.c5,QCheckbox:Q.vZ,QBtnToggle:Q.QL,QRadio:Q.$,QTable:N.A,QTh:Q.EJ,QTr:Q.qh,QTd:Q.Ef,QTableColumns:Q.$s,QPopupEdit:Q.GT,QChip:Q.wQ,QFabAction:Q.B$,QPageSticky:Q._U,QFab:Q.l6,QDatetime:Q.T5,QTab:Q.zu,QTabs:Q.uw,sieEstudiantes:H.Ay,sieSelect:M.A,QCollapsible:Q.eS,recojoArchivo:j.A,QPage:Q.Tu,QSearch:Q.Ks,QList:Q.Mb,QItem:Q.H0,QItemMain:Q.mF,QIcon:Q.bP,QItemSide:Q.n1,QBtn:Q.Il},data:function(){return{sie:(0,P["default"])(),infoDetalle:{},infoSeguimiento:[],infoSeguimientoBase:[],alto:0,filter:"",fecIni:new Date,fecFin:new Date,objParent:{},modalDetalle:!1,showRechazados:(0,P["default"])().esOtros,estadosAprobacion:[{value:0,label:"Pendiente"},{value:1,label:"Aprobado"},{value:2,label:"Rechazado"},{value:3,label:"Salida"},{value:4,label:"Retorno"}]}},methods:{handleResize:function(){this.alto=window.innerHeight-200},init:function(){var e=this;U.$http.get("api/HyoRpregistro/obtRegistroSeguimiento").then(function(t){var a=t.json;e.infoSeguimientoBase=a,e.filtrarData()})},openDetalle:function(e){var t=this;this.infoDetalle=e,2===e.ESTADO?U.$http.get("api/HyoRpautorizacion/getDetalle",{params:{info:e}}).then(function(e){var a=e.json;t.infoDetalle.ADICIONAL=a,t.modalDetalle=!0}):this.modalDetalle=!0},filtrarData:function(){var e=this;this.infoSeguimiento=[],this.infoSeguimientoBase.forEach(function(t){var a=0;0===a&&e.filter.length>0&&t.NOMCOMP.toUpperCase().indexOf(e.filter.toUpperCase())<0&&(a=1),0===a&&e.infoSeguimiento.push(t)})},registrarEvento:function(e,t){var a=this;(0,z.dialogConfirm)({message:this.$t("confirmar")}).then(function(l){l&&U.$http.post("api/HyoRpregistro/editarRegistro",{info:e,estado:t}).then(function(e){var t=e.json;(0,X["default"])(a.$t("mensajes."+t.msg),t.type),t.type||a.init()})})}},computed:{fechaMaxima:function(){var e=new Date;return new Date(e.getTime()+6e4*this.minDiff)},minRetorno:function(){var e=this.FH_SALIDA_PROP;return new Date(e.getTime()+6e5)},maxLista:function(){var e=this.alto-200;return e/20},buttons:function(){var e=[];return e.unshift({label:"Grabar",icon:"save",click:this.grabar}),e}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},watch:{ES_EMERGENCIA:function(){var e=1===this.ES_EMERGENCIA?this.minDiffEmer:this.minDiffReg;this.calcularTolerancia(e)}},created:function(){var e=this;window.addEventListener("resize",this.handleResize),this.handleResize(),this.init();var t={activos:1};this.sie.esFamilia&&(t.familia=1),this.sie.esOtros&&(t.personal=1),U.$http.get("api/HyoRpmotivos/getMotivos",{params:t}).then(function(t){var a=t.json;e.motivos=a}),U.$http.get("api/HyoTablaSe/datosSe",{params:{princod:"009"}}).then(function(t){var a=t.listar;e.listParent=[],a.forEach(function(t){var a=t.SECUEQU,l=t.SECUDES,i=t.SECUCOD;a&&(e.objParent[i]=a),e.listParent.push({value:i,label:l})})})}},G=a(12807);const V=(0,G.A)($,[["render",F]]);var B=V}}]);