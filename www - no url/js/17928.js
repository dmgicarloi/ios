"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[17928],{17928:function(n,e,r){r.r(e),r.d(e,{default:function(){return w}});var a=r(61758),o=r(58790),t=["href"];function s(n,e){var r=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-pa-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(s,{class:"col column"},{default:(0,a.k6)(function(){return[(0,a.bF)(r,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("span",null,[e[1]||(e[1]=(0,a.eW)(" Por favor ingresar al nuevo link para el registro en línea de talleres ",-1)),(0,a.Lk)("a",{href:n.originFinal,onClick:e[0]||(e[0]=function(){return n.IngresarNuevoLink&&n.IngresarNuevoLink.apply(n,arguments)})},(0,o.v_)(n.originFinal),9,t)])]}),_:1})]}),_:1})]}),_:1})}var i=r(76080),c=r.n(i),u=r(45254),f=r.n(u),l=(r(39866),r(52133),r(10239),r(89571),r(50310),r(90095),r(6724),r(83190),r(76921),r(13600),r(52776),r(37406),r(84433),r(44264),r(62692),r(13715),r(6123)),p=r(80660),m=r(10213),h=r(65848),E={components:{$http:p.$http,alert:m.alert,confirm:m.confirm,QPage:l.Tu,QCard:l.C$},mixins:[h.A],computed:{tipoPersona:function(){var n=null;switch(this.step){case 1:n="responsableInsc";break;case 2:n="interesadoInsc";break}return n},originFinal:function(){var n=this.sie.origin;return n=n.includes("proyectpg.hyo")?this.sie.origin+"/lms2/#/login/taller":this.sie.origin+"/sistema/login/taller",n}},data:function(){var n=this.init();return n.accesoPublico=!0,n.mensajes={},n.tiposDocumentos={},n.parentescosPersonas={},n.parentescosAbreviaturas={},n.parentescosIdsAbreviaturas={},n.procesos={},n.procesoResponsable=0,n.step=0,n.steps=[],n.personas=[],n.condiciones={},n},methods:{IngresarNuevoLink:function(){this.$router.push({name:"login",params:{estaller:1}})},evaluarExpresion:function(n,e){var r=new RegExp(n);return!!r.test(e)},validarDocumento:function(n,e){var r="01"!==e?/^[-a-zA-Z0-9]{5,12}$/:/^[0-9]{8}$/,a=this.evaluarExpresion(r,n);return a},validarCorreo:function(n){var e=this.evaluarExpresion(/^([\w\.\-_]+)?\w+@[\w-_]+(\.\w+){1,}$/,n);return e},validarTelefono:function(n,e){var r="F"===e?/^[0-9]{7}$/:/^[9][0-9]{8}$/,a=this.evaluarExpresion(r,n);return a},setMensajes:function(n){var e=this;return f()(c()().m(function r(){return c()().w(function(r){while(1)switch(r.n){case 0:e.mensajes={E:"",I:"",X:""},n.forEach(function(n){e.mensajes[n.TIPO]=n.MENSAJE});case 1:return r.a(2)}},r)}))()},setTiposDocumentos:function(n){var e=this;return f()(c()().m(function r(){return c()().w(function(r){while(1)switch(r.n){case 0:n.forEach(function(n){e.tiposDocumentos[n.SECUCOD]=n.SECUDES});case 1:return r.a(2)}},r)}))()},setParentescosPersonas:function(n){var e=this;return f()(c()().m(function r(){return c()().w(function(r){while(1)switch(r.n){case 0:n.forEach(function(n){e.parentescosPersonas[n.ID_VAC_PARENTESCO]=n.PARENTESCO,e.parentescosAbreviaturas[n.ABREVIATURA]=n.PARENTESCO,e.parentescosIdsAbreviaturas[n.ID_VAC_PARENTESCO]=n.ABREVIATURA});case 1:return r.a(2)}},r)}))()},setProcesos:function(n){var e=this;return f()(c()().m(function r(){return c()().w(function(r){while(1)switch(r.n){case 0:n.forEach(function(n){e.procesos[n.ID_VAC_PROCESO]={descripcion:n.NIVEL_GRADO_ANIO,nivel:n.NIVEL,grado:n.GRADO}}),e.procesoResponsable=n[n.length-1].ID_VAC_PROCESO;case 1:return r.a(2)}},r)}))()},setCondiciones:function(n){var e=this;return f()(c()().m(function r(){return c()().w(function(r){while(1)switch(r.n){case 0:n.forEach(function(n){e.condiciones[n.SECUCOD]=n.SECUDES});case 1:return r.a(2)}},r)}))()},nombreApellidoMayuscula:function(n,e,r){var a=this;return f()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:a.$nextTick(f()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,a.setInputValue("formModal",r,n[r].toUpperCase());case 1:return e.a(2)}},e)})));case 1:return e.a(2)}},e)}))()},next:function(n,e,r){var a=arguments,o=this;return f()(c()().m(function n(){var e,r;return c()().w(function(n){while(1)switch(n.n){case 0:if(e=!(a.length>3&&void 0!==a[3])||a[3],!o.tipoPersona||"responsableInsc"!==o.tipoPersona){n.n=3;break}if(r=o.totalPersonasPorTipo(),0!==r){n.n=1;break}return o.$notify("Para continuar debe agregar al menos un (1) familiar","warning"),n.a(2,!1);case 1:if(!e){n.n=3;break}return n.n=2,o.runModal(null,"responsableInscVacacionesConfirm","I");case 2:return n.a(2,!1);case 3:o.step=o.step+1,o.tipoPersona&&o.$nextTick(f()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.loadGridPersonas();case 1:return n.a(2)}},n)})));case 4:return n.a(2)}},n)}))()},back:function(n,e,r){var a=this;return f()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:a.step=a.step-1,a.tipoPersona&&a.$nextTick(f()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,a.loadGridPersonas();case 1:return n.a(2)}},n)})));case 1:return n.a(2)}},n)}))()},continuarHijos:function(n,e,r){var a=this;return f()(c()().m(function o(){return c()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.next(n,e,r,!1);case 1:a.openModal=!1;case 2:return o.a(2)}},o)}))()},finalizar:function(n,e,r){var a=this;return f()(c()().m(function o(){return c()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.grabarInscripcion(n,e,r);case 1:a.openModal=!1;case 2:return o.a(2)}},o)}))()},modalPersona:function(n,e,r){var a=this;return f()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,a.runModal(null,e,"I");case 1:return n.a(2)}},n)}))()},asignarIndicePersonas:function(){var n=this;return f()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:n.personas.map(function(n,e){n.INDICE_PERSONA=e});case 1:return e.a(2)}},e)}))()},existePersona:function(n,e){var r=-1;return this.personas.forEach(function(a){n.TIPO_DOCUMENTO+"_"+n.NRO_DOCUMENTO===a.TIPO_DOCUMENTO+"_"+a.NRO_DOCUMENTO&&a.INDICE_PERSONA!==e&&(r=a.INDICE_PERSONA)}),r>=0},totalPersonasPorTipo:function(){var n=this,e=0;return this.personas.forEach(function(r){r.TIPO_PERSONA===n.tipoPersona&&e++}),e},actualizarPersonas:function(n){var e=this;return f()(c()().m(function r(){var a;return c()().w(function(r){while(1)switch(r.n){case 0:a=e.actionModal,r.n="I"===a?1:"U"===a?2:"D"===a?3:4;break;case 1:return n.TIPO_PERSONA=e.tipoPersona,e.personas.push(n),e.asignarIndicePersonas(),r.a(3,4);case 2:return e.personas[n.INDICE_PERSONA]=n,r.a(3,4);case 3:return e.personas.splice(n.INDICE_PERSONA,1),e.asignarIndicePersonas(),r.a(3,4);case 4:return r.a(2)}},r)}))()},loadGridPersonas:function(){var n=this;return f()(c()().m(function e(){var r,a,o;return c()().w(function(e){while(1)switch(e.n){case 0:r="",a="","responsableInsc"===n.tipoPersona?(r="formResponsables",a="GRID_1"):(r="formInteresados",a="GRID_2"),o=[],n.personas.forEach(function(e){e.TIPO_PERSONA===n.tipoPersona&&o.push(e)}),n.$refs[r][0].rows[a]=o;case 1:return e.a(2)}},e)}))()},submitPersona:function(){var n=this;return f()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:n.$refs.formModal.getForm().then(function(){var e=f()(c()().m(function e(r){var a,o,t,s,i,u,f,l;return c()().w(function(e){while(1)switch(e.n){case 0:if(!r.success){e.n=12;break}if(0!==r.form.PATERNO.length||0!==r.form.MATERNO.length){e.n=1;break}return n.$notify("Debe indicar un apellido","warning"),e.a(2,!1);case 1:if(a=n.validarDocumento(r.form.NRO_DOCUMENTO,r.form.TIPO_DOCUMENTO),a){e.n=2;break}return n.$notify("El documento de identidad no tiene un formato válido","warning"),e.a(2,!1);case 2:if("responsableInsc"!==n.tipoPersona){e.n=5;break}if(o=n.validarCorreo(r.form.CORREO),o){e.n=3;break}return n.$notify("El correo electrónico no tiene un formato válido","warning"),e.a(2,!1);case 3:if(!(r.form.TELEFONO_FIJO.length>0)){e.n=4;break}if(t=n.validarTelefono(r.form.TELEFONO_FIJO,"F"),t){e.n=4;break}return n.$notify("El teléfono fijo no tiene un formato válido","warning"),e.a(2,!1);case 4:if(!(r.form.TELEFONO_CELULAR.length>0)){e.n=5;break}if(s=n.validarTelefono(r.form.TELEFONO_CELULAR,"C"),s){e.n=5;break}return n.$notify("El teléfono celular no tiene un formato válido","warning"),e.a(2,!1);case 5:if(i="I"===n.actionModal?9999:r.form.INDICE_PERSONA,u=n.existePersona(r.form,i),!u){e.n=6;break}n.$notify("El tipo y número de documento ya se encuentra agregado","warning"),e.n=11;break;case 6:return e.n=7,n.getApiAction("api/inscripcionVacacionesController/getPersonaInscripcion",r.form);case 7:if(f=e.v,0!==f.length){e.n=10;break}return r.form.IDENTIFICACION=n.tiposDocumentos[r.form.TIPO_DOCUMENTO]+" - "+r.form.NRO_DOCUMENTO,r.form.CONDICION_DESC=n.condiciones[r.form.CONDICION],"responsableInsc"===n.tipoPersona?(r.form.PARENTESCO=n.parentescosPersonas[r.form.ID_VAC_PARENTESCO],r.form.ID_VAC_PROCESO=n.procesoResponsable,r.form.PROCESO="",r.form.RESPECON=n.parentescosIdsAbreviaturas[r.form.ID_VAC_PARENTESCO]):r.form.PROCESO=n.procesos[r.form.ID_VAC_PROCESO].descripcion,r.form.RESPECON_DESC=n.parentescosAbreviaturas[r.form.RESPECON],r.form.INSTRUCOD=n.procesos[r.form.ID_VAC_PROCESO].nivel,r.form.GRADOCOD=n.procesos[r.form.ID_VAC_PROCESO].grado,e.n=8,n.actualizarPersonas(r.form);case 8:return e.n=9,n.loadGridPersonas();case 9:n.openModal=!1,e.n=11;break;case 10:l="El documento "+n.tiposDocumentos[r.form.TIPO_DOCUMENTO]+" - "+r.form.NRO_DOCUMENTO+" ya se encuentra registrado en el sistema",n.$notify(l,"warning");case 11:e.n=13;break;case 12:n.$notify("Hay campos que faltan completar o no poseen el formato adecuado","warning");case 13:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}());case 1:return e.a(2)}},e)}))()},eliminarPersona:function(n,e,r){var a=this;return f()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:return a.actionModal="D",e.n=1,a.actualizarPersonas(n);case 1:return e.n=2,a.loadGridPersonas();case 2:return e.a(2)}},e)}))()},grabarInscripcion:function(n,e,r){var a=this;return f()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:(0,m.confirm)("¿Está seguro de finalizar el registro?","add").onOk(function(){p.$http.post("api/inscripcionVacacionesController/grabarInscripcion",{personas:a.personas}).then(function(n){a.$notify(n.message,"success"),a.steps[3]["mensaje"]=n.data.html+"<br><strong>Para mayor seguridad, esta información ha sido enviada a su correo electrónico.</strong>",a.step=3}).catch(function(n){a.$notify(n.error.message,"warning")})});case 1:return n.a(2)}},n)}))()}},created:function(){var n=this;return f()(c()().m(function e(){var r;return c()().w(function(e){while(1)switch(e.n){case 0:r=n.sie.origin,e.n="https://intranet.juan23.edu.pe"===r?1:"https://asociacion.juan23.edu.pe"===r?2:"https://sanagustin.sieweb.com.pe"===r||"https://bpastor.sieweb.com.pe"===r||"https://sanjosemaristas.sieweb.com.pe"===r?3:4;break;case 1:return window.location="https://asociacion.juan23.edu.pe/sistema/login/taller/",e.a(3,4);case 2:return window.location="https://asociacion.juan23.edu.pe/sistema/login/taller/",e.a(3,4);case 3:return window.location=n.sie.origin+"/sistema/login/taller/",e.a(3,4);case 4:return e.a(2)}},e)}))()}},O=r(12807);const d=(0,O.A)(E,[["render",s]]);var w=d}}]);