"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[56137],{56137:function(e,o,t){t.r(o),t.d(o,{default:function(){return ee}});var r=t(8445),n=t.n(r),a=t(61758),s=t(58790),l={key:0,class:"row"},i={class:"row q-pa-xs"},c={class:"row"},u={class:"col-xs-3"},d={key:0,class:"col-xs-9"},p={class:"col-xs-12"},b={class:"col-xs-12"},f={class:"col-xs-12"},m={class:"row"},v={class:"col-xs-3"},h={class:"col-xs-9"},x={class:"col-xs-12"},g={class:"col-xs-12"},F={class:"absolute-full flex flex-center"},k={key:0,class:"col-xs-12"},E={key:1,class:"col-xs-12"},C={class:"col-12 text-center"};function j(e,o){var t=this,r=(0,a.g2)("q-btn"),j=(0,a.g2)("q-toolbar"),P=(0,a.g2)("q-tab"),w=(0,a.g2)("q-option-group"),S=(0,a.g2)("sie-salones"),O=(0,a.g2)("q-select"),I=(0,a.g2)("q-tab-pane"),Q=(0,a.g2)("sie-upload"),y=(0,a.g2)("q-badge"),A=(0,a.g2)("q-linear-progress"),q=(0,a.g2)("q-item-label"),L=(0,a.g2)("q-item-section"),V=(0,a.g2)("q-item"),D=(0,a.g2)("q-list"),G=(0,a.g2)("q-scroll-area"),T=(0,a.g2)("q-icon"),_=(0,a.g2)("q-tabs"),N=(0,a.g2)("q-card"),U=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(U,{class:"col justify-center items-center"},{default:(0,a.k6)(function(){return[(0,a.bF)(N,{class:"bg-white col-7",style:{"max-width":"600px"}},{default:(0,a.k6)(function(){return[(0,a.bF)(j,{class:"row justify-between"},{default:(0,a.k6)(function(){return[o[7]||(o[7]=(0,a.Lk)("div",{class:"row q-subheading text-weight-bold"},"Importaci贸n Otras Cuentas (Alumno y Personal)",-1)),e.isLess?((0,a.uX)(),(0,a.CE)("div",l,["tab-exp"===t.tabSelected?((0,a.uX)(),(0,a.Wv)(r,{key:0,class:"q-mx-xs",flat:"",dense:"",round:"",icon:"file_excel",onClick:e.crearPlantilla},null,8,["onClick"])):(0,a.Q3)("v-if",!0),"tab-imp"===t.tabSelected?((0,a.uX)(),(0,a.Wv)(r,{key:1,class:"q-mx-xs",flat:"",dense:"",round:"",icon:"cogs",onClick:e.procesarPlantilla},null,8,["onClick"])):(0,a.Q3)("v-if",!0)])):(0,a.Q3)("v-if",!0)]}),_:1}),(0,a.Lk)("div",i,[(0,a.bF)(_,{modelValue:e.tabOC,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.tabOC=o}),inverted:"",ref:"tabs",animated:"",onClick:e.openTab,style:{width:"800px","max-width":"1000px"}},{title:(0,a.k6)(function(){return[(0,a.bF)(P,{default:"",name:"tab-exp",label:"Generar Plantilla","no-caps":""}),(0,a.bF)(P,{"keep-alive":"",name:"tab-imp",label:"Importar Plantilla"})]}),default:(0,a.k6)(function(){return[(0,a.bF)(I,{name:"tab-exp","keep-alive":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.bF)(w,{color:"secondary",type:"radio",modelValue:e.objFiltrosExp.tipoPersona,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.objFiltrosExp.tipoPersona=o}),options:e.arrPersonas,onInput:e.cambiarExpPersona},null,8,["modelValue","options","onInput"])]),"alumno"===e.objFiltrosExp.tipoPersona?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(S,{class:"col-xs-12 no-border q-if-outlined",modelValue:e.objFiltrosExp.nemo,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.objFiltrosExp.nemo=o}),todos:!1,style:{"padding-left":"0px","padding-right":"0px"},campos:["NEMO","NEMODES","INSTRUCOD","GRADOCOD","SECCIONCOD"],onSeleccionar:e.cargaNGS},null,8,["modelValue","onSeleccionar"]),(0,a.Lk)("div",p,[(0,a.bF)(O,{class:"q-if-outlined",modelValue:e.objFiltrosExp.instrucod,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.objFiltrosExp.instrucod=o}),options:e.niveles,label:"Nivel:",onInput:e.cambiarNivel},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",b,[(0,a.bF)(O,{class:"q-if-outlined",modelValue:e.objFiltrosExp.gradocod,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.objFiltrosExp.gradocod=o}),options:e.grados,label:"Grado:",onInput:e.cambiarGrado},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",f,[(0,a.bF)(O,{class:"q-if-outlined",modelValue:e.objFiltrosExp.seccioncod,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.objFiltrosExp.seccioncod=o}),options:e.secciones,label:"Secci贸n:",onInput:e.cambiarSeccion},null,8,["modelValue","options","onInput"])])])):(0,a.Q3)("v-if",!0)])]}),_:1}),(0,a.bF)(I,{name:"tab-imp","keep-alive":""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",m,[(0,a.Lk)("div",v,[(0,a.bF)(w,{color:"secondary",type:"radio",modelValue:e.objFiltrosImp.tipoPersona,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.objFiltrosImp.tipoPersona=o}),options:e.arrPersonas},null,8,["modelValue","options"])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",x,[(0,a.bF)(Q,{onUpload:e.cargarArchivo,icon:"file_excel",title:"Subir Archivo",allow:["xlsx","xls"]},null,8,["onUpload"])]),(0,a.Lk)("div",g,[(0,a.bF)(A,{size:"50px",value:e.progress,color:"positive",rounded:"",stripe:""},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",F,[(0,a.bF)(y,{color:"white","text-color":"positive",label:e.progressLabel},null,8,["label"])])]}),_:1},8,["value"])]),e.errores.length>0?((0,a.uX)(),(0,a.CE)("div",k,[e.errores.length?((0,a.uX)(),(0,a.Wv)(G,{key:0,class:"col",style:{height:"40vh"}},{default:(0,a.k6)(function(){return[(0,a.bF)(D,null,{default:(0,a.k6)(function(){return[(0,a.bF)(q,{header:""},{default:(0,a.k6)(function(){return n()(o[8]||(o[8]=[(0,a.eW)((0,s.v_)("Durante el proceso, se ha encontrado las siguientes observaciones."),-1)]))}),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.errores,function(e,o){return(0,a.uX)(),(0,a.Wv)(V,{key:o},{default:(0,a.k6)(function(){return[(0,a.bF)(L,{class:"bg-warning text-white round-borders q-pa-sm"},{default:(0,a.k6)(function(){return[(0,a.eW)((0,s.v_)(e.mensaje),1)]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})]}),_:1})):(0,a.Q3)("v-if",!0)])):(0,a.Q3)("v-if",!0),e.complete?((0,a.uX)(),(0,a.CE)("div",E,[(0,a.Lk)("div",C,[(0,a.bF)(T,{name:"check_circle",color:"positive",size:"50px"})]),o[9]||(o[9]=(0,a.Lk)("div",{class:"col-12 text-center"},"El archivo se ha procesado correctamente",-1))])):(0,a.Q3)("v-if",!0)])])]}),_:1})]}),_:1},8,["modelValue","onClick"])]),e.isLess?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.Wv)(j,{key:0,class:"row justify-center",inverted:""},{default:(0,a.k6)(function(){return["tab-exp"===t.tabSelected?((0,a.uX)(),(0,a.Wv)(r,{key:0,class:"q-mx-xs",icon:"file_excel",label:"Crear Plantilla",color:"primary",onClick:e.crearPlantilla},null,8,["onClick"])):(0,a.Q3)("v-if",!0),"tab-imp"===t.tabSelected?((0,a.uX)(),(0,a.Wv)(r,{key:1,class:"q-mx-xs",icon:"cogs",label:"Procesar Plantilla",color:"primary",onClick:e.procesarPlantilla},null,8,["onClick"])):(0,a.Q3)("v-if",!0)]}),_:1}))]}),_:1})]}),_:1})}var P=t(76080),w=t.n(P),S=t(45254),O=t.n(S),I=(t(56285),t(70199),t(15547),t(515),t(6123)),Q=t(2739),y=t(16648),A=t(53811),q=t(65673),L=t(82327),V=t(88865),D=t(93616),G=t(88275),T=t(57668),_=t(13813),N=t(81288),U=t(59089),X=t(33950),W=t(80660),R=t(2819),$=t(982),M=t(34963),z=t(62565),B=t(66824),H=t(12205),J=t(34262),K={components:{QForm:Q.A,QInput:I.ie,QOptionGroup:I.EX,QSelect:y.A,QTabPanels:A.A,QList:q.A,QItem:L.A,QItemSection:V.A,QTabs:I.uw,QTab:I.zu,QTabPane:I.dg,QPagination:I.ao,QSpinnerOval:I.VA,QInnerLoading:I.SQ,sieSelect:D.A,sieSalones:G.Ay,sieUpload:U.A,QLinearProgress:M.A,QBadge:z.A,QItemLabel:B.A,QScrollArea:H.A,QIcon:J.A,QPage:I.Tu,QCard:I.C$,QToolbar:I.ZV,QBtn:I.Il},data:function(){return{baseGrados:{},modoProceso:null,arrPersonas:[{label:"Alumnos",value:"alumno"},{label:"Personal",value:"personal"}],tabOC:"tab-exp",sieInfo:(0,T["default"])(),objFiltrosExp:{ano:"",instrucod:"",gradocod:"",seccioncod:"",nemo:"",tipoPersona:"alumno"},objFiltrosImp:{tipoPersona:"alumno"},tabSelected:"tab-exp",file:{},tempFile:null,progress:0,errores:[],complete:!1}},computed:{isLess:function(){return(0,N.isLess)()},progressLabel:function(){return(100*this.progress).toFixed(2)+"%"},niveles:function(){var e=[];return Object.keys(this.baseGrados).length>0&&(e=(0,_["default"])(this.baseGrados.niveles,function(e){var o=e.INSTRUCOD,t=e.INSTRUDES;return{label:t,value:o}})),e},grados:function(){var e=[];return Object.keys(this.baseGrados).length>0&&this.objFiltrosExp.instrucod&&"T"!==this.objFiltrosExp.instrucod&&(e=(0,_["default"])(this.baseGrados.grados[this.objFiltrosExp.instrucod],function(e){var o=e.GRADOCOD,t=e.GRADODES;return{label:t,value:o}})),e.unshift({label:"Todos",value:"T"}),e},secciones:function(){var e=[];return Object.keys(this.baseGrados).length>0&&this.objFiltrosExp.instrucod&&"T"!==this.objFiltrosExp.instrucod&&this.objFiltrosExp.gradocod&&"T"!==this.objFiltrosExp.gradocod&&(e=(0,_["default"])(this.baseGrados.secciones[this.objFiltrosExp.instrucod+this.objFiltrosExp.gradocod],function(e){var o=e.SECCIONCOD;return{label:o,value:o}})),e.unshift({label:"Todos",value:"T"}),e}},methods:{cargaNGS:function(e){e.NEMO,e.NEMODES;var o=e.INSTRUCOD,t=e.GRADOCOD,r=e.SECCIONCOD;this.objFiltrosExp.instrucod=o,this.objFiltrosExp.gradocod=t,this.objFiltrosExp.seccioncod=r,this.modoProceso=1},cambiarNivel:function(){this.objFiltrosExp.gradocod=this.grados[0].value,this.modoProceso=2},cambiarSeccion:function(){this.modoProceso=2},cambiarGrado:function(){this.objFiltrosExp.seccioncod=this.secciones[0].value,this.modoProceso=1},openTab:function(){this.tabSelected=this.tabOC,this.errores=[],this.complete=!1,this.progress=0,this.tempFile=""},cambiarExpPersona:function(){},crearPlantilla:function(){var e=this;return O()(w()().m(function o(){var t,r,n;return w()().w(function(o){while(1)switch(o.n){case 0:if("alumno"!==e.objFiltrosExp.tipoPersona){o.n=4;break}if(""!==e.objFiltrosExp.instrucod){o.n=1;break}return e.$alert("Seleccionar el nivel","info"),o.a(2);case 1:if(""!==e.objFiltrosExp.gradocod){o.n=2;break}return e.$alert("Seleccionar el grado","info"),o.a(2);case 2:if(""!==e.objFiltrosExp.seccioncod){o.n=3;break}return e.$alert("Seleccionar la secci贸n","info"),o.a(2);case 3:r={ano:e.sieInfo.ano,instrucod:e.objFiltrosExp.instrucod,gradocod:e.objFiltrosExp.gradocod,seccioncod:e.objFiltrosExp.seccioncod,nemo:e.objFiltrosExp.nemo,tipoPersona:e.objFiltrosExp.tipoPersona},n="api/UtilitarioImportarOtrasCuentasController/getDatoAlumnosOtrasCuentas",o.n=5;break;case 4:r={tipoPersona:e.objFiltrosExp.tipoPersona},n="api/UtilitarioImportarOtrasCuentasController/getDatoPersonalOtrasCuentas";case 5:return o.n=6,W.$http.get(n,{params:{params:r}});case 6:t=o.v,r.datos=JSON.stringify(t),r.repcod="otrasCuentas",(0,R.exportFilePhp)(r,"webservice/reportes/reporte");case 7:return o.a(2)}},o)}))()},cargarArchivo:function(e){var o=this;return O()(w()().m(function t(){var r;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o.tempFile="",t.p=1,t.n=2,(0,X.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]});case 2:r=t.v,o.tempFile=r.name,t.n=4;break;case 3:t.p=3,t.v,(0,$["default"])("No se carg贸 el archivo","warning");case 4:return t.a(2)}},t,null,[[1,3]])}))()},procesarPlantilla:function(){var e=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:e.tempFile?(0,W.streamFetch)("api/UtilitarioImportarOtrasCuentasController/procesarArchivo",{method:"POST",data:{params:{file:e.tempFile,tipoPersona:e.objFiltrosImp.tipoPersona}}},function(o){if(o&&"progress"in o){var t=o.progress;e.progress=t.progress/t.total}if(o&&"final"in o){var r=o.final;e.errores=r.errores,e.complete=r.errores.length<=0,e.tempFile=null,e.progress=1}}):e.$notify("Seleccione un archivo","warning");case 1:return o.a(2)}},o)}))()},init:function(){var e=this;return O()(w()().m(function o(){var t;return w()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,W.$http.get("api/HyoInstrus/obtGradosAsignados");case 1:t=o.v,e.baseGrados=t.json;case 2:return o.a(2)}},o)}))()}},created:function(){var e=this;return O()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:e.init();case 1:return o.a(2)}},o)}))()}},Z=t(12807);const Y=(0,Z.A)(K,[["render",j]]);var ee=Y}}]);