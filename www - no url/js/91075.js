"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[91075],{91075:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var i=r(61758),t={class:"row"},o={class:"col-xs-12"},a={class:"row q-pa-sm q-col-gutter-sm"},l={class:"col-xs-12 col-sm-6"},s={class:"col-xs-12 col-sm-6"};function c(e,n){var r=this,c=(0,i.g2)("header-btn"),u=(0,i.g2)("sie-table"),f=(0,i.g2)("q-card-section"),p=(0,i.g2)("q-card"),d=(0,i.g2)("q-input"),m=(0,i.g2)("q-form"),w=(0,i.g2)("sie-modal"),I=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(I,{class:"q-pa-sm sie-flat"},{default:(0,i.k6)(function(){return[(0,i.bF)(p,{flat:"",bordered:""},{default:(0,i.k6)(function(){return[(0,i.bF)(c,{name:"Tipo Perfiles",buttons:e.buttons},null,8,["buttons"]),(0,i.bF)(f,null,{default:(0,i.k6)(function(){return[(0,i.Lk)("div",t,[(0,i.Lk)("div",o,[(0,i.bF)(u,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tablePerfilTipo",onRowSelected:e.rowSelectPerfilTipo,css:"height:calc(100vh - 140px)",context:r},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,i.bF)(w,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar":"Modificar",onSubmit:e.saveAcccion},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{ref:"refForm"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",a,[(0,i.Lk)("div",l,[(0,i.bF)(d,{modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.DESCRIPCION=n}),label:"DESCRIPCION",rules:[e.required]},null,8,["modelValue","rules"])]),(0,i.Lk)("div",s,[(0,i.bF)(d,{modelValue:e.form.EQUIVALENCIA,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.EQUIVALENCIA=n}),label:"EQUIVALENCIA"},null,8,["modelValue"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var u=r(76080),f=r.n(u),p=r(45254),d=r.n(p),m=(r(89571),r(6123)),w={data:function(){return{config:{ACTION:{component:"button",icon:[],editar:function(e,n){var r=this;return d()(f()().m(function e(){return f()().w(function(e){while(1)switch(e.n){case 0:return r.rowPerfilTipo=n,e.n=1,r.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var r=this;return d()(f()().m(function e(){return f()().w(function(e){while(1)switch(e.n){case 0:return r.rowPerfilTipo=n,e.n=1,r.deletePerfilTipo();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"ID_PERFIL",label:"Código",field:"ID_PERFIL",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Descripcion",field:"DESCRIPCION",align:"left",sortable:!0},{name:"EQUIVALENCIA",label:"Equivalencia",field:"EQUIVALENCIA",align:"left",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:80}]}}},I=r(39893),h=r(81288),A=r(2739),g=r(9736),C=r(88567),E=r(95718),b={mixins:[w],components:{QForm:A.A,QInput:g.A,QCard:C.A,QCardSection:E.A,QPage:m.Tu},data:function(){return{required:I.require,buttons:[],openAdd:!1,action:"create",rowPerfilTipo:null,form:{DESCRIPCION:null,EQUIVALENCIA:null}}},methods:{openAgregar:function(){this.action="create",this.rowPerfilTipo=null,(0,h.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowPerfilTipo?(this.action="update",this.form.DESCRIPCION=this.rowPerfilTipo.DESCRIPCION,this.form.EQUIVALENCIA=this.rowPerfilTipo.EQUIVALENCIA,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return d()(f()().m(function n(){var r,i,t;return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(r=n.v,r){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:i=n.v,i&&e.createPerfilTipo(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:t=n.v,t&&e.updatePerfilTipo();case 6:return n.a(2)}},n)}))()},rowSelectPerfilTipo:function(e,n){this.rowPerfilTipo=n},createPerfilTipo:function(){var e=this;return d()(f()().m(function n(){var r,i,t,o;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/perfil-tipo",e.form);case 1:r=n.v,r.result,i=r.message,t={DESCRIPCION:e.form.DESCRIPCION,EQUIVALENCIA:e.form.EQUIVALENCIA},e.rows.unshift(t),e.openAdd=!1,e.$notify(i,"success"),n.n=3;break;case 2:n.p=2,o=n.v,e.$notify(o.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readPerfilTipo:function(){var e=this;return d()(f()().m(function n(){var r,i;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/HyoAuxiliares/readPerfilTipo",{params:{}});case 1:r=n.v,e.rows=r,n.n=3;break;case 2:n.p=2,i=n.v,e.$notify(i.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deletePerfilTipo:function(){var e=this;return d()(f()().m(function n(){var r,i,t,o;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowPerfilTipo){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(r=n.v,!r){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/perfil-tipo/");case 4:i=n.v,t=i.message,e.rows.splice(e.rows.indexOf(e.rowPerfilTipo),1),e.rowPerfilTipo=null,e.$notify(t,"success"),n.n=6;break;case 5:n.p=5,o=n.v,e.$notify(o.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updatePerfilTipo:function(){var e=this;return d()(f()().m(function n(){var r,i,t,o;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,r=e.$refs.tablePerfilTipo,n.n=1,e.$http.put("api/perfil-tipo",{DESCRIPCION:e.form.DESCRIPCION,EQUIVALENCIA:e.form.EQUIVALENCIA});case 1:i=n.v,t=i.message,e.openAdd=!1,r.updateRow(e.rowPerfilTipo,e.form),e.$notify(t,"success"),n.n=3;break;case 2:n.p=2,o=n.v,e.$notify(o.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){var e=this;return d()(f()().m(function n(){return f()().w(function(n){while(1)switch(n.n){case 0:try{e.readPerfilTipo()}catch(n){e.$notify(n.message,"warning")}case 1:return n.a(2)}},n)}))()}},v=r(12807);const P=(0,v.A)(b,[["render",c]]);var T=P}}]);