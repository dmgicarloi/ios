"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[56205],{56205:function(e,o,t){t.r(o),t.d(o,{default:function(){return _e},encodeRFC5987ValueChars:function(){return ge}});var r=t(8445),a=t.n(r),i=(t(56285),t(61758)),n=t(58790),l=t(29104),u={key:0,class:"relative-position bg-white"},c={class:"q-pa-sm"},d={class:"q-pa-sm"},s={class:"row"},f={class:"col-12"},p={class:"col-12"};function m(e,o){var t=(0,i.g2)("q-tab"),r=(0,i.g2)("q-icon"),m=(0,i.g2)("q-item-section"),b=(0,i.g2)("q-item-label"),h=(0,i.g2)("q-item"),v=(0,i.g2)("q-list"),I=(0,i.g2)("q-popup-proxy"),C=(0,i.g2)("q-btn"),k=(0,i.g2)("q-card"),g=(0,i.g2)("sie-vacio"),F=(0,i.g2)("q-tab-pane"),O=(0,i.g2)("q-scroll-area"),_=(0,i.g2)("q-tabs"),T=(0,i.g2)("q-toolbar-title"),A=(0,i.g2)("q-toolbar"),R=(0,i.g2)("draggable"),L=(0,i.g2)("sie-modal"),U=(0,i.g2)("modalCrearCarpeta"),D=(0,i.g2)("q-page-sticky"),P=(0,i.g2)("q-banner"),E=(0,i.g2)("sie-tree"),y=(0,i.g2)("sie-cloud"),S=(0,i.g2)("sie-pdf"),N=(0,i.g2)("q-tree"),M=(0,i.g2)("sie-select"),w=(0,i.g2)("q-table"),V=(0,i.g2)("sie-view"),Q=(0,i.g2)("q-page"),W=(0,i.gN)("close-popup"),H=(0,i.gN)("ripple");return(0,i.uX)(),(0,i.Wv)(Q,{class:"col-auto column no-wrap"},{default:(0,i.k6)(function(){return[(0,i.bF)(_,{class:"q-tabs-flex",modelValue:e.tabSelected,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.tabSelected=o}),inverted:""},{title:(0,i.k6)(function(){return[e.ocultaTabs?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(t,{key:0,default:"",name:"propio",label:"Mis repositorios"})),(0,i.bF)(t,{name:"compartido",label:"Compartidos conmigo",default:e.ocultaTabs},null,8,["default"])]}),default:(0,i.k6)(function(){return[(0,i.bF)(F,{class:"full-height",name:"propio"},{default:(0,i.k6)(function(){return[e.list.length?((0,i.uX)(),(0,i.Wv)(k,{key:0,class:"q-card-mobile"},{default:(0,i.k6)(function(){return[(0,i.bF)(v,{separator:"",dense:""},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.list,function(t,u){return(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:u,clickable:"",onClick:function(o){return e.openModal(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{avatar:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{color:"amber",name:"folder"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.bF)(b,{color:"primary",lines:"1"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(t.TITULO),1)]}),_:2},1024),(0,i.bF)(b,{caption:"",lines:"1"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(t.DESCRIPCION),1)]}),_:2},1024),e.ocultar?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(b,{key:0,sublabel:"",lines:"1"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)("Fecha de publicación: ")+" "+(0,n.v_)(t.FECHA),1)]}),_:2},1024))]}),_:2},1024),e.tienePermiso?((0,i.uX)(),(0,i.Wv)(m,{key:0,side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(C,{icon:"more_vert",dense:"",flat:"",round:"",onClick:o[0]||(o[0]=(0,l.D$)(function(){},["stop"]))},{default:(0,i.k6)(function(){return[(0,i.bF)(I,null,{default:(0,i.k6)(function(){return[(0,i.bF)(v,{class:"bg-white",dense:"",bordered:""},{default:(0,i.k6)(function(){return[e.permisoEditar?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:0,clickable:"",onClick:function(o){return e.abrirModalCrearCarpeta("editar",t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"edit",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return a()(o[29]||(o[29]=[(0,i.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),e.permisoEditar?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:1,clickable:"",onClick:function(o){return e.abrirModalCrearCarpeta("crearHijo",t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"create_new_folder",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("crearCarpeta")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),e.permisoEditar?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:2,clickable:"",onClick:function(o){return e.abrirModalSubirArchivo(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"add",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("subirArchivo")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),3===e.sie.ruta.nivel?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:3,clickable:"",onClick:function(o){return e.compartirCarpeta(t.ID)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"share",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("compartir")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),3===e.sie.ruta.nivel?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:4,clickable:"",onClick:function(o){return e.eliminarCarpeta(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"delete",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1032,["onClick"])),[[H]])}),128))]}),_:1})]}),_:1})):((0,i.uX)(),(0,i.Wv)(g,{key:1,class:"col",subtitle:"Agregar Carpeta",icon:"person"}))]}),_:1}),(0,i.bF)(F,{class:"full-height",name:"compartido"},{default:(0,i.k6)(function(){return[e.listCompartido.length?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(O,{style:(0,n.Tr)(e.isLess?"005"!==e.sie.tipcod&&"004"!==e.sie.tipcod?"height:83vh":"height: 91vh":"005"!==e.sie.tipcod&&"004"!==e.sie.tipcod?"height:84vh":"height: 92vh")},{default:(0,i.k6)(function(){return[(0,i.bF)(v,{class:"bg-white",separator:"",dense:""},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.listCompartido,function(t,a){return(0,i.uX)(),(0,i.Wv)(h,{key:a},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{avatar:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{color:"amber",name:"folder"})]}),_:1}),(0,i.bF)(m,{onClick:function(o){return e.openModal(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(b,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(t.TITULO),1)]}),_:2},1024),(0,i.bF)(b,{caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)("Creado por: "+(0,n.v_)(t.USUNOM),1)]}),_:2},1024),(0,i.bF)(b,{caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(t.ANOTACION),1)]}),_:2},1024),e.ocultar?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(b,{key:0,caption:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)("Fecha de publicación: ")+" "+(0,n.v_)(t.FECHA),1)]}),_:2},1024))]}),_:2},1032,["onClick"]),e.reporteAcceso?((0,i.uX)(),(0,i.Wv)(m,{key:0,side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(C,{icon:"more_vert",dense:"",flat:"",round:"",onClick:o[1]||(o[1]=(0,l.D$)(function(){},["stop"]))},{default:(0,i.k6)(function(){return[(0,i.bF)(I,null,{default:(0,i.k6)(function(){return[(0,i.bF)(v,{class:"bg-white"},{default:(0,i.k6)(function(){return[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{clickable:"",onClick:function(o){return e.imprimirReporte(t.ID)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"print",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1024)}),128))]}),_:1})]}),_:1},8,["style"])])):((0,i.uX)(),(0,i.Wv)(g,{key:1,class:"col",subtitle:"Agregar Carpeta",icon:"person"}))]}),_:1})]}),_:1},8,["modelValue"]),(0,i.bF)(L,{class:"crear-carpeta",modelValue:e.modal,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.modal=o}),title:e.organizador.TITULO,footer:!0,ref:"modal",header:!e.hasProperty(e.organizador,"idParent"),loading:e.loading,ok:!1},{header:(0,i.k6)(function(){return[e.hasProperty(e.organizador,"idParent")?((0,i.uX)(),(0,i.Wv)(A,{key:0},{default:(0,i.k6)(function(){return[(0,i.bF)(C,{flat:"",round:"",dense:"",icon:"arrow_back",onClick:o[3]||(o[3]=function(o){return e.getOrganizadorParent()})}),(0,i.bF)(T,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.organizador.TITULO),1)]}),_:1})]}),_:1})):(0,i.Q3)("v-if",!0)]}),default:(0,i.k6)(function(){return[(0,i.bF)(v,{class:"bg-white",separator:"",dense:""},{default:(0,i.k6)(function(){return[(0,i.bF)(R,{modelValue:e.organizador.list,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.organizador.list=o}),onChange:e.checkMove,handle:".handle"},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.organizador.list,function(t,u){return(0,i.uX)(),(0,i.Wv)(h,{key:u,clickable:"",onClick:function(o){return e.getOrganizadorChildren(t)}},{default:(0,i.k6)(function(){return["propio"===e.tabSelected?((0,i.uX)(),(0,i.Wv)(m,{key:0,class:"handle",side:"",onClick:o[4]||(o[4]=(0,l.D$)(function(){},["stop"]))},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"blur_on",color:"black",size:"xs"})]}),_:1})):(0,i.Q3)("v-if",!0),(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:e.getIcon(t.TITULO).icon,color:e.getIcon(t.TITULO).color},null,8,["name","color"])]}),_:2},1024),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.bF)(b,{color:"primary",lines:"1"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(t.TITULO),1)]}),_:2},1024),(0,i.bF)(b,{caption:"",lines:"1"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(t.DESCRIPCION),1)]}),_:2},1024),e.ocultar?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(b,{key:0,caption:"",lines:"1"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)("Fecha de publicación: ")+" "+(0,n.v_)(t.FECHA),1)]}),_:2},1024))]}),_:2},1024),e.tienePermiso?((0,i.uX)(),(0,i.Wv)(m,{key:1,side:""},{default:(0,i.k6)(function(){return[e.tabPropio?((0,i.uX)(),(0,i.Wv)(C,{key:0,icon:"more_vert",dense:"",flat:"",round:"",onClick:o[5]||(o[5]=(0,l.D$)(function(){},["stop"]))},{default:(0,i.k6)(function(){return[(0,i.bF)(I,null,{default:(0,i.k6)(function(){return[(0,i.bF)(v,{class:"bg-white"},{default:(0,i.k6)(function(){return[e.permisoEditar?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:0,clickable:"",onClick:function(o){return e.abrirModalCrearCarpeta("editar",t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"edit",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("botones.editar")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),!e.permisoEditar||"R"===t.TIPO&&e.permisoEditar?(0,i.Q3)("v-if",!0):(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:1,clickable:"",onClick:function(o){return e.abrirModalLeidos(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"remove_red_eye",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return a()(o[30]||(o[30]=[(0,i.eW)("Leidos",-1)]))}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]),"folder"==e.getIcon(t.TITULO).icon&&e.permisoEditar?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:2,clickable:"",onClick:function(o){return e.abrirModalCrearCarpeta("crearHijo",t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"create_new_folder",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("crearCarpeta")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),"R"===t.TIPO&&e.permisoEditar?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:3,clickable:"",onClick:function(o){return e.abrirModalSubirArchivo(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"add",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("subirArchivo")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),3===e.sie.ruta.nivel?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:4,clickable:"",onClick:function(o){return e.eliminarCarpeta(t)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"delete",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("botones.eliminar")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]]):(0,i.Q3)("v-if",!0),3!==e.sie.ruta.nivel||t.TDOC?(0,i.Q3)("v-if",!0):(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{key:5,clickable:"",onClick:function(o){return e.compartirCarpeta(t.ID)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"share",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("compartir")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0),"folder"===e.getIcon(t.TITULO).icon&&!e.tabPropio&&e.reporteAcceso?((0,i.uX)(),(0,i.Wv)(C,{key:1,icon:"more_vert",onClick:o[6]||(o[6]=(0,l.D$)(function(){},["stop"]))},{default:(0,i.k6)(function(){return[(0,i.bF)(I,null,{default:(0,i.k6)(function(){return[(0,i.bF)(v,{class:"bg-white"},{default:(0,i.k6)(function(){return[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(h,{clickable:"",onClick:function(o){return e.imprimirReporte(t.ID)}},{default:(0,i.k6)(function(){return[(0,i.bF)(m,{side:""},{default:(0,i.k6)(function(){return[(0,i.bF)(r,{name:"print",color:"black",size:"xs"})]}),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1},8,["onClick"])),[[W],[H]])]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,i.Q3)("v-if",!0),"folder"===e.getIcon(t.TITULO).icon||e.tabPropio?(0,i.Q3)("v-if",!0):((0,i.uX)(),(0,i.Wv)(C,{key:2,icon:"file_download",onClick:[function(o){return e.downloadArchivo(t)},o[7]||(o[7]=(0,l.D$)(function(){},["stop"]))],dense:"",round:"",flat:""},null,8,["onClick"]))]}),_:2},1024)):(0,i.Q3)("v-if",!0)]}),_:2},1032,["onClick"])}),128))]}),_:1},8,["modelValue","onChange"])]}),_:1})]}),_:1},8,["modelValue","title","header","loading"]),(0,i.bF)(U,{modelValue:e.modalCrear,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.modalCrear=o}),data:e.dataModalCrear,modo:e.modoModalCrear,onClick:e.crearCarpeta},null,8,["modelValue","data","modo","onClick"]),3===e.sie.ruta.nivel&&e.sie.esOtros?((0,i.uX)(),(0,i.Wv)(D,{key:0,position:"bottom-right",offset:[20,20]},{default:(0,i.k6)(function(){return[(0,i.bF)(C,{fab:"",round:"",color:"secondary",icon:"plus",onClick:o[11]||(o[11]=function(o){return e.abrirModalCrearCarpeta("crear")})})]}),_:1})):(0,i.Q3)("v-if",!0),(0,i.bF)(L,{class:"modal-compartir",modelValue:e.modalCompartir,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.modalCompartir=o}),title:e.$t("compartir"),footer:!0,ref:"modalCompartir",header:!0,loading:e.loadModalCompartir,onSubmit:e.compartir,ok:e.$t("botones.guardar"),onClose:o[15]||(o[15]=function(o){return e.ticked=[]})},{default:(0,i.k6)(function(){return[(0,i.bF)(_,{inverted:"",ref:"tabs",animated:"",swipeable:"",modelValue:e.tabSelectedComp,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.tabSelectedComp=o})},{title:(0,i.k6)(function(){return[(0,i.bF)(t,{default:"",name:"tab-1",label:e.$t("dirigidoa")},null,8,["label"])]}),default:(0,i.k6)(function(){return[(0,i.bF)(F,{name:"tab-1",disabled:e.viewMessage},{default:(0,i.k6)(function(){return[e.viewMessage?((0,i.uX)(),(0,i.Wv)(P,{key:0,class:"bg-warning q-mb-sm"},{default:(0,i.k6)(function(){return[(0,i.eW)((0,n.v_)(e.message),1)]}),_:1})):(0,i.Q3)("v-if",!0),e.mostrarTree?((0,i.uX)(),(0,i.Wv)(E,{key:1,modelValue:e.ticked,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.ticked=o})},null,8,["modelValue"])):(0,i.Q3)("v-if",!0)]}),_:1},8,["disabled"])]}),_:1},8,["modelValue"])]}),_:1},8,["modelValue","title","loading","onSubmit","ok"]),(0,i.bF)(L,{modelValue:e.modalArchivos,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.modalArchivos=o}),title:"Subir archivos",onSubmit:e.saveFiles,loading:e.loadModalArchivos},{default:(0,i.k6)(function(){return[(0,i.bF)(y,{modelValue:e.files,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.files=o})},null,8,["modelValue"])]}),_:1},8,["modelValue","onSubmit","loading"]),e.viewerInfo?((0,i.uX)(),(0,i.Wv)(L,{key:1,class:"modal-viewer",modelValue:e.modalViewer,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.modalViewer=o}),title:e.viewerInfo.TITULO,onSubmit:o[19]||(o[19]=function(o){return e.modalViewer!=e.modalViewer}),footer:!1},{default:(0,i.k6)(function(){return[(0,i.bF)(S,{class:"col",src:e.viewerInfo.URL,style:{"min-height":"60vh","min-width":"50vw"}},null,8,["src"])]}),_:1},8,["modelValue","title"])):(0,i.Q3)("v-if",!0),(0,i.bF)(L,{class:"modal-repositorio-mover-archivo",modelValue:e.modalMover,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.modalMover=o}),title:"Mover archivo",onSubmit:e.moverArchivo},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",c,[(0,i.bF)(N,{selected:e.selectedRepositorio,"onUpdate:selected":o[20]||(o[20]=function(o){return e.selectedRepositorio=o}),nodes:e.treeRepositorio,"node-key":"ID",color:"secondary","default-expand-all":e.expandRepositorios},null,8,["selected","nodes","default-expand-all"])])]}),_:1},8,["modelValue","onSubmit"]),(0,i.bF)(L,{modelValue:e.openModalLeidos,"onUpdate:modelValue":o[27]||(o[27]=function(o){return e.openModalLeidos=o}),title:"Leídos",header:!0,ok:!1,footer:!0},{footer:(0,i.k6)(function(){return[(0,i.bF)(A,{class:"justify-end",color:"grey-2"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(C,{class:"q-mx-xs","no-caps":"",icon:"file_pdf",label:"PDF",color:"primary",onClick:o[23]||(o[23]=function(o){return e.reporte("pdf")})}),(0,i.bF)(C,{class:"q-mx-xs","no-caps":"",icon:"file_excel",label:"EXCEL",color:"primary",onClick:o[24]||(o[24]=function(o){return e.reporte("xls")})})])]}),_:1})]}),footerMobile:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(C,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[25]||(o[25]=function(o){return e.reporte("pdf")})}),(0,i.bF)(C,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[26]||(o[26]=function(o){return e.reporte("xls")})})])]}),default:(0,i.k6)(function(){return[(0,i.Lk)("div",d,[(0,i.Lk)("div",s,[(0,i.Lk)("div",f,[(0,i.bF)(M,{type:"outlined",modelValue:e.tipcod,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.tipcod=o}),options:e.perfilesLeidos,val:"TIPCOD",label:"TIPNOM",placeholder:"perfiles"},null,8,["modelValue","options"])]),(0,i.Lk)("div",p,[(0,i.bF)(w,{style:(0,n.Tr)(e.isLess?"height: 75vh":"height: 500px"),data:e.destinatarios,columns:e.columnas,hideBottom:""},null,8,["style","data","columns"])])])])]}),_:1},8,["modelValue"]),(0,i.bF)(L,{class:"q-download-file__modal",modelValue:e.visor.modal,"onUpdate:modelValue":o[28]||(o[28]=function(o){return e.visor.modal=o}),title:e.visor.name,footer:!1,ok:!1},{default:(0,i.k6)(function(){return[(0,i.bF)(V,{class:"full-height",src:e.visor.src},null,8,["src"])]}),_:1},8,["modelValue","title"])]}),_:1})}var b=t(57008),h=t.n(b),v=t(76080),I=t.n(v),C=t(45254),k=t.n(C),g=(t(30683),t(39866),t(52133),t(10239),t(50310),t(6724),t(70199),t(11777),t(515),t(83190),t(52776),t(81813),t(68017),t(7346),{class:"q-pa-md"}),F={class:"row q-col-gutter-sm"},O={class:"col-12"},_={class:"col-12"},T={class:"col-12"},A={class:"col-12"},R={class:"col-12"};function L(e,o){var t=(0,i.g2)("q-input"),r=(0,i.g2)("q-datetime"),a=(0,i.g2)("q-toggle"),n=(0,i.g2)("q-form"),l=(0,i.g2)("sie-modal");return(0,i.uX)(),(0,i.Wv)(l,{class:"intranet--repositorio--modal-crear",modelValue:e.estado,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.estado=o}),title:"Nuevo Organizador",footer:!0,ref:"estado",header:!0,loading:!1,onSubmit:e.agregar,ok:e.$t("botones.guardar"),onShow:e.show},{default:(0,i.k6)(function(){return[(0,i.bF)(n,{ref:"form"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",g,[(0,i.Lk)("div",F,[(0,i.Lk)("div",O,[(0,i.bF)(t,{modelValue:e.dataForm.TITULO,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.dataForm.TITULO=o}),label:"Titulo *",counter:"",rules:[function(e){return!!e||"Ingrese un título."},function(e){return e.length<=200||"Superó el límite de caracteres de 200."}]},null,8,["modelValue","rules"])]),(0,i.Lk)("div",_,[(0,i.bF)(t,{modelValue:e.dataForm.DESCRIPCION,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.dataForm.DESCRIPCION=o}),type:"textarea",label:"Descripcion",counter:"",autogrow:"",rules:[function(e){return null!==e&&e.length>=0&&e.length<=200||"Superó el límite de caracteres 200."}]},null,8,["modelValue","rules"])]),(0,i.Lk)("div",T,[(0,i.bF)(r,{modelValue:e.dataForm.FH_PUBLICACION,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.dataForm.FH_PUBLICACION=o}),type:"datetime",label:"Fecha de Publicación"},null,8,["modelValue"])]),(0,i.Lk)("div",A,[(0,i.bF)(a,{modelValue:e.dataForm.ANUAL,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.dataForm.ANUAL=o}),"true-value":"S","false-value":"N",label:"Solo ".concat(e.sie.ano)},null,8,["modelValue","label"])]),(0,i.Lk)("div",R,[(0,i.bF)(a,{modelValue:e.dataForm.PUBLICADO,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.dataForm.PUBLICADO=o}),"true-value":1,"false-value":0,label:"Publicado"},null,8,["modelValue"])])])])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit","ok","onShow"])}var U=t(83972),D=t(6123),P=t(30640),E=t(57668),y=t(50304),S=t(2739),N=t(96303),M=t(55973),w=t(9736),V={setup:function(){var e=(0,U.fG)();return{v$:e}},emits:["update:modelValue","input","click"],components:{SieModal:P.A,QModal:D.tU,QDialog:D.OQ,QModalLayout:D.hT,QToolbar:D.ZV,QToolbarTitle:D.r_,QBtn:D.Il,QField:N.A,QInput:w.A,QToggle:M.A,QTabs:D.uw,QTab:D.zu,QTabPane:D.dg,QForm:S.A,QDatetime:y.A},props:{modelValue:{type:Boolean,default:!1},modo:{type:String},clickHandler:{type:Function},data:{type:Object}},data:function(){return{sie:(0,E["default"])()}},computed:{estado:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}},dataForm:function(){return this.data}},methods:{show:function(){"editar"!==this.modo&&this.limpiar()},limpiar:function(){this.dataForm.TITULO="",this.dataForm.DESCRIPCION="",this.dataForm.ANUAL="S",this.dataForm.PUBLICADO=1,this.dataForm.FH_PUBLICACION=new Date},agregar:function(){var e=this;return k()(I()().m(function o(){var t;return I()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$refs.form.validate();case 1:t=o.v,t&&e.$emit("click",e.dataForm);case 2:return o.a(2)}},o)}))()},hasProperty:function(e,o){return e.hasOwnProperty(o)}}},Q=t(12807);const W=(0,Q.A)(V,[["render",L],["__scopeId","data-v-395f14e7"]]);var H=W,$=t(96122),X=t(52220),x=t(53999),B=t(90124),q=t(25173),z=t(13796),j=t(50492),K=t(48975),Z=t(88275),G=t(80340),J=t(19434),Y=t(78131),ee=t(69027),oe=t(81288),te=t(99637),re=t(13813),ae=t(80660),ie=t(982),ne=t(85540),le=t(32195),ue=t(84603),ce=t(6583),de=t(33001),se=t(78786),fe=t(39231),pe=t(2819),me=t(34550),be=t(30545),he=t(93616),ve=t(9054),Ie=t(59043),Ce=t(80103),ke=fe.Hi;function ge(e){return encodeURIComponent(e).replace(/['()]/g,escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,unescape)}var Fe={emits:["update:permiso"],components:{sieSelect:he.A,QCheckbox:D.vZ,QTable:be.A,QTabs:D.uw,QTab:D.zu,QTabPane:D.dg,QTree:X.A,modalCrearCarpeta:H,QScrollArea:$.A,QPageSticky:D._U,SieModal:P.A,QChip:D.wQ,SieSalones:Z.Ay,SieVacio:G.A,sieCloud:le.A,siePdf:ue.A,draggable:ke,SieView:ve.A,sieTree:Ie.A,QBanner:Ce.A,QPage:D.Tu,QCard:D.C$,QList:x.A,QItem:B.A,QItemSection:q.A,QItemLabel:z.A,QIcon:j.A,QPopupProxy:K.A,QToolbar:D.ZV,QBtn:D.Il,QToolbarTitle:D.r_},directives:{download:J.A},props:{tipoRepositorio:{type:[Number,String],default:1}},data:function(){return{mostrarTree:!1,modelCheck:!0,tabSelected:"propio",sie:(0,E["default"])(),nemo:"",tipcod:null,list:[],destinatarios:[],modal:!1,modalCrear:!1,loading:!1,tienePermiso:3===(0,E["default"])().ruta.nivel,accesoTotal:"T"===(0,E["default"])().acceso_salon,ocultaTabs:(0,E["default"])().esFamilia||(0,E["default"])().esEstudiante||3!==(0,E["default"])().ruta.nivel,modoModalCrear:"",dataModalCrear:{TITULO:"",DESCRIPCION:"",ANUAL:"S",PUBLICADO:1,FH_PUBLICACION:new Date},organizador:{},padres:{},modalCompartir:!1,loadModalCompartir:!1,modalViewer:!1,viewerInfo:{},perfiles:[],perfilesLeidos:[],repositoriosCompartidos:{},listCompartido:[],idCarpetaActual:"",modalArchivos:!1,loadModalArchivos:!1,files:[],repositorioActual:{},all:!1,modalMover:!1,item:{},idArchivo:null,treeRepositorio:[],selectedRepositorio:null,expandRepositorios:!1,reporteAcceso:["0272"].indexOf((0,E["default"])().colcod)>=0,loadingDonwload:!1,openModalLeidos:!1,visor:{modal:!1,src:null,name:null},ticked:[],tabSelectedComp:"tab-1",message:"Las modificaciones solo se realizarán en el año de creación del repositorio.",viewMessage:!1,ocultar:["0084","0108","0234"].indexOf((0,E["default"])().colcod)>=0,bloquearDirigido:!["0001"].includes((0,E["default"])().colcod),idFileForModal:null}},methods:{abrirModalLeidos:function(e){var o=this,t={id:e.ID};this.idFileForModal=e.ID,ae.$http.get("api/HyoRepositorios/getLectura",{params:t}).then(function(e){var t=[],r=[];e.map(function(e){t.includes(e.TIPCOD)||(r.push(e),t.push(e.TIPCOD))}),o.destinatarios=e,o.perfilesLeidos=r}),this.openModalLeidos=!0},grabarLectura:function(e){var o={id:e.ID};ae.$http.post("api/HyoRepositorios/grabarLectura",o)},compartir:function(){var e=this,o=this.idCarpetaActual;this.loadModalCompartir=!0;var t=[],r=this.ticked;r=r.map(function(e){return JSON.parse(e)}),(0,te["default"])(r,function(e){-1===t.indexOf(e.tipcod)&&t.push(e.tipcod)});var a={params:{idRepositorio:o,tipcod:t,nemos:r}};ae.$http.post("api/HyoRepositorioperfiles/shareRepositorio",a).then(function(o){e.modalCompartir=!1,e.loadModalCompartir=!1})},compartirCarpeta:function(e){var o=this;this.idCarpetaActual=e,this.modalCompartir=!0,this.loadModalCompartir=!0,this.mostrarTree=!1,ae.$http.get("api/HyoRepositorioperfiles/getProfileCompartido",{params:{idRepositorio:e}}).then(function(e){var t=e.json;o.ticked=(0,re["default"])(t.nemos,function(e){return JSON.stringify(e)}),o.viewMessage=o.bloquearDirigido&&t.ano!==String((0,E["default"])().ano)&&"0000"!==t.ano,o.loadModalCompartir=!1,o.mostrarTree=!0})},getOrganizadorParent:function(){var e=this.organizador.IDREF,o={ID:e,TITULO:this.padres[e].TITULO,IDREF:this.padres[e].IDREF};this.cargarDetalle(o)},getOrganizadorChildren:function(e){var o=this;return k()(I()().m(function t(){return I()().w(function(t){while(1)switch(t.n){case 0:-1!==["B","E","N"].indexOf(e.TDOC)?(o.grabarLectura(e),o.visor.src=e.URL,o.visor.name=e.TITULO,o.visor.modal=!0):o.cargarDetalle(e);case 1:return t.a(2)}},t)}))()},openModal:function(e){var o=this;return k()(I()().m(function t(){return I()().w(function(t){while(1)switch(t.n){case 0:o.modal=!0,o.cargarDetalle(e);case 1:return t.a(2)}},t)}))()},cargarDetalle:function(e){var o=this;return k()(I()().m(function t(){var r,a;return I()().w(function(t){while(1)switch(t.n){case 0:return r={},e.IDREF&&(r.idParent=e.IDREF),o.loading=!0,t.n=1,o.cargarHijos(e.ID);case 1:a=t.v,r.TITULO=e.TITULO,r.IDREF=e.IDREF,r.ID=e.ID,r.list=a,o.organizador=r,o.loading=!1;case 2:return t.a(2)}},t)}))()},downloadArchivo:function(e){var o=e.URL,t=e.TITULO;(0,Y["default"])(o,t)},viewerFile:function(e){var o=e.URL,t=e.TITULO;t&&String(t).toLowerCase().indexOf(".pdf")>=0?(this.modalViewer=!0,this.viewerInfo={URL:o,TITULO:t}):this.downloadArchivo({URL:o,TITULO:t})},hasProperty:function(e,o){return e.hasOwnProperty(o)},getIcon:function(e){var o=e.lastIndexOf("."),t=o>=0?e.substr(o+1,e.length):"folder";return(0,ne.getIcon)(t)},abrirModalCrearCarpeta:function(e,o){this.modoModalCrear=e,"editar"===e&&(this.dataModalCrear.TITULO=o.TITULO,this.dataModalCrear.DESCRIPCION=o.DESCRIPCION,this.dataModalCrear.ID=o.ID,this.dataModalCrear.IDREF=o.IDREF,this.dataModalCrear.TIPO=o.TIPO,this.dataModalCrear.EXTENSION=o.EXTENSION,this.dataModalCrear.ANUAL=o.ANUAL,this.dataModalCrear.PUBLICADO=o.PUBLICADO,this.dataModalCrear.FH_PUBLICACION=o.FH_PUBLICACION),"crearHijo"===e&&(this.dataModalCrear.IDREF=o.ID),this.modalCrear=!0},abrirModalSubirArchivo:function(e){this.modalArchivos=!0,this.repositorioActual=h()({},e)},saveFiles:function(){var e=this;if(this.repositorioActual&&this.repositorioActual.ID){if(this.loadModalArchivos)return void(0,ie["default"])("Aún se están agregando los archivos","info");this.loadModalArchivos=!0;var o=(0,re["default"])(this.files,function(o){var t="B";return t=o.esEnlace?"enlace"===o.nube?"X":"E":"B",{titulo:o.name,descripcion:"",repositorio:e.repositorioActual.ID,tipo:t,archivo:o.url,temporal:o.temp,anual:"S"}});ae.$http.post("api/HyoRepositorioarchivos/registraArchivo",{datos:o}).then(function(){e.loadModalArchivos=!1,e.modalArchivos=!1,(0,ie["default"])("Grabado correctamente","success"),e.files=[]}).catch(function(){e.loadModalArchivos=!1,(0,ie["default"])("Ocurrió un error, inténtelo nuevamente","warning")})}},crearCarpeta:function(e){var o=this;return k()(I()().m(function t(){var r,a,i,n,l,u,c,d,s,f,p,m,b,h,v,C,k,g,F,O,_,T,A,R;return I()().w(function(t){while(1)switch(t.n){case 0:if(o.modalCrear=!1,"crearHijo"===o.modoModalCrear&&(r=e.IDREF,a=e.TITULO,i=e.DESCRIPCION,n=e.ANUAL,l=e.PUBLICADO,u=e.FH_PUBLICACION,c={ANUAL:n,TITULO:a,DESCRIPCION:i,ID_REPOSITORIO_TIPO:o.tipoRepositorio,PUBLICADO:l,FH_PUBLICACION:u},ae.$http.get("api/HyoRepositorios/agregarRepositorio",{params:{dato:c,padre:r}}).then(function(e){e.json;(0,ie["default"])("Datos guardados")})),"crear"===o.modoModalCrear&&(d=e.TITULO,s=e.DESCRIPCION,f=e.ANUAL,p=e.PUBLICADO,m=e.FH_PUBLICACION,b={TITULO:d,DESCRIPCION:s,ANUAL:f,ID_REPOSITORIO_TIPO:o.tipoRepositorio,PUBLICADO:p,FH_PUBLICACION:m},ae.$http.get("api/HyoRepositorios/agregarRepositorio",{params:{dato:b}}).then(function(e){e.json;(0,ie["default"])("Datos guardados"),o.cargarRepositorio()})),"editar"!==o.modoModalCrear){t.n=4;break}if(h=e.DESCRIPCION,v=e.TITULO,C=e.ID,k=e.TIPO,g=e.ANUAL,F=e.EXTENSION,O=e.FH_PUBLICACION,_=e.PUBLICADO,T={TITULO:v,DESCRIPCION:h,ID:C,ANUAL:g,FH_PUBLICACION:O,PUBLICADO:_},"R"!==k){t.n=2;break}return t.n=1,ae.$http.get("api/HyoRepositorios/editarRepositorio",{params:{parametros:T}});case 1:o.$notify("Editado correctamente."),o.recargar(e.ID),t.n=4;break;case 2:return A=v.lastIndexOf("."),R=A>=0?v.substr(A+1,v.length):"",R!==F&&(T.TITULO=v+"."+F),t.n=3,ae.$http.get("api/HyoRepositorioarchivos/editaDocumento",{params:{parametros:T}});case 3:o.$notify("Editado correctamente"),o.recargar(e.ID);case 4:return t.a(2)}},t)}))()},eliminarCarpeta:function(e){var o=this,t=e.ID,r={id:t};(0,ee.confirmar)(this.$t("mensajes.m0038"),function(){var a="";a=["B","N","E"].includes(e.TDOC)?"HyoRepositorioarchivos/eliminaDocumento":"HyoRepositorios/eliminarRepositorio",ae.$http.get("api/".concat(a),{params:r}).then(function(e){(0,ie["default"])("Se elimino Correctamente"),o.recargar(t)}).catch(function(e){console.error(e),(0,ie["default"])("Error","warning")})})},recargar:function(e){if(this.padres[e].IDREF){var o=h()({},this.organizador);this.cargarHijos(this.padres[e].IDREF).then(function(e){o.list=e}),this.organizador=o}else this.cargarRepositorio()},cargarRepositorio:function(){var e=this;ae.$http.get("api/HyoRepositorios/obtRepositorioPropio",{params:{tipoRepositorio:this.tipoRepositorio}}).then(function(o){var t=o.json,r=h()({},e.padres),a=t.map(function(e){var o=e.ID,t=e.TITULO,a=e.DESCRIPCION,i=e.ID_REPOSITORIO_REF,n=(e.TDOC,e.TIPO),l=e.ANUAL,u=e.FH_PUBLICACION,c=e.FECHA,d=e.PUBLICADO;r[o]={},r[o].IDREF=i,r[o].TITULO=t;var s=n?n.trim():"";return{ID:o,TITULO:t,DESCRIPCION:a,IDREF:i,TIPO:s,ANUAL:l,FH_PUBLICACION:u,FECHA:c,PUBLICADO:d}});e.padres=r,e.list=a})},cargarRepositorioCompartido:function(){var e=this;ae.$http.get("api/HyoRepositorios/obtRepositorioCompartido",{params:{tipoRepositorio:this.tipoRepositorio}}).then(function(o){var t=o.json,r=h()({},e.padres),a=t.map(function(e){var o=e.ID,t=e.TITULO,a=e.DESCRIPCION,i=e.ID_REPOSITORIO_REF,n=(e.TDOC,e.FH_PUBLICACION),l=e.USUNOM,u=e.FECHA;return r[o]={},r[o].IDREF=i,r[o].TITULO=t,{ID:o,TITULO:t,DESCRIPCION:a,IDREF:i,FH_PUBLICACION:n,USUNOM:l,FECHA:u}});e.padres=r,e.listCompartido=a})},cargarHijos:function(e){var o=this;return ae.$http.get("api/HyoRepositorios/obtHijosRepositorio",{params:{id:e}}).then(function(e){var t=e.json,r=h()({},o.padres),a=(0,re["default"])(t,function(e){var t=e.ID,a=e.ID_REPOSITORIO_REF,i=e.TITULO,n=e.DESCRIPCION,l=e.TDOC,u=e.TIPO,c=e.ANUAL,d=e.ARCHIVO,s=e.FH_PUBLICACION,f=e.PUBLICADO,p=e.FECHA;r.hasOwnProperty(t)||(r[t]={},r[t].IDREF=a,r[t].TITULO=i);var m=(0,me.cleanNameFile)(i),b="E"!==l?"".concat(o.sie.api,"/HyoRepositorioarchivos/archivo/").concat(t,"/").concat(m,"}?access_token=").concat(o.sie.token):d,h=u?u.trim():"",v=i.lastIndexOf(".")>=0?i.substr(i.lastIndexOf(".")+1,i.length):"";return{ID:t,TITULO:i,DESCRIPCION:n,IDREF:a,TDOC:l,URL:b,TIPO:h,ANUAL:c,EXTENSION:v,FH_PUBLICACION:s,PUBLICADO:f,FECHA:p}});return o.padres=r,a})},cargarPerfiles:function(){var e=this;ae.$http.get("api/HyoPerfiles/obtPerfilesExistentes").then(function(o){var t=o.json,r={};t.map(function(e){var o=e.TIPNOM,t=e.TIPCOD;r[t]={TIPNOM:o,model:!1}}),e.perfiles=r})},toggleAll:function(){var e=this;(0,te["default"])(this.perfiles,function(o){o.model=!!e.all})},openModalMoverArchivo:function(e,o){var t=this;this.modalMover=!0,this.item=o,this.idArchivo=e.ID,ae.$http.get("api/HyoRepositorios/treeRepositorio").then(function(o){for(var r=(0,re["default"])((0,ce["default"])(o),function(o){return o.ID===e.IDREF&&(o.DISABLED=!0),{label:o.TITULO,ID:o.ID,ID_REPOSITORIO_REF:o.ID_REPOSITORIO_REF,icon:"folder",iconColor:"amber",noTick:o.DISABLED}}),a=r.length-1;a>=0;a--){var i=r[a];if(i.ID_REPOSITORIO_REF){var n=(0,se["default"])(r,i.ID_REPOSITORIO_REF,{key:"ID"});r[n].children||(r[n].children=[]),r[n].children.push(i)}}r=(0,de.filterArray)("null",{field:"ID_REPOSITORIO_REF",list:r}),t.treeRepositorio=r})},moverArchivo:function(){var e=this;ae.$http.put("api/HyoRepositorioarchivos/moverArchivo",{id:this.idArchivo,idRepositorio:this.selectedRepositorio}).then(function(o){(0,ie["default"])("El archivo fue movido correctamente","success"),e.cargarDetalle(e.item),e.modalMover=!1})},checkMove:function(){var e=this,o=a()(this.organizador.list);o=(0,re["default"])(o,function(e,o){return{id:e.ID,orden:o+1,tipo:e.TIPO}}),ae.$http.post("api/HyoRepositorios/ordenarRepositorio",{datos:o}).then(function(o){var t=o.json;(0,ie["default"])(e.$t("mensajes."+t),"m0001"===t?"success":"warning")})},imprimirReporte:function(e){var o={id:e,ano:(0,E["default"])().ano,repcod:"reporteRepositorio"};(0,pe.exportFilePhp)(o,"intranet/reporte-node/reporte","Reporte repositorio")},reporte:function(e){var o={id:this.idFileForModal,ano:(0,E["default"])().ano,repcod:"reporteRepositorioArhivoLeido",formato:e};(0,pe.exportFilePhp)(o,"intranet/reporte-node/reporte","Reporte repositorio")}},computed:{columnas:function(){var e=this.destinatarios,o=[{name:"USUNOM",label:"USUARIO",field:"USUNOM",align:"left",sortable:!0,style:"width: 300px"},{name:"TIPNOM",label:"PERFIL",field:"TIPNOM",align:"left",sortable:!0,style:"width: 200px"},{name:"FH_LECTURA",label:"LECTURA",field:"FH_LECTURA",align:"center",sortable:!0}];if("000"!==this.tipcod&&(e=(0,de.filterArray)(this.tipcod,{field:"TIPCOD",list:e})),e.length){var t=(0,de.filterArray)("null",{field:"FH_LECTURA",list:e}),r=e.length-t.length;o[0].label=e.length?"USUARIO ("+e.length+")":"USUARIO",o[2].label=e.length?"LECTURA ("+r+"/"+Math.round(r/e.length*100)+"%)":"LECTURA"}return o},tabPropio:function(){return"propio"===this.tabSelected},isLess:function(){return(0,oe.isLess)()},acceso:{get:function(){return this.permiso},set:function(e){this.$emit("update:permiso",e)}},permisoEditar:function(){return this.sie.ruta.nivel>=2}},watch:{tipoRepositorio:function(){this.cargarRepositorio(),this.cargarRepositorioCompartido(),this.cargarPerfiles()}},created:function(){this.cargarRepositorio(),this.cargarRepositorioCompartido(),this.cargarPerfiles()}};const Oe=(0,Q.A)(Fe,[["render",m]]);var _e=Oe}}]);