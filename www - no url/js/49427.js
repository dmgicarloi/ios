"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[49427],{49427:function(o,e,i){i.r(e),i.d(e,{default:function(){return z}});i(56285),i(515);var t=i(61758),n=i(58790),a=i(29104),l={class:"q-pa-sm"},s={class:"q-ma-sm"},u={key:1,class:"q-table q-table-horizontal-separator q-card q-mt-sm"},c={class:"justify-start",colspan:"2"},r={class:"col"},d={class:"justify-center"},p={class:"row justify-center"},f={class:"col row"},m={class:"row"},h={class:"row"},E={class:"q-item-label"},g={key:0,class:"row q-ml-sm q-item-label"},b={key:0,class:"q-pl-lg"},D={key:1,class:"q-item-sublabel"},L={key:0,class:"row"},v={key:1,class:"row"},C={key:1,class:"col column items-center justify-center"};function O(o,e){var i=(0,t.g2)("sie-select"),O=(0,t.g2)("sie-modal"),k=(0,t.g2)("sie-upload"),A=(0,t.g2)("q-btn"),M=(0,t.g2)("draggable"),U=(0,t.g2)("sie-familia"),S=(0,t.g2)("q-item"),T=(0,t.g2)("q-list"),y=(0,t.g2)("q-item-main"),F=(0,t.g2)("q-tooltip"),V=(0,t.g2)("q-item-side"),I=(0,t.g2)("q-collapsible"),N=(0,t.g2)("sie-vacio"),j=(0,t.g2)("q-card"),w=(0,t.g2)("q-scroll-area"),q=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(q,{class:"col bg-white"},{default:(0,t.k6)(function(){return[(0,t.bF)(O,{modelValue:o.preModal,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.preModal=e}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",l,[e[8]||(e[8]=(0,t.Lk)("div",{class:"col"},"Seleccione el modo de subida de los documentos",-1)),(0,t.bF)(i,{class:"col",type:"outlined",modelValue:o.tipoSubida,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.tipoSubida=e}),options:o.tiposSubida,label:"desc",val:"tipo",placeholder:"Modo de documento",onInput:o.seleccionaPreModal},null,8,["modelValue","options","onInput"]),e[9]||(e[9]=(0,t.Lk)("div",{class:"text-bold"},"Leyenda",-1)),e[10]||(e[10]=(0,t.Lk)("div",{class:"row"},[(0,t.Lk)("div",{class:"text-bold"},"Único:"),(0,t.Lk)("span",null,"Entregar un único documento")],-1)),e[11]||(e[11]=(0,t.Lk)("div",{class:"row"},[(0,t.Lk)("div",{class:"text-bold"},"Múltiple:"),(0,t.Lk)("span",null,"Entregar el documento en diferentes Archivos")],-1))])]}),_:1},8,["modelValue"]),(0,t.bF)(O,{modelValue:o.modalMultiple,"onUpdate:modelValue":e[5]||(e[5]=function(e){return o.modalMultiple=e}),title:"Seleccionar Documentos",onSubmit:o.terminarMultiple},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",s,[(0,t.bF)(i,{class:"col",type:"outlined",modelValue:o.tipoMultiple,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.tipoMultiple=e}),options:o.formatoDocumentos,label:"desc",val:"tipo",placeholder:"Tipo documento a subir",readonly:["pdf","jpg"].indexOf(o.tipoMultiple)>=0},null,8,["modelValue","options","readonly"]),o.tipoMultiple?((0,t.uX)(),(0,t.Wv)(k,{key:0,onUpload:o.addFile2,icon:"file",multiple:!0,allow:[o.tipoMultiple],modelValue:o.infoUpd2,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.infoUpd2=e}),onlyButton:!0,preview:!1,title:"Subir Archivos"},null,8,["onUpload","allow","modelValue"])):(0,t.Q3)("v-if",!0),o.infoUpd2.files.length>0?((0,t.uX)(),(0,t.CE)("table",u,[e[12]||(e[12]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{colspan:"3"},"Archivos")])],-1)),(0,t.bF)(M,{modelValue:o.infoUpd2.files,"onUpdate:modelValue":e[4]||(e[4]=function(e){return o.infoUpd2.files=e}),tag:"tbody",onChange:o.ordenarDocumentos},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.infoUpd2.files,function(e,i){return(0,t.uX)(),(0,t.CE)("tr",{key:e.name},[(0,t.Lk)("td",c,[(0,t.bF)(A,{icon:"pdf"===o.tipoMultiple?"file_pdf":"file_image",round:"",flat:"",dense:"",block:""},null,8,["icon"]),(0,t.Lk)("span",r,(0,n.v_)(e.originalFilename),1)]),(0,t.Lk)("td",d,[(0,t.bF)(A,{icon:"delete",onClick:(0,a.D$)(function(e){return o.eliminarTemporal(i)},["stop"]),round:"",flat:"",dense:""},null,8,["onClick"])])])}),128))]}),_:1},8,["modelValue","onChange"]),e[13]||(e[13]=(0,t.Lk)("tfoot",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{colspan:"3"},"Arrastra los archivos para reordenarlos")])],-1))])):(0,t.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(O,{modelValue:o.modalDocumento,"onUpdate:modelValue":e[7]||(e[7]=function(e){return o.modalDocumento=e}),title:"Seleccionar Documento",onSubmit:o.subirFile,escClick:o.cerrarModal,esc:o.cerrarModal,noClose:o.cerrarModal},{default:(0,t.k6)(function(){return[(0,t.bF)(k,{onUpload:o.addFile,icon:"file",title:o.$t("subirArchivos"),allow:o.formatos,modelValue:o.infoUpd.file,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.infoUpd.file=e})},null,8,["onUpload","title","allow","modelValue"])]}),_:1},8,["modelValue","onSubmit","escClick","esc","noClose"]),o.ano?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",p,[(0,t.Lk)("b",null,"Entrega de Documentos - "+(0,n.v_)(o.ano),1)]),(0,t.bF)(U,{model:o.familiaSelect,onSelected:o.cambiaFamilia},null,8,["model","onSelected"]),(0,t.Lk)("div",f,[o.isLess?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.Wv)(T,{key:0,class:"col-5"},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.dataHijos,function(e){return(0,t.uX)(),(0,t.Wv)(S,{key:e.ALUCOD,onClick:function(i){return o.seleccionaAlumno(e)},class:(0,n.C4)({"custom-selected":e.ALUCOD===o.estudiante.ALUCOD})},{default:(0,t.k6)(function(){return[(0,t.Lk)("span",null,(0,n.v_)(e.NOMCOMP),1)]}),_:2},1032,["onClick","class"])}),128))]}),_:1})),(0,t.bF)(w,{class:"col",style:(0,n.Tr)({"max-height":o.alto})},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.infoValidacion["parametros"],function(i,l){return(0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(j,{class:"q-ma-xs col"},{default:(0,t.k6)(function(){return[i.DETALLE&&!o.infoValidacion.estadoFinal?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:0},(0,t.pI)(Object.keys(i.DETALLE),function(s){return(0,t.uX)(),(0,t.Wv)(I,{key:s,popup:"",opened:"T"===s},{header:(0,t.k6)(function(){return[(0,t.bF)(S,{class:"col"},{default:(0,t.k6)(function(){return[(0,t.bF)(y,{class:"column c-green"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",h,[(0,t.Lk)("span",E,(0,n.v_)(i.DETALLE[s][0].DESCRIPCION),1),null!==i.DETALLE[s][0].ESTADODOCU&&"documentos"===i.TIPO?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.Lk)("span",{class:(0,n.C4)(["text-bold",{"text-red":2===i.DETALLE[s][0].ESTADODOCU}])},"Estado: ",2),(0,t.Lk)("span",{class:(0,n.C4)({"text-red":2===i.DETALLE[s][0].ESTADODOCU})},(0,n.v_)(o.$t("estadoDocu."+i.DETALLE[s][0].ESTADODOCU)),3)])):(0,t.Q3)("v-if",!0)]),2===i.DETALLE[s][0].ESTADODOCU&&"documentos"===i.TIPO?((0,t.uX)(),(0,t.CE)("span",b,[e[14]||(e[14]=(0,t.Lk)("b",null,"Motivo: ",-1)),(0,t.Lk)("span",null,(0,n.v_)(i.DETALLE[s][0].RECHAZODET),1)])):((0,t.uX)(),(0,t.CE)("span",D,(0,n.v_)(i.DETALLE[s][0].EXONERADO?o.$t("matricula.exonerado"):""),1))]}),_:2},1024)]}),_:2},1024),1===o.infoValidacion.cuentaInvalidos&&i.DETALLE[s][0].SUBEDOC&&!i.DETALLE[s][0].ARCHIVO&&!i.DETALLE[s][0].file&&!i.DETALLE[s][0].NOMFILE||2===i.DETALLE[s][0].ESTADODOCU?((0,t.uX)(),(0,t.Wv)(V,{key:0,right:""},{default:(0,t.k6)(function(){return[o.isLess?((0,t.uX)(),(0,t.CE)("div",v,[(0,t.bF)(A,{icon:"upload",color:"secondary",round:"",size:"sm",onClick:(0,a.D$)(function(e){return o.openPreModal(i.DETALLE[s][0],l)},["stop"]),dense:""},{default:(0,t.k6)(function(){return[(0,t.bF)(F,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,n.v_)(o.$t("matricula.agregardocumento")),1)]}),_:1})]}),_:1},8,["onClick"])])):((0,t.uX)(),(0,t.CE)("div",L,[(0,t.bF)(A,{label:o.$t("matricula.agregardocumento"),icon:"upload",color:"secondary",onClick:(0,a.D$)(function(e){return o.openPreModal(i.DETALLE[s][0],l)},["stop"]),dense:""},null,8,["label","onClick"])]))]}),_:2},1024)):(0,t.Q3)("v-if",!0)]}),_:2},1032,["opened"])}),128)):((0,t.uX)(),(0,t.CE)("div",{key:1,class:"col items-center justify-center column",style:(0,n.Tr)({height:o.alto})},[(0,t.bF)(N,{subtitle:"No hay documentos por subir",icon:"person"})],4))]}),_:2},1024)])}),256))]}),_:1},8,["style"])])],64)):((0,t.uX)(),(0,t.CE)("div",C,[(0,t.bF)(N,{class:"col",subtitle:"No hay un proceso de subida de documentos activo",icon:"person"})]))]}),_:1})}var k=i(57008),A=i.n(k),M=(i(10239),i(89571),i(50310),i(90095),i(83190),i(13715),i(6123)),U=i(96122),S=i(80660),T=i(69027),y=i(32195),F=i(982),V=i(57668),I=i(80340),N=i(96529),j=i(30545),w=i(30640),q=i(59089),_=i(33950),X=i(81288),H=i(93616),Q=i(39231),R=Q.Hi,P={components:{QTable:j.A,QTr:M.qh,QTd:M.Ef,dialogConfirm:T.dialogConfirm,QTooltip:M.nC,sieVacio:I.A,sieFamilia:N.A,sieModal:w.A,QInnerLoading:M.SQ,QCollapsible:M.eS,QItem:M.H0,QList:M.Mb,sieCloud:y.A,sieUpload:q.A,QScrollArea:U.A,QSpinnerOval:M.VA,sieSelect:H.A,draggable:R,QListHeader:M.XR,QPage:M.Tu,QBtn:M.Il,QCard:M.C$,QItemMain:M.mF,QItemSide:M.n1},data:function(){return{sie:(0,V["default"])(),permiso:(0,V["default"])().ruta.nivel,ano:null,configuracion:{},familiaSelect:null,estudiante:{},dataHijos:[],infoValidacion:{},cargandoInfo:!0,mensajeEstado:"",cargando:!1,permiteSeguir:null,preModal:!1,alto:0,titulos:{cursos:[{tipo:"cursos",titulo:"ano",campo:"ANO"},{tipo:"cursos",titulo:"ngs.nivel",campo:"INSTRUDES"},{tipo:"cursos",titulo:"ngs.grado",campo:"GRADOCOD"},{tipo:"cursos",titulo:"ngs.seccion",campo:"SECCIONCOD"},{tipo:"cursos",titulo:"curso",campo:"CURSONOM"}],documentos:[{tipo:"documentos",titulo:"ano",campo:"ANO"},{tipo:"documentos",titulo:"documento",campo:"DESCRIPCION"}],deudas:[{tipo:"deudas",titulo:"concepto",campo:"DESCRIPCION"},{tipo:"deudas",titulo:"ano",campo:"ANOCOB"},{tipo:"deudas",titulo:"mes",campo:"MESDES"},{tipo:"pago",titulo:"monto",campo:"MONTOPEN"},{tipo:"deudas",titulo:"fecven",campo:"FECVEN",fecha:!0}],pago:[{tipo:"pago",titulo:"ano",campo:"ANOCOB"},{tipo:"pago",titulo:"mes",campo:"MESDES"},{tipo:"pago",titulo:"concepto",campo:"DESCRIPCION"},{tipo:"pago",titulo:"moneda",campo:"MONNOM"},{tipo:"pago",titulo:"monto",campo:"MONTOPAG"}],biblioteca:[{tipo:"biblioteca",titulo:"motivo",campo:"MOTIVO"}]},formatoDocumentos:[{tipo:"pdf",desc:"PDF"},{tipo:"jpg",desc:"Imagen"}],modalDocumento:!1,infoUpd:{},infoUpd2:{files:[]},indDocumentos:null,cerrarModal:!1,tipoMultiple:null,modalMultiple:!1,tiposSubida:[{tipo:"subirDocumento",desc:"Único"},{tipo:"subirMultiple",desc:"Múltiple"}],tipoSubida:null,infoMsg:{message:"Sus documentos fueron subidos correctamente, por favor espere su validación.",title:"Confirmar",cancel:!1},formatos:["pdf","doc","docx","jpg","jpeg"]}},methods:{cambiaFamilia:function(o){var e=this;this.estudiante={},this.familiaSelect=o.FAMCOD;var i={ano:this.ano,famcod:o.FAMCOD,configuracion:this.configuracion};o.FAMCOD&&S.$http.post("api/HyoMatricula/obtEstadosHijos",i).then(function(o){var i=o.json;e.dataHijos=i,(1===i.length||i.length>1)&&(e.estudiante=e.dataHijos[0],e.seleccionaAlumno(e.dataHijos[0]))})},seleccionaAlumno:function(o){var e=this;this.estudiante=o;var i=o.ALUCOD,t=o.FAMCOD,n=o.INSTRUCODL,a=o.GRADOCODL,l=o.ANOING,s=o.HMNOUBI,u={ALUCOD:i,FAMCOD:t,INSTRUCODL:n,GRADOCODL:a,ANOING:l,HMNOUBI:s},c={alumno:u,ano:this.ano,configuracion:this.configuracion,soloSubir:!0};S.$http.get("api/HyoMatriculaparametros/obtConfiguracionGeneral",{params:c}).then(function(o){var i=o.json;i&&(e.infoValidacion=i,e.cargandoInfo=!1)})},handleResize:function(){var o=145;this.alto=window.innerHeight-o+"px"},openPreModal:function(o,e){this.preModal=!0,this.infoUpd=o,this.indDocumentos=e,this.tipoSubida=null},seleccionaPreModal:function(){this[this.tipoSubida](),this.preModal=!1},subirMultiple:function(){this.modalMultiple=!0,this.tipoMultiple=!1,this.infoUpd2.files=[]},subirDocumento:function(){this.modalDocumento=!0,this.cerrarModal=!1},addFile:function(o){var e=this;this.cerrarModal=!0,(0,_.Upload)({url:"api/HyoArchivo/tmp/upload",file:o[0]}).then(function(o){e.infoUpd.file=o}).catch(function(){})},showMensaje:function(){(0,T.dialogConfirm)(this.infoMsg)},subirFile:function(){var o=this;this.modalDocumento=!1;var e=this.permiteSeguir?1:0,i={alucod:this.infoUpd.ALUCOD,ano:this.infoUpd.ANO,docnom:this.infoUpd.file.name,doccod:this.infoUpd.TIPO,rutaTmp:"tmp",estado:e,configuracion:this.configuracion};S.$http.post("api/HyoDocumatalumno/grabarDocumento",i).then(function(i){var t=i.json;if("yes"===t){if((0,F["default"])(o.$t("mensajes.m0001"),"success"),o.infoUpd.NOMFILE=o.infoUpd.TIPO+"'pdf",o.infoUpd.ESTADODOCU=e,o.permiteSeguir){var n=0,a=0,l=A()({},o.infoValidacion.parametros[o.indDocumentos].DETALLE);Object.keys(l).forEach(function(o){var e=l[o][0];1===e.SUBEDOC&&(n++,2!==e.ESTADODOC&&(e.file||e.NOMFILE)&&a++)}),n===a&&o.cargaInicial()}}else(0,F["default"])(o.$t("mensajes.e0006"),"error")})},validarSubidos:function(){var o,e=this,i=0;return this.infoValidacion["parametros"]&&this.infoValidacion["parametros"][0]&&this.infoValidacion["parametros"][0].DETALLE&&Object.keys(this.infoValidacion["parametros"][0].DETALLE).length>0&&(o=Object.keys(this.infoValidacion["parametros"][0].DETALLE).length,Object.keys(this.infoValidacion["parametros"][0].DETALLE).forEach(function(o){0===e.infoValidacion["parametros"][0].DETALLE[o][0].ESTADODOCU&&(i+=1)})),o>0&&o===i},addFile2:function(o){var e=this;o.forEach(function(o){(0,_.Upload)({url:"api/HyoArchivo/tmp/upload",file:o}).then(function(o){e.infoUpd2.files.push(o)}).catch(function(){})})},terminarMultiple:function(o){var e=this;if(this.infoUpd2.files.length>1){var i=[];this.infoUpd2.files.forEach(function(o){o&&o.name&&i.push(o.name)});var t={files:i,ano:this.ano,formato:this.tipoMultiple};S.$http.post("api/HyoDocumatalumno/crearTemporalMultipe",t).then(function(o){var i=o.json;e.infoUpd.file={name:i},e.subirFile(),e.modalMultiple=!1})}else(0,F["default"])("Debe subir mas de 1 archivo","error")},eliminarTemporal:function(o){this.infoUpd2.files.splice(o,1)},cancelarClone:function(){return!1},ordenarDocumentos:function(o){var e=this;this.cargando=!0;var i=[];this.infoUpd2.files.forEach(function(o,e){"undefined"===typeof o&&i.unshift(e)}),i.length>0&&i.forEach(function(o){e.infoUpd2.files.splice(o,1)}),this.cargando=!1}},computed:{isLess:function(){return(0,X.isLess)()}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},mounted:function(){var o=this;switch((0,V["default"])().colcod){case"0005":this.infoMsg.message='Sus documentos fueron subidos correctamente, por favor espere su validación que se realizará máximo 24 horas."';break;case"0048":this.infoMsg.message="Aquí concluye el proceso, sus documentos fueron subidos correctamente, por favor espere su validación para obtener su constancia de matrícula.",this.infoMsg.title="Confirmación";break;case"0255":this.infoMsg.message="Se han recepcionado los documentos adjuntos , sin embargo se encuentra en estado de revisión, recibirá un mensaje de conformidad o rechazo a través de la bandeja de entrada de Sieweb.",this.infoMsg.title="Estimado padre de Familia:";break}S.$http.get("api/HyoMatriculaFecha/traeAnoMatricula",{params:{flReserva:2}}).then(function(e){var i=e.json;i[0]&&(o.ano=i[0].ANO,S.$http.get("api/HyoMatriculaconfiguracion/obtConfiguracion",{params:{ano:o.ano,agrupado:!0}}).then(function(e){o.configuracion=e.json}))}),window.addEventListener("resize",this.handleResize),this.handleResize()}},$=i(12807);const x=(0,$.A)(P,[["render",O]]);var z=x}}]);