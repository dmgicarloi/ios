"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[22399],{22399:function(e,o,n){n.r(o),n.d(o,{default:function(){return Yo}});var a=n(61758),t=n(29104),l={key:0,class:"row"},r={class:"col-xs-12 col-md-4 q-pa-md"},i={class:"row"},c={class:"col-xs-6 q-pr-sm-xs"},s={class:"row"},u={class:"col-xs-12"},d={class:"row"},f={class:"col-xs-6 q-pr-sm-xs"},p={class:"row"},m={class:"col-xs-12"},b={class:"row"},O={class:"col-xs-6 q-pr-sm-xs"},C={class:"row"},g={class:"col-xs-12"};function v(e,o){var n=(0,a.g2)("q-input"),v=(0,a.g2)("q-tab"),A=(0,a.g2)("escalas"),_=(0,a.g2)("q-tab-pane"),I=(0,a.g2)("configuracion"),D=(0,a.g2)("q-select"),F=(0,a.g2)("config-general-notas"),h=(0,a.g2)("config-general-conducta"),k=(0,a.g2)("config-general-talleres"),N=(0,a.g2)("config-constantes"),R=(0,a.g2)("particularidades"),T=(0,a.g2)("tipo-calculo"),E=(0,a.g2)("q-tabs"),L=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(L,{class:"configuracionNotas bg-white"},{default:(0,a.k6)(function(){return[e.acceso?((0,a.uX)(),(0,a.Wv)(E,{key:1,inverted:"",ref:"tabs",animated:""},{title:(0,a.k6)(function(){return[(0,a.bF)(v,{default:"",name:"tab-1",label:"Escalas"}),(0,a.bF)(v,{name:"tab-2",label:"Configuración de escalas"}),(0,a.bF)(v,{name:"tab-3",label:"Configuración general de registros"}),(0,a.bF)(v,{name:"tab-4",label:"Constantes"}),(0,a.bF)(v,{name:"tab-5",label:"Particularidades"}),(0,a.bF)(v,{name:"tab-6",label:"Tipo de Cálculo"})]}),default:(0,a.k6)(function(){return[(0,a.bF)(_,{name:"tab-1"},{default:(0,a.k6)(function(){return[(0,a.bF)(A)]}),_:1}),(0,a.bF)(_,{name:"tab-2"},{default:(0,a.k6)(function(){return[(0,a.bF)(I)]}),_:1}),(0,a.bF)(_,{name:"tab-3"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",i,[(0,a.Lk)("div",c,[(0,a.bF)(D,{class:"q-if-outlined",modelValue:e.vmTipoRegistro,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.vmTipoRegistro=o}),options:e.datoTipoRegistro,"float-label":"Tipo Registro"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",s,[(0,a.Lk)("div",u,[1==e.vmTipoRegistro?((0,a.uX)(),(0,a.Wv)(F,{key:0})):(0,a.Q3)("v-if",!0),2==e.vmTipoRegistro?((0,a.uX)(),(0,a.Wv)(h,{key:1})):(0,a.Q3)("v-if",!0),4==e.vmTipoRegistro?((0,a.uX)(),(0,a.Wv)(k,{key:2})):(0,a.Q3)("v-if",!0)])])]}),_:1}),(0,a.bF)(_,{name:"tab-4"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",d,[(0,a.Lk)("div",f,[(0,a.bF)(D,{class:"q-if-outlined",modelValue:e.vmTipoRegistro,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.vmTipoRegistro=o}),options:e.datoTipoRegistro,"float-label":"Tipo Registro"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",p,[(0,a.Lk)("div",m,[(0,a.bF)(N,{codTipoRegistro:e.vmTipoRegistro},null,8,["codTipoRegistro"])])])]}),_:1}),(0,a.bF)(_,{name:"tab-5"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",b,[(0,a.Lk)("div",O,[(0,a.bF)(D,{class:"q-if-outlined",modelValue:e.vmTipoRegistro,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.vmTipoRegistro=o}),options:e.datoTipoRegistro,"float-label":"Tipo Registro"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",C,[(0,a.Lk)("div",g,[(0,a.bF)(R,{codTipoRegistro:e.vmTipoRegistro},null,8,["codTipoRegistro"])])])]}),_:1}),(0,a.bF)(_,{name:"tab-6"},{default:(0,a.k6)(function(){return[(0,a.bF)(T,{boolModificar:!0})]}),_:1})]}),_:1},512)):((0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",r,[(0,a.bF)(n,{modelValue:e.clave,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.clave=o}),onKeyup:(0,t.jR)(e.validacion,["enter"]),filled:"",type:"password"},null,8,["modelValue","onKeyup"])])]))]}),_:1})}var A=n(6123),_=n(99403),I=n(8445),D=n.n(I),F=n(58790),h={class:"row"},k={class:"col-xs-6 q-pr-sm-xs"},N={class:"row"},R={class:"col-xs-12 col-md-6 q-pr-sm-xs"},T={class:"q-pl-sm"},E={class:"col-xs-12 col-md-6 q-pr-sm-xs"},L={class:"row q-pa-sm"},G={class:"col-xs-12"},S={class:"col-xs-12"},P={class:"col-xs-12"},V={class:"col-xs-12"},U={class:"col-xs-12"},q={class:"row q-pa-sm"},w={class:"col-xs-12"},$={class:"col-xs-12"},y={class:"col-xs-12"},x={class:"col-xs-12"},M={class:"row q-pa-sm"};function Q(e,o){var n=(0,a.g2)("q-select"),t=(0,a.g2)("q-tooltip"),l=(0,a.g2)("q-btn"),r=(0,a.g2)("q-card"),i=(0,a.g2)("q-td"),c=(0,a.g2)("q-icon"),s=(0,a.g2)("q-tr"),u=(0,a.g2)("q-table"),d=(0,a.g2)("sie-vacio"),f=(0,a.g2)("q-input"),p=(0,a.g2)("sie-select"),m=(0,a.g2)("q-field"),b=(0,a.g2)("sie-modal"),O=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(O,{class:"particularidades bg-white"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",h,[(0,a.Lk)("div",k,[o[15]||(o[15]=(0,a.Lk)("span",{class:"text-bold q-body-1"},"Particularidades",-1)),0==e.codTipoRegistro?((0,a.uX)(),(0,a.Wv)(n,{key:0,class:"q-if-outlined",modelValue:e.partVmTipoRegistro,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.partVmTipoRegistro=o}),options:e.datoTipoRegistro,"float-label":"Tipo Registro",onInput:e.loadParticularidades},null,8,["modelValue","options","onInput"])):(0,a.Q3)("v-if",!0)])]),(0,a.Lk)("div",N,[(0,a.Lk)("div",R,[(0,a.bF)(r,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[o[18]||(o[18]=(0,a.Lk)("div",{class:"col"},null,-1)),(0,a.Lk)("div",null,[(0,a.bF)(l,{onClick:e.addParticularidad,round:"",color:"secondary",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[16]||(o[16]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])]),(0,a.Lk)("div",T,[(0,a.bF)(l,{onClick:e.verExpresion,round:"",color:"secondary",icon:"remove_red_eye"},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[17]||(o[17]=[(0,a.eW)("Ver Expresión",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,a.bF)(u,{"table-style":e.isLess?"height:60vh":"height: 63vh","row-key":"__index",color:"secondary",data:e.particData,columns:e.particCol,pagination:e.particPag,"onUpdate:pagination":o[1]||(o[1]=function(o){return e.particPag=o}),filter:e.particFiltro,loading:e.particLoad},{body:(0,a.k6)(function(n){return[(0,a.bF)(s,{class:(0,F.C4)(["cursor-pointer",n.row.ID===e.particSeleccionado?"bg-grey-2":""]),props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{key:"ANO",props:n,onClick:function(o){return e.obtParticularidadDetalle(n.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.ANO),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(i,{key:"ID_CONFIG",props:n,onClick:function(o){return e.obtParticularidadDetalle(n.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.ID_CONFIG),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(i,{key:"DESCRIPCION",props:n,onClick:function(o){return e.obtParticularidadDetalle(n.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.DESCRIPCION),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(i,{key:"ID",props:n,onClick:function(o){return e.obtParticularidadDetalle(n.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.ID),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(i,{key:"LEYENDA",props:n,onClick:function(o){return e.obtParticularidadDetalle(n.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.LEYENDA),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(i,{key:"PRIORIDAD",props:n,onClick:function(o){return e.obtParticularidadDetalle(n.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.PRIORIDAD),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(i,{key:"TIPO_REGISTRO_DESC",props:n,onClick:function(o){return e.obtParticularidadDetalle(n.row.ID)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.TIPO_REGISTRO_DESC),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(i,{key:"ACCION",props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.addParticularidad(n.row.ID,n.row)},name:"edit",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[19]||(o[19]=[(0,a.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,a.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.deleteParticularidad(n.row.ID)},name:"delete",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[20]||(o[20]=[(0,a.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props","class"])]}),_:1},8,["table-style","data","columns","pagination","filter","loading"])]),(0,a.Lk)("div",E,[e.particSeleccionado?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(r,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[o[22]||(o[22]=(0,a.Lk)("div",{class:"col"},null,-1)),(0,a.Lk)("div",null,[(0,a.bF)(l,{onClick:e.addParticularidadDetalle,round:"",color:"secondary",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[21]||(o[21]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,a.bF)(u,{"table-style":e.isLess?"height:60vh":"height: 63vh","row-key":"__index",color:"secondary",data:e.particDetData,columns:e.particDetCol,pagination:e.particDetPag,"onUpdate:pagination":o[2]||(o[2]=function(o){return e.particDetPag=o}),filter:e.particDetFiltro,loading:e.particDetLoad},{body:(0,a.k6)(function(n){return[(0,a.bF)(s,{props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{key:"ID",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.ID),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"CAMPO",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.CAMPO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"OPERADOR",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.OPERADOR),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"VALOR",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.VALOR),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ACCION",props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.addParticularidadDetalle(n.row.ID,n.row)},name:"edit",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[23]||(o[23]=[(0,a.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,a.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.deleteParticularidadDetalle(n.row.ID,n.row.CAMPO)},name:"delete",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[24]||(o[24]=[(0,a.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","data","columns","pagination","filter","loading"])],64)):((0,a.uX)(),(0,a.Wv)(d,{key:0,subtitle:"mensajes.m0027"}))])]),(0,a.bF)(b,{class:"modal-particularidades",modelValue:e.particOpen.modal,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.particOpen.modal=o}),header:!0,footer:!0,title:e.particOpen.title,ok:"Grabar",onSubmit:e.saveParticularidad},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",L,[(0,a.Lk)("div",G,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.particForm.ANO,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.particForm.ANO=o}),"float-label":e.$t("ano"),disable:""},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",S,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:e.tipoRegistro,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.tipoRegistro=o}),options:e.datoTipoRegistro,"float-label":"Tipo Registro",onInput:e.seleccionarTipoRegistro,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",P,[(0,a.bF)(m,{error:e.v$.particForm.ID_CONFIG.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(p,{type:"outlined",modelValue:e.v$.particForm.ID_CONFIG.$model,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.v$.particForm.ID_CONFIG.$model=o}),options:e.dataconfigs,placeholder:"Id. Config",filter:"",val:"ID_CONFIG",label:"LEYENDA"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",V,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.particForm.LEYENDA,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.particForm.LEYENDA=o}),"float-label":"Leyenda"},null,8,["modelValue"])]),(0,a.Lk)("div",U,[(0,a.bF)(f,{class:"q-if-outlined",type:"number",modelValue:e.particForm.PRIORIDAD,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.particForm.PRIORIDAD=o}),"float-label":"Prioridad"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","title","onSubmit"]),(0,a.bF)(b,{class:"modal-particularidades-detalle",modelValue:e.particDetOpen.modal,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.particDetOpen.modal=o}),header:!0,footer:!0,title:e.particDetOpen.title,ok:"Grabar",onSubmit:e.saveParticularidadDetalle},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",q,[(0,a.Lk)("div",w,[(0,a.bF)(p,{type:"outlined",modelValue:e.particDetForm.ID,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.particDetForm.ID=o}),label:"LEYENDA",val:"ID",options:e.particData,placeholder:"Id",disable:""},null,8,["modelValue","options"])]),(0,a.Lk)("div",$,[(0,a.bF)(m,{error:e.v$.particDetForm.CAMPO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{class:"q-if-outlined",modelValue:e.v$.particDetForm.CAMPO.$model,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.v$.particDetForm.CAMPO.$model=o}),options:e.campos,"float-label":"Campo",disable:e.particDetOpen.disable},null,8,["modelValue","options","disable"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",y,[(0,a.bF)(m,{error:e.v$.particDetForm.OPERADOR.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{class:"q-if-outlined",modelValue:e.v$.particDetForm.OPERADOR.$model,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.v$.particDetForm.OPERADOR.$model=o}),options:e.operadores,"float-label":"Operador"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",x,[(0,a.bF)(m,{error:e.v$.particDetForm.VALOR.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.v$.particDetForm.VALOR.$model,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.v$.particDetForm.VALOR.$model=o}),"float-label":"Valor"},null,8,["modelValue"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","title","onSubmit"]),(0,a.bF)(b,{class:"modal-particularidades-condicion",modelValue:e.condicionOpen.modal,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.condicionOpen.modal=o}),header:!0,footer:!1,title:"Expresión"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",M,[(0,a.Lk)("code",null,(0,F.v_)(e.condicionOpen.expresion),1)])]}),_:1},8,["modelValue"])]}),_:1})}var W=n(57008),j=n.n(W),J=(n(71225),n(77507),n(10239),n(50310),n(5962),n(11777),n(83190),n(83972)),Y=n(80340),H=n(93616),B=n(30640),X=n(81288),K=n(6583),z=n(57668),Z=n(982),ee=n(33001),oe=n(99637),ne=n(69027),ae=n(80660),te={defaultParticForm:function(){return{ID_CONFIG:null,ANO:(0,z["default"])().ano,LEYENDA:null,PRIORIDAD:0,TIPO_REGISTRO:1}},defaultConfGenForm:function(){return{ID_CONFIG:this.configSeleccionado,ANO:(0,z["default"])().ano,INSTRUCOD:null,GRADOCOD:"T",TIPO_CALCULO:1,ORDENAR_GRUPO:0,ANUAL_REPLICA:0}},defaultParticDetForm:function(){return{ID:null,CAMPO:null,OPERADOR:null,VALOR:null}},obtConfigClaseContenido:function(){return ae.$http.get("api/HyoClaseContenidoConfig/obtConfigClaseContenido").then(function(e){return e})},obtParticularidad:function(e,o){return ae.$http.get("api/HyoParticularidades/obtParticularidades",{params:{ANO:e,TIPO_REGISTRO:o}}).then(function(e){return e})},updateParticularidad:function(e){return ae.$http.put("api/HyoParticularidades/updateParticularidad",e)},grabarParticularidad:function(e){return ae.$http.post("api/HyoParticularidades/grabarParticularidad",e)},deleteParticularidad:function(e){return ae.$http.delete("api/HyoParticularidades/deleteParticularidad",{params:{ID:e}}).then(function(e){return e})},obtParticularidadesDetalle:function(e){return ae.$http.get("api/HyoParticularidades/obtParticularidadesDetalle",{params:{ID:e}}).then(function(e){return e})},obtParticularidadesDetalleTodo:function(){return ae.$http.get("api/HyoParticularidades/obtParticularidadesDetalleTodo").then(function(e){return e})},grabarParticularidadDetalle:function(e){return ae.$http.post("api/HyoParticularidades/grabarParticularidadDetalle",e)},deleteParticularidadDetalle:function(e,o){return ae.$http.delete("api/HyoParticularidades/deleteParticularidadDetalle",{params:{ID:e,CAMPO:o}})},actualizarConfigConstantes:function(e,o){return ae.$http.post("api/ConfigConstantesRegisController/updateConfigConstantesRegis",{params:e,id:o})}},le=n(82640),re={setup:function(){var e=(0,J.fG)();return{v$:e}},components:{QTable:A.kH,QTh:A.EJ,QTr:A.qh,QTd:A.Ef,QTableColumns:A.$s,QPopupEdit:A.GT,QSelect:A.Si,sieSelect:H.A,sieVacio:Y.A,sieModal:B.A,QPage:A.Tu,QCard:A.C$,QBtn:A.Il,QTooltip:A.nC,QIcon:A.bP,QInput:A.ie,QField:A.Om},props:{codTipoRegistro:{type:Number,required:!1,default:0}},data:function(){return{sie:(0,z["default"])(),tipoRegistro:"",configDataTmp:[],particData:[],particCol:[{name:"ANO",label:this.$t("ano"),field:"ANO",align:"center",sortable:!0},{name:"ID_CONFIG",label:"Id. Config.",field:"ID_CONFIG",align:"center",sortable:!0},{name:"DESCRIPCION",label:this.$t("matricula.descripcion"),field:"DESCRIPCION",align:"left",sortable:!1},{name:"ID",label:"Id",field:"ID",align:"center",sortable:!0},{name:"LEYENDA",label:"Leyenda",field:"LEYENDA",align:"left",sortable:!1},{name:"PRIORIDAD",label:"Prioridad",field:"PRIORIDAD",align:"center",sortable:!0},{name:"TIPO_REGISTRO_DESC",label:"Tipo de Registro",field:"TIPO_REGISTRO_DESC",align:"center",sortable:!0},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 120px"}],particPag:{page:1,rowsPerPage:200},particFiltro:"",particLoad:!1,particSeleccionado:null,particForm:te.defaultParticForm(),particOpen:{modal:!1,title:"Crear particularidad"},particDetData:[],particDetCol:[{name:"ID",label:"Id",field:"ID",align:"center",sortable:!0},{name:"CAMPO",label:"Campo",field:"CAMPO",align:"center",sortable:!1},{name:"OPERADOR",label:"Operador",field:"OPERADOR",align:"center",sortable:!1},{name:"VALOR",label:"Valor",field:"VALOR",align:"center",sortable:!0},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 100px"}],particDetPag:{page:1,rowsPerPage:200},particDetFiltro:"",particDetLoad:!1,particDetForm:te.defaultParticDetForm(),particDetOpen:{modal:!1,title:"Crear detalle",disable:!1},partVmTipoRegistro:1,campos:[],camposNotas:[{label:"INSTRUCOD",value:"INSTRUCOD"},{label:"GRADOCOD",value:"GRADOCOD"},{label:"CURSOCOD",value:"CURSOCOD"},{label:"BIMECOD",value:"BIMECOD"},{label:"GRUPOCOD",value:"GRUPOCOD"},{label:"CURSONAT",value:"CURSONAT"},{label:"ID_AMBITO",value:"ID_AMBITO"},{label:"ID_CLASE",value:"ID_CLASE"},{label:"ID_PROGRAMA",value:"ID_PROGRAMA"},{label:"TIPO_EVA",value:"TIPO_EVA"},{label:"INDICE_NOTA",value:"INDICE_NOTA"}],camposConducta:[{label:"INSTRUCOD",value:"INSTRUCOD"},{label:"GRADOCOD",value:"GRADOCOD"},{label:"ID_CONDUCTA_SALON",value:"ID_CONDUCTA_SALON"},{label:"BIMECOD",value:"BIMECOD"},{label:"ID_PROGRAMA",value:"ID_PROGRAMA"},{label:"TIPO_EVA",value:"TIPO_EVA"},{label:"INDICE_NOTA",value:"INDICE_NOTA"}],camposTaller:[{label:"ANO",value:"ANO"},{label:"DURACOD",value:"DURACOD"},{label:"ID_CLASE_TALLER",value:"ID_CLASE_TALLER"},{label:"ID_PROGRAMA",value:"ID_PROGRAMA"},{label:"TIPO_EVA",value:"TIPO_EVA"},{label:"INDICE_NOTA",value:"INDICE_NOTA"}],operadores:[{label:"<",value:"<"},{label:">",value:">"},{label:"===",value:"==="},{label:"!==",value:"!=="},{label:"<=",value:"<="},{label:">=",value:">="}],condicionOpen:{modal:!1,expresion:""},datoTipoRegistro:[{label:"Notas",value:1},{label:"Conducta",value:2},{label:"Talleres",value:4}]}},watch:{codTipoRegistro:function(e){e&&(this.partVmTipoRegistro=this.codTipoRegistro,this.loadParticularidades())}},computed:{dataconfigs:function(){var e=this,o=this.configDataTmp.filter(function(o){return e.tipoRegistro===o.TIPO_REGISTRO});return o},isLess:function(){return(0,X.isLess)()}},methods:{seleccionarTipoRegistro:function(e){this.tipoRegistro=e,this.particForm.ID_CONFIG=""},addParticularidad:function(e,o){var n=j()({},o);this.v$.particForm.$reset(),this.particOpen.modal=!0,"number"===typeof e?(this.particSeleccionado=e,this.particOpen.title="Editar particularidad",this.particForm=n,this.tipoRegistro=n.TIPO_REGISTRO):(this.particSeleccionado=null,this.tipoRegistro=null,this.particOpen.title="Crear particularidad",this.particForm=te.defaultParticForm())},saveParticularidad:function(){var e=this;if(this.v$.particForm.$touch(),!this.v$.particForm.$error){var o=this.particForm;this.particSeleccionado?(o.TIPO_REGISTRO=this.tipoRegistro,o["ID"]=this.particSeleccionado,te.updateParticularidad(o).then(function(){(0,Z["default"])("Se actualizó correctamente","success"),e.particOpen.modal=!1,e.loadParticularidades()}).catch(function(){(0,Z["default"])("No se pudo grabar","warning")})):(o.TIPO_REGISTRO=this.tipoRegistro,te.grabarParticularidad(o).then(function(){(0,Z["default"])("Grabado correctamente","success"),e.particOpen.modal=!1,e.loadParticularidades()}).catch(function(){(0,Z["default"])("No se pudo grabar","warning")}))}},deleteParticularidad:function(e){var o=this;(0,ne.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){return te.deleteParticularidad(e).then(function(e){return e}).catch(function(){return!1})}).then(function(n){return n&&(0,Z["default"])("Eliminado correctamente","success"),o.loadParticularidades(),te.obtParticularidadesDetalle(e)}).then(function(n){o.particDetData=(0,K["default"])(n),o.particSeleccionado=(0,K["default"])(n).length>0?e:null}).catch(function(){(0,Z["default"])("No se pudo eliminar","warning")})},obtParticularidadDetalle:function(e){var o=this;this.particSeleccionado=e,te.obtParticularidadesDetalle(e).then(function(e){o.particDetData=(0,K["default"])(e)})},addParticularidadDetalle:function(e,o){var n=this,a=j()({},o);this.v$.particDetForm.$reset(),this.particDetOpen.modal=!0;var t=[];if(t=this.particData.filter(function(e){return n.particSeleccionado===e.ID}),2===t[0].TIPO_REGISTRO?this.campos=this.camposConducta:4===t[0].TIPO_REGISTRO?this.campos=this.camposTaller:this.campos=this.camposNotas,"number"===typeof e)this.particDetForm=a,this.particDetOpen.title="Editar detalle",this.particDetOpen.disable=!0;else{this.particDetOpen.title="Crear detalle",this.particDetOpen.disable=!1;var l=te.defaultParticDetForm();l["ID"]=this.particSeleccionado,this.particDetForm=l}},saveParticularidadDetalle:function(){var e=this;if(this.v$.particDetForm.$touch(),!this.v$.particDetForm.$error){var o=this.particDetForm;te.grabarParticularidadDetalle(o).then(function(o){return(0,Z["default"])("Se guardo correctamente","success"),e.particDetOpen.modal=!1,te.obtParticularidadesDetalle(e.particSeleccionado)}).then(function(o){e.particDetData=(0,K["default"])(o)}).catch(function(e){(0,Z["default"])("No se pudo grabar","warning")})}},deleteParticularidadDetalle:function(e,o){var n=this;(0,ne.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){return te.deleteParticularidadDetalle(e,o).then(function(e){return e}).catch(function(){return!1})}).then(function(e){return e&&(0,Z["default"])("Eliminado correctamente","success"),te.obtParticularidadesDetalle(n.particSeleccionado)}).then(function(e){n.particDetData=(0,K["default"])(e)}).catch(function(){(0,Z["default"])("No se pudo eliminar","warning")})},verExpresion:function(e){var o=this;if(this.condicionOpen.modal=!0,"number"===typeof e)te.obtParticularidadesDetalle(e).then(function(e){var n=[];(0,oe["default"])((0,K["default"])(e),function(e){var o=isNaN(e.VALOR)?"'"+e.VALOR+"'":e.VALOR;n.push("'"+e.CAMPO+"' "+e.OPERADOR+" "+o)}),o.condicionOpen.expresion=n.join(" && ")});else{var n=D()(this.particData);te.obtParticularidadesDetalleTodo().then(function(e){var a=(0,K["default"])(e),t="";(0,oe["default"])(n,function(e,o){var n=[],l=[];t+=0===o?"if":"else if",l=(0,ee.filterArray)(e.ID,{field:"ID",list:a}),(0,oe["default"])(l,function(e,o){var a=isNaN(e.VALOR)?"'"+e.VALOR+"'":e.VALOR;n.push("'"+e.CAMPO+"' "+e.OPERADOR+" "+a)}),t+="("+n.join(" && ")+"){\n   //config: "+e.ID_CONFIG+" => "+e.DESCRIPCION+"...\n}\n"}),o.condicionOpen.expresion=t})}},loadParticularidades:function(){var e=this;te.obtParticularidad((0,z["default"])().ano,this.partVmTipoRegistro).then(function(o){e.particData=(0,K["default"])(o)})}},validations:{particForm:{ID_CONFIG:{required:le.mw},ANO:{required:le.mw}},particDetForm:{ID:{required:le.mw},CAMPO:{required:le.mw},OPERADOR:{required:le.mw},VALOR:{required:le.mw}}},created:function(){var e=this;this.codTipoRegistro&&(this.partVmTipoRegistro=this.codTipoRegistro),te.obtParticularidad((0,z["default"])().ano,this.partVmTipoRegistro).then(function(o){return e.particData=(0,K["default"])(o),te.obtConfigClaseContenido()}).then(function(o){e.configDataTmp=(0,K["default"])(o)})}},ie=n(12807);const ce=(0,ie.A)(re,[["render",Q]]);var se=ce,ue=n(86932),de={class:"row"},fe={class:"col-12"},pe={class:"q-pl-sm"},me={class:"row q-pa-sm"},be={class:"col-xs-12"},Oe={class:"col-xs-12"},Ce={class:"col-xs-6"},ge={class:"col-xs-6"},ve={class:"col-xs-12"},Ae={class:"col-xs-12"},_e={class:"col-xs-12"};function Ie(e,o){var n=(0,a.g2)("q-tooltip"),t=(0,a.g2)("q-btn"),l=(0,a.g2)("q-card"),r=(0,a.g2)("q-checkbox"),i=(0,a.g2)("q-td"),c=(0,a.g2)("q-icon"),s=(0,a.g2)("q-tr"),u=(0,a.g2)("q-table"),d=(0,a.g2)("q-input"),f=(0,a.g2)("sie-select"),p=(0,a.g2)("q-field"),m=(0,a.g2)("q-select"),b=(0,a.g2)("q-toggle"),O=(0,a.g2)("sie-modal"),C=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(C,{class:"bg-white configGeneralNotas"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",de,[(0,a.Lk)("div",fe,[(0,a.bF)(l,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[o[12]||(o[12]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("span",{class:"text-bold q-body-1"},"Configuración general de notas")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(t,{onClick:e.addConfigGeneralNotas,round:"",color:"secondary",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[10]||(o[10]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])]),(0,a.Lk)("div",pe,[(0,a.bF)(t,{onClick:e.deleteConfigGeneralNotas,round:"",color:"secondary",icon:"delete"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[11]||(o[11]=[(0,a.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,a.bF)(u,{"table-style":e.isLess?"height:70vh":"height: 75vh",selection:e.confGenTipoSeleccion,"row-key":"__index",color:"secondary",data:e.confGenData,columns:e.confGenCol,pagination:e.confGenPag,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.confGenPag=o}),selected:e.confGenSeleccionado,"onUpdate:selected":o[1]||(o[1]=function(o){return e.confGenSeleccionado=o}),filter:e.confGenFiltro,loading:e.confGenLoad,"hide-bottom":""},{body:(0,a.k6)(function(t){return[(0,a.bF)(s,{class:"cursor-pointer",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(i,null,{default:(0,a.k6)(function(){return[(0,a.bF)(r,{modelValue:t.selected,"onUpdate:modelValue":function(e){return t.selected=e},color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,a.bF)(i,{key:"ID_CONFIG",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ID_CONFIG),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"LEYENDA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.LEYENDA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ANO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ANO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"INSTRUCOD",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.INSTRUCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"GRADOCOD",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.GRADOCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"TIPO_CALCULO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.TIPO_CALCULO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ORDENAR_GRUPO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ORDENAR_GRUPO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ANUAL_REPLICA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ANUAL_REPLICA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"EDICION_PESOS_PROFE",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.EDICION_PESOS_PROFE),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"LIMITE_REPLICA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.LIMITE_REPLICA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ACCION",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.addConfigGeneralNotas(t.row.ID_CONFIG,t.row)},name:"edit",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[13]||(o[13]=[(0,a.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","selection","data","columns","pagination","selected","filter","loading"])])]),(0,a.bF)(O,{class:"modal-config-general-notas",modelValue:e.confGenOpen.modal,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.confGenOpen.modal=o}),header:!0,footer:!0,title:e.confGenOpen.title,ok:"Grabar",onSubmit:e.saveConfigGeneralNotas},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",me,[(0,a.Lk)("div",be,[(0,a.bF)(d,{class:"q-if-outlined",modelValue:e.confGenForm.ANO,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.confGenForm.ANO=o}),"float-label":e.$t("ano"),disable:""},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",Oe,[(0,a.bF)(p,{error:e.v$.confGenForm.ID_CONFIG.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.ID_CONFIG.$model,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.v$.confGenForm.ID_CONFIG.$model=o}),options:e.options,label:"LEYENDA",val:"ID_CONFIG",placeholder:"Id. Config"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",Ce,[(0,a.bF)(p,{error:e.v$.confGenForm.INSTRUCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.INSTRUCOD.$model,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.v$.confGenForm.INSTRUCOD.$model=o}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",disable:e.confGenOpen.disable},null,8,["modelValue","options","disable"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",ge,[(0,a.bF)(p,{error:e.v$.confGenForm.GRADOCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.GRADOCOD.$model,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.v$.confGenForm.GRADOCOD.$model=o}),options:e.grados,label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado",disable:e.confGenOpen.disable},null,8,["modelValue","options","disable"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",ve,[(0,a.bF)(m,{class:"q-if-outlined",modelValue:e.confGenForm.TIPO_CALCULO,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.confGenForm.TIPO_CALCULO=o}),options:e.tipoCalculo,"float-label":"Tipo cálculo"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ae,[(0,a.bF)(m,{class:"q-if-outlined",modelValue:e.confGenForm.ORDENAR_GRUPO,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.confGenForm.ORDENAR_GRUPO=o}),options:e.ordenarGrupo,"float-label":"Ordenar grupo"},null,8,["modelValue","options"])]),(0,a.Lk)("div",_e,[(0,a.bF)(b,{class:"q-if-outlined",modelValue:e.confGenForm.ANUAL_REPLICA,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.confGenForm.ANUAL_REPLICA=o}),color:"secondary",label:"Anual replica","true-value":1,"false-value":0},null,8,["modelValue"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var De=n(13813),Fe=n(95514),he=n(87911),ke=n(30902),Ne={setup:function(){var e=(0,J.fG)();return{v$:e}},components:{QTable:A.kH,QTh:A.EJ,QTr:A.qh,QTd:A.Ef,QTableColumns:A.$s,QCheckbox:A.vZ,QSelect:A.Si,QToggle:A.c5,sieVacio:Y.A,sieSelect:H.A,sieModal:B.A,QPage:A.Tu,QCard:A.C$,QBtn:A.Il,QTooltip:A.nC,QIcon:A.bP,QInput:A.ie,QField:A.Om},data:function(){return{sie:(0,z["default"])(),options:[],confGenNotas:[],confGenData:[],confGenCol:[{name:"ID_CONFIG",label:"Id config.",field:"ID_CONFIG",align:"center",sortable:!0},{name:"LEYENDA",label:"Leyenda",field:"LEYENDA",align:"left",sortable:!1},{name:"ANO",label:this.$t("ano"),field:"ANO",align:"center",sortable:!1},{name:"INSTRUCOD",label:this.$t("ngs.nivel"),field:"INSTRUCOD",align:"center",sortable:!0},{name:"GRADOCOD",label:this.$t("ngs.grado"),field:"GRADOCOD",align:"center",sortable:!0},{name:"TIPO_CALCULO",label:"Tipo calculo",field:"TIPO_CALCULO",align:"center",sortable:!1},{name:"ORDENAR_GRUPO",label:"Ordenar grupo",field:"ORDENAR_GRUPO",align:"center",sortable:!1},{name:"ANUAL_REPLICA",label:"Anual replica",field:"ANUAL_REPLICA",align:"center",sortable:!1},{name:"EDICION_PESOS_PROFE",label:"Editar pesos profesor",field:"EDICION_PESOS_PROFE",align:"center",sortable:!1},{name:"LIMITE_REPLICA",label:"Límite máximo de replica",field:"LIMITE_REPLICA",align:"center",sortable:!1},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 100px"}],confGenPag:{page:1,rowsPerPage:200},confGenFiltro:"",confGenLoad:!1,confGenTipoSeleccion:"multiple",confGenSeleccionado:[],confGenForm:Fe.A.defaultConfGenForm(),confGenOpen:{modal:!1,title:"Crear configuración general notas",disable:!1},niveles:[],gradosTemp:[],anualReplica:[{label:"No",value:0},{label:"Si",value:1}],tipoCalculo:[{label:"Horizontal(Por capacidades)",value:2},{label:"Vertical",value:1}],ordenarGrupo:[{label:"Por sección",value:0},{label:"Por grado",value:1}]}},computed:{grados:function(){var e=this.gradosTemp;e=(0,ee.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:e});var o=(0,ee.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:this.confGenData});return 0===o.length&&e.unshift({GRADOCOD:"T",GRADODES:"Todos",INSTRUCOD:"T"}),e},isLess:function(){return(0,X.isLess)()}},methods:{obtConfigGeneralNotas:function(){var e=this;this.confGenLoad=!0,Fe.A.listConfigGeneralNotas().then(function(o){return e.confGenNotas=(0,K["default"])(o),Fe.A.objConfigGeneralNotas()}).then(function(o){e.confGenData=(0,K["default"])(o),e.confGenLoad=!1}).catch(function(){})},addConfigGeneralNotas:function(e,o){var n=j()({},o);this.v$.confGenForm.$reset(),this.confGenOpen.modal=!0,"number"===typeof e?(this.confGenOpen.title="Editar configuración general notas",this.confGenOpen.disable=!0,this.confGenForm=n):(this.confGenOpen.title="Crear configuración general notas",this.confGenOpen.disable=!1,this.confGenForm=Fe.A.defaultConfGenForm())},saveConfigGeneralNotas:function(){var e=this;this.v$.confGenForm.$touch();var o=this.confGenForm;if(!this.v$.confGenForm.$error){var n=this.grados;n.shift();var a=(0,ee.filterArray)("T",{field:"GRADOCOD",list:this.confGenNotas});a=(0,ee.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:a}),Fe.A.updateOrInsertConfigGeneralNotas(o,a,n).then(function(o){(0,Z["default"])("Se guardo correctamente","success"),e.obtConfigGeneralNotas(),e.confGenOpen.modal=!1})}},deleteConfigGeneralNotas:function(){var e=this;this.confGenSeleccionado.length>0?(0,ne.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){var o=(0,De["default"])(e.confGenSeleccionado,function(e){return{ANO:e.ANO,INSTRUCOD:e.INSTRUCOD,GRADOCOD:e.GRADOCOD}});return Fe.A.deleteConfigGeneralNotas(o)}).then(function(o){(0,Z["default"])("Eliminado correctamente","success"),e.obtConfigGeneralNotas(),e.confGenSeleccionado=[]}):(0,Z["default"])("Debe seleccionar al menos un elemento","warning")}},validations:{confGenForm:{ANO:{required:le.mw},ID_CONFIG:{required:le.mw},INSTRUCOD:{required:le.mw},GRADOCOD:{required:le.mw},TIPO_CALCULO:{required:le.mw},ORDENAR_GRUPO:{required:le.mw},ANUAL_REPLICA:{required:le.mw}}},created:function(){var e=this;this.obtConfigGeneralNotas(),ke.A.obtConfigClaseContenido(1).then(function(o){e.options=(0,K["default"])(o)}),he.A.obtInstru().then(function(o){e.niveles=o.json}),he.A.obtGrados().then(function(o){e.gradosTemp=o.json})}};const Re=(0,ie.A)(Ne,[["render",Ie]]);var Te=Re,Ee={class:"row"},Le={class:"col-12"},Ge={class:"q-pl-sm"},Se={class:"row q-pa-sm"},Pe={class:"col-xs-12"},Ve={class:"col-xs-12"},Ue={class:"col-xs-6"},qe={class:"col-xs-6"},we={class:"col-xs-6"},$e={key:0,class:"col-xs-6"},ye={key:0,class:"col-xs-12"},xe={class:"col-xs-12"},Me={class:"col-xs-12"},Qe={class:"col-xs-12"};function We(e,o){var n=(0,a.g2)("q-tooltip"),t=(0,a.g2)("q-btn"),l=(0,a.g2)("q-card"),r=(0,a.g2)("q-checkbox"),i=(0,a.g2)("q-td"),c=(0,a.g2)("q-icon"),s=(0,a.g2)("q-tr"),u=(0,a.g2)("q-table"),d=(0,a.g2)("q-input"),f=(0,a.g2)("sie-select"),p=(0,a.g2)("q-field"),m=(0,a.g2)("q-select"),b=(0,a.g2)("q-toggle"),O=(0,a.g2)("sie-modal"),C=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(C,{class:"bg-white configGeneralConducta"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Ee,[(0,a.Lk)("div",Le,[(0,a.bF)(l,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[o[13]||(o[13]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("span",{class:"text-bold q-body-1"},"Configuración general de conducta")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(t,{onClick:e.addConfigGeneralConducta,round:"",color:"secondary",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[11]||(o[11]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])]),(0,a.Lk)("div",Ge,[(0,a.bF)(t,{onClick:e.deleteConfigGeneralConducta,round:"",color:"secondary",icon:"delete"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[12]||(o[12]=[(0,a.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,a.bF)(u,{"table-style":e.isLess?"height:70vh":"height: 75vh",selection:e.confGenTipoSeleccion,"row-key":"__index",color:"secondary",data:e.confGenData,columns:e.confGenCol,pagination:e.confGenPag,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.confGenPag=o}),selected:e.confGenSeleccionado,"onUpdate:selected":o[1]||(o[1]=function(o){return e.confGenSeleccionado=o}),filter:e.confGenFiltro,loading:e.confGenLoad,"hide-bottom":""},{body:(0,a.k6)(function(t){return[(0,a.bF)(s,{class:"cursor-pointer",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(i,null,{default:(0,a.k6)(function(){return[(0,a.bF)(r,{modelValue:t.selected,"onUpdate:modelValue":function(e){return t.selected=e},color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,a.bF)(i,{key:"ID_CONFIG",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ID_CONFIG),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"LEYENDA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.LEYENDA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ANO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ANO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"INSTRUCOD",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.INSTRUCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"GRADOCOD",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.GRADOCOD),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"TIPO_CALCULO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.TIPO_CALCULO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ORDENAR_GRUPO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ORDENAR_GRUPO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ANUAL_REPLICA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ANUAL_REPLICA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"EDICION_PESOS_PROFE",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.EDICION_PESOS_PROFE),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"LIMITE_REPLICA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.LIMITE_REPLICA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"OCULTAR_PROMEDIO_DESC",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.OCULTAR_PROMEDIO_DESC),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"INDICES_CALCULO_NOTAS",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.INDICES_CALCULO_NOTAS),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ACCION",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.addConfigGeneralConducta(t.row.ID_CONFIG,t.row)},name:"edit",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[14]||(o[14]=[(0,a.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","selection","data","columns","pagination","selected","filter","loading"])])]),(0,a.bF)(O,{class:"modal-config-general-notas",modelValue:e.confGenOpen.modal,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.confGenOpen.modal=o}),header:!0,footer:!0,title:e.confGenOpen.title,ok:"Grabar",onSubmit:e.saveConfigGeneralConducta},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Se,[(0,a.Lk)("div",Pe,[(0,a.bF)(d,{class:"q-if-outlined",modelValue:e.confGenForm.ANO,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.confGenForm.ANO=o}),"float-label":e.$t("ano"),disable:""},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",Ve,[(0,a.bF)(p,{error:e.v$.confGenForm.ID_CONFIG.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.ID_CONFIG.$model,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.v$.confGenForm.ID_CONFIG.$model=o}),options:e.options,label:"LEYENDA",val:"ID_CONFIG",placeholder:"Id. Config"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",Ue,[(0,a.bF)(p,{error:e.v$.confGenForm.INSTRUCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.INSTRUCOD.$model,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.v$.confGenForm.INSTRUCOD.$model=o}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",disable:e.confGenOpen.disable},null,8,["modelValue","options","disable"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",qe,[(0,a.bF)(p,{error:e.v$.confGenForm.GRADOCOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.GRADOCOD.$model,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.v$.confGenForm.GRADOCOD.$model=o}),options:e.grados,label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado",disable:e.confGenOpen.disable},null,8,["modelValue","options","disable"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",we,[(0,a.bF)(m,{class:"q-if-outlined",modelValue:e.confGenForm.NRO_COMENTARIOS,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.confGenForm.NRO_COMENTARIOS=o}),options:e.nroComentarios,"float-label":"Nro. Comentarios"},null,8,["modelValue","options"])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.confGenForm.NRO_COMENTARIOS,function(o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[e.confGenForm.NRO_COMENTARIOS?((0,a.uX)(),(0,a.CE)("div",$e,[(0,a.bF)(p,{error:e.v$.longitudes["LONGITUD"+o].$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(d,{class:"q-if-outlined",modelValue:e.longitudes["LONGITUD"+o],"onUpdate:modelValue":function(n){return e.longitudes["LONGITUD"+o]=n},"float-label":"Largo"+o},null,8,["modelValue","onUpdate:modelValue","float-label"])]}),_:2},1032,["error","error-label"])])):(0,a.Q3)("v-if",!0)],64)}),256)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.confGenForm.NRO_COMENTARIOS,function(o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[e.confGenForm.NRO_COMENTARIOS?((0,a.uX)(),(0,a.CE)("div",ye,[(0,a.bF)(p,{error:e.v$.comentarios["COMENTARIO"+o].$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(d,{class:"q-if-outlined",modelValue:e.comentarios["COMENTARIO"+o],"onUpdate:modelValue":function(n){return e.comentarios["COMENTARIO"+o]=n},"float-label":"Etiqueta para el comentario "+o},null,8,["modelValue","onUpdate:modelValue","float-label"])]}),_:2},1032,["error","error-label"])])):(0,a.Q3)("v-if",!0)],64)}),256)),(0,a.Lk)("div",xe,[(0,a.bF)(d,{class:"q-if-outlined",modelValue:e.confGenForm.INDICES_CALCULO_NOTAS,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.confGenForm.INDICES_CALCULO_NOTAS=o}),"float-label":"Indices para calculo nota - conducta (Ejem: 8-1, 9-2)"},null,8,["modelValue"])]),(0,a.Lk)("div",Me,[(0,a.bF)(b,{class:"q-if-outlined",modelValue:e.confGenForm.OCULTAR_PB,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.confGenForm.OCULTAR_PB=o}),color:"secondary",label:"Ocultar Promedio de Conducta","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,a.Lk)("div",Qe,[(0,a.bF)(b,{class:"q-if-outlined",modelValue:e.confGenForm.ANUAL_REPLICA,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.confGenForm.ANUAL_REPLICA=o}),color:"secondary",label:"Anual replica","true-value":1,"false-value":0},null,8,["modelValue"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}n(90095),n(44264),n(13715);var je=n(1862),Je={setup:function(){var e=(0,J.fG)();return{v$:e}},components:{QTable:A.kH,QTh:A.EJ,QTr:A.qh,QTd:A.Ef,QTableColumns:A.$s,QCheckbox:A.vZ,QSelect:A.Si,QToggle:A.c5,sieVacio:Y.A,sieSelect:H.A,sieModal:B.A,QPage:A.Tu,QCard:A.C$,QBtn:A.Il,QTooltip:A.nC,QIcon:A.bP,QInput:A.ie,QField:A.Om},data:function(){return{comentarios:{COMENTARIO1:null,COMENTARIO2:null,COMENTARIO3:null,COMENTARIO4:null},longitudes:{LONGITUD1:"350",LONGITUD2:"350",LONGITUD3:"350",LONGITUD4:"350"},sie:(0,z["default"])(),options:[],confGenNotas:[],confGenData:[],confGenCol:[{name:"ID_CONFIG",label:"Id config.",field:"ID_CONFIG",align:"center",sortable:!0},{name:"LEYENDA",label:"Leyenda",field:"LEYENDA",align:"left",sortable:!1},{name:"ANO",label:this.$t("ano"),field:"ANO",align:"center",sortable:!1},{name:"INSTRUCOD",label:this.$t("ngs.nivel"),field:"INSTRUCOD",align:"center",sortable:!0},{name:"GRADOCOD",label:this.$t("ngs.grado"),field:"GRADOCOD",align:"center",sortable:!0},{name:"ANUAL_REPLICA",label:"Anual replica",field:"ANUAL_REPLICA",align:"center",sortable:!1},{name:"EDICION_PESOS_PROFE",label:"Editar pesos profesor",field:"EDICION_PESOS_PROFE",align:"center",sortable:!1},{name:"LIMITE_REPLICA",label:"Límite máximo de replica",field:"LIMITE_REPLICA",align:"center",sortable:!1},{name:"OCULTAR_PROMEDIO_DESC",label:"Ocultar promedio conducta",field:"OCULTAR_PROMEDIO_DESC",align:"center",sortable:!1},{name:"INDICES_CALCULO_NOTAS",label:"Indices para calculo nota - conducta",field:"INDICES_CALCULO_NOTAS",align:"center",sortable:!1},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 100px"}],confGenPag:{page:1,rowsPerPage:200},confGenFiltro:"",confGenLoad:!1,confGenTipoSeleccion:"multiple",confGenSeleccionado:[],confGenForm:je.A.defaultConfGenForm(),confGenOpen:{modal:!1,title:"Crear configuración general conducta",disable:!1},niveles:[],gradosTemp:[],anualReplica:[{label:"No",value:0},{label:"Si",value:1}],tipoCalculo:[{label:"Horizontal(Por capacidades)",value:2},{label:"Vertical",value:1}],nroComentarios:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}],ordenarGrupo:[{label:"Por sección",value:0},{label:"Por grado",value:1}]}},computed:{grados:function(){var e=this.gradosTemp;e=(0,ee.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:e});var o=(0,ee.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:this.confGenData});return 0===o.length&&e.unshift({GRADOCOD:"T",GRADODES:"Todos",INSTRUCOD:"T"}),e},isLess:function(){return(0,X.isLess)()}},methods:{obtConfigGeneralConducta:function(){var e=this;this.confGenLoad=!0,je.A.listConfigGeneralConducta().then(function(o){return e.confGenNotas=(0,K["default"])(o),je.A.objConfigGeneralConducta()}).then(function(o){e.confGenData=(0,K["default"])(o),e.confGenLoad=!1}).catch(function(){})},addConfigGeneralConducta:function(e,o){var n=this,a=j()({},o);if(this.v$.confGenForm.$reset(),this.confGenOpen.modal=!0,"number"===typeof e){if(this.comentarios["COMENTARIO1"]=null,this.comentarios["COMENTARIO2"]=null,this.comentarios["COMENTARIO3"]=null,this.comentarios["COMENTARIO4"]=null,this.longitudes["LONGITUD1"]="350",this.longitudes["LONGITUD2"]="350",this.longitudes["LONGITUD3"]="350",this.longitudes["LONGITUD4"]="350",null!==a.TITULOS_COMENTARIOS){a.LARGO_COMENTARIOS||(a.LARGO_COMENTARIOS="");var t=a.TITULOS_COMENTARIOS.toString().split("[#]"),l=a.LARGO_COMENTARIOS.toString().split("[#]");this.longitudes["LONGITUD1"]=null,t.length>0&&t.forEach(function(e,o){var a=o+1;n.comentarios["COMENTARIO"+a]=e,n.longitudes["LONGITUD"+a]=l[o]})}this.confGenOpen.title="Editar configuración general conducta",this.confGenOpen.disable=!0,this.confGenForm=a}else this.comentarios["COMENTARIO1"]="Comentarios del Tutor",this.confGenOpen.title="Crear configuración general conducta",this.confGenOpen.disable=!1,this.confGenForm=je.A.defaultConfGenForm()},saveConfigGeneralConducta:function(){var e=this;this.v$.confGenForm.$touch(),this.v$.comentarios.$touch(),this.v$.longitudes.$touch();var o=this.confGenForm;if(!this.v$.confGenForm.$error){var n="",a=[],t=[];null===o.INDICES_CALCULO_NOTAS&&(o.INDICES_CALCULO_NOTAS="");var l=0;for(var r in this.comentarios)l++,this.comentarios[r]&&(a.push(this.comentarios[r]),t.push(this.longitudes["LONGITUD"+l]));n=a.join("[#]");var i=this.grados;o.TITULOS_COMENTARIOS=n,o.LARGO_COMENTARIOS=t.join("[#]");var c=(0,ee.filterArray)("T",{field:"GRADOCOD",list:this.confGenNotas});c=(0,ee.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:c}),o.obj=c,o.grados=i,je.A.updateOrInsertConfigGeneralConducta(o).then(function(o){(0,Z["default"])("Se guardo correctamente","success"),e.obtConfigGeneralConducta(),e.confGenOpen.modal=!1})}},deleteConfigGeneralConducta:function(){var e=this;this.confGenSeleccionado.length>0?(0,ne.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){var o=(0,De["default"])(e.confGenSeleccionado,function(e){return{ANO:e.ANO,INSTRUCOD:e.INSTRUCOD,GRADOCOD:e.GRADOCOD}});return je.A.deleteConfigGeneralConducta(o)}).then(function(o){(0,Z["default"])("Eliminado correctamente","success"),e.obtConfigGeneralConducta(),e.confGenSeleccionado=[]}):(0,Z["default"])("Debe seleccionar al menos un elemento","warning")}},validations:{confGenForm:{ANO:{required:le.mw},ID_CONFIG:{required:le.mw},INSTRUCOD:{required:le.mw},GRADOCOD:{required:le.mw},TIPO_CALCULO:{required:le.mw},ORDENAR_GRUPO:{required:le.mw},ANUAL_REPLICA:{required:le.mw},OCULTAR_PB:{required:le.mw}},comentarios:{COMENTARIO1:{required:le.mw},COMENTARIO2:{required:le.mw},COMENTARIO3:{required:le.mw},COMENTARIO4:{required:le.mw}},longitudes:{LONGITUD1:{required:le.mw},LONGITUD2:{required:le.mw},LONGITUD3:{required:le.mw},LONGITUD4:{required:le.mw}}},created:function(){var e=this;this.obtConfigGeneralConducta(),ke.A.obtConfigClaseContenido(2).then(function(o){e.options=(0,K["default"])(o)}),he.A.obtInstru().then(function(o){e.niveles=o.json}),he.A.obtGrados().then(function(o){e.gradosTemp=o.json})}};const Ye=(0,ie.A)(Je,[["render",We]]);var He=Ye,Be={class:"row"},Xe={class:"col-12"},Ke={class:"q-pl-sm"},ze={class:"row q-pa-sm"},Ze={class:"col-xs-12"},eo={class:"col-xs-12"},oo={class:"col-xs-12"};function no(e,o){var n=(0,a.g2)("q-tooltip"),t=(0,a.g2)("q-btn"),l=(0,a.g2)("q-card"),r=(0,a.g2)("q-checkbox"),i=(0,a.g2)("q-td"),c=(0,a.g2)("q-icon"),s=(0,a.g2)("q-tr"),u=(0,a.g2)("q-table"),d=(0,a.g2)("q-input"),f=(0,a.g2)("sie-select"),p=(0,a.g2)("q-field"),m=(0,a.g2)("sie-modal"),b=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(b,{class:"bg-white ConfigGeneralTaller"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Be,[(0,a.Lk)("div",Xe,[(0,a.bF)(l,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[o[8]||(o[8]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("span",{class:"text-bold q-body-1"},"Configuración general de talleres")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(t,{onClick:e.addConfigGeneralTaller,round:"",color:"secondary",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[6]||(o[6]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])]),(0,a.Lk)("div",Ke,[(0,a.bF)(t,{onClick:e.deleteConfigGeneralTaller,round:"",color:"secondary",icon:"delete"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[7]||(o[7]=[(0,a.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,a.bF)(u,{"table-style":e.isLess?"height:70vh":"height: 75vh",selection:e.confGenTipoSeleccion,"row-key":"__index",color:"secondary",data:e.confGenData,columns:e.confGenCol,pagination:e.confGenPag,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.confGenPag=o}),selected:e.confGenSeleccionado,"onUpdate:selected":o[1]||(o[1]=function(o){return e.confGenSeleccionado=o}),filter:e.confGenFiltro,loading:e.confGenLoad,"hide-bottom":""},{body:(0,a.k6)(function(t){return[(0,a.bF)(s,{class:"cursor-pointer",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(i,null,{default:(0,a.k6)(function(){return[(0,a.bF)(r,{modelValue:t.selected,"onUpdate:modelValue":function(e){return t.selected=e},color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,a.bF)(i,{key:"ID_CONFIG",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ID_CONFIG),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"LEYENDA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.LEYENDA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ANO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ANO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"DURACOD",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.DURACOD),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"TIPO_CALCULO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.TIPO_CALCULO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ORDENAR_GRUPO",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ORDENAR_GRUPO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ANUAL_REPLICA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ANUAL_REPLICA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"EDICION_PESOS_PROFE",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.EDICION_PESOS_PROFE),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"LIMITE_REPLICA",props:t},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.LIMITE_REPLICA),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ACCION",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.addConfigGeneralTaller(t.row.ID_CONFIG,t.row)},name:"edit",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[9]||(o[9]=[(0,a.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","selection","data","columns","pagination","selected","filter","loading"])])]),(0,a.bF)(m,{class:"modal-config-general-notas",modelValue:e.confGenOpen.modal,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.confGenOpen.modal=o}),header:!0,footer:!0,title:e.confGenOpen.title,ok:"Grabar",onSubmit:e.saveConfigGeneralTaller},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",ze,[(0,a.Lk)("div",Ze,[(0,a.bF)(d,{class:"q-if-outlined",modelValue:e.confGenForm.ANO,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.confGenForm.ANO=o}),"float-label":e.$t("ano"),disable:""},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",eo,[(0,a.bF)(p,{error:e.v$.confGenForm.ID_CONFIG.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.ID_CONFIG.$model,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.v$.confGenForm.ID_CONFIG.$model=o}),options:e.options,label:"LEYENDA",val:"ID_CONFIG",placeholder:"Id. Config"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",oo,[(0,a.bF)(p,{error:e.v$.confGenForm.DURACOD.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{type:"outlined",modelValue:e.v$.confGenForm.DURACOD.$model,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.v$.confGenForm.DURACOD.$model=o}),options:e.duracion,label:"DURADES",val:"DURACOD",placeholder:"Duración",disable:e.confGenOpen.disable},null,8,["modelValue","options","disable"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var ao=n(55733),to={setup:function(){var e=(0,J.fG)();return{v$:e}},components:{QTable:A.kH,QTh:A.EJ,QTr:A.qh,QTd:A.Ef,QTableColumns:A.$s,QCheckbox:A.vZ,QSelect:A.Si,QToggle:A.c5,sieVacio:Y.A,sieSelect:H.A,sieModal:B.A,QPage:A.Tu,QCard:A.C$,QBtn:A.Il,QTooltip:A.nC,QIcon:A.bP,QInput:A.ie,QField:A.Om},data:function(){return{comentarios:{COMENTARIO1:null},sie:(0,z["default"])(),options:[],confGenNotas:[],confGenData:[],confGenCol:[{name:"ID_CONFIG",label:"Id config.",field:"ID_CONFIG",align:"center",sortable:!0},{name:"LEYENDA",label:"Leyenda",field:"LEYENDA",align:"left",sortable:!1},{name:"ANO",label:this.$t("ano"),field:"ANO",align:"center",sortable:!1},{name:"DURACOD",label:"Duración",field:"DURACOD",align:"center",sortable:!0},{name:"ANUAL_REPLICA",label:"Anual replica",field:"ANUAL_REPLICA",align:"center",sortable:!1},{name:"EDICION_PESOS_PROFE",label:"Editar pesos profesor",field:"EDICION_PESOS_PROFE",align:"center",sortable:!1},{name:"LIMITE_REPLICA",label:"Límite máximo de replica",field:"LIMITE_REPLICA",align:"center",sortable:!1},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 100px"}],confGenPag:{page:1,rowsPerPage:200},confGenFiltro:"",confGenLoad:!1,confGenTipoSeleccion:"multiple",confGenSeleccionado:[],confGenForm:ao.A.defaultConfGenForm(),confGenOpen:{modal:!1,title:"Crear configuración general talleres",disable:!1},duracion:[],gradosTemp:[],anualReplica:[{label:"No",value:0}],tipoCalculo:[{label:"Horizontal(Por capacidades)",value:2},{label:"Vertical",value:1}],nroComentarios:[{label:"1",value:1}],ordenarGrupo:[{label:"Por Taller",value:0}]}},computed:{isLess:function(){return(0,X.isLess)()}},methods:{obtConfigGeneralTaller:function(){var e=this;this.confGenLoad=!0,ao.A.listConfigGeneralTaller().then(function(o){return e.confGenNotas=(0,K["default"])(o),ao.A.objConfigGeneralTaller()}).then(function(o){e.confGenData=(0,K["default"])(o),e.confGenLoad=!1}).catch(function(){})},addConfigGeneralTaller:function(e,o){var n=j()({},o);this.v$.confGenForm.$reset(),this.confGenOpen.modal=!0,"number"===typeof e?(this.comentarios["COMENTARIO1"]=null,this.confGenOpen.title="Editar configuración general taller",this.confGenOpen.disable=!0,this.confGenForm=n):(this.comentarios["COMENTARIO1"]="Comentarios del Profesor",this.confGenOpen.title="Crear configuración general Taller",this.confGenOpen.disable=!1,this.confGenForm=ao.A.defaultConfGenForm())},saveConfigGeneralTaller:function(){var e=this;this.v$.confGenForm.$touch(),this.v$.comentarios.$touch();var o=this.confGenForm;this.v$.confGenForm.$error||ao.A.updateOrInsertConfigGeneralTaller(o).then(function(o){(0,Z["default"])("Se guardo correctamente","success"),e.obtConfigGeneralTaller(),e.confGenOpen.modal=!1})},deleteConfigGeneralTaller:function(){var e=this;this.confGenSeleccionado.length>0?(0,ne.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){var o=(0,De["default"])(e.confGenSeleccionado,function(e){return{ANO:e.ANO,DURACOD:e.DURACOD}});return ao.A.deleteConfigGeneralTaller(o)}).then(function(o){(0,Z["default"])("Eliminado correctamente","success"),e.obtConfigGeneralTaller(),e.confGenSeleccionado=[]}):(0,Z["default"])("Debe seleccionar al menos un elemento","warning")}},validations:{confGenForm:{ANO:{required:le.mw},ID_CONFIG:{required:le.mw},DURACOD:{required:le.mw}},comentarios:{COMENTARIO1:{required:le.mw},COMENTARIO2:{required:le.mw},COMENTARIO3:{required:le.mw},COMENTARIO4:{required:le.mw}}},created:function(){var e=this;this.obtConfigGeneralTaller(),ke.A.obtConfigClaseContenido(4).then(function(o){e.options=(0,K["default"])(o)}),ao.A.obtDuracionNuevo().then(function(o){e.duracion=o.json})}};const lo=(0,ie.A)(to,[["render",no]]);var ro=lo,io={class:"row"},co={class:"col-xs-6 q-pr-sm-xs"},so={class:"row"},uo={class:"col-xs-12 q-pr-sm-xs"},fo={class:"col"},po={class:"q-mt-lg-sm"},mo={class:"row q-pa-sm"},bo={class:"col-xs-12"},Oo={class:"col-xs-12"},Co={class:"col-xs-12"},go={class:"col-xs-12"},vo={class:"col-xs-12"},Ao={class:"col-xs-12"};function _o(e,o){var n=(0,a.g2)("q-select"),t=(0,a.g2)("q-icon"),l=(0,a.g2)("q-card"),r=(0,a.g2)("q-search"),i=(0,a.g2)("q-td"),c=(0,a.g2)("q-toggle"),s=(0,a.g2)("q-tooltip"),u=(0,a.g2)("q-tr"),d=(0,a.g2)("q-table"),f=(0,a.g2)("q-input"),p=(0,a.g2)("sie-modal"),m=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(m,{class:"particularidades bg-white"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",io,[(0,a.Lk)("div",co,[o[11]||(o[11]=(0,a.Lk)("span",{class:"text-bold q-body-1"},"Configuración Constantes",-1)),0==e.codTipoRegistro?((0,a.uX)(),(0,a.Wv)(n,{key:0,class:"q-if-outlined",modelValue:e.partVmTipoRegistro,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.partVmTipoRegistro=o}),options:e.datoTipoRegistro,"float-label":"Tipo Registro",onInput:e.loadConfigConstantes},null,8,["modelValue","options","onInput"])):(0,a.Q3)("v-if",!0)])]),(0,a.Lk)("div",so,[(0,a.Lk)("div",uo,[(0,a.bF)(l,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",fo,[o[14]||(o[14]=(0,a.Lk)("span",{class:"text-bold q-body-1"},"Tener en cuenta:",-1)),(0,a.Lk)("div",po,[(0,a.bF)(t,{class:"text-info q-mr-sm",name:"info",size:"23px"}),o[12]||(o[12]=(0,a.Lk)("span",{class:"q-item-sublabel"},[(0,a.eW)("Solo se deshabilita cuando el valor por defecto es booleano. "),(0,a.Lk)("br")],-1)),o[13]||(o[13]=(0,a.Lk)("span",{class:"q-item-sublabel"},'Si se añade condiciones a parametros1 es necesario agregar resultado1 ("{ "parametros1": {"instrucod": "S"}, "resultado1": "["1"]", "parametros2": {"instrucod": "P"}, "resultado2": "["1", "2"]", "default": "[]"}")',-1))])])]}),_:1}),(0,a.bF)(d,{"row-key":"__index",color:"secondary",data:e.dataConfigConstantes,columns:e.particConstantesCol,filter:e.particFiltro,pagination:e.particPag,"onUpdate:pagination":o[2]||(o[2]=function(o){return e.particPag=o}),loading:e.particLoad},{"top-left":(0,a.k6)(function(n){return[(0,a.bF)(r,{class:"q-if-outlined","hide-underline":"",modelValue:e.particFiltro,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.particFiltro=o})},null,8,["modelValue"])]}),body:(0,a.k6)(function(n){return[(0,a.bF)(u,{class:(0,F.C4)(["cursor-pointer",n.row.ID===e.particConstSeleccionado?"bg-grey-2":""]),props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{key:"ID",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.ID),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"COD_CONSTANTE",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.COD_CONSTANTE),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"FL_HABILITADO",props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{modelValue:n.row.FL_HABILITADO,"onUpdate:modelValue":function(e){return n.row.FL_HABILITADO=e},disable:"boolean"!==typeof n.row.PORDEFECTO,"true-value":1,"false-value":0,color:"secondary",onInput:function(o){return e.grabarConfigConst(!1,n.row)}},null,8,["modelValue","onUpdate:modelValue","disable","onInput"])]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"FORMULARIO",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.FORMULARIO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"DESCRIPCION",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.DESCRIPCION),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"PORDEFECTO",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.PORDEFECTO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"JSON_PARAMETROS",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.JSON_PARAMETROS),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"JSON_ANIO",props:n},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(n.row.JSON_ANIO),1)]}),_:2},1032,["props"]),(0,a.bF)(i,{key:"ACCION",props:n},{default:(0,a.k6)(function(){return[(0,a.bF)(t,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.editarConfigConstante(n.row)},name:"edit",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(s,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[15]||(o[15]=[(0,a.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props","class"])]}),_:1},8,["data","columns","filter","pagination","loading"])])]),(0,a.bF)(p,{class:"modal-particularidades",modelValue:e.particOpen.modalCons,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.particOpen.modalCons=o}),header:!0,footer:!0,title:"Editar Configuración Constante",ok:"Grabar",onSubmit:o[10]||(o[10]=function(o){return e.grabarConfigConst(!0)})},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",mo,[(0,a.Lk)("div",bo,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.constantesForm.COD_CONSTANTE,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.constantesForm.COD_CONSTANTE=o}),"float-label":e.$t("codigo"),disable:""},null,8,["modelValue","float-label"])]),(0,a.Lk)("div",Oo,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.constantesForm.FORMULARIO,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.constantesForm.FORMULARIO=o}),"float-label":"Formulario",disable:""},null,8,["modelValue"])]),(0,a.Lk)("div",Co,[(0,a.bF)(c,{modelValue:e.constantesForm.FL_HABILITADO,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.constantesForm.FL_HABILITADO=o}),"true-value":1,"false-value":0,color:"secondary",label:"FL_HABILITADO *Solo cuando el valor por defecto es boleano"},null,8,["modelValue"])]),(0,a.Lk)("div",go,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.constantesForm.DESCRIPCION,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.constantesForm.DESCRIPCION=o}),"float-label":"Descripción"},null,8,["modelValue"])]),(0,a.Lk)("div",vo,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.constantesForm.JSON_PARAMETROS,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.constantesForm.JSON_PARAMETROS=o}),type:"textarea","float-label":"Parametros (JSON)","max-height":100,rows:5},null,8,["modelValue"])]),(0,a.Lk)("div",Ao,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.constantesForm.JSON_ANIO,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.constantesForm.JSON_ANIO=o}),type:"textarea","float-label":"Condición Año: * {'condicion': '>=', 'valor':'2023'}","max-height":100,rows:2},null,8,["modelValue"])])])]}),_:1},8,["modelValue"])]}),_:1})}var Io=n(76080),Do=n.n(Io),Fo=n(45254),ho=n.n(Fo),ko=(n(515),n(7346),{components:{QTable:A.kH,QTh:A.EJ,QTr:A.qh,QTd:A.Ef,QTableColumns:A.$s,QPopupEdit:A.GT,QSelect:A.Si,QToggle:A.c5,sieSelect:H.A,sieVacio:Y.A,sieModal:B.A,QPage:A.Tu,QCard:A.C$,QIcon:A.bP,QSearch:A.Ks,QTooltip:A.nC,QInput:A.ie},props:{codTipoRegistro:{type:Number,required:!1,default:0}},data:function(){return{sie:(0,z["default"])(),particPag:{page:1,rowsPerPage:200},datoTipoRegistro:[{label:"Notas",value:1},{label:"Conducta",value:2},{label:"Talleres",value:4}],objTipoRegistro:{1:"R_NOTAS",2:"R_CONDUCTA",4:"R_TALLERES"},partVmTipoRegistro:1,particConstSeleccionado:null,particConstantesCol:[{name:"ID",label:"Id",field:"ID",align:"center",sortable:!0},{name:"COD_CONSTANTE",label:"Código",field:"COD_CONSTANTE",align:"left",sortable:!1},{name:"FL_HABILITADO",label:"Habilitado",field:"FL_HABILITADO",align:"center",sortable:!1},{name:"FORMULARIO",label:"Formulario",field:"FORMULARIO",align:"left",sortable:!0},{name:"DESCRIPCION",label:"Descripcion",field:"DESCRIPCION",align:"left",sortable:!0},{name:"PORDEFECTO",label:"Valor por Defecto",field:"DESCRIPCION",align:"left",sortable:!0},{name:"JSON_PARAMETROS",label:"Parametros Json",field:"JSON_PARAMETROS",align:"left",sortable:!0},{name:"JSON_ANIO",label:"AÑO Json",field:"JSON_ANIO",align:"left",sortable:!0},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 100px"}],dataConfigConstantes:[],constantesForm:{},particOpen:{modalCons:!1},particLoad:!1,particFiltro:""}},watch:{codTipoRegistro:function(e){e&&(this.partVmTipoRegistro=this.codTipoRegistro,this.loadConfigConstantes())}},computed:{isLess:function(){return(0,X.isLess)()}},methods:{loadConfigConstantes:function(){var e=this;return ho()(Do()().m(function o(){return Do()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("/api/ConfigConstantesRegisController/getConfigConstantesRegis",{params:{tipoRegistro:e.objTipoRegistro[e.partVmTipoRegistro],objValidaciones:{ano:e.sie.ano,usucod:e.sie.usucod,esAdministrador:e.sie.esAdministrador}}});case 1:e.dataConfigConstantes=o.v;case 2:return o.a(2)}},o)}))()},editarConfigConstante:function(e){this.particOpen.modalCons=!0,this.constantesForm=j()({},e)},grabarConfigConst:function(e,o){var n,a=this,t={};if(e)try{JSON.parse(this.constantesForm.JSON_PARAMETROS);t["FL_HABILITADO"]=this.constantesForm.FL_HABILITADO,t["DESCRIPCION"]=this.constantesForm.DESCRIPCION,t["JSON_PARAMETROS"]=this.constantesForm.JSON_PARAMETROS,t["JSON_ANIO"]=this.constantesForm.JSON_ANIO,n=this.constantesForm.ID}catch(e){(0,Z["default"])("Json Incorrecto, verificar","error")}else t["FL_HABILITADO"]=o.FL_HABILITADO,n=o.ID;this.$http.post("api/ConfigConstantesRegisController/updateConfigConstantesRegis",{params:t,id:n}).then(function(e){e.message?((0,Z["default"])(a.$t("mensajes.m0001"),"success"),a.loadConfigConstantes(),a.particOpen.modalCons=!1):(0,Z["default"])(a.$t("mensajes.e0006"),"error")})}},created:function(){this.codTipoRegistro&&(this.partVmTipoRegistro=this.codTipoRegistro),this.loadConfigConstantes()}});const No=(0,ie.A)(ko,[["render",_o]]);var Ro=No,To={class:"row"},Eo={class:"col-xs-12 col-md-6 q-pr-sm-xs"},Lo={class:"col-xs-12 col-md-6 q-pl-sm-xs q-pt-xs-sm q-pt-sm-none"},Go={class:"q-pl-sm"},So={class:"row q-pa-sm"},Po={class:"col-xs-12"},Vo={class:"col-xs-12"},Uo={class:"col-xs-12"},qo={class:"row q-pa-sm"},wo={class:"col-xs-12"},$o={class:"col-xs-12"},yo={class:"col-xs-12"};function xo(e,o){var n=(0,a.g2)("q-tooltip"),t=(0,a.g2)("q-btn"),l=(0,a.g2)("q-card"),r=(0,a.g2)("q-td"),i=(0,a.g2)("q-icon"),c=(0,a.g2)("q-tr"),s=(0,a.g2)("q-table"),u=(0,a.g2)("sie-vacio"),d=(0,a.g2)("q-checkbox"),f=(0,a.g2)("q-input"),p=(0,a.g2)("q-popup-edit"),m=(0,a.g2)("q-field"),b=(0,a.g2)("sie-select"),O=(0,a.g2)("sie-modal"),C=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(C,{class:"escalas bg-white"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",To,[(0,a.Lk)("div",Eo,[(0,a.bF)(l,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[o[12]||(o[12]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("span",{class:"text-bold q-body-1"},"Escala de notas")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(t,{onClick:e.addEscalaNota,round:"",color:"secondary",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[11]||(o[11]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,a.bF)(s,{"table-style":e.isLess?"height:60vh":"height: 63vh","row-key":"__index",color:"secondary",data:e.notaData,columns:e.notaCol,pagination:e.notaPag,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.notaPag=o}),filter:e.notaFiltro,loading:e.notaLoad},{body:(0,a.k6)(function(t){return[(0,a.bF)(c,{class:(0,F.C4)(["cursor-pointer",t.row.ID_ESCALA_NOTA===e.notaSeleccionado?"bg-grey-2":""]),props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(r,{key:"ID_ESCALA_NOTA",props:t,onClick:function(o){return e.obtEscalaValor(t.row.ID_ESCALA_NOTA)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.ID_ESCALA_NOTA),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(r,{key:"DESCRIPCION",props:t,onClick:function(o){return e.obtEscalaValor(t.row.ID_ESCALA_NOTA)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(t.row.DESCRIPCION),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(r,{key:"TIPO",props:t,onClick:function(o){return e.obtEscalaValor(t.row.ID_ESCALA_NOTA)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(e.getTipo(t.row.TIPO)),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(r,{key:"CEROS_DELANTE",props:t,onClick:function(o){return e.obtEscalaValor(t.row.ID_ESCALA_NOTA)}},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(e.getSiNo(t.row.CEROS_DELANTE)),1)]}),_:2},1032,["props","onClick"]),(0,a.bF)(r,{key:"ACCION",props:t},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.addEscalaNota(t.row.ID_ESCALA_NOTA,t.row)},name:"edit",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[13]||(o[13]=[(0,a.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"]),(0,a.bF)(i,{class:"cursor-pointer q-mx-xs",onClick:function(o){return e.deleteEscalaNota(t.row.ID_ESCALA_NOTA)},name:"delete",color:"black",size:"17px"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[14]||(o[14]=[(0,a.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props","class"])]}),_:1},8,["table-style","data","columns","pagination","filter","loading"])]),(0,a.Lk)("div",Lo,[e.notaSeleccionado?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(l,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,a.k6)(function(){return[o[17]||(o[17]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("span",{class:"text-bold q-body-1"},"Escala de valor")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(t,{onClick:e.addEscalaValor,round:"",color:"secondary",icon:"plus"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[15]||(o[15]=[(0,a.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])]),(0,a.Lk)("div",Go,[(0,a.bF)(t,{onClick:e.deleteEscalaValor,round:"",color:"secondary",icon:"delete"},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,a.k6)(function(){return D()(o[16]||(o[16]=[(0,a.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])])]}),_:1}),(0,a.bF)(s,{"table-style":e.isLess?"height:60vh":"height: 63vh",selection:e.valorTipoSeleccion,"row-key":"__index",color:"secondary",data:e.valorData,columns:e.valorCol,selected:e.valorSeleccionado,"onUpdate:selected":o[1]||(o[1]=function(o){return e.valorSeleccionado=o}),pagination:e.valorPag,"onUpdate:pagination":o[2]||(o[2]=function(o){return e.valorPag=o}),filter:e.valorFiltro,loading:e.valorLoad},{body:(0,a.k6)(function(o){return[(0,a.bF)(c,{props:o},{default:(0,a.k6)(function(){return[(0,a.bF)(r,null,{default:(0,a.k6)(function(){return[(0,a.bF)(d,{modelValue:o.selected,"onUpdate:modelValue":function(e){return o.selected=e},color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,a.bF)(r,{key:"ID_ESCALA_NOTA",props:o},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(o.row.ID_ESCALA_NOTA),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"NOTA",props:o},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(o.row.NOTA),1)]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"PUNTAJE",props:o},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(o.row.PUNTAJE),1),(0,a.bF)(p,{modelValue:o.row.PUNTAJE,"onUpdate:modelValue":function(e){return o.row.PUNTAJE=e},onSave:function(n){return e.saveEscalaValor(o.row)}},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{class:"q-if-outlined",modelValue:o.row.PUNTAJE,"onUpdate:modelValue":function(e){return o.row.PUNTAJE=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"]),(0,a.bF)(r,{key:"NOTA_KEYPRESS",props:o},{default:(0,a.k6)(function(){return[(0,a.eW)((0,F.v_)(o.row.NOTA_KEYPRESS),1),(0,a.bF)(p,{modelValue:o.row.NOTA_KEYPRESS,"onUpdate:modelValue":function(e){return o.row.NOTA_KEYPRESS=e},onSave:function(n){return e.saveEscalaValor(o.row)}},{default:(0,a.k6)(function(){return[(0,a.bF)(m,{count:""},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{class:"q-if-outlined",modelValue:o.row.NOTA_KEYPRESS,"onUpdate:modelValue":function(e){return o.row.NOTA_KEYPRESS=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024)]}),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","selection","data","columns","selected","pagination","filter","loading"])],64)):((0,a.uX)(),(0,a.Wv)(u,{key:0,subtitle:"mensajes.m0027"}))])]),(0,a.bF)(O,{class:"modal-escala-nota",modelValue:e.notaForm.modal,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.notaForm.modal=o}),header:!0,footer:!0,title:e.notaForm.title,ok:"Grabar",onSubmit:e.saveEscalaNota},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",So,[(0,a.Lk)("div",Po,[(0,a.bF)(m,{error:e.v$.notaForm.descripcion.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.v$.notaForm.descripcion.$model,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.v$.notaForm.descripcion.$model=o}),"float-label":e.$t("matricula.descripcion")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",Vo,[(0,a.bF)(m,{error:e.v$.notaForm.tipo.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(b,{type:"outlined",modelValue:e.v$.notaForm.tipo.$model,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.v$.notaForm.tipo.$model=o}),options:e.notaTipo,label:"label",val:"value",placeholder:"tipo"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",Uo,[(0,a.bF)(m,{error:e.v$.notaForm.ceros_delante.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(b,{type:"outlined",modelValue:e.v$.notaForm.ceros_delante.$model,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.v$.notaForm.ceros_delante.$model=o}),options:e.optCerosDelante,label:"label",val:"value",placeholder:"Ceros delante para números"},null,8,["modelValue","options"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","title","onSubmit"]),(0,a.bF)(O,{class:"modal-escala-valor",modelValue:e.valorForm.modal,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.valorForm.modal=o}),header:!0,footer:!0,title:e.valorForm.title,ok:"Grabar",onSubmit:e.saveEscalaValor},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",qo,[(0,a.Lk)("div",wo,[(0,a.bF)(m,{error:e.v$.valorForm.nota.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.v$.valorForm.nota.$model,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.v$.valorForm.nota.$model=o}),"float-label":e.$t("nota")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",$o,[(0,a.bF)(m,{error:e.v$.valorForm.puntaje.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,a.k6)(function(){return[(0,a.bF)(f,{class:"q-if-outlined",type:"number",modelValue:e.v$.valorForm.puntaje.$model,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.v$.valorForm.puntaje.$model=o}),"float-label":e.$t("puntaje")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])]),(0,a.Lk)("div",yo,[(0,a.bF)(f,{class:"q-if-outlined",modelValue:e.valorForm.nota_keypress,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.valorForm.nota_keypress=o}),"float-label":"KeyPress"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}n(23825),n(27153),n(66307),n(24066);var Mo={setup:function(){var e=(0,J.fG)();return{v$:e}},components:{QTable:A.kH,QTh:A.EJ,QTr:A.qh,QTd:A.Ef,QTableColumns:A.$s,QPopupEdit:A.GT,QCheckbox:A.vZ,QToggle:A.c5,QSelect:A.Si,sieSelect:H.A,sieModal:B.A,sieVacio:Y.A,QPage:A.Tu,QCard:A.C$,QBtn:A.Il,QTooltip:A.nC,QIcon:A.bP,QInput:A.ie,QField:A.Om},data:function(){return{sie:(0,z["default"])(),notaData:[],notaCol:[{name:"ID_ESCALA_NOTA",label:this.$t("codigo"),field:"ID_ESCALA_NOTA",align:"center",sortable:!1},{name:"DESCRIPCION",label:this.$t("matricula.descripcion"),field:"DESCRIPCION",align:"left",sortable:!0},{name:"TIPO",label:this.$t("tipo"),field:"TIPO",align:"center",sortable:!1},{name:"CEROS_DELANTE",label:"Ceros Delante para números",field:"CEROS_DELANTE",align:"center",sortable:!1},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 80px"}],notaPag:{page:1,rowsPerPage:200},notaFiltro:"",notaLoad:!0,notaSeleccionado:null,notaForm:{modal:!1,title:"Crear escala nota",id_escala_nota:null,descripcion:null,tipo:null,ceros_delante:null},notaTipo:[{label:"Letra",value:0},{label:"Número entero",value:1},{label:"Decimal",value:2}],optCerosDelante:[{label:"Si",value:1},{label:"No",value:0}],escalaValor:[],valorData:[],valorCol:[{name:"ID_ESCALA_NOTA",label:this.$t("codigo"),field:"ID_ESCALA_NOTA",align:"center",sortable:!1},{name:"NOTA",label:this.$t("nota"),field:"NOTA",align:"center",sortable:!0},{name:"PUNTAJE",label:this.$t("puntaje"),field:"PUNTAJE",align:"center",sortable:!0},{name:"NOTA_KEYPRESS",label:"KeyPress",field:"NOTA_KEYPRESS",align:"center",sortable:!1}],valorPag:{page:1,rowsPerPage:200},valorFiltro:"",valorLoad:!0,valorTipoSeleccion:"multiple",valorSeleccionado:[],valorForm:{modal:!1,title:"Crear escala valor",id_escala_nota:null,nota:null,puntaje:null,nota_keypress:""}}},computed:{grados:function(){var e=this.gradosTemp;return e=(0,ee.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:e}),e.unshift({GRADOCOD:"T",GRADODES:"Todos",INSTRUCOD:"T"}),e},isLess:function(){return(0,X.isLess)()}},methods:{getTipo:function(e){var o=[{label:"Letra",value:0},{label:"Número entero",value:1},{label:"Decimal",value:2}],n=(0,ee.filterArray)(e,{field:"value",list:o})[0];return n.label},getSiNo:function(e){return 0===e?"No":"Si"},init:function(){var e=this;Promise.all([he.A.obtInstru(),he.A.obtGrados()]).then(function(o){e.niveles=o[0].json,e.gradosTemp=o[1].json})},addEscalaNota:function(e,o){this.notaForm.modal=!0,this.v$.notaForm.$reset(),"number"===typeof e?(this.notaForm.title="Editar escala nota",this.notaForm.id_escala_nota=e,this.notaForm.descripcion=o.DESCRIPCION,this.notaForm.tipo=o.TIPO,this.notaForm.ceros_delante=o.CEROS_DELANTE):(this.notaForm.title="Crear escala nota",this.notaForm.id_escala_nota=null,this.notaForm.descripcion=null,this.notaForm.tipo=null,this.notaForm.ceros_delante=null)},saveEscalaNota:function(){var e=this;if(this.v$.notaForm.$touch(),!this.v$.notaForm.$error){var o={descripcion:this.notaForm.descripcion,tipo:this.notaForm.tipo,ceros_delante:this.notaForm.ceros_delante};null===this.notaForm.id_escala_nota?he.A.grabarEscalaNota(o).then(function(o){return(0,Z["default"])("Grabado correctamente","success"),e.notaForm.modal=!1,he.A.obtListaEscala()}).then(function(o){e.notaData=o}).catch(function(e){(0,Z["default"])("No se pudo grabar","warning")}):(o.id_escala_nota=this.notaForm.id_escala_nota,he.A.updateEscalaNota(o).then(function(o){return(0,Z["default"])("Actualizado correctamente","success"),e.notaForm.modal=!1,he.A.obtListaEscala()}).then(function(o){e.notaData=o}).catch(function(e){(0,Z["default"])("No se pudo actualizar","warning")}))}},deleteEscalaNota:function(e){var o=this;(0,ne.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){return he.A.deleteEscalaNota(e)}).then(function(e){return(0,Z["default"])(e.mensaje,1===e.estado?"success":"warning"),he.A.obtListaEscala()}).then(function(n){o.notaData=n,o.valorLoad=!0,o.notaSeleccionado=e;var a=[];return a.push(e),he.A.obtLista(a)}).then(function(e){o.valorLoad=!1,o.valorData=e,0===e.length&&(o.notaSeleccionado=null)}).catch(function(e){(0,Z["default"])(e.error.mensaje,"warning")})},obtEscalaValor:function(e){var o=this;this.valorLoad=!0,this.notaSeleccionado=e;var n=[];n.push(e),he.A.obtLista(n).then(function(e){o.valorData=e,o.valorLoad=!1})},addEscalaValor:function(){this.valorForm.modal=!0,this.v$.valorForm.$reset(),this.valorForm.id_escala_nota=this.notaSeleccionado,this.valorForm.nota=null,this.valorForm.puntaje=null,this.valorForm.nota_keypress=""},saveEscalaValor:function(e){var o=this;if(this.v$.valorForm.$touch(),e.NOTA&&(this.valorForm.id_escala_nota=e.ID_ESCALA_NOTA,this.valorForm.nota=e.NOTA,this.valorForm.puntaje=e.PUNTAJE,this.valorForm.nota_keypress=e.NOTA_KEYPRESS),!this.v$.valorForm.$error){var n={id_escala_nota:this.valorForm.id_escala_nota,nota:this.valorForm.nota,puntaje:this.valorForm.puntaje,nota_keypress:this.valorForm.nota_keypress};he.A.updateOrInsertEscalaValor(n).then(function(e){(0,Z["default"])("Grabado correctamente","success"),o.valorForm.modal=!1,o.valorLoad=!0;var n=[];return n.push(o.notaSeleccionado),he.A.obtLista(n)}).then(function(e){o.valorData=e,o.valorLoad=!1}).catch(function(){(0,Z["default"])("No se pudo grabar","warning")})}},deleteEscalaValor:function(){var e=this;this.valorSeleccionado.length>0?(0,ne.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){var o=(0,De["default"])(e.valorSeleccionado,function(e){return{ID_ESCALA_NOTA:e.ID_ESCALA_NOTA,NOTA:e.NOTA}});return he.A.deleteEscalaValor(o)}).then(function(o){(0,Z["default"])("Eliminado correctamente","success"),e.valorSeleccionado=[],e.valorLoad=!0;var n=[];return n.push(e.notaSeleccionado),he.A.obtLista(n)}).then(function(o){e.valorData=o,e.valorLoad=!1}):(0,Z["default"])("Debe seleccionar al menos un elemento","warning")}},validations:{notaForm:{descripcion:{required:le.mw},tipo:{required:le.mw},ceros_delante:{required:le.mw}},valorForm:{nota:{required:le.mw},puntaje:{integer:le.nd,required:le.mw}}},created:function(){var e=this;this.init(),he.A.obtListaEscala().then(function(o){e.notaLoad=!1,e.notaData=o})}};const Qo=(0,ie.A)(Mo,[["render",xo]]);var Wo=Qo,jo={components:{QTabs:A.uw,QTab:A.zu,QTabPane:A.dg,QSelect:A.Si,tipoCalculo:_.A,particularidades:se,configuracion:ue.A,ConfigGeneralNotas:Te,ConfigGeneralConducta:He,ConfigGeneralTalleres:ro,ConfigConstantes:Ro,escalas:Wo,QPage:A.Tu,QInput:A.ie},data:function(){return{acceso:!1,clave:null,datoTipoRegistro:[{label:"Notas",value:1},{label:"Conducta",value:2},{label:"Talleres",value:4}],vmTipoRegistro:1}},methods:{validacion:function(){if(["SIE","SIEWEB","DEMO"].indexOf((0,z["default"])().usucod)>=0){var e=Date.now(),o=A.p6.formatDate(e,"DD-MM-YYYY").split("-"),n=(0,z["default"])().host.split("//")[1].split(".")[0],a=o[0]+n+o[1]+o[2];this.acceso=this.clave===a}}}};const Jo=(0,ie.A)(jo,[["render",v]]);var Yo=Jo}}]);