"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[32016],{32016:function(e,t,o){o.r(t),o.d(t,{default:function(){return Qe}});var n=o(8445),a=o.n(n),l=(o(71225),o(50310),o(5962),o(83190),o(61758)),i=o(58790),r={class:"intranet-becas--dashboard--detalle col q-pa-sm"},s={class:"row q-col-gutter-md items-center"},u={class:"col-12"},c={class:"col-md-4 col-xs-12"},d={class:"col-md-8 col-xs-12 q-gutter-sm"},m={class:"col-12"},f={class:"row reverse full-width"},p=["src"],h={class:"q-pa-sm"},b={class:"row"},g={class:"col"},v={key:0,class:"row"},O={class:"col"};function E(e,t){var o=(0,l.g2)("header-btn"),n=(0,l.g2)("q-select"),E=(0,l.g2)("q-btn"),C=(0,l.g2)("q-td"),A=(0,l.g2)("estadoexp"),k=(0,l.g2)("q-download-file"),w=(0,l.g2)("q-item"),F=(0,l.g2)("q-list"),V=(0,l.g2)("q-popover"),y=(0,l.g2)("q-tooltip"),B=(0,l.g2)("q-tr"),D=(0,l.g2)("q-table"),S=(0,l.g2)("q-card-section"),M=(0,l.g2)("q-card"),P=(0,l.g2)("observacion"),I=(0,l.g2)("consultar"),_=(0,l.g2)("encuesta"),R=(0,l.g2)("ficha"),U=(0,l.g2)("historialPago"),L=(0,l.g2)("sie-modal"),H=(0,l.g2)("sie-select"),q=(0,l.g2)("q-input"),N=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(N,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",r,[(0,l.bF)(M,{class:"col",dense:"",flat:"",bordered:""},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{name:"Becas",buttons:e.buttons},null,8,["buttons"]),(0,l.bF)(S,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",s,[(0,l.Lk)("div",u,[(0,l.bF)(n,{modelValue:e.filter.FAMCOD,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.FAMCOD=t}),options:e.dsFamilias,"option-label":"FAMDES","option-value":"FAMCOD",label:"Familias",onInput:e.getParticipantesFam},null,8,["modelValue","options","onInput"])]),(0,l.Lk)("div",c,[(0,l.bF)(n,{modelValue:e.filter.ALUCOD,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.ALUCOD=t}),options:e.dsParticipantes,"option-label":"NOMCOMP","option-value":"ALUCOD",label:"Estudiantes",onInput:e.getDocsAlu},null,8,["modelValue","options","onInput"])]),(0,l.Lk)("div",d,[(0,l.bF)(E,{size:"sm",label:"Observación",onClick:e.showModalObs,color:"primary"},null,8,["onClick"]),e.mostrarAsignarBeca?((0,l.uX)(),(0,l.Wv)(E,{key:0,size:"sm",label:"Asignar beca",onClick:e.showModalAsig,color:"primary",readonly:!e.filter.ALUCOD,disable:!e.filter.ALUCOD},null,8,["onClick","readonly","disable"])):(0,l.Q3)("v-if",!0),(0,l.bF)(E,{size:"sm",label:"Consultar",onClick:e.showModalCon,color:"primary"},null,8,["onClick"]),e.mostrarFichaEconomica?((0,l.uX)(),(0,l.Wv)(E,{key:1,size:"sm",label:"Ficha Económica",onClick:e.showModalFic,color:"primary"},null,8,["onClick"])):(0,l.Q3)("v-if",!0),e.mostrarEncuesta?((0,l.uX)(),(0,l.Wv)(E,{key:2,size:"sm",label:"Encuesta",onClick:e.showModalEncuesta,color:"primary"},null,8,["onClick"])):(0,l.Q3)("v-if",!0),e.mostrarHistorialPago?((0,l.uX)(),(0,l.Wv)(E,{key:3,size:"sm",label:"Historial Pago",onClick:e.showModalHistorialPago,color:"primary"},null,8,["onClick"])):(0,l.Q3)("v-if",!0)]),(0,l.Lk)("div",m,[(0,l.bF)(D,{dense:"",flat:"",bordered:"","wrap-cells":"",data:e.dsDocs,columns:e.columns,"virtual-scroll":"",style:{"max-height":"75vh"},pagination:e.pagination,"onUpdate:pagination":t[2]||(t[2]=function(t){return e.pagination=t}),"row-per-page-options":[0]},{top:(0,l.k6)(function(t){return[(0,l.Lk)("div",f,[(0,l.bF)(E,{icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getDocsAlu,flat:""},null,8,["onClick"])])]}),body:(0,l.k6)(function(o){return[(0,l.bF)(B,{props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(C,{key:"DOCUMENTO",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.DOCUMENTO),1)]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"FECHA_REG",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(o.row.FECHA_REG,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"FECHA_APRO",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(e.date(o.row.FECHA_APRO,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"APROBADO",props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(A,{state:o.row.APROBADO},null,8,["state"])]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"ARCHIVO",props:o},{default:(0,l.k6)(function(){return[o.row.NOMBRE.length>1?((0,l.uX)(),(0,l.Wv)(E,{key:0,color:"primary",icon:"documents",flat:""},{default:(0,l.k6)(function(){return[(0,l.bF)(V,null,{default:(0,l.k6)(function(){return[(0,l.bF)(F,{separator:""},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.row.NOMBRE,function(t,o){return(0,l.uX)(),(0,l.Wv)(w,{key:o},{default:(0,l.k6)(function(){return[(0,l.bF)(k,{src:e.getUrl(t),name:t},null,8,["src","name"])]}),_:2},1024)}),128))]}),_:2},1024)]}),_:2},1024),(0,l.bF)(y,{anchor:"bottom middle",self:"top middle"},{default:(0,l.k6)(function(){return a()(t[12]||(t[12]=[(0,l.eW)("Listado de documentos",-1)]))}),_:1})]}),_:2},1024)):((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(o.row.NOMBRE,function(t){return(0,l.uX)(),(0,l.CE)("span",null,[(0,l.bF)(k,{src:e.getUrl(t),name:t},null,8,["src","name"])])}),256))]}),_:2},1032,["props"]),(0,l.bF)(C,{key:"ACCIONES",props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(E,{color:"primary",icon:"visibility",flat:"",onClick:function(t){return e.showModalEst(o.row)},disable:!e.acceso},{default:(0,l.k6)(function(){return[(0,l.bF)(y,{anchor:"bottom middle",self:"top middle"},{default:(0,l.k6)(function(){return a()(t[13]||(t[13]=[(0,l.eW)("Cambiar estado",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,l.bF)(E,{color:"negative",icon:"delete",flat:"",onClick:function(t){return e.deleteExp(o.row.ID_BECA_EXPEDIENTE)},disable:!e.acceso},{default:(0,l.k6)(function(){return[(0,l.bF)(y,{anchor:"bottom middle",self:"top middle"},{default:(0,l.k6)(function(){return a()(t[14]||(t[14]=[(0,l.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])])])]}),_:1})]}),_:1}),(0,l.bF)(P,{modelValue:e.showObs,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.showObs=t}),alucod:e.filter.ALUCOD,famcod:e.filter.FAMCOD,periodo:e.perActivo},null,8,["modelValue","alucod","famcod","periodo"]),(0,l.bF)(I,{modelValue:e.showCon,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.showCon=t}),alucod:e.filter.ALUCOD},null,8,["modelValue","alucod"]),(0,l.bF)(_,{modelValue:e.showEncuesta,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.showEncuesta=t}),famcod:e.filter.FAMCOD},null,8,["modelValue","famcod"]),e.mostrarFichaEconomica?((0,l.uX)(),(0,l.Wv)(R,{key:0,modelValue:e.showFic,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.showFic=t}),famcod:e.filter.FAMCOD},null,8,["modelValue","famcod"])):(0,l.Q3)("v-if",!0),e.showHistorialPago?((0,l.uX)(),(0,l.Wv)(U,{key:1,modelValue:e.showHistorialPago,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.showHistorialPago=t}),alucod:e.filter.ALUCOD},null,8,["modelValue","alucod"])):(0,l.Q3)("v-if",!0),(0,l.bF)(L,{title:"Asignar Beca",modelValue:e.showAsig,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.showAsig=t}),footer:!1},{default:(0,l.k6)(function(){return[(0,l.Lk)("iframe",{src:e.urlBeca,width:"640",height:"480"},null,8,p)]}),_:1},8,["modelValue"]),(0,l.bF)(L,{title:"Cambiar estado",modelValue:e.showEst,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.showEst=t}),ok:"Guardar",onClose:e.hideModalEst,onSubmit:e.updateStateExp},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",h,[(0,l.Lk)("div",b,[(0,l.Lk)("div",g,[(0,l.bF)(H,{type:"outlined",modelValue:e.form.APROBADO,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.APROBADO=t}),options:e.dsEstados,label:"label",val:"value",placeholder:"Estado"},null,8,["modelValue","options"])])]),2===e.form.APROBADO?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",O,[(0,l.bF)(q,{class:"q-if-outlined",type:"textarea",rows:"4",modelValue:e.form.OBSERVACION,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.OBSERVACION=t}),"float-label":"Observación por rechazo"},null,8,["modelValue"])])])):(0,l.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onClose","onSubmit"])])]}),_:1})}var C=o(57008),A=o.n(C),k=o(76080),w=o.n(k),F=o(45254),V=o.n(F),y=(o(30683),o(10239),o(11777),o(6123)),B=o(50425),D=o(93616),S=o(30640),M=o(18105),P={class:"col q-px-md q-pt-md q-pb-xs"},I={class:"row items-center"},_={class:"col"},R={class:"col-auto items-center"},U={class:"col column q-px-md scroll-y",style:{height:"280px","max-width":"30vw"}},L={class:"q-mt-none"},H={key:0,class:"row items-center"},q={class:"col"},N={class:"col-auto items-center"},T={key:1},Q={class:"q-my-none"},x={class:"row items-center justify-between"},$={class:"row items-center gutter-xs"},X={class:"col-auto"},W={class:"col-auto column"},z={class:"text-dark",style:{"font-size":"13px","font-weight":"600",height:"20px"}},j={style:{"font-size":"12px"}},Y={class:"row items-center"};function G(e,t){var o=(0,l.g2)("q-input"),n=(0,l.g2)("q-icon"),a=(0,l.g2)("sie-vacio"),r=(0,l.g2)("sie-usuario"),s=(0,l.g2)("q-btn"),u=(0,l.g2)("q-timeline-entry"),c=(0,l.g2)("q-timeline"),d=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(d,{modelValue:e.model,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.model=t}),title:"Observación",css:{minWidth:"30vw"},footer:!1,onClose:e.cleanObs,onShow:e.getObs},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",P,[(0,l.Lk)("div",I,[(0,l.Lk)("div",_,[(0,l.bF)(o,{class:"q-if-outlined",modelValue:e.form.obs,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.obs=t}),loading:e.loading},null,8,["modelValue","loading"])]),(0,l.Lk)("div",R,[(0,l.bF)(n,{size:"2rem",color:"secondary",name:"send",onClick:e.sendObs,style:{cursor:"pointer"}},null,8,["onClick"])])])]),(0,l.Lk)("div",U,[e.dsObs.length<=0?((0,l.uX)(),(0,l.Wv)(a,{key:0})):((0,l.uX)(),(0,l.Wv)(c,{key:1,color:"secondary"},{default:(0,l.k6)(function(){return[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.dsObs,function(t){return(0,l.uX)(),(0,l.Wv)(u,{key:t.ID_BECA_OBSERVACION,side:"right"},{subtitle:(0,l.k6)(function(){return[(0,l.Lk)("h5",Q,[(0,l.Lk)("div",x,[(0,l.Lk)("div",$,[(0,l.Lk)("div",X,[(0,l.bF)(r,{usucod:t.USUCOD,size:"xs"},null,8,["usucod"])]),(0,l.Lk)("div",W,[(0,l.Lk)("span",z,(0,i.v_)(t.USUNOM),1),(0,l.Lk)("span",j,(0,i.v_)(e.date(t.FECHA,"dddd DD, MMMM YYYY hh:mm a")),1)])]),(0,l.Lk)("div",Y,[(0,l.bF)(s,{color:"primary",icon:"edit",flat:"",onClick:function(o){return e.showEdit(t)}},null,8,["onClick"]),(0,l.bF)(s,{color:"negative",icon:"delete",flat:"",onClick:function(o){return e.delObs(t.ID_BECA_OBSERVACION)}},null,8,["onClick"])])])])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",L,[e.isEdit&&t.ID_BECA_OBSERVACION==e.editForm.id?((0,l.uX)(),(0,l.CE)("div",H,[(0,l.Lk)("div",q,[(0,l.bF)(o,{class:"q-if-outlined",modelValue:e.editForm.obs,"onUpdate:modelValue":function(t){return e.editForm.obs=t},loading:e.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),(0,l.Lk)("div",N,[(0,l.bF)(n,{size:"2rem",color:"secondary",name:"send",onClick:e.updObs,style:{cursor:"pointer"}},null,8,["onClick"]),(0,l.bF)(n,{size:"2rem",color:"negative",name:"cancel",onClick:e.cancelEdit,style:{cursor:"pointer"}},null,8,["onClick"])])])):((0,l.uX)(),(0,l.CE)("p",T,(0,i.v_)(t.OBSERVACION),1))])]}),_:2},1024)}),128))]}),_:1}))])]}),_:1},8,["modelValue","onClose","onShow"])])}var K=o(24974),J=o(80340),Z={emits:["update:modelValue","input"],props:{famcod:{type:String,required:!0},alucod:{type:String,required:!0},modelValue:{type:Boolean,default:!1},periodo:{type:Number,required:!0}},components:{QTimeline:y.T,QTimelineEntry:y.HV,sieModal:S.A,sieUsuario:K.A,sieVacio:J.A,QInput:y.ie,QIcon:y.bP,QBtn:y.Il},data:function(){return{loading:!1,dsObs:[],form:{famcod:"",periodo:this.periodo,alucod:"",obs:""},editForm:{obs:"",id:null},isEdit:!1}},methods:{date:M.Ay,sendObs:function(){var e=this;return V()(w()().m(function t(){var o,n;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return e.loading=!0,t.p=1,e.form["famcod"]=e.famcod,e.form["alucod"]=e.alucod,t.n=2,e.$http.post("api/HyoBecaObservacion/saveObservacion",e.form);case 2:o=t.v,n=o.json,"Ok"===n.status&&(e.form.obs="",e.getObs()),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.p=4,e.loading=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}))()},getObs:function(){var e=this;return V()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={famcod:e.famcod,alucod:e.alucod,periodo:e.periodo},t.p=1,t.n=2,e.$http.get("api/HyoBecaObservacion/getObsByParticipante",{params:o});case 2:n=t.v,a=n.json,e.dsObs=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},updObs:function(){var e=this;return V()(w()().m(function t(){var o,n;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return e.loading=!0,t.p=1,t.n=2,e.$http.put("api/HyoBecaObservacion/updateObservacion",{data:e.editForm});case 2:o=t.v,n=o.json,"Ok"===n.status&&(e.loading=!1,e.cancelEdit(),e.getObs()),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.p=4,e.loading=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}))()},delObs:function(e){var t=this;return V()(w()().m(function o(){var n,a,l;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,n={id:e},o.n=1,t.$http.delete("api/HyoBecaObservacion/deleteObservacion",{params:n});case 1:a=o.v,l=a.json,"Ok"===l.status&&t.getObs(),o.n=3;break;case 2:o.p=2,o.v;case 3:return o.a(2)}},o,null,[[0,2]])}))()},cancelEdit:function(){this.isEdit=!1,this.editForm.obs="",this.editForm.id=null},showEdit:function(e){this.isEdit=!0,this.editForm.obs=e.OBSERVACION,this.editForm.id=e.ID_BECA_OBSERVACION},cleanObs:function(){this.form.alucod="",this.form.famcod="",this.form.obs="",this.isEdit=!1,this.editForm.obs="",this.editForm.id=null}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}},ee=o(12807);const te=(0,ee.A)(Z,[["render",G]]);var oe=te,ne={class:"col column q-pa-sm"};function ae(e,t){var o=(0,l.g2)("q-table"),n=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(n,{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t}),title:"Consultar Becas",css:{minWidth:"40vw"},footer:!1,onClose:e.cleanBecas,onShow:e.getBecasAlu},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ne,[(0,l.bF)(o,{data:e.becas,columns:e.columns,style:{"max-height":"100%"}},null,8,["data","columns"])])]}),_:1},8,["modelValue","onClose","onShow"])])}var le=o(30545),ie=o(36980),re={emits:["update:modelValue","input"],props:{alucod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{QTable:le.A,QTr:y.qh,QTd:y.Ef,sieModal:S.A},data:function(){return{becas:[],columns:[{name:"NOMCOMP",field:"NOMCOMP",label:"Nombre completo",align:"left"},{name:"BECADES",field:"BECADES",label:"Tipo de Beca",align:"left"},{name:"MESINIBEC",field:"MESINIBEC",label:"Mes Inicio",align:"center"},{name:"MESFINBEC",field:"MESFINBEC",label:"Mes Fin",align:"center"}],filter:{anobec:null}}},methods:{cleanBecas:function(){this.alucod=null},getBecasAlu:function(){var e=this;return V()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={alucod:e.alucod,anobec:e.filter.anobec||e.anobec+""},t.p=1,t.n=2,e.$http.get("api/HyoBecaOto/getBecasByAlu",{params:o});case 2:n=t.v,a=n.json,e.becas=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()}},computed:A()(A()({},(0,ie.aH)("beca",["anobec"])),{},{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}})};const se=(0,ee.A)(re,[["render",ae]]);var ue=se;function ce(e,t){var o=(0,l.g2)("q-spinner-oval"),n=(0,l.g2)("q-inner-loading"),a=(0,l.g2)("formly"),i=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.Wv)(i,{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t}),title:"Encuesta",css:{minWidth:"40vw"},onShow:e.buildForm,footer:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(a,{data:e.form,print:!1},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{visible:e.loading},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{size:"50px",color:"primary"})]}),_:1},8,["visible"])]}),_:1},8,["data"])]}),_:1},8,["modelValue","onShow"])}var de=o(57668),me=o(60167),fe="No se puede mostrar el formulario",pe="info",he={emits:["update:modelValue","input"],props:{famcod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{sieInfo:de["default"],formly:me.A,sieModal:S.A,QInnerLoading:y.SQ,QSpinnerOval:y.VA},data:function(){return{form:{},loading:!1,esOtros:(0,de["default"])().esOtros,message:fe,icon:pe}},methods:{buildForm:function(){var e=this;return V()(w()().m(function t(){var o,n;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return e.loading=!0,t.p=1,t.n=2,e.$http.get("api/HyoBecaSolicitud/getBecaEncuestaByFamcod",{params:{famcod:e.famcod}});case 2:return o=t.v,console.log(o),t.n=3,e.$http.get("api/HyoFormulario/getPreview",{params:{idHistory:o.json.ID_HISTORIA_FORMULARIO,idHistoryUser:o.json.ID_HISTORIA_USUARIO}});case 3:n=t.v,e.form=n,t.n=5;break;case 4:t.p=4,t.v,e.form={};case 5:return t.p=5,e.loading=!1,t.f(5);case 6:return t.a(2)}},t,null,[[1,4,5,6]])}))()}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const be=(0,ee.A)(he,[["render",ce]]);var ge=be;function ve(e,t){var o=(0,l.g2)("sie-table"),n=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(n,{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t}),title:"Historial de Pagos",css:{minWidth:"40vw"},footer:!1,onClose:e.cleanBecas},{default:(0,l.k6)(function(){return[(0,l.bF)(o,{css:"max-height: calc(100vh - 320px); height: 100%;",columns:e.columns,data:e.pagos,config:e.config,"show-refresh":!0,onRefresh:e.getPagosResponsable},null,8,["columns","data","config","onRefresh"])]}),_:1},8,["modelValue","onClose"])])}var Oe=o(33777),Ee={emits:["update:modelValue","input"],props:{alucod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{QTable:le.A,QTr:y.qh,QTd:y.Ef,QIcon:y.bP,QInput:y.ie,sieModal:S.A,SieTable:Oe.A},data:function(){return{pagos:[],config:{},columns:[],load:{},filter:{anobec:null}}},methods:{cleanBecas:function(){this.alucod=null},getPagosResponsable:function(){var e=this;return V()(w()().m(function t(){var o,n;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={alucod:e.alucod,anobec:e.filter.anobec||e.anobec+""},t.p=1,t.n=2,e.$http.get("api/PagoController/getPagosResponsable",{params:{params:o}});case 2:n=t.v,e.pagos=a()(n),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},setTable:function(){var e=this;return V()(w()().m(function t(){return w()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getPagosResponsable();case 1:e.columns=[{name:"FECEMI",field:"FECEMI",label:"Fec.Emi.",align:"center",sortable:!0},{name:"NOMRESP",field:"NOMRESP",label:"Responsable de Pago",align:"left"},{name:"PARENTESCO",field:"PARENTESCO",label:"Parentesco",align:"left"},{name:"DOCUMENTO",field:"DOCUMENTO",label:"N° Documento",align:"center"},{name:"CONCEPTO",field:"CONCEPTO",label:"Concepto",align:"left"},{name:"FECPAG",field:"FECPAG",label:"Fec.Pago",align:"left"}],e.config={FECEMI:{component:"date",edit:!1},FECPAG:{component:"date",edit:!1},NOMRESP:{renderHtml:function(e,t,o,n){e.FECPAG||(n.$$color="#b71c1c")}}};case 2:return t.a(2)}},t)}))()}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},mounted:function(){var e=this;return V()(w()().m(function t(){return w()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.setTable();case 1:return t.a(2)}},t)}))()}};const Ce=(0,ee.A)(Ee,[["render",ve]]);var Ae=Ce,ke={class:"col"};function we(e,t){var o=(0,l.g2)("fichaeconomica"),n=(0,l.g2)("sie-modal");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(n,{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t}),title:"Ficha económica",css:{minWidth:"40vw"},footer:!1},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",ke,[(0,l.bF)(o,{famcod:e.famcod,"is-editable":!1},null,8,["famcod"])])]}),_:1},8,["modelValue"])])}var Fe=o(22423),Ve={emits:["update:modelValue","input"],props:{famcod:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},components:{sieModal:S.A,fichaeconomica:Fe.A},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const ye=(0,ee.A)(Ve,[["render",we]]);var Be=ye,De=o(53564),Se=o(62006),Me=o(982),Pe=o(64707),Ie=o(80660),_e=o(88567),Re=o(95718),Ue=o(16648),Le=["0057","0193","0205","0081"],He=["0010","0057","0193","0205","0081","0275"],qe=["0193","0081"],Ne={components:{QCard:_e.A,QCardSection:Re.A,QSelect:Ue.A,QCardMain:y.d1,QTable:B.A,QTr:y.qh,QTd:y.Ef,QPageSticky:y._U,QPopover:y.VM,QList:y.Mb,QItem:y.H0,sieSelect:D.A,sieModal:S.A,observacion:oe,consultar:ue,encuesta:ge,historialPago:Ae,ficha:Be,estadoexp:De.A,sieInfo:de["default"],QDownloadFile:Se.A,notify:Me["default"],becaOtorgada:Pe.A,QPage:y.Tu,QBtn:y.Il,QTooltip:y.nC,QInput:y.ie},data:function(){var e=this;return{pagination:{rowsPerPage:0},acceso:(0,de["default"])().ruta.nivel>=2,esSantisimo:"0057"===(0,de["default"])().colcod,sie:(0,de["default"])(),showEst:!1,showObs:!1,showCon:!1,showFic:!1,showAsig:!1,showEncuesta:!1,showHistorialPago:!1,dsFamilias:[],dsParticipantes:[],dsEstados:[{label:"Aprobado",value:1},{label:"Rechazado",value:2},{label:"Exonerado",value:4}],dsDocs:[],columns:[{name:"DOCUMENTO",field:"DOCUMENTO",label:"DOCUMENTO",align:"left"},{name:"FECHA_REG",field:"FECHA_REG",label:"FECHA ENTREGA",align:"center"},{name:"FECHA_APRO",field:"FECHA_APRO",label:"FECHA ESTADO",align:"center"},{name:"APROBADO",field:"APROBADO",label:"ESTADO",align:"center"},{name:"ARCHIVO",label:"ARCHIVO",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],filter:{FAMCOD:"",ALUCOD:""},idBecaExp:null,idBecaSol:null,form:{APROBADO:null,OBSERVACION:null},TESORERIA:"26",buttons:[{icon:"arrow_back",label:"Regresar",click:function(){e.back()},permiso:"> 1"}]}},methods:{date:M.Ay,init:function(){this.filter.FAMCOD=this.$route.params.famcod,this.getFamSolicitantes(),this.getParticipantesFam()},back:function(){this.$router.push({name:"intranet.becas.dashboard"})},showModalObs:function(){this.showObs=!0},showModalAsig:function(){var e=this;return V()(w()().m(function t(){var o,n,l,i;return w()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,Ie.$http.get("api/ConstanteSistemaController/getSistemasPorCodigo",{params:{params:{SISCOD:e.TESORERIA}}});case 1:if(o=t.v,n=!1,o&&o.length>0&&(l=a()(o),i=l[0],n=1===Number(i.ESTADO)),n){t.n=2;break}return e.showAsig=!0,t.a(2,!0);case 2:if(e.filter.ALUCOD){t.n=3;break}return t.a(2,e.$alert("Seleccione primero un alumno","warning"));case 3:e.$router.push({name:"intranet.becas.asignar",query:{codigo:e.filter.ALUCOD}});case 4:return t.a(2)}},t)}))()},showModalCon:function(){this.showCon=!0},showModalFic:function(){this.showFic=!0},showModalEncuesta:function(){this.showEncuesta=!0},showModalHistorialPago:function(){this.showHistorialPago=!0},showModalEst:function(e){this.idBecaExp=e.ID_BECA_EXPEDIENTE,this.idBecaSol=e.ID_BECA_SOLICITUD,this.showEst=!0},hideModalEst:function(){this.idBecaSol=null,this.idBecaExp=null,this.showEst=!1,this.form={APROBADO:null,OBSERVACION:null}},getUrl:function(e){var t,o=e.split("."),n=o[0].split("_"),a=n[1];return t=n.length>=3?n[2]:1,"".concat(this.sie.api,"/HyoBecaExpediente/archivo/").concat(a,"/").concat(t,"?sie-token=").concat(this.sie.token)},getFamSolicitantes:function(){var e=this;return V()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaSolicitud/getFamSolicitantes",{params:o});case 2:n=t.v,a=n.json,e.dsFamilias=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},getParticipantesFam:function(){var e=this;return V()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo,famcod:e.filter.FAMCOD},t.p=1,t.n=2,e.$http.get("api/HyoBecaParticipante/getParticipantesFam",{params:o});case 2:n=t.v,a=n.json,e.dsParticipantes=a,a.length>0&&(e.filter.ALUCOD=a[0].ALUCOD,e.getDocsAlu()),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},getDocsAlu:function(){var e=this;return V()(w()().m(function t(){var o,n,a;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo,famcod:e.filter.FAMCOD,alucod:e.filter.ALUCOD},t.p=1,t.n=2,e.$http.get("api/HyoBecaDocumento/getDocumentosAlu",{params:o});case 2:n=t.v,a=n.json,e.dsDocs=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},updateStateExp:function(){var e=this;return V()(w()().m(function t(){var o,n,a,l;return w()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={id:e.idBecaExp,idSol:e.idBecaSol,data:e.form},t.p=1,t.n=2,e.$http.put("api/HyoBecaExpediente/updateEstado",o);case 2:n=t.v,a=n.json,"Ok"===a.status&&((0,Me["default"])(a.message),e.showEst=!1,e.getDocsAlu()),t.n=4;break;case 3:t.p=3,l=t.v,(0,Me["default"])(l.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()},deleteExp:function(e){var t=this;return V()(w()().m(function o(){return w()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(V()(w()().m(function o(){var n,a,l,i;return w()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e,anobec:t.anobecActivo},o.p=1,o.n=2,t.$http.delete("api/HyoBecaExpediente/deleteExp",{params:n});case 2:a=o.v,l=a.json,"Ok"===l.status&&((0,Me["default"])(l.message),t.getDocsAlu()),o.n=4;break;case 3:o.p=3,i=o.v,(0,Me["default"])(i.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))).onCancel(function(){});case 1:return o.a(2)}},o)}))()}},computed:A()(A()({},(0,ie.aH)("beca",["perActivo","anobecActivo"])),{},{urlBeca:function(){return"".concat((0,de["default"])().url,"/pensiones/asigna-beca-resolucion/form/cod/020006002")},mostrarHistorialPago:function(){return this.filter.ALUCOD&&this.filter.ALUCOD.length>0},mostrarFichaEconomica:function(){return-1!==Le.indexOf((0,de["default"])().colcod)},mostrarAsignarBeca:function(){return-1!==He.indexOf((0,de["default"])().colcod)},mostrarEncuesta:function(){return-1!==qe.indexOf((0,de["default"])().colcod)}}),mounted:function(){this.init()}};const Te=(0,ee.A)(Ne,[["render",E]]);var Qe=Te}}]);