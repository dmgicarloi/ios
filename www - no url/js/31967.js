"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[31967],{31967:function(e,a,o){o.r(a),o.d(a,{default:function(){return pe}});o(71225),o(50310),o(5962),o(83190);var t=o(61758),r=o(29104),n={class:"row q-ma-xs q-col-gutter-sm"},i={class:"col-xs-12 col-sm-6"},l={class:"row q-ma-xs q-col-gutter-sm"},s={class:"col-xs-12"},c={class:"col-xs-12"},u={class:"col-xs-12 col-md-6"},d={class:"col-xs-12 col-md-6"},m={class:"col-xs-12 col-md-6"},f={class:"col-xs-12 col-md-6"},C={class:"col-xs-12 col-md-6"},O={class:"col-xs-12 col-md-6"},p={class:"col-xs-12 col-md-6"},E={class:"col-xs-12 col-md-6"},g={class:"col-xs-12"},h={class:"col-xs-12"},A={class:"col-xs-12"},N={class:"col-xs-12 col-sm-6"},D={class:"row q-ma-xs q-col-gutter-sm"},b={class:"col-xs-12"},T={class:"row"},w={class:"col-xs-12 col-sm-3 q-pa-xs"},v={class:"col-xs-12 col-sm-3 q-pa-xs"};function I(e,a){var o=(0,t.g2)("q-page-header"),I=(0,t.g2)("q-separator"),R=(0,t.g2)("q-select"),S=(0,t.g2)("q-input"),_=(0,t.g2)("q-checkbox"),U=(0,t.g2)("q-date"),G=(0,t.g2)("q-popup-proxy"),M=(0,t.g2)("q-icon"),V=(0,t.g2)("sie-grid"),k=(0,t.g2)("q-card-section"),F=(0,t.g2)("footer-grid"),x=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(x,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(o,{useTab:"",tabs:e.pageHeader.tabs,title:e.pageHeader.title,componente:e.pageHeader.componente,botones:e.pageHeader.botones,onActionTab:e.actionTab,nivelAcceso:e.pageHeader.nivelAcceso},null,8,["tabs","title","componente","botones","onActionTab","nivelAcceso"]),(0,t.bF)(I),(0,t.bo)((0,t.bF)(k,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",n,[(0,t.Lk)("div",i,[(0,t.Lk)("div",l,[(0,t.Lk)("div",s,[(0,t.bF)(R,{options:e.opAnios,"option-label":"label","option-value":"value",label:"Año",modelValue:e.form.ANO,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.form.ANO=a}),disable:e.readonlyCategoria},null,8,["options","modelValue","disable"])]),(0,t.Lk)("div",c,[(0,t.bF)(R,{options:e.catOption,"option-label":"label","option-value":"value",label:"Categoria",modelValue:e.form.ID_CATEGORIA,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.ID_CATEGORIA=a}),disable:e.readonlyCategoria},null,8,["options","modelValue","disable"])]),(0,t.Lk)("div",u,[(0,t.bF)(R,{options:e.opNivel,"option-label":"label","option-value":"value",label:"Nivel",onInput:e.getGrados,modelValue:e.form.INSTRUCOD,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.form.INSTRUCOD=a}),disable:e.readonlyCategoria},null,8,["options","onInput","modelValue","disable"])]),(0,t.Lk)("div",d,[(0,t.bF)(R,{options:e.gradOption,"option-label":"label","option-value":"value",label:"Grado",modelValue:e.form.GRADOCOD,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.form.GRADOCOD=a}),onInput:e.getSecciones,disable:e.readonlyCategoria},null,8,["options","modelValue","onInput","disable"])]),(0,t.Lk)("div",m,[(0,t.bF)(R,{options:e.secOp,"option-label":"label","option-value":"value",label:"Sección",modelValue:e.form.SECCIONCOD,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.SECCIONCOD=a}),disable:e.readonlyCategoria},null,8,["options","modelValue","disable"])]),(0,t.Lk)("div",f,[(0,t.bF)(R,{options:e.monOption,"option-label":"label","option-value":"value",label:"Moneda",modelValue:e.form.MONCOD,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.form.MONCOD=a})},null,8,["options","modelValue"])]),(0,t.Lk)("div",C,[(0,t.bF)(S,{type:"number",label:"Monto",placeholder:"Ingrese monto",modelValue:e.form.MONTO,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.form.MONTO=a})},null,8,["modelValue"])]),(0,t.Lk)("div",O,[(0,t.bF)(S,{type:"number",label:"Descuento",placeholder:"Ingrese descuento",modelValue:e.form.DESCUENTO,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.form.DESCUENTO=a})},null,8,["modelValue"])]),(0,t.Lk)("div",p,[(0,t.bF)(_,{modelValue:e.form.GRATUITO,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.form.GRATUITO=a}),label:"Categoría Gratuita","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,t.Lk)("div",E,[(0,t.bF)(R,{options:e.descuentos,"option-label":"label","option-value":"value",label:"Tipo descuento",modelValue:e.form.TIPO_DESCUENTO,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.form.TIPO_DESCUENTO=a}),onInput:e.mostrarDescuentoFijo},null,8,["options","modelValue","onInput"])]),(0,t.Lk)("div",g,[e.isDescPersonalizado?((0,t.uX)(),(0,t.Wv)(R,{key:0,options:e.meses,"option-label":"label","option-value":"value",label:"Mes que aplica el descuento",modelValue:e.form.MES_DESCUENTO,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.form.MES_DESCUENTO=a})},null,8,["options","modelValue"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",h,[(0,t.bF)(_,{modelValue:e.form.FLAG_FECVEN,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.form.FLAG_FECVEN=a}),label:"Usar Fecha de Vencimiento Única","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,t.Lk)("div",A,[1===e.form.FLAG_FECVEN?((0,t.uX)(),(0,t.Wv)(S,{key:0,"reverse-fill-mask":"",modelValue:e.form.FECVEN,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.form.FECVEN=a}),maxlength:"10",mask:"##/##/####",label:"Fecha Vencimiento de todas las deudas"},{append:(0,t.k6)(function(){return[(0,t.bF)(M,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(G,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(U,{mask:"DD/MM/YYYY",modelValue:e.form.FECVEN,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.form.FECVEN=a}),onInput:a[13]||(a[13]=function(a){return e.closeModal("qDateProxy1")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])):(0,t.Q3)("v-if",!0)])])]),(0,t.Lk)("div",N,[(0,t.Lk)("div",D,[(0,t.Lk)("div",b,[(0,t.bF)(V,{class:"ag-theme-balham",columnDefs:e.columnDefsModal,frameworkComponents:e.frameworkComponentsModal,rowData:e.rowDataModal,onGridReady:e.onGridReadyModal,rowSelection:"multiple",style:{height:"calc(100vh - 250px)"},defaultColDef:e.defaultColDef,suppressRowClickSelection:""},null,8,["columnDefs","frameworkComponents","rowData","onGridReady","defaultColDef"])])])])])]}),_:1},512),[[r.aG,e.pageHeader.tabKeys.registro===e.pageHeader.tabActive]]),(0,t.bo)((0,t.bF)(k,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",T,[(0,t.Lk)("div",w,[(0,t.bF)(R,{modelValue:e.filter.ANO,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.filter.ANO=a}),"option-value":"value","option-label":"label",options:e.opAnios,label:"Año",onInput:e.searchCategoria},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",v,[(0,t.bF)(R,{modelValue:e.filter.INSTRUCOD,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.filter.INSTRUCOD=a}),"option-value":"value","option-label":"label",options:e.opNivel,label:"Nivel",onInput:e.searchCategoria},null,8,["modelValue","options","onInput"])])]),(0,t.Lk)("div",null,[(0,t.bF)(V,{class:"fix-tab-height ag-theme-balham",columnDefs:e.columnDefs,frameworkComponents:e.frameworkComponents,rowData:e.rowData,onGridReady:e.onGridReady,style:{height:"calc(100vh - 310px)"},defaultColDef:e.defaultColDef,floatingFilter:"",enableCellTextSelection:""},null,8,["columnDefs","frameworkComponents","rowData","onGridReady","defaultColDef"]),(0,t.bF)(F,{modelValue:e.pagina,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.pagina=a}),max:e.max,onLoad:e.created,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])])]}),_:1},512),[[r.aG,e.pageHeader.tabKeys.consultar===e.pageHeader.tabActive]])]}),_:1})}var R=o(76080),S=o.n(R),_=o(45254),U=o.n(_),G=(o(12563),o(30683),o(39866),o(52133),o(10239),o(6724),o(11777),o(52776),o(62692),o(81813),o(36408)),M=o(96330),V=o(27560),k=o(80660),F=o(42037),x=o(12143),P=o(95477),y=o(54267),L=o(19852),H=o(7729),q=o(30640),Q=o(26697),$=o(53093),Y=o(2739),K=o(43346),B=o(53811),z=o(88567),X=o(95718),j=o(53380),W=o(99515),J=o(3112),Z=o(93616),ee=o(54489),ae=o(80340),oe=o(6123),te=o(78840),re=["checked"];function ne(e,a){return(0,t.uX)(),(0,t.CE)("input",{type:"checkbox",onClick:a[0]||(a[0]=function(a){return e.checkedHandler(a,e.params)}),checked:e.params.value},null,8,re)}o(56285);var ie={name:"checkboxRender",props:{},methods:{checkedHandler:function(e,a){var o=a.data,t=a.name,r=o.CONCOB,n=e.target.checked;o[t]=n?r:{del:!0,CONCOB:r}}}},le=o(12807);const se=(0,le.A)(ie,[["render",ne]]);var ce=se,ue=o(57668),de=o(64208),me=o(41615),fe=o(2652),Ce={components:{actionButton:te.A,sieGrid:G.A,sieVacio:ae.A,headerGrid:M.A,footerGrid:V.A,sieSelect:Z.A,QRadio:W.A,QForm:Y.A,QDate:x.A,QPopupProxy:P.A,QCheckbox:J.A,createGrid:H.A,formulario:L.A,QCard:z.A,QCardSection:X.A,QSeparator:j.A,QTabs:Q.A,QTab:$.A,QTabPanels:B.A,QTabPanel:K.A,QPagination:oe.ao,sieModal:q.A,QSearch:oe.Ks,QSelect:ee.S,QInput:de.A,QPageHeader:fe.A,QIcon:oe.bP},data:function(){return{rowData:[],openModal:!1,nivelAcceso:2,max:1,pagina:1,tituloSistema:me["default"].SISTEMA_TESORERIA,selectAnio:me["default"].TOKEN_YEAR,instrucod:me["default"].TODOS,anios:[],nivel:[],api:{},columnDefs:[],frameworkComponents:{},opAnios:[],opNivel:[],currentRow:[],del:[],idDel:0,filter:{ANO:me["default"].TOKEN_YEAR?String(me["default"].TOKEN_YEAR):String(me["default"].CURRENT_YEAR),INSTRUCOD:me["default"].TODOS},ID_CATEGORIA_ANO:0,mode:"insert",apiModal:[],frameworkComponentsModal:{},ID_CATEGORIA_CONCOB:0,repetir:!1,form:{ID_CATEGORIA_ANO:null,ANO:me["default"].TOKEN_YEAR,INSTRUCOD:"",GRADOCOD:"",SECCIONCOD:"",MONCOD:"",MONTO:0,DESCUENTO:0,PERIODO_PAGO:1,ID_CATEGORIA:0,TIPO_DESC:1,MES_DESCUENTO:"",GRATUITO:0,FLAG_FECVEN:0,FECVEN:String(me["default"].CURRENT_DAY)},catOption:[],conceptosAgregar:[],nivOption:[],monOption:[],gradOption:[],opAniosModal:[],secOp:[],columnDefsModal:[],rowDataModal:[],pageHeader:{tabActive:"consultar",tabs:[{name:"consultar",label:"consultar"},{name:"index",label:"registro"}],tabKeys:{registro:"index",consultar:"consultar"},botones:[],title:"Categorias de Cobro Anual",componente:"categoriasCobro",nivelAcceso:(0,ue["default"])().ruta.nivel,mode:"I"},titleEditar:"",defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0,suppressDragLeaveHidesColumns:!0},readonlyCategoria:!1,meses:(0,y.generarMeses)(),descuentos:me["default"].TIPO_DESCUENTO,isDescPersonalizado:!1}},computed:{},methods:{closeModal:function(e){this.$refs[e].hide()},dayConverter:function(e){var a=e.replace("T"," ").split(" ")[0].split("-");return a="".concat(a[2],"/").concat(a[1],"/").concat(a[0]),a},actionTab:function(e){this.pageHeader.tabActive=e||"consultar",this.pageHeader.botones=[],"U"===this.pageHeader.mode&&(e===this.pageHeader.tabKeys.registro&&(this.pageHeader.title=this.titleEditar),this.pageHeader.botones.push({click:this.activarInsertTab,icon:"add",label:"nuevo",minAcceso:me["default"].LECTURA_ESCRITURATIPO_DESCUENTO})),e===this.pageHeader.tabKeys.registro&&this.pageHeader.botones.push({click:this.submit,icon:"save",label:"guardar",minAcceso:me["default"].LECTURA_ESCRITURA}),e===this.pageHeader.tabKeys.consultar&&(this.pageHeader.title="Categorias de Cobro Anual")},activarInsertTab:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.clear();case 1:return a.n=2,e.getConceptos();case 2:e.rowDataModal=a.v,e.mode="insert",e.pageHeader.tabs=[{name:"consultar",label:"consultar"},{name:"index",label:"Registro",active:!0}],e.pageHeader.title="Categorias de Cobro Anual",e.pageHeader.mode="I",e.actionTab(e.pageHeader.tabKeys.registro);case 3:return a.a(2)}},a)}))()},getAnio:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,me["default"].API_ANIOS();case 1:e.opAnios=a.v;case 2:return a.a(2)}},a)}))()},getNivel:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,me["default"].API_NIVELES();case 1:e.opNivel=a.v;case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api,this.api.sizeColumnsToFit()},agregar:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return e.clear(),e.mode="insert",a.n=1,e.getConceptos();case 1:e.rowDataModal=a.v,e.openModal=!0;case 2:return a.a(2)}},a)}))()},searchCategoria:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getCategoriaCobro();case 1:e.rowData=a.v;case 2:return a.a(2)}},a)}))()},getCategoriaCobro:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,k.$http.get("api/CategoriaCobroController/getCategoriaAnioCobro",{params:{params:{ano:e.filter.ANO,instrucod:e.filter.INSTRUCOD}}}))}},a)}))()},created:function(){var e=this;return U()(S()().m(function a(){var o;return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getCategoriaCobro();case 1:o=a.v,e.columnDefs=[{headerName:"Id",field:"ID_CATEGORIA_ANO",width:50},{headerName:"Categoría",field:"CATEGORIA",width:200},{headerName:"Año",field:"ANIO",width:70},{headerName:"Nivel",field:"INSTRUDES",width:120},{headerName:"Grado",field:"GRADODES",width:120},{headerName:"Sección",field:"SECCIONDES",width:80},{headerName:"Moneda",field:"MONEDA",width:80},{headerName:"Monto",field:"MONTO",width:80,valueFormatter:F.toFixed,cellClass:"text-right"},{headerName:"Desc.",field:"DESCUENTO",width:80,valueFormatter:F.toFixed,cellClass:"text-right"},{cellRenderer:te.A,cellRendererParams:{icon:"edit",onClick:function(){var a=U()(S()().m(function a(o){return S()().w(function(a){while(1)switch(a.n){case 0:return e.form.ID_CATEGORIA_ANO=o.data.ID_CATEGORIA_ANO,e.mode="update",e.clear(),a.n=1,e.editarCategoriaCobro(o.data);case 1:return a.a(2)}},a)}));function o(e){return a.apply(this,arguments)}return o}()},filter:!1,width:50},{cellRenderer:te.A,cellRendererParams:{icon:"delete",onClick:function(){var a=U()(S()().m(function a(o){return S()().w(function(a){while(1)switch(a.n){case 0:e.$confirm("¿Esta seguro de eliminar la categoría?","delete").onOk(U()(S()().m(function a(){var t,r;return S()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,k.$http.delete("api/CategoriaCobroController/deleteCategoriaAno",{params:{params:{id:o.data.ID_CATEGORIA_ANO}}});case 1:return t=a.v,a.n=2,e.getCategoriaCobro();case 2:e.rowData=a.v,e.$alert(t.message,"success"),a.n=4;break;case 3:a.p=3,r=a.v,e.$alert(r.error.message);case 4:return a.a(2)}},a,null,[[0,3]])})));case 1:return a.a(2)}},a)}));function o(e){return a.apply(this,arguments)}return o}()},filter:!1,width:50}],e.rowData=o;case 2:return a.a(2)}},a)}))()},onGridReadyModal:function(e){this.apiModal=e.api,this.apiModal.sizeColumnsToFit()},getSecciones:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,me["default"].API_SECCIONES(e.form.GRADOCOD,e.form.INSTRUCOD);case 1:e.secOp=a.v;case 2:return a.a(2)}},a)}))()},getConceptos:function(){return U()(S()().m(function e(){var a;return S()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,k.$http.get("api/concobroController/getConceptos",{params:{parametros:{response:"data",activo:1}}});case 1:return a=e.v,e.a(2,a)}},e)}))()},getMonedas:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,me["default"].API_MONEDAS();case 1:e.monOption=a.v;case 2:return a.a(2)}},a)}))()},getGrados:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,me["default"].API_GRADOS(e.form.INSTRUCOD);case 1:e.gradOption=a.v;case 2:return a.a(2)}},a)}))()},registrarCategoria:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.validarCategoria();case 1:e.$confirm("¿ Estas seguro de registrar la categoría?").onOk(U()(S()().m(function a(){var o,t,r,n;return S()().w(function(a){while(1)switch(a.p=a.n){case 0:return o=e.apiModal.getSelectedRows(),a.p=1,t={form:{ANO:e.form.ANO,INSTRUCOD:e.form.INSTRUCOD,GRADOCOD:e.form.GRADOCOD,SECCIONCOD:e.form.SECCIONCOD,MONCOD:e.form.MONCOD,MONTO:e.form.MONTO,DESCUENTO:e.form.DESCUENTO,PERIODO_PAGO:1,ID_CATEGORIA:e.form.ID_CATEGORIA,TIPO_DESCUENTO:e.form.TIPO_DESCUENTO,MES_DESCUENTO:e.form.MES_DESCUENTO,GRATUITO:e.form.GRATUITO,FLAG_FECVEN:e.form.FLAG_FECVEN,FECVEN:(0,y.convertToYMD)(e.form.FECVEN)},conceptos:o.map(function(e){return e.CONCOB})},a.n=2,k.$http.post("api/CategoriaCobroController/addCategoriaAno",{data:t});case 2:return r=a.v,a.n=3,e.clear();case 3:return a.n=4,e.getConceptos();case 4:return e.rowDataModal=a.v,a.n=5,e.getCategoriaCobro();case 5:e.rowData=a.v,e.$alert(r.message,"success"),a.n=7;break;case 6:a.p=6,n=a.v,e.$alert(n.error.message,"warning");case 7:return a.a(2)}},a,null,[[1,6]])})));case 2:return a.a(2)}},a)}))()},validarCategoria:function(){try{if(!this.form.ANO)throw new Error("No se seleccionó el año","warning");if(!this.form.ID_CATEGORIA)throw new Error("No se seleccionó la categoria","warning");if(!this.form.INSTRUCOD)throw new Error("No seleccionó el nivel","warning");if(!this.form.GRADOCOD)throw new Error("No seleccionó el grado","warning");if(!this.form.SECCIONCOD)throw new Error("No seleccionó la seccion","warning");if(!this.form.MONCOD)throw new Error("No seleccionó la moneda","warning");if(0===this.apiModal.getSelectedRows().length)throw new Error("No se seleccionó ningun concepto para la categoría","warning");if(Number(this.form.MONTO)>0&&1===this.form.GRATUITO)throw new Error("No puede registrar una categoria gratuita con un monto mayor a 0","warning");if(0===Number(this.form.MONTO)&&0===this.form.GRATUITO)throw new Error("Debe de marcar la categoria como gratuita si el monto es 0","warning");if(Number(this.form.MONTO)<0)throw new Error("No ingreso el monto del concepto","warning")}catch(e){throw new Error(e.message)}},nuevaCategoria:function(){return this.registrarCategoria()},updateCalendario:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:e.$confirm("Estas seguro de guardar los cambios?").onOk(U()(S()().m(function a(){var o,t,r,n;return S()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,o=e.apiModal.getSelectedRows(),0!==o.length){a.n=1;break}return a.a(2,e.$alert("No se seleccionó ningun concepto","warning"));case 1:return t={form:{ID_CATEGORIA_ANO:e.form.ID_CATEGORIA_ANO,ANO:e.form.ANO,INSTRUCOD:e.form.INSTRUCOD,GRADOCOD:e.form.GRADOCOD,SECCIONCOD:e.form.SECCIONCOD,MONCOD:e.form.MONCOD,MONTO:e.form.MONTO,DESCUENTO:e.form.DESCUENTO,PERIODO_PAGO:1,ID_CATEGORIA:e.form.ID_CATEGORIA,TIPO_DESCUENTO:e.form.TIPO_DESCUENTO,MES_DESCUENTO:e.form.MES_DESCUENTO,GRATUITO:e.form.GRATUITO,FLAG_FECVEN:e.form.FLAG_FECVEN,FECVEN:(0,y.convertToYMD)(e.form.FECVEN)},conceptos:o.map(function(e){return e.CONCOB})},a.n=2,k.$http.post("api/CategoriaCobroController/actualizarCategoriaCobro",{params:t});case 2:return r=a.v,e.openModal=!1,a.n=3,e.getCategoriaCobro();case 3:e.rowData=a.v,e.$alert(r.message,"success"),a.n=5;break;case 4:a.p=4,n=a.v,e.$alert(n.error.message,"warning");case 5:return a.a(2)}},a,null,[[0,4]])})));case 1:return a.a(2)}},a)}))()},submit:function(){var e=this;return U()(S()().m(function a(){var o;return S()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,e.validarCategoria();case 1:if("insert"!==e.mode){a.n=3;break}return a.n=2,e.nuevaCategoria();case 2:return a.a(2,a.v);case 3:return a.n=4,e.updateCalendario();case 4:return a.a(2,a.v);case 5:a.p=5,o=a.v,e.$alert(o.message,"warning");case 6:return a.a(2)}},a,null,[[0,5]])}))()},seleccionarConceptos:function(e){this.apiModal.forEachNode(function(a){return a.setSelected(e.includes(a.data.CONCOB))})},setCategoriaEditar:function(e){var a=this;return U()(S()().m(function o(){return S()().w(function(o){while(1)switch(o.n){case 0:return a.form.ID_CATEGORIA=e.ID_CATEGORIA,a.form.ANO=e.ANO,a.form.INSTRUCOD=e.INSTRUCOD,o.n=1,a.getGrados();case 1:return a.form.GRADOCOD=e.GRADOCOD,o.n=2,a.getSecciones();case 2:a.form.SECCIONCOD=e.SECCIONCOD,a.form.MONCOD=e.MONCOD,a.form.MONTO=e.MONTO,a.form.DESCUENTO=e.DESCUENTO,a.form.GRATUITO=e.GRATUITO,a.form.FLAG_FECVEN=e.FLAG_FECVEN,a.form.TIPO_DESCUENTO=e.TIPO_DESCUENTO,a.form.MES_DESCUENTO=e.MES_DESCUENTO,a.form.FECVEN=a.dayConverter(e.FECVEN),a.mostrarDescuentoFijo(e.TIPO_DESCUENTO);case 3:return o.a(2)}},o)}))()},editarCategoriaCobro:function(e){var a=this;return U()(S()().m(function o(){var t,r,n,i;return S()().w(function(o){while(1)switch(o.n){case 0:if(a.form.ID_CATEGORIA_ANO){o.n=1;break}return o.a(2,a.$alert("No se encontro el id de la categoria de cobro"));case 1:return o.n=2,k.$http.get("api/CategoriaCobroController/getCategoriaAno",{params:{parametros:{editar:!0,ID_CATEGORIA_ANO:e.ID_CATEGORIA_ANO}}});case 2:t=o.v,r=t.conceptos,n=t.categoria,i=t.categoriasPersonas,a.seleccionarConceptos(r),a.setCategoriaEditar(n),a.readonlyCategoria=i&&i.length>0,a.activarTabCategoriaEditar(e);case 3:return o.a(2)}},o)}))()},activarTabCategoriaEditar:function(e){this.pageHeader.tabs=[{name:"consultar",label:"consultar"},{name:"index",label:"Editar",active:!0}],this.titleEditar=this.pageHeader.title="Editando Categoria: (".concat(e.ID_CATEGORIA_ANO,") ").concat(e.CATEGORIA),this.pageHeader.mode="U",this.mode="update",this.actionTab(this.pageHeader.tabKeys.registro)},mostrarDescuentoFijo:function(){2===this.form.TIPO_DESCUENTO?this.isDescPersonalizado=!0:1===this.form.TIPO_DESCUENTO&&(this.isDescPersonalizado=!1)},clear:function(){this.form.ID_CATEGORIA="",this.form.INSTRUCOD="",this.form.GRADOCOD="",this.form.SECCIONCOD="",this.form.MONCOD="",this.form.MONTO=0,this.form.DESCUENTO=0,this.readonlyCategoria=!1,this.seleccionarConceptos([]),this.form.TIPO_DESCUENTO=1,this.form.MES_DESCUENTO="",this.form.GRATUITO=0,this.form.FLAG_FECVEN=0,this.form.FECVEN=String(me["default"].CURRENT_DAY),this.isDescPersonalizado=!1},getCategoriaCobroModal:function(){var e=this;return U()(S()().m(function a(){var o;return S()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,k.$http.get("api/CategoriaCobroController/getCategoriaCobro");case 1:o=a.v,o.map(function(a){return e.catOption.push({label:a.DESCRIPCION,value:a.ID_CATEGORIA})});case 2:return a.a(2)}},a)}))()}},beforeMount:function(){var e=this;return U()(S()().m(function a(){return S()().w(function(a){while(1)switch(a.n){case 0:return e.frameworkComponents={actionButton:te.A},e.frameworkComponentsModal={checkboxRender:ce,actionButton:te.A},e.columnDefsModal=[{width:40,headerName:"",sortable:!0,filter:!1,checkboxSelection:!0},{headerName:"Código",field:"CONCOB",width:70},{headerName:"Concepto",field:"CONDES",width:280}],a.n=1,e.getConceptos();case 1:e.rowDataModal=a.v,e.created();case 2:return a.a(2)}},a)}))()},watch:{},mounted:function(){this.getAnio(),this.getNivel(),this.getCategoriaCobroModal(),this.getConceptos(),this.getMonedas(),this.getAnio(),this.getSecciones(),this.filter.ANO=me["default"].TOKEN_YEAR&&me["default"].TOKEN_YEAR.length>0?String(me["default"].TOKEN_YEAR):String(me["default"].CURRENT_YEAR),this.actionTab()}};const Oe=(0,le.A)(Ce,[["render",I]]);var pe=Oe}}]);