"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[98270],{98270:function(e,n,o){o.r(n),o.d(n,{default:function(){return ee}});o(515);var t=o(61758),a={key:0,class:"row q-col-gutter-xs"},r={class:"row q-col-gutter-xs"},i={class:"col-xs-12"},s={class:"row sie-flat"},l={class:"col-xs-12"},c={class:"row justify-end q-pa-xs"};function u(e,n){var o=this,u=(0,t.g2)("header-btn"),d=(0,t.g2)("q-separator"),f=(0,t.g2)("filtro-pl"),m=(0,t.g2)("q-card-section"),h=(0,t.g2)("sie-table"),p=(0,t.g2)("q-card"),g=(0,t.g2)("q-btn"),v=(0,t.g2)("q-form"),C=(0,t.g2)("sie-modal"),S=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(S,{class:"movimiento-operaciones q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(p,{flat:""},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{name:"Cronograma Plan Lector",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(d),(0,t.bF)(m,null,{default:(0,t.k6)(function(){return[Object.keys(e.ngs).length>0&&e.salones.length>0?((0,t.uX)(),(0,t.CE)("div",a,[(0,t.bF)(f,{onDatosLimpiados:e.getCronogramas,dataAnos:e.listaAno,anoValue:e.ano,dataSalones:e.salones,profes:e.profes,dataTitulos:e.titulos,infoSalones:e.infoSalones,ngs:e.ngs,onNemoChanged:e.getCronogramas,tipoFiltros:!0,onSelected:e.getCronogramas,onCambiarAnio:e.cambiarAnio},null,8,["onDatosLimpiados","dataAnos","anoValue","dataSalones","profes","dataTitulos","infoSalones","ngs","onNemoChanged","onSelected","onCambiarAnio"])])):(0,t.Q3)("v-if",!0)]}),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",i,[(0,t.Lk)("div",s,[(0,t.Lk)("div",l,[(0,t.bF)(h,{ref:"ejemplares",columns:e.fields,data:e.cronogramas,config:e.config,context:o,css:{height:"calc(100vh - 221px)"},"show-search":!1},null,8,["columns","data","config"])])])])])]}),_:1})]}),_:1}),(0,t.bF)(C,{esc:"",modelValue:e.agregarModal,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.agregarModal=n}),title:e.modalTitle,css:{minWidth:"40vw",maxWidth:"40vw",minHeight:"40vh"},ok:"Guardar",onSubmit:e.guardar,escClick:!0},{default:(0,t.k6)(function(){return[(0,t.bF)(p,{flat:""},{default:(0,t.k6)(function(){return[(0,t.bF)(m,null,{default:(0,t.k6)(function(){return[(0,t.bF)(v,{class:"q-py-xs",ref:"modal"},{default:(0,t.k6)(function(){return[(0,t.bF)(f,{ref:"childRef",onDatosLimpiados:e.getCronogramas,registro:e.referenciado,dataAnos:e.listaAno,profes:e.profes,anoValue:e.ano,accionAdd:e.modoAgregar,dataSalones:e.salonesAdd,dataTitulos:e.titulos,infoSalones:e.infoSalones,ngs:e.ngs,onNemoChanged:e.getCronogramas,tipoFiltros:!1,onSelected:e.getCronogramas,onCambiarAnio:e.cambiarAnio},{footer:(0,t.k6)(function(){return[(0,t.Lk)("div",c,[(0,t.bF)(g,{color:"primary",label:"Guardar",onClick:e.guardar},null,8,["onClick"])])]}),_:1},8,["onDatosLimpiados","registro","dataAnos","profes","anoValue","accionAdd","dataSalones","dataTitulos","infoSalones","ngs","onNemoChanged","onSelected","onCambiarAnio"])]}),_:1},512)]}),_:1})]}),_:1})]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var d=o(76080),f=o.n(d),m=o(45254),h=o.n(m),p=(o(77507),o(52133),o(50310),o(6724),o(70199),o(83190),o(44264),o(7346),o(6123)),g=o(88567),v=o(95718),C=o(53380),S=o(9736),O=o(2739),b=o(982),A=o(78840),D=o(3042),F=o(16648),I=o(30640),w=o(10213),N=o(8445),k=o.n(N),E=o(58790),T=o(29104),V={class:"row col-12 q-col-gutter-sm q-pa-sm"},R={key:0,class:"col-xs-12 col-sm-4"},y={key:1,class:"col-xs-12"},U={class:"row q-gutter-xs"},L={class:"col"},q={key:2,class:"col-xs-12 col-md-4"};function x(e,n){var o=(0,t.g2)("q-select"),a=(0,t.g2)("q-input"),r=(0,t.g2)("autocomplete"),i=(0,t.g2)("q-date"),s=(0,t.g2)("q-popup-proxy"),l=(0,t.g2)("q-icon"),c=(0,t.g2)("q-tooltip"),u=(0,t.g2)("q-btn"),d=(0,t.g2)("q-time");return(0,t.uX)(),(0,t.CE)("div",V,[(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-md-2":"col-xs-12 col-md-4"))},[(0,t.bF)(o,{modelValue:e.ano,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.ano=n}),label:"Año",options:e.dataAnos,"option-value":"ANO","option-label":"ANO",onInput:e.selectAno},null,8,["modelValue","options","onInput"])],2),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-md-4":"col-xs-12 col-md-8"))},[(0,t.bF)(o,{class:"q-ma-none",rules:e.tipoFiltros?[]:[e.required],label:"Salón",type:"outlined","option-value":"value",emitValue:!1,"option-label":"label",modelValue:e.nemo,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.nemo=n}),options:e.dataSalones,onInput:e.selectSalon},null,8,["rules","modelValue","options","onInput"])],2),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-sm-6 col-md-4 col-lg-2":"col-xs-12 col-md-4"))},[(0,t.bF)(o,{class:"q-ma-none",rules:e.tipoFiltros?[]:[e.required],label:"Nivel",type:"outlined","option-value":"INSTRUCOD","option-label":"INSTRUDES",modelValue:e.nivel,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.nivel=n}),options:e.niveles,onInput:e.selectNivel},null,8,["rules","modelValue","options","onInput"])],2),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-sm-6 col-md-4 col-lg-2":"col-xs-12 col-md-4"))},[(0,t.bF)(o,{class:"q-ma-none",rules:e.tipoFiltros?[]:[e.required],label:"Grado",type:"outlined","option-value":"GRADOCOD","option-label":"GRADODES",modelValue:e.grado,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.grado=n}),options:e.grados,onInput:e.selectGrado},null,8,["rules","modelValue","options","onInput"])],2),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-sm-6 col-md-4 col-lg-2":"col-xs-12 col-md-4"))},[(0,t.bF)(o,{class:"q-ma-none",rules:e.tipoFiltros?[]:[e.required],label:"Sección",type:"outlined","option-value":"SECCIONCOD","option-label":"SECCIONDES",modelValue:e.seccion,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.seccion=n}),options:e.secciones,onInput:e.selectSeccion},null,8,["rules","modelValue","options","onInput"])],2),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-lg-2":"col-xs-12 col-md-12"))},[(0,t.bF)(o,{rules:e.tipoFiltros?[]:[e.required],modelValue:e.curso,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.curso=n}),label:"Curso",options:e.cursos,onInput:e.cambiaCurso},null,8,["rules","modelValue","options","onInput"])],2),e.tipoFiltros?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",R,[(0,t.bF)(a,{label:"N° Ingreso",modelValue:e.nroIngreso,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.nroIngreso=n}),onKeyup:(0,T.jR)(e.onEnter,["enter"])},null,8,["modelValue","onKeyup"])])),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-sm-12 col-md-4":"col-xs-12 col-md-8"))},[(0,t.bF)(r,{class:"q-ma-none",rules:e.tipoFiltros?[]:[e.required],modelValue:e.titulo,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.titulo=n}),data:e.dataTitulos,label:"Titulos",keys:e.keysComplete,onSelected:e.selected},null,8,["rules","modelValue","data","keys","onSelected"])],2),e.tipoFiltros?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",y,[(0,t.bF)(r,{class:"q-ma-none",rules:[e.required],modelValue:e.profe,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.profe=n}),data:e.profes,label:"Profesor",keys:e.keysCompleteProfe,onSelected:e.selectedProfe},null,8,["rules","modelValue","data","keys","onSelected"])])),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-sm-6 col-md-3 col-lg-2":"col-xs-12 col-md-4"))},[(0,t.bF)(a,{rules:e.tipoFiltros?[]:[e.required],label:"Fecha Inicio",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaInicio,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.fechaInicio=n}),mask:"##/##/####",readonly:""},{append:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(i,{mask:"DD/MM/YYYY",modelValue:e.fechaInicio,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.fechaInicio=n}),onInput:n[10]||(n[10]=function(n){return e.filtrarFecha("qDateProxy1")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["rules","modelValue"])],2),(0,t.Lk)("div",{class:(0,E.C4)("".concat(e.tipoFiltros?"col-xs-12 col-sm-6 col-md-3 col-lg-2":"col-xs-12 col-md-4"))},[(0,t.Lk)("div",U,[(0,t.Lk)("div",L,[(0,t.bF)(a,{rules:e.tipoFiltros?[]:[e.required],label:"Fecha Fin",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaFin,"onUpdate:modelValue":n[14]||(n[14]=function(n){return e.fechaFin=n}),mask:"##/##/####",readonly:""},{append:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(i,{mask:"DD/MM/YYYY",modelValue:e.fechaFin,"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.fechaFin=n}),onInput:n[13]||(n[13]=function(n){return e.filtrarFecha("qDateProxy2")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["rules","modelValue"])]),e.tipoFiltros?((0,t.uX)(),(0,t.Wv)(u,{key:0,class:"q-pa-sm",icon:"broom",size:"10px",color:"primary",onClick:e.limpiar},{default:(0,t.k6)(function(){return[(0,t.bF)(c,null,{default:(0,t.k6)(function(){return k()(n[17]||(n[17]=[(0,t.eW)("Limpiar",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0)])],2),e.tipoFiltros?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",q,[(0,t.bF)(a,{rules:[e.required],modelValue:e.hora,"onUpdate:modelValue":n[16]||(n[16]=function(n){return e.hora=n}),label:"Hora",format:"##:## SS",mask:"##:## SS",readonly:""},{append:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"cursor-pointer",name:"timer"},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{"transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(d,{mask:"hh:mm A",modelValue:e.hora,"onUpdate:modelValue":n[15]||(n[15]=function(n){return e.hora=n})},null,8,["modelValue"])]}),_:1})]}),_:1})]}),_:1},8,["rules","modelValue"])]))])}var P=o(57008),M=o.n(P),G=(o(71225),o(10239),o(5962),o(95477)),_=o(18105),Q=o(4437),j=o(39893),$=o(23564),H=o(26319),Y={emits:["cambiarAnio","selected"],props:{tipoFiltros:{type:Boolean,default:!1},accionAdd:{type:Boolean,default:!1},registro:{type:Object,default:function(){return{}}},ngs:{type:Object,default:function(){return{}}},dataAnos:{type:Array,default:function(){return[]}},dataSalones:{type:Array,default:function(){return[]}},profes:{type:Array,default:function(){return[]}},infoSalones:{type:Array,default:function(){return[]}},dataTitulos:{type:Array,default:function(){return[]}},anoValue:{type:String,default:""}},components:{autocomplete:D.A,QSelect:F.A,QTime:$.A,sieModal:I.A,QDate:Q.A,confirm:w.confirm,QDatetime:p.T5,QInput:S.A,QPopupProxy:G.A,dateFilter:_.Ay,QIcon:p.bP,QBtn:p.Il,QTooltip:p.nC},data:function(){return{required:j.require,niveles:[],grados:[],secciones:[],fichacod:"",nivel:"",grado:"",seccion:"",cursos:[],curso:"",fechaInicio:"",fechaFin:"",titulo:"",keysComplete:["TITULO","FICHACOD"],keysCompleteProfe:["NOMCOMP","ID_PERSONA"],filter:{ANO:"2024"},ano:"",nemo:"",hora:"",profe:"",id_persona:"",nroIngreso:"",profeValido:!1,valorTodos:"",defaultNiveles:{INSTRUDES:"Seleccione",INSTRUCOD:""},defaultGrados:{GRADODES:"Todos",GRADOCOD:""},defaultSecciones:{SECCIONDES:"Todos",SECCIONCOD:""}}},methods:{onEnter:function(){},limpiar:function(){this.cursos=[],this.curso="",this.titulo="",this.profe="",this.profcod="",this.profeValido=!1,this.nivel="",this.grado="",this.nemo="",this.hora="",this.fichacod="",this.fechaInicio="",this.fechaFin="",this.nivel="",this.grado="",this.seccion="",this.id_persona=""},selectAno:function(){var e=this;return h()(f()().m(function n(){return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$emit("cambiarAnio",e.ano,e.tipoFiltros);case 1:return n.a(2)}},n)}))()},cambiaCurso:function(e){var n=this;return h()(f()().m(function e(){return f()().w(function(e){while(1)switch(e.n){case 0:n.emitir();case 1:return e.a(2)}},e)}))()},selected:function(e){this.titulo=e.TITULO,this.fichacod=e.FICHACOD,this.emitir()},selectedProfe:function(e){this.profeValido=!0,this.profe=e.NOMCOMP,this.profcod=e.CODIGO,this.id_persona=e.ID_PERSONA},getNiveles:function(){for(var e in this.niveles=[],this.ngs)this.niveles.push(this.ngs[e]);var n=this.defaultNiveles;this.niveles.unshift(n)},getGrados:function(){for(var e in this.ngs)this.grados.push(this.ngs[e]);this.grados.unshift(this.defaultGrados)},emitir:function(){this.tipoFiltros&&this.$emit("selected",{curso:this.curso,titulo:this.titulo,profe:this.profe,profcod:this.profcod,nivel:this.nivel,grado:this.grado,nemo:this.nemo===this.valorTodos?"":this.nemo,hora:this.hora,ano:this.ano,fechaInicio:this.fechaInicio,fechaFin:this.fechaFin})},selectNivel:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.grados=[],this.secciones=[],e&&""!==e){var t=this.ngs[e].GRADOS?this.ngs[e].GRADOS:[];for(var a in t)this.grados.push(t[a])}this.grados.unshift(this.defaultGrados),this.secciones.unshift(this.defaultSecciones),this.grado="",this.seccion="",n&&(this.nemo=this.valorTodos),o&&this.emitir()},selectGrado:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],t=this.nivel;if(this.secciones=[],e){var a,r=null===(a=this.ngs[t])||void 0===a||null===(a=a.GRADOS[e])||void 0===a?void 0:a.SECCIONES;for(var i in r)this.secciones.push(r[i])}this.secciones.unshift(this.defaultSecciones),this.seccion="",n&&(this.nemo=this.valorTodos),this.getCourses(),o&&this.emitir()},selectSeccion:function(e){var n=this;return h()(f()().m(function o(){var t,a;return f()().w(function(o){while(1)switch(o.n){case 0:t=n.nivel,a=n.grado,""!==e&&(n.nemo=n.ngs[t].GRADOS[a].SECCIONES[e].NEMO),n.emitir();case 1:return o.a(2)}},o)}))()},selectSalon:function(e){var n=arguments,o=this;return h()(f()().m(function t(){var a,r,i,s;return f()().w(function(t){while(1)switch(t.n){case 0:a=!(n.length>1&&void 0!==n[1])||n[1],0===Object.keys(e).length||e.value===o.valorTodos?(o.nemo=o.valorTodos,o.setTodos(a)):(o.nemo=e.value,r=e.INSTRUCOD,i=e.GRADOCOD,s=e.SECCIONCOD,o.nivel=r,o.selectNivel(r,!1,!1),o.grado=i,o.selectGrado(i,!1,!1),o.seccion=s,a&&o.emitir());case 1:return t.a(2)}},t)}))()},setTodos:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n="";this.nivel=n,this.grado=n,this.seccion=n,0===this.grados.length&&this.grados.unshift(this.defaultGrados),0===this.secciones.length&&this.secciones.unshift(this.defaultSecciones),e&&this.emitir()},filtrarFecha:function(e){var n=this;return h()(f()().m(function o(){var t,a;return f()().w(function(o){while(1)switch(o.n){case 0:if(t=new Date(n.fechaInicio.split("/").reverse().join("-")),a=new Date(n.fechaFin.split("/").reverse().join("-")),!(a.getTime()<t.getTime())){o.n=1;break}return(0,b["default"])("La fecha de devolución no puede ser menor a la fecha de préstamo","warning"),n.fechaFin="",o.a(2,0);case 1:if(a.getTime()!==t.getTime()){o.n=2;break}return n.fechaFin="",(0,b["default"])("La fecha de devolución no puede ser igual a la fecha de préstamo","warning"),o.a(2,0);case 2:n.$refs[e].hide(),n.emitir();case 3:return o.a(2)}},o)}))()},getCourses:function(){var e=this;return h()(f()().m(function n(){var o,t,a;return f()().w(function(n){while(1)switch(n.n){case 0:if(o=e.tipoFiltros?"Todos":"- Seleccione un curso -",e.cursos=[{label:o,value:""}],t={},e.nivel&&(t.instrucod=e.nivel),e.grado&&(t.gradocod=e.grado),e.nemo&&(t.nemo=e.nemo),t.nemo||t.instrucod&&t.gradocod){n.n=1;break}return n.a(2);case 1:if(t.ano=e.ano,!(Object.keys(t).length<=1)){n.n=2;break}return n.a(2,0);case 2:return n.n=3,e.$http.get("api/CursoController/getCursosNemoNG",{params:{params:M()({},t)}});case 3:a=n.v,a.map(function(n){var o={label:n.CURSONOM,value:n.CURSOCOD};e.cursos.push(o)});case 4:return n.a(2)}},n)}))()},accion:function(e){var n=this;return h()(f()().m(function o(){var t,a;return f()().w(function(o){while(1)switch(o.n){case 0:if(!n.registro.NEMO){o.n=2;break}return o.n=1,n.actualizar(e);case 1:return t=o.v,o.a(2,t);case 2:return o.n=3,n.agregar();case 3:return a=o.v,o.a(2,a);case 4:return o.a(2)}},o)}))()},agregar:function(){var e=this;return h()(f()().m(function n(){var o,t,a,r,i;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.nemo){n.n=1;break}return(0,b["default"])("Seleccione un salón","warning"),n.a(2);case 1:if(e.id_persona){n.n=2;break}return(0,b["default"])("Debe indicar un profesor","success",e.id_persona),n.a(2);case 2:if(o=e.validaLibroExistente(),o){n.n=3;break}return n.a(2,0);case 3:if(e.profeValido){n.n=4;break}return(0,b["default"])("No se encontro el profesor, Seleccione Otro","warning"),n.a(2,0);case 4:return t=e.dataSave(),n.p=5,n.n=6,e.$http.post("api/CronogramaPlanLectorController/addCronogramaPlanLector",{data:t});case 6:return a=n.v,r=a.message,(0,b["default"])(r,"success"),n.a(2,1);case 7:return n.p=7,i=n.v,(0,b["default"])(i.message,"warning"),n.a(2,0)}},n,null,[[5,7]])}))()},validaLibroExistente:function(){for(var e=0;e<this.dataTitulos.length;e++){var n=this.dataTitulos[e];if(n.TITULO===this.titulo)return!0}return(0,b["default"])("No se encontro el libro, Seleccione otro","warning"),!1},dataSave:function(){return{ano:this.ano,nemo:this.nemo,fichacod:this.fichacod,cursocod:this.curso,fecprestamo:this.fechaInicio.split("/").reverse().join("-"),fecdevolucion:this.fechaFin.split("/").reverse().join("-"),profesor:this.profcod,hora:(0,H.date)().convertTime(this.hora),id_persona:this.id_persona}},actualizar:function(e){var n=this;return h()(f()().m(function o(){var t,a,r,i;return f()().w(function(o){while(1)switch(o.p=o.n){case 0:if(n.nemo){o.n=1;break}return(0,b["default"])("Seleccione un salón","warning"),o.a(2);case 1:if(n.id_persona){o.n=2;break}return(0,b["default"])("Debe indicar un profesor","success",n.id_persona),o.a(2);case 2:return t=n.dataSave(),t.id=e.ID,o.p=3,o.n=4,n.$http.post("api/CronogramaPlanLectorController/updateCronogramaPlanLector",{params:M()({},t)});case 4:return a=o.v,r=a.message,(0,b["default"])(r,"success"),o.a(2,1);case 5:return o.p=5,i=o.v,(0,b["default"])(i.message,"warning"),o.a(2,0)}},o,null,[[3,5]])}))()},loadData:function(){var e=this;return h()(f()().m(function n(){var o;return f()().w(function(n){while(1)switch(n.n){case 0:if(!e.tipoFiltros&&!e.accionAdd&&e.registro.NEMO){n.n=1;break}return n.a(2);case 1:return e.ano=e.registro.ANO,o=e.dataSalones.filter(function(n){return n.value===e.registro.NEMO}),n.n=2,e.selectSalon(o.length>0?o[0]:{},!1);case 2:e.titulo=e.registro.TITULO,e.profe=e.registro.NOMCOMP,e.fichacod=e.registro.FICHACOD,e.curso=e.registro.CURSOCOD,e.hora=e.registro.HORA?(0,H.date)(e.registro.HORA).shortTimePeru.toUpperCase():null,e.curso=e.registro.CURSOCOD,e.id_persona=e.registro.ID_PERSONA,e.fechaInicio=e.registro.FECPRESTAMO.split("/").reverse().join("-"),e.fechaFin=e.registro.FECDEVOLUCION.split("/").reverse().join("-");case 3:return n.a(2)}},n)}))()}},watch:{anoValue:{immediate:!0,handler:function(e){this.ano=e;var n=this.tipoFiltros?"Todos":"Seleccione";this.defaultNiveles.INSTRUDES=n,this.defaultGrados.GRADODES=n,this.defaultSecciones.SECCIONDES=n,this.limpiar(),this.valorTodos="",this.getNiveles(),this.selectSalon({},!1),this.loadData()}}}},B=o(12807);const X=(0,B.A)(Y,[["render",x]]);var W=X,J={data:function(){var e=this;return{config:{FECPRESTAMO:{component:"date",edit:!1},FECDEVOLUCION:{component:"date",edit:!1},ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],tooltip:{eliminar:"Eliminar",editar:"Editar"},eliminar:function(){var n=h()(f()().m(function n(o,t){return f()().w(function(n){while(1)switch(n.n){case 0:e.$confirm("¿Esta seguro de eliminar el registro? este proceso es irreversible","delete",!1,!1,"Eliminar Cronograma").onOk(h()(f()().m(function n(){return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.deleteCronograma(t);case 1:return n.a(2)}},n)})));case 1:return n.a(2)}},n)}));function o(e,o){return n.apply(this,arguments)}return o}(),editar:function(){var n=h()(f()().m(function n(o,t){return f()().w(function(n){while(1)switch(n.n){case 0:e.referenciado=t,e.modalTitle="Editar Cronograma",e.modoAgregar=!1,e.agregarModal=!0;case 1:return n.a(2)}},n)}));function o(e,o){return n.apply(this,arguments)}return o}(),flat:!0,dense:!0},FH_REGISTRO:{component:"date",edit:!1,flat:!0,dense:!0}},fields:[{name:"TITULO",label:"Libro",field:"TITULO",align:"left"},{name:"NEMODES",label:"Salon",field:"NEMODES",align:"left"},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left"},{name:"FECPRESTAMO",label:"Prestamo",field:"FECPRESTAMO",align:"center"},{name:"FECDEVOLUCION",label:"Retorno",field:"FECDEVOLUCION",align:"center"},{name:"DISPONIBLES",label:"Ejemp",field:"DISPONIBLES",align:"center"},{name:"ALUMNOS",label:"Alumno",field:"ALUMNOS",align:"center"},{name:"NOMCOMP",label:"Profe",field:"NOMCOMP",align:"left"},{name:"ACTION",label:"Acciones",field:"ACTION",align:"center"}]}}},z=o(57668),K={mixins:[J],components:{filtroPl:W,QCard:g.A,QCardSection:v.A,QSeparator:C.A,QInput:S.A,notify:b["default"],confirm:w.confirm,QSelect:F.A,QForm:O.A,sieModal:I.A,autocomplete:D.A,actionButton:A.A,QPage:p.Tu,QBtn:p.Il},computed:{},data:function(){return{sie:(0,z["default"])(),modoAgregar:!0,modalTitle:"Agregar Cronograma",form:"",agregarModal:!1,referenciado:{hora:new Date},buttons:[{icon:"add",label:"Agregar",click:this.addCronograma}],nivel:"",grado:"",cronogramas:[],ano:"",anoActual:"",ngs:{},salones:[],salonesAdd:[],infoSalones:[],listaAno:[],titulos:[],profes:[]}},methods:{getListaAno:function(){var e=this;return h()(f()().m(function n(){var o,t;return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/HyoAnos/obtAnos");case 1:o=n.v,t=o.json,e.listaAno=t;case 2:return n.a(2)}},n)}))()},getCronogramas:function(e){var n=this;return h()(f()().m(function o(){return f()().w(function(o){while(1)switch(o.n){case 0:return e.fechaInicio=e.fechaInicio?e.fechaInicio.split("/").reverse().join("-"):"",e.fechaFin=e.fechaFin?e.fechaFin.split("/").reverse().join("-"):"",o.n=1,n.$http.get("api/CronogramaPlanLectorController/getCronogramasPl",{params:{params:e}});case 1:n.cronogramas=o.v;case 2:return o.a(2)}},o)}))()},generarNgs:function(e){return h()(f()().m(function n(){var o;return f()().w(function(n){while(1)switch(n.n){case 0:return o={},e.map(function(e){o[e.INSTRUCOD]||(o[e.INSTRUCOD]={INSTRUCOD:e.INSTRUCOD,INSTRUDES:e.INSTRUDES,GRADOS:{}}),o[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]||(o[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]={GRADOCOD:e.GRADOCOD,GRADODES:e.GRADODES,SECCIONES:{}}),o[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]["SECCIONES"][e.SECCIONCOD]||(o[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]["SECCIONES"][e.SECCIONCOD]={SECCIONCOD:e.SECCIONCOD,SECCIONDES:e.SECCIONDES,NEMO:e.NEMO})}),n.a(2,o)}},n)}))()},getDataSalones:function(e){var n=this;return h()(f()().m(function o(){var t;return f()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$http.get("api/SalonController/getDataSalones",{params:{anio:e}});case 1:t=o.v,n.salones=JSON.parse(JSON.stringify(t)),n.salonesAdd=JSON.parse(JSON.stringify(t)),n.salones.unshift({label:"Todos",value:""}),n.salonesAdd.unshift({label:"- Seleccione salón -",value:""});case 2:return o.a(2)}},o)}))()},getInfoSalones:function(e){var n=this;return h()(f()().m(function o(){return f()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$http.get("api/SalonController/getInfoSalones",{params:{parametros:{anio:e}}});case 1:n.infoSalones=o.v;case 2:return o.a(2)}},o)}))()},cambiarAnio:function(e){var n=arguments,o=this;return h()(f()().m(function t(){var a;return f()().w(function(t){while(1)switch(t.n){case 0:if(a=n.length>1&&void 0!==n[1]&&n[1],e!==o.ano){t.n=1;break}return t.a(2);case 1:return o.ano=e,a&&o.getCronogramas({ano:o.ano}),t.n=2,o.getDataSalones(e);case 2:return t.n=3,o.getInfoSalones(e);case 3:return t.n=4,o.generarNgs(o.infoSalones);case 4:o.ngs=t.v;case 5:return t.a(2)}},t)}))()},addCronograma:function(){var e=this;return h()(f()().m(function n(){return f()().w(function(n){while(1)switch(n.n){case 0:e.anoActual!==e.ano&&e.cambiarAnio(e.sie.ano.toString()),e.referenciado={},e.modoAgregar=!0,e.modalTitle="Agregar Cronograma",e.agregarModal=!0;case 1:return n.a(2)}},n)}))()},guardar:function(){var e=this;return h()(f()().m(function n(){var o,t;return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.modal.validate();case 1:if(o=n.v,o){n.n=2;break}return(0,b["default"])("Por favor, complete los campos requeridos","warning"),n.a(2);case 2:return n.n=3,e.$refs.childRef.accion(e.referenciado);case 3:if(t=n.v,!t){n.n=4;break}return n.n=4,e.getCronogramas({ano:e.ano});case 4:e.agregarModal=1!==t;case 5:return n.a(2)}},n)}))()}},created:function(){var e=this;return h()(f()().m(function n(){return f()().w(function(n){while(1)switch(n.n){case 0:return e.anoActual=e.sie.ano.toString(),e.getListaAno(),e.cambiarAnio(e.anoActual,!0),n.n=1,e.$http.get("api/ProfeController/getListProfe");case 1:return e.profes=n.v,n.n=2,e.$http.get("api/MantenimientosController/getTitulos");case 2:e.titulos=n.v;case 3:return n.a(2)}},n)}))()}};const Z=(0,B.A)(K,[["render",u]]);var ee=Z}}]);