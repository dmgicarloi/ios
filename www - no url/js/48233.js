"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[48233],{48233:function(e,o,a){a.r(o),a.d(o,{default:function(){return B}});var l=a(61758),n=a(58790),t={class:"row q-col-gutter-sm"},i={class:"col-md-3 col-xs-6"},s={class:"col-md-3 col-xs-6"},c={class:"col-md-3 col-xs-6"},u={class:"col-md-3 col-xs-6"},r={class:"col-md-3 col-xs-6"},d={class:"col-md-3 col-xs-6"},p={class:"col-md-3 col-xs-12"},b={class:"row q-col-gutter-sm"},m={class:"col-12"},v={class:"col-md-3 col-xs-6"},f={class:"col-md-3 col-xs-6"},g={class:"col-md-3 col-xs-6"},O={class:"col-md-3 col-xs-6"},h={class:"col-md-3 col-xs-6"},D={class:"col-md-3 col-xs-6"},C={class:"col-md-3 col-xs-12"};function A(e,o){var a=this,A=(0,l.g2)("header-btn"),x=(0,l.g2)("q-tab"),E=(0,l.g2)("q-tabs"),V=(0,l.g2)("q-select"),S=(0,l.g2)("q-checkbox"),R=(0,l.g2)("sie-table"),I=(0,l.g2)("q-tab-panel"),k=(0,l.g2)("q-tab-panels"),w=(0,l.g2)("q-card-section"),T=(0,l.g2)("q-card"),L=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(L,{class:"column col q-pa-sm excelDatosAtenciones"},{default:(0,l.k6)(function(){return[(0,l.bF)(T,{class:"column col",dense:"",flat:"",bordered:""},{default:(0,l.k6)(function(){return[(0,l.bF)(A,{name:"Exportación a Excel - Datos y Atenciones",buttons:e.buttonsDatos},null,8,["buttons"]),(0,l.bF)(w,{class:"col column no-padding"},{default:(0,l.k6)(function(){return[(0,l.bF)(E,{class:"q-caption",modelValue:e.tab,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.tab=o}),align:"left",onInput:e.changeTab,"inline-label":"",stretch:"",breakpoint:"400"},{default:(0,l.k6)(function(){return[(0,l.bF)(x,{name:"alu_med",label:"Datos Médicos Estudiante"}),(0,l.bF)(x,{name:"atenciones",label:"Atenciones Medicas"})]}),_:1},8,["modelValue","onInput"]),(0,l.bF)(k,{class:"col column",modelValue:e.tab,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.tab=o}),animated:"",infinite:"",swipeable:""},{default:(0,l.k6)(function(){return[(0,l.bF)(I,{class:"col column",name:"alu_med"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",t,[(0,l.Lk)("div",i,[(0,l.bF)(V,{modelValue:e.ano,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.ano=o}),label:"Año",options:e.anoOpt,"option-value":"ANO","option-label":"ANO"},null,8,["modelValue","options"])]),(0,l.Lk)("div",s,[(0,l.bF)(V,{modelValue:e.nivel,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.nivel=o}),label:"Nivel",options:e.nivelOpt,"option-value":"INSTRUCOD","option-label":"INSTRUDES",onInput:e.cambiarNivel},null,8,["modelValue","options","onInput"])]),(0,l.Lk)("div",c,[(0,l.bF)(V,{modelValue:e.grado,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.grado=o}),label:"Grado",options:e.gradoOpt,"option-value":"GRADOCOD","option-label":"GRADODES"},null,8,["modelValue","options"])]),(0,l.Lk)("div",u,[(0,l.bF)(V,{modelValue:e.seccion,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.seccion=o}),label:"Sección",options:e.seccionOpt,"option-value":"SECCIONCOD","option-label":"SECCIONDES"},null,8,["modelValue","options"])]),(0,l.Lk)("div",r,[(0,l.bF)(V,{modelValue:e.situacion,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.situacion=o}),label:"Situacion",options:e.situacionOpt},null,8,["modelValue","options"])]),(0,l.Lk)("div",d,[(0,l.bF)(V,{modelValue:e.hijo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.hijo=o}),label:"Ubicación del hijo",options:e.hijoOpt,"option-value":"HIJOCOD","option-label":"HIJODES"},null,8,["modelValue","options"])]),(0,l.Lk)("div",p,[(0,l.bF)(S,{modelValue:e.nuevos,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.nuevos=o}),label:"Solo Nuevos",dense:""},null,8,["modelValue"])])]),(0,l.Lk)("div",{class:(0,n.C4)(["row col",[{"q-col-gutter-x-sm q-mt-sm":!e.isLess,"q-col-gutter-y-sm q-pt-sm":e.isLess}]])},[(0,l.Lk)("div",{class:(0,n.C4)([{"col-xs-12":e.isLess,"col-6 column":!e.isLess}])},[(0,l.bF)(R,{class:"col",dense:"",flat:"",bordered:"",ref:"sieTable","row-key":"DESCRIPCION",selection:"multiple",context:a,"show-search":!1,columns:e.medicDataColumns,data:e.medicDataRows,selected:e.seleccionados,"onUpdate:selected":o[8]||(o[8]=function(o){return e.seleccionados=o}),"table-style":e.ajusteAlturaTabla,config:e.medicDataConfig},null,8,["columns","data","selected","table-style","config"])],2),(0,l.Lk)("div",{class:(0,n.C4)([{"col-xs-12":e.isLess,"col-6 column":!e.isLess}])},[(0,l.bF)(R,{class:"col",dense:"",flat:"",bordered:"",ref:"exportTable","show-search":!1,"row-key":"DESCRIPCION",selection:"multiple",context:a,columns:e.medicDataColumns,data:e.exportRows,selected:e.seleccionados,"onUpdate:selected":o[9]||(o[9]=function(o){return e.seleccionados=o}),"table-style":e.ajusteAlturaTabla,config:e.medicDataConfig},null,8,["columns","data","selected","table-style","config"])],2)],2)]}),_:1}),(0,l.bF)(I,{name:"atenciones"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",b,[(0,l.Lk)("div",m,[(0,l.bF)(V,{modelValue:e.paciente,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.paciente=o}),label:"Tipo Paciente",options:e.pacienteOpt,onInput:e.cambiarPaciente},null,8,["modelValue","options","onInput"])]),(0,l.Lk)("div",v,[(0,l.bF)(V,{modelValue:e.ano,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.ano=o}),label:"Año",options:e.anoOpt,"option-value":"ANO","option-label":"ANO"},null,8,["modelValue","options"])]),(0,l.Lk)("div",f,[(0,l.bF)(V,{disable:"0000"!==e.paciente,modelValue:e.nivel,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.nivel=o}),label:"Nivel",options:e.nivelOpt,"option-value":"INSTRUCOD","option-label":"INSTRUDES"},null,8,["disable","modelValue","options"])]),(0,l.Lk)("div",g,[(0,l.bF)(V,{disable:"0000"!==e.paciente,modelValue:e.grado,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.grado=o}),label:"Grado",options:e.gradoOpt,"option-value":"GRADOCOD","option-label":"GRADODES"},null,8,["disable","modelValue","options"])]),(0,l.Lk)("div",O,[(0,l.bF)(V,{disable:"0000"!==e.paciente,modelValue:e.seccion,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.seccion=o}),label:"Seccion",options:e.seccionOpt,"option-value":"SECCIONCOD","option-label":"SECCIONDES"},null,8,["disable","modelValue","options"])]),(0,l.Lk)("div",h,[(0,l.bF)(V,{disable:"003"===e.paciente,modelValue:e.situacion,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.situacion=o}),label:"Situacion",options:e.situacionOpt},null,8,["disable","modelValue","options"])]),(0,l.Lk)("div",D,[(0,l.bF)(V,{disable:"0000"!==e.paciente,modelValue:e.hijo,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.hijo=o}),label:"Ubicación del hijo",options:e.hijoOpt,"option-value":"HIJOCOD","option-label":"HIJODES"},null,8,["disable","modelValue","options"])]),(0,l.Lk)("div",C,[(0,l.bF)(S,{modelValue:e.nuevos,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.nuevos=o}),label:"Solo Nuevos",dense:"",disable:"0000"!=e.paciente},null,8,["modelValue","disable"])])])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})}var x=a(76080),E=a.n(x),V=a(45254),S=a.n(V),R=(a(30683),a(52133),a(10239),a(89571),a(50310),a(90095),a(6724),a(83190),a(44264),a(13715),a(6123)),I=a(88567),k=a(95718),w=a(53811),T=a(43346),L=a(26697),U=a(53093),F=a(9736),P=a(3112),N=a(16648),q=a(33777),j=a(93616),H=a(81288),_=a(57668),J=a(2819),Q=a(10213),G=(0,_["default"])(),M={components:{QCard:I.A,QCardSection:k.A,QTabPanels:w.A,QTabPanel:T.A,QTabs:L.A,QTab:U.A,QInput:F.A,QSelect:N.A,confirm:Q.confirm,alert:Q.alert,sieTable:q.A,QCheckbox:P.A,sieSelect:j.A,QPageSticky:R._U,QItemSeparator:R.CL,QPage:R.Tu},data:function(){var e=this;return{sinPermiso:1===(0,_["default"])().ruta.nivel,paciente:"0000",caseExcel:"alu_med",seleccionados:[],medicDataConfig:{},medicDataColumns:[{name:"DESCRI",label:"Descripcion",field:"DESCRI",align:"center"},{name:"TABLA",label:"Tabla",field:"TABLA",align:"center",sortable:!0}],pacienteOpt:[{label:"Alumno",value:"0000"},{label:"Familia",value:"002"},{label:"Personal",value:"001"},{label:"Pacientes Externos",value:"003"}],exportRows:[],medicDataRows:[],idPersona:null,nuevos:!1,tab:"alu_med",optSeccion:[],pagination:{page:1,rowsPerPage:34},nivel:"T",ano:G.ano,grado:"T",seccion:"T",situacion:"A",hijo:"T",anoOpt:[],nivelOpt:[],gradoOpt:[{GRADODES:"Todos",GRADOCOD:"T"}],situacionOpt:[{value:"A",label:"Activos"},{value:"M",label:"Eval. Postergada"},{value:"E",label:"Ex-Alumno"},{value:"P",label:"Promovidos"},{value:"J",label:"Repitentes"},{value:"S",label:"Req. Recuperación"},{value:"R",label:"Retirados"},{value:"T",label:"Trasladados"}],hijoOpt:[{HIJODES:"Todos",HIJOCOD:"T"},{HIJODES:"Hijo Unico",HIJOCOD:"A"},{HIJODES:"Hijo Mayor",HIJOCOD:"P"},{HIJODES:"Hijo del medio",HIJOCOD:"I"},{HIJODES:"Hijo Menor",HIJOCOD:"U"}],seccionOpt:[],buttonsDatos:[{icon:"file_excel",label:"Exportar",click:function(){e.exportar()}},{icon:"chevron_left",label:"",tooltip:"Quitar",click:function(){var o=e.$refs.exportTable.rowsSelected();e.cambiarRegistros(o,e.exportRows,e.medicDataRows)},disable:this.permiso>1},{icon:"chevron_right",label:"",tooltip:"Agregar",click:function(){var o=e.$refs.sieTable.rowsSelected();e.cambiarRegistros(o,e.medicDataRows,e.exportRows)},disable:this.permiso>1,round:!0}],rows:[],title:"Datos Médicos del Alumno"}},methods:{cambiarPaciente:function(e){this.nuevos="0000"!==e&&void 0,this.cambiarCombo(e)},cambiarCombo:function(e){this.situacionOpt="0000"===e?[{value:"A",label:"Activos"},{value:"M",label:"Eval. Postergada"},{value:"E",label:"Ex-Alumno"},{value:"P",label:"Promovidos"},{value:"J",label:"Repitentes"},{value:"S",label:"Req. Recuperación"},{value:"R",label:"Retirados"},{value:"T",label:"Trasladados"}]:"001"===e?[{value:"0001",label:"Activo"},{value:"0002",label:"Retirado"}]:[{value:"A",label:"Activo"},{value:"R",label:"Retirado"},{value:"E",label:"Egresado"}]},changeTab:function(e){"alu_med"===e&&(this.cambiarCombo("0000"),this.nuevos=!1),"atenciones"===e&&(this.nuevos="0000"!==this.paciente&&void 0),this.caseExcel=e},cambiarRegistros:function(e,o,a){e.map(function(e){a.push(e)});var l=function(){var a=e[n];o.forEach(function(e,l){a.DESCRI===e.DESCRI&&o.splice(l,1)})};for(var n in e)l()},exportar:function(){var e=this;return S()(E()().m(function o(){var a,l,n;return E()().w(function(o){while(1)switch(o.n){case 0:if(e.exportRows.length||"alu_med"!==e.caseExcel){o.n=1;break}return(0,Q.alert)("No existen informacion para exportar","warning"),o.a(2);case 1:e.paciente="atenciones"===e.caseExcel?e.paciente:"0000",a={tabla:null,TIPOPER:e.paciente,ano:e.ano},e.nuevos&&(a.new="on"),"003"===e.paciente&&"atenciones"!==e.caseExcel||(a.situacion=e.situacion),"0000"!==e.paciente&&"atenciones"!==e.caseExcel||(a.jsonDataExportar=e.exportRows,a.instrucod=e.nivel,a.gradocod=e.grado,a.seccioncod=e.seccion,a.ubicacion=e.hijo),l="atenciones"===e.caseExcel?"exportarDatosAtenciones":"exportarDatosMedico",n="".concat(G.host,"/api/UtilitariosMedicoController/").concat(l),(0,J.open)({data:{parametros:a},action:n});case 2:return o.a(2)}},o)}))()},cargarCombos:function(){var e=this;return S()(E()().m(function o(){var a,l,n;return E()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/InstruController/getInstru");case 1:return a=o.v,o.n=2,e.$http.get("api/UtilitarioController/getSecciones");case 2:return l=o.v,o.n=3,e.$http.get("api/AnovacController/getAnoAdm");case 3:n=o.v,e.getGrados(),e.nivelOpt=a,e.seccionOpt=l,e.anoOpt=n;case 4:return o.a(2)}},o)}))()},cambiarNivel:function(){this.getGrados()},getGrados:function(){var e=this;return S()(E()().m(function o(){var a,l;return E()().w(function(o){while(1)switch(o.n){case 0:return a={},a.instrucod="T"===e.nivel?"%":e.nivel,o.n=1,e.$http.get("api/cierrePeriodoController/getGrados",{params:{params:a}});case 1:l=o.v,e.gradoOpt=l;case 2:return o.a(2)}},o)}))()}},computed:{permiso:function(){return this.sie.ruta.nivel},isLess:function(){return(0,H.isLess)()},ajusteAlturaTabla:function(){var e={height:"1px"};return(0,H.isLess)()&&(e={}),e}},created:function(){var e=this;return S()(E()().m(function o(){var a;return E()().w(function(o){while(1)switch(o.n){case 0:return e.ano=G.ano.toString(),e.cargarCombos(),o.n=1,e.$http.get("api/EquivaleController/getEquivale",{params:{params:{tabla:"ALU_MED"}}});case 1:a=o.v,a.map(function(e){e.CAMPOWEB=e.CAMPO,e.id=e.ORDEN}),e.medicDataRows=a;case 2:return o.a(2)}},o)}))()}},y=a(12807);const $=(0,y.A)(M,[["render",A]]);var B=$}}]);