"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[45665],{45665:function(e,n,a){a.r(n),a.d(n,{default:function(){return ge}});var r=a(61758),o={class:"row q-col-gutter-sm"},t={class:"col-xs-12 col-lg-3"},i={class:"col-xs-12 col-lg-9"},c={class:"row q-col-gutter-sm"},s={class:"col-12"},l={class:"col-12"},u={class:"col-xs-12"};function d(e,n){var a=this,d=(0,r.g2)("header-btn"),g=(0,r.g2)("q-spinner-oval"),p=(0,r.g2)("q-inner-loading"),f=(0,r.g2)("sie-table"),A=(0,r.g2)("asignacion-cursos"),m=(0,r.g2)("q-card-section"),C=(0,r.g2)("q-card"),O=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(O,{class:"planCurricular q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(C,null,{default:(0,r.k6)(function(){return[(0,r.bF)(d,{name:"Plan Curricular",buttons:e.buttons},null,8,["buttons"]),(0,r.bF)(m,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",o,[(0,r.Lk)("div",t,[(0,r.bF)(p,{visible:e.loadingGrados},{default:(0,r.k6)(function(){return[(0,r.bF)(g,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,r.bF)(f,{selection:"single",context:a,css:"height:calc(100vh - 140px)",search:"Buscar Grados",columns:e.configGrados.columnas,onRowSelected:e.areasAsociadas,data:e.dataGrados,config:e.dinamicosGrados,"load-selection":e.loadSelectionGrados},null,8,["columns","onRowSelected","data","config","load-selection"])]),(0,r.Lk)("div",i,[(0,r.Lk)("div",c,[(0,r.Lk)("div",s,[(0,r.bF)(p,{visible:e.loadingAreas},{default:(0,r.k6)(function(){return[(0,r.bF)(g,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,r.bF)(f,{class:"sticky",selection:"single",context:a,css:"height: calc(100vh - 45vh)",search:"Buscar Áreas","save-cells":"",columns:e.configAreas.columnas,onRowSelected:e.configurarSubAreas,data:e.dataAreas,permiso:"> 1",config:e.dinamicosAreas,ref:"tablaArea","load-selection":e.loadSelectionArea},null,8,["columns","onRowSelected","data","config","load-selection"])]),(0,r.Lk)("div",l,[(0,r.bF)(p,{visible:e.loadingSubAreas},{default:(0,r.k6)(function(){return[(0,r.bF)(g,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,r.bF)(f,{class:"sticky",permiso:"> 1",selection:"single",context:a,css:"height: calc(100vh - 50vh )",search:"Buscar Cursos Internos","save-cells":"",columns:e.configSubAreas.columnas,data:e.dataSubAreas,config:e.dinamicosSubAreas},null,8,["columns","data","config"])])])])]),(0,r.Lk)("div",u,[e.openModalAsignacion?((0,r.uX)(),(0,r.Wv)(A,{key:0,tipo:e.tipoAsignacion,cursocod:e.cursocod,grado:e.rowGrados,accion:e.accion,codigo:e.codigoPlan,onCerrarModalAsignacion:e.cerrarModalAsignacion},null,8,["tipo","cursocod","grado","accion","codigo","onCerrarModalAsignacion"])):(0,r.Q3)("v-if",!0)])]}),_:1})]}),_:1})]}),_:1})}var g=a(76080),p=a.n(g),f=a(45254),A=a.n(f),m=(a(30683),a(89571),a(56285),a(515),a(6123)),C=a(50425),O=a(52617),h=a(82351),S=a(94509),b=a(9736),R=a(16648),E=a(88567),v=a(95718),N=a(53380),I=a(88865),w=a(66824),D=a(32960),L=a(30640),P=a(93616),G=a(80340),k=a(57668),M=a(65229),V=a(81288),y=a(982),U=a(2739),_=a(33777),T=a(8445),x=a.n(T),X={class:"row q-pa-sm q-pt-md q-col-gutter-sm"},B={key:0,class:"col-xs-12 col-md-6"},F={key:1,class:"col-xs-12 col-md-6"},z={class:"col-xs-12 col-md-6"},H={class:"col-xs-12 col-md-6"},Q={class:"col-xs-12 sie-flat"};function $(e,n){var a=this,o=(0,r.g2)("q-input"),t=(0,r.g2)("q-select"),i=(0,r.g2)("q-spinner-oval"),c=(0,r.g2)("q-inner-loading"),s=(0,r.g2)("sie-table"),l=(0,r.g2)("q-btn"),u=(0,r.g2)("q-toolbar"),d=(0,r.g2)("sie-modal");return(0,r.uX)(),(0,r.Wv)(d,{class:"modal-asignacion","esc-click":"",modelValue:e.openModal,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.openModal=n}),title:e.title,header:!0,footer:e.sie.ruta.nivel>=2,ok:e.$t("botones.guardar"),loading:e.loadingModal,esc:!0,onClose:e.cerrarModalAsignacion},{footer:(0,r.k6)(function(){return[(0,r.Lk)("div",null,[(0,r.bF)(u,{class:"justify-end",color:"grey-2"},{default:(0,r.k6)(function(){return[(0,r.RG)(e.$slots,"preButtonFooter",{},function(){return[(0,r.Lk)("div",null,[(0,r.bF)(l,{class:"q-mx-xs",color:"primary",onClick:e.grabarAsignacion},{default:(0,r.k6)(function(){return x()(n[5]||(n[5]=[(0,r.eW)("Grabar",-1)]))}),_:1},8,["onClick"])])]})]}),_:3})])]}),default:(0,r.k6)(function(){return[(0,r.Lk)("div",X,[1===e.accion?((0,r.uX)(),(0,r.CE)("div",B,[(0,r.bF)(o,{modelValue:e.ano,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.ano=n}),label:"Ano",readonly:""},null,8,["modelValue"])])):(0,r.Q3)("v-if",!0),1===e.accion?((0,r.uX)(),(0,r.CE)("div",F,[(0,r.bF)(o,{modelValue:e.tipcal,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.tipcal=n}),label:"Tipo Calificación",readonly:""},null,8,["modelValue"])])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",z,[(0,r.bF)(t,{modelValue:e.instrucod,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.instrucod=n}),options:e.niveles,label:"Nivel",onInput:e.cargarGrados},null,8,["modelValue","options","onInput"])]),(0,r.Lk)("div",H,[(0,r.bF)(t,{modelValue:e.gradocod,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.gradocod=n}),options:e.grados,label:"Grado"},null,8,["modelValue","options"])]),(0,r.Lk)("div",Q,[(0,r.bF)(c,{visible:e.loadingAsignacion},{default:(0,r.k6)(function(){return[(0,r.bF)(i,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,r.bF)(s,{selection:"multiple",loadSelection:e.load,context:a,css:"height:calc(100vh - 45vh)",search:"Buscar Curso",columns:e.config.columnas,data:e.dataCursos,ref:"asignacionCurso"},null,8,["loadSelection","columns","data"])])])]}),_:3},8,["modelValue","title","footer","ok","loading","onClose"])}a(23825),a(11777),a(83190),a(24066);var q=a(80660),j={getCursosAsignacion:function(e){return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,q.$http.get("api/PlanCurricularController/getCursosAsignacion",{params:{params:e}}))}},n)}))()},grabarAsignacionAreas:function(e){return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,q.$http.post("api/PlanCurricularController/grabarAsignacionAreas",{params:e}))}},n)}))()},crearNivelGrado:function(e){return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,q.$http.post("api/PlanCurricularController/crearNivelGrado",{params:e}))}},n)}))()},getNiveles:function(){return A()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,q.$http.get("api/PlanCurricularController/getNiveles"))}},e)}))()}},W=j,J=a(70313),Z={emits:["cerrarModalAsignacion"],directives:{sieActive:M.A},components:{QInnerLoading:m.SQ,QSpinnerOval:m.VA,QSelect:R.A,QInput:b.A,sieModal:L.A,sieSelect:P.A,sieTable:_.A,QForm:U.A,QToolbar:m.ZV,QBtn:m.Il},props:{tipo:{type:Number,default:1},grado:{type:Object,required:!0},cursocod:{type:String,default:""},codigo:{type:String,default:""},accion:{type:Number,default:2}},data:function(){return{sie:(0,k["default"])(),loadingModal:!1,loadingAsignacion:!1,openModal:!1,title:"Asignacion Curso/Area",config:{columnas:[]},instrucod:"",gradocod:"",nuevoCodigo:"",ano:"",tipcal:"Números",niveles:[],grados:[],selected:[],dataCursos:[],load:{}}},computed:{isLess:function(){return(0,V.isLess)()}},methods:{abrirModal:function(){var e=this;return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return 1===e.tipo?e.title="Asignacion Curso/Area":e.title="Asignacion Curso/Asignaturas Internas",e.asignarColumnas(),e.instrucod=e.grado.INSTRUCOD,e.gradocod=e.grado.GRADOCOD,e.niveles=[{label:e.grado.INSTRUDES,value:e.instrucod}],e.grados=[{label:e.grado.GRADODES,value:e.grado.GRADOCOD}],n.n=1,e.getConfig();case 1:e.openModal=!0;case 2:return n.a(2)}},n)}))()},asignarColumnas:function(){this.config.columnas=[{name:"CURSOCOD",label:"Código",field:"CURSOCOD",align:"left",sortable:!0},{name:"CURSONOM",label:"Descrpción",field:"CURSONOM",align:"left",sortable:!0},{name:"CURSOCOR",label:"Descrpción Actas",field:"CURSOCOR",align:"left",sortable:!0}]},abrirModalAgregar:function(){var e=this;return A()(p()().m(function n(){var a;return p()().w(function(n){while(1)switch(n.n){case 0:if(e.title="Agregar Niveles",e.asignarColumnas(),!(Object.keys(e.grado).length>0)){n.n=1;break}e.instrucod=e.grado.INSTRUCOD,e.gradocod=e.grado.GRADOCOD,e.niveles=[{label:e.grado.INSTRUDES,value:e.instrucod}],e.grados=[{label:e.grado.GRADODES,value:e.grado.GRADOCOD}],n.n=3;break;case 1:return e.instrucod="",e.gradocod="",e.grados=[],n.n=2,W.getNiveles();case 2:a=n.v,a.unshift({label:"Seleccione",value:""}),e.niveles=a;case 3:return n.n=4,e.getConfig();case 4:e.openModal=!0;case 5:return n.a(2)}},n)}))()},cargarGrados:function(e){var n=this;return A()(p()().m(function a(){return p()().w(function(a){while(1)switch(a.n){case 0:return e||n.$notify("Debe seleccionar un nivel para cargar el grado","warning"),a.n=1,J.A.cargarGrados(e,1);case 1:n.grados=a.v;case 2:return a.a(2)}},a)}))()},getConfig:function(){var e=this;return A()(p()().m(function n(){var a,r,o;return p()().w(function(n){while(1)switch(n.n){case 0:return e.loadingAsignacion=!0,a=e.codigo?e.codigo:e.nuevoCodigo,r={codigo:a,tipo:e.tipo},n.n=1,W.getCursosAsignacion(r);case 1:o=n.v,e.load.values=o.asociados,e.load.key="CURSOCOD",e.dataCursos=o.cursos,e.selected=o.asociados,e.loadingAsignacion=!1;case 2:return n.a(2)}},n)}))()},cerrarModalAsignacion:function(){this.openModal=!1,this.$emit("cerrarModalAsignacion")},grabarAsignacion:function(){var e=this;return A()(p()().m(function n(){var a,r,o,t,i;return p()().w(function(n){while(1)switch(n.p=n.n){case 0:if(n.p=0,1!==e.tipo||1!==e.accion){n.n=2;break}return n.n=1,e.crearNivelGrado();case 1:return n.a(2,n.v);case 2:if(a=e.$refs.asignacionCurso.rowsSelected(["CURSOCOD"]),0!==e.selected.length||0!==a.length){n.n=3;break}return e.$notify("Debe seleccionar las áreas","warning"),n.a(2,!1);case 3:return n.n=4,W.grabarAsignacionAreas({codigo:e.codigo,selected:a,tipo:e.tipo});case 4:return r=n.v,o=r.message,e.$notify(o,"success"),n.n=5,e.getConfig();case 5:n.n=7;break;case 6:return n.p=6,i=n.v,t=i.error,e.$notify(t.message,"error"),n.n=7,e.getConfig();case 7:return n.a(2)}},n,null,[[0,6]])}))()},crearNivelGrado:function(){var e=this;return A()(p()().m(function n(){var a,r,o,t,i;return p()().w(function(n){while(1)switch(n.p=n.n){case 0:if(n.p=0,e.instrucod&&e.gradocod){n.n=1;break}return e.$notify("Debe seleccionar nivel y grado","warning"),n.a(2,!1);case 1:if(e.nuevoCodigo="".concat(e.instrucod,"m*m").concat(e.gradocod,"m*mN"),a=e.$refs.asignacionCurso.rowsSelected(["CURSOCOD"]),0!==e.selected.length||0!==a.length){n.n=2;break}return e.$notify("Debe seleccionar las áreas","warning"),n.a(2,!1);case 2:return n.n=3,W.crearNivelGrado({codigo:e.nuevoCodigo,selected:a});case 3:return r=n.v,o=r.message,e.$notify(o,"success"),n.n=4,e.getConfig();case 4:n.n=6;break;case 5:return n.p=5,i=n.v,t=i.error,e.$notify(t.message,"error"),n.n=6,e.getConfig();case 6:return n.a(2)}},n,null,[[0,5]])}))()}},created:function(){this.ano=this.sie.ano,1===this.tipo&&1===this.accion?this.abrirModalAgregar():this.abrirModal()}},K=a(12807);const Y=(0,K.A)(Z,[["render",$]]);var ee=Y,ne=a(57008),ae=a.n(ne),re=(a(48426),{ORDEN:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.ORDEN||(e.ORDEN=null),this.actualizarCampo(e,a,"ORDEN")}},REPORTE:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.REPORTE||(e.REPORTE=null),this.actualizarCampo(e,a,"REPORTE")}},CURSOCAL:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.CURSOCAL||(e.CURSOCAL=null),this.actualizarCampo(e,a,"CURSOCAL")}},REPANUAL:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.REPANUAL||(e.REPANUAL=null),this.actualizarCampo(e,a,"REPANUAL")}},HORPROG:{component:"input",type:"number",autoSelect:!0,input:function(e,n,a){return e.HORPROG||(e.HORPROG=null),this.actualizarCampo(e,a,"HORPROG")}},MOSTRARPB:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,a){return this.actualizarCampo(e,a,"MOSTRARPB")}},MAXINDNIV2:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,a){return this.actualizarCampo(e,a,"MAXINDNIV2")}},TRNSDISC:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,a){return this.actualizarCampo(e,a,"TRNSDISC")}},ANEXO3:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,a){return this.actualizarCampo(e,a,"ANEXO3")}},NJALADO:{component:"input",type:"accept",accept:["0-9","A","B","C","D","backspace"],upper:!0,autoSelect:!0,maxlength:2,input:function(e,n,a){return this.actualizarCampo(e,a,"NJALADO")}},PROGRAMA:{component:"select",label:"Seleccione",optionValue:"ID_CONTENIDO",optionLabel:"DESCRIPCION",options:[],input:function(e,n,a){return e.PROGRAMA||(e.PROGRAMA=null),this.actualizarCampo(e,a,"PROGRAMA")}},PERIODO:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,a){return this.actualizarCampo(e,a,"PERIODO")}},PREVISTA:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,a){return this.actualizarCampo(e,a,"PREVISTA")}},EQUI_BACHI:{component:"select",label:"Seleccione",optionValue:"value",optionLabel:"label",options:[],input:function(e,n,a){return this.actualizarCampo(e,a,"EQUI_BACHI")}},ORDSIAGIE:{component:"select",label:"Seleccione",optionValue:"ORDSIAGIE",optionLabel:"ABRV",options:[],input:function(e,n,a){return e.ORDSIAGIE||(e.ORDSIAGIE=null),this.actualizarCampo(e,a,"ORDSIAGIE")}},ANEXO:{renderHtml:function(e,n,a){return e.ANEXO=e.ANEXO?e.ANEXO:"N",a.checkbox({value:e.ANEXO,trueValue:"S"})},renderAction:function(e,n){var a=e.ANEXO;return"S"===e.ANEXO?(n.ANEXO="N",e.ANEXO="N"):(e.ANEXO="S",n.ANEXO="S"),this.actualizarCampo(e,a,"ANEXO")}},ANEXO2:{renderHtml:function(e,n,a){return e.ANEXO2=e.ANEXO2?e.ANEXO2:"N",a.checkbox({value:e.ANEXO2,trueValue:"S"})},renderAction:function(e,n){var a=e.ANEXO2;return"S"===e.ANEXO2?(n.ANEXO2="N",e.ANEXO2="N"):(e.ANEXO2="S",n.ANEXO2="S"),this.actualizarCampo(e,a,"ANEXO2")}},PROMPER:{renderHtml:function(e,n,a){return e.PROMPER=e.PROMPER?e.PROMPER:"N",a.checkbox({value:e.PROMPER,trueValue:"S"})},renderAction:function(e,n){var a=e.PROMPER;return"S"===e.PROMPER?(n.PROMPER="N",e.PROMPER="N"):(e.PROMPER="S",n.PROMPER="S"),this.actualizarCampo(e,a,"PROMPER")}},EVSEM:{renderHtml:function(e,n,a){return e.EVSEM=e.EVSEM?e.EVSEM:"N",a.checkbox({value:e.EVSEM,trueValue:"S"})},renderAction:function(e,n){var a=e.EVSEM;return"S"===e.EVSEM?(n.EVSEM="N",e.EVSEM="N"):(e.EVSEM="S",n.EVSEM="S"),this.actualizarCampo(e,a,"EVSEM")}},BONIF:{renderHtml:function(e,n,a){return e.BONIF=e.BONIF?e.BONIF:"N",a.checkbox({value:e.BONIF,trueValue:"S"})},renderAction:function(e,n){var a=e.BONIF;return"S"===e.BONIF?(n.BONIF="N",e.BONIF="N"):(e.BONIF="S",n.BONIF="S"),this.actualizarCampo(e,a,"BONIF")}},CURSODESL:{component:"input",type:"string",autoSelect:!0,maxlength:40,input:function(e,n,a){return e.CURSODESL||(e.CURSODESL=null),this.actualizarCampo(e,a,"CURSODESL")}},ORDBACHI:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.ORDBACHI||(e.ORDBACHI=null),this.actualizarCampo(e,a,"ORDBACHI")}},ORDLIB:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.ORDLIB||(e.ORDLIB=null),this.actualizarCampo(e,a,"ORDLIB")}},ORDLIB2:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.ORDLIB2||(e.ORDLIB2=null),this.actualizarCampo(e,a,"ORDLIB2")}},DIPLOMA:{renderHtml:function(e,n,a){return e.DIPLOMA=e.DIPLOMA?e.DIPLOMA:"N",a.checkbox({value:e.DIPLOMA,trueValue:"S"})},renderAction:function(e,n){var a=e.DIPLOMA;return"S"===e.DIPLOMA?(n.DIPLOMA="N",e.DIPLOMA="N"):(e.DIPLOMA="S",n.DIPLOMA="S"),this.actualizarCampo(e,a,"DIPLOMA")}},TIPCUR:{renderHtml:function(e,n,a){return e.TIPCUR=e.TIPCUR?e.TIPCUR:"N",a.checkbox({value:e.TIPCUR,trueValue:"S"})},renderAction:function(e,n){var a=e.TIPCUR;return"S"===e.TIPCUR?(n.TIPCUR="N",e.TIPCUR="N"):(e.TIPCUR="S",n.TIPCUR="S"),this.actualizarCampo(e,a,"TIPCUR")}},RENEX:{renderHtml:function(e,n,a){return e.RENEX=e.RENEX?e.RENEX:"N",a.checkbox({value:e.RENEX,trueValue:"S"})},renderAction:function(e,n){var a=e.RENEX;return"S"===e.RENEX?(n.RENEX="N",e.RENEX="N"):(e.RENEX="S",n.RENEX="S"),this.actualizarCampo(e,a,"RENEX")}},SEREC:{renderHtml:function(e,n,a){return e.SEREC=e.SEREC?e.SEREC:"N",a.checkbox({value:e.SEREC,trueValue:"S"})},renderAction:function(e,n){var a=e.SEREC;return"S"===e.SEREC?(n.SEREC="N",e.SEREC="N"):(e.SEREC="S",n.SEREC="S"),this.actualizarCampo(e,a,"SEREC")}},OBLIGA:{renderHtml:function(e,n,a){return e.OBLIGA=e.OBLIGA?e.OBLIGA:"N",a.checkbox({value:e.OBLIGA,trueValue:"S"})},renderAction:function(e,n){var a=e.OBLIGA;return"S"===e.OBLIGA?(n.OBLIGA="N",e.OBLIGA="N"):(e.OBLIGA="S",n.OBLIGA="S"),this.actualizarCampo(e,a,"OBLIGA")}},EXCL_CALC_V_HIST:{renderHtml:function(e,n,a){return e.EXCL_CALC_V_HIST=e.EXCL_CALC_V_HIST?e.EXCL_CALC_V_HIST:0,a.checkbox({value:e.EXCL_CALC_V_HIST,trueValue:1})},renderAction:function(e,n){var a=e.CURSONATVAL;return 1===e.EXCL_CALC_V_HIST?(n.EXCL_CALC_V_HIST=0,e.EXCL_CALC_V_HIST=0):(n.EXCL_CALC_V_HIST=1,e.EXCL_CALC_V_HIST=1),this.actualizarCampo(e,a,"EXCL_CALC_V_HIST")}},ACCIONES:{component:"button",icon:["edit","delete"],permisos:{edit:"> 1",delete:"=== 3"},edit:function(e,n){["C","V"].indexOf(e.CURSONATVAL)>=0?this.$notify("No es posible agregar internos a cursos complementarios o competencias transversales","info"):(this.currentRowArea=n,this.abrirModalAsignacion(e,2))},delete:function(e){this.delAreas(e,1)},tooltip:{edit:"Editar",delete:"Eliminar"},flat:!0,color:"primary"}}),oe={data:function(){return{dinamicosAreas:re,configAreas:{columnas:[]},dataAreas:[]}}},te=ae()({},re),ie={PESO:{component:"input",type:"accept",accept:["0-9","backspace"],autoSelect:!0,maxlength:2,input:function(e,n,a){return e.PESO||(e.PESO=null),this.actualizarCampo(e,a,"PESO")}},INDICE_CALCULO_INT_OFI:{component:"input",type:"number",autoSelect:!0,maxlength:2,input:function(e,n,a){return e.INDICE_CALCULO_INT_OFI||(e.INDICE_CALCULO_INT_OFI=null),this.actualizarCampo(e,a,"INDICE_CALCULO_INT_OFI")}},ACCIONES:{component:"button",icon:["delete"],permisos:{delete:"=== 3"},delete:function(e){this.delAreas(e,2)},tooltip:{delete:"Eliminar"},flat:!0,color:"primary"}};Object.assign(te,ie);var ce={data:function(){return{dinamicosSubAreas:te,configSubAreas:{columnas:[]},dataSubAreas:[]}}},se={data:function(){return{dinamicosGrados:{ACCIONES:{component:"button",icon:["edit","delete"],permisos:{edit:"> 1",delete:"=== 3"},edit:function(e){this.rowGrados=e,this.abrirModalAsignacion(e,1)},delete:function(e,n){this.delGrados(n)},tooltip:{edit:"Editar",delete:"Eliminar"},flat:!0,color:"primary"}},configGrados:{columnas:[]},dataGrados:[]}}},le=a(2819),ue={directives:{sieActive:M.A},mixins:[oe,se,ce],components:{QCard:E.A,QCardSection:v.A,QSeparator:N.A,QItemSection:I.A,QItemLabel:w.A,QInnerLoading:m.SQ,QSpinnerOval:m.VA,QSelect:R.A,QInput:b.A,QTable:C.A,QTh:O.A,QTr:h.A,QTd:S.A,sieModal:L.A,sieSelect:P.A,sieVacio:G.A,QForm:U.A,sieTable:_.A,asignacionCursos:ee,exportFilePhp:le.exportFilePhp,QPage:m.Tu},data:function(){return{sie:(0,k["default"])(),buttons:[{label:"Agregar",permiso:"> 1",icon:"plus",click:this.agregarCurso},{label:"PDF",icon:"file_pdf",click:this.verReportePdf},{label:"Excel",icon:"file_excel",click:this.verReporteExcel}],instrucod:"",gradocod:"",cursocod:"",codigoPlan:"",accion:2,tipoAsignacion:1,loadingGrados:!1,filtroGrado:"",loadingAreas:!1,loadingSubAreas:!1,filtroAreas:"",openModalAsignacion:!1,currentRowArea:null,loadSelectionArea:{key:"",values:[]},loadSelectionGrados:{key:"",values:[]}}},computed:{isLess:function(){return(0,V.isLess)()}},methods:{configurarGrados:function(){this.configGrados.columnas=[{name:"CODIGO",label:"Cód.",field:"CODIGO",align:"left"},{name:"GRADO",label:"Nivel / grado",field:"GRADO",align:"left",sortable:!0,maxLength:27},{name:"ACCIONES",align:"center",label:"Acciones"}]},getCodigoplan:function(e){var n="".concat(this.instrucod,"m*m").concat(this.gradocod);return 2===e&&(n="".concat(n,"m*m").concat(this.cursocod)),n="".concat(n,"m*mN"),n},areasAsociadas:function(e){this.configurarAreas({grado:e})},configurarAreas:function(e){var n=this;return A()(p()().m(function a(){var r,o,t,i,c,s,l;return p()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,0!==Object.keys(e.grado).length){a.n=1;break}return a.a(2,!1);case 1:return r=e.grado,n.rowGrados=r,n.loadingAreas=!0,n.instrucod=r.INSTRUCOD,n.gradocod=r.GRADOCOD,o=n.getCodigoplan(1),a.n=2,D.c.getAreasCurgra({codigo:o,tipo:1});case 2:if(t=a.v,t.config&&0!==t.data.length){a.n=3;break}return n.loadingAreas=!1,n.dataAreas=[],n.dataSubAreas=[],a.a(2,!1);case 3:return i=e.area||t.data[0],a.n=4,n.configurarSubAreas(i);case 4:for(n.configAreas.columnas=t.config,n.dataAreas=t.data,n.currentRowArea&&(n.loadSelectionArea={key:"CURSOCOD",values:[n.currentRowArea.CURSOCOD]},n.currentRowArea=null),c=0;c<n.configAreas.columnas.length;c++)s=n.configAreas.columnas[c],Object.prototype.hasOwnProperty.call(s,"data")&&n.dinamicosAreas.hasOwnProperty(s.name)&&(n.dinamicosAreas[s.name].options=t[s.data]);a.n=6;break;case 5:a.p=5,l=a.v,console.log("error",l),(0,y["default"])("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 6:n.loadingAreas=!1;case 7:return a.a(2)}},a,null,[[0,5]])}))()},configurarSubAreas:function(e){var n=this;return A()(p()().m(function a(){var r,o,t,i;return p()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,n.dataSubAreas=[],!(["C","V"].indexOf(e.CURSONATVAL)>=0)){a.n=1;break}return a.a(2,!1);case 1:return n.rowAreas=e,n.loadingSubAreas=!0,n.instrucod=e.INSTRUCOD,n.gradocod=e.GRADOCOD,n.cursocod=e.CURSOCOD,r=n.getCodigoplan(2),a.n=2,D.c.getAreasCurgra({codigo:r,tipo:2});case 2:if(o=a.v,o.config){a.n=3;break}return n.loadingSubAreas=!1,a.a(2,!1);case 3:for(n.configSubAreas.columnas=o.config,n.dataSubAreas=o.data,t=0;t<n.configSubAreas.columnas.length;t++)i=n.configSubAreas.columnas[t],Object.prototype.hasOwnProperty.call(i,"data")&&n.dinamicosSubAreas.hasOwnProperty(i.name)&&(n.dinamicosSubAreas[i.name].options=o[i.data]);a.n=5;break;case 4:a.p=4,a.v,(0,y["default"])("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 5:n.loadingSubAreas=!1;case 6:return a.a(2)}},a,null,[[0,4]])}))()},actualizarCampoPeso:function(e,n){var a=this;return A()(p()().m(function r(){return p()().w(function(r){while(1)switch(r.n){case 0:return r.a(2,a.$confirm("En caso existan notas ingresadas se procederá a recalcular todos los salones del nivel, grado y curso oficial seleccionado.\n\nEsta seguro de modificar el peso?","info").onOk(function(){var r=A()(p()().m(function r(o){return p()().w(function(r){while(1)switch(r.n){case 0:return r.a(2,a.actualizarCampo(e,n))}},r)}));return function(e){return r.apply(this,arguments)}}()))}},r)}))()},actualizarCampo:function(e,n,a){var r=this;return A()(p()().m(function o(){var t,i,c,s,l;return p()().w(function(o){while(1)switch(o.p=o.n){case 0:if(a&&e){o.n=1;break}return r.$notify("No se puede actualizar la data","warning"),o.a(2,!1);case 1:if(n!==e[a]&&(n||null!==e[a])){o.n=2;break}return o.a(2,!1);case 2:return t={},t[a]=e[a],o.p=3,o.n=4,D.c.updateCampo({data:t,instrucod:e.INSTRUCOD,gradocod:e.GRADOCOD,cursocod:e.CURSOCOD,cursonat:e.CURSONAT,equi_bachi:e.EQUI_BACHI?e.EQUI_BACHI:""});case 4:return i=o.v,c=i.message,r.$notify(c,"success"),o.a(2,!0);case 5:return o.p=5,l=o.v,s=l.error,r.$notify(s.message,"warning"),o.a(2,!1)}},o,null,[[3,5]])}))()},editAreas:function(e){},delAreas:function(e,n){var a=this;return A()(p()().m(function r(){return p()().w(function(r){while(1)switch(r.n){case 0:return r.a(2,a.$confirm("¿Desea eliminar? ¡El proceso es irreversible!","info").onOk(function(){var r=A()(p()().m(function r(o){var t,i,c,s,l;return p()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,e.CURSOCOD||a.$notify("Faltan datos para eliminar","warning"),t=a.getCodigoplan(n),r.n=1,D.c.deleteCursos({codigo:t,selected:e.CURSOCOD,tipo:n});case 1:return i=r.v,c=i.message,a.$notify(c,"success"),1===n?a.configurarAreas({grado:a.rowGrados}):a.configurarAreas({grado:a.rowGrados,area:a.rowAreas}),r.a(2,!0);case 2:return r.p=2,l=r.v,s=l.error,a.$notify(s.message,"error"),r.a(2,!1)}},r,null,[[0,2]])}));return function(e){return r.apply(this,arguments)}}()))}},r)}))()},delGrados:function(e){var n=this;return A()(p()().m(function a(){var r,o,t,i,c,s;return p()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,n.$confirmar("<b>¿Desea eliminar?</b> ¡El proceso es irreversible!","delete",!0);case 1:if(r=a.v,!r){a.n=5;break}return a.p=2,e.GRADOCOD||n.$notify("Faltan datos para eliminar","warning"),o=n.getCodigoplan(1),a.n=3,D.c.deleteGrado({codigo:o});case 3:return t=a.v,i=t.message,n.$notify(i,"success"),n.dataGrados.splice(n.dataGrados.indexOf(e),1),n.dataAreas=[],n.dataSubAreas=[],n.getNgCurgra(),a.a(2,!0);case 4:return a.p=4,s=a.v,c=s.error,n.$notify(c.message,"error"),a.a(2,!1);case 5:return a.a(2)}},a,null,[[2,4]])}))()},cerrarModalAsignacion:function(){var e=this;return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:if(e.openModalAsignacion=!1,1!==e.accion){n.n=2;break}return n.n=1,e.init();case 1:n.n=3;break;case 2:e.accion=2,1===e.tipoAsignacion?e.configurarAreas({grado:e.rowGrados}):e.configurarAreas({grado:e.rowGrados,area:e.rowAreas});case 3:return n.a(2)}},n)}))()},agregarCurso:function(){this.instrucod="",this.gradocod="",this.rowGrados={},this.tipoAsignacion=1,this.cursocod="",this.codigoPlan="",this.accion=1,this.openModalAsignacion=!0},abrirModalAsignacion:function(e,n){this.instrucod=e.INSTRUCOD,this.gradocod=e.GRADOCOD,this.tipoAsignacion=n,this.accion=2,this.cursocod=2===n?e.CURSOCOD:"",this.codigoPlan=this.getCodigoplan(n),this.openModalAsignacion=!0},getNgCurgra:function(){var e=this;return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.p=n.n){case 0:if(n.p=0,e.loadingGrados=!0,!(e.dataGrados.length>0)){n.n=2;break}return n.n=1,e.configurarAreas({grado:e.dataGrados[0]});case 1:e.loadSelectionGrados={key:"CODIGO",values:[e.dataGrados[0].CODIGO]};case 2:n.n=4;break;case 3:n.p=3,n.v,(0,y["default"])("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 4:e.loadingGrados=!1;case 5:return n.a(2)}},n,null,[[0,3]])}))()},rowSelectedArea:function(e){},verReportePdf:function(){this.verReporte("pdf")},verReporteExcel:function(){this.verReporte("xls")},init:function(){var e=this;return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,D.c.getNgCurgra();case 1:e.dataGrados=n.v,e.getNgCurgra();case 2:return n.a(2)}},n)}))()},verReporte:function(e){var n=this;return A()(p()().m(function a(){var r,o;return p()().w(function(a){while(1)switch(a.n){case 0:r=n.getCodigoplan(1),o={id:r,repcod:"planCurricular",formato:e},(0,le.exportFilePhp)(o,"webservice/reportes/reporte");case 1:return a.a(2)}},a)}))()}},created:function(){var e=this;return A()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return e.configurarGrados(),n.n=1,e.init();case 1:return n.a(2)}},n)}))()}};const de=(0,K.A)(ue,[["render",d]]);var ge=de}}]);