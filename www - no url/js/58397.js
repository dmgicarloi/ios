"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[58397],{58397:function(e,o,n){n.r(o),n.d(o,{default:function(){return on}});n(39866);var t=n(61758),i=n(29104),a=["innerHTML"],r={class:"row q-pa-sm q-col-gutter-sm"},l={class:"col-12"},s={class:"col-12"},c={class:"col-12"},u={class:"col-12"},d={class:"col-12"},f={key:0,class:"col-12 column items-center"},m={class:"row q-pa-sm q-col-gutter-sm"},p={class:"col-12"},h={class:"col-12"},b={class:"col-12"},v={class:"col-12"},g={key:0,class:"col-12"},A={class:"col-12"},O={class:"col-12"},C={class:"col-12"},I={class:"row"},D={class:"col-12"},_={key:0,class:"row"},F={class:"col-xs-12 col-sm-6 col-md-4"},k=["innerHTML"],w={class:"col-xs-12 col-sm-6 col-md-4"},E=["innerHTML"],R={class:"col-xs-12 col-sm-6 col-md-4"},T=["innerHTML"],P={key:1,class:"row"},S={class:"col-xs-12 col-sm-6 col-md-6"},U=["innerHTML"],N={class:"col-xs-12 col-sm-6 col-md-6"},L=["innerHTML"],V={class:"row q-pa-sm q-col-gutter-sm"},y={class:"col-12"},M={class:"col-12"},x={class:"col-12"},$={class:"col-12"},q={class:"col-12"};function z(e,o){var n=this,z=(0,t.g2)("q-tab"),Q=(0,t.g2)("q-tabs"),G=(0,t.g2)("lista-inscripciones"),H=(0,t.g2)("q-tab-panel"),Y=(0,t.g2)("lista-procesos"),j=(0,t.g2)("header-btn"),X=(0,t.g2)("sie-table"),B=(0,t.g2)("formularioRegistro"),W=(0,t.g2)("lista-pruebas"),K=(0,t.g2)("lista-vacunas"),Z=(0,t.g2)("q-tab-panels"),J=(0,t.g2)("q-card-section"),ee=(0,t.g2)("q-card"),oe=(0,t.g2)("sie-pdf"),ne=(0,t.g2)("sie-modal"),te=(0,t.g2)("q-download-file"),ie=(0,t.g2)("q-input"),ae=(0,t.g2)("q-select"),re=(0,t.g2)("q-checkbox"),le=(0,t.g2)("sie-upload"),se=(0,t.g2)("sie-editor"),ce=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(ce,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(ee,null,{default:(0,t.k6)(function(){return[(0,t.bF)(J,null,{default:(0,t.k6)(function(){return[(0,t.bF)(Q,{class:"text-teal",align:"left",dense:!0,modelValue:e.tabType,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.tabType=o})},{default:(0,t.k6)(function(){return[(0,t.bF)(z,{class:"text-primary","no-caps":"",name:"registro",label:"Registro"}),(0,t.bF)(z,{class:"text-primary","no-caps":"",name:"proceso",label:"Proceso"}),(0,t.bF)(z,{class:"text-primary","no-caps":"",name:"declaracion",label:"Documento"}),(0,t.bF)(z,{class:"text-primary","no-caps":"",name:"autorizacion",label:"Autorización"}),(0,t.bF)(z,{class:"text-primary","no-caps":"",name:"formulario",label:"Formulario"}),(0,t.bF)(z,{class:"text-primary","no-caps":"",name:"prueba",label:"Pruebas Covid"}),(0,t.bF)(z,{class:"text-primary","no-caps":"",name:"vacuna",label:"Vacuna Covid"})]}),_:1},8,["modelValue"]),(0,t.bF)(Z,{modelValue:e.tabType,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.tabType=o}),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,t.k6)(function(){return[(0,t.bF)(H,{name:"registro"},{default:(0,t.k6)(function(){return[(0,t.bF)(G)]}),_:1}),(0,t.bF)(H,{name:"proceso"},{default:(0,t.k6)(function(){return[(0,t.bF)(Y)]}),_:1}),(0,t.bF)(H,{name:"declaracion"},{default:(0,t.k6)(function(){return[(0,t.bF)(j,{buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(X,{data:e.rows,columns:e.fields,config:e.config,context:n,css:{height:"71vh"}},null,8,["data","columns","config"])]}),_:1}),(0,t.bF)(H,{name:"autorizacion"},{default:(0,t.k6)(function(){return[(0,t.bF)(j,{buttons:e.buttonsAuth},null,8,["buttons"]),(0,t.bF)(X,{data:e.rowsAuth,columns:e.fieldsAuth,config:e.configAuth,context:n,css:{height:"71vh"}},null,8,["data","columns","config"])]}),_:1}),(0,t.bF)(H,{name:"formulario",style:{height:"calc(100vh - 140px)"}},{default:(0,t.k6)(function(){return[(0,t.bF)(B,{tipo:2})]}),_:1}),(0,t.bF)(H,{name:"prueba"},{default:(0,t.k6)(function(){return[(0,t.bF)(W)]}),_:1}),(0,t.bF)(H,{name:"vacuna"},{default:(0,t.k6)(function(){return[(0,t.bF)(K)]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1}),e.openModalPdf?((0,t.uX)(),(0,t.Wv)(ne,{key:0,footer:!1,css:{width:"70%",height:"90%"},modelValue:e.openModalPdf,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.openModalPdf=o}),title:e.titleModalPdf},{default:(0,t.k6)(function(){return[(0,t.bF)(oe,{src:e.url,style:{height:"100%"}},null,8,["src"])]}),_:1},8,["modelValue","title"])):(0,t.bo)(((0,t.uX)(),(0,t.Wv)(te,{key:1,ref:"downloadFile",src:e.url},null,8,["src"])),[[i.aG,!1]]),(0,t.bF)(ne,{title:e.editRowAuth.TITULO,footer:!1,css:{width:"70%",height:"90%"},modelValue:e.openModalHtml,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.openModalHtml=o})},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",{class:"q-pa-md",innerHTML:e.editRowAuth.CUERPO_HTML},null,8,a)]}),_:1},8,["title","modelValue"]),(0,t.bF)(ne,{modelValue:e.openModalCovidDocumento,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.openModalCovidDocumento=o}),onSubmit:e.saveCovidDocumento,title:"Documento"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",l,[(0,t.bF)(ie,{modelValue:e.form.titulo,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.form.titulo=o}),label:"Título"},null,8,["modelValue"])]),(0,t.Lk)("div",s,[(0,t.bF)(ae,{disable:"update"==e.flagAction,modelValue:e.form.id_proceso,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.id_proceso=o}),options:e.optProcesos,label:"Seleccione Proceso","option-label":"TITULO","option-value":"ID_PROCESO"},null,8,["disable","modelValue","options"])]),(0,t.Lk)("div",c,[(0,t.bF)(re,{modelValue:e.form.activo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.form.activo=o}),"true-value":1,"false-value":0,label:"Activo"},null,8,["modelValue"])]),(0,t.Lk)("div",u,[(0,t.bF)(ie,{modelValue:e.form.orden,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.form.orden=o}),label:"Orden",type:"number"},null,8,["modelValue"])]),(0,t.Lk)("div",d,[(0,t.bF)(ae,{modelValue:e.form.accion,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.form.accion=o}),options:e.form.acciones,label:"Seleccione Acción",onInput:e.showUpload},null,8,["modelValue","options","onInput"])]),e.showAccion?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(le,{allow:["jpg","png","jpeg","pdf"],onUpload:e.upload},null,8,["onUpload"])])):(0,t.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(ne,{modelValue:e.openModalCovidAuth,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.openModalCovidAuth=o}),onSubmit:e.saveCovidAutorizacion,title:"Documento Autorización"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",m,[(0,t.Lk)("div",p,[(0,t.bF)(ie,{modelValue:e.formAuth.titulo,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.formAuth.titulo=o}),label:"Título"},null,8,["modelValue"])]),(0,t.Lk)("div",h,[(0,t.bF)(ae,{disable:"update"==e.flagActionAuth,modelValue:e.formAuth.id_proceso,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.formAuth.id_proceso=o}),options:e.optProcesos,label:"Proceso","option-label":"TITULO","option-value":"ID_PROCESO",onInput:e.changeProcesoAuth},null,8,["disable","modelValue","options","onInput"])]),(0,t.Lk)("div",b,[(0,t.bF)(ae,{modelValue:e.formAuth.modoRespuesta,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.formAuth.modoRespuesta=o}),options:e.formAuth.modoRespuestas,label:"Modo Respuesta"},null,8,["modelValue","options"])]),[1,2,3].includes(e.formAuth.modoRespuesta)?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",v,[(0,t.bF)(ie,{modelValue:e.formAuth.aceptacion,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.formAuth.aceptacion=o}),label:"Texto Aceptación"},null,8,["modelValue"])]),[2,3].includes(e.formAuth.modoRespuesta)?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.bF)(ie,{modelValue:e.formAuth.negacion,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.formAuth.negacion=o}),label:"Texto Negación"},null,8,["modelValue"])])):(0,t.Q3)("v-if",!0)],64)):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",A,[(0,t.bF)(re,{modelValue:e.formAuth.activo,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.formAuth.activo=o}),"true-value":1,"false-value":0,label:"Activo"},null,8,["modelValue"])]),(0,t.Lk)("div",O,[(0,t.bF)(ie,{modelValue:e.formAuth.orden,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.formAuth.orden=o}),label:"Orden",type:"number"},null,8,["modelValue"])]),(0,t.Lk)("div",C,[(0,t.Lk)("div",I,[(0,t.Lk)("div",D,[1==e.formAuth.perfilDestino||4==e.formAuth.perfilDestino?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("div",F,[(0,t.Lk)("div",{innerHTML:1===e.formAuth.perfilDestino?e.etiqueta1:e.etiqueta1_verano},null,8,k)]),(0,t.Lk)("div",w,[(0,t.Lk)("div",{innerHTML:e.etiqueta2},null,8,E)]),(0,t.Lk)("div",R,[(0,t.Lk)("div",{innerHTML:e.etiqueta3},null,8,T)])])):2==e.formAuth.perfilDestino?((0,t.uX)(),(0,t.CE)("div",P,[(0,t.Lk)("div",S,[(0,t.Lk)("div",{innerHTML:e.etiqutaPersonal},null,8,U)]),(0,t.Lk)("div",N,[(0,t.Lk)("div",{innerHTML:e.etiqutaPersonal2},null,8,L)])])):(0,t.Q3)("v-if",!0)])]),(0,t.bF)(se,{modelValue:e.formAuth.html,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.formAuth.html=o}),extra:{ruler:!0},type:"full"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(ne,{modelValue:e.openModalCovidFormulario,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.openModalCovidFormulario=o}),onSubmit:e.saveCovidAsigna,ok:e.$t("botones.guardar"),title:"Asignación",footer:e.sie.ruta.nivel>=2},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",V,[(0,t.Lk)("div",y,[(0,t.bF)(ie,{modelValue:e.frmAsigna.TITULO,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.frmAsigna.TITULO=o}),label:"Título"},null,8,["modelValue"])]),(0,t.Lk)("div",M,[(0,t.bF)(ae,{modelValue:e.frmAsigna.ID_PROCESO,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.frmAsigna.ID_PROCESO=o}),options:e.optProcesos,"option-label":"TITULO","option-value":"ID_PROCESO",onInput:e.getFormularios,label:"Proceso"},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",x,[(0,t.bF)(ae,{modelValue:e.frmAsigna.ID_FORMULARIO,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.frmAsigna.ID_FORMULARIO=o}),options:e.formularios,label:"Formulario"},null,8,["modelValue","options"])]),(0,t.Lk)("div",$,[(0,t.bF)(ie,{modelValue:e.frmAsigna.ORDEN,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.frmAsigna.ORDEN=o}),label:"Orden",type:"number"},null,8,["modelValue"])]),(0,t.Lk)("div",q,[(0,t.bF)(re,{modelValue:e.frmAsigna.ACTIVO,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.frmAsigna.ACTIVO=o}),"true-value":1,"false-value":0,label:"Activo"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit","ok","footer"])]}),_:1})}var Q=n(76080),G=n.n(Q),H=n(45254),Y=n.n(H),j=(n(30683),n(52133),n(50310),n(6724),n(83190),n(6123)),X=n(72029),B=n(26697),W=n(53093),K=n(53811),Z=n(43346),J=n(95718),ee=n(30640),oe=n(9736),ne=n(8445),te=n.n(ne),ie=n(58790),ae={class:"row q-col-gutter-sm"},re={class:"col-xs-12 col-sm-6"},le={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12 col-sm-6"},ce={class:"col-xs-12 col-sm-6"},ue={class:"col-xs-12 col-sm-4"},de={class:"col-xs-12 col-sm-4"},fe={class:"col-xs-12 col-sm-4"},me={class:"q-pa-md"},pe={class:"row"},he={class:"col-12"},be={class:"col-12"},ve={key:0,class:"col-12"},ge={class:"row q-pa-sm q-col-gutter-sm"},Ae={class:"col-xs-12 col-sm-4"},Oe={class:"col-xs-12 col-sm-8"},Ce={key:0,class:"column"},Ie=["innerHTML"],De={key:1,class:"column"},_e={key:2,class:"column"},Fe=["src"];function ke(e,o){var n=this,a=(0,t.g2)("header-btn"),r=(0,t.g2)("q-date"),l=(0,t.g2)("q-popup-proxy"),s=(0,t.g2)("q-icon"),c=(0,t.g2)("q-input"),u=(0,t.g2)("q-select"),d=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-separator"),m=(0,t.g2)("sie-table"),p=(0,t.g2)("q-card"),h=(0,t.g2)("sie-select"),b=(0,t.g2)("sie-modal"),v=(0,t.g2)("q-download-file"),g=(0,t.g2)("q-item-section"),A=(0,t.g2)("q-item"),O=(0,t.g2)("q-list"),C=(0,t.g2)("formularioCovid"),I=(0,t.g2)("sie-pdf"),D=(0,t.g2)("q-page"),_=(0,t.gN)("ripple");return(0,t.uX)(),(0,t.Wv)(D,null,{default:(0,t.k6)(function(){return[(0,t.bF)(p,null,{default:(0,t.k6)(function(){return[(0,t.bF)(a,{buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",ae,[(0,t.Lk)("div",re,[(0,t.bF)(c,{outlined:"",modelValue:e.form.fhIni,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.fhIni=o}),readonly:"",label:"Desde"},{append:(0,t.k6)(function(){return[(0,t.bF)(s,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{modelValue:e.form.fhIni,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.form.fhIni=o}),onInput:o[1]||(o[1]=function(o){e.$refs.qDateProxy.hide(),e.loadCovidRegistro()}),mask:"DD/MM/YYYY"},{default:(0,t.k6)(function(){return te()(o[22]||(o[22]=[(0,t.Lk)("div",{class:"row items-center justify-end"},null,-1)]))}),_:1},8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,t.Lk)("div",le,[(0,t.bF)(c,{outlined:"",modelValue:e.form.fhFin,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.fhFin=o}),readonly:"",label:"Hasta"},{append:(0,t.k6)(function(){return[(0,t.bF)(s,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{modelValue:e.form.fhFin,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.fhFin=o}),onInput:o[4]||(o[4]=function(o){e.$refs.qDateProxy2.hide(),e.loadCovidRegistro()}),mask:"DD/MM/YYYY"},{default:(0,t.k6)(function(){return te()(o[23]||(o[23]=[(0,t.Lk)("div",{class:"row items-center justify-end"},null,-1)]))}),_:1},8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,t.Lk)("div",se,[(0,t.bF)(u,{modelValue:e.form.estado,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.form.estado=o}),options:e.estados,label:"Estado",onInput:o[7]||(o[7]=function(o){return e.loadCovidRegistro()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",ce,[(0,t.bF)(u,{modelValue:e.form.idProceso,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.form.idProceso=o}),options:e.procesos,"option-value":"ID_PROCESO","option-label":"TITULO",label:"Proceso",onInput:o[9]||(o[9]=function(o){return e.loadCovidRegistro()})},null,8,["modelValue","options"])]),1===e.idPerfilDestino?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",ue,[(0,t.bF)(u,{modelValue:e.form.nivel,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.form.nivel=o}),options:e.niveles,"option-value":"INSTRUCOD","option-label":"INSTRUDES",label:"Nivel",onInput:o[11]||(o[11]=function(o){e.getGrados(),e.loadCovidRegistro()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",de,[(0,t.bF)(u,{modelValue:e.form.grado,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.form.grado=o}),options:e.grados,"option-value":"GRADOCOD","option-label":"GRADODES",label:"Grados",onInput:o[13]||(o[13]=function(o){e.getSeccion(),e.loadCovidRegistro()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",fe,[(0,t.bF)(u,{modelValue:e.form.seccion,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.form.seccion=o}),options:e.secciones,"option-value":"SECCIONCOD","option-label":"SECCIONDES",label:"Sección",onInput:o[15]||(o[15]=function(o){return e.loadCovidRegistro()})},null,8,["modelValue","options"])])],64)):(0,t.Q3)("v-if",!0)])]}),_:1}),(0,t.bF)(f),(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[(0,t.bF)(m,{data:e.rows,columns:e.fields,config:e.config,context:n,css:{height:"44vh"}},null,8,["data","columns","config"])]}),_:1})]}),_:1}),(0,t.bF)(b,{modelValue:e.modalAutorizar,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.modalAutorizar=o}),onSubmit:e.autorizar,title:"Autorizar"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",me,[(0,t.Lk)("div",pe,[(0,t.Lk)("div",he,[(0,t.bF)(h,{type:"outlined",noBottom:"",modelValue:e.tipoExportacion,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.tipoExportacion=o}),options:e.tiposExportacion,label:"label",val:"value",placeholder:"Tipo de Autorización"},null,8,["modelValue","options"])]),(0,t.Lk)("div",be,[(0,t.bF)(h,{type:"outlined",noBottom:"",modelValue:e.idAutorizacion,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.idAutorizacion=o}),options:e.autorizaciones,label:"TITULO",val:"ID_AUTORIZACION",placeholder:"Autorización",onInput:e.cambiarAutorizacion},null,8,["modelValue","options","onInput"])]),2===e.tipoExportacion?((0,t.uX)(),(0,t.CE)("div",ve,[(0,t.bF)(m,{ref:"tablaUsuario",data:e.usuarios,selection:"multiple",columns:e.fieldsUsuario,config:e.configUsuario,context:n,css:{height:"44vh"}},null,8,["data","columns","config"])])):(0,t.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bo)((0,t.bF)(v,{ref:"downloadFile",src:e.urlUserFile},null,8,["src"]),[[i.aG,!1]]),(0,t.bF)(b,{class:"full-height",ok:!1,title:"Declaración / Autorización",modelValue:e.openModalCovidDocumentos,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.openModalCovidDocumentos=o}),css:{height:"100vh",width:"100vw"}},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",ge,[(0,t.Lk)("div",Ae,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.covidDocumentos,function(n,a){return(0,t.uX)(),(0,t.CE)(t.FK,null,["declaracion"===a?((0,t.uX)(),(0,t.Wv)(O,{key:0,bordered:"",dense:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n,function(o){return(0,t.bo)(((0,t.uX)(),(0,t.Wv)(A,{class:(0,ie.C4)(["cursor-pointer",{"bg-grey-4":o.UNICO===e.currentItem.UNICO}]),onClick:function(n){return e.loadFile(o)}},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{avatar:""},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{color:"primary",name:e.loadIcons(o)},null,8,["name"])]}),_:2},1024),(0,t.bF)(g,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,ie.v_)(o.NOMBRE),1)]}),_:2},1024),(0,t.bF)(g,{avatar:""},{default:(0,t.k6)(function(){return[[1,2].includes(o.ACCION)?((0,t.uX)(),(0,t.Wv)(s,{key:0,color:0===o.UPLOAD?"negative":"positive",name:0===o.UPLOAD?"upload":"file_download",onClick:(0,i.D$)(function(n){return e.showDocumentUser(o)},["stop"])},null,8,["color","name","onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["onClick","class"])),[[_]])}),256))]}),_:2},1024)):(0,t.Q3)("v-if",!0),"autorizacion"===a?((0,t.uX)(),(0,t.Wv)(O,{key:1,bordered:"",dense:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n,function(n){return(0,t.bo)(((0,t.uX)(),(0,t.Wv)(A,{class:(0,ie.C4)(["cursor-pointer",{"bg-grey-4":n.UNICO===e.currentItem.UNICO}]),onClick:function(o){return e.loadBotones(n)}},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{avatar:""},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{color:"primary",name:e.loadIcons(n)},null,8,["name"])]}),_:2},1024),(0,t.bF)(g,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,ie.v_)(n.NOMBRE),1)]}),_:2},1024),(0,t.bF)(g,{avatar:""},{default:(0,t.k6)(function(){return["autorizacion"===n.TYPE&&0!==n.UPLOAD?((0,t.uX)(),(0,t.Wv)(s,{key:0,color:"positive",name:"check2",onClick:o[19]||(o[19]=(0,i.D$)(function(){},["stop"]))})):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["onClick","class"])),[[_]])}),256))]}),_:2},1024)):(0,t.Q3)("v-if",!0),"formularios"===a?((0,t.uX)(),(0,t.Wv)(O,{key:2,bordered:"",dense:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n,function(n,a){return(0,t.bo)(((0,t.uX)(),(0,t.Wv)(A,{class:(0,ie.C4)(["cursor-pointer",{"bg-grey-4":n.UNICO===e.currentItem.UNICO}]),onClick:function(o){return e.loadFile(n)}},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{avatar:""},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{color:"primary",name:e.loadIcons(n)},null,8,["name"])]}),_:2},1024),(0,t.bF)(g,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,ie.v_)(n.NOMBRE),1)]}),_:2},1024),(0,t.bF)(g,{avatar:""},{default:(0,t.k6)(function(){return["formularios"===n.TYPE?((0,t.uX)(),(0,t.Wv)(s,{key:0,color:0===n.UPLOAD?"negative":"positive",name:"document_list",onClick:o[20]||(o[20]=(0,i.D$)(function(){},["stop"]))},null,8,["color"])):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["onClick","class"])),[[_]])}),256))]}),_:2},1024)):(0,t.Q3)("v-if",!0)],64)}),256))]),(0,t.Lk)("div",Oe,["autorizacion"===e.currentItem.TYPE?((0,t.uX)(),(0,t.CE)("div",Ce,[(0,t.Lk)("div",{class:"q-pa-sm",innerHTML:e.itemAutorizacion.CUERPO_CAMBIADO_HTML},null,8,Ie)])):e.showFormulario?((0,t.uX)(),(0,t.CE)("div",De,[(0,t.bF)(C,{class:"full-height full-width overflow-auto",ficha:e.formulario,responsableExterno:e.currentItem.FAM_RESP,esDeclaracion:!0,persona:{},preview:!1},null,8,["ficha","responsableExterno"])])):e.type?((0,t.uX)(),(0,t.CE)("div",_e,["pdf"===e.type?((0,t.uX)(),(0,t.Wv)(I,{key:0,style:{height:"calc(100vh - 70px)"},src:e.url},null,8,["src"])):((0,t.uX)(),(0,t.CE)("img",{key:1,src:e.url,width:"100%"},null,8,Fe))])):(0,t.Q3)("v-if",!0)])])]}),_:1},8,["modelValue"])]}),_:1})}n(71225),n(74260),n(77507),n(10239),n(89571),n(56285),n(5962),n(32203);var we=n(65673),Ee=n(82327),Re=n(88865),Te=n(53380),Pe=n(16648),Se=n(18105),Ue=n(95477),Ne=n(4437),Le={data:function(){return{configUsuario:{},config:{ESTADO:{component:"select",options:[{label:"Pendiente",value:1},{label:"Observado",value:2},{label:"Autorizado",value:3},{label:"No Aprobado",value:4}],edit:!1},FH_REGISTRO:{component:"datetime",edit:!1},ACCION:{component:"button",icon:["remove_red_eye as ver","print","delete"],tooltip:{ver:"Ver",print:"Imprimir",delete:"Eliminar"},print:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:o.imprimir(e);case 1:return n.a(2)}},n)}))()},ver:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:return o.currentItem={},o.showFormulario=!1,o.type="",o.currentUser=e,n.n=1,o.loadDocumentos(e.ID_PERSONA,e.ID_PROCESO);case 1:o.openModalCovidDocumentos=!0;case 2:return n.a(2)}},n)}))()},delete:function(e){var o=this;this.$confirm("¿Realmente desea eliminar este registro?","delete").onOk(Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.delete("api/CovidRegistro/deleteAllTablesRelationalCovidRegistro",{params:{id_registro:e.ID_REGISTRO,id_persona:e.ID_PERSONA}});case 1:return o.$notify("Se ha eliminado satisfactoriamente.","success"),n.n=2,o.loadCovidRegistro();case 2:n.n=4;break;case 3:n.p=3,n.v,o.$notify("Ocurrió un problema de conexión.","warning");case 4:return n.a(2)}},n,null,[[0,3]])})))},validate:{print:function(e){return 3===e.ESTADO}},permisos:{delete:"=== 3"},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"ALUCOD",label:"Código",field:"ALUCOD",align:"center",sortable:!0},{name:"NOMCOMP",label:"Nombre",field:"NOMCOMP",align:"left",sortable:!0},{name:"NGS",label:"Ngs",field:"NGS",align:"center",sortable:!0},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center",sortable:!0},{name:"FH_REGISTRO",label:"Fecha",field:"FH_REGISTRO",align:"left",sortable:!0},{name:"ACCION",label:"Acción",field:"ACCION",align:"center",width:60}],fieldsUsuario:[{align:"left",field:"CODIGO",name:"CODIGO",label:"Código"},{align:"left",field:"NOMCOMP",name:"NOMCOMP",label:"Nombres"}]}}},Ve=n(73890),ye=n(57668),Me=n(84603),xe=n(62006),$e=n(40102),qe=n(80660),ze=n(2819),Qe=n(93616),Ge={mixins:[Le],components:{sieSelect:Qe.A,formularioCovid:$e.A,QDownloadFile:xe.A,siePdf:Me.A,QList:we.A,QItem:Ee.A,QItemSection:Re.A,sieNivel:Ve.A,QDate:Ne.A,QPopupProxy:Ue.A,QInput:oe.A,QSelect:Pe.A,QSeparator:Te.A,QCardSection:J.A,sieModal:ee.A,QPage:j.Tu,QCard:j.C$,QIcon:j.bP},data:function(){var e=this;return{ngs:{},usuarios:[],tipoExportacion:1,idAutorizacion:null,tiposExportacion:[{label:"Masiva",value:1},{label:"Por Persona",value:2}],autorizaciones:[],niveles:[],grados:[],secciones:[],preMatriculados:[{label:"Si",value:"Si"},{label:"No",value:"No"}],sie:(0,ye["default"])(),procesos:[],currentItem:{},currentUser:{},urlUserFile:"",type:"",openModalCovidDocumentos:!1,covidDocumentos:{},itemAutorizacion:{},estados:[{value:0,label:"Todos"},{value:1,label:"Pendiente"},{value:3,label:"Autorizado"}],form:{fhIni:"01/01/".concat((new Date).getFullYear()),fhFin:(0,Se.Ay)(new Date,"DD/MM/YYYY"),nivel:"",grado:"",seccion:"",idProceso:null,estado:0},formulario:{},showFormulario:!1,modalAutorizar:!1,buttons:[{icon:"cogs",label:"Autorizar",tooltip:"Autorización Masiva",click:function(){e.openModalAutorizar()}},{icon:"folder_download",label:"Exportar",click:function(){e.exportar("pdf")}},{icon:"file_pdf",label:"Pdf",click:function(){e.printListadoRegistro("pdf")}},{icon:"file_excel",label:"Excel",click:function(){e.printListadoRegistro("xlsx")}}]}},computed:{idPerfilDestino:function(){var e=this,o=this.procesos.find(function(o){return o.ID_PROCESO===e.form.idProceso});return o?o.ID_PERFIL_DESTINO:null}},methods:{openModalAutorizar:function(e){var o=this;return Y()(G()().m(function e(){return G()().w(function(e){while(1)switch(e.n){case 0:o.modalAutorizar=!0;case 1:return e.a(2)}},e)}))()},autorizar:function(e){var o=this;return Y()(G()().m(function e(){var n,t;return G()().w(function(e){while(1)switch(e.n){case 0:if(o.idAutorizacion){e.n=1;break}return o.$notify("Elija una autorizacón.","warning"),e.a(2,!1);case 1:if(n=o.autorizaciones.filter(function(e){return e.ID_AUTORIZACION===o.idAutorizacion}),2!==o.tipoExportacion){e.n=3;break}if(t=o.$refs.tablaUsuario.rowsSelected(["ID_PROCESO","ID_PERSONA","ALUCOD","FAM_RESP","ANO","USUCOD_ORIGEN","COMORBILIDAD","DETALLE_COMORBILIDAD","ESTADO","FH_REGISTRO","IP"]),t.length){e.n=2;break}return e.a(2,o.$notify("¡No hay Usuarios para autorizar!.","warning"));case 2:o.$http.post("api/covidautorizacion/autorizar",{id_autorizacion:o.idAutorizacion,id_proceso:n[0].ID_PROCESO,data:t}).then(function(e){o.$notify("Se aprobaron las autorizaciones","success"),o.loadCovidRegistro(),o.getUsuarios(),o.modalAutorizar=!1}).catch(function(e){var n=e.error&&e.error.message?e.error.message:"Ocurrió un error";o.$notify(n,"warning")}),e.n=4;break;case 3:o.$http.post("api/covidautorizacion/autorizar",{id_autorizacion:o.idAutorizacion,id_proceso:n[0].ID_PROCESO}).then(function(e){o.$notify("Se aprobaron las autorizaciones","success"),o.loadCovidRegistro(),o.modalAutorizar=!1}).catch(function(e){var n=e.error&&e.error.message?e.error.message:"Ocurrió un error";o.$notify(n,"warning")});case 4:return e.a(2)}},e)}))()},imprimir:function(e){var o={id_persona:e.ID_PERSONA,id_proceso:e.ID_PROCESO},n=(0,qe.getBase)()+"/api/CovidDocumento/imprimirDeclaracion";(0,ze.open)({data:o,action:n})},printListadoRegistro:function(e){var o=this.form.fhIni.split("/").reverse().join("-"),n=this.form.fhFin.split("/").reverse().join("-"),t={repcod:"listadoRegistro",formato:e,fhIni:o,fhFin:n,estado:this.form.estado,instrucod:this.form.nivel||"",gradocod:this.form.grado||"",procesoid:this.form.idProceso,idPerfilDestino:this.idPerfilDestino};(0,ze.exportFilePhp)(t,"webservice/reportes/reporte")},setIcons:function(e,o){var n={pdf:"file_pdf_o",jpg:"file_image",jpeg:"file_image",png:"file_image",bmp:"file_image"},t=n[e];return"autorizacion"===o&&(t="file_edit"),"formularios"===o&&(t="document_list"),t=t||"file_text_o",t},loadExtension:function(e){var o=e.RUTA||"",n=o.split("."),t=n.length?n[n.length-1]:"";return t},loadIcons:function(e){return this.setIcons(this.loadExtension(e),e.TYPE)},showDocumentUser:function(e){this.loadFile(e),e.UPLOAD>0?(this.urlUserFile=this.getUrlCovidAdjunto({ID_REGISTRO:e.ID_REGISTRO,ID_DOCUMENTO:e.ID_DOCUMENTO}),this.$refs.downloadFile.onClick()):this.$notify("No se ha subido un archivo aún.","warning")},getFamResp:function(){var e="";for(var o in this.covidDocumentos){var n=this.covidDocumentos[o];n.map(function(o){o.FAM_RESP&&(e=o.FAM_RESP)})}return e},loadBotones:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:return o.currentItem=e,n.n=1,o.$http.get("api/covidautorizacion/getCovidAutorizacionById",{params:{fam_resp:o.getFamResp(),id:e.ID_DOCUMENTO,alucod:o.currentUser.ALUCOD,id_persona:o.currentUser.ID_PERSONA,id_proceso:o.currentUser.ID_PROCESO}});case 1:o.itemAutorizacion=n.v;case 2:return n.a(2)}},n)}))()},loadFile:function(e){this.currentItem=e,this.showFormulario=!1,"formularios"===e.TYPE?(this.formulario={},this.formulario["PLANTILLA_HTML"]=e.RUTA,this.formulario["ID_FORMULARIO"]=e.ID_DOCUMENTO,this.formulario["ID_PERSONA"]=this.currentUser.ID_PERSONA,this.formulario["ID_PROCESO"]=this.currentUser.ID_PROCESO,this.formulario["ALUCOD"]=this.currentUser.ALUCOD,this.formulario["ID_REGISTRO"]=e.ID_REGISTRO,this.showFormulario=!0,this.type="",this.url=""):(this.type=this.loadExtension(e),this.url=this.getUrl(e))},getUrl:function(e){return e=e||{},"".concat(this.sie.api,"/HyoContenido/coviddocumento/").concat(e.ID_DOCUMENTO,"?sie-token=").concat(this.sie.token)},getUrlCovidAdjunto:function(e){return e=e||{},"".concat(this.sie.api,"/HyoContenido/covidadjunto/").concat(e.ID_REGISTRO,"/").concat(e.ID_DOCUMENTO,"?sie-token=").concat(this.sie.token)},loadDocumentos:function(e,o){var n=this;return Y()(G()().m(function t(){var i,a;return G()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,n.$http("api/CovidDocumento/getCovidDocumentoAndFiles",{params:{id_persona:e,id_proceso:o}});case 1:i=t.v,a={},i.map(function(e){a[e.TYPE]||(a[e.TYPE]=[]),a[e.TYPE].push(e)}),n.covidDocumentos=a;case 2:return t.a(2)}},t)}))()},getProcesos:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/covidautorizacion/getProcesos",{params:{ano:e.sie.ano}});case 1:e.procesos=o.v,e.procesos.length>0&&(e.form.idProceso=e.procesos[0].ID_PROCESO);case 2:return o.a(2)}},o)}))()},dropColumnNgsIfIsProfesor:function(){if(1===this.form.idProceso){var e=this.fields[2];"NGS"!==e.name&&this.fields.splice(2,0,{name:"NGS",label:"Ngs",field:"NGS",align:"center"})}else 2===this.form.idProceso&&this.fields.splice(2,1)},exportar:function(){var e=this;return Y()(G()().m(function o(){var n,t;return G()().w(function(o){while(1)switch(o.n){case 0:n={fhIni:e.form.fhIni,fhFin:e.form.fhFin,instrucod:e.form.nivel||"",gradocod:e.form.grado||"",seccioncod:e.form.seccion||"",idProceso:e.form.idProceso,idPerfilDestino:e.idPerfilDestino,estado:e.form.estado},t=(0,qe.getBase)()+"/api/CovidDocumento/exportar",(0,ze.open)({data:n,action:t});case 1:return o.a(2)}},o)}))()},loadCovidRegistro:function(){var e=this;return Y()(G()().m(function o(){var n;return G()().w(function(o){while(1)switch(o.n){case 0:return n={fhIni:e.form.fhIni,fhFin:e.form.fhFin,instrucod:e.form.nivel||"",gradocod:e.form.grado||"",seccioncod:e.form.seccion||"",idProceso:e.form.idProceso,idPerfilDestino:e.idPerfilDestino,estado:e.form.estado},o.n=1,e.$http.get("api/CovidRegistro/getCovidRegistro",{params:n});case 1:e.rows=o.v;case 2:return o.a(2)}},o)}))()},getNivelesGrados:function(){var e=this;return Y()(G()().m(function o(){var n;return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/NivelGrado/getNivelGrado");case 1:return n=o.v,o.a(2,n)}},o)}))()},createNG:function(e,o,n,t){if(!e)return[];var i=[];if(!0===t){var a={};a[o]="",a[n]="Todos",i.push(a)}for(var r in e){var l=e[r],s={};s[o]=l[o],s[n]=l[n],i.push(s)}return i},getNiveles:function(){return this.createNG(this.ngs,"INSTRUCOD","INSTRUDES",!0)},getUsuarios:function(){var e=this,o=this.autorizaciones.filter(function(o){return o.ID_AUTORIZACION===e.idAutorizacion});o&&o[0]&&o[0].ID_PROCESO&&this.$http.get("api/covidautorizacion/getUsuariosSinAutorizacion",{params:{id_autorizacion:this.idAutorizacion,id_proceso:o[0].ID_PROCESO,id_perfil_destino:o[0].ID_PERFIL_DESTINO}}).then(function(o){e.usuarios=o})},getGrados:function(){this.form.grado="",this.form.seccion="",this.form.nivel?this.grados=this.createNG(this.ngs[this.form.nivel].GRADOS,"GRADOCOD","GRADODES"):this.grados=[{GRADOCOD:"",GRADODES:"Todos"}],this.getSeccion()},cambiarAutorizacion:function(){this.getUsuarios()},getSeccion:function(){if(this.form.seccion="",this.form.grado){var e=this.ngs[this.form.nivel].GRADOS[this.form.grado];this.secciones=e.SECCIONES}else this.secciones=[{SECCIONCOD:"",SECCIONDES:"Todos"}]}},created:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/covidautorizacion/getCovidAutorizacion");case 1:return e.autorizaciones=o.v,o.n=2,e.getNivelesGrados();case 2:return e.ngs=o.v,e.niveles=e.getNiveles(),e.getGrados(),e.getSeccion(),o.n=3,e.getProcesos();case 3:return o.n=4,e.loadCovidRegistro();case 4:return o.a(2)}},o)}))()}},He=n(12807);const Ye=(0,He.A)(Ge,[["render",ke]]);var je=Ye,Xe={class:"row q-col-gutter-sm"},Be={class:"col-xs-12 col-sm-6"},We={class:"col-xs-12 col-sm-6"},Ke={class:"col-xs-12 col-sm-6"},Ze={class:"col-xs-12 col-sm-6"},Je={class:"col-xs-12 col-sm-6"},eo={class:"col-xs-12 col-sm-6"};function oo(e,o){var n=this,a=(0,t.g2)("header-btn"),r=(0,t.g2)("q-date"),l=(0,t.g2)("q-popup-proxy"),s=(0,t.g2)("q-icon"),c=(0,t.g2)("q-input"),u=(0,t.g2)("q-select"),d=(0,t.g2)("q-card-section"),f=(0,t.g2)("q-separator"),m=(0,t.g2)("q-download-file"),p=(0,t.g2)("sie-table"),h=(0,t.g2)("q-card"),b=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)(function(){return[(0,t.bF)(h,null,{default:(0,t.k6)(function(){return[(0,t.bF)(a,{buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",Xe,[(0,t.Lk)("div",Be,[(0,t.bF)(c,{outlined:"",modelValue:e.form.fhIni,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.fhIni=o}),readonly:"",label:"Desde"},{append:(0,t.k6)(function(){return[(0,t.bF)(s,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{modelValue:e.form.fhIni,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.form.fhIni=o}),onInput:o[1]||(o[1]=function(o){e.$refs.qDateProxy.hide(),e.loadCovidPruebas()}),mask:"DD/MM/YYYY"},{default:(0,t.k6)(function(){return te()(o[14]||(o[14]=[(0,t.Lk)("div",{class:"row items-center justify-end"},null,-1)]))}),_:1},8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,t.Lk)("div",We,[(0,t.bF)(c,{outlined:"",modelValue:e.form.fhFin,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.form.fhFin=o}),readonly:"",label:"Hasta"},{append:(0,t.k6)(function(){return[(0,t.bF)(s,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{modelValue:e.form.fhFin,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.fhFin=o}),onInput:o[4]||(o[4]=function(o){e.$refs.qDateProxy2.hide(),e.loadCovidPruebas()}),mask:"DD/MM/YYYY"},{default:(0,t.k6)(function(){return te()(o[15]||(o[15]=[(0,t.Lk)("div",{class:"row items-center justify-end"},null,-1)]))}),_:1},8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,t.Lk)("div",Ke,[(0,t.bF)(u,{modelValue:e.form.estado,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.form.estado=o}),options:e.estados,label:"Resultados",onInput:o[7]||(o[7]=function(o){return e.loadCovidPruebas()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",Ze,[(0,t.bF)(u,{modelValue:e.form.tipo,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.form.tipo=o}),options:e.perfiles,label:"Perfil",onInput:o[9]||(o[9]=function(o){return e.loadCovidPruebas()})},null,8,["modelValue","options"])]),1===e.form.tipo?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",Je,[(0,t.bF)(u,{modelValue:e.form.nivel,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.form.nivel=o}),options:e.niveles,"option-value":"INSTRUCOD","option-label":"INSTRUDES",label:"Nivel",onInput:o[11]||(o[11]=function(o){e.getGrados(e.form.nivel),e.loadCovidPruebas()})},null,8,["modelValue","options"])]),(0,t.Lk)("div",eo,[(0,t.bF)(u,{modelValue:e.form.grado,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.form.grado=o}),options:e.grados,"option-value":"GRADOCOD","option-label":"GRADODES",label:"Grados",onInput:o[13]||(o[13]=function(o){return e.loadCovidPruebas()})},null,8,["modelValue","options"])])],64)):(0,t.Q3)("v-if",!0)])]}),_:1}),(0,t.bF)(f),(0,t.bF)(d,null,{default:(0,t.k6)(function(){return[e.currentFile.item?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(m,{key:0,ref:"donwloadFile",src:e.src(e.currentFile.item),name:e.currentFile.item.name,extension:e.currentFile.item.extension,"direct-link":e.currentFile.item.directLink,inline:!0,item:e.currentFile.item},null,8,["src","name","extension","direct-link","item"])),[[i.aG,!1]]):(0,t.Q3)("v-if",!0),(0,t.bF)(p,{data:e.rows,columns:e.fields,config:e.config,style:{height:"50vh"},context:n},null,8,["data","columns","config"])]}),_:1})]}),_:1})]}),_:1})}n(49089);var no={pdf:"file_pdf",xls:"file_excel",xlsx:"file_excel",doc:"file_word",docx:"file_word",jpg:"file_image",png:"file_image",jpeg:"file_image",gif:"file_image"},to={data:function(){return{config:{archivo:{renderHtml:function(e,o){if(!e.adjunto||!e.adjunto.extension)return o("span");var n=no[e.adjunto.extension]||"file_document";return o("i",{class:"text-primary q-icon material-icons",style:{fontSize:"19px"}},n)},renderAction:function(e){this.currentFile.src=this.src(e.adjunto),this.currentFile.name=e.name,this.currentFile.extension=e.adjunto.extension,this.currentFile.directLink=e.adjunto.directLink,this.currentFile.item=e.adjunto,this.$refs.donwloadFile.onClick()}},accion:{component:"button",icon:["delete"],tooltip:{delete:"Eliminar"},delete:function(e){this.deletePruebaCovid(e.id)},permisos:{delete:"===3"},flat:!0},fecha:{component:"date"},registro:{component:"date"},resultado:{renderHtml:function(e,o){return 1===e.resultado?o("div",{style:{width:"100px"},class:"bg-negative text-white q-py-xs"},"Positivo"):o("div",{style:{width:"100px"},class:"bg-positive text-white q-py-xs"},"Negativo")}}},rows:[],fields:[{name:"codigo",label:"Código",field:"codigo",align:"center"},{name:"nomcomp",label:"Nombre",field:"nomcomp",align:"left"},{name:"ngs",label:"Ngs",field:"ngs",align:"center"},{name:"resultado",label:"Resultados",field:"resultado",align:"center"},{name:"fecha",label:"Fecha de Prueba",field:"fecha",align:"left"},{name:"archivo",label:"Archivo",field:"archivo",align:"left"},{name:"registro",label:"Fecha de Registro",field:"registro",align:"left"},{name:"accion",label:"Acción",field:"accion",align:"center",width:60}]}}},io={mixins:[to],components:{QDownloadFile:xe.A,sieNivel:Ve.A,QDate:Ne.A,QPopupProxy:Ue.A,QInput:oe.A,QSelect:Pe.A,QSeparator:Te.A,QCardSection:J.A,QPage:j.Tu,QCard:j.C$,QIcon:j.bP},data:function(){var e=this;return{currentFile:{name:null,src:null,extension:{},directLink:{},inline:!0,item:{}},niveles:[],grados:[],sie:(0,ye["default"])(),perfiles:[{value:1,label:"Estudiantes"},{value:2,label:"Personal"}],estados:[{value:null,label:"Todos"},{value:1,label:"Positivo"},{value:0,label:"Negativo"}],form:{fhIni:"01/01/".concat((new Date).getFullYear()),fhFin:(0,Se.Ay)(new Date,"DD/MM/YYYY"),nivel:"",grado:"",tipo:1,estado:null},buttons:[{icon:"file_pdf",label:"Pdf",click:function(){e.printListadoPruebas("pdf")}},{icon:"file_excel",label:"Excel",click:function(){e.printListadoPruebas("xlsx")}}]}},methods:{printListadoPruebas:function(e){var o=this.form.fhIni.split("/").reverse().join("-"),n=this.form.fhFin.split("/").reverse().join("-"),t={repcod:"listaPruebasCovid",formato:e,fhIni:o,fhFin:n,instrucod:this.form.nivel||"",gradocod:this.form.grado||"",tipo:this.form.tipo,estado:this.form.estado};(0,ze.exportFilePhp)(t,"webservice/reportes/reporte")},loadCovidPruebas:function(){var e=this;return Y()(G()().m(function o(){var n;return G()().w(function(o){while(1)switch(o.n){case 0:return n={fhIni:e.form.fhIni,fhFin:e.form.fhFin,instrucod:e.form.nivel||"",gradocod:e.form.grado||"",tipo:e.form.tipo,estado:e.form.estado},o.n=1,e.$http.get("api/CovidPrueba/listPruebasCovid",{params:n});case 1:e.rows=o.v;case 2:return o.a(2)}},o)}))()},src:function(e){return"".concat(this.sie.api,"/HyoContenido/pruebacovid/").concat(e.id,"?sie-token=").concat(this.sie.token)},getNivelesGrados:function(){var e=this;return Y()(G()().m(function o(){var n;return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/NivelGrado/getNivelGrado");case 1:return n=o.v,o.a(2,n)}},o)}))()},getNiveles:function(){var e=this;return Y()(G()().m(function o(){var n,t,i,a;return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.getNivelesGrados();case 1:for(i in n=o.v,t=[],n)a=n[i],t.push({INSTRUCOD:a.INSTRUCOD,INSTRUDES:a.INSTRUDES});return o.a(2,t)}},o)}))()},getGrados:function(e){var o=this;return Y()(G()().m(function n(){var t;return G()().w(function(n){while(1)switch(n.n){case 0:if(e){n.n=1;break}o.grados=[{GRADOCOD:"",GRADODES:"Todos"}],n.n=3;break;case 1:return n.n=2,o.getNivelesGrados();case 2:t=n.v,o.grados=Object.values(t[e].GRADOS);case 3:return n.a(2)}},n)}))()},deletePruebaCovid:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:o.$confirm("¿Está seguro de realizar esta acción?","delete").onOk(Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.post("api/CovidPrueba/deletePruebaCovid",{id:e});case 1:return n.n=2,o.loadCovidPruebas();case 2:o.$notify("Se eliminó correctamente","success"),n.n=4;break;case 3:n.p=3,n.v,o.$notify("No se pudo eliminar la prueba","warning");case 4:return n.a(2)}},n,null,[[0,3]])})));case 1:return n.a(2)}},n)}))()}},created:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.getNiveles();case 1:return e.niveles=o.v,o.n=2,e.getGrados();case 2:return o.n=3,e.loadCovidPruebas();case 3:return o.a(2)}},o)}))()}};const ao=(0,He.A)(io,[["render",oo]]);var ro=ao,lo=n(42553),so={class:"row q-pa-sm q-col-gutter-sm"},co={class:"col-12"},uo={class:"col-12"},fo={class:"col-12 col-md-6"},mo={class:"col-12 col-md-6"},po={class:"col-12"};function ho(e,o){var n=this,i=(0,t.g2)("header-btn"),a=(0,t.g2)("sie-table"),r=(0,t.g2)("q-card-section"),l=(0,t.g2)("q-card"),s=(0,t.g2)("q-select"),c=(0,t.g2)("q-input"),u=(0,t.g2)("q-datetime"),d=(0,t.g2)("q-checkbox"),f=(0,t.g2)("sie-modal"),m=(0,t.g2)("modalAsigacionFecha"),p=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(p,null,{default:(0,t.k6)(function(){return[(0,t.bF)(l,null,{default:(0,t.k6)(function(){return[(0,t.bF)(r,null,{default:(0,t.k6)(function(){return[(0,t.bF)(i,{name:"",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(a,{data:e.dataTabla,columns:e.columns,config:e.configTabla,context:n,css:{height:"69vh"}},null,8,["data","columns","config"])]}),_:1})]}),_:1}),(0,t.bF)(f,{modelValue:e.openModal,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.openModal=o}),onSubmit:e.save,title:"Proceso"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",so,[(0,t.Lk)("div",co,[(0,t.bF)(s,{modelValue:e.form.id_perfil_destino,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.form.id_perfil_destino=o}),options:e.perfilDestino,label:"Perfil",disable:"insert"!==e.flagAction,"option-value":"value","option-label":"label"},null,8,["modelValue","options","disable"])]),(0,t.Lk)("div",uo,[(0,t.bF)(c,{modelValue:e.form.titulo,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.form.titulo=o}),label:"Descripción"},null,8,["modelValue"])]),[2,4].includes(e.form.id_perfil_destino)||"insert"===e.flagAction?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",fo,[(0,t.bF)(u,{class:"q-if-outlined",modelValue:e.form.fh_inicio,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.form.fh_inicio=o}),"float-label":"Fecha Inicio",type:"datetime",format:"DD/MM/YYYY HH:mm"},null,8,["modelValue"])]),(0,t.Lk)("div",mo,[(0,t.bF)(u,{class:"q-if-outlined",modelValue:e.form.fh_fin,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.form.fh_fin=o}),"float-label":"Fecha Fin",type:"datetime",format:"DD/MM/YYYY HH:mm"},null,8,["modelValue"])])],64)):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",po,[(0,t.bF)(d,{modelValue:e.form.activo,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.form.activo=o}),"true-value":1,"false-value":0,label:"Activo"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"]),e.openModalAsignacion?((0,t.uX)(),(0,t.Wv)(m,{key:0,id_proceso:e.formAsignacion.id_proceso,fh_inicio:e.formAsignacion.fh_inicio,fh_fin:e.formAsignacion.fh_fin,onCerrarModal:o[6]||(o[6]=function(o){return e.openModalAsignacion=!1}),onEjecucionModal:e.recargarData},null,8,["id_proceso","fh_inicio","fh_fin","onEjecucionModal"])):(0,t.Q3)("v-if",!0)]}),_:1})}var bo=n(3112),vo=n(11654),go={data:function(){var e=this;return{configTabla:{ACTIVO:{component:"button",iconIf:{0:{icon:"check_box_outline_blank",color:"primary"},1:{icon:"check_box",color:"primary"}},flat:!0},FH_INICIO:{component:"datetime",edit:!1},FH_FIN:{component:"datetime",edit:!1},ACTION:{component:"button",icon:["sync as calcular","calendar as calendario","edit as editar","delete as eliminar"],editar:function(e){this.form.ano=e.ANO,this.form.id_proceso=e.ID_PROCESO,this.form.fh_inicio=new Date(e.FH_INICIO),this.form.fh_fin=new Date(e.FH_FIN),this.form.id_perfil_destino=e.ID_PERFIL_DESTINO,this.form.titulo=e.TITULO,this.form.activo=e.ACTIVO,this.flagAction="update",this.openModal=!0},calcular:function(e){this.recalcularCupos(e.ID_PROCESO)},eliminar:function(e){var o=this;this.$confirm("¿Estás seguro de eliminar este registro?","delete").onOk(Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:o.elimiarRegistro(e.ID_PROCESO);case 1:return n.a(2)}},n)})))},calendario:function(e){this.openModalAsignacion=!0,this.formAsignacion={fh_inicio:e.FH_INICIO,fh_fin:e.FH_FIN,id_proceso:e.ID_PROCESO,id_perfil_destino:e.ID_PERFIL_DESTINO}},validate:{calendario:function(e){return 1===e.ID_PERFIL_DESTINO},calcular:function(e){return 1===e.ID_PERFIL_DESTINO}},permisos:{calcular:">1",calendario:">1",editar:">1",eliminar:">2"},tooltip:{calcular:"Recalcular conteo de cupos",calendario:"Asignar fechas y cupos",editar:"Editar",eliminar:"Eliminar"},flat:!0,dense:!0,color:"primary"}},columns:[{name:"ID_PROCESO",label:"Código",field:"ID_PROCESO",align:"center"},{name:"TITULO",label:"Descripción",field:"TITULO",align:"left"},{name:"FH_INICIO",label:"Fecha de Inicio",field:"FH_INICIO",align:"center"},{name:"FH_FIN",label:"Fecha Fin",align:"left",field:"FH_FIN"},{name:"ACTIVO",label:"Activo",field:"ACTIVO",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:120}],dataTabla:[],buttons:[{icon:"plus",label:"Agregar",permiso:">1",click:function(){e.limpiarForm(),e.openModal=!0,e.flagAction="insert"}}]}}},Ao={class:"row q-ma-lg-sm q-px-sm text-weight-bold text-info"},Oo={class:"col-auto flex-center"},Co={class:"row q-ma-lg-sm"},Io={class:"col-md-4"},Do={class:"row q-ma-lg-sm"},_o={class:"col-md-4"},Fo={class:"col-md-4"},ko={class:"col-md-2"},wo={class:"col-md-2"},Eo={class:"row q-ma-lg-sm"},Ro={class:"col"},To={class:"row"},Po={class:"col-xs-12 col-md-6"},So={class:"col-xs-12 col-md-6"},Uo={class:"row"},No={class:"col q-ma-sm overflow-auto",style:{height:"60vh"}},Lo={key:0};function Vo(e,o){var n=(0,t.g2)("q-icon"),a=(0,t.g2)("q-select"),r=(0,t.g2)("q-datetime"),l=(0,t.g2)("q-input"),s=(0,t.g2)("q-btn"),c=(0,t.g2)("q-spinner-oval"),u=(0,t.g2)("q-td"),d=(0,t.g2)("q-table"),f=(0,t.g2)("sie-modal");return(0,t.uX)(),(0,t.Wv)(f,{class:"modal-asignar-fechas",modelValue:e.verModal,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.verModal=o}),title:"Asignación",footer:!1,header:!0,onClose:e.cerrarModal},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",Ao,[(0,t.Lk)("div",Oo,[(0,t.bF)(n,{class:"q-mr-sm",name:"info",size:"28px"})]),o[9]||(o[9]=(0,t.Lk)("div",{class:"col self-center"},[(0,t.Lk)("div",null,"Seleccionar los salones para actualizar los datos")],-1))]),(0,t.Lk)("div",Co,[(0,t.Lk)("div",Io,[(0,t.bF)(a,{class:"q-if-outlined",color:"secondary",modelValue:e.tipoUpdate,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.tipoUpdate=o}),options:e.optTiposUpdate,"float-label":"Datos para actualizar",disable:e.loading},null,8,["modelValue","options","disable"])])]),(0,t.Lk)("div",Do,[(0,t.bo)((0,t.Lk)("div",_o,[(0,t.bF)(r,{class:"q-if-outlined",modelValue:e.fechaIni,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.fechaIni=o}),"float-label":"Fecha Inicio",type:"datetime",format:"DD/MM/YYYY HH:mm",disable:e.loading},null,8,["modelValue","disable"])],512),[[i.aG,1==e.tipoUpdate||2==e.tipoUpdate]]),(0,t.bo)((0,t.Lk)("div",Fo,[(0,t.bF)(r,{class:"q-if-outlined",modelValue:e.fechaFin,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.fechaFin=o}),"float-label":"Fecha Final",type:"datetime",format:"DD/MM/YYYY HH:mm",disable:e.loading},null,8,["modelValue","disable"])],512),[[i.aG,1==e.tipoUpdate||2==e.tipoUpdate]]),(0,t.bo)((0,t.Lk)("div",ko,[(0,t.bF)(l,{class:"q-if-outlined",modelValue:e.cupos,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.cupos=o}),"float-label":"Aforo",disable:e.loading},null,8,["modelValue","disable"])],512),[[i.aG,1==e.tipoUpdate||3==e.tipoUpdate]]),(0,t.Lk)("div",wo,[e.sie.ruta.nivel>1?((0,t.uX)(),(0,t.Wv)(s,{key:0,class:"bg-primary text-white",label:"Guardar","no-caps":"",flat:"",onClick:o[4]||(o[4]=function(o){return e.procesar()}),disable:e.loading},null,8,["disable"])):(0,t.Q3)("v-if",!0)])]),o[10]||(o[10]=(0,t.Lk)("hr",null,null,-1)),(0,t.Lk)("div",Eo,[(0,t.Lk)("div",Ro,[(0,t.Lk)("div",To,[(0,t.Lk)("div",Po,[(0,t.bF)(a,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.instrucod,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.vmFiltro.instrucod=o}),options:e.niveles,"float-label":e.$t("ngs.nivel"),onInput:e.cambiarNivel,disable:e.loading},null,8,["modelValue","options","float-label","onInput","disable"])]),(0,t.Lk)("div",So,[(0,t.bF)(a,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.ng,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.vmFiltro.ng=o}),options:e.grados,"float-label":e.$t("ngs.grado"),onInput:e.cambiarGrado,disable:e.loading},null,8,["modelValue","options","float-label","onInput","disable"])])])])]),(0,t.Lk)("div",Uo,[(0,t.Lk)("div",No,[(0,t.bF)(d,{"table-style":"height: 50vh",selection:e.configTabla.tipoSeleccion,"row-key":"ID_PROCESO_ASIGNA",color:"secondary",data:e.dataTabla,columns:e.configTabla.columnas,selected:e.configTabla.registrosSeleccionados,"onUpdate:selected":o[7]||(o[7]=function(o){return e.configTabla.registrosSeleccionados=o})},{"body-cell-ESTADOPROCESO":(0,t.k6)(function(e){return[(0,t.bF)(u,{props:e},{default:(0,t.k6)(function(){return[0==e.value?((0,t.uX)(),(0,t.CE)("p",Lo)):-1==e.value?((0,t.uX)(),(0,t.Wv)(c,{key:1,color:"primary",size:"15px"})):1==e.value?((0,t.uX)(),(0,t.Wv)(n,{key:2,class:"text-green",name:"check",size:"24px"})):2==e.value?((0,t.uX)(),(0,t.Wv)(n,{key:3,class:"text-red",name:"error",size:"24px"})):(0,t.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-FH_INICIO":(0,t.k6)(function(o){return[(0,t.bF)(u,{props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,ie.v_)(e.date(o.row.FH_INICIO,"DD/MM/YYYY hh:mm:a")),1)]}),_:2},1032,["props"])]}),"body-cell-FH_FIN":(0,t.k6)(function(o){return[(0,t.bF)(u,{props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,ie.v_)(e.date(o.row.FH_FIN,"DD/MM/YYYY hh:mm:a")),1)]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","selected"])])])]}),_:1},8,["modelValue","onClose"])}n(12563),n(90095),n(11777),n(13715);var yo=n(30545),Mo=n(51082),xo=n(982),$o={emits:["cerrarModal","ejecucionModal"],props:{id_proceso:{required:!0,type:Number},fh_inicio:{required:!0},fh_fin:{required:!0}},components:{QDatetime:j.T5,QSelect:j.Si,QInnerLoading:j.SQ,QSpinnerOval:j.VA,QTable:yo.A,QTh:j.EJ,QTr:j.qh,QTd:j.Ef,sieDate:Mo.A,sieModal:ee.A,QIcon:j.bP,QInput:j.ie,QBtn:j.Il},data:function(){return{sie:(0,ye["default"])(),verModal:!0,vmFiltro:{instrucod:"all",ng:"all-all"},configTabla:{},dataTabla:[],fechaIni:new Date(this.fh_inicio),fechaFin:new Date(this.fh_fin),cupos:0,loading:!1,salones:[],tipoUpdate:1,optTiposUpdate:[{value:1,label:"Fechas y aforo"},{value:2,label:"Solo fechas"},{value:3,label:"Solo aforo"}]}},computed:{niveles:function(){var e=[],o=[];o.push({label:"Todos",value:"all"});for(var n=0;n<this.salones.length;n++){var t=this.salones[n];e.includes(t.INSTRUCOD)||(e.push(t.INSTRUCOD),o.push({label:t.INSTRUDES,value:t.INSTRUCOD}))}return o},grados:function(){var e=[],o=this.vmFiltro.instrucod;if(o){var n=[];e.push({label:"Todos",value:o+"-all"});for(var t=0;t<this.salones.length;t++){var i=this.salones[t],a=i.INSTRUCOD+"-"+i.GRADOCOD;o!==i.INSTRUCOD||n.includes(a)||(n.push(a),e.push({label:i.GRADODES,value:a}))}}return e}},methods:{date:Se.Ay,cerrarModal:function(){this.$emit("cerrarModal")},cambiarNivel:function(){this.vmFiltro.ng=this.vmFiltro.instrucod+"-all",this.filtrarSalones()},cambiarGrado:function(){this.filtrarSalones()},filtrarSalones:function(){var e=this.vmFiltro.instrucod,o=this.vmFiltro.ng,n=[];n="all"===e?this.salones:this.salones.filter(function(e){return e.INSTRUCOD+"-"+e.GRADOCOD===o||o===e.INSTRUCOD+"-all"}),this.dataTabla=n.map(function(e){return e.NGS=e.INSTRUCOD+e.GRADOCOD+e.SECCIONCOD,e}),this.configTabla.registrosSeleccionados=[]},configurarTabla:function(){var e={};e.columnas=[{name:"ID_PROCESO_ASIGNA",label:"",field:"ID_PROCESO_ASIGNA",align:"left",style:"display: none"},{name:"NGS",label:this.$t("ngs.ngs"),field:"NGS",align:"left",sortable:!0},{name:"NEMODES",label:this.$t("ambito"),field:"NEMODES",align:"left",sortable:!0},{name:"FH_INICIO",label:"Fecha de Inicio",field:"FH_INICIO",align:"left",sortable:!0},{name:"FH_FIN",label:"Fecha Fin",field:"FH_FIN",align:"left",sortable:!0},{name:"CUPO_TOTAL",label:"Aforo",field:"CUPO_TOTAL",align:"center",sortable:!0},{name:"CUPO_REG",label:"Estudiantes Registrados",field:"CUPO_REG",align:"center",sortable:!0},{name:"ESTADOPROCESO",label:"-",field:"ESTADOPROCESO",align:"center",sortable:!0}],e.registrosSeleccionados=[],e.tipoSeleccion="multiple",this.configTabla=e},resetaerEstado:function(){this.salones.forEach(function(e){e.ESTADOPROCESO=0})},procesar:function(){var e=this;return Y()(G()().m(function o(){var n,t,i,a,r,l,s,c;return G()().w(function(o){while(1)switch(o.p=o.n){case 0:if(n=e.configTabla.registrosSeleccionados,0!==n.length){o.n=1;break}return(0,xo["default"])("Seleccione un salón","error"),o.a(2);case 1:if(1!==e.tipoUpdate&&2!==e.tipoUpdate||!(e.fechaIni.getTime()>e.fechaFin.getTime())){o.n=2;break}return(0,xo["default"])("La Fecha de Inicio no puede ser mayor a la fecha Final","error"),o.a(2);case 2:if(1!==e.tipoUpdate&&3!==e.tipoUpdate||e.cupos){o.n=3;break}return(0,xo["default"])("Seleccione la cantidad de cupos","error"),o.a(2);case 3:e.loading=!0,t=null,e.resetaerEstado(),o.p=4,i=0;case 5:if(!(i<n.length)){o.n=9;break}return a=n[i],r=a["__index"],t=r,e.dataTabla[r].ESTADOPROCESO=-1,o.n=6,qe.$http.post("api/HyoCovidProceso/actualizarAsignacion",{tipo_update:e.tipoUpdate,id_proceso_asigna:a.ID_PROCESO_ASIGNA,fechaIni:e.fechaIni,fechaFin:e.fechaFin,cupos:e.cupos});case 6:if(l=o.v,s=l.json.status,e.dataTabla[r].ESTADOPROCESO=s,1!==s){o.n=7;break}1!==e.tipoUpdate&&2!==e.tipoUpdate||(e.dataTabla[r].FH_INICIO=e.fechaIni,e.dataTabla[r].FH_FIN=e.fechaFin),1!==e.tipoUpdate&&3!==e.tipoUpdate||(e.dataTabla[r].CUPO_TOTAL=e.cupos),o.n=8;break;case 7:throw new Error(l.json.msj);case 8:i++,o.n=5;break;case 9:(0,xo["default"])(e.$t("mensajes.m0008"),"success"),o.n=11;break;case 10:o.p=10,c=o.v,null!==t&&(e.dataTabla[t].ESTADOPROCESO=2),(0,xo["default"])(c.message||c.error.message,"error");case 11:return o.n=12,qe.$http.post("api/HyoCovidProceso/actualizarFechaProcesoAlumno",{id_proceso:e.id_proceso});case 12:e.$emit("ejecucionModal"),e.loading=!1;case 13:return o.a(2)}},o,null,[[4,10]])}))()},cargarData:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:qe.$http.get("api/HyoCovidProceso/listarAsignacion",{params:{id_proceso:e.id_proceso}}).then(function(o){var n=o.json;e.salones=n.map(function(e){return e.ESTADOPROCESO=0,e}),e.filtrarSalones()});case 1:return o.a(2)}},o)}))()}},created:function(){this.configurarTabla(),this.cargarData()}};const qo=(0,He.A)($o,[["render",Vo]]);var zo=qo,Qo={mixins:[go],components:{modalAsigacionFecha:zo,QCheckbox:bo.A,QDatetime:j.T5,QSplitter:X.A,QTabs:B.A,QTab:W.A,QTabPanels:K.A,QTabPanel:Z.A,QCardSection:J.A,SieModal:ee.A,QInput:oe.A,QBtn:vo.A,QSelect:Pe.A,QPage:j.Tu,QCard:j.C$},data:function(){return{perfilDestino:[],flagAction:null,form:{},openModal:!1,sie:(0,ye["default"])(),openModalAsignacion:!1,formAsignacion:{}}},methods:{deleteCovidDesinfeccion:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.$http.delete("api/CovidDesinfeccionController/deleteCovidDesinfeccion",{params:{id:e}}).then(function(e){o.$notify(e.message,"success"),o.getAmbientes()}).catch(function(e){o.$notify(e.message,"warning")});case 1:return n.a(2)}},n)}))()},limpiarForm:function(){this.form={ano:this.sie.ano,id_proceso:null,fh_inicio:new Date,fh_fin:new Date,id_perfil_destino:null,titulo:"",activo:1}},save:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:if(e.form.id_perfil_destino){o.n=1;break}return e.$notify("Seleccione un proceso","error"),o.a(2);case 1:if(e.form.titulo){o.n=2;break}return e.$notify("Escrina una descripción","error"),o.a(2);case 2:if(!(e.form.fh_inicio.getTime()>e.form.fh_fin.getTime())){o.n=3;break}return e.$notify("La Fecha de Inicio no puede ser mayor a la Fecha Final","error"),o.a(2);case 3:e.$http.post("api/HyoCovidProceso/crearActualizar",{data:e.form}).then(function(o){e.$notify(o.json.message,"success"),e.openModal=!1,e.limpiarForm(),e.getProcesos()}).catch(function(o){e.$notify(o.error.message||o.message,"warning")});case 4:return o.a(2)}},o)}))()},getProcesos:function(){var e=this;return Y()(G()().m(function o(){var n;return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoCovidProceso/list",{params:{ano:e.sie.ano}});case 1:n=o.v,e.dataTabla=n.json;case 2:return o.a(2)}},o)}))()},getPerfilDestino:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/FichaSintomatologica/getPerfilDestino");case 1:e.perfilDestino=o.v;case 2:return o.a(2)}},o)}))()},recalcularCupos:function(e){var o=this;this.$http.post("api/HyoCovidProceso/reprocesarCupos",{id_proceso:e}).then(function(e){o.$notify(e.json.message,"success"),o.getProcesos()}).catch(function(e){o.$notify(e.error.message||e.message,"warning")})},elimiarRegistro:function(e){var o=this;this.$http.post("api/HyoCovidProceso/eliminar",{id_proceso:e}).then(function(e){o.$notify(e.json.message,"success"),o.getProcesos()}).catch(function(e){o.$notify(e.error.message||e.message,"warning")})},recargarData:function(){this.getProcesos()}},created:function(){this.getProcesos(),this.getPerfilDestino(),this.limpiarForm()}};const Go=(0,He.A)(Qo,[["render",ho]]);var Ho=Go,Yo=n(59089),jo=n(33950),Xo={data:function(){return{config:{ACTIVO:{component:"button",iconIf:{0:{icon:"check_box_outline_blank",color:"primary"},1:{icon:"check_box",color:"primary"}},flat:!0},ACTION:{component:"button",icon:["remove_red_eye as ver","edit as editar","delete as eliminar"],tooltip:{ver:"Ver",editar:"Editar",eliminar:"Eliminar"},validate:{ver:function(e){return 2!==e.ACCION}},ver:function(e){var o=e.RUTA.split("."),n=o[o.length-1].toLowerCase();this.titleModalPdf=e.NOMBRE,this.url=this.getUrl(e),this.openModalPdf="pdf"===n,"pdf"!==n&&this.$refs.downloadFile.onClick()},editar:function(e){this.editRow=e,this.form.titulo=e.TITULO,this.form.id_proceso=e.ID_PROCESO,this.form.activo=e.ACTIVO,this.form.orden=e.ORDEN,this.form.accion=e.ACCION,this.showUpload(),this.flagAction="update",this.openModalCovidDocumento=!0},eliminar:function(e){var o=this;this.$confirm("¿Está seguro de eliminar este registro?","delete").onOk(Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.deleteCovidDocumento(e.ID_DOCUMENTO);case 1:return n.a(2)}},n)})))},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0,color:"primary"}},rows:[],fields:[{name:"ID_DOCUMENTO",label:"Código",field:"ID_DOCUMENTO",align:"center"},{name:"NOMBRE",label:"Nombre",field:"NOMBRE",align:"left"},{name:"ACTIVO",label:"Activo",field:"ACTIVO",align:"center"},{name:"PROCESO",label:"Proceso",field:"PROCESO",align:"left"},{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},Bo={data:function(){return{configAuth:{ACTIVO:{component:"button",iconIf:{0:{icon:"check_box_outline_blank",color:"primary"},1:{icon:"check_box",color:"primary"}},flat:!0},ACTION:{component:"button",icon:["remove_red_eye as ver","edit as editar","delete as eliminar"],tooltip:{ver:"Ver",edit:"Editar",eliminar:"Eliminar"},ver:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:o.editRowAuth=e,o.openModalHtml=!0,o.titleModalHtml=e.TITULO;case 1:return n.a(2)}},n)}))()},editar:function(e){this.editarAutorizacion(e)},eliminar:function(e){var o=this;this.$confirm("¿Estás seguro de eliminar este registro?","delete").onOk(Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.deleteCovidAutorizacion(e.ID_AUTORIZACION);case 1:return n.a(2)}},n)})))},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0,color:"primary"}},rowsAuth:[],fieldsAuth:[{name:"ID_AUTORIZACION",label:"Código",field:"ID_AUTORIZACION",align:"center"},{name:"TITULO",label:"Nombre",field:"TITULO",align:"left"},{name:"ACTIVO",label:"Activo",field:"ACTIVO",align:"center"},{name:"PROCESO",label:"Proceso",field:"PROCESO",align:"left"},{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},Wo={data:function(){return{configFrm:{ACTIVO:{component:"button",iconIf:{0:{icon:"check_box_outline_blank",color:"primary"},1:{icon:"check_box",color:"primary"}},flat:!0},ACTION:{icon:["edit as editar","delete as eliminar"],tooltip:{editar:"Editar",eliminar:"Eliminar"},component:"button",permisos:{editar:">= 2",eliminar:"=== 3"},editar:function(e){this.openCovidFormulario(e)},eliminar:function(e){var o=this;this.$confirm("¿Estás seguro de eliminar este registro?","delete").onOk(Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.deleteCovidFormulario(e);case 1:return n.a(2)}},n)})))},flat:!0,dense:!0,color:"primary"}},rowsFrm:[],fieldsFrm:[{name:"TITULO",label:"Nombre",field:"TITULO",align:"left"},{name:"ACTIVO",label:"Activo",field:"ACTIVO",align:"center"},{name:"PROCESO",label:"Proceso",field:"PROCESO",align:"left"},{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},Ko=n(6083),Zo=n(11091),Jo={mixins:[Xo,Bo,Wo],components:{siePdf:Me.A,QSplitter:X.A,QTabs:B.A,QTab:W.A,QTabPanels:K.A,QTabPanel:Z.A,QCardSection:J.A,SieModal:ee.A,QInput:oe.A,QCheckbox:bo.A,QBtn:vo.A,sieUpload:Yo.A,QSelect:Pe.A,QDownloadFile:xe.A,sieEditor:Ko.A,listaProcesos:Ho,listaInscripciones:je,listaPruebas:ro,listaVacunas:lo.A,formularioRegistro:Zo.A,QPage:j.Tu,QCard:j.C$},data:function(){return{openModalHtml:!1,titleModalPdf:"",openModalPdf:!1,optProcesos:[],objProcesoPerfil:{},tabType:"registro",editRow:{},editRowAuth:{},sie:(0,ye["default"])(),url:"",flagAction:"new",flagActionAuth:"new",file:null,showAccion:!1,form:{titulo:"",id_proceso:null,activo:1,orden:1,acciones:[{label:"Descarga y Subida del Documento",value:1},{label:"Subida",value:2},{label:"Visualización",value:3}],accion:null},formAuth:{titulo:"",id_proceso:null,modoRespuestas:[{label:"solamente si",value:1},{label:"si (obligatorio) / no",value:2}],perfilDestino:null,modoRespuesta:null,aceptacion:"",negacion:"",activo:1,orden:1,html:"",openModalCovidFrm:!1},openModalCovidDocumento:!1,openModalCovidAuth:!1,splitterModel:20,currentTab:"documento",buttons:[{icon:"plus",label:"Agregar",click:this.openCovidDocumento,permiso:">1"}],buttonsAuth:[{icon:"plus",label:"Agregar",click:this.openCovidAutorizacion,permiso:">1"}],buttonsFrm:[{icon:"plus",label:"Agregar",click:this.openCovidFormulario,permiso:">1"}],frmAsigna:{},openModalCovidFormulario:!1,formularios:[],etiqueta1:"\n      <b>Código del Alumno:</b> {{ALUCOD}}<br>\n      <b>Nombre del Alumno:</b> {{NOMCOMP}}<br>\n      <b>Documento del Alumno:</b> {{DOCIDENRO}}<br>\n      <b>Nivel del Alumno:</b> {{INSTRUDES}}<br>\n      <b>Grado del Alumno:</b> {{GRADODES}}<br>\n      <b>Salón del Alumno:</b> {{NEMODES}}<br>",etiqueta1_verano:"\n      <b>Código del Alumno:</b> {{ALUCOD}}<br>\n      <b>Nombre del Alumno:</b> {{NOMCOMP}}<br>\n      <b>Documento del Alumno:</b> {{DOCIDENRO}}<br>",etiqueta2:"\n      <b>Código de Familia:</b> {{FAMCOD}}<br>\n      <b>Descripcion de la Familia:</b> {{FAMDES}}<br>\n      <b>Dirección de la Familia:</b> {{FAMDIR}}<br>\n      <b>Nombre del Responsable:</b> {{RESPONSABLE_NOMBRE}}<br>\n      <b>Documento del Responsable:</b> {{RESPONSABLE_DOCUMENTO}}<br>",etiqueta3:"<b>Dirección del Responsable:</b> {{RESPONSABLE_DIRECCION}}<br>\n      <b>Teléfono / Celular  del Responsable:</b> {{RESPONSABLE_TELEFONO}}<br>\n      <b>Responsable parentesco:</b> {{RESPONSABLE_PARENTESCO}}<br>\n      <b>Fecha Actual Letras:</b> {{FECHA_LETRAS}}<br>",etiqutaPersonal:"\n      <b>Cargo:</b> {{RESPONSABLE_CARGO}}<br>\n      <b>Dirección:</b> {{RESPONSABLE_DIRECCION}}<br>\n      <b>Nombre:</b> {{RESPONSABLE_NOMBRE}}<br>",etiqutaPersonal2:"\n      <b>Documento:</b> {{RESPONSABLE_DOCUMENTO}}<br>\n      <b>Teléfono / Celular:</b> {{RESPONSABLE_TELEFONO}}<br>\n      <b>Fecha Actual Letras:</b> {{FECHA_LETRAS}}<br>"}},methods:{clear:function(){this.form.titulo="",this.form.id_proceso=null,this.form.activo=1,this.form.orden=1,this.form.accion=null,this.file=null,this.showAccion=!1},clearAuth:function(){this.formAuth.perfilDestino=null,this.formAuth.titulo="",this.formAuth.id_proceso=null,this.formAuth.modoRespuesta=null,this.formAuth.aceptacion="",this.formAuth.negacion="",this.formAuth.activo=1,this.formAuth.orden=1,this.formAuth.html=""},editarAutorizacion:function(e){this.editRowAuth=e,this.formAuth.perfilDestino=this.objProcesoPerfil[e.ID_PROCESO],this.formAuth.titulo=e.TITULO,this.formAuth.id_proceso=e.ID_PROCESO,this.formAuth.modoRespuesta=e.MODO_RESPUESTA,this.formAuth.aceptacion=e.TEXTO_ACEPTACION,this.formAuth.negacion=e.TEXTO_NEGACION,this.formAuth.activo=e.ACTIVO,this.formAuth.orden=e.ORDEN,this.formAuth.html=e.CUERPO_HTML,this.flagActionAuth="update",this.openModalCovidAuth=!0},getFrmAsignacion:function(e){var o={};return o=e||{ID_PROCESO:null,ID_FORMULARIO:"",ID_PROCESO_OLD:"",ID_FORMULARIO_OLD:"",TITULO:"",ACTIVO:1,ORDEN:1,ACCION:1},o},showUpload:function(){switch(this.form.accion){case 1:this.showAccion=!0;break;case 2:this.showAccion=!1;break;case 3:this.showAccion=!0;break}},saveCovidDocumento:function(){var e=this;return Y()(G()().m(function o(){var n,t;return G()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.form.titulo){o.n=1;break}return e.$notify("Debe escribir un título.","warning"),o.a(2);case 1:if(!(e.form.id_proceso<1)){o.n=2;break}return e.$notify("Debe seleccionar un proceso.","warning"),o.a(2);case 2:if(e.form.accion){o.n=3;break}return e.$notify("Debe seleccionar una acción.","warning"),o.a(2);case 3:if(e.file||![1,3].includes(e.form.accion)){o.n=4;break}return e.$notify("Debe seleccionar un archivo.","warning"),o.a(2);case 4:if(n={id_proceso:e.form.id_proceso,accion:e.form.accion,titulo:e.form.titulo,activo:e.form.activo,orden:e.form.orden},t={formulario:n,file:e.file||{}},o.p=5,"new"!==e.flagAction){o.n=7;break}return o.n=6,e.$http.post("api/coviddocumento/createCovidDocumento",t);case 6:o.n=8;break;case 7:return t.formulario.idDocumento=e.editRow.ID_DOCUMENTO,o.n=8,e.$http.put("api/coviddocumento/updateCovidDocumento",t);case 8:e.clear(),e.openModalCovidDocumento=!1,e.readCovidDocumento(),e.$notify("Se ha guardado satisfactoriamente.","success"),o.n=10;break;case 9:o.p=9,o.v,e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo.","warning");case 10:return o.a(2)}},o,null,[[5,9]])}))()},saveCovidAutorizacion:function(){var e=this;return Y()(G()().m(function o(){var n;return G()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.formAuth.titulo){o.n=1;break}return e.$notify("Debe escribir un título.","warning"),o.a(2);case 1:if(!(e.formAuth.id_proceso<1)){o.n=2;break}return e.$notify("Debe seleccionar un proceso.","warning"),o.a(2);case 2:if(e.formAuth.modoRespuesta){o.n=3;break}return e.$notify("Debe seleccionar un modo de respuesta.","warning"),o.a(2);case 3:if(e.formAuth.html){o.n=4;break}return e.$notify("Debe llenar contenido.","warning"),o.a(2);case 4:if(![2,3].includes(e.formAuth.modoRespuesta)){o.n=6;break}if(e.formAuth.aceptacion){o.n=5;break}return e.$notify("Debe llenar aceptacion.","warning"),o.a(2);case 5:if(e.formAuth.negacion){o.n=6;break}return e.$notify("Debe llenar negacion.","warning"),o.a(2);case 6:if(e.formAuth.orden||e.$notify("Debe llenar orden.","warning"),n={titulo:e.formAuth.titulo,id_proceso:e.formAuth.id_proceso,cuerpo_html:e.formAuth.html,pie:e.formAuth.pie,modo_respuesta:e.formAuth.modoRespuesta,texto_aceptacion:e.formAuth.aceptacion,texto_negacion:e.formAuth.negacion,activo:e.formAuth.activo,orden:e.formAuth.orden},o.p=7,"new"!==e.flagActionAuth){o.n=9;break}return o.n=8,e.$http.post("api/covidautorizacion/createCovidAutorizacion",{formulario:n});case 8:o.n=10;break;case 9:return n.idAutorizacion=e.editRowAuth.ID_AUTORIZACION,o.n=10,e.$http.put("api/covidautorizacion/updateCovidAutorizacion",{formulario:n});case 10:e.clearAuth(),e.openModalCovidAuth=!1,e.readCovidDocumentoAutorizacion(),e.$notify("Se ha guardado satisfactoriamente.","success"),o.n=12;break;case 11:o.p=11,o.v,e.$notify("Ha ocurrido un problema de conexión vuelve a intentarlo.","warning");case 12:return o.a(2)}},o,null,[[7,11]])}))()},getUrl:function(e){return e=e||{},"".concat(this.sie.api,"/HyoContenido/coviddocumento/").concat(e.ID_DOCUMENTO,"?sie-token=").concat(this.sie.token)},getAutorizacion:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.$http.post("api/HyoContenido/covidautorizacion/".concat(e.ID_AUTORIZACION));case 1:return n.a(2)}},n)}))()},upload:function(e){var o=this;return Y()(G()().m(function n(){var t,i;return G()().w(function(n){while(1)switch(n.n){case 0:return t=e[0],n.n=1,(0,jo.Upload)({url:"api/HyoArchivo/tmp/upload",file:t});case 1:i=n.v,o.file=i;case 2:return n.a(2)}},n)}))()},openCovidDocumento:function(){this.flagAction="new",this.openModalCovidDocumento=!0,this.clear()},openCovidAutorizacion:function(){this.flagActionAuth="new",this.openModalCovidAuth=!0,this.clearAuth()},readCovidDocumento:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/coviddocumento/getCovidDocumento");case 1:e.rows=o.v;case 2:return o.a(2)}},o)}))()},readCovidDocumentoAutorizacion:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/covidautorizacion/getCovidAutorizacion");case 1:e.rowsAuth=o.v;case 2:return o.a(2)}},o)}))()},deleteCovidDocumento:function(e){var o=this;return Y()(G()().m(function n(){var t,i,a;return G()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.delete("api/coviddocumento/deleteCovidDocumento",{params:{id:e}});case 1:return t=n.v,i=t.message,o.$notify(i,"success"),n.n=2,o.readCovidDocumento();case 2:n.n=4;break;case 3:n.p=3,a=n.v,o.$notify(a.error.message||a.message,"warning");case 4:return n.a(2)}},n,null,[[0,3]])}))()},deleteCovidAutorizacion:function(e){var o=this;return Y()(G()().m(function n(){var t,i,a;return G()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.delete("api/covidautorizacion/deleteCovidAutorizacion",{params:{id:e}});case 1:return t=n.v,i=t.message,o.$notify(i,"success"),n.n=2,o.readCovidDocumentoAutorizacion();case 2:n.n=4;break;case 3:n.p=3,a=n.v,o.$notify(a.error.message||a.message,"warning");case 4:return n.a(2)}},n,null,[[0,3]])}))()},saveCovidAsigna:function(){var e=this;return Y()(G()().m(function o(){var n,t,i,a,r;return G()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.frmAsigna.ID_PROCESO){o.n=1;break}return e.$notify("Debe seleccionar un proceso.","warning"),o.a(2);case 1:if(e.frmAsigna.ID_FORMULARIO){o.n=2;break}return e.$notify("Debe seleccionar un formulario.","warning"),o.a(2);case 2:return o.p=2,n={ID_PROCESO_OLD:e.frmAsigna.ID_PROCESO_OLD,ID_FORMULARIO_OLD:e.frmAsigna.ID_FORMULARIO_OLD,ID_PROCESO:e.frmAsigna.ID_PROCESO,ID_FORMULARIO:e.frmAsigna.ID_FORMULARIO,TITULO:e.frmAsigna.TITULO,ACTIVO:e.frmAsigna.ACTIVO,ORDEN:e.frmAsigna.ORDEN,ACCION:Object.prototype.hasOwnProperty.call(e.frmAsigna,"ACCION")?1:2},o.n=3,e.$http.post("api/covidautorizacion/saveFrmAsignacion",{data:n});case 3:t=o.v,i=t.message,e.getAsignacionesFrm(),e.openModalCovidFormulario=!1,e.$notify(i,"success"),o.n=5;break;case 4:o.p=4,r=o.v,a=r.error,e.$notify(a.message,"warning");case 5:return o.a(2)}},o,null,[[2,4]])}))()},getAsignacionesFrm:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/covidautorizacion/getAsignacionesFrm");case 1:e.rowsFrm=o.v;case 2:return o.a(2)}},o)}))()},initCovidFormulario:function(e){var o=this;return Y()(G()().m(function n(){var t;return G()().w(function(n){while(1)switch(n.n){case 0:if(t=e&&Object.prototype.hasOwnProperty.call(e,"ID_PROCESO")?e:null,!e||!Object.prototype.hasOwnProperty.call(e,"ID_PROCESO")){n.n=2;break}return n.n=1,o.getFormularios(t.ID_PROCESO);case 1:t["ID_PROCESO_OLD"]=t.ID_PROCESO,t["ID_FORMULARIO_OLD"]=t.ID_FORMULARIO,n.n=3;break;case 2:0===o.formularios.length&&o.formularios.unshift({label:"Seleccione",value:""});case 3:return n.n=4,o.getFrmAsignacion(t);case 4:o.frmAsigna=n.v;case 5:return n.a(2)}},n)}))()},openCovidFormulario:function(e){var o=this;return Y()(G()().m(function n(){return G()().w(function(n){while(1)switch(n.n){case 0:o.initCovidFormulario(e),o.openModalCovidFormulario=!0;case 1:return n.a(2)}},n)}))()},getProcesos:function(){var e=this;return Y()(G()().m(function o(){var n,t,i;return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/covidautorizacion/getProcesos",{params:{ano:e.sie.ano}});case 1:for(n=o.v,t=0;t<n.length;t++)i=n[t],e.objProcesoPerfil[i.ID_PROCESO]=i.ID_PERFIL_DESTINO;n.unshift({TITULO:"Seleccione",ID_PROCESO:null,ID_PERFIL_DESTINO:null}),e.optProcesos=n;case 2:return o.a(2)}},o)}))()},getFormularios:function(e){var o=this;return Y()(G()().m(function n(){var t,i;return G()().w(function(n){while(1)switch(n.n){case 0:if(t=[],i=o.objProcesoPerfil[e],!i){n.n=2;break}return n.n=1,o.$http.get("api/covidautorizacion/getFormularios",{params:{destino:i}});case 1:t=n.v;case 2:t.unshift({TITULO:"Seleccione",ID_FORMULARIO:""}),o.formularios=t.map(function(e){return{label:e.TITULO,value:e.ID_FORMULARIO}});case 3:return n.a(2)}},n)}))()},deleteCovidFormulario:function(e){var o=this;return Y()(G()().m(function n(){var t,i,a,r;return G()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.delete("api/covidautorizacion/deleteFrmAsignacion",{params:{idForm:e.ID_FORMULARIO,idProceso:e.ID_PROCESO}});case 1:t=n.v,i=t.message,o.getAsignacionesFrm(),o.$notify(i,"success"),n.n=3;break;case 2:n.p=2,r=n.v,a=r.error,o.$notify(a.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},changeProcesoAuth:function(e){this.formAuth.perfilDestino=this.objProcesoPerfil[e]}},created:function(){var e=this;return Y()(G()().m(function o(){return G()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.readCovidDocumento();case 1:return o.n=2,e.readCovidDocumentoAutorizacion();case 2:return o.n=3,e.getProcesos();case 3:return o.a(2)}},o)}))()}};const en=(0,He.A)(Jo,[["render",z]]);var on=en}}]);