"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[32651],{32651:function(e,a,r){r.r(a),r.d(a,{default:function(){return _}});var n=r(61758),t={key:0};function s(e,a){var r=(0,n.g2)("inscripcion"),s=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(s,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,n.k6)(function(){return[e.ID_PERFAM?((0,n.uX)(),(0,n.CE)("div",t,[(0,n.bF)(r,{"load-id-perfam":e.ID_PERFAM,back:e.BACK_FICHA_ADMISION,"prop-parentesco":e.PARENTESCO_HIJO,"prop-parentescos":e.parentescos,"usa-termino-condiciones":!1,"usa-alert-inscripcion":!0,"agregar-automatico":!1,"show-banner":!1,onLoadFamiliares:e.loadFamiliares},null,8,["load-id-perfam","back","prop-parentesco","prop-parentescos","onLoadFamiliares"])])):(0,n.Q3)("v-if",!0)]}),_:1})}var i=r(99550),u=r.n(i),o=r(76080),l=r.n(o),A=r(45254),c=r.n(A),E=(r(12563),r(71225),r(39866),r(52133),r(89571),r(50310),r(5962),r(6724),r(83190),r(62692),r(6123)),f=r(80660),d=r(41615),R=r(53429),O=r(57668),D=r(14517),p={components:{inscripcion:D["default"],QCard:E.C$},data:function(){return{CURRENT_ANIO:(0,O["default"])().ano,USUCOD:null,FAMCOD:null,ID_PERFAM:null,FAMDES:null,SISCOD_ADMISION:d["default"].SISCOD_ADMISION,BACK_FICHA_ADMISION:d["default"].BACK_FICHA_ADMISION,ESTADOS_POSTULANTE_CRONOGRAMA:d["default"].ESTADOS_POSTULANTE_CRONOGRAMA,referenciasPPFF:[d["default"].ID_REFPER_FAMILIA.P,d["default"].ID_REFPER_FAMILIA.M,d["default"].ID_REFPER_FAMILIA.A],parentescos:[{value:d["default"].ABR_PARENTESCO.PADRE,label:d["default"].PARENTESCO[d["default"].ABR_PARENTESCO.PADRE]},{value:d["default"].ABR_PARENTESCO.MADRE,label:d["default"].PARENTESCO[d["default"].ABR_PARENTESCO.MADRE]},{value:d["default"].ABR_PARENTESCO.APODERADO,label:d["default"].PARENTESCO[d["default"].ABR_PARENTESCO.APODERADO]}],familiares:[],PARENTESCO_HIJO:d["default"].ABR_PARENTESCO.HIJO,ETAPAS_ESTANDAR:R["default"].ETAPAS_ESTANDAR}},methods:{getFamiliares:function(){var e=this;return c()(l()().m(function a(){var r,n;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,r={famcod:e.FAMCOD},a.n=1,f.$http.get("api/personaController/getFamilia",{params:{parametros:r}});case 1:n=a.v,e.FAMCOD=n[0].FAMCOD,e.ID_PERFAM=n[0].ID_PERFAM,e.FAMDES=n[0].FAMDES,a.n=3;break;case 2:a.p=2,a.v,e.$alert("No se encontraron los datos de la familia","warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()},getInfoUsuario:function(){var e=this;return c()(l()().m(function a(){var r,n,t,s,i;return l()().w(function(a){while(1)switch(a.p=a.n){case 0:return e.USUCOD=(0,O["default"])().usucod,a.p=1,r={usucod:e.USUCOD,siscod:e.SISCOD_ADMISION},a.n=2,f.$http.get("api/usuarioController/getDatosUsuario",{params:{params:r}});case 2:if(n=a.v,0!==n.length){a.n=3;break}throw new Error("No se encontraron los datos del usuario de admisi√≥n");case 3:if(t=u()(n,1),s=t[0],s.FAMCOD){a.n=4;break}throw new Error("No se encontraron la familia del usuario");case 4:e.FAMCOD=s.FAMCOD,a.n=6;break;case 5:a.p=5,i=a.v,e.$alert(i.error?i.error.message:i.message,"warning");case 6:return a.a(2)}},a,null,[[1,5]])}))()},loadFamiliares:function(e){this.familiares=e,this.validarParentescosExistentes()},validarParentescosExistentes:function(){var e=this,a=this.familiares.filter(function(a){return e.referenciasPPFF.includes(a.ID_REFPER)});a.length&&(a=a.map(function(e){return e.ID_REFPER}),this.parentescos=this.parentescos.map(function(r){if(r&&r.value&&a.includes(d["default"].ID_REFPER_FAMILIA[r.value]))return e.parentescos.splice(e.parentescos.indexOf(r),1)}))}},created:function(){var e=this;return c()(l()().m(function a(){return l()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getInfoUsuario();case 1:return a.n=2,e.getFamiliares();case 2:return a.a(2)}},a)}))()}},I=r(12807);const C=(0,I.A)(p,[["render",s]]);var _=C}}]);