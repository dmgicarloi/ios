"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[69809],{69809:function(t,o,e){e.r(o),e.d(o,{default:function(){return Y}});var a=e(8445),n=e.n(a),i=e(61758),r=e(58790),u={class:"text-h4"};function s(t,o){var e=(0,i.g2)("q-btn"),a=(0,i.g2)("header-grid"),s=(0,i.g2)("sie-grid"),l=(0,i.g2)("sie-modal");return(0,i.uX)(),(0,i.Wv)(l,{modelValue:t.openModalEmit,"onUpdate:modelValue":o[0]||(o[0]=function(o){return t.openModalEmit=o}),onSubmit:t.procesoFacturas,esc:!0,escClick:!0},{default:(0,i.k6)(function(){return[o[3]||(o[3]=(0,i.Lk)("div",{class:"text-h6"},"Forma de Pago: Credito",-1)),(0,i.Lk)("div",u,(0,r.v_)(t.titleCuotas),1),(0,i.bF)(a,null,{default:(0,i.k6)(function(){return[(0,i.bF)(e,{class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:t.addRowCF,flat:""},{default:(0,i.k6)(function(){return n()(o[1]||(o[1]=[(0,i.eW)(" Agregar",-1)]))}),_:1},8,["onClick"]),(0,i.bF)(e,{class:"q-ma-xs",size:"sm",icon:"delete",color:"primary",onClick:t.deleteRowsCF,flat:""},{default:(0,i.k6)(function(){return n()(o[2]||(o[2]=[(0,i.eW)(" Eliminar",-1)]))}),_:1},8,["onClick"])]}),_:1}),(0,i.bF)(s,{class:"q-mt-xs fix-tab-height ag-theme-balham",style:{width:"100wv",height:"calc(100vh - 200px)"},columnDefs:t.columnDefsCF,rowData:t.rowDataCF,onGridReady:t.onGridReadyCF,frameworkComponents:t.frameworkComponents},null,8,["columnDefs","rowData","onGridReady","frameworkComponents"])]}),_:1},8,["modelValue","onSubmit"])}var l=e(76080),c=e.n(l),m=e(45254),d=e.n(m),C=(e(10239),e(11777),e(19852)),f=e(26697),h=e(53093),p=e(43346),F=e(53811),w=e(88567),g=e(95718),M=e(53380),v=e(6123),b=e(75053),A=e(18105),N=e(64208),D=e(54489),E=e(4437),k=e(95477),y=e(12533),O=e(42037),R=e(99637),T=e(36408),Q=e(96330),S={emits:["update:modelValue","input","submit"],name:"CuotasCredito",components:{QCard:w.A,QSelect:D.A,QCardSection:g.A,QSeparator:M.A,QTabs:f.A,QTab:h.A,QTabPanels:F.A,QTabPanel:p.A,QPagination:v.ao,sieModal:b.A,QSearch:v.Ks,formulario:C.A,QInput:N.A,QDatetime:v.T5,QDate:E.A,sieGrid:T.A,headerGrid:Q.A,QPopupProxy:k.A,QBtn:v.Il},computed:{openModalEmit:{set:function(t){this.$emit("update:modelValue",t),this.$emit("input",t)},get:function(){return this.modelValue}}},props:{modelValue:{type:Boolean,default:!1},openModal:{type:Boolean,default:!1},nomCliente:{type:String},monsig:{type:String},totalMonto:{type:[Number,String],default:"0.00"},dataCuotas:{type:Array},numtal:{type:String},numpag:{type:String}},data:function(){return{nroRecibo:"",frameworkComponents:null,fecha:(0,A.Ay)(new Date,"DD/MM/YYYY"),titleModal:"SIEWEB: Tesoreria",nroCuota:0,montoCuotas:0,sinMontoCuotas:0,cantFecven:0,montoCob:0,titleCuotas:"",columnDefsCF:null,rowDataCF:null,apiCF:null,cuotas:{}}},methods:{onGridReadyCF:function(t){this.apiCF=t.api},addRowCF:function(){this.montoCuotas=0,this.sinMontoCuotas=0,this.cantFecven=0,this.nroCuota=this.nroCuota+1;var t={NROCUOTA:this.nroCuota,MONTO:0,FECVEN:new Date};this.apiCF.updateRowData({add:[t]})},deleteRowsCF:function(){this.montoCuotas=0,this.sinMontoCuotas=0,this.cantFecven=0;var t=this.apiCF.getSelectedRows();t.length>0&&this.apiCF.updateRowData({remove:t})},generarcuotasFactura:function(){var t=this;return d()(c()().m(function o(){return c()().w(function(o){while(1)switch(o.n){case 0:console.log(t.nomCliente),console.log(t.monsig),console.log(t.totalMonto),console.log(t.totalNota),console.log(t.numtal),console.log(t.numpag),console.log(t.dataCuotas),t.frameworkComponents={agDate:y.A},t.rowDataCF=t.dataCuotas,t.nroCuota=0,t.montoCuotas=0,t.sinMontoCuotas=0,t.cantFecven=0,t.titleCuotas=t.nomCliente+" ("+t.monsig+t.totalMonto+")",t.columnDefsCF=[{headerName:"Nro. Cuota",field:"NROCUOTA",editable:!1,width:100},{headerName:"Monto",field:"MONTO",cellClass:"text-right",valueFormatter:O.toFixed,editable:!0,width:160},{headerName:"Fecha Venc.",field:"FECVEN",cellRenderer:y.A,valueFormatter:function(t){return(0,A.Ay)(t.value,"DD/MM/YYYY")},width:160}];case 1:return o.a(2)}},o)}))()},procesoFacturas:function(){var t=this;return d()(c()().m(function o(){var e,a;return c()().w(function(o){while(1)switch(o.n){case 0:t.montoCuotas=0,t.sinMontoCuotas=0,t.cantFecven=0,e=[],a=[],t.apiCF.forEachNode(function(t){return e.push(t.data)}),(0,R["default"])(e,function(o){t.montoCuotas=t.montoCuotas+Number(o.MONTO),0===o.MONTO&&(t.sinMontoCuotas=t.sinMontoCuotas+1),o.FECVEN<new Date&&(t.cantFecven=t.cantFecven+1),a.push({NROCUOTA:o.NROCUOTA,MONTO:o.MONTO,FECVEN:o.FECVEN})}),t.cantFecven>0?t.$alert("Existen fechas de vencimiento que son previas a la fecha a actual.","info"):t.sinMontoCuotas>0?t.$alert("Existen Cuotas sin Monto.","info"):t.montoCuotas>t.total?t.$alert("El importe de las cuotas ("+t.montoCuotas+") es mayor del monto de la Factura ("+t.total+").","info"):t.montoCuotas<t.total?t.$alert("El importe de las cuotas ("+t.montoCuotas+") es menor del monto de la Factura ("+t.total+").","info"):t.submit(a);case 1:return o.a(2)}},o)}))()},submit:function(t){this.$emit("submit",t)},registrar:function(){return d()(c()().m(function t(){return c()().w(function(t){while(1)switch(t.n){case 0:return t.a(2)}},t)}))()},actualizar:function(){return d()(c()().m(function t(){return c()().w(function(t){while(1)switch(t.n){case 0:return t.a(2)}},t)}))()}},beforeMount:function(){this.generarcuotasFactura()}},V=e(12807);const x=(0,V.A)(S,[["render",s]]);var Y=x}}]);