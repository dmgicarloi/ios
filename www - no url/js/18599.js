"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[18599],{18599:function(t,a,n){n.r(a),n.d(a,{default:function(){return wt}});var e=n(61758);function o(t,a){var n=(0,e.g2)("q-tab"),o=(0,e.g2)("programa"),i=(0,e.g2)("q-tab-pane"),l=(0,e.g2)("plantilla"),r=(0,e.g2)("configuracionPlantilla"),s=(0,e.g2)("asignacionPlantillaSalon"),u=(0,e.g2)("q-tabs"),d=(0,e.g2)("q-page");return(0,e.uX)(),(0,e.Wv)(d,{class:"bg-white contBD"},{default:(0,e.k6)(function(){return[(0,e.bF)(u,{class:"q-tabs-flex bg-white q-mt-md",inverted:"",animated:""},{title:(0,e.k6)(function(){return[(0,e.bF)(n,{name:"tab-1",label:"Programa Conducta",default:""}),(0,e.bF)(n,{name:"tab-2",label:"Plantilla"}),(0,e.bF)(n,{name:"tab-3",label:"Configuración de Plantillas"}),(0,e.bF)(n,{name:"tab-4",label:"Asignación de Plantillas a Salones"})]}),default:(0,e.k6)(function(){return[(0,e.bF)(i,{name:"tab-1"},{default:(0,e.k6)(function(){return[(0,e.bF)(o)]}),_:1}),(0,e.bF)(i,{name:"tab-2"},{default:(0,e.k6)(function(){return[(0,e.bF)(l)]}),_:1}),(0,e.bF)(i,{name:"tab-3"},{default:(0,e.k6)(function(){return[(0,e.bF)(r)]}),_:1}),(0,e.bF)(i,{name:"tab-4"},{default:(0,e.k6)(function(){return[(0,e.bF)(s)]}),_:1})]}),_:1})]}),_:1})}var i=n(6123),l=n(8445),r=n.n(l),s=n(58790),u={class:"row"},d={class:"col-xs-12 q-pr-sm-xs"},c={class:"row q-pa-sm"},f={class:"col-xs-12"};function p(t,a){var n=(0,e.g2)("q-tooltip"),o=(0,e.g2)("q-btn"),i=(0,e.g2)("q-card"),l=(0,e.g2)("q-td"),p=(0,e.g2)("q-icon"),m=(0,e.g2)("q-tr"),C=(0,e.g2)("q-table"),P=(0,e.g2)("q-input"),g=(0,e.g2)("q-field"),h=(0,e.g2)("sie-modal"),b=(0,e.g2)("q-page");return(0,e.uX)(),(0,e.Wv)(b,{class:"escalas bg-white"},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",u,[(0,e.Lk)("div",d,[(0,e.bF)(i,{class:"row full width items items-center q-px-sm q-py-xs"},{default:(0,e.k6)(function(){return[a[4]||(a[4]=(0,e.Lk)("div",{class:"col"},[(0,e.Lk)("span",{class:"text-bold q-body-1"},"Plantilla para Conducta")],-1)),(0,e.Lk)("div",null,[t.isGuardar?((0,e.uX)(),(0,e.Wv)(o,{key:0,onClick:t.addPlantilla,round:"",color:"secondary",icon:"plus"},{default:(0,e.k6)(function(){return[(0,e.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,e.k6)(function(){return r()(a[3]||(a[3]=[(0,e.eW)("Agregar",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,e.Q3)("v-if",!0)])]}),_:1}),(0,e.bF)(C,{"table-style":t.isLess?"height:60vh":"height: 63vh","row-key":"__index",color:"secondary",data:t.condplantData,columns:t.condplantCol,pagination:t.notaPag,"onUpdate:pagination":a[0]||(a[0]=function(a){return t.notaPag=a})},{body:(0,e.k6)(function(o){return[(0,e.bF)(m,{class:(0,s.C4)(["cursor-pointer",o.row.ID_PLANTILLA===t.plantillaSeleccionado?"bg-grey-2":""]),props:o},{default:(0,e.k6)(function(){return[(0,e.bF)(l,{key:"DESCRIPCION",props:o},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(o.row.DESCRIPCION),1)]}),_:2},1032,["props"]),(0,e.bF)(l,{key:"ACCION",props:o},{default:(0,e.k6)(function(){return[t.isEditGuardar?((0,e.uX)(),(0,e.Wv)(p,{key:0,class:"cursor-pointer q-mx-xs",onClick:function(a){return t.addPlantilla(o.row.ID_PLANTILLA,o.row)},name:"edit",color:"black",size:"17px"},{default:(0,e.k6)(function(){return[(0,e.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,e.k6)(function(){return r()(a[5]||(a[5]=[(0,e.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,e.Q3)("v-if",!0),t.isEliminar?((0,e.uX)(),(0,e.Wv)(p,{key:1,class:"cursor-pointer q-mx-xs",onClick:function(a){return t.deletePlantilla(o.row.ID_PLANTILLA)},name:"delete",color:"black",size:"17px"},{default:(0,e.k6)(function(){return[(0,e.bF)(n,{anchor:"top middle",self:"bottom middle"},{default:(0,e.k6)(function(){return r()(a[6]||(a[6]=[(0,e.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,e.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:2},1032,["props","class"])]}),_:1},8,["table-style","data","columns","pagination"])])]),(0,e.bF)(h,{modelValue:t.plantillaForm.modal,"onUpdate:modelValue":a[2]||(a[2]=function(a){return t.plantillaForm.modal=a}),header:!0,footer:!0,title:t.plantillaForm.title,ok:"Grabar",onSubmit:t.saveConductaPlantilla},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",c,[(0,e.Lk)("div",f,[(0,e.bF)(g,{error:t.v$.plantillaForm.descripcion.$error,"error-label":t.$t("validaciones.requerido")},{default:(0,e.k6)(function(){return[(0,e.bF)(P,{class:"q-if-outlined",modelValue:t.v$.plantillaForm.descripcion.$model,"onUpdate:modelValue":a[1]||(a[1]=function(a){return t.v$.plantillaForm.descripcion.$model=a}),"float-label":t.$t("matricula.descripcion")},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])])]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}n(23825),n(10239),n(83190),n(27153),n(66307),n(24066);var m=n(83972),C=n(80340),P=n(30640),g=n(57668),h=n(81288),b=n(69027),I=n(33001),v=n(982),D=n(82640),O=n(80660),A={obtListaConductaPlantilla:function(){return O.$http.get("api/HyoConductaPlantilla/obtListaConducaPlantilla").then(function(t){var a=t.json;return a})},grabarConductaPlantilla:function(t){return O.$http.post("api/HyoConductaPlantilla/grabarConductaPlantilla",t)},updateConductaPlantilla:function(t){return O.$http.put("api/HyoConductaPlantilla/updateConductaPlantilla",t)},deleteConductaPlantilla:function(t){return O.$http.delete("api/HyoConductaPlantilla/deleteConductaPlantilla",{params:{id_plantilla:t}})}},L={setup:function(){var t=(0,m.fG)();return{v$:t}},components:{QTable:i.kH,QTh:i.EJ,QTr:i.qh,QTd:i.Ef,QTableColumns:i.$s,sieModal:P.A,sieVacio:C.A,QPage:i.Tu,QCard:i.C$,QBtn:i.Il,QTooltip:i.nC,QIcon:i.bP,QField:i.Om,QInput:i.ie},data:function(){return{sie:(0,g["default"])(),isEliminar:3===(0,g["default"])().ruta.nivel,isGuardar:3===(0,g["default"])().ruta.nivel,isEditGuardar:(0,g["default"])().ruta.nivel>=2,condplantData:[],condplantCol:[{name:"DESCRIPCION",label:this.$t("matricula.descripcion"),field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACCION",label:"",field:"ACCION",align:"center",sortable:!1,style:"width: 80px"}],notaPag:{page:1,rowsPerPage:200},plantillaSeleccionado:null,plantillaForm:{modal:!1,title:"Crear Plantilla Conducta",id_plantilla:null,descripcion:null},plantillaTipo:[{label:"Conducta - Capacidades",value:2},{label:"Conducta - Evaluación Nivel 2",value:4},{label:"Evaluación de Padres - PPFF",value:3}],escalaValor:[],valorData:[],valorCol:[{name:"id_plantilla",label:this.$t("codigo"),field:"id_plantilla",align:"center",sortable:!1,hidden:!0},{name:"NOTA",label:this.$t("nota"),field:"NOTA",align:"center",sortable:!0},{name:"PUNTAJE",label:this.$t("puntaje"),field:"PUNTAJE",align:"center",sortable:!0},{name:"NOTA_KEYPRESS",label:"KeyPress",field:"NOTA_KEYPRESS",align:"center",sortable:!1}],valorPag:{page:1,rowsPerPage:200},valorFiltro:"",valorLoad:!0,valorTipoSeleccion:"multiple",valorSeleccionado:[],valorForm:{modal:!1,title:"Crear escala valor",id_plantilla:null,nota:null,puntaje:null,nota_keypress:""}}},computed:{grados:function(){var t=this.gradosTemp;return t=(0,I.filterArray)(this.confGenForm.INSTRUCOD,{field:"INSTRUCOD",list:t}),t.unshift({GRADOCOD:"T",GRADODES:"Todos",INSTRUCOD:"T"}),t},isLess:function(){return(0,h.isLess)()}},methods:{init:function(){var t=this;Promise.all().then(function(a){t.niveles=a[0].json,t.gradosTemp=a[1].json})},addPlantilla:function(t,a){this.plantillaForm.modal=!0,this.v$.plantillaForm.$reset(),"number"===typeof t?(this.plantillaForm.title="Editar Plantilla",this.plantillaForm.id_plantilla=t,this.plantillaForm.descripcion=a.DESCRIPCION):(this.plantillaForm.title="Crear Plantilla",this.plantillaForm.id_plantilla=null,this.plantillaForm.descripcion=null)},saveConductaPlantilla:function(){var t=this;if(this.v$.plantillaForm.$touch(),!this.v$.plantillaForm.$error){var a={descripcion:this.plantillaForm.descripcion,ano:this.sie.ano};null===this.plantillaForm.id_plantilla?A.grabarConductaPlantilla(a).then(function(a){return(0,v["default"])("Grabado correctamente","success"),t.plantillaForm.modal=!1,A.obtListaConductaPlantilla()}).then(function(a){t.condplantData=a}).catch(function(t){(0,v["default"])("No se pudo grabar","warning")}):(a.id_plantilla=this.plantillaForm.id_plantilla,A.updateConductaPlantilla(a).then(function(a){return(0,v["default"])("Actualizado correctamente","success"),t.plantillaForm.modal=!1,A.obtListaConductaPlantilla()}).then(function(a){t.condplantData=a}).catch(function(t){(0,v["default"])("No se pudo actualizar","warning")}))}},deletePlantilla:function(t){var a=this;(0,b.confirmar)(this.$t("mensajes.m0006.confirmacion"),function(){return A.deleteConductaPlantilla(t)}).then(function(t){return(0,v["default"])(t.mensaje,1===t.estado?"success":"warning"),A.obtListaConductaPlantilla()}).then(function(n){a.condplantData=n,a.valorLoad=!0,a.plantillaSeleccionado=t;var e=[];e.push(t)}).then(function(t){a.valorLoad=!1,a.valorData=t,0===t.length&&(a.plantillaSeleccionado=null)}).catch(function(t){(0,v["default"])(t.error.mensaje,"warning")})}},validations:{plantillaForm:{descripcion:{required:D.mw}},valorForm:{nota:{required:D.mw},puntaje:{integer:D.nd,required:D.mw}}},created:function(){var t=this;this.init(),A.obtListaConductaPlantilla().then(function(a){t.plantillaLoad=!1,t.condplantData=a})}},E=n(12807);const R=(0,E.A)(L,[["render",p]]);var k=R,N=n(29104),_={class:"row q-pt-sm"},S={class:"col q-mx-sm"},T={class:"row q-py-sm bg-secondary text-white"},y={class:"col"},F={id:"listPlantillaCriterios"},$={class:"row contenedor_li q-px-sm q-py-xs"},q={class:"wNivEva",style:{width:"90px"}},x={class:"texto"},G={class:"text-center cursor-pointer contPeso",style:{width:"50px"}},M={key:0,class:"flEdito"},w=["onClick"],Q=["onUpdate:modelValue","onKeyup","onBlur"],j={class:"col"},V={key:0,class:"flEdito"},U=["onClick"],W=["onUpdate:modelValue","onKeyup","onBlur"],X={class:"items-center row"};function B(t,a){var n=(0,e.g2)("sie-select"),o=(0,e.g2)("q-icon"),i=(0,e.g2)("q-tooltip"),l=(0,e.g2)("q-card"),u=(0,e.g2)("q-fab-action"),d=(0,e.g2)("q-fab"),c=(0,e.g2)("q-page-sticky"),f=(0,e.g2)("q-page");return(0,e.uX)(),(0,e.Wv)(f,{class:"configuracionusuarios bg-white"},{default:(0,e.k6)(function(){return[(0,e.bF)(l,null,{default:(0,e.k6)(function(){return[(0,e.Lk)("div",_,[(0,e.Lk)("div",S,[(0,e.bF)(n,{type:"outlined",options:t.optionsPlantillas,onSelected:t.cargarListaCriterios,label:"DESCRIPCION",val:"ID_PLANTILLA",placeholder:"Plantilla"},null,8,["options","onSelected"])])]),a[3]||(a[3]=(0,e.Lk)("div",{class:"row q-py-sm bg-secondary text-white"},[(0,e.Lk)("div",{class:"q-px-sm-lg q-body-1 text-bold",style:{width:"80px"}},"Indice"),(0,e.Lk)("div",{class:"q-pr-md q-pl-lg q-body-1 text-bold"},"Peso"),(0,e.Lk)("div",{class:"col q-px-xs q-body-1 text-bold"},"Descripción")],-1)),(0,e.Lk)("div",T,[(0,e.Lk)("div",y,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(t.objListaPlantillaCriterios,function(n,l){return(0,e.uX)(),(0,e.CE)("ul",F,[(0,e.Lk)("li",{style:(0,s.Tr)({background:n.BGCOLOR})},[(0,e.Lk)("label",null,[2===n.ID_PROGRAMA&&n.NIVEL2>0?((0,e.uX)(),(0,e.Wv)(o,{key:0,name:"arrow_drop_down",size:"28px"})):(0,e.Q3)("v-if",!0)]),(0,e.Lk)("div",$,[(0,e.Lk)("div",q,[(0,e.Lk)("span",x,(0,s.v_)(n.INDICE),1)]),(0,e.Lk)("div",G,[n.PESO!=n.modif.peso?((0,e.uX)(),(0,e.CE)("div",M)):(0,e.Q3)("v-if",!0),n.edicion.peso?(0,e.bo)(((0,e.uX)(),(0,e.CE)("input",{key:2,type:"text",ref_for:!0,ref:"txtPeso_"+n.INDICE,"onUpdate:modelValue":function(t){return n.PESO=t},maxlength:"2",onKeyup:(0,N.jR)(function(a){return t.editarPeso(n,!1)},["enter"]),onBlur:function(a){return t.editarPeso(n,!1)}},null,40,Q)),[[N.Jo,n.PESO]]):((0,e.uX)(),(0,e.CE)("span",{key:1,class:"lblDesc",onClick:function(a){return t.editarPeso(n,!0)}},(0,s.v_)(n.PESO),9,w))]),(0,e.Lk)("div",j,[n.DESCRIPCION!=n.modif.desc?((0,e.uX)(),(0,e.CE)("div",V)):(0,e.Q3)("v-if",!0),n.edicion.desc?(0,e.bo)(((0,e.uX)(),(0,e.CE)("input",{key:2,type:"text",ref_for:!0,ref:"txtRegistro_"+n.INDICE,"onUpdate:modelValue":function(t){return n.DESCRIPCION=t},onKeyup:(0,N.jR)(function(a){return t.editarRegistro(n,!1)},["enter"]),onBlur:function(a){return t.editarRegistro(n,!1)}},null,40,W)),[[N.Jo,n.DESCRIPCION]]):((0,e.uX)(),(0,e.CE)("span",{key:1,class:"lblDesc",onClick:function(a){return t.editarRegistro(n,!0)}},(0,s.v_)(n.DESCRIPCION),9,U))]),(0,e.Lk)("div",X,[2===n.ISDELETE&&n.NIVEL2>0?((0,e.uX)(),(0,e.Wv)(o,{key:0,class:"cursor-pointer q-pl-xs",name:"add_circle",onClick:a[0]||(a[0]=function(){}),size:"17px"},{default:(0,e.k6)(function(){return[(0,e.bF)(i,{anchor:"center left",self:"center right"},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(t.$t("botones.agregar")),1)]}),_:1})]}),_:1})):(0,e.Q3)("v-if",!0),2===n.ID_PROGRAMA&&n.NIVEL2>0?((0,e.uX)(),(0,e.Wv)(o,{key:1,class:"cursor-pointer q-pl-xs",name:"edit",onClick:a[1]||(a[1]=function(){}),size:"17px"},{default:(0,e.k6)(function(){return[(0,e.bF)(i,{anchor:"center left",self:"center right"},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(t.$t("botones.editar")),1)]}),_:1})]}),_:1})):(0,e.Q3)("v-if",!0),n.isDelete?((0,e.uX)(),(0,e.Wv)(o,{key:2,class:"cursor-pointer q-pl-xs",name:"delete",onClick:function(a){return t.eliminarCriterio(n)},size:"17px"},{default:(0,e.k6)(function(){return[(0,e.bF)(i,{anchor:"center left",self:"center right"},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(t.$t("botones.eliminar")),1)]}),_:1})]}),_:1},8,["onClick"])):(0,e.Q3)("v-if",!0)])])],4)])}),256))])])]}),_:1}),(0,e.bF)(c,{position:"bottom-right",offset:[20,20]},{default:(0,e.k6)(function(){return[t.isEditGuardar?((0,e.uX)(),(0,e.Wv)(d,{key:0,icon:"more_vert",direction:"up",color:"secondary"},{default:(0,e.k6)(function(){return[(0,e.bF)(u,{color:"secondary",icon:"save",onClick:a[2]||(a[2]=function(a){return t.guardarCriteriosConducta()})},{default:(0,e.k6)(function(){return[(0,e.bF)(i,{anchor:"center left",self:"center right"},{default:(0,e.k6)(function(){return r()(a[4]||(a[4]=[(0,e.eW)("Guardar",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,e.Q3)("v-if",!0)]}),_:1})]}),_:1})}var z=n(99550),H=n.n(z),J=(n(74260),n(50310),n(32203),n(52220)),K=n(96122),Y=n(93616),Z={obtListaPlantilla:function(t){return O.$http.get("api/HyoConductaPlantilla/obtListaPlantilla",{params:{ano:t}}).then(function(t){var a=t.json;return a})},getListaProgramas:function(t){return O.$http.get("api/HyoConductaPlantilla/obtListaProgramas",{params:{ano:t}}).then(function(t){var a=t.json;return a})},getListadoCriterios:function(t,a){return O.$http.get("api/HyoConductaPlantillaCriterios/obtListaPlantillaCriterios",{params:{id_plantilla:t}}).then(function(t){var a=t.json;return a})},grabarConductaCriterios:function(t){return O.$http.post("api/HyoConductaPlantillaCriterios/insertar",{registros:t}).then(function(t){var a=t.json;return a}).catch(function(t){return t})},eliminarConductaCriterios:function(t){return O.$http.post("api/HyoConductaPlantillaCriterios/eliminar",{obj:t}).then(function(t){var a=t.json;return a}).catch(function(t){return t})}},tt=n(99637),at={components:{QBtn:i.Il,QIcon:i.bP,QCard:i.C$,QPopover:i.VM,QSearch:i.Ks,QModalLayout:i.hT,QTabs:i.uw,QTab:i.zu,QTabPane:i.dg,QPageSticky:i._U,QInnerLoading:i.SQ,QSpinnerOval:i.VA,QToggle:i.c5,QSelect:i.Si,QTree:J.A,QFab:i.l6,QFabAction:i.B$,QCheckbox:i.vZ,QRadio:i.$,QScrollArea:K.A,sieInfo:g["default"],sieSelect:Y.A,QPage:i.Tu,QTooltip:i.nC},data:function(){return{isAgregarNiv2:3===(0,g["default"])().ruta.nivel,isEditGuardar:(0,g["default"])().ruta.nivel>=2,optionsPlantillas:[],objListaPlantillaCriterios:[],objListaProgramas:[],columnasEdit:[],isEdit:!1,isEditPeso:!1,dataParamsPlantilla:[]}},methods:{init:function(){var t=this;Promise.all([Z.obtListaPlantilla((0,g["default"])().ano),Z.getListaProgramas((0,g["default"])().ano)]).then(function(a){t.optionsPlantillas=a[0],t.objListaProgramas=a[1]})},cargarListaCriterios:function(t){var a=this;this.objListaPlantillaCriterios=[],Z.getListadoCriterios(t.ID_PLANTILLA).then(function(n){var e=[];(0,tt["default"])(a.objListaProgramas,function(a,o){for(var i=a.LIMITE,l=a.ID_PROGRAMA,r=function(o){var i=n.find(function(t){return t.INDICE===o&&t.ID_PROGRAMA===l}),r=i?i.DESCRIPCION:null,s=i?i.PESO:null;e.push({ID_PROGRAMA:l,ID_PLANTILLA:t.ID_PLANTILLA,INDICE:o,PESO:i?i.PESO:null,DESCRIPCION:i?i.DESCRIPCION:null,BGCOLOR:2===l?"#D0DEF0":"#FFFFC6",isDelete:i,NIVEL2:a.NIVEL_2,edicion:{desc:!1,peso:!1},modif:{desc:r,peso:s}})},s=1;s<=i;s++)r(s)}),a.objListaPlantillaCriterios=e,a.dataParamsPlantilla.idPlantilla=t})},editarRegistro:function(t,a){this.isEditGuardar&&(t.edicion.desc=!!a,t.edicion.desc&&this.$nextTick(function(){this.$refs["txtRegistro_"+t.INDICE][0].focus(),this.$refs["txtRegistro_"+t.INDICE][0].select()}))},editarPeso:function(t,a){this.isEditGuardar&&(t.edicion.peso=!!a,t.edicion.peso&&this.$nextTick(function(){this.$refs["txtPeso_"+t.INDICE][0].focus(),this.$refs["txtPeso_"+t.INDICE][0].select()}))},dataActualizacionBloque:function(){var t=[],a=function(a){for(var n in a){a[n].PESO=""===a[n].PESO?null:a[n].PESO,a[n].modif.peso=""===a[n].modif.peso?null:a[n].modif.peso;var e=a[n].DESCRIPCION!==a[n].modif.desc||a[n].PESO!==a[n].modif.peso,o=a[n].PESO!==a[n].modif.peso;if(e){if(o&&null==a[n].PESO&&null!==a[n].modif.peso){(0,v["default"])("Debe ingresar un peso","error"),t=[];break}var i={ID_REF:null,ID_PLANTILLA:a[n].ID_PLANTILLA,ID_PROGRAMA:a[n].ID_PROGRAMA,INDICE:a[n].INDICE,DESCRIPCION:a[n].DESCRIPCION,PESO:a[n].PESO,DIFERENTES_PESOS:a[n].PESO!==a[n].modif.peso};t.push(i)}}};return a(this.objListaPlantillaCriterios),[t]},guardarCriteriosConducta:function(){var t=this,a=this.dataActualizacionBloque(),n=H()(a,1),e=n[0];e.length>0&&Z.grabarConductaCriterios(e).then(function(a){return 1===a.estado?((0,v["default"])(t.$t("mensajes.m0064"),"success"),t.cargarListaCriterios(t.dataParamsPlantilla.idPlantilla)):2===a.estado?((0,v["default"])(t.$t("mensajes.a0034"),"error"),[]):((0,v["default"])(t.$t("mensajes."+a.mensaje),"error"),"e0092"===a.mensaje?t.cargarListaCriterios(t.dataParamsPlantilla.idPlantilla):[])}).then(function(t){})},eliminarCriterio:function(t){var a=this;(0,b.confirmar)("¿Esta seguro de eliminar?",function(){Z.eliminarConductaCriterios(t).then(function(t){return 1===t.estado?((0,v["default"])(a.$t("mensajes.m0006.ok"),"success"),a.cargarListaCriterios(a.dataParamsPlantilla.idPlantilla)):2===t.estado?((0,v["default"])(a.$t("mensajes.e0073"),"error"),[]):((0,v["default"])(a.$t("mensajes."+t.mensaje),"error"),[])}).then(function(t){})})}},created:function(){this.init()}};const nt=(0,E.A)(at,[["render",B]]);var et=nt,ot={class:"row q-pa-sm"},it={class:"col-12"},lt={class:"col-12"},rt={class:"col-12"};function st(t,a){var n=(0,e.g2)("q-td"),o=(0,e.g2)("sie-select"),i=(0,e.g2)("q-popup-edit"),l=(0,e.g2)("q-tr"),u=(0,e.g2)("q-table"),d=(0,e.g2)("q-tooltip"),c=(0,e.g2)("q-btn"),f=(0,e.g2)("q-page-sticky"),p=(0,e.g2)("q-field"),m=(0,e.g2)("sie-modal");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.bF)(u,{data:t.dataSalones,columns:t.columns,pagination:t.pagination,"onUpdate:pagination":a[0]||(a[0]=function(a){return t.pagination=a}),"rows-per-page-options":[0],"hide-bottom":""},{body:(0,e.k6)(function(a){return[(0,e.bF)(l,{props:a},{default:(0,e.k6)(function(){return[(0,e.bF)(n,{key:"NEMO",props:a},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(a.row.NEMO),1)]}),_:2},1032,["props"]),(0,e.bF)(n,{key:"INSTRUCOD",props:a},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(a.row.INSTRUCOD),1)]}),_:2},1032,["props"]),(0,e.bF)(n,{key:"GRADOCOD",props:a},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(a.row.GRADOCOD),1)]}),_:2},1032,["props"]),(0,e.bF)(n,{key:"SECCIONCOD",props:a},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(a.row.SECCIONCOD),1)]}),_:2},1032,["props"]),(0,e.bF)(n,{key:"NEMODES",props:a},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(a.row.NEMODES),1)]}),_:2},1032,["props"]),(0,e.bF)(n,{key:"DESCRIPCION_PLANTILLA",props:a},{default:(0,e.k6)(function(){return[(0,e.eW)((0,s.v_)(a.row.DESCRIPCION_PLANTILLA),1),t.isEditar?((0,e.uX)(),(0,e.Wv)(i,{key:0,modelValue:a.row.ID_PLANTILLA,"onUpdate:modelValue":function(t){return a.row.ID_PLANTILLA=t},count:""},{default:(0,e.k6)(function(){return[(0,e.bF)(o,{modelValue:a.row.ID_PLANTILLA,"onUpdate:modelValue":function(t){return a.row.ID_PLANTILLA=t},type:"outlined",options:t.optionsPlantillas,val:"ID_PLANTILLA",label:"DESCRIPCION",placeholder:"Seleccione",onSelected:function(n){return t.editarPlantillaSalon(a.row)}},null,8,["modelValue","onUpdate:modelValue","options","onSelected"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,e.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"]),t.isEditar?((0,e.uX)(),(0,e.Wv)(f,{key:0,expand:"",position:"bottom-right",offset:[20,20]},{default:(0,e.k6)(function(){return[(0,e.bF)(c,{fab:"",round:"",color:"secondary",icon:"cogs",onClick:a[1]||(a[1]=function(a){return t.openModal=!0})},{default:(0,e.k6)(function(){return[(0,e.bF)(d,{anchor:"center left",self:"center right"},{default:(0,e.k6)(function(){return r()(a[6]||(a[6]=[(0,e.eW)("Actualización en bloque",-1)]))}),_:1})]}),_:1})]}),_:1})):(0,e.Q3)("v-if",!0),(0,e.bF)(m,{modelValue:t.openModal,"onUpdate:modelValue":a[5]||(a[5]=function(a){return t.openModal=a}),title:"Actualización en bloque",ok:"Procesar",onSubmit:t.actualizarBloque},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",ot,[(0,e.Lk)("div",it,[(0,e.bF)(p,{"error-label":t.$t("validaciones.requerido"),error:t.v$.form.INSTRUCOD.$error},{default:(0,e.k6)(function(){return[(0,e.bF)(o,{modelValue:t.form.INSTRUCOD,"onUpdate:modelValue":a[2]||(a[2]=function(a){return t.form.INSTRUCOD=a}),type:"outlined",options:t.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"Nivel",onSelected:t.getListaGrados},null,8,["modelValue","options","onSelected"])]}),_:1},8,["error-label","error"])]),(0,e.Lk)("div",lt,[(0,e.bF)(p,{"error-label":t.$t("validaciones.requerido"),error:t.v$.form.GRADOCOD.$error},{default:(0,e.k6)(function(){return[(0,e.bF)(o,{modelValue:t.form.GRADOCOD,"onUpdate:modelValue":a[3]||(a[3]=function(a){return t.form.GRADOCOD=a}),type:"outlined",options:t.grados,label:"GRADODES",val:"GRADOCOD",placeholder:"Grado"},null,8,["modelValue","options"])]}),_:1},8,["error-label","error"])]),(0,e.Lk)("div",rt,[(0,e.bF)(p,{"error-label":t.$t("validaciones.requerido"),error:t.v$.form.ID_PLANTILLA.$error},{default:(0,e.k6)(function(){return[(0,e.bF)(o,{modelValue:t.form.ID_PLANTILLA,"onUpdate:modelValue":a[4]||(a[4]=function(a){return t.form.ID_PLANTILLA=a}),type:"outlined",options:t.optionsPlantillas,val:"ID_PLANTILLA",label:"DESCRIPCION",placeholder:"Plantilla"},null,8,["modelValue","options"])]}),_:1},8,["error-label","error"])])])]}),_:1},8,["modelValue","onSubmit"])])}n(71225),n(5962),n(62540);var ut={obtListaPlantilla:function(t){return O.$http.get("api/HyoConductaPlantilla/obtListaPlantilla",{params:{ano:t}}).then(function(t){var a=t.json;return a})},getListadoCriterios:function(t,a){return O.$http.get("api/HyoConductaPlantillaCriterios/obtListaPlantillaCriterios",{params:{id_plantilla:t,id_programa:a}}).then(function(t){var a=t.json;return a})},obtenerSalones:function(){return O.$http.get("api/HyoConductaPlantillaSalon/getAll")},actualizarPlantillaSalon:function(t,a){return O.$http.post("api/HyoConductaPlantillaSalon/actualizarDatos",{nemo:t,idplantilla:a})},actualizarPlantillaSalonBloque:function(t){return O.$http.post("api/HyoConductaPlantillaSalon/actualizarDatosBloque",{arrParams:t})}},dt={setup:function(){var t=(0,m.fG)();return{v$:t}},components:{QTable:i.kH,QTr:i.qh,QTd:i.Ef,QPageSticky:i._U,QPopupEdit:i.GT,sieSelect:Y.A,sieModal:P.A,sieInfo:g["default"],notify:v["default"],QBtn:i.Il,QTooltip:i.nC,QField:i.Om},data:function(){return{openModal:!1,niveles:[],grados:[],isEditar:(0,g["default"])().ruta.nivel>=2,optionsPlantillas:[],dataSalones:[],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:100},columns:[{label:"CÓDIGO",name:"NEMO",field:"NEMO",align:"center"},{label:"N",name:"INSTRUCOD",field:"INSTRUCOD",align:"center"},{label:"G",name:"GRADOCOD",field:"GRADOCOD",align:"center"},{label:"S",name:"SECCIONCOD",field:"SECCIONCOD",align:"center"},{label:"DESCRIPCIÓN",name:"NEMODES",field:"NEMODES",align:"left"},{label:"PLANTILLA DE CONDUCTA",name:"DESCRIPCION_PLANTILLA",field:"DESCRIPCION_PLANTILLA",align:"left"}],form:{ANO:(0,g["default"])().ano,INSTRUCOD:"",GRADOCOD:"",ID_PLANTILLA:""}}},validations:{form:{INSTRUCOD:{required:D.mw},GRADOCOD:{required:D.mw},ID_PLANTILLA:{required:D.mw}}},created:function(){this.init()},methods:{init:function(){var t=this;this.obtenerSalones(),this.getListaNivel(),ut.obtListaPlantilla((0,g["default"])().ano).then(function(a){t.optionsPlantillas.push({DESCRIPCION:"- Seleccione -",ID_PLANTILLA:"",LIMITE_CAPACIDAD:0,LIMITE_PPFF:0}),(0,tt["default"])(a,function(a,n){t.optionsPlantillas.push(a)})}).catch(function(t){})},getListaNivel:function(){var t=this;this.$http.get("api/HyoInstrus/obtInstru").then(function(a){var n=a.json;n.unshift({INSTRUCOD:"T",INSTRUDES:"Todos",INSTRUANO:0}),t.niveles=n})},getListaGrados:function(){var t=this;"T"===this.form.INSTRUCOD?this.grados.push({GRADOCOD:"T",GRADODES:"Todos"}):this.$http.get("api/HyoGradoNivs/obtGrados").then(function(a){var n=a.json;t.grados=n.filter(function(a){return a.INSTRUCOD===t.form.INSTRUCOD}),t.grados.unshift({GRADOCOD:"T",GRADODES:"Todos"})})},obtenerSalones:function(){var t=this;ut.obtenerSalones().then(function(a){t.dataSalones=a})},editarPlantillaSalon:function(t){var a=this;ut.actualizarPlantillaSalon(t.NEMO,t.ID_PLANTILLA).then(function(t){1===t.json.estado?(0,v["default"])("Guardado correctamente","success"):(0,v["default"])("Ocurrió un error","error"),a.obtenerSalones()})},actualizarBloque:function(){var t=this,a={ANO:this.form.ANO,ID_PLANTILLA:this.form.ID_PLANTILLA};"T"!==this.form.INSTRUCOD&&(a["INSTRUCOD"]=this.form.INSTRUCOD),"T"!==this.form.GRADOCOD&&(a["GRADOCOD"]=this.form.GRADOCOD),this.v$.$invalid||ut.actualizarPlantillaSalonBloque(a).then(function(a){1===a.json.estado?(0,v["default"])("Guardado correctamente","success"):(0,v["default"])("Ocurrió un error","error"),t.obtenerSalones()}).finally(function(){t.openModal=!1,t.limpiarForm()})},limpiarForm:function(){this.form={ANO:(0,g["default"])().ano,INSTRUCOD:"",GRADOCOD:"",ID_PLANTILLA:""}}}};const ct=(0,E.A)(dt,[["render",st]]);var ft=ct,pt={class:"row"},mt={class:"col-xs-12"},Ct={class:"row q-px-sm q-pt-sm"},Pt={class:"col-xs-12"},gt={class:"row q-px-sm"},ht={class:"col-xs-12"},bt={key:0,class:"row q-px-sm q-pt-sm"},It={class:"col-xs-12"},vt={key:1,class:"row q-px-sm q-pa-sm"},Dt={class:"col-xs-12 text-weight-bold text-primary"},Ot={class:"row q-px-sm"},At={class:"col-xs-12"},Lt={class:"row q-px-sm"},Et={class:"col-xs-12"},Rt={class:"row q-px-sm"},kt={class:"col-xs-12 col-sm-6"};function Nt(t,a){var n=(0,e.g2)("q-icon"),o=(0,e.g2)("q-btn"),i=(0,e.g2)("q-item"),l=(0,e.g2)("q-list"),r=(0,e.g2)("q-popover"),u=(0,e.g2)("q-tree"),d=(0,e.g2)("q-select"),c=(0,e.g2)("q-input"),f=(0,e.g2)("q-field"),p=(0,e.g2)("sie-modal"),m=(0,e.g2)("q-page"),C=(0,e.gN)("close-overlay");return(0,e.uX)(),(0,e.Wv)(m,{class:"escalas bg-white"},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",pt,[(0,e.Lk)("div",mt,[t.objPrograma.length>=1?((0,e.uX)(),(0,e.Wv)(u,{key:0,nodes:t.objPrograma,"node-key":"ID_PROGRAMA","label-key":"DESCRIPCION",selected:t.treeSelect,"onUpdate:selected":a[0]||(a[0]=function(a){return t.treeSelect=a}),"default-expand-all":""},{"default-header":(0,e.k6)(function(a){return[(0,e.bF)(n,{class:"q-mr-sm",name:a.node.ICONO||"share",style:(0,s.Tr)({color:a.node.COLOR}),size:"28px"},null,8,["name","style"]),(0,e.Lk)("div",null,(0,s.v_)(a.node.DESCRIPCION),1),t.isEditGuardar&&a.node.NIVEL>=1?((0,e.uX)(),(0,e.Wv)(o,{key:0,round:"",color:"dark",icon:"more_vert",dense:"",flat:""},{default:(0,e.k6)(function(){return[(0,e.bF)(r,{style:{"min-width":"150px"}},{default:(0,e.k6)(function(){return[(0,e.bF)(l,null,{default:(0,e.k6)(function(){return[t.isEditGuardar?((0,e.uX)(),(0,e.Wv)(i,{key:0,class:"q-pa-none"},{default:(0,e.k6)(function(){return[(0,e.bo)((0,e.bF)(o,{class:"full-width",icon:"edit",label:t.$t("botones.editar"),outline:!1,size:"14px",flat:"",onClick:function(n){return t.abrirModal("A",a.node)},"no-caps":"",align:"left"},null,8,["label","onClick"]),[[C]])]}),_:2},1024)):(0,e.Q3)("v-if",!0),t.isEliminar&&2==a.node.NIVEL?((0,e.uX)(),(0,e.Wv)(i,{key:1,class:"q-pa-none"},{default:(0,e.k6)(function(){return[(0,e.bo)((0,e.bF)(o,{class:"full-width",icon:"delete",label:t.$t("botones.eliminar"),outline:!1,size:"14px",flat:"",onClick:function(n){return t.eliminarRegistro("P",a.node)},"no-caps":"",align:"left"},null,8,["label","onClick"]),[[C]])]}),_:2},1024)):(0,e.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,e.Q3)("v-if",!0)]}),_:1},8,["nodes","selected"])):(0,e.Q3)("v-if",!0)])]),(0,e.bF)(p,{modelValue:t.openModal,"onUpdate:modelValue":a[3]||(a[3]=function(a){return t.openModal=a}),title:t.titulo,header:!0,footer:t.isEditGuardar,ok:t.$t("botones.guardar"),loading:t.loadingModal,onSubmit:t.guardarPrograma},{default:(0,e.k6)(function(){return[(0,e.Lk)("div",Ct,[(0,e.Lk)("div",Pt,[t.verDependenciaP?((0,e.uX)(),(0,e.Wv)(d,{key:0,class:"q-if-outlined",color:"secondary","float-label":"Dependencia",modelValue:t.codPrograma,"onUpdate:modelValue":a[1]||(a[1]=function(a){return t.codPrograma=a}),options:t.selectPrograma},null,8,["modelValue","options"])):(0,e.Q3)("v-if",!0)])]),(0,e.Lk)("div",gt,[(0,e.Lk)("div",ht,[(0,e.bF)(f,{error:t.v$.dataPrograma.DESCRIPCION.$error,"error-label":t.$t("validaciones.requerido")},{default:(0,e.k6)(function(){return[(0,e.bF)(c,{class:"q-if-outlined",modelValue:t.dataPrograma.DESCRIPCION,"onUpdate:modelValue":a[2]||(a[2]=function(a){return t.dataPrograma.DESCRIPCION=a}),"float-label":t.$t("matricula.descripcion"),onBlur:t.v$.dataPrograma.DESCRIPCION.$touch},null,8,["modelValue","float-label","onBlur"])]}),_:1},8,["error","error-label"])])]),a[9]||(a[9]=(0,e.Lk)("div",{class:"row q-px-sm"},null,-1))]}),_:1},8,["modelValue","title","footer","ok","loading","onSubmit"]),(0,e.bF)(p,{modelValue:t.openModalContenido,"onUpdate:modelValue":a[8]||(a[8]=function(a){return t.openModalContenido=a}),title:t.titulo,header:!0,footer:t.sie.ruta.nivel>=2,ok:t.$t("botones.guardar"),loading:t.loadingModal,onSubmit:t.guardarContenido},{default:(0,e.k6)(function(){return[t.listaProgramas.length>1?((0,e.uX)(),(0,e.CE)("div",bt,[(0,e.Lk)("div",It,[(0,e.bF)(d,{class:"q-if-outlined",color:"secondary","float-label":"Icono",modelValue:t.dataContenido.ID_PROGRAMA,"onUpdate:modelValue":a[4]||(a[4]=function(a){return t.dataContenido.ID_PROGRAMA=a}),options:t.listaProgramas},null,8,["modelValue","options"])])])):(0,e.Q3)("v-if",!0),t.listaProgramas.length<=1?((0,e.uX)(),(0,e.CE)("div",vt,[(0,e.Lk)("div",Dt,[(0,e.bF)(n,{class:"q-mr-sm",name:t.dataContenido.ICONOP||"share",style:(0,s.Tr)({color:t.dataContenido.COLORP}),size:"28px"},null,8,["name","style"]),(0,e.Lk)("label",null,(0,s.v_)(t.dataContenido.DESCP),1)])])):(0,e.Q3)("v-if",!0),(0,e.Lk)("div",Ot,[(0,e.Lk)("div",At,[(0,e.bF)(f,{error:t.v$.dataContenido.DESCRIPCION.$error,"error-label":t.$t("validaciones.requerido")},{default:(0,e.k6)(function(){return[(0,e.bF)(c,{class:"q-if-outlined",modelValue:t.dataContenido.DESCRIPCION,"onUpdate:modelValue":a[5]||(a[5]=function(a){return t.dataContenido.DESCRIPCION=a}),"float-label":t.$t("matricula.descripcion"),onBlur:t.v$.dataContenido.DESCRIPCION.$touch},null,8,["modelValue","float-label","onBlur"])]}),_:1},8,["error","error-label"])])]),(0,e.Lk)("div",Lt,[(0,e.Lk)("div",Et,[(0,e.bF)(c,{class:"q-if-outlined",modelValue:t.dataContenido.ABREVIATURA,"onUpdate:modelValue":a[6]||(a[6]=function(a){return t.dataContenido.ABREVIATURA=a}),"float-label":t.$t("abreviatura")},null,8,["modelValue","float-label"])])]),(0,e.Lk)("div",Rt,[(0,e.Lk)("div",kt,[(0,e.bF)(c,{class:"q-if-outlined",modelValue:t.dataContenido.ORDEN,"onUpdate:modelValue":a[7]||(a[7]=function(a){return t.dataContenido.ORDEN=a}),"float-label":t.$t("orden")},null,8,["modelValue","float-label"])])])]}),_:1},8,["modelValue","title","footer","ok","loading","onSubmit"])]}),_:1})}n(70199),n(515),n(7346);var _t=n(76080),St=n.n(_t),Tt=n(45254),yt=n.n(Tt),Ft={defaultDataContenido:function(){return{ID:0,DESCRIPCION:"",ABREVIATURA:"",INCLUSIVO:0,ORDEN:1,ID_PROGRAMA:null,BASE:1,ID_PADRE:""}},defaultDataPrograma:function(){return{ID_PROGRAMA:0,DESCRIPCION:"",COLOR:"",ID_PROGRAMA_REF:"",LIMITE:6,TIPO:1}},getlistaPrograma:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return O.$http.get("api/HyoConductaprograma/obtDatos",{params:{idPrograma:t}}).then(function(t){var a=t.json;return a}).catch(function(){return[]})},getDataPrograma:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return O.$http.get("api/HyoConductaprograma/obtDatosItems",{params:{idPrograma:t}}).then(function(t){var a=t.json;return a}).catch(function(){return[]})},grabarPrograma:function(t){return 0===t.ID_PROGRAMA_REF&&(t.ID_PROGRAMA_REF=null),0===t.ID_PROGRAMA?O.$http.post("api/HyoConductaprograma/insertar",{params:t}).then(function(t){var a=t.json;return a}).catch(function(t){return t}):O.$http.post("api/HyoConductaprograma/actualizar",{id:t.ID_PROGRAMA,params:t}).then(function(t){var a=t.json;return a}).catch(function(t){return t})},getDataContenido:function(){return O.$http.get("api/HyoProgramacontenido/obtDatosItems",{params:{tipoPrograma:1}}).then(function(t){var a=t.json;return a}).catch(function(){return[]})},grabarContenido:function(t){return O.$http.post("api/HyoProgramacontenido/registrarActualizar",{id:t.ID,params:t}).then(function(t){var a=t.json;return a}).catch(function(t){return t})},eliminarContenido:function(t){return O.$http.post("api/HyoProgramacontenido/eliminar",{idPrograma:t}).then(function(t){var a=t.json;return a}).catch(function(t){return t})},getListaContenido:function(t){return O.$http.get("api/HyoProgramacontenido/obtListar",{params:{params:t}}).then(function(t){var a=t.json;return a}).catch(function(){return[]})},getContenidoReferencia:function(){var t=yt()(St()().m(function t(){var a,n,e,o=arguments;return St()().w(function(t){while(1)switch(t.n){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:0,t.n=1,O.$http.get("api/HyoProgramacontenido/listaReferencia",{params:{idContenido:a}});case 1:return n=t.v,e=n.json,t.a(2,e)}},t)}));function a(){return t.apply(this,arguments)}return a}()},$t={setup:function(){var t=(0,m.fG)();return{v$:t}},components:{QModalLayout:i.hT,QTree:J.A,sieModal:P.A,QPage:i.Tu,QIcon:i.bP,QBtn:i.Il,QPopover:i.VM,QList:i.Mb,QItem:i.H0,QSelect:i.Si,QField:i.Om,QInput:i.ie},data:function(){return{sie:(0,g["default"])(),isEditar:2===(0,g["default"])().ruta.nivel,isEliminar:3===(0,g["default"])().ruta.nivel,isEditGuardar:(0,g["default"])().ruta.nivel>=2,objPrograma:[],objProgramaIni:{},objContenido:[],openModal:!1,openModalContenido:!1,titulo:"",loadingModal:!1,dataPrograma:Ft.defaultDataPrograma(),dataContenido:Ft.defaultDataContenido(),vacio:!0,listaProgramas:[],filtro:"",verDependenciaP:!1,selectPrograma:[],selectContenido:[],codPrograma:{},objContenidoRef:[],treeSelect:"",dataContenidoExpandido:[],dataContenidoExpandidoTemp:[],selectTipoEvaluacion:[],expandirtodo:!1}},computed:{},methods:{cargarAll:function(){return Promise.all([Ft.getDataPrograma(),Ft.getDataContenido(),Ft.getlistaPrograma()])},setearDatosAll:function(t){var a=H()(t,3),n=a[0],e=a[1],o=a[2];this.objPrograma=n.lista,this.objProgramaIni=n.objProgramas,this.objContenido=e.objPrincipal,this.dataContenidoExpandidoTemp=e.dataExpand,this.dataContenidoExpandido=JSON.parse(JSON.stringify(this.dataContenidoExpandidoTemp)),this.selectPrograma=o,this.selectTipoEvaluacion=n.optsTiposEvaluacion,this.selectPrograma.unshift({icon:null,label:"SIN REFERENCIA",value:{id:0,idpadre:0}})},expandirColapsarContenido:function(t){t?(this.dataContenidoExpandido=[],this.$refs.treeContenido.expandAll()):(this.$refs.treeContenido.collapseAll(),this.dataContenidoExpandido=JSON.parse(JSON.stringify(this.dataContenidoExpandidoTemp)))},init:function(){var t=this;this.cargarAll().then(function(a){t.setearDatosAll(a)})},abrirModal:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N";this.openModal=!0,this.verDependenciaP="G"===n,"N"===t?(this.titulo="Nuevo",this.v$.dataPrograma.$reset(),this.dataPrograma=Ft.defaultDataPrograma(),Object.keys(a).length>0&&(this.dataPrograma.ID_PROGRAMA_REF=a.ID_PROGRAMA,this.dataPrograma.NIVEL=a.NIVEL+1,this.dataPrograma.NIVEL>0&&(this.dataPrograma.TIPO=a.TIPO))):"A"===t&&(this.titulo="Editar",this.dataPrograma=JSON.parse(JSON.stringify(a)))},guardarPrograma:function(t){var a=this;this.v$.dataPrograma.$touch(),this.v$.dataPrograma.$error||(this.loadingModal=!0,""===this.dataPrograma.ID_PROGRAMA_REF&&(this.dataPrograma.ID_PROGRAMA_REF=this.codPrograma.id),Ft.grabarPrograma(this.dataPrograma).then(function(t){return a.loadingModal=!1,1===t.estado?((0,v["default"])(a.$t("mensajes.m0064"),"success"),a.openModal=!1,a.cargarAll()):((0,v["default"])(a.$t("mensajes."+t.mensaje),"error"),[])}).then(function(t){t.length>0&&a.setearDatosAll(t)}).catch(function(t){(0,v["default"])(a.$t("mensajes.e0006"),"error")}))},cambiarProgramaContenido:function(t){var a=this;Ft.getListaContenido({idPrograma:t.idpadre}).then(function(t){a.selectContenido=t})},abrirModalContenido:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"N";if(this.verDependenciaP=!1,"N"===t){if("G"===n)this.verDependenciaP=!0,this.openModalContenido=!0,this.titulo="Nuevo";else{if(this.v$.dataContenido.$reset(),this.dataContenido=Ft.defaultDataContenido(),!(a.ID_PROGRAMA in this.objProgramaIni))return(0,b.alertModal)("No existen mas niveles"),!1;this.listaProgramas=Ft.cboProgramaContenido(this.objProgramaIni[a.ID_PROGRAMA]);var e=this.objProgramaIni[a.ID_PROGRAMA][0];this.dataContenido.ID_PROGRAMA=e.ID_PROGRAMA,this.dataContenido.TIPO=e.TIPO,this.dataContenido.COLORP=e.COLOR,this.dataContenido.DESCP=e.DESCRIPCION,this.dataContenido.ICONOP=e.ICONO,this.openModalContenido=!0,this.titulo="Nuevo"}this.dataContenido.ID_PADRE=a.ID}else"A"===t&&(this.openModalContenido=!0,this.titulo="Editar",this.listaProgramas=Ft.cboProgramaContenido(this.objProgramaIni[a.PROGREFERENCIA]),this.dataContenido=JSON.parse(JSON.stringify(a)),this.dataContenido.ID_PROGRAMA=a.ID_PROGRAMA,this.dataContenido.COLORP=a.COLOR,this.dataContenido.DESCP=a.PROGRAMA,this.dataContenido.ICONOP=a.ICONO)},guardarContenido:function(t){var a=this;this.v$.dataContenido.$touch(),this.v$.dataContenido.$error||(this.loadingModal=!0,Ft.grabarContenido(this.dataContenido).then(function(t){return a.loadingModal=!1,1===t.estado?((0,v["default"])(a.$t("mensajes.m0064"),"success"),a.openModalContenido=!1,a.cargarAll()):((0,v["default"])(a.$t("mensajes.e0006"),"error"),[])}).then(function(t){t.length>0&&(a.setearDatosAll(t),a.expandirColapsarContenido(a.expandirtodo))}).catch(function(t){(0,v["default"])(a.$t("mensajes.e0006"),"error")}))},eliminarRegistro:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"P",n=arguments.length>1?arguments[1]:void 0;(0,b.dialogDelete)().then(function(t){var e;return t?(e="P"===a?Ft.eliminarPrograma(n.ID_PROGRAMA):Ft.eliminarContenido(n.ID),e.then(function(t){return t}).catch(function(){return!1})):null}).then(function(a){if(null!==a)if(a){if(1===a.estado)return(0,v["default"])(t.$t("mensajes.m0006.ok"),"success"),t.cargarAll();(0,v["default"])(t.$t("mensajes."+a.mensaje),"error")}else(0,v["default"])(t.$t("mensajes.m0006.mal"),"error")}).then(function(n){n&&n.length>0&&(t.setearDatosAll(n),"P"!==a&&t.expandirColapsarContenido(t.expandirtodo))})}},validations:{dataPrograma:{DESCRIPCION:{required:D.mw},ABREVIATURA:{maxLength:(0,D.Ru)(10)}},dataContenido:{DESCRIPCION:{required:D.mw}}},created:function(){this.init()}};const qt=(0,E.A)($t,[["render",Nt]]);var xt=qt,Gt={components:{plantilla:k,configuracionPlantilla:et,asignacionPlantillaSalon:ft,programa:xt,QTabs:i.uw,QTab:i.zu,QTabPane:i.dg,QPage:i.Tu}};const Mt=(0,E.A)(Gt,[["render",o]]);var wt=Mt}}]);