"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[84943],{84943:function(a,n,e){e.r(n),e.d(n,{default:function(){return A}});var t=e(8445),l=e.n(t),o=e(61758),i=e(58790),r={class:"row gutter-sm"},u={class:"col-xs-12 col-sm-12"},c={class:"row col"},s={class:"row gutter-sm"},d={class:"col-xs-12 col-sm-12"},f={class:"row col"};function p(a,n){var e=(0,o.g2)("sie-rubrica"),t=(0,o.g2)("sie-modal"),p=(0,o.g2)("q-tab"),b=(0,o.g2)("q-btn"),m=(0,o.g2)("q-td"),_=(0,o.g2)("q-tooltip"),k=(0,o.g2)("q-tr"),v=(0,o.g2)("q-table"),I=(0,o.g2)("q-tab-pane"),T=(0,o.g2)("q-tabs");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(t,{class:"modal-rubrica",esc:!0,escClick:!0,modelValue:a.modalRubrica,"onUpdate:modelValue":n[0]||(n[0]=function(n){return a.modalRubrica=n}),title:"Crear Rúbrica",onSubmit:a.guardar,ok:"Guardar"},{default:(0,o.k6)(function(){return[(0,o.bF)(e,{ref:"evaluacion",modelValue:a.evaluacion,id_evaluacion:a.id_evaluacion,modoPlantilla:!0,tipo:a.idInstrumento,onInput:a.inputRubrica,onLoad:a.load,nota:!0},null,8,["modelValue","id_evaluacion","tipo","onInput","onLoad"])]}),_:1},8,["modelValue","onSubmit"]),(0,o.bF)(T,{class:"q-tabs-flex bg-white q-mt-md",inverted:"",animated:"",modelValue:a.tab,"onUpdate:modelValue":n[3]||(n[3]=function(n){return a.tab=n})},{title:(0,o.k6)(function(){return[(0,o.bF)(p,{name:"tab-1",label:"Rúbrica",default:""}),(0,o.bF)(p,{name:"tab-2",label:"lista de cotejo"})]}),default:(0,o.k6)(function(){return[(0,o.bF)(I,{name:"tab-1"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",r,[(0,o.Lk)("div",u,[(0,o.bF)(v,{data:a.dataPlantilla,columns:a.columnsPlantilla},{"top-left":(0,o.k6)(function(e){return[(0,o.Lk)("div",c,[n[4]||(n[4]=(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("p",null,"Plantillas para Rúbricas")],-1)),a.acceso?((0,o.uX)(),(0,o.Wv)(b,{key:0,color:"primary",icon:"rplus",dense:"",round:"",flat:"",onClick:n[1]||(n[1]=function(n){return a.nuevo(1)})})):(0,o.Q3)("v-if",!0)])]}),body:(0,o.k6)(function(e){return[(0,o.bF)(k,{props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(m,{key:"TITULO",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.TITULO),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"INSTRUDES",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.INSTRUDES),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"GRADODES",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.GRADODES),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"REGISTRO_NOTAS",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.REGISTRO_NOTAS),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"NOTA_VISIBLE",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.NOTA_VISIBLE),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"ACCIONES",props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(b,{class:"q-px-xs",color:"negative",icon:"edit",flat:"",onClick:function(n){return a.editar(e.row)},disable:!a.acceso},{default:(0,o.k6)(function(){return[(0,o.bF)(_,{anchor:"bottom middle",self:"top middle"},{default:(0,o.k6)(function(){return l()(n[5]||(n[5]=[(0,o.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,o.bF)(b,{class:"q-px-xs",color:"negative",icon:"delete",flat:"",onClick:function(n){return a.eliminar(e.row)},disable:!a.acceso},{default:(0,o.k6)(function(){return[(0,o.bF)(_,{anchor:"bottom middle",self:"top middle"},{default:(0,o.k6)(function(){return l()(n[6]||(n[6]=[(0,o.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])])])]}),_:1}),(0,o.bF)(I,{name:"tab-2"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",s,[(0,o.Lk)("div",d,[(0,o.bF)(v,{data:a.dataPlantilla,columns:a.columnsPlantilla},{"top-left":(0,o.k6)(function(e){return[(0,o.Lk)("div",f,[n[7]||(n[7]=(0,o.Lk)("div",{class:"col"},[(0,o.Lk)("p",null,"Plantillas para Lista de cotejo")],-1)),a.acceso?((0,o.uX)(),(0,o.Wv)(b,{key:0,color:"primary",icon:"rplus",dense:"",round:"",flat:"",onClick:n[2]||(n[2]=function(n){return a.nuevo(1)})})):(0,o.Q3)("v-if",!0)])]}),body:(0,o.k6)(function(e){return[(0,o.bF)(k,{props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(m,{key:"TITULO",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.TITULO),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"INSTRUDES",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.INSTRUDES),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"GRADODES",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.GRADODES),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"REGISTRO_NOTAS",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.REGISTRO_NOTAS),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"NOTA_VISIBLE",props:e},{default:(0,o.k6)(function(){return[(0,o.eW)((0,i.v_)(e.row.NOTA_VISIBLE),1)]}),_:2},1032,["props"]),(0,o.bF)(m,{key:"ACCIONES",props:e},{default:(0,o.k6)(function(){return[(0,o.bF)(b,{class:"q-px-xs",color:"negative",icon:"edit",flat:"",onClick:function(n){return a.editar(e.row)},disable:!a.acceso},{default:(0,o.k6)(function(){return[(0,o.bF)(_,{anchor:"bottom middle",self:"top middle"},{default:(0,o.k6)(function(){return l()(n[8]||(n[8]=[(0,o.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,o.bF)(b,{class:"q-px-xs",color:"negative",icon:"delete",flat:"",onClick:function(n){return a.eliminar(e.row)},disable:!a.acceso},{default:(0,o.k6)(function(){return[(0,o.bF)(_,{anchor:"bottom middle",self:"top middle"},{default:(0,o.k6)(function(){return l()(n[9]||(n[9]=[(0,o.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])])])]}),_:1})]}),_:1},8,["modelValue"])])}var b=e(76080),m=e.n(b),_=e(45254),k=e.n(_),v=(e(52133),e(50310),e(6724),e(83190),e(52776),e(81813),e(6123)),I=e(80660),T=e(84745),S=e(30640),E=e(982),O=e(69027),g={components:{sieModal:S.A,sieRubrica:T.A,QTooltip:v.nC,QTable:v.kH,QTr:v.qh,QTd:v.Ef,QTabs:v.uw,QTab:v.zu,QTabPane:v.dg,QCarousel:v.ci,QCarouselSlide:v.xp,QCarouselControl:v.rG,QBtn:v.Il},watch:{tab:function(a){console.log(a),this.idInstrumento="tab-1"===a?1:3,this.getPlantillas()}},data:function(){return{tab:"tab-1",modoEditar:!1,id_evaluacion:null,modalRubrica:!1,idInstrumento:1,evaluacion:{},dataRubrica:{},dataPlantilla:[],columnsPlantilla:[{label:"Título",name:"TITULO",field:"TITULO",align:"center"},{label:"Nivel",name:"INSTRUDES",field:"INSTRUDES",align:"center"},{label:"Grado",name:"GRADODES",field:"GRADODES",align:"center"},{label:"Viaja al Registro de Notas",name:"REGISTRO_NOTAS",field:"REGISTRO_NOTAS",align:"center"},{label:"Publicar Nota",name:"NOTA_VISIBLE",field:"NOTA_VISIBLE",align:"center"},{name:"ACCIONES",style:"width: 150px",label:"Acciones",align:"center"}],acceso:!0}},methods:{guardar:function(a){var n=this;return k()(m()().m(function a(){return m()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,n.$refs.evaluacion.saveRubrica();case 1:return a.a(2)}},a)}))()},load:function(){},inputRubrica:function(a,n){var e=this;if(!a.titulo)return(0,E["default"])("Falta el título de la plantilla","warning"),!1;a.esPlantilla=1,a.plantilla=1;var t="";if(this.modoEditar){a.id_instrumento=this.idInstrumento;var l=this.$refs.evaluacion.evaluacion;l.ID_CLASE_CONTENIDO&&(a.id_clase_contenido=l.ID_CLASE_CONTENIDO),l.CAMPO&&(a.campo=l.CAMPO),l.TABLA&&(a.tabla=l.TABLA),t="api/evaluacion/updateEvaluacion"}else{var o=this.$refs.evaluacion.competenciaPlantilla;if(!o)return(0,E["default"])("Debe asociar una competencia","warning"),!1;var i=o.replace(/(,[0-9]+)+/,"");a.id_clase_contenido=i,a.id_instrumento=this.idInstrumento,t="api/evaluacion/saveEvaluacion"}I.$http.post(t,{data:a}).then(function(a){e.getPlantillas(),(0,E["default"])(a.message,"success"),e.modalRubrica=!1}).catch(function(a){var n=a.error&&a.error.message?a.error.message:"Ocurrió un error";(0,E["default"])(n,"warning")})},getPlantillas:function(){var a=this;return k()(m()().m(function n(){var e;return m()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,I.$http.get("api/evaluacion/getSelectEvaluaciones",{params:{params:{tipo:2,id_instrumento:a.idInstrumento}}});case 1:e=n.v,a.dataPlantilla=e.map(function(a){return a.REGISTRO_NOTAS=1===a.REGISTRO_NOTAS?"Sí":"No",a.NOTA_VISIBLE=1===a.NOTA_VISIBLE?"Sí":"No",a});case 2:return n.a(2)}},n)}))()},nuevo:function(){this.evaluacion={},this.id_evaluacion=null,this.modoEditar=!1,this.modalRubrica=!0},editar:function(a){this.modoEditar=!0,this.id_evaluacion=a.ID_EVALUACION,this.modalRubrica=!0},eliminar:function(a){var n=this;(0,O.confirmar)("¿Está seguro de eliminar esta plantilla?",function(){I.$http.post("api/evaluacion/deleteEvaluacion",{id_evaluacion:a.ID_EVALUACION}).then(function(a){n.getPlantillas(),(0,E["default"])("Plantilla eliminada","success")}).catch(function(a){(0,E["default"])("No se puede eliminar la plantilla","warning")})})}},created:function(){this.getPlantillas()}},R=e(12807);const h=(0,R.A)(g,[["render",p]]);var A=h}}]);