"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[50107],{50107:function(e,o,n){n.r(o),n.d(o,{default:function(){return te}});var r=n(61758),a={class:"row q-col-gutter-xs"},t={class:"col-12"},i={class:"row q-col-gutter-xs"},l={class:"col-xs-12 col-sm-3 col-md-2"},s={class:"col-xs-12 col-sm-3 col-md-5"},c={class:"col-12"},u={class:"row q-col-gutter-xs"},d={class:"col-xs-12 col-sm-3 col-md-4"},p={class:"col-xs-12 col-sm-3 col-md-3"},m={class:"col-xs-12 col-sm-3 col-md-3"},f={class:"col-xs-12 col-sm-3 col-md-2"},C={class:"col-12"},g={class:"row"},b={class:"col-xs-12 col-sm-3 col-md-4"},h={class:"col-xs-12 col-sm-3 col-md-3"},v={class:"col-xs-12 col-sm-3 col-md-3"},O={class:"col-xs-12 col-sm-3 col-md-2"},S={class:"col-xs-12 listaDetalle"},E={key:1,class:"column"},R={class:"q-pa-md q-gutter-sm"},D={class:"q-gutter-sm"},w={class:"col-xs-12 col-sm-6 col-md-6 col-lg-2"};function A(e,o){var n=this,A=(0,r.g2)("header-btn"),I=(0,r.g2)("q-select"),P=(0,r.g2)("q-spinner-oval"),k=(0,r.g2)("q-inner-loading"),N=(0,r.g2)("sie-table"),V=(0,r.g2)("sie-vacio"),U=(0,r.g2)("q-card-section"),F=(0,r.g2)("q-card"),T=(0,r.g2)("q-radio"),M=(0,r.g2)("q-datetime"),L=(0,r.g2)("sie-modal"),$=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)($,{class:"academico-salones q-pa-sm"},{default:(0,r.k6)(function(){return[(0,r.bF)(F,null,{default:(0,r.k6)(function(){return[(0,r.bF)(A,{name:"Cierre de Registros",buttons:e.buttons},null,8,["buttons"]),(0,r.bF)(U,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",a,[(0,r.Lk)("div",t,[(0,r.Lk)("div",i,[(0,r.Lk)("div",l,[(0,r.bF)(I,{options:e.opcionSalon,label:"Filtrar por: ",onInput:e.cambiaFiltro,modelValue:e.filtro,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.filtro=o})},null,8,["options","onInput","modelValue"])]),(0,r.Lk)("div",s,[(0,r.bF)(I,{options:e.profesores,label:"Profesor: ",modelValue:e.profesor,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.profesor=o}),disable:"S"==e.filtro,onInput:e.cambiarProfesor},null,8,["options","modelValue","disable","onInput"])])])]),(0,r.Lk)("div",c,[(0,r.Lk)("div",u,[(0,r.Lk)("div",d,[(0,r.bF)(I,{options:e.optionSalones,label:"Salon: ",modelValue:e.nemo,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.nemo=o}),onInput:e.cambiarSalon,disable:e.disableSalon,"option-value":"NEMO","option-label":"NEMODES",onClick:o[3]||(o[3]=function(o){return e.mostrarMensaje(e.disableSalon,"Elija un Profesor")})},null,8,["options","modelValue","onInput","disable"])]),(0,r.Lk)("div",p,[(0,r.bF)(I,{disable:!e.nemo,onClick:o[4]||(o[4]=function(o){return e.mostrarMensaje(!e.nemo,"Elija un salón")}),options:e.niveles,label:"Nivel: ",modelValue:e.instrucod,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.instrucod=o}),onInput:o[6]||(o[6]=function(o){return e.seleccion()})},null,8,["disable","options","modelValue"])]),(0,r.Lk)("div",m,[(0,r.bF)(I,{disable:!e.nemo,onClick:o[7]||(o[7]=function(o){return e.mostrarMensaje(!e.nemo,"Elija un salón")}),options:e.grados,label:"Grado: ",modelValue:e.gradocod,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.gradocod=o}),onInput:o[9]||(o[9]=function(o){return e.seleccion()})},null,8,["disable","options","modelValue"])]),(0,r.Lk)("div",f,[(0,r.bF)(I,{disable:!e.nemo,onClick:o[10]||(o[10]=function(o){return e.mostrarMensaje(!e.nemo,"Elija un salón")}),options:e.secciones,label:"Seccion: ",modelValue:e.seccioncod,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.seccioncod=o})},null,8,["disable","options","modelValue"])])])]),(0,r.Lk)("div",C,[(0,r.Lk)("div",g,[(0,r.Lk)("div",b,[(0,r.bF)(I,{options:e.cursos,label:"Curso: ",modelValue:e.cursocod,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.cursocod=o}),onInput:e.cambiarCurso,"option-value":"CURSOCOD","option-label":"CURSONOM",disable:!e.nemo,onClick:o[13]||(o[13]=function(o){return e.mostrarMensaje(!e.nemo,"Elija un salón")})},null,8,["options","modelValue","onInput","disable"])]),(0,r.Lk)("div",h,[(0,r.bF)(I,{disable:!e.cursocod,options:e.grupos,label:"Grupo: ",modelValue:e.grupocod,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.grupocod=o}),onInput:e.seleccion,"option-value":"GRUPOCOD","option-label":"LABEL",onClick:o[15]||(o[15]=function(o){return e.mostrarMensaje(!e.cursocod,"Elija un Curso")})},null,8,["disable","options","modelValue","onInput"])]),(0,r.Lk)("div",v,[(0,r.bF)(I,{disable:!e.cursocod,options:e.tipoCierre,label:"Tipo de Cierre: ",modelValue:e.tipoC,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.tipoC=o}),onClick:o[17]||(o[17]=function(o){return e.mostrarMensaje(!e.cursocod,"Elija un Curso")})},null,8,["disable","options","modelValue"])]),(0,r.Lk)("div",O,[(0,r.bF)(I,{disable:!e.cursocod,options:e.periodos,label:"Periodo: ",modelValue:e.periodo,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.periodo=o}),onInput:e.changePeriodo,onClick:o[19]||(o[19]=function(o){return e.mostrarMensaje(!e.cursocod,"Elija un Curso")})},null,8,["disable","options","modelValue","onInput"])])])]),(0,r.Lk)("div",S,[(0,r.bF)(k,{visible:e.loadingDetalle},{default:(0,r.k6)(function(){return[(0,r.bF)(P,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.dataReg.length>0?((0,r.uX)(),(0,r.Wv)(N,{key:0,class:"q-px-sm q-pt-sm sticky",selection:"single",context:n,css:"height: calc(100vh - 120px)",search:"Buscar","save-cells":"",columns:e.columnCierre,data:e.dataReg,config:e.configCierre},null,8,["columns","data","config"])):((0,r.uX)(),(0,r.CE)("div",E,[(0,r.bF)(V,{icon:"settings_applications"})]))])])]}),_:1})]}),_:1}),(0,r.bF)(L,{title:"Definición de Apertura/Cierre en bloque",modelValue:e.openModalDefinir,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.openModalDefinir=o}),onSubmit:e.submitDefinir},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",R,[(0,r.Lk)("div",D,[(0,r.bF)(T,{dense:"",onInput:e.cambiarEstadoCierre,modelValue:e.estadoCierre,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.estadoCierre=o}),val:"A",label:"Abrir"},null,8,["onInput","modelValue"]),(0,r.bF)(T,{dense:"",onInput:e.cambiarEstadoCierre,modelValue:e.estadoCierre,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.estadoCierre=o}),val:"C",label:"Cerrar"},null,8,["onInput","modelValue"])]),(0,r.Lk)("div",w,[(0,r.bF)(M,{class:"q-if-outlined",disable:e.disableFechaCierre,modelValue:e.fechaCierre,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.fechaCierre=o}),type:"datetime",format:"DD/MM/YYYY HH:mm"},null,8,["disable","modelValue"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var I=n(76080),P=n.n(I),k=n(45254),N=n.n(k),V=(n(71225),n(52133),n(50310),n(5962),n(6724),n(70199),n(515),n(83190),n(7346),n(6123)),U=n(50425),F=n(52617),T=n(82351),M=n(94509),L=n(9736),$=n(16648),G=n(88567),q=n(95718),x=n(53380),y=n(88865),Q=n(66824),_=(n(30683),n(10239),n(90095),n(13715),n(80660)),j={getNgCurgra:function(){return N()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,_.$http.get("api/PlanCurricularController/getNgCurgra"))}},e)}))()},getAreasCurgra:function(e){return N()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,_.$http.get("api/PlanCurricularController/getAreasCurgra",{params:{parametros:e}}))}},o)}))()},updateCampo:function(e){return N()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,_.$http.post("api/PlanCurricularController/updateCampo",{params:e}))}},o)}))()},getSalones:function(){return N()(P()().m(function e(){var o,n;return P()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,_.$http.get("api/SalonController/getSalones");case 1:return o=e.v,n={},o.forEach(function(e){n[e.NEMO]=e}),e.a(2,{salones:n,optionSalones:o})}},e)}))()},getSalonesXProfesor:function(e){return N()(P()().m(function o(){var n,r;return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,_.$http.get("api/SalonController/getSalonesXProfesor",{params:{profcod:e}});case 1:return n=o.v,r={},n.forEach(function(e){r[e.NEMO]=e}),o.a(2,{salones:r,optionSalones:n})}},o)}))()},getCursos:function(){var e=arguments;return N()(P()().m(function o(){var n,r;return P()().w(function(o){while(1)switch(o.n){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:{},o.n=1,_.$http.get("api/cierrePeriodoController/getCursos",{params:{params:n}});case 1:return r=o.v,r=r.map(function(e){return e.CURSONOM="".concat(e.CURSOCOD," - ").concat(e.CURSONOM),e}),r.unshift({CURSOCOD:"T",CURSONOM:"Todos"}),o.a(2,r)}},o)}))()},getGrupos:function(e){return N()(P()().m(function o(){var n;return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,_.$http.get("api/cierrePeriodoController/getGrupos",{params:e});case 1:return n=o.v,n=n.map(function(e){return e.LABEL="".concat(e.GRUPOCOD," - ").concat(e.GRUPODES),e}),n.push({LABEL:"Todos",GRUPOCOD:"T"}),console.log("data:",n),o.a(2,n)}},o)}))()},getProfesores:function(){return N()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,_.$http.get("api/cierrePeriodoController/getProfesores"))}},e)}))()},getGrados:function(e){var o={};return o.instrucod=e,_.$http.get("api/cierrePeriodoController/getGrados",{params:{params:o}})},getNiveles:function(){return N()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,_.$http.get("api/cierrePeriodoController/getNiveles"))}},e)}))()},getSecciones:function(){return N()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,_.$http.get("api/cierrePeriodoController/getSecciones"))}},e)}))()},getReg:function(){var e=arguments;return N()(P()().m(function o(){var n;return P()().w(function(o){while(1)switch(o.n){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:{},o.a(2,_.$http.get("api/cierrePeriodoController/getReg",{params:{params:n}}))}},o)}))()},aperturaCierre:function(e){return N()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.a(2,_.$http.post("api/cierrePeriodoController/aperturaCierreRegistros",{params:e}))}},o)}))()}},H=n(30640),B=n(93616),X=n(80340),J=n(57668),Y=n(65229),z=n(81288),W=n(2739),K=n(33777),Z={data:function(){return{configCierre:{ESTADO:{renderHtml:function(e,o,n,r){return"C"===e.ESTADO?(r.$$FECHA_CIERRE=!1,n.icon({name:"lock_outline",color:"black"})):(r.$$FECHA_CIERRE=!0,n.icon({name:"lock_open",color:"primary"}))},renderAction:function(e,o){"C"===o.ESTADO?(o.ESTADO="A",o.FECHA_CIERRE=null,o.$$openFECHA_CIERRE=!1):(o.ESTADO="C",o.$$openFECHA_CIERRE=!0)}},FECHA_CIERRE:{component:"datetime",edit:!0}},columnCierre:[{name:"INSTRUCOD",label:"N",field:"INSTRUCOD",align:"center"},{name:"GRADOCOD",label:"G",field:"GRADOCOD",align:"center"},{name:"SECCIONCOD",label:"S",field:"SECCIONCOD",align:"center"},{name:"NEMODES",label:"Salón",field:"NEMODES",align:"center"},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"center"},{name:"GRUPODES",label:"Grupo",field:"GRUPODES",align:"center"},{name:"BIMECOD",label:"N°Per",field:"BIMECOD",align:"center"},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"},{name:"FECHA_CIERRE",label:"Fecha y hora de cierre",field:"FECHA_CIERRE",align:"center"}],dataReg:[]}}},ee=n(99515),oe=n(2819),ne={directives:{sieActive:Y.A},mixins:[Z],components:{QRadio:ee.A,QDatetime:V.T5,QPopover:V.VM,QCard:G.A,QCardSection:q.A,QSeparator:x.A,QItemSection:y.A,QItemLabel:Q.A,QInnerLoading:V.SQ,QSpinnerOval:V.VA,QSelect:$.A,QInput:L.A,QTable:U.A,QTh:F.A,QTr:T.A,QTd:M.A,sieModal:H.A,sieSelect:B.A,sieVacio:X.A,QForm:W.A,sieTable:K.A,QPage:V.Tu},props:["INSTRUCOD"],watch:{instrucod:function(e){console.log(e)}},data:function(){return{filtro:"S",disableFechaCierre:!1,estadoCierre:"C",fechaCierre:null,openModalDefinir:!1,salonesObj:[],loadingDetalle:!0,cursoParams:{},profesor:null,seccioncod:null,nemo:null,cursocod:null,grupocod:null,periodo:null,tipoC:null,instrucod:null,gradocod:null,disableSalon:!1,params:{ano:"2021",INSTRUCOD:"",GRADOCOD:"",SECCIONCOD:"",CURSOCOD:"",GRUPOCOD:"",BIMECOD:""},sie:(0,J["default"])(),config:{data:[],columns:[],key:"CURSOCOD"},salones:{},optionSalones:[],cursos:[],grupos:[],niveles:[],secciones:[],grados:[],profesores:[],opcionSalon:[{label:"Profesor",value:"P"},{label:"Salones",value:"S"}],periodos:[{label:"1° Periodo",value:"1"},{label:"2° Periodo",value:"2"},{label:"3° Periodo",value:"3"},{label:"4° Periodo",value:"4"},{label:"Todos",value:"T"}],tipoCierre:[{label:"Notas Programado",field:"P",value:"P"},{label:"Anual Notas",field:"AN",value:"AN"},{label:"Conducta",field:"C",value:"C"},{label:"Anual Comentarios",field:"AC",value:"AC"}],pagination:{rowsPerPage:0},buttons:[{label:"Imprimir",icon:"print",click:this.imprimir},{label:"Definir",icon:"format_list_bulleted",click:this.definir},{label:"Guardar",icon:"save",click:this.guardar}],copyDataReg:[]}},computed:{isLess:function(){return(0,z.isLess)()}},methods:{changePeriodo:function(e){var o=JSON.parse(JSON.stringify(this.copyDataReg));"T"!==e?(o=o.filter(function(o){return o.BIMECOD===e}),this.dataReg=o):this.dataReg=o},imprimir:function(e){var o={instrucod:this.instrucod,gradocod:this.gradocod,seccioncod:this.seccioncod,cursocod:this.cursocod,grupocod:this.grupocod,bimecod:this.periodo,tipofiltro:this.filtro},n="academico/asignacion-cierre-de-registros/reporte";(0,oe["default"])(o,n,"Reporte ")},guardar:function(e){var o=this,n=this.dataReg.map(function(e){return e.TIPOCIERRE=o.tipoC,e});j.aperturaCierre(n).then(function(e){o.$notify(e.message,"success"),o.copyDataReg=o.dataReg})},cambiarEstadoCierre:function(e){this.disableFechaCierre="A"===e,"A"===e&&(this.fechaCierre=null)},submitDefinir:function(e){var o=this,n=this.dataReg.map(function(e){return e.ESTADO=o.estadoCierre,e.TIPOCIERRE=o.tipoC,e.FECHA_CIERRE=o.fechaCierre,e});j.aperturaCierre(n).then(function(e){o.$notify(e.message,"success"),o.openModalDefinir=!1})},definir:function(e){this.openModalDefinir=!0},mostrarMensaje:function(e,o){e&&this.$notify(o,"warning")},cambiaFiltro:function(e){"S"===e&&(this.profesor=null,this.disableSalon=!1),"P"===e&&(this.disableSalon=!0,this.nemo=null,this.cursocod=null)},cambiarProfesor:function(e){var o=this;return N()(P()().m(function n(){var r,a;return P()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,j.getSalonesXProfesor(e);case 1:r=n.v,a=r.optionSalones,o.optionSalones=a,o.disableSalon=!1;case 2:return n.a(2)}},n)}))()},cambiarSalon:function(e){var o=this;return N()(P()().m(function n(){var r,a;return P()().w(function(n){while(1)switch(n.n){case 0:return r=o.salones[e],o.instrucod=r.INSTRUCOD,o.gradocod=r.GRADOCOD,o.seccioncod=r.SECCIONCOD,o.grupocod=r.GRUPOCOD,a={ano:r.ANO,instrucod:r.INSTRUCOD,gradocod:r.GRADOCOD},n.n=1,j.getCursos(a);case 1:o.cursos=n.v,o.cursocod="T",o.cambiarCurso("T");case 2:return n.a(2)}},n)}))()},cambiarCurso:function(e){var o=this;return N()(P()().m(function n(){var r,a,t,i,l,s,c,u;return P()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,j.getGrupos({nemo:o.nemo,cursocod:o.cursocod});case 1:return o.grupos=n.v,o.grupocod="T",o.periodo="T",o.tipoC="P",r=o.instrucod,a=o.seccioncod,t=o.gradocod,i=o.grupocod,l=o.bimecod,s=o.periodo,c=o.tipoC,u={filtro:"S",instrucod:r,gradocod:t,seccioncod:a,cursocod:e,grupocod:i,bimecod:l,periodo:s,tipocierre:c},n.n=2,j.getReg(u);case 2:o.dataReg=n.v,o.copyDataReg=JSON.parse(JSON.stringify(o.dataReg));case 3:return n.a(2)}},n)}))()},seleccion:function(){var e=this;return N()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:e.params.instrucod=e.instrucod,e.params.gradocod=e.gradocod,e.params.seccioncod=e.seccioncod,e.params.grupocod=e.grupocod,e.params.cursocod=e.cursocod;case 1:return o.a(2)}},o)}))()},actualizarCampo:function(e,o){var n=this;return N()(P()().m(function r(){var a,t,i,l,s;return P()().w(function(r){while(1)switch(r.p=r.n){case 0:if(alert("aqui"),o&&e){r.n=1;break}return n.$notify("No se puede actualizar la data","warning"),r.a(2,!1);case 1:return a={},a[o]=e[o],r.p=2,r.n=3,j.updateCampo({data:a,instrucod:e.INSTRUCOD,gradocod:e.GRADOCOD,cursocod:e.CURSOCOD});case 3:return t=r.v,i=t.message,n.$notify(i,"success"),r.a(2,!0);case 4:return r.p=4,s=r.v,l=s.error,n.$notify(l.message,"warning"),r.a(2,!1)}},r,null,[[2,4]])}))()}},created:function(){var e=this;return N()(P()().m(function o(){var n,r,a,t,i,l;return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,j.getNgCurgra();case 1:return e.dataGrados=o.v,o.n=2,j.getSalones();case 2:return n=o.v,r=n.optionSalones,a=n.salones,e.loadingDetalle=!1,e.salones=a,e.optionSalones=r,o.n=3,j.getProfesores();case 3:return t=o.v,e.profesores=t.map(function(e){return{value:e.PROFCOD,label:e.NOMCOMP}}),o.n=4,j.getNiveles();case 4:return i=o.v,e.niveles=i.map(function(e){return{value:e.INSTRUCOD,label:e.INSTRUDES}}),o.n=5,j.getSecciones();case 5:l=o.v,e.secciones=l.map(function(e){return{value:e.SECCIONCOD,label:e.SECCIONDES}});case 6:return o.a(2)}},o)}))()}},re=n(12807);const ae=(0,re.A)(ne,[["render",A]]);var te=ae}}]);