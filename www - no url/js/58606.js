"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[58606],{58606:function(e,n,a){a.r(n),a.d(n,{default:function(){return j}});var r=a(61758),t=a(58790),A={class:"row q-col-gutter-md"},o={class:"col-xs-12"},s={class:"row q-col-gutter-md"},i={class:"col-xs-12"},c={class:"row q-col-gutter-md q-mt-sm"},I={class:"col-xs-12"},O={class:"q-table-middle"},D={class:"q-table q-table-horizontal-separator"},l={class:"col-xs-6"},u={class:"col-xs-6"},d={class:"row q-col-gutter-md"},N={class:"col-xs-12"},E={class:"col-xs-12"},M={class:"col-xs-12 bg-white"};function R(e,n){var a=(0,r.g2)("header-btn"),R=(0,r.g2)("formulario"),P=(0,r.g2)("q-card-section"),f=(0,r.g2)("q-card"),C=(0,r.g2)("q-radio"),_=(0,r.g2)("sie-modal"),m=(0,r.g2)("q-spinner-oval"),S=(0,r.g2)("q-inner-loading"),F=(0,r.g2)("q-alert"),p=(0,r.g2)("q-item-label"),g=(0,r.g2)("q-item-section"),T=(0,r.g2)("q-item"),L=(0,r.g2)("q-list"),h=(0,r.g2)("estados-fichas"),b=(0,r.g2)("listar-sedes"),k=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(k,{class:"q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(f,{flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(a,{name:e.tituloForm,auto:!0,buttons:e.botonesForm},null,8,["name","buttons"]),(0,r.bF)(P,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",A,[(0,r.Lk)("div",o,[(0,r.bF)(R,{schema:e.schemas.viewAdmRegAcademico,ref:"formApp",key:"formApp",onClickIconGrid:e.clickIconGrid,onChangeInput:e.changeInput},null,8,["schema","onClickIconGrid","onChangeInput"])])])]}),_:1})]}),_:1}),(0,r.bF)(_,{title:e.configModalSel.titulo,modelValue:e.openModal,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.openModal=n}),ok:"GRABAR",onSubmit:e.confirmarFamiliasHomonimas},{default:(0,r.k6)(function(){return[(0,r.bF)(P,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",s,[(0,r.Lk)("div",i,[(0,r.Lk)("span",null,(0,t.v_)(e.mensaje),1)])]),(0,r.Lk)("div",c,[(0,r.Lk)("div",I,[(0,r.Lk)("div",O,[(0,r.Lk)("table",D,[n[12]||(n[12]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,"Módulo Admisión"),(0,r.Lk)("td",null,"Módulo Académico")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.postulantesRegistrar,function(a,A){return(0,r.uX)(),(0,r.CE)("tr",null,[a.ES_FAMILIA_HOMONIMA?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("td",l,[(0,r.Lk)("div",null,[n[4]||(n[4]=(0,r.Lk)("b",{class:"q-mr-sm"},"Familia:",-1)),(0,r.Lk)("span",null,(0,t.v_)(a.INFO_ADMISION.NOMBRE_FAMILIA),1)]),(0,r.Lk)("div",null,[n[5]||(n[5]=(0,r.Lk)("b",{class:"q-mr-sm"},"Postulante:",-1)),(0,r.Lk)("span",null,(0,t.v_)(a.INFO_ADMISION.NOMBRE_POSTULANTE),1)]),(0,r.Lk)("div",null,[n[6]||(n[6]=(0,r.Lk)("b",{class:"q-mr-sm"},"Padre:",-1)),(0,r.Lk)("span",null,(0,t.v_)(a.INFO_ADMISION.PADRE.PADDOC)+" - "+(0,t.v_)(a.INFO_ADMISION.PADRE.NOMCOMP),1)]),(0,r.Lk)("div",null,[n[7]||(n[7]=(0,r.Lk)("b",{class:"q-mr-sm"},"Madre:",-1)),(0,r.Lk)("span",null,(0,t.v_)(a.INFO_ADMISION.MADRE.MADDOC)+" - "+(0,t.v_)(a.INFO_ADMISION.MADRE.NOMCOMP),1)])]),(0,r.Lk)("td",u,[(0,r.Lk)("table",null,[(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.INFO_ACADEMICO,function(a,o){return(0,r.uX)(),(0,r.CE)("tr",{class:(0,t.C4)({seleccion:e.famcods[A]&&e.famcods[A]===a.FAMCOD})},[(0,r.Lk)("td",null,[(0,r.Lk)("div",null,[n[8]||(n[8]=(0,r.Lk)("b",{class:"q-mr-sm"},"Familia:",-1)),(0,r.Lk)("span",null,(0,t.v_)(a.FAMCOD)+" - "+(0,t.v_)(a.NOMBRE_FAMILIA),1)]),(0,r.Lk)("div",null,[n[9]||(n[9]=(0,r.Lk)("b",{class:"q-mr-sm"},"Padre:",-1)),(0,r.Lk)("span",null,(0,t.v_)(a.PADRE),1)]),(0,r.Lk)("div",null,[n[10]||(n[10]=(0,r.Lk)("b",{class:"q-mr-sm"},"Madre:",-1)),(0,r.Lk)("span",null,(0,t.v_)(a.MADRE),1)])]),(0,r.Lk)("td",null,[(0,r.bF)(C,{modelValue:e.famcods[A],"onUpdate:modelValue":function(n){return e.famcods[A]=n},val:a.FAMCOD,onInput:function(n){return e.confirmarFamcod(A,a.FAMCOD)}},null,8,["modelValue","onUpdate:modelValue","val","onInput"])])],2)}),256)),(0,r.Lk)("tr",{class:(0,t.C4)({seleccion:e.famcods[A]&&""===e.famcods[A]})},[n[11]||(n[11]=(0,r.Lk)("td",null,[(0,r.Lk)("div",null,[(0,r.Lk)("b",null,"Ningúna de las anteriores: registrar como una nueva familia")])],-1)),(0,r.Lk)("td",null,[(0,r.bF)(C,{modelValue:e.famcods[A],"onUpdate:modelValue":function(n){return e.famcods[A]=n},val:"",onInput:function(n){return e.confirmarFamcod(A,"")}},null,8,["modelValue","onUpdate:modelValue","onInput"])])],2)])])])],64)):(0,r.Q3)("v-if",!0)])}),256))])])])])])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,r.bF)(_,{title:"Resultado",modelValue:e.openModalRegistro,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.openModalRegistro=n}),ok:!1,onSubmit:e.cerrarModalRegistro},{default:(0,r.k6)(function(){return[(0,r.bF)(P,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",d,[(0,r.Lk)("div",N,[(0,r.bF)(S,{class:"col",visible:""!=e.textoProgreso},{default:(0,r.k6)(function(){return[(0,r.bF)(m,{size:"50px",color:"primary"}),(0,r.Lk)("label",null,(0,t.v_)(e.textoProgreso),1)]}),_:1},8,["visible"])]),""!=e.objResponse.informe?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("div",E,[(0,r.bF)(F,{type:"positive"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",null,(0,t.v_)(e.objResponse.informe),1)]}),_:1})]),(0,r.Lk)("div",M,[(0,r.bF)(L,{bordered:"",separator:""},{default:(0,r.k6)(function(){return[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.objResponse.errores,function(e,n){return(0,r.uX)(),(0,r.Wv)(T,{key:"e_"+n,separator:""},{default:(0,r.k6)(function(){return[(0,r.bF)(g,null,{default:(0,r.k6)(function(){return[(0,r.bF)(p,{class:"text-red"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,t.v_)(e),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)}),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.objResponse.infoLog,function(e,n){return(0,r.uX)(),(0,r.Wv)(T,{key:"i_"+n,separator:""},{default:(0,r.k6)(function(){return[(0,r.bF)(g,null,{default:(0,r.k6)(function(){return[(0,r.bF)(p,null,{default:(0,r.k6)(function(){return[(0,r.eW)((0,t.v_)(e),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])],64)):(0,r.Q3)("v-if",!0)])]}),_:1})]}),_:1},8,["modelValue","onSubmit"]),(0,r.bF)(_,{title:e.rowModal.titulo,modelValue:e.openModalEstado,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openModalEstado=n}),footer:!1},{default:(0,r.k6)(function(){return[(0,r.bF)(P,{class:"cont-modal-estados-fichas"},{default:(0,r.k6)(function(){return[(0,r.bF)(h,{postulante:e.rowModal},null,8,["postulante"])]}),_:1})]}),_:1},8,["title","modelValue"]),(0,r.bF)(_,{title:e.modalSedes.titulo,modelValue:e.modalSedes.open,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.modalSedes.open=n}),onSubmit:e.filtrarSedes},{default:(0,r.k6)(function(){return[(0,r.bF)(P,{class:"full-width"},{default:(0,r.k6)(function(){return[(0,r.bF)(b,{ref:"listaSedes",selected:e.modalSedes.selected},null,8,["selected"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var P=a(41562),f=a.n(P),C=a(99550),_=a.n(C),m=a(14794),S=a.n(m),F=a(57008),p=a.n(F),g=a(76080),T=a.n(g),L=a(45254),h=a.n(L),b=(a(30683),a(71225),a(74260),a(39866),a(23825),a(52133),a(10239),a(50310),a(5962),a(32203),a(90095),a(6724),a(83190),a(52776),a(44264),a(66307),a(81813),a(68017),a(13715),a(24066),a(6123)),k=a(80660),v=a(10213),w=a(65848),U=a(40714),G=a(61527),B=a(7968),V=a(41615),q=a(88865),x=a(66824),y=(a(18105),{mixins:[w.A,U.A],components:{estadosFichas:G["default"],listarSedes:B.A,QItemSection:q.A,QItemLabel:x.A,QPage:b.Tu,QCard:b.C$,QRadio:b.$,QInnerLoading:b.SQ,QSpinnerOval:b.VA,QAlert:b.ex,QList:b.Mb,QItem:b.H0},data:function(){var e=this.init();return e.postulantesRegistrar=[],e.famcods=[],e.openModal=!1,e.famcodValidad="VALIDAR",e.mensaje="Existen familias homónimas en Académico. Por favor proceda a confirmar cada postulante:",e.tipoMigracion=3,e.objResponse={informe:"",errores:[],infoLog:[]},e.textoProgreso="",e.openModalRegistro=!1,e.openModalEstado=!1,e.idEstadoAdmitido=0,e.idEstadoIngresante=0,e.idFlujoFinalizado=0,e.sie.manejaSedes=!1,e.sie.validaPagoTransferencia=!1,e.modalSedes={open:!1,titulo:"Seleccionar Sedes",selected:[]},e.editaSeccion=!1,e.notificaTransferencia=!1,e.transferirDocsIntranet=!1,e.regCuotaIngreso=!1,e.addColOportunidades=!1,e.transfAdicFamAcademico=!1,e.constantesAdmision={},e},computed:{anioIng:function(){return 1===this.tipoMigracion?this.sie.ano-1:this.sie.ano}},methods:{updateGrid:function(){var e=this;return h()(T()().m(function n(){var a,r,t;return T()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getInputValue("formApp","INPUT_1");case 1:return a=n.v,n.n=2,e.getInputValue("formApp","ID_GRADO");case 2:r=n.v,t={anoadm:a},r>0&&(t.id_grado=r),e.modalSedes.selected.length>0&&(t.sedes=e.modalSedes.selected.map(function(e){return e.EMPCOD})),e.reloadGrid("formApp","GRID_1",t);case 3:return n.a(2)}},n)}))()},filtrarDatos:function(e,n,a){var r=this;return h()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:r.$nextTick(h()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,r.updateGrid();case 1:return e.a(2)}},e)})));case 1:return e.a(2)}},e)}))()},getGrados:function(e,n,a){var r=this;return h()(T()().m(function n(){return T()().w(function(n){while(1)switch(n.n){case 0:r.$nextTick(h()(T()().m(function n(){var t;return T()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,r.getApiAction("api/postulacionController/getGrados",{anio:e[a]});case 1:return t=n.v,n.n=2,r.setSelect({id:"ID_GRADO",value:"ID_GRADO",label:"ANIO_NIVEL_GRADO",data:t,item:{ID_GRADO:0,ANIO_NIVEL_GRADO:"Seleccione"},limpiar:!0,dataIsOptions:!0});case 2:return n.a(2)}},n)})));case 1:return n.a(2)}},n)}))()},verEstado:function(e,n,a){var r=this;return h()(T()().m(function n(){return T()().w(function(n){while(1)switch(n.n){case 0:e.titulo="Estado - "+e.NOMCOMP,r.rowModal=e,r.openModalEstado=!0;case 1:return n.a(2)}},n)}))()},validarFamiliasHomonimas:function(){var e=this;return h()(T()().m(function n(){var a,r,t,A,o,s;return T()().w(function(n){while(1)switch(n.n){case 0:return a=!1,r=e.postulantesRegistrar.map(function(e){return p()({},e)}),t=e.postulantesRegistrar.map(function(e){var n=e.ID_PERFAM,a=e.FAMCOD,r=e.NOMBRE_FAMILIA,t=e.ID_PERSONA,A=e.NOMCOMP,o=e.ES_FAMILIA_HOMONIMA;return{ID_PERFAM:n,FAMCOD:a,NOMBRE_FAMILIA:r,ID_PERSONA:t,NOMCOMP:A,ES_FAMILIA_HOMONIMA:o}}),n.n=1,e.getApiAction("api/postulacionController/getFamiliasHomonimas",{postulantes:t,transfAdicFamAcademico:e.transfAdicFamAcademico});case 1:A=n.v,o=T()().m(function e(n){var a;return T()().w(function(e){while(1)switch(e.n){case 0:a=A.find(function(e){return e.ID_PERSONA===r[n].ID_PERSONA}),a&&(r[n].ES_FAMILIA_HOMONIMA=a.ES_FAMILIA_HOMONIMA,r[n].INFO_ADMISION=a.INFO_ADMISION,r[n].INFO_ACADEMICO=a.INFO_ACADEMICO);case 1:return e.a(2)}},e)}),s=0;case 2:if(!(s<r.length)){n.n=4;break}return n.d(S()(o(s)),3);case 3:s++,n.n=2;break;case 4:e.famcods=[],e.postulantesRegistrar=r,e.postulantesRegistrar.forEach(function(n,r){n.ES_FAMILIA_HOMONIMA&&(e.postulantesRegistrar[r].FAMCOD=e.famcodValidad,e.postulantesRegistrar[r].opciones=[{label:"Seleccione",value:e.famcodValidad},{label:"No es la misma familia, agregarla como nueva",value:""},{label:"SI es la misma familia, agregar el(la) interesado(a) a esta familia en académico",value:n.INFO_ACADEMICO.FAMCOD}],a=!0)}),a?e.openModal=!0:e.procesarRegistro();case 5:return n.a(2)}},n)}))()},confirmarFamcod:function(e,n){var a=this;return h()(T()().m(function r(){return T()().w(function(r){while(1)switch(r.n){case 0:a.postulantesRegistrar[e].FAMCOD=n;case 1:return r.a(2)}},r)}))()},flagSN:function(e){var n=null;switch(e){case 1:n="S";break;case 0:n="N";break}return n},cortarCaracteres:function(e,n,a){return e&&(e=e.substring(n,a)),e},setDatosAdicionalesFamilia:function(e,n){var a=this;if(n&&n.length>0){var r,t;n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).forEach(function(n){var A=n.split(":").map(function(e){return e.trim()}),o=_()(A,2),s=o[0],i=o[1];switch(r=s,a.sie.colcod){case"0253":switch(s){case"TIPO_FAMILIA":r="FAMTIPO";break;case"NOMBRE_GARANTE":r="RESPNOM";break;case"CIP_CIF":r="RESPNSA";break;case"GRADO":r="RESPCAR";break;case"SITUACION_MILITAR":r="SITMIL";break;case"DEFENSA_PATRIA":r="DEFPAT";break;case"RESOLUCION":r="RESNUM";break;case"FECHA_RESOLUCION":r="RESFEC";break;case"RETIRO":r="TIESER";break;case"FECHA_DISPONIBILIDAD":r="DISFECINI";break;case"FECHA_DISPONIBILIDAD_2":r="DISFECFIN";break}break}if(["RESFEC","DISFECINI","DISFECFIN"].includes(r)&&i&&i.toString().length>0){var c=i.split("/"),I=_()(c,3),O=I[0],D=I[1],l=I[2];t=new Date(l,D-1,O),i=a.formatMoment(t,"YYYY-MM-DD")}if(["DEFPAT"].includes(r)&&i&&i.toString().length>0)switch(parseInt(i)){case 1:i="S";break;case 0:i="N";break}e[r]=i})}switch(this.sie.colcod){case"0253":if(e.FAMRESP&&e.FAMRESP.length>0)switch(e.FAMRESP){case"P":e.PADCODINT=e.RESPNSA||"",e.PADCAR=e.RESPCAR||"";break;case"M":e.MADCODINT=e.RESPNSA||"",e.MADCAR=e.RESPCAR||"";break;case"A":e.APOCODINT=e.RESPNSA||"",e.APOCAR=e.RESPCAR||"";break}break}return e},procesarRegistro:function(){var e=this;return h()(T()().m(function n(){var a,r,t,A,o,s;return T()().w(function(n){while(1)switch(n.n){case 0:if(a=[],r={},t="",e.postulantesRegistrar.forEach(function(n,s){A=n.FAMVIVE&&n.FAMVIVE.length>0&&n.FAMRESP&&n.FAMRESP.length>0,A||(t+=n.NOMCOMP+", "),r.hasOwnProperty(n.ID_GRADO)||(r[n.ID_GRADO]={descripcion:n.SALON_POSTULACION,total:0}),r[n.ID_GRADO].total++,o={ID_ESTADO_INGRESANTE_ADMISION:e.idEstadoIngresante,ID_ESTADO_ADMITIDO:e.idEstadoAdmitido,ID_FLUJO_FINALIZADO:e.idFlujoFinalizado,ID_PERFAM:n.ID_PERFAM,ID_PERSONA:n.ID_PERSONA,ID_FICHA:n.ID_FICHA,FAMCOD:n.FAMCOD,COMUNIDAD:n.COMUNIDAD||"",USUCOD:n.USUCOD,FAMDES:e.cortarCaracteres(n.NOMBRE_FAMILIA,0,50),ESTADO:"P",DOCIDECOD:n.ABREVIATURA_DOCUMENTO,DOCIDENRO:n.NUMERO_DOCUMENTO,ALUCOD:n.ALUCOD||"",APEPAT:n.APELLIDO_PATERNO,APEMAT:n.APELLIDO_MATERNO,NOMBRES:n.NOMBRE_PERSONA,NOMBRE_COMPLETO_POSTULANTE:n.NOMCOMP,ANOING:n.ANOADM,INSTRUCOD:n.INSTRUCODR,GRADOCOD:n.GRADOCODR,INSTRUCOD_ADMISION:n.INSTRUCOD,GRADOCOD_ADMISION:n.GRADOCOD,SECCIONCOD:e.seccionAlumno(n),SEXO:n.SEXO_PERSONA,FECNAC:n.FECHA_NACIMIENTO,NACIONCOD:n.NACIONALIDAD,NACUBICOD:n.UBIGEONAC_FAM,LUGNAC:e.cortarCaracteres(n.LUGNAC_FAM,0,50),EMPCOD:e.sie.manejaSedes?n.EMPCOD:null,ALUCODUSE:"",ALUCODANT:"",FAMRESP:n.FAMRESP?n.FAMRESP.substring(0,1):"",FAMVIVE:n.FAMVIVE,POSICION_FAMILIAR:n.POSICION_FAMILIAR||"",FAMDIR:e.cortarCaracteres(n.DIR_FAMRESP,0,120),UBGCOD:n.UBIGEODIR_FAMRESP,FAMZON:e.cortarCaracteres(n.URBANIZACION_RESP,0,50),FAMDIRREF:e.cortarCaracteres(n.REFERENCIADIR_RESP,0,100),BAUTIZO:e.flagSN(n.BAUTIZO),RELIGION:n.RELIGION,PADAPEPAT:n.INFO_ADMISION.PADRE.PADAPEPAT,PADAPEMAT:n.INFO_ADMISION.PADRE.PADAPEMAT,PADNOMBRE:n.INFO_ADMISION.PADRE.PADNOMBRE,PADTIPDOC:n.INFO_ADMISION.PADRE.PADTIPDOC,PADDOC:n.INFO_ADMISION.PADRE.PADDOC,PADNAC:n.INFO_ADMISION.PADRE.PADNAC,PADMAIL:n.INFO_ADMISION.PADRE.PADMAIL,PADTEL:n.INFO_ADMISION.PADRE.PADTEL?n.INFO_ADMISION.PADRE.PADTEL.replace(/\s+/g,"").substring(0,20):"",PADTEL2:n.INFO_ADMISION.PADRE.PADTEL2?n.INFO_ADMISION.PADRE.PADTEL2.replace(/\s+/g,"").substring(0,20):"",PADDIR:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADDIR,0,120),PADUBICOD:n.INFO_ADMISION.PADRE.PADUBICOD,PADURB:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADURB,0,60),PADDIRREF:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADDIRREF,0,100),PADNACUBICOD:n.INFO_ADMISION.PADRE.PADNACUBICOD,PADLUGNA:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADLUGNA,0,50),PADESTCIV:n.INFO_ADMISION.PADRE.PADESTCIV,PADGRAINS:n.INFO_ADMISION.PADRE.PADGRAINS,PADTRA:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADTRA,0,80),PADCAR:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADCAR,0,60),PADFECNAC:n.INFO_ADMISION.PADRE.PADFECNAC,PADEXA:1===parseInt(n.INFO_ADMISION.PADRE.PADEXA)?"S":"N",PADPROM:n.INFO_ADMISION.PADRE.PADPROM,PADTRADIR:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADTRADIR,0,120),PADTRATEL:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADTRATEL,0,20),PADPRO:e.cortarCaracteres(n.INFO_ADMISION.PADRE.PADPRO,0,60),MADAPEPAT:n.INFO_ADMISION.MADRE.MADAPEPAT,MADAPEMAT:n.INFO_ADMISION.MADRE.MADAPEMAT,MADNOMBRE:n.INFO_ADMISION.MADRE.MADNOMBRE,MADTIPDOC:n.INFO_ADMISION.MADRE.MADTIPDOC,MADDOC:n.INFO_ADMISION.MADRE.MADDOC,MADNAC:n.INFO_ADMISION.MADRE.MADNAC,MADMAIL:n.INFO_ADMISION.MADRE.MADMAIL,MADTEL:n.INFO_ADMISION.MADRE.MADTEL?n.INFO_ADMISION.MADRE.MADTEL.replace(/\s+/g,"").substring(0,20):"",MADTEL2:n.INFO_ADMISION.MADRE.MADTEL2?n.INFO_ADMISION.MADRE.MADTEL2.replace(/\s+/g,"").substring(0,20):"",MADDIR:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADDIR,0,120),MADUBICOD:n.INFO_ADMISION.MADRE.MADUBICOD,MADURB:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADURB,0,60),MADDIRREF:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADDIRREF,0,100),MADNACUBICOD:n.INFO_ADMISION.MADRE.MADNACUBICOD,MADLUGNA:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADLUGNA,0,50),MADESTCIV:n.INFO_ADMISION.MADRE.MADESTCIV,MADGRAINS:n.INFO_ADMISION.MADRE.MADGRAINS,MADTRA:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADTRA,0,80),MADCAR:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADCAR,0,60),MADFECNAC:n.INFO_ADMISION.MADRE.MADFECNAC,MADEXA:1===parseInt(n.INFO_ADMISION.MADRE.MADEXA)?"S":"N",MADPROM:n.INFO_ADMISION.MADRE.MADPROM,MADTRADIR:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADTRADIR,0,120),MADTRATEL:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADTRATEL,0,20),MADPRO:e.cortarCaracteres(n.INFO_ADMISION.MADRE.MADPRO,0,60),APOCOD:n.INFO_ADMISION.APODERADO.APOCOD,APOAPEPAT:n.INFO_ADMISION.APODERADO.APOAPEPAT,APOAPEMAT:n.INFO_ADMISION.APODERADO.APOAPEMAT,APONOMBRE:n.INFO_ADMISION.APODERADO.APONOMBRE,APOTIPDOC:n.INFO_ADMISION.APODERADO.APOTIPDOC,APODOC:n.INFO_ADMISION.APODERADO.APODOC,APONAC:n.INFO_ADMISION.APODERADO.APONAC,APOMAIL:n.INFO_ADMISION.APODERADO.APOMAIL,APOTEL:n.INFO_ADMISION.APODERADO.APOTEL?n.INFO_ADMISION.APODERADO.APOTEL.replace(/\s+/g,"").substring(0,20):"",APOTEL2:n.INFO_ADMISION.APODERADO.APOTEL2?n.INFO_ADMISION.APODERADO.APOTEL2.replace(/\s+/g,"").substring(0,20):"",APODIR:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APODIR,0,120),APOUBICOD:n.INFO_ADMISION.APODERADO.APOUBICOD,APOURB:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APOURB,0,60),APODIRREF:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APODIRREF,0,100),APONACUBICOD:n.INFO_ADMISION.APODERADO.APONACUBICOD,APOLUGNA:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APOLUGNA,0,50),APOESTCIV:n.INFO_ADMISION.APODERADO.APOESTCIV,APOGRAINS:n.INFO_ADMISION.APODERADO.APOGRAINS,APOTRA:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APOTRA,0,80),APOCAR:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APOCAR,0,60),APOFECNAC:n.INFO_ADMISION.APODERADO.APOFECNAC,APOEXA:1===parseInt(n.INFO_ADMISION.APODERADO.APOEXA)?"S":"N",APOPROM:n.INFO_ADMISION.APODERADO.APOPROM,APOTRADIR:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APOTRADIR,0,120),APOTRATEL:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APOTRATEL,0,20),APOPRO:e.cortarCaracteres(n.INFO_ADMISION.APODERADO.APOPRO,0,60),APOSEXO:n.INFO_ADMISION.APODERADO.APOSEXO},e.transfAdicFamAcademico&&(o=e.setDatosAdicionalesFamilia(o,n.INFO_ADMISION.RESPUESTAS_FAMILIA)),a.push(o)}),!(t.length>0)){n.n=1;break}return e.$notify("Existen postulantes que no tienen definido el responsable de pago y/o con quién vive: "+t.substring(0,t.length-2),"warning"),n.a(2,!1);case 1:if(s=a.filter(function(e){return 0===e.SECCIONCOD.length}).map(function(e){return e.NOMBRE_COMPLETO_POSTULANTE+", "}).toString(),!(s.length>0)){n.n=2;break}return e.$notify("Existen postulantes que no tienen definida la sección: "+s.substring(0,s.length-2),"warning"),n.a(2,!1);case 2:k.$http.post("api/postulacionController/validarAforosGradosAdmision",{grados:r}).then(function(n){(0,v.confirm)("¿Está seguro de registrar los postulantes en el módulo académico?","add").onOk(h()(T()().m(function r(){var t,A,o,s,i,c,I,O;return T()().w(function(r){while(1)switch(r.p=r.n){case 0:if(r.p=0,t=a.map(function(e){return e.ID_PERSONA}),!e.regCuotaIngreso){r.n=1;break}return r.n=1,e.regCuotaIngresoPostulacion(t);case 1:return A=n.ALUCOD_DNI,e.openModal=!1,e.openModalRegistro=!0,e.objResponse={informe:"",errores:[],infoLog:[]},e.textoProgreso="Cargando..",r.n=2,(0,k.stream)("api/HyoMigracion/migrarFamiliaEstudianteP",{method:"POST",data:{data:a,tipo:e.tipoMigracion,anioIng:a[0].ANOING,alucodDni:A,constantes:e.constantesAdmision}},function(n){n&&"fila"in n?e.textoProgreso="Procesando fila: ".concat(n.fila," de ").concat(e.postulantesRegistrar.length):n&&"progreso"in n&&(e.textoProgreso=n.progreso)});case 2:return o=r.v,s=o.find(function(e){return"respuesta"in e}).respuesta,e.objResponse={informe:s.informe,errores:s.errores,infoLog:s.infoLog},e.$notify("Proceso Finalizado"),r.n=3,e.getInputValue("formApp","ID_GRADO");case 3:return i=r.v,c=i>0?{id_grado:i}:{},e.reloadGrid("formApp","GRID_1",c),r.n=4,e.regFotosAdmisionAcademicoAct(t);case 4:if(I=e.notificaTransferencia||e.transferirDocsIntranet,!I){r.n=5;break}return r.n=5,e.postTransferenciaAcademico(s.controlAdmision);case 5:r.n=7;break;case 6:r.p=6,O=r.v,e.$notify(O.message,"error");case 7:e.textoProgreso="";case 8:return r.a(2)}},r,null,[[0,6]])})))}).catch(function(n){e.$notify(n.error.message,"warning")});case 3:return n.a(2)}},n)}))()},confirmarFamiliasHomonimas:function(){var e=this;return h()(T()().m(function n(){var a;return T()().w(function(n){while(1)switch(n.n){case 0:a=!0,e.postulantesRegistrar.forEach(function(n,r){n.ES_FAMILIA_HOMONIMA&&n.FAMCOD===e.famcodValidad&&(a=!1)}),a?e.procesarRegistro():e.$notify("Debe confirmar cada uno de los registros","warning");case 1:return n.a(2)}},n)}))()},seccionAlumno:function(e){var n="A";return(this.editaSeccion||this.sie.manejaSedes)&&(n=Object.prototype.hasOwnProperty.call(e,"SECCIONCOD")&&e.SECCIONCOD.length>0?e.SECCIONCOD:""),n},registrar:function(e){var n=this;return h()(T()().m(function e(){var a,r;return T()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.$refs["formApp"].$refs["GRID_1"].selected;case 1:if(n.postulantesRegistrar=e.v,!(n.postulantesRegistrar.length>0)){e.n=3;break}if(a=[],r=!0,n.postulantesRegistrar.forEach(function(e,t){a.indexOf(e.NOMBRE_FAMILIA)<0?a.push(e.NOMBRE_FAMILIA):(n.$notify("La familia "+e.NOMBRE_FAMILIA+" se encuentra seleccionada más de una vez. Por favor procese una primero y luego la otra.","warning"),r=!1)}),!r){e.n=2;break}return e.n=2,n.validarFamiliasHomonimas();case 2:e.n=4;break;case 3:n.$notify("Debe seleccionar al menos un(1) registro","warning");case 4:return e.a(2)}},e)}))()},regFotosAdmisionAcademicoAct:function(e){var n=arguments,a=this;return h()(T()().m(function r(){var t;return T()().w(function(r){while(1)switch(r.n){case 0:t=n.length>1&&void 0!==n[1]&&n[1],k.$http.post("api/postulacionController/regFotosAdmisionAcademico",{personas:e}).then(function(){var e=h()(T()().m(function e(n){return T()().w(function(e){while(1)switch(e.n){case 0:t&&a.$notify(n.message,"success");case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){a.$notify(e.error.message,"warning")});case 1:return r.a(2)}},r)}))()},postTransferenciaAcademico:function(e){var n=this;return h()(T()().m(function a(){var r;return T()().w(function(a){while(1)switch(a.n){case 0:r={rows:e,notificaTransferencia:n.notificaTransferencia,transferirDocsIntranet:n.transferirDocsIntranet},k.$http.post("api/postulacionController/postTransferenciaAcademico",{params:r}).then(function(){var e=h()(T()().m(function e(n){return T()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){n.$notify(e.error.message,"warning")});case 1:return a.a(2)}},a)}))()},regCuotaIngresoPostulacion:function(e){var n=this;return h()(T()().m(function a(){var r,t,A,o,s,i,c,I,O;return T()().w(function(a){while(1)switch(a.p=a.n){case 0:a.p=0,r=f()(e),a.p=1,r.s();case 2:if((t=r.n()).done){a.n=5;break}return A=t.value,o={params:{where:{ID_PERFIL:V["default"].PERFIL_POSTULANTE,ID_PERSONA:A,ID_TIPOCOBRO:V["default"].ID_TIPO_COBRO.PAGO_POST_ADMISION,ACTIVO:1},notFraccionados:!0}},a.n=3,k.$http.get("api/PostulacionController/getDeudasPostulantes",{params:o});case 3:if(s=a.v,!(s.length>0)){a.n=4;break}if(i=s.filter(function(e){return 0===e.MONTOPEN&&"C"!==e.ESTCOB}),!(i.length>0)){a.n=4;break}return c=i.map(function(e){return e.ID_DEUDA}),a.n=4,k.$http.post("api/PostulacionController/regCuotaIngresoPostulacion",{params:{idsDeudas:c}});case 4:a.n=2;break;case 5:a.n=7;break;case 6:a.p=6,O=a.v,r.e(O);case 7:return a.p=7,r.f(),a.f(7);case 8:a.n=10;break;case 9:a.p=9,a.v,I="Hubo un error al regularizar las deudas del postulante.",n.$notify(I,"warning");case 10:return a.a(2)}},a,null,[[1,6,7,8],[0,9]])}))()},regFotosAdmisionAcademico:function(e){var n=this;return h()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:(0,v.confirm)("¿Está seguro de transferir las fotos de Admisión al módulo Académico?","add").onOk(h()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.regFotosAdmisionAcademicoAct([],!0);case 1:return e.a(2)}},e)})));case 1:return e.a(2)}},e)}))()},cerrarModalRegistro:function(){var e=this;return h()(T()().m(function n(){return T()().w(function(n){while(1)switch(n.n){case 0:e.openModalRegistro=!1;case 1:return n.a(2)}},n)}))()}},created:function(){var e=this;return h()(T()().m(function n(){var a,r,t,A;return T()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getConstantesAdmision(["AD_MANEJA_SEDES","AD_VALIDA_PAGO_TRANSFERENCIA","AD_EDITA_SECCION","AD_NOTIFICA_TRANSFERENCIA","AD_TRANSFIERE_DOC_INTRANET","AD_USUCOD_PREFIJO","AD_FAMCOD_ANOING","AD_ALUCOD_ANOING","AD_REG_CUOTA_INGRESO","AD_MAX_OPORTUNIDADES","AD_TRANSF_ADIC_FAM_ACADEMICO"]);case 1:return a=n.v,e.constantesAdmision=a,e.sie.manejaSedes=a.AD_MANEJA_SEDES,e.sie.validaPagoTransferencia=a.AD_VALIDA_PAGO_TRANSFERENCIA,e.editaSeccion=a.AD_EDITA_SECCION,e.notificaTransferencia=a.AD_NOTIFICA_TRANSFERENCIA,e.transferirDocsIntranet=a.AD_TRANSFIERE_DOC_INTRANET,e.regCuotaIngreso=a.AD_REG_CUOTA_INGRESO,e.addColOportunidades=a.AD_MAX_OPORTUNIDADES>1,e.transfAdicFamAcademico=a.AD_TRANSF_ADIC_FAM_ACADEMICO,r=[{id:"viewAdmRegAcademico",ref:"formApp"}],n.n=2,e.loadSchemas(r);case 2:return e.$nextTick(h()(T()().m(function n(){var a,r,t,A;return T()().w(function(n){while(1)switch(n.n){case 0:if(!e.sie.manejaSedes){n.n=1;break}return a={label:"Sedes",icon:"add_location",click:e.verSedes,params:{view:"viewFichasInscripcion"}},e.botonesForm=e.botonesForm.concat(a),n.n=1,e.addcolGrid({schema:"viewAdmRegAcademico",index:2,name:"EMPDES",label:"Sede",align:"left"});case 1:if(!e.editaSeccion){n.n=3;break}return n.n=2,e.getApiAction("api/utilitarioController/getSecciones",{});case 2:return r=n.v,t=r.filter(function(e){return"T"!==e.SECCIONCOD}),A={name:"SECCIONCOD",component:"select",label:"Seleccione",optionValue:"SECCIONCOD",optionLabel:"SECCIONDES",options:t},n.n=3,e.addcolGrid({schema:"viewAdmRegAcademico",index:2,name:"SECCIONCOD",label:"Sección",align:"left",posi:-1,editor:A});case 3:if(!e.addColOportunidades){n.n=4;break}return n.n=4,e.addcolGrid({schema:"viewAdmRegAcademico",index:2,name:"NRO_OPORTUNIDAD",label:"#Oportunidad",align:"center",posi:-1});case 4:return n.a(2)}},n)}))),t=[],t.push({id:"estado",dto:"PostulacionDto",method:"getIdsAdmEstado",params:'{"codigos": ["INGRESANTE", "ADMITIDO"]}'}),t.push({id:"flujo",dto:"PostulacionDto",method:"getIdsFlujos",params:'{"codigos": ["FD_FINALIZADO"]}'}),n.n=3,e.getAllData(t);case 3:A=n.v,e.idEstadoAdmitido=A.estado.ADMITIDO,e.idEstadoIngresante=A.estado.INGRESANTE,e.idFlujoFinalizado=A.flujo.FD_FINALIZADO;case 4:return n.a(2)}},n)}))()}}),$=a(12807);const X=(0,$.A)(y,[["render",R]]);var j=X}}]);