"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[39822],{39822:function(a,o,t){t.r(o),t.d(o,{default:function(){return il}});var n=t(61758);function r(e,a){var o=(0,n.g2)("anios"),t=(0,n.g2)("moneda"),r=(0,n.g2)("banco"),l=(0,n.g2)("ctas-bancarias"),i=(0,n.g2)("servicio-banco"),s=(0,n.g2)("tipo-comprobante"),c=(0,n.g2)("categoria-concepto"),u=(0,n.g2)("empresa"),d=(0,n.g2)("local"),m=(0,n.g2)("talonarios"),C=(0,n.g2)("conceptos-cobros"),f=(0,n.g2)("becas"),p=(0,n.g2)("motivo-becas"),A=(0,n.g2)("medio-pagos"),h=(0,n.g2)("deposito-pos"),O=(0,n.g2)("categoria-cobro"),g=(0,n.g2)("talonesReferencia"),b=(0,n.g2)("puntosDeVenta"),E=(0,n.g2)("tiposDeCobranza"),D=(0,n.g2)("perfiles"),v=(0,n.g2)("referenciaPersona"),T=(0,n.g2)("documentoIdentidad"),w=(0,n.g2)("tablas");return(0,n.uX)(),(0,n.Wv)(w,{onOnClick:e.getSelected},{default:(0,n.k6)(function(){return["21"===e.id?((0,n.uX)(),(0,n.Wv)(o,{key:0})):"1"===e.id?((0,n.uX)(),(0,n.Wv)(t,{key:1})):"12"===e.id?((0,n.uX)(),(0,n.Wv)(r,{key:2})):"2"===e.id?((0,n.uX)(),(0,n.Wv)(l,{key:3})):"13"===e.id?((0,n.uX)(),(0,n.Wv)(i,{key:4})):"14"===e.id?((0,n.uX)(),(0,n.Wv)(s,{key:5})):"15"===e.id?((0,n.uX)(),(0,n.Wv)(c,{key:6})):"3"===e.id?((0,n.uX)(),(0,n.Wv)(u,{key:7})):"4"===e.id?((0,n.uX)(),(0,n.Wv)(d,{key:8})):"7"===e.id?((0,n.uX)(),(0,n.CE)(n.FK,{key:9},[(0,n.Q3)("areas(v-else-if=\"id === '5'\")"),(0,n.Q3)("cajas(v-else-if=\"id === '6'\")"),(0,n.bF)(m)],2112)):"8"===e.id?((0,n.uX)(),(0,n.Wv)(C,{key:10})):"9"===e.id?((0,n.uX)(),(0,n.Wv)(f,{key:11})):"10"===e.id?((0,n.uX)(),(0,n.Wv)(p,{key:12})):"11"===e.id?((0,n.uX)(),(0,n.Wv)(A,{key:13})):"16"===e.id?((0,n.uX)(),(0,n.Wv)(h,{key:14})):"17"===e.id?((0,n.uX)(),(0,n.Wv)(O,{key:15})):"18"===e.id?((0,n.uX)(),(0,n.Wv)(g,{key:16})):"19"===e.id?((0,n.uX)(),(0,n.Wv)(b,{key:17})):"20"===e.id?((0,n.uX)(),(0,n.Wv)(E,{key:18})):"22"===e.id?((0,n.uX)(),(0,n.Wv)(D,{key:19})):"23"===e.id?((0,n.uX)(),(0,n.Wv)(v,{key:20})):"24"===e.id?((0,n.uX)(),(0,n.Wv)(T,{key:21})):(0,n.Q3)("v-if",!0)]}),_:1},8,["onOnClick"])}var l=t(58790),i={class:"row items-center no-wrap"},s={class:"col"},c={class:"text-h6"},u={class:"row q-ma-xs q-col-gutter-sm"},d={class:"col-xs-12 col-md-2 col-lg-2"},m={class:"col-xs-12 col-md-10 col-lg-10",style:{padding:"0",margin:"0","padding-left":"0.5rem"}};function C(e,a){var o=(0,n.g2)("q-card-section"),t=(0,n.g2)("q-separator"),r=(0,n.g2)("sie-grid"),C=(0,n.g2)("formulario"),f=(0,n.g2)("sie-modal"),p=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(p,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[(0,n.Lk)("div",s,[(0,n.Lk)("div",c,(0,l.v_)(e.title),1)]),a[1]||(a[1]=(0,n.Lk)("div",{class:"col-auto"},[(0,n.Q3)('q-btn.q-mr-sm( v-if ="nivelAcceso >= 2 && visibleAdd" slot="right" icon="add" color="primary" label="Nuevo" size="sm" @click="addRow")'),(0,n.Q3)('q-btn.q-mr-sm( v-if ="nivelAcceso >= 2 && visibleSave" slot="right" icon="save" color="primary" label="Guardar" size="sm" @click="save")        ')],-1))])]}),_:1}),(0,n.bF)(t),(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.bF)(r,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 200px)"},columnDefs:e.columnTable,rowData:e.table,onRowClicked:e.rowClicked,onGridReady:e.onGridReady},null,8,["columnDefs","rowData","onRowClicked","onGridReady"])]),(0,n.Lk)("div",m,[(0,n.RG)(e.$slots,"default")])])]}),_:3}),(0,n.bF)(f,{title:e.title,modelValue:e.openModal,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.openModal=a}),onSubmit:e.submit},{default:(0,n.k6)(function(){return[(0,n.bF)(C,{ref:"form",schema:e.schema,modal:!0},null,8,["schema"])]}),_:1},8,["title","modelValue","onSubmit"])]}),_:3})}t(56285);var f=t(36408),p=t(26697),A=t(53093),h=t(43346),O=t(53811),g=t(10213),b=t(88567),E=t(95718),D=t(53380),v=t(57668),T=t(80660),w=t(19852),R=t(75053),N=t(26611),I={emits:["onClick"],components:{QCard:b.A,QCardSection:E.A,QSeparator:D.A,sieGrid:f.A,QTabs:p.A,QTab:A.A,QTabPanel:h.A,QTabPanels:O.A,formulario:w.A,sieModal:R.A},mixins:[N.A],data:function(){return{nivelAcceso:(0,v["default"])().ruta.nivel,openModal:!1,columnTable:null,columnDefs:null,api:null,tab:"tab1",title:"Mantenimiento Tablas",tabla:"",schema:[],modalName:null,visibleAdd:!1,visibleSave:!1,gridTablas:{moneda:{acceso:0},empresa:{acceso:1,save:"saveEmpresa"},banco:{acceso:0},tipoComprobante:{acceso:0},servicioBanco:{acceso:0},categoriaConcepto:{acceso:0},localEmpresa:{acceso:3,form:9},talonario:{acceso:3,form:13,submit:"submitTalonario",save:"saveTalonario"},ctaBanco:{acceso:3,form:7,submit:"submitCtaBanco",save:"saveCtaBanco"},concepto:{acceso:3,form:14,submit:"submitConcepto",save:"saveConcepto"},beca:{acceso:3,form:15},motivoBeca:{acceso:3,form:16,submit:"submitMotivoBeca",save:"saveMotivoBeca"},medioPago:{acceso:3,form:4,submit:"submitMedioPago",save:"saveMedioPago"},depositoPos:{acceso:3,form:79,submit:"submitDepositoPos",save:"saveDepositoPos"},categoriaCobro:{acceso:3,form:88,submit:"submitCategoriaCobro",save:"saveCategoriaCobro"},puntosDeVenta:{acceso:0},talonesReferencia:{acceso:0},tiposDeCobranza:{acceso:0}}}},methods:{onGridReady:function(e){this.api=e.api},save:function(){var e=this.gridTablas[this.tabla];"saveArea"===e.save?this.$refs.vGrid.children[0].__vue__.saveArea():"saveEmpresa"===e.save?this.$refs.vGrid.children[0].__vue__.saveEmpresa():"saveCtaBanco"===e.save?this.$refs.vGrid.children[0].__vue__.saveCtaBanco():"saveCaja"===e.save?this.$refs.vGrid.children[0].__vue__.saveCaja():"saveLocal"===e.save?this.$refs.vGrid.children[0].__vue__.saveLocal():"saveTalonario"===e.save?this.$refs.vGrid.children[0].__vue__.saveTalonario():"saveBeca"===e.save?this.$refs.vGrid.children[0].__vue__.saveBeca():"saveConcepto"===e.save?this.$refs.vGrid.children[0].__vue__.saveConcepto():"saveMotivoBeca"===e.save?this.$refs.vGrid.children[0].__vue__.saveMotivoBeca():"saveMedioPago"===e.save?this.$refs.vGrid.children[0].__vue__.saveMedioPago():"saveDepositoPos"===e.save?this.$refs.vGrid.children[0].__vue__.saveDepositoPos():"saveCategoriaCobro"===e.save?this.$refs.vGrid.children[0].__vue__.saveCategoriaCobro():"savePuntosDeVenta"===e.save?this.$refs.vGrid.children[0].__vue__.savePuntosDeVenta():(0,g.alert)("Tabla no configurada","info")},submit:function(){var e=this.gridTablas[this.tabla];"submitArea"===e.submit?this.submitArea():"submitCtaBanco"===e.submit?this.submitCtaBanco():"submitCaja"===e.submit?this.submitCaja():"submitLocal"===e.submit?this.submitLocal():"submitTalonario"===e.submit?this.submitTalonario():"submitConcepto"===e.submit?this.submitConcepto():"submitBeca"===e.submit?this.submitBeca():"submitMotivoBeca"===e.submit?this.submitMotivoBeca():"submitMedioPago"===e.submit?this.submitMedioPago():"submitDepositoPos"===e.submit?this.submitDepositoPos():"submitCategoriaCobro"===e.submit?this.submitCategoriaCobro():"submitPuntosDeVenta"===e.submit&&this.submitPuntosDeVenta()},addRow:function(){var e=this;this.modalName===this.tabla?this.openModal=!0:T.$http.get("api/formularioController/getFormulario",{params:{id:this.gridTablas[this.tabla].form}}).then(function(a){e.title=a.nombre,e.schema=a.data}).then(function(a){e.openModal=!0})},rowClicked:function(e){this.tabla=e.data.table,this.title="Mantenimiento Tablas / "+e.data.name,this.visibleAdd=!1,this.visibleSave=!1;this.gridTablas[e.data.table];this.visibleSave=!0,this.visibleAdd=!0,this.$emit("onClick",e)}},beforeMount:function(){this.columnTable=[{headerName:"Tablas",field:"name"}],this.table=[{id:"3",name:"Empresa",table:"empresa"},{id:"4",name:"Locales",table:"localEmpresa"},{id:"19",name:"Puntos de Venta",table:"puntosdeventa"},{id:"18",name:"Talonarios de Referencia",table:"talonesReferencia"},{id:"24",name:"Documentos de Identidad",table:"tipo_documento_identidad"},{id:"14",name:"Tipos de Comprobantes",table:"tipoComprobante"},{id:"22",name:"Perfiles",table:"perfilTipo"},{id:"23",name:"Referencia Persona",table:"referenciaPersona"},{id:"7",name:"Talonarios",table:"talonario"},{id:"1",name:"Monedas",table:"moneda"},{id:"12",name:"Bancos",table:"banco"},{id:"2",name:"Cuentas Bancarias",table:"ctaBanco"},{id:"13",name:"Servicios Bancarios",table:"servicioBanco"},{id:"15",name:"Grupo de Conceptos",table:"categoriaConcepto"},{id:"8",name:"Conceptos de Cobro",table:"concepto"},{id:"9",name:"Becas",table:"beca"},{id:"10",name:"Motivos de Beca",table:"motivoBeca"},{id:"11",name:"Medio de Pago",table:"medioPago"},{id:"17",name:"Categorias de Cobro",table:"categoriaCobro"},{id:"20",name:"Tipos de Cobranza",table:"tiposdecobraza"},{id:"21",name:"Periodos (Años)",table:"Años"}]}},_=t(12807);const V=(0,_.A)(I,[["render",C]]);var L=V;function S(e,a){var o=(0,n.g2)("sie-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[0]||(a[0]=(0,n.Lk)("div",{class:"row q-mt-sm"},[(0,n.Q3)('.col.headerTable//- q-btn.q-ma-xs(size="sm" icon="save" color="primary" @click="save" flat)  Guardar\n//- q-btn.q-ma-xs(size="sm" icon="add" color="primary" @click="addRow" flat)  Agregar\n//- q-btn.q-ma-xs(size="sm" icon="delete" color="primary" @click="deleteRows" flat)  Eliminar')],-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 200px)"}},null,8,["columnDefs","rowData","onGridReady","frameworkComponents"])])}var M=t(76080),P=t.n(M),k=t(45254),B=t.n(k),U=t(78840),x=t(41615),F={components:{sieGrid:f.A},data:function(){return{columnDefs:null,rowData:null,api:null,frameworkComponents:null,nivelAcceso:(0,v["default"])().ruta.nivel}},methods:{getMonedas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/cobroController/getMoneda",{params:{parametros:{}}});case 1:e.rowData=a.v;case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api},actualizarMoneda:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:a.$confirm("¿Esta seguro de actualizar la Moneda?").onOk(B()(P()().m(function o(){var t,n,r,l,i,s;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,t=e.data,n=t.MONCONTA,r=t.MONCOD,l={MONCONTA:n,MONCOD:r},o.n=1,T.$http.post("api/cobroController/postActualizarMoneda",{datos:l});case 1:i=o.v,a.$alert(i.message,"success"),a.getMonedas(),o.n=3;break;case 2:o.p=2,s=o.v,a.$alert(s.error.message,"delete");case 3:return o.a(2)}},o,null,[[0,2]])})));case 1:return o.a(2)}},o)}))()}},beforeMount:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.frameworkComponents={actionButton:U.A},e.columnDefs=[{headerName:"Código",field:"MONCOD",width:90},{headerName:"Nombre",field:"MONNOM",width:160},{headerName:"Símbolo",field:"MONSIG",width:80},{headerName:"ISO",field:"MONISO",width:80},{headerName:"Contabilidad",field:"MONCONTA",editable:!0,width:130},{cellRenderer:U.A,width:40,cellRendererParams:{icon:"save",title:"Actualizar",onClick:e.actualizarMoneda},hide:e.nivelAcceso<x["default"].LECTURA_ESCRITURA}],e.getMonedas();case 1:return a.a(2)}},a)}))()}};const G=(0,_.A)(F,[["render",S]]);var y=G;function $(e,a){var o=(0,n.g2)("sie-grid"),t=(0,n.g2)("footer-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[1]||(a[1]=(0,n.Lk)("div",{class:"row q-mt-sm"},null,-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,style:{height:"calc(100vh - 231px)"}},null,8,["columnDefs","rowData","onGridReady"]),(0,n.bF)(t,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getBancos,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])])}var q=t(27560),X={components:{sieGrid:f.A,footerGrid:q.A},data:function(){return{columnDefs:null,rowData:null,pagina:1,pages:1}},methods:{onGridReady:function(e){this.api=e.api},getBancos:function(){var e=this;T.$http.get("api/bancoController/getBancos").then(function(a){e.rowData=a})}},beforeMount:function(){this.columnDefs=[{headerName:"Código",field:"BANCOD",width:80},{headerName:"Banco",field:"DESCRIPCION",width:500},{headerName:"Abreviatura",field:"ABREVIATURA",width:150}],this.getBancos()}};const z=(0,_.A)(X,[["render",$]]);var Q=z,J=t(8445),j=t.n(J),H={class:"row q-mt-sm"},W={class:"col headerTable"},K={class:"text-h6"},Z={key:0,class:"row q-ma-xs q-col-gutter-sm"},Y={class:"col-xs-6"},ee={class:"col-xs-6"},ae={class:"col-xs-12"},oe={class:"col-xs-6"},te={class:"col-xs-6"},ne={class:"col-xs-12"},re={class:"col-xs-12"},le={class:"col-xs-6"},ie={class:"col-xs-6"},se={class:"col-xs-6"},ce={class:"col-xs-6"},ue={key:1,class:"row q-ma-xs q-col-gutter-sm"},de={class:"col-xs-12"},me={class:"col-xs-6"},Ce={class:"col-xs-6"},fe={class:"col-xs-12"};function pe(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-card-section"),s=(0,n.g2)("q-tab"),c=(0,n.g2)("q-tabs"),u=(0,n.g2)("q-input"),d=(0,n.g2)("q-select"),m=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",H,[(0,n.Lk)("div",W,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,n.k6)(function(){return j()(a[18]||(a[18]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 265px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,defaultColDef:e.defaultColDef},null,8,["columnDefs","rowData","onGridReady","frameworkComponents","defaultColDef"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getCtaBancarias,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,n.bF)(m,{tittle:"",modelValue:e.openModal,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.openModal=a}),onSubmit:e.save},{default:(0,n.k6)(function(){return[(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",K,(0,l.v_)(e.title)+": "+(0,l.v_)(e.form.CTACTE),1)]}),_:1}),(0,n.bF)(c,{modelValue:e.tabActivo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.tabActivo=a})},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{name:e.tabsKeys.index},{default:(0,n.k6)(function(){return j()(a[19]||(a[19]=[(0,n.eW)("Datos",-1)]))}),_:1},8,["name"]),(0,n.bF)(s,{name:e.tabsKeys.config},{default:(0,n.k6)(function(){return j()(a[20]||(a[20]=[(0,n.eW)("Contabilidad",-1)]))}),_:1},8,["name"])]}),_:1},8,["modelValue"]),(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[e.tabActivo===e.tabsKeys.index?((0,n.uX)(),(0,n.CE)("div",Z,[(0,n.Lk)("div",Y,[(0,n.bF)(u,{modelValue:e.form.NUMCTA,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.form.NUMCTA=a}),label:"Código Cuenta Bancaria",placeholder:"Ingrese código de la cuenta",maxlength:"2",readonly:e.disabledNumcta},null,8,["modelValue","readonly"])]),(0,n.Lk)("div",ee,[(0,n.bF)(d,{modelValue:e.form.MONCOD,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.form.MONCOD=a}),label:"Moneda",placeholder:"Seleccione la moneda","option-value":"value","option-label":"label",options:e.comboMoneda},null,8,["modelValue","options"])]),(0,n.Lk)("div",ae,[(0,n.bF)(d,{modelValue:e.form.BANCOD,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.BANCOD=a}),label:"Banco",placeholder:"Seleccione el Banco","option-value":"BANCOD","option-label":"DESCRIPCION",options:e.comboBancos},null,8,["modelValue","options"])]),(0,n.Lk)("div",oe,[(0,n.bF)(d,{modelValue:e.form.TIPO,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.form.TIPO=a}),label:"Tipo de Cta.",placeholder:"Seleccione el típo de cuenta","option-value":"CLAVE","option-label":"VALOR",options:e.comboTipoCuenta},null,8,["modelValue","options"])]),(0,n.Lk)("div",te,[(0,n.bF)(u,{modelValue:e.form.CTACTE,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.form.CTACTE=a}),label:"Nro. Cuenta Corriente",placeholder:"Ingrese el número de cuenta"},null,8,["modelValue"])]),(0,n.Lk)("div",ne,[(0,n.bF)(d,{modelValue:e.form.EMPCOD,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.form.EMPCOD=a}),label:"Empresa",placeholder:"Seleccione Empresa","option-value":"EMPCOD","option-label":"RAZONSOCIAL",options:e.comboEmpresa},null,8,["modelValue","options"])]),(0,n.Lk)("div",re,[(0,n.bF)(d,{modelValue:e.form.ID_LOCAL,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.form.ID_LOCAL=a}),label:"Local",placeholder:"Seleccione Local","option-value":"ID_LOCAL","option-label":"NOMBRE",options:e.comboLocales},null,8,["modelValue","options"])]),(0,n.Lk)("div",le,[(0,n.bF)(u,{modelValue:e.form.ABRCTA,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.form.ABRCTA=a}),label:"Abreviatura",placeholder:"Ingrese la abreviatura"},null,8,["modelValue"])]),(0,n.Lk)("div",ie,[(0,n.bF)(u,{modelValue:e.form.CODANEXO,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.form.CODANEXO=a}),label:"Código Anexo",placeholder:"Ingrese el codigo de anexo"},null,8,["modelValue"])]),(0,n.Lk)("div",se,[(0,n.bF)(u,{modelValue:e.form.CODAREA,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.form.CODAREA=a}),label:"Código Area",placeholder:"Ingrese el codigo de area",maxlength:4},null,8,["modelValue"])]),(0,n.Lk)("div",ce,[(0,n.bF)(u,{modelValue:e.form.IMPORTE,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.form.IMPORTE=a}),label:"Importe Total",placeholder:"Ingrese el importe total de la cuenta"},null,8,["modelValue"])])])):(0,n.Q3)("v-if",!0),e.tabActivo===e.tabsKeys.config?((0,n.uX)(),(0,n.CE)("div",ue,[(0,n.Lk)("div",de,[(0,n.bF)(d,{options:e.cuentaContable,"option-value":"CODCTA","option-label":"CTA",label:"Cuenta Contable de Ingreso",modelValue:e.form.CODCTA,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.form.CODCTA=a})},null,8,["options","modelValue"])]),(0,n.Lk)("div",me,[(0,n.bF)(u,{modelValue:e.form.TIPDOC_CONTA,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.form.TIPDOC_CONTA=a}),label:"Código Tipo Documento contable",placeholder:"Ingrese el codigo de tipo de documento contable",maxlength:2},null,8,["modelValue"])]),(0,n.Lk)("div",Ce,[(0,n.bF)(u,{modelValue:e.form.NRODOC_CONTA,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.form.NRODOC_CONTA=a}),label:"Número Documento Contable",placeholder:"Ingrese el número de documento contable"},null,8,["modelValue"])]),(0,n.Lk)("div",fe,[(0,n.bF)(u,{modelValue:e.form.GLOSA_CONTA,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.form.GLOSA_CONTA=a}),label:"Glosa Contable",placeholder:"Ingrese cuenta contable"},null,8,["modelValue"])])])):(0,n.Q3)("v-if",!0)]}),_:1})]}),_:1},8,["modelValue","onSubmit"])])}var Ae=t(99550),he=t.n(Ae),Oe=(t(23825),t(11777),t(15547),t(83190),t(27153),t(44264),t(66307),t(24066),t(6123)),ge=t(64446),be=t(64208),Ee=t(54489),De=t(42037),ve={components:{sieGrid:f.A,sieModal:R.A,QInput:be.A,QSelect:Ee.S,formulario:w.A,footerGrid:q.A,QTab:A.A,QTabs:p.A,QBtn:Oe.Il},data:function(){return{nivelAcceso:(0,v["default"])().ruta.nivel,LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,columnDefs:null,rowData:null,api:null,frameworkComponents:null,openModal:!1,comboEmpresa:"",comboLocales:"",comboMoneda:"",comboBancos:"",comboTipoCuenta:"",empcod:"",moncod:"",bancod:"",tipo:"",title:"",flag:"save",schema:[],disabledNumcta:!1,defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0},ref:{inputBanco:"inputBanco",inputMoneda:"inputMoneda",inputImporte:"inputImporte",inputTipo:"inputTipo"},tabActivo:"index",tabsKeys:{index:"index",config:"config"},cuentaContable:[],pagina:1,pages:1,form:{NUMCTA:"",BANCOD:"",MONCOD:"",EMPCOD:"",CTACTE:"",CODCTA:"",ABRCTA:"",IMPORTE:0,TIPO:"",CODANEXO:"",CODAREA:"",TIPDOC_CONTA:"",NRODOC_CONTA:"",GLOSA_CONTA:""}}},methods:{addRow:function(){this.form.NUMCTA="",this.form.BANCOD="",this.form.MONCOD=x["default"].MONEDA_LOCAL,this.form.EMPCOD="001",this.form.ID_LOCAL=null,this.form.CTACTE="",this.form.CODCTA="",this.form.ABRCTA="",this.form.IMPORTE=0,this.form.CODAREA="",this.form.TIPO="02",this.form.TIPDOC_CONTA="",this.form.NRODOC_CONTA="",this.form.GLOSA_CONTA="",this.flag="save",this.openModal=!0,this.title="Agregar Cuenta Bancaria",this.disabledNumcta=!1},onGridReady:function(e){this.api=e.api,this.api.sizeColumnsToFit()},getCtaBancarias:function(){var e=this;T.$http.get("api/bancoController/getCuentasBancarias",{params:{parametros:{response:"list"}}}).then(function(a){e.rowData=a})},save:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:0===e.form.NUMCTA.length?e.$alert("Ingrese el código de la cuenta","warning"):0===e.form.BANCOD.length?e.$alert("Seleccione el Banco","warning"):0===e.form.MONCOD.length?e.$alert("Seleccione la moneda","warning"):0===e.form.EMPCOD.length?e.$alert("seleccione la empresa","warning"):0===e.form.CTACTE.length?e.$alert("Ingrese el número de cuenta","warning"):e.guardarCuentaBanco();case 1:return a.a(2)}},a)}))()},guardarCuentaBanco:function(){var e=this,a={numcta:this.form.NUMCTA,bancod:this.form.BANCOD,moncod:this.form.MONCOD,empcod:this.form.EMPCOD,id_local:this.form.ID_LOCAL,tipo:this.form.TIPO.toString(),ctacte:""===this.form.CTACTE?null:this.form.CTACTE,codcta:""===this.form.CODCTA?null:this.form.CODCTA,abrcta:""===this.form.ABRCTA?null:this.form.ABRCTA,importe:""===this.form.IMPORTE?0:this.form.IMPORTE,CODANEXO:this.form.CODANEXO,CODAREA:this.form.CODAREA,TIPDOC_CONTA:this.form.TIPDOC_CONTA,NRODOC_CONTA:this.form.NRODOC_CONTA,GLOSA_CONTA:this.form.GLOSA_CONTA};"save"===this.flag?this.$confirm("¿Estás seguro de registrar la cuenta bancaria?","save").onOk(B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,T.$http.post("api/bancoController/postCuentaBancaria",{datos:a}).then(function(a){e.getCtaBancarias(),e.$alert(a.message,"success"),e.openModal=!1}).catch(function(a){var o=a.error;e.$alert(o.message,"warning")});case 1:return o.a(2)}},o)}))):this.$confirm("¿Estás seguro de actualizar los datos?","info").onOk(B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,T.$http.put("api/bancoController/putCuentaBancaria",{datos:a}).then(function(a){e.getCtaBancarias(),e.$alert(a.message,"success"),e.openModal=!1}).catch(function(a){var o=a.error;e.$alert(o.message,"warning")});case 1:return o.a(2)}},o)})))}},beforeMount:function(){var e=this;return B()(P()().m(function a(){var o,t,n,r,l,i;return P()().w(function(a){while(1)switch(a.n){case 0:return e.frameworkComponents={agSelect:ge.A,actionButton:U.A},o=e,t=T.$http.get("api/empresaController/getEmpresas",{params:{parametros:{response:"combo"}}}),a.n=1,x["default"].API_MONEDAS();case 1:return n=a.v,r=T.$http.get("api/bancoController/getBancos"),l=T.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0003"}}}),i=T.$http.get("api/empresaController/getLocales"),Promise.all([t,n,r,l,i]).then(function(a){var t=he()(a,5),n=t[0],r=t[1],l=t[2],i=t[3],s=t[4];e.columnDefs=[{headerName:"Cod. Cta.",field:"NUMCTA",width:80},{headerName:"Banco",field:"BANCO",width:150},{headerName:"Nro. de la Cuenta",field:"CTACTE",width:200},{headerName:"Moneda",field:"MONEDA",width:70},{headerName:"Importe Total",field:"IMPORTE",valueFormatter:De.toFixed,cellClass:"text-right",width:120,hide:!0},{headerName:"Tipo de Cta.",field:"TIPO_CUENTA",width:200,hide:!0},{headerName:"Cta. Contable",field:"CODCTA",width:100,hide:!0},{headerName:"Empresa",field:"EMPRESA",width:210,hide:!0},{headerName:"Abreviatura",field:"ABRCTA",width:120,hide:!0},{headerName:"",hide:e.nivelAcceso<x["default"].LECTURA_ESCRITURA,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Editar",onClick:function(e){var a=e.data;o.openModal=!0,o.flag="edit",o.title="Editar Cuenta Bancaria",o.form.NUMCTA=a.NUMCTA,o.form.BANCOD=a.BANCOD,o.form.MONCOD=a.MONCOD,o.form.EMPCOD=a.EMPCOD,o.form.ID_LOCAL=a.ID_LOCAL,o.form.CTACTE=a.CTACTE,o.form.CODCTA=a.CODCTA,o.form.ABRCTA=a.ABRCTA,o.form.IMPORTE=Number(a.IMPORTE).toFixed(2),o.form.TIPO=a.TIPO.toString(),o.form.CODANEXO=a.CODANEXO,o.form.CODAREA=a.CODAREA,o.form.TIPDOC_CONTA=a.TIPDOC_CONTA,o.form.NRODOC_CONTA=a.NRODOC_CONTA,o.form.GLOSA_CONTA=a.GLOSA_CONTA,o.disabledNumcta=!0}},width:40},{headerName:"",hide:e.nivelAcceso<x["default"].ACCESO_TOTAL,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var a=this,t=[e.data];this.$confirm("¿Estás seguro de eliminar este registro?","delete").onOk(function(){T.$http.delete("api/bancoController/deleteCuentaBancaria",{params:{datos:{numcta:t[0].NUMCTA}}}).then(function(n){a.$alert(n.message,"success"),o.getCtaBancarias(),e.api.updateRowData({remove:t})}).catch(function(e){var o=e.error;a.$alert(o.message,"warning")})})}},width:40}],e.comboEmpresa=n,e.comboLocales=s,e.comboMoneda=r,e.comboBancos=l,e.comboTipoCuenta=i}),e.getCtaBancarias(),a.n=2,x["default"].API_CTAS_CONTABLES("10");case 2:e.cuentaContable=a.v;case 3:return a.a(2)}},a)}))()}};const Te=(0,_.A)(ve,[["render",pe]]);var we=Te,Re=(t(85472),t(45467),{class:"row q-mt-sm"}),Ne={class:"col headerTable"},Ie={class:"row q-ma-xs q-col-gutter-sm"},_e={class:"text-h6"},Ve={class:"row q-ma-xs q-col-gutter-sm"},Le={class:"col-xs-12"},Se={class:"col-xs-12"},Me={class:"col-xs-6"},Pe={class:"col-xs-6"},ke={class:"col-xs-12"},Be={key:0,class:"col-xs-12"},Ue={class:"col-xs-8"},xe={class:"col-xs-4"},Fe={class:"col-xs-6"},Ge={class:"col-xs-6"},ye={class:"col-xs-12"},$e={key:1,class:"col-xs-12"},qe={key:2,class:"col-xs-12"},Xe={key:3,class:"col-xs-12"};function ze(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-input"),s=(0,n.g2)("ubigeo"),c=(0,n.g2)("q-select"),u=(0,n.g2)("q-checkbox"),d=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Re,[(0,n.Lk)("div",Ne,[e.nivelAcceso>=2?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.abrirModalInsertar,flat:""},{default:(0,n.k6)(function(){return j()(a[16]||(a[16]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 267px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents,defaultColDef:e.defaultColDef},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","frameworkComponents","defaultColDef"])]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getEmpresas,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,n.bF)(d,{modelValue:e.openModal,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.openModal=a}),onSubmit:e.submit},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ie,[(0,n.Lk)("div",_e,(0,l.v_)(e.flat===e.flatKeys.ACTUALIZAR?"Actualizar":"Agregar")+" Empresa",1)]),(0,n.Lk)("div",Ve,[(0,n.Lk)("div",Le,[(0,n.bF)(i,{placeholder:"Ingrese Razon Social",label:"Razón Social",modelValue:e.datos.RAZONSOCIAL,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.datos.RAZONSOCIAL=a}),maxlength:e.ddl.RAZONSOCIAL},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Se,[(0,n.bF)(i,{placeholder:"Ingrese Nombre Comercial",label:"Nombre Comercial",modelValue:e.datos.COMERCIAL,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.datos.COMERCIAL=a}),maxlength:e.ddl.COMERCIAL},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Me,[(0,n.bF)(i,{placeholder:"Ingrese Ruc",label:"RUC",modelValue:e.datos.RUC,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.datos.RUC=a}),maxlength:e.ddl.RUC},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Pe,[(0,n.bF)(i,{placeholder:"Ingrese Teléfono",label:"Teléfono",modelValue:e.datos.TELEFONO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.datos.TELEFONO=a}),maxlength:e.ddl.TELEFONO},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",ke,[(0,n.bF)(i,{placeholder:"Ingrese Direccion",label:"Dirección",modelValue:e.datos.DIRECCION,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.datos.DIRECCION=a}),maxlength:e.ddl.DIRECCION},null,8,["modelValue","maxlength"])]),e.ubigeo_show?((0,n.uX)(),(0,n.CE)("div",Be,[(0,n.bF)(s,{ubigeo:e.datos.UBGCOD,modelValue:e.datos.UBGCOD,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.datos.UBGCOD=a})},null,8,["ubigeo","modelValue"])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",Ue,[(0,n.bF)(i,{placeholder:"Ingrese Cuenta Detracción",label:"Cuenta Bancaria Detracción",modelValue:e.datos.CTA_DETRACCION,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.datos.CTA_DETRACCION=a}),maxlength:e.ddl.CTA_DETRACCION},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",xe,[(0,n.bF)(i,{placeholder:"Ingrese Tasa Detracción",label:"Tasa (%) Detracción",modelValue:e.datos.PORCENTAJE_DETRACCION,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.datos.PORCENTAJE_DETRACCION=a}),maxlength:3},null,8,["modelValue"])]),(0,n.Lk)("div",Fe,[(0,n.bF)(i,{placeholder:"Ingrese Sistema Contable",label:"Sistema Contable",modelValue:e.datos.SISCONTA,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.datos.SISCONTA=a}),maxlength:e.ddl.SISCONTA},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Ge,[(0,n.bF)(i,{placeholder:"Ingrese Código de Área",label:"Código de Área",modelValue:e.datos.CODCONTA,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.datos.CODCONTA=a}),maxlength:e.ddl.CODCONTA},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",ye,[(0,n.bF)(c,{label:"Emisión en Lote por Defecto",modelValue:e.datos.EMISION_FILTRO,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.datos.EMISION_FILTRO=a}),options:e.tipoEmision,"option-label":"label","option-value":"value"},null,8,["modelValue","options"])]),e.admin?((0,n.uX)(),(0,n.CE)("div",$e,[(0,n.bF)(u,{class:"chk-h-sm",label:"Principal Contribuyente (PRICO)","true-value":1,"false-value":0,modelValue:e.datos.PRICO,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.datos.PRICO=a})},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.admin?((0,n.uX)(),(0,n.CE)("div",qe,[(0,n.bF)(u,{class:"chk-h-sm",label:"Exonerado a IGV","true-value":1,"false-value":0,modelValue:e.datos.EXONERADO_IGV,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.datos.EXONERADO_IGV=a})},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0),e.admin?((0,n.uX)(),(0,n.CE)("div",Xe,[(0,n.bF)(u,{class:"chk-h-sm",label:"Activo","true-value":1,"false-value":0,modelValue:e.datos.ACTIVO,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.datos.ACTIVO=a})},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"])])}t(12563),t(30683);var Qe=t(75177),Je=t(55117),je=["checked"];function He(e,a){return(0,n.uX)(),(0,n.CE)("input",{type:"checkbox",onClick:a[0]||(a[0]=function(a){return e.checkedHandler(a,e.params)}),checked:Number(e.params.value),disabled:""},null,8,je)}var We={name:"checkboxRender",props:{},methods:{checkedHandler:function(e,a){a.data[a.name]=e.target.checked?1:0}}};const Ke=(0,_.A)(We,[["render",He]]);var Ze=Ke,Ye=t(3112),ea=t(74160),aa=t(33039),oa={components:{sieGrid:f.A,footerGrid:q.A,checkboxRender:Ze,sieModal:R.A,QCheckbox:Ye.A,QInput:be.A,ubigeo:aa.A,QSelect:Ee.S,QBtn:Oe.Il},mixins:[Qe.A,N.A],data:function(){return{ubigeo_show:!1,ubigeo:"",nivelAcceso:(0,v["default"])().ruta.nivel,columnDefs:null,rowData:null,api:null,autoGroupColumnDef:null,frameworkComponents:{},pagina:1,pages:1,datos:{PRICO:0,EXONERADO_IGV:0,EMISION_FILTRO:2},openModal:!1,flat:1,flatKeys:{ACTUALIZAR:2,AGREGAR:1},tipoEmision:x["default"].EMISION_DEFAULT,ddl:{},defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0},admin:!1}},methods:{abrirModalInsertar:function(){this.openModal=!0,this.clear(),this.flat=this.flatKeys.AGREGAR},submit:function(){this.flat===this.flatKeys.ACTUALIZAR?this.saveEmpresa():this.agregarEmpresa()},onGridReady:function(e){this.api=e.api,this.api.sizeColumnsToFit()},getEmpresas:function(){var e=this;T.$http.get("api/empresaController/getEmpresas").then(function(a){e.addModified(a),e.rowData=a})},clear:function(){this.datos={EMPCOD:"",RAZONSOCIAL:"",RUC:"",DIRECCION:"",TELEFONO:0,UBGCOD:"",COMERCIAL:"",ACTIVO:0,CTA_DETRACCION:"",PRICO:0,SISCONTA:"",PORCENTAJE_DETRACCION:0,EXONERADO_IGV:0,CODCONTA:"",EMISION_FILTRO:2},this.ubigeo_show=!0,this.openModal=!0},validarEmpresa:function(){var e=this.datos;try{if(!e.RAZONSOCIAL)throw new Error("No se ingreso el nombre de la empresa");if(!e.COMERCIAL)throw new Error("No se ingresó el nombre comercial");if(!e.RUC||!0!==x["default"].VALIDAR_RUC(String(e.RUC)))throw new Error("No se ingresó correctamente el RUC de la empresa");if(!e.UBGCOD)throw new Error("No seleccionó el ubigeo");return!0}catch(e){throw new Error(e.error?e.error.message:e.message)}},agregarEmpresa:function(){var e=this;try{this.validarEmpresa(),this.$confirm("¿Está seguro de agregar la empresa?").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/empresaController/postEmpresa",{datos:e.datos});case 1:o=a.v,e.$alert(o.message,"success"),e.getEmpresas(),e.clear(),a.n=3;break;case 2:return a.p=2,t=a.v,a.a(2,e.$alert(t.error?t.error.message:t.message,"warning"));case 3:return a.a(2)}},a,null,[[0,2]])})))}catch(e){return this.$alert(e.error?e.error.message:e.message,"warning")}},saveEmpresa:function(){var e=this;T.$http.put("api/empresaController/putEmpresa",{datos:this.datos}).then(function(a){e.changes.updated=[],(0,g.alert)(a.message,"success"),e.getEmpresas()}).catch(function(e){var a=e.error;(0,g.alert)(a.message,"warning")})},updateEmpresa:function(){var e=this;if(Number(this.datos.PORCENTAJE_DETRACCION)<0||Number(this.datos.PORCENTAJE_DETRACCION)>100)return this.$alert("El porcentaje de Detracción es valido de 0 a 100");this.$confirm("¿Estás seguro de actualizar este registro?","info").onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.put("api/empresaController/putEmpresa",{datos:e.datos});case 1:e.$alert("Empresa actualizada satisfactoriamente","success"),e.openModal=!1,e.getEmpresas();case 2:return a.a(2)}},a)})))},obtenerDdl:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,ea.n)(["c_empresa"]);case 1:o=a.v,e.ddl=o.C_EMPRESA;case 2:return a.a(2)}},a)}))()},openModalEditar:function(e){var a=[e.data],o=[].concat(a),t=o[0];this.flat=this.flatKeys.ACTUALIZAR,this.datos={EMPCOD:t.EMPCOD,RAZONSOCIAL:t.RAZONSOCIAL,RUC:t.RUC,DIRECCION:t.DIRECCION,TELEFONO:t.TELEFONO,UBGCOD:t.UBGCOD,COMERCIAL:t.COMERCIAL,ACTIVO:t.ACTIVO,CTA_DETRACCION:t.CTA_DETRACCION,PRICO:Number(t.PRICO),SISCONTA:t.SISCONTA,CODCONTA:t.CODCONTA,PORCENTAJE_DETRACCION:t.PORCENTAJE_DETRACCION,EXONERADO_IGV:t.EXONERADO_IGV,EMISION_FILTRO:t.EMISION_FILTRO?t.EMISION_FILTRO:2},this.ubigeo_show=!0,this.openModal=!0}},created:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return e.frameworkComponents={agUbigeo:Je.A,actionButton:U.A,checkboxRender:Ze},a.n=1,x["default"].VERIFICAR_USUARIO_ADMINISTRADOR();case 1:e.admin=a.v;case 2:return a.a(2)}},a)}))()},beforeMount:function(){this.obtenerDdl(),this.columnDefs=[{headerName:"Código",field:"EMPCOD",width:70},{headerName:"Razón Social",field:"RAZONSOCIAL",width:200},{headerName:"Nombre Comercial",field:"COMERCIAL",width:150,hide:!0},{headerName:"RUC",field:"RUC",width:120},{headerName:"Dirección",field:"DIRECCION",width:300,hide:!0},{headerName:"Teléfono",field:"TELEFONO",width:140,hide:!0},{headerName:"Ubigeo",field:"UBGCOD",cellEditor:"agUbigeo",width:100},{headerName:"Sistema Contable",field:"SISCONTA",width:150,hide:!0},{headerName:"Cuenta Detraccion",field:"CTA_DETRACCION",width:150,hide:!0},{headerName:"Ose",field:"OSE",width:150,hide:!0},{headerName:"Prico",field:"PRICO",cellRenderer:Ze,cellRendererParams:{name:"PRICO"},editable:!1,width:70},{headerName:"Exo.IGV",field:"EXONERADO_IGV",cellRenderer:Ze,cellRendererParams:{name:"EXONERADO_IGV"},editable:!1,width:70},{headerName:"Activo",field:"ACTIVO",cellRenderer:Ze,cellRendererParams:{name:"ACTIVO"},editable:!1,width:70},{headerName:"",hide:this.nivelAcceso<2,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Guardar",onClick:this.openModalEditar},width:40,filter:!1},{headerName:"modified",field:"modified",hide:!0}],this.getEmpresas()}};const ta=(0,_.A)(oa,[["render",ze]]);var na=ta,ra={class:"row q-mt-sm"},la={class:"col headerTable"},ia={class:"row q-ma-xs q-col-gutter-sm"},sa={class:"col-xs-12"},ca={class:"text-h6"},ua={class:"col-xs-12"},da={class:"col-xs-12"},ma={class:"col-xs-12"},Ca={class:"col-xs-12"},fa={class:"col-xs-12 col-sm-6"},pa={class:"col-xs-12 col-sm-6"},Aa={key:0,class:"col-xs-12 col-sm-6"};function ha(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-select"),s=(0,n.g2)("q-input"),c=(0,n.g2)("q-checkbox"),u=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",ra,[(0,n.Lk)("div",la,[e.nivelAcceso>=2?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,n.k6)(function(){return j()(a[9]||(a[9]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 264px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,defaultColDef:e.defaultColDef,frameworkComponents:e.frameworkComponents,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules},null,8,["columnDefs","rowData","onGridReady","defaultColDef","frameworkComponents","onCellValueChanged","rowClassRules"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getLocales,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,n.bF)(u,{title:e.titleModal,modelValue:e.openModal,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.openModal=a}),onSubmit:e.save},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ia,[(0,n.Lk)("div",sa,[(0,n.Lk)("div",ca,(0,l.v_)(e.title),1)]),(0,n.Lk)("div",ua,[(0,n.bF)(i,{modelValue:e.form.EMPCOD,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.EMPCOD=a}),"option-value":"EMPCOD","option-label":"RAZONSOCIAL",options:e.comboEmpresa,label:"Empresa"},null,8,["modelValue","options"])]),(0,n.Lk)("div",da,[(0,n.bF)(s,{modelValue:e.form.NOMBRE,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.form.NOMBRE=a}),label:"Nombre",placeholder:"Ingrese nombre del local"},null,8,["modelValue"])]),(0,n.Lk)("div",ma,[(0,n.bF)(s,{modelValue:e.form.DIRECCION,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.form.DIRECCION=a}),label:"Dirección",placeholder:"Ingrese dirección fiscal"},null,8,["modelValue"])]),(0,n.Lk)("div",Ca,[(0,n.bF)(s,{modelValue:e.form.ZONA,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.ZONA=a}),label:"Zona y/o Referencia",placeholder:"Ingrese la referencia de la dirrección"},null,8,["modelValue"])]),(0,n.Lk)("div",fa,[(0,n.bF)(s,{modelValue:e.form.TELEFONO,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.form.TELEFONO=a}),label:"Teléfono",placeholder:"Ingrese teléfono de contacto"},null,8,["modelValue"])]),(0,n.Lk)("div",pa,[(0,n.bF)(s,{modelValue:e.form.SEDECOD,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.form.SEDECOD=a}),label:"Código Sede",placeholder:"Ingrese código de sede segun SUNAT"},null,8,["modelValue"])]),e.admin?((0,n.uX)(),(0,n.CE)("div",Aa,[(0,n.bF)(c,{class:"chk-h-sm",label:"Activo","true-value":1,"false-value":0,modelValue:e.form.ACTIVO,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.form.ACTIVO=a})},null,8,["modelValue"])])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["title","modelValue","onSubmit"])])}t(34634),t(48426),t(88390);var Oa=t(70674),ga=["checked"];function ba(e,a){return(0,n.uX)(),(0,n.CE)("input",{type:"checkbox",onClick:a[0]||(a[0]=function(a){return e.checkedHandler(a,e.params)}),checked:Number(e.params.value),disabled:""},null,8,ga)}var Ea={name:"checkboxRender",props:{},methods:{checkedHandler:function(e,a){a.data[a.name]=e.target.checked?1:0}}};const Da=(0,_.A)(Ea,[["render",ba]]);var va=Da,Ta={components:{sieGrid:f.A,sieModal:R.A,formulario:w.A,footerGrid:q.A,QSelect:Ee.S,QInput:be.A,QCheckbox:Ye.A,ubigeo:aa.A,checkboxRender:va,QBtn:Oe.Il},mixins:[Qe.A],data:function(){return{nivelAcceso:(0,v["default"])().ruta.nivel,columnDefs:null,rowData:null,api:null,autoGroupColumnDef:null,openModal:!1,titleModal:"SIEWEB: Tesorería",schema:[],title:"",frameworkComponents:null,defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0},pagina:1,pages:1,ultimo_id_local:"",flag:"save",cantidad:"",EMPCOD:"",comboEmpresa:"",form:{ACTIVO:0,DIRECCION:"",EMPCOD:"",NOMBRE:"",SEDECOD:"",TELEFONO:"",ZONA:""},admin:!1}},methods:{addRow:function(){this.form.ID_LOCAL=this.ultimo_id_local,this.form.ACTIVO=0,this.form.DIRECCION="",this.form.NOMBRE="",this.form.SEDECOD="",this.form.TELEFONO="",this.form.ZONA="",this.flag="save",this.openModal=!0,this.title="Agregar Local"},onGridReady:function(e){this.api=e.api,this.api.sizeColumnsToFit()},getLocales:function(){var e=this;T.$http.get("api/empresaController/getLocales",{params:{parametros:{response:"list"}}}).then(function(a){e.form.EMPCOD=a.at(0).EMPCOD,e.addModified(a),e.rowData=a,e.ultimo_id_local=e.rowData[e.rowData.length-1].ID_LOCAL+1})},getCajaCobranza:function(e,a){var o=this;return B()(P()().m(function t(){var n;return P()().w(function(t){while(1)switch(t.n){case 0:return n={pagina:o.pagina},Object.assign(n,e),t.n=1,T.$http.get("api/CajaCobranzaController/getCajaCobranza",{params:{parametros:n}}).then(function(e){o.addModified(e),o.rowDataCC=e,o.cantidad=o.rowDataCC.length});case 1:if(!(o.cantidad>0)){t.n=2;break}o.$alert("Existen Puntos de Venta asignados a este Local.","info"),t.n=4;break;case 2:return t.n=3,T.$http.delete("api/empresaController/deleteLocal",{params:{datos:{id_local:a}}});case 3:o.$alert("Local eliminado satisfactoriamente","success"),o.getLocales();case 4:return t.a(2)}},t)}))()},save:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:if(""!==e.form.EMPCOD){a.n=1;break}return a.a(2,e.$alert("Debe de seleccionar una empresa","info"));case 1:if(""!==e.form.NOMBRE){a.n=2;break}return a.a(2,e.$alert("Debe de estabecer el nombre del local","info"));case 2:if(e.form.SEDECOD&&!(String(e.form.SEDECOD).length>4)){a.n=3;break}return a.a(2,e.$alert("El código de la sede debe ser maximo 4 caracteres.","info"));case 3:"save"===e.flag?e.$confirm("¿Estás seguro de agregar este registro?","save").onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.post("api/empresaController/postLocal",{datos:{ID_LOCAL:e.form.ID_LOCAL,NOMBRE:e.form.NOMBRE,DIRECCION:e.form.DIRECCION,ZONA:e.form.ZONA,TELEFONO:e.form.TELEFONO,ACTIVO:1,SEDECOD:e.form.SEDECOD,EMPCOD:e.form.EMPCOD}});case 1:e.getLocales(),e.$alert("Local agregado satisfactoriamente","success"),e.openModal=!1;case 2:return a.a(2)}},a)}))):e.$confirm("¿Estás seguro de actualizar este registro?","info").onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.put("api/empresaController/putLocal",{datos:{ID_LOCAL:e.form.ID_LOCAL,ACTIVO:e.form.ACTIVO,DIRECCION:e.form.DIRECCION,EMPCOD:e.EMPCOD,NOMBRE:e.form.NOMBRE,SEDECOD:e.form.SEDECOD,TELEFONO:e.form.TELEFONO,ZONA:e.form.ZONA}});case 1:e.getLocales(),e.$alert("Local actualizado satisfactoriamente","success"),e.openModal=!1;case 2:return a.a(2)}},a)})));case 4:return a.a(2)}},a)}))()}},created:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,x["default"].VERIFICAR_USUARIO_ADMINISTRADOR();case 1:e.admin=a.v;case 2:return a.a(2)}},a)}))()},beforeMount:function(){var e=this;this.frameworkComponents={agUbigeo:Je.A,agSelect:ge.A,actionButton:U.A,checkboxRender:va};var a=T.$http.get("api/empresaController/getEmpresas",{params:{parametros:{response:"combo"}}}),o=this;Promise.all([a]).then(function(a){var t=he()(a,1),n=t[0];e.columnDefs=[{headerName:"Código",field:"ID_LOCAL",width:70},{headerName:"Empresa",field:"EMPCOD",cellEditor:(0,Oa.A)(e,"EMPCOD"),cellEditorParams:{"option-label":"RAZONSOCIAL","option-value":"EMPCOD",options:n},width:240},{headerName:"Nombre de Local",field:"NOMBRE",width:250},{headerName:"Dirección",field:"DIRECCION",width:300,hide:!0},{headerName:"Zona",field:"ZONA",width:200,hide:!0},{headerName:"Teléfono",field:"TELEFONO",width:140,hide:!0},{headerName:"Código Sede",field:"SEDECOD",width:80},{headerName:"Activo",field:"ACTIVO",cellRenderer:va,cellRendererParams:{name:"ACTIVO"},editable:!1,width:70},{headerName:"",hide:e.nivelAcceso<2,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Editar",onClick:function(e){return B()(P()().m(function a(){var t,n,r,l;return P()().w(function(a){while(1)switch(a.n){case 0:return t=[e.data],a.n=1,T.$http.get("api/empresaController/getEmpresas",{params:{parametros:{empcod:t[0].EMPCOD}}});case 1:n=a.v,r=he()(n,1),l=r[0],o.openModal=!0,o.flag="edit",o.form.EMPCOD=l.EMPCOD,o.EMPCOD=l.EMPCOD,o.title="Editar Local",o.form.ID_LOCAL=t[0].ID_LOCAL,o.form.ACTIVO=t[0].ACTIVO,o.form.DIRECCION=t[0].DIRECCION,o.form.NOMBRE=t[0].NOMBRE,o.form.SEDECOD=t[0].SEDECOD,o.form.TELEFONO=t[0].TELEFONO,o.form.ZONA=t[0].ZONA;case 2:return a.a(2)}},a)}))()}},width:40},{headerName:"",hide:e.nivelAcceso<2,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var a=[e.data];this.$confirm("¿Estás seguro de eliminar este registro?","delete").onOk(B()(P()().m(function e(){var t;return P()().w(function(e){while(1)switch(e.n){case 0:return t={ID_LOCAL:a[0].ID_LOCAL},e.n=1,o.getCajaCobranza(t,a[0].ID_LOCAL);case 1:return e.a(2)}},e)})))}},width:40},{headerName:"Modificado",field:"modified",hide:!0}],e.comboEmpresa=n}),this.getLocales()}};const wa=(0,_.A)(Ta,[["render",ha]]);var Ra=wa;f.A,R.A,q.A,w.A,Qe.A,N.A;f.A,R.A,w.A,q.A,Qe.A,N.A;function Na(e,a){var o=(0,n.g2)("sie-grid"),t=(0,n.g2)("footer-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[1]||(a[1]=(0,n.Lk)("div",{class:"row q-mt-sm"},null,-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 230px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady},null,8,["columnDefs","rowData","onGridReady"]),(0,n.bF)(t,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getComprobantes,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])])}var Ia={components:{sieGrid:f.A,footerGrid:q.A},data:function(){return{columnDefs:null,rowData:null,pagina:1,pages:1}},methods:{onGridReady:function(e){this.api=e.api},getComprobantes:function(){var e=this;T.$http.get("api/talonarioController/getTipoComprobantes",{}).then(function(a){e.rowData=a})}},beforeMount:function(){this.columnDefs=[{headerName:"Id",field:"ID_COMPROBANTE",width:80},{headerName:"Tipo de Comprobante",field:"COMPROBANTE",width:400},{headerName:"Abreviatura",field:"ABRCOMP",width:150},{headerName:"SUNAT",field:"CODSUNAT",width:100},{headerName:"Tipo Movimiento",field:"VALOR",width:150}],this.getComprobantes()}};const _a=(0,_.A)(Ia,[["render",Na]]);var Va=_a;function La(e,a){var o=(0,n.g2)("sie-grid"),t=(0,n.g2)("footer-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[1]||(a[1]=(0,n.Lk)("div",{class:"row q-mt-sm"},null,-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,style:{height:"calc(100vh - 231px)"}},null,8,["columnDefs","rowData","onGridReady"]),(0,n.bF)(t,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getServiciosBanco,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])])}var Sa={components:{sieGrid:f.A,footerGrid:q.A},mixins:[N.A],data:function(){return{columnDefs:null,rowData:null,pagina:1,pages:1}},methods:{onGridReady:function(e){this.api=e.api}},beforeMount:function(){this.columnDefs=[{headerName:"Código",field:"ID_BANCOSER",width:80},{headerName:"Banco",field:"BANCO",width:300},{headerName:"Nombre",field:"NOMBRE",width:200},{headerName:"Tipo",field:"TIPO_SERVICIO",width:300}],this.getServiciosBanco()}};const Ma=(0,_.A)(Sa,[["render",La]]);var Pa=Ma,ka={class:"row q-mt-sm"},Ba={class:"col headerTable"},Ua={class:"row q-ma-xs q-col-gutter-sm"},xa={class:"col-xs-12"},Fa={class:"text-h6"},Ga={class:"col-xs-4"},ya={class:"col-xs-8"};function $a(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("q-card-section"),i=(0,n.g2)("q-input"),s=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",ka,[(0,n.Lk)("div",Ba,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.createGrupo,flat:""},{default:(0,n.k6)(function(){return j()(a[3]||(a[3]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowDataCon,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh  - 235px)"},defaultColDef:e.defaultColDef},null,8,["columnDefs","rowData","onGridReady","frameworkComponents","defaultColDef"]),(0,n.bF)(s,{modelValue:e.openModal,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.openModal=a}),onSubmit:e.submitConceptoGrupo},{default:(0,n.k6)(function(){return[(0,n.bF)(r),(0,n.Lk)("div",Ua,[(0,n.Lk)("div",xa,[(0,n.Lk)("div",Fa,(0,l.v_)(e.titleModal),1)]),(0,n.Lk)("div",Ga,[(0,n.bF)(i,{label:"Código",placeholder:"Ingrese Código",modelValue:e.form.CONCOB,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.form.CONCOB=a}),maxlength:e.size.CONCOB,readonly:e.disabledConcob},null,8,["modelValue","maxlength","readonly"])]),(0,n.Lk)("div",ya,[(0,n.bF)(i,{label:"Descripción",placeholder:"Ingrese Descripción",modelValue:e.form.CONDES,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.CONDES=a}),maxlength:e.size.CONDES},null,8,["modelValue","maxlength"])])])]}),_:1},8,["modelValue","onSubmit"])])}t(68017);var qa={components:{sieGrid:f.A,sieModal:R.A,footerGrid:q.A,QBtn:Oe.Il,QInput:Oe.ie},mixins:[N.A],data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,nivelAcceso:(0,v["default"])().ruta.nivel,pagina:1,pages:1,columnDefs:null,rowDataCon:null,api:null,defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0},form:{CONDES:"",CONCOB:""},disabledConcob:!1,openModal:!1,titleModal:"",size:{CONCOB:0,CONDES:0},edit:!1}},methods:{onGridReady:function(e){this.api=e.api},getCategoriaConceptos:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/concobroController/getGruposConceptos",{params:{params:{}}});case 1:o=a.v,e.rowDataCon=o;case 2:return a.a(2)}},a)}))()},clear:function(){this.form.CONCOB="",this.form.CONDES=""},submitConceptoGrupo:function(){this.form.CONCOB.length>0&&this.form.CONDES.length>0&&(this.edit?this.ajaxPutConcepto():this.ajaxPostConcepto())},ajaxPutConcepto:function(){var e=this;this.$confirm("¿Desea actualizar el concepto de Grupo?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/concobroController/actualizarConceptoCobro",{datos:{CONCOB:e.form.CONCOB.trim(),CONDES:e.form.CONDES.trim()}});case 1:return o=a.v,e.$alert(o.message,"success"),e.clear(),a.n=2,e.getCategoriaConceptos();case 2:e.openModal=!1,a.n=4;break;case 3:a.p=3,t=a.v,e.$alert(t.error?t.error.message:t.message,"warning");case 4:return a.a(2)}},a,null,[[0,3]])})))},ajaxPostConcepto:function(){var e=this;this.$confirm("¿Desea agregar el concepto de Grupo?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/concobroController/addConceptoGrupo",{datos:{CONCOB:e.form.CONCOB.trim(),CONDES:e.form.CONDES.trim()}});case 1:return o=a.v,e.$alert(o.message,"success"),e.clear(),a.n=2,e.getCategoriaConceptos();case 2:e.openModal=!1,a.n=4;break;case 3:a.p=3,t=a.v,e.$alert(t.error?t.error.message:t.message,"warning");case 4:return a.a(2)}},a,null,[[0,3]])})))},createGrupo:function(){this.clear(),this.openModal=!0,this.disabledConcob=!1,this.titleModal="Agregar Concepto Grupo",this.edit=!1},getSizeRow:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,(0,ea.n)(["concobro_grupo"]);case 1:o=a.v,e.size=o.CONCOBRO_GRUPO,a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error.message);case 3:return a.a(2)}},a,null,[[0,2]])}))()},editConceptoGrupo:function(e){this.openModal=!0,this.disabledConcob=!0,this.form.CONCOB=e.data.CONCOB,this.form.CONDES=e.data.CONDES,this.titleModal="Editar Concepto Grupo: "+this.form.CONDES,this.edit=!0},deleteConceptoGrupo:function(e){var a=this;this.$confirm("¿Estás seguro de eliminar el Concepto Grupo?","delete").onOk(B()(P()().m(function o(){var t,n,r;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,t={concob:e.data.CONCOB},o.n=1,T.$http.delete("api/concobroController/deleteConceptoGrupo",{params:t});case 1:n=o.v,a.$alert(n.message,"success"),a.getCategoriaConceptos(),a.openModal=!1,o.n=3;break;case 2:o.p=2,r=o.v,a.$alert(r.error?r.error.message:r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])})))}},beforeMount:function(){this.frameworkComponents={agSelect:ge.A,actionButton:U.A},this.columnDefs=[{headerName:"Código",field:"CONCOB",width:80},{headerName:"Descripción",field:"CONDES",width:500},{cellRenderer:U.A,width:40,cellRendererParams:{icon:"edit",title:"Editr",onClick:this.editConceptoGrupo},hide:this.nivelAcceso<x["default"].ACCESO_TOTAL,filter:!0},{cellRenderer:U.A,width:40,cellRendererParams:{icon:"delete",title:"eliminar",onClick:this.deleteConceptoGrupo},hide:this.nivelAcceso<x["default"].ACCESO_TOTAL,filter:!0}]},mounted:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getCategoriaConceptos();case 1:return a.n=2,e.getSizeRow();case 2:return a.a(2)}},a)}))()}};const Xa=(0,_.A)(qa,[["render",$a]]);var za=Xa,Qa={class:"row q-mt-sm"},Ja={class:"col headerTable"},ja={class:"row q-pa-sm"},Ha={class:"row q-ma-xs q-col-gutter-sm"},Wa={class:"col-xs-6"},Ka={class:"col-xs-6"},Za={class:"col-xs-12"},Ya={class:"col-xs-12"},eo={class:"col-xs-6"},ao={class:"col-xs-6"},oo={class:"row q-ma-xs q-col-gutter-sm"},to={class:"col-xs-6"},no={class:"col-xs-6"},ro={class:"col-xs-12"},lo={class:"col-xs-12"},io={class:"col-xs-6"},so={class:"col-xs-6"};function co(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-tab"),s=(0,n.g2)("q-tabs"),c=(0,n.g2)("q-input"),u=(0,n.g2)("q-checkbox"),d=(0,n.g2)("q-card-section"),m=(0,n.g2)("q-select"),C=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Qa,[(0,n.Lk)("div",Ja,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.createTalonario,flat:""},{default:(0,n.k6)(function(){return j()(a[15]||(a[15]=[(0,n.eW)("Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 265px)"},columnDefs:e.columnDefs,rowData:e.rowData,onRowSelected:e.rowSelected,onGridReady:e.onGridReady,defaultColDef:e.defaultColDef,enableCellTextSelection:"",floatingFilter:"",frameworkComponents:e.frameworkComponents,onFilterChanged:e.onFilterChanged},null,8,["columnDefs","rowData","onRowSelected","onGridReady","defaultColDef","frameworkComponents","onFilterChanged"]),(0,n.bF)(r,{onLoad:e.getTalonarios,modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,style:{width:"100%"},rows:e.contador},null,8,["onLoad","modelValue","max","rows"])]),(0,n.bF)(C,{modelValue:e.openModal,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.openModal=a}),onSubmit:e.submitTalonario},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ja,[(0,n.Lk)("h3",null,(0,l.v_)(e.mode)+" Talonario",1)]),(0,n.bF)(s,{modelValue:e.tabActivo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.tabActivo=a})},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{name:e.tabsKeys.datos},{default:(0,n.k6)(function(){return j()(a[16]||(a[16]=[(0,n.eW)("Datos Generales",-1)]))}),_:1},8,["name"]),(0,n.bF)(i,{name:e.tabsKeys.contabilidad},{default:(0,n.k6)(function(){return j()(a[17]||(a[17]=[(0,n.eW)("Contabilidad",-1)]))}),_:1},8,["name"])]}),_:1},8,["modelValue"]),e.tabActivo===e.tabsKeys.datos?((0,n.uX)(),(0,n.Wv)(d,{key:0},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ha,[(0,n.Lk)("div",Wa,[(0,n.bF)(c,{placeholder:"Ingrese código de Talonario",modelValue:e.form.NUMTAL,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.form.NUMTAL=a}),maxlength:e.size.NUMTAL,label:"Código Talonario"},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Ka,[(0,n.bF)(c,{placeholder:"Ingrese número de serie",modelValue:e.form.NUMSER,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.form.NUMSER=a}),label:"Serie",maxlength:e.size.NUMSER},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Za,[(0,n.bF)(c,{placeholder:"Ingrese descripción del talonario",modelValue:e.form.TALDES,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.TALDES=a}),label:"Descripción",maxlength:e.size.TALDES},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Ya,[(0,n.bF)(c,{type:"numpag",placeholder:"Ingrese correlativo actual",modelValue:e.form.NUMPAG,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.form.NUMPAG=a}),maxlength:e.size.NUMPAG,label:"Correlativo"},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",eo,[(0,n.bF)(u,{onInput:e.change,label:"Documento Electrónico",modelValue:e.form.DELECTRONICO,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.form.DELECTRONICO=a}),"true-value":e.true_value,"false-value":e.false_value,disable:!e.readOnlyElectronico},null,8,["onInput","modelValue","true-value","false-value","disable"])]),(0,n.Lk)("div",ao,[(0,n.bF)(c,{placeholder:"Serie Electrónico",modelValue:e.form.SERIE_ELECTRONICO,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.form.SERIE_ELECTRONICO=a}),label:"Serie Electrónico",maxlength:e.size.SERIE_ELECTRONICO},null,8,["modelValue","maxlength"])])])]}),_:1})):(0,n.Q3)("v-if",!0),e.tabActivo===e.tabsKeys.contabilidad?((0,n.uX)(),(0,n.Wv)(d,{key:1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",oo,[(0,n.Lk)("div",to,[(0,n.bF)(c,{placeholder:"Ingrese código de documento contable",modelValue:e.form.DOCCOD,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.form.DOCCOD=a}),label:"Código para Exportación Contable",maxlength:e.size.DOCCOD},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",no,[(0,n.bF)(u,{label:"Usa Contabilidad",modelValue:e.form.USE_CONTABILIDAD,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.form.USE_CONTABILIDAD=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",ro,[(0,n.bF)(m,{modelValue:e.form.CODSUNAT,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.form.CODSUNAT=a}),label:"Código de Sunat (Doc. Oficiales)",options:e.dataCodSunat},null,8,["modelValue","options"])]),(0,n.Lk)("div",lo,[(0,n.bF)(m,{label:"Tipo de Comprobante (Interno)","option-label":"COMPROBANTE","option-value":"ID_COMPROBANTE",options:e.comprobantes,modelValue:e.form.ID_COMPROBANTE,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.form.ID_COMPROBANTE=a})},null,8,["options","modelValue"])]),(0,n.Lk)("div",io,[(0,n.bF)(u,{label:"Activo",modelValue:e.form.ACTIVO,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.form.ACTIVO=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",so,[String(e.form.DELECTRONICO)===String(e.false_value)?((0,n.uX)(),(0,n.Wv)(u,{key:0,label:"Enviar por Correo",modelValue:e.form.CORREO,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.form.CORREO=a}),"true-value":1,"false-value":0},null,8,["modelValue"])):(0,n.Q3)("v-if",!0)])])]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1},8,["modelValue","onSubmit"])])}t(74260),t(71587),t(52133),t(50310),t(32203),t(6724);var uo=t(33001),mo=t(16648),Co={components:{QSelect:mo.A},data:function(){return{options:[],value:null}},beforeMount:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:if(o=[],"string"!==typeof e.params.api){a.n=2;break}return a.n=1,T.$http.get(e.params.api,{params:{response:"combo"}});case 1:o=a.v,a.n=3;break;case 2:o=e.params.options||[];case 3:e.options=j()(o),e.value=e.params.value||e.params.defaultvalue;case 4:return a.a(2)}},a)}))()},render:function(){var e=this;return(0,n.h)(mo.A,{modelValue:e.value,options:e.options,"hide-selected":!0,"fill-input":!0,"use-input":!0,onInput:function(a){e.value=a,e.params.setValue(a)},onFilter:function(a,o){o(function(){var o=j()(e.params.options);e.options=(0,uo.filterArray)(a,{field:e.params.dLabel||"label",list:o})})}})}},fo=t(6557),po=["checked"];function Ao(e,a){return(0,n.uX)(),(0,n.CE)("input",{type:"checkbox",onClick:a[0]||(a[0]=function(a){return e.checkedHandler(a,e.params)}),checked:Number(e.params.value),disable:""},null,8,po)}var ho={name:"checkboxRender",props:{},methods:{checkedHandler:function(e,a){a.data[a.name]=e.target.checked?1:0}}};const Oo=(0,_.A)(ho,[["render",Ao]]);var go=Oo,bo={components:{QCard:b.A,QCardSection:E.A,sieModal:R.A,QInput:be.A,QCheckbox:Ye.A,sieGrid:f.A,actionButton:U.A,select:Co,checkboxRender:go,QPagination:Oe.ao,QSearch:Oe.Ks,footerGrid:q.A,QSelect:Ee.S,QTab:A.A,QTabs:p.A,QBtn:Oe.Il},data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,frameworkComponents:{},columnDefs:[],rowData:[],api:{},openModal:!1,title:"",true_value:"S",false_value:"N",pagina:1,pages:1,check:!0,currentRow:[],comprobantes:[],tab1:!0,tab2:!1,mode:"Agregar",codigo:"",defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0},DOCCOD:[{CLAVE:"NA",VALOR:"NA"},{CLAVE:"FT",VALOR:"FT"},{CLAVE:"BV",VALOR:"BV"}],form:{NUMTAL:"",NUMSER:"",NUMPAG:"0000001",TALDES:"",ORIPAG:"",NUMPAG_IMP:"N",CODSUNAT:"",ABRTAL:"",DOCCOD:"",DELECTRONICO:"S",SERIE_ELECTRONICO:0,ID_COMPROBANTE:0,ACTIVO:1,CORREO:0,USE_CONTABILIDAD:1},size:{NUMTAL:"",NUMSER:"",NUMPAG:"",TALDES:"",ORIPAG:"",NUMPAG_IMP:"",CODSUNAT:"",ABRTAL:"",DOCCOD:"",DELECTRONICO:"",SERIE_ELECTRONICO:0,ID_COMPROBANTE:0,ACTIVO:0},style:"border-bottom:0.05rem solid #562598",style2:"",tabsActive:{generales:!0,contabilidad:!1},nivelAcceso:(0,v["default"])().ruta.nivel,filtro:{codigo:"",descripcion:""},dataCodSunat:[{label:"",value:""},{label:"03 - Boleta",value:"03"},{label:"01 - Factura",value:"01"},{label:"07 - Nota Credito",value:"07"},{label:"08 - Nota Debito",value:"08"},{label:"RE - Recibo",value:"RE"},{label:"45 - Recibo Colegio",value:"45"}],rowDataInitial:[],tabActivo:"tabDatos",tabsKeys:{datos:"tabDatos",contabilidad:"tabContabilidad"},readOnlyElectronico:!1,contador:0,filterModel:null}},mounted:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return e.getTalonarios(),e.getSizeRow(),a.n=1,x["default"].VERIFICAR_USUARIO_ADMINISTRADOR();case 1:e.readOnlyElectronico=a.v;case 2:return a.a(2)}},a)}))()},beforeMount:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return e.frameworkComponents={actionButton:U.A,select:Co,checkboxRender:go},e.columnDefs=[{headerName:"Talonario",field:"NUMTAL",width:75},{headerName:"Serie",field:"SERIE",width:55},{headerName:"Número",field:"NUMERO",width:80},{headerName:"Descripción",field:"TALDES",width:250,resizable:!0},{headerName:"SUNAT",field:"CODSUNAT",width:90,hide:!0},{headerName:"Documento",field:"DOCCOD",width:100,hide:!0},{headerName:"Comprobante",field:"COMPROBANTE",width:140},{headerName:"Pto. Venta",field:"PUNTO_VENTA",width:150,resizable:!0,sortable:!0},{headerName:"Activo",field:"ACTIVO",cellRenderer:go,cellRendererParams:{name:"ACTIVO"},editable:!1,width:70},{cellRenderer:U.A,width:60,cellRendererParams:{icon:"edit",title:"Actualizar",onClick:function(){var a=B()(P()().m(function a(o){var t;return P()().w(function(a){while(1)switch(a.n){case 0:return e.tabClick1(),e.openModal=!0,e.mode="Editar",e.clear(),a.n=1,T.$http.get("api/talonarioController/getBuscarTalonario",{params:{datos:{numtal:o.data.NUMTAL}}});case 1:t=a.v,e.form.NUMTAL=t.NUMTAL,e.form.NUMSER=t.NUMSER,e.form.NUMPAG=t.NUMPAG,e.form.TALDES=t.TALDES,e.form.ORIPAG=t.ORIPAG,e.form.DOCCOD=t.DOCCOD,e.form.DELECTRONICO=t.DELECTRONICO===e.true_value?"S":"N",e.form.ID_COMPROBANTE=t.ID_COMPROBANTE,e.form.SERIE_ELECTRONICO=t.SERIE_ELECTRONICO,e.form.CODSUNAT=t.CODSUNAT,e.form.CORREO=Number(t.CORREO),e.form.ACTIVO=Number(t.ACTIVO),e.form.USE_CONTABILIDAD=Number(t.USE_CONTABILIDAD?t.USE_CONTABILIDAD:0),e.getCodSunat();case 2:return a.a(2)}},a)}));function o(e){return a.apply(this,arguments)}return o}()},hide:e.nivelAcceso<x["default"].LECTURA_ESCRITURA,filter:!1},{cellRenderer:U.A,width:60,cellRendererParams:{icon:"delete",onClick:function(a){e.$confirm("¿Esta seguro de eliminar este registro?","delete").onOk(B()(P()().m(function o(){var t,n,r;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,T.$http.delete("api/talonarioController/deleteTalon",{params:{id:a.data.NUMTAL}});case 1:return t=o.v,e.$alert(t.message,"success"),o.n=2,T.$http.get("api/talonarioController/getTalon");case 2:n=o.v,e.rowData=n,o.n=4;break;case 3:o.p=3,r=o.v,e.$alert(r.error.message.message,"warning");case 4:return o.a(2)}},o,null,[[0,3]])})))}},hide:e.nivelAcceso<x["default"].ACCESO_TOTAL,filter:!1}],a.n=1,T.$http.get("api/talonarioController/getTalon");case 1:return e.rowData=a.v,a.n=2,T.$http.get("api/talonarioController/getTipoComprobante");case 2:o=a.v,o.map(function(e){e.COMPROBANTE=e.CODSUNAT+" | "+e.COMPROBANTE}),e.comprobantes=o;case 3:return a.a(2)}},a)}))()},methods:{onFilterChanged:function(e){this.contador=Array.from({length:e.api.getDisplayedRowCount()}),this.filterModel=e.api.getFilterModel()},filtroTalonarios:function(){var e=this;return B()(P()().m(function a(){var o,t,n;return P()().w(function(a){while(1)switch(a.n){case 0:return o=[],t=j()(e.rowDataInitial),n={NUMTAL:e.filtro.codigo,TALDES:e.filtro.descripcion},a.n=1,(0,fo.A)({keys:n,data:t});case 1:o=a.v,e.rowData=o;case 2:return a.a(2)}},a)}))()},descargarTalonarios:function(){return B()(P()().m(function e(){var a,o;return P()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,T.$http.post("api/talonarioController/postDowloadTalonario",{parametros:{parametros:{}}});case 1:a=e.v,o='{"name":"'.concat(a.filename,'","ruta":"').concat(a.filename,'","tipo":"xlsx"}'),x["default"].DESCARGAR_ARCHIVO(o);case 2:return e.a(2)}},e)}))()},gatActiveTabs:function(e){var a=e.target.parentElement.children;if(a.length>0&&e.target.attributes.tabsItem){var o=e.target.attributes.tabsItem.textContent.trim();for(var t in this.tabsActive)this.tabsActive[t]=t===o;Array.from(a).map(function(e){e.attributes.tabsItem.textContent.trim()===o?e.attributes.active.textContent="active":e.attributes.active.textContent=""})}},validate:function(e){return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return o="",e["NUMTAL"]?e["NUMSER"]?e["NUMPAG"]?e["TALDES"]?e["ID_COMPROBANTE"]||(o="No se seleccionó el tipo de comprobante del talonario"):o="Error: Debe ingresar correctamente la descripción del talonario":o="Error: Deber ingresar correctamente el correlativo del talonario":o="Error: Debe ingresar correctamente el número de serie del talonario":o="Error: Debe ingresar correctamente el código del talonario",a.a(2,o.trim().length>0?{status:"error",exception:o}:{status:"ok"})}},a)}))()},getSizeRow:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/talonarioController/getSizeRow");case 1:o=a.v,o.map(function(a){e.size[a["CAMPO"]]=Number(a["FSIZE"])});case 2:return a.a(2)}},a)}))()},tabClick1:function(){this.tab2=!1,this.tab1=!0,this.style="border-bottom:0.05rem solid #562598",this.style2=""},tabClick2:function(){this.tab1=!1,this.tab2=!0,this.style2="border-bottom:0.05rem solid #562598",this.style=""},change:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:e===a.true_value?a.form.SERIE_ELECTRONICO=a.form.NUMSER:a.form.SERIE_ELECTRONICO="",a.getCodSunat();case 1:return o.a(2)}},o)}))()},getCodSunat:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/talonarioController/getTipoComprobante");case 1:o=a.v,o.find(function(a){return a.ID_COMPROBANTE===e.form.ID_COMPROBANTE});case 2:return a.a(2)}},a)}))()},rowSelected:function(e){this.currentRow=e.data},onGridReady:function(e){this.api=e.api},restoreFilterState:function(){this.filterModel&&this.api.setFilterModel(this.filterModel)},getTalonarios:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/talonarioController/getTalon");case 1:o=a.v,e.rowData=o,e.rowDataInitial=j()(e.rowData),e.contador=e.rowData.length,e.$nextTick(function(){e.restoreFilterState()});case 2:return a.a(2)}},a)}))()},insertarTalonario:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/talonarioController/addTalon",{data:e.form});case 1:o=a.v,e.$alert(o.message,"success"),e.getTalonarios(),a.n=3;break;case 2:return a.p=2,t=a.v,a.a(2,e.$alert(t.error.message,"warning"));case 3:return a.a(2)}},a,null,[[0,2]])}))()},actualizarTalonario:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/talonarioController/updateTalon",{params:e.form});case 1:return o=a.v,e.$alert(o.message,"success"),e.openModal=!1,a.n=2,e.getTalonarios();case 2:e.openModal=!1,a.n=4;break;case 3:return a.p=3,t=a.v,a.a(2,e.$alert(t.error.message,"warning"));case 4:return a.a(2)}},a,null,[[0,3]])}))()},submitTalonario:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.validate(e.form);case 1:if(o=a.v,"error"!==o.status){a.n=2;break}return a.a(2,e.$alert(o.exception,"warning"));case 2:e.form.CORREO=Number(e.false_value===e.form.DELECTRONICO)&&e.form.CORREO,e.$confirm("¿Esta seguro de ".concat(e.mode," el talonario?")).onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:if("Agregar"!==e.mode){a.n=2;break}return a.n=1,e.insertarTalonario();case 1:a.n=3;break;case 2:return a.n=3,e.actualizarTalonario();case 3:return a.a(2)}},a)})));case 3:return a.a(2)}},a)}))()},createTalonario:function(){this.tabClick1(),this.openModal=!0,this.mode="Agregar",this.clear()},clear:function(){this.tabsActive={generales:!0,contabilidad:!1},this.form.NUMTAL="",this.form.NUMSER="",this.form.TALDES="",this.form.ORIPAG="",this.form.DOCCOD="",this.form.DELECTRONICO="N",this.form.ID_COMPROBANTE="",this.form.SERIE_ELECTRONICO="",this.form.NUMPAG="0000001",this.form.CODSUNAT="",this.form.CORREO=0,this.form.ACTIVO=1,this.form.USE_CONTABILIDAD=1}}};const Eo=(0,_.A)(bo,[["render",co]]);var Do=Eo,vo={class:"row q-mt-sm"},To={class:"col headerTable"},wo={class:"text-h6"},Ro={key:0,class:"row q-ma-xs q-col-gutter-sm"},No={class:"col-xs-6"},Io={class:"col-xs-6"},_o={class:"col-xs-12"},Vo={class:"col-xs-6"},Lo={class:"col-xs-6"},So={class:"col-xs-6"},Mo={class:"col-xs-6"},Po={class:"col-xs-6"},ko={class:"q-pa-sm"},Bo={class:"col-xs-6"},Uo={class:"q-pa-sm"},xo={key:1,class:"row q-ma-xs q-col-gutter-sm"},Fo={class:"col-xs-6"},Go={class:"col-xs-6 flex align-start"},yo={class:"col-xs-6 flex align-start"},$o={class:"col-xs-6"},qo={class:"col-xs-6 flex align-start"},Xo={class:"col-xs-6"},zo={class:"col-xs-6 flex align-start"},Qo={class:"col-xs-6 flex align-start"},Jo={class:"col-xs-6 flex align-start"},jo={key:2,class:"row q-ma-xs q-col-gutter-sm"},Ho={class:"col-xs-6"},Wo={class:"col-xs-6"},Ko={class:"col-xs-6"},Zo={class:"col-xs-6"},Yo={class:"col-xs-6"},et={class:"col-xs-6"},at={class:"col-xs-6"},ot={class:"col-xs-6"},tt={class:"col-xs-6"},nt={class:"q-pa-sm"};function rt(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-card-section"),s=(0,n.g2)("q-tab"),c=(0,n.g2)("q-tabs"),u=(0,n.g2)("q-select"),d=(0,n.g2)("q-input"),m=(0,n.g2)("q-option-group"),C=(0,n.g2)("q-checkbox"),f=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",vo,[(0,n.Lk)("div",To,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.crearConcepto,flat:""},{default:(0,n.k6)(function(){return j()(a[30]||(a[30]=[(0,n.eW)("Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 265px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,frameworkComponents:e.frameworkComponents,defaultColDef:e.defaultColDef,enableCellTextSelection:"",floatingFilter:""},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","frameworkComponents","defaultColDef"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),style:{width:"100%"},max:e.pages,onLoad:e.getConceptos,rows:e.contador},null,8,["modelValue","max","onLoad","rows"])]),(0,n.bF)(f,{modelValue:e.openModal,"onUpdate:modelValue":a[29]||(a[29]=function(a){return e.openModal=a}),onSubmit:e.submit,customWidth:"600px"},{default:(0,n.k6)(function(){return[(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",wo,(0,l.v_)(e.operacion)+" Concepto de Cobro: "+(0,l.v_)(e.concobro.CONDES),1)]}),_:1}),(0,n.bF)(c,{modelValue:e.tabActivo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.tabActivo=a})},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{name:e.tabsKeys.index},{default:(0,n.k6)(function(){return j()(a[31]||(a[31]=[(0,n.eW)("Datos",-1)]))}),_:1},8,["name"]),(0,n.bF)(s,{name:e.tabsKeys.otro},{default:(0,n.k6)(function(){return j()(a[32]||(a[32]=[(0,n.eW)("Otros",-1)]))}),_:1},8,["name"]),(0,n.bF)(s,{name:e.tabsKeys.config},{default:(0,n.k6)(function(){return j()(a[33]||(a[33]=[(0,n.eW)("Configuración",-1)]))}),_:1},8,["name"])]}),_:1},8,["modelValue"]),(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[e.tabActivo===e.tabsKeys.index?((0,n.uX)(),(0,n.CE)("div",Ro,[(0,n.Lk)("div",No,[(0,n.bF)(u,{label:"Modalidad de impresion",options:e.fImpresion,"option-label":"VALOR","option-value":"CLAVE",modelValue:e.concobro.MODDES,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.concobro.MODDES=a}),onInput:e.prueba},null,8,["options","modelValue","onInput"])]),(0,n.Lk)("div",Io,[(0,n.bF)(u,{"option-value":"value","option-label":"label",label:"Moneda",options:e.monOption,modelValue:e.concobro.MONCOD,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.concobro.MONCOD=a})},null,8,["options","modelValue"])]),(0,n.Lk)("div",_o,[(0,n.bF)(d,{label:"Concepto",placeholder:"Ingrese nombre del Concepto",modelValue:e.concobro.CONDES,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.concobro.CONDES=a}),maxlength:e.concobroLength.CONDES},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Vo,[(0,n.bF)(d,{label:"Abreviatura",placeholder:"Ingrese abreviatura",modelValue:e.concobro.CONABR,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.concobro.CONABR=a}),maxlength:e.concobroLength.CONABR},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Lo,[(0,n.bF)(d,{label:"Código (Opcional)",placeholder:"Ingrese Código del concepto",modelValue:e.concobro.CONCOB,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.concobro.CONCOB=a}),maxlength:e.concobroLength.CONCOB,readonly:e.disabledConcob},null,8,["modelValue","maxlength","readonly"])]),(0,n.Lk)("div",So,[(0,n.bF)(d,{label:"Monto",placeholder:"Ingrese Monto",type:"number",modelValue:e.concobro.MONTO,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.concobro.MONTO=a}),maxlength:e.concobroLength.MONTO},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Mo,[(0,n.bF)(d,{label:"Mora",placeholder:"Ingrese mora",type:"number",modelValue:e.concobro.CONMORA,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.concobro.CONMORA=a}),onBlur:e.formatearMora},null,8,["modelValue","onBlur"])]),(0,n.Lk)("div",Po,[(0,n.Lk)("div",ko,[a[34]||(a[34]=(0,n.eW)("IGV :",-1)),(0,n.bF)(m,{options:e.Options,inline:"",modelValue:e.concobro.AFEIGV,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.concobro.AFEIGV=a})},null,8,["options","modelValue"])])]),(0,n.Lk)("div",Bo,[(0,n.Lk)("div",Uo,[a[35]||(a[35]=(0,n.eW)("ESTADO :",-1)),(0,n.bF)(m,{color:"purple",options:e.OptionsEstado,inline:"",modelValue:e.concobro.ACTIVO,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.concobro.ACTIVO=a})},null,8,["options","modelValue"])])])])):(0,n.Q3)("v-if",!0),e.tabActivo===e.tabsKeys.config?((0,n.uX)(),(0,n.CE)("div",xo,[(0,n.Lk)("div",Fo,[(0,n.bF)(C,{label:"Ingreso varios",modelValue:e.concobro.INGVAR,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.concobro.INGVAR=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",Go,[(0,n.bF)(C,{label:"Usar pagos c/ Mora",modelValue:e.concobro.FLAT_MORA,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.concobro.FLAT_MORA=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",yo,[(0,n.bF)(C,{label:"Usa talonario exclusivo",modelValue:e.concobro.FLAT_USA_TALON,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.concobro.FLAT_USA_TALON=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",$o,[(0,n.bF)(u,{class:"truncate-label",label:"Talonario para pago",options:e.talonarios,disable:!e.concobro.FLAT_USA_TALON,modelValue:e.concobro.NUMTAL,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.concobro.NUMTAL=a}),"option-label":"TALONARIO","option-value":"NUMTAL"},null,8,["options","disable","modelValue"])]),(0,n.Lk)("div",qo,[(0,n.bF)(C,{label:"Usar para Refinanciamiento",modelValue:e.concobro.FLAT_REF,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.concobro.FLAT_REF=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",Xo,[(0,n.bF)(d,{type:"number",label:"Nro. Orden Refinanciamiento",disable:!e.concobro.FLAT_REF,modelValue:e.concobro.ORDEN,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.concobro.ORDEN=a})},null,8,["disable","modelValue"])]),(0,n.Lk)("div",zo,[(0,n.bF)(C,{label:"Usar para Letras/Ref.",modelValue:e.concobro.FLAT_LETRA,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.concobro.FLAT_LETRA=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",Qo,[(0,n.bF)(C,{label:"Usar para nota de Débito",modelValue:e.concobro.FLAT_NOTA_DEBITO,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.concobro.FLAT_NOTA_DEBITO=a}),"true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",Jo,[(0,n.bF)(d,{type:"number",label:"Días de Expiración (CIP)",modelValue:e.concobro.DIAS_EXPIRACION_PAS,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.concobro.DIAS_EXPIRACION_PAS=a})},null,8,["modelValue"])])])):(0,n.Q3)("v-if",!0),e.tabActivo===e.tabsKeys.otro?((0,n.uX)(),(0,n.CE)("div",jo,[(0,n.Lk)("div",Ho,[(0,n.bF)(u,{label:"Tipo Movimiento",options:e.tipoMov,"option-label":"label","option-value":"value",modelValue:e.concobro.TIPMOV,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.concobro.TIPMOV=a})},null,8,["options","modelValue"])]),(0,n.Lk)("div",Wo,[(0,n.bF)(u,{label:"Partida Contable",options:e.partidaContable,"option-label":"NOMBRE","option-value":"CODIGO",modelValue:e.concobro.PARTIDA,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.concobro.PARTIDA=a})},null,8,["options","modelValue"])]),(0,n.Lk)("div",Ko,[(0,n.bF)(d,{label:"Centro de Costos",placeholder:"Ingrese código de centro de costos",modelValue:e.concobro.CENCOS,"onUpdate:modelValue":a[22]||(a[22]=function(a){return e.concobro.CENCOS=a})},null,8,["modelValue"])]),(0,n.Lk)("div",Zo,[(0,n.bF)(d,{label:"Codigo Area",placeholder:"Ingrese codigo de area",modelValue:e.concobro.CODAREA,"onUpdate:modelValue":a[23]||(a[23]=function(a){return e.concobro.CODAREA=a}),maxlength:3},null,8,["modelValue"])]),(0,n.Lk)("div",Yo,[(0,n.bF)(d,{label:"Código Servicio sunat",placeholder:"Ingrese codigo de servicio para sunat",modelValue:e.concobro.CODSER_SUNAT,"onUpdate:modelValue":a[24]||(a[24]=function(a){return e.concobro.CODSER_SUNAT=a}),maxlength:e.concobroLength.CODSER_SUNAT},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",et,[(0,n.bF)(d,{label:"Código de Articulo",placeholder:"Ingrese codigo de Articulo",modelValue:e.concobro.ARTCOD,"onUpdate:modelValue":a[25]||(a[25]=function(a){return e.concobro.ARTCOD=a}),maxlength:e.concobroLength.ARTCOD},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",at,[(0,n.bF)(u,{label:"Concepto Grupo",options:e.conceptosCobros,modelValue:e.concobro.CONCOB_GRUPO,"onUpdate:modelValue":a[26]||(a[26]=function(a){return e.concobro.CONCOB_GRUPO=a}),"option-label":"CONDES","option-value":"CONCOB"},null,8,["options","modelValue"])]),(0,n.Lk)("div",ot,[(0,n.bF)(d,{type:"number",label:"Monto adicional",placeholder:"Ingrese Monto adicional",modelValue:e.concobro.MONTO_ADI,"onUpdate:modelValue":a[27]||(a[27]=function(a){return e.concobro.MONTO_ADI=a})},null,8,["modelValue"])]),(0,n.Lk)("div",tt,[(0,n.Lk)("div",nt,[a[36]||(a[36]=(0,n.eW)("BECA :",-1)),(0,n.bF)(m,{options:e.Options,inline:"",modelValue:e.concobro.CONBECA,"onUpdate:modelValue":a[28]||(a[28]=function(a){return e.concobro.CONBECA=a})},null,8,["options","modelValue"])])])])):(0,n.Q3)("v-if",!0)]}),_:1})]}),_:1},8,["modelValue","onSubmit"])])}t(71225),t(39866),t(5962),t(35534),t(515),t(62692);var lt=t(43554),it=t(96139);Object.assign(w.A.components,{sieMoneda:it.A});var st={components:{sieGrid:f.A,sieModal:R.A,formulario:w.A,footerGrid:q.A,QCardSection:E.A,QSeparator:D.A,QInput:be.A,QOptionGroup:Oe.EX,QSelect:Ee.S,QCheckbox:Oe.vZ,QTab:A.A,QTabs:p.A,QBtn:Oe.Il},mixins:[Qe.A,N.A],data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,nivelAcceso:(0,v["default"])().ruta.nivel,frameworkComponents:null,columnDefs:null,rowData:null,api:null,openModal:!1,schema:[],conceptosCobros:[],title:"",pagina:1,pages:1,concobro:{CONCOB:"",CONDES:"",CONABR:"",MONCOD:"01",MONTO:0,CONMORA:0,TIPMOV:"",PARTIDA:"001",MODDES:"",ACTIVO:1,AFEIGV:0,CONBECA:"",CODSER_SUNAT:"",INGVAR:1,ARTCOD:"",CONCOB_GRUPO:"",MONTO_ADI:0,NUMTAL:"",FLAT_USA_TALON:0,CODAREA:"",FLAT_REF:0,FLAT_LETRA:0,ORDEN:0,FLAT_NOTA_DEBITO:0,FLAT_MORA:0,CENCOS:"",DIAS_EXPIRACION_PAS:1},concobroLength:{CONCOB:0,CONDES:0,CONABR:0,MONCOD:0,MONTO:0,CONMORA:0,TIPMOV:0,PARTIDA:0,MODDES:0,ACTIVO:0,AFEIGV:0},defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0},Options:[{label:"SI",value:"S"},{label:"NO",value:"N"}],OptionsEstado:[{label:"Activo",value:1},{label:"Inactivo",value:0}],monOption:[],fImpresion:[],partidaContable:[],tipoMov:[{value:1,label:"Ingreso"},{value:2,label:"Egreso"}],operacion:"insertar",disabledConcob:!1,filtro:{codigo:"",concepto:""},talonarios:[],usuario:(0,v["default"])().usucod,admins:x["default"].USUARIOS_ADMIN,rowInitial:[],contador:0,tabActivo:"index",tabsKeys:{index:"index",config:"config",otro:"otro"}}},methods:{getTalonarios:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/talonarioController/getTalon");case 1:o=a.v,e.talonarios=o.filter(function(e){return![x["default"].CODSUNAT.NOTA_CREDITO,x["default"].CODSUNAT.NOTA_DEBITO].includes(e.CODSUNAT)});case 2:return a.a(2)}},a)}))()},filtroConceptos:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:o=j()(e.rowInitial),(e.filtro.codigo||e.filtro.concepto)&&(o=o.filter(function(a){var o=!0,t=!0;return e.filtro.concepto&&(o=a.CONDES.toLowerCase().includes(e.filtro.concepto.toLowerCase())),e.filtro.codigo&&(t=a.CONCOB.toLowerCase().includes(e.filtro.codigo.toLowerCase())),t&&o})),e.rowData=o;case 1:return a.a(2)}},a)}))()},getRowLength:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,ea.n)(["concobro"]);case 1:o=a.v,t=o.CONCOBRO,e.concobroLength.CONCOB=t.CONCOB,e.concobroLength.CONDES=t.CONDES,e.concobroLength.CONABR=t.CONABR,e.concobroLength.MONCOD=t.MONCOD,e.concobroLength.MONTO=t.MONTO,e.concobroLength.CONMORA=t.MORA,e.concobroLength.TIPMOV=t.TIPMOV,e.concobroLength.PARTIDA=t.PARTIDA,e.concobroLength.MODDES=t.MODDES,e.concobroLength.ACTIVO=t.ACTIVO,e.concobroLength.AFEIGV=t.AFEIGV,e.concobroLength.CODSER_SUNAT=t.CODSER_SUNAT,e.concobroLength.ARTCOD=t.ARTCOD,e.concobroLength.CENCOS=t.CENCOS||10;case 2:return a.a(2)}},a)}))()},limpiar:function(){this.concobro.CONCOB="",this.concobro.NUMTAL="",this.concobro.FLAT_USA_TALON=0,this.concobro.CONDES="",this.concobro.CONABR="",this.concobro.MONCOD=x["default"].MONEDA_LOCAL,this.concobro.MONTO=0,this.concobro.CONMORA=0,this.concobro.AFEIGV="N",this.concobro.MODDES="1",this.concobro.TIPMOV=1,this.concobro.PARTIDA="001",this.concobro.ACTIVO=1,this.concobro.CONBECA="N",this.concobro.CODAREA="",this.concobro.FLAT_NOTA_DEBITO=0,this.concobro.FLAT_REF=0,this.concobro.FLAT_LETRA=0,this.concobro.ORDEN=0,this.concobro.FLAT_MORA=0,this.concobro.CENCOS="",this.concobro.DIAS_EXPIRACION_PAS=1},validarConcepto:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,e.concobro.CONDES){a.n=1;break}throw new Error("No se colocó la descripción del concepto");case 1:if(e.concobro.MONCOD){a.n=2;break}throw new Error("No se seleccionó la moneda");case 2:if(!isNaN(e.concobro.MONTO)){a.n=3;break}throw new Error("No registro el monto del concepto");case 3:if(!isNaN(e.concobro.CONMORA)){a.n=4;break}throw new Error("No registro el monto de la mora del concepto");case 4:e.concobro.MONTO=Number(e.concobro.MONTO),e.concobro.CONMORA=Number(e.concobro.CONMORA),a.n=6;break;case 5:throw a.p=5,o=a.v,new Error(o.message);case 6:if(0!==String(e.concobro.ORDEN).trim().length&&Number.isInteger(Number(e.concobro.ORDEN))){a.n=7;break}throw new Error("El número de orden debe ser un numero entero");case 7:return a.a(2)}},a,null,[[0,5]])}))()},submit:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:"Agregar"===e.operacion?e.insertConCobro():e.updateConCobro();case 1:return a.a(2)}},a)}))()},updateConCobro:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,e.validarConcepto();case 1:e.$confirm("¿Está seguro de actualizar los datos?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/ConcobroController/updateConceptoCobro",{datos:e.concobro});case 1:o=a.v,e.$alert(o.message,"success"),e.getConceptos(),e.openModal=!1,a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error?t.error.message:t.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))),a.n=3;break;case 2:a.p=2,o=a.v,e.$alert(o.error.message.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()},insertConCobro:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,e.validarConcepto();case 1:e.$confirm("¿Está seguro de registrar el concepto?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/ConcobroController/addConceptoCobro",{datos:e.concobro});case 1:o=a.v,e.$alert(o.message,"success"),e.getConceptos(),e.openModal=!1,e.limpiar(),a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error?t.error.message:t.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))),a.n=3;break;case 2:a.p=2,o=a.v,e.$alert(o.error?o.error.message:o.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()},getFormaImpresion:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,T.$http)("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0009"}}});case 1:e.fImpresion=a.v;case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api,this.api.sizeColumnsToFit()},getPartidaContable:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,T.$http)("api/ConcobroController/getPartidaContable",{params:{params:{}}});case 1:e.partidaContable=a.v;case 2:return a.a(2)}},a)}))()},getMonedas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,x["default"].API_MONEDAS();case 1:e.monOption=a.v;case 2:return a.a(2)}},a)}))()},deleteConcepto:function(e){var a=this;this.$confirm("¿Esta seguro de eliminar el concepto: ".concat(e.data.CONDES,"? "),"delete").onOk(B()(P()().m(function o(){var t,n;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,T.$http.delete("api/ConcobroController/deleteConceptoCobro",{params:{datos:{CONCOB:e.data.CONCOB}}});case 1:t=o.v,a.$alert(t.message,"success"),a.getConceptos(),o.n=3;break;case 2:o.p=2,n=o.v,a.$alert(n.error?n.error.message:n.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])})))},getConceptos:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/ConcobroController/getConceptos",{params:{parametros:{response:"list"}}});case 1:o=a.v,e.rowData=o,e.rowInitial=o,e.contador=o.length;case 2:return a.a(2)}},a)}))()},crearConcepto:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.limpiar();case 1:e.operacion="Agregar",e.openModal=!0,e.disabledConcob=!1;case 2:return a.a(2)}},a)}))()},setUpdateConceptoCobro:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.limpiar();case 1:e=e.data,a.concobro.CONCOB=(0,lt.k)(e.CONCOB,2),a.concobro.CONDES=e.CONDES,a.concobro.CONABR=e.CONABR,a.concobro.MONCOD=e.MONCOD,a.concobro.MONTO=e.MONTO,a.concobro.CONMORA=e.CONMORA,a.concobro.AFEIGV=e.AFEIGV,a.concobro.MODDES=e.MODDES,a.concobro.TIPMOV=e.TIPMOV,a.concobro.PARTIDA="00"+e.PARTIDA,a.concobro.ACTIVO=e.ACTIVO,a.concobro.CONBECA=e.CONBECA,a.concobro.CODSER_SUNAT=e.CODSER_SUNAT,a.concobro.INGVAR=e.INGVAR,a.concobro.ARTCOD=e.ARTCOD,a.concobro.CONCOB_GRUPO=e.CONCOB_GRUPO,a.concobro.MONTO_ADI=e.MONTO_ADI,a.concobro.NUMTAL=e.NUMTAL,a.concobro.CENCOS=e.CENCOS,a.concobro.FLAT_USA_TALON=e.FLAT_USA_TALON||0,a.concobro.CODAREA=e.CODAREA,a.concobro.FLAT_REF=Number(e.FLAT_REF),a.concobro.FLAT_LETRA=Number(e.FLAT_LETRA),a.concobro.ORDEN=Number(e.ORDEN),a.concobro.FLAT_NOTA_DEBITO=Number(e.FLAT_NOTA_DEBITO),a.concobro.FLAT_MORA=Number(e.FLAT_MORA),a.concobro.DIAS_EXPIRACION_PAS=Object.keys(e).includes("DIAS_EXPIRACION_PAS")?Number(e.DIAS_EXPIRACION_PAS):1,a.disabledConcob=!0,a.operacion="Editar",a.openModal=!0;case 2:return o.a(2)}},o)}))()},prueba:function(e){console.log(e)},setColumns:function(){this.columnDefs=[{headerName:"Código",field:"CONCOB",sortable:!0,width:60},{headerName:"Concepto",field:"CONDES",sortable:!0,width:200},{headerName:"Mora",field:"CONMORA",valueFormatter:De.toFixed,decimales:4,cellClass:"text-right",width:60},{headerName:"Talon",field:"TALON",width:60},{headerName:"Moneda",field:"MONEDA",width:60},{headerName:"Monto",field:"MONTO",valueFormatter:De.toFixed,cellClass:"text-right",width:70},{headerName:"IGV",field:"AFECTA_IGV",width:50},{headerName:"Beca",field:"AFECTA_BECA",width:70,hide:!0},{headerName:"Modalidad Impresión",field:"TIPO_IMPRESION",width:220,hide:!0},{headerName:"Abreviatura",field:"CONABR",width:120,hide:!0},{headerName:"Tipo Movimiento",field:"TIPO_MOVIMIENTO",width:120},{headerName:"Concepto Grupo",field:"CONCEPTO_GRUPO",width:150},{headerName:"Partida",field:"PARTIDA_CONTABLE",width:200,hide:!0},{headerName:"Código Externo",field:"CONCOB_EXT",width:120,hide:!0},{headerName:"Código Sunat",field:"CONCOB_SUNAT",width:120,hide:!0},{headerName:"Estado",field:"ESTADO_ACTIVO",width:100,hide:!0},{headerName:"",width:50,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Editar",onClick:this.setUpdateConceptoCobro},hide:this.nivelAcceso<x["default"].LECTURA_ESCRITURA,filter:!1},{headerName:"",width:50,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:this.deleteConcepto},hide:this.nivelAcceso<x["default"].ACCESO_TOTAL,filter:!1},{headerName:"modified",field:"modified",hide:!0}]},formatearMora:function(){var e=this.concobro.CONMORA;isNaN(e)&&(this.concobro.CONMORA=0),e>9999&&(this.concobro.CONMORA=9999)},getConceptosGrupos:function(){return B()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,T.$http.get("api/concobroController/getGruposConceptos",{params:{params:{}}}))}},e)}))()},llenarCboGrupoConp:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getConceptosGrupos();case 1:e.conceptosCobros=a.v;case 2:return a.a(2)}},a)}))()}},beforeMount:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.getMonedas(),e.getFormaImpresion(),e.getPartidaContable(),e.frameworkComponents={agSelect:ge.A,actionButton:U.A},e.getConceptos(),e.getRowLength(),e.setColumns(),e.llenarCboGrupoConp(),e.getTalonarios();case 1:return a.a(2)}},a)}))()},create:function(){}};const ct=(0,_.A)(st,[["render",rt]]);var ut=ct,dt={class:"row q-ma-xs q-col-gutter-sm"},mt={class:"col-xs-3"},Ct={class:"col-xs-3"},ft={class:"col-xs-3"},pt={class:"row q-mt-sm"},At={class:"col headerTable"},ht={class:"row q-ma-xs q-col-gutter-sm"},Ot={class:"col-xs-12"},gt={class:"text-h6"},bt={class:"col-xs-12"},Et={class:"col-xs-12 col-sm-6"},Dt={class:"col-xs-12 col-sm-6"},vt={class:"col-xs-12 col-sm-6"},Tt={class:"col-xs-12 col-sm-6"};function wt(e,a){var o=(0,n.g2)("q-select"),t=(0,n.g2)("q-input"),r=(0,n.g2)("q-btn"),i=(0,n.g2)("sie-grid"),s=(0,n.g2)("footer-grid"),c=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",dt,[(0,n.Lk)("div",mt,[(0,n.bF)(o,{label:"Año",placeholder:"Ingrese Año",modelValue:e.filtro.anio,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.filtro.anio=a}),options:e.anios,"option-label":"label","option-value":"value",onInput:e.filtroBecas},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",Ct,[(0,n.bF)(t,{placeholder:"Ingrese Código de Beca",modelValue:e.filtro.codigo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.filtro.codigo=a}),label:"Código",onInput:e.filtroBecas},null,8,["modelValue","onInput"])]),(0,n.Lk)("div",ft,[(0,n.bF)(t,{placeholder:"Ingrese nombre de Beca",modelValue:e.filtro.beca,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.filtro.beca=a}),label:"Beca",onInput:e.filtroBecas},null,8,["modelValue","onInput"])])]),(0,n.Lk)("div",pt,[(0,n.Lk)("div",At,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(r,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,n.k6)(function(){return j()(a[10]||(a[10]=[(0,n.eW)("Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])]),(0,n.bF)(i,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 304px)"}},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","frameworkComponents"]),(0,n.bF)(s,{modelValue:e.pagina,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getBecas,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,n.bF)(c,{title:e.titleModal,modelValue:e.openModal,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.openModal=a}),onSubmit:e.procesoBecas},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ht,[(0,n.Lk)("div",Ot,[(0,n.Lk)("div",gt,(0,l.v_)(e.title),1)]),(0,n.Lk)("div",bt,[(0,n.bF)(t,{modelValue:e.form.BECADES,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.BECADES=a}),label:"Beca",placeholder:"Ingrese nombre de beca",maxlength:e.dataDDl.BECADES},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",Et,[(0,n.bF)(o,{disable:e.cambiarTipoBEca,modelValue:e.form.BECATIPO,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.form.BECATIPO=a}),label:"Tipo de Beca",placeholder:"Seleccione el tipo de beca",options:e.comboTipoBecas,"option-value":"CLAVE","option-label":"VALOR",onInput:e.cambiarLabelTipoBeca,maxlength:e.dataDDl.BECATIPO},null,8,["disable","modelValue","options","onInput","maxlength"])]),(0,n.Lk)("div",Dt,[(0,n.bF)(t,{modelValue:e.form.BECAPOR,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.form.BECAPOR=a}),label:e.tipoBeca,type:"number",placeholder:"Ingrese importe de beca",maxlength:e.dataDDl.BECAPOR},null,8,["modelValue","label","maxlength"])]),(0,n.Lk)("div",vt,[(0,n.bF)(t,{modelValue:e.form.BECACOD,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.form.BECACOD=a}),maxlength:"2",label:"Código Beca",readonly:e.disabled,placeholder:"Código de Beca del sistem"},null,8,["modelValue","readonly","maxlength"])]),(0,n.Lk)("div",Tt,[(0,n.bF)(t,{modelValue:e.form.BECAABR,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.form.BECAABR=a}),label:"Abreviatura",placeholder:"Ingrese abreviatura para reportes",maxlength:e.dataDDl.BECAABR},null,8,["modelValue","maxlength"])])])]}),_:1},8,["title","modelValue","onSubmit"])])}var Rt={components:{sieGrid:f.A,sieModal:R.A,formulario:w.A,footerGrid:q.A,QSelect:Ee.S,QInput:be.A,QBtn:Oe.Il},mixins:[Qe.A,N.A],data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,nivelAcceso:(0,v["default"])().ruta.nivel,anioVigente:(0,v["default"])().ano,columnDefs:null,rowData:null,rowDataAsigna:null,api:null,frameworkComponents:null,autoGroupColumnDef:null,schema:[],openModal:!1,titleModal:"SieWeb Tesorería",title:"",pagina:1,pages:1,flag:"actualizar",tipoBeca:"Porcentaje de Beca",comboTipoBecas:"1",cantidad_beca:"",cantidad_asigandos:"",disabled:!0,NUEVO_ID_BECA:"",cabeceraTipo:"",form:{BECADES:"",BECACOD:"",BECAPOR:"",BECATIPO:"",BECAABR:""},constantes:null,filtro:{codigo:"",beca:"",anio:String(x["default"].CURRENT_YEAR)},rowDataInitial:[],anios:[],cambiarTipoBEca:!0,dataDDl:{}}},methods:{getAnios:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,x["default"].API_ANIOS();case 1:e.anios=a.v,e.filtroBecas();case 2:return a.a(2)}},a)}))()},filtroBecas:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.n){case 0:o=j()(e.rowDataInitial),t=o.filter(function(a){var o=e.filtro,t=o.codigo,n=o.beca,r=o.anio;return!(t&&t.length>0&&!1===String(a.BECACOD).toLowerCase().includes(String(t).toLowerCase()))&&(!(n&&n.length>0&&!1===String(a.BECADES).toLowerCase().includes(String(n).toLowerCase()))&&!(r&&String(r).length>0&&!1===String(a.ANOBEC).toLowerCase().includes(String(r).toLowerCase())))}),e.rowData=t;case 1:return a.a(2)}},a)}))()},getConstanteSistema:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return o={ID_CONSTANTE:[x["default"].CONSTANTES_SISTEMA.P_TIPBECA]},a.n=1,x["default"].API_CONSTANTES_SISTEMAS(o);case 1:e.constantes=a.v,"P"===e.constantes.P_tipBeca?e.cabeceraTipo="Porcentaje":"M"===e.constantes.P_tipBeca?e.cabeceraTipo="Monto":"D"===e.constantes.P_tipBeca?e.cabeceraTipo="Monto Desc.":"J"===e.constantes.P_tipBeca&&(e.cabeceraTipo="Porcentaje Desc.");case 2:return a.a(2)}},a)}))()},addRow:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getConstanteSistema();case 1:e.form.ID_BECA=""===e.NUEVO_ID_BECA?1:e.NUEVO_ID_BECA,e.form.BECADES="",e.form.BECACOD="",e.form.BECAPOR="","P"===e.constantes.P_tipBeca?e.form.BECATIPO="1":"M"===e.constantes.P_tipBeca?e.form.BECATIPO="2":"D"===e.constantes.P_tipBeca?e.form.BECATIPO="3":"J"===e.constantes.P_tipBeca&&(e.form.BECATIPO="4"),e.form.BECAABR="",e.disabled=!1,e.flag="agregar",e.openModal=!0,e.title="Agregar Beca","1"===e.form.BECATIPO?e.tipoBeca="Porcentaje de Beca":"2"===e.form.BECATIPO?e.tipoBeca="Monto de Beca":"3"===e.form.BECATIPO?e.tipoBeca="Monto descuento":"4"===e.form.BECATIPO&&(e.tipoBeca="Porcentaje Descuento");case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api},getBecas:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/becaController/getBeca",{params:{parametros:{RESPONSE:"list"}}});case 1:return o=a.v,e.rowData=o,e.rowDataInitial=j()(o),a.n=2,e.filtroBecas();case 2:return a.a(2)}},a)}))()},getBecaID:function(){var e=this;T.$http.get("api/becaController/getBeca").then(function(a){e.addModified(a),e.rowDataAsigna=a,e.NUEVO_ID_BECA=e.rowDataAsigna[e.rowDataAsigna.length-1].ID_BECA+1})},cambiarLabelTipoBeca:function(){"1"===this.form.BECATIPO?this.tipoBeca="Porcentaje de Beca":"2"===this.form.BECATIPO?this.tipoBeca="Monto de Beca":"3"===this.form.BECATIPO?this.tipoBeca="Monto descuento":"4"===this.form.BECATIPO&&(this.tipoBeca="Porcentaje Descuento")},procesoBecas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/becaController/getBeca",{params:{parametros:{BECACOD:e.form.BECACOD,ANOBEC:e.anioVigente}}}).then(function(a){e.addModified(a),e.rowDataC=a,e.cantidad_beca=e.rowDataC.length});case 1:return a.n=2,T.$http.get("api/becaController/getCantidadBecasOtorgadas",{params:{parametros:{BECACOD:e.form.BECACOD,ANOBEC:e.anioVigente}}}).then(function(a){e.addModified(a),e.rowDataCA=a,e.cantidad_asigandos=e.rowDataCA.length});case 2:"agregar"===e.flag?""===e.form.BECADES?e.$alert("Debe de colocar una descripción a esta Beca","info"):""===e.form.BECACOD?e.$alert("Debe de colocar el código de la beca","info"):""===e.form.BECAPOR?e.$alert("Debe de colocar el monto de la beca","info"):""===e.form.BECATIPO?e.$alert("Debe de seleccionar el tipo de la beca","info"):e.cantidad_beca>0?e.$alert("Ya existe una beca registrada con este código.","info"):e.$confirm("¿Estás seguro de agregar este registro?","save").onOk(B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/becaController/postBeca",{datos:{ID_BECA:e.form.ID_BECA,BECADES:e.form.BECADES,BECACOD:e.form.BECACOD,BECAPOR:e.form.BECAPOR,BECATIPO:e.form.BECATIPO,BECAABR:e.form.BECAABR,ANOBEC:e.filtro.anio}});case 1:e.flag="actualizar",e.getBecas(),e.getBecaID(),e.$alert("Beca registrada satisfactoriamente","success"),e.openModal=!1,a.n=3;break;case 2:return a.p=2,o=a.v,a.a(2,e.$alert(o.error?o.error.message:o.message,"warning"));case 3:return a.a(2)}},a,null,[[0,2]])}))):"actualizar"===e.flag&&(e.cantidad_asigandos>0?e.$alert("Esta Beca esta asignada a uno o mas alumnos, no se puede actualizar.","info"):(e.$confirm("¿Estás seguro de actualizar este registro?","info").onOk(B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.put("api/becaController/putBeca",{datos:{ID_BECA:e.form.ID_BECA,BECADES:e.form.BECADES,BECAPOR:e.form.BECAPOR,BECATIPO:e.form.BECATIPO,BECAABR:e.form.BECAABR,ANOBEC:e.filtro.anio}});case 1:e.getBecas(),e.getBecaID(),e.$alert("Beca actualizada satisfactoriamente","success"),e.openModal=!1,a.n=3;break;case 2:return a.p=2,o=a.v,a.a(2,e.$alert(o.error?o.error.message:o.message,"warning"));case 3:return a.a(2)}},a,null,[[0,2]])}))),e.getBecas(),e.getBecaID()));case 3:return a.a(2)}},a)}))()},eliminarBeca:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,T.$http.get("api/becaController/getCantidadBecasOtorgadas",{params:{parametros:e}}).then(function(e){a.addModified(e),a.rowDataCA=e,a.cantidad_asigandos=a.rowDataCA.length});case 1:a.cantidad_asigandos>0?a.$alert("Esta Beca esta asignada a uno o mas alumnos, no se puede eliminar.","info"):a.$confirm("¿Estás seguro de eliminar esta beca?","delete").onOk(B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,T.$http.delete("api/becaController/deleteBeca",{params:{datos:{ANOBEC:e.ANOBEC,BECACOD:e.BECACOD,ID_BECA:e.ID_BECA}}});case 1:a.$alert("Beca eliminada satisfactoriamente","success"),a.getBecas(),a.getBecaID();case 2:return o.a(2)}},o)})));case 2:return o.a(2)}},o)}))()}},beforeCreate:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,x["default"].VERIFICAR_USUARIO_ADMINISTRADOR();case 1:e.cambiarTipoBEca=!a.v;case 2:return a.a(2)}},a)}))()},beforeMount:function(){var e=this;return B()(P()().m(function a(){var o,t,n;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,ea.n)(["BECA"]);case 1:return o=a.v,e.dataDDl=o&&o.BECA?o.BECA:{},console.log("🚀 ~ file: script.js:310 ~ this.dataDDl:",e.dataDDl),e.frameworkComponents={agSelect:ge.A,actionButton:U.A},a.n=2,e.getConstanteSistema();case 2:return t=e,a.n=3,T.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{response:"combo",CODIGO:"0006",CLAVE:[1,2,3,4]}}});case 3:return n=a.v,Promise.all([n]).then(function(a){var o=he()(a,1),n=o[0];e.columnDefs=[{headerName:"ID",field:"ID_BECA",width:70},{headerName:"Año",field:"ANOBEC",width:100},{headerName:"Cod. Beca",field:"BECACOD",width:90},{headerName:"Beca",field:"BECADES",sortable:!0,width:280},{headerName:t.cabeceraTipo,field:"BECAPOR",cellClass:"text-right",width:100},{headerName:"Tipo de Beca",field:"BECATIPO",cellEditor:(0,Oa.A)(e,"BECATIPO",!1,"columnDefs"),cellEditorParams:{"option-label":"VALOR","option-value":"CLAVE",options:n},width:100},{headerName:"Abreviatura",field:"BECAABR",width:120,hide:!0},{headerName:"",hide:e.nivelAcceso<x["default"].LECTURA_ESCRITURA,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Editar",onClick:function(e){var a=[e.data];t.form.ID_BECA=a[0].ID_BECA,t.form.BECADES=a[0].BECADES,t.form.BECACOD=a[0].BECACOD,t.form.BECAPOR=a[0].BECAPOR,t.form.BECATIPO=a[0].BECATIPO.toString(),t.form.BECAABR=a[0].BECAABR,t.form.ANOBEC=t.anioVigente,t.disabled=!0,"1"===t.form.BECATIPO?t.tipoBeca="Porcentaje de Beca":"2"===t.form.BECATIPO?t.tipoBeca="Monto de Beca":"3"===t.form.BECATIPO?t.tipoBeca="Monto descuento":"4"===t.form.BECATIPO&&(t.tipoBeca="Porcentaje Descuento"),t.flag="actualizar",t.openModal=!0,t.title="Editar Beca"}},width:40},{headerName:"",hide:e.nivelAcceso<x["default"].ACCESO_TOTAL,width:40,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var a=[e.data],o={ID_BECA:a[0].ID_BECA,ANOBEC:a[0].ANOBEC,BECACOD:a[0].BECACOD};t.eliminarBeca(o)}}}],e.comboTipoBecas=n}),a.n=4,e.getBecas();case 4:return a.n=5,e.getBecaID();case 5:return a.n=6,e.getAnios();case 6:return a.a(2)}},a)}))()}};const Nt=(0,_.A)(Rt,[["render",wt]]);var It=Nt,_t={class:"row q-mt-sm"},Vt={class:"col headerTable"},Lt={class:"row q-ma-xs q-col-gutter-sm"},St={class:"col-xs-12"},Mt={class:"text-h6"},Pt={class:"col-xs-12"},kt={key:0,class:"col-xs-12 col-sm-12"},Bt={key:1,class:"col-xs-12 col-sm-12"},Ut={key:2,class:"col-xs-12 col-sm-12"},xt={key:3,class:"col-xs-12 col-sm-12"},Ft={key:4,class:"col-xs-12 col-sm-12"};function Gt(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-input"),s=(0,n.g2)("q-select"),c=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",_t,[(0,n.Lk)("div",Vt,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,n.k6)(function(){return j()(a[8]||(a[8]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",style:{width:"100%",height:"calc(100vh - 264px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,defaultColDef:e.defaultColDef},null,8,["columnDefs","rowData","onGridReady","frameworkComponents","onCellValueChanged","rowClassRules","defaultColDef"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getMotivoDeBecas,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,n.bF)(c,{title:e.titleModal,modelValue:e.openModal,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.openModal=a}),onSubmit:e.procesoBecas},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Lt,[(0,n.Lk)("div",St,[(0,n.Lk)("div",Mt,(0,l.v_)(e.title),1)]),(0,n.Lk)("div",Pt,[(0,n.bF)(i,{modelValue:e.form.MOTBECDES,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.MOTBECDES=a}),label:"Motivo",placeholder:"Ingrese motivo de beca"},null,8,["modelValue"])]),e.usaContabilidad?((0,n.uX)(),(0,n.CE)("div",kt,[(0,n.Q3)('q-input(v-model="form.CDEBE" label="Cta. Debe" placeholder="Ingrese cuenta contable")'),(0,n.bF)(s,{modelValue:e.form.CDEBE,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.form.CDEBE=a}),options:e.cuentaContable,"option-value":"CODCTA","option-label":"CTA",label:"Cta. Debe"},null,8,["modelValue","options"])])):(0,n.Q3)("v-if",!0),e.usaContabilidad?((0,n.uX)(),(0,n.CE)("div",Bt,[(0,n.Q3)('q-input(v-model="form.CHABER" label="Cta. Haber" placeholder="Ingrese cuenta contable")'),(0,n.bF)(s,{modelValue:e.form.CHABER,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.form.CHABER=a}),options:e.cuentaContable,"option-value":"CODCTA","option-label":"CTA",label:"Cta. Haber"},null,8,["modelValue","options"])])):(0,n.Q3)("v-if",!0),e.usaContabilidad?((0,n.uX)(),(0,n.CE)("div",Ut,[(0,n.Q3)('q-input(v-model="form.CHABERINI" label="Cta. Haber Inicial" placeholder="Ingrese cuenta contable")'),(0,n.bF)(s,{modelValue:e.form.CHABERINI,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.CHABERINI=a}),options:e.cuentaContable,"option-value":"CODCTA","option-label":"CTA",label:"Cta. Haber Inicial"},null,8,["modelValue","options"])])):(0,n.Q3)("v-if",!0),e.usaContabilidad?((0,n.uX)(),(0,n.CE)("div",xt,[(0,n.Q3)('q-input(v-model="form.CHABERPRIM" label="Cta. Haber Primaria" placeholder="Ingrese cuenta contable")'),(0,n.bF)(s,{modelValue:e.form.CHABERPRIM,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.form.CHABERPRIM=a}),options:e.cuentaContable,"option-value":"CODCTA","option-label":"CTA",label:"Cta. Haber Primaria"},null,8,["modelValue","options"])])):(0,n.Q3)("v-if",!0),e.usaContabilidad?((0,n.uX)(),(0,n.CE)("div",Ft,[(0,n.Q3)('q-input(v-model="form.CHABERSEC" label="Cta. Haber Secundaria" placeholder="Ingrese cuenta contable")'),(0,n.bF)(s,{modelValue:e.form.CHABERSEC,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.form.CHABERSEC=a}),options:e.cuentaContable,"option-value":"CODCTA","option-label":"CTA",label:"Cta. Haber Secundaria"},null,8,["modelValue","options"])])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["title","modelValue","onSubmit"])])}t(10239);var yt={components:{sieGrid:f.A,sieModal:R.A,formulario:w.A,footerGrid:q.A,QInput:be.A,QSelect:Ee.S,QBtn:Oe.Il},mixins:[Qe.A],data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,nivelAcceso:(0,v["default"])().ruta.nivel,titleModal:"SIEWEB: Tesorería",frameworkComponents:null,columnDefs:null,rowData:null,api:null,autoGroupColumnDef:null,openModal:!1,schema:[],title:"",pagina:1,pages:1,ultimo_id_motbec:"",flag:"actualizar",cantidad_asigandos:"",cantidad:"",cuentaContable:[],form:{MOTBECDES:"",CDEBE:"",CHABER:"",CHABERINI:"",CHABERPRIM:"",CHABERSEC:""},usaContabilidad:!1,defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0}}},methods:{onGridReady:function(e){this.api=e.api,this.api.sizeColumnsToFit()},addRow:function(){this.form.MOTBECCOD=this.ultimo_id_motbec,this.form.MOTBECDES="",this.form.CDEBE="",this.form.CHABER="",this.form.CHABERINI="",this.form.CHABERPRIM="",this.form.CHABERSEC="",this.flag="agregar",this.openModal=!0,this.title="Agregar Motivo de Beca"},saveMotivoBeca:function(){var e=this;T.$http.put("api/becaController/updateMotivoBeca",{datos:this.changes.updated}).then(function(a){e.changes.updated=[],(0,g.alert)(a.message,"success"),e.getMotivoDeBecas()}).catch(function(e){var a=e.error;(0,g.alert)(a.message,"warning")})},getMotivoDeBecas:function(){var e=this;T.$http.get("api/becaController/getMotivosDeBeca",{params:{parametros:{response:"list"}}}).then(function(a){e.addModified(a),e.rowData=a,e.ultimo_id_motbec=parseFloat(e.rowData[e.rowData.length-1].MOTBECCOD)+1})},procesoBecas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/becaController/getCantidadBecasOtorgadas",{params:{parametros:{MOTBECCOD:e.form.MOTBECCOD}}}).then(function(a){e.addModified(a),e.rowDataCA=a,e.cantidad_asigandos=e.rowDataCA});case 1:"agregar"===e.flag?""===e.form.MOTBECDES?e.$alert("Debe de colocar una descripción a esta registro.","info"):e.$confirm("¿Estás seguro de agregar este registro ?","save").onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.post("api/becaController/postMotivoBeca",{datos:{MOTBECCOD:e.form.MOTBECCOD,MOTBECDES:e.form.MOTBECDES,MOTBECAXE:"",CDEBE:e.form.CDEBE,CHABER:e.form.CHABER,CHABERINI:e.form.CHABERINI,CHABERPRIM:e.form.CHABERPRIM,CHABERSEC:e.form.CHABERSEC,CENCOS:""}});case 1:e.flag="new",e.getMotivoDeBecas(),e.$alert("Motivo de Beca registrada satisfactoriamente","success"),e.openModal=!1;case 2:return a.a(2)}},a)}))):"actualizar"===e.flag&&(e.cantidad_asigandos&&e.cantidad_asigandos.length>0&&e.cantidad_asigandos.at(0).MOTIVO!==e.form.MOTBECDES&&e.cantidad_asigandos.length>0?e.$alert("Esta registro esta asignado a una o mas becas otorgadas, no se puede actualizar.","info"):e.$confirm("¿Estás seguro de actualizar el registro ?","info").onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.put("api/becaController/putMotivoBeca",{datos:{MOTBECCOD:e.form.MOTBECCOD,MOTBECDES:e.form.MOTBECDES,MOTBECAXE:e.form.MOTBECAXE,CDEBE:e.form.CDEBE,CHABER:e.form.CHABER,CENCOS:e.form.CENCOS,CHABERINI:e.form.CHABERINI,CHABERPRIM:e.form.CHABERPRIM,CHABERSEC:e.form.CHABERSEC}});case 1:e.getMotivoDeBecas(),e.$alert("Registro Actualizado Satisfactoriamente","success"),e.openModal=!1;case 2:return a.a(2)}},a)}))));case 2:return a.a(2)}},a)}))()},eliminarMotivoBeca:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,T.$http.get("api/becaController/getCantidadBecasOtorgadas",{params:{parametros:{MOTBECCOD:e.MOTBECCOD}}}).then(function(e){a.addModified(e),a.rowDataCA=e,a.cantidad_asigandos=a.rowDataCA.length});case 1:a.cantidad_asigandos>0?a.$alert("Esta registro esta asignado a una o más becas otorgadas, no se puede eliminar.","info"):a.$confirm("¿Estás seguro de eliminar este registro ?","delete").onOk(B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,T.$http.delete("api/becaController/deleteMotivoBeca",{params:{datos:{MOTBECCOD:e.MOTBECCOD}}});case 1:a.$alert("Motivo de Beca Eliminada Satisfactoriamente","success"),a.getMotivoDeBecas();case 2:return o.a(2)}},o)})));case 2:return o.a(2)}},o)}))()}},beforeMount:function(){this.frameworkComponents={actionButton:U.A};var e=this,a=[{headerName:"Código",field:"MOTBECCOD",sortable:!0,width:70},{headerName:"Motivo de Beca",field:"MOTBECDES",editable:!0,sortable:!0,width:180}];a.push({headerName:"Cta. Debe",field:"CDEBE",editable:!0,width:90},{headerName:"Cta. Haber",field:"CHABER",editable:!0,width:90},{headerName:"Cta. Haber(I)",field:"CHABERINI",editable:!0,width:100},{headerName:"Cta. Haber(P)",field:"CHABERPRIM",editable:!0,width:100},{headerName:"Cta. Haber (S)",field:"CHABERSEC",editable:!0,width:100}),a.push({headerName:"",hide:this.nivelAcceso<x["default"].LECTURA_ESCRITURA,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Editar",onClick:function(a){var o=[a.data];e.form.MOTBECCOD=o[0].MOTBECCOD,e.form.MOTBECDES=o[0].MOTBECDES,e.form.MOTBECAXE=o[0].MOTBECAXE,e.form.CDEBE=o[0].CDEBE,e.form.CHABER=o[0].CHABER,e.form.CHABERINI=o[0].CHABERINI,e.form.CHABERPRIM=o[0].CHABERPRIM,e.form.CHABERSEC=o[0].CHABERSEC,e.form.CENCOS=o[0].CENCOS,e.flag="actualizar",e.openModal=!0,e.title="Editar Motivo de Beca"}},width:40},{headerName:"",width:40,hide:this.nivelAcceso<x["default"].ACCESO_TOTAL,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(a){var o=[a.data],t={MOTBECCOD:o[0].MOTBECCOD};e.eliminarMotivoBeca(t)}}},{headerName:"modified",field:"modified",hide:!0}),this.columnDefs=a,this.getMotivoDeBecas()},mounted:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/becaController/getUsaContabilidad",{params:{}});case 1:if(o=a.v,!(o.length>0)){a.n=3;break}return e.usaContabilidad=!0,a.n=2,x["default"].API_CTAS_CONTABLES();case 2:e.cuentaContable=a.v;case 3:return a.a(2)}},a)}))()}};const $t=(0,_.A)(yt,[["render",Gt]]);var qt=$t,Xt={class:"row q-mt-sm"},zt={class:"col headerTable"},Qt={class:"row q-ma-xs q-col-gutter-sm"},Jt={class:"text-h6"},jt={class:"row q-ma-xs q-col-gutter-sm"},Ht={class:"col-xs-12"},Wt={class:"col-xs-12"},Kt={class:"col-xs-6"},Zt={class:"col-xs-6"},Yt={class:"col-xs-12"},en={class:"col-xs-12"};function an(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-card-section"),s=(0,n.g2)("q-separator"),c=(0,n.g2)("q-input"),u=(0,n.g2)("q-select"),d=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Xt,[(0,n.Lk)("div",zt,[e.usuarios.includes(e.usuario)?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.agregar,flat:""},{default:(0,n.k6)(function(){return j()(a[8]||(a[8]=[(0,n.eW)("Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 258px)"}},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","frameworkComponents"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getMedioDePagos},null,8,["modelValue","max","onLoad"]),(0,n.bF)(d,{modelValue:e.openModal,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.openModal=a}),onSubmit:e.submit,rows:e.rowData},{default:(0,n.k6)(function(){return[(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Qt,[(0,n.Lk)("div",Jt,(0,l.v_)(e.mode)+" Medio de pago",1)])]}),_:1}),(0,n.bF)(s),(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",jt,[(0,n.Lk)("div",Ht,[(0,n.bF)(c,{label:"Descripción",placeholder:"Ingrese la descripción",maxlength:e.size.DESCRIPCION,modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.DESCRIPCION=a})},null,8,["maxlength","modelValue"])]),(0,n.Lk)("div",Wt,[(0,n.bF)(u,{label:"Tipo de Credito",options:e.tiposCredito,"option-label":"VALOR","option-value":"CLAVE",modelValue:e.form.TIPO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.form.TIPO=a}),onInput:e.changeTipoCredito},null,8,["options","modelValue","onInput"])]),(0,n.Lk)("div",Kt,[(0,n.bF)(c,{label:"Código Contable",placeholder:"Ingrese el codigo contable",maxlength:e.size.CODCONTA,modelValue:e.form.CODCONTA,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.form.CODCONTA=a})},null,8,["maxlength","modelValue"])]),(0,n.Lk)("div",Zt,[(0,n.bF)(c,{label:"Código Forma de Pago",placeholder:"Ingrese la forma de pago",maxlength:1,modelValue:e.form.FORPAG,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.FORPAG=a})},null,8,["modelValue"])]),(0,n.Lk)("div",Yt,[(0,n.bF)(c,{label:"Código Externo",placeholder:"Ingrese el codigo externo",maxlength:e.size.CODEXTERNO,modelValue:e.form.CODEXTERNO,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.form.CODEXTERNO=a})},null,8,["maxlength","modelValue"])]),(0,n.Lk)("div",en,[e.showNumcta?((0,n.uX)(),(0,n.Wv)(u,{key:0,label:"Cuenta Bancaria Destino",options:e.cuentas,"option-label":"label","option-value":"value",modelValue:e.form.NUMCTA,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.form.NUMCTA=a})},null,8,["options","modelValue"])):(0,n.Q3)("v-if",!0)])])]}),_:1})]}),_:1},8,["modelValue","onSubmit","rows"])])}var on={components:{QSeparator:D.A,QInput:be.A,QSelect:Ee.S,sieGrid:f.A,sieModal:R.A,formulario:w.A,footerGrid:q.A,QCard:b.A,QCardSection:E.A,QBtn:Oe.Il},mixins:[Qe.A,N.A],data:function(){return{usuarios:x["default"].USUARIOS_ADMIN,usuario:(0,v["default"])().usucod,nivelAcceso:(0,v["default"])().ruta.nivel,columnDefs:null,rowData:null,api:null,autoGroupColumnDef:null,schema:[],openModal:!1,title:"",frameworkComponents:null,pagina:1,pages:1,mode:"Agregar",formaPagos:[],mediosPagos:[],cuentas:[],tiposCredito:[],showNumcta:!1,size:{},form:{FORPAG:"",DESCRIPCION:"",NUMCTA:"",TIPO:"",CODCONTA:"",CODEXTERNO:""},id_mediopago:0}},methods:{changeTipoCredito:function(){this.showNumcta=!1;var e=x["default"].MEDIOS_PAGO_GRUPO;(this.form.TIPO.toString()===e.TARJETA.toString()||this.form.TIPO.toString()===e.APIPAGO.toString())&&(this.showNumcta=!0)},agregar:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.limpiarData();case 1:e.mode="Agregar",e.openModal=!0;case 2:return a.a(2)}},a)}))()},validate:function(){var e="";return!this.form.FORPAG||this.form.FORPAG.length>this.size.FORPAG?e="No se registro correctamente el forpag":!this.form.DESCRIPCION||this.form.DESCRIPCION.length>this.size.DESCRIPCION?e="No se registro correctamente la descripcion":this.form.TIPO||(e="No se selecciono el tipo de medio de pago"),e.length>0?{status:"error",message:e}:{status:"ok"}},insertMedioPago:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.$confirm("¿Esta seguro de actualizar?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/PagoController/postInsertarMedioPago",{datos:e.form});case 1:o=a.v,e.$alert(o.message,"success"),e.getMedioDePagos(),e.openModal=!1,a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])})));case 1:return a.a(2)}},a)}))()},updateMedioPago:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.$confirm("¿Esta seguro de actualizar?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,e.form.ID_MEDIOPAGO=e.id_mediopago,a.n=1,T.$http.post("api/PagoController/postActualizarMedioPago",{datos:e.form});case 1:o=a.v,e.$alert(o.message,"success"),delete e.form.ID_MEDIOPAGO,e.getMedioDePagos(),e.openModal=!1,a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])})));case 1:return a.a(2)}},a)}))()},submit:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.validate();case 1:o=a.v,"ok"===o.status?"Agregar"===e.mode?e.insertMedioPago():e.updateMedioPago():e.$alert(o.message,"warning");case 2:return a.a(2)}},a)}))()},getSize:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,ea.n)(["MEDIO_PAGO"]);case 1:o=a.v,e.size=o.MEDIO_PAGO;case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api},getCuentas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,x["default"].API_CTABANCOS();case 1:e.cuentas=a.v,e.cuentas=[{label:"",value:""}].concat(j()(e.cuentas));case 2:return a.a(2)}},a)}))()},getMedioDePagos:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/formaPagoController/getMediosDePago",{params:{parametros:{response:"list",mode:"listar"}}});case 1:o=a.v,e.rowData=o;case 2:return a.a(2)}},a)}))()},limpiarData:function(e){this.form.FORPAG="",this.form.DESCRIPCION="",this.form.NUMCTA="",this.form.TIPO="",this.form.CODCONTA="",this.form.CODEXTERNO="",this.id_mediopago="",this.changeTipoCredito()},setEditMedioPago:function(e){var a=e.data;this.form.FORPAG=a.FORPAG,this.form.DESCRIPCION=a.MEDIOPAGO,this.form.NUMCTA=a.NUMCTA,this.form.TIPO=a.TIPO_MEDIO.toString(),this.form.CODCONTA=a.CODIGO_CONTA,this.form.CODEXTERNO=a.CODIGO_EXTERNO,this.id_mediopago=a.ID_MEDIOPAGO,this.mode="Editar",this.openModal=!0,this.changeTipoCredito()},getTipos:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0046"}}});case 1:o=a.v,e.tiposCredito=o;case 2:return a.a(2)}},a)}))()},eliminarMedioPago:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:a.$confirm("¿Estás seguro de eliminar este Medio de Pago?","delete").onOk(B()(P()().m(function o(){var t,n;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,T.$http.delete("api/formaPagoController/deleteMedioDePago",{params:{datos:{ID_MEDIOPAGO:e.data.ID_MEDIOPAGO}}});case 1:return t=o.v,a.$alert(t.message,"success"),o.n=2,a.getMedioDePagos();case 2:o.n=4;break;case 3:return o.p=3,n=o.v,a.$alert(n.error?n.error.message:n.message,"warning"),o.n=4,a.getMedioDePagos();case 4:return o.a(2)}},o,null,[[0,3]])})));case 1:return o.a(2)}},o)}))()}},mounted:function(){this.getSize()},beforeMount:function(){this.frameworkComponents={agSelect:ge.A,actionButton:U.A};this.columnDefs=[{headerName:"Codigo",field:"ID_MEDIOPAGO",width:80},{headerName:"Medio de Pago",field:"MEDIOPAGO",width:250},{headerName:"Tipo",field:"MEDIO_CREDITO",width:150},{headerName:"FORPAG",field:"FORPAG",width:75},{headerName:"Cta. Bancaria",field:"CTABANCO",width:150},{field:"NUMCTA",hide:!0},{cellRenderer:U.A,cellRendererParams:{icon:"edit",onClick:this.setEditMedioPago},hide:this.nivelAcceso<x["default"].LECTURA_ESCRITURA,width:50},{cellRenderer:U.A,cellRendererParams:{icon:"delete",onClick:this.eliminarMedioPago},hide:this.nivelAcceso<x["default"].LECTURA_ESCRITURA,width:50}],this.getMedioDePagos(),this.getCuentas(),this.getTipos()}};const tn=(0,_.A)(on,[["render",an]]);var nn=tn;function rn(e,a){var o=(0,n.g2)("sie-grid"),t=(0,n.g2)("footer-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[1]||(a[1]=(0,n.Lk)("div",{class:"row q-mt-sm"},[(0,n.Q3)('.col.headerTableq-btn.q-ma-xs( v-if="nivelAcceso >= 2" size="sm" icon="add" color="primary" @click="addRow" flat)  Agregar\nq-btn.q-ma-xs( v-if="nivelAcceso >= 2" size="sm" icon="delete" color="primary" @click="deleteRows" flat)  Eliminar\nq-btn.q-ma-xs( v-if="nivelAcceso >= 2" size="sm" icon="save" color="primary" @click="save" flat)  Guardar')],-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","frameworkComponents"]),(0,n.bF)(t,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getDepositoPos,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])])}var ln={components:{sieGrid:f.A,sieModal:R.A,formulario:w.A,footerGrid:q.A},mixins:[Qe.A,N.A],data:function(){return{nivelAcceso:(0,v["default"])().ruta.nivel,columnDefs:null,rowData:null,api:null,autoGroupColumnDef:null,schema:[],openModal:!1,title:"",frameworkComponents:null,pagina:1,pages:1,medioPago:[],ctaBancaria:[]}},methods:{onGridReady:function(e){this.api=e.api},getDepositoPos:function(){var e=this;T.$http.get("api/formaPagoController/getDepositoPos",{params:{parametros:{response:"list"}}}).then(function(a){e.addModified(a),e.rowData=a})},saveDepositoPos:function(){var e=this;T.$http.put("api/formaPagoController/updateDepositoPos",{datos:this.changes.updated}).then(function(a){e.changes.updated=[],(0,g.alert)(a.message,"success"),e.getDepositoPos()}).catch(function(e){var a=e.error;(0,g.alert)(a.message,"warning")})}},beforeMount:function(){var e=this;this.frameworkComponents={agSelect:ge.A,actionButton:U.A},T.$http.get("api/formaPagoController/getCombosPos",{params:{tablas:[27,46]}}).then(function(a){var o=a.ctaBancaria,t=a.medioPago;e.ctaBancaria=o,e.medioPago=t,e.columnDefs=[{headerName:"Código",field:"ID_DEPOSITO_POS",sortable:!0,width:80},{headerName:"Medio de Pago",field:"ID_MEDIOPAGO",editable:!0,sortable:!0,cellEditor:(0,Oa.A)(e,"ID_MEDIOPAGO"),cellEditorParams:{"option-label":"DESCRIPCION","option-value":"ID_MEDIOPAGO",options:t},width:150},{headerName:"Nro Cuenta",field:"NUMCTA",editable:!0,sortable:!0,cellEditor:(0,Oa.A)(e,"NUMCTA"),cellEditorParams:{"option-label":"CTACTE","option-value":"NUMCTA",options:o},width:250},{headerName:"Días de Depósito",field:"DIAS_DEPOSITO",cellClass:"text-right",editable:!0,sortable:!0,width:120},{headerName:"Tasa Interés",field:"TASA_INTERES",cellClass:"text-right",editable:!0,sortable:!0,width:120},{headerName:"",hide:e.nivelAcceso<2,width:40,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var a=[e.data];(0,g.confirm)("¿Estás seguro de eliminar este registro?","delete").onOk(function(){T.$http.delete("api/formaPagoController/deleteDepositoPos",{params:{datos:{ID_DEPOSITO_POS:a[0].ID_DEPOSITO_POS}}}).then(function(o){e.api.updateRowData({remove:a}),(0,g.alert)(o.message,"success")}).catch(function(e){var a=e.error;(0,g.alert)(a.message,"warning")})})}}},{headerName:"modified",field:"modified",hide:!0}]}),this.getDepositoPos()}};const sn=(0,_.A)(ln,[["render",rn]]);var cn=sn,un={class:"row q-mt-sm"},dn={class:"col headerTable"},mn={class:"row q-pa-sm q-col-gutter-sm",style:{"margin-top":"0.5rem"}},Cn={class:"col-xs-12"},fn={class:"text-h6"},pn={class:"col-xs-12"};function An(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-input"),s=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",un,[(0,n.Lk)("div",dn,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.createCategory,flat:""},{default:(0,n.k6)(function(){return j()(a[3]||(a[3]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,onRowSelected:e.rowSelected,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 264px)"},defaultColDef:e.defaultColDef,enableCellTextSelection:"",floatingFilter:""},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","onRowSelected","frameworkComponents","defaultColDef"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getCategoriaCobro,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,n.bF)(s,{modelValue:e.openModal,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.openModal=a}),onSubmit:e.submitCategoria},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",mn,[(0,n.Lk)("div",Cn,[(0,n.Lk)("div",fn,(0,l.v_)(e.titleModal),1)]),(0,n.Lk)("div",pn,[(0,n.bF)(i,{modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.DESCRIPCION=a}),maxlength:e.size.DESCRIPCION,label:"Descripción",placeholder:"Ingrese nombre categoría"},null,8,["modelValue","maxlength"])])])]}),_:1},8,["modelValue","onSubmit"])])}var hn={components:{sieGrid:f.A,sieModal:R.A,formulario:w.A,footerGrid:q.A,QInput:be.A,QBtn:Oe.Il},mixins:[Qe.A,N.A],data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,nivelAcceso:(0,v["default"])().ruta.nivel,columnDefs:null,rowData:null,api:null,autoGroupColumnDef:null,schema:[],openModal:!1,frameworkComponents:null,pagina:1,pages:1,medioPago:[],ctaBancaria:[],titleModal:"SIEWEB: Tesorería",title:"Agregar Categoria Cobro",size:{ID_CATEGORIA:0,DESCRIPCION:0},form:{DESCRIPCION:"",FECHA_CREACION:""},filtro:{categoria:""},id_categoria:0,actualizar:!1,rowDataInitial:[],defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0}}},methods:{filtroCategorias:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return o=j()(e.rowDataInitial),e.filtro.categoria&&(o=o.filter(function(a){return a.DESCRIPCION.toLowerCase().includes(e.filtro.categoria.toLowerCase())})),e.rowData=o,a.a(2,e.rowData)}},a)}))()},createCategory:function(){this.openModal=!0,this.titleModal="Agregar Categoria Cobro",this.actualizar=!1,this.clear()},onGridReady:function(e){this.api=e.api},getCategoriaCobro:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.get("api/CategoriaCobroController/getCategoriaCobro");case 1:o=a.v,e.rowData=o,e.rowDataInitial=o,a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error.message);case 3:return a.a(2)}},a,null,[[0,2]])}))()},getSizeRow:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,(0,ea.n)(["categoria_cobro"]);case 1:o=a.v,e.size=o.CATEGORIA_COBRO,a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error.message);case 3:return a.a(2)}},a,null,[[0,2]])}))()},clear:function(){this.form.DESCRIPCION=" "},saveCategoriaCobro:function(){var e=this;if(!this.form.DESCRIPCION)throw new Error("Registre correctemente la descripcion de la categoria cobro");this.$confirm("¿Desea agregar la Categoría ?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/CategoriaCobroController/addCategoriaCobro",{data:e.form});case 1:return o=a.v,e.$alert(o.message,"success"),e.clear(),a.n=2,e.getCategoriaCobro();case 2:e.openModal=!1,a.n=4;break;case 3:a.p=3,t=a.v,e.$alert(t.error?t.error.message:t.message,"warning");case 4:return a.a(2)}},a,null,[[0,3]])})))},rowSelected:function(e){this.currentRow=e.data},submitCategoria:function(){return this.actualizar?this.updateCategoria():this.saveCategoriaCobro()},settearCategoria:function(e){this.actualizar=!0,this.titleModal="Editar Categoria Cobro",this.id_categoria=e.data.ID_CATEGORIA,this.form.DESCRIPCION=e.data.DESCRIPCION,this.openModal=!0},updateCategoria:function(){var e=this;this.$confirm("Desea modificar esta categoría?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/CategoriaCobroController/updateCategoriaCobro",{params:{DESCRIPCION:e.form.DESCRIPCION,ID_CATEGORIA:e.id_categoria}});case 1:o=a.v,e.$alert(o.message,"success"),e.getCategoriaCobro(),e.openModal=!1,a.n=3;break;case 2:a.p=2,t=a.v,e.$alert(t.error.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])})))},deleteCategoria:function(e){var a=this;this.$confirm("¿Estás seguro de eliminar la Categoría?","delete").onOk(B()(P()().m(function o(){var t,n,r;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,t={id:e.data.ID_CATEGORIA},o.n=1,T.$http.delete("api/CategoriaCobroController/deleteCategoriaCobro",{params:t});case 1:n=o.v,a.$alert(n.message,"success"),a.getCategoriaCobro(),a.openModal=!1,o.n=3;break;case 2:o.p=2,r=o.v,a.$alert(r.error?r.error.message:r.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])})))}},beforeMount:function(){this.frameworkComponents={agSelect:ge.A,actionButton:U.A},this.columnDefs=[{headerName:"Id",field:"ID_CATEGORIA",sortable:!0,width:80},{headerName:"Categoría de Cobro",field:"DESCRIPCION",width:650,editable:!0},{cellRenderer:U.A,width:40,cellRendererParams:{icon:"delete",title:"eliminar",onClick:this.deleteCategoria},hide:this.nivelAcceso<x["default"].ACCESO_TOTAL,filter:!1},{cellRenderer:U.A,width:40,cellRendererParams:{icon:"edit",title:"Guardar",onClick:this.settearCategoria},hide:this.nivelAcceso<x["default"].LECTURA_ESCRITURA,filter:!1}],this.getSizeRow(),this.getCategoriaCobro()}};const On=(0,_.A)(hn,[["render",An]]);var gn=On,bn=t(29104),En={class:"row q-ma-xs q-col-gutter-sm"},Dn={class:"col-xs-12 col-sm-3 col-md-3 col-lg-3"},vn={class:"col-xs-12 col-sm-9 col-md-9 col-lg-9"},Tn={class:"col headerTable",style:{width:"100%"}},wn={class:"row q-ma-xs q-col-gutter-sm"},Rn={class:"col-xs-12"},Nn={class:"text-h6"},In={class:"col-xs-12"},_n={class:"col-xs-12"};function Vn(e,a){var o=(0,n.g2)("sie-grid"),t=(0,n.g2)("q-btn"),r=(0,n.g2)("q-select"),i=(0,n.g2)("sie-modal"),s=(0,n.g2)("q-card-section");return(0,n.uX)(),(0,n.Wv)(s,{style:{padding:"8px","padding-left":"0px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",En,[(0,n.Lk)("div",Dn,[(0,n.bF)(o,{class:"fix-tab-height ag-theme-balham",frameworkComponents:e.frameworkComponents,columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onRowClicked:e.setLocal,style:{width:"100%",height:"calc(100vh - 195px)"}},null,8,["frameworkComponents","columnDefs","rowData","onGridReady","onRowClicked"])]),(0,n.bo)((0,n.Lk)("div",vn,[(0,n.Lk)("div",Tn,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(t,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.createReferencia,flat:""},{default:(0,n.k6)(function(){return j()(a[3]||(a[3]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)]),(0,n.bF)(o,{class:"fix-tab-height ag-theme-balham",columnDefs:e.columnDefsRef,rowData:e.rowDataRef,frameworkComponents:e.frameworkComponents,onGridReady:e.onGridReadyRef,style:{width:"100%",height:"calc(100vh - 230px)"}},null,8,["columnDefs","rowData","frameworkComponents","onGridReady"])],512),[[bn.aG,e.showData]])]),(0,n.bF)(i,{title:"SIEWEB: Tesorería",modelValue:e.openModal,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.openModal=a}),onSubmit:e.createRef},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",wn,[(0,n.Lk)("div",Rn,[(0,n.Lk)("div",Nn," Agregar Talonario de Referencia / Caja "+(0,l.v_)(e.NOMBRE),1)]),(0,n.Lk)("div",In,[(0,n.bF)(r,{"option-value":"NUMTAL","option-label":"TALONARIO",options:e.optionsTalon,label:"Talonario",placeholder:"Seleccione talonario",modelValue:e.form.NUMTAL,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.form.NUMTAL=a})},null,8,["options","modelValue"])]),(0,n.Lk)("div",_n,[(0,n.bF)(r,{"option-value":"NUMTAL","option-label":"TALONARIO",options:e.optionsTalon,label:"Talonario de Referencia",placeholder:"Seleccione Talonario de Referencia",modelValue:e.form.NUMTAL_REF,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.NUMTAL_REF=a})},null,8,["options","modelValue"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var Ln={components:{sieGrid:f.A,footerGrid:q.A,QSelect:Ee.A,sieModal:R.A,QBtn:Oe.Il},data:function(){return{nivelAcceso:(0,v["default"])().ruta.nivel,LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,columnDefs:null,rowData:null,pagina:1,pages:1,apiref:{},openModal:!1,frameworkComponents:{},optionsTalon:[],optionsReferencia:[],optionsCaja:[],form:{ID_TALON_REFERENCIA:null,ID_CAJA:"",NUMTAL:"",NUMTAL_REF:"",ACTIVO:1},columnDefsRef:[],rowDataRef:[],frameworkComponentsRef:{},showData:!1,currentRowRef:[],ID_CAJA:0,NOMBRE:""}},beforeMount:function(){this.columnsPuntoVenta(),this.getPuntoVenta(),this.frameworkComponents={actionButton:U.A}},methods:{createColumnsRefs:function(){this.columnDefsRef=[{headerName:"Id",field:"ID",width:50},{headerName:"Caja/Punto de Venta",field:"CAJA",width:200},{headerName:"Talonario",field:"TALON",width:200},{headerName:"Talonario Referencia",field:"TALON_REF",width:200},{cellRenderer:U.A,cellRendererParams:{icon:"delete",onClick:this.delete},width:50,hide:(0,v["default"])().ruta.nivel<x["default"].ACCESO_TOTAL}]},delete:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:a.$confirm("¿Estás seguro de eliminar la referencia ?","delete").onOk(B()(P()().m(function o(){var t,n;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,T.$http.delete("api/TalonReferenciaController/deleteTalonReferencia",{params:{id:e.data.ID}});case 1:t=o.v,a.$alert(t.message,"success"),a.getRefencia(a.ID_CAJA,a.NOMBRE),o.n=3;break;case 2:o.p=2,n=o.v,a.$alert(n.error.message);case 3:return o.a(2)}},o,null,[[0,2]])})));case 1:return o.a(2)}},o)}))()},onGridReady:function(e){this.api=e.api},setLocal:function(e){var a=this;return B()(P()().m(function o(){return P()().w(function(o){while(1)switch(o.n){case 0:return a.showData=!0,a.createColumnsRefs(),a.clear(),a.NOMBRE=e.data.CAJA,a.ID_CAJA=Number(e.data.ID_CAJA),o.n=1,a.getTalones();case 1:return o.n=2,a.getRefencia();case 2:return o.a(2)}},o)}))()},talones:function(){return B()(P()().m(function e(){var a;return P()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,T.$http.get("api/talonarioController/getTalones");case 1:return a=e.v,e.a(2,a)}},e)}))()},columnsPuntoVenta:function(){this.columnDefs=[{headerName:"ID",field:"ID_CAJA",width:50},{headerName:"Punto de venta",field:"CAJA"}]},getPuntoVenta:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/CajaCobranzaController/getCajaCobranza",{params:{parametros:{response:"punto_venta"}}});case 1:o=a.v,e.rowData=o;case 2:return a.a(2)}},a)}))()},getRefencia:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/TalonReferenciaController/getTalonReferencia",{params:{parametros:{ID_CAJA:e.ID_CAJA,type:"vista"}}});case 1:o=a.v,t=o.map(function(e){return{ID:e.ID_TALON_REFERENCIA,CAJA:e.LOCAL,TALON:"".concat(e.NUMTAL,"|").concat(e.SERIE,"|").concat(e.TALDES),TALON_REF:"".concat(e.NUMTAL_REF,"|").concat(e.SERIE_REF,"|").concat(e.TALDES_REF)}}),e.rowDataRef=t;case 2:return a.a(2)}},a)}))()},onGridReadyRef:function(e){this.apiref=e},createReferencia:function(){this.openModal=!0},getTalones:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/TalonReferenciaController/getTalonesReferencia",{params:{parametros:{ID_CAJA:e.ID_CAJA}}});case 1:o=a.v,e.optionsTalon=o;case 2:return a.a(2)}},a)}))()},createRef:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:try{e.$confirm("Esta seguro de agregar esta referencia?","info").onOk(B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return e.form.ID_CAJA=e.ID_CAJA,a.n=1,T.$http.post("api/TalonReferenciaController/addTalonReferencia",{data:e.form});case 1:o=a.v,e.getRefencia(e.ID_CAJA,e.NOMBRE),e.clear(),e.$alert(o.message,"success");case 2:return a.a(2)}},a)})))}catch(a){e.$alert(a.error.message)}case 1:return a.a(2)}},a)}))()},clear:function(){this.form.NUMTAL="",this.form.NUMTAL_REF=""}}};const Sn=(0,_.A)(Ln,[["render",Vn]]);var Mn=Sn,Pn={class:"row q-ma-xs q-col-gutter-sm"},kn={class:"col-xs-12"},Bn={class:"col headerTable",style:{height:"35px"}},Un={class:"col-xs-12"},xn={class:"col headerTable",style:{height:"35px"}},Fn={class:"text-h6"},Gn={key:0,class:"row q-ma-xs q-col-gutter-sm"},yn={class:"col-xs-12"},$n={class:"col-xs-12"},qn={class:"col-xs-12 col-sm-6"},Xn={class:"col-xs-12 col-sm-6"},zn={class:"col-xs-12 col-sm-6"},Qn={class:"col-xs-12 col-sm-6"},Jn={key:1,class:"row q-ma-xs q-col-gutter-sm"},jn={class:"col-xs-12 col-sm-6"},Hn={class:"col-xs-12 col-sm-6"},Wn={class:"col-xs-12 col-sm-6"},Kn={class:"col-xs-12 col-sm-6"},Zn={class:"col-xs-12"},Yn={class:"row q-pa-sm q-col-gutter-sm"},er={class:"col-xs-12"},ar={class:"col-xs-12"},or={key:0,class:"col-xs-12"},tr={class:"row q-pa-sm col-gutter-sm"},nr={class:"col-xs-12"},rr={key:0,class:"col-xs-12"};function lr(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-card-section"),s=(0,n.g2)("q-tab"),c=(0,n.g2)("q-tabs"),u=(0,n.g2)("q-select"),d=(0,n.g2)("q-input"),m=(0,n.g2)("q-checkbox"),C=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.Wv)(i,{style:{padding:"8px","padding-left":"0px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Pn,[(0,n.Lk)("div",kn,[(0,n.Lk)("div",Bn,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,n.k6)(function(){return j()(a[22]||(a[22]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)]),(0,n.bF)(t,{class:"ag-theme-balham",style:{width:"100%",height:"calc(100vh - 550px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents,onRowClicked:e.asignarTalonario},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","frameworkComponents","onRowClicked"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getCajaCobranza,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])]),(0,n.Lk)("div",Un,[(0,n.Lk)("div",xn,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRowAT,flat:""},{default:(0,n.k6)(function(){return j()(a[23]||(a[23]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)]),(0,n.bF)(t,{class:"ag-theme-balham",style:{width:"100%",height:"calc(100vh - 523px)"},columnDefs:e.columnATDef,rowData:e.rowATData,onGridReady:e.onGridReadyAT,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents},null,8,["columnDefs","rowData","onGridReady","rowClassRules","frameworkComponents"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getCajaTalonarios},null,8,["modelValue","max","onLoad"])]),(0,n.bF)(C,{modelValue:e.modalPuntosVenta,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.modalPuntosVenta=a}),title:e.titleModal,onSubmit:e.savePV},{default:(0,n.k6)(function(){return[(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Fn,(0,l.v_)(e.titlePV)+": "+(0,l.v_)(e.formPV.NOMBRE),1)]}),_:1}),(0,n.bF)(c,{modelValue:e.tabActivo,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.tabActivo=a})},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{name:e.tabsKeys.index},{default:(0,n.k6)(function(){return j()(a[24]||(a[24]=[(0,n.eW)("Datos",-1)]))}),_:1},8,["name"]),(0,n.bF)(s,{name:e.tabsKeys.config},{default:(0,n.k6)(function(){return j()(a[25]||(a[25]=[(0,n.eW)("Contabilidad",-1)]))}),_:1},8,["name"])]}),_:1},8,["modelValue"]),(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[e.tabActivo===e.tabsKeys.index?((0,n.uX)(),(0,n.CE)("div",Gn,[(0,n.Lk)("div",yn,[(0,n.bF)(u,{modelValue:e.formPV.ID_LOCAL,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.formPV.ID_LOCAL=a}),"option-label":"NOMBRE","option-value":"ID_LOCAL",options:e.comboLocal,label:"Local",placeholder:"Seleccione el local para el punto de venta"},null,8,["modelValue","options"])]),(0,n.Lk)("div",$n,[(0,n.bF)(d,{modelValue:e.formPV.NOMBRE,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.formPV.NOMBRE=a}),label:"Nombre",placeholder:"Ingrese nombre del punto de venta"},null,8,["modelValue"])]),(0,n.Lk)("div",qn,[(0,n.bF)(u,{modelValue:e.formPV.TIPO_CAJA,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.formPV.TIPO_CAJA=a}),"option-label":"TIPO_CAJA_DES","option-value":"TIPO_CAJA",options:e.t_caja,label:"Tipo de Caja",placeholder:"Tipo de Caja"},null,8,["modelValue","options"])]),(0,n.Lk)("div",Xn,[(0,n.bF)(d,{modelValue:e.formPV.CODANEXO,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.formPV.CODANEXO=a}),label:"Código de Anexo",placeholder:"Ingrese Código de Anexo",maxlength:30},null,8,["modelValue"])]),(0,n.Lk)("div",zn,[(0,n.bF)(d,{modelValue:e.formPV.CODAREA,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.formPV.CODAREA=a}),label:"Código de area",placeholder:"Ingrese Código de Area",maxlength:4},null,8,["modelValue"])]),(0,n.Lk)("div",Qn,[(0,n.bF)(d,{modelValue:e.formPV.NUMCAJA,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.formPV.NUMCAJA=a}),label:"Correlativo",placeholder:"correlativo de operación"},null,8,["modelValue"])])])):(0,n.Q3)("v-if",!0),e.tabActivo===e.tabsKeys.config?((0,n.uX)(),(0,n.CE)("div",Jn,[(0,n.Lk)("div",jn,[(0,n.bF)(m,{modelValue:e.formPV.FLAG_EXP_CONTA,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.formPV.FLAG_EXP_CONTA=a}),label:"Usar Exportación Contable",color:"primary","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",Hn,[(0,n.bF)(u,{options:e.cuentaContable,"option-value":"CODCTA","option-label":"CTA",label:"Cuenta Contable de Ingreso",modelValue:e.formPV.CTACONTA,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.formPV.CTACONTA=a})},null,8,["options","modelValue"])]),(0,n.Lk)("div",Wn,[(0,n.bF)(d,{modelValue:e.formPV.TIPDOC_CONTA,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.formPV.TIPDOC_CONTA=a}),label:"Tipo de Documento Contable",placeholder:"Tipo de Documento Contable",maxlength:2},null,8,["modelValue"])]),(0,n.Lk)("div",Kn,[(0,n.bF)(d,{modelValue:e.formPV.NRODOC_CONTA,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.formPV.NRODOC_CONTA=a}),label:"Nro Documento Contable",placeholder:"Ingrese Número de Documneto Contable",maxlength:20},null,8,["modelValue"])]),(0,n.Lk)("div",Zn,[(0,n.bF)(d,{modelValue:e.formPV.GLOSA_CONTA,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.formPV.GLOSA_CONTA=a}),label:"Glosa Contable",placeholder:"Ingrese Prefijos y variables de Glosa",maxlength:50},null,8,["modelValue"])])])):(0,n.Q3)("v-if",!0)]}),_:1})]}),_:1},8,["modelValue","title","onSubmit"]),(0,n.bF)(C,{modelValue:e.modalAsignarTalonarios,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.modalAsignarTalonarios=a}),title:e.titleModal,onSubmit:e.save},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Yn,[a[26]||(a[26]=(0,n.Lk)("div",{class:"col-xs-12"},[(0,n.Lk)("div",{class:"text-h6"}," Asignar Talonario")],-1)),(0,n.Lk)("div",er,[(0,n.bF)(u,{modelValue:e.form.NUMTAL,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.form.NUMTAL=a}),"option-label":"TALONARIO","option-value":"NUMTAL",options:e.talones,label:"TALONARIOS"},null,8,["modelValue","options"])]),(0,n.Lk)("div",ar,[(0,n.bF)(u,{modelValue:e.form.TIPO_USO,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.form.TIPO_USO=a}),"option-label":"VALOR","option-value":"CLAVE",options:e.tipoUso,label:"Tipo de Uso"},null,8,["modelValue","options"])]),e.P_TALON_X_NIVEL?((0,n.uX)(),(0,n.CE)("div",or,[(0,n.bF)(u,{modelValue:e.form.INSTRUCOD,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.form.INSTRUCOD=a}),"option-value":"INSTRUCOD","option-label":"INSTRUDES",options:e.nivel,label:"Nivel"},null,8,["modelValue","options"])])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","title","onSubmit"]),(0,n.bF)(C,{modelValue:e.modalPuntoVentaTalonario,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.modalPuntoVentaTalonario=a}),onSubmit:e.actualizarTipoUso},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",tr,[a[27]||(a[27]=(0,n.Lk)("div",{class:"col-xs-12"},[(0,n.Lk)("div",{class:"text-h6"},"Editar Tipo De Uso Talonario")],-1)),(0,n.Lk)("div",nr,[(0,n.bF)(u,{modelValue:e.formTipoUso.TIPO_USO,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.formTipoUso.TIPO_USO=a}),placeholder:"Seleccione Tipo de Uso",label:"Tipo de Uso",options:e.tipoUso,"option-value":"CLAVE","option-label":"VALOR"},null,8,["modelValue","options"])]),e.P_TALON_X_NIVEL?((0,n.uX)(),(0,n.CE)("div",rr,[(0,n.bF)(u,{modelValue:e.formTipoUso.INSTRUCOD,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.formTipoUso.INSTRUCOD=a}),label:"Nivel","option-value":"INSTRUCOD","option-label":"INSTRUDES",options:e.nivel},null,8,["modelValue","options"])])):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"])])]}),_:1})}var ir=t(41562),sr=t.n(ir),cr=t(57008),ur=t.n(cr),dr=t(40155),mr={components:{sieModal:R.A,agSelect:ge.A,sieGrid:f.A,footerGrid:q.A,QSelect:Ee.S,QInput:be.A,QCheckbox:dr.A,QTab:A.A,QTabs:p.A,QBtn:Oe.Il},mixins:[Qe.A],data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,form:{NUMTAL:"",TIPO_USO:"",INSTRUCOD:"T"},formPV:{ID_CAJA:"",ID_LOCAL:"",NOMBRE:"",NUMCAJA:"",CTACONTA:"",TIPO_CAJA:"",CODANEXO:"",CODAREA:"",TIPDOC_CONTA:"",NRODOC_CONTA:"",FLAG_EXP_CONTA:1,GLOSA_CONTA:""},nivel:[],selectNivel:"T",openModal:!1,titleModal:"SIEWEB: Tesorería",nivelAcceso:(0,v["default"])().ruta.nivel,columnDefs:null,columnATDef:null,rowData:null,rowATData:null,api:null,apiAT:null,autoGroupColumnDef:null,frameworkComponents:null,pagina:1,pages:1,nuevo_id_caja:"",id_caja:0,flagPV:"new",flagAT:"save",modalPuntosVenta:!1,modalAsignarTalonarios:!1,titlePV:"",comboLocal:"",ID_LOCAL:"",tabActivo:"index",tabsKeys:{index:"index",config:"config"},cuentaContable:[],t_caja:[{TIPO_CAJA:1,TIPO_CAJA_DES:"Caja Física"},{TIPO_CAJA:2,TIPO_CAJA_DES:"PagoEfectivo"},{TIPO_CAJA:3,TIPO_CAJA_DES:"Openpay"},{TIPO_CAJA:4,TIPO_CAJA_DES:"Kashio"}],P_TALON_X_NIVEL:!1,talones:[],tipoUso:[],cantidad:"",cantidadTalonarios:"",modalPuntoVentaTalonario:!1,formTipoUso:{ID_CAJA:"",NUMTAL:"",GRADOCOD:"",SECCIONCOD:"",TIPO_USO:"",INSTRUCOD:"T"}}},methods:{validarConstantes:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.n){case 0:return o={ID_CONSTANTE:[x["default"].CONSTANTES_SISTEMA.P_TALON_X_NIVEL]},a.n=1,x["default"].API_CONSTANTES_SISTEMAS(o);case 1:t=a.v,e.P_TALON_X_NIVEL=t.P_TALON_X_NIVEL;case 2:return a.a(2)}},a)}))()},getNivel:function(){var e=this;return T.$http.get("api/SalonController/getNivel",{params:{parametros:{notAll:!1}}}).then(function(a){e.nivel=a})},asignarTalonario:function(e){this.id_caja=e.data.ID_CAJA,this.getCajaTalonarios()},onGridReady:function(e){this.api=e.api},onGridReadyAT:function(e){this.apiAT=e.api},addRow:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getCajaCobranza();case 1:e.titlePV="Agregar Punto de Venta",e.formPV={ID_CAJA:e.nuevo_id_caja,ID_LOCAL:"",NOMBRE:"",NUMCAJA:"",CTACONTA:"",TIPO_CAJA:"",CODANEXO:"",CODAREA:"",TIPDOC_CONTA:"",NRODOC_CONTA:"",FLAG_EXP_CONTA:1,GLOSA_CONTA:""},e.flagPV="new",e.modalPuntosVenta=!0;case 2:return a.a(2)}},a)}))()},addRowAT:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.validarConstantes();case 1:e.id_caja>0&&(e.form.NUMTAL="",e.form.TIPO_USO="1",e.modalAsignarTalonarios=!0);case 2:return a.a(2)}},a)}))()},getCajaCobranza:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/CajaCobranzaController/getCajaCobranza");case 1:o=a.v,e.addModified(o),e.rowData=o,e.nuevo_id_caja=e.rowData[e.rowData.length-1].ID_CAJA+1;case 2:return a.a(2)}},a)}))()},actualizarTipoUso:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.$confirm("¿Está seguro de actualizar este registro?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.put("api/talonarioController/putCajaTalonario",{datos:e.formTipoUso});case 1:return o=a.v,e.getCajaTalonarios(),e.modalPuntoVentaTalonario=!1,a.a(2,e.$alert(o.message,"success"));case 2:a.p=2,t=a.v,e.$alert(t.error?t.error.message:t.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])})));case 1:return a.a(2)}},a)}))()},setearTipoDeUso:function(e){var a=this;return B()(P()().m(function o(){var t;return P()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,a.validarConstantes();case 1:a.modalPuntoVentaTalonario=!0,t=e.data,a.formTipoUso={ID_CAJA:t.ID_CAJA,NUMTAL:t.NUMTAL,INSTRUCOD:t.INSTRUCOD,GRADOCOD:t.GRADOCOD,SECCIONCOD:t.SECCIONCOD,TIPO_USO:String(t.TIPO_USO)};case 2:return o.a(2)}},o)}))()},getCajaTalonarios:function(){var e=this;return B()(P()().m(function a(){var o,t,n,r,l,i;return P()().w(function(a){while(1)switch(a.n){case 0:return o={ID_CAJA:e.id_caja},t={pagina:e.pagina},Object.assign(t,o),T.$http.get("api/talonarioController/getTalonarioV",{params:{parametros:t}}).then(function(a){e.addModified(a),e.rowATData=a.map(function(a){var o=e.tipoUso.find(function(e){return String(e.CLAVE)===String(a.TIPO_USO)});return ur()(ur()({},a),{},{TIPO_USO_DES:o.VALOR||""})})}),n=T.$http.get("api/talonarioController/getTalonariosV",{params:{parametros:{response:"combo"}}}),a.n=1,T.$http.get("api/talonarioController/getCajaTalonarios",{params:{parametros:{response:"combo",ID_CAJA:e.id_caja}}});case 1:r=a.v,l=[],r.map(function(e){return l.push(e.NUMTAL)}),i=e.tipoUso,e.frameworkComponents={agSelect:ge.A,actionButton:U.A},Promise.all([n,i]).then(function(a){var o=he()(a,2),t=o[0];o[1];e.columnATDef=[{headerName:"Talonario",field:"NUMTAL",editable:!1,cellEditor:(0,Oa.A)(e,"NUMTAL",!1,"columnATDef"),cellEditorParams:{"option-label":"TALONARIO","option-value":"NUMTAL",options:t},width:500},{headerName:"Tipo de Uso",field:"TIPO_USO_DES",width:100},{headerName:"",hide:e.nivelAcceso<x["default"].LECTURA_ESCRITURA,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Guardar",onClick:e.setearTipoDeUso},width:40},{headerName:"",hide:e.nivelAcceso<x["default"].ACCESO_TOTAL,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var a=this,o=[e.data];this.$confirm("¿Está seguro de eliminar esta asignación?","delete").onOk(B()(P()().m(function t(){return P()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,T.$http.delete("api/talonarioController/deleteCajaTalonario",{params:{datos:{ID_CAJA:o[0].ID_CAJA,NUMTAL:o[0].NUMTAL}}}).then(function(t){a.$alert(t.message,"success"),e.api.updateRowData({remove:o})}).catch(function(e){a.$alert(e.error.message,"warning")});case 1:return t.a(2)}},t)})))}},width:40}],e.talones=[];var n,r=sr()(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;l.includes(i.NUMTAL)||e.talones.push(i)}}catch(e){r.e(e)}finally{r.f()}});case 2:return a.a(2)}},a)}))()},save:function(){var e=this,a={ID_CAJA:this.id_caja,NUMTAL:this.form.NUMTAL},o={pagina:this.pagina};Object.assign(o,a),T.$http.get("api/talonarioController/getTalonarioV",{params:{parametros:o}}).then(function(a){e.addModified(a),e.rowDataCCT=a,e.cantidadTalonarios=e.rowDataCCT.length}),""===this.form.NUMTAL?this.$alert("Debe de seleccionar el Talonario a asignar","info"):this.$confirm("¿Está seguro de asignar este talonario?","save").onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getCajaTalones();case 1:return a.a(2)}},a)})))},cellValueChanged:function(e){},getCajaTalones:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:if(!e.cantidadTalonarios){a.n=1;break}e.$alert("Este Talonario ya fue asignado a este punto de Venta","info"),a.n=3;break;case 1:return a.n=2,T.$http.post("api/talonarioController/postCajaTalonario",{datos:{ID_CAJA:e.id_caja,NUMTAL:e.form.NUMTAL,GRADOCOD:"T",SECCIONCOD:"T",TIPO_USO:e.form.TIPO_USO,INSTRUCOD:e.form.INSTRUCOD}});case 2:e.getCajaTalonarios(),e.$alert("Talonario asignado satisfactoriamente","success");case 3:return a.a(2)}},a)}))()},savePV:function(){var e=this;"new"===this.flagPV?""===this.formPV.ID_LOCAL?this.$alert("Debe de elegir un Local","warning"):""===this.formPV.NOMBRE?this.$alert("Debe de ingresar el nombre del Punto de Venta","warning"):""===this.formPV.TIPO_CAJA?this.$alert("Debe de elegir el tipo de Caja","warning"):this.$confirm("¿Está seguro de agregar este Punto de Venta?","save").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.post("api/CajaCobranzaController/postCajaCobranza",{datos:{ID_LOCAL:e.formPV.ID_LOCAL,ID_AREA:1,NOMBRE:e.formPV.NOMBRE,NUMCAJA:e.formPV.NUMCAJA,CAJACHICA:0,CTACONTA:e.formPV.CTACONTA,TIPO_CAJA:e.formPV.TIPO_CAJA,CODANEXO:e.formPV.CODANEXO,CODAREA:e.formPV.CODAREA,TIPDOC_CONTA:e.formPV.TIPDOC_CONTA,NRODOC_CONTA:e.formPV.NRODOC_CONTA,FLAG_EXP_CONTA:e.formPV.FLAG_EXP_CONTA,GLOSA_CONTA:e.formPV.GLOSA_CONTA}});case 1:return o=a.v,a.n=2,e.getCajaCobranza();case 2:return a.n=3,e.addRow();case 3:e.$alert(o.message,"success"),a.n=5;break;case 4:return a.p=4,t=a.v,a.a(2,e.$alert(t.error?t.error.message:t.message,"warning"));case 5:return a.a(2)}},a,null,[[0,4]])}))):this.$confirm("¿Está seguro de actualizar este punto de Venta?","info").onOk(B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.put("api/CajaCobranzaController/putCajaCobranza",{datos:{ID_CAJA:e.formPV.ID_CAJA,ID_LOCAL:e.formPV.ID_LOCAL,ID_AREA:e.formPV.ID_AREA,NOMBRE:e.formPV.NOMBRE,NUMCAJA:e.formPV.NUMCAJA,CAJACHICA:e.formPV.CAJA_CHICA,CTACONTA:e.formPV.CTACONTA,TIPO_CAJA:e.formPV.TIPO_CAJA,CODANEXO:e.formPV.CODANEXO,CODAREA:e.formPV.CODAREA,TIPDOC_CONTA:e.formPV.TIPDOC_CONTA,NRODOC_CONTA:e.formPV.NRODOC_CONTA,FLAG_EXP_CONTA:e.formPV.FLAG_EXP_CONTA,GLOSA_CONTA:e.formPV.GLOSA_CONTA}});case 1:return o=a.v,e.modalPuntosVenta=!1,a.n=2,e.getCajaCobranza();case 2:e.$alert(o.message,"success"),a.n=4;break;case 3:return a.p=3,t=a.v,a.a(2,e.$alert(t.error?t.error.message:t.message,"warning"));case 4:return a.a(2)}},a,null,[[0,3]])})))},eliminarPV:function(e,a){var o=this;return B()(P()().m(function t(){var n;return P()().w(function(t){while(1)switch(t.n){case 0:return n={pagina:o.pagina},Object.assign(n,e),t.n=1,T.$http.get("api/talonarioController/getTalonarioV",{params:{parametros:n}}).then(function(e){o.addModified(e),o.rowDataCC=e,o.cantidad=o.rowDataCC.length});case 1:if(!(o.cantidad>0)){t.n=2;break}o.$alert("Existen Talonarios asignados a este Punto de Venta.","warning"),t.n=3;break;case 2:return t.n=3,T.$http.delete("api/CajaCobranzaController/deleteCajaCobranza",{params:{datos:{ID_CAJA:a}}}).then(function(e){o.$alert(e.message,"success")}).catch(function(e){o.$alert(e.error.message,"warning")});case 3:return t.a(2)}},t)}))()}},beforeMount:function(){var e=this;return B()(P()().m(function a(){var o,t,n,r;return P()().w(function(a){while(1)switch(a.n){case 0:return o=T.$http.get("api/empresaController/getLocales",{params:{parametros:{response:"combo"}}}),t=e.t_caja,n=T.$http.get("api/EstadoTablaController/getEstadoTabla",{params:{parametros:{CODIGO:"0039"}}}),e.frameworkComponents={agSelect:ge.A,agUbigeo:Je.A,actionButton:U.A},r=e,Promise.all([o,t,n]).then(function(a){var o=he()(a,3),t=o[0],n=o[1],l=o[2];e.columnDefs=[{headerName:"ID",field:"ID_CAJA",width:50},{headerName:"Local",field:"ID_LOCAL",cellEditor:(0,Oa.A)(e,"ID_LOCAL"),cellEditorParams:{"option-label":"NOMBRE","option-value":"ID_LOCAL",options:t},width:100},{headerName:"Nombre",field:"NOMBRE",width:300},{headerName:"Correlativo",field:"NUMCAJA",width:150,hide:!0},{headerName:"Cuenta Cont.",field:"CTACONTA",width:150,hide:!0},{headerName:"Tipo de Caja",field:"TIPO_CAJA",cellEditor:(0,Oa.A)(e,"TIPO_CAJA"),cellEditorParams:{"option-label":"TIPO_CAJA_DES","option-value":"TIPO_CAJA",options:n},width:150},{headerName:"",hide:e.nivelAcceso<x["default"].LECTURA_ESCRITURA,cellRenderer:U.A,cellRendererParams:{icon:"edit",title:"Editar",onClick:function(e){var a=[e.data];r.titlePV="Editar Punto de Venta",r.formPV.ID_CAJA=a[0].ID_CAJA,r.formPV.ID_LOCAL=a[0].ID_LOCAL,r.formPV.ID_AREA=1,r.formPV.NOMBRE=a[0].NOMBRE,r.formPV.NUMCAJA=a[0].NUMCAJA,r.formPV.CAJA_CHICA=0,r.formPV.CTACONTA=a[0].CTACONTA,r.formPV.TIPO_CAJA=a[0].TIPO_CAJA,r.formPV.CODANEXO=a[0].CODANEXO,r.formPV.CODAREA=a[0].CODAREA,r.formPV.TIPDOC_CONTA=a[0].TIPDOC_CONTA,r.formPV.NRODOC_CONTA=a[0].NRODOC_CONTA,r.formPV.FLAG_EXP_CONTA=a[0].FLAG_EXP_CONTA,r.formPV.GLOSA_CONTA=a[0].GLOSA_CONTA,r.flagPV="edit",r.modalPuntosVenta=!0}},width:40},{headerName:"",hide:e.nivelAcceso<x["default"].ACCESO_TOTAL,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var a=[e.data];this.$confirm("¿Está seguro de eliminar este registro?","delete").onOk(B()(P()().m(function e(){var o;return P()().w(function(e){while(1)switch(e.n){case 0:return o={ID_CAJA:a[0].ID_CAJA},e.n=1,r.eliminarPV(o,a[0].ID_CAJA);case 1:return e.n=2,r.getCajaCobranza();case 2:return e.a(2)}},e)})))}},width:40}],e.comboLocal=t,e.tipoUso=l}),a.n=1,e.validarConstantes();case 1:return a.n=2,e.getNivel();case 2:return a.n=3,e.getCajaCobranza();case 3:return a.n=4,e.getCajaTalonarios();case 4:return a.n=5,x["default"].API_CTAS_CONTABLES("10");case 5:e.cuentaContable=a.v;case 6:return a.a(2)}},a)}))()}};const Cr=(0,_.A)(mr,[["render",lr]]);var fr=Cr,pr={class:"row q-ma-xs q-col-gutter-sm"},Ar={class:"col-xs-3"},hr={class:"col-xs-9"},Or={class:"col headerTable"},gr={class:"row q-ma-xs q-col-gutter-sm"},br={class:"col-xs-12"},Er={class:"text-h6"},Dr={class:"col-xs-12"},vr={class:"col-xs-12"};function Tr(e,a){var o=(0,n.g2)("sie-grid"),t=(0,n.g2)("q-btn"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-input"),s=(0,n.g2)("q-select"),c=(0,n.g2)("sie-modal"),u=(0,n.g2)("q-card-section");return(0,n.uX)(),(0,n.Wv)(u,{style:{padding:"8px","padding-left":"0px"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",pr,[(0,n.Lk)("div",Ar,[(0,n.bF)(o,{class:"ag-theme-balham",style:{width:"100%",height:"calc(100vh - 197px)"},columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents,onRowClicked:e.asignarConcepto},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","frameworkComponents","onRowClicked"])]),(0,n.Lk)("div",hr,[(0,n.Lk)("div",Or,[e.nivelAcceso>=e.LECTURA_ESCRITURA?((0,n.uX)(),(0,n.Wv)(t,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",onClick:e.addRow,flat:""},{default:(0,n.k6)(function(){return j()(a[4]||(a[4]=[(0,n.eW)(" Agregar",-1)]))}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)]),(0,n.bF)(o,{class:"ag-theme-balham",style:{width:"100%",height:"calc(100vh - 265px)"},columnDefs:e.columnDefsCA,rowData:e.rowDataCA,onGridReady:e.onGridReadyCA,onCellValueChanged:e.cellValueChanged,rowClassRules:e.rowClassRules,frameworkComponents:e.frameworkComponents},null,8,["columnDefs","rowData","onGridReady","onCellValueChanged","rowClassRules","frameworkComponents"]),(0,n.bF)(r,{modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,onLoad:e.getTipoCobroAsigna,rows:e.rowDataCA},null,8,["modelValue","max","onLoad","rows"])])]),(0,n.bF)(c,{title:e.titleModal,modelValue:e.openModal,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.openModal=a}),onSubmit:e.save},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",gr,[(0,n.Lk)("div",br,[(0,n.Lk)("div",Er,(0,l.v_)(e.title),1)]),(0,n.Lk)("div",Dr,[(0,n.bF)(i,{modelValue:e.formAT.TDDESCRIPCION,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.formAT.TDDESCRIPCION=a}),label:"Tipo de Cobranza",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",vr,[(0,n.bF)(s,{modelValue:e.formAT.CONCOB,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.formAT.CONCOB=a}),"option-label":"CONDES","option-value":"CONCOB",options:e.comboConcepto,label:"Concepto",placeholder:"Seleccione Concepto"},null,8,["modelValue","options"])])])]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})}var wr=t(21063),Rr={components:{sieModal:R.A,agSelect:ge.A,sieGrid:f.A,footerGrid:q.A,QSelect:Ee.S,QInput:be.A,QBtn:Oe.Il},mixins:[Qe.A],data:function(){return{LECTURA_ESCRITURA:x["default"].LECTURA_ESCRITURA,form:{NUMTAL:"",TIPO_USO:""},formAT:{ID_TIPOCOBRO_ASIGNA:"",ID_TIPOCOBRO:"",TDDESCRIPCION:"",CONCOB:"",ACTIVO:1},openModal:!1,titleModal:"SIEWEB: Tesorería",title:"Asignar Concepto a Tipo de Cobranza",nivelAcceso:(0,v["default"])().ruta.nivel,columnDefs:null,columnDefsCA:null,rowData:null,rowDataCA:null,rowDataAsigna:[],comboConcepto:"",TDDESCRIPCION:"",api:null,apiAC:null,autoGroupColumnDef:null,frameworkComponents:null,pagina:1,pages:1,ID_TIPOCOBRO:0,cantidad:"",cambiarEstado:0}},methods:{asignarConcepto:function(e){this.ID_TIPOCOBRO=e.data.ID_TIPOCOBRO,this.TDDESCRIPCION=e.data.DESCRIPCION,this.getTipoCobroAsigna()},onGridReady:function(e){this.api=e.api},onGridReadyCA:function(e){this.apiAC=e.api},addRow:function(){this.ID_TIPOCOBRO&&(this.formAT.ID_TIPOCOBRO_ASIGNA=this.ID_NUEVO_TIPO_COBRO_ASIGNA,this.formAT.ID_TIPOCOBRO=this.ID_TIPOCOBRO,this.formAT.TDDESCRIPCION=this.TDDESCRIPCION,this.formAT.CONCOB="",this.formAT.ACTIVO=1,this.openModal=!0,this.getTipoCobroAsignaID())},getTipoCobro:function(){var e=this;T.$http.get("api/TipoCobroController/getTipoCobro").then(function(a){e.addModified(a),e.rowData=a})},getTipoCobroAsignaID:function(){var e=this;T.$http.get("api/TipoCobroController/getTipoCobroAsigna").then(function(a){e.addModified(a),e.rowDataAsigna=a,a.length>0?e.ID_NUEVO_TIPO_COBRO_ASIGNA=e.rowDataAsigna[e.rowDataAsigna.length-1].ID_TIPOCOBRO_ASIGNA+1:e.ID_NUEVO_TIPO_COBRO_ASIGNA=1})},getTipoCobroAsigna:function(){var e=this,a={ID_TIPOCOBRO:this.ID_TIPOCOBRO,POR_TIPO_COBRO:1},o={pagina:this.pagina};Object.assign(o,a),T.$http.get("api/TipoCobroController/getTipoCobroAsigna",{params:{parametros:o}}).then(function(a){e.addModified(a),e.rowDataCA=a});var t=this,n=T.$http.get("api/TipoCobroController/getTipoCobro",{params:{parametros:{response:"combo"}}}),r=T.$http.get("api/concobroController/getListaConceptos");this.frameworkComponents={agSelect:ge.A,actionButton:U.A,checkbox:wr.A},Promise.all([n,r]).then(function(a){var o=he()(a,2),n=o[0],r=o[1];e.columnDefsCA=[{headerName:"ID",field:"ID_TIPOCOBRO_ASIGNA",width:50},{headerName:"Tipo",field:"ID_TIPOCOBRO",cellEditor:(0,Oa.A)(e,"ID_TIPOCOBRO",!1,"columnDefsCA"),cellEditorParams:{"option-label":"DESCRIPCION","option-value":"ID_TIPOCOBRO",options:n},editable:!1,width:200},{headerName:"Cod.",field:"CONCOB",width:70},{headerName:"Descripción",field:"CONCOB",cellEditor:(0,Oa.A)(e,"CONCOB",!1,"columnDefsCA"),cellEditorParams:{"option-label":"CONDES","option-value":"CONCOB",options:r},width:200},{headerName:"Activo",field:"ACTIVO",cellRenderer:wr.A,cellRendererParams:{tValue:1,fValue:0,change:function(e,a){var o=[a.data];t.$nextTick(B()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,T.$http.put("api/TipoCobroController/putTipoCobroAsigna",{datos:{ID_TIPOCOBRO_ASIGNA:o[0].ID_TIPOCOBRO_ASIGNA,ACTIVO:0===o[0].ACTIVO?1:0}});case 1:return t.$alert("Se actualizó el estado de este registro","success"),e.n=2,t.getTipoCobroAsigna();case 2:return e.a(2)}},e)})))}},width:80,hide:e.nivelAcceso<x["default"].LECTURA_ESCRITURA},{headerName:"",hide:e.nivelAcceso<x["default"].ACCESO_TOTAL,cellRenderer:U.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var a=this,o=[e.data];this.$confirm("¿Estás seguro de eliminar esta asignación?","delete").onOk(B()(P()().m(function n(){return P()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,T.$http.delete("api/TipoCobroController/deleteTipoCobroAsigna",{params:{datos:{ID_TIPOCOBRO_ASIGNA:o[0].ID_TIPOCOBRO_ASIGNA}}});case 1:a.$alert("Asignación removida satisfactoriamente","success"),e.api.updateRowData({remove:o}),t.getTipoCobroAsignaID();case 2:return n.a(2)}},n)})))}},width:40}],e.comboConcepto=r})},save:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return o={ID_TIPOCOBRO:e.formAT.ID_TIPOCOBRO,CONCOB:e.formAT.CONCOB,POR_ASIGNACION:1},a.n=1,T.$http.get("api/TipoCobroController/getTipoCobroAsigna",{params:{parametros:o}}).then(function(a){e.addModified(a),e.rowDataAsig=a,e.cantidad=e.rowDataAsig.length});case 1:e.cantidad>0?(e.$alert("Este Concepto ya fue asignado a este Tipo de Cobranza","info"),e.getTipoCobroAsigna()):""===e.formAT.CONCOB?e.$alert("Debe de elegir el concepto a asignar","info"):e.$confirm("¿Está seguro de agregar este registro?","save").onOk(B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.post("api/TipoCobroController/postTipoCobroAsigna",{datos:{ID_TIPOCOBRO_ASIGNA:e.formAT.ID_TIPOCOBRO_ASIGNA,ID_TIPOCOBRO:e.formAT.ID_TIPOCOBRO,CONCOB:e.formAT.CONCOB,ACTIVO:e.formAT.ACTIVO}});case 1:e.openModal=!1,e.getTipoCobroAsigna(),e.getTipoCobroAsignaID(),e.$alert("Se asigno el concepto satisfactoriamente","success");case 2:return a.a(2)}},a)})));case 2:return a.a(2)}},a)}))()}},beforeMount:function(){this.frameworkComponents={actionButton:U.A},this.columnDefs=[{headerName:"ID",field:"ID_TIPOCOBRO",width:50},{headerName:"Descripción",field:"DESCRIPCION",width:210}],this.getTipoCobro(),this.getTipoCobroAsigna(),this.getTipoCobroAsignaID()}};const Nr=(0,_.A)(Rr,[["render",Tr]]);var Ir=Nr,_r={class:"row q-mt-sm"},Vr={class:"col headerTable"},Lr={class:"row q-pa-sm"},Sr={class:"row q-ma-xs col-gutter-sm"},Mr={class:"col-12"},Pr={class:"col-12"},kr={class:"col-12"},Br={class:"col-12"};function Ur(e,a){var o=(0,n.g2)("q-btn"),t=(0,n.g2)("sie-grid"),r=(0,n.g2)("footer-grid"),i=(0,n.g2)("q-input"),s=(0,n.g2)("q-select"),c=(0,n.g2)("q-checkbox"),u=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",_r,[(0,n.Lk)("div",Vr,[e.rubroColegio?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"q-ma-xs",size:"sm",icon:"add",color:"primary",flat:"",onClick:e.abrirModal},{default:(0,n.k6)(function(){return j()(a[6]||(a[6]=[(0,n.eW)(" Agregar ",-1)]))}),_:1},8,["onClick"]))]),(0,n.bF)(t,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onRowSelected:e.rowSelected,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 265px)"}},null,8,["columnDefs","rowData","onRowSelected","onGridReady","frameworkComponents"]),(0,n.bF)(r,{onLoad:e.listarAnios,modelValue:e.pagina,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.pagina=a}),max:e.pages,style:{width:"100%"},rows:e.rowData},null,8,["onLoad","modelValue","max","rows"])]),(0,n.bF)(u,{modelValue:e.openModalAnio,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.openModalAnio=a}),onSubmit:e.submit},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Lr,[(0,n.Lk)("h3",null,(0,l.v_)(e.proceso),1)]),(0,n.Lk)("div",Sr,[(0,n.Lk)("div",Mr,[e.agregar?((0,n.uX)(),(0,n.Wv)(i,{key:0,type:"number",label:"Año",placeholder:"Ingrese Año",modelValue:e.form.ANO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.form.ANO=a})},null,8,["modelValue"])):(0,n.Q3)("v-if",!0)]),(0,n.Lk)("div",Pr,[(0,n.bF)(i,{label:"Descripción",placeholder:"Ingrese la descripción",modelValue:e.form.DES,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.form.DES=a})},null,8,["modelValue"])]),(0,n.Lk)("div",kr,[(0,n.bF)(s,{label:"Estado",placeholder:"Seleccione el estado del año",modelValue:e.form.ESTADO,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.form.ESTADO=a}),"option-value":"value","option-label":"label",options:e.estadosAnio},null,8,["modelValue","options"])]),(0,n.Lk)("div",Br,[(0,n.bF)(c,{label:"Vigente","true-value":"S","false-value":"N",modelValue:e.form.VIGENTE,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.form.VIGENTE=a})},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"])])}t(52776),t(84433);var xr={components:{QSelect:mo.A},data:function(){return{options:[],value:null}},beforeMount:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:if(o=[],"string"!==typeof e.params.api){a.n=2;break}return a.n=1,T.$http.get(e.params.api,{params:{response:"combo"}});case 1:o=a.v,a.n=3;break;case 2:o=e.params.options||[];case 3:e.options=j()(o),e.value=e.params.value||e.params.defaultvalue;case 4:return a.a(2)}},a)}))()},render:function(){var e=this;return(0,n.h)(mo.A,{modelValue:e.value,options:e.options,"hide-selected":!0,"fill-input":!0,"use-input":!0,onInput:function(a){e.value=a,e.params.setValue(a)},onFilter:function(a,o){o(function(){var o=j()(e.params.options);e.options=(0,uo.filterArray)(a,{field:e.params.dLabel||"label",list:o})})}})}},Fr=["checked"];function Gr(e,a){return(0,n.uX)(),(0,n.CE)("input",{type:"checkbox",onClick:a[0]||(a[0]=function(a){return e.checkedHandler(a,e.params)}),checked:"S"===e.params.value,disabled:""},null,8,Fr)}var yr={name:"checkboxRender",props:{},data:function(){return{rubroColegio:!1}},methods:{validarRubro:function(){return B()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()},checkedHandler:function(e,a){var o=this;return B()(P()().m(function t(){var n,r,l,i;return P()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,x["default"].API_CONSTANTES_SISTEMAS({ID_CONSTANTE:[x["default"].CONSTANTES_SISTEMA.P_RUBRO]});case 1:if(n=t.v,o.rubroColegio=n.P_RUBRO===x["default"].RUBRO_COLEGIO,o.rubroColegio){t.n=6;break}return a.data[a.name]=e.target.checked?"S":"N",r={ANO:a.data.ANIO,VIGENTE:a.data[a.name]},t.p=2,t.n=3,T.$http.put("api/CalendarController/putAnio",{params:r});case 3:l=t.v,o.$alert(l.message,"success"),t.n=5;break;case 4:t.p=4,i=t.v,a.data[a.name]="S",o.$alert(i.error.message,"warning");case 5:t.n=7;break;case 6:e.target.checked=!e.target.checked,console.log(e.target.checked);case 7:return t.a(2)}},t,null,[[2,4]])}))()}}};const $r=(0,_.A)(yr,[["render",Gr]]);var qr=$r,Xr={components:{QCard:b.A,QCardSection:E.A,sieModal:R.A,QInput:be.A,QCheckbox:Ye.A,sieGrid:f.A,actionButton:U.A,select:xr,QPagination:Oe.ao,QSearch:Oe.Ks,footerGrid:q.A,QSelect:Ee.S,QBtn:Oe.Il},data:function(){return{columnDefs:[],rowData:[],frameworkComponents:{},estadosAnio:x["default"].ESTADO_ANIO,openModalAnio:!1,proceso:"Agregar Año",form:{ANO:"",DES:"",ESTADO:"I",VIGENTE:"S"},agregar:!0,pagina:1,pages:1,rubroColegio:!1,data:[]}},mounted:function(){return B()(P()().m(function e(){return P()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()},beforeMount:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return e.frameworkComponents={actionButton:U.A,checkboxRender:qr},a.n=1,e.listarAnios();case 1:return a.n=2,e.validarRubro();case 2:return a.n=3,e.setearColumnas();case 3:return a.a(2)}},a)}))()},methods:{validarRubro:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,x["default"].API_CONSTANTES_SISTEMAS({ID_CONSTANTE:[x["default"].CONSTANTES_SISTEMA.P_RUBRO]});case 1:o=a.v,e.rubroColegio=o.P_RUBRO===x["default"].RUBRO_COLEGIO;case 2:return a.a(2)}},a)}))()},clear:function(){this.form={ANO:"",DES:"",ESTADO:"I",VIGENTE:"N"}},validar:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,x["default"].REGEX_ANIO_SEMESTRAL.test(e.form.ANO)){a.n=1;break}throw new Error("No registro ningún año");case 1:if(e.form.ESTADO){a.n=2;break}throw new Error("No selecciono ningún estado");case 2:a.n=4;break;case 3:throw a.p=3,o=a.v,new Error(o.message);case 4:return a.a(2)}},a,null,[[0,3]])}))()},submit:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,e.validar();case 1:e.$confirm("¿Seguro de ".concat(e.agregar?"agregar":"actualizar"," el año ").concat(e.form.ANO,"?")).onOk(function(){return e.agregar?e.agregarAnio():e.actualizarAnio()}),a.n=3;break;case 2:return a.p=2,o=a.v,a.a(2,e.$alert(o.message,"warning"));case 3:return a.a(2)}},a,null,[[0,2]])}))()},setearAnio:function(e){this.clear();var a=e.data;this.form.ANO=a.ANIO,this.form.DES=a.DESCRIPCION,this.form.ESTADO=a.ESTADO,this.form.VIGENTE=String(a.VIGENTE),this.agregar=!1,this.openModalAnio=!0,this.proceso="Editar Año: "+this.form.ANO},actualizarAnio:function(){var e=this;return B()(P()().m(function a(){var o,t;return P()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,T.$http.put("api/CalendarController/putAnio",{params:e.form});case 1:return o=a.v,e.$alert(o.message,"success"),a.n=2,e.listarAnios();case 2:e.openModalAnio=!1,a.n=4;break;case 3:return a.p=3,t=a.v,a.a(2,e.$alert(t.error.message,"warning"));case 4:return a.a(2)}},a,null,[[0,3]])}))()},agregarAnio:function(){var a=this;return B()(P()().m(function o(){var t,n;return P()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,T.$http.post("api/CalendarController/postAnio",{params:a.form});case 1:return t=o.v,a.$alert(t.message||e.message,"success"),o.n=2,a.listarAnios();case 2:return o.n=3,a.clear();case 3:a.openModalAnio=!1,o.n=5;break;case 4:return o.p=4,n=o.v,o.a(2,a.$alert(n.error.message||n.message,"warning"));case 5:return o.a(2)}},o,null,[[0,4]])}))()},abrirModal:function(){this.clear(),this.openModalAnio=!0,this.proceso="Agregar Año",this.agregar=!0},setearColumnas:function(){this.columnDefs=[{headerName:"Año",field:"ANIO",width:100},{headerName:"Descripción",field:"DESCRIPCION",width:350},{headerName:"Estado",field:"ESTADODES",width:100},{headerName:"Vigente",field:"VIGENTE",cellRenderer:qr,cellRendererParams:{name:"VIGENTE"},width:100,disable:!0,editable:!1},{cellRenderer:U.A,width:40,cellRendererParams:{icon:"edit",title:"Actualizar",onClick:this.setearAnio},hide:this.rubroColegio}]},onGridReady:function(){},rowSelected:function(){},listarAnios:function(){var e=this;return B()(P()().m(function a(){var o;return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/anioController/getAniosPeriodos",{params:{parametros:{view:!0}}});case 1:o=a.v,e.rowData=o;case 2:return a.a(2)}},a)}))()}}};const zr=(0,_.A)(Xr,[["render",Ur]]);var Qr=zr;function Jr(e,a){var o=(0,n.g2)("sie-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[0]||(a[0]=(0,n.Lk)("div",{class:"row q-mt-sm"},null,-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 200px)"}},null,8,["columnDefs","rowData","onGridReady","frameworkComponents"])])}var jr={components:{sieGrid:f.A},data:function(){return{columnDefs:null,rowData:null,api:null,frameworkComponents:null,nivelAcceso:(0,v["default"])().ruta.nivel}},methods:{getMonedas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/personaController/getTipoPerfil",{params:{parametros:{}}});case 1:e.rowData=a.v;case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api}},beforeMount:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.frameworkComponents={actionButton:U.A},e.columnDefs=[{headerName:"ID",field:"ID_PERFIL",width:90},{headerName:"Descripción",field:"DESCRIPCION",width:500}],e.getMonedas();case 1:return a.a(2)}},a)}))()}};const Hr=(0,_.A)(jr,[["render",Jr]]);var Wr=Hr;function Kr(e,a){var o=(0,n.g2)("sie-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[0]||(a[0]=(0,n.Lk)("div",{class:"row q-mt-sm"},null,-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 200px)"}},null,8,["columnDefs","rowData","onGridReady","frameworkComponents"])])}var Zr={components:{sieGrid:f.A},data:function(){return{columnDefs:null,rowData:null,api:null,frameworkComponents:null,nivelAcceso:(0,v["default"])().ruta.nivel}},methods:{getMonedas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/personaController/getReferenciasPersona",{params:{parametros:{}}});case 1:e.rowData=a.v;case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api}},beforeMount:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.frameworkComponents={actionButton:U.A},e.columnDefs=[{headerName:"ID",field:"ID_REFPER",width:90},{headerName:"Abreviatura",field:"ABREVIATURA",width:250},{headerName:"Descripción",field:"DESCRIPCION",width:500}],e.getMonedas();case 1:return a.a(2)}},a)}))()}};const Yr=(0,_.A)(Zr,[["render",Kr]]);var el=Yr;function al(e,a){var o=(0,n.g2)("sie-grid");return(0,n.uX)(),(0,n.CE)("div",null,[a[0]||(a[0]=(0,n.Lk)("div",{class:"row q-mt-sm"},null,-1)),(0,n.bF)(o,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,onGridReady:e.onGridReady,frameworkComponents:e.frameworkComponents,style:{height:"calc(100vh - 200px)"}},null,8,["columnDefs","rowData","onGridReady","frameworkComponents"])])}var ol={components:{sieGrid:f.A},data:function(){return{columnDefs:null,rowData:null,api:null,frameworkComponents:null,nivelAcceso:(0,v["default"])().ruta.nivel}},methods:{getMonedas:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,T.$http.get("api/personaController/getTipoDocumentoIdentidad",{params:{parametros:{}}});case 1:e.rowData=a.v;case 2:return a.a(2)}},a)}))()},onGridReady:function(e){this.api=e.api}},beforeMount:function(){var e=this;return B()(P()().m(function a(){return P()().w(function(a){while(1)switch(a.n){case 0:e.frameworkComponents={actionButton:U.A},e.columnDefs=[{headerName:"ID",field:"ID_TIPODOC",width:90},{headerName:"Abreviatura",field:"ABREVIATURA",width:120},{headerName:"Descripción",field:"DESCRIPCION",width:500}],e.getMonedas();case 1:return a.a(2)}},a)}))()}};const tl=(0,_.A)(ol,[["render",al]]);var nl=tl,rl={components:{tablas:L,moneda:y,banco:Q,ctasBancarias:we,empresa:na,local:Ra,tipoComprobante:Va,servicioBanco:Pa,categoriaConcepto:za,talonarios:Do,conceptosCobros:ut,becas:It,motivoBecas:qt,medioPagos:nn,depositoPos:cn,categoriaCobro:gn,talonesReferencia:Mn,puntosDeVenta:fr,tiposDeCobranza:Ir,anios:Qr,perfiles:Wr,referenciaPersona:el,documentoIdentidad:nl},data:function(){return{id:"3"}},methods:{getSelected:function(e){var a=e.data;this.id=a.id}}};const ll=(0,_.A)(rl,[["render",r]]);var il=ll}}]);