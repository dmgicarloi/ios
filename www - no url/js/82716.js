"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[82716],{82716:function(e,n,r){r.r(n),r.d(n,{default:function(){return $}});var o=r(61758),t={class:"col column q-pa-sm"},a={class:"row q-col-gutter-sm"},l={class:"col-md-6 col-xs-12"},i={class:"col-md-2 col-xs-5"},c={class:"col-md-2 col-xs-4"},u={class:"col-md-2 col-xs-3"},s={class:"col-md-6 col-xs-12"},d={class:"col-md-2 col-xs-4"},m={class:"col-md-4 col-xs-8"};function f(e,n){var r=this,f=(0,o.g2)("header-btn"),h=(0,o.g2)("q-input"),v=(0,o.g2)("q-select"),p=(0,o.g2)("q-form"),b=(0,o.g2)("sie-table"),g=(0,o.g2)("q-card-section"),w=(0,o.g2)("q-card"),D=(0,o.g2)("modal-medicamento"),A=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(A,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",t,[(0,o.bF)(w,{class:"col column",dense:"",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{name:"Ingreso de Medicamentos",buttons:e.buttons},null,8,["buttons"]),(0,o.bF)(g,{class:"col column"},{default:(0,o.k6)(function(){return[(0,o.bF)(p,{ref:"form"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.Lk)("div",l,[(0,o.bF)(h,{disable:"",modelValue:e.form.usucod,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.usucod=n}),label:"Usuario"},null,8,["modelValue"])]),(0,o.Lk)("div",i,[(0,o.bF)(h,{disable:"",modelValue:e.movimientoAcual,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.movimientoAcual=n}),label:"Num movimiento"},null,8,["modelValue"])]),(0,o.Lk)("div",c,[(0,o.bF)(h,{disable:"",modelValue:e.form.fecmov,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.form.fecmov=n}),label:"Fecha"},null,8,["modelValue"])]),(0,o.Lk)("div",u,[(0,o.bF)(h,{disable:"",modelValue:e.form.anomov,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.form.anomov=n}),label:"Año"},null,8,["modelValue"])]),(0,o.Lk)("div",s,[(0,o.bF)(v,{modelValue:e.form.docref,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.form.docref=n}),options:e.documentos,label:e.$t("documento"),rules:[function(e){return!!e||"Campo requerido"}]},null,8,["modelValue","options","label","rules"])]),(0,o.Lk)("div",d,[(0,o.bF)(h,{modelValue:e.form.serref,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.form.serref=n}),label:"N° Serie",maxlength:4,rules:[function(e){return!!e||"Campo requerido"}]},null,8,["modelValue","rules"])]),(0,o.Lk)("div",m,[(0,o.bF)(h,{modelValue:e.form.nroref,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.form.nroref=n}),label:"N° Documento",maxlength:15,rules:[function(e){return!!e||"Campo requerido"}],onKeypress:e.isNumber},null,8,["modelValue","rules","onKeypress"])])])]}),_:1},512),(0,o.bF)(b,{class:"col","row-key":"CODIGO",data:e.rows,onRowSelected:e.regInProgress,columns:e.fields,config:e.config,context:r,dense:"",flat:"",bordered:"","wrap-cells":""},null,8,["data","onRowSelected","columns","config"])]}),_:1})]}),_:1})]),(0,o.bF)(D,{title:e.title,modelValue:e.openModalAgregar,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.openModalAgregar=n}),rows:e.rows,datos:e.mediData,"onUpdate:datos":n[8]||(n[8]=function(n){return e.mediData=n})},null,8,["title","modelValue","rows","datos"])]}),_:1})}var h=r(57008),v=r.n(h),p=r(76080),b=r.n(p),g=r(45254),w=r.n(g),D=(r(77507),r(52133),r(10239),r(50310),r(90095),r(6724),r(83190),r(13715),r(88567)),A=r(95718),k=r(2739),C=r(30545),M=r(9736),E=r(16648),V=r(18105),O=r(982),I=(r(89571),{data:function(){return{config:{DELETE:{component:"button",icon:["delete as eliminar"],tooltip:{eliminar:"Eliminar"},eliminar:function(e,n){var r=n.$$key;this.rows.splice(r,1)},flat:!0,dense:!0,color:"primary"},ACTIVO:{component:"button",iconIf:{0:{icon:"check_box_outline_blank",color:"primary"},1:{icon:"check_box",color:"primary"}},flat:!0},ACTION:{component:"button",icon:["remove_red_eye as ver","edit as editar","delete as eliminar"],tooltip:{ver:"Ver",editar:"Editar",eliminar:"Eliminar"},validate:{ver:function(e){return 2!==e.ACCION}},ver:function(e){var n=e.RUTA.split("."),r=n[n.length-1].toLowerCase();this.titleModalPdf=e.NOMBRE,this.url=this.getUrl(e),this.openModalPdf="pdf"===r,"pdf"!==r&&this.$refs.downloadFile.onClick()},editar:function(e){this.editRow=e,this.form.titulo=e.TITULO,this.form.id_proceso=e.ID_PROCESO,this.form.activo=e.ACTIVO,this.form.orden=e.ORDEN,this.form.accion=e.ACCION,this.showUpload(),this.flagAction="update",this.openModalCovidDocumento=!0},eliminar:function(e){var n=this;this.$confirm("¿Está seguro de eliminar este registro?","delete").onOk(w()(b()().m(function r(){return b()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,n.deleteCovidDocumento(e.ID_DOCUMENTO);case 1:return r.a(2)}},r)})))},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0,color:"primary"}},fields:[{name:"MEDCOD",label:"Código",field:"MEDCOD",align:"center"},{name:"MEDDES",label:"Descripción",field:"MEDDES",align:"left"},{name:"CANTIDAD",label:"Cantidad",field:"CANTIDAD",align:"left",required:!0},{name:"DELETE",label:"",field:"DELETE",align:"left"}]}},created:function(){return w()(b()().m(function e(){return b()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()}}),N=r(81288),T=r(88275),y=r(92173),F=r(30640),U=r(17823),_=r(6123),L=r(87827),Q=r(57668),S={mixins:[I],components:{modalMedicamento:L.A,sieSalones:T.Ay,sieEstudiantes:y.Ay,sieModal:F.A,SieFecha:U.A,QCard:D.A,QCardSection:A.A,QForm:k.A,QTable:C.A,QInput:M.A,QSelect:E.A,QTd:_.Ef,QTr:_.qh,QPopupEdit:_.GT,QDatetime:_.T5,QToggle:_.c5,QPageSticky:_._U,QFab:_.l6,QFabAction:_.B$,QPage:_.Tu},data:function(){var e=this,n=(0,Q["default"])();return{sinPermiso:1===(0,Q["default"])().ruta.nivel,rows:[],form:{usucod:n.usucod,nromov:"",fecmov:(0,V.Ay)(new Date,"DD/MM/YYYY"),anomov:n.ano,docref:[],serref:null,nroref:null},formMedicina:{},pagination:{page:1,rowsPerPage:34},movimientoAcual:null,mediData:[],documentos:[{value:"001",label:"Boleta"},{value:"002",label:"Factura"},{value:"003",label:"Guia"},{value:"004",label:"Inventario Inicial"},{value:"005",label:"Regularizar Stock"},{value:"008",label:"Reprocesar stock Medicamentos"}],title:"Medicinas",openModalAgregar:!1,buttons:[{icon:"search",label:"Consultar",click:function(){e.$router.push({name:"medico.consulta",params:{tipoconsulta:"I"}})}},{icon:"add",label:"Agregar",click:function(){e.openModalAgregar=!0}},{icon:"add_circle",label:"Nuevo",click:function(){var n=w()(b()().m(function n(){return b()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.nuevo();case 1:return n.a(2)}},n)}));function r(){return n.apply(this,arguments)}return r}()},{icon:"save",label:"Grabar",click:function(){var n=w()(b()().m(function n(){var r;return b()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.form.validate();case 1:r=n.v,r?e.grabar():(0,O["default"])("Complete los campos requeridos","warning");case 2:return n.a(2)}},n)}));function r(){return n.apply(this,arguments)}return r}()}]}},methods:{regInProgress:function(e,n){},listarMedicamento:function(){var e=this;return w()(b()().m(function n(){var r,o;return b()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("/api/medicamentoController/getMedicamento");case 1:r=n.v,o=r.data,e.mediData=o;case 2:return n.a(2)}},n)}))()},revertDate:function(e){return e.split("/").reverse().join("-")},clearData:function(){this.rows=[],this.form.serref=null,this.form.docref=null,this.form.nroref=null,this.$refs.form.reset()},grabar:function(){var e=this;return w()(b()().m(function n(){var r,o,t;return b()().w(function(n){while(1)switch(n.n){case 0:if(!(e.rows.length>0)){n.n=3;break}return r=v()({},e.form),o=[],r.tipmov="I",t=e.rows,t.forEach(function(e,n){var t={};t.MEDCOD=e.MEDCOD,t.CANTIDAD=e.STOCK,t.TIPMOV=r.tipmov,t.NROMOV=r.nromov,o.push(t)}),r.fecmov=e.revertDate(r.fecmov),n.n=1,e.$http.post("/api/medicamentoController/agregarMedicamento/",{data:t,cabecera:r}).then(function(){var n=w()(b()().m(function n(r){return b()().w(function(n){while(1)switch(n.n){case 0:return e.clearData(),n.n=1,e.getNroMov();case 1:(0,O["default"])("Se Grabo el registro","success");case 2:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()).catch(function(e){(0,O["default"])("Ah ocurrido un error","warning")});case 1:return n.n=2,e.listarMedicamento();case 2:n.n=4;break;case 3:(0,O["default"])("No hay datos para registrar","warning");case 4:return n.a(2)}},n)}))()},nuevo:function(){var e=this;return w()(b()().m(function n(){var r;return b()().w(function(n){while(1)switch(n.n){case 0:if(!(e.rows.length>0)){n.n=2;break}return n.n=1,e.$confirmar("Ud. ha ingresado datos. ¿Desea grabar?","info",{okLabel:"Si",cancelLabel:"No",html:!0});case 1:if(r=n.v,r)try{e.buttons.map(function(e){"Grabar"===e.label&&e.click()})}catch(n){e.$notify("Ocurrió un problema de conexión.","warning")}else e.clearData();case 2:return n.a(2)}},n)}))()},getNroMov:function(){var e=this;return w()(b()().m(function n(){var r;return b()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/medicamentoController/getNroMov/");case 1:r=n.v,e.movimientoAcual=r.data.NUMERO;case 2:return n.a(2)}},n)}))()},isNumber:function(e){var n=e.which?e.which:e.keyCode;(n<48||n>57)&&e.preventDefault()}},computed:{isGreater:function(){return(0,N.isGreater)()}},created:function(){var e=this;return w()(b()().m(function n(){return b()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getNroMov();case 1:return n.n=2,e.listarMedicamento();case 2:return n.a(2)}},n)}))()}},q=r(12807);const x=(0,q.A)(S,[["render",f],["__scopeId","data-v-7ea24651"]]);var $=x}}]);