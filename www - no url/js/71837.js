"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[71837],{71837:function(e,n,a){a.r(n),a.d(n,{default:function(){return $}});var t=a(61758),o=a(58790),s={class:"col"},r={class:"row col-md-4 col-sm-6",style:{border:"solid 1px","border-radius":"4px",padding:"15px 0px"}},i={class:"row q-pa-sm"},l=["src"],c={class:"col",style:{"font-size":"1.9rem","margin-left":"15px","font-weight":"600"}},u={class:"row justify-center col-12"},d=["src"],m={class:"row q-pa-sm col-12"},p={class:"col-12",style:{"text-align":"center","font-size":"1.5rem","font-weight":"600"}},f={class:"col-12",style:{"text-align":"center","font-size":"1.5rem","font-weight":"600"}},g={class:"col-12",style:{"text-align":"center","font-size":"1.5rem","font-weight":"600"}};function A(e,n){var a=(0,t.g2)("sie-select"),A=(0,t.g2)("q-card-title"),b=(0,t.g2)("q-card-main"),h=(0,t.g2)("q-card"),v=(0,t.g2)("q-btn"),C=(0,t.g2)("q-page-sticky"),w=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(w,{class:"sie-flat pasebrae bg-white q-pa-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(h,null,{default:(0,t.k6)(function(){return[(0,t.bF)(A,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",s,[(0,t.bF)(a,{onSelected:e.cambiarAlumno,type:"outlined",modelValue:e.persona,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.persona=n}),options:e.dataAlumnos,label:"NOMCOMP",val:"ID_PERSONA",placeholder:"Estudiante"},null,8,["onSelected","modelValue","options"])])]}),_:1}),(0,t.Q3)('q-card-title(v-if="isFamExterna")  div.col\n\tsie-select(@selected="cambiarAlumno" type="outlined", v-model="persona", :options="dataAlumnos" label="NOMCOMP" val="ALUCOD" placeholder="Estudiante")'),(0,t.bF)(b,{class:"row justify-center"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",i,[(0,t.Lk)("img",{src:e.rutaEscudo,alt:""},null,8,l),(0,t.Lk)("span",c,(0,o.v_)(e.colegio),1)]),(0,t.Lk)("div",u,[(0,t.Lk)("img",{class:"col-7",src:e.pase.qr,alt:""},null,8,d)]),(0,t.Lk)("div",m,[(0,t.Lk)("div",p,(0,o.v_)(e.alumno.nombres),1),(0,t.Lk)("div",f,(0,o.v_)(e.alumno.apellidos),1),(0,t.Lk)("div",g,(0,o.v_)(e.alumno.alucod),1)])])]}),_:1})]}),_:1}),(0,t.bF)(C,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(v,{fab:"",round:"",color:"secondary",icon:"print",onClick:e.imprimirCarnet},null,8,["onClick"])]}),_:1})]}),_:1})}var b=a(76080),h=a.n(b),v=a(45254),C=a.n(v),w=(a(30683),a(74260),a(39866),a(50310),a(32203),a(11777),a(83190),a(6123)),k=a(26697),O=a(53093),E=a(53811),Q=a(43346),F=a(11654),x=a(9736),y=a(16648),L=a(88567),q=a(95718),M=a(80340),P=a(57668),_=a(65229),D=a(982),N=a(92173),S=a(14667),T=a(2819),I=a(30640),V=a(93616),R={directives:{sieActive:_.A},mixins:[S.A],components:{sieSelect:V.A,QToolbar:w.ZV,QTabs:k.A,QTab:O.A,QTabPanels:E.A,QTabPanel:Q.A,QBtn:F.A,QSelect:y.A,QInput:x.A,QPageSticky:w._U,QFab:w.l6,QCard:L.A,QFabAction:w.B$,QCardSection:q.A,QInnerLoading:w.SQ,QSpinnerOval:w.VA,sieVacio:M.A,sieEstudiantes:N.Ay,sieModal:I.A,QPage:w.Tu,QCardTitle:w.u0,QCardMain:w.d1},data:function(){return{sie:(0,P["default"])(),pase:{},persona:"",dataAlumnos:[],alumno:{alucod:"",nombres:"",apellidos:""},isFamAlu:(0,P["default"])().esFamilia||(0,P["default"])().esFamiliaAdmision||(0,P["default"])().esEstudiante||["E01","E02"].includes((0,P["default"])().tipcod),isFamExterna:"E01"===(0,P["default"])().tipcod,rutaEscudo:(0,P["default"])().host+"/api/HyoEscudo/imagen/logo",colegio:(0,P["default"])().colname}},methods:{getCarnet:function(){var e=this;return C()(h()().m(function n(){var a,t;return h()().w(function(n){while(1)switch(n.n){case 0:try{a=e.dataAlumnos.find(function(n){return Number(n.ID_PERSONA)===Number(e.persona)})||{},t=a.NRODOC||a.DNI||a.CODIGO||e.sie.usucod,e.pase.qr="".concat(e.sie.api,"/HyoQr/generarQr/").concat(t)}catch(e){(0,D["default"])(e.error.message||e.message,"warning")}case 1:return n.a(2)}},n)}))()},getAlumnosExternos:function(){var e=this;return C()(h()().m(function n(){return h()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/InscripcionVacacionesController/getExternos",{params:{params:{columnas:["ALUCOD","NOMCOMP","APEPAT","APEMAT","NOMBRES"],famcod:e.sie.famcod}}});case 1:e.dataAlumnos=n.v;case 2:return n.a(2)}},n)}))()},cambiarAlumno:function(e){var n=this;return C()(h()().m(function a(){var t;return h()().w(function(a){while(1)switch(a.n){case 0:return t=e.NOMCOMP.split(","),n.alumno.alucod=e.ALUCOD||e.CODIGO,n.alumno.nombres=t[1],n.alumno.apellidos=t[0],a.n=1,n.getCarnet();case 1:return a.a(2)}},a)}))()},imprimirCarnet:function(){var e={repcod:"reportesCarnetQr",formato:"pdf",qr:this.pase.qr,escudo:this.rutaEscudo,nemodes:this.pase.nemodes,nomcomp:this.alumno.nomcomp,nombres:this.alumno.nombres,apellidos:this.alumno.apellidos,codigo:this.alumno.alucod};(0,T.exportFilePhp)(e,"webservice/reportes/reporte")},imprimirForm:function(){this.$refs.frmReg.imprimir()}},created:function(){var e=this;return C()(h()().m(function n(){var a,t;return h()().w(function(n){while(1)switch(n.n){case 0:if(e.isFamExterna&&e.getAlumnosExternos(),!e.sie.alucod){n.n=2;break}return n.n=1,e.$http.get("api/Alumnocontroller/getFamcod",{params:{alucod:e.sie.alucod}}).catch(function(e){});case 1:a=n.v,a&&a[0]&&a[0].FAMCOD&&(e.sie.famcod=a[0].FAMCOD);case 2:return n.n=3,e.getAlumnos();case 3:t=n.v,e.dataAlumnos=t,e.sie.esOtros&&"E01"!==e.sie.tipcod&&(e.persona=e.sie.profcod),e.alumno.nombres=e.sie.nombre,e.alumno.alucod=e.sie.usucod,e.getCarnet();case 4:return n.a(2)}},n)}))()}},U=a(12807);const z=(0,U.A)(R,[["render",A]]);var $=z}}]);