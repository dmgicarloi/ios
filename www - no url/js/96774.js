"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[96774],{96774:function(n,e,i){i.r(e),i.d(e,{default:function(){return x}});var o=i(61758),r=i(58790),a={class:"row full-height"},t={class:"col-xs-12 column justify-center items-center"},c={class:"row q-col-gutter-sm justify-center"},s={class:"col-xs-12 col-sm-6 col-md-4 col-lg-4 col-xl-3"},u={class:"row"},l={class:"col-12 column items-center"},d=["src"],p={class:"col-12 column items-center"},v={key:0,class:"text-bold"},f={class:"text-bold"},g={class:"col-12 q-pt-sm q-pl-lg q-pr-lg"};function w(n,e){var i=(0,o.g2)("q-btn"),w=(0,o.g2)("q-card-section"),h=(0,o.g2)("q-card"),b=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(b,{class:"q-pa-sm sie-flat"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.Lk)("div",t,[(0,o.Lk)("div",c,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.serviciosConectados,function(a){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(h,{style:{height:"100%"}},{default:(0,o.k6)(function(){return[(0,o.bF)(w,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",u,[(0,o.Lk)("div",l,[(0,o.Lk)("img",{src:n.getImgCloud(a.ID_API),width:"150",height:"150"},null,8,d)]),(0,o.Lk)("div",p,[e[0]||(e[0]=(0,o.Lk)("br",null,null,-1)),a.ULTIMO_ACCESO?((0,o.uX)(),(0,o.CE)("span",v,(0,r.v_)(n.getFecha(a.ULTIMO_ACCESO)),1)):(0,o.Q3)("v-if",!0),e[1]||(e[1]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",f,(0,r.v_)(1===a.ESTADO?"Cuenta vinculada":" "),1),e[2]||(e[2]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",null,(0,r.v_)(a.CORREO||" "),1)]),(0,o.Lk)("div",g,[(0,o.bF)(i,{class:"full-width",label:1===a.ESTADO?"Desvincular":"Vincular",color:1===a.ESTADO?"primary":"light",onClick:function(e){return n.accion(a)}},null,8,["label","color","onClick"])])])]}),_:2},1024)]}),_:2},1024)])}),256))])])])]}),_:1})}var h=i(76080),b=i.n(h),m=i(45254),k=i.n(m),y=i(6123),O=i(93616),S=i(81288),C=i(95655),D=i(18105),A=i(88567),E=i(95718),$={components:{QCard:A.A,QCardSection:E.A,sieSelect:O.A,QPage:y.Tu,QBtn:y.Il},data:function(){return{serviciosConectados:[]}},methods:{getFecha:function(n){return(0,D.Ay)(new Date(n),"DD/MM/YYYY HH:mm:ss")},getImgCloud:function(n){var e=null;switch(n){case 1:e="google1";break;case 2:e="microsoft1";break;case 3:e="dropbox";break;default:e="noimg"}return"statics/img/cloud/".concat(e,".png")},accion:function(n){switch(window.currentSieCloud=!1,n.ID_API){case 1:0===n.ESTADO&&this.conectarGoogle();break;case 2:0===n.ESTADO&&this.conectarMicrosoft();break;case 3:0===n.ESTADO&&this.conectarDropbox();break}n.ESTADO&&this.desconectar(n)},conectarGoogle:function(){var n=this;return k()(b()().m(function e(){var i;return b()().w(function(e){while(1)switch(e.p=e.n){case 0:return delete window.localStorage._apiGoogle,e.p=1,e.n=2,n.$http.post("api/HyoLoginGoogle/login");case 2:i=e.v,"string"===typeof i?(0,C["default"])(i,"_system",500,500):(n.ServiciosOnline(),n.$notify(i.message,"warning")),e.n=4;break;case 3:e.p=3,e.v,n.ServiciosOnline(),n.$notify("Intentalo nuevamente.","warning");case 4:return e.a(2)}},e,null,[[1,3]])}))()},conectarMicrosoft:function(){var n=this;return k()(b()().m(function e(){var i,o;return b()().w(function(e){while(1)switch(e.p=e.n){case 0:return delete window.localStorage._apiOneDrive,e.p=1,e.n=2,n.$http.get("api/HyoOneDriveApi/obtUrl");case 2:i=e.v,o=i.json,"string"===typeof o?(0,C["default"])(o,"_system",500,500):(n.ServiciosOnline(),n.$notify("Este usuario ya ha sido vinculado.","warning")),e.n=4;break;case 3:e.p=3,e.v,n.ServiciosOnline(),n.$notify("Este usuario ya ha sido vinculado.","warning");case 4:return e.a(2)}},e,null,[[1,3]])}))()},conectarDropbox:function(){var n=this;return k()(b()().m(function e(){var i,o;return b()().w(function(e){while(1)switch(e.p=e.n){case 0:return delete window.localStorage._apiDropbox,e.p=1,e.n=2,n.$http.get("api/HyoDropboxApi/obtToken");case 2:i=e.v,o=i.json,"string"===typeof o?(0,C["default"])(o,"_system",500,500):(n.ServiciosOnline(),n.$notify("Este usuario ya ha sido vinculado.","warning")),e.n=4;break;case 3:e.p=3,e.v,n.ServiciosOnline(),n.$notify("Este usuario ya ha sido vinculado.","warning");case 4:return e.a(2)}},e,null,[[1,3]])}))()},desconectar:function(n){var e=this;return k()(b()().m(function i(){var o,r,a,t;return b()().w(function(i){while(1)switch(i.p=i.n){case 0:return i.p=0,o=n.ID_API,i.n=1,e.$confirmar("¿Deseas desvincular el correo ".concat(n.CORREO,"?"),"warning");case 1:if(r=i.v,!r){i.n=3;break}return i.n=2,e.$http.delete("api/HyoApisusuario/desconectar",{params:{idApis:o}});case 2:a=i.v,t=a.json,e.$notify(t.message,"success"),e.ServiciosOnline();case 3:i.n=5;break;case 4:i.p=4,i.v,e.$notify("No ha sido posible desvicunlar la cuenta.","warning");case 5:return i.a(2)}},i,null,[[0,4]])}))()},ServiciosOnline:function(){var n=this;return k()(b()().m(function e(){var i,o;return b()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.$http.get("api/HyoApis/serviciosEstado");case 1:i=e.v,o=i.json,n.serviciosConectados=o;case 2:return e.a(2)}},e)}))()}},created:function(){this.ServiciosOnline()},mounted:function(){var n=this;window.currentSieCloud=!1,(0,S.watchAuth2)(["_apiGoogle","_apiOneDrive","_apiDropbox"],function(){var e=k()(b()().m(function e(i,o){var r,a,t;return b()().w(function(e){while(1)switch(e.p=e.n){case 0:a=o,e.n="_apiGoogle"===a?1:"_apiOneDrive"===a?5:"_apiDropbox"===a?9:13;break;case 1:return e.p=1,e.n=2,n.$http.post("api/HyoLoginGoogle/guardarCodigo",{codigo:i});case 2:r=e.v,n.ServiciosOnline(),n.$notify(r.message,"success"),e.n=4;break;case 3:e.p=3,t=e.v,n.$notify(t.error.msg,"warning");case 4:return e.a(3,13);case 5:return e.p=5,e.n=6,n.$http.post("api/HyoOneDriveApi/guardarCodigo",{codigo:i});case 6:n.ServiciosOnline(),n.$notify("El usuario ha sido vinculado.","success"),e.n=8;break;case 7:e.p=7,e.v,n.$notify("Ha ocurrido un problema al tratar de divuncular este usuario","warning");case 8:return e.a(3,13);case 9:return e.p=9,e.n=10,n.$http.post("api/HyoDropboxApi/guardarCodigo",{codigo:i});case 10:n.ServiciosOnline(),n.$notify("El usuario ha sido vinculado.","success"),e.n=12;break;case 11:e.p=11,e.v,n.$notify("Ha ocurrido un problema al tratar de divuncular este usuario","warning");case 12:return e.a(3,13);case 13:return e.a(2)}},e,null,[[9,11],[5,7],[1,3]])}));return function(n,i){return e.apply(this,arguments)}}())},unmounted:function(){window.callback&&window.removeEventListener("storage",window.callback.cb)},beforeCreate:function(){window.callback&&window.removeEventListener("storage",window.callback.cb)}},_=i(12807);const L=(0,_.A)($,[["render",w]]);var x=L}}]);