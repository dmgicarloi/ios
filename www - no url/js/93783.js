"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[93783],{93783:function(e,o,t){t.r(o),t.d(o,{default:function(){return lt}});var i=t(8445),a=t.n(i),n=t(61758),r=t(58790),l={class:"row"},s={class:"col-md-2"},c={key:0,class:"div q-card q-px-sm q-pt-sm"},u={class:"row"},d={class:"col-xs-12 col-md-2"},f={class:"col-xs-12 col-md-2"},m={class:"col-xs-12 col-md-4"},p={class:"col-xs-12 col-md-4"},b={class:"row justify-around"},g={class:"col-xs-12 col-md-8"},v={class:"row"},C={class:"col-xs-12 col-md-2"},h={class:"col-xs-12 col-md-4"},D={class:"col-xs-12 col-md-6"},O={class:"row q-px-sm q-pt-sm"},k={class:"col"},I={class:"col"},S={class:"row column q-px-sm q-pt-sm"},F={class:"col-12"};function A(e,o){var t=(0,n.g2)("sie-select"),i=(0,n.g2)("q-toolbar-title"),A=(0,n.g2)("q-tooltip"),E=(0,n.g2)("q-btn"),L=(0,n.g2)("q-toolbar"),_=(0,n.g2)("q-select"),T=(0,n.g2)("selectMultiple"),R=(0,n.g2)("q-fab-action"),x=(0,n.g2)("q-fab"),P=(0,n.g2)("q-page-sticky"),N=(0,n.g2)("listadoCriterios"),y=(0,n.g2)("registroCriterios"),q=(0,n.g2)("copiaCriteriosEnMasa"),w=(0,n.g2)("q-radio"),V=(0,n.g2)("sie-modal"),M=(0,n.g2)("configuracionClase"),U=(0,n.g2)("procesarBancoDatos"),j=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(j,null,{default:(0,n.k6)(function(){return[(0,n.bF)(L,{class:"shadow-2 z-fab",inverted:""},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{class:"q-pa-none"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(e.$t(e.titulo)),1),(0,n.Lk)("span",null,(0,r.v_)(e.subtitulo),1),(0,n.Lk)("div",l,[(0,n.Lk)("div",s,[e.verComponentes.registroCriterio?((0,n.uX)(),(0,n.Wv)(t,{key:0,type:"outlined",placeholder:"periodo",modelValue:e.vmClasePeriodo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmClasePeriodo=o}),options:e.optionsPeriodoCriterio,onSelected:e.cambiarClasePeriodo,label:"PERIODODES",val:"ID_CLASE_PERIODO"},null,8,["modelValue","options","onSelected"])):(0,n.Q3)("v-if",!0)])])]}),_:1}),e.verComponentes.listadoGeneral?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(E,{key:0,flat:"",round:"",dense:"",icon:"undo",onClick:e.volver},{default:(0,n.k6)(function(){return[(0,n.bF)(A,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[10]||(o[10]=[(0,n.eW)("Volver",-1)]))}),_:1})]}),_:1},8,["onClick"]))]}),_:1}),e.verComponentes.listadoGeneral?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.bF)(_,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltro.instrucod,options:e.dataSelect.nivel,"float-label":e.$t("ngs.nivel"),onChange:e.seleccionaInstru,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",f,[(0,n.bF)(_,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltro.gradocod,options:e.grados,"float-label":e.$t("ngs.grado"),onChange:e.seleccionaGrado,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",m,[(0,n.bF)(T,{options:e.dataAmbito,modelValue:e.vmFiltro.ambito,labelSelect:e.$t("ambito"),onChange:e.seleccionaAmbito},null,8,["options","modelValue","labelSelect","onChange"])]),(0,n.Lk)("div",p,[(0,n.bF)(T,{options:e.dataSelect.curso,modelValue:e.vmFiltro.curso,labelSelect:e.$t("curso"),onChange:e.seleccionaCurso},null,8,["options","modelValue","labelSelect","onChange"])])]),(0,n.Lk)("div",b,[(0,n.Lk)("div",g,[(0,n.Lk)("div",v,[(0,n.Lk)("div",C,[(0,n.bF)(_,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltro.asignatura,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.vmFiltro.asignatura=o}),options:e.dataSelect.asignatura,"float-label":e.$t("asignaturas"),filter:""},null,8,["modelValue","options","float-label"])]),(0,n.Lk)("div",h,[(0,n.bF)(_,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.periodo,options:e.dtPeriodos,"float-label":e.$t("periodo"),onChange:e.seleccionaPeriodo},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",D,[(0,n.bF)(_,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltro.curricula,options:e.dataCurricula,"float-label":e.$t("pesosYCriterios.curricula"),onChange:e.seleccionaCurricula},null,8,["modelValue","options","float-label","onChange"])])])])]),(0,n.bF)(P,{position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(x,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,n.k6)(function(){return[(0,n.bF)(R,{color:"secondary",icon:"settings",onClick:e.abrirModalConfig},{default:(0,n.k6)(function(){return[(0,n.bF)(A,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[11]||(o[11]=[(0,n.eW)("Configuración",-1)]))}),_:1})]}),_:1},8,["onClick"]),e.sie.ruta.nivel>=2?((0,n.uX)(),(0,n.Wv)(R,{key:0,color:"secondary",icon:"copy",onClick:e.verCopiaEnMasa},{default:(0,n.k6)(function(){return[(0,n.bF)(A,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[12]||(o[12]=[(0,n.eW)("Copia de criterios en masa",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0),e.sie.ruta.nivel>=2?((0,n.uX)(),(0,n.Wv)(R,{key:1,color:"secondary",icon:"banco_datos",onClick:e.verCopiaBancoDatos},{default:(0,n.k6)(function(){return[(0,n.bF)(A,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[13]||(o[13]=[(0,n.eW)("Asignación Masiva Banco Datos",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0),(0,n.bF)(R,{color:"secondary",icon:"print",onClick:e.modalReportes},{default:(0,n.k6)(function(){return[(0,n.bF)(A,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(e.$t("botones.imprimir")),1)]}),_:1})]}),_:1},8,["onClick"])]}),_:1})]}),_:1})])):(0,n.Q3)("v-if",!0),e.verComponentes.listadoGeneral?((0,n.uX)(),(0,n.Wv)(N,{key:1,onVerCriterios:e.verCriterios,mostrarDatos:e.loadCriterios,dataCriterios:e.dataCriterios,objNiveles:e.objNiveles[e.vmFiltro.curricula]},null,8,["onVerCriterios","mostrarDatos","dataCriterios","objNiveles"])):(0,n.Q3)("v-if",!0),e.verComponentes.registroCriterio?((0,n.uX)(),(0,n.Wv)(y,{key:2,dataAmbitoSelect:e.dataCompCriterios.ambitoSelected,dataClaseSelect:e.dataCompCriterios.cursoSelected,dataPeridoSelect:e.dataCompCriterios.periodoSelected,dataAmbito:e.dataSelect.ambito,onSetCambioData:e.setCambioData},null,8,["dataAmbitoSelect","dataClaseSelect","dataPeridoSelect","dataAmbito","onSetCambioData"])):(0,n.Q3)("v-if",!0),e.verComponentes.copiaEnMasa?((0,n.uX)(),(0,n.Wv)(q,{key:3,pDataAmbito:e.paramData.ambito,pDataNivel:e.paramData.nivel,pDataGrado:e.paramData.grado,pDataPeriodos:e.paramData.periodos,onSetCambioData:e.setCambioData},null,8,["pDataAmbito","pDataNivel","pDataGrado","pDataPeriodos","onSetCambioData"])):(0,n.Q3)("v-if",!0),(0,n.bF)(V,{modelValue:e.openModal.reportes,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.openModal.reportes=o}),title:e.$t("reportes"),header:!0,ok:!1},{footer:(0,n.k6)(function(){return[(0,n.bF)(L,{class:"justify-end",color:"grey-2"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",null,[(0,n.bF)(E,{class:"q-mx-xs",color:"primary",icon:"file_pdf",onClick:o[5]||(o[5]=function(o){return e.exportar("pdf")})},{default:(0,n.k6)(function(){return a()(o[14]||(o[14]=[(0,n.eW)("PDF",-1)]))}),_:1}),(0,n.bF)(E,{class:"q-mx-xs",color:"primary",icon:"file_excel",onClick:o[6]||(o[6]=function(o){return e.exportar("xls")})},{default:(0,n.k6)(function(){return a()(o[15]||(o[15]=[(0,n.eW)("Excel",-1)]))}),_:1})])]}),_:1})]}),footerMobile:(0,n.k6)(function(){return[(0,n.bF)(E,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[7]||(o[7]=function(o){return e.exportar("pdf")})}),(0,n.bF)(E,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[8]||(o[8]=function(o){return e.exportar("xls")})})]}),default:(0,n.k6)(function(){return[(0,n.Lk)("div",O,[(0,n.Lk)("div",k,[(0,n.bF)(_,{class:"q-if-outlined",color:"secondary",modelValue:e.repFiltro.instrucod,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.repFiltro.instrucod=o}),options:e.dataSelect.nivel,"float-label":e.$t("ngs.nivel")},null,8,["modelValue","options","float-label"])]),(0,n.Lk)("div",I,[(0,n.bF)(_,{class:"q-if-outlined",color:"secondary",modelValue:e.repFiltro.gradocod,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.repFiltro.gradocod=o}),options:e.gradosFiltro,"float-label":e.$t("ngs.grado")},null,8,["modelValue","options","float-label"])])]),(0,n.Lk)("div",S,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.objReportes,function(t,i){return(0,n.uX)(),(0,n.CE)("div",F,[(0,n.bF)(w,{class:"q-if-outlined",modelValue:e.repcod,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.repcod=o}),val:t.repcod,label:t.label},null,8,["modelValue","val","label"])])}),256))])]}),_:1},8,["modelValue","title"]),e.openModal.config?((0,n.uX)(),(0,n.Wv)(M,{key:4,verCurricula:e.dataCurricula.length>1,onCerrarModal:e.cerrarModalConfig},null,8,["verCurricula","onCerrarModal"])):(0,n.Q3)("v-if",!0),e.verComponentes.procesarBancoDatos?((0,n.uX)(),(0,n.Wv)(U,{key:5,onSetCambioData:e.setCambioData},null,8,["onSetCambioData"])):(0,n.Q3)("v-if",!0)]}),_:1})}var E=t(99550),L=t.n(E),_=t(76080),T=t.n(_),R=t(45254),x=t.n(R),P=(t(71225),t(23825),t(10239),t(25751),t(50310),t(5962),t(90095),t(9240),t(83190),t(27153),t(66307),t(13715),t(24066),t(6123)),N=t(13813),y=t(31243),q=t(27738),w=t(49758),V=(t(515),t(29104)),M={class:"row contTableCriterios"},U={class:"columnCurso"},j={class:"q-table-container column no-wrap q-table__card q-table--horizontal-separator"},Q={class:"q-table"},X={key:0},G={key:1},$=["colspan"],B=["onDblclick"],W=["title"],z={class:"contCurso"},K={key:0},J={class:"col column columnaCrit"},Y={class:"q-table-container column no-wrap q-table__card q-table--horizontal-separator"},H={class:"q-table"},Z=["title"],ee={class:"contPrograma"},oe={class:"contDescPrograma"},te={class:"contIndice"},ie={key:0},ae=["colspan"],ne={key:1},re=["colspan"],le={class:"text-white"},se=["onDblclick"],ce={key:1,class:"sumativo text-primary"},ue={class:"text-center"};function de(e,o){var t=(0,n.g2)("q-icon"),i=(0,n.g2)("q-tooltip"),l=(0,n.g2)("q-spinner-oval"),s=(0,n.g2)("q-inner-loading");return(0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("div",U,[(0,n.bo)((0,n.Lk)("div",j,[(0,n.Lk)("div",null,[(0,n.Lk)("table",Q,[o[2]||(o[2]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Curso")])],-1)),0==Object.keys(e.dataCriterios).length?((0,n.uX)(),(0,n.CE)("tbody",X,a()(o[0]||(o[0]=[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null," ")],-1)])))):((0,n.uX)(),(0,n.CE)("tbody",G,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios,function(l,s){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{class:"text-primary nomSalon",colspan:e.colspan},(0,r.v_)(l[0].detalle.salon),9,$)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios[s],function(l,s){return(0,n.uX)(),(0,n.CE)("tr",{onDblclick:function(o){return e.verCriterios(l.detalle)}},[(0,n.Lk)("td",{title:l.detalle.curso},[(0,n.Lk)("div",z,[l.detalle.origenReplica?((0,n.uX)(),(0,n.CE)("span",K,[(0,n.bF)(t,{color:"green",name:"pesos_criterios"}),(0,n.bF)(i,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[1]||(o[1]=[(0,n.eW)("Origen de replica",-1)]))}),_:1})])):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",null,(0,r.v_)(l.detalle.curso),1)])],8,W)],40,B)}),256))],64)}),256))]))])])],512),[[V.aG,!e.mostrarDatos]])]),(0,n.Lk)("div",J,[(0,n.bF)(s,{visible:e.mostrarDatos},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,n.bo)((0,n.Lk)("div",Y,[(0,n.Lk)("div",null,[(0,n.Lk)("table",H,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.columnas,function(e,i){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("th",{title:e.criterio+e.indice},[(0,n.Lk)("div",ee,[(0,n.Lk)("div",oe,[(0,n.bF)(t,{class:"q-mr-sm",name:e.icono||"share",style:(0,r.Tr)({color:e.color}),size:"23px"},null,8,["name","style"]),(0,n.Lk)("span",null,(0,r.v_)(e.criterio),1)]),(0,n.Lk)("div",te,(0,r.v_)(e.indice),1)])],8,Z),o[3]||(o[3]=(0,n.Lk)("th",null,"Peso",-1))],64)}),256))])]),0==Object.keys(e.dataCriterios).length?((0,n.uX)(),(0,n.CE)("tbody",ie,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{class:"text-primary nomSalon",colspan:e.colspan},(0,r.v_)(e.$t("clase.noExistenClases")),9,ae)])])):((0,n.uX)(),(0,n.CE)("tbody",ne,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios,function(i,a){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{class:"text-primary nomSalon",colspan:e.colspan},[(0,n.Lk)("span",le,(0,r.v_)(i[0].detalle.salon),1)],8,re)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dataCriterios[a],function(i,a){return(0,n.uX)(),(0,n.CE)("tr",{onDblclick:function(o){return e.verCriterios(i.detalle)}},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.columnas,function(e,a){return(0,n.uX)(),(0,n.CE)(n.FK,null,[i.data[e.value+"_"+e.indice]?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("td",null,[(0,n.Lk)("div",{class:(0,r.C4)(["contCriterio",{excluido:i.data[e.value+"_"+e.indice].excluir}])},[i.data[e.value+"_"+e.indice].excluirPor?((0,n.uX)(),(0,n.Wv)(t,{key:0,name:"grid_off"})):(0,n.Q3)("v-if",!0),i.data[e.value+"_"+e.indice].sumativo?((0,n.uX)(),(0,n.CE)("span",ce,"Σ")):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",null,(0,r.v_)(i.data[e.value+"_"+e.indice].det),1)],2)]),(0,n.Lk)("td",ue,[(0,n.Lk)("span",{class:(0,r.C4)({excluido:i.data[e.value+"_"+e.indice].excluir})},(0,r.v_)(i.data[e.value+"_"+e.indice].peso),3)])],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[o[4]||(o[4]=(0,n.Lk)("td",{class:"text-center"},[(0,n.Lk)("div",null,"-")],-1)),o[5]||(o[5]=(0,n.Lk)("td",{class:"text-center"},"-",-1))],64))],64)}),256))],40,se)}),256))],64)}),256))]))])])],512),[[V.aG,!e.mostrarDatos]])])])}var fe={emits:["verCriterios"],name:"listadoGeneral",props:{dataCriterios:Object,objNiveles:Object,mostrarDatos:Boolean},components:{QBtn:P.Il,QIcon:P.bP,QInnerLoading:P.SQ,QSpinnerOval:P.VA,QTooltip:P.nC},data:function(){return{}},computed:{columnas:function(){var e=[];for(var o in this.objNiveles)for(var t=1;t<=this.objNiveles[o].limite;t++)e.push({criterio:this.objNiveles[o].label,indice:t,value:this.objNiveles[o].value,icono:this.objNiveles[o].icon,color:this.objNiveles[o].color});return e},colspan:function(){return 2*this.columnas.length}},mounted:function(){},methods:{verCriterios:function(e){this.$emit("verCriterios",e)}},created:function(){}},me=t(12807);const pe=(0,me.A)(fe,[["render",de]]);var be=pe,ge={class:"row q-ma-sm-xs"},ve={class:"col-auto row flex-center"},Ce={class:"row q-ma-sm-xs"},he={class:"col-auto row flex-center"},De={key:0,class:"row q-ma-sm-xs q-mt-lg-lg text-primary"},Oe={key:1,class:"row q-ma-sm-xs"},ke={class:"col-auto row flex-center"},Ie={key:2,class:"row q-ma-sm-xs"},Se={class:"col-auto row flex-center"},Fe={key:3,class:"row q-ma-sm-xs"},Ae={class:"col-auto row flex-center"};function Ee(e,o){var t=(0,n.g2)("q-tab"),i=(0,n.g2)("q-icon"),l=(0,n.g2)("q-select"),s=(0,n.g2)("q-popup-edit"),c=(0,n.g2)("q-td"),u=(0,n.g2)("q-toggle"),d=(0,n.g2)("q-table"),f=(0,n.g2)("q-tab-pane"),m=(0,n.g2)("q-tr"),p=(0,n.g2)("q-tabs"),b=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.Wv)(b,{class:"moda-registro-grupos-config",modelValue:e.verModal,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.verModal=o}),title:e.$t("configuracion"),onClose:e.cerrarModal,header:!0,footer:!1,ok:!1},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{inverted:"",ref:"tabs",animated:""},{title:(0,n.k6)(function(){return[(0,n.bF)(t,{default:"",name:"tab-1",label:"Configuración Criterios","no-caps":""}),e.config.editConfig?((0,n.uX)(),(0,n.Wv)(t,{key:0,name:"tab-2",label:"Competencias Transversales"})):(0,n.Q3)("v-if",!0)]}),default:(0,n.k6)(function(){return[(0,n.bF)(f,{name:"tab-1"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",ge,[(0,n.Lk)("div",ve,[(0,n.bF)(i,{class:"q-mr-sm",name:"calendar_check_o",size:"28px"})]),o[3]||(o[3]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Límite replica anual:"),(0,n.Lk)("span",null,"Hasta que nivel de evaluación se va a replicar en todos los periodos de la clase.")])],-1))]),(0,n.Lk)("div",Ce,[(0,n.Lk)("div",he,[(0,n.bF)(i,{class:"q-mr-sm",name:"pesos_criterios",size:"28px"})]),o[4]||(o[4]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Nivel de edición pesos R.N.:"),(0,n.Lk)("span",null,"A partir de que nivel de evaluación se puede configurar los pesos y criterios en el registro de notas.")])],-1))]),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",De,a()(o[5]||(o[5]=[(0,n.Lk)("p",{class:"tituloCriterio"},"Habilitar campos en registro de pesos y criterios:",-1)])))):(0,n.Q3)("v-if",!0),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",Oe,[(0,n.Lk)("div",ke,[(0,n.bF)(i,{class:"q-mr-sm",name:"format_color_text",size:"28px"})]),o[6]||(o[6]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Mostrar Excluido:"),(0,n.Lk)("span",null,"Permite excluir un criterio del calculo del promedio.")])],-1))])):(0,n.Q3)("v-if",!0),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",Ie,[(0,n.Lk)("div",Se,[(0,n.bF)(i,{class:"q-mr-sm",name:"functions",size:"28px"})]),o[7]||(o[7]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Mostrar Sumativo:"),(0,n.Lk)("span",null,'Habilita la configuración para que sus "criterios hijos" se sumen entre si para dar un promedio.')])],-1))])):(0,n.Q3)("v-if",!0),e.config.editConfig?((0,n.uX)(),(0,n.CE)("div",Fe,[(0,n.Lk)("div",Ae,[(0,n.bF)(i,{class:"q-mr-sm",name:"grid_off",size:"28px"})]),o[8]||(o[8]=(0,n.Lk)("div",{class:"col self-center"},[(0,n.Lk)("div",{class:"text-justify"},[(0,n.Lk)("b",null,"Mostrar Competencia No Evaluada:"),(0,n.Lk)("span",null,"Bloquea la competencia y se considera como competencia no evaluada en el periodo")])],-1))])):(0,n.Q3)("v-if",!0),(0,n.bF)(d,{class:"tblConfig q-ma-lg-md","table-style":"height: 80%",color:"secondary","hide-bottom":!0,data:e.config.data,columns:e.config.columns,pagination:e.config.pag,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.config.pag=o})},{"body-cell-LIMITE_REPLICA":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(o.row.LIMITE_REPLICA),1),(0,n.bF)(s,{class:"q-pa-xs",modelValue:o.row.LIMITE_REPLICA,"onUpdate:modelValue":function(e){return o.row.LIMITE_REPLICA=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:o.row.LIMITE_REPLICA,"onUpdate:modelValue":function(e){return o.row.LIMITE_REPLICA=e},options:e.config.optionsLR,onInput:function(t){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-EDICION_PESOS_PROFE":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(o.row.EDICION_PESOS_PROFE),1),(0,n.bF)(s,{class:"q-pa-xs",modelValue:o.row.EDICION_PESOS_PROFE,"onUpdate:modelValue":function(e){return o.row.EDICION_PESOS_PROFE=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:o.row.EDICION_PESOS_PROFE,"onUpdate:modelValue":function(e){return o.row.EDICION_PESOS_PROFE=e},options:e.config.optionsEP,onInput:function(t){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_EXCLUIDO":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.MOSTRAR_EXCLUIDO,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_EXCLUIDO=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(t){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_SUMATIVO":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.MOSTRAR_SUMATIVO,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_SUMATIVO=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(t){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),"body-cell-MOSTRAR_EXCL_PORCENTAJE":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{modelValue:o.row.MOSTRAR_EXCL_PORCENTAJE,"onUpdate:modelValue":function(e){return o.row.MOSTRAR_EXCL_PORCENTAJE=e},"true-value":1,"false-value":0,color:"secondary",onInput:function(t){return e.grabarConfig(o.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"])]}),_:1}),(0,n.bF)(f,{name:"tab-2"},{default:(0,n.k6)(function(){return[o[10]||(o[10]=(0,n.Lk)("div",{class:"row q-ma-sm-xs"},[(0,n.Lk)("p",{class:"text-bold"},"Asociar el programa e índice al curso para el cálculo de la competencia transversal.")],-1)),o[11]||(o[11]=(0,n.Lk)("div",{class:"row q-ma-sm-xs"},[(0,n.Lk)("p",null,"* Considerar que en el plan curricular el curso debe estar asociado en la columna SIAGIE (GEST AUTO, DESEN TIC) según corresponda.")],-1)),(0,n.bF)(d,{class:"tblConfig q-ma-lg-md","table-style":"height: 80%",color:"secondary","hide-bottom":!0,data:e.configCT.data,columns:e.configCT.columns,pagination:e.configCT.pag,"onUpdate:pagination":o[1]||(o[1]=function(o){return e.configCT.pag=o})},{"body-cell-ID_PROGRAMA":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o,style:{"min-width":"260px"}},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(o.row.ID_PROGRAMA?e.configCT.objPrograma[o.row.ID_PROGRAMA].descripcion:""),1),(0,n.bF)(s,{class:"q-pa-xs",modelValue:o.row.ID_PROGRAMA,"onUpdate:modelValue":function(e){return o.row.ID_PROGRAMA=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:o.row.ID_PROGRAMA,"onUpdate:modelValue":function(e){return o.row.ID_PROGRAMA=e},options:e.configCT.optionsProg,onInput:function(t){return e.grabarConfigCT(o.row,"ID_PROGRAMA")}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"body-cell-INDICE":(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(o.row.INDICE),1),(0,n.bF)(s,{class:"q-pa-xs",modelValue:o.row.INDICE,"onUpdate:modelValue":function(e){return o.row.INDICE=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{class:"q-if-outlined",modelValue:o.row.INDICE,"onUpdate:modelValue":function(e){return o.row.INDICE=e},options:e.llenarSelectInd(o.row.ID_PROGRAMA),onInput:function(t){return e.grabarConfigCT(o.row,"INDICE")}},null,8,["modelValue","onUpdate:modelValue","options","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])]}),_:2},1032,["props"])]}),"bottom-row":(0,n.k6)(function(t){return[0==e.configCT.data.length?((0,n.uX)(),(0,n.Wv)(m,{key:0},{default:(0,n.k6)(function(){return[(0,n.bF)(c,{colspan:"100%"},{default:(0,n.k6)(function(){return a()(o[9]||(o[9]=[(0,n.Lk)("p",{class:"text-bold"},"No se han creado cursos asociados a SIAGIE (Mantenimiento/tablas/Hoja Siagie).",-1)]))}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1},8,["data","columns","pagination"])]}),_:1})]}),_:1},512)]}),_:1},8,["modelValue","title","onClose"])}var Le=t(30640),_e=t(80340),Te=t(57668),Re=t(6583),xe=t(982),Pe=t(95514),Ne={emits:["cerrarModal"],name:"configuracionClase",props:{verCurricula:Boolean},components:{QCard:P.C$,QFab:P.l6,QFabAction:P.B$,QSelect:P.Si,QInput:P.ie,QInnerLoading:P.SQ,QSpinnerOval:P.VA,QToggle:P.c5,QTable:P.kH,QTh:P.EJ,QTr:P.qh,QTd:P.Ef,QPopupEdit:P.GT,QTabs:P.uw,QTab:P.zu,QTabPane:P.dg,sieModal:Le.A,sieVacio:_e.A,QIcon:P.bP},data:function(){return{verModal:!0,config:{modal:!1,data:[],columns:[],pag:{page:1,rowsPerPage:16},optionsLR:[],optionsEP:[],editConfig:!1},configCT:{modal:!1,data:[],columns:[{name:"INSTRUDES",label:this.$t("ngs.nivel"),field:"INSTRUDES",align:"left",sortable:!0},{name:"CURSO",label:this.$t("curso"),field:"CURSO",align:"left",sortable:!1},{name:"ABRV",label:"Abr",field:"ABRV",align:"center",sortable:!1},{name:"ID_PROGRAMA",label:this.$t("programa"),field:"ID_PROGRAMA",align:"left",sortable:!1},{name:"INDICE",label:this.$t("indice"),field:"INDICE",align:"center",sortable:!1}],pag:{page:1,rowsPerPage:16},optionsProg:[],objPrograma:{}},editConfig:!1}},computed:{},mounted:function(){},watch:{},methods:{cerrarModal:function(){this.$emit("cerrarModal")},configTabla:function(e){this.config.editConfig=e,this.config.columns=[{name:"NIVEL",label:this.$t("ngs.nivel"),field:"NIVEL",align:"left",sortable:!0},{name:"LIMITE_REPLICA",label:"Límite replica anual",field:"LIMITE_REPLICA",align:"center",sortable:!1},{name:"EDICION_PESOS_PROFE",label:"Nivel de edición pesos R.N",field:"EDICION_PESOS_PROFE",align:"center",sortable:!1}],e&&(this.config.columns.push({name:"MOSTRAR_EXCLUIDO",label:"Mostrar Excluido",field:"MOSTRAR_EXCLUIDO",align:"center",sortable:!1}),this.config.columns.push({name:"MOSTRAR_SUMATIVO",label:"Mostrar Sumativo",field:"MOSTRAR_SUMATIVO",align:"center",sortable:!1}),this.config.columns.push({name:"MOSTRAR_EXCL_PORCENTAJE",label:"Mostrar Competencia No Evaluada",field:"MOSTRAR_EXCL_PORCENTAJE",align:"center",sortable:!1}))},openConfig:function(){var e=this,o=(0,Te["default"])().ano;Promise.all([Pe.A.obtDataConfigGeneralNotas(o),y.A.getConfigCompTransversales(this.verCurricula)]).then(function(o){var t=L()(o,2),i=t[0],a=t[1];return e.config.data=(0,Re["default"])(i.listado),e.configTabla(i.editConfig),e.configCT.data=a.dataSiagie,e.configCT.optionsProg=a.optPrograma,e.configCT.objPrograma=a.objPrograma,Pe.A.maxNivel()}).then(function(o){for(var t=[],i=1;i<=o.MAXIMO;i++)t.push({label:""+i,value:i});e.config.optionsLR=t,e.config.optionsEP=t,e.config.editConfig&&e.config.optionsEP.push({label:"NINGUNO",value:99})})},grabarConfig:function(e){var o=this;Pe.A.actualizarConfigClase(e).then(function(e){e.message?(0,xe["default"])(o.$t("mensajes.m0001"),"success"):(0,xe["default"])(o.$t("mensajes.e0006"),"error")})},grabarConfigCT:function(e,o){var t=this;y.A.actualizarConfigCT(o,e[o],e.ANO,e.INSTRUCOD,e.ORDSIAGIE).then(function(e){1===e.estado?(0,xe["default"])(t.$t("mensajes.m0001"),"success"):(0,xe["default"])(t.$t(e.mensaje),"error")})},optionsIndices:function(e){var o=[];o.push({label:"NINGUNO",value:""});for(var t=1;t<=e;t++)o.push({label:""+t,value:t});return o},llenarSelectInd:function(e){return e?this.optionsIndices(this.configCT.objPrograma[e].limite):[]}},created:function(){this.openConfig()}};const ye=(0,me.A)(Ne,[["render",Ee]]);var qe=ye,we=(t(56285),{class:"contCopiaMasa"}),Ve={class:"row"},Me={class:"col-xs-12 col-md-4 q-pa-lg-sm"},Ue={class:"q-card"},je={class:"q-pa-lg-sm text-primary tituloCopia"},Qe={class:"q-pa-lg-sm"},Xe={key:0,class:"row"},Ge={class:"col"},$e={class:"row"},Be={class:"col"},We={class:"row"},ze={class:"col"},Ke={class:"row"},Je={class:"col"},Ye={class:"q-pa-lg-sm text-primary tituloCriterio"},He={class:"row flex-lg-center"},Ze={class:"col"},eo={class:"col"},oo={class:"q-pa-lg-sm"},to={class:"row"},io={class:"col contArbolCriterios"},ao={class:"col-xs-12 col-md-8 q-pa-lg-sm"},no={class:"q-pa-lg-sm text-primary tituloCopia"},ro={class:"q-pa-lg-sm"},lo={class:"row"},so={class:"col-xs-12 col-md-3"},co={class:"col-xs-12 col-md-3"},uo={class:"col-xs-12 col-md-6"},fo={class:"row"},mo={class:"col-xs-12 col-md-6"},po={class:"col-xs-12 col-md-6"},bo={class:"q-pa-lg-sm text-primary tituloCopia"},go={key:0,class:"q-pa-md-md infoCopia"},vo={class:"text-bold"},Co={class:"q-mb-md-sm"},ho={key:0,class:"sumativo text-primary"},Do={class:"text-center"};function Oo(e,o){var t=(0,n.g2)("sie-select"),i=(0,n.g2)("q-select"),l=(0,n.g2)("arbolCriterios"),s=(0,n.g2)("selectMultiple"),c=(0,n.g2)("q-checkbox"),u=(0,n.g2)("q-th"),d=(0,n.g2)("q-tr"),f=(0,n.g2)("q-table"),m=(0,n.g2)("q-icon"),p=(0,n.g2)("q-btn"),b=(0,n.g2)("q-tooltip"),g=(0,n.g2)("q-page-sticky");return(0,n.uX)(),(0,n.CE)("div",we,[(0,n.Lk)("div",Ve,[(0,n.Lk)("div",Me,[(0,n.Lk)("div",Ue,[(0,n.Lk)("div",je,(0,r.v_)(e.$t("origen")),1),(0,n.Lk)("div",Qe,[e.objDataOrigen.anios.length>1?((0,n.uX)(),(0,n.CE)("div",Xe,[(0,n.Lk)("div",Ge,[(0,n.bF)(t,{type:"outlined",modelValue:e.vmFiltroOrigen.anio,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.vmFiltroOrigen.anio=o}),options:e.objDataOrigen.anios,onSelected:e.cambiaAnio,label:"ANO",val:"ANO",placeholder:"ano"},null,8,["modelValue","options","onSelected"])])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",$e,[(0,n.Lk)("div",Be,[(0,n.bF)(t,{type:"outlined",modelValue:e.vmFiltroOrigen.ambito,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.vmFiltroOrigen.ambito=o}),options:e.objDataOrigen.ambito,onSelected:e.cambiaAmbito,label:"DESCRIPCION",val:"ID_AMBITO",placeholder:"ambito"},null,8,["modelValue","options","onSelected"])])]),(0,n.Lk)("div",We,[(0,n.Lk)("div",ze,[(0,n.bF)(t,{type:"outlined",modelValue:e.vmFiltroOrigen.curso,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.vmFiltroOrigen.curso=o}),options:e.objDataOrigen.curso,onSelected:e.cambiaCurso,label:"CURSONOM",val:"ID_CLASE",placeholder:"curso"},null,8,["modelValue","options","onSelected"])])]),(0,n.Lk)("div",Ke,[(0,n.Lk)("div",Je,[(0,n.bF)(t,{type:"outlined",modelValue:e.vmFiltroOrigen.periodo,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.vmFiltroOrigen.periodo=o}),options:e.objDataOrigen.periodo,onSelected:e.cambiarPeriodo,label:"PERIODODES",val:"ID_CLASE_PERIODO",placeholder:"periodo"},null,8,["modelValue","options","onSelected"])])]),o[9]||(o[9]=(0,n.Lk)("div",{class:"row"},null,-1))]),(0,n.Lk)("div",Ye,[(0,n.Lk)("div",He,[(0,n.Lk)("div",Ze,(0,r.v_)(e.$t("pesosYCriterios.criterios")),1),(0,n.Lk)("div",eo,[(0,n.bF)(i,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroOrigen.nivel,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.vmFiltroOrigen.nivel=o}),options:e.objDataOrigen.nivelEvaluacion,"float-label":e.$t("pesosYCriterios.mostrarHasta"),onInput:e.seleccionaNivelEva},null,8,["modelValue","options","float-label","onInput"])])])]),(0,n.Lk)("div",oo,[(0,n.Lk)("div",to,[(0,n.Lk)("div",io,[e.verCriteriosOrigen?((0,n.uX)(),(0,n.Wv)(l,{key:0,idPrincipal:e.dataTreeOrigen.treeIdPrincipal,idBD:e.dataTreeOrigen.idBD,objPosiBD:e.dataTreeOrigen.objPosiBD,treeBancoDatos:e.dataTreeOrigen.treeBancoDatos,verDetalle:!0,onObtNodoSeleccionado:e.valorArbolOrigen},null,8,["idPrincipal","idBD","objPosiBD","treeBancoDatos","onObtNodoSeleccionado"])):(0,n.Q3)("v-if",!0)])])])])]),(0,n.Lk)("div",ao,[(0,n.Lk)("div",{class:(0,r.C4)(["q-card",{deshabilitarDestino:e.deshabilitarDestino}])},[(0,n.Lk)("div",no,(0,r.v_)(e.$t("pesosYCriterios.destino")),1),(0,n.Lk)("div",ro,[(0,n.Lk)("div",lo,[(0,n.Lk)("div",so,[(0,n.bF)(i,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroDestino.instrucod,options:e.objDataDestino.nivel,"float-label":e.$t("ngs.nivel"),onChange:e.cambiaNivelDestino},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",co,[(0,n.bF)(i,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:e.vmFiltroDestino.gradocod,options:e.grados,"float-label":e.$t("ngs.grado"),onChange:e.cambiaGradoDestino,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,n.Lk)("div",uo,[(0,n.bF)(s,{options:e.dataAmbitoDes,modelValue:e.vmFiltroDestino.ambito,labelSelect:e.$t("ambito"),onChange:e.cambiaAmbitoDestino},null,8,["options","modelValue","labelSelect","onChange"])])]),(0,n.Lk)("div",fo,[(0,n.Lk)("div",mo,[(0,n.bF)(s,{options:e.objDataDestino.curso,modelValue:e.vmFiltroDestino.curso,labelSelect:e.$t("curso"),onChange:e.cambiaCursoDestino},null,8,["options","modelValue","labelSelect","onChange"])]),(0,n.Lk)("div",po,[(0,n.bF)(i,{class:"q-if-outlined",color:"secondary",modelValue:e.vmFiltroDestino.periodo,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.vmFiltroDestino.periodo=o}),options:e.objDataDestino.periodos,"float-label":e.$t("periodo"),onInput:o[6]||(o[6]=function(o){return e.resetearDestino("periodo")})},null,8,["modelValue","options","float-label"])])])]),(0,n.Lk)("div",bo,(0,r.v_)(e.$t("pesosYCriterios.cursosYgruposPorSalon")),1),(0,n.Lk)("div",null,[(0,n.bF)(f,{selection:e.configTabla.selection,"row-key":"__index",color:"secondary",data:e.configTabla.data,columns:e.configTabla.columns,pagination:e.configTabla.pagination,"onUpdate:pagination":o[7]||(o[7]=function(o){return e.configTabla.pagination=o}),selected:e.configTabla.selected,"onUpdate:selected":o[8]||(o[8]=function(o){return e.configTabla.selected=o}),"hide-bottom":""},{header:(0,n.k6)(function(e){return[(0,n.bF)(d,null,{default:(0,n.k6)(function(){return[(0,n.bF)(u,{"auto-width":""},{default:(0,n.k6)(function(){return[e.multipleSelect?((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:e.selected,"onUpdate:modelValue":function(o){return e.selected=o},"indeterminate-value":"some",ref:"chkAll"},null,8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1024),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.cols,function(o){return(0,n.uX)(),(0,n.Wv)(u,{key:o.name,props:e},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(o.label),1)]}),_:2},1032,["props"])}),128))]}),_:2},1024)]}),_:1},8,["selection","data","columns","pagination","selected"])]),e.infoCopia.length>0?((0,n.uX)(),(0,n.CE)("div",go,[o[11]||(o[11]=(0,n.Lk)("p",{class:"q-mb-md-sm"},"Los siguientes criterios solo se actualizaron sus descripciones, debido a que tienen notas y existen diferencias en el origen, las diferencias pueden ser: en el peso, criterio excluido o sumativo.",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.infoCopia,function(e){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("p",vo,(0,r.v_)(e.SALON+" - PERIODO: "+e.PERIODO),1),(0,n.Lk)("p",Co,[(0,n.bF)(m,{name:e.ICONO,size:"28px",style:(0,r.Tr)({color:e.COLOR}),class:(0,r.C4)({excluido:e.EXCLUIR})},null,8,["name","style","class"]),e.SUMATIVO?((0,n.uX)(),(0,n.CE)("span",ho," Σ ")):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",null,(0,r.v_)("("+e.PESO+") "+e.DESCRIPCION),1)])],64)}),256)),(0,n.Lk)("div",Do,[(0,n.bF)(p,{color:"secondary",icon:"check",onClick:e.entendido},{default:(0,n.k6)(function(){return a()(o[10]||(o[10]=[(0,n.eW)("Entendido",-1)]))}),_:1},8,["onClick"])])])):(0,n.Q3)("v-if",!0)],2)])]),(0,n.bF)(g,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{fab:"",round:"",color:"secondary",icon:"copy",onClick:e.procesarCopia},{default:(0,n.k6)(function(){return[(0,n.bF)(b,{anchor:"center left",self:"center right",offset:[5,0]},{default:(0,n.k6)(function(){return a()(o[12]||(o[12]=[(0,n.eW)("Copia de criterios en masa",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})])}t(52133),t(6724),t(70199),t(44264),t(7346);var ko=t(93616),Io=t(61602),So=t(95523),Fo={emits:["setCambioData"],name:"copiaCriteriosEnMasa",props:{pDataAmbito:Array,pDataNivel:Array,pDataGrado:Array,pDataPeriodos:Array},components:{QBtn:P.Il,QIcon:P.bP,QSelect:P.Si,QTable:P.kH,QCheckbox:P.vZ,QTr:P.qh,QTh:P.EJ,QPageSticky:P._U,sieSelect:ko.A,arbolCriterios:Io.A,selectMultiple:So.A,sieInfo:Te["default"],QTooltip:P.nC},data:function(){return{vmFiltroDestino:{ambito:[],curso:[],grupo:[],instrucod:null,gradocod:[],seccioncod:null,periodo:0,curricula:null},objDataDestino:{ambito:[],curso:[],grupo:[],nivel:[],grado:[],seccion:[],periodos:[]},vmFiltroOrigen:{ambito:null,curso:null,periodo:null,nivel:1,anio:(0,Te["default"])().ano.toString()},objDataOrigen:{curso:[],periodo:[],ambito:[],nivelEvaluacion:[],anios:[]},objAmbitoSelected:{},objCursoSelected:{},objPeriodoSelected:{},dataTreeOrigen:{data:[],posiciones:{},treeIdPrincipal:0,idBD:0,objPosiBD:{},treeBancoDatos:[]},verCriteriosOrigen:!1,configTabla:{data:[],columns:[{name:"NGS",label:"NGS",field:"NGS",align:"left",sortable:!0},{name:"SALON",label:this.$t("ambito"),field:"SALON",align:"left",sortable:!1},{name:"CURSONOM",label:this.$t("curso"),field:"CURSONOM",align:"left",sortable:!0},{name:"PERIODO",label:this.$t("periodo"),field:"PERIODO",align:"center",sortable:!1}],pagination:{page:1,rowsPerPage:200},selection:"multiple",selected:[]},idCurriculaTmp:null,flCargarCurso:!1,idsOrigen:[],deshabilitarDestino:!0,infoCopia:[],totAmbitos:[]}},computed:{idCurricula:function(){var e=this.idCurriculaTmp;return this.objDataOrigen["periodo"].length>0&&(e=this.objDataOrigen.periodo[0].ID_PROGRAMA),e!==this.idCurriculaTmp&&(this.idCurriculaTmp=e),e},grados:function(){var e=this,o=this.pDataGrado;return this.vmFiltroDestino["instrucod"]?(o=o.filter(function(o){return e.vmFiltroDestino["instrucod"].indexOf(o.INSTRUCOD)>=0}),o=(0,N["default"])(o,function(e){return{label:e.GRADODES,value:e.INSTRUCOD+e.GRADOCOD}})):o=[],o},dataAmbitoDes:function(){var e=this,o=this.pDataAmbito;return this.vmFiltroDestino.ambito=[],this.limpiarDataDestino(),this.vmFiltroDestino.gradocod.length>0?o=o.filter(function(o){return e.vmFiltroDestino["gradocod"].some(function(e){return 0===o.SALON.indexOf(e)||o.SALON.indexOf(","+e)>0})}):this.vmFiltroDestino.instrucod&&(o=o.filter(function(o){return 0===o.SALON.indexOf(e.vmFiltroDestino["instrucod"])||o.SALON.indexOf(","+e.vmFiltroDestino["instrucod"])>0})),o=(0,N["default"])(o,function(e){return{label:e.DESCRIPCION,value:e.ID_AMBITO}}),o}},methods:{cambiaNivelDestino:function(e){this.vmFiltroDestino["instrucod"]=e,this.resetearDestino("nivel")},cambiaGradoDestino:function(e){var o=this;this.vmFiltroDestino["gradocod"]=e,this.vmFiltroDestino["ambito"]=[],this.dataAmbitoDes.forEach(function(e){o.vmFiltroDestino["ambito"].push(e.value)}),this.cargarCurso(this.vmFiltroDestino["ambito"]),this.vmFiltroDestino.curso=[this.objCursoSelected["ID_CURSO"]+"_"+this.objCursoSelected["GRUPOCOD"]],this.listadoClasesDestino(this.vmFiltroDestino["ambito"],this.vmFiltroDestino.curso)},cambiaAmbitoDestino:function(e){this.vmFiltroDestino.ambito=e,0===this.vmFiltroDestino.ambito.length?this.limpiarDataDestino():this.resetearDestino("curso")},cambiaCursoDestino:function(e){this.vmFiltroDestino.curso=e,this.listadoClasesDestino(this.vmFiltroDestino["ambito"],e)},cambiaAnio:function(){var e=x()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:return this.resetearDataFiltro("anio"),this.limpiarDataDestino(!0),this.configTreeCriteriosOrigen(!0,1,0,0),this.deshabilitarDestino=!0,e.n=1,q.A.getListaAmbito(this.vmFiltroOrigen.anio);case 1:this.objDataOrigen.ambito=e.v;case 2:return e.a(2)}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),limpiarDataDestino:function(e){this.vmFiltroDestino.curso=[],this.objDataDestino.curso=[],this.configTabla.data=[],this.configTabla.selected=[],this.flCargarCurso=!0,e&&(this.vmFiltroDestino.gradocod=[],this.vmFiltroDestino.ambito=[])},dataIni:function(){this.objDataOrigen.ambito=this.pDataAmbito,this.objDataDestino.nivel=this.pDataNivel,this.objDataDestino.ambito=this.pDataAmbito,this.objDataDestino.periodos=JSON.parse(JSON.stringify(this.pDataPeriodos)),this.objDataDestino.periodos.unshift({label:"TODOS",value:0}),this.setDataNivelEva(4)},setDataNivelEva:function(e){for(var o=[],t=1;t<=e;t++)o.push({label:"Nivel "+t,value:t});this.objDataOrigen.nivelEvaluacion=o},resetearDataFiltro:function(e){switch(e){case"anio":case"ambito":this.objDataOrigen.curso=[],this.objDataOrigen.periodo=[],this.objCursoSelected={},this.objPeriodoSelected={},this.vmFiltroOrigen.curso=null,this.vmFiltroOrigen.periodo=null;break;case"curso":this.objDataOrigen.periodo=[],this.objPeriodoSelected={},this.vmFiltroOrigen.periodo=null;break;case"periodo":break}},resetearDestino:function(e){switch(this.infoCopia=[],e){case"periodo":this.listadoClasesDestino(this.vmFiltroDestino["ambito"],this.vmFiltroDestino.curso);break;case"curso":this.limpiarDataDestino(),this.cargarCurso(this.vmFiltroDestino["ambito"]),this.flCargarCurso=!1;break;case"data":this.configTabla.data=[],this.configTabla.selected=[];break;case"nivel":this.limpiarDataDestino(),this.vmFiltroDestino.gradocod=[];break;case"grabar":this.configTabla.data=[],this.configTabla.selected=[],this.vmFiltroDestino.curso=[];break}},cambiaAmbito:function(e){var o=this;this.resetearDataFiltro("ambito");var t=this.vmFiltroDestino["instrucod"]!==e.SALON.substr(0,1)||this.vmFiltroDestino["gradocod"].indexOf(e.SALON.substr(0,2))<0;this.objAmbitoSelected=e,this.vmFiltroDestino["instrucod"]=e.SALON.substr(0,1),this.vmFiltroDestino["gradocod"]=[e.SALON.substr(0,2)],this.vmFiltroDestino["ambito"]=this.dataAmbitoDes.map(function(e){return e.value}),this.configTreeCriteriosOrigen(!0,1,0,0),y.A.getListaCursoAmbito(e.ID_AMBITO).then(function(e){o.objDataOrigen.curso=e,o.flCargarCurso=t,t&&o.limpiarDataDestino()})},cambiaCurso:function(e){var o=this;this.resetearDataFiltro("curso"),this.objCursoSelected=e,this.configTreeCriteriosOrigen(!0,1,0,0),y.A.getPeriodoCLase(e.ID_CLASE,!0).then(function(e){o.objDataOrigen.periodo=e,o.cargarCurso(o.vmFiltroDestino["ambito"]),o.vmFiltroDestino.curso=[o.objCursoSelected["ID_CURSO"]+"_"+o.objCursoSelected["GRUPOCOD"]],o.listadoClasesDestino(o.vmFiltroDestino["ambito"],o.vmFiltroDestino.curso),o.deshabilitarDestino=!1,o.flCargarCurso=!1})},cambiarPeriodo:function(e){var o=this;this.resetearDataFiltro("periodo"),this.objPeriodoSelected=e,this.verCriteriosOrigen=!1,y.A.getArbolCriterios(e.ID_CONTENIDO).then(function(t){o.dataTreeOrigen.data=t.data,o.dataTreeOrigen.posiciones=t.idPosicionBD,o.configTreeCriteriosOrigen(!1,o.vmFiltroOrigen.nivel,e.ID_CONTENIDO,e.ID_CONTENIDO),o.setDataNivelEva(t.maxNivel)})},checkTodos:function(){var e=this;new Promise(function(o,t){e.$refs.chkAll.toggle(),o(e.configTabla.selected)}).then(function(o){0===o.length&&e.$refs.chkAll.toggle()})},cargarCurso:function(e){var o=this;if(null===this.idCurricula||!this.flCargarCurso||e.length<0)return!1;var t=!1;y.A.getClasesMismoPrograma(e,0,!0,[],this.idCurricula,this.vmFiltroOrigen.curso).then(function(e){var i=[];return e.forEach(function(e){i.push({label:e.CURSONOM,value:e.ID_CURSO+"_"+e.GRUPOCOD}),t||e.ID_CURSO!==o.objCursoSelected["ID_CURSO"]||e.GRUPOCOD!==o.objCursoSelected["GRUPOCOD"]||(t=!0)}),i}).then(function(e){t&&(o.vmFiltroDestino.curso=[o.objCursoSelected["ID_CURSO"]+"_"+o.objCursoSelected["GRUPOCOD"]],o.resetearDestino("periodo")),o.objDataDestino.curso=e})},listadoClasesDestino:function(e,o){var t=this;if(null===this.idCurricula||e.length<=0||o<=0)return this.resetearDestino("data"),!1;y.A.getClasesMismoPrograma(e,this.vmFiltroDestino.periodo,!1,o,this.idCurricula,this.vmFiltroOrigen.curso).then(function(e){t.configTabla.data=e,t.configTabla.selected=[],t.checkTodos()})},configTreeCriteriosOrigen:function(e,o,t,i){var a=this;this.idsOrigen=[],this.verCriteriosOrigen=!1,this.dataTreeOrigen.treeIdPrincipal=t,this.dataTreeOrigen.idBD=i,this.dataTreeOrigen.objPosiBD={},this.dataTreeOrigen.treeBancoDatos=[],e||new Promise(function(e,t){e(a.getDataNivelSeleccionado(o))}).then(function(e){var o=L()(e,2),t=o[0],i=o[1];a.dataTreeOrigen.objPosiBD=i,a.dataTreeOrigen.treeBancoDatos=t,a.verCriteriosOrigen=!0})},seleccionaNivelEva:function(e){this.configTreeCriteriosOrigen(!1,e,0,0)},valorArbolOrigen:function(e){this.idsOrigen=e},getDataNivelSeleccionado:function(e){var o=JSON.parse(JSON.stringify(this.dataTreeOrigen.data)),t=JSON.parse(JSON.stringify(this.dataTreeOrigen.posiciones)),i={};return this.recorreDataArbol(o,e,i,t),[o,i]},recorreDataArbol:function(e,o,t,i){var a=this;e.forEach(function(e){t[e.ID_CONTENIDO]=i[e.ID_CONTENIDO],e.NIVEL>=o?e.children=[]:a.recorreDataArbol(e.children,o,t,i)})},procesarCopia:function(){var e=this;if(this.deshabilitarDestino)return!1;if(this.idsOrigen.length<=0)return(0,xe["default"])(this.$t("pesosYCriterios.seleccioneOrigen"),"error"),!1;if(1===this.idsOrigen.length&&this.objPeriodoSelected["ID_CONTENIDO"]===this.idsOrigen[0])return(0,xe["default"])(this.$t("pesosYCriterios.noExistenCriterios"),"error"),!1;if(this.configTabla.selected.length<=0)return(0,xe["default"])(this.$t("pesosYCriterios.seleccioneDestino"),"error"),!1;this.deshabilitarDestino=!0;var o=this.$t.bind(this);this.$q.dialog({title:o("mensajes.m0115"),message:o("mensajes.m0010"),ok:o("botones.si"),cancel:o("botones.no"),preventClose:!0}).onOk(function(){var o=[];e.configTabla.selected.forEach(function(e){o.push(e.ID_CLASE)}),y.A.procesoCopiaMasiva(e.idsOrigen,o,e.vmFiltroDestino.periodo).then(function(o){1===o.estado?((0,xe["default"])(e.$t("mensajes.m0008"),"success"),e.resetearDestino("grabar"),e.deshabilitarDestino=!1,e.$emit("setCambioData",0,!0),e.infoCopia=o.info):(0,xe["default"])(e.$t("mensajes.m0009"),"error")}).catch(function(){return(0,xe["default"])(e.$t("mensajes.m0009"),"error"),!1})}).onCancel(function(){return e.deshabilitarDestino=!1,!1})},entendido:function(){this.infoCopia=[]}},created:function(){var e=this;this.dataIni(),y.A.getAniosClase().then(function(o){e.objDataOrigen.anios=o})}};const Ao=(0,me.A)(Fo,[["render",Oo]]);var Eo=Ao,Lo={class:"contCopiaMasa"},_o={class:"row"},To={class:"col-xs-12 col-md-3 q-pa-lg-sm"},Ro={class:"q-card"},xo={class:"q-pa-lg-sm"},Po={class:"row"},No={class:"col q-mt-sm"},yo={class:"col-xs-12 col-md-9 q-pa-lg-sm"},qo={class:"q-card"},wo={class:"q-pa-lg-sm text-primary tituloCopia"},Vo={class:"q-pa-lg-sm"},Mo={class:"row q-px-sm text-weight-bold"},Uo={class:"col-auto row flex-center text-red"},jo={class:"col self-center"},Qo={class:"row q-px-sm q-mt-lg"},Xo={class:"col-auto"},Go={class:"col self-center text-weight-bold"},$o={key:0},Bo={key:1},Wo={key:0,class:"q-pa-md-md infoCopia"},zo={class:"text-bold"},Ko={class:"q-mb-md-sm"},Jo={key:0,class:"sumativo text-primary"},Yo={class:"text-center"};function Ho(e,o){var t=(0,n.g2)("q-spinner-oval"),i=(0,n.g2)("q-inner-loading"),l=(0,n.g2)("sie-table"),s=(0,n.g2)("q-icon"),c=(0,n.g2)("q-checkbox"),u=(0,n.g2)("q-th"),d=(0,n.g2)("q-tr"),f=(0,n.g2)("q-td"),m=(0,n.g2)("q-chip"),p=(0,n.g2)("q-tooltip"),b=(0,n.g2)("q-table"),g=(0,n.g2)("q-btn"),v=(0,n.g2)("q-page-sticky");return(0,n.uX)(),(0,n.CE)("div",Lo,[(0,n.Lk)("div",_o,[(0,n.Lk)("div",To,[(0,n.Lk)("div",Ro,[o[3]||(o[3]=(0,n.Lk)("div",{class:"q-pa-lg-sm text-primary tituloCopia"},"Nivel y Grado",-1)),(0,n.Lk)("div",xo,[o[2]||(o[2]=(0,n.Lk)("div",{class:"row"},[(0,n.Lk)("div",{class:"col text-weight-bold"},[(0,n.Lk)("p",null,"Seleccione")])],-1)),(0,n.Lk)("div",Po,[(0,n.Lk)("div",No,[(0,n.bF)(i,{visible:e.loadingGrados},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,n.bF)(l,{selection:"single",context:this,css:"height:calc(100vh - 140px)",search:"Buscar Grados",columns:e.configGrados.columnas,onRowSelected:e.listarRegistros,data:e.dataGrados},null,8,["columns","onRowSelected","data"])])])])])]),(0,n.Lk)("div",yo,[(0,n.Lk)("div",qo,[(0,n.Lk)("div",wo,(0,r.v_)(e.lblTitulo),1),(0,n.Lk)("div",Vo,[(0,n.Lk)("div",Mo,[(0,n.Lk)("div",Uo,[(0,n.bF)(s,{class:"q-mr-sm",name:"warning",size:"28px"}),o[4]||(o[4]=(0,n.Lk)("p",null,"Importante:  ",-1))]),(0,n.Lk)("div",jo,[o[5]||(o[5]=(0,n.Lk)("label",null,"Este proceso eliminará los criterios existentes",-1)),o[6]||(o[6]=(0,n.Lk)("label",null,[(0,n.eW)("y añadirá los criterios configurados en el BANCO DE DATOS. "),(0,n.Lk)("br"),(0,n.eW)(" El proceso no se ejecutará a los cursos con notas y salones con periodos cerrados. "),(0,n.Lk)("br")],-1)),(0,n.Lk)("label",null,"El proceso no se ejecutará a los cursos donde existan criterios superiores al nivel "+(0,r.v_)(e.maxLimiteReplica)+" (texto tachado).",1)])]),(0,n.Lk)("div",Qo,[(0,n.Lk)("div",Xo,[(0,n.bF)(s,{class:"q-mr-sm text-weight-bold",name:"error",size:"28px",color:"warning"})]),(0,n.Lk)("div",Go,[(0,n.eW)("EL límite de réplica es hasta el nivel "+(0,r.v_)(e.maxLimiteReplica)+" de evaluación.",1),o[7]||(o[7]=(0,n.Lk)("p",{class:"text-weight-light"},"(*Configurado en pesos y criterios)",-1))])])]),(0,n.Lk)("div",{class:(0,r.C4)({deshabilitarDestino:e.deshabilitarDestino})},[(0,n.bF)(b,{selection:e.configTabla.selection,"row-key":"__index",color:"secondary",data:e.configTabla.data,columns:e.configTabla.columns,pagination:e.configTabla.pagination,"onUpdate:pagination":o[0]||(o[0]=function(o){return e.configTabla.pagination=o}),selected:e.configTabla.selected,"onUpdate:selected":o[1]||(o[1]=function(o){return e.configTabla.selected=o}),"hide-bottom":""},{header:(0,n.k6)(function(o){return[(0,n.bF)(d,null,{default:(0,n.k6)(function(){return[(0,n.bF)(u,{class:"q-table-col-auto-width"},{default:(0,n.k6)(function(){return[o.multipleSelect?((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:e.chkAll,onInput:e.validaSelectAll,"indeterminate-value":"some"},null,8,["modelValue","onInput"])):(0,n.Q3)("v-if",!0)]}),_:2},1024),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.cols,function(e){return(0,n.uX)(),(0,n.Wv)(u,{key:e.name,props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(e.label),1)]}),_:2},1032,["props"])}),128))]}),_:2},1024)]}),body:(0,n.k6)(function(i){return[(0,n.bF)(d,{props:i,class:(0,r.C4)(i.row["bloqueado"]?"thBloqueada":"")},{default:(0,n.k6)(function(){return[(0,n.bF)(f,null,{default:(0,n.k6)(function(){return[(0,n.bF)(c,{modelValue:i.selected,"onUpdate:modelValue":function(e){return i.selected=e},color:"secondary",disable:i.row["bloqueado"]},null,8,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1024),(0,n.bF)(f,{key:"CURSONOM",props:i},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(i.row.CURSONOM),1)]}),_:2},1032,["props"]),(0,n.bF)(f,{key:"MAX_NE",props:i},{default:(0,n.k6)(function(){return[i.row.MAX_NE>e.maxLimiteReplica?((0,n.uX)(),(0,n.Wv)(m,{key:0,icon:"warning",color:"red",small:"",dense:""},{default:(0,n.k6)(function(){return[(0,n.eW)("Existen Criterios hasta el nivel "+(0,r.v_)(i.row.MAX_NE)+", estos se van a eliminar",1)]}),_:2},1024)):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(f,{key:"DESCRIPCION_BD",props:i},{default:(0,n.k6)(function(){return[i.row.DESCRIPCION_BD?((0,n.uX)(),(0,n.CE)("label",$o,(0,r.v_)(i.row.DESCRIPCION_BD),1)):((0,n.uX)(),(0,n.Wv)(m,{key:1,icon:"error",color:"warning",small:"",dense:""},{default:(0,n.k6)(function(){return a()(o[8]||(o[8]=[(0,n.eW)("PROGRAMA NO ASOCIADO",-1)]))}),_:1}))]}),_:2},1032,["props"]),(0,n.bF)(f,{key:"PERIODO",props:i},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(i.row.PERIODO),1)]}),_:2},1032,["props"]),(0,n.bF)(f,{key:"ESTADO",props:i},{default:(0,n.k6)(function(){return[1==i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(s,{key:0,class:"text-green",name:"check",size:"24px"},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[9]||(o[9]=[(0,n.eW)("Criterios Asignados Correctamente",-1)]))}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),0==i.row.ESTADO?((0,n.uX)(),(0,n.CE)("p",Bo,"-")):(0,n.Q3)("v-if",!0),-1==i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(t,{key:2,color:"primary",size:"18px"})):(0,n.Q3)("v-if",!0),2==i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(s,{key:3,class:"text-red",name:"clear",size:"24px"},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[10]||(o[10]=[(0,n.eW)("Registro con Notas",-1)]))}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0),3==i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(s,{key:4,class:"text-warning",name:"error_outline",size:"24px"},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{anchor:"center left",self:"center right"},{default:(0,n.k6)(function(){return a()(o[11]||(o[11]=[(0,n.eW)("Asigne el programa, desde el plan curricular",-1)]))}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:2},1032,["props","class"])]}),_:1},8,["selection","data","columns","pagination","selected"])],2),e.infoCopia.length>0?((0,n.uX)(),(0,n.CE)("div",Wo,[o[13]||(o[13]=(0,n.Lk)("p",{class:"q-mb-md-sm"},"Los siguientes criterios solo se actualizaron sus descripciones, debido a que tienen notas y existen diferencias en el origen, las diferencias pueden ser: en el peso, criterio excluido o sumativo.",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.infoCopia,function(e){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("p",zo,(0,r.v_)(e.SALON+" - PERIODO: "+e.PERIODO),1),(0,n.Lk)("p",Ko,[(0,n.bF)(s,{name:e.ICONO,size:"28px",style:(0,r.Tr)({color:e.COLOR}),class:(0,r.C4)({excluido:e.EXCLUIR})},null,8,["name","style","class"]),e.SUMATIVO?((0,n.uX)(),(0,n.CE)("span",Jo," Σ ")):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",null,(0,r.v_)("("+e.PESO+") "+e.DESCRIPCION),1)])],64)}),256)),(0,n.Lk)("div",Yo,[(0,n.bF)(g,{color:"secondary",icon:"check",onClick:e.entendido},{default:(0,n.k6)(function(){return a()(o[12]||(o[12]=[(0,n.eW)("Entendido",-1)]))}),_:1},8,["onClick"])])])):(0,n.Q3)("v-if",!0)])])]),(0,n.bF)(v,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,n.k6)(function(){return[(0,n.bF)(g,{fab:"",round:"",color:"secondary",icon:"copy",onClick:e.procesarCopia},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{anchor:"center left",self:"center right",offset:[5,0]},{default:(0,n.k6)(function(){return a()(o[14]||(o[14]=[(0,n.eW)("Copia de criterios en masa",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})])}t(92802);var Zo=t(32960),et={emits:["setCambioData"],name:"procesarBancoDatos",props:{},components:{QBtn:P.Il,QIcon:P.bP,QChip:P.wQ,QSelect:P.Si,QTable:P.kH,QCheckbox:P.vZ,QTh:P.EJ,QTr:P.qh,QTd:P.Ef,QPageSticky:P._U,QInnerLoading:P.SQ,QSpinnerOval:P.VA,sieSelect:ko.A,selectMultiple:So.A,sieInfo:Te["default"],QTooltip:P.nC},data:function(){return{chkAll:!1,configTabla:{data:[],columns:[{name:"CURSONOM",label:this.$t("curso"),field:"CURSONOM",align:"left",sortable:!0},{name:"MAX_NE",label:"!",field:"MAX_NE",align:"left",sortable:!0},{name:"DESCRIPCION_BD",label:"Programa",field:"DESCRIPCION_BD",align:"left",sortable:!0},{name:"PERIODO",label:this.$t("periodo"),field:"PERIODO",align:"center",sortable:!1},{name:"ESTADO",label:"Estado Proceso",field:"ESTADO",align:"center",sortable:!1}],pagination:{page:1,rowsPerPage:200},selection:"multiple",selected:[]},configGrados:{columnas:[{name:"CODIGO",label:"Cód.",field:"CODIGO",align:"left"},{name:"GRADO",label:"Nivel / grado",field:"GRADO",align:"left",sortable:!0,maxLength:27}]},infoCopia:[],deshabilitarDestino:!0,loadingGrados:!1,dataGrados:[],lblTitulo:"Cursos Asignados",lastItemMaxReplica:{},maxLimiteReplica:1}},computed:{},methods:{validaSelectAll:function(){if(this.chkAll=!this.chkAll,this.chkAll)for(var e=0;e<this.configTabla.data.length;e++)this.configTabla.data[e].bloqueado||this.configTabla.selected.push(this.configTabla.data[e]);else this.configTabla.selected=[]},resetListado:function(){this.configTabla.data=[],this.configTabla.selected=[],this.deshabilitarDestino=!0},obtLimiteMaxReplica:function(e,o){var t=this;return x()(T()().m(function i(){var a,n,r;return T()().w(function(i){while(1)switch(i.n){case 0:if(a=1,n=!0,Object.keys(t.lastItemMaxReplica).length>0&&(t.lastItemMaxReplica.INSTRUCOD!==e||t.lastItemMaxReplica.GRADOCOD!==o&&"T"!==t.lastItemMaxReplica.GRADOCOD||(a=t.lastItemMaxReplica.LIMITE_REPLICA,n=!1)),!n){i.n=2;break}return i.n=1,y.A.getLimiteReplicaNivelGrado(e,o);case 1:r=i.v,r=(0,Re["default"])(r),r.length>0&&(t.lastItemMaxReplica=r[0],a=t.lastItemMaxReplica.LIMITE_REPLICA);case 2:return i.a(2,a)}},i)}))()},listarRegistros:function(e){var o=this;return x()(T()().m(function t(){var i,a,n,r,l;return T()().w(function(t){while(1)switch(t.n){case 0:return o.resetListado(),o.lblTitulo="Cursos Asignados - "+e.GRADO,t.n=1,y.A.getSalonesNivelGrado(e.INSTRUCOD,e.GRADOCOD);case 1:if(i=t.v,!(i.length>0)){t.n=2;break}return(0,xe["default"])("Existen salones con periodo cerrado en el nivel y grado seleccionado, verificar.","error"),t.a(2,!0);case 2:return t.n=3,o.obtLimiteMaxReplica(e.INSTRUCOD,e.GRADOCOD);case 3:return o.maxLimiteReplica=t.v,t.n=4,y.A.getClasesCopiaBD(0,e.INSTRUCOD,e.GRADOCOD,o.maxLimiteReplica);case 4:for(a=t.v,n=a.dataClases,r=a.arrIndicesSeleccionados,o.configTabla.data=n,l=0;l<r.length;l++)o.configTabla.selected.push(n[r[l]]);o.deshabilitarDestino=!1;case 5:return t.a(2)}},t)}))()},procesarCopia:function(){var e=this;return x()(T()().m(function o(){var t,i,a;return T()().w(function(o){while(1)switch(o.n){case 0:if(t=e.configTabla.selected,0!==Object.keys(t).length){o.n=1;break}return(0,xe["default"])("No existen registro para procesar","error"),o.a(2,!1);case 1:return e.deshabilitarDestino=!1,o.n=2,e.$confirmar('<p class="q-ma-none text-justify" style="font-size: 18px;"> A los cursos listados se reemplazarán los criterios configurados en el Banco De Datos,<span class="text-bold text-red"> los que no coincidan se eliminarán </span><br><br><b>¿Desea continuar?</b> <br> <u>El proceso es irreversible</u></p>',"warning",!0);case 2:i=o.v,i&&(a=t.reduce(function(o,t,i){return o.then(function(){if(0===t.ESTADO){var o="D"===t.CURSONAT?1:e.maxLimiteReplica;e.configTabla.data[t["__index"]].ESTADO=-1,e.configTabla.data[t["__index"]].CURSONOM=t.CURSONOM+" ",e.configTabla.data[t["__index"]].MENSAJE="";var i=y.A.procesoCopiarBD([t.IDBD],t.IDSCLASES.split(","),{periodo:0},!1,[],"CopiaMasivaBD",o).then(function(o){return 1===o.estado?e.configTabla.data[t["__index"]].ESTADO=1:(e.configTabla.data[t["__index"]].ESTADO=2,e.configTabla.data[t["__index"]].MENSAJE=o.info),e.configTabla.data[t["__index"]].CURSONOM=t.CURSONOM+"  ",o});return i}return 1})},Promise.resolve(1)),a.then(function(){(0,xe["default"])(e.$t("mensajes.m0008"),"success"),e.$emit("setCambioData",0,!0)}).catch(function(o){(0,xe["default"])(e.$t("mensajes.m0009"),"error"),e.deshabilitarDestino=!0}));case 3:return o.a(2)}},o)}))()},init:function(){var e=this;return x()(T()().m(function o(){return T()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Zo.c.getNgCurgra();case 1:e.dataGrados=o.v;case 2:return o.a(2)}},o)}))()}},created:function(){this.init()}};const ot=(0,me.A)(et,[["render",Ho]]);var tt=ot,it=t(2819),at=t(30545),nt={components:{QCard:P.C$,QPopover:P.VM,QSearch:P.Ks,QSelect:P.Si,QPageSticky:P._U,QToggle:P.c5,QFab:P.l6,QFabAction:P.B$,QRadio:P.$,QTable:at.A,ClaseContenido:y.A,registroCriterios:w.A,sieSelect:ko.A,sieVacio:_e.A,listadoCriterios:be,configuracionClase:qe,copiaCriteriosEnMasa:Eo,procesarBancoDatos:tt,selectMultiple:So.A,sieInfo:Te["default"],sieModal:Le.A,QPage:P.Tu,QToolbar:P.ZV,QToolbarTitle:P.r_,QBtn:P.Il,QTooltip:P.nC},data:function(){return{vmFiltro:{ambito:[],curso:[],grupo:[],instrucod:[],gradocod:[],seccioncod:null,periodo:1,curricula:null,asignatura:[]},dataSelect:{ambito:[],curso:[],grupo:[],nivel:[],grado:[],seccion:[],asignatura:[]},gradosTemp:[],dataCurricula:[],perinum:4,objNiveles:{},dataCriteriosTemp:{},dtPeriodos:[],loadCriterios:!0,dataCompCriterios:{},verComponentes:{registroCriterio:!1,copiaEnMasa:!1,listadoGeneral:!0,procesarBancoDatos:!1},titulo:"registroDeNotas.pesosYCriterios",subtitulo:"",repcod:"criteriosPorSalon",objReportes:y.A.reportes(),openModal:{reportes:!1,config:!1},optionsPeriodoCriterio:[],vmClasePeriodo:null,cambioData:!1,sie:(0,Te["default"])(),repFiltro:{instrucod:null,gradocod:null}}},computed:{grados:function(){var e=this,o=this.gradosTemp;return this.vmFiltro["gradocod"]=[],this.vmFiltro["instrucod"].length>0?(o=o.filter(function(o){return e.vmFiltro["instrucod"].some(function(e){return o.INSTRUCOD===e})}),o=(0,N["default"])(o,function(e){return{label:e.GRADODES,value:e.INSTRUCOD+e.GRADOCOD}})):o=[],o},gradosFiltro:function(){var e=this,o=this.gradosTemp;return this.repFiltro.gradocod=null,this.repFiltro.instrucod?(o=o.filter(function(o){return e.repFiltro.instrucod===o.INSTRUCOD}),o=(0,N["default"])(o,function(e){return{label:e.GRADODES,value:e.INSTRUCOD+e.GRADOCOD}})):o=[],o},dataAmbito:function(){var e=this,o=this.dataSelect.ambito;return this.vmFiltro.ambito=[],this.vmFiltro.gradocod.length>0?o=o.filter(function(o){return e.vmFiltro["gradocod"].some(function(e){return 0===o.SALON.indexOf(e)||o.SALON.indexOf(","+e)>0})}):this.vmFiltro.instrucod.length>0&&(o=o.filter(function(o){return e.vmFiltro["instrucod"].some(function(e){return 0===o.SALON.indexOf(e)||o.SALON.indexOf(","+e)>0})})),o=(0,N["default"])(o,function(e){return{label:e.DESCRIPCION,value:e.SALON}}),o},dataCriterios:function(){var e=this,o=this.dataCriteriosTemp,t={},i={I:["I"],O:["O","D"],G:["O","I","C"],T:[]};if(this.vmFiltro.ambito.length>0?(this.vmFiltro.ambito.sort().forEach(function(e){o[e]&&(t[e]=o[e])}),o=t):(this.vmFiltro.gradocod.length>0||this.vmFiltro.instrucod.length>0)&&(t={},this.dataAmbito.forEach(function(e){o[e.value]&&(t[e.value]=o[e.value])}),o=t),this.vmFiltro.curso.length>0){t={};var a=function(i){o[i].forEach(function(o){e.vmFiltro.curso.forEach(function(e){o.detalle.idCurso===e&&(t[i]||(t[i]=[]),t[i].push(o))})})};for(var n in o)a(n);o=t}if(this.vmFiltro.asignatura.length>0&&-1===this.vmFiltro.asignatura.indexOf("T")){t={};var r=function(a){o[a].forEach(function(o){e.vmFiltro.asignatura.forEach(function(e){i[e].forEach(function(e){o.detalle.cursonat===e&&(t[a]||(t[a]=[]),t[a].push(o))})})})};for(var l in o)r(l);o=t}return o}},methods:{seleccionaInstru:function(e){this.vmFiltro.instrucod=e},seleccionaGrado:function(e){this.vmFiltro.gradocod=e},seleccionaAmbito:function(e){this.vmFiltro.ambito=e},seleccionaCurso:function(e){this.vmFiltro.curso=e},seleccionaPeriodo:function(e){this.vmFiltro.periodo=e,this.listarDataCriterios()},seleccionaCurricula:function(e){this.vmFiltro.curricula=e,this.listarDataCriterios()},loadAmbito:function(){var e=x()(T()().m(function e(){return T()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,q.A.getListaAmbito();case 1:this.dataSelect.ambito=e.v;case 2:return e.a(2)}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),loadPeriodos:function(e){for(var o=[],t=1;t<=e;t++)o.push({label:"PERIODO "+t,value:t});this.dtPeriodos=o},dataIni:function(){var e=this;this.dataSelect.asignatura=q.A.getDataAsignatura(!1),Promise.all([q.A.getNiveles(),q.A.getGrados(),q.A.getCursosCurGra()]).then(function(o){var t=L()(o,3),i=t[0],a=t[1],n=t[2];e.dataSelect.nivel=(0,N["default"])(i,function(e){return{label:e.INSTRUDES,value:e.INSTRUCOD}}),e.gradosTemp=a,e.dataSelect.curso=(0,N["default"])(n,function(e){return{label:e.CURSOCOD+"- "+e.CURSONOM,value:e.ID_CURSO}})}),this.loadAmbito()},listarDataCriterios:function(){var e=this;this.loadCriterios=!0,y.A.listadoCriteriosFiltro(this.vmFiltro["periodo"],this.vmFiltro["curricula"]).then(function(o){e.dataCriteriosTemp=o,e.loadCriterios=!1,e.cambioData=!1})},mostrarComponentes:function(e){this.verComponentes.registroCriterio=!1,this.verComponentes.copiaEnMasa=!1,this.verComponentes.listadoGeneral=!1,this.verComponentes.procesarBancoDatos=!1,this.verComponentes[e]=!0},setCambioData:function(e,o){this.cambioData=e===this.vmFiltro.periodo||o},volver:function(){this.titulo="registroDeNotas.pesosYCriterios",this.subtitulo="",this.mostrarComponentes("listadoGeneral"),this.cambioData&&this.listarDataCriterios()},verCriterios:function(e){this.dataCompCriterios["ambitoSelected"]={GRUPAL:e.grupal,ID_AMBITO:e.idAmbito,SALON:e.ngs},this.dataCompCriterios["periodoSelected"]={ID_CLASE_PERIODO:e.idClasePeriodo,ID_CONTENIDO:e.idContenido,PERIODO:this.vmFiltro["periodo"]},this.dataCompCriterios["cursoSelected"]={ANUAL_REPLICA:e.anualReplica,ID_CLASE:e.idClase,CURSOCOD:e.cursocod,ID_CURSO:e.idCurso,GRUPOCOD:e.grupocod},this.subtitulo=": "+e.salon+" - "+e.curso,this.cargarPeriodosPorClase(e.idClase,e.idClasePeriodo),this.cambioData=!1,this.mostrarComponentes("registroCriterio")},modalReportes:function(){this.openModal.reportes=!0},exportar:function(e){var o={formato:e,repcod:this.repcod,periodo:this.vmFiltro["periodo"],cursos:this.vmFiltro["curso"],salones:this.vmFiltro["ambito"],grados:this.repFiltro["gradocod"]?[this.repFiltro["gradocod"]]:[],nivel:this.repFiltro["instrucod"]?[this.repFiltro["instrucod"]]:[],ano:(0,Te["default"])().ano};(0,it.exportFilePhp)(o,"webservice/reportes/reporte")},verCopiaBancoDatos:function(){this.paramData={},this.cambioData=!1,this.titulo="pesosYCriterios.asignacionBD",this.mostrarComponentes("procesarBancoDatos")},verCopiaEnMasa:function(){this.paramData={ambito:this.dataSelect.ambito,nivel:this.dataSelect.nivel,grado:this.gradosTemp,periodos:this.dtPeriodos},this.cambioData=!1,this.titulo="pesosYCriterios.copia",this.mostrarComponentes("copiaEnMasa")},abrirModalConfig:function(){this.openModal.config=!0},cerrarModalConfig:function(){this.openModal.config=!1},cargarPeriodosPorClase:function(e,o){var t=this;y.A.getPeriodoCLase(e).then(function(e){t.optionsPeriodoCriterio=e,t.vmClasePeriodo=o})},cambiarClasePeriodo:function(e){this.dataCompCriterios["periodoSelected"]=e,this.mostrarComponentes("registroCriterio")}},created:function(){var e=this;this.dataIni(),y.A.getDataIni().then(function(o){e.dataCurricula=o["curricula"],e.perinum=o["perinum"],e.objNiveles=o["nivel1"],e.dataCriteriosTemp=o["data"],e.vmFiltro.curricula=e.dataCurricula[0].value,e.loadPeriodos(e.perinum),e.loadCriterios=!1})}};const rt=(0,me.A)(nt,[["render",A]]);var lt=rt}}]);