"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[90877],{90877:function(e,n,a){a.r(n),a.d(n,{default:function(){return _}});var c=a(61758),r={class:"row q-col-gutter-sm"},t={class:"col-xs-12 col-sm-6 col-md-4"},s={class:"col-xs-12"},o={class:"col-xs-12"},l={class:"row q-pa-sm q-col-gutter-sm"},i={class:"col-xs-12 col-sm-6"};function u(e,n){var a=this,u=(0,c.g2)("q-select"),p=(0,c.g2)("header-btn"),f=(0,c.g2)("sie-table"),m=(0,c.g2)("q-card-section"),A=(0,c.g2)("q-card"),d=(0,c.g2)("q-input"),E=(0,c.g2)("q-form"),w=(0,c.g2)("sie-modal"),h=(0,c.g2)("q-page");return(0,c.uX)(),(0,c.Wv)(h,{class:"q-pa-sm sie-flat"},{default:(0,c.k6)(function(){return[(0,c.bF)(A,{flat:"",bordered:""},{default:(0,c.k6)(function(){return[(0,c.bF)(m,null,{default:(0,c.k6)(function(){return[(0,c.Lk)("div",r,[(0,c.Lk)("div",t,[(0,c.bF)(u,{modelValue:e.idPersona,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.idPersona=n}),options:e.personal,"option-value":"ID_PERSONA","option-label":"NOMCOMP",label:"Personal","emit-value":"",onInput:e.readAccesoAlmacen},null,8,["modelValue","options","onInput"])]),(0,c.Lk)("div",s,[(0,c.bF)(p,{name:"Acceso Especial",buttons:e.buttons},null,8,["buttons"])]),(0,c.Lk)("div",o,[(0,c.bF)(f,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableAccesoEspecialAlmacen",onRowSelected:e.rowSelectAccesoEspecialAlmacen,css:"height:calc(100vh - 170px)",context:a},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,c.bF)(w,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar":"Modificar",onSubmit:e.saveAcccion},{default:(0,c.k6)(function(){return[(0,c.bF)(E,{ref:"refForm"},{default:(0,c.k6)(function(){return[(0,c.Lk)("div",l,[(0,c.Lk)("div",i,[(0,c.bF)(d,{modelValue:e.form.FECHA_REGISTRO,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.FECHA_REGISTRO=n}),label:"FECHA_REGISTRO"},null,8,["modelValue"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var p=a(76080),f=a.n(p),m=a(45254),A=a.n(m),d=(a(89571),a(6123)),E={data:function(){return{config:{ESTADO:{renderHtml:function(e,n,a){return a.checkbox({trueValue:1,value:e.ESTADO})},renderAction:function(e,n){var a=this;return A()(f()().m(function c(){var r,t;return f()().w(function(c){while(1)switch(c.p=c.n){case 0:if(r=e.ESTADO,c.p=1,t={id_persona:a.idPersona,id_acceso_almacen:e.ID_ACCESO_ALMACEN},1!==e.ESTADO){c.n=3;break}return c.n=2,a.$http.delete("api/AccesoEspecialAlmacenController/deleteAccesoEspecialAlmacen",{params:t});case 2:n.ESTADO=0,c.n=5;break;case 3:return c.n=4,a.$http.post("api/AccesoEspecialAlmacenController/addAccesoEspecialAlmacen",{data:t});case 4:n.ESTADO=1;case 5:c.n=7;break;case 6:c.p=6,c.v,n.ESTADO=r;case 7:return c.a(2)}},c,null,[[1,6]])}))()}}},rows:[],fields:[{name:"ID_ACCESO_ALMACEN",label:"Código",field:"ID_ACCESO_ALMACEN",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center",sortable:!0}]}}},w=a(39893),h=a(81288),g=a(2739),v=a(9736),b=a(5215),S=a(88567),C=a(95718),k={mixins:[E],components:{QForm:g.A,QInput:v.A,QCard:S.A,QSelect:b.A,QCardSection:C.A,QPage:d.Tu},data:function(){return{required:w.require,buttons:[],openAdd:!1,action:"create",rowAccesoEspecialAlmacen:null,personal:[],idPersona:null,form:{FECHA_REGISTRO:null}}},methods:{openAgregar:function(){this.action="create",this.rowAccesoEspecialAlmacen=null,(0,h.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowAccesoEspecialAlmacen?(this.action="update",this.form.FECHA_REGISTRO=this.rowAccesoEspecialAlmacen.FECHA_REGISTRO,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return A()(f()().m(function n(){var a,c,r;return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(a=n.v,a){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:c=n.v,c&&e.createAccesoEspecialAlmacen(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:r=n.v,r&&e.updateAccesoEspecialAlmacen();case 6:return n.a(2)}},n)}))()},rowSelectAccesoEspecialAlmacen:function(e,n){this.rowAccesoEspecialAlmacen=n},createAccesoEspecialAlmacen:function(){var e=this;return A()(f()().m(function n(){var a,c,r,t;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/acceso-especial-almacen",e.form);case 1:a=n.v,c=a.message,r={FECHA_REGISTRO:e.form.FECHA_REGISTRO},e.rows.unshift(r),e.openAdd=!1,e.$notify(c,"success"),n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readAccesoAlmacen:function(){var e=this;return A()(f()().m(function n(){var a,c;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/AccesoAlmacenController/getAccesoAlmacen",{params:{parametros:{ID_PERSONA:e.idPersona}}});case 1:a=n.v,e.rows=a,n.n=3;break;case 2:n.p=2,c=n.v,e.$notify(c.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readPersonal:function(){var e=this;return A()(f()().m(function n(){var a,c;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/personaController/getPersonasPerfil",{params:{params:{id_perfil:8}}});case 1:a=n.v,e.personal=a,n.n=3;break;case 2:n.p=2,c=n.v,e.$notify(c.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},deleteAccesoEspecialAlmacen:function(){var e=this;return A()(f()().m(function n(){var a,c,r,t;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowAccesoEspecialAlmacen){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(a=n.v,!a){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/acceso-especial-almacen/");case 4:c=n.v,r=c.message,e.rows.splice(e.rows.indexOf(e.rowAccesoEspecialAlmacen),1),e.rowAccesoEspecialAlmacen=null,e.$notify(r,"success"),n.n=6;break;case 5:n.p=5,t=n.v,e.$notify(t.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateAccesoEspecialAlmacen:function(){var e=this;return A()(f()().m(function n(){var a,c,r,t;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a=e.$refs.tableAccesoEspecialAlmacen,n.n=1,e.$http.put("api/acceso-especial-almacen",{FECHA_REGISTRO:e.form.FECHA_REGISTRO});case 1:c=n.v,r=c.message,e.openAdd=!1,a.updateRow(e.rowAccesoEspecialAlmacen,e.form),e.$notify(r,"success"),n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){var e=this;return A()(f()().m(function n(){var a;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.readPersonal();case 1:n.n=3;break;case 2:n.p=2,a=n.v,e.$notify(a.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},O=a(12807);const R=(0,O.A)(k,[["render",u]]);var _=R}}]);