"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[19769],{19769:function(o,e,n){n.r(e),n.d(e,{default:function(){return H}});var t=n(8445),a=n.n(t),l=n(61758),i=n(58790),s=n(29104),r={class:"row"},c={class:"col"},u={class:"row"},m={class:"col-xs-5 col-sm-4 col-md-5"},d={class:"col"},p={class:"col"},f={key:0,class:"col scroll-y row"},b={class:"col-xs-12 col-md-7"},h={class:"col-xs-12 col-md-4"},A={class:"contOpc"},v={key:0},S={key:1},g={key:0},k={key:1,class:"center-btn row"},C={class:"center-btn row"},P={key:1,class:"col"},O={key:0},x={class:"row"},y={class:"col-xs-12 q-pa-lg-md text-justify"},E={key:1,class:"row"},_={class:"col-xs-12"},I={style:{position:"relative",height:"45px"}};function D(o,e){var n=(0,l.g2)("sie-salones"),t=(0,l.g2)("sie-select"),D=(0,l.g2)("q-td"),F=(0,l.g2)("q-tr"),L=(0,l.g2)("q-table"),V=(0,l.g2)("q-icon"),N=(0,l.g2)("q-btn"),w=(0,l.g2)("q-card"),M=(0,l.g2)("q-page-sticky"),U=(0,l.g2)("sie-vacio"),Q=(0,l.g2)("q-input"),T=(0,l.g2)("q-checkbox"),R=(0,l.g2)("sie-modal"),B=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(B,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",r,[(0,l.Lk)("div",c,[(0,l.bF)(n,{modelValue:o.vmSalon,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.vmSalon=e}),onSeleccionar:o.cargarAlumno,todos:!1},null,8,["modelValue","onSeleccionar"])])]),(0,l.Lk)("div",u,[(0,l.Lk)("div",m,[(0,l.bF)(t,{class:"q-if-outlined",type:"outlined",modelValue:o.McboAlumn,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.McboAlumn=e}),label:"NOMCOMP",val:"ALUCOD",options:o.AllAlumns,placeholder:"Alumno",onSelected:o.seleccionaAlumno},null,8,["modelValue","options","onSelected"])]),(0,l.Lk)("div",d,[(0,l.bF)(t,{class:"q-if-outlined",type:"outlined",label:"ano",val:"ano",placeholder:"Año",modelValue:o.anioSelected,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.anioSelected=e}),onSelected:o.cambiarAno,options:o.Anios,disable:o.Dano},null,8,["modelValue","onSelected","options","disable"])]),(0,l.Lk)("div",p,[(0,l.bF)(t,{class:"q-if-outlined",type:"outlined",label:"label",val:"value",placeholder:"PERIODO",modelValue:o.vmPeriodo,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.vmPeriodo=e}),onSelected:o.cambiaPeriodo,options:o.dtPeriodos},null,8,["modelValue","onSelected","options"])])]),null!==o.AlumnSelect?((0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("div",b,[(0,l.bF)(L,{class:"noteTable",data:o.noteAlumn,"row-key":"name",columns:o.columnsNoteAlumn,"hide-bottom":"",pagination:{page:1,rowsNumber:0}},{body:(0,l.k6)(function(o){return[(0,l.bF)(F,{props:o},{default:(0,l.k6)(function(){return[(0,l.bF)(D,{key:"CURSONOM",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.CURSONOM),1)]}),_:2},1032,["props"]),(0,l.bF)(D,{key:"nota1",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.nota1),1)]}),_:2},1032,["props"]),(0,l.bF)(D,{key:"nota2",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.nota2),1)]}),_:2},1032,["props"]),(0,l.bF)(D,{key:"nota3",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.nota3),1)]}),_:2},1032,["props"]),(0,l.bF)(D,{key:"nota4",props:o},{default:(0,l.k6)(function(){return[(0,l.eW)((0,i.v_)(o.row.nota4),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])]),(0,l.Lk)("div",h,[(0,l.bF)(w,null,{default:(0,l.k6)(function(){return[e[11]||(e[11]=(0,l.Lk)("br",null,null,-1)),e[12]||(e[12]=(0,l.Lk)("div",{class:"titleRuler"},"Estado del Alumno(a)",-1)),(0,l.Lk)("div",A,[o.textoEstado.tipo1?((0,l.uX)(),(0,l.CE)("p",v,[(0,l.bF)(V,{name:"check_box",color:"primary",size:"24px"}),(0,l.Lk)("span",null,(0,i.v_)(o.textoEstado.tipo1),1)])):(0,l.Q3)("v-if",!0),o.textoEstado.tipo2?((0,l.uX)(),(0,l.CE)("p",S,[(0,l.bF)(V,{name:"check_box",color:"primary",size:"24px"}),(0,l.Lk)("span",null,(0,i.v_)(o.textoEstado.tipo2),1)])):(0,l.Q3)("v-if",!0)]),o.textoEstado.tipo1||o.textoEstado.tipo2?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",g,[(0,l.Lk)("p",null,[(0,l.bF)(V,{name:"check_box_outline_blank",color:"primary",size:"24px"}),e[10]||(e[10]=(0,l.Lk)("span",null,"Sin seguimiento",-1))])])),o.textoEstado.tipo1||o.textoEstado.tipo2?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)(N,{class:"conent-center col-11 btn-popup-close",color:"secondary",onClick:e[4]||(e[4]=function(e){return o.showPopup(!1)}),label:"Observación del Periodo"})])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",C,[(0,l.bF)(N,{class:"conent-center col-11 btn-popup-close",color:"secondary",onClick:e[5]||(e[5]=function(e){return o.showPopup(!0)}),label:"Info. Psicopedagógico"})])]}),_:1})]),(0,l.bF)(M,{class:"pos-sticky",position:"bottom-right",offset:[40,18]},{default:(0,l.k6)(function(){return[(0,l.bF)(N,{class:"animate-pop","fab-mini":"",color:"secondary","text-color":"white",icon:"printer",onClick:o.displayReport},null,8,["onClick"])]}),_:1})])):(0,l.Q3)("v-if",!0),null===o.AlumnSelect?((0,l.uX)(),(0,l.CE)("div",P,[(0,l.bF)(U,{subtitle:"Debe seleccionar un estudiante",title:"No hay información",icon:"user"})])):(0,l.Q3)("v-if",!0),(0,l.bF)(R,{class:"modalAcompanamientoAlumnoRegistro",title:o.modalComentario.titulo,modelValue:o.modalComentario.popup,"onUpdate:modelValue":e[8]||(e[8]=function(e){return o.modalComentario.popup=e}),footer:!o.modalComentario.verInforme,ref:"modal",header:!0,loading:o.loadingCopy},(0,l.eX)({default:(0,l.k6)(function(){return[o.modalComentario.verInforme?((0,l.uX)(),(0,l.CE)("div",O,[(0,l.Lk)("div",x,[(0,l.Lk)("div",y,[(0,l.Lk)("p",null,(0,i.v_)(o.observacionInforme),1)])])])):((0,l.uX)(),(0,l.CE)("div",E,[(0,l.Lk)("div",_,[(0,l.bF)(Q,{class:"textArea q-if-outlined",modelValue:o.observationBimestre,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.observationBimestre=e}),rows:"7","float-label":"Observación",type:"textarea"},null,8,["modelValue"])])]))]}),_:2},[o.modalComentario.verInforme?void 0:{name:"footer",fn:(0,l.k6)(function(){return[(0,l.Lk)("div",I,[(0,l.bo)((0,l.bF)(T,{class:"acompanamientoAnoProximo",modelValue:o.acompanamientoAnoProximo,"onUpdate:modelValue":e[7]||(e[7]=function(e){return o.acompanamientoAnoProximo=e}),"true-value":1,"false-value":0,disable:o.isDisableProximoAno},{default:(0,l.k6)(function(){return a()(e[13]||(e[13]=[(0,l.eW)("Continuar acompañamiento",-1)]))}),_:1},8,["modelValue","disable"]),[[s.aG,o.showAcompanamientoAnoProximo]]),(0,l.bF)(N,{class:"bg-primary btnAceptar",onClick:o.sendObservation,label:"ACEPTAR"},null,8,["onClick"])])]}),key:"0"}]),1032,["title","modelValue","footer","loading"]),(0,l.bF)(R,{modelValue:o.MpopupPedagogico,"onUpdate:modelValue":e[9]||(e[9]=function(e){return o.MpopupPedagogico=e}),footer:!0,ref:"modal",header:!0,loading:o.loadingCopy,onSubmit:o.sendInfoPsicopedagogico},{default:(0,l.k6)(function(){return a()(e[14]||(e[14]=[(0,l.Lk)("div",{class:"row"},[(0,l.Lk)("p",null,"Información Psicopedagógico")],-1)]))}),_:1},8,["modelValue","loading","onSubmit"])]}),_:1})}var F=n(99550),L=n.n(F),V=(n(23825),n(83190),n(27153),n(44264),n(66307),n(24066),n(80660)),N=n(6123),w=n(2819),M=n(93616),U=n(30640),Q=n(80340),T=n(57668),R=n(69027),B=n(982),q=n(88275),j={components:{QSelect:N.Si,QTable:N.kH,QTr:N.qh,QTd:N.Ef,QModal:N.tU,QModalLayout:N.hT,sieSelect:M.A,QField:N.Om,sieVacio:Q.A,sieModal:U.A,QCheckbox:N.vZ,QCard:N.C$,sieInfo:T["default"],QBtn:N.Il,QPageSticky:N._U,QAlert:N.ex,sieSalones:q.Ay,QPage:N.Tu,QIcon:N.bP,QInput:N.ie},data:function(){return{McboAlumn:null,AllAlumns:null,alucod:null,noteAlumn:[],columnsNoteAlumn:[{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left"},{name:"nota1",label:"1er B",field:"nota1",align:"center"},{name:"nota2",label:"2do B",field:"nota2",align:"center"},{name:"nota3",label:"3er B",field:"nota3",align:"center"},{name:"nota4",label:"4to B",field:"nota4",align:"center"}],comentBimestre:null,ObjPeriodo:[],observationBimestre:"",observacionInforme:"",loadingCopy:!1,Dano:!0,anioSelected:null,Anios:[],anioSel:null,AlumnSelect:null,psicopedagogico:null,MpopupPedagogico:!1,acompanamientoAnoProximo:0,showAcompanamientoAnoProximo:!1,modalComentario:{popup:!1,msj:"",titulo:"",verInforme:!1},vmPeriodo:null,dtSalonSelect:{},isDisableProximoAno:!1,comentarioVerificacion:null,textoEstado:{tipo1:"",tipo2:""},dtPeriodos:[{value:1,label:"1er Periodo"},{value:2,label:"2do Periodo"},{value:3,label:"3er Periodo"},{value:4,label:"4to Periodo"}],dataAlumnos:[],dataAlumnoSelec:[],vmSalon:""}},watch:{},computed:{},methods:{retornarAlumnosSalon:function(){var o=this;this.dataAlumnos=[],V.$http.get("api/HyoSalones/retornaAlumnosSalon",{params:{nemo:this.vmSalon}}).then(function(e){var n=e.json;o.dataAlumnos=n})},cambiarAno:function(o){if(this.dtSalonSelect=o,o.perinum===o.pericie)this.vmPeriodo=o.perinum;else{var e=null==o.pericie?0:parseInt(o.pericie);this.vmPeriodo=e+1}this.cambiaPeriodo()},seleccionaAlumno:function(o){this.AlumnSelect=null,this.Anios=o.salones,this.anioSelected=(0,T["default"])().ano.toString(),this.AlumnSelect=o,this.Dano=!1},limpiar:function(){this.textoEstado.tipo1="",this.textoEstado.tipo2="",this.observationBimestre=null,this.observacionInforme=null,this.comentarioVerificacion=null,this.noteAlumn=[]},cambiaPeriodo:function(){var o=this;if(this.showAcompanamientoAnoProximo=4===this.vmPeriodo,this.limpiar(),null==this.McboAlumn)return!1;var e=this.AlumnSelect,n=this.dtSalonSelect.nemo;this.anioSelected=null===this.anioSelected?(0,T["default"])().ano:this.anioSelected;var t=[V.$http.get("api/HyoNotas/obtPromedioNotasAcompanamiento",{params:{nemo:n,alucod:e.ALUCOD,bimecod:this.vmPeriodo}}),V.$http.get("api/HyoAcompanamientoalumno/obtComentarioBimestre",{params:{ano:this.anioSelected,alucod:e.ALUCOD,bimecod:this.vmPeriodo}}),V.$http.get("api/HyoAcompanamientoalumno/obtComentarioInformeBimestre",{params:{ano:this.anioSelected,alucod:e.ALUCOD,bimecod:this.vmPeriodo}})];Promise.all(t).then(function(e){var n=L()(e,3),t=n[0],a=n[1],l=n[2];o.noteAlumn=t.json,o.dataAlumnoSelec=a.json[0],a.json.length>0&&(o.textoEstado.tipo1=o.dataAlumnoSelec.CONDICION1,o.textoEstado.tipo2=o.dataAlumnoSelec.CONDICION2,o.observationBimestre=o.dataAlumnoSelec.COMENTARIO,o.comentarioVerificacion=o.dataAlumnoSelec.COMENTARIO,o.acompanamientoAnoProximo=null==o.dataAlumnoSelec.ESTADO_SF?0:o.dataAlumnoSelec.ESTADO_SF),l.json.length>0&&(o.observacionInforme=l.json[0].INFORME)}).catch(function(e){(0,B["default"])(o.$t("mensajes.e0006"),"error")})},showPopup:function(o){this.modalComentario.verInforme=o,this.modalComentario.titulo=o?"Información Psicopedagógico":"Observación por periodo",this.modalComentario.popup=!0},closePopup:function(){this.modalComentario.popup=!1},sendObservation:function(){var o=this,e=1===this.dataAlumnoSelec.ESTADO_SF&&0===this.acompanamientoAnoProximo;if(this.observationBimestre!==this.comentarioVerificacion||this.dataAlumnoSelec.ESTADO_SF!==this.acompanamientoAnoProximo){var n={ano:this.anioSelected,alucod:this.McboAlumn,bimecod:this.vmPeriodo,comentario:this.observationBimestre,estado_sf:this.acompanamientoAnoProximo,id_condicion_estudios:this.dataAlumnoSelec["ID_CONDICION_ESTUDIOS"],id_condicion_conducta:this.dataAlumnoSelec["ID_CONDICION_CONDUCTA"],flEliminar:e};e?(0,R.confirmar)("¿Desea eliminar el registro de seguimiento para el siguiente año?",function(){o.grabarComentEstado(n)}):this.grabarComentEstado(n)}else(0,B["default"])(this.$t("mensajes.m0064"),"success"),this.closePopup()},grabarComentEstado:function(o){var e=this;console.log("entro"),V.$http.post("api/HyoAcompanamientoalumno/actualizarComentarioAcompanamiento",o).then(function(o){e.closePopup(),e.comentarioVerificacion=e.observationBimestre,e.dataAlumnoSelec.ESTADO_SF=e.acompanamientoAnoProximo,(0,B["default"])(e.$t("mensajes.m0064"),"success")}).catch(function(o){e.closePopup(),(0,B["default"])(e.$t("mensajes.e0006"),"error")})},sendInfoPsicopedagogico:function(){this.MpopupPedagogico=!0},displayReport:function(){if(""!==this.vmPeriodo){var o={ALUCOD:this.AlumnSelect.ALUCOD,ANO:(0,T["default"])().ano,BIMECOD:this.vmPeriodo,NEMO:this.dtSalonSelect.NEMO,GRADOCOD:this.dtSalonSelect.GRADOCOD,INSTRUCOD:this.dtSalonSelect.INSTRUCOD,repcod:"informeAcompanamiento"};(0,w.exportFilePhp)(o,"intranet/reporte-node/reporte","ReporteInformeAcompanamiento")}else(0,R.alertModal)(this.$t("aviso"),this.$t("mensajes.a0028"))},cargarAlumno:function(){var o=this;this.limpiar(),this.AlumnSelect=null,this.dtSalonSelect={},this.McboAlumn=null,V.$http.get("api/HyoAcompanamientoalumno/obtAlumnosTodos",{params:{nemo:this.vmSalon}}).then(function(e){o.AllAlumns=e.json}).catch(function(o){})}},created:function(){}},$=n(12807);const X=(0,$.A)(j,[["render",D]]);var H=X}}]);