"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[72640],{72640:function(e,r,t){t.r(r),t.d(r,{default:function(){return z}});var o=t(8445),a=t.n(o),n=t(61758),i=t(29104),l={class:"row q-col-gutter-sm"},u={class:"col-xs-12 col-sm-6"},s={class:"col-xs-12 col-sm-6"},c={class:"col-xs-12 col-sm-6"},f={class:"col-xs-12 col-sm-6"},p={class:"col-xs-12 col-sm-6"},d={class:"row q-pa-sm q-col-gutter-sm"},m={class:"col-xs-12"},h={class:"col-xs-12"},v={class:"col-xs-12"},g={class:"col-xs-12"},b={class:"row q-pa-xs q-col-gutter-xs"},T={class:"col-2"};function w(e,r){var t=this,o=(0,n.g2)("header-btn"),w=(0,n.g2)("q-date"),k=(0,n.g2)("q-popup-proxy"),A=(0,n.g2)("q-icon"),C=(0,n.g2)("q-input"),I=(0,n.g2)("sie-select"),R=(0,n.g2)("q-select"),D=(0,n.g2)("q-card-section"),F=(0,n.g2)("q-separator"),V=(0,n.g2)("sie-table"),S=(0,n.g2)("q-card"),x=(0,n.g2)("sie-upload"),E=(0,n.g2)("q-btn"),y=(0,n.g2)("sie-modal"),P=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(P,{class:"q-pa-sm sie-flat"},{default:(0,n.k6)(function(){return[(0,n.bF)(S,null,{default:(0,n.k6)(function(){return[(0,n.bF)(o,{name:"Listado",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(D,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[(0,n.Lk)("div",u,[(0,n.bF)(C,{outlined:"",modelValue:e.form.fhIni,"onUpdate:modelValue":r[2]||(r[2]=function(r){return e.form.fhIni=r}),readonly:"",label:"Desde"},{append:(0,n.k6)(function(){return[(0,n.bF)(A,{class:"cursor-pointer",name:"date_range"},{default:(0,n.k6)(function(){return[(0,n.bF)(k,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)(function(){return[(0,n.bF)(w,{modelValue:e.form.fhIni,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.form.fhIni=r}),onInput:r[1]||(r[1]=function(r){e.$refs.qDateProxy.hide(),e.loadCovidTemperatura()}),mask:"DD/MM/YYYY"},{default:(0,n.k6)(function(){return a()(r[17]||(r[17]=[(0,n.Lk)("div",{class:"row items-center justify-end"},null,-1)]))}),_:1},8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,n.Lk)("div",s,[(0,n.bF)(C,{outlined:"",modelValue:e.form.fhFin,"onUpdate:modelValue":r[5]||(r[5]=function(r){return e.form.fhFin=r}),readonly:"",label:"Hasta"},{append:(0,n.k6)(function(){return[(0,n.bF)(A,{class:"cursor-pointer",name:"date_range"},{default:(0,n.k6)(function(){return[(0,n.bF)(k,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)(function(){return[(0,n.bF)(w,{modelValue:e.form.fhFin,"onUpdate:modelValue":r[3]||(r[3]=function(r){return e.form.fhFin=r}),onInput:r[4]||(r[4]=function(r){e.$refs.qDateProxy2.hide(),e.loadCovidTemperatura()}),mask:"DD/MM/YYYY"},{default:(0,n.k6)(function(){return a()(r[18]||(r[18]=[(0,n.Lk)("div",{class:"row items-center justify-end"},null,-1)]))}),_:1},8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,n.Lk)("div",c,[(0,n.bF)(I,{type:"outlined",modelValue:e.form.perfil,"onUpdate:modelValue":r[6]||(r[6]=function(r){return e.form.perfil=r}),options:e.perfiles,placeholder:"Perfil",label:"label",val:"value",onInput:r[7]||(r[7]=function(r){return e.loadCovidTemperatura()})},null,8,["modelValue","options"])]),r[19]||(r[19]=(0,n.Lk)("div",{class:"col-xs-12 col-sm-6"},null,-1)),1===e.form.perfil?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("div",f,[(0,n.bF)(R,{modelValue:e.form.nivel,"onUpdate:modelValue":r[8]||(r[8]=function(r){return e.form.nivel=r}),options:e.niveles,"option-value":"INSTRUCOD","option-label":"INSTRUDES",label:"Nivel",onInput:r[9]||(r[9]=function(r){e.getGrados(e.form.nivel),e.loadCovidTemperatura()})},null,8,["modelValue","options"])]),(0,n.Lk)("div",p,[(0,n.bF)(R,{modelValue:e.form.grado,"onUpdate:modelValue":r[10]||(r[10]=function(r){return e.form.grado=r}),options:e.grados,"option-value":"GRADOCOD","option-label":"GRADODES",label:"Grados",onInput:r[11]||(r[11]=function(r){return e.loadCovidTemperatura()})},null,8,["modelValue","options"])])],64)):(0,n.Q3)("v-if",!0)])]}),_:1}),(0,n.bF)(F),(0,n.bF)(D,null,{default:(0,n.k6)(function(){return[(0,n.bF)(o,{name:"",buttons:e.buttonsAccion},null,8,["buttons"]),(0,n.bF)(V,{data:e.rows,columns:e.fields,config:e.config,context:t,css:{height:"54vh"}},null,8,["data","columns","config"])]}),_:1})]}),_:1}),(0,n.bo)((0,n.bF)(x,{allow:["xlsx","xls"],onUpload:e.upload,ref:"upload"},null,8,["onUpload"]),[[i.aG,!1]]),(0,n.bF)(y,{class:"full-height",title:"Temperatura",modelValue:e.openModalCovidTemperatura,"onUpdate:modelValue":r[16]||(r[16]=function(r){return e.openModalCovidTemperatura=r}),css:{height:"50vh",width:"500px"},onSubmit:e.saveControlTemperatura},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",d,[(0,n.Lk)("div",m,[(0,n.bF)(I,{type:"outlined",modelValue:e.formulario.perfil,"onUpdate:modelValue":r[12]||(r[12]=function(r){return e.formulario.perfil=r}),options:e.perfiles,placeholder:"Perfil",label:"label",val:"value"},null,8,["modelValue","options"])]),(0,n.Lk)("div",h,[1===e.formulario.perfil?((0,n.uX)(),(0,n.Wv)(I,{key:0,type:"outlined",modelValue:e.formulario.alumno,"onUpdate:modelValue":r[13]||(r[13]=function(r){return e.formulario.alumno=r}),options:e.alumnos,label:"NOMCOMP",val:"ID_PERSONA"},null,8,["modelValue","options"])):((0,n.uX)(),(0,n.Wv)(I,{key:1,type:"outlined",modelValue:e.formulario.profesor,"onUpdate:modelValue":r[14]||(r[14]=function(r){return e.formulario.profesor=r}),options:e.profesores,label:"USUNOM",val:"ID_PERSONA"},null,8,["modelValue","options"]))]),(0,n.Lk)("div",v,[(0,n.bF)(C,{modelValue:e.formulario.temperatura,"onUpdate:modelValue":r[15]||(r[15]=function(r){return e.formulario.temperatura=r}),type:"number",label:"Temperatura"},null,8,["modelValue"])]),(0,n.Lk)("div",g,[(0,n.Lk)("div",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.temperaturas,function(r){return(0,n.uX)(),(0,n.CE)("div",T,[(0,n.bF)(E,{class:"full-width bg-primary text-white",label:r,flat:"",onClick:function(t){return e.setTemperatura(r)}},null,8,["label","onClick"])])}),256))])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var k=t(76080),A=t.n(k),C=t(45254),I=t.n(C),R=(t(77507),t(10239),t(15547),t(6123)),D=t(95718),F=t(65673),V=t(82327),S=t(88865),x=t(53380),E=t(16648),y=t(9736),P=t(18105),N=t(95477),O=t(4437),U={data:function(){return{config:{FH_REGISTRO:{component:"datetime",edit:!1},ACCION:{component:"button",icon:["edit","delete"],edit:function(e){this.flagAccion="edit",this.currentRow=e,this.openModalCovidTemperatura=!0,this.formulario.perfil=this.form.perfil,1===this.formulario.perfil?this.formulario.alumno=e.ID_PERSONA:this.formulario.profesor=e.ID_PERSONA,this.formulario.temperatura=e.TEMPERATURA},delete:function(e){var r=this;this.$confirm("¿Realmente desea eliminar este registro?","delete").onOk(I()(A()().m(function t(){return A()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r.$http.delete("api/CovidTemperatura/deleteCovidTemperatura",{params:{id:e.ID_TEMPERATURA}});case 1:return r.$notify("Se ha eliminado satisfactoriamente.","success"),t.n=2,r.loadCovidTemperatura();case 2:t.n=4;break;case 3:t.p=3,t.v,r.$notify("Ocurrió un problema de conexión.","warning");case 4:return t.a(2)}},t,null,[[0,3]])})))},permisos:{edit:">1",delete:"=== 3"},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"CODIGO",label:"Código",field:"CODIGO",align:"center",sortable:!0},{name:"FH_REGISTRO",label:"Fecha y Hora de Registro",field:"FH_REGISTRO",align:"left",sortable:!0},{name:"NEMODES",label:"Salón",field:"NEMODES",align:"left",sortable:!0},{name:"NOMBRE",label:"Nombre",field:"NOMBRE",align:"left",sortable:!0},{name:"TEMPERATURA",label:"Temperatura",field:"TEMPERATURA",align:"center",sortable:!0},{name:"ACCION",label:"Acción",field:"ACCION",align:"center",width:60}]}}},_=t(73890),$=t(57668),L=t(30640),M=t(2819);function q(e,r){var t=(0,n.g2)("q-select");return(0,n.uX)(),(0,n.Wv)(t,{modelValue:e.perfil,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.perfil=r}),"option-value":"value","option-label":"label",options:e.tipoPerfiles,label:"Seleccione Perfil",onInput:e.input},null,8,["modelValue","options","onInput"])}t(11777);var G={emits:["update:modelValue","input","change"],props:{modelValue:{type:Number,default:0}},computed:{perfil:{set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)},get:function(){return this.modelValue}}},components:{QSelect:E.A},data:function(){return{tipoPerfiles:[]}},methods:{readTipoPerfil:function(){var e=this;return I()(A()().m(function r(){return A()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.$http.get("api/FichaSintomatologica/getPerfilDestino");case 1:e.tipoPerfiles=r.v;case 2:return r.a(2)}},r)}))()},input:function(){this.$emit("change",this.modelValue)}},created:function(){var e=this;return I()(A()().m(function r(){return A()().w(function(r){while(1)switch(r.n){case 0:e.readTipoPerfil();case 1:return r.a(2)}},r)}))()}},Q=t(12807);const Y=(0,Q.A)(G,[["render",q]]);var H=Y,X=t(93616),j=t(59089),B=t(33950),W={mixins:[U],components:{perfilDestino:H,QList:F.A,QItem:V.A,QItemSection:S.A,sieNivel:_.A,QDate:O.A,QPopupProxy:N.A,QInput:y.A,QSelect:E.A,QSeparator:x.A,QCardSection:D.A,sieModal:L.A,sieSelect:X.A,sieUpload:j.A,QPage:R.Tu,QCard:R.C$,QIcon:R.bP,QBtn:R.Il},data:function(){return{alumnos:[],profesores:[],perfiles:[{value:1,label:"Alumno"},{value:2,label:"Personal"}],niveles:[],grados:[],temperaturas:[],sie:(0,$["default"])(),flagAccion:"new",currentRow:{},openModalCovidTemperatura:!1,file:null,form:{perfil:1,fhIni:"01/01/".concat((new Date).getFullYear()),fhFin:(0,P.Ay)(new Date,"DD/MM/YYYY"),nivel:"",grado:""},formulario:{perfil:1,alumno:"",profesor:"",temperatura:0},buttons:[{icon:"file_pdf",label:"Pdf",click:this.printListadoRegistroPdf},{icon:"file_excel",label:"Excel",click:this.printListadoRegistroExcel}],buttonsAccion:[{icon:"plus",label:"Agregar",click:this.createTemperatura,permiso:">1"},{icon:"file_import",label:"Importar",click:this.importFile,permiso:"=== 3"}]}},methods:{upload:function(e){var r=this;return I()(A()().m(function t(){var o,a;return A()().w(function(t){while(1)switch(t.p=t.n){case 0:return o=e[0],t.p=1,t.n=2,(0,B.Upload)({url:"api/HyoArchivo/tmp/upload",file:o});case 2:return a=t.v,t.n=3,r.$http.post("api/CovidTemperatura/postImportarExcel",{file:a});case 3:r.file=a,r.$notify("Se importaron las temperaturas.","success"),r.loadCovidTemperatura(),t.n=5;break;case 4:t.p=4,t.v,r.$notify("No ha sido posible importar las temperaturas.","warning");case 5:return t.a(2)}},t,null,[[1,4]])}))()},importFile:function(){this.$refs.upload.$el.querySelector("input").click()},loadCovidTemperatura:function(e){var r=this;return I()(A()().m(function t(){return A()().w(function(t){while(1)switch(t.n){case 0:return e=e||{fhIni:r.form.fhIni,fhFin:r.form.fhFin,perfil:r.form.perfil||1,instrucod:r.form.nivel||"",gradocod:r.form.grado||"",anio:r.sie.ano},t.n=1,r.$http.get("api/CovidTemperatura/getCovidTemperatura",{params:e});case 1:r.rows=t.v;case 2:return t.a(2)}},t)}))()},createTemperatura:function(){this.flagAccion="new",this.openModalCovidTemperatura=!0,this.clear()},printListadoRegistro:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pdf",r=this.form.fhIni.split("/").reverse().join("-"),t=this.form.fhFin.split("/").reverse().join("-"),o={repcod:"listadoTemperatura",formato:e,fhIni:r,fhFin:t,perfil:this.form.perfil||0,instrucod:this.form.nivel||"",gradocod:this.form.grado||"",anio:this.sie.ano};(0,M.exportFilePhp)(o,"webservice/reportes/reporte")},printListadoRegistroPdf:function(){this.printListadoRegistro("pdf")},printListadoRegistroExcel:function(){this.printListadoRegistro("xls")},clear:function(){this.formulario.perfil=1,this.formulario.alumno="",this.formulario.profesor=""},saveControlTemperatura:function(){var e=this;return I()(A()().m(function r(){var t;return A()().w(function(r){while(1)switch(r.p=r.n){case 0:if(t={id_persona:1===e.formulario.perfil?e.formulario.alumno:e.formulario.profesor,temperatura:e.formulario.temperatura<0?0:e.formulario.temperatura,opcion_registro:2},t.id_persona){r.n=1;break}return e.$notify("Debe seleccionar un usuario.","warning"),r.a(2);case 1:if(!(e.formulario.temperatura<1)){r.n=2;break}return e.$notify("Debe agregar temperatura.","warning"),r.a(2);case 2:if(r.p=2,"new"!==e.flagAccion){r.n=4;break}return r.n=3,e.$http.post("api/CovidTemperatura/createCovidTemperatura",{params:t});case 3:e.$notify("Se registró la temperatura.","success"),e.clear(),r.n=6;break;case 4:return t.id_temperatura=e.currentRow.ID_TEMPERATURA,r.n=5,e.$http.put("api/CovidTemperatura/updateCovidTemperatura",{params:t});case 5:e.$notify("Se modificó el registro satisfactoriamente.","success");case 6:return r.n=7,e.loadCovidTemperatura();case 7:r.n=9;break;case 8:r.p=8,r.v,e.$notify("Ha ocurrido un problema de conexión, vuelve a intenralo más tarde.","warning");case 9:return r.a(2)}},r,null,[[2,8]])}))()},getNivelesGrados:function(){var e=this;return I()(A()().m(function r(){var t;return A()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.$http.get("api/NivelGrado/getNivelGrado");case 1:return t=r.v,r.a(2,t)}},r)}))()},getNiveles:function(){var e=this;return I()(A()().m(function r(){var t,o,a,n;return A()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.getNivelesGrados();case 1:for(a in t=r.v,o=[],t)n=t[a],o.push({INSTRUCOD:n.INSTRUCOD,INSTRUDES:n.INSTRUDES});return 0===o.length&&o.push({INSTRUCOD:"",INSTRUDES:"Todos"}),r.a(2,o)}},r)}))()},getGrados:function(e){var r=this;return I()(A()().m(function t(){var o;return A()().w(function(t){while(1)switch(t.n){case 0:if(e){t.n=1;break}r.grados=[{GRADOCOD:"",GRADODES:"Todos"}],t.n=3;break;case 1:return t.n=2,r.getNivelesGrados();case 2:o=t.v,r.grados=o[e].DATA;case 3:return t.a(2)}},t)}))()},createBoxTemperatura:function(){var e=36,r=e+40,t=e;this.temperaturas.push(e.toFixed(1));for(var o=e;o<=r;o++)t+=.1,this.temperaturas.push(t.toFixed(1))},setTemperatura:function(e){this.formulario.temperatura=e}},created:function(){var e=this;return I()(A()().m(function r(){var t,o,a,n;return A()().w(function(r){while(1)switch(r.n){case 0:return e.createBoxTemperatura(),r.n=1,e.loadCovidTemperatura();case 1:return r.n=2,e.getNiveles();case 2:return e.niveles=r.v,r.n=3,e.getGrados();case 3:return r.n=4,e.$http.get("api/Alumno/getEstudiantes");case 4:return t=r.v,o=t.estudiantes,r.n=5,e.$http.get("api/HyoProfes/obtListadoProfecActivos");case 5:a=r.v,n=a.json,e.alumnos=o,e.profesores=n;case 6:return r.a(2)}},r)}))()}};const K=(0,Q.A)(W,[["render",w]]);var z=K}}]);