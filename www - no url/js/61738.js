"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[61738],{61738:function(e,a,t){t.r(a),t.d(a,{default:function(){return Le}});t(15547);var o=t(61758),r=t(29104),n=t(58790),l={class:"row gutter-xs q-col-gutter-xs"},s={class:"col-xs-12 col-sm-10 col-lg-11 q-col-gutter-sm"},i={class:"row gutter-xs q-col-gutter-sm"},c={class:"col-xs-12 col-lg-3"},u={class:"col-xs-5 col-lg-3"},d={class:"col-xs-5 col-lg-3"},m={class:"col-xs-2 col-lg-3"},g={key:0,class:"row gutter-xs q-col-gutter-sm"},p={class:"col-xs-12 col-lg-6 row"},f={class:"col-xs-12 col-lg-6"},b={key:1,class:"row gutter-xs q-col-gutter-sm"},h={class:"col-xs-12 col-lg-6"},A={class:"col-xs-12 col-lg-6"},v={key:2,class:"row gutter-xs q-col-gutter-sm"},D={class:"col-xs-12 col-lg-4"},w={class:"col-xs-12 col-lg-4"},L={class:"col-xs-12 col-lg-2"},I={class:"col-xs-12 col-lg-2"},O={key:3,class:"row gutter-xs q-col-gutter-sm"},N={class:"col-xs-12 col-lg-4"},F={class:"col-xs-12 col-lg-4"},T={class:"col-xs-12 col-lg-2"},E={class:"col-xs-12 col-lg-2"},C={class:"col-xs-12 col-sm-2 col-lg-1 flex content-center justify-center"},R={class:"row gutter-xs q-col-gutter-sm"},k={class:"col-xs-12 col-sm-7 col-lg-7"},M={class:"row gutter-xs q-col-gutter-sm"},P={class:"col-xs-12"},V={class:"column ptotal"},x={class:"col-xs-12 col-sm-5 col-lg-5"},S={class:"column ptotal"};function y(e,a){var t=(0,o.g2)("page-header"),y=(0,o.g2)("q-separator"),U=(0,o.g2)("q-option-group"),G=(0,o.g2)("q-input"),_=(0,o.g2)("q-date"),q=(0,o.g2)("q-popup-proxy"),H=(0,o.g2)("q-icon"),$=(0,o.g2)("q-select"),Y=(0,o.g2)("q-btn"),Q=(0,o.g2)("q-card-section"),B=(0,o.g2)("sie-grid"),K=(0,o.g2)("footer-grid"),X=(0,o.g2)("consultar"),j=(0,o.g2)("q-card");return(0,o.uX)(),(0,o.Wv)(j,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(t,{title:e.pageHeader.title,componente:e.pageHeader.componente,nivelAcceso:e.pageHeader.nivelAcceso,tabs:e.pageHeader.tabs,botones:e.pageHeader.botones,useTab:"",onActionTab:e.changeTab},null,8,["title","componente","nivelAcceso","tabs","botones","onActionTab"]),(0,o.bF)(y),e.pageHeader.tabKeys.registro===e.pageHeader.tabActive?((0,o.uX)(),(0,o.Wv)(Q,{key:0,style:{"padding-bottom":"0"}},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",l,[(0,o.Lk)("div",s,[(0,o.Lk)("div",i,[(0,o.Lk)("div",c,[(0,o.bF)(U,{inline:"",modelValue:e.letra.TIPO,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.letra.TIPO=a}),type:"radio",options:e.storeData.tipo,onInput:e.changeTipoLetra},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",u,[(0,o.bF)(G,{placeholder:"Ingrese número de operación",label:"Nro. de Operación",modelValue:e.letra.NUMOPE,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.letra.NUMOPE=a})},null,8,["modelValue"])]),(0,o.Lk)("div",d,[(0,o.bF)(G,{label:"Fecha Emisión",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.models.FECEMI,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.models.FECEMI=a}),mask:"##/##/####"},{append:(0,o.k6)(function(){return[(0,o.bF)(H,{class:"cursor-pointer",name:"date_range"},{default:(0,o.k6)(function(){return[(0,o.bF)(q,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)(function(){return[(0,o.bF)(_,{mask:"DD/MM/YYYY",modelValue:e.models.FECEMI,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.models.FECEMI=a}),onInput:a[3]||(a[3]=function(a){return e.closeModalCalendar("qDateProxy1")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,o.Lk)("div",m,[(0,o.bF)(G,{type:"number",modelValue:e.letra.CUOTAS,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.letra.CUOTAS=a}),placeholder:"Ingrese número de cuotas",label:"Cuotas",onKeyup:(0,r.jR)(e.obtenerCuotas,["enter"])},null,8,["modelValue","onKeyup"])])]),e.letra.TIPO===e.models.LETRAS?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",p,[(0,o.bF)($,{class:"col-lg-12 truncate-label","option-value":"FAMCOD","option-label":"FAMDES",placeholder:"Seleccione la familia",options:e.storeData.familias,label:"Familia",modelValue:e.letra.FAMILIA,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.letra.FAMILIA=a}),onInput:e.obtDeudasProvisionadas},null,8,["options","modelValue","onInput"])]),(0,o.Lk)("div",f,[(0,o.bF)($,{class:"truncate-label","option-value":"value","option-label":"label",placeholder:"Alumno",label:"Asignado a:",options:e.storeData.alumnosAsignados,modelValue:e.letra.ASIGNADO,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.letra.ASIGNADO=a})},null,8,["options","modelValue"])])])):(0,o.Q3)("v-if",!0),e.letra.TIPO===e.models.REFINANCIAMIENTO?((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",h,[(0,o.bF)($,{class:"truncate-label",label:"Perfil",placeholder:"Seleccione el perfil",options:e.storeData.perfiles,modelValue:e.models.PERFIL,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.models.PERFIL=a}),onInput:e.getPersonas},null,8,["options","modelValue","onInput"])]),(0,o.Lk)("div",A,[(0,o.bF)($,{class:"truncate-label",label:"Persona",placeholder:"Seleccione a la persona",options:e.storeData.personas,modelValue:e.models.PERSONA,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.models.PERSONA=a}),onInput:e.obtDeudasProvisionadas},null,8,["options","modelValue","onInput"])])])):(0,o.Q3)("v-if",!0),e.letra.TIPO===e.models.LETRAS?((0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",D,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.girnom,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.storeData.contactoFamilia.girnom=a}),label:"Girado:",placeholder:"Nombre completo"},null,8,["modelValue"])]),(0,o.Lk)("div",w,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.girdir,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.storeData.contactoFamilia.girdir=a}),label:"Dirección:"},null,8,["modelValue"])]),(0,o.Lk)("div",L,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.girdoc,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.storeData.contactoFamilia.girdoc=a}),label:"Nro. Documento:"},null,8,["modelValue"])]),(0,o.Lk)("div",I,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.girtel,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.storeData.contactoFamilia.girtel=a}),label:"Teléfono:"},null,8,["modelValue"])])])):(0,o.Q3)("v-if",!0),e.letra.TIPO===e.models.LETRAS?((0,o.uX)(),(0,o.CE)("div",O,[(0,o.Lk)("div",N,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.garnom,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.storeData.contactoFamilia.garnom=a}),label:"Garante:",placeholder:"Nombre completo"},null,8,["modelValue"])]),(0,o.Lk)("div",F,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.gardir,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.storeData.contactoFamilia.gardir=a}),label:"Dirección:"},null,8,["modelValue"])]),(0,o.Lk)("div",T,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.gardoc,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.storeData.contactoFamilia.gardoc=a}),label:"Nro. Documento:"},null,8,["modelValue"])]),(0,o.Lk)("div",E,[(0,o.bF)(G,{modelValue:e.storeData.contactoFamilia.gartel,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.storeData.contactoFamilia.gartel=a}),label:"Teléfono:"},null,8,["modelValue"])])])):(0,o.Q3)("v-if",!0)]),(0,o.Lk)("div",C,[(0,o.bF)(Y,{class:"btn-decorative",icon:"cog",label:"generar cuotas",color:"primary",size:"sm",onClick:e.obtenerCuotas},null,8,["onClick"])])])]}),_:1})):(0,o.Q3)("v-if",!0),e.pageHeader.tabKeys.registro===e.pageHeader.tabActive?((0,o.uX)(),(0,o.Wv)(Q,{key:1},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",R,[(0,o.Lk)("div",k,[(0,o.Lk)("div",M,[(0,o.Lk)("div",P,[(0,o.bF)(B,{class:"ag-theme-balham",style:{height:"calc(100vh - 380px)"},columnDefs:e.grid.columnsDefs,rowData:e.grid.rowData,frameworkComponents:e.grid.frameworkComponents,onGridReady:e.onGridReady,rowSelection:"multiple",onRowSelected:e.getLabelTotal},null,8,["columnDefs","rowData","frameworkComponents","onGridReady","onRowSelected"]),(0,o.bF)(K,{style:{width:"100%"},modelValue:e.footerGrid.pagina,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.footerGrid.pagina=a}),max:e.footerGrid.pages,onLoad:e.obtDeudasProvisionadas,rows:e.grid.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,o.Lk)("p",V,"Total Deuda: S/"+(0,n.v_)(e.grid.montoTotal.toFixed(2)),1)])])]),(0,o.Lk)("div",x,[(0,o.bF)(B,{class:"ag-theme-balham",style:{height:"calc(100vh - 380px)"},columnDefs:e.gridLetras.columnsDefs,rowData:e.gridLetras.rowData,frameworkComponents:e.grid.frameworkComponents,onGridReady:e.onGridReadyLetras,rowSelection:"multiple",onCellValueChanged:e.editingCuotas},null,8,["columnDefs","rowData","frameworkComponents","onGridReady","onCellValueChanged"]),(0,o.bF)(K,{style:{width:"100%"},modelValue:e.footerGrid.pagina,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.footerGrid.pagina=a}),max:e.footerGrid.pages,onLoad:e.obtenerCuotas,rows:e.gridLetras.rowData},null,8,["modelValue","max","onLoad","rows"]),(0,o.Lk)("p",S,"Total Letra: S/"+(0,n.v_)(e.gridLetras.montoTotalCutoas.toFixed(2)),1)])])]}),_:1})):(0,o.Q3)("v-if",!0),(0,o.bo)((0,o.bF)(X,{tab:"",ref:e.pageHeader.tabKeys.consultar},null,512),[[r.aG,e.pageHeader.tabKeys.consultar===e.pageHeader.tabActive]])]}),_:1})}var U=t(41562),G=t.n(U),_=t(8445),q=t.n(_),H=t(99550),$=t.n(H),Y=t(76080),Q=t.n(Y),B=t(45254),K=t.n(B),X=(t(30683),t(74260),t(39866),t(10239),t(50310),t(32203),t(90095),t(92802),t(11777),t(515),t(83190),t(62692),t(13715),t(88567)),j=t(95718),z=t(53380),W=t(54489),J=t(12143),Z=t(6123),ee=t(54267),ae=t(80660),te=t(36408),oe=t(27560),re=t(96330),ne=t(75053),le=t(64208),se=t(95477),ie=t(3112),ce=t(41615),ue=t(42037),de=t(18105),me=t(64303),ge=t(12533),pe=t(6557),fe=t(38739),be=t(2652),he=t(14507),Ae=t(57668),ve={components:{QBtn:Z.Il,headerGrid:re.A,sieGrid:te.A,footerGrid:oe.A,QCard:X.A,QCardSection:j.A,QSelect:W.S,QSeparator:z.A,sieModal:ne.A,QInput:le.A,QDate:J.A,QPopupProxy:se.A,QDatetime:Z.T5,QCheckbox:ie.A,crearBotones:me.A,QOptionGroup:fe.A,pageHeader:be.A,consultar:he["default"],QIcon:Z.bP},data:function(){return{grid:{columnsDefs:{},rowData:[],frameworkComponents:{},api:null,montoTotal:0},gridLetras:{columnsDefs:{},rowData:[],api:null,montoTotalCutoas:0},propsButtons:{botones:[],nivelAcceso:3,option:"Letras"},footerGrid:{pagina:1,pages:1},models:{FECEMI:ce["default"].CURRENT_DAY,REFINANCIAMIENTO:2,LETRAS:1,PERFIL:ce["default"].PERFIL_ALUMNO,PERSONA:""},storeData:{talonarios:[],familias:[],contactoFamilia:{},alumnos:[],alumnosAsignados:[],rowDataInitial:[],tipo:[{value:1,label:"Letra"},{value:2,label:"Refinanciamiento"}],perfiles:[],personas:[]},TIPO_LETRA:1,TIPO_REFINANCIAMIENTO:2,letra:{TALONARIO:ce["default"].TALONARIO_LETRA,NUMOPE:"",FECEMI:ce["default"].CURRENT_DAY,CUOTAS:1,FAMILIA:"",ALUMNO:"",PERFIL:"",ASIGNADO:"",TIPO:1},show:{letras:!1},pageHeader:{title:"Refinanciamiento",componente:"refinanciamiento",botones:[],nivelAcceso:(0,Ae["default"])().ruta.nivel,tabs:[{name:"tabIndex",label:"Registro"},{name:"tabConsultar",label:"Consultar"}],tabIndex:"tabIndex",tabKeys:{registro:"tabIndex",consultar:"tabConsultar"},tabActive:"tabIndex"}}},beforeMount:function(){var e=this;return K()(Q()().m(function a(){return Q()().w(function(a){while(1)switch(a.n){case 0:e.grid.frameworkComponents={agDate:ge.A},e.columnsLetras(),e.columnsDeudas(),e.obtenerFamilias(),e.crearBotones(),e.getNumeroOperacion(),e.getTalonarioLetra(),e.getPersonas(),e.getPerfiles(),e.changeTab();case 1:return a.a(2)}},a)}))()},methods:{changeTab:function(){var e=arguments,a=this;return K()(Q()().m(function t(){var o,r;return Q()().w(function(t){while(1)switch(t.n){case 0:if(o=e.length>0&&void 0!==e[0]?e[0]:"tabIndex",a.pageHeader.tabActive=o,o!==a.pageHeader.tabKeys.registro){t.n=1;break}return a.pageHeader.botones=a.crearBotones(),a.pageHeader.componente="Refinanciamiento",a.pageHeader.nivelAcceso=(0,Ae["default"])().ruta.nivel,t.a(2,!0);case 1:return t.n=2,a.$refs[o].obtenerDatosTab();case 2:r=t.v,a.pageHeader.botones=r.botones,a.pageHeader.componente=r.componente,a.pageHeader.nivelAcceso=r.minAcceso;case 3:return t.a(2)}},t)}))()},changeTipoLetra:function(){this.gridLetras.rowData=[],this.show.letras=!1,this.grid.rowData=[],this.models.PERSONA="",this.letra.FAMILIA="",this.letra.ASIGNADO="",this.letra.ALUMNO="",this.storeData.contactoFamilia={}},getPerfiles:function(){var e=this;return K()(Q()().m(function a(){return Q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ce["default"].API_PERFILES();case 1:e.storeData.perfiles=a.v;case 2:return a.a(2)}},a)}))()},getPersonas:function(){var e=this;return K()(Q()().m(function a(){return Q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ce["default"].API_PERSONAS(e.models.PERFIL);case 1:e.storeData.personas=a.v;case 2:return a.a(2)}},a)}))()},getNumeroOperacion:function(){var e=this;return K()(Q()().m(function a(){var t,o,r;return Q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ae.$http.get("api/CobroController/getNroOperacionLetras");case 1:if(t=a.v,0!==t.length){a.n=2;break}return a.a(2,e.$alert("Error con el numero de operacion"));case 2:o=$()(t,1),r=o[0],e.letra.NUMOPE=r.NUMOPE;case 3:return a.a(2)}},a)}))()},getLabelTotal:function(){this.grid.montoTotal=this.grid.api.getSelectedRows().reduce(function(e,a){return e+a.MONTOPEN},0)},crearBotones:function(){var e=[{label:"Grabar",icon:"save",click:this.procesarLetras,minAcceso:ce["default"].LECTURA_ESCRITURA}];return this.propsButtons.botones=e,e},consultar:function(){this.$router.push({name:"tesoreria.registroConsultarLetras"})},obtenerCuotas:function(){var e=this;return K()(Q()().m(function a(){var t,o,r,n,l;return Q()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,!(0===e.letra.CUOTAS||e.letra.CUOTAS>100)){a.n=1;break}return a.a(2,e.$alert("Minimo se debe generar una letra maximo 100"));case 1:if(e.letra.TIPO!==e.TIPO_LETRA||e.letra.FAMILIA){a.n=2;break}return a.a(2,e.$alert("Debe seleccionar una familia","warning"));case 2:if(t=e.grid.api.getSelectedRows(),o=[],0!==t.length){a.n=3;break}return a.a(2,e.$alert("Debe seleccionar por lo menos 1 deuda","warning"));case 3:t.forEach(function(e){o.push({MONTO:e.MONTOPEN})});case 4:return r={cuotas:e.letra.CUOTAS,tipo:e.letra.TIPO,fecemi:(0,de.Ay)((0,ee.convertToYMD)(e.letra.FECEMI),"YYYY-MM-DD"),registros:o},a.n=5,ae.$http.get("api/cobroController/getCoutasLetras",{params:{parametros:r}});case 5:n=a.v,n.data&&e.mostrarCuotas(n.data.rows),a.n=7;break;case 6:return a.p=6,l=a.v,a.a(2,e.$alert(l.error?l.error.message:l.message,"warning"));case 7:return a.a(2)}},a,null,[[0,6]])}))()},procesarLetras:function(){var e=this;if(!this.show.letras)return this.$alert("No se han generado las letras para procesar","warning");this.$confirm("¿Seguro de generar las letras?").onOk(K()(Q()().m(function a(){var t,o,r,n,l,s;return Q()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,e.$q.loading.show(),t=e.grid.api.getSelectedRows(),o=[],t.forEach(function(e){o.push({NUMTAL:e.NUMTAL,NUMPAG:e.NUMPAG,NUMITE:e.NUMITE,NOMBRE:e.NOMBRE,NRODOC:e.NRODOC})}),e.letra.TIPO===e.TIPO_REFINANCIAMIENTO&&(e.letra.ASIGNADO=e.models.PERSONA,e.letra.PERFIL=e.models.PERFIL),r={data:e.letra,letras:e.gridLetras.rowData,comprobantes:o,contactoFamilia:e.storeData.contactoFamilia},r.data.FECEMI=(0,de.Ay)((0,ee.convertToYMD)(e.models.FECEMI)),a.n=1,ae.$http.post("api/CobroController/postLetraCobro",{datos:r});case 1:n=a.v,e.$alert(n.message,"success"),e.gridLetras.rowData=[],e.getNumeroOperacion(),e.obtDeudasProvisionadas(),e.$q.loading.hide(),e.$refs[e.pageHeader.tabKeys.consultar].getLetras(),a.n=3;break;case 2:a.p=2,s=a.v,e.$q.loading.hide(),l=s.error?s.error.message:s.message,e.$alert(l,"warning");case 3:return a.a(2)}},a,null,[[0,2]])})))},obtenerFamilias:function(){var e=this;return K()(Q()().m(function a(){var t;return Q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ae.$http.get("api/cobroController/getFamiliasDevengadas");case 1:t=a.v,e.storeData.familias=t;case 2:return a.a(2)}},a)}))()},filtroDeudas:function(){var e=this;return K()(Q()().m(function a(){var t,o,r;return Q()().w(function(a){while(1)switch(a.n){case 0:if(t=[],o=q()(e.storeData.rowDataInitial),e.grid.alumno!==ce["default"].TODOS){a.n=1;break}return e.grid.rowData=e.storeData.rowDataInitial,a.a(2,!1);case 1:return r={ID_PERSONA:e.grid.alumno},a.n=2,(0,pe.A)({keys:r,data:o});case 2:t=a.v,e.grid.rowData=t;case 3:return a.a(2)}},a)}))()},obtDeudasProvisionadas:function(){var e=this;return K()(Q()().m(function a(){var t,o;return Q()().w(function(a){while(1)switch(a.n){case 0:return t={},e.letra.TIPO===e.TIPO_LETRA?t.famcod=e.letra.FAMILIA:t.id_persona=e.models.PERSONA,a.n=1,ae.$http.get("api/cobroController/getDeudasProvisionadas",{params:{parametros:t}});case 1:if(o=a.v,0!==o.length){a.n=2;break}return e.grid.montoTotal=0,e.grid.rowData=[],a.a(2,!1);case 2:if(e.grid.rowData=o,e.storeData.rowDataInitial=o,e.letra.TIPO!==e.TIPO_LETRA){a.n=4;break}return a.n=3,e.obtenerAlumnos();case 3:return a.n=4,e.obtenerContactoAlumnoFamilia();case 4:return e.show.letras=!1,e.gridLetras.rowData=[],a.a(2,!0)}},a)}))()},obtenerAlumnos:function(){var e=this;return K()(Q()().m(function a(){var t,o,r,n,l;return Q()().w(function(a){while(1)switch(a.n){case 0:t=[],o=[],r=G()(e.grid.rowData);try{for(r.s();!(n=r.n()).done;)l=n.value,!1===t.includes(l.ID_PERSONA)&&(t.push(l.ID_PERSONA),o.push({value:l.ID_PERSONA,label:l.NOMBRE}))}catch(e){r.e(e)}finally{r.f()}e.storeData.alumnosAsignados=o,e.storeData.alumnos=o.length>1?[{value:"T",label:"Todos"}].concat(o):o,e.seleccionarAlumnos(o);case 1:return a.a(2)}},a)}))()},obtenerContactoAlumnoFamilia:function(){var e=this;return K()(Q()().m(function a(){var t,o;return Q()().w(function(a){while(1)switch(a.n){case 0:return t={famcod:e.letra.FAMILIA},a.n=1,ae.$http.get("api/cobroController/getContactoAlumnoFamilia",{params:{parametros:t}});case 1:o=a.v,e.storeData.contactoFamilia=o;case 2:return a.a(2)}},a)}))()},seleccionarAlumnos:function(e){var a=q()(e),t=a[0];this.letra.ASIGNADO=t.value,this.letra.ALUMNO=e.length>1?ce["default"].TODOS:t.value},mostrarCuotas:function(e){var a=this;return K()(Q()().m(function t(){return Q()().w(function(t){while(1)switch(t.n){case 0:return a.show.letras=!0,a.gridLetras.rowData=e,a.gridLetras.montoTotalCutoas=e.reduce(function(e,a){return e+Number(a.MONTO)},0),t.n=1,a.crearBotones();case 1:return t.a(2)}},t)}))()},columnsDeudas:function(){this.grid.columnsDefs=[{headerName:"Nombre",field:"NOMBRE",width:225,rezible:!0},{headerName:"Concepto",field:"CONCEPTO",width:150,rezible:!0},{headerName:"Nro. Doc",field:"NRODOC",width:130},{headerName:"",field:"MONSIG",width:40},{headerName:"Saldo",field:"MONTOPEN",width:100,cellStyle:{textAlign:"right"},valueFormatter:ue.toFixed}]},columnsLetras:function(){this.gridLetras.columnsDefs=[{headerName:"Letra",field:"NUMLET",width:90},{headerName:"Fecha Venc.",field:"FECVEN",cellRenderer:ge.A,valueFormatter:function(e){return(0,de.Ay)(e.value,"DD/MM/YYYY")},width:150},{headerName:"Monto",width:75,field:"MONTO",cellStyle:{textAlign:"right"},editable:!0}]},getTalonarioLetra:function(){var e=this;return K()(Q()().m(function a(){var t,o;return Q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ce["default"].API_TALONARIOS();case 1:if(t=a.v,o=t.find(function(e){return e.value===ce["default"].TALONARIO_LETRA}),!(o&&Object.keys(o).length>0)){a.n=2;break}return e.storeData.talonarios=[o],e.grid.talonario=o.value,a.a(2,!0);case 2:e.grid.talonario="";case 3:return a.a(2)}},a)}))()},onGridReadyLetras:function(e){this.gridLetras.api=e.api},onGridReady:function(e){this.grid.api=e.api},editingCuotas:function(e){var a=e.data;this.gridLetras.api.updateRowData({update:[a]});for(var t=0;t<this.gridLetras.rowData.length;t++)this.gridLetras.rowData[t].NUMLET===a.NUMLET&&(this.gridLetras.rowData[t].MONTO=Number(a.MONTO),this.gridLetras.rowData[t].FECVEN=(0,de.Ay)((0,ee.convertToYMD)(a.FECVEN),"YYYY-MM-DD"));this.gridLetras.montoTotalCutoas=this.gridLetras.rowData.reduce(function(e,a){return e+Number(a.MONTO)},0)},closeModalCalendar:function(e){this.$refs[e].hide()}}},De=t(12807);const we=(0,De.A)(ve,[["render",y]]);var Le=we}}]);