"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[16731],{16731:function(a,e,n){n.r(e),n.d(e,{default:function(){return w}});var t=n(61758),l=n(58790),o={class:"row q-pa-sm col"},c={class:"col-12"};function i(a,e){var n=(0,t.g2)("sie-familia"),i=(0,t.g2)("sie-vacio"),r=(0,t.g2)("q-td"),u=(0,t.g2)("q-toggle"),s=(0,t.g2)("q-table"),f=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(f,null,{default:(0,t.k6)(function(){return[(0,t.bF)(n,{onSelected:a.getCalcoByFamcod},null,8,["onSelected"]),(0,t.Lk)("div",o,[(0,t.Lk)("div",c,[a.vacio?((0,t.uX)(),(0,t.Wv)(i,{key:0,title:"mensajes.m0077",subtitle:"mensajes.m0048"})):((0,t.uX)(),(0,t.Wv)(s,{key:1,data:a.calcomanias.data,columns:a.columns},{"body-cell-PARENTESCO":(0,t.k6)(function(a){return[(0,t.bF)(r,{props:a},{default:(0,t.k6)(function(){return[(0,t.eW)((0,l.v_)("O"===a.row.PARENTESCO?a.row.PARENTESCO_OTRO:"P"===a.row.PARENTESCO?"Padre":"Madre"),1)]}),_:2},1032,["props"])]}),"body-cell-ENTREGADO":(0,t.k6)(function(e){return[(0,t.bF)(r,{props:e},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{class:"q-if-outlined",modelValue:e.row.ENTREGADO,"onUpdate:modelValue":function(a){return e.row.ENTREGADO=a},"true-value":1,"false-value":0,onInput:function(n){return a.save(e.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"]),(0,t.Lk)("span",null,(0,l.v_)(a.date(e.row.FH_ENTREGA,"DD/MM/YYYY hh:mm")),1)]}),_:2},1032,["props"])]}),_:1},8,["data","columns"]))])])]}),_:1})}var r=n(76080),u=n.n(r),s=n(45254),f=n.n(s),m=n(6123),d=n(96529),E=n(80340),h=n(30545),v=n(982),g=n(78786),O=n(18105),A=n(80660),p={getCalcoByFamcod:function(a){return A.$http.get("api/HyoFamiliacalco/getCalcoByFamcod",{params:a}).then(function(a){var e=a.json;return e})},save:function(a){return A.$http.post("api/HyoFamiliacalco/entregarCalcomania",a).then(function(a){var e=a.json;return e})},config:function(){return f()(u()().m(function a(){return u()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,A.$http.get("api/HyoFamiliacalco/config"))}},a)}))()}},b={components:{QTd:m.Ef,QTable:h.A,QToggle:m.c5,sieFamilia:d.A,sieVacio:E.A,QPage:m.Tu},data:function(){return{calcomanias:{data:[]},vacio:!0,calcomaniasMuestraParentesco:!1}},computed:{columns:function(){var a=[{name:"MARCOD",label:this.$t("marcavehiculo"),field:"MARCOD",align:"left",sortable:!0},{name:"MODELO",label:this.$t("modelovehiculo"),field:"MODELO",align:"left",sortable:!0},{name:"ANO",label:this.$t("anovehiculo"),field:"ANO",align:"left",sortable:!0},{name:"COLOR",label:this.$t("colorvehiculo"),field:"COLOR",align:"left",sortable:!0},{name:"PLACA",label:this.$t("placavehiculo"),field:"PLACA",align:"left",sortable:!0},{name:"TIPO",label:this.$t("tipo"),field:"TIPO",align:"left",sortable:!0},{name:"ENTREGADO",label:"Entregado",field:"ENTREGADO",align:"center"}];return this.calcomaniasMuestraParentesco&&a.unshift({name:"PARENTESCO",label:"Parentesco",field:"PARENTESCO",align:"left",sortable:!0}),a}},methods:{date:O.Ay,getCalcoByFamcod:function(a){var e=this;return f()(u()().m(function n(){var t,l;return u()().w(function(n){while(1)switch(n.n){case 0:return t={famcod:a.FAMCOD},n.n=1,p.getCalcoByFamcod(t);case 1:l=n.v,e.calcomanias.data=l,e.vacio=!1;case 2:return n.a(2)}},n)}))()},save:function(a){var e=this,n=(0,g["default"])(this.calcomanias.data,a.ITEM,{key:"ITEM"}),t={famcod:a.FAMCOD,item:a.ITEM,estado:a.ENTREGADO};p.save(t).then(function(t){a.ENTREGADO?e.calcomanias.data[n].FH_ENTREGA=new Date:e.calcomanias.data[n].FH_ENTREGA=null,(0,v["default"])(e.$t("mensajes."+t),"success")}).catch(function(a){(0,v["default"])(e.$t("mensajes.e0006","warning"))})}},created:function(){var a=this;return f()(u()().m(function e(){return u()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,p.config();case 1:a.calcomaniasMuestraParentesco=e.v;case 2:return e.a(2)}},e)}))()}},T=n(12807);const C=(0,T.A)(b,[["render",i]]);var w=C}}]);