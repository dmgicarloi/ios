"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[39563],{39563:function(e,n,i){i.r(n),i.d(n,{default:function(){return E}});var a=i(61758),r={class:"row q-col-gutter-sm"},t={class:"col-xs-12"},c={class:"col-xs-12"},o={class:"row q-pa-sm q-col-gutter-sm"},s={class:"col-xs-12"},l={class:"col-xs-12"};function u(e,n){var i=this,u=(0,a.g2)("header-btn"),f=(0,a.g2)("sie-table"),d=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-select"),p=(0,a.g2)("q-input"),w=(0,a.g2)("q-form"),h=(0,a.g2)("sie-modal"),g=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(g,{class:"q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(m,{flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(d,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",r,[(0,a.Lk)("div",t,[(0,a.bF)(u,{name:"Mantenimiento Ubicacion",buttons:e.buttons},null,8,["buttons"])]),(0,a.Lk)("div",c,[(0,a.bF)(f,{type:"normal",data:e.rows,columns:e.fields,config:e.config,selection:"single","save-cells":"",ref:"tableUbicacion",onRowSelected:e.rowSelectUbicacion,css:"height:calc(100vh - 140px)",context:i},null,8,["data","columns","config","onRowSelected"])])])]}),_:1})]}),_:1}),(0,a.bF)(h,{esc:"","esc-click":"",modelValue:e.openAdd,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.openAdd=n}),css:{width:"500px"},title:"create"===e.action?"Agregar Ubicación":"Modificar Ubicación",onSubmit:e.saveAcccion},{default:(0,a.k6)(function(){return[(0,a.bF)(w,{ref:"refForm"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",o,[(0,a.Lk)("div",s,[(0,a.bF)(b,{modelValue:e.form.IDALMACEN,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.IDALMACEN=n}),options:e.almacenes,"option-value":"IDALMACEN","option-label":"DESCRIPCION","emit-value":"",label:"Almacén *",rules:[e.required]},null,8,["modelValue","options","rules"])]),(0,a.Lk)("div",l,[(0,a.bF)(p,{type:"textarea",counter:"",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.DESCRIPCION=n}),label:"Descripción *",rules:[e.required]},null,8,["modelValue","rules"])])])]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"])]}),_:1})}var f=i(76080),d=i.n(f),m=i(45254),b=i.n(m),p=(i(89571),i(6123)),w={data:function(){return{config:{ACTION:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,n){var i=this;return b()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:return i.rowUbicacion=n,e.n=1,i.openActualizar();case 1:return e.a(2)}},e)}))()},eliminar:function(e,n){var i=this;return b()(d()().m(function e(){return d()().w(function(e){while(1)switch(e.n){case 0:return i.rowUbicacion=n,e.n=1,i.deleteUbicacion();case 1:return e.a(2)}},e)}))()},tooltip:{editar:"Editar",eliminar:"Eliminar"},permisos:{editar:">1",eliminar:"===3"},flat:!0,dense:!0}},rows:[],fields:[{name:"ID_UBICACION",label:"Código",field:"ID_UBICACION",align:"center",sortable:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:80}]}}},h=i(39893),g=i(81288),A=i(2739),v=i(9736),C=i(16648),I=i(88567),U=i(95718),k=i(43136),D={mixins:[w,k.initialConfig],components:{QForm:A.A,QInput:v.A,QSelect:C.A,QCard:I.A,QCardSection:U.A,QPage:p.Tu},data:function(){return{required:h.require,buttons:[{label:"Agregar",icon:"plus",permiso:">1",click:this.openAgregar}],openAdd:!1,action:"create",rowUbicacion:null,almacenes:[],anios:[],filter:{anio:null},form:{DESCRIPCION:null,IDALMACEN:null}}},methods:{openAgregar:function(){this.action="create",this.rowUbicacion=null,(0,g.clear)(this.form),this.openAdd=!0},openActualizar:function(){this.rowUbicacion?(this.action="update",this.form.DESCRIPCION=this.rowUbicacion.DESCRIPCION,this.form.IDALMACEN=this.rowUbicacion.IDALMACEN,this.openAdd=!0):this.$notify("Selecciona un registro","info")},saveAcccion:function(){var e=this;return b()(d()().m(function n(){var i,a,r;return d()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$refs.refForm.validate();case 1:if(i=n.v,i){n.n=2;break}return n.a(2);case 2:if("create"!==e.action){n.n=4;break}return n.n=3,e.$confirmar("El registro se creará ¿Desea continuar?","info");case 3:a=n.v,a&&e.createUbicacion(),n.n=6;break;case 4:return n.n=5,e.$confirmar("El registro se modificará ¿Desea continuar?","info");case 5:r=n.v,r&&e.updateUbicacion();case 6:return n.a(2)}},n)}))()},rowSelectUbicacion:function(e,n){this.rowUbicacion=n},createUbicacion:function(){var e=this;return b()(d()().m(function n(){var i,a,r,t,c;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/UbicacionController/addUbicacion",{data:e.form});case 1:i=n.v,a=i.data,r=i.message,t={ID_UBICACION:a.ID_UBICACION,DESCRIPCION:e.form.DESCRIPCION},e.rows.unshift(t),e.openAdd=!1,e.$notify(r,"success"),n.n=3;break;case 2:n.p=2,c=n.v,e.$notify(c.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readUbicacion:function(){var e=this;return b()(d()().m(function n(){var i,a;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/UbicacionController/getUbicacion",{params:{}});case 1:i=n.v,e.rows=i,n.n=3;break;case 2:n.p=2,a=n.v,e.$notify(a.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readAlmacen:function(){var e=this;return b()(d()().m(function n(){var i,a;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.get("api/HyoAlmacenes/getAlmacenesBySede",{params:{id_local:e.id_local}});case 1:i=n.v,e.almacenes=i,n.n=3;break;case 2:n.p=2,a=n.v,e.$notify(a.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},readAnios:function(){var e=this;return b()(d()().m(function n(){return d()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/HyoAnos/getAllYears");case 1:e.anios=n.v;case 2:return n.a(2)}},n)}))()},deleteUbicacion:function(){var e=this;return b()(d()().m(function n(){var i,a,r,t;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.rowUbicacion){n.n=1;break}e.$notify("Selecciona un registro","info"),n.n=6;break;case 1:return n.n=2,e.$confirmar("¿Estás seguro de eliminar el registro?","delete");case 2:if(i=n.v,!i){n.n=6;break}return n.p=3,n.n=4,e.$http.delete("api/UbicacionController/deleteUbicacion",{params:{id:e.rowUbicacion.ID_UBICACION}});case 4:a=n.v,r=a.message,e.rows.splice(e.rows.indexOf(e.rowUbicacion),1),e.rowUbicacion=null,e.$notify(r,"success"),n.n=6;break;case 5:n.p=5,t=n.v,e.$notify(t.message,"warning");case 6:return n.a(2)}},n,null,[[3,5]])}))()},updateUbicacion:function(){var e=this;return b()(d()().m(function n(){var i,a,r,t;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,i=e.$refs.tableUbicacion,n.n=1,e.$http.post("api/UbicacionController/updateUbicacion",{id:e.rowUbicacion.ID_UBICACION,params:e.form});case 1:a=n.v,r=a.message,e.openAdd=!1,i.updateRow(e.rowUbicacion,e.form),e.$notify(r,"success"),n.n=3;break;case 2:n.p=2,t=n.v,e.$notify(t.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()}},created:function(){var e=this;return b()(d()().m(function n(){var i;return d()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.readUbicacion();case 1:return n.n=2,e.readAlmacen();case 2:return n.n=3,e.readAnios();case 3:n.n=5;break;case 4:n.p=4,i=n.v,e.$notify(i.message,"warning");case 5:return n.a(2)}},n,null,[[0,4]])}))()}},N=i(12807);const $=(0,N.A)(D,[["render",u]]);var E=$}}]);