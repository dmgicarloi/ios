"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[64953],{64953:function(e,t,o){o.r(t),o.d(t,{default:function(){return Yo}});var n=o(61758);function a(e,t){var o=(0,n.g2)("header-btn"),a=(0,n.g2)("q-tab"),i=(0,n.g2)("q-tabs"),r=(0,n.g2)("q-separator"),l=(0,n.g2)("procesos"),s=(0,n.g2)("q-tab-panel"),u=(0,n.g2)("expedientes"),c=(0,n.g2)("configuracion"),d=(0,n.g2)("informes"),f=(0,n.g2)("q-tab-panels"),p=(0,n.g2)("q-card"),m=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(m,{class:"intranet-becas--dashboard q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(p,{dense:"",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{name:"Becas",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(i,{class:"text-primary",inverted:"",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.tab=t}),align:"justify",dense:""},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{name:"procesos",label:"Procesos"}),(0,n.bF)(a,{name:"expedientes",label:"Expedientes",default:""}),(0,n.bF)(a,{name:"config",label:"Configuración"}),e.verInforme?((0,n.uX)(),(0,n.Wv)(a,{key:0,name:"informes",label:"informes"})):(0,n.Q3)("v-if",!0)]}),_:1},8,["modelValue"]),(0,n.bF)(r),(0,n.bF)(f,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tab=t}),animated:""},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{name:"procesos"},{default:(0,n.k6)(function(){return[(0,n.bF)(l)]}),_:1}),(0,n.bF)(s,{name:"expedientes"},{default:(0,n.k6)(function(){return[e.perActivo>0?((0,n.uX)(),(0,n.Wv)(u,{key:0,periodo:e.perActivo},null,8,["periodo"])):(0,n.Q3)("v-if",!0)]}),_:1}),(0,n.bF)(s,{class:"q-pa-none",name:"config"},{default:(0,n.k6)(function(){return[e.perActivo>0?((0,n.uX)(),(0,n.Wv)(c,{key:0})):(0,n.Q3)("v-if",!0)]}),_:1}),e.verInforme?((0,n.uX)(),(0,n.Wv)(s,{key:0,name:"informes"},{default:(0,n.k6)(function(){return[e.perActivo>0?((0,n.uX)(),(0,n.Wv)(d,{key:0,periodo:e.perActivo},null,8,["periodo"])):(0,n.Q3)("v-if",!0)]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})}var i=o(57008),r=o.n(i),l=o(23316),s=o(44189),u=o(42980),c=o(10327),d=o(39041),f=o(71746),p=o(10386),m=o(6123),h=o(8445),v=o.n(h),b=o(58790),g={class:"intranet--becas--dashboard--periodos"},k={class:"col-12"},A={class:"row items-center justify-end q-gutter-sm"},E={class:"q-pa-md"},w={class:"row items-center q-col-gutter-y-md q-col-gutter-x-sm"},C={class:"col-6"},O={class:"col-6"},I={class:"col-6"},_={class:"col-6"};function F(e,t){var o=(0,n.g2)("q-btn"),a=(0,n.g2)("q-td"),i=(0,n.g2)("q-datetime"),r=(0,n.g2)("q-popup-edit"),l=(0,n.g2)("q-toggle"),s=(0,n.g2)("q-tooltip"),u=(0,n.g2)("q-tr"),c=(0,n.g2)("q-table"),d=(0,n.g2)("q-input"),f=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",g,[(0,n.bF)(c,{class:"htable",rows:e.dsProcesos,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":t[1]||(t[1]=function(t){return e.pagination=t}),"row-per-page-options":[0],dense:"",flat:"",bordered:""},{top:(0,n.k6)(function(a){return[(0,n.Lk)("div",k,[(0,n.Lk)("div",A,[e.acceso?((0,n.uX)(),(0,n.Wv)(o,{key:0,icon:"add",label:"Nuevo proceso",color:"primary",onClick:t[0]||(t[0]=function(t){return e.showNewProceso=!0}),size:"sm",unelevated:""})):(0,n.Q3)("v-if",!0)])])]}),body:(0,n.k6)(function(c){return[(0,n.bF)(u,{props:c},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"ANOBEC",props:c},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(c.row.ANOBEC),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"FECHA_APERTURA",props:c},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(e.date(c.row.FECHA_APERTURA,"DD/MM/YYYY")),1),e.acceso?((0,n.uX)(),(0,n.Wv)(r,{key:0,modelValue:c.row.FECHA_APERTURA,"onUpdate:modelValue":function(e){return c.row.FECHA_APERTURA=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{type:"date",modelValue:c.row.FECHA_APERTURA,"onUpdate:modelValue":function(e){return c.row.FECHA_APERTURA=e},format:"DD/MM/YYYY",onInput:function(t){return e.updatePeriodo(c.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"FECHA_LIMITE",props:c},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(e.date(c.row.FECHA_LIMITE,"DD/MM/YYYY")),1),e.acceso?((0,n.uX)(),(0,n.Wv)(r,{key:0,modelValue:c.row.FECHA_LIMITE,"onUpdate:modelValue":function(e){return c.row.FECHA_LIMITE=e}},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{type:"date",modelValue:c.row.FECHA_LIMITE,"onUpdate:modelValue":function(e){return c.row.FECHA_LIMITE=e},format:"DD/MM/YYYY",onInput:function(t){return e.updateFechaLimite(c.row)}},null,8,["modelValue","onUpdate:modelValue","onInput"])]}),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"ACTIVO",props:c},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{modelValue:c.row.ACTIVO,"onUpdate:modelValue":[function(e){return c.row.ACTIVO=e},function(t){return e.updatePeriodo(c.row)}],"true-value":1,"false-value":0,disable:!e.acceso,color:"primary",dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"acciones",props:c},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{flat:"",color:"negative",icon:"delete",size:"sm",round:"",onClick:function(t){return e.deletePeriodo(c.row.ID_BECA_PERIODO)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[7]||(t[7]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["rows","columns","pagination"]),(0,n.bF)(f,{class:"intranet--becas--dashboard--periodos--modal",modelValue:e.showNewProceso,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.showNewProceso=t}),title:"Nuevo periodo",onSubmit:e.savePeriodo,ok:"Guardar"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",E,[(0,n.Lk)("div",w,[(0,n.Lk)("div",C,[(0,n.bF)(d,{label:"Año",modelValue:e.form.ANOBEC,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.ANOBEC=t}),maxlength:"4"},null,8,["modelValue"])]),(0,n.Lk)("div",O,[(0,n.bF)(l,{modelValue:e.form.ACTIVO,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.ACTIVO=t}),label:"Activo","true-value":1,"false-value":0,color:"primary",dense:""},null,8,["modelValue"])]),(0,n.Lk)("div",I,[(0,n.bF)(i,{type:"date",modelValue:e.form.FECHA_APERTURA,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.FECHA_APERTURA=t}),format:"DD/MM/YYYY",label:"Fecha apertura"},null,8,["modelValue"])]),(0,n.Lk)("div",_,[(0,n.bF)(i,{type:"date",modelValue:e.form.FECHA_LIMITE,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.FECHA_LIMITE=t}),format:"DD/MM/YYYY",label:"Fecha límite"},null,8,["modelValue"])])])])]}),_:1},8,["modelValue","onSubmit"])])}var D=o(76080),S=o.n(D),y=o(45254),T=o.n(y),M=o(76653),V=o(44488),U=o(45262),q=o(24729),N=o(56384),P=o(97410),Q=o(66908),R=o(49211),L=o(9736),H=o(982),B=o(50304),j=o(30640),x=o(18105),$=o(57668),W={components:{QTable:M.A,QTr:V.A,QTd:U.A,QToggle:Q.A,QBtn:N.A,QTooltip:P.A,QPopupEdit:R.A,QDatetime:B.A,Dialog:q.A,notify:H["default"],sieModal:j.A,sieInfo:$["default"],QInput:L.A},data:function(){return{acceso:(0,$["default"])().ruta.nivel>=2,showNewProceso:!1,form:{ANOBEC:"",FECHA_APERTURA:null,FECHA_LIMITE:null,ACTIVO:1},dsProcesos:[],columns:[{name:"ANOBEC",label:"AÑO",field:"ANOBEC",align:"center"},{name:"FECHA_APERTURA",label:"FEC. APERTURA",field:"FECHA_APERTURA",align:"center"},{name:"FECHA_LIMITE",label:"FEC. LÍMITE",field:"FECHA_LIMITE",align:"center"},{name:"ACTIVO",label:"ACTIVO",field:"ACTIVO",align:"center"},{name:"acciones",label:"ACCIONES",align:"center"}],pagination:{rowsPerPage:0}}},methods:{date:x.Ay,getProcesos:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/HyoBecaPeriodo/getPeriodos");case 1:o=t.v,n=o.json,e.dsProcesos=n,t.n=3;break;case 2:t.p=2,a=t.v,console.log(a);case 3:return t.a(2)}},t,null,[[0,2]])}))()},savePeriodo:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:if(t.p=0,e.form.ANOBEC&&e.form.FECHA_APERTURA&&e.form.FECHA_LIMITE){t.n=1;break}return(0,H["default"])("Por favor completar todos los datos","error"),t.a(2);case 1:return t.n=2,e.$http.post("api/HyoBecaPeriodo/savePeriodo",{data:e.form});case 2:o=t.v,n=o.json,"Ok"===n.status&&((0,H["default"])(n.message),e.showNewProceso=!1,e.getProcesos()),t.n=4;break;case 3:t.p=3,a=t.v,(0,H["default"])(a.error.message,"error");case 4:return t.a(2)}},t,null,[[0,3]])}))()},updatePeriodo:function(e){var t=this;return T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_BECA_PERIODO,data:e},o.p=1,o.n=2,t.$http.put("api/HyoBecaPeriodo/updatePeriodo",n);case 2:a=o.v,i=a.json,"Ok"===i.status&&(0,H["default"])(i.message),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.p=4,t.getProcesos(),o.f(4);case 5:return o.a(2)}},o,null,[[1,3,4,5]])}))()},updateFechaLimite:function(e){var t=this;return T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e.ID_BECA_PERIODO,fecha:e.FECHA_LIMITE},o.p=1,o.n=2,t.$http.put("api/HyoBecaPeriodo/updateFechaLimite",n);case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getProcesos()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deletePeriodo:function(e){var t=this;return T()(S()().m(function o(){return S()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaPeriodo/deletePeriodo",{params:n});case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getProcesos()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()}},mounted:function(){this.getProcesos()}},X=o(12807);const z=(0,X.A)(W,[["render",F]]);var Y=z,G=(o(71225),o(50310),o(5962),o(83190),{class:"intranet-becas--dashboard--solicitudes"}),J={class:"col-12"},K={class:"row q-col-gutter-sm"},Z={class:"col-12"},ee={class:"row items-center q-col-gutter-sm"},te={class:"col justify-end q-gutter-sm row"},oe={key:0,class:"col-12"},ne={class:"row items-center q-col-gutter-sm"},ae={class:"col-sm-2 col-xs-5"},ie={class:"col-sm-4 col-xs-7"},re={class:"col-sm col-xs-6"},le={class:"col-sm col-xs-6"},se={class:"col-sm col-xs"};function ue(e,t){var o=(0,n.g2)("q-tooltip"),a=(0,n.g2)("q-btn"),i=(0,n.g2)("q-input"),r=(0,n.g2)("q-datetime"),l=(0,n.g2)("q-select"),s=(0,n.g2)("q-td"),u=(0,n.g2)("estado"),c=(0,n.g2)("q-tr"),d=(0,n.g2)("q-table"),f=(0,n.g2)("historial"),p=(0,n.g2)("participantes");return(0,n.uX)(),(0,n.CE)("div",G,[(0,n.bF)(d,{class:"htable",dense:"",flat:"",bordered:"",data:e.objActual,columns:e.columns,"row-key":"ID_BECA_SOLICITUD","virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":t[5]||(t[5]=function(t){return e.pagination=t}),"row-per-page-options":[0]},{top:(0,n.k6)(function(s){return[(0,n.Lk)("div",J,[(0,n.Lk)("div",K,[(0,n.Lk)("div",Z,[(0,n.Lk)("div",ee,[(0,n.Lk)("div",null,[(0,n.bF)(a,{icon:e.iconFilter,color:"primary",onClick:e.showHideFilters,flat:"",round:"",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(e.textTooltipFilter),1)]}),_:1})]}),_:1},8,["icon","onClick"])]),(0,n.Lk)("div",te,[e.acceso&&e.showBtnRegularizarDeuda?((0,n.uX)(),(0,n.Wv)(a,{key:0,class:"col-grow",icon:"sync",label:"Regularizar deudas",color:"primary",onClick:e.syncDeudas,size:"sm",unelevated:""},null,8,["onClick"])):(0,n.Q3)("v-if",!0),(0,n.bF)(a,{class:"col-grow",icon:"sync",label:"Sincronizar estados",color:"primary",onClick:e.syncEstados,size:"sm",disable:!e.acceso,unelevated:""},null,8,["onClick","disable"]),(0,n.bF)(a,{class:"col-grow",icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getSolicitudes,unelevated:""},null,8,["onClick"]),(0,n.bF)(a,{class:"col-grow",icon:"print",label:"Imprimir",color:"secondary",size:"sm",onClick:e.imprimir,unelevated:""},null,8,["onClick"]),e.sie.esAdministrador?((0,n.uX)(),(0,n.Wv)(a,{key:1,class:"col-grow",icon:"print",label:"Descargar Documentos",color:"secondary",size:"sm",onClick:e.descargarDocumentos,unelevated:""},null,8,["onClick"])):(0,n.Q3)("v-if",!0)])])]),e.showFilter?((0,n.uX)(),(0,n.CE)("div",oe,[(0,n.Lk)("div",ne,[(0,n.Lk)("div",ae,[(0,n.bF)(i,{modelValue:e.filter.famcod,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.famcod=t}),label:"Código"},null,8,["modelValue"])]),(0,n.Lk)("div",ie,[(0,n.bF)(i,{modelValue:e.filter.famdes,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.famdes=t}),label:"Familia"},null,8,["modelValue"])]),(0,n.Lk)("div",re,[(0,n.bF)(r,{label:"Fecha Inicio",modelValue:e.filter.fecini,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.filter.fecini=t}),type:"date",format:"DD/MM/YYYY",onInput:e.getSolicitudes},null,8,["modelValue","onInput"])]),(0,n.Lk)("div",le,[(0,n.bF)(r,{label:"Fecha Fin",modelValue:e.filter.fecfin,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.filter.fecfin=t}),type:"date",format:"DD/MM/YYYY",onInput:e.getSolicitudes},null,8,["modelValue","onInput"])]),(0,n.Lk)("div",se,[(0,n.bF)(l,{modelValue:e.filter.estado,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.filter.estado=t}),options:e.dsEstados,label:"Estado"},null,8,["modelValue","options"])]),(0,n.Lk)("div",null,[(0,n.bF)(a,{flat:"",icon:"broom",round:"",onClick:e.cleanFilters,color:"primary",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[9]||(t[9]=[(0,n.eW)("Restablecer",-1)]))}),_:1})]}),_:1},8,["onClick"])])])])):(0,n.Q3)("v-if",!0)])])]}),body:(0,n.k6)(function(i){return[(0,n.bF)(c,{props:i},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{key:"FAMCOD",props:i},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(i.row.FAMCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"FAMDES",props:i},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(i.row.FAMDES),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"FECHA_REG",props:i},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,b.v_)(e.date(i.row.FECHA_REG,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"FECHA_LIMITE",props:i},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,b.v_)(e.date(i.row.FECHA_LIMITE,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"ESTADO",props:i},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{state:i.row.ESTADO,"show-button":"",onShowHistory:function(t){return e.showHistorial(i.row.ID_BECA_SOLICITUD)}},null,8,["state","onShowHistory"])]}),_:2},1032,["props"]),(0,n.bF)(s,{key:"ACCIONES",props:i},{default:(0,n.k6)(function(){return[1!=i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:0,color:"primary",icon:"contenidos",flat:"",round:"",size:"sm",disable:i.row.ESTADO<4,onClick:function(t){return e.goDetalle(i.row.FAMCOD)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[10]||(t[10]=[(0,n.eW)("Detalle",-1)]))}),_:1})]}),_:1},8,["disable","onClick"])):(0,n.Q3)("v-if",!0),1!=i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:1,color:"primary",icon:"sync",flat:"",round:"",size:"sm",onClick:function(t){return e.syncDoc(i.row.ID_BECA_SOLICITUD)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[11]||(t[11]=[(0,n.eW)("Sincronizar Documentos",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),(0,n.bF)(a,{color:"secondary",icon:"family",flat:"",round:"",size:"sm",onClick:function(t){return e.exportar(i.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[12]||(t[12]=[(0,n.eW)("Datos Familia",-1)]))}),_:1})]}),_:1},8,["onClick"]),i.row.ALUNOSOL>0&&[2,9].indexOf(i.row.ESTADO)>=0?((0,n.uX)(),(0,n.Wv)(a,{key:2,color:"positive",icon:"add",flat:"",round:"",size:"sm",onClick:function(t){return e.addEstudiantes(i.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[13]||(t[13]=[(0,n.eW)("Agregar Alumno",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),1!=i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:3,color:"negative",icon:"delete",flat:"",round:"",size:"sm",onClick:function(t){return e.delSolicitud(i.row.ID_BECA_SOLICITUD)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[14]||(t[14]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),1==i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:4,color:"positive",icon:"verified",flat:"",round:"",size:"sm",onClick:function(t){return e.showEstudiantes(i.row)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[15]||(t[15]=[(0,n.eW)("Aprobar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0),1==i.row.ESTADO?((0,n.uX)(),(0,n.Wv)(a,{key:5,color:"negative",icon:"test_cancel",flat:"",round:"",size:"sm",onClick:function(t){return e.updateSolicitud(i.row.ID_BECA_SOLICITUD,3)},disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[16]||(t[16]=[(0,n.eW)("Rechazar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns","pagination"]),(0,n.bF)(f,{modelValue:e.showHistory,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.showHistory=t}),id:e.idSolicitud,onCerrar:t[7]||(t[7]=function(t){return e.idSolicitud=0})},null,8,["modelValue","id"]),(0,n.bF)(p,{modelValue:e.showStudens,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.showStudens=t}),famcod:e.famcod,periodo:e.periodo,agregaEstudiante:e.agregaEstudiante,onProcesar:e.approveSolicitud},null,8,["modelValue","famcod","periodo","agregaEstudiante","onProcesar"])])}o(30683),o(39866),o(10239),o(11777);var ce=o(63411),de=o(50425),fe={class:"col column q-pa-sm"};function pe(e,t){var o=(0,n.g2)("estado"),a=(0,n.g2)("q-td"),i=(0,n.g2)("q-tr"),r=(0,n.g2)("q-table"),l=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(l,{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.model=t}),title:"Historial",footer:!1,css:{minWidth:"40vw"},onShow:e.getHistorial,onClose:e.cerrar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",fe,[(0,n.bF)(r,{data:e.dsHistorial,columns:e.columns,style:{"max-height":"100%"}},{body:(0,n.k6)(function(t){return[(0,n.bF)(i,{props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"ESTADO_FECHA",props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{state:t.row.ESTADO_FECHA},null,8,["state"])]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"FECHA",props:t},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,b.v_)(e.date(t.row.FECHA,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"USUCOD",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(t.row.USUCOD),1)]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])])]}),_:1},8,["modelValue","onShow","onClose"])])}var me=o(30545),he={class:"row justify-center items-center"};function ve(e,t){var o=(0,n.g2)("q-chip"),a=(0,n.g2)("q-tooltip"),i=(0,n.g2)("q-btn");return(0,n.uX)(),(0,n.CE)("div",he,[(0,n.bF)(o,{color:"primary",size:"sm","text-color":"white"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(e.estadoDes),1)]}),_:1}),e.showButton?((0,n.uX)(),(0,n.Wv)(i,{key:0,icon:"view_history",color:"primary",flat:"",round:"",size:"sm",onClick:e.showHistory},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[0]||(t[0]=[(0,n.eW)("Historial",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,n.Q3)("v-if",!0)])}var be=o(66760),ge=1,ke=2,Ae=3,Ee=4,we=5,Ce=6,Oe=7,Ie=8,_e=9,Fe=10,De={emits:["showHistory"],props:{state:{type:Number,required:!0},showButton:{type:Boolean,default:!1}},components:{QChip:be.A,QBtn:N.A,QTooltip:P.A},methods:{showHistory:function(){this.$emit("showHistory")}},computed:{estadoDes:function(){var e;switch(this.state){case ge:e="Solicitado";break;case ke:e="Aceptado";break;case Ae:e="Rechazado";break;case Ee:e="Pagado";break;case we:e="Expediente Incompleto";break;case Ce:e="Expediente Completo";break;case Oe:e="Expediente Validado";break;case Ie:e="Resolución";break;case _e:e="Exonerado";break;case Fe:e="Estudiante Agregado";break}return e}}};const Se=(0,X.A)(De,[["render",ve]]);var ye=Se,Te={emits:["cerrar","update:modelValue","input"],props:{id:{type:Number,required:!0},modelValue:{type:Boolean,default:!1}},components:{QTable:me.A,QTr:m.qh,QTd:m.Ef,sieModal:j.A,estado:ye},data:function(){return{dsHistorial:[],columns:[{name:"ESTADO_FECHA",field:"ESTADO_FECHA",label:"ESTADO",align:"center"},{name:"FECHA",field:"FECHA",label:"FECHA",align:"center"},{name:"USUCOD",field:"USUCOD",label:"USUARIO",align:"center"}]}},methods:{date:x.Ay,getHistorial:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={id:e.id},t.p=1,t.n=2,e.$http.get("api/HyoBecaEstadoFecha/getHistorial",{params:o});case 2:n=t.v,a=n.json,e.dsHistorial=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},cerrar:function(){this.$emit("cerrar")}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const Me=(0,X.A)(Te,[["render",pe]]);var Ve=Me,Ue={class:"col q-pa-sm"},qe={class:"col column q-pa-sm"};function Ne(e,t){var o=(0,n.g2)("q-toggle"),a=(0,n.g2)("q-table"),i=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{modelValue:e.model,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.model=t}),title:"Estudiantes",css:{minWidth:"60vw"},ok:"Aprobar",onShow:e.getEstudiantes,onClose:e.cerrar,onSubmit:e.procesar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ue,[(0,n.bF)(o,{modelValue:e.form.exonerar,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.exonerar=t}),label:"Exonerar Pago","true-value":1,"false-value":0},null,8,["modelValue"])]),(0,n.Lk)("div",qe,[(0,n.bF)(a,{data:e.dsEstudiantes,columns:e.columns,selection:"multiple",selected:e.form.selected,"onUpdate:selected":t[1]||(t[1]=function(t){return e.form.selected=t}),"row-key":"ALUCOD",style:{"max-height":"100%"}},null,8,["data","columns","selected"])])]}),_:1},8,["modelValue","onShow","onClose","onSubmit"])])}var Pe={emits:["cerrar","procesar","update:modelValue","input"],props:{famcod:{type:String,required:!0},periodo:{type:Number,required:!1},modelValue:{type:Boolean,default:!1},agregaEstudiante:{type:Boolean,required:!1}},components:{QTable:me.A,QTr:m.qh,QTd:m.Ef,QToggle:m.c5,sieModal:j.A},data:function(){return{dsEstudiantes:[],form:{selected:[],exonerar:"0193"===(0,$["default"])().colcod?1:0},columns:[{name:"ALUCOD",field:"ALUCOD",label:"CÓDIGO",align:"center"},{name:"INSTRUCOD",field:"INSTRUCOD",label:"N",align:"center"},{name:"GRADOCOD",field:"GRADOCOD",label:"G",align:"center"},{name:"NOMCOMP",field:"NOMCOMP",label:"ESTUDIANTE",align:"left"}]}},methods:{getEstudiantes:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={parametros:{famcod:e.famcod,noFretd:!0,periodo:e.periodo,becaParticipa:"N"}},t.p=1,t.n=2,e.$http.get("api/HyoFamilias/obtHijos",{params:o});case 2:n=t.v,a=n.json,e.dsEstudiantes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},cerrar:function(){this.form.selected=[],this.$emit("cerrar")},procesar:function(){this.$emit("procesar",this.form)}},computed:{model:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}}};const Qe=(0,X.A)(Pe,[["render",Ne]]);var Re=Qe,Le=o(93616),He=o(36980),Be=o(16648),je=o(33001),xe=o(78131),$e={props:{periodo:{type:Number,required:!0}},components:{QCard:m.C$,QCardMain:m.d1,QTable:de.A,QTr:m.qh,QTd:m.Ef,QChip:m.wQ,Dialog:q.A,QDatetime:B.A,sieModal:j.A,notify:H["default"],estado:ye,historial:Ve,participantes:Re,sieSelect:Le.A,QInput:L.A,QSelect:Be.A,QBtn:N.A,QTooltip:P.A},data:function(){return{sie:(0,$["default"])(),pagination:{rowsPerPage:0},showBtnRegularizarDeuda:["0057","0274"].includes((0,$["default"])().colcod),acceso:(0,$["default"])().ruta.nivel>=2,showHistory:!1,showStudens:!1,showFilter:!1,famcod:"",agregaEstudiante:!1,idSolicitud:0,filter:{famcod:"",famdes:"",fecini:null,fecfin:null,estado:0},dsEstados:[{label:"Todos",value:0},{label:"Solicitado",value:1},{label:"Aceptado",value:2},{label:"Rechazado",value:3},{label:"Pago",value:4},{label:"Exonerado",value:9},{label:"Expediente Incompleto",value:5},{label:"Expediente Completo",value:6},{label:"Expediente Validado",value:7},{label:"Resolución",value:8}],dsSolicitudes:[],columns:[{name:"FAMCOD",field:"FAMCOD",label:"CÓDIGO",align:"center"},{name:"FAMDES",field:"FAMDES",label:"FAMILIA",align:"left"},{name:"FECHA_REG",field:"FECHA_REG",label:"FECHA INSCRIPCIÓN",align:"center"},{name:"ESTADO",field:"ESTADO",label:"ESTADO",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}]}},methods:{date:x.Ay,imprimir:function(e,t){window.open("".concat((0,$["default"])().origin,"/webservice/reporte-tesoreria/reporte-sol-beca?repcod=S02&anobec=").concat((0,$["default"])().ano))},exportar:function(e){window.open("".concat((0,$["default"])().origin,"/webservice/reporte-tesoreria/reporte-sol-beca?repcod=S01&id_solicitud=").concat(e.ID_BECA_SOLICITUD))},showHideFilters:function(){this.showFilter=!this.showFilter},showHistorial:function(e){this.showHistory=!0,this.idSolicitud=e},showEstudiantes:function(e){this.showStudens=!0,this.idSolicitud=e.ID_BECA_SOLICITUD,this.famcod=e.FAMCOD},addEstudiantes:function(e){this.showStudens=!0,this.idSolicitud=e.ID_BECA_SOLICITUD,this.famcod=e.FAMCOD,this.agregaEstudiante=!0},hideEstudiantes:function(){this.idSolicitud=0,this.famcod="",this.agregaEstudiante=!1},goDetalle:function(e){this.$router.push({name:"intranet.becas.dashboard.detalle",params:{famcod:e}})},cleanFilters:function(){this.filter={famcod:"",famdes:"",fecini:null,fecfin:null,estado:0},this.getSolicitudes()},getSolicitudes:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.periodo,fecini:e.filter.fecini,fecfin:e.filter.fecfin},t.p=1,t.n=2,e.$http.get("api/HyoBecaSolicitud/getSolicitudes",{params:o});case 2:n=t.v,a=n.json,e.dsSolicitudes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},approveSolicitud:function(e){var t=this;return T()(S()().m(function o(){var n,a;return S()().w(function(o){while(1)switch(o.n){case 0:n=e.selected,a=e.exonerar,n.length>0?(t.showStudens=!1,t.$q.dialog({title:t.agregaEstudiante?"¿Esta seguro de agregar al alumno?":"¿Esta seguro de aprobar la solicitud?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function e(){var o,i,r,l;return S()().w(function(e){while(1)switch(e.p=e.n){case 0:return o={id:t.idSolicitud,famcod:t.famcod,estudiantes:n,exonerar:a,agregaEstudiante:t.agregaEstudiante},e.p=1,e.n=2,t.$http.post("api/HyoBecaSolicitud/procesoAprobarSolicitud",o);case 2:i=e.v,r=i.json,"Ok"===r.status&&((0,H["default"])(r.message),t.getSolicitudes()),t.hideEstudiantes(),e.n=4;break;case 3:e.p=3,l=e.v,(0,H["default"])(l.error.message,"error");case 4:return e.a(2)}},e,null,[[1,3]])}))).onCancel(function(){})):(0,H["default"])("No hay estudiantes seleccionados","error");case 1:return o.a(2)}},o)}))()},updateSolicitud:function(e,t){var o=this;return T()(S()().m(function n(){var a;return S()().w(function(n){while(1)switch(n.n){case 0:a=2===t?"aprobar":"rechazar",o.$q.dialog({title:"¿Esta seguro de ".concat(a," la solicitud?"),ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function n(){var a,i,r,l;return S()().w(function(n){while(1)switch(n.p=n.n){case 0:return a={id:e,estado:t},n.p=1,n.n=2,o.$http.post("api/HyoBecaSolicitud/procesoUpdateEstado",a);case 2:i=n.v,r=i.json,"Ok"===r.status&&((0,H["default"])(r.message),o.getSolicitudes()),n.n=4;break;case 3:n.p=3,l=n.v,(0,H["default"])(l.error.message,"error");case 4:return n.a(2)}},n,null,[[1,3]])})));case 1:return n.a(2)}},n)}))()},delSolicitud:function(e){var t=this;return T()(S()().m(function o(){var n;return S()().w(function(o){while(1)switch(o.n){case 0:n={id:e,flag:0},t.$q.dialog({title:"¿Esta seguro de eliminar la solicitud?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function e(){var o,a,i,r,l,s;return S()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.$http.delete("api/HyoBecaSolicitud/procesoEliminarSolicitud",{params:n});case 1:o=e.v,a=o.json,"Ok"===a.status&&((0,H["default"])(a.message),t.getSolicitudes()),e.n=3;break;case 2:e.p=2,s=e.v,i=s.error.message.split("::"),r=i[0],l=i[1],"0001"===r&&(0,H["default"])(l,"error"),"0002"===r&&t.$q.dialog({title:"Hay deudas generadas ¿Desea continuar con la eliminación de la solicitud?",message:"".concat(l),ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function e(){var o,a,i;return S()().w(function(e){while(1)switch(e.p=e.n){case 0:return n["flag"]=1,e.p=1,e.n=2,t.$http.delete("api/HyoBecaSolicitud/procesoEliminarSolicitud",{params:n});case 2:o=e.v,a=o.json,"Ok"===a.status&&((0,H["default"])(a.message),t.getSolicitudes()),e.n=4;break;case 3:e.p=3,i=e.v,(0,H["default"])(i.error.message,"error");case 4:return e.a(2)}},e,null,[[1,3]])}))).onCancel(function(){});case 3:return e.a(2)}},e,null,[[0,2]])}))).onCancel(function(){});case 1:return o.a(2)}},o)}))()},syncEstados:function(){var e=this;return T()(S()().m(function t(){return S()().w(function(t){while(1)switch(t.n){case 0:e.$q.dialog({title:"¿Esta seguro de ejecutar el proceso?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function t(){var o,n,a,i;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,o={periodo:e.perActivo},t.n=1,e.$http.post("api/HyoBecaSolicitud/updateEstadosSol",o);case 1:n=t.v,a=n.json,"Ok"===a.status&&((0,H["default"])(a.message),e.getSolicitudes()),t.n=3;break;case 2:t.p=2,i=t.v,(0,H["default"])(i.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))).onCancel(function(){});case 1:return t.a(2)}},t)}))()},syncDeudas:function(){var e=this;return T()(S()().m(function t(){return S()().w(function(t){while(1)switch(t.n){case 0:e.$q.dialog({title:"¿Esta seguro de ejecutar el proceso?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaSolicitud/procesoSincronizarDeudas");case 1:o=t.v,n=o.json,"Ok"===n.status&&(0,H["default"])(n.message),t.n=3;break;case 2:t.p=2,a=t.v,(0,H["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))).onCancel(function(){});case 1:return t.a(2)}},t)}))()},syncDoc:function(e){var t=this;return T()(S()().m(function o(){var n;return S()().w(function(o){while(1)switch(o.n){case 0:n={id:e},t.$q.dialog({title:"¿Esta seguro de ejecutar el proceso?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function e(){var o,a,i;return S()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.$http.post("api/HyoBecaSolicitud/procesoSincronizarDocs",n);case 1:o=e.v,a=o.json,"Ok"===a.status&&(0,H["default"])(a.message),e.n=3;break;case 2:e.p=2,i=e.v,(0,H["default"])(i.error.message,"error");case 3:return e.a(2)}},e,null,[[0,2]])}))).onCancel(function(){});case 1:return o.a(2)}},o)}))()},descargarDocumentos:function(){var e=this;return T()(S()().m(function t(){var o,n,a,i,r,l,s,u,c,d;return S()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/HyoBecaDocumento/getDocumentosAlu",{params:{periodo:e.perActivo}});case 1:for(o=t.v,n=o.json,a=n,i=e.$q.dialog({title:"Descargando archivos...",message:"0%",progress:{spinner:ce.A,color:"primary"},persistent:!0,ok:!1}),r=[],l=0;l<a.length;l++)if(s=a[l],2!==s.APROBADO)for(u=s.ARCHIVOS.split("||"),c=s.NOMBRE,d=0;d<u.length;d++)r.push({url:"".concat(e.sie.api,"/HyoBecaExpediente/archivo/").concat(s.ID_BECA_EXPEDIENTE,"/").concat(d+1,"?sie-token=").concat(e.sie.token),filename:c[d],famdes:s.FAMDES});return t.n=2,(0,xe.generateZipFromApis)({files:r,method:"get",groupBy:"famdes",zipName:"documentos",onProgress:function(e,t){i.update({message:"Descargando ".concat(t," (").concat(e,"%)")})}});case 2:i.update({title:"Completado",message:"Descarga completada correctamente",progress:!1,ok:!0});case 3:return t.a(2)}},t)}))()}},computed:r()(r()({},(0,He.aH)("beca",["perActivo"])),{},{objActual:function(){var e=this.dsSolicitudes;return""!==this.filter.famcod&&(e=(0,je.filterArray)(this.filter.famcod,{field:"FAMCOD",list:e})),""!==this.filter.famdes&&(e=(0,je.filterArray)(this.filter.famdes,{field:"FAMDES",list:e})),0!==this.filter.estado&&(e=(0,je.filterArray)(this.filter.estado,{field:"ESTADO",list:e})),e},iconFilter:function(){return this.showFilter?"filter_remove":"filter_search"},textTooltipFilter:function(){return this.showFilter?"Ocultar filtros":"Mostrar filtros"}}),mounted:function(){this.getSolicitudes()}};const We=(0,X.A)($e,[["render",ue]]);var Xe=We;function ze(e,t){var o=(0,n.g2)("q-tab"),a=(0,n.g2)("requisitos"),i=(0,n.g2)("q-tab-pane"),r=(0,n.g2)("mensajes"),l=(0,n.g2)("documentos"),s=(0,n.g2)("ficha"),u=(0,n.g2)("exoneraciones"),c=(0,n.g2)("q-tabs");return(0,n.uX)(),(0,n.Wv)(c,{class:"q-tabs-flex",inverted:"",animated:""},{title:(0,n.k6)(function(){return[(0,n.bF)(o,{name:"requisitos",label:"Requisitos"}),(0,n.bF)(o,{name:"mensajes",label:"Mensajes",default:""}),(0,n.bF)(o,{name:"documentos",label:"Documentos"}),(0,n.bF)(o,{name:"ficha",label:"Ficha Económica"}),e.isVcSp?((0,n.uX)(),(0,n.Wv)(o,{key:0,name:"exoneraciones",label:"Exoneraciones"})):(0,n.Q3)("v-if",!0)]}),default:(0,n.k6)(function(){return[(0,n.bF)(i,{name:"requisitos"},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(i,{name:"mensajes"},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(i,{name:"documentos"},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(i,{name:"ficha"},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{acceso:e.acceso},null,8,["acceso"])]}),_:1}),(0,n.bF)(i,{name:"exoneraciones"},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{acceso:e.acceso},null,8,["acceso"])]}),_:1})]}),_:1})}var Ye={class:"intranet--becas--dashboard--configuracion--mensajes"},Ge={class:"row q-col-gutter-sm"},Je={key:0,class:"col-12"},Ke={class:"row items-center justify-end"},Ze={class:"row q-col-gutter-sm"},et={class:"col-12"},tt={class:"row q-gutter-xs justify-end"},ot={class:"col-12"},nt=["innerHTML"],at={class:"q-pa-md"},it={class:"row q-col-gutter-sm"},rt={class:"col-sm-3 col-xs-6"},lt={class:"col-sm-3 col-xs-6"},st={class:"col-sm-3 col-xs-6"},ut={class:"col-sm-3 col-xs-6"},ct={key:0,class:"col-12"},dt={class:"row items-center"},ft={class:"col"},pt={class:"col-12"};function mt(e,t){var o=(0,n.g2)("q-btn"),a=(0,n.g2)("q-tooltip"),i=(0,n.g2)("q-card-section"),r=(0,n.g2)("q-card"),l=(0,n.g2)("q-select"),s=(0,n.g2)("q-chip"),u=(0,n.g2)("sie-editor"),c=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",Ye,[(0,n.Lk)("div",Ge,[e.acceso?((0,n.uX)(),(0,n.CE)("div",Je,[(0,n.Lk)("div",Ke,[(0,n.bF)(o,{icon:"add",label:"Nuevo mensaje",color:"primary",size:"sm",onClick:t[0]||(t[0]=function(t){return e.showNewMen=!0})})])])):(0,n.Q3)("v-if",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.dsMensajes,function(l){return(0,n.uX)(),(0,n.CE)("div",{key:l.ID_BECA_MENSAJE,class:"col-12"},[(0,n.bF)(r,{dense:"",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(i,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ze,[(0,n.Lk)("div",et,[(0,n.Lk)("div",tt,[(0,n.bF)(o,{flat:"",icon:"edit",color:"secondary",onClick:function(t){return e.showEditModal(l)},disable:!e.acceso,round:"",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[11]||(t[11]=[(0,n.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"]),(0,n.bF)(o,{flat:"",icon:"delete",color:"negative",onClick:function(t){return e.delMensaje(l.ID_BECA_MENSAJE)},disable:!e.acceso,round:"",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[12]||(t[12]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])])]),(0,n.Lk)("div",ot,[(0,n.Lk)("div",{innerHTML:l.TEXTO},null,8,nt)])])]}),_:2},1024)]}),_:2},1024)])}),128))]),(0,n.bF)(c,{class:"intranet--becas--dashboard--configuracion--mensajes--modal",title:e.titleModal,modelValue:e.showNewMen,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.showNewMen=t}),onSubmit:e.grabar,onClose:e.hideModal,onShow:e.showModal,ok:"Guardar"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",at,[(0,n.Lk)("div",it,[(0,n.Lk)("div",rt,[(0,n.bF)(l,{modelValue:e.form.TIPO_MENSAJE,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.TIPO_MENSAJE=t}),options:e.dsTipo,label:"Tipo mensaje"},null,8,["modelValue","options"])]),(0,n.Lk)("div",lt,[(0,n.bF)(l,{modelValue:e.form.ID_BECA_REQUISITO,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.ID_BECA_REQUISITO=t}),options:e.dsRequisitos,label:"Requisito","option-value":"ID_BECA_REQUISITO","option-label":"REQUISITO"},null,8,["modelValue","options"])]),(0,n.Lk)("div",st,[(0,n.bF)(l,{modelValue:e.form.PAGINA,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.PAGINA=t}),options:e.dsPasos,label:"Página"},null,8,["modelValue","options"])]),(0,n.Lk)("div",ut,[(0,n.bF)(l,{modelValue:e.form.ESTADO_BECA,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.ESTADO_BECA=t}),options:e.dsEstados,label:"Estado"},null,8,["modelValue","options"])]),8===e.form.ESTADO_BECA?((0,n.uX)(),(0,n.CE)("div",ct,[(0,n.Lk)("div",dt,[t[13]||(t[13]=(0,n.Lk)("div",null,"Etiquetas:",-1)),(0,n.Lk)("div",ft,[(0,n.bF)(s,{label:"{alumno}",size:"sm",color:"primary","icon-right":"content_copy","text-color":"white",clickable:"",onClick:t[5]||(t[5]=function(t){return e.copyToClipboard("{alumno}")})}),(0,n.bF)(s,{label:"{beca}",size:"sm",color:"primary","icon-right":"content_copy","text-color":"white",clickable:"",onClick:t[6]||(t[6]=function(t){return e.copyToClipboard("{beca}")})}),(0,n.bF)(s,{label:"{mesinicio}",size:"sm",color:"primary","icon-right":"content_copy","text-color":"white",clickable:"",onClick:t[7]||(t[7]=function(t){return e.copyToClipboard("{mesinicio}")})}),(0,n.bF)(s,{label:"{mesfin}",size:"sm",color:"primary","icon-right":"content_copy","text-color":"white",clickable:"",onClick:t[8]||(t[8]=function(t){return e.copyToClipboard("{mesfin}")})})])])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",pt,[(0,n.bF)(u,{modelValue:e.form.TEXTO,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.TEXTO=t}),label:"Mensaje"},null,8,["modelValue"])])])])]}),_:1},8,["title","modelValue","onSubmit","onClose","onShow"])])}var ht=o(78652),vt=o(6083),bt={props:{acceso:{type:Boolean,required:!0}},components:{QCard:l.A,QCardSection:s.A,QBtn:N.A,QTooltip:P.A,QChip:be.A,QSelect:Be.A,sieModal:j.A,notify:H["default"],sieEditor:vt.A},data:function(){return{showNewMen:!1,isEdit:!1,idBecaMensaje:null,titleModal:"Nuevo mensaje",form:{ID_BECA_PERIODO:null,ID_BECA_REQUISITO:null,TIPO_MENSAJE:null,PAGINA:null,ESTADO_BECA:null,TEXTO:""},dsEstados:[{label:"Ninguno",value:-1},{label:"Bienvenida",value:0},{label:"Solicitado",value:1},{label:"Aceptado",value:2},{label:"Rechazado",value:3},{label:"Pago",value:4},{label:"Expediente Incompleto",value:5},{label:"Expediente Completo",value:6},{label:"Expediente Validado",value:7},{label:"Resolución",value:8}],dsPasos:[{label:"Presentación",value:1},{label:"Participantes",value:2},{label:"Expediente",value:3},{label:"Ficha",value:4},{label:"Encuesta",value:6},{label:"Resolución",value:7}],dsTipo:[{label:"Exitoso",value:1},{label:"Error",value:2},{label:"Advertencia",value:3},{label:"Aviso",value:4},{label:"Texto",value:5}],dsRequisitos:[],dsMensajes:[],columns:[{name:"TEXTO",field:"TEXTO",label:"MENSAJE",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}]}},methods:{init:function(){this.getMensajes(),this.getRequisitos()},showModal:function(){this.form["ID_BECA_PERIODO"]=this.perActivo},showEditModal:function(e){this.isEdit=!0,this.showNewMen=!0,this.titleModal="Editar mensaje",this.form.TEXTO=e.TEXTO,this.form.ID_BECA_REQUISITO=e.ID_BECA_REQUISITO,this.form.TIPO_MENSAJE=e.TIPO_MENSAJE,this.form.PAGINA=e.PAGINA,this.form.ESTADO_BECA=e.ESTADO_BECA,this.idBecaMensaje=e.ID_BECA_MENSAJE},hideModal:function(){this.isEdit=!1,this.idBecaMensaje=!1,this.titleModal="Nuevo mensaje",this.form={ID_BECA_PERIODO:this.perActivo,TIPO_MENSAJE:null,ID_BECA_REQUISITO:null,PAGINA:null,ESTADO_BECA:null,TEXTO:""}},grabar:function(){this.isEdit?this.editMensaje():this.saveMensaje()},getRequisitos:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaRequisito/getRequisitos",{params:o});case 2:n=t.v,a=n.json,e.dsRequisitos=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},getMensajes:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaMensaje/getMensajes",{params:o});case 2:n=t.v,a=n.json,e.dsMensajes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},saveMensaje:function(){var e=this;return T()(S()().m(function t(){var o,n,a,i;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={data:e.form},t.p=1,t.n=2,e.$http.post("api/HyoBecaMensaje/saveMensaje",o);case 2:n=t.v,a=n.json,"Ok"===a.status&&((0,H["default"])(a.message),e.getMensajes(),e.showNewMen=!1),t.n=4;break;case 3:t.p=3,i=t.v,(0,H["default"])(i.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()},editMensaje:function(){var e=this;return T()(S()().m(function t(){var o,n,a,i;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={id:e.idBecaMensaje,data:e.form},t.p=1,t.n=2,e.$http.put("api/HyoBecaMensaje/updateMensaje",o);case 2:n=t.v,a=n.json,"Ok"===a.status&&((0,H["default"])(a.message),e.getMensajes(),e.showNewMen=!1),t.n=4;break;case 3:t.p=3,i=t.v,(0,H["default"])(i.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()},delMensaje:function(e){var t=this;return T()(S()().m(function o(){return S()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/hyoBecaMensaje/deleteMensaje",{params:n});case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getMensajes()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()},copyToClipboard:function(e){var t=this;(0,ht.A)(e).then(function(){t.$q.notify({position:"top",message:"Copiado al portapapeles",actions:[{icon:"close",color:"white",round:!0,size:"sm",handler:function(){}}]})})}},computed:r()({},(0,He.aH)("beca",["perActivo"])),mounted:function(){this.init()}};const gt=(0,X.A)(bt,[["render",mt]]);var kt=gt,At={class:"intranet-becas--dashboard--configuracion--documentos"},Et={class:"col-12"},wt={class:"row items-center justify-end q-gutter-sm"},Ct={class:"q-pa-md"},Ot={class:"row q-col-gutter-sm"},It={class:"col-12"},_t={class:"col-12"},Ft={class:"col-12"},Dt={key:0,class:"col-12"};function St(e,t){var o=(0,n.g2)("q-btn"),a=(0,n.g2)("q-input"),i=(0,n.g2)("q-popup-edit"),r=(0,n.g2)("q-td"),l=(0,n.g2)("q-tooltip"),s=(0,n.g2)("q-tr"),u=(0,n.g2)("q-table"),c=(0,n.g2)("q-toggle"),d=(0,n.g2)("sie-upload"),f=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",At,[(0,n.bF)(u,{class:"htable",rows:e.dsDocs,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":t[1]||(t[1]=function(t){return e.pagination=t}),"row-per-page-options":[0],dense:"",flat:"",bordered:"","wrap-cells":""},(0,n.eX)({body:(0,n.k6)(function(u){return[(0,n.bF)(s,{props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{key:"DOCUMENTO",props:u},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(u.row.DOCUMENTO),1),e.acceso?((0,n.uX)(),(0,n.Wv)(i,{key:0,modelValue:u.row.DOCUMENTO,"onUpdate:modelValue":[function(e){return u.row.DOCUMENTO=e},function(t){return e.updateDoc(u.row)}],modelModifiers:{number:!0},buttons:""},{default:(0,n.k6)(function(e){return[(0,n.bF)(a,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]}),_:1},8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"REQUISITO",props:u},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(u.row.REQUISITO),1),e.acceso?((0,n.uX)(),(0,n.Wv)(i,{key:0,modelValue:u.row.REQUISITO,"onUpdate:modelValue":[function(e){return u.row.REQUISITO=e},function(t){return e.updateDoc(u.row)}],modelModifiers:{number:!0},buttons:""},{default:(0,n.k6)(function(e){return[(0,n.bF)(a,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]}),_:1},8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"ACCIONES",props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{flat:"",color:"negative",icon:"delete",onClick:function(t){return e.deleteDoc(u.row.ID_BECA_DOCUMENTO)},disable:!e.acceso,round:"",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[6]||(t[6]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:2},[e.acceso?{name:"top",fn:(0,n.k6)(function(a){return[(0,n.Lk)("div",Et,[(0,n.Lk)("div",wt,[(0,n.bF)(o,{icon:"add",label:"Nuevo documento",color:"primary",onClick:t[0]||(t[0]=function(t){return e.showNewDoc=!0}),size:"sm",unelevated:""})])])]}),key:"0"}:void 0]),1032,["rows","columns","pagination"]),(0,n.bF)(f,{modelValue:e.showNewDoc,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.showNewDoc=t}),title:"Nuevo documento",ok:"Guardar",css:{minWidth:"60vw"},onSubmit:e.saveDoc,onShow:e.showModal,onClose:e.hideModalDoc},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Ct,[(0,n.Lk)("div",Ot,[(0,n.Lk)("div",It,[(0,n.bF)(a,{label:"Nombre documento",modelValue:e.form.DOCUMENTO,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.DOCUMENTO=t})},null,8,["modelValue"])]),(0,n.Lk)("div",_t,[(0,n.bF)(a,{type:"textarea",rows:5,"max-height":80,label:"Instrucciones",modelValue:e.form.REQUISITO,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.REQUISITO=t})},null,8,["modelValue"])]),(0,n.Lk)("div",Ft,[(0,n.bF)(c,{modelValue:e.form.DOC_GRUPAL,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.DOC_GRUPAL=t}),label:"Por alumno","left-label":"","true-value":2,"false-value":1},null,8,["modelValue"])]),2===e.form.TIPO_DOCUMENTO?((0,n.uX)(),(0,n.CE)("div",Dt,[(0,n.bF)(d,{onUpload:e.uploadEscudo,name:!0,title:"Clic para subir un documento"},null,8,["onUpload"])])):(0,n.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","onSubmit","onShow","onClose"])])}o(56285);var yt=o(59089),Tt=o(33950),Mt={props:{acceso:{type:Boolean,required:!0}},components:{QTable:M.A,QTr:V.A,QTd:U.A,QPopupEdit:R.A,QToggle:Q.A,Dialog:q.A,sieModal:j.A,sieUpload:yt.A,Upload:Tt["default"],QInput:L.A,QBtn:N.A,QTooltip:P.A},data:function(){return{showNewDoc:!1,form:{ID_BECA_PERIODO:null,DOCUMENTO:"",REQUISITO:"",TIPO_DOCUMENTO:1,DOC_GRUPAL:1,docs:[]},dsDocs:[],columns:[{name:"DOCUMENTO",field:"DOCUMENTO",label:"NOMBRE",align:"left"},{name:"REQUISITO",field:"REQUISITO",label:"INSTRUCCIONES",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],pagination:{rowsPerPage:0}}},methods:{showModal:function(){this.form["ID_BECA_PERIODO"]=this.perActivo},hideModalDoc:function(){this.form={ID_BECA_PERIODO:this.perActivo,DOCUMENTO:"",REQUISITO:"",TIPO_DOCUMENTO:1,DOC_GRUPAL:1,docs:[]}},upload:function(e){var t=this;return T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n=e[0],a=n.name,o.p=1,o.n=2,(0,Tt["default"])({file:n});case 2:i=o.v,r=i.temp,t.form.docs.push({name:a,temp:r}),o.n=4;break;case 3:o.p=3,o.v;case 4:return o.a(2)}},o,null,[[1,3]])}))()},getDocs:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaDocumento/getDocumentos",{params:o});case 2:n=t.v,a=n.json,e.dsDocs=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},saveDoc:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaDocumento/saveDocumento",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&((0,H["default"])(n.message),e.showNewDoc=!1,e.getDocs()),t.n=3;break;case 2:t.p=2,a=t.v,(0,H["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},updateDoc:function(e){var t=this;return T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_BECA_DOCUMENTO,data:e},o.p=1,o.n=2,t.$http.put("api/HyoBecaDocumento/updateDoc",n);case 2:a=o.v,i=a.json,"Ok"===i.status&&(0,H["default"])(i.message),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deleteDoc:function(e){var t=this;return T()(S()().m(function o(){return S()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaDocumento/deleteDoc",{params:n});case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getDocs()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()}},computed:r()({},(0,He.aH)("beca",["perActivo"])),mounted:function(){this.getDocs()}};const Vt=(0,X.A)(Mt,[["render",St]]);var Ut=Vt,qt=o(29104),Nt={class:"intranet-becas--dashboard--configuracion--requisitos"},Pt={class:"col-12"},Qt={class:"row items-center justify-end q-gutter-sm"},Rt={class:"q-pa-md"},Lt={class:"row"},Ht={class:"col-12"};function Bt(e,t){var o=(0,n.g2)("q-btn"),a=(0,n.g2)("q-input"),i=(0,n.g2)("q-popup-edit"),r=(0,n.g2)("q-td"),l=(0,n.g2)("q-tooltip"),s=(0,n.g2)("q-tr"),u=(0,n.g2)("q-table"),c=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",Nt,[(0,n.bF)(u,{class:"htable",rows:e.dsRequisitos,columns:e.columns,dense:"",flat:"",bordered:""},(0,n.eX)({body:(0,n.k6)(function(u){return[(0,n.bF)(s,{props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{key:"REQUISITO",props:u},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(u.row.REQUISITO),1),e.acceso?((0,n.uX)(),(0,n.Wv)(i,{key:0,buttons:"",modelValue:u.row.REQUISITO,"onUpdate:modelValue":[function(e){return u.row.REQUISITO=e},function(t){return e.updateRequisito(u.row)}]},{default:(0,n.k6)(function(e){return[(0,n.bF)(a,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},onKeyup:(0,qt.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]}),_:1},8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"ACCIONES",props:u},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{color:"negative",icon:"delete",onClick:function(t){return e.deleteRequisito(u.row.ID_BECA_REQUISITO)},flat:"",size:"sm",round:"",disable:!e.acceso},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[3]||(t[3]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:2},[e.acceso?{name:"top",fn:(0,n.k6)(function(a){return[(0,n.Lk)("div",Pt,[(0,n.Lk)("div",Qt,[(0,n.bF)(o,{icon:"add",label:"Nuevo requisito",color:"primary",onClick:t[0]||(t[0]=function(t){return e.showModal=!0}),size:"sm",unelevated:""})])])]}),key:"0"}:void 0]),1032,["rows","columns"]),(0,n.bF)(c,{modelValue:e.showModal,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.showModal=t}),title:"Nuevo requisito",ok:"Guardar",onSubmit:e.saveRequisito,onShow:e.openModal,onClose:e.hideModal},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Rt,[(0,n.Lk)("div",Lt,[(0,n.Lk)("div",Ht,[(0,n.bF)(a,{label:"Requisito",modelValue:e.form.REQUISITO,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.REQUISITO=t})},null,8,["modelValue"])])])])]}),_:1},8,["modelValue","onSubmit","onShow","onClose"])])}var jt={props:{acceso:{type:Boolean,required:!0}},components:{QTable:M.A,QTr:V.A,QTd:U.A,QPopupEdit:R.A,QBtn:N.A,QTooltip:P.A,QPageSticky:m._U,Dialog:q.A,sieModal:j.A,notify:H["default"],QInput:L.A},data:function(){return{columns:[{name:"REQUISITO",field:"REQUISITO",label:"REQUISITO",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],dsRequisitos:[],form:{ID_BECA_PERIODO:null,REQUISITO:""},showModal:!1}},methods:{hideModal:function(){this.form={ID_BECA_PERIODO:this.perActivo,REQUISITO:""}},openModal:function(){this.form["ID_BECA_PERIODO"]=this.perActivo},getRequisitos:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.perActivo},t.p=1,t.n=2,e.$http.get("api/HyoBecaRequisito/getRequisitos",{params:o});case 2:n=t.v,a=n.json,e.dsRequisitos=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},saveRequisito:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaRequisito/saveRequisito",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&((0,H["default"])(n.message),e.getRequisitos(),e.showModal=!1),t.n=3;break;case 2:t.p=2,a=t.v,(0,H["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},updateRequisito:function(e){var t=this;return T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_BECA_REQUISITO,data:e},o.p=1,o.n=2,t.$http.put("api/HyoBecaRequisito/updateRequisito",n);case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getRequisitos()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deleteRequisito:function(e){var t=this;return T()(S()().m(function o(){return S()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaRequisito/deleteRequisito",{params:n});case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getRequisitos()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})));case 1:return o.a(2)}},o)}))()}},computed:r()({},(0,He.aH)("beca",["perActivo"])),mounted:function(){this.getRequisitos()}};const xt=(0,X.A)(jt,[["render",Bt]]);var $t=xt,Wt={class:"intranet--beca--dashboard--configuracion--fichatecnica"},Xt={class:"col-12"},zt={class:"row q-col-gutter-sm"},Yt={class:"col-12"},Gt={class:"row items-center"},Jt={class:"col row justify-end q-gutter-sm row"},Kt={class:"q-pa-md"},Zt={class:"row q-col-gutter-sm"},eo={class:"col-12"},to={class:"col-12"};function oo(e,t){var o=(0,n.g2)("q-toggle"),a=(0,n.g2)("q-btn"),i=(0,n.g2)("q-input"),r=(0,n.g2)("q-popup-edit"),l=(0,n.g2)("q-td"),s=(0,n.g2)("q-chip"),u=(0,n.g2)("q-tooltip"),c=(0,n.g2)("q-tr"),d=(0,n.g2)("q-table"),f=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)("div",Wt,[(0,n.bF)(d,{class:"htable",rows:e.objActual,columns:e.columns,dense:"",flat:"",bordered:""},{top:(0,n.k6)(function(i){return[(0,n.Lk)("div",Xt,[(0,n.Lk)("div",zt,[(0,n.Lk)("div",Yt,[(0,n.Lk)("div",Gt,[(0,n.bF)(o,{modelValue:e.filter.TIPO_MOV,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.TIPO_MOV=t}),label:"Tipo Movimiento","left-label":"","true-value":1,"false-value":2,"checked-icon":"arrow_right","unchecked-icon":"arrow_left",dense:"",color:"primary"},null,8,["modelValue"]),(0,n.Lk)("div",Jt,[(0,n.bF)(a,{icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getItems,flat:""},null,8,["onClick"]),e.acceso?((0,n.uX)(),(0,n.Wv)(a,{key:0,icon:"add",label:"Nuevo item",color:"primary",size:"sm",onClick:t[1]||(t[1]=function(t){return e.showNewItem=!0})})):(0,n.Q3)("v-if",!0)])])])])])]}),body:(0,n.k6)(function(o){return[(0,n.bF)(c,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(l,{key:"DESCRIPCION",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(o.row.DESCRIPCION),1),e.acceso?((0,n.uX)(),(0,n.Wv)(r,{key:0,modelValue:o.row.DESCRIPCION,"onUpdate:modelValue":[function(e){return o.row.DESCRIPCION=e},function(t){return e.updateItem(o.row)}],buttons:""},{default:(0,n.k6)(function(e){return[(0,n.bF)(i,{modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t}},null,8,["modelValue","onUpdate:modelValue"])]}),_:1},8,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("v-if",!0)]}),_:2},1032,["props"]),(0,n.bF)(l,{key:"TIPO_MOV",props:o},{default:(0,n.k6)(function(){return[1===o.row.TIPO_MOV?((0,n.uX)(),(0,n.Wv)(s,{key:0,size:"sm",label:"Ingresos",icon:"arrow_right",color:"positive","text-color":"white"})):((0,n.uX)(),(0,n.Wv)(s,{key:1,size:"sm",label:"Egresos",icon:"arrow_left",color:"orange","text-color":"white"}))]}),_:2},1032,["props"]),(0,n.bF)(l,{key:"ACCIONES",props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{flat:"",color:"negative",icon:"delete",onClick:function(t){return e.deleteItem(o.row.ID_FICHA_PRESUPUESTO_MOV)},disable:!e.acceso,round:"",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(u,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[5]||(t[5]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick","disable"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["rows","columns"]),(0,n.bF)(f,{modelValue:e.showNewItem,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.showNewItem=t}),title:"Nuevo item",ok:"Guardar",css:{minWidth:"40vw"},onSubmit:e.saveItem,onClose:e.hideModal},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Kt,[(0,n.Lk)("div",Zt,[(0,n.Lk)("div",eo,[(0,n.bF)(i,{label:"Descripción",modelValue:e.form.DESCRIPCION,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.DESCRIPCION=t})},null,8,["modelValue"])]),(0,n.Lk)("div",to,[(0,n.bF)(o,{modelValue:e.form.TIPO_MOV,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.TIPO_MOV=t}),label:"Tipo de Movimiento","left-label":"","true-value":1,"false-value":2,color:"primary"},null,8,["modelValue"])])])])]}),_:1},8,["modelValue","onSubmit","onClose"])])}var no=o(50492),ao={props:{acceso:{type:Boolean,required:!0}},components:{QTable:M.A,QTr:V.A,QTd:U.A,QToggle:Q.A,QPopupEdit:R.A,QBtn:N.A,QIcon:no.A,QTooltip:P.A,QChip:be.A,Dialog:q.A,sieModal:j.A,QInput:L.A},data:function(){return{showNewItem:!1,items:[],filter:{TIPO_MOV:1},form:{DESCRIPCION:"",TIPO_MOV:1},columns:[{name:"DESCRIPCION",field:"DESCRIPCION",label:"DESCRIPCIÓN",align:"left"},{name:"TIPO_MOV",field:"TIPO_MOV",label:"MOVIMIENTO",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}]}},methods:{init:function(){this.getItems()},showModal:function(){},hideModal:function(){this.form={DESCRIPCION:"",TIPO_MOV:1}},getItems:function(){var e=this;return T()(S()().m(function t(){var o,n;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.get("api/HyoFichaEconomica/getItems");case 1:o=t.v,n=o.json,e.items=n,t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))()},saveItem:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoFichaEconomica/saveItem",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&((0,H["default"])(n.message),e.showNewItem=!1,e.getItems()),t.n=3;break;case 2:t.p=2,a=t.v,(0,H["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},updateItem:function(e){var t=this;return T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return delete e["__index"],n={id:e.ID_FICHA_PRESUPUESTO_MOV,data:e},o.p=1,o.n=2,t.$http.put("api/HyoFichaEconomica/updateItem",n);case 2:a=o.v,i=a.json,"Ok"===i.status&&(0,H["default"])(i.message),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))()},deleteItem:function(e){var t=this;return T()(S()().m(function o(){return S()().w(function(o){while(1)switch(o.n){case 0:t.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoFichaEconomica/deleteItem",{params:n});case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getItems()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])}))).onCancel(function(){});case 1:return o.a(2)}},o)}))()}},computed:{objActual:function(){var e=this.items;return""!==this.filter.TIPO_MOV&&(e=(0,je.filterArray)(this.filter.TIPO_MOV,{field:"TIPO_MOV",list:e})),e}},mounted:function(){this.init()}};const io=(0,X.A)(ao,[["render",oo]]);var ro=io,lo=(o(74260),o(32203),{class:"q-pa-md"}),so={class:"row"},uo={class:"col-12"},co={class:"row"},fo={class:"col-12"},po={class:"row"},mo={class:"col-6"},ho={class:"col-6"},vo={class:"text-weight-bold"};function bo(e,t){var o=(0,n.g2)("header-btn"),a=(0,n.g2)("q-td"),i=(0,n.g2)("q-tooltip"),r=(0,n.g2)("q-btn"),l=(0,n.g2)("q-tr"),s=(0,n.g2)("q-table"),u=(0,n.g2)("q-card"),c=(0,n.g2)("sie-select"),d=(0,n.g2)("q-search"),f=(0,n.g2)("q-spinner-oval"),p=(0,n.g2)("q-inner-loading"),m=(0,n.g2)("q-checkbox"),h=(0,n.g2)("q-item-main"),g=(0,n.g2)("q-item"),k=(0,n.g2)("q-item-side"),A=(0,n.g2)("virtual-list"),E=(0,n.g2)("q-list"),w=(0,n.g2)("sie-modal"),C=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(C,{class:"q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(u,{class:"q-card-mobile"},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{class:"col",data:e.dataFamilias,columns:e.columns,"row-key":"__index"},{body:(0,n.k6)(function(o){return[(0,n.bF)(l,{props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(a,{key:"USUNOM",props:o},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(o.row.USUNOM),1)]}),_:2},1032,["props"]),(0,n.bF)(a,{key:"ACCIONES",props:o},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{flat:"",color:"negative",icon:"delete",onClick:function(t){return e.deleteExonerado(o.row.ID_BECA_EXONERADO)}},{default:(0,n.k6)(function(){return[(0,n.bF)(i,{anchor:"bottom middle",self:"top middle"},{default:(0,n.k6)(function(){return v()(t[7]||(t[7]=[(0,n.eW)("Eliminar",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["data","columns"])]}),_:1}),(0,n.bF)(w,{class:"modal-destinatarios",modelValue:e.openModalExonerado,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.openModalExonerado=t}),title:"Seleccionar Exonerados",ok:"Guardar",onSubmit:e.addExonerados},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",lo,[(0,n.Lk)("div",so,[(0,n.Lk)("div",uo,[(0,n.bF)(c,{type:"outlined",modelValue:e.selectPerfiles,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectPerfiles=t}),noBottom:"",options:e.perfiles,label:"TIPNOM",placeholder:"tipoDestinatarios"},null,8,["modelValue","options"])])]),(0,n.Lk)("div",co,[(0,n.Lk)("div",fo,[(0,n.bF)(c,{type:"outlined",modelValue:e.selectNivel,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectNivel=t}),noBottom:"",onInput:e.changeNivel,label:"label",val:"value",options:e.nivel,placeholder:"ngs.nivel"},null,8,["modelValue","onInput","options"])])]),(0,n.Lk)("div",po,[(0,n.Lk)("div",mo,[(0,n.bF)(c,{type:"outlined",modelValue:e.selectGrade,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectGrade=t}),noBottom:"",onInput:e.changeGrade,label:"label",val:"value",options:e.grade,placeholder:"ngs.grado"},null,8,["modelValue","onInput","options"])]),(0,n.Lk)("div",ho,[(0,n.bF)(c,{type:"outlined",modelValue:e.selectSection,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectSection=t}),noBottom:"",onInput:e.changeSection,label:"label",val:"value",options:e.section,placeholder:"ngs.seccion"},null,8,["modelValue","onInput","options"])])]),(0,n.bF)(d,{class:"q-if-outlined",modelValue:e.find,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.find=t}),placeholder:"Buscar"},null,8,["modelValue"]),(0,n.bF)(p,{visible:e.loading},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),e.copyDestinatarios.length>0?((0,n.uX)(),(0,n.Wv)(E,{key:0,class:"no-border-left no-border-right no-border-top"},{default:(0,n.k6)(function(){return[(0,n.bF)(g,null,{default:(0,n.k6)(function(){return[(0,n.bF)(h,{class:"row"},{default:(0,n.k6)(function(){return[(0,n.bF)(m,{class:"col",modelValue:e.checkAll,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.checkAll=t}),label:"Todos",onClick:e.checkingAll},null,8,["modelValue","onClick"]),(0,n.Lk)("span",vo,(0,b.v_)(e.copyDestinatarios.length)+" Contactos",1)]}),_:1})]}),_:1}),(0,n.bF)(A,{size:40,remain:e.isLess?5.8:4.6,options:e.copyDestinatarios,dense:!0},{item:(0,n.k6)(function(e){var t=e.item;return[(0,n.bF)(g,null,{default:(0,n.k6)(function(){return[(0,n.bF)(k,null,{default:(0,n.k6)(function(){return[(0,n.bF)(m,{modelValue:t.state,"onUpdate:modelValue":function(e){return t.state=e}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,n.bF)(h,{class:"q-body-1",label:t.USUNOM,sublabel:t.CARNOM,"sublabel-lines":2},null,8,["label","sublabel"])]}),_:2},1024)]}),_:1},8,["remain","options"])]}),_:1})):(0,n.Q3)("v-if",!0)])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}o(89571),o(90095),o(13715);var go=o(81288),ko=o(99637),Ao=o(80660),Eo=o(40155),wo=o(48086),Co=o(34858),Oo={components:{QTr:m.qh,QTd:m.Ef,QTabs:m.uw,QTab:m.zu,QTabPane:m.dg,QInnerLoading:m.SQ,QSpinnerOval:m.VA,sieModal:j.A,sieSelect:Le.A,QCheckbox:Eo.A,destinatarios:wo.A,virtualList:Co.Ay,QPage:m.Tu,QCard:m.C$,QTable:m.kH,QBtn:m.Il,QTooltip:m.nC,QSearch:m.Ks,QList:m.Mb,QItem:m.H0,QItemMain:m.mF,QItemSide:m.n1},data:function(){return{acceso:(0,$["default"])().ruta.nivel>=2,buttons:[{icon:"plus",label:"Agregar",permiso:">=2",click:this.openAgregaEstudiante}],listaAlumnos:[],openModalExonerado:!1,columns:[{name:"USUNOM",field:"USUNOM",label:"NOMBRE",align:"left"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],find:null,selectPerfiles:{},selectTipo:"",selectNivel:"",selectGrade:"",selectSection:"",dataNivel:[],dataGrade:[],dataSection:[],perfiles:[{TIPCODAC:"004",TIPNOM:"Familia"}],dataAdd:{},data:[],dataFamilias:[],destinatarios:[],copyDestinatarios:[],validateCheckAll:[],checkAll:!1,loading:!1,validateParams:!0,mapTo:{ids:[],names:[],objects:[]}}},methods:{addExonerados:function(){var e=this;return T()(S()().m(function t(){var o,n,a,i;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o=[],e.copyDestinatarios.forEach(function(t,n){!0===t.state&&(e.dataFamilias.push(t),o.push({FAMCOD:t.FAMCOD,ALUCOD:t.ALUCOD||null}))}),t.p=1,t.n=2,e.$http.post("api/HyoBecaExonerado/saveEstadoAsync",{data:o});case 2:n=t.v,a=n.json,"Ok"===a.status&&((0,H["default"])(a.message),e.openModalExonerado=!1),t.n=4;break;case 3:t.p=3,i=t.v,(0,H["default"])(i.error.message,"error");case 4:return t.a(2)}},t,null,[[1,3]])}))()},openAgregaEstudiante:function(){this.openModalExonerado=!0},validateIfExistDestinatario:function(){var e=this;this.validateCheckAll=[],this.destinatarios.length>0&&(0,ko["default"])(this.destinatarios,function(t,o){e.dataAdd[t.USUCOD]&&-1===e.validateCheckAll.indexOf(t.USUCOD)&&(t.state=!0,e.validateCheckAll.push(t.USUCOD)),-1!==e.mapTo.ids.indexOf(t.USUCOD)&&(e.dataAdd[t.USUCOD]||(e.dataAdd[t.USUCOD]=t,e.validateCheckAll.push(t.USUCOD)),t.state=!0)}),this.checkAll=this.destinatarios.length===this.validateCheckAll.length},changeDestinatarios:function(e){var t=this;for(var o in this.loading=!0,this.validateParams=!0,e.isMensajeriaRef=!0,e)""===e[o]&&(this.validateParams=!1);this.registroNotasVUE&&this.comboExtra?this.validateParams?Ao.$http.get("api/HyoUsuario/obtListaDestinatariosNR",{params:e}).then(function(e){var o=e.json;t.checkAll=!1,(0,ko["default"])(o,function(e,t){e.state=!1,e.label=e.USUNOM,e.value=e.USUCOD}),t.destinatarios=o,t.copyDestinatarios=o,t.validateIfExistDestinatario(),t.loading=!1}):this.loading=!1:this.validateParams?Ao.$http.get("api/HyoUsuario/obtListaDestinatarios",{params:e}).then(function(e){var o=e.json;t.checkAll=!1,(0,ko["default"])(o,function(e,t){e.state=!1,e.label=e.USUNOM,e.value=e.USUCOD}),t.destinatarios=o,t.copyDestinatarios=o,t.validateIfExistDestinatario(),t.loading=!1}):this.loading=!1},changeNivel:function(e){var t=this;this.selectGrade="",this.selectSection="";var o={tipcod:this.selectPerfiles.TIPCODAC,instrucod:e};Ao.$http.get("api/HyoGradoNivs/obtGrados",{params:{instru:e}}).then(function(e){var n=e.json;t.dataGrade=n,t.changeDestinatarios(o)})},changeGrade:function(e){var t=this;this.selectSection="";var o={gradocod:e,instrucod:this.selectNivel,tipcod:this.selectPerfiles.TIPCODAC};Ao.$http.get("api/HyoSalones/obtSecciones",{params:{gradocod:e,instrucod:this.selectNivel}}).then(function(e){var n=e.json;t.dataSection=n,t.changeDestinatarios(o)})},changeSection:function(e){var t;t="string"===typeof e?{gradocod:this.selectGrade,instrucod:this.selectNivel,seccioncod:this.selectSection,tipcod:this.selectPerfiles.TIPCODAC}:{},this.changeDestinatarios(t)},checkingAll:function(){this.checkAll?this.addElements():this.removeElements()},states:function(e){e.state?this.dataAdd[e.value]||(this.dataAdd[e.value]=e,this.validateCheckAll.push(e.value)):(delete this.dataAdd[e.value],this.validateCheckAll.splice(this.validateCheckAll.indexOf(e.value),1)),this.checkAll=this.validateCheckAll.length===this.destinatarios.length},addElements:function(){for(var e=0;e<this.copyDestinatarios.length;e++)this.destinatarios[e].state=!0,this.copyDestinatarios[e].state=!0,this.states(this.copyDestinatarios[e])},removeElements:function(){for(var e=0;e<this.copyDestinatarios.length;e++)this.destinatarios[e].state=!1,this.copyDestinatarios[e].state=!1,this.states(this.copyDestinatarios[e])},deleteExonerado:function(e){var t=this;this.$q.dialog({title:"¿Esta seguro de eliminar el registro?",ok:"SI",cancel:"NO"}).onOk(T()(S()().m(function o(){var n,a,i,r;return S()().w(function(o){while(1)switch(o.p=o.n){case 0:return n={id:e},o.p=1,o.n=2,t.$http.delete("api/HyoBecaExonerado/deleteExoneradoAsync",{params:n});case 2:a=o.v,i=a.json,"Ok"===i.status&&((0,H["default"])(i.message),t.getExonerados()),o.n=4;break;case 3:o.p=3,r=o.v,(0,H["default"])(r.error.message,"error");case 4:return o.a(2)}},o,null,[[1,3]])})))},getExonerados:function(){var e=this;return T()(S()().m(function t(){var o,n;return S()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/HyoBecaExonerado/getExonerados");case 1:o=t.v,n=o.json,e.dataFamilias=n;case 2:return t.a(2)}},t)}))()}},computed:{isLess:function(){return(0,go.isLess)()},nivel:function(){for(var e=[],t=0;t<this.dataNivel.length;t++)this.dataNivel[t].label=this.dataNivel[t].INSTRUDES,this.dataNivel[t].value=this.dataNivel[t].INSTRUCOD,e.push(this.dataNivel[t]);return e},grade:function(){for(var e=[],t=0;t<this.dataGrade.length;t++)this.dataGrade[t].label=this.dataGrade[t].GRADODES,this.dataGrade[t].value=this.dataGrade[t].GRADOCOD,e.push(this.dataGrade[t]);return e},section:function(){for(var e=[],t=0;t<this.dataSection.length;t++)this.dataSection[t].label=this.dataSection[t].SECCIONDES,this.dataSection[t].value=this.dataSection[t].SECCIONCOD,e.push(this.dataSection[t]);return e}},created:function(){var e=this;return T()(S()().m(function t(){return S()().w(function(t){while(1)switch(t.n){case 0:Ao.$http.get("api/HyoUsuario/obtListaDestinatarios",{params:{tipcod:e.perfiles[0].TIPCODAC}}).then(function(t){t.json.forEach(function(e){e.state=!1}),e.copyDestinatarios=t.json}),Ao.$http.get("api/HyoInstrus/obtInstru",{params:{parametros:{ano:(0,$["default"])().ano,tutoria:!0,asignados:!0}}}).then(function(t){var o=t.json;e.dataNivel=o}),e.getExonerados();case 1:return t.a(2)}},t)}))()}};const Io=(0,X.A)(Oo,[["render",bo]]);var _o=Io,Fo={components:{QTabs:m.uw,QTab:m.zu,QTabPane:m.dg,mensajes:kt,documentos:Ut,requisitos:$t,ficha:ro,exoneraciones:_o},data:function(){return{acceso:(0,$["default"])().ruta.nivel>=2,isVcSp:"0081"===(0,$["default"])().colcod&&"001"===(0,$["default"])().tipcod}},methods:{}};const Do=(0,X.A)(Fo,[["render",ze]]);var So=Do,yo={class:"intranet--becas--dashboard--informes"},To={class:"col-12"},Mo={class:"row q-col-gutter-sm"},Vo={class:"col-12"},Uo={class:"row items-center"},qo={class:"col row justify-end"},No={key:0,class:"col-12"},Po={class:"row q-col-gutter-sm"},Qo={class:"col-4"},Ro={class:"col-8"},Lo={class:"row q-pa-sm"},Ho={class:"col"};function Bo(e,t){var o=(0,n.g2)("q-tooltip"),a=(0,n.g2)("q-btn"),i=(0,n.g2)("q-input"),r=(0,n.g2)("q-td"),l=(0,n.g2)("q-download-file"),s=(0,n.g2)("q-tr"),u=(0,n.g2)("q-table"),c=(0,n.g2)("sie-upload"),d=(0,n.g2)("sie-modal");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",yo,[(0,n.bF)(u,{class:"htable",rows:e.objActual,columns:e.columns,"row-key":"ID_BECA_SOLICITUD","virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":t[2]||(t[2]=function(t){return e.pagination=t}),"row-per-page-options":[0],dense:"",flat:"",bordered:""},{top:(0,n.k6)(function(r){return[(0,n.Lk)("div",To,[(0,n.Lk)("div",Mo,[(0,n.Lk)("div",Vo,[(0,n.Lk)("div",Uo,[(0,n.bF)(a,{icon:e.iconFilter,color:"primary",onClick:e.showHideFilters,flat:"",round:"",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(e.textTooltipFilter),1)]}),_:1})]}),_:1},8,["icon","onClick"]),(0,n.Lk)("div",qo,[(0,n.bF)(a,{icon:"refresh",label:"Actualizar",color:"secondary",size:"sm",onClick:e.getSolicitudes,unelevated:""},null,8,["onClick"])])])]),e.showFilter?((0,n.uX)(),(0,n.CE)("div",No,[(0,n.Lk)("div",Po,[(0,n.Lk)("div",Qo,[(0,n.bF)(i,{modelValue:e.filter.famcod,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.famcod=t}),label:"Código"},null,8,["modelValue"])]),(0,n.Lk)("div",Ro,[(0,n.bF)(i,{modelValue:e.filter.famdes,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.famdes=t}),label:"Familia"},null,8,["modelValue"])])])])):(0,n.Q3)("v-if",!0)])])]}),body:(0,n.k6)(function(i){return[(0,n.bF)(s,{props:i},{default:(0,n.k6)(function(){return[(0,n.bF)(r,{key:"FAMCOD",props:i},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(i.row.FAMCOD),1)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"FAMDES",props:i},{default:(0,n.k6)(function(){return[(0,n.eW)((0,b.v_)(i.row.FAMDES),1)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"FECHA_REG",props:i},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,b.v_)(e.date(i.row.FECHA_REG,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"FECHA_LIMITE",props:i},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,b.v_)(e.date(i.row.FECHA_LIMITE,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,n.bF)(r,{key:"ACCIONES",props:i},{default:(0,n.k6)(function(){return[null!==i.row.RUTA?((0,n.uX)(),(0,n.Wv)(l,{key:0,src:e.getUrl(i.row.RUTA)},null,8,["src"])):((0,n.uX)(),(0,n.Wv)(a,{key:1,color:"primary",icon:"upload",flat:"",onClick:function(t){return e.cargarArchivo(i.row)},round:"",size:"sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{anchor:"top middle",self:"bottom middle"},{default:(0,n.k6)(function(){return v()(t[5]||(t[5]=[(0,n.eW)("Subir Documento",-1)]))}),_:1})]}),_:1},8,["onClick"]))]}),_:2},1032,["props"])]}),_:2},1032,["props"])]}),_:1},8,["rows","columns","pagination"])]),(0,n.bF)(d,{class:"modal-archivos",modelValue:e.openModal,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.openModal=t}),title:"Subir documento",onSubmit:t[4]||(t[4]=function(t){return e.saveDocExp()}),ok:e.$t("botones.guardar"),"btn-disable":e.disableBtn},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",Lo,[(0,n.Lk)("div",Ho,[(0,n.bF)(c,{onUpload:e.uploadArchivo,icon:"file",title:e.titleImage,allow:["pdf","doc","docx"]},null,8,["onUpload","title"])])])]}),_:1},8,["modelValue","ok","btn-disable"])],64)}var jo=o(62006),xo={components:{QTable:M.A,QTr:V.A,QTd:U.A,QChip:be.A,QBtn:N.A,QTooltip:P.A,Dialog:q.A,QDatetime:B.A,sieModal:j.A,notify:H["default"],sieUpload:yt.A,sieSelect:Le.A,QDownloadFile:jo.A,QInput:L.A},props:{periodo:{type:Number,required:!0}},data:function(){return{sie:(0,$["default"])(),pagination:{rowsPerPage:0},showFilter:!1,modalArchivo:{url:"",open:!1,esPdf:!1,datos:{directLink:!1,esEnlace:!1,extension:"",id:1,name:"",link:""}},filter:{famcod:"",famdes:"",fecini:null,fecfin:null,estado:0},dsSolicitudes:[],columns:[{name:"FAMCOD",field:"FAMCOD",label:"CÓDIGO",align:"center"},{name:"FAMDES",field:"FAMDES",label:"FAMILIA",align:"left"},{name:"FECHA_REG",field:"FECHA_REG",label:"FECHA INSCRIPCIÓN",align:"center"},{name:"ACCIONES",label:"ACCIONES",align:"center"}],openModal:!1,dsExpediente:[],titleImage:"",objArchivos:{},dataSolicitud:{},disableBtn:!1,form:{id_beca_solicitud:null,famcod:null,periodo:this.periodo,temps:[]}}},computed:{objActual:function(){var e=this.dsSolicitudes;return""!==this.filter.famcod&&(e=(0,je.filterArray)(this.filter.famcod,{field:"FAMCOD",list:e})),""!==this.filter.famdes&&(e=(0,je.filterArray)(this.filter.famdes,{field:"FAMDES",list:e})),e},iconFilter:function(){return this.showFilter?"filter_remove":"filter_search"},textTooltipFilter:function(){return this.showFilter?"Ocultar filtros":"Mostrar filtros"}},methods:{date:x.Ay,showHideFilters:function(){this.showFilter=!this.showFilter},cleanFilters:function(){this.filter={famcod:"",famdes:""},this.getSolicitudes()},getSolicitudes:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return o={periodo:e.periodo},t.p=1,t.n=2,e.$http.get("api/HyoBecaSolicitud/getSolicitudesAsis",{params:o});case 2:n=t.v,a=n.json,e.dsSolicitudes=a,t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))()},cargarArchivo:function(e){this.openModal=!0,this.form.id_beca_solicitud=e.ID_BECA_SOLICITUD,this.form.famcod=e.FAMCOD,this.form.temps=[],this.disableBtn=!0},cerrarCarga:function(){this.openModal=!1,this.form={id_beca_solicitud:null,temps:[],famcod:null,periodo:this.periodo}},uploadArchivo:function(e){var t=this;(0,Tt.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){t.form.temps.push(e.name),t.disableBtn=!1}).catch(function(){})},saveDocExp:function(){var e=this;return T()(S()().m(function t(){var o,n,a;return S()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.$http.post("api/HyoBecaExpediente/saveExpedienteArch",{data:e.form});case 1:o=t.v,n=o.json,"Ok"===n.status&&(e.cerrarCarga(),(0,H["default"])(n.message),e.getSolicitudes()),t.n=3;break;case 2:t.p=2,a=t.v,(0,H["default"])(a.error.message,"error");case 3:return t.a(2)}},t,null,[[0,2]])}))()},getUrl:function(e){var t,o=e.split("/"),n=o[o.length-1],a=n.split("."),i=a[0].split("_"),r=i[1];return t=i.length>=3?i[2]:1,"".concat(this.sie.api,"/HyoBecaExpediente/archivo/").concat(r,"/").concat(t,"?sie-token=").concat(this.sie.token)},obtDatosArchivo:function(e,t,o){var n="";if(t){var a=t.split("."),i=a[a.length-1];if("link"===e){var r=o+"."+i;n="".concat(this.sie.api,"/HyoProfeotes/archivo/").concat(t,"/").concat(r,"?sie-token=").concat(this.sie.token)}else"extension"===e&&(n=i)}return n}},mounted:function(){this.getSolicitudes()}};const $o=(0,X.A)(xo,[["render",Bo]]);var Wo=$o,Xo={components:{QCard:l.A,QCardSection:s.A,QTabs:u.A,QTab:c.A,QTabPanels:d.A,QTabPanel:f.A,QSeparator:p.A,procesos:Y,expedientes:Xe,configuracion:So,informes:Wo,QPage:m.Tu},data:function(){return{tab:"expedientes",buttons:[],verInforme:"0057"===(0,$["default"])().colcod}},methods:r()({},(0,He.i0)("beca",["fetchActivePeriodo"])),computed:r()({},(0,He.aH)("beca",["perActivo"])),mounted:function(){this.fetchActivePeriodo()}};const zo=(0,X.A)(Xo,[["render",a]]);var Yo=zo}}]);