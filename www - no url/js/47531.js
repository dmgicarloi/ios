"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[47531],{47531:function(e,n,o){o.r(n),o.d(n,{default:function(){return le}});var a=o(8445),r=o.n(a),t=(o(39866),o(56285),o(61758)),i=o(29104),u=o(58790),c={class:"row q-pa-sm q-col-gutter-sm"},l={key:0,class:"col-12"},s={class:"col-xs-12 col-sm-4"},d={class:"col-xs-12 col-sm-8"},f={key:0,class:"column"},v=["innerHTML"],p={key:1,class:"column"},m={key:2,class:"column"},b=["src"],h={class:"row q-gutter-sm"},C={class:"row q-gutter-sm"},k={class:"q-pa-sm"},_={class:"row q-py-sm"},g={class:"row q-gutter-sm"},A={class:"col"},D={class:"col"},O={class:"q-py-sm"},I={class:"q-pa-sm"},P={class:"row q-py-sm"},w={class:"row q-gutter-sm"},F={class:"col"},V={class:"col"},E={class:"row q-gutter-sm q-py-sm"},y={class:"col"},U={class:"q-py-sm"};function R(e,n){var o=this,a=(0,t.g2)("header-btn"),R=(0,t.g2)("sie-table"),S=(0,t.g2)("q-card-section"),N=(0,t.g2)("q-card"),M=(0,t.g2)("q-download-file"),L=(0,t.g2)("q-select"),T=(0,t.g2)("q-icon"),j=(0,t.g2)("q-item-section"),$=(0,t.g2)("q-item"),W=(0,t.g2)("q-list"),X=(0,t.g2)("formularioCovid"),z=(0,t.g2)("sie-pdf"),Y=(0,t.g2)("q-btn"),q=(0,t.g2)("q-toolbar"),Q=(0,t.g2)("sie-modal"),G=(0,t.g2)("sie-upload"),x=(0,t.g2)("q-input"),H=(0,t.g2)("sie-cloud"),B=(0,t.g2)("q-page"),K=(0,t.gN)("ripple");return(0,t.uX)(),(0,t.Wv)(B,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(N,null,{default:(0,t.k6)(function(){return[(0,t.bF)(a,{name:"Declaración / Autorización"}),(0,t.bF)(S,null,{default:(0,t.k6)(function(){return[(0,t.bF)(R,{data:e.rows,columns:e.fields,config:e.config,context:o,css:"height: 80vh"},null,8,["data","columns","config"])]}),_:1})]}),_:1}),(0,t.bo)((0,t.bF)(M,{ref:"downloadFile",src:e.urlUserFile},null,8,["src"]),[[i.aG,!1]]),(0,t.bF)(Q,{class:"full-height",ok:!1,title:"Declaración / Autorización",modelValue:e.openModalCovidDocumentos,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.openModalCovidDocumentos=n}),css:{height:"100vh",width:"100vw"},onClose:e.cerrarModal},{footerMobile:(0,t.k6)(function(){return[(0,t.Lk)("div",null,[(0,t.Lk)("div",h,["autorizacion"===e.currentItem.TYPE&&0===e.currentItem.UPLOAD?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[1===e.itemAutorizacion.MODO_RESPUESTA?((0,t.uX)(),(0,t.Wv)(Y,{key:0,onClick:n[3]||(n[3]=function(n){return e.saveAutorizacion("SI")}),flat:"",round:"",dense:"","no-caps":""},{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.itemAutorizacion.TEXTO_ACEPTACION),1)]}),_:1})):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(Y,{onClick:n[4]||(n[4]=function(n){return e.saveAutorizacion("SI")}),flat:"",dense:"","no-caps":""},{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.itemAutorizacion.TEXTO_ACEPTACION),1)]}),_:1}),(0,t.bF)(Y,{onClick:n[5]||(n[5]=function(n){return e.validarModoRespuesta()}),flat:"",dense:"","no-caps":""},{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.itemAutorizacion.TEXTO_NEGACION),1)]}),_:1})],64))],64)):(0,t.Q3)("v-if",!0),[1,2].includes(e.currentItem.ACCION)&&!e.currentItem.UPLOAD?((0,t.uX)(),(0,t.Wv)(Y,{key:1,icon:"file_upload",onClick:e.adjuntar,flat:"",round:"",dense:""},null,8,["onClick"])):(0,t.Q3)("v-if",!0),e.showSaveFormulario?((0,t.uX)(),(0,t.Wv)(Y,{key:2,icon:"save",onClick:n[6]||(n[6]=function(n){return e.saveFormulario()}),flat:"",round:"",dense:"","no-caps":""})):(0,t.Q3)("v-if",!0)])])]}),footer:(0,t.k6)(function(){return[(0,t.Lk)("div",null,[(0,t.bF)(q,{class:"justify-end",color:"grey-2"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",C,["autorizacion"===e.currentItem.TYPE&&0===e.currentItem.UPLOAD?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[1===e.itemAutorizacion.MODO_RESPUESTA?((0,t.uX)(),(0,t.Wv)(Y,{key:0,color:"primary",onClick:n[7]||(n[7]=function(n){return e.saveAutorizacion("SI")})},{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.itemAutorizacion.TEXTO_ACEPTACION),1)]}),_:1})):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(Y,{color:"primary",onClick:n[8]||(n[8]=function(n){return e.saveAutorizacion("SI")})},{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.itemAutorizacion.TEXTO_ACEPTACION),1)]}),_:1}),(0,t.bF)(Y,{class:"text-primary",onClick:n[9]||(n[9]=function(n){return e.validarModoRespuesta()})},{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.itemAutorizacion.TEXTO_NEGACION),1)]}),_:1})],64))],64)):(0,t.Q3)("v-if",!0),[1,2].includes(e.currentItem.ACCION)&&!e.currentItem.UPLOAD?((0,t.uX)(),(0,t.Wv)(Y,{key:1,icon:"file_upload",color:"primary",onClick:e.adjuntar},{default:(0,t.k6)(function(){return r()(n[29]||(n[29]=[(0,t.eW)("Adjuntar",-1)]))}),_:1},8,["onClick"])):(0,t.Q3)("v-if",!0),e.showSaveFormulario?((0,t.uX)(),(0,t.Wv)(Y,{key:2,color:"primary",icon:"save",onClick:n[10]||(n[10]=function(n){return e.saveFormulario()})},{default:(0,t.k6)(function(){return r()(n[30]||(n[30]=[(0,t.eW)("Enviar",-1)]))}),_:1})):(0,t.Q3)("v-if",!0)])]}),_:1})])]}),default:(0,t.k6)(function(){return[(0,t.Lk)("div",c,["004"===e.sie.tipcod?((0,t.uX)(),(0,t.CE)("div",l,[(0,t.bF)(L,{disable:!e.isNew,modelValue:e.form.responsable,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.responsable=n}),options:e.responsables,label:"Seleccionar Responsable"},null,8,["disable","modelValue","options"])])):(0,t.Q3)("v-if",!0),(0,t.Lk)("div",s,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.covidDocumentos,function(o,a){return(0,t.uX)(),(0,t.CE)(t.FK,null,["declaracion"===a?((0,t.uX)(),(0,t.Wv)(W,{key:0,bordered:"",dense:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o,function(n){return(0,t.bo)(((0,t.uX)(),(0,t.Wv)($,{class:(0,u.C4)(["cursor-pointer",{"bg-grey-4":n.UNICO===e.currentItem.UNICO}]),onClick:function(o){return e.loadFile(n)}},{default:(0,t.k6)(function(){return[(0,t.bF)(j,{avatar:""},{default:(0,t.k6)(function(){return[(0,t.bF)(T,{color:"primary",name:e.loadIcons(n)},null,8,["name"])]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(n.NOMBRE),1)]}),_:2},1024),(0,t.bF)(j,{avatar:""},{default:(0,t.k6)(function(){return[[1,2].includes(n.ACCION)?((0,t.uX)(),(0,t.Wv)(T,{key:0,color:0===n.UPLOAD?"negative":"positive",name:0===n.UPLOAD?"upload":"file_download",onClick:(0,i.D$)(function(o){return e.showDocumentUser(n)},["stop"])},null,8,["color","name","onClick"])):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["onClick","class"])),[[K]])}),256))]}),_:2},1024)):(0,t.Q3)("v-if",!0),"autorizacion"===a?((0,t.uX)(),(0,t.Wv)(W,{key:1,bordered:"",dense:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o,function(o){return(0,t.bo)(((0,t.uX)(),(0,t.Wv)($,{class:(0,u.C4)(["cursor-pointer",{"bg-grey-4":o.UNICO===e.currentItem.UNICO}]),onClick:function(n){return e.loadBotones(o)}},{default:(0,t.k6)(function(){return[(0,t.bF)(j,{avatar:""},{default:(0,t.k6)(function(){return[(0,t.bF)(T,{color:"primary",name:e.loadIcons(o)},null,8,["name"])]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(o.NOMBRE),1)]}),_:2},1024),(0,t.bF)(j,{avatar:""},{default:(0,t.k6)(function(){return["autorizacion"===o.TYPE&&1===o.UPLOAD?((0,t.uX)(),(0,t.Wv)(T,{key:0,color:"positive",name:"check2",onClick:n[1]||(n[1]=(0,i.D$)(function(){},["stop"]))})):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["onClick","class"])),[[K]])}),256))]}),_:2},1024)):(0,t.Q3)("v-if",!0),"formularios"===a?((0,t.uX)(),(0,t.Wv)(W,{key:2,bordered:"",dense:""},{default:(0,t.k6)(function(){return[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o,function(o,a){return(0,t.bo)(((0,t.uX)(),(0,t.Wv)($,{class:(0,u.C4)(["cursor-pointer",{"bg-grey-4":o.UNICO===e.currentItem.UNICO}]),onClick:function(n){return e.loadFile(o)}},{default:(0,t.k6)(function(){return[(0,t.bF)(j,{avatar:""},{default:(0,t.k6)(function(){return[(0,t.bF)(T,{color:"primary",name:e.loadIcons(o)},null,8,["name"])]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(o.NOMBRE),1)]}),_:2},1024),(0,t.bF)(j,{avatar:""},{default:(0,t.k6)(function(){return["formularios"===o.TYPE?((0,t.uX)(),(0,t.Wv)(T,{key:0,color:0===o.UPLOAD?"negative":"positive",name:"document_list",onClick:n[2]||(n[2]=(0,i.D$)(function(){},["stop"]))},null,8,["color"])):(0,t.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["onClick","class"])),[[K]])}),256))]}),_:2},1024)):(0,t.Q3)("v-if",!0)],64)}),256))]),(0,t.Lk)("div",d,["autorizacion"===e.currentItem.TYPE?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("div",{class:"q-pa-sm",innerHTML:e.itemAutorizacion.CUERPO_CAMBIADO_HTML},null,8,v)])):e.showFormulario?((0,t.uX)(),(0,t.CE)("div",p,[e.formulario.ID_FORMULARIO?((0,t.uX)(),(0,t.Wv)(X,{key:0,class:"full-height full-width overflow-auto",ref:"formulario",responsableExterno:e.form.responsable,ficha:e.formulario,esDeclaracion:!0,persona:e.datosPersona,preview:!1,onPostSave:e.postSave,onFinish:e.finishFormulario},null,8,["responsableExterno","ficha","persona","onPostSave","onFinish"])):(0,t.Q3)("v-if",!0)])):e.type?((0,t.uX)(),(0,t.CE)("div",m,["pdf"===e.type?((0,t.uX)(),(0,t.Wv)(z,{key:0,style:{height:"calc(100vh - 70px)"},src:e.url},null,8,["src"])):((0,t.uX)(),(0,t.CE)("img",{key:1,src:e.url,width:"100%"},null,8,b))])):(0,t.Q3)("v-if",!0)])])]}),_:1},8,["modelValue","onClose"]),(0,t.bo)((0,t.bF)(G,{ref:"sieUpload",allow:["jpg","png","jpeg","pdf"],onUpload:e.upload},null,8,["onUpload"]),[[i.aG,!1]]),(0,t.bF)(Q,{class:"prueba-covid",ok:!1,title:"Registro de Prueba COVID",modelValue:e.openModalCovidPrueba,"onUpdate:modelValue":n[18]||(n[18]=function(n){return e.openModalCovidPrueba=n}),onClose:n[19]||(n[19]=function(n){return e.openModalCovidPrueba=!1})},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",k,[(0,t.Lk)("div",_,"Usuario: "+(0,u.v_)(e.covidPrueba.name),1),(0,t.Lk)("div",g,[(0,t.Lk)("div",A,[(0,t.bF)(x,{outlined:"",modelValue:e.covidPrueba.fecha,"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.covidPrueba.fecha=n}),type:"date",label:"Fecha de prueba"},null,8,["modelValue"])]),(0,t.Lk)("div",D,[(0,t.bF)(L,{modelValue:e.covidPrueba.resultado,"onUpdate:modelValue":n[13]||(n[13]=function(n){return e.covidPrueba.resultado=n}),options:e.covidPrueba.options,label:"Resultado"},null,8,["modelValue","options"])]),(0,t.bF)(Y,{label:"Adjunto",dense:"",onClick:n[14]||(n[14]=function(n){return e.covidPrueba.modal=!0}),color:"primary"}),(0,t.bF)(Y,{label:"Guardar",dense:"",onClick:e.savePruebaCovid,color:"primary"},null,8,["onClick"]),(0,t.bF)(Q,{modelValue:e.covidPrueba.modal,"onUpdate:modelValue":n[16]||(n[16]=function(n){return e.covidPrueba.modal=n}),title:"Adjuntar",onSubmit:n[17]||(n[17]=function(n){return e.covidPrueba.modal=!1})},{default:(0,t.k6)(function(){return[(0,t.bF)(H,{modelValue:e.covidPrueba.adjuntos,"onUpdate:modelValue":n[15]||(n[15]=function(n){return e.covidPrueba.adjuntos=n}),"only-local":""},null,8,["modelValue"])]}),_:1},8,["modelValue"])]),(0,t.Lk)("div",O,[(0,t.bF)(W,null,{default:(0,t.k6)(function(){return[(0,t.bF)($,null,{default:(0,t.k6)(function(){return[(0,t.bF)(j,null,{default:(0,t.k6)(function(){return r()(n[31]||(n[31]=[(0,t.eW)("Fecha de prueba",-1)]))}),_:1}),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return r()(n[32]||(n[32]=[(0,t.eW)("Resultado",-1)]))}),_:1}),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return r()(n[33]||(n[33]=[(0,t.eW)("Adjunto",-1)]))}),_:1}),(0,t.bF)(j,{side:""}),(0,t.bF)(j,{side:""})]}),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.covidPrueba.data,function(n,o){return(0,t.uX)(),(0,t.Wv)($,{key:o},{default:(0,t.k6)(function(){return[(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.formatoFecha(n.fecha)),1)]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.tieneCovid(n.resultado)),1)]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[n.adjunto?((0,t.uX)(),(0,t.Wv)(M,{key:0,src:e.srcPrueba(n.adjunto),name:n.adjunto.name,extension:n.adjunto.extension,"direct-link":n.adjunto.directLink,inline:!0,item:n.adjunto},null,8,["src","name","extension","direct-link","item"])):(0,t.Q3)("v-if",!0)]}),_:2},1024),(0,t.bF)(j,{side:""},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{dense:"",flat:"",round:"",icon:"edit",onClick:function(o){return e.updatePruebaCovid(n)}},null,8,["onClick"])]}),_:2},1024),(0,t.bF)(j,{side:""},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{dense:"",flat:"",round:"",icon:"delete",onClick:function(o){return e.deletePruebaCovid(n.id,n.id_persona)}},null,8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])])]}),_:1},8,["modelValue"]),(0,t.bF)(Q,{class:"vacuna-covid",ok:!1,title:"Registro de Vacunas",modelValue:e.openModalCovidVacuna,"onUpdate:modelValue":n[27]||(n[27]=function(n){return e.openModalCovidVacuna=n}),onClose:n[28]||(n[28]=function(n){return e.openModalCovidVacuna=!1})},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",I,[(0,t.Lk)("div",P,"Usuario: "+(0,u.v_)(e.covidVacuna.name),1),(0,t.Lk)("div",w,[(0,t.Lk)("div",F,[(0,t.bF)(x,{outlined:"",modelValue:e.covidVacuna.fecha,"onUpdate:modelValue":n[20]||(n[20]=function(n){return e.covidVacuna.fecha=n}),type:"date",label:"Fecha de vacunación"},null,8,["modelValue"])]),(0,t.Lk)("div",V,[(0,t.bF)(L,{modelValue:e.covidVacuna.vaccod,"onUpdate:modelValue":n[21]||(n[21]=function(n){return e.covidVacuna.vaccod=n}),options:e.covidVacuna.options,label:"Vacuna"},null,8,["modelValue","options"])])]),(0,t.Lk)("div",E,[(0,t.Lk)("div",y,[(0,t.bF)(x,{outlined:"",modelValue:e.covidVacuna.lugar,"onUpdate:modelValue":n[22]||(n[22]=function(n){return e.covidVacuna.lugar=n}),label:"Lugar"},null,8,["modelValue"])]),(0,t.bF)(Y,{label:"Adjunto",dense:"",onClick:n[23]||(n[23]=function(n){return e.covidVacuna.modal=!0}),color:"primary"}),(0,t.bF)(Y,{label:"Guardar",dense:"",onClick:e.saveVacunaCovid,color:"primary"},null,8,["onClick"]),(0,t.bF)(Q,{modelValue:e.covidVacuna.modal,"onUpdate:modelValue":n[25]||(n[25]=function(n){return e.covidVacuna.modal=n}),title:"Adjuntar",onSubmit:n[26]||(n[26]=function(n){return e.covidVacuna.modal=!1})},{default:(0,t.k6)(function(){return[(0,t.bF)(H,{modelValue:e.covidVacuna.adjuntos,"onUpdate:modelValue":n[24]||(n[24]=function(n){return e.covidVacuna.adjuntos=n}),"only-local":""},null,8,["modelValue"])]}),_:1},8,["modelValue"])]),(0,t.Lk)("div",U,[(0,t.bF)(W,null,{default:(0,t.k6)(function(){return[(0,t.bF)($,null,{default:(0,t.k6)(function(){return[(0,t.bF)(j,null,{default:(0,t.k6)(function(){return r()(n[34]||(n[34]=[(0,t.eW)("Fecha de vacunación",-1)]))}),_:1}),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return r()(n[35]||(n[35]=[(0,t.eW)("Vacuna",-1)]))}),_:1}),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return r()(n[36]||(n[36]=[(0,t.eW)("Lugar",-1)]))}),_:1}),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return r()(n[37]||(n[37]=[(0,t.eW)("Adjunto",-1)]))}),_:1}),(0,t.bF)(j,{side:""}),(0,t.bF)(j,{side:""})]}),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.covidVacuna.data,function(n,o){return(0,t.uX)(),(0,t.Wv)($,{key:o},{default:(0,t.k6)(function(){return[(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(e.formatoFecha(n.fecha)),1)]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(n.vacuna),1)]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,u.v_)(n.lugar),1)]}),_:2},1024),(0,t.bF)(j,null,{default:(0,t.k6)(function(){return[n.adjunto.id?((0,t.uX)(),(0,t.Wv)(M,{key:0,src:e.srcVacuna(n.adjunto),name:n.adjunto.name,extension:n.adjunto.extension,"direct-link":n.adjunto.directLink,inline:!0,item:n.adjunto},null,8,["src","name","extension","direct-link","item"])):(0,t.Q3)("v-if",!0)]}),_:2},1024),(0,t.bF)(j,{side:""},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{dense:"",flat:"",round:"",icon:"edit",onClick:function(o){return e.updateVacunaCovid(n)}},null,8,["onClick"])]}),_:2},1024),(0,t.bF)(j,{side:""},{default:(0,t.k6)(function(){return[(0,t.bF)(Y,{dense:"",flat:"",round:"",icon:"delete",onClick:function(o){return e.deleteVacunaCovid(n.id,n.id_persona)}},null,8,["onClick"])]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})])])]}),_:1},8,["modelValue"])]}),_:1})}var S=o(76080),N=o.n(S),M=o(45254),L=o.n(M),T=(o(30683),o(71225),o(52133),o(10239),o(50310),o(6724),o(83190),o(6123)),j=o(95718),$=o(65673),W=o(82327),X=o(88865),z=o(16648),Y=o(11654),q=o(9736),Q={data:function(){return{config:{ESTADO:{component:"select",options:[{label:"-",value:null},{label:"Pendiente",value:1},{label:"Observado",value:2},{label:"Autorizado",value:3},{label:"No Aprobado",value:4}],edit:!1},ACCION:{component:"button",icon:["plus","print"],tooltip:{plus:"Agregar declaración"},print:function(e){var n=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:n.imprimir(e);case 1:return o.a(2)}},o)}))()},plus:function(e){var n=this;return L()(N()().m(function o(){var a,r,t,i,u;return N()().w(function(o){while(1)switch(o.n){case 0:if(1!==e.ID_PERFIL_DESTINO){o.n=2;break}return o.n=1,n.isCupoDisponible(e.ID_PROCESO_ASIGNA);case 1:if(a=o.v,a){o.n=2;break}return n.$notify("Aforo completo","warning"),o.a(2);case 2:return n.currentItem={},n.type="",n.isNew=!0,n.currentUser=e,n.showSaveFormulario=!1,o.n=3,n.loadDocumentos(e.ID_PERSONA,e.ID_PROCESO);case 3:r=n.getAccion(),t=r.accion,i=r.idRegistro,u=r.famResp,n.flagAccion={accion:t,idRegistro:i,famResp:u},n.form.responsable=u,n.showFormulario=!1,n.openModalCovidDocumentos=!0;case 4:return o.a(2)}},o)}))()},validate:{plus:function(e){return e.ADD_DECLARACION},print:function(e){return 3===e.ESTADO}},permisos:{plus:">1"},flat:!0,dense:!0,color:"primary"},VACUNA:{component:"button",icon:["plus"],permisos:{plus:">1"},tooltip:{plus:"Agregar vacuna"},plus:function(e){var n=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return n.covidVacuna.name=e.NOMCOMP,n.covidVacuna.id_persona=e.ID_PERSONA,o.n=1,n.getVacunasCovid(e.ID_PERSONA);case 1:return o.n=2,n.getVacunas();case 2:n.openModalCovidVacuna=!0;case 3:return o.a(2)}},o)}))()},flat:!0,dense:!0,round:!0,color:"primary",validate:{plus:function(e){return e.ADD_VACUNA}}},PRUEBA:{component:"button",icon:["plus"],permisos:{plus:">1"},plus:function(e){var n=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:return n.covidPrueba.name=e.NOMCOMP,n.covidPrueba.id_persona=e.ID_PERSONA,o.n=1,n.getPruebasCovid(e.ID_PERSONA);case 1:n.openModalCovidPrueba=!0;case 2:return o.a(2)}},o)}))()},tooltip:{plus:"Agregar prueba"},flat:!0,dense:!0,round:!0,color:"primary",validate:{plus:function(e){return e.ADD_PRUEBA}}}},rows:[],fields:[{name:"CODIGO",label:"Código",field:"CODIGO",align:"center"},{name:"NOMCOMP",label:"Nombre",field:"NOMCOMP",align:"left"},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"},{name:"ACCION",label:"Declaración",align:"center"},{name:"VACUNA",label:"Vacuna Covid",align:"center"},{name:"PRUEBA",label:"Prueba Covid",align:"center"}]}}},G=o(30640),x=o(57668),H=o(84603),B=o(59089),K=o(32195),Z=o(33950),J=o(62006),ee=o(53380),ne=o(40102),oe=o(2819),ae=o(80660),re=o(18105),te=o(69027),ie={components:{QSelect:z.A,QBtn:Y.A,QInput:q.A,sieUpload:B.A,SieCloud:K.A,siePdf:H.A,QList:$.A,QItem:W.A,QItemSection:X.A,QCardSection:j.A,sieModal:G.A,QDownloadFile:J.A,QSeparator:ee.A,formularioCovid:ne.A,QPage:T.Tu,QCard:T.C$,QIcon:T.bP,QToolbar:T.ZV},mixins:[Q],data:function(){return{isNew:!1,flagAccion:{accion:"new"},file:{},sie:(0,x["default"])(),openModalCovidDocumentos:!1,covidDocumentos:{},url:"",urlUserFile:"",type:"",currentItem:{},currentUser:{},responsables:[],form:{responsable:""},itemAutorizacion:{},showFormulario:!1,showSaveFormulario:!1,formulario:{},datosPersona:{},openModalCovidVacuna:!1,covidVacuna:{name:"",modal:!1,id:null,id_persona:null,fecha:(0,re.Ay)(new Date,"YYYY-MM-DD"),vaccod:null,lugar:null,adjuntos:[],options:[],data:[],requiredAttachment:["0309","0339"].includes((0,x["default"])().colcod)},openModalCovidPrueba:!1,covidPrueba:{name:"",modal:!1,id:null,id_persona:null,fecha:(0,re.Ay)(new Date,"YYYY-MM-DD"),resultado:0,adjuntos:[],options:[{label:"Positivo",value:1},{label:"Negativo",value:0}],data:[]}}},methods:{formatoFecha:function(e){return(0,re.Ay)(e,"DD/MM/YYYY")},tieneCovid:function(e){return 1===e?"Positivo":"Negativo"},imprimir:function(e){return L()(N()().m(function n(){var o,a;return N()().w(function(n){while(1)switch(n.n){case 0:o={id_persona:e.ID_PERSONA,id_proceso:e.ID_PROCESO},a=(0,ae.getBase)()+"/api/CovidDocumento/imprimirDeclaracion",(0,oe.open)({data:o,action:a});case 1:return n.a(2)}},n)}))()},loadDocumentos:function(e,n){var o=this;return L()(N()().m(function a(){var r,t;return N()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,o.$http("api/CovidDocumento/getCovidDocumentoAndFiles",{params:{id_persona:e,id_proceso:n}});case 1:r=a.v,t={},r.map(function(e){t[e.TYPE]||(t[e.TYPE]=[]),t[e.TYPE].push(e)}),o.covidDocumentos=t;case 2:return a.a(2)}},a)}))()},updateEstadoAutorizado:function(e){return this.$http.put("api/CovidRegistro/putCovidRegistro",{idRegistro:e})},showDocumentUser:function(e){this.loadFile(e),e.UPLOAD>0?(this.urlUserFile=this.getUrlCovidAdjunto({ID_REGISTRO:e.ID_REGISTRO,ID_DOCUMENTO:e.ID_DOCUMENTO}),this.$refs.downloadFile.onClick()):this.$notify("No se ha subido un archivo aún.","warning")},adjuntar:function(){!this.sie.famcod||this.form.responsable?this.$refs.sieUpload.$el.querySelector("input").click():this.$notify("Debe seleccionar responsable","warning")},upload:function(e){var n=this;return L()(N()().m(function o(){var a,r,t,i,u,c,l;return N()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,a=e[0],o.n=1,(0,Z.Upload)({url:"api/HyoArchivo/tmp/upload",file:a});case 1:return r=o.v,n.file=r,n.$q.loading.show(),t={id_proceso:n.currentUser.ID_PROCESO,id_persona:n.currentUser.ID_PERSONA,alucod:n.currentUser.CODIGO,fam_resp:n.form.responsable},n.file.id_documento=n.currentItem.ID_DOCUMENTO,o.n=2,n.$http.post("api/covidadjunto/postCovidAdjunto",{params:t,file:n.file,datos:n.getAccion(n.currentItem)});case 2:return n.currentItem.UPLOAD=1,o.n=3,n.loadDocumentos(n.currentUser.ID_PERSONA,n.currentUser.ID_PROCESO);case 3:return o.n=4,n.validarDocumentos();case 4:if(i=o.v,u=i.complete,c=i.idRegistro,!u){o.n=5;break}return o.n=5,n.updateEstadoAutorizado(c);case 5:n.$notify("Se ha subido el archivo satisfactoriamente.","success"),n.$q.loading.hide(),o.n=7;break;case 6:o.p=6,l=o.v,l.error&&"SieError"===l.error.name?n.$notify(l.error.message,"warning"):n.$notify("Ha ocurrido un error de conexión, vuelve a intentarlo más tarde","warning"),n.$q.loading.hide();case 7:return o.a(2)}},o,null,[[0,6]])}))()},loadFile:function(e){!this.sie.famcod||this.form.responsable?(this.currentItem=e,this.showFormulario=!1,this.showSaveFormulario=!1,"formularios"===e.TYPE?(this.formulario={},this.formulario["PLANTILLA_HTML"]=e.RUTA,this.formulario["ID_FORMULARIO"]=e.ID_DOCUMENTO,this.formulario["ID_PERSONA"]=this.currentUser.ID_PERSONA,this.formulario["ID_PROCESO"]=this.currentUser.ID_PROCESO,this.formulario["ALUCOD"]=this.currentUser.CODIGO,this.formulario["FAM_RES"]=this.form.responsable,this.formulario["ID_REGISTRO"]=e.ID_REGISTRO,this.formulario["ID_FRM_USUARIO"]=e.ID_UPLOAD,this.showFormulario=!0,this.type="",this.url=""):(this.type=this.loadExtension(e),this.url=this.getUrl(e))):this.$notify("Debe seleccionar responsable","warning")},setIcons:function(e,n){var o={pdf:"file_pdf_o",jpg:"file_image",jpeg:"file_image",png:"file_image",bmp:"file_image"},a=o[e];return"autorizacion"===n&&(a="file_edit"),"formularios"===n&&(a="document_list"),a=a||"file_text_o",a},loadExtension:function(e){var n=e.RUTA||"",o=n.split("."),a=o.length?o[o.length-1]:"";return a},loadIcons:function(e){return this.setIcons(this.loadExtension(e),e.TYPE)},getUrlCovidAdjunto:function(e){return e=e||{},"".concat(this.sie.api,"/HyoContenido/covidadjunto/").concat(e.ID_REGISTRO,"/").concat(e.ID_DOCUMENTO,"?sie-token=").concat(this.sie.token)},getUrl:function(e){return e=e||{},"".concat(this.sie.api,"/HyoContenido/coviddocumento/").concat(e.ID_DOCUMENTO,"?sie-token=").concat(this.sie.token)},openCovidDocumentos:function(){},getAccion:function(e){var n=[];for(var o in this.covidDocumentos){var a=this.covidDocumentos[o];a.map(function(e){n.push(e)})}var r=n.filter(function(e){return e.UPLOAD>0}),t=r[0]||{},i=t.ID_REGISTRO;if(e)return{accion:e.ID_UPLOAD?"edit":"new",idRegistro:i};var u=t.FAM_RESP;return{accion:r.length>0?"edit":"new",idRegistro:i,famResp:u}},finishFormulario:function(){var e=this;return L()(N()().m(function n(){var o,a,r;return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.loadDocumentos(e.currentUser.ID_PERSONA,e.currentUser.ID_PROCESO);case 1:return n.n=2,e.validarDocumentos();case 2:if(o=n.v,a=o.complete,r=o.idRegistro,!a){n.n=3;break}return n.n=3,e.updateEstadoAutorizado(r);case 3:return n.a(2)}},n)}))()},postSave:function(e){this.formulario["ID_FRM_USUARIO"]=e.ID_FRM_USUARIO,this.formulario["ID_FRM_USUARIO"]?this.showSaveFormulario=!1:this.showSaveFormulario=!0},saveFormulario:function(){this.$refs.formulario.savePreguntas()},loadBotones:function(e){var n=this;return L()(N()().m(function o(){var a;return N()().w(function(o){while(1)switch(o.n){case 0:if(!n.sie.famcod||n.form.responsable){o.n=1;break}return n.$notify("Debe seleccionar responsable","warning"),o.a(2);case 1:return n.currentItem=e,a=n.currentUser,o.n=2,n.$http.get("api/covidautorizacion/getCovidAutorizacionById",{params:{fam_resp:n.form.responsable,id:e.ID_DOCUMENTO,alucod:a.CODIGO,id_persona:a.ID_PERSONA,id_proceso:a.ID_PROCESO}});case 2:n.itemAutorizacion=o.v;case 3:return o.a(2)}},o)}))()},isCupoDisponible:function(e){return this.$http.get("api/HyoCovidProceso/isCupoDisponible",{params:{id_proceso_asigna:e}}).then(function(e){var n=e.json;return n})},validarModoRespuesta:function(){this.$alert("Debe aceptar los terminnos","info")},validarDocumentos:function(){var e=[],n={complete:!1,idRegistro:null};for(var o in this.covidDocumentos){var a=this.covidDocumentos[o];a.map(function(o){3!==o.ACCION&&(n.idRegistro=o.ID_REGISTRO,o.UPLOAD<1&&e.push(o))})}return n.complete=e.length<1,n},saveAutorizacion:function(e){var n=this;return L()(N()().m(function o(){var a,r,t,i,u,c;return N()().w(function(o){while(1)switch(o.p=o.n){case 0:if(!n.sie.famcod||n.form.responsable){o.n=1;break}return n.$notify("Debe seleccionar responsable","warning"),o.a(2);case 1:return a=n.getAccion(n.currentItem),a.id_persona=n.currentUser.ID_PERSONA,a.alucod=n.currentUser.CODIGO,a.famResp=n.form.responsable,a.id_proceso=n.currentUser.ID_PROCESO,r={params:a,data:{id_registro:n.currentItem.ID_REGISTRO,id_autorizacion:n.itemAutorizacion.ID_AUTORIZACION,respuesta:e}},o.p=2,o.n=3,n.$http.post("api/covidautorizacion/postRegistroAutorizacion",r);case 3:return n.currentItem.UPLOAD=1,n.$notify("Autorización grabada","success"),o.n=4,n.loadDocumentos(n.currentUser.ID_PERSONA,n.currentUser.ID_PROCESO);case 4:return o.n=5,n.validarDocumentos();case 5:if(t=o.v,i=t.complete,u=t.idRegistro,!i){o.n=6;break}return o.n=6,n.updateEstadoAutorizado(u);case 6:o.n=8;break;case 7:o.p=7,c=o.v,c.error&&"SieError"===c.error.name?n.$notify(c.error.message,"warning"):n.$notify("Ha ocurrido un error de conexión, vuelve a intentarlo más tarde","warning");case 8:return o.a(2)}},o,null,[[2,7]])}))()},cerrarModal:function(){this.currentItem={},this.inscripcionList()},inscripcionList:function(){var e=this;return L()(N()().m(function n(){return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/CovidAdjunto/getListUsersInscripcion");case 1:e.rows=n.v;case 2:return n.a(2)}},n)}))()},getPruebasCovid:function(e){var n=this;return L()(N()().m(function o(){var a;return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$http.get("api/CovidPrueba/getPruebasCovid",{params:{idpersona:e}});case 1:return a=o.v,n.covidPrueba.data=a,o.a(2,a)}},o)}))()},savePruebaCovid:function(){var e=this;return L()(N()().m(function n(){var o,a;return N()().w(function(n){while(1)switch(n.p=n.n){case 0:return o={id_persona:e.covidPrueba.id_persona,fecha:e.covidPrueba.fecha,resultado:e.covidPrueba.resultado},1===e.covidPrueba.adjuntos.length&&(o.adjunto=e.covidPrueba.adjuntos[0]),e.covidPrueba.id&&(o.id=e.covidPrueba.id),n.p=1,n.n=2,e.$http.post("api/CovidPrueba/savePruebaCovid",o);case 2:a=e.getPruebasCovid(e.covidPrueba.id_persona),e.covidPrueba.data=a,e.covidPrueba.fecha=(0,re.Ay)(new Date,"YYYY-MM-DD"),e.covidPrueba.resultado=0,e.covidPrueba.id=null,e.covidPrueba.adjuntos=[],e.$notify("Se grabó correctamente","success"),n.n=4;break;case 3:n.p=3,n.v,e.$notify("No se pudo grabar la prueba","warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},updatePruebaCovid:function(e){var n=this;return L()(N()().m(function o(){return N()().w(function(o){while(1)switch(o.n){case 0:n.covidPrueba.id=e.id,n.covidPrueba.fecha=(0,re.Ay)(new Date(e.fecha),"YYYY-MM-DD"),n.covidPrueba.resultado=e.resultado,n.covidPrueba.adjuntos=[],n.covidPrueba.adjuntos.push(e.adjunto);case 1:return o.a(2)}},o)}))()},deletePruebaCovid:function(e,n){var o=this;return L()(N()().m(function a(){var r,t;return N()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,(0,te.confirmacion)("Se eliminará esta Prueba Covid","¿Está seguro de realizar esta acción?");case 1:if(r=a.v,!r){a.n=5;break}return a.p=2,a.n=3,o.$http.post("api/CovidPrueba/deletePruebaCovid",{id:e});case 3:t=o.getPruebasCovid(n),o.covidPrueba.data=t,o.$notify("Se eliminó correctamente","success"),a.n=5;break;case 4:a.p=4,a.v,o.$notify("No se pudo eliminar la prueba","warning");case 5:return a.a(2)}},a,null,[[2,4]])}))()},srcPrueba:function(e){return"".concat(this.sie.api,"/HyoContenido/pruebacovid/").concat(e.id,"?sie-token=").concat(this.sie.token)},getVacunasCovid:function(e){var n=this;return L()(N()().m(function o(){var a;return N()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$http.get("api/CovidVacuna/getVacunasCovid",{params:{idpersona:e}});case 1:return a=o.v,n.covidVacuna.data=a,o.a(2,a)}},o)}))()},getVacunas:function(){var e=this;return L()(N()().m(function n(){var o;return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/HyoVacuna/obtVacunasCovid");case 1:o=n.v,e.covidVacuna.options=o.map(function(e){return{label:e.VACDES,value:e.VACCOD}});case 2:return n.a(2)}},n)}))()},saveVacunaCovid:function(){var e=this;return L()(N()().m(function n(){var o,a,r;return N()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.covidVacuna.fecha){n.n=1;break}return e.$notify("Seleccione la fecha en que se aplicó la dosis","warning"),n.a(2);case 1:if(null!==e.covidVacuna.vaccod){n.n=2;break}return e.$notify("Seleccione la vacuna que se aplicó","warning"),n.a(2);case 2:if(null!==e.covidVacuna.lugar){n.n=3;break}return e.$notify("Escriba el lugar donde se vacunó","warning"),n.a(2);case 3:if(o={id_persona:e.covidVacuna.id_persona,fecha:e.covidVacuna.fecha,vaccod:e.covidVacuna.vaccod,lugar:e.covidVacuna.lugar},1!==e.covidVacuna.adjuntos.length){n.n=4;break}o.adjunto=e.covidVacuna.adjuntos[0],n.n=5;break;case 4:if(0!==e.covidVacuna.adjuntos.length){n.n=5;break}if(!e.covidVacuna.requiredAttachment){n.n=5;break}return e.$notify("Debe adjuntar la constancia","warning"),n.a(2);case 5:return e.covidVacuna.id&&(o.id=e.covidVacuna.id),n.p=6,n.n=7,e.$http.post("api/CovidVacuna/saveVacunaCovid",o);case 7:a=e.getVacunasCovid(e.covidVacuna.id_persona),e.covidVacuna.data=a,e.covidVacuna.id=null,e.covidVacuna.fecha=(0,re.Ay)(new Date,"YYYY-MM-DD"),e.covidVacuna.vaccod=null,e.covidVacuna.lugar=null,e.covidVacuna.adjuntos=[],e.$notify("Se grabó correctamente","success"),n.n=9;break;case 8:n.p=8,r=n.v,e.$notify(r.error&&r.error.message?r.error.message:"No se pudo grabar la vacuna","warning");case 9:return n.a(2)}},n,null,[[6,8]])}))()},updateVacunaCovid:function(e){this.covidVacuna.id=e.id,this.covidVacuna.fecha=(0,re.Ay)(new Date(e.fecha),"YYYY-MM-DD"),this.covidVacuna.vaccod=e.vaccod,this.covidVacuna.lugar=e.lugar,this.covidVacuna.adjuntos=[],this.covidVacuna.adjuntos.push(e.adjunto)},deleteVacunaCovid:function(e,n){var o=this;return L()(N()().m(function a(){var r,t;return N()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,(0,te.confirmacion)("Se eliminará esta Vacuna Covid","¿Está seguro de realizar esta acción?");case 1:if(r=a.v,!r){a.n=5;break}return a.p=2,a.n=3,o.$http.post("api/CovidVacuna/deleteVacunaCovid",{id:e});case 3:t=o.getVacunasCovid(n),o.covidVacuna.data=t,o.$notify("Se eliminó correctamente","success"),a.n=5;break;case 4:a.p=4,a.v,o.$notify("No se pudo eliminar la vacuna","warning");case 5:return a.a(2)}},a,null,[[2,4]])}))()},srcVacuna:function(e){return"".concat(this.sie.api,"/HyoContenido/vacunacovid/").concat(e.id,"?sie-token=").concat(this.sie.token)}},created:function(){var e=this;return L()(N()().m(function n(){return N()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.inscripcionList();case 1:if(!e.sie.famcod){n.n=3;break}return n.n=2,e.$http.get("api/familia/getResponsables");case 2:e.responsables=n.v;case 3:return n.a(2)}},n)}))()}},ue=o(12807);const ce=(0,ue.A)(ie,[["render",R]]);var le=ce}}]);