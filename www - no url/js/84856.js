"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[84856],{84856:function(e,n,o){o.r(n),o.d(n,{default:function(){return B}});var s=o(8445),r=o.n(s),t=(o(30683),o(71225),o(50310),o(5962),o(83190),o(61758)),a=o(58790),i={class:"row q-gutter-xs q-py-sm"},u={class:"col"},l={class:"row q-pa-sm q-col-gutter-sm"},c={class:"col-xs-12 column items-center"},d={class:"row q-pa-sm q-col-gutter-sm"},m={class:"col-12"},f={class:"col-12"},g={class:"col-12 sie-flat"},p={class:"row q-pa-sm q-col-gutter-sm sie-flat"},C={class:"col column justify-center"},h={class:"row"},w={class:"row q-pa-sm q-col-gutter-sm"},v={class:"col-12"},A={class:"col-12"},b={class:"col-12 sie-flat"},U={class:"row q-pa-sm q-p"},S={class:"col-xs-12"};function y(e,n){var o=this,s=(0,t.g2)("loading"),y=(0,t.g2)("header-btn"),k=(0,t.g2)("sie-ngs"),D=(0,t.g2)("q-select"),N=(0,t.g2)("q-btn"),O=(0,t.g2)("q-card-section"),I=(0,t.g2)("sie-table"),$=(0,t.g2)("q-card"),L=(0,t.g2)("sie-modal"),x=(0,t.g2)("q-tooltip"),q=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(q,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(s,{ref:"loading",modelValue:e.loading,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.loading=n}),label:"Asignando Docentes Y Alumnos A Los Cursos",type:"proceso",porcentage:e.sumPorcentage},null,8,["modelValue","porcentage"]),(0,t.bF)($,{flat:""},{default:(0,t.k6)(function(){return[!0===e.isLogged?((0,t.uX)(),(0,t.Wv)(y,{key:0,name:"Asignar Usuarios Cursos",buttons:e.buttons,"max-buttons":e.sizes},null,8,["buttons","max-buttons"])):((0,t.uX)(),(0,t.Wv)(y,{key:1,name:"Asignar Usuarios Cursos",buttons:e.buttonsLogin,auto:!1},null,8,["buttons"])),(0,t.bF)(O,null,{default:(0,t.k6)(function(){return[(0,t.bF)(k,{class:"q-col-gutter-sm",ref:"ngs1",onChange:e.getNGS1,"is-request":""},null,8,["onChange"]),(0,t.Lk)("div",i,[(0,t.Lk)("div",u,[(0,t.bF)(D,{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",modelValue:e.docente,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.docente=n}),options:e.docentes,onFilter:e.filter,"option-value":"id","option-label":"fullName",label:"Seleccione Docente",type:"outlined",onInput:e.getCursos,"emit-value":!1},null,8,["modelValue","options","onFilter","onInput"])]),(0,t.bF)(N,{icon:"refresh",onClick:n[2]||(n[2]=function(n){return e.getUsers("%%%")}),size:"xs",color:"primary",style:{"font-size":"10px"}})])]}),_:1}),(0,t.bF)(O,null,{default:(0,t.k6)(function(){return[(0,t.bF)(y,{name:"Cursos SieWeb Asociados a Cursos Classroom"}),(0,t.bF)(I,{ref:"cursos",selection:"single",data:e.rows,columns:e.fields,config:e.config,context:o,css:"height: calc(100vh - 290px)"},null,8,["data","columns","config"])]}),_:1})]}),_:1}),(0,t.bF)(L,{modelValue:e.openModalAsignarUsuariosCursos,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.openModalAsignarUsuariosCursos=n}),css:{width:"500px"},footer:!1,title:"Asignar Usuarios Cursos",ok:!1,"esc-click":""},{default:(0,t.k6)(function(){return[(0,t.bF)(k,{class:"q-pa-sm q-col-gutter-sm",ref:"ngs","class-nivel":"col-xs-12","class-grado":"col-xs-12","class-seccion":"col-xs-12"},null,512),(0,t.Lk)("div",l,[(0,t.Lk)("div",c,[(0,t.bF)(N,{icon:"settings",label:"Generar",color:"primary",size:"sm",onClick:n[3]||(n[3]=function(n){return e.autogenerarUsuariosACursos(void 0)})})])])]}),_:1},8,["modelValue"]),(0,t.bF)(L,{modelValue:e.openModalDocentesCurso,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.openModalDocentesCurso=n}),title:"".concat(e.currentCurso.DESCAMBITO," - ").concat(e.currentCurso.CURSONOM),css:{width:"600px"},footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",d,[(0,t.Lk)("div",m,[(0,t.bF)(y,{name:"",buttons:e.buttonEnviarInvitacion},null,8,["buttons"])]),(0,t.Lk)("div",f,[e.hasInvitados?((0,t.uX)(),(0,t.Wv)(y,{key:0,buttons:e.buttonInvitacion},null,8,["buttons"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",g,[(0,t.bF)(I,{"show-search":!1,ref:"tablaDocentesCurso",data:e.rowsUsuarioCurso,columns:e.fieldsUsuarioCurso,css:"height: calc(70vh - 112px)",config:e.configUsuarioCurso,context:o},null,8,["data","columns","config"])])])]}),_:1},8,["modelValue","title"]),(0,t.bF)(L,{modelValue:e.openModalAlumnos,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.openModalAlumnos=n}),title:"".concat(e.currentCurso.DESCAMBITO," - ").concat(e.currentCurso.CURSONOM),css:{width:"800px"},footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",p,[(0,t.Lk)("div",{class:"col-xs-5",style:(0,a.Tr)("width:".concat(e.$q.screen.lt.sm?"100":"47","%"))},[(0,t.bF)(y,{name:"Usuarios Asigandos Curso","font-size":"16px"}),(0,t.bF)(I,{ref:"refAlumnosAsignados","load-disabled":e.loadDisabled,data:e.rowsAlumnos,columns:e.fieldsAlumnos,config:e.configAlumnos,selection:"multiple",context:o,css:"height: calc(70vh - 112px)"},null,8,["load-disabled","data","columns","config"])],4),(0,t.Lk)("div",C,[(0,t.Lk)("div",h,[(0,t.Lk)("div",{class:(0,a.C4)(["col-xs-12 column","items-".concat(e.$q.screen.lt.sm?"start":"center")])},[(0,t.bF)(N,{icon:"arrow_right",size:"12px",color:"primary",dense:"",flat:"",round:"",onClick:e.retirarCurso},{default:(0,t.k6)(function(){return[(0,t.bF)(x,null,{default:(0,t.k6)(function(){return r()(n[11]||(n[11]=[(0,t.eW)("Retirar Usuarios",-1)]))}),_:1})]}),_:1},8,["onClick"])],2),(0,t.Lk)("div",{class:(0,a.C4)(["col-xs-12 column","items-".concat(e.$q.screen.lt.sm?"end":"center")]),onClick:n[6]||(n[6]=function(){return e.asignarCurso&&e.asignarCurso.apply(e,arguments)})},[(0,t.bF)(N,{icon:"arrow_left",size:"12px",color:"primary",dense:"",flat:"",round:""},{default:(0,t.k6)(function(){return[(0,t.bF)(x,null,{default:(0,t.k6)(function(){return r()(n[12]||(n[12]=[(0,t.eW)("Asignar Usuarios",-1)]))}),_:1})]}),_:1})],2)])]),(0,t.Lk)("div",{class:"col-xs-5",style:(0,a.Tr)("width:".concat(e.$q.screen.lt.sm?"100":"47","%"))},[(0,t.bF)(y,{name:"Usuarios Por Asignar","font-size":"16px"}),(0,t.bF)(I,{ref:"refAlumnosPorAsignar","load-disabled":e.loadDisabled,data:e.rowsAlumnosPorAsignar,columns:e.fieldsAlumnos,config:e.configAlumnos,selection:"multiple",context:o,css:"height: calc(70vh - 112px)"},null,8,["load-disabled","data","columns","config"])],4)])]}),_:1},8,["modelValue","title"]),(0,t.bF)(L,{modelValue:e.openModalAlumnosCurso,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.openModalAlumnosCurso=n}),title:"Alumnos",css:{width:"600px"},footer:!1},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",w,[(0,t.Lk)("div",v,[(0,t.bF)(y,{name:"",buttons:e.buttonEnviarInvitacion},null,8,["buttons"])]),(0,t.Lk)("div",A,[e.hasInvitados?((0,t.uX)(),(0,t.Wv)(y,{key:0,buttons:e.buttonInvitacion},null,8,["buttons"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",b,[(0,t.bF)(I,{"show-search":!1,ref:"tablaAlumnosCurso",data:e.rowsUsuarioCurso,columns:e.fieldsUsuarioCurso,css:"height: calc(70vh - 112px)",config:e.configUsuarioCurso,context:o},null,8,["data","columns","config"])])])]}),_:1},8,["modelValue"]),(0,t.bF)(L,{modelValue:e.openModalCorreo,"onUpdate:modelValue":n[10]||(n[10]=function(n){return e.openModalCorreo=n}),title:"Correo",css:{width:"200px"},onSubmit:e.invitar},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",U,[(0,t.Lk)("div",S,[(0,t.bF)(D,{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",modelValue:e.addDocente,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.addDocente=n}),options:e.dataAddDocentes,onFilter:e.addDocentesFilter,"option-value":"id","option-label":"fullName",label:"Seleccione Docente",type:"outlined","emit-value":!1},null,8,["modelValue","options","onFilter"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var k=o(76080),D=o.n(k),N=o(45254),O=o.n(N),I=(o(39866),o(52133),o(10239),o(89571),o(56285),o(6724),o(70199),o(515),o(52776),o(84433),o(62692),o(7346),o(95718)),$=o(16648),L=o(9736),x=o(3112),q={data:function(){return{config:{alumnos:{component:"button",icon:["users"],users:function(e){var n=this;return O()(D()().m(function o(){return D()().w(function(o){while(1)switch(o.n){case 0:n.coursesStudentList=[],n.rowsAlumnos=[],n.currentCurso=e,n.openModalAlumnos=!0,n.getAlumnosPorCurso(e);case 1:return o.a(2)}},o)}))()},tooltip:{users:"Ver Alumnos"},validate:{users:function(e){return"SI"===e.homologado||e.ID_AMBITO}},flat:!0},DOCENTE:{tooltip:{docente:"Docentes"},component:"button",icon:["teaching as docente"],docente:function(e){var n=this;return O()(D()().m(function o(){var s,r;return D()().w(function(o){while(1)switch(o.n){case 0:return n.invitadoPorCorreo="",n.rowsUsuarioCurso=[],n.currentCurso=e,o.n=1,n.getUsersForce();case 1:return o.n=2,n.$http.get("api/HyoClassRoomAdmin/getCoursesUsers",{params:{idCurso:e.COURSEID,type:"docente"}});case 2:s=o.v,r=s.users,n.rowsUsuarioCurso=r,n.openModalDocentesCurso=!0;case 3:return o.a(2)}},o)}))()},flat:!0,dense:!0},ALUMNO:{tooltip:{alumno:"Alumnos"},component:"button",icon:["boy as alumno"],alumno:function(e){var n=this;return O()(D()().m(function o(){var s,r;return D()().w(function(o){while(1)switch(o.n){case 0:return n.invitadoPorCorreo="",n.rowsUsuarioCurso=[],n.currentCurso=e,o.n=1,n.$http.get("api/HyoClassRoomAdmin/getCoursesUsers",{params:{idCurso:e.COURSEID,type:"alumno"}});case 1:s=o.v,r=s.users,n.rowsUsuarioCurso=r,n.openModalAlumnosCurso=!0;case 2:return o.a(2)}},o)}))()},flat:!0,dense:!0}},rows:[],fields:[{name:"DESCAMBITO",label:"Descripción",field:"DESCAMBITO",align:"left"},{name:"GRUPO",label:"Grupo",field:"GRUPO",align:"left"},{name:"alumnos",label:"Alumnos SieWeb",field:"alumnos",align:"center",maxWidth:50},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left"},{name:"NGS",label:"NGS",field:"NGS",align:"left"},{name:"DOCENTE",label:"Docente",field:"DOCENTE",align:"center",maxWidth:50}]}}},E={data:function(){return{configUsuarioCurso:{success:{renderHtml:function(e,n){return!1===e.success?n("span",{class:["text-negative"]},"Usuario no agregado"):"string"===typeof e.success?n("span",{class:["text-positive"]},"Usuario agregado"):n("span",{},"")}},accion:{component:"button",icon:["delete as eliminar","remove"],validate:{eliminar:function(e){return!e.isNew},remove:function(e){return!0===e.isNew}},tooltip:{eliminar:"Eliminar",remove:"Quitar De La Lista",send:"Enviar"},remove:function(e,n){this.rowsUsuarioCurso.splice(this.rowsUsuarioCurso.indexOf(n),1)},eliminar:function(e,n){var o=this;return O()(D()().m(function s(){var r;return D()().w(function(s){while(1)switch(s.p=s.n){case 0:return s.p=0,s.n=1,o.$confirmar("¿Seguro que quieres quitar a este ".concat(e.esDocente?"docente":"alumno"," de la clase?"),"delete");case 1:if(r=s.v,!r){s.n=3;break}return s.n=2,o.$http.delete("api/HyoClassRoomAdmin/deleteCoursesUsers",{params:{idCurso:o.currentCurso.COURSEID,userId:[e.emailAddress],esDocente:e.esDocente}});case 2:o.rowsUsuarioCurso.splice(o.rowsUsuarioCurso.indexOf(n),1);case 3:s.n=5;break;case 4:s.p=4,s.v,o.$notify("No ha sido posible quitar al usuario de la clase","warning");case 5:return s.a(2)}},s,null,[[0,4]])}))()},flat:!0,dense:!0}},rowsUsuarioCurso:[],fieldsUsuarioCurso:[{name:"success",label:"",field:"success",align:"left",maxWidth:0},{name:"emailAddress",label:"Correo",field:"emailAddress",align:"left"},{name:"fullName",label:"Nombres",field:"fullName",align:"left"},{name:"accion",label:"Acción",field:"accion",align:"center"}]}}},R={data:function(){return{configAlumnos:{USERID:{renderHtml:function(e,n,o){return e.USERID?o.background({text:e.USERID,textColor:"white",color:"primary"}):n("span",{},"")}}},rowsAlumnos:[],rowsAlumnosPorAsignar:[],loadDisabled:{key:"USERID",values:[]},fieldsAlumnos:[{name:"USERID",label:"Correo",field:"USERID",align:"center",sortable:!0},{name:"NOMCOMP",label:"Alumno",field:"NOMCOMP",align:"left",sortable:!0}]}}},F=o(11654),M=o(30640),P=o(80660),_=o(85226),V=o(36667),G=o(6123),H=o(95655),J=o(81288),T=function(e){return e.filter(function(e){return!0===e.isNew})},z={components:{QTooltip:G.nC,sieNgs:V.A,QInput:L.A,QCheckbox:x.A,loading:_.A,QCardSection:I.A,QSelect:$.A,QBtn:F.A,sieModal:M.A,QPage:G.Tu,QCard:G.C$},mixins:[q,E,R],data:function(){return{dataAddDocentes:[],addDocente:"",docentes:[],docente:"",docentesCopy:[],dataAddDocentesCopy:[],buttons:[{icon:"refresh",label:"Actualizar",click:this.getCursos},{icon:"account_settings_variant",label:"Asignar Usuarios Cursos",click:this.openAsignarUsuariosCursos},{label:"Cerrar Sesión",icon:"account_lock",click:this.cerrarSesionAdmin}],buttonsLogin:[{label:"Iniciar Sesión",icon:"vpn_key",click:this.login}],sizes:{0:[0,600],1:[600,1040],2:[1040]},buttonInvitacion:[{label:"Agregar Al Curso",icon:"user_add",click:this.enviarInvitados}],buttonEnviarInvitacion:[{label:"Agregar Usuario",icon:"send",click:this.agregarInvitados}],openModalAsignarUsuariosCursos:!1,openModalDocentesCurso:!1,openModalAlumnosCurso:!1,openModalCorreo:!1,openModalAlumnos:!1,currentCurso:{},loading:!1,sumPorcentage:0,resetAlumnos:Date.now(),isLogged:!1,coursesStudentList:[],currentNGS:"%%%"}},computed:{hasInvitados:function(){return T(this.rowsUsuarioCurso).length>0}},methods:{login:function(){var e=this;return O()(D()().m(function n(){var o,s;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,delete window.localStorage._apiGoogle,e.isLogged=!1,n.n=1,e.$http.post("api/HyoLoginGoogleAdmin/login");case 1:o=n.v,"string"===typeof o?(0,H["default"])(o,"_system",500,500):e.isLogged=!0,n.n=3;break;case 2:n.p=2,s=n.v,console.log(s),e.$notify("Intentalo nuevamente.","warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},cerrarSesionAdmin:function(){var e=this;return O()(D()().m(function n(){var o,s,r;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/HyoLoginGoogleAdmin/cerrarSesionAdmin");case 1:o=n.v,s=o.message,e.$notify(s,"success"),e.$router.push({name:"intranet.muro"}),e.isLogged=!1,n.n=3;break;case 2:n.p=2,r=n.v,e.$notify(r.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},getAlumnosPorCurso:function(e,n){var o=this;return O()(D()().m(function s(){var r,t,a,i,u,l,c,d;return D()().w(function(s){while(1)switch(s.n){case 0:return s.n=1,o.$http.get("api/HyoClassRoomAdmin/getCoursesUsers",{params:{idCurso:e.COURSEID,type:"alumno",pageToken:n}});case 1:if(r=s.v,t=r.users,a=r.nextPageToken,o.coursesStudentList=o.coursesStudentList.concat(t),!a){s.n=2;break}return o.getAlumnosPorCurso(e,a),s.a(2);case 2:return s.n=3,o.$http.get("api/HyoClassRoomAdmin/getAlumnosPorCurso",{params:{idCurso:e.COURSEID||""}});case 3:i=s.v,o.coursesStudentList=o.coursesStudentList.map(function(e){return e.emailAddress}),u=o.loadAndDisabled(i,o.coursesStudentList),l=u.loadDisabled,c=u.usuariosCurso,d=u.usuariosCursoPorAsignar,o.rowsAlumnos=c,o.rowsAlumnosPorAsignar=d,o.loadDisabled=l;case 4:return s.a(2)}},s)}))()},loadAndDisabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o={key:"ALUCOD",values:[]},s=[],r=[];return e.map(function(e){e.ALUCOD&&e.USERID?n.includes(e.USERID)?s[s.length]=e:r[r.length]=e:(r[r.length]=e,o.values[o.values.length]=e.ALUCOD)}),{loadDisabled:o,usuariosCurso:s,usuariosCursoPorAsignar:r}},retirarCurso:function(){var e=this;return O()(D()().m(function n(){var o,s,r;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:if(o=JSON.parse(JSON.stringify(e.rowsAlumnosPorAsignar)),s=e.$refs.refAlumnosAsignados.rowsSelected(null,null,!0),o=s.concat(o),r=e.$refs.refAlumnosAsignados.rowsSelected(["USERID"],s),!(r.length>0)){n.n=5;break}return n.p=1,e.$q.loading.show(),n.n=2,e.$http.delete("api/HyoClassRoomAdmin/deleteCoursesUsers",{params:{idCurso:e.currentCurso.COURSEID,userId:r,esDocente:!1}});case 2:s.map(function(n){e.rowsAlumnos.splice(e.rowsAlumnos.indexOf(n),1)}),e.rowsAlumnosPorAsignar=o,e.$notify("Se ha retirado a los alumnos del curso."),n.n=4;break;case 3:n.p=3,n.v,e.$notify("No ha sido posible retirar del curso a los alumnos seleccionados.","warning");case 4:e.$q.loading.hide();case 5:return n.a(2)}},n,null,[[1,3]])}))()},asignarCurso:function(){var e=this;return O()(D()().m(function n(){var o,s,r;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:if(o=JSON.parse(JSON.stringify(e.rowsAlumnos)),s=e.$refs.refAlumnosPorAsignar.rowsSelected(null,null,!0),o=s.concat(o),r=e.$refs.refAlumnosPorAsignar.rowsSelected(["USERID"],s),!(r.length>0)){n.n=4;break}return n.p=1,e.$q.loading.show(),n.n=2,e.$http.post("api/HyoClassRoomAdmin/sendInvitation",{courseId:e.currentCurso.COURSEID,userIds:r,type:"alumno"});case 2:s.map(function(n){e.rowsAlumnosPorAsignar.splice(e.rowsAlumnosPorAsignar.indexOf(n),1)}),e.rowsAlumnos=o,e.$notify("Se ha asignado los alumnos seleccionados al curso."),n.n=4;break;case 3:n.p=3,n.v,e.$notify("No ha sido posible asignar los alumnos seleccionados al curso.","warning");case 4:e.$q.loading.hide();case 5:return n.a(2)}},n,null,[[1,3]])}))()},agregarInvitados:function(){this.openModalCorreo=!0},enviarInvitados:function(){var e=this;return O()(D()().m(function n(){var o,s,r,t,a;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,e.$q.loading.show(),o=[],s=JSON.parse(JSON.stringify(e.rowsUsuarioCurso)),s.map(function(e){!0===e.isNew&&o.push(e.emailAddress)}),r=e.currentCurso.COURSEID,n.n=1,e.$http.post("api/HyoClassRoomAdmin/sendInvitation",{courseId:r,userIds:o,type:!0===e.openModalDocentesCurso?"docente":"alumno"});case 1:t=n.v,a={},t.map(function(e){Object.prototype.hasOwnProperty.call(e,"profile")&&(a[e.profile.emailAddress]=e)}),s.map(function(e){var n=a[e.emailAddress];n?(e.fullName="".concat(n.profile.name.familyName||"",", ").concat(n.profile.name.givenName||""),e.isNew&&(e.success="Usuario agregado")):e.isNew&&(e.success=!1),delete e.isNew}),e.rowsUsuarioCurso=s,n.n=3;break;case 2:n.p=2,n.v,e.$notify("Ha ocurrido un problema, inténtalo más tarde.","warning");case 3:e.$q.loading.hide();case 4:return n.a(2)}},n,null,[[0,2]])}))()},getNGS1:function(e){var n=this;return O()(D()().m(function o(){return D()().w(function(o){while(1)switch(o.n){case 0:return n.currentNGS=e,o.n=1,n.getUsers(e);case 1:return o.n=2,n.getCursos(e);case 2:return o.a(2)}},o)}))()},getNGS:function(){return this.$http.post("api/salon/getComboSalones")},invitar:function(){var e=this;return O()(D()().m(function n(){var o,s,r;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:if(o=(e.addDocente||{}).id||"",s=/^([\da-z_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$|me/,!s.test(o)){n.n=7;break}if(r=!1,e.rowsUsuarioCurso.map(function(e){e.emailAddress===o&&(r=!0)}),!1!==r){n.n=6;break}return n.p=1,e.$q.loading.show(),n.n=2,e.$http.post("api/HyoClassRoomAdmin/sendInvitation",{courseId:e.currentCurso.COURSEID,userIds:[o],type:"docente"});case 2:return{fullName:e.addDocente.fullName,esDocente:!0,emailAddress:o},n.n=3,e.config.DOCENTE.docente.call(e,{COURSEID:e.currentCurso.COURSEID});case 3:e.$notify("Se agregó ".concat(e.addDocente.fullName," a este curso.")),n.n=5;break;case 4:n.p=4,n.v,e.$notify("No ha sido posible agregar al usuario a este curso.","warning");case 5:return e.$q.loading.hide(),n.a(2);case 6:return e.$notify("Correo ya ha sido agregado","error"),n.a(2);case 7:e.$notify("Ingresa un correo válido.","error");case 8:return n.a(2)}},n,null,[[1,4]])}))()},openAsignarUsuariosCursos:function(){var e=this;return O()(D()().m(function n(){return D()().w(function(n){while(1)switch(n.n){case 0:e.openModalAsignarUsuariosCursos=!0;case 1:return n.a(2)}},n)}))()},autogenerarUsuariosACursosPorDocente:function(){var e=(this.docente||{}).fullName||"";e?this.autogenerarUsuariosACursos(e):this.$notify("Seleccione un docente","info")},autogenerarUsuariosACursos:function(e){var n=this;return O()(D()().m(function o(){var s;return D()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,n.loading=!0,s=n.$refs.ngs.NGS(),o.n=1,(0,P.streamFetch)("api/HyoClassRoomAdmin/asignarDocentesAlumnos",{method:"POST",data:{profesor:e,filter:s}},function(e,o){var s=o.total,r=o.loaded;n.sumPorcentage=n.$refs.loading.progress(s,r)});case 1:n.sumPorcentage=0,n.$notify("Proceso completado","success"),o.n=3;break;case 2:o.p=2,o.v,n.$notify("No ha sido posible completar el proceso","success");case 3:n.loading=!1;case 4:return o.a(2)}},o,null,[[0,2]])}))()},getUsers:function(e){var n=this;return O()(D()().m(function o(){var s,r,t;return D()().w(function(o){while(1)switch(o.n){case 0:return e=e||"%%%",o.n=1,n.$http.get("api/HyoDirectory/getDocentesSieWebAsociados",{params:{ngs:e}});case 1:s=o.v,r=s.users,t=JSON.parse(JSON.stringify(r)),n.docentesCopy=JSON.parse(JSON.stringify(t)),n.docentes=t;case 2:return o.a(2)}},o)}))()},getUsersForce:function(e){var n=this;return O()(D()().m(function o(){var s,r,t,a;return D()().w(function(o){while(1)switch(o.n){case 0:return e=e||"%%%",o.n=1,n.$http.get("api/HyoDirectory/getDocentesSieWebAsociados",{params:{ngs:e,forzarDocentesAsociados:!0}});case 1:s=o.v,r=s.users,t=JSON.parse(JSON.stringify(r)),a=JSON.parse(JSON.stringify(t)),a.unshift({usucod:"me",fullName:"Cuenta Administrador",id:"me",primaryEmail:"me"}),n.dataAddDocentesCopy=JSON.parse(JSON.stringify(a)),n.dataAddDocentes=a;case 2:return o.a(2)}},o)}))()},filter:function(e,n){var o=this;n(function(){try{o.docentes=o.docentesCopy.filter(function(n){return n["fullName"].toLowerCase().indexOf(e.toLowerCase())>-1})}catch(e){}})},addDocentesFilter:function(e,n){var o=this;n(function(){try{o.dataAddDocentes=o.dataAddDocentesCopy.filter(function(n){return n["fullName"].toLowerCase().indexOf(e.toLowerCase())>-1})}catch(e){}})},getCursos:function(){var e=this;return O()(D()().m(function n(){var o,s;return D()().w(function(n){while(1)switch(n.n){case 0:return o=(e.docente||{}).fullName||"",n.n=1,e.$http.get("api/HyoClassRoomAdmin/cursosAsociadoPorDocente",{params:{profesor:o,ngs:e.currentNGS}});case 1:s=n.v,e.rows=s;case 2:return n.a(2)}},n)}))()}},created:function(){var e=this;return O()(D()().m(function n(){return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.login();case 1:window.currentSieCloud=!1,(0,J.watchAuth2)(["_apiGoogle"],function(){var n=O()(D()().m(function n(o,s){var r,t,a,i;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:a=s,n.n="_apiGoogle"===a?1:6;break;case 1:return e.$q.loading.show(),n.p=2,n.n=3,e.$http.post("api/HyoLoginGoogleAdmin/guardarCodigo",{codigo:o});case 3:r=n.v,e.isLogged=!0,e.$notify(r.message,"success"),n.n=5;break;case 4:n.p=4,i=n.v,t=i.error||{},e.$notify(t.msg||t.message||"No ha sido posible iniciar sesión.","warning");case 5:return e.$q.loading.hide(),n.a(3,6);case 6:return n.a(2)}},n,null,[[2,4]])}));return function(e,o){return n.apply(this,arguments)}}());case 2:return n.a(2)}},n)}))()},unmounted:function(){window.callback&&window.removeEventListener("storage",window.callback.cb)},beforeCreate:function(){window.callback&&window.removeEventListener("storage",window.callback.cb)}},W=o(12807);const Q=(0,W.A)(z,[["render",y]]);var B=Q}}]);