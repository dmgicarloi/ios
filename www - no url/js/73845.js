"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[73845],{73845:function(e,a,n){n.r(a),n.d(a,{default:function(){return K}});n(56285);var t=n(61758),o={class:"intranet--colegio q-pa-sm col column"},r={class:"row"},s={class:"col"},l={key:0,class:"col"},i={class:"row"},c={class:"col"},u={class:"col"},d={class:"col"},p={class:"row q-col-gutter-md"},m={class:"col-3"},f={class:"row"},b={class:"col-12"};function g(e,a){var n=(0,t.g2)("header-btn"),g=(0,t.g2)("q-tab"),h=(0,t.g2)("q-tabs"),y=(0,t.g2)("datosPrincipales"),v=(0,t.g2)("q-tab-panel"),k=(0,t.g2)("sie-upload"),w=(0,t.g2)("tema"),C=(0,t.g2)("facebook-page-plugin"),S=(0,t.g2)("sie-vacio"),F=(0,t.g2)("q-tab-panels"),L=(0,t.g2)("q-card"),E=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(E,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.bF)(L,{class:"column col",flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{name:"Institución Educativa",buttons:e.buttons},null,8,["buttons"]),(0,t.bF)(h,{class:"q-caption separator",modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.tab=a}),inverted:"",align:"left",dense:"",onInput:e.goTab},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{name:"tab-1",label:"Datos Institucionales"}),(0,t.bF)(g,{name:"tab-2",label:"Escudo / Login"}),(0,t.bF)(g,{name:"tab-3",label:"Presentación"}),(0,t.bF)(g,{name:"tab-4",label:"Temas"}),(0,t.bF)(g,{name:"tab-5",label:"Redes - Vista previa"})]}),_:1},8,["modelValue","onInput"]),(0,t.bF)(F,{class:"col column",modelValue:e.tab,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.tab=a}),animated:""},{default:(0,t.k6)(function(){return[(0,t.bF)(v,{name:"tab-1"},{default:(0,t.k6)(function(){return[(0,t.bF)(y,{ref:"refDatosPrincipales"},null,512)]}),_:1}),(0,t.bF)(v,{name:"tab-2"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",s,[(0,t.bF)(k,{onUpload:e.uploadEscudo,name:!0,title:"Clic para subir una imagen con fondo transparente en formato png para mostrar dentro del sistema",allow:["jpeg","jpg","png"],src:e.prevEscudo},null,8,["onUpload","src"])]),e.showLogoUpload?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)("div",l,[(0,t.bF)(k,{onUpload:e.uploadLogo,name:!0,title:"Clic para subir una imagen con fondo transparente en formato png para mostrar en el login",allow:["jpeg","jpg","png"],src:e.prevLogo},null,8,["onUpload","src"])]))])]}),_:1}),(0,t.bF)(v,{name:"tab-3"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",i,[(0,t.Lk)("div",c,[(0,t.bF)(k,{onUpload:e.uploadSlides1,name:!0,allow:["jpeg","jpg","png"],src:e.slide1.name,title:"Clic para subir imagen que se mostrará en la pantalla de login",botones:"",remove:"",edit:!1,onDelete:a[1]||(a[1]=function(a){return e.eliminarSlide(e.slide1.name,1)})},null,8,["onUpload","src"])]),(0,t.Lk)("div",u,[(0,t.bF)(k,{onUpload:e.uploadSlides2,name:!0,allow:["jpeg","jpg","png"],src:e.slide2.name,title:"Clic para subir imagen que se mostrará en la pantalla de login",botones:"",remove:"",edit:!1,onDelete:a[2]||(a[2]=function(a){return e.eliminarSlide(e.slide2.name,2)})},null,8,["onUpload","src"])]),(0,t.Lk)("div",d,[(0,t.bF)(k,{onUpload:e.uploadSlides3,name:!0,allow:["jpeg","jpg","png"],src:e.slide3.name,title:"Clic para subir imagen que se mostrará en la pantalla de login",botones:"",remove:"",edit:!1,onDelete:a[3]||(a[3]=function(a){return e.eliminarSlide(e.slide3.name,3)})},null,8,["onUpload","src"])])])]}),_:1}),(0,t.bF)(v,{name:"tab-4"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",p,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.temas,function(a){return(0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(w,{primary:a.primary,secondary:a.secondary,selected:a.selected,onSetTema:function(n){return e.setTema(a)},acceso:e.acceso},null,8,["primary","secondary","selected","onSetTema","acceso"])])}),256))])]}),_:1}),(0,t.bF)(v,{name:"tab-5"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",f,[(0,t.Lk)("div",b,[e.FACEBOOK?((0,t.uX)(),(0,t.Wv)(C,{key:0,url:e.FACEBOOK},null,8,["url"])):((0,t.uX)(),(0,t.Wv)(S,{key:1,icon:"thumb_up",title:"No ha registrado un FanPage para mostrar",subtitle:"En la pestaña DATOS INSTITUCIONALES ingrese la ruta de su FanPage"}))])])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})])]}),_:1})}var h=n(76080),y=n.n(h),v=n(45254),k=n.n(v),w=(n(71225),n(52133),n(10239),n(50310),n(5962),n(90095),n(6724),n(11777),n(515),n(83190),n(52776),n(33092),n(13715),n(6123)),C=n(88567),S=n(95718),F=n(26697),L=n(53093),E=n(53811),T=n(43346),A=n(59089),U=n(80340),q=n(76109),j=n(58790);function P(e,a){var n=(0,t.g2)("q-card-section"),o=(0,t.g2)("q-btn"),r=(0,t.g2)("q-card-actions"),s=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(s,{flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(n,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",{class:"block-tema",style:(0,j.Tr)({background:e.primary})},null,4),(0,t.Lk)("div",{class:"block-tema",style:(0,j.Tr)({background:e.secondary})},null,4)]}),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)(function(){return[(0,t.bF)(o,{class:"full-width",block:"",label:e.selectedCaption,icon:"check",color:e.selected?"primary":"secondary",disable:e.selected||!e.acceso,onClick:e.setTema},null,8,["label","color","disable","onClick"])]}),_:1})]}),_:1})}var D=n(20456),O={emits:["setTema"],name:"tema",components:{QCard:C.A,QCardSection:S.A,QCardActions:D.A,QRadio:w.$,QBtn:w.Il},props:{primary:{type:String,required:!0},secondary:{type:String,required:!0},selected:{type:Boolean,default:!1},acceso:{type:Boolean,required:!0}},computed:{selectedCaption:function(){return this.selected?"Seleccionado":"Seleccionar"}},methods:{setTema:function(){this.$emit("setTema")}}},Q=n(12807);const _=(0,Q.A)(O,[["render",P]]);var $=_,B=n(93586),H=n(33950),I=n(982),V=n(57668),N={components:{QCard:C.A,QCardSection:S.A,QTabs:F.A,QTab:L.A,QTabPanels:E.A,QTabPanel:T.A,SieVacio:U.A,SieUpload:A.A,FacebookPagePlugin:q.A,Tema:$,DatosPrincipales:B.A,QPage:w.Tu},data:function(){return{tab:"tab-1",sie:(0,V["default"])(),acceso:(0,V["default"])().ruta.nivel>=2,urlEscudo:null,urlLogo:null,prevEscudo:null,prevLogo:null,showLogoUpload:!1,contSlides:0,slides:[],slide1:{name:"",image:null},slide2:{name:"",image:null},slide3:{name:"",image:null},tema:[],temas:[{primary:"#562598",secondary:"#51d0a6",selected:!1},{primary:"#00796b",secondary:"#f39237",selected:!1},{primary:"#134074",secondary:"#449dd1",selected:!1},{primary:"#33691e",secondary:"#7cb342",selected:!1},{primary:"#003075",secondary:"#f39237",selected:!1},{primary:"#1976d2",secondary:"#03a9f4",selected:!1},{primary:"#795548",secondary:"#ef9d24",selected:!1},{primary:"#a8201a",secondary:"#0f8b8d",selected:!1},{primary:"#546e7a",secondary:"#7cb342",selected:!1},{primary:"#c1361e",secondary:"#669c41",selected:!1},{primary:"#622a26",secondary:"#a87f65",selected:!1},{primary:"#395479",secondary:"#0f8b8d",selected:!1},{primary:"#4f5d75",secondary:"#ef8354",selected:!1},{primary:"#80293a",secondary:"#83a845",selected:!1},{primary:"#3d6057",secondary:"#84a98c",selected:!1},{primary:"#1d4e89",secondary:"#00b2ca",selected:!1},{primary:"#041e42",secondary:"#6C1D45",selected:!1},{primary:"#041e42 ",secondary:"#c4d600",selected:!1},{primary:"#6C1D45",secondary:"#AC8400",selected:!1},{primary:"#6C1D45",secondary:"#c4d600",selected:!1}],FACEBOOK:null,slidesActualizados:!1}},computed:{buttons:function(){var e=this,a=[];return"tab-1"===this.tab&&a.push({icon:"save",label:"Grabar Colegio",permiso:">=2",click:function(){e.grabarColegio()}}),"tab-2"===this.tab&&a.push({icon:"save",label:"Grabar Escudos",permiso:">=2",click:function(){e.subirEscudo()}}),"tab-3"===this.tab&&a.push({icon:"save",label:"Grabar Presentación",permiso:">=2",click:function(){e.subirSlides()}}),a}},mounted:function(){var e=this;return k()(y()().m(function a(){return y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.init();case 1:return a.a(2)}},a)}))()},methods:{goTab:function(){var e=this;return k()(y()().m(function a(){return y()().w(function(a){while(1)switch(a.n){case 0:if(e.$refs.refDatosPrincipales&&(e.FACEBOOK=e.$refs.refDatosPrincipales.formColegio.FACEBOOK),"tab-3"!==e.tab||e.slidesActualizados){a.n=1;break}return a.n=1,e.obtenerSlides();case 1:return a.a(2)}},a)}))()},init:function(){var e=this;return k()(y()().m(function a(){return y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.obtenerSlides();case 1:return a.n=2,e.obtenerEscudo();case 2:return a.n=3,e.obtenerTema();case 3:return a.a(2)}},a)}))()},obtenerSlides:function(){var e=this;return k()(y()().m(function a(){var n,t,o;return y()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoColegios/getSlidesAll");case 1:for(n=a.v,t=0;t<n.length;t++)o=n[t].match(/\/slide\/([^\/-]+)-/),isNaN(Number(o[1]))||(e["slide".concat(Number(o[1])+1)].name=n[t]);case 2:return a.a(2)}},a)}))()},obtenerEscudo:function(){var e=this;return k()(y()().m(function a(){var n,t;return y()().w(function(a){while(1)switch(a.n){case 0:return n=e.sie.api+"/HyoEscudo/imagen/escudo",e.prevEscudo=n,e.showLogoUpload||(e.prevLogo=n),a.n=1,e.$http.get("api/HyoColegios/imagen/logo.png");case 1:t=a.v,t.success&&(e.showLogoUpload=!1,e.prevLogo=e.sie.api+"/HyoEscudo/imagen/logo");case 2:return a.a(2)}},a)}))()},grabarColegio:function(){this.$refs.refDatosPrincipales.grabarColegio()},eliminarSlide:function(e,a){var n=this;return k()(y()().m(function t(){var o;return y()().w(function(t){while(1)switch(t.n){case 0:if(!e){t.n=2;break}return t.n=1,n.$http.post("api/HyoColegios/eliminarSlide",{slide:e});case 1:o=t.v,1===a&&n.limpiarSlide(n.slide1),2===a&&n.limpiarSlide(n.slide2),3===a&&n.limpiarSlide(n.slide3),(0,I["default"])(o.json.message);case 2:return t.a(2)}},t)}))()},limpiarSlide:function(e){var a=Object.keys(e);a.forEach(function(a){e[a]=""})},upload:function(e,a){var n=this;(0,H["default"])({file:e[0]}).then(function(e){switch(a){case"e":n.urlEscudo=e.name;break;case"l":n.urlLogo=e.name;break}}).catch(function(e){console.log(e)})},uploadEscudo:function(e){this.upload(e,"e")},uploadLogo:function(e){this.upload(e,"l")},subirEscudo:function(){var e=this,a=[];this.urlEscudo&&a.push({temp:this.urlEscudo,nombre:"escudo.png"}),!this.showLogoUpload&&this.urlLogo&&a.push({temp:this.urlLogo,nombre:"logo.png"}),this.$http.post("api/HyoColegios/subirEscudo",{config:a,sinLogo:this.showLogoUpload}).then(function(a){e.urlEscudo=e.urlLogo=null,(0,I["default"])(a.message,"success")}).catch(function(e){console.log(e)})},uploadSlides:function(e,a){var n=this;(0,H["default"])({file:e[0]}).then(function(e){n.slides[a]=e.name,0===a&&(n.slide1.name=e.name),1===a&&(n.slide2.name=e.name),2===a&&(n.slide3.name=e.name),n.slidesActualizados=!0}).catch(function(e){console.error(e)})},uploadSlides1:function(e){this.uploadSlides(e,0)},uploadSlides2:function(e){this.uploadSlides(e,1)},uploadSlides3:function(e){this.uploadSlides(e,2)},subirSlides:function(){var e=this;return k()(y()().m(function a(){var n,t;return y()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,e.$http.post("api/HyoColegios/subirSlides",{slides:e.slides});case 1:return n=a.v,e.slides=[],a.n=2,e.obtenerSlides();case 2:e.manualUpload=!1,(0,I["default"])(n.json.message),a.n=4;break;case 3:a.p=3,t=a.v,(0,I["default"])(t.message,"warning");case 4:return a.a(2)}},a,null,[[0,3]])}))()},obtenerTema:function(){var e=this;return k()(y()().m(function a(){var n,t,o,r;return y()().w(function(a){while(1)switch(a.p=a.n){case 0:return e.tema=[],a.p=1,a.n=2,e.$http.get("api/HyoColegios/obtTema");case 2:n=a.v,e.tema=n.json.tema,t=e.tema[0].value,o=e.tema[1].value,w.Tj.setBrand("primary",t),w.Tj.setBrand("secondary",o),e.tema.length>0&&(r=e.temas.filter(function(e){return e.primary===t&&e.secondary===o}),r[0].selected=!r[0].selected),a.n=4;break;case 3:a.p=3,a.v,e.tema=[];case 4:return a.a(2)}},a,null,[[1,3]])}))()},setTema:function(e){var a=this;this.temas.map(function(e){e.selected=!1}),this.$http.post("api/HyoColegios/setTema",{tema:e}).then(function(e){(0,I["default"])("Tema seleccionado correctamente","success"),a.obtenerTema()}).catch(function(e){(0,I["default"])(e.message,"error")})}}};const X=(0,Q.A)(N,[["render",g]]);var K=X}}]);