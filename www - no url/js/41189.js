"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[41189],{41189:function(e,o,n){n.r(o),n.d(o,{default:function(){return Mo}});n(56285);var i=n(61758),r=n(58790),t=n(29104),a={class:"row q-col-gutter-sm q-pb-md"},l={class:"col"},c={class:"row q-pt-md q-col-gutter-sm"},s={class:"col-xs-12 col-sm-6 col-md-4 col-lg-1"},d={class:"col-xs-12 col-sm-6 col-md-4 col-lg-2"},u={class:"col-xs-12 col-sm-6 col-md-4 col-lg-4"},v={class:"col-xs-12 col-sm-6 col-md-6 col-lg-2"},m={class:"row q-col-gutter-sm q-pb-md"},f={class:"col-xs-8"},b={class:"col-xs-4"},p={class:"row q-col-gutter-sm q-pa-md"},g={class:"col-xs-6"},D={class:"row q-col-gutter-sm q-pa-md"},I={class:"col-xs-12"},h={class:"col-xs-12"},F={class:"col-xs-12"},R={class:"col-xs-12"},S={key:0,class:"col-xs-12"},C={class:"col-xs-12 col-md-12"},_={class:"col-xs-12 col-md-12"},A={class:"col-xs-12 col-md-12"},j={key:0,class:"div q-col-gutter-sm q-mb-sm"},O={class:"div"},k={class:"col-xs-6"},w={class:"row q-col-gutter-sm"},E={class:"col-xs-12"},V={class:"row q-col-gutter-sm"},T={class:"col-xs-12"},x={class:"row q-col-gutter-sm"},L={class:"col-xs-12"},U={class:"row q-col-gutter-sm"},N={class:"col-xs-12"},M={class:"row q-col-gutter-sm"},q={class:"col-xs-12"},y={class:"row q-col-gutter-sme"},P={class:"col-xs-12"},G={class:"row q-col-gutter-sm q-pa-md"},Q={class:"col-xs-2"},$={class:"col-xs-4"},H={class:"col-xs-4"},z={class:"col-xs-2"},X={class:"col-xs-12"},W={class:"row q-col-gutter-sm q-pa-md"},B={class:"col-xs-3"},Z={class:"col-xs-9"},Y={class:"row q-col-gutter-sm"},K={class:"col-xs-12"},J={class:"row q-col-gutter-sm"},ee={class:"col-xs-12"},oe={class:"row q-col-gutter-sm"},ne={class:"col-xs-12"},ie={class:"row q-col-gutter-sm"},re={class:"col-xs-12"},te={class:"row q-col-gutter-sm"},ae={class:"col-xs-12"},le={class:"row q-col-gutter-sme"},ce={class:"col-xs-12"},se={class:"row q-col-gutter-sme"},de={class:"col-xs-12"},ue={key:0,class:"row q-col-gutter-sm q-pa-md justify-center"},ve={class:"col-xs-4"},me={class:"row q-col-gutter-sm q-pa-md"},fe={class:"col-xs-3"},be={class:"col-xs-9"},pe={class:"row q-col-gutter-sm"},ge={class:"col-xs-6"},De={class:"col-xs-6"},Ie={class:"col-xs-6"},he={class:"col-xs-6"},Fe={class:"col-xs-12"},Re={class:"row q-col-gutter-sm"},Se={class:"col-xs-12"},Ce={class:"col-xs-12"},_e={class:"col-xs-12"},Ae={class:"row q-col-gutter-sm"},je={class:"col-xs-12"},Oe={class:"col-xs-12"},ke={class:"col-xs-12"},we={class:"row q-col-gutter-sm"},Ee={class:"col-xs-12 col-md-12"},Ve={class:"col-xs-12 col-md-12"},Te={key:0,class:"div q-col-gutter-sm q-mb-sm"},xe={class:"div"},Le={class:"col-xs-12"},Ue={class:"row q-col-gutter-sm q-pa-md"},Ne={class:"col-xs-12"},Me={class:"col-xs-12"},qe={class:"col-xs-12"},ye={class:"row q-col-gutter-sm q-pa-md"},Pe={class:"col-xs-12"},Ge={class:"row q-col-gutter-sm q-pa-md"},Qe={key:0,class:"col-xs-12"},$e={class:"col-xs-12"},He={class:"col-xs-12"},ze={class:"col-xs-12"},Xe={class:"col-xs-12"},We={class:"col-xs-12"};function Be(e,o){var n=this,Be=(0,i.g2)("header-btn"),Ze=(0,i.g2)("q-spinner-oval"),Ye=(0,i.g2)("q-inner-loading"),Ke=(0,i.g2)("q-select"),Je=(0,i.g2)("q-date"),eo=(0,i.g2)("q-popup-proxy"),oo=(0,i.g2)("q-icon"),no=(0,i.g2)("q-input-v1"),io=(0,i.g2)("sie-table"),ro=(0,i.g2)("q-card-section"),to=(0,i.g2)("q-card"),ao=(0,i.g2)("q-input"),lo=(0,i.g2)("q-item-section"),co=(0,i.g2)("q-item"),so=(0,i.g2)("q-list"),uo=(0,i.g2)("q-tooltip"),vo=(0,i.g2)("q-btn"),mo=(0,i.g2)("q-card-separator"),fo=(0,i.g2)("q-card-title"),bo=(0,i.g2)("q-chip"),po=(0,i.g2)("sie-cloud"),go=(0,i.g2)("sie-modal"),Do=(0,i.g2)("q-form"),Io=(0,i.g2)("q-tab"),ho=(0,i.g2)("q-tab-pane"),Fo=(0,i.g2)("q-tabs"),Ro=(0,i.g2)("sie-pdf"),So=(0,i.g2)("q-download-file"),Co=(0,i.g2)("q-toolbar"),_o=(0,i.g2)("q-option-group"),Ao=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(Ao,{class:"bg-white q-pa-sm sie-flat"},{default:(0,i.k6)(function(){return[(0,i.Q3)(" LISTADO PRINCIPAL "),(0,i.bF)(to,null,{default:(0,i.k6)(function(){return[(0,i.bF)(Be,{name:"Registro de Derivaciones",buttons:e.buttons},null,8,["buttons"]),(0,i.bF)(ro,{style:{height:"calc(100vh - 125px)"}},{default:(0,i.k6)(function(){return[(0,i.bF)(Ye,{visible:e.loading},{default:(0,i.k6)(function(){return[(0,i.bF)(Ze,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),(0,i.Lk)("div",a,[(0,i.Lk)("div",l,[(0,i.Lk)("div",c,[(0,i.Lk)("div",s,[(0,i.bF)(Ke,{class:"q-ma-none",label:"Prioridad",type:"outlined","option-value":"ID_DE_PRIORIDAD","option-label":"TITULO",modelValue:e.objVmFiltro.id_de_prioridad,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.objVmFiltro.id_de_prioridad=o}),options:e.dataCboFiltro.dataPrioridad},null,8,["modelValue","options"])]),(0,i.Lk)("div",d,[(0,i.bF)(Ke,{class:"q-ma-none",label:"Etapa",type:"outlined","option-value":"ID_DE_ETAPA","option-label":"TITULO",modelValue:e.objVmFiltro.id_de_etapa,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.objVmFiltro.id_de_etapa=o}),options:e.dataCboFiltro.dataEtapa},null,8,["modelValue","options"])]),(0,i.Lk)("div",u,[(0,i.bF)(Ke,{class:"q-ma-none",label:"Filtrar Usuario (Derivado a)",type:"outlined","option-value":"USUCOD","option-label":"USUNOM",modelValue:e.objVmFiltro.usucod,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.objVmFiltro.usucod=o}),options:e.dataCboFiltro.dataUsuario},null,8,["modelValue","options"])]),(0,i.Lk)("div",v,[(0,i.bF)(no,{label:"Fecha Registro (Hasta:)",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.objVmFiltro.fecreg,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.objVmFiltro.fecreg=o}),mask:"##/##/####",readonly:""},{append:(0,i.k6)(function(){return[(0,i.bF)(oo,{class:"cursor-pointer",name:"date_range"},{default:(0,i.k6)(function(){return[(0,i.bF)(eo,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)(function(){return[(0,i.bF)(Je,{mask:"DD/MM/YYYY",modelValue:e.objVmFiltro.fecreg,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.objVmFiltro.fecreg=o}),onInput:o[4]||(o[4]=function(o){return e.$refs.qDateProxy1.hide()})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])])])]),(0,i.Lk)("div",m,[(0,i.Lk)("div",f,[(0,i.bF)(io,{selection:"single",columns:e.fields,ref:"refGrillaDerivaciones",data:e.dataComputedDerivacion,config:e.config,context:n,onRowSelected:e.getListaIntervenciones,css:{height:"calc(100vh - 270px)"}},null,8,["columns","data","config","onRowSelected"])]),(0,i.Lk)("div",b,[(0,i.bF)(io,{selection:"single",columns:e.fieldsDeInterv,ref:"refGrillaIntervenciones",data:e.dataDeInterv,config:e.configDeInterv,context:n,"show-index":"",css:{height:"calc(100vh - 270px)"}},null,8,["columns","data","config"])])])]}),_:1})]}),_:1}),(0,i.Q3)(" REGISTRO DERIVACION "),(0,i.bF)(go,{class:"registro-derivacion",modelValue:e.modal.openModalDerivacion,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.modal.openModalDerivacion=o}),title:"Registrar Derivación",onSubmit:e.guardarDerivacion,escClick:!0,esc:!0},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",p,[(0,i.Lk)("div",g,[(0,i.Lk)("div",D,[(0,i.Lk)("div",I,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFormDerivacion.nemo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.objFormDerivacion.nemo=o}),options:e.dataCboForm.dataSalones,"option-label":"NEMODES","option-value":"NEMO",label:"Seleccionar Salón",onInput:e.getDatosAlumnosDerivar},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",h,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFormDerivacion.id_persona,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.objFormDerivacion.id_persona=o}),options:e.dataCboForm.dataAlumnos,"option-label":"NOMCOMP","option-value":"ID_PERSONA",label:"Seleccionar Alumno"},null,8,["modelValue","options"])]),(0,i.Lk)("div",F,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFormDerivacion.usucod,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.objFormDerivacion.usucod=o}),options:e.dataCboForm.dataUsuario,"option-label":"USUNOM","option-value":"USUCOD",label:"Seleccionar Psicólogo"},null,8,["modelValue","options"])]),(0,i.Lk)("div",R,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFormDerivacion.id_de_prioridad,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.objFormDerivacion.id_de_prioridad=o}),options:e.dataCboForm.dataPrioridad,"option-label":"TITULO","option-value":"ID_DE_PRIORIDAD",label:"Seleccionar Prioridad"},null,8,["modelValue","options"])]),e.verDescripcion?((0,i.uX)(),(0,i.CE)("div",S,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormDerivacion.descripcion,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.objFormDerivacion.descripcion=o}),type:"textarea","float-label":"Detalle de la derivación","max-height":3,rows:3},null,8,["modelValue"])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",C,[(0,i.bF)(so,{class:"q-pa-none",bordered:"",separator:"",highlight:""},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.dataTabsDeriva,function(o){return(0,i.uX)(),(0,i.Wv)(co,{key:o.ID,clickable:"",active:!0,class:(0,r.C4)({"q-item-active":o.ID===e.tabDerivaSelected,"bg-primary":o.ID===e.tabDerivaSelected,"text-white":o.ID===e.tabDerivaSelected,"cursor-pointer":e.tabDerivaSelected===o.ID}),onClick:function(n){return e.openTab(o)}},{default:(0,i.k6)(function(){return[(0,i.bF)(lo,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(o.DESCRIPCION),1)]}),_:2},1024)]}),_:2},1032,["class","onClick"])}),128))]}),_:1})]),(0,i.Lk)("div",_,[(0,i.bF)(fo,null,{right:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(vo,{icon:"plus",size:"sm",color:"secondary",onClick:o[11]||(o[11]=function(o){return e.openModalAgregarArchivos()})},{default:(0,i.k6)(function(){return[(0,i.bF)(uo,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(e.$t("agregar")),1)]}),_:1})]}),_:1})])]}),default:(0,i.k6)(function(){return[o[52]||(o[52]=(0,i.eW)("Agregar Archivos",-1)),(0,i.bF)(mo)]}),_:1})]),(0,i.Lk)("div",A,[e.archivos&&e.archivos.length>0?((0,i.uX)(),(0,i.CE)("div",j,[(0,i.Lk)("div",O,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.archivos,function(o,n){return(0,i.uX)(),(0,i.Wv)(bo,{key:n,class:"q-ma-xs",onRemove:function(o){return e.deleteFile(n)},dense:"",icon:o.ICONO.icon,outline:"",color:"primary","text-color":"white",removable:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(o.name),1)]}),_:2},1032,["onRemove","icon"])}),128))])])):(0,i.Q3)("v-if",!0)])]),(0,i.bF)(go,{class:"derivacion-modal-adjuntos",modelValue:e.addArchivosopen,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.addArchivosopen=o}),title:"Agregar archivos",header:!0,footer:!0,onSubmit:e.closeModalAgregarArchivos,css:{minWidth:"50vw",maxWidth:"60vw",minHeight:"30vh"}},{default:(0,i.k6)(function(){return[(0,i.bF)(po,{modelValue:e.archivos,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.archivos=o})},null,8,["modelValue"])]}),_:1},8,["modelValue","onSubmit"])]),(0,i.Lk)("div",k,[(0,i.bo)((0,i.Lk)("div",w,[(0,i.Lk)("div",E,[(0,i.bF)(io,{columns:e.fieldsMotivos,data:e.dataMotivos,config:e.configMotivos,selection:"multiple",ref:"refGrillaMotivosDeriva","row-key":"MOTCOD",context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"motivos"===e.tabDerivaSelected]]),"otros_motivos"===e.tabDerivaSelected?((0,i.uX)(),(0,i.Wv)(Do,{key:0,ref:"formDerivacion"},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.dataOtrosMotivos,function(o,n){return(0,i.uX)(),(0,i.CE)("div",V,[(0,i.Lk)("div",T,[e.validarOMD?((0,i.uX)(),(0,i.Wv)(no,{key:0,rules:[e.required],modelValue:e.objFormDerivacion.otrosMotivos[o.SECUCOD],"onUpdate:modelValue":function(n){return e.objFormDerivacion.otrosMotivos[o.SECUCOD]=n},type:"textarea",label:o.SECUDES,"max-height":3,rows:3},null,8,["rules","modelValue","onUpdate:modelValue","label"])):((0,i.uX)(),(0,i.Wv)(ao,{key:1,class:"q-if-outlined",modelValue:e.objFormDerivacion.otrosMotivos[o.SECUCOD],"onUpdate:modelValue":function(n){return e.objFormDerivacion.otrosMotivos[o.SECUCOD]=n},type:"textarea","float-label":o.SECUDES,"max-height":3,rows:3},null,8,["modelValue","onUpdate:modelValue","float-label"]))])])}),256))]}),_:1},512)):(0,i.Q3)("v-if",!0),(0,i.bo)((0,i.Lk)("div",x,[(0,i.Lk)("div",L,[(0,i.bF)(io,{columns:e.fieldsRendAprendizaje,data:e.dataRendAprendizaje,config:e.configRendAprendizaje,selection:"multiple",ref:"refGrillaDifRendAcad","row-key":"MOTCOD",context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_rend_acad"===e.tabDerivaSelected]]),(0,i.bo)((0,i.Lk)("div",U,[(0,i.Lk)("div",N,[(0,i.bF)(io,{columns:e.fieldsComport,data:e.dataComport,config:e.configComport,selection:"multiple",ref:"refGrillaDifComp","row-key":"MOTCOD",context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_comp"===e.tabDerivaSelected]]),(0,i.bo)((0,i.Lk)("div",M,[(0,i.Lk)("div",q,[(0,i.bF)(io,{columns:e.fieldsSocioemo,data:e.dataSocioemo,config:e.configSocioemo,selection:"multiple",ref:"refGrillaDifSocioeco","row-key":"MOTCOD",context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_socioeco"===e.tabDerivaSelected]]),(0,i.bo)((0,i.Lk)("div",y,[(0,i.Lk)("div",P,[(0,i.bF)(io,{columns:e.fieldsDifFam,data:e.dataDifFam,config:e.configDifFam,selection:"multiple",ref:"refGrillaAmbFam","row-key":"MOTCOD",context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_amb_fam"===e.tabDerivaSelected]])])])]}),_:1},8,["modelValue","onSubmit"]),(0,i.Q3)(" REGISTRO INTERVENCION / CIERRE DE DERIVACION "),(0,i.bF)(go,{class:"registro-intervencion",modelValue:e.modal.openModalIntervencion,"onUpdate:modelValue":o[38]||(o[38]=function(o){return e.modal.openModalIntervencion=o}),title:e.setTituloInterv,onSubmit:e.actualizarDatos,escClick:!0,esc:!0},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",G,[(0,i.Lk)("div",Q,[(0,i.bF)(no,{modelValue:e.objFormIntervencion.salon,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.objFormIntervencion.salon=o}),label:"Salón",readonly:""},null,8,["modelValue"])]),(0,i.Lk)("div",$,[(0,i.bF)(no,{modelValue:e.objFormIntervencion.alumno,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.objFormIntervencion.alumno=o}),label:"Alumno",readonly:""},null,8,["modelValue"])]),(0,i.Lk)("div",H,[(0,i.bF)(no,{modelValue:e.objFormIntervencion.psicologo,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.objFormIntervencion.psicologo=o}),label:"Psicólogo",readonly:""},null,8,["modelValue"])]),(0,i.Lk)("div",z,[(0,i.bF)(no,{modelValue:e.objFormIntervencion.prioridad,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.objFormIntervencion.prioridad=o}),label:"Prioridad de la derivación",readonly:""},null,8,["modelValue"])]),(0,i.Lk)("div",X,[(0,i.bF)(no,{modelValue:e.objFormIntervencion.descripcion,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.objFormIntervencion.descripcion=o}),type:"textarea",label:"Detalle de la derivación","max-height":6,rows:6,readonly:""},null,8,["modelValue"])])]),(0,i.bF)(Fo,{inverted:"",ref:"tabs",animated:""},{title:(0,i.k6)(function(){return[(0,i.bF)(Io,{default:"",name:"tab-1",label:"Detalles de la Derivación","no-caps":""}),(0,i.bF)(Io,{name:"tab-2",label:e.setLblTab2},null,8,["label"]),"cierre-derivacion"===n.origen?((0,i.uX)(),(0,i.Wv)(Io,{key:0,name:"tab-3",label:"Cierre de la Derivación"})):(0,i.Q3)("v-if",!0)]}),default:(0,i.k6)(function(){return[(0,i.bF)(ho,{name:"tab-1"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",W,[(0,i.Lk)("div",B,[(0,i.bF)(so,{class:"q-pa-none",bordered:"",separator:"",highlight:""},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.dataTabsInterv,function(o){return(0,i.uX)(),(0,i.Wv)(co,{key:o.ID,clickable:"",active:!0,class:(0,r.C4)({"q-item-active":o.ID===e.tabDerivaSelected,"bg-primary":o.ID===e.tabDerivaSelected,"text-white":o.ID===e.tabDerivaSelected,"cursor-pointer":e.tabDerivaSelected===o.ID}),onClick:function(n){return e.openTab(o)}},{default:(0,i.k6)(function(){return[(0,i.bF)(lo,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(o.DESCRIPCION),1)]}),_:2},1024)]}),_:2},1032,["class","onClick"])}),128))]}),_:1})]),(0,i.Lk)("div",Z,[(0,i.bo)((0,i.Lk)("div",Y,[(0,i.Lk)("div",K,[(0,i.bF)(io,{selection:"single",columns:e.fieldsMotivos,data:e.dataMotivosReg,config:e.configMotivos,"row-key":"MOTCOD",context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"motivos"===e.tabDerivaSelected]]),"otros_motivos"===e.tabDerivaSelected?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:0},(0,i.pI)(e.dataOtrosMotivos,function(o,n){return(0,i.uX)(),(0,i.CE)("div",J,[(0,i.Lk)("div",ee,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.otrosMotivos[o.SECUCOD],"onUpdate:modelValue":function(n){return e.objFormIntervencion.otrosMotivos[o.SECUCOD]=n},type:"textarea","float-label":o.SECUDES,"max-height":3,rows:3,disable:"",readonly:""},null,8,["modelValue","onUpdate:modelValue","float-label"])])])}),256)):(0,i.Q3)("v-if",!0),(0,i.bo)((0,i.Lk)("div",oe,[(0,i.Lk)("div",ne,[(0,i.bF)(io,{selection:"single",columns:e.fieldsRendAprendizaje,data:e.dataRendAprendizajeReg,config:e.configRendAprendizaje,context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_rend_acad"===e.tabDerivaSelected]]),(0,i.bo)((0,i.Lk)("div",ie,[(0,i.Lk)("div",re,[(0,i.bF)(io,{selection:"single",columns:e.fieldsComport,data:e.dataComportReg,config:e.configComport,context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_comp"===e.tabDerivaSelected]]),(0,i.bo)((0,i.Lk)("div",te,[(0,i.Lk)("div",ae,[(0,i.bF)(io,{selection:"single",columns:e.fieldsSocioemo,data:e.dataSocioemoReg,config:e.configSocioemo,context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_socioeco"===e.tabDerivaSelected]]),(0,i.bo)((0,i.Lk)("div",le,[(0,i.Lk)("div",ce,[(0,i.bF)(io,{selection:"single",columns:e.fieldsDifFam,data:e.dataDifFamReg,config:e.configDifFam,context:n,css:{height:"calc(60vh - 80px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"dif_amb_fam"===e.tabDerivaSelected]]),(0,i.bo)((0,i.Lk)("div",se,[(0,i.Lk)("div",de,[(0,i.bF)(io,{selection:"single","show-search":!1,"show-index":"",columns:e.fieldsDeArchivo,data:e.dataDeArchivo,config:e.configDeArchivo,context:n,css:{height:"calc(100vh - 340px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"de_archivo"===e.tabDerivaSelected]])])])]}),_:1}),(0,i.bF)(ho,{name:"tab-2"},{default:(0,i.k6)(function(){return["cierre-derivacion"===n.origen?((0,i.uX)(),(0,i.CE)("div",ue,[(0,i.Lk)("div",ve,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFormDerivacion.id_de_intervencion_filtro,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.objFormDerivacion.id_de_intervencion_filtro=o}),options:e.dataCboInterv,"option-label":"FH_REGISTRO","option-value":"ID_DE_INTERVENCION",label:"Seleccionar Fecha de Intervención Registrada: ",onInput:e.getDatosIntervHist},null,8,["modelValue","options","onInput"])])])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",me,[(0,i.Lk)("div",fe,[(0,i.bF)(so,{class:"q-pa-none",bordered:"",separator:"",highlight:""},{default:(0,i.k6)(function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.dataTabsIntervRegis,function(o){return(0,i.uX)(),(0,i.Wv)(co,{key:o.ID,clickable:"",active:!0,class:(0,r.C4)({"q-item-active":o.ID===e.tabDerivaIntervSelected,"bg-primary":o.ID===e.tabDerivaIntervSelected,"text-white":o.ID===e.tabDerivaIntervSelected,"cursor-pointer":e.tabDerivaSelected===o.ID}),onClick:function(n){return e.openTabInterv(o)}},{default:(0,i.k6)(function(){return[(0,i.bF)(lo,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(o.DESCRIPCION),1)]}),_:2},1024)]}),_:2},1032,["class","onClick"])}),128))]}),_:1})]),(0,i.Lk)("div",be,[(0,i.bo)((0,i.Lk)("div",pe,[o[53]||(o[53]=(0,i.Lk)("div",{class:"col-xs-12 q-pb-sm column items-center"},[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,"Situación Actual:")])],-1)),(0,i.Lk)("div",ge,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.sfdiagnostico,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.objFormIntervencion.sfdiagnostico=o}),type:"textarea","float-label":"Diagnóstico","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",De,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.sfterapia,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.objFormIntervencion.sfterapia=o}),type:"textarea","float-label":"Terapias","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",Ie,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.sffortaleza,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.objFormIntervencion.sffortaleza=o}),type:"textarea","float-label":"Fortalezas y Recursos","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",he,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.sfnecesidad,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.objFormIntervencion.sfnecesidad=o}),type:"textarea","float-label":"Necesidades","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",Fe,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.objetivo,"onUpdate:modelValue":o[25]||(o[25]=function(o){return e.objFormIntervencion.objetivo=o}),type:"textarea","float-label":"Objetivos","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])])],512),[[t.aG,"sit_act"===e.tabDerivaIntervSelected]]),(0,i.bo)((0,i.Lk)("div",Re,[o[54]||(o[54]=(0,i.Lk)("div",{class:"col-xs-12 q-pb-sm column items-center"},[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,"Acciones a desarrollar:")])],-1)),(0,i.Lk)("div",Se,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.accestudiante,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.objFormIntervencion.accestudiante=o}),type:"textarea","float-label":"Con el estudiante","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",Ce,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.accfamilia,"onUpdate:modelValue":o[27]||(o[27]=function(o){return e.objFormIntervencion.accfamilia=o}),type:"textarea","float-label":"Con la familia","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",_e,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.acctutor,"onUpdate:modelValue":o[28]||(o[28]=function(o){return e.objFormIntervencion.acctutor=o}),type:"textarea","float-label":"Con tutor y/o docentes","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])])],512),[[t.aG,"act_desarr"===e.tabDerivaIntervSelected]]),(0,i.bo)((0,i.Lk)("div",Ae,[o[55]||(o[55]=(0,i.Lk)("div",{class:"col-xs-12 q-pb-sm column items-center"},[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,"Recomendaciones:")])],-1)),(0,i.Lk)("div",je,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.rectutor,"onUpdate:modelValue":o[29]||(o[29]=function(o){return e.objFormIntervencion.rectutor=o}),type:"textarea","float-label":"Para tutor y/o docentes","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",Oe,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.recfamilia,"onUpdate:modelValue":o[30]||(o[30]=function(o){return e.objFormIntervencion.recfamilia=o}),type:"textarea","float-label":"Para la familia","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])]),(0,i.Lk)("div",ke,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormIntervencion.observacion,"onUpdate:modelValue":o[31]||(o[31]=function(o){return e.objFormIntervencion.observacion=o}),type:"textarea","float-label":"Observaciones adicionales","max-height":3,rows:3,disable:"cierre-derivacion"===n.origen||3===e.objFormIntervencion.tipo},null,8,["modelValue","disable"])])],512),[[t.aG,"recomend"===e.tabDerivaIntervSelected]]),(0,i.bo)((0,i.Lk)("div",we,["intervencion"===n.origen&&3!==e.objFormIntervencion.tipo?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[o[57]||(o[57]=(0,i.Lk)("div",{class:"col-xs-12 q-pb-sm column items-center"},[(0,i.Lk)("span",null,[(0,i.Lk)("b",null,"Archivos:")])],-1)),(0,i.Lk)("div",Ee,[(0,i.bF)(fo,null,{right:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(vo,{icon:"plus",size:"sm",color:"secondary",onClick:o[32]||(o[32]=function(o){return e.openModalAgregarArchivosInterv()})},{default:(0,i.k6)(function(){return[(0,i.bF)(uo,null,{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(e.$t("agregar")),1)]}),_:1})]}),_:1})])]}),default:(0,i.k6)(function(){return[o[56]||(o[56]=(0,i.eW)("Agregar Archivos",-1)),(0,i.bF)(mo)]}),_:1})]),(0,i.Lk)("div",Ve,[e.archivosInterv&&e.archivosInterv.length>0?((0,i.uX)(),(0,i.CE)("div",Te,[(0,i.Lk)("div",xe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.archivosInterv,function(o,n){return(0,i.uX)(),(0,i.Wv)(bo,{key:n,class:"q-ma-xs",onRemove:function(o){return e.deleteFileInterv(n)},dense:"",icon:o.ICONO.icon,outline:"",color:"primary","text-color":"white",removable:""},{default:(0,i.k6)(function(){return[(0,i.eW)((0,r.v_)(o.name),1)]}),_:2},1032,["onRemove","icon"])}),128))])])):(0,i.Q3)("v-if",!0)])],64)):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Le,[(0,i.bF)(io,{selection:"single","show-search":!1,"show-index":"",columns:e.fieldsDeArchivoInterv,data:e.dataDeArchivoInterv,config:e.configDeArchivoInterv,context:n,css:{height:"calc(100vh - 340px)"}},null,8,["columns","data","config"])])],512),[[t.aG,"de_archivo_interv"===e.tabDerivaIntervSelected]]),(0,i.bF)(go,{class:"derivacion-modal-adjuntos",modelValue:e.addArchivosopenInterv,"onUpdate:modelValue":o[34]||(o[34]=function(o){return e.addArchivosopenInterv=o}),title:"Agregar archivos",header:!0,footer:!0,onSubmit:e.closeModalAgregarArchivosInterv,css:{minWidth:"50vw",maxWidth:"60vw",minHeight:"30vh"}},{default:(0,i.k6)(function(){return[(0,i.bF)(po,{modelValue:e.archivosInterv,"onUpdate:modelValue":o[33]||(o[33]=function(o){return e.archivosInterv=o})},null,8,["modelValue"])]}),_:1},8,["modelValue","onSubmit"])])])]}),_:1}),"cierre-derivacion"===n.origen?((0,i.uX)(),(0,i.Wv)(ho,{key:0,name:"tab-3"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",Ue,[(0,i.Lk)("div",Ne,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormDerivacion.obsfinal1,"onUpdate:modelValue":o[35]||(o[35]=function(o){return e.objFormDerivacion.obsfinal1=o}),type:"textarea","float-label":e.lblCieDer1,"max-height":3,rows:3},null,8,["modelValue","float-label"])]),(0,i.Lk)("div",Me,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormDerivacion.obsfinal2,"onUpdate:modelValue":o[36]||(o[36]=function(o){return e.objFormDerivacion.obsfinal2=o}),type:"textarea","float-label":e.lblCieDer2,"max-height":3,rows:3},null,8,["modelValue","float-label"])]),(0,i.Lk)("div",qe,[(0,i.bF)(ao,{class:"q-if-outlined",modelValue:e.objFormDerivacion.obsfinal3,"onUpdate:modelValue":o[37]||(o[37]=function(o){return e.objFormDerivacion.obsfinal3=o}),type:"textarea","float-label":e.lblCieDer3,"max-height":3,rows:3},null,8,["modelValue","float-label"])])])]}),_:1})):(0,i.Q3)("v-if",!0)]}),_:1},512)]}),_:1},8,["modelValue","title","onSubmit"]),e.openModalPdf?((0,i.uX)(),(0,i.Wv)(go,{key:0,footer:!1,css:{width:"70%",height:"90%"},modelValue:e.openModalPdf,"onUpdate:modelValue":o[39]||(o[39]=function(o){return e.openModalPdf=o}),title:e.titleModalPdf},{default:(0,i.k6)(function(){return[(0,i.bF)(Ro,{src:e.url,style:{height:"100%"}},null,8,["src"])]}),_:1},8,["modelValue","title"])):(0,i.bo)(((0,i.uX)(),(0,i.Wv)(So,{key:1,ref:"downloadFile",src:e.url},null,8,["src"])),[[t.aG,!1]]),(0,i.Q3)(" REPORTES DE DERIVACION "),(0,i.bF)(go,{class:"reporte-derivacion",modelValue:e.modal.openModalReporte,"onUpdate:modelValue":o[51]||(o[51]=function(o){return e.modal.openModalReporte=o}),title:"Reportes",escClick:!0,esc:!0},{footer:(0,i.k6)(function(){return[(0,i.bF)(Co,{class:"justify-end",color:"grey-2"},{default:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(vo,{class:"q-mx-xs",label:"Excel",color:"primary",onClick:o[40]||(o[40]=function(o){return e.verReporte("xls")})}),(0,i.bF)(vo,{class:"q-mx-xs",label:"PDF",color:"primary",onClick:o[41]||(o[41]=function(o){return e.verReporte("pdf")})})])]}),_:1})]}),footerMobile:(0,i.k6)(function(){return[(0,i.Lk)("div",null,[(0,i.bF)(vo,{flat:"",round:"",dense:"",icon:"file_excel",onClick:o[42]||(o[42]=function(o){return e.verReporte("xls")})}),(0,i.bF)(vo,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:o[43]||(o[43]=function(o){return e.verReporte("pdf")})})])]}),default:(0,i.k6)(function(){return[(0,i.Lk)("div",ye,[o[58]||(o[58]=(0,i.Lk)("div",{class:"col-12 q-pb-sm"},[(0,i.Lk)("b",null,[(0,i.Lk)("span",null,"Reportes:")])],-1)),(0,i.Lk)("div",Pe,[(0,i.bF)(_o,{color:"secondary",type:"radio",modelValue:e.objFrmReportes.repcod,"onUpdate:modelValue":o[44]||(o[44]=function(o){return e.objFrmReportes.repcod=o}),options:e.objFrmReportes.reportes,onInput:e.cambiarReporte},null,8,["modelValue","options","onInput"])])]),(0,i.Lk)("div",Ge,[o[59]||(o[59]=(0,i.Lk)("div",{class:"col-12 q-pb-sm"},[(0,i.Lk)("b",null,[(0,i.Lk)("span",null,"Parametros:")])],-1)),e.objFrmReportes.mostrarUsuarios?((0,i.uX)(),(0,i.CE)("div",Qe,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFrmReportes.usucod,"onUpdate:modelValue":o[45]||(o[45]=function(o){return e.objFrmReportes.usucod=o}),options:e.objFrmReportes.dataUsuario,"option-label":"USUNOM","option-value":"USUCOD",label:"Seleccionar Psicólogo"},null,8,["modelValue","options"])])):(0,i.Q3)("v-if",!0),e.objFrmReportes.mostrarAlumno?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("div",$e,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFrmReportes.nemo,"onUpdate:modelValue":o[46]||(o[46]=function(o){return e.objFrmReportes.nemo=o}),options:e.objFrmReportes.dataSalones,"option-label":"NEMODES","option-value":"NEMO",label:"Seleccionar Salón",onInput:e.getDatosAlumnosReporte},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",He,[(0,i.bF)(Ke,{class:"sie-select-border q-ma-none",type:"outlined",noBottom:"",modelValue:e.objFrmReportes.id_persona,"onUpdate:modelValue":o[47]||(o[47]=function(o){return e.objFrmReportes.id_persona=o}),options:e.objFrmReportes.dataAlumnos,"option-label":"NOMCOMP","option-value":"ID_PERSONA",label:"Seleccionar Alumno"},null,8,["modelValue","options"])])],64)):(0,i.Q3)("v-if",!0),e.objFrmReportes.mostrarNGS?((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.Lk)("div",ze,[(0,i.bF)(Ke,{class:"q-ma-none",label:"Nivel",type:"outlined","option-value":"INSTRUCOD","option-label":"INSTRUDES",modelValue:e.objFrmReportes.nivel,"onUpdate:modelValue":o[48]||(o[48]=function(o){return e.objFrmReportes.nivel=o}),options:e.objFrmReportes.niveles,onInput:e.selectNivel},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",Xe,[(0,i.bF)(Ke,{class:"q-ma-none",label:"Grado",type:"outlined","option-value":"GRADOCOD","option-label":"GRADODES",modelValue:e.objFrmReportes.grado,"onUpdate:modelValue":o[49]||(o[49]=function(o){return e.objFrmReportes.grado=o}),options:e.objFrmReportes.grados,onInput:e.selectGrado},null,8,["modelValue","options","onInput"])]),(0,i.Lk)("div",We,[(0,i.bF)(Ke,{class:"q-ma-none",label:"Sección",type:"outlined","option-value":"SECCIONCOD","option-label":"SECCIONDES",modelValue:e.objFrmReportes.seccion,"onUpdate:modelValue":o[50]||(o[50]=function(o){return e.objFrmReportes.seccion=o}),options:e.objFrmReportes.secciones},null,8,["modelValue","options"])])],64)):(0,i.Q3)("v-if",!0)])]}),_:1},8,["modelValue"])]}),_:1})}var Ze=n(8445),Ye=n.n(Ze),Ke=n(76080),Je=n.n(Ke),eo=n(45254),oo=n.n(eo),no=(n(30683),n(71225),n(39866),n(52133),n(10239),n(89571),n(50310),n(5962),n(90095),n(6724),n(83190),n(13715),n(6123)),io=n(95718),ro=n(30640),to=n(32195),ao=n(9736),lo=n(2739),co=n(3112),so=n(16648),uo=n(4437),vo=n(95477),mo=n(23564),fo=n(99515),bo=n(95051),po=n(91134),go=n.n(po),Do={data:function(){return{config:{FH_REGISTRO:{component:"datetime",edit:!1},FH_ACTUALIZACION:{component:"datetime",edit:!1},ACTION:go()({prevent:!0,dense:!0,flat:!0,component:"button",icon:["add as agregarIntervencion","cierre_programado as cierreDerivacion","delete as eliminarDerivacion"],agregarIntervencion:function(e){var o=this;return oo()(Je()().m(function n(){return Je()().w(function(n){while(1)switch(n.n){case 0:o.agregarIntervencion(e);case 1:return n.a(2)}},n)}))()},cierreDerivacion:function(e){this.agregarIntervencion(e,!1,4,"cierre-derivacion")},eliminarDerivacion:function(e){var o=this;return oo()(Je()().m(function n(){var i,r;return Je()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.$confirmar("¿Realmente desea eliminar la derivación? El proceso es irreversible","delete");case 1:if(i=n.v,!i){n.n=4;break}if(!(o.dataDeInterv.length>0)){n.n=2;break}return o.$alert("Existe uno o más intervencioens registradas, no se puede eliminar la derivación","info"),n.a(2);case 2:return n.n=3,o.$http.delete("api/RegistroDerivacionesController/deleteDerivacion",{params:{id:e.ID_DE_DERIVACION}});case 3:return r=n.v,o.$notify(r.message),n.n=4,o.cargarDatosDerivacion();case 4:return n.a(2)}},n)}))()},validate:{agregarIntervencion:function(e){return this.isPsicologo},cierreDerivacion:function(e){return this.mostrarCierreDerivacion},eliminarDerivacion:function(e){return!0}},tooltip:{cierreDerivacion:"Cerrar Derivación",eliminarDerivacion:"Eliminar Derivación",agregarIntervencion:"Agregar Intervenciòn"}},"flat",!0)},fields:[{name:"NGS",label:"NGS",field:"NGS",align:"center",width:30,wrap:!0,sortable:!0},{name:"NOMCOMP",label:"Alumno",field:"NOMCOMP",align:"left",width:150,wrap:!0},{name:"USUNOM_DERIVA",label:"Derivado a",field:"USUNOM_DERIVA",align:"left",width:150,wrap:!0},{name:"USUNOM_REGISTRA",label:"Derivado por",field:"USUNOM_REGISTRA",align:"left",width:140,wrap:!0},{name:"DE_PRIORIDAD_DES",label:"Prioridad",field:"DE_PRIORIDAD_DES",width:55,align:"center"},{name:"DE_ETAPA_DES",label:"Estado",field:"DE_ETAPA_DES",width:70,align:"center"},{name:"FH_REGISTRO",label:"Fec. Reg",field:"FH_REGISTRO",align:"center",width:80,wrap:!0,sortable:!0},{name:"FH_ACTUALIZACION",label:"Últ. Act",field:"FH_ACTUALIZACION",align:"center",width:80,wrap:!0},{name:"ACTION",label:"Acciones",field:"ACTION",align:"center",width:70}],configMotivos:{},fieldsMotivos:[{name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center",width:40,wrap:!0,sortable:!0},{name:"SECUDES",label:"Descripción",field:"SECUDES",align:"left",width:130,wrap:!0,sortable:!0}],configRendAprendizaje:{},fieldsRendAprendizaje:[{name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center",width:40,wrap:!0,sortable:!0},{name:"SECUDES",label:"Descripción",field:"SECUDES",align:"left",width:130,wrap:!0,sortable:!0}],configComport:{},fieldsComport:[{name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center",width:40,wrap:!0,sortable:!0},{name:"SECUDES",label:"Descripción",field:"SECUDES",align:"left",width:130,wrap:!0,sortable:!0}],configSocioemo:{},fieldsSocioemo:[{name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center",width:40,wrap:!0,sortable:!0},{name:"SECUDES",label:"Descripción",field:"SECUDES",align:"left",width:130,wrap:!0,sortable:!0}],configDifFam:{},fieldsDifFam:[{name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center",width:40,wrap:!0,sortable:!0},{name:"SECUDES",label:"Descripción",field:"SECUDES",align:"left",width:130,wrap:!0,sortable:!0}]}}},Io=(n(37323),n(57668)),ho=n(18105),Fo={xlsx:"file_excel",xls:"file_excel",doc:"file_document",docx:"file_document",pdf:"file_pdf",txt:"file_text_o"},Ro={data:function(){return{configDeArchivo:{FH_REGISTRO:{component:"date",edit:!1},VISUALIZAR:{renderHtml:function(e,o,n){if(e.TITULO){var i=e.TITULO.split(".").reverse()[0];if(i)return n.icon({name:Fo[i]||"files_empty"})}return o("span",{},e.TITULO)},renderAction:function(e){var o=e.TITULO.split("."),n=o[o.length-1].toLowerCase();this.titleModalPdf=e.TITULO,this.url=this.getUrl(e),this.openModalPdf="pdf"===n,"pdf"!==n&&this.$refs.downloadFile.onClick()}},ACTION:{component:"button",icon:["delete as eliminar"],eliminar:function(e,o){var n=this;return oo()(Je()().m(function o(){var i;return Je()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$confirmar("¿Realmente desea eliminar el registro?","delete");case 1:i=o.v,i&&n.eliminarArchivo(e);case 2:return o.a(2)}},o)}))()},flat:!0}},dataDeArchivo:[],currentRowDeArchivo:{},fieldsDeArchivo:[{name:"TITULO",label:"Archivo",field:"TITULO",align:"left"},{name:"FH_REGISTRO",label:"Fecha y hora.",field:"FH_REGISTRO",align:"center"},{name:"VISUALIZAR",label:"Visualizar",field:"VISUALIZAR",align:"center"}]}}},So={xlsx:"file_excel",xls:"file_excel",doc:"file_document",docx:"file_document",pdf:"file_pdf",txt:"file_text_o"},Co={data:function(){return{configDeArchivoInterv:{FH_REGISTRO:{component:"date",edit:!1},VISUALIZAR:{renderHtml:function(e,o,n){if(e.TITULO){var i=e.TITULO.split(".").reverse()[0];if(i)return n.icon({name:So[i]||"files_empty"})}return o("span",{},e.TITULO)},renderAction:function(e){var o=e.TITULO.split("."),n=o[o.length-1].toLowerCase();this.titleModalPdf=e.TITULO,this.url=this.getUrl(e),this.openModalPdf="pdf"===n,"pdf"!==n&&this.$refs.downloadFile.onClick()}},ACTION:{component:"button",icon:["delete as eliminar"],eliminar:function(e,o){var n=this;return oo()(Je()().m(function o(){var i;return Je()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,n.$confirmar("¿Realmente desea eliminar el registro?","delete");case 1:i=o.v,i&&n.eliminarArchivo(e);case 2:return o.a(2)}},o)}))()},validate:{eliminar:function(e){return"intervencion"===this.origen&&3!==this.objFormIntervencion.tipo}},flat:!0}},dataDeArchivoInterv:[],currentRowDeArchivoInterv:{},fieldsDeArchivoInterv:[{name:"TITULO",label:"Archivo",field:"TITULO",align:"left"},{name:"FH_REGISTRO",label:"Fecha y hora.",field:"FH_REGISTRO",align:"center"},{name:"VISUALIZAR",label:"Visualizar",field:"VISUALIZAR",align:"center"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},_o={data:function(){return{dataDeInterv:[],configDeInterv:{FH_REGISTRO:{component:"datetime",edit:!1},FH_ACTUALIZACION:{component:"datetime",edit:!1},ACTION:{component:"button",icon:["edit as editarIntervencion","delete as eliminarIntervencion","remove_red_eye as verIntervencion"],editarIntervencion:function(e){var o=this;return oo()(Je()().m(function n(){var i,r;return Je()().w(function(n){while(1)switch(n.n){case 0:i=o.dataDerivaSelected,r=e,o.agregarIntervencion(i,r,2);case 1:return n.a(2)}},n)}))()},verIntervencion:function(e){var o=this;return oo()(Je()().m(function n(){var i,r;return Je()().w(function(n){while(1)switch(n.n){case 0:i=o.dataDerivaSelected,r=e,o.agregarIntervencion(i,r,3);case 1:return n.a(2)}},n)}))()},eliminarIntervencion:function(e){var o=this;return oo()(Je()().m(function n(){var i,r,t;return Je()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,o.$confirmar("¿Realmente desea eliminar la intervención? El proceso es irreversible","delete");case 1:if(i=n.v,!i){n.n=6;break}return n.p=2,n.n=3,o.$http.delete("api/RegistroDerivacionesController/deleteIntervencion",{params:{id:e.ID_DE_HISTORIAL}});case 3:return r=n.v,o.$notify(r.message),n.n=4,o.getListaIntervenciones(o.dataDerivaSelected);case 4:n.n=6;break;case 5:n.p=5,t=n.v,o.$notify(t.message,"warning");case 6:return n.a(2)}},n,null,[[2,5]])}))()},validate:{editarIntervencion:function(e){return!this.isTutor},eliminarIntervencion:function(e){return!this.isTutor},verIntervencion:function(e){return this.isTutorVerIntervencion}},tooltip:{eliminarIntervencion:"Eliminar Intervención",editarIntervencion:"Editar Intervención",verIntervencion:"Ver Intervención"},flat:!0}}}}},Ao=n(53811),jo=n(65673),Oo=n(82327),ko=n(88865),wo=n(62006),Eo=n(84603),Vo=n(59089),To=n(2819),xo=(n(23560),n(39893)),Lo={components:{QForm:lo.A,QTime:mo.A,QCardSection:io.A,sieModal:ro.A,QSelect:so.A,QInput:no.ie,QInputV1:ao.A,QDate:uo.A,QCheckbox:co.A,QPopupProxy:vo.A,QRadio:fo.A,QPagination:no.ao,QInnerLoading:no.SQ,QSpinnerOval:no.VA,QOptionGroup:no.EX,sieCloud:to.A,QChip:bo.A,QTabs:no.uw,QTab:no.zu,QTabPanels:Ao.A,QTabPane:no.dg,QList:jo.A,QItem:Oo.A,QItemSection:ko.A,date:ho.Ay,QDownloadFile:wo.A,siePdf:Eo.A,sieUpload:Vo.A,QPage:no.Tu,QCard:no.C$,QIcon:no.bP,QCardTitle:no.u0,QBtn:no.Il,QTooltip:no.nC,QCardSeparator:no.d6,QToolbar:no.ZV},mixins:[Do,Ro,_o,Co],data:function(){return{sieInfo:(0,Io["default"])(),isTutor:!1,isTutorVerIntervencion:!1,flgRegistrar:!1,flgImprimir:!1,isPsicologo:!1,loading:!1,dataTabsDeriva:[],dataTabsInterv:[],dataTabsIntervRegis:[],dataDerivacionesTmp:[],dataMotivos:[],dataOtrosMotivos:[],dataRendAprendizaje:[],dataComport:[],dataSocioemo:[],dataDifFam:[],dataMotivosReg:[],dataOtrosMotivosReg:[],dataRendAprendizajeReg:[],dataComportReg:[],dataSocioemoReg:[],dataDifFamReg:[],dataDerivaSelected:[],dataCboInterv:[],tabDerivaSelected:"otros_motivos",tabDerivaIntervSelected:"sit_act",buttons:[],objVmFiltro:{id_de_prioridad:"",secucod:"",id_de_etapa:"",usucod:"",fecreg:(0,ho.Ay)(new Date,"DD/MM/YYYY")},objFormDerivacion:{id_de_derivacion:"",nemo:"",id_persona:"",descripcion:"",obsfinal1:"",obsfinal2:"",obsfinal3:"",usucod:"",id_de_prioridad:"",id_de_etapa:1,id_de_estrategia:"",fh_registro:"",fh_actualizacion:"",archivo:[],motivosSelected:[],otrosMotivos:{},dataOtrosMotivos:[],rendAprendizajeSelected:[],comportSelected:[],socioemoSelected:[],difFamSelected:[]},objFormIntervencion:{otrosMotivos:{},id_de_derivacion:"",id_de_historial:"",id_de_historial_interv:"",id_de_intervencion_filtro:"",tipo:1,salon:"",alumno:"",psicologo:"",prioridad:"",sfdiagnostico:"",sfterapia:"",sffortaleza:"",sfnecesidad:"",objetivo:"",accestudiante:"",accfamilia:"",acctutor:"",recomendacion:"",rectutor:"",recfamilia:"",observacion:"",usucod:"",archivo:[]},objFrmReportes:{repcod:"1",usucod:"",reportes:[],nemo:"",id_persona:"",mostrarUsuarios:!0,mostrarAlumno:!1,dataUsuario:[],dataSalones:[],dataAlumnos:[],ngs:[],niveles:[],grados:[],secciones:[],nivel:"",grado:"",seccion:"",defaultNiveles:{INSTRUDES:"Todos",INSTRUCOD:"T"},defaultGrados:{GRADODES:"Todos",GRADOCOD:"T"},defaultSecciones:{SECCIONDES:"Todos",SECCIONCOD:"T"}},dataCboFiltro:{dataPrioridad:[],dataMotivo:[],dataEtapa:[],dataUsuario:[]},dataCboForm:{dataSalones:[],dataAlumnos:[],dataUsuario:[],dataPrioridad:[]},modal:{openModalDerivacion:!1,openModalIntervencion:!1,openModalReporte:!1},openModalPdf:!1,addArchivosopen:!1,addArchivosopenInterv:!1,file:{},archivos:[],archivosInterv:[],titleModalPdf:"",url:"",origen:"intervencion",setLblTab2:"Registro de la Intervención",setTituloInterv:"Registrar Intervención",mostrarCierreDerivacion:!1,verDescripcion:!0,lblCieDer1:"",lblCieDer2:"",lblCieDer3:"",fieldsDeInterv:[],mostrarActionDeInterv:!0,validarOMD:!1}},computed:{dataComputedDerivacion:function(){var e=this,o=this.dataDerivacionesTmp;return""!==this.objVmFiltro.id_de_prioridad&&(o=o.filter(function(o){return o.ID_DE_PRIORIDAD===e.objVmFiltro.id_de_prioridad})),""!==this.objVmFiltro.id_de_etapa&&(o=o.filter(function(o){return o.ID_DE_ETAPA===e.objVmFiltro.id_de_etapa})),""!==this.objVmFiltro.usucod&&(o=o.filter(function(o){return o.USUCOD_DERIVA===e.objVmFiltro.usucod})),""!==this.objVmFiltro.fecreg&&(o=o.filter(function(o){var n=e.objVmFiltro.fecreg.split("/"),i=n[2]+"/"+n[1]+"/"+n[0],r=new Date(o.FECHA_REGISTRO).toISOString(),t=new Date(i).toISOString();return t>=r})),o}},methods:{required:xo.required,limpiarFrmDerivacion:function(){this.objFormDerivacion={nemo:"",id_persona:"",descripcion:"",obsfinal1:"",obsfinal2:"",obsfinal3:"",usucod:"",id_de_prioridad:"",id_de_etapa:1,id_de_estrategia:"",fh_registro:"",fh_actualizacion:"",archivo:[],motivosSelected:[],otrosMotivos:{},dataOtrosMotivos:[],rendAprendizajeSelected:[],comportSelected:[],socioemoSelected:[],difFamSelected:[]},this.archivos=[],this.tabDerivaSelected="otros_motivos",this.tabDerivaIntervSelected="sit_act"},limpiarFrmIntervencion:function(){this.objFormIntervencion={otrosMotivos:{},id_de_derivacion:"",id_de_intervencion_filtro:"",id_de_historial:"",id_de_historial_interv:"",tipo:1,salon:"",alumno:"",psicologo:"",prioridad:"",sfdiagnostico:"",sfterapia:"",sffortaleza:"",sfnecesidad:"",objetivo:"",accestudiante:"",accfamilia:"",acctutor:"",recomendacion:"",rectutor:"",recfamilia:"",observacion:"",usucod:"",archivo:[]},this.archivosInterv=[],this.dataMotivosReg=[],this.dataOtrosMotivosReg=[],this.dataRendAprendizajeReg=[],this.dataComportReg=[],this.dataSocioemoReg=[],this.dataDifFamReg=[],this.dataDeArchivoInterv=[],this.tabDerivaSelected="otros_motivos",this.tabDerivaIntervSelected="sit_act"},limpiarCierreDerivacion:function(){this.objFormDerivacion.id_de_derivacion="",this.objFormDerivacion.descripcion="",this.objFormDerivacion.obsfinal1="",this.objFormDerivacion.obsfinal2="",this.objFormDerivacion.obsfinal3="",this.tabDerivaSelected="otros_motivos",this.tabDerivaIntervSelected="sit_act"},setLabelTabs:function(){var e="Registro de la Intervención";"cierre-derivacion"===this.origen&&(e="Resumen de las Intervenciones"),this.setLblTab2=e},setLabelTituloInterv:function(e){var o="Registrar Intervención";2==e?o="Editar Intervención":3==e&&(o="Ver Intervención"),"cierre-derivacion"===this.origen&&(o="Cerrar Derivación"),this.setTituloInterv=o},getUrl:function(e){return e=e||{},"".concat(this.sieInfo.api,"/RegistroDerivacionesController/getArchivoAdjunto?id_de_archivo=").concat(e.ID_DE_ARCHIVO,"&sie-token=").concat(this.sieInfo.token)},getListaIntervenciones:function(e){var o=this;return oo()(Je()().m(function n(){var i,r;return Je()().w(function(n){while(1)switch(n.n){case 0:return o.objFormDerivacion.id_de_intervencion_filtro="",n.n=1,o.$http.get("api/RegistroDerivacionesController/getListaIntervenciones",{params:{params:e}});case 1:i=n.v,r=[],i.length>0&&i.forEach(function(e){var o=(0,ho.Ay)(e.FH_REGISTRO,"DD/MM/YYYY HH:mm:ss");r.push({ID_DE_INTERVENCION:e.ID_DE_INTERVENCION,FH_REGISTRO:o})}),o.dataDerivaSelected=e,o.dataDeInterv=i,o.dataCboInterv=[{ID_DE_INTERVENCION:"",FH_REGISTRO:"- Seleccione -"}].concat(r);case 2:return n.a(2)}},n)}))()},registrarDerivacion:function(){this.tabDerivaSelected="otros_motivos",this.modal.openModalDerivacion=!0},openTab:function(e){this.tabDerivaSelected=e.ID},openTabInterv:function(e){this.tabDerivaIntervSelected=e.ID},cargarDatosDerivacion:function(){var e=this;return oo()(Je()().m(function o(){var n,i;return Je()().w(function(o){while(1)switch(o.n){case 0:return n=[],i={},i.verDerivacionesPropias=e.verDerivacionesPropias,i.verSoloDerivacionesAsignadas=e.verSoloDerivacionesAsignadas,i.orderBy=[{column:"dd.fh_registro",order:"desc"}],o.n=1,e.$http.get("api/RegistroDerivacionesController/getListaDerivaciones",{params:{params:i}});case 1:n=o.v,e.dataDerivacionesTmp=n;case 2:return o.a(2)}},o)}))()},getDatosIntervHist:function(e){var o=this;return oo()(Je()().m(function n(){var i,r;return Je()().w(function(n){while(1)switch(n.n){case 0:i=o.dataDeInterv.filter(function(o){return o.ID_DE_INTERVENCION===e}),r=i[0],o.objFormIntervencion.otrosMotivos={},o.objFormIntervencion.id_de_derivacion="",o.objFormIntervencion.id_de_intervencion_filtro="",o.objFormIntervencion.id_de_historial="",o.objFormIntervencion.id_de_historial_interv="",o.objFormIntervencion.sfdiagnostico="",o.objFormIntervencion.sfterapia="",o.objFormIntervencion.sffortaleza="",o.objFormIntervencion.sfnecesidad="",o.objFormIntervencion.objetivo="",o.objFormIntervencion.accestudiante="",o.objFormIntervencion.accfamilia="",o.objFormIntervencion.acctutor="",o.objFormIntervencion.recomendacion="",o.objFormIntervencion.rectutor="",o.objFormIntervencion.recfamilia="",o.objFormIntervencion.observacion="",o.objFormIntervencion.usucod="",o.objFormIntervencion.archivo=[],o.archivosInterv=[],o.dataDeArchivoInterv=[],r&&(o.getDatosIntervencion(r),o.getListadoDocsInterv(r));case 1:return n.a(2)}},n)}))()},getDatosAlumnosDerivar:function(e){var o=this;return oo()(Je()().m(function n(){var i;return Je()().w(function(n){while(1)switch(n.n){case 0:return o.objFormDerivacion.id_persona="",n.n=1,o.cargarDataAlumno(e);case 1:i=n.v,o.dataCboForm.dataAlumnos=[{ID_PERSONA:"",NOMCOMP:"- Seleccione -"}].concat(Ye()(i));case 2:return n.a(2)}},n)}))()},getDatosAlumnosReporte:function(e){var o=this;return oo()(Je()().m(function n(){var i;return Je()().w(function(n){while(1)switch(n.n){case 0:return o.objFrmReportes.id_persona="",n.n=1,o.cargarDataAlumno(e);case 1:i=n.v,o.objFrmReportes.dataAlumnos=[{ID_PERSONA:"",NOMCOMP:"- Seleccione -"}].concat(Ye()(i));case 2:return n.a(2)}},n)}))()},cargarDataAlumno:function(e){var o=this;return oo()(Je()().m(function n(){var i;return Je()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.$http.get("api/RegistroDerivacionesController/getDatosAlumnos",{params:{params:{nemo:e}}});case 1:return i=n.v,n.a(2,i)}},n)}))()},guardarDerivacion:function(){var e=this;return oo()(Je()().m(function o(){var n,i,r;return Je()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.objFormDerivacion.archivo=e.archivos,e.objFormDerivacion.dataOtrosMotivos=e.dataOtrosMotivos,e.objFormDerivacion.motivosSelected=e.$refs.refGrillaMotivosDeriva.rowsSelected(),e.objFormDerivacion.rendAprendizajeSelected=e.$refs.refGrillaDifRendAcad.rowsSelected(),e.objFormDerivacion.comportSelected=e.$refs.refGrillaDifComp.rowsSelected(),e.objFormDerivacion.socioemoSelected=e.$refs.refGrillaDifSocioeco.rowsSelected(),e.objFormDerivacion.difFamSelected=e.$refs.refGrillaAmbFam.rowsSelected(),n=e.objFormDerivacion,""!==n.nemo){o.n=1;break}return e.$alert("Seleccionar el salón","info"),o.a(2);case 1:if(""!==n.id_persona){o.n=2;break}return e.$alert("Seleccionar al alumno","info"),o.a(2);case 2:if(""!==n.usucod){o.n=3;break}return e.$alert("Seleccionar al psicólogo en la derivación","info"),o.a(2);case 3:if(""!==n.id_de_prioridad){o.n=4;break}return e.$alert("Seleccionar la prioridad de la derivación","info"),o.a(2);case 4:if(!e.validarOMD){o.n=6;break}return o.n=5,e.$refs.formDerivacion.validate();case 5:if(i=o.v,i){o.n=6;break}return o.a(2);case 6:return o.p=6,o.n=7,e.$http.post("api/RegistroDerivacionesController/registrarDerivacion",{params:n});case 7:r=o.v,e.$notify(r.message),e.modal.openModalDerivacion=!1,e.cargarDatosDerivacion(),e.limpiarFrmDerivacion(),o.n=9;break;case 8:o.p=8,o.v,e.$notify("No ha sido posible registrar, intente nuevamente","warning");case 9:return o.a(2)}},o,null,[[6,8]])}))()},agregarIntervencion:function(e,o){var n=arguments,i=this;return oo()(Je()().m(function r(){var t,a,l,c;return Je()().w(function(r){while(1)switch(r.n){case 0:if(t=n.length>2&&void 0!==n[2]?n[2]:1,a=n.length>3&&void 0!==n[3]?n[3]:"intervencion",l=a||"intervencion",i.origen=l,"cierre-derivacion"!==l){r.n=2;break}return r.n=1,i.$http.get("api/RegistroDerivacionesController/getListaIntervenciones",{params:{params:e}});case 1:if(c=r.v,!(c.length<=0)){r.n=2;break}return i.$alert("Requiere registrar al menos una intervención para cerrar la etapa","info"),r.a(2);case 2:i.limpiarFrmIntervencion(),i.setLabelTabs(),i.setLabelTituloInterv(t),i.objFormIntervencion.id_de_historial=e.ID_DE_HISTORIAL,i.objFormIntervencion.id_de_derivacion=e.ID_DE_DERIVACION,i.objFormIntervencion.tipo=t||1,i.objFormIntervencion.alumno=e.NOMCOMP,i.objFormIntervencion.salon=e.NEMODES,i.objFormIntervencion.descripcion=e.DESCRIPCION,i.objFormIntervencion.psicologo=e.USUNOM_DERIVA,i.objFormIntervencion.prioridad=e.DE_PRIORIDAD_DES,i.getDatosDerivacion(e),o&&[2,3].includes(t)&&"intervencion"===l&&(i.getDatosIntervencion(o),i.getListadoDocsInterv(o)),i.modal.openModalIntervencion=!0;case 3:return r.a(2)}},r)}))()},actualizarDatos:function(){3===this.objFormIntervencion.tipo?(this.objFormIntervencion.tipo=1,this.modal.openModalIntervencion=!1):"cierre-derivacion"===this.origen?this.guardarCierreDerivacion():this.guardarIntervencion()},guardarCierreDerivacion:function(){var e=this;return oo()(Je()().m(function o(){var n,i;return Je()().w(function(o){while(1)switch(o.p=o.n){case 0:return n=e.objFormDerivacion,o.p=1,o.n=2,e.$http.post("api/RegistroDerivacionesController/cerrarDerivacion",{params:n});case 2:i=o.v,e.$notify(i.message),e.modal.openModalIntervencion=!1,e.limpiarFrmIntervencion(),e.cargarDatosDerivacion(),o.n=4;break;case 3:o.p=3,o.v,e.$notify("No ha sido posible registrar, intente nuevamente","warning");case 4:return o.a(2)}},o,null,[[1,3]])}))()},guardarIntervencion:function(){var e=this;return oo()(Je()().m(function o(){var n,i;return Je()().w(function(o){while(1)switch(o.p=o.n){case 0:if(e.objFormIntervencion.archivo=e.archivosInterv,n=e.objFormIntervencion,""!==n.sfdiagnostico){o.n=1;break}return e.$alert("Registrar el diagnóstico (Situación Actual)","info"),o.a(2);case 1:if(""!==n.sfterapia){o.n=2;break}return e.$alert("Registrar la terapia (Situación Actual)","info"),o.a(2);case 2:return o.p=2,o.n=3,e.$http.post("api/RegistroDerivacionesController/registrarIntervencion",{params:n});case 3:i=o.v,e.$notify(i.message),e.modal.openModalIntervencion=!1,e.limpiarFrmIntervencion(),e.getListaIntervenciones(e.dataDerivaSelected),o.n=5;break;case 4:o.p=4,o.v,e.$notify("No ha sido posible registrar, intente nuevamente","warning");case 5:return o.a(2)}},o,null,[[2,4]])}))()},getDatosIntervencion:function(e){var o=this;return oo()(Je()().m(function n(){return Je()().w(function(n){while(1)switch(n.n){case 0:o.objFormIntervencion.id_de_intervencion=e.ID_DE_INTERVENCION,o.objFormIntervencion.id_de_historial_interv=e.ID_DE_HISTORIAL,o.objFormIntervencion.sfdiagnostico=e.SFDIAGNOSTICO,o.objFormIntervencion.sfterapia=e.SFTERAPIA,o.objFormIntervencion.sffortaleza=e.SFFORTALEZA,o.objFormIntervencion.sfnecesidad=e.SFNECESIDAD,o.objFormIntervencion.objetivo=e.OBJETIVO,o.objFormIntervencion.accestudiante=e.ACCESTUDIANTE,o.objFormIntervencion.accfamilia=e.ACCFAMILIA,o.objFormIntervencion.acctutor=e.ACCTUTOR,o.objFormIntervencion.recomendacion=e.RECOMENDACION,o.objFormIntervencion.rectutor=e.RECTUTOR,o.objFormIntervencion.recfamilia=e.RECFAMILIA,o.objFormIntervencion.observacion=e.OBSERVACION;case 1:return n.a(2)}},n)}))()},getDatosDerivacion:function(e){var o=this;return oo()(Je()().m(function n(){var i;return Je()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,o.$http.get("api/RegistroDerivacionesController/getDatoDetalleDerivacion",{params:{params:e}});case 1:i=n.v,o.dataMotivosReg=i.dataMotivosReg,o.dataOtrosMotivosReg=i.dataOtrosMotivosReg,o.dataRendAprendizajeReg=i.dataRendAprendizajeReg,o.dataComportReg=i.dataComportReg,o.dataSocioemoReg=i.dataSocioemoReg,o.dataDifFamReg=i.dataDifFamReg,o.dataDeArchivo=i.dataDeArchivo,o.objFormIntervencion.otrosMotivos=i.otrosMotivosReg,"cierre-derivacion"===o.origen&&(o.limpiarCierreDerivacion(),o.objFormDerivacion.id_de_derivacion=e.ID_DE_DERIVACION,o.objFormDerivacion.obsfinal1=e.OBSFINAL1,o.objFormDerivacion.obsfinal2=e.OBSFINAL2,o.objFormDerivacion.obsfinal3=e.OBSFINAL3);case 2:return n.a(2)}},n)}))()},closeModalAgregarArchivos:function(){var e=this;return oo()(Je()().m(function o(){return Je()().w(function(o){while(1)switch(o.n){case 0:e.addArchivosopen=!1;case 1:return o.a(2)}},o)}))()},deleteFile:function(e){this.archivos.splice(e,1)},openModalAgregarArchivos:function(){this.addArchivosopen=!0},closeModalAgregarArchivosInterv:function(){var e=this;return oo()(Je()().m(function o(){return Je()().w(function(o){while(1)switch(o.n){case 0:e.addArchivosopenInterv=!1;case 1:return o.a(2)}},o)}))()},deleteFileInterv:function(e){this.archivosInterv.splice(e,1)},openModalAgregarArchivosInterv:function(){this.addArchivosopenInterv=!0},cierreDerivacion:function(){},eliminarArchivo:function(e){var o=this;return oo()(Je()().m(function n(){var i,r;return Je()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.delete("api/RegistroDerivacionesController/deleteArchivo",{params:{id:e.ID_DE_ARCHIVO}});case 1:return i=n.v,o.$notify(i.message),n.n=2,o.getListadoDocsInterv(e);case 2:n.n=4;break;case 3:n.p=3,r=n.v,console.log(r);case 4:return n.a(2)}},n,null,[[0,3]])}))()},getListadoDocsInterv:function(e){var o=this;return oo()(Je()().m(function n(){var i;return Je()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$http.get("api/RegistroDerivacionesController/getListadoDocsInterv",{params:{params:e}});case 1:i=n.v,o.dataDeArchivoInterv=i,n.n=3;break;case 2:n.p=2,n.v;case 3:return n.a(2)}},n,null,[[0,2]])}))()},modalPrint:function(){var e=this;return oo()(Je()().m(function o(){var n;return Je()().w(function(o){while(1)switch(o.p=o.n){case 0:return e.modal.openModalReporte=!0,o.p=1,o.n=2,e.$http.get("api/RegistroDerivacionesController/getConfigReportes");case 2:n=o.v,e.objFrmReportes.reportes=n.reportes,o.n=4;break;case 3:o.p=3,o.v,e.objFrmReportes.reportes=[];case 4:return o.a(2)}},o,null,[[1,3]])}))()},cambiarReporte:function(){var e=this;return oo()(Je()().m(function o(){var n;return Je()().w(function(o){while(1)switch(o.n){case 0:e.objFrmReportes.mostrarUsuarios=!1,e.objFrmReportes.mostrarAlumno=!1,e.objFrmReportes.mostrarNGS=!1,n=e.objFrmReportes.repcod,o.n="2"===n?1:"3"===n?2:"4"===n?3:4;break;case 1:return e.objFrmReportes.mostrarAlumno=!0,o.a(3,5);case 2:return e.objFrmReportes.mostrarAlumno=!0,o.a(3,5);case 3:return e.objFrmReportes.mostrarNGS=!0,e.objFrmReportes.nivel="T",e.selectNivel("T"),o.a(3,5);case 4:return e.objFrmReportes.mostrarUsuarios=!0,o.a(3,5);case 5:return o.a(2)}},o)}))()},generarNgs:function(e){var o=this;return oo()(Je()().m(function n(){var i;return Je()().w(function(n){while(1)switch(n.n){case 0:i={},e.map(function(e){i[e.INSTRUCOD]||(i[e.INSTRUCOD]={INSTRUCOD:e.INSTRUCOD,INSTRUDES:e.INSTRUDES,GRADOS:{}}),i[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]||(i[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]={GRADOCOD:e.GRADOCOD,GRADODES:e.GRADODES,SECCIONES:{}}),i[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]["SECCIONES"][e.SECCIONCOD]||(i[e.INSTRUCOD]["GRADOS"][e.GRADOCOD]["SECCIONES"][e.SECCIONCOD]={SECCIONCOD:e.SECCIONCOD,SECCIONDES:e.SECCIONDES})}),o.objFrmReportes.ngs=i,o.getNiveles();case 1:return n.a(2)}},n)}))()},getNiveles:function(){for(var e in this.objFrmReportes.niveles=[],this.objFrmReportes.ngs)this.objFrmReportes.niveles.push(this.objFrmReportes.ngs[e]);this.objFrmReportes.niveles.unshift(this.objFrmReportes.defaultNiveles)},selectNivel:function(e){if(this.objFrmReportes.grados=[],this.objFrmReportes.secciones=[],e&&"T"!==e){var o=this.objFrmReportes.ngs[e].GRADOS?this.objFrmReportes.ngs[e].GRADOS:[];for(var n in o)this.objFrmReportes.grados.push(o[n])}this.objFrmReportes.grados.unshift(this.objFrmReportes.defaultGrados),this.objFrmReportes.secciones.unshift(this.objFrmReportes.defaultSecciones),this.objFrmReportes.grado="T",this.objFrmReportes.seccion="T"},selectGrado:function(e){var o=this.objFrmReportes.nivel;if(this.objFrmReportes.secciones=[],e&&"T"!==e){var n=this.objFrmReportes.ngs[o].GRADOS[e].SECCIONES;for(var i in n)this.objFrmReportes.secciones.push(n[i])}this.objFrmReportes.secciones.unshift(this.objFrmReportes.defaultSecciones),this.objFrmReportes.seccion="T"},verReporte:function(e){var o={repcod:"reporteDeDerivaciones",ano:this.sieInfo.ano,option:this.objFrmReportes.repcod,id_persona:this.objFrmReportes.id_persona,nemo:this.objFrmReportes.nemo,instrucod:this.objFrmReportes.nivel,gradocod:this.objFrmReportes.grado,seccioncod:this.objFrmReportes.seccion,usucod_psicologo:this.objFrmReportes.usucod,formato:e};(0,To.exportFilePhp)(o,"webservice/reportes/reporte")},cargarDataInit:function(){var e=this;return oo()(Je()().m(function o(){var n,i;return Je()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/RegistroDerivacionesController/getConfiguracion");case 1:n=o.v,e.dataCboFiltro.dataPrioridad=n.dataPrioridad,e.dataCboFiltro.dataMotivo=[{SECUCOD:"",SECUDES:"- Seleccione -"}].concat(Ye()(n.dataMotivo)),e.dataCboFiltro.dataEtapa=n.dataEtapa,e.dataCboFiltro.dataUsuario=n.dataPsicologos,e.dataCboForm.dataSalones=n.dataSalones,e.dataCboForm.dataUsuario=n.dataPsicologos,e.dataCboForm.dataPrioridad=n.dataPrioridad,e.dataCboForm.dataAlumnos=[{ID_PERSONA:"",NOMCOMP:"- Seleccione -"}],e.objFrmReportes.dataUsuario=n.dataPsicologos,e.objFrmReportes.dataSalones=n.dataSalones,e.dataMotivos=n.dataMotivo,e.dataOtrosMotivos=n.dataOtrosMotivos,e.dataRendAprendizaje=n.dataRendAprendizaje,e.dataComport=n.dataComport,e.dataSocioemo=n.dataSocioemo,e.dataDifFam=n.dataDifFam,e.dataTabsDeriva=n.dataTabsDeriva,e.dataTabsInterv=n.dataTabsInterv,e.dataTabsIntervRegis=n.dataTabsIntervRegis,e.isTutor=n.isTutor,e.isTutorVerIntervencion=n.isTutorVerIntervencion,e.flgRegistrar=e.isTutor||n.flgRegistrar,e.isPsicologo=n.isPsicologo,e.flgImprimir=n.flgImprimir,e.verDerivacionesPropias=n.verDerivacionesPropias,e.verSoloDerivacionesAsignadas=n.verSoloDerivacionesAsignadas,e.mostrarCierreDerivacion=n.mostrarCierreDerivacion,e.verDescripcion=n.verDescripcion,e.lblCieDer1=n.lblCieDer1,e.lblCieDer2=n.lblCieDer2,e.lblCieDer3=n.lblCieDer3,e.mostrarActionDeInterv=n.mostrarActionDeInterv,e.validarOMD=n.validarOMD,e.fieldsDeInterv=[{name:"SFDIAGNOSTICO",label:"Diagnóstico",field:"SFDIAGNOSTICO",width:110,align:"center",wrap:!0},{name:"SFTERAPIA",label:"Terapia",field:"SFTERAPIA",width:110,align:"center",wrap:!0},{name:"FH_REGISTRO",label:"Fec. Reg.",field:"FH_REGISTRO",align:"center",width:60,wrap:!0},{name:"FH_ACTUALIZACION",label:"Fec. Act.",field:"FH_ACTUALIZACION",align:"center",width:60,wrap:!0},{name:"ACTION",label:"Editar",field:"ACTION",align:"center",width:40,vIf:e.mostrarActionDeInterv}],i=[],e.flgRegistrar&&i.push({label:"Derivar",icon:"add",click:e.registrarDerivacion}),e.flgImprimir&&i.push({label:"Imprimir",icon:"print",click:e.modalPrint}),e.buttons=i,e.cargarDatosDerivacion(),e.generarNgs(n.dataSalones.filter(function(e){return""!=e.NEMO}));case 2:return o.a(2)}},o)}))()},init:function(){}},created:function(){var e=this;return oo()(Je()().m(function o(){return Je()().w(function(o){while(1)switch(o.n){case 0:e.cargarDataInit();case 1:return o.a(2)}},o)}))()}},Uo=n(12807);const No=(0,Uo.A)(Lo,[["render",Be]]);var Mo=No}}]);