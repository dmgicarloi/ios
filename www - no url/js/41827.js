"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[41827],{97065:function(e,o,t){t.r(o),t.d(o,{default:function(){return P}});var l=t(61758),s=t(58790),a={class:"col-xs-12 col-md-6"},i={class:"row q-pa-sm"},r={class:"col-xs-12"},c={class:"row q-pa-sm gutter-xs"},n={class:"col-xs-6"},u={class:"col-xs-6"},d={class:"row q-pa-sm gutter-xs"},p={class:"col-xs-6"},b={class:"col-xs-6"},f={class:"row q-pa-sm gutter-xs"},m={class:"col-xs-6"},h={class:"col-xs-6"},v={key:0,class:"row q-pa-sm"},k={class:"col-xs-12"},V={class:"row q-pa-md justify-center"};function x(e,o){var t=(0,l.g2)("q-select"),x=(0,l.g2)("q-datetime"),C=(0,l.g2)("q-btn"),L=(0,l.g2)("q-card"),g=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(g,{class:(0,s.C4)(["reportesAcceso column",e.isLess?"bg-white":""])},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",{class:(0,s.C4)(["row col justify-center",e.isLess?"":"items-center"])},[(0,l.Lk)("div",a,[(0,l.bF)(L,{class:(0,s.C4)(["q-px-md q-py-lg",e.isLess?"no-shadow":""])},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",i,[(0,l.Lk)("div",r,[(0,l.bF)(t,{modelValue:e.reporte.cbotiporep,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.reporte.cbotiporep=o}),options:e.tipoReporte,label:e.$t("tipoReporte"),onInput:e.changeFiltros},null,8,["modelValue","options","label","onInput"])])]),(0,l.Lk)("div",c,[(0,l.Lk)("div",n,[(0,l.bF)(x,{class:"q-if-outlined",modelValue:e.reporte.fecha_d,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.reporte.fecha_d=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("desde")},null,8,["modelValue","float-label"])]),(0,l.Lk)("div",u,[(0,l.bF)(x,{class:"q-if-outlined",modelValue:e.reporte.fecha_h,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.reporte.fecha_h=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("hasta")},null,8,["modelValue","float-label"])])]),(0,l.Lk)("div",d,[(0,l.Lk)("div",p,[(0,l.bF)(t,{modelValue:e.reporte.cbotipousu,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.reporte.cbotipousu=o}),options:e.listaPerfiles,label:e.$t("tipoUsuario"),disable:e.disabledSelect.cbotipousu,onInput:e.changeFiltros},null,8,["modelValue","options","label","disable","onInput"])]),(0,l.Lk)("div",b,[(0,l.bF)(t,{modelValue:e.reporte.cboConAcceso,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.reporte.cboConAcceso=o}),options:e.acceso,label:e.$t("acceso"),disable:e.disabledSelect.cboConAcceso},null,8,["modelValue","options","label","disable"])])]),(0,l.Lk)("div",f,[(0,l.Lk)("div",m,[(0,l.bF)(t,{modelValue:e.reporte.cbofiltro,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.reporte.cbofiltro=o}),options:e.modoReporte,label:e.$t("filtrar"),disable:e.disabledSelect.cbofiltro,onInput:e.changeFiltros},null,8,["modelValue","options","label","disable","onInput"])]),(0,l.Lk)("div",h,[(0,l.bF)(t,{modelValue:e.reporte.cbosalon,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.reporte.cbosalon=o}),options:e.listaSalones,label:e.$t("salon"),disable:e.disabledSelect.cbosalon},null,8,["modelValue","options","label","disable"])])]),1===e.reporte.cbotiporep?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",k,[(0,l.bF)(t,{modelValue:e.reporte.estado,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.reporte.estado=o}),options:e.estados,label:e.$t("Estado")},null,8,["modelValue","options","label"])])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",V,[(0,l.bF)(C,{class:"q-mx-xs",icon:"file_pdf",color:"secondary",onClick:o[8]||(o[8]=function(o){return e.imprimir("pdf")}),label:"PDF"}),(0,l.bF)(C,{class:"q-mx-xs",icon:"file_excel",color:"secondary",onClick:o[9]||(o[9]=function(o){return e.imprimir("xls")}),label:"EXCEL"})])]}),_:1},8,["class"])])],2)]}),_:1},8,["class"])}t(52133),t(50310),t(6724),t(83190);var C=t(6123),L=t(57668),g=t(80660),D=t(81288),F=t(18105),S=t(69027),A=t(16648),M=t(2819),q={components:{QSelect:A.S,QDatetime:C.T5,QPageSticky:C._U,QFab:C.l6,QFabAction:C.B$,sieInfo:L["default"],alertModal:S.alertModal,QPage:C.Tu,QCard:C.C$,QBtn:C.Il},data:function(){return{sieInfo:(0,L["default"])(),reporte:{cbotiporep:2,fecha_h:new Date,fecha_d:new Date((new Date).setMonth((new Date).getMonth()-1)),cbotipousu:"%",cboConAcceso:"si",cbofiltro:1,cbosalon:"%",testPrueba:[{label:"Test de prueba",value:1}],estado:"%"},estados:[{label:"Todos",value:"%"},{label:"Activos",value:"A"},{label:"Inactivos",value:"I"}],disabledSelect:{cbotipousu:!0,cboConAcceso:!0,cbofiltro:!0,cbosalon:!0},tipoReporte:[{value:2,label:"Reporte de accesos diario por perfil"},{value:1,label:"Reporte por tipo de usuario"}],acceso:[{label:"Con Acceso",value:"si"},{label:"Sin acceso",value:"no"}],listaPerfiles:[],listaSalones:[],modoReporte:[{value:1,label:"Reporte Global"},{value:2,label:"Matriculados"}]}},computed:{isLess:function(){return(0,D.isLess)()}},methods:{init:function(){var e=this;g.$http.get("api/HyoPerfiles/obtPerfilesExistentes").then(function(o){var t=o.json;t.unshift({TIPCOD:"%",TIPNOM:"Todos"}),e.listaPerfiles=t.map(function(e){return{label:e.TIPNOM,value:e.TIPCOD}})}).then(function(){e.changeFiltros()}),g.$http.get("api/HyoSalones/cboListaNemodes").then(function(o){var t=o.cboNemodes;t.unshift({NEMO:"%",NEMODES:"Todos"}),e.listaSalones=t.map(function(e){return{label:e.NEMODES,value:e.NEMO}})})},changeFiltros:function(){this.disabledSelect={cbotipousu:!0,cboConAcceso:!0,cbofiltro:!0,cbosalon:!0},1===this.reporte.cbotiporep&&(this.disabledSelect.cbotipousu=!1,this.disabledSelect.cboConAcceso=!1,["004","005"].indexOf(this.reporte.cbotipousu)>=0&&(this.disabledSelect.cbofiltro=!1,2===this.reporte.cbofiltro&&(this.disabledSelect.cbosalon=!1)))},imprimir:function(e){var o={};o.formato=e,o.fecha_de=(0,F.Ay)(this.reporte.fecha_d,"DD/MM/YYYY"),o.fecha_hasta=(0,F.Ay)(this.reporte.fecha_h,"DD/MM/YYYY"),2===this.reporte.cbotiporep?o.repcod="reporteAccesosDiariosPerfil":(o.repcod="reporteAccesosPorTipoDeUsuario",o.conAcceso=this.reporte.cboConAcceso,o.tipcod=this.reporte.cbotipousu,o.ano=this.sieInfo.ano,o.filtro=this.reporte.cbofiltro,o.nemo=this.reporte.cbosalon,o.estado=this.reporte.estado),(0,M.exportFilePhp)(o,"webservice/reportes/reporte")}},created:function(){this.init()}},w=t(12807);const I=(0,w.A)(q,[["render",x]]);var P=I}}]);