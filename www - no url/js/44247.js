"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[44247],{44247:function(e,n,i){i.r(n),i.d(n,{default:function(){return B}});i(39866);var t=i(61758),o={class:"row q-pa-sm q-col-gutter-sm"},a={class:"col-12"},r={class:"col-12"},l={class:"col-12"},s={class:"col-12"},c={class:"col-12"},u={class:"col-8"},d={class:"col-4"},f={class:"col-12"};function m(e,n){var i=this,m=(0,t.g2)("header-btn"),p=(0,t.g2)("sie-table"),b=(0,t.g2)("q-card-section"),h=(0,t.g2)("q-card"),v=(0,t.g2)("q-select"),A=(0,t.g2)("q-checkbox"),g=(0,t.g2)("q-datetime"),C=(0,t.g2)("sie-select"),E=(0,t.g2)("q-input"),O=(0,t.g2)("sie-modal"),D=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(D,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(h,null,{default:(0,t.k6)(function(){return[(0,t.bF)(m,{name:"Desinfección de ambientes"}),(0,t.bF)(b,null,{default:(0,t.k6)(function(){return["004"!==e.sie.tipcod?((0,t.uX)(),(0,t.Wv)(m,{key:0,name:"",buttons:e.buttons},null,8,["buttons"])):(0,t.Q3)("v-if",!0),(0,t.bF)(p,{data:e.data,css:"height: 74vh",columns:e.columns,config:e.config,context:i},null,8,["data","columns","config"])]}),_:1})]}),_:1}),(0,t.bF)(O,{modelValue:e.openModal,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.openModal=n}),css:{"min-width":"400px","max-width":"600px","min-height":"500px"},onSubmit:e.save,title:"Ambiente"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.Lk)("div",a,[(0,t.bF)(v,{multiple:!e.totalArticulos,readonly:e.readOnly,modelValue:e.form.id_ambiente,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.id_ambiente=n}),options:e.ambientes,label:"Ambiente",onInput:e.cambiarAmbiente,"option-value":"ID_AMBIENTE","option-label":"AMBIENTE"},null,8,["multiple","readonly","modelValue","options","onInput"])]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.articulos,function(n){return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(A,{dense:"",color:"primary",disable:e.readOnly,modelValue:n.ESTADO,"onUpdate:modelValue":function(e){return n.ESTADO=e},label:n.ARTICULO,"true-value":1,"false-value":0},null,8,["disable","modelValue","onUpdate:modelValue","label"])])}),256)),(0,t.Lk)("div",l,[(0,t.bF)(g,{class:"q-if-outlined",disable:e.readOnly,modelValue:e.form.fecha,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.fecha=n}),"float-label":"Fecha",type:"datetime",format:"DD/MM/YYYY HH:mm:ss"},null,8,["disable","modelValue"])]),["004","005"].includes(e.sie.tipcod)?(0,t.Q3)("v-if",!0):((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",s,[(0,t.bF)(C,{readonly:e.readOnly,type:"outlined",modelValue:e.form.responsable,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.form.responsable=n}),options:e.usuarios,label:"USUNOM",placeholder:"Responsable",val:"USUCOD"},null,8,["readonly","modelValue","options"])]),(0,t.Lk)("div",c,[(0,t.bF)(E,{readonly:e.readOnly,modelValue:e.form.observacion_responsable,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.form.observacion_responsable=n}),label:"Observacion Responsable",type:"textarea"},null,8,["readonly","modelValue"])]),(0,t.Lk)("div",u,[(0,t.bF)(C,{readonly:e.readOnly,type:"outlined",modelValue:e.form.supervisor,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.form.supervisor=n}),options:e.usuarios,label:"USUNOM",placeholder:"Supervisor(a)",val:"USUCOD"},null,8,["readonly","modelValue","options"])]),(0,t.Lk)("div",d,[(0,t.bF)(A,{class:"q-pt-sm",disable:e.readOnly,dense:"",color:"primary",modelValue:e.form.ESTADO,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.form.ESTADO=n}),label:"Conforme","true-value":1,"false-value":0},null,8,["disable","modelValue"])]),(0,t.Lk)("div",f,[(0,t.bF)(E,{readonly:e.readOnly,modelValue:e.form.observacion_supervisor,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.form.observacion_supervisor=n}),label:"Observacion supervisor(a)",type:"textarea"},null,8,["readonly","modelValue"])])],64))])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var p=i(57008),b=i.n(p),h=i(76080),v=i.n(h),A=i(45254),g=i.n(A),C=(i(71225),i(50310),i(5962),i(83190),i(72029)),E=i(26697),O=i(53093),D=i(53811),S=i(43346),w=i(95718),y=i(30640),V=i(9736),_=i(11654),I=i(16648),U=i(3112),k={data:function(){return{config:{FECHA:{component:"datetime",edit:!1},ESTADO:{component:"button",iconIf:{1:{icon:"check_circle",color:"green",tooltip:"Aprobado"},0:{icon:"remove",color:"gray",tooltip:"Pendiente"}},click:function(e,n){},flat:!0},ACTION:{component:"button",icon:["remove_red_eye as ver","edit as editar","delete as eliminar"],validate:{editar:function(){return this.sie.ruta.nivel>=2&&!["004","005"].includes(this.sie.tipcod)},eliminar:function(){return 3===this.sie.ruta.nivel&&!["004","005"].includes(this.sie.tipcod)}},ver:function(e){var n=this;return g()(v()().m(function i(){return v()().w(function(i){while(1)switch(i.n){case 0:n.loadModal(e,1);case 1:return i.a(2)}},i)}))()},editar:function(e,n){this.loadModal(e)},eliminar:function(e){var n=this;this.$confirm("¿Estás seguro de eliminar este registro?","delete").onOk(g()(v()().m(function i(){return v()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,n.deleteCovidDesinfeccion(e.ID_DESINFECCION);case 1:return i.a(2)}},i)})))},flat:!0,dense:!0,color:"primary"}},rowsAuth:[],columns:[{name:"AULACOD",label:"Código Aula",field:"AULACOD",align:"center"},{name:"AMBIENTE",label:"Ambiente",field:"AMBIENTE",align:"left"},{name:"FECHA",label:"Fecha",field:"FECHA",align:"center"},{name:"OBSERVACION_RESPONSABLE",label:"Observación del Responsable",align:"left",field:"OBSERVACION_RESPONSABLE"},{name:"ESTADO",label:"Estado",align:"center",field:"ESTADO"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center",width:60}]}}},T=i(6123),F=i(57668),N=i(93616),M=i(2819),R={mixins:[k],components:{sieSelect:N.A,QDatetime:T.T5,QCheckbox:U.A,QSplitter:C.A,QTabs:E.A,QTab:O.A,QTabPanels:D.A,QTabPanel:S.A,QCardSection:w.A,SieModal:y.A,QInput:V.A,QBtn:_.A,QSelect:I.A,QPage:T.Tu,QCard:T.C$},data:function(){var e=this;return{currentUser:(0,F["default"])().usucod,readOnly:!1,usuarios:[],data:[],aulas:[],ambientes:[],articulos:[],totalArticulos:0,flagAction:null,form:{ESTADO:0,id_ambiente:null,id_desinfeccion:null,fecha:"",aulacod:null,observacion:""},openModal:!1,sie:(0,F["default"])(),buttons:[{icon:"print",label:"Imprimir",click:function(){e.imprimir()}},{icon:"plus",label:"Agregar",click:function(){e.limpiar(),e.readOnly=!1,e.openModal=!0,e.flagAction="insert"}}]}},methods:{deleteCovidDesinfeccion:function(e){var n=this;return g()(v()().m(function i(){return v()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,n.$http.delete("api/CovidDesinfeccionController/deleteCovidDesinfeccion",{params:{id:e}}).then(function(e){n.$notify(e.message,"success"),n.getAmbientes(),n.getCovidDesinfeccion()}).catch(function(e){n.$notify(e.message,"warning")});case 1:return i.a(2)}},i)}))()},imprimir:function(){return g()(v()().m(function e(){var n;return v()().w(function(e){while(1)switch(e.n){case 0:n={repcod:"desinfeccionAmbiente",formato:"pdf"},(0,M.exportFilePhp)(n,"webservice/reportes/reporte");case 1:return e.a(2)}},e)}))()},limpiar:function(){this.form={id_ambiente:null,id_desinfeccion:null,fecha:new Date,aulacod:null,observacion:"",ESTADO:0},this.articulos=[]},save:function(){var e=this;return g()(v()().m(function n(){var i,t;return v()().w(function(n){while(1)switch(n.n){case 0:if(i="update"===e.flagAction?"updateCovidDesinfeccion":"saveCovidDesinfeccion",t=b()({},e.form),t.articulos=e.articulos.filter(function(e){return e.ESTADO}),t.id_ambiente){n.n=1;break}return e.$notify("Elija un ambiente","warning"),n.a(2,!1);case 1:if(t.responsable){n.n=2;break}return e.$notify("Elija un responsable","warning"),n.a(2,!1);case 2:if(t.supervisor){n.n=3;break}return e.$notify("Elija un supervisor","warning"),n.a(2,!1);case 3:e.$http.post("api/CovidDesinfeccionController/".concat(i),{data:t}).then(function(n){e.$notify(n.message,"success"),e.limpiar(),e.getCovidDesinfeccion(),e.openModal=!1}).catch(function(n){var i=n.error;e.$notify(i.message,"warning")});case 4:return n.a(2)}},n)}))()},loadModal:function(e,n){this.readOnly=!!n,this.form.id_desinfeccion=e.ID_DESINFECCION,this.form.id_ambiente=e.ID_AMBIENTE,this.form.aulacod=e.AULACOD,this.form.fecha=e.FECHA,this.form.ESTADO=e.ESTADO,this.form.responsable=e.RESPONSABLE,this.form.observacion_responsable=e.OBSERVACION_RESPONSABLE,this.form.supervisor=e.SUPERVISOR,this.form.observacion_supervisor=e.OBSERVACION_SUPERVISOR,this.flagAction="update",this.cambiarAmbiente(),this.openModal=!0},loadArticulos:function(){var e=this;return g()(v()().m(function n(){return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/CovidDesinfeccionController/getTotalArticulos");case 1:return e.totalArticulos=n.v,n.a(2,void 0)}},n)}))()},cambiarAmbiente:function(){var e=this,n={id_ambiente:this.form.id_ambiente,id_desinfeccion:this.form.id_desinfeccion};this.$http.get("api/CovidDesinfeccionController/getAmbienteArticulo",{params:n}).then(function(n){n.last&&(e.form.responsable=n.last.RESPONSABLE,e.form.supervisor=n.last.SUPERVISOR,e.form.fecha=n.last.FECHA),e.articulos=n.articulos})},getUsuarios:function(){var e=this;this.$http.get("api/CovidDesinfeccionController/getUsuarios",{params:{activos:"s"}}).then(function(n){e.usuarios=n})},getAmbientes:function(){var e=this;return g()(v()().m(function n(){return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/CovidDesinfeccionController/getAmbientes");case 1:e.ambientes=n.v;case 2:return n.a(2)}},n)}))()},getCovidDesinfeccion:function(){var e=this;return g()(v()().m(function n(){return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/CovidDesinfeccionController/getCovidDesinfeccion");case 1:e.data=n.v;case 2:return n.a(2)}},n)}))()},getAulas:function(){var e=this;return g()(v()().m(function n(){return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.$http.get("api/CovidDesinfeccionController/getAulas");case 1:e.aulas=n.v;case 2:return n.a(2)}},n)}))()}},created:function(){var e=this;return g()(v()().m(function n(){return v()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.loadArticulos();case 1:return n.n=2,e.getCovidDesinfeccion();case 2:e.getAmbientes(),e.getAulas(),e.getUsuarios();case 3:return n.a(2)}},n)}))()}},L=i(12807);const $=(0,L.A)(R,[["render",m]]);var B=$}}]);