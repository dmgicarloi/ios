"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[68398],{68398:function(e,o,n){n.r(o),n.d(o,{default:function(){return De}});n(30683),n(71225),n(56285),n(50310),n(5962),n(83190);var r=n(61758),a=n(29104),s=n(58790),t={class:"row q-col-gutter-sm q-py-sm"},l={class:"col-xs-12"},i={class:"row q-gutter-xs"},u={class:"col"},c={class:"row q-col-gutter-sm"},d={class:"col-xs-12 col-sm-4"},m={class:"row q-pa-sm q-col-gutter-sm"},p={class:"col-12"},f={class:"col-12"},g={class:"col-12"},b={class:"col-xs-12 col-sm-6"},C={class:"col-xs-12 col-sm-6"},h={class:"col-xs-12 col-sm-6"},v={class:"col-xs-12 col-sm-6"},w={class:"row q-pa-sm q-col-gutter-sm"},k={class:"col-xs-12 col-sm-6"},A={class:"col-xs-12 col-sm-6"},S={class:"col-xs-12 col-sm-6"},I={class:"col-xs-12 col-sm-6"},y={class:"col-xs-12 column items-center justify-center"},O={class:"row q-pa-sm q-col-gutter-sm"},x={class:"col-12"},D={class:"row q-pa-sm q-col-gutter-sm"},L={class:"row"},V={class:"col-xs-12 column items-center"},_={class:"row q-col-gutter-sm"},$={class:"col-12 text-center"},U={class:"row"},q={class:"col-xs-12 column items-center"},R={class:"row q-col-gutter-sm"},F={class:"col-12 text-center"},M={class:"col-12 text-center"},P={class:"text-bold"},T={class:"row"},N={class:"col-xs-12 column items-center"},E={class:"row q-col-gutter-sm"},H={class:"col-12 text-center"},G={class:"row q-pa-sm q-col-gutter-sm sie-flat"},W={class:"col-12"};function B(e,o){var n=this,B=(0,r.g2)("sie-upload"),Q=(0,r.g2)("loading"),z=(0,r.g2)("header-btn"),J=(0,r.g2)("q-select"),X=(0,r.g2)("q-btn"),j=(0,r.g2)("sie-ngs"),K=(0,r.g2)("q-card-section"),Y=(0,r.g2)("q-tab"),Z=(0,r.g2)("q-tabs"),ee=(0,r.g2)("sie-table"),oe=(0,r.g2)("q-tab-panel"),ne=(0,r.g2)("q-tab-panels"),re=(0,r.g2)("q-card"),ae=(0,r.g2)("q-input"),se=(0,r.g2)("q-item-label"),te=(0,r.g2)("q-item-section"),le=(0,r.g2)("q-item"),ie=(0,r.g2)("q-form"),ue=(0,r.g2)("sie-modal"),ce=(0,r.g2)("q-icon"),de=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(de,{class:"q-pa-sm intranet-classrrom sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bo)((0,r.bF)(B,{allow:["xlsx","xls"],onUpload:e.uploadExcel,ref:"upload"},null,8,["onUpload"]),[[a.aG,!1]]),(0,r.bF)(Q,{ref:"loading",modelValue:e.loading,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.loading=o}),label:"Generando Cursos",type:"proceso",porcentage:e.sumPorcentage},null,8,["modelValue","porcentage"]),(0,r.bF)(re,{flat:""},{default:(0,r.k6)(function(){return[e.isLogged?((0,r.uX)(),(0,r.Wv)(z,{key:0,name:"Cursos Classroom",buttons:e.buttons,"max-buttons":e.maxButtons},null,8,["buttons","max-buttons"])):((0,r.uX)(),(0,r.Wv)(z,{key:1,name:"Cursos Classroom",buttons:e.buttonsLogin,auto:!1},null,8,["buttons"])),(0,r.bF)(K,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",t,[(0,r.Lk)("div",l,[(0,r.Lk)("div",i,[(0,r.Lk)("div",u,[(0,r.bF)(J,{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",modelValue:e.docente,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.docente=o}),options:e.docentes,onFilter:e.filter,"option-value":"id","option-label":"fullName",label:"Seleccione Docente",type:"outlined",onInput:o[2]||(o[2]=function(o){return e.getCursos([e.state])}),"emit-value":!1},null,8,["modelValue","options","onFilter"])]),(0,r.bF)(X,{icon:"refresh",onClick:e.getUsers,size:"xs",color:"primary",style:{"font-size":"10px"}},null,8,["onClick"])])])]),"T"===e.docente.id&&"sieweb"===e.tipoTab?((0,r.uX)(),(0,r.Wv)(j,{key:0,class:"q-pb-sm q-col-gutter-sm",ref:"ngs1",onChange:e.getNGS},null,8,["onChange"])):(0,r.Q3)("v-if",!0),(0,r.Lk)("div",c,[(0,r.Lk)("div",d,[(0,r.bF)(J,{modelValue:e.state,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.state=o}),"emit-value":!0,options:e.status,label:"Estado",onInput:o[4]||(o[4]=function(o){return e.getCursos([e.state])})},null,8,["modelValue","options"])])])]}),_:1}),(0,r.bF)(K,null,{default:(0,r.k6)(function(){return[(0,r.bF)(Z,{class:"text-grey",modelValue:e.tipoTab,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.tipoTab=o}),dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,r.k6)(function(){return[(0,r.bF)(Y,{name:"classroom",label:"Classroom","no-caps":""}),(0,r.bF)(Y,{name:"sieweb",label:"SieWeb","no-caps":""})]}),_:1},8,["modelValue"]),(0,r.bF)(ne,{modelValue:e.tipoTab,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.tipoTab=o}),animated:""},{default:(0,r.k6)(function(){return[(0,r.bF)(oe,{name:"classroom"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{"header-tr":e.headerTrCursosClassroom,ref:"cursos",selection:"T"!==e.docente.id?"multiple":"single",data:e.rows,columns:e.fields,config:e.config,permiso:">=1",context:n,"save-cells":"",css:"height: calc(100vh - 290px)"},null,8,["header-tr","selection","data","columns","config"])]}),_:1}),(0,r.bF)(oe,{name:"sieweb"},{default:(0,r.k6)(function(){return[(0,r.bF)(ee,{"header-tr":e.headerTrCursosSieWeb,ref:"cursosSieweb",selection:"single",data:e.rowsCursosSieweb,columns:e.fieldsCursosSieweb,config:e.config,context:n,css:"height: calc(100vh - 290px)"},null,8,["header-tr","data","columns","config"])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1}),(0,r.bF)(ue,{modelValue:e.openModalCrearCurso,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.openModalCrearCurso=o}),title:"Crear Curso Classroom",css:{width:"500px"},onSubmit:e.saveCurso},{default:(0,r.k6)(function(){return[(0,r.bF)(ie,{ref:"crearCurso"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",m,[o[29]||(o[29]=(0,r.Lk)("div",{class:"col-12 q-pb-xs"},[(0,r.Lk)("span",{class:"intranet-classrrom-underline"},"Datos del Curso")],-1)),(0,r.Lk)("div",p,[(0,r.bF)(ae,{modelValue:e.formCurso.nombre,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.formCurso.nombre=o}),label:"Nombre de la clase (Obligatorio)",rules:[e.required]},null,8,["modelValue","rules"])]),(0,r.Lk)("div",f,[(0,r.bF)(ae,{modelValue:e.formCurso.seccion,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.formCurso.seccion=o}),label:"Sección"},null,8,["modelValue"])]),(0,r.Lk)("div",g,[(0,r.bF)(ae,{modelValue:e.formCurso.aula,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.formCurso.aula=o}),label:"Aula"},null,8,["modelValue"])]),o[30]||(o[30]=(0,r.Lk)("div",{class:"col-12 q-pb-xs"},[(0,r.Lk)("span",{class:"intranet-classrrom-underline"},"Curso SieWeb a Asociar")],-1)),(0,r.Lk)("div",b,[(0,r.bF)(J,{modelValue:e.salon,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.salon=o}),label:"Salon",options:e.salones,"option-label":"DESCAMBITO","option-value":"ID_AMBITO","emit-value":!1,onInput:e.loadCursos,rules:[e.required]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",C,[(0,r.bF)(J,{modelValue:e.curso,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.curso=o}),label:"Curso",options:e.cursos,"option-label":"CURSONOM","option-value":"ID_CURSO","emit-value":!1,onInput:e.loadGrupos,rules:[e.required]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",h,[(0,r.bF)(J,{modelValue:e.grupo,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.grupo=o}),label:"Grupo",options:e.grupos,"option-label":"GRUPO","option-value":"GRUPOCOD","emit-value":!1,onInput:e.loadPeriodos,rules:[e.required]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",v,[(0,r.bF)(J,{modelValue:e.periodo,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.periodo=o}),options:e.periodos,label:"Periodos",multiple:"","map-options":"",disable:""},{option:(0,r.k6)(function(e){var o=e.itemProps,n=e.itemEvents,a=e.opt;e.selected,e.toggleOption;return[(0,r.bF)(le,(0,r.v6)(o,(0,r.Tb)(n||{})),{default:(0,r.k6)(function(){return[(0,r.bF)(te,null,{default:(0,r.k6)(function(){return[(0,r.bF)(se,null,{default:(0,r.k6)(function(){return[(0,r.eW)((0,s.v_)(a.label),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1040)]}),_:1},8,["modelValue","options"])])])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit"]),(0,r.bF)(ue,{modelValue:e.openModalHomologar,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.openModalHomologar=o}),title:"Asociar",css:{width:"500px"},onSubmit:e.saveHomologar},{default:(0,r.k6)(function(){return[(0,r.bF)(ie,{ref:"refHomologar"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",w,[(0,r.Lk)("div",k,[(0,r.bF)(J,{modelValue:e.salon,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.salon=o}),label:"Salon",options:e.salones,"option-label":"DESCAMBITO","option-value":"ID_AMBITO","emit-value":!1,onInput:e.loadCursos,rules:[e.required]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",A,[(0,r.bF)(J,{modelValue:e.curso,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.curso=o}),label:"Curso",options:e.cursos,"option-label":"CURSONOM","option-value":"ID_CURSO","emit-value":!1,onInput:e.loadGrupos,rules:[e.required]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",S,[(0,r.bF)(J,{modelValue:e.grupo,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.grupo=o}),label:"Grupo",options:e.grupos,"option-label":"GRUPO","option-value":"GRUPOCOD","emit-value":!1,onInput:e.loadPeriodos,rules:[e.required]},null,8,["modelValue","options","onInput","rules"])]),(0,r.Lk)("div",I,[(0,r.bF)(J,{modelValue:e.periodo,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.periodo=o}),options:e.periodos,label:"Periodos",multiple:"","map-options":"",disable:""},{option:(0,r.k6)(function(e){var o=e.itemProps,n=e.itemEvents,a=e.opt;e.selected,e.toggleOption;return[(0,r.bF)(le,(0,r.v6)(o,(0,r.Tb)(n||{})),{default:(0,r.k6)(function(){return[(0,r.bF)(te,null,{default:(0,r.k6)(function(){return[(0,r.bF)(se,null,{default:(0,r.k6)(function(){return[(0,r.eW)((0,s.v_)(a.label),1)]}),_:2},1024)]}),_:2},1024)]}),_:2},1040)]}),_:1},8,["modelValue","options"])])])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit"]),(0,r.bF)(ue,{modelValue:e.openModalGenerarCursos,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.openModalGenerarCursos=o}),css:{width:"600px"},footer:!1,title:"Generar Cursos Classroom",ok:!1,"esc-click":"",onSubmit:o[22]||(o[22]=function(){})},{default:(0,r.k6)(function(){return[(0,r.bF)(j,{class:"q-pa-sm q-col-gutter-sm",ref:"ngs","class-nivel":"col-xs-12 col-sm-4","class-grado":"col-xs-12 col-sm-4","class-seccion":"col-xs-12 col-sm-4"},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",y,[(0,r.bF)(X,{icon:"settings",label:"Generar",color:"primary",size:"sm",onClick:o[20]||(o[20]=function(o){return e.autogenerarCursos(void 0)})})])]}),_:1},512)]}),_:1},8,["modelValue"]),(0,r.bF)(ue,{modelValue:e.openModalAsociarCursos,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.openModalAsociarCursos=o}),css:{width:"600px"},footer:!1,title:"Asociar Cursos Classroom",ok:!1,"esc-click":"",onSubmit:o[27]||(o[27]=function(){})},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",O,[(0,r.Lk)("div",x,[(0,r.Lk)("div",D,[(0,r.Lk)("div",{class:"col-xs-12 col-sm-6 pointer",onClick:o[23]||(o[23]=function(o){return e.downloadPlantilla("plantilla-asociar-cursos.xlsx")})},[(0,r.Lk)("div",L,[(0,r.Lk)("div",V,[(0,r.Lk)("div",_,[(0,r.Lk)("div",$,[(0,r.bF)(ce,{name:"file_download",color:"primary",size:"30px"})]),o[31]||(o[31]=(0,r.Lk)("div",{class:"col-12 text-center"},[(0,r.Lk)("span",{class:"text-bold"},"Descargar Plantilla")],-1))])])])]),e.file.uplodad.name?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"col-xs-12 col-sm-6 column items-center pointer",onClick:o[24]||(o[24]=function(){return e.importFile&&e.importFile.apply(e,arguments)})},[(0,r.Lk)("div",U,[(0,r.Lk)("div",q,[(0,r.Lk)("div",R,[(0,r.Lk)("div",F,[(0,r.bF)(ce,{name:"file_excel",color:"positive",size:"30px"})]),(0,r.Lk)("div",M,[(0,r.Lk)("span",P,(0,s.v_)(e.file.uplodad.name),1)])])])])])):((0,r.uX)(),(0,r.CE)("div",{key:1,class:"col-xs-12 col-sm-6 column items-center pointer",onClick:o[25]||(o[25]=function(){return e.importFile&&e.importFile.apply(e,arguments)})},[(0,r.Lk)("div",T,[(0,r.Lk)("div",N,[(0,r.Lk)("div",E,[(0,r.Lk)("div",H,[(0,r.bF)(ce,{name:"upload",color:"black",size:"30px"})]),o[32]||(o[32]=(0,r.Lk)("div",{class:"col-12 text-center"},[(0,r.Lk)("span",{class:"text-bold"},"Subir Plantilla Excel")],-1))])])])]))])])])]}),_:1},8,["modelValue"]),(0,r.bF)(ue,{modelValue:e.openModalAlumnos,"onUpdate:modelValue":o[28]||(o[28]=function(o){return e.openModalAlumnos=o}),title:"".concat(e.currentCurso.descripcion||e.currentCurso.DESCAMBITO," - ").concat(e.currentCurso.CURSONOM),css:{width:"600px"},footer:!1},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",G,[(0,r.Lk)("div",W,[(0,r.bF)(ee,{data:e.rowsAlumnos,columns:e.fieldsAlumnos,css:"height: calc(70vh - 112px)"},null,8,["data","columns"])])])]}),_:1},8,["modelValue","title"])]}),_:1})}var Q=n(76080),z=n.n(Q),J=n(45254),X=n.n(J),j=(n(52133),n(10239),n(6724),n(70199),n(515),n(52776),n(81813),n(68017),n(7346),n(6123)),K=(n(89571),n(20361),{data:function(){return{headerTrCursosClassroom:[[{label:"ClassRoom",colspan:"4",textColor:"white",bgColor:"green",borderColor:"#f2c037"},{label:"SieWeb",colspan:"12",textColor:"white",bgColor:"#562598"}]],config:{homologado:{validate:function(e){return"SI"===e.homologado},renderHtml:function(e,o,n){return n.icon({name:"SI"===e.homologado?"verified":"test_cancel",color:"SI"===e.homologado?"positive":"negative"})}},alumnos:{component:"button",icon:["users"],users:function(e){var o=this;return X()(z()().m(function n(){var r;return z()().w(function(n){while(1)switch(n.n){case 0:return o.rowsAlumnos=[],o.currentCurso=e,o.openModalAlumnos=!0,n.n=1,o.$http.get("api/HyoClassRoomAdmin/getAlumnosPorCurso",{params:{idCurso:e.id||e.IDCURSO}});case 1:r=n.v,o.rowsAlumnos=r;case 2:return n.a(2)}},n)}))()},tooltip:{users:"Ver Alumnos"},validate:{users:function(e){return"SI"===e.homologado||e.ID_AMBITO}},flat:!0},alternateLink:{tooltip:"Ir al Curso",renderHtml:function(e,o,n){return e.alternateLink?n.link({href:e.alternateLink}):o("span",{},"")}},id:{tooltip:function(e){return e.id},renderHtml:function(e,o,n){return Object.prototype.hasOwnProperty.call(e,"IDCURSO")&&!e.IDCURSO?o("span",{},""):n.copy({unique:e.id||e.IDCURSO,value:e.id})}},section:{component:"input",autoFocus:!0,input:function(e,o){var n=this;return X()(z()().m(function r(){return z()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,n.$http.put("api/HyoClassRoomAdmin/updateCourse",{idCursoClassroom:e.id,resource:{courseState:"ACTIVE",name:e.name,section:e.section}});case 1:return n.$notify("Descripción de la sección ha sido modificada.","success"),o.section=e.section,r.a(2,!0);case 2:return r.p=2,r.v,r.a(2,!1)}},r,null,[[0,2]])}))()}},clase:{renderHtml:function(e,o,n,r){return o("span","".concat(r.name||""," ").concat(r.room||""," ").concat(r.section||""))}},action:{component:"button",validate:{homologar:function(e){return"NO"===e.homologado&&"ARCHIVED"!==e.status},desasociar:function(e){return"SI"===e.homologado&&"ARCHIVED"!==e.status},archive:function(e){return"ACTIVE"===e.status},desarchivar:function(e){return"ARCHIVED"===e.status},eliminar:function(e){return"ARCHIVED"===e.status}},icon:["swap_horiz as homologar","external_link as desasociar","archive","delete as eliminar","input as desarchivar"],tooltip:{homologar:"Asociar",desasociar:"Desasociar",archive:"Archivar Clase",desarchivar:"Desarchivar",delete:"Eliminar Clase"},eliminar:function(e,o){var n=this;return X()(z()().m(function r(){var a,s,t,l;return z()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.n=1,n.$confirmar("¿Desea eliminar el curso?","delete");case 1:if(a=r.v,!a){r.n=5;break}return r.p=2,r.n=3,n.$http.delete("api/HyoClassRoomAdmin/deleteClase",{params:{idcurso:e.id}});case 3:s=r.v,t=s.message,n.currentCurso={},n.rows.splice(n.rows.indexOf(o),1),n.$notify(t,"success"),r.n=5;break;case 4:r.p=4,l=r.v,n.$notify(l.message,"warning");case 5:return r.a(2)}},r,null,[[2,4]])}))()},homologar:function(e){var o=this;return X()(z()().m(function n(){var r;return z()().w(function(n){while(1)switch(n.n){case 0:if(o.currentCurso=e,o.openModalHomologar=!0,r=o.getProfesor(),!1!==r){n.n=1;break}return n.a(2);case 1:return n.n=2,o.getCursosPorProfesor(r);case 2:return n.a(2)}},n)}))()},desasociar:function(e){var o=this;return X()(z()().m(function n(){var r,a,s;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,o.$confirmar("¿Desea desasociar el curso?",{icon:"external_link",color:"primary"});case 1:if(r=n.v,!r){n.n=4;break}return n.n=2,o.$http.delete("api/HyoClassRoomAdmin/quitarHomologacion",{params:{idCursoClassroom:e.id}});case 2:return a=n.v,s=a.message,o.currentCurso={},n.n=3,o.getCursos();case 3:o.$notify(s,"success");case 4:n.n=6;break;case 5:n.p=5,n.v,o.$notify("No ha sido posible desasociar el curso","warning");case 6:return n.a(2)}},n,null,[[0,5]])}))()},desarchivar:function(e,o){var n=this;return X()(z()().m(function r(){var a;return z()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,n.$confirmar("¿Desea desarchivar el curso?",{icon:"input",color:"primary"});case 1:if(a=r.v,!a){r.n=3;break}return r.n=2,n.$http.delete("api/HyoClassRoomAdmin/archivarClase",{params:{idCursoClassroom:e.id,name:e.name,state:"ACTIVE"}});case 2:n.rows.splice(n.rows.indexOf(o),1);case 3:r.n=5;break;case 4:r.p=4,r.v,n.$notify("No ha sido posible archivar la clase.");case 5:return r.a(2)}},r,null,[[0,4]])}))()},archive:function(e,o){var n=this;return X()(z()().m(function r(){var a;return z()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,n.$confirmar("¿Desea archivar el curso?",{icon:"archive",color:"orange-5"});case 1:if(a=r.v,!a){r.n=3;break}return r.n=2,n.$http.delete("api/HyoClassRoomAdmin/archivarClase",{params:{idCursoClassroom:e.id,name:e.name,state:"ARCHIVED"}});case 2:n.rows.splice(n.rows.indexOf(o),1);case 3:r.n=5;break;case 4:r.p=4,r.v,n.$notify("No ha sido posible archivar la clase.");case 5:return r.a(2)}},r,null,[[0,4]])}))()},flat:!0,dense:!0}},rows:[],fields:[{name:"id",label:"Id Clase",field:"id",align:"center",sortable:!0},{name:"enrollmentCode",label:"Código Clase",field:"enrollmentCode",align:"center",maxWidth:50,sortable:!0},{name:"alternateLink",label:"Ir al Curso",field:"alternateLink",align:"center",maxWidth:50},{name:"fullDescripcion",label:"Clase",field:"fullDescripcion",align:"left",sortable:!0},{name:"section",label:"Sección",field:"section",align:"left",sortable:!0},{name:"homologado",label:"Asociado",field:"homologado",align:"center",maxWidth:50},{name:"ID_AMBITO",label:"Ambito",field:"ID_AMBITO",align:"center",sortable:!0},{name:"ID_CLASE",label:"Clase",field:"ID_CLASE",align:"center",sortable:!0},{name:"ID_CURSO",label:"Curso",field:"ID_CURSO",align:"center",sortable:!0},{name:"descripcion",label:"Descripción",field:"descripcion",align:"left",sortable:!0},{name:"GRUPO",label:"Grupo",field:"GRUPO",align:"center",sortable:!0},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left",sortable:!0},{name:"ngs",label:"NGS",field:"ngs",align:"center",sortable:!0},{name:"alumnos",label:"Alumnos",field:"alumnos",align:"center",maxWidth:50},{name:"action",label:"Acción",field:"action",align:"center",width:80}]}}}),Y={data:function(){return{headerTrCursosSieWeb:[[{label:"SieWeb",colspan:"9",textColor:"white",bgColor:"#562598"},{label:"ClassRoom",colspan:"5",textColor:"white",bgColor:"green",borderColor:"#f2c037"}]],rowsCursosSieweb:[],fieldsCursosSieweb:[{name:"homologado",label:"Asociado",field:"homologado",align:"center",maxWidth:50},{name:"ID_AMBITO",label:"Ambito",field:"ID_AMBITO",align:"center",sortable:!0},{name:"ID_CLASE",label:"Clase",field:"ID_CLASE",align:"center",sortable:!0},{name:"ID_CURSO",label:"Curso",field:"ID_CURSO",align:"center",sortable:!0},{name:"DESCAMBITO",label:"Descripción",field:"DESCAMBITO",align:"left",sortable:!0},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left",sortable:!0},{name:"GRUPO",label:"Grupo",field:"GRUPO",align:"center",sortable:!0},{name:"ngs",label:"NGS",field:"ngs",align:"center",sortable:!0},{name:"alumnos",label:"Alumnos",field:"alumnos",align:"center",maxWidth:50},{name:"IDCURSO",label:"Id Clase",field:"IDCURSO",align:"center",sortable:!0},{name:"enrollmentCode",label:"Código Clase",field:"enrollmentCode",align:"center",maxWidth:50},{name:"alternateLink",label:"Ir al Curso",field:"alternateLink",align:"center",maxWidth:50},{name:"clase",label:"Clase",field:"clase",align:"left",sortable:!0}]}}},Z=n(95655),ee=n(81288),oe=n(6583),ne=n(88567),re=n(2739),ae=n(95718),se=n(16648),te=n(9736),le=n(3112),ie=n(11654),ue=n(59089),ce=n(33950),de=n(30640),me=n(34262),pe=n(11768),fe=n(26697),ge=n(53093),be=n(53811),Ce=n(43346),he=n(88865),ve=n(66824),we=n(80660),ke=n(85226),Ae={data:function(){return{rowsAlumnos:[],fieldsAlumnos:[{name:"ALUCOD",label:"Código",field:"ALUCOD",align:"center",sortable:!0},{name:"NOMCOMP",label:"Alumno",field:"NOMCOMP",align:"left",sortable:!0}]}}},Se=n(57668),Ie=n(36667),ye={components:{sieNgs:Ie.A,loading:ke.A,QForm:re.A,QTabs:fe.A,QTab:ge.A,QTabPanels:be.A,QTabPanel:Ce.A,QIcon:me.A,QInput:te.A,QCheckbox:le.A,sieModal:de.A,sieUpload:ue.A,QCard:ne.A,QCardSection:ae.A,QSelect:se.A,QBtn:ie.A,QItemSection:he.A,QItemLabel:ve.A,QPage:j.Tu,QItem:j.H0},mixins:[K,Y,Ae],data:function(){return{maxButtons:{0:[0,590],1:[590,700],2:[700]},buttons:[{label:"Actualizar",icon:"refresh",click:this.actualizarCursos},{label:"Generar",icon:"account_settings_variant",click:this.openGenerarCursos},{label:"Asociar Cursos",icon:"import_exam",click:this.openAsociarCursos},{label:"Crear Curso",icon:"plus",click:this.openCrearCurso},{label:"Archivar Masivo",icon:"archive",click:this.archivarMasivo},{label:"Cerrar Sesión",icon:"account_lock",click:this.cerrarSesionAdmin}],buttonsLogin:[{label:"Iniciar Sesión",icon:"vpn_key",click:this.login}],isLogged:!1,cursos:[],docentes:[],docente:{fullName:"Todos",id:"T"},docentesCopy:[],openModalCrearCurso:!1,openModalHomologar:!1,openModalGenerarCursos:!1,formCurso:{nombre:"",seccion:"",aula:""},salones:[],salon:"",crusos:[],curso:"",grupos:[],grupo:"",periodos:[],periodo:"",tipoTab:"classroom",cursosPorDocente:{},currentCurso:{},tipoTabCursos:"automatico",loading:!1,sumPorcentage:0,openModalAlumnos:!1,file:{uplodad:{},response:{}},sie:(0,Se["default"])(),status:[{label:"Activo",value:"ACTIVE"},{label:"Archivado",value:"ARCHIVED"}],state:"ACTIVE",copyRowsCursosSieweb:[],ngs:"",openModalAsociarCursos:!1}},methods:{archivarMasivo:function(){var e=this;return X()(z()().m(function o(){var n;return z()().w(function(o){while(1)switch(o.p=o.n){case 0:return n=e.$refs.cursos.rowsSelected(["id","name"]),n.map(function(e){e.state="ARCHIVED"}),e.$q.loading.show(),o.p=1,o.n=2,e.$http.put("api/HyoClassRoomAdmin/archivarClaseMasivo",{dataCursoClassroom:n});case 2:return o.n=3,e.getCursos();case 3:o.n=5;break;case 4:o.p=4,o.v,e.$notify("No ha sido posible archivar los cursos","warning");case 5:e.$q.loading.hide();case 6:return o.a(2)}},o,null,[[1,4]])}))()},getNGS:function(e){e=e.replace(/%/g,""),this.ngs=e;var o=JSON.parse(JSON.stringify(this.copyRowsCursosSieweb));if(e){var n=o.filter(function(o){return o.NGS.indexOf(e)>-1});this.rowsCursosSieweb=n}else this.rowsCursosSieweb=o},downloadPlantilla:function(e){window.open("".concat(this.sie.api,"/HyoClase/clase-detalle.xlsx?sie-token=").concat(this.sie.token),"_blank")},importFile:function(){this.$refs.upload.$el.querySelector("input").click()},uploadExcel:function(e){var o=this;return X()(z()().m(function n(){var r,a;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return r=e[0],o.file.uplodad=r,o.$q.loading.show(),n.p=1,n.n=2,(0,ce.Upload)({url:"api/HyoArchivo/tmp/upload",file:r});case 2:return a=n.v,o.file.response=a,n.n=3,o.$http.post("api/HyoClassRoomAdmin/prepareImportacion",{pathExcel:o.file.response});case 3:o.$notify("Proceso de asociasón de cursos completado","success"),n.n=5;break;case 4:n.p=4,n.v,o.$notify("No ha sido posible importar el archivo","warning");case 5:o.$q.loading.hide();case 6:return n.a(2)}},n,null,[[1,4]])}))()},required:function(e){return!!e||"Campo requerido"},getProfesor:function(){var e=(this.docente||{}).fullName;return e||(this.$notify("Seleccione un docente","warning"),!1)},openCrearCurso:function(){var e=this;return X()(z()().m(function o(){var n;return z()().w(function(o){while(1)switch(o.n){case 0:if(n=e.getProfesor(),!1!==n){o.n=1;break}return o.a(2);case 1:e.openModalCrearCurso=!0,e.getCursosPorProfesor(n);case 2:return o.a(2)}},o)}))()},openGenerarCursos:function(){this.openModalGenerarCursos=!0},openAsociarCursos:function(){this.openModalAsociarCursos=!0},autogenerarCursosDocente:function(){var e=this.getProfesor();!1!==e?this.autogenerarCursos(e):this.$notify("Debe seleccionar un docente","info")},autogenerarCursos:function(e){var o=this;return X()(z()().m(function n(){var r;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return o.loading=!0,n.p=1,r=o.$refs.ngs.NGS(),n.n=2,(0,we.streamFetch)("api/HyoClassRoomAdmin/autogenerarCursos",{method:"POST",data:{profesor:e,filter:r},headers:{"Content-Type":"application/json"}},function(e){var n=e.totalProgress,r=e.progress;o.sumPorcentage=o.$refs.loading.progress(n,r)});case 2:o.sumPorcentage=0,o.loading=!1,o.$notify("Proceso completado","success"),n.n=4;break;case 3:n.p=3,n.v,o.$notify("No ha sido posible completar el proceso","warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},getCursosPorProfesor:function(){var e=arguments,o=this;return X()(z()().m(function n(){var r,a,s,t,l,i,u;return z()().w(function(n){while(1)switch(n.n){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"",o.salones=[],o.salon=null,o.curso="",o.cursos=[],o.grupo=null,o.grupos=[],o.periodos=[],o.periodo=null,r=r||"",r){n.n=1;break}return n.a(2);case 1:return u=oe["default"],n.n=2,o.getCursoPorDocente(r.trim());case 2:for(l in a=u(n.v),s=(0,pe.A)(a,["DESCAMBITO","ID_CURSO","GRUPOCOD"]),o.cursosPorDocente=s,t=[],s)i=s[l],t.push(i.info);o.salones=t;case 3:return n.a(2)}},n)}))()},loadCursos:function(){var e=this;return X()(z()().m(function o(){var n,r,a,s;return z()().w(function(o){while(1)switch(o.n){case 0:for(a in e.curso="",e.cursos=[],e.grupo=null,e.grupos=[],e.periodos=[],e.periodo=null,n=[],r=e.cursosPorDocente[e.salon.DESCAMBITO].data||{},r)s=r[a],n.push(s.info);e.cursos=n;case 1:return o.a(2)}},o)}))()},loadGrupos:function(){var e=this;return X()(z()().m(function o(){var n,r,a,s;return z()().w(function(o){while(1)switch(o.n){case 0:for(a in e.grupo=null,e.grupos=[],e.periodos=[],e.periodo=null,n=[],r=e.cursosPorDocente[e.salon.DESCAMBITO].data[e.curso.ID_CURSO].data||{},r)s=r[a],n.push(s.info);e.grupos=n;case 1:return o.a(2)}},o)}))()},loadPeriodos:function(){var e=this;return X()(z()().m(function o(){var n,r,a,s,t;return z()().w(function(o){while(1)switch(o.n){case 0:for(e.periodo=[],n=(e.grupo||{}).PERIODOS,n=n||"",n=n.split(","),r=[],a=0;a<n.length;a++)s=n[a],t={label:"".concat(s," PERIODO"),value:s},e.periodo.push(s),r.push(t);e.periodos=r;case 1:return o.a(2)}},o)}))()},getCursoPorDocente:function(e){return this.$http.get("api/HyoClase/listarClaseDetalle",{params:{params:{profesor:e}}})},filter:function(e,o){var n=this;o(function(){try{n.docentes=n.docentesCopy.filter(function(o){return o["fullName"].toLowerCase().indexOf(e.toLowerCase())>-1})}catch(e){}})},getUsers:function(){var e=this;return X()(z()().m(function o(){var n,r;return z()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/HyoDirectory/getDocentesSieWebAsociados");case 1:n=o.v,r=n.users,r.unshift({fullName:"Todos",id:"T"}),e.docentesCopy=JSON.parse(JSON.stringify(r)),e.docentes=r;case 2:return o.a(2)}},o)}))()},getCursos:function(){var e=arguments,o=this;return X()(z()().m(function n(){var r,a,s,t,l,i,u,c;return z()().w(function(n){while(1)switch(n.p=n.n){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:["ACTIVE"],n.p=1,a=(o.docente||{}).fullName||"",n.n=2,o.$http.get("api/HyoClassRoomAdmin/getCursos",{params:{teacherId:(o.docente||{}).id||"",profesor:a,states:r}});case 2:s=n.v,t=s.courses,l=s.cursosSieWeb,t=t||[],o.rows=t,o.rowsCursosSieweb=l,o.copyRowsCursosSieweb=JSON.parse(JSON.stringify(l)),"T"!==o.docente.id&&(o.ngs=""),o.getNGS(o.ngs),n.n=4;break;case 3:n.p=3,c=n.v,i=c.error,u=i.msg||i.message,o.$notify(u,"warning");case 4:return n.a(2)}},n,null,[[1,3]])}))()},cerrarSesionAdmin:function(){var e=this;return X()(z()().m(function o(){var n,r,a;return z()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.$http.post("api/HyoLoginGoogleAdmin/cerrarSesionAdmin");case 1:n=o.v,r=n.message,e.$notify(r,"success"),e.$router.push({name:"intranet.muro"}),e.isLogged=!1,o.n=3;break;case 2:o.p=2,a=o.v,e.$notify(a.message,"warning");case 3:return o.a(2)}},o,null,[[0,2]])}))()},saveCurso:function(){var e=this;return X()(z()().m(function o(){var n,r,a,s,t,l;return z()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.n=1,e.$refs.crearCurso.validate();case 1:if(n=o.v,!1!==n){o.n=2;break}return o.a(2);case 2:if(e.docente.primaryEmail){o.n=3;break}return e.$notify("No es posible crear el curso, seleccione un docente","warning"),o.a(2);case 3:return e.$q.loading.show(),o.p=4,r={name:e.formCurso.nombre,room:e.formCurso.aula,section:e.formCurso.seccion,id_ambito:(e.salon||{}).ID_AMBITO,id_clase:(e.grupo||{}).ID_CLASE,id_curso:(e.curso||{}).ID_CURSO,correo:e.docente.primaryEmail},o.n=5,e.$http.post("api/HyoClassRoomAdmin/createCurso",r);case 5:return a=o.v,s=a.message,o.n=6,e.getCursos([e.state]);case 6:e.openModalCrearCurso=!1,e.$notify(s,"success"),o.n=8;break;case 7:o.p=7,l=o.v,t=l.error||{},e.$notify(t.msg||t.message||"No ha sido posible crear el curso.","warning");case 8:e.$q.loading.hide();case 9:return o.a(2)}},o,null,[[4,7]])}))()},saveHomologar:function(){var e=this;return X()(z()().m(function o(){var n,r,a,s,t,l,i;return z()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.n=1,e.$refs.refHomologar.validate();case 1:if(n=o.v,!1!==n){o.n=2;break}return o.a(2);case 2:return e.$q.loading.show(),o.p=3,r={idCursoClassroom:e.currentCurso.id,id_ambito:(e.salon||{}).ID_AMBITO,id_clase:(e.grupo||{}).ID_CLASE,id_curso:(e.curso||{}).ID_CURSO},o.n=4,e.$http.post("api/HyoClassRoomAdmin/homologar",r);case 4:return a=o.v,s=a.message,o.n=5,e.getCursos([e.state]);case 5:e.openModalHomologar=!1,e.$notify(s,"success"),o.n=7;break;case 6:o.p=6,i=o.v,t=i.error,l=t.msg||"No ha sido posible asociar el curso.",e.$notify(l,"warning");case 7:e.$q.loading.hide();case 8:return o.a(2)}},o,null,[[3,6]])}))()},login:function(){var e=this;return X()(z()().m(function o(){var n;return z()().w(function(o){while(1)switch(o.n){case 0:return e.isLogged=!1,delete window.localStorage._apiGoogle,o.n=1,e.$http.post("api/HyoLoginGoogleAdmin/login");case 1:if(n=o.v,"string"!==typeof n){o.n=2;break}(0,Z["default"])(n,"_system",500,500),o.n=5;break;case 2:if(n.constructor!==Object){o.n=4;break}return e.isLogged=!0,o.n=3,e.getUsers();case 3:o.n=5;break;case 4:e.$notify(n.message,"warning");case 5:return o.a(2)}},o)}))()},actualizarCursos:function(){var e=this;return X()(z()().m(function o(){var n;return z()().w(function(o){while(1)switch(o.n){case 0:if(n=(e.docente||{}).fullName,n){o.n=1;break}return e.$notify("Seleccione un docente","warning"),o.a(2);case 1:return o.n=2,e.getCursos([e.state]);case 2:return o.a(2)}},o)}))()}},created:function(){var e=this;return X()(z()().m(function o(){return z()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.login();case 1:return o.n=2,e.getCursos([e.state]);case 2:window.currentSieCloud=!1,(0,ee.watchAuth2)(["_apiGoogle"],function(){var o=X()(z()().m(function o(n,r){var a,s,t,l;return z()().w(function(o){while(1)switch(o.p=o.n){case 0:t=r,o.n="_apiGoogle"===t?1:7;break;case 1:return e.$q.loading.show(),o.p=2,o.n=3,e.$http.post("api/HyoLoginGoogleAdmin/guardarCodigo",{codigo:n});case 3:return a=o.v,e.isLogged=!0,o.n=4,e.getUsers();case 4:e.$notify(a.message,"success"),o.n=6;break;case 5:o.p=5,l=o.v,s=l.error||{},e.$notify(s.msg||s.message||"No ha sido posible crear el curso.","warning");case 6:return e.$q.loading.hide(),o.a(3,7);case 7:return o.a(2)}},o,null,[[2,5]])}));return function(e,n){return o.apply(this,arguments)}}());case 3:return o.a(2)}},o)}))()}},Oe=n(12807);const xe=(0,Oe.A)(ye,[["render",B]]);var De=xe}}]);