"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[24254],{24254:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});n(71225),n(50310),n(5962),n(83190);var r=n(61758),a={class:"row items-center no-wrap"},o={class:"col-auto"},l={class:"filter-section"},i={class:"row q-pa-sm q-col-gutter-sm",style:{"margin-top":"2rem"}},s={class:"col-12"},u={class:"col-12"},c={class:"col-12"},p={class:"col-12"};function m(e,t){var n=(0,r.g2)("q-btn"),m=(0,r.g2)("q-card-section"),d=(0,r.g2)("q-separator"),f=(0,r.g2)("q-select"),h=(0,r.g2)("sie-grid"),R=(0,r.g2)("footer-grid"),S=(0,r.g2)("q-card"),w=(0,r.g2)("q-input"),O=(0,r.g2)("q-toggle"),v=(0,r.g2)("sie-modal"),g=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(g,null,{default:(0,r.k6)(function(){return[(0,r.bF)(S,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,r.k6)(function(){return[(0,r.bF)(m,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",a,[t[8]||(t[8]=(0,r.Lk)("div",{class:"col"},[(0,r.Lk)("div",{class:"text-h6"},"Reportes por Sistema")],-1)),(0,r.Lk)("div",o,[(0,r.bF)(n,{class:"q-mr-sm",icon:"add",color:"primary",label:"Nuevo",size:"sm",onClick:e.create},null,8,["onClick"])])])]}),_:1}),(0,r.bF)(d),(0,r.Lk)("div",l,[(0,r.bF)(f,{class:"filter-section-field",placeholder:"Sistema",onInput:e.filSis,modelValue:e.filter.SISCOD,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filter.SISCOD=t}),"option-label":"CLAVE","option-value":"VALOR",options:e.filterColum},null,8,["onInput","modelValue","options"]),(0,r.bF)(f,{class:"filter-section-field",placeholder:"Estado",onInput:e.filEst,modelValue:e.filter.ESTADO,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.ESTADO=t}),"option-label":"CLAVE","option-value":"VALOR",options:e.filterEstados},null,8,["onInput","modelValue","options"])]),(0,r.bF)(m,null,{default:(0,r.k6)(function(){return[(0,r.bF)(h,{class:"fix-tab-height ag-theme-balham",frameworkComponents:e.frameworkComponents,columnDefs:e.columnDefs,rowData:e.rowData,onRowSelected:e.rowSelected,onGridReady:e.onGridReady},null,8,["frameworkComponents","columnDefs","rowData","onRowSelected","onGridReady"]),(0,r.bF)(R,{modelValue:e.pagina,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.pagina=t}),max:e.pages,rows:e.rowData},null,8,["modelValue","max","rows"])]}),_:1})]}),_:1}),(0,r.bF)(v,{title:"Agregar Reporté a Sistema",modelValue:e.openModal,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.openModal=t}),onSubmit:e.crearReporteSistmas},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",i,[(0,r.Lk)("div",s,[(0,r.bF)(w,{label:"Código de Reporté",placeholder:"Ingrese REPCOD",modelValue:e.form.REPCOD,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.REPCOD=t}),maxlength:e.size.REPCOD},null,8,["modelValue","maxlength"])]),(0,r.Lk)("div",u,[(0,r.bF)(f,{class:"select margin",modelValue:e.form.SISCOD,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.SISCOD=t}),placeholder:"Sistema","option-label":"CLAVE","option-value":"VALOR",options:e.optionSistemas},null,8,["modelValue","options"])]),(0,r.Lk)("div",c,[(0,r.bF)(f,{class:"select margin",modelValue:e.form.ID_REPORTE,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.ID_REPORTE=t}),placeholder:"Reporté","option-label":"CLAVE","option-value":"VALOR",options:e.optionReportes},null,8,["modelValue","options"])]),(0,r.Lk)("div",p,[(0,r.bF)(O,{class:"margin",label:"Activó",modelValue:e.form.ESTADO,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.ESTADO=t}),"model-value":e.form.ESTADO,"true-value":1,"false-value":0},null,8,["modelValue","model-value"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var d=n(76080),f=n.n(d),h=n(45254),R=n.n(h),S=(n(52133),n(10239),n(6724),n(11777),n(88567)),w=n(95718),O=n(75053),v=n(64208),g=n(3112),C=n(8445),D=n.n(C),E=n(80660),A=n(33001),V=n(16648),b={components:{QSelect:V.A},data:function(){return{options:[],value:null}},beforeMount:function(){var e=this;return R()(f()().m(function t(){var n;return f()().w(function(t){while(1)switch(t.n){case 0:if(n=[],"string"!==typeof e.params.api){t.n=2;break}return t.n=1,E.$http.get(e.params.api,{params:{response:"combo"}});case 1:n=t.v,t.n=3;break;case 2:n=e.params.options||[];case 3:e.options=D()(n),e.value=e.params.value||e.params.defaultvalue;case 4:return t.a(2)}},t)}))()},render:function(){var e=this;return(0,r.h)(V.A,{modelValue:e.value,options:e.options,"hide-selected":!0,"fill-input":!0,"use-input":!0,onInput:function(t){e.value=t,e.params.setValue(t)},onFilter:function(t,n){n(function(){var n=D()(e.params.options);e.options=(0,A.filterArray)(t,{field:e.params.dLabel||"label",list:n})})}})}},k=n(10213),I=n(36408),L=n(78840),T=n(6123),P=n(27560),F=n(54489),N=n(53380),M=["checked"];function _(e,t){return(0,r.uX)(),(0,r.CE)("input",{type:"checkbox",onClick:t[0]||(t[0]=function(t){return e.checkedHandler(t,e.params)}),checked:e.params.value},null,8,M)}n(56285);var $={name:"checkboxRender",props:{},methods:{checkedHandler:function(e,t){t.data[t.name]=e.target.checked?1:0}}},Q=n(12807);const q=(0,Q.A)($,[["render",_]]);var y=q,z={components:{QCard:S.A,QCardSection:w.A,sieModal:O.A,QInput:v.A,QCheckbox:g.A,sieGrid:I.A,actionButton:L.A,select:b,QPagination:T.ao,QSearch:T.Ks,footerGrid:P.A,QSelect:F.A,QSeparator:N.A,QToggle:T.c5,QPage:T.Tu,QBtn:T.Il},data:function(){return{api:{},pagina:1,pages:2,reportes:[],sistemas:[],filter:{ESTADO:-1,SISCOD:-1},form:{ESTADO:1,ID_REPORTE:null,SISCOD:null,REPCOD:null},size:{ESTADO:null,ID_REPORTE:null,SISCOD:null,REPCOD:null},filterColum:[{CLAVE:"TODOS",VALOR:-1}],filterReportes:[{CLAVE:"TODOS",VALOR:-1}],filterEstados:[{CLAVE:"TODOS",VALOR:-1},{CLAVE:"ACTIVO",VALOR:1},{CLAVE:"INACTIVO",VALOR:0}],columnDefs:{},rowData:[],openModal:!1,currentRow:[],frameworkComponents:{},optionEstado:[{CLAVE:"ACTIVO",VALOR:1},{CLAVE:"INACTIVO",VALOR:0}],optionReportes:[],optionSistemas:[],buttons:[{label:"NUEVO",icon:"plus",click:this.openForm}]}},mounted:function(){var e=this;return R()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.getData();case 1:e.rowData=t.v,e.getOptionData();case 2:return t.a(2)}},t)}))()},beforeMount:function(){var e=this;return R()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.n){case 0:e.frameworkComponents={actionButton:L.A,select:b,checkboxRender:y},e.getReportes(),e.getSistemas(),e.getSizeRow(),e.columnDefs=[{headerName:"ID",field:"REPCOD",editable:!1,width:50},{headerName:"Sistema",field:"SISCOD",cellRenderer:b,cellRendererParams:{options:e.sistemas},width:200},{headerName:"ID Reporté",field:"ID_REPORTE",width:150},{headerName:"Reporté",field:"NOMBRE",width:300},{headerName:"Activó",field:"ESTADO",cellRenderer:y,cellRendererParams:{name:"ESTADO"},width:100},{cellRenderer:L.A,width:40,cellRendererParams:{icon:"save",title:"Actualizar",onClick:e.updateReporteSistmas}},{cellRenderer:L.A,width:40,cellRendererParams:{icon:"delete",title:"eliminar",onClick:e.deleteReporteSistmas}}];case 1:return t.a(2)}},t)}))()},methods:{getSizeRow:function(){var e=this;return R()(f()().m(function t(){var n;return f()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,E.$http.get("api/ReporteSistemaController/getSizeRow");case 1:n=t.v,n.map(function(t){e.size[t["CAMPO"]]=Number(t["FSIZE"])}),console.log(e.size);case 2:return t.a(2)}},t)}))()},getData:function(){return R()(f()().m(function e(){var t;return f()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,E.$http.get("api/ReporteSistemaController/getReporteSistema");case 1:return t=e.v,e.a(2,t)}},e)}))()},cboFilter:function(e){var t=this;return R()(f()().m(function n(){var r,a;return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,t.getData();case 1:r=n.v,a=[],-1!==t.filter[e]?(a=r.filter(function(n){return n[e]===t.filter[e]}),t.rowData=a):t.rowData=r;case 2:return n.a(2)}},n)}))()},filSis:function(){var e=this;return R()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.n){case 0:e.cboFilter("SISCOD"),e.filter["ID_REPORTE"]=-1,e.filter["ESTADO"]=-1;case 1:return t.a(2)}},t)}))()},filEst:function(){var e=this;return R()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.n){case 0:e.cboFilter("ESTADO"),e.filter["ID_REPORTE"]=-1,e.filter["SISCOD"]=-1;case 1:return t.a(2)}},t)}))()},getReportes:function(){var e=this;return R()(f()().m(function t(){var n;return f()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,E.$http.get("api/ReporteController/getReporte");case 1:n=t.v,n.map(function(t){return e.reportes.push({label:t.NOMBRE,value:t.ID_REPORTE})}),n.map(function(t){return e.filterReportes.push({CLAVE:t.NOMBRE,VALOR:t.ID_REPORTE})});case 2:return t.a(2)}},t)}))()},getSistemas:function(){var e=this;return R()(f()().m(function t(){var n;return f()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,E.$http.get("api/ReporteSistemaController/getSistema");case 1:n=t.v,n.map(function(t){return e.sistemas.push({label:t.SISNOM,value:t.SISCOD})}),n.map(function(t){return e.filterColum.push({CLAVE:t.SISNOM,VALOR:t.SISCOD})});case 2:return t.a(2)}},t)}))()},getOptionData:function(){var e=this;return R()(f()().m(function t(){var n,r,a;return f()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,E.$http.get("api/ReporteController/getReporte");case 1:return n=t.v,t.n=2,E.$http.get("api/ReporteSistemaController/getSistema");case 2:r=t.v,n.map(function(t){return e.optionReportes.push({VALOR:t.ID_REPORTE,CLAVE:t.NOMBRE})}),r.map(function(t){return e.optionSistemas.push({VALOR:t.SISCOD,CLAVE:t.SISNOM})}),t.n=4;break;case 3:t.p=3,a=t.v,(0,k.alert)(a.error.message);case 4:return t.a(2)}},t,null,[[0,3]])}))()},crearReporteSistmas:function(){var e=this;return R()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.n){case 0:(0,k.confirm)("¿Realmente desea ingresar este registro?","update").onOk(R()(f()().m(function t(){var n;return f()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,E.$http.post("api/ReporteSistemaController/addReporteSistema",{data:e.form});case 1:return(0,k.alert)("Ingresado Correctamente"),t.n=2,e.getData();case 2:e.rowData=t.v,e.openModal=!1,t.n=4;break;case 3:t.p=3,n=t.v,(0,k.alert)(n.error.message);case 4:return t.a(2)}},t,null,[[0,3]])})));case 1:return t.a(2)}},t)}))()},updateReporteSistmas:function(){var e=this;return R()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.n){case 0:e.$confirm("¿Realmente desea actualizar este registro?","update").onOk(R()(f()().m(function t(){var n;return f()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,E.$http.post("api/ReporteSistemaController/updateReporteSistema",{params:e.currentRow});case 1:e.$alert("Actualizado Correctamente"),t.n=3;break;case 2:t.p=2,n=t.v,(0,k.alert)(n.error.message);case 3:return t.a(2)}},t,null,[[0,2]])})));case 1:return t.a(2)}},t)}))()},deleteReporteSistmas:function(){var e=this;return R()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.n){case 0:e.$confirm("¿Realmente desea eliminar este registro?").onOk(R()(f()().m(function t(){var n;return f()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,E.$http.delete("api/ReporteSistemaController/deleteReporteSistema",{params:{id:e.currentRow.REPCOD}});case 1:return e.$alert("Eliminado Correctamente","success"),t.n=2,e.getData();case 2:e.rowData=t.v,t.n=4;break;case 3:t.p=3,n=t.v,(0,k.alert)(n.error.message);case 4:return t.a(2)}},t,null,[[0,3]])})));case 1:return t.a(2)}},t)}))()},create:function(){this.openModal=!0,this.clear()},clear:function(){this.form.ESTADO=null,this.form.ID_REPORTE=null,this.form.REPCOD=null,this.form.SISCOD=null},rowSelected:function(e){this.currentRow=e.data},onGridReady:function(e){this.api=e.api}}};const x=(0,Q.A)(z,[["render",m]]);var U=x}}]);