"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[74554],{74554:function(e,o,a){a.r(o),a.d(o,{default:function(){return b}});var t=a(61758),l={class:"column col q-ma-sm"},s={class:"row"};function n(e,o){var a=(0,t.g2)("q-option-group"),n=(0,t.g2)("sie-select"),i=(0,t.g2)("q-table"),r=(0,t.g2)("q-btn"),c=(0,t.g2)("q-page-sticky");return(0,t.uX)(),(0,t.CE)("div",l,[o[5]||(o[5]=(0,t.Lk)("span",{class:"text-bold q-my-sm"},"Campos",-1)),(0,t.bF)(a,{class:"row q-my-sm",type:"checkbox",color:"secondary",modelValue:e.campos,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.campos=o}),options:e.items},null,8,["modelValue","options"]),(0,t.Lk)("div",s,[(0,t.bF)(n,{class:"col",type:"outlined",modelValue:e.nivel,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.nivel=o}),options:e.niveles,label:"INSTRUDES",val:"INSTRUCOD",placeholder:"ngs.nivel",onInput:e.cambiarNivel},null,8,["modelValue","options","onInput"]),(0,t.bF)(n,{class:"col",type:"outlined",modelValue:e.grado,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.grado=o}),options:e.grados[e.nivel],label:"GRADODES",val:"GRADOCOD",placeholder:"ngs.grado",onInput:e.filtrarData},null,8,["modelValue","options","onInput"])]),(0,t.bF)(i,{class:"col q-my-sm","table-style":"max-height: 70vh","row-key":"NEMO",pagination:e.tablaNemos.paginacion,"onUpdate:pagination":o[3]||(o[3]=function(o){return e.tablaNemos.paginacion=o}),data:e.salones,columns:e.tablaNemos.columns,selection:e.tablaNemos.tipoSeleccion,selected:e.tablaNemos.registrosSeleccionados,"onUpdate:selected":o[4]||(o[4]=function(o){return e.tablaNemos.registrosSeleccionados=o}),"hide-bottom":""},null,8,["pagination","data","columns","selection","selected"]),(0,t.bF)(c,{expand:"",position:"bottom-right",offset:[20,20]},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{fab:"",round:"",color:"secondary",icon:"file_export",onClick:e.exportar},null,8,["onClick"])]}),_:1})])}a(10239),a(50310),a(90095),a(48426),a(83190),a(13715);var i=a(6123),r=a(30545),c=a(80660),u=a(78131),d=a(57668),m=a(93616),p=a(33001),h={components:{QOptionGroup:i.EX,QRadio:i.$,QPageSticky:i._U,QCheckbox:i.vZ,sieSelect:m.A,QTable:r.A,QBtn:i.Il},data:function(){return{sie:(0,d["default"])(),salones:[],salonesBase:[],campos:[],tablaNemos:{columns:[{name:"NEMO",field:"NEMO",align:"left"},{name:"NEMODES",field:"NEMODES",align:"left",label:this.$t("salon")}],paginacion:{page:1,rowsPerPage:40},registrosSeleccionados:[],tipoSeleccion:"multiple"},items:[{label:"Codigo de Alumno",value:"CODALU"},{label:"Nombre Completo",value:"NOMCOMP"},{label:"Nombre de Alumno",value:"NOMBRE"},{label:"Apellido Paterno",value:"PATERNO"},{label:"Apellido Materno",value:"MATERNO"},{label:"Salon",value:"SALON"},{label:"Nivel",value:"NIVEL"},{label:"Grado",value:"GRADO"},{label:"SecciÃ³n",value:"SECCION"},{label:"Aula",value:"AULA"}],niveles:[],grados:{},nivel:"T",grado:"T"}},methods:{exportar:function(){if(this.tablaNemos.registrosSeleccionados.length>0){var e=[];this.tablaNemos.registrosSeleccionados.forEach(function(o){e.push(o.NEMO)});var o={campos:this.campos,nemos:e},a=this.sie.api+"/HyoAlumnos/generarQrDescargaBloque?campos="+o.campos+"&nemos="+e+"&access_token="+this.sie.token;(0,u["default"])(a,"data.zip")}},marcAll:function(){return this.campos.length===this.items.length},marcarTodos:function(e){var o=this;this.campos=[],e&&this.items.forEach(function(e){o.campos.push(e.value)})},cambiarNivel:function(e){this.grado="T",this.filtrarData()},filtrarData:function(){this.salones=Object.assign(this.salonesBase),"T"!==this.nivel&&(this.salones=(0,p.filterArray)(this.nivel,{field:"INSTRUCOD",list:this.salones}),"T"!==this.grado&&(this.salones=(0,p.filterArray)(this.grado,{field:"GRADOCOD",list:this.salones})))}},computed:{todos:function(){var e=this.campos.length===this.items.length;return this.campos.length!==this.items.length&&this.campos.length>0&&(e=null),e}},created:function(){var e=this;c.$http.get("api/HyoSalones/listaSalones").then(function(o){var a=o.json;e.salonesBase=a,e.filtrarData()}),c.$http.get("api/HyoInstrus/obtInstru").then(function(o){var a=o.json;a.unshift({INSTRUCOD:"T",INSTRUDES:"Todos"}),e.niveles=a}),c.$http.get("api/HyoGradoNivs/obtGrados",{params:{agrupado:!0,todos:"T"}}).then(function(o){var a=o.json;e.grados=a})}},g=a(12807);const f=(0,g.A)(h,[["render",n]]);var b=f}}]);