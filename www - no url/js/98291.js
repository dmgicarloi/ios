"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[98291],{98291:function(e,n,t){t.r(n),t.d(n,{default:function(){return ye}});t(515),t(52776),t(53113);var o=t(61758),a=t(58790),r={class:"row q-col-gutter-sm"},c={class:"col-md-3 col-xs-12"},i={class:"row q-col-gutter-sm"},l={class:"col-12"},u={class:"col-12"},s={class:"col-12"},d={class:"text-center"},f={class:"col-md-9 col-xs-12"},m={class:"row q-col-gutter-sm"},p={class:"col-12"},h={class:"q-pa-md"},b={class:"row q-col-gutter-sm"},v={class:"col-md-3 col-xs-6"},g={class:"col-md-3 col-xs-6"},w={class:"col-md-3 col-xs-6"},C={class:"col-md-3 col-xs-6"},O={class:"col-md-3 col-xs-6"},D={class:"col-md-3 col-xs-6"},y={class:"col-md-3 col-xs-6"},A={class:"col-md-3 col-xs-6"},k={class:"col-md-3 col-xs-6"},S={class:"col-md-9 col-xs-6"},E={class:"col-12"},I={class:"q-pa-md"},F={class:"row q-col-gutter-sm"},U={class:"col-12"};function N(e,n){var t=(0,o.g2)("header-btn"),N=(0,o.g2)("sie-upload"),L=(0,o.g2)("q-input"),M=(0,o.g2)("q-btn"),R=(0,o.g2)("q-select"),V=(0,o.g2)("q-datetime"),q=(0,o.g2)("q-icon"),x=(0,o.g2)("q-card"),T=(0,o.g2)("q-table"),P=(0,o.g2)("q-item-section"),j=(0,o.g2)("q-item"),$=(0,o.g2)("q-list"),G=(0,o.g2)("sie-modal"),_=(0,o.g2)("q-card-section"),H=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(H,{class:"intranet--cartas-ingreso-intranet q-pa-sm"},{default:(0,o.k6)(function(){return[(0,o.bF)(x,{flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(t,{name:"Cartas de Ingreso",buttons:e.botones},null,8,["buttons"]),(0,o.bF)(_,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",r,[(0,o.Lk)("div",c,[(0,o.Lk)("div",i,[(0,o.Lk)("div",l,[(0,o.bF)(N,{onUpload:e.uploadFile,onDelete:e.clearFile,icon:"file",title:"Subir archivo",allow:["doc","docx","rtf"],modelValue:e.archivo,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.archivo=n}),botones:!0,edit:!1,remove:!0},null,8,["onUpload","onDelete","modelValue"])]),(0,o.Lk)("div",u,[(0,o.bF)(L,{modelValue:e.narchivo,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.narchivo=n}),label:"Nombre de archivo",readonly:!e.editable},null,8,["modelValue","readonly"])]),(0,o.Lk)("div",s,[(0,o.Lk)("div",d,[(0,o.bF)(M,{label:"Etiquetas",icon:"info",onClick:e.openEtiquetas,color:"secondary"},null,8,["onClick"])])])])]),(0,o.Lk)("div",f,[(0,o.Lk)("div",m,[(0,o.Lk)("div",p,[(0,o.bF)(x,{flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",h,[(0,o.Lk)("div",b,[(0,o.Lk)("div",v,[(0,o.bF)(R,{modelValue:e.famcod,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.famcod=n}),options:e.familias,"option-label":"FAMDES",label:"Familia",onInput:e.getDatosCarta},null,8,["modelValue","options","onInput"])]),(0,o.Lk)("div",g,[(0,o.bF)(R,{modelValue:e.instrucod,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.instrucod=n}),options:e.niveles,label:e.$t("ngs.nivel"),onInput:e.cambiarNivel},null,8,["modelValue","options","label","onInput"])]),(0,o.Lk)("div",w,[(0,o.bF)(R,{modelValue:e.gradocod,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.gradocod=n}),options:e.grados,label:e.$t("ngs.grado"),onInput:e.cambiarGrado},null,8,["modelValue","options","label","onInput"])]),(0,o.Lk)("div",C,[(0,o.bF)(R,{modelValue:e.seccioncod,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.seccioncod=n}),options:e.secciones,label:e.$t("ngs.seccion"),onInput:e.getDatosCarta},null,8,["modelValue","options","label","onInput"])]),(0,o.Lk)("div",O,[(0,o.bF)(R,{modelValue:e.matriculado,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.matriculado=n}),options:e.matriculados,label:e.$t("matricula.matriculado"),onInput:e.getDatosCarta},null,8,["modelValue","options","label","onInput"])]),(0,o.Lk)("div",D,[(0,o.bF)(R,{modelValue:e.tipo,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.tipo=n}),options:e.perfiles,label:e.$t("usuario.nombre"),onInput:e.getDatosCarta},null,8,["modelValue","options","label","onInput"])]),(0,o.Lk)("div",y,[(0,o.bF)(R,{modelValue:e.hmnoubi,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.hmnoubi=n}),options:"004"===e.tipo?e.arrHmnoubi:[],label:e.$t("orden"),onInput:e.getDatosCarta},null,8,["modelValue","options","label","onInput"])]),(0,o.Lk)("div",A,[(0,o.bF)(V,{modelValue:e.fecha,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.fecha=n}),type:"date",label:"Fecha",format:"DD/MM/YYYY"},null,8,["modelValue"])]),(0,o.Lk)("div",k,[(0,o.bF)(R,{modelValue:e.anoing,"onUpdate:modelValue":n[10]||(n[10]=function(n){return e.anoing=n}),options:e.anos,label:e.$t("anoIng"),onInput:e.getDatosCarta},null,8,["modelValue","options","label","onInput"])]),(0,o.Lk)("div",S,[(0,o.bF)(L,{modelValue:e.search,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.search=n}),clearable:"",debounce:600,label:e.$t("agenda.titFiltros")},{prepend:(0,o.k6)(function(){return[(0,o.bF)(q,{name:"search"})]}),_:1},8,["modelValue","label"])])])])]}),_:1})]),(0,o.Lk)("div",E,[(0,o.bF)(T,{class:"sie-table_alto","wrap-cells":"",dense:"",flat:"",bordered:"",data:e.datosCarta,columns:e.columns,pagination:e.pagination,"onUpdate:pagination":n[12]||(n[12]=function(n){return e.pagination=n}),filter:e.search,"rows-per-page-options":[0],"row-key":"CODIGO",color:"secondary",selection:e.selection,selected:e.selected,"onUpdate:selected":n[13]||(n[13]=function(n){return e.selected=n}),"table-style":"height: 70vh"},null,8,["data","columns","pagination","filter","selection","selected"])])])])]),(0,o.bF)(G,{class:"intranet--cartas-ingreso--etiquetas",modelValue:e.openModelEtiquetas,"onUpdate:modelValue":n[14]||(n[14]=function(n){return e.openModelEtiquetas=n}),title:"Etiquetas"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",I,[(0,o.Lk)("div",F,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Object.keys(e.etiquetas),function(n){return(0,o.uX)(),(0,o.CE)("div",U,[(0,o.bF)($,{class:"no-padding",separator:""},{default:(0,o.k6)(function(){return[(0,o.bF)(j,{class:"bg-secondary text-white"},{default:(0,o.k6)(function(){return[(0,o.bF)(P,null,{default:(0,o.k6)(function(){return[(0,o.eW)((0,a.v_)(n),1)]}),_:2},1024)]}),_:2},1024),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.etiquetas[n],function(e,n){return(0,o.uX)(),(0,o.Wv)(j,null,{default:(0,o.k6)(function(){return[(0,o.bF)(P,{class:"text-bold",avatar:""},{default:(0,o.k6)(function(){return[(0,o.eW)((0,a.v_)("<".concat(n,">:")),1)]}),_:2},1024),(0,o.bF)(P,null,{default:(0,o.k6)(function(){return[(0,o.eW)((0,a.v_)(e),1)]}),_:2},1024)]}),_:2},1024)}),256))]}),_:2},1024)])}),256))])])]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})}var L=t(8445),M=t.n(L),R=t(76080),V=t.n(R),q=t(45254),x=t.n(q),T=(t(52133),t(50310),t(90095),t(6724),t(48426),t(83190),t(44264),t(81813),t(13715),t(63411)),P=t(88567),j=t(95718),$=t(50425),G=t(16648),_=t(9736),H=t(34262),Q=t(11654),W=t(65673),B=t(82327),Y=t(88865),X=t(50304),z=t(59089),Z=t(30640),K=t(80660),J={obtAnos:function(){return x()(V()().m(function e(){return V()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,K.$http.get("api/HyoAnos/obtAnos"))}},e)}))()},obtenerDatosDeColegio:function(e){return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,K.$http.get("api/HyoColegios/obtenerDatosDeColegio",{params:e}))}},n)}))()},obtFamilias:function(){return x()(V()().m(function e(){return V()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,K.$http.get("api/HyoFamilias/obtFamilias"))}},e)}))()},obtInstru:function(){return x()(V()().m(function e(){return V()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,K.$http.get("api/HyoInstrus/obtInstru"))}},e)}))()},obtPerfilesCartaIngreso:function(){return x()(V()().m(function e(){return V()().w(function(e){while(1)switch(e.n){case 0:return e.a(2,K.$http.get("api/HyoPerfiles/obtPerfilesCartaIngreso"))}},e)}))()},obtenerDatosCarta:function(e){return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,K.$http.get("api/HyoFamilias/obtenerDatosCarta",{params:e}))}},n)}))()},obtGrados:function(e){return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,K.$http.get("api/HyoGradoNivs/obtGrados",{params:e}))}},n)}))()},obtSecciones:function(e){return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,K.$http.get("api/HyoSalones/obtSecciones",{params:e}))}},n)}))()},obtHijosArreglo:function(e){return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.a(2,K.$http.post("api/HyoFamilias/obtHijosArreglo",e))}},n)}))()}},ee=t(57008),ne=t.n(ee),te=(t(12563),t(30683),t(39866),t(23825),t(77507),t(434),t(27153),t(76921),t(13600),t(37406),t(62692),t(66307),t(33092),t(24066),t(57053),t(94013),t(32701),t(67396),t(50923),t(59502),t(15891)),oe=t.n(te);function ae(e,n){return n[0]+e+n[1]}function re(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["{{","}}"];if(Array.isArray(t)&&2===t.length||(t=["{{","}}"]),"string"!==typeof n)return n;var o=M()(t);"<"===t[0]&&">"===t[1]&&(o=["&lt;","&gt;"]);var a=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},r=a(o[0]),c=a(o[1]),i=new RegExp("".concat(r,"[<>\\s\\w\\/:='\"\\-]*(?:<w:t>)?(\\w+)<\\/w:t>[<>\\s\\w\\/:='\"\\-]*").concat(c),"gi"),l=new RegExp("".concat(r,"(\\w+)").concat(c),"g"),u=new RegExp("".concat(r,"|").concat(c),"g"),s=n.replace(l,function(n,o){var a;return Object.hasOwn(e,o)?null!==(a=e[o])&&void 0!==a?a:"":"function"===typeof ae?ae(o,t):n});return s=s.replace(i,function(n){var o,a=n.replace(/<\/?[0-9a-z:' ="_\-]+\/?>\s?/gi,"").replace(u,"");return Object.hasOwn(e,a)?null!==(o=e[a])&&void 0!==o?o:"":"function"===typeof ae?ae(n,t):n}),s}function ce(e,n,t){return ie.apply(this,arguments)}function ie(){return ie=x()(V()().m(function e(n,t,o){var a,r,c,i,l,u,s,d,f,m,p=arguments;return V()().w(function(e){while(1)switch(e.p=e.n){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:{},r=ne()({},n),c='<w:br w:type="page" />',i=a.delimitadores||["{{","}}"],l=a.documento||"word/document.xml",u=a.regexBody||/<w:body>[\s\S]*?<\/w:body>/i,s="",Array.isArray(t)?s=t.map(function(e,n){var o=re(e,r.onlyBody,i);return n<t.length-1?o+c:o}).join(""):t&&Object.keys(t).length>0&&(s=re(t,r.onlyBody,i)),d=r.template.replace(u,"<w:body>".concat(s,"</w:body>")),r.zip.file(l,d),f={type:o||"blob",compression:"STORE",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},e.p=1,e.n=2,r.zip.generateAsync(f);case 2:return e.a(2,e.v);case 3:throw e.p=3,m=e.v,console.error("Error al generar el documento:",m),m;case 4:return e.a(2)}},e,null,[[1,3]])})),ie.apply(this,arguments)}function le(){return ue.apply(this,arguments)}function ue(){return ue=x()(V()().m(function e(){var n,t,o,a,r,c,i,l,u,s,d,f,m,p,h=arguments;return V()().w(function(e){while(1)switch(e.p=e.n){case 0:if(n=h.length>0&&void 0!==h[0]?h[0]:{},t=n.archivo,o=n.documento,a=void 0===o?"word/document.xml":o,r=n.regexBody,c=void 0===r?/<w:body>([\s\S]*?)<\/w:body>/i:r,i=n.cache,l=void 0===i?null:i,!l){e.n=1;break}return e.a(2,l);case 1:return e.p=1,e.n=2,oe().loadAsync(t);case 2:if(u=e.v,s=u.file(a),s){e.n=3;break}throw new Error("No se encontró el archivo: ".concat(a));case 3:return e.n=4,s.async("string");case 4:if(d=e.v,f=d.match(c),f&&f[1]){e.n=5;break}throw new Error("No se pudo extraer el body del documento");case 5:return m=f[1],e.a(2,{zip:u,template:d,onlyBody:m});case 6:if(e.p=6,p=e.v,!p.message.includes("Can't find end of central directory")){e.n=7;break}throw new Error("El archivo no es un DOCX válido");case 7:throw p;case 8:return e.a(2)}},e,null,[[1,6]])})),ue.apply(this,arguments)}function se(e){return de.apply(this,arguments)}function de(){return de=x()(V()().m(function e(n){var t,o,a,r,c=arguments;return V()().w(function(e){while(1)switch(e.p=e.n){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:{},e.p=1,e.n=2,le(t);case 2:return o=e.v,e.n=3,ce(o,n,t.type,t);case 3:return a=e.v,e.a(2,a);case 4:throw e.p=4,r=e.v,console.error("Error al generar DOCX:",r),r;case 5:return e.a(2)}},e,null,[[1,4]])})),de.apply(this,arguments)}function fe(e){return me.apply(this,arguments)}function me(){return me=x()(V()().m(function e(n){var t,o,a,r,c,i,l=arguments;return V()().w(function(e){while(1)switch(e.p=e.n){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"document",o=l.length>2&&void 0!==l[2]?l[2]:{},e.p=1,e.n=2,se(n,o);case 2:return a=e.v,r=URL.createObjectURL(a),c=document.createElement("a"),c.href=r,c.download="".concat(t,".docx"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r),e.a(2,a);case 3:throw e.p=3,i=e.v,console.error("Error al descargar documento:",i),i;case 4:return e.a(2)}},e,null,[[1,3]])})),me.apply(this,arguments)}function pe(e){return he.apply(this,arguments)}function he(){return he=x()(V()().m(function e(n){var t,o,a,r,c,i,l,u,s,d,f,m,p=arguments;return V()().w(function(e){while(1)switch(e.p=e.n){case 0:if(t=p.length>1&&void 0!==p[1]?p[1]:"documentos",o=p.length>2&&void 0!==p[2]?p[2]:{},e.p=1,a=[],Array.isArray(n)?a=n:n&&Object.keys(n).length>0&&(a=[n]),0!==a.length){e.n=2;break}throw new Error("No hay datos para generar documentos");case 2:return r=new(oe()),c=r.folder(t),e.n=3,le(o);case 3:return i=e.v,l=a.map(function(e){return ce(i,e,"arraybuffer",o)}),e.n=4,Promise.all(l);case 4:return u=e.v,a.forEach(function(e,n){var t="".concat(e.famdes);c.file("".concat(t,".docx"),u[n])}),e.n=5,r.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}});case 5:return s=e.v,d=URL.createObjectURL(s),f=document.createElement("a"),f.href=d,f.download="".concat(t,".zip"),f.style.display="none",document.body.appendChild(f),f.click(),setTimeout(function(){document.body.removeChild(f),URL.revokeObjectURL(d)},100),e.a(2,s);case 6:throw e.p=6,m=e.v,console.error("Error al generar ZIP:",m),m;case 7:return e.a(2)}},e,null,[[1,6]])})),he.apply(this,arguments)}var be={download:fe,downloadZip:pe},ve=t(57668),ge=t(13813),we=(t(33001),t(26319)),Ce={components:{QCard:P.A,QCardSection:j.A,QTable:$.A,QSelect:G.A,QInput:_.A,QIcon:H.A,QBtn:Q.A,QList:W.A,QItem:B.A,QItemSection:Y.A,QDatetime:X.A,SieUpload:z.A,SieModal:Z.A},data:function(){return{sie:(0,ve["default"])(),archivo:null,familias:[],niveles:[],grados:[],secciones:[],matriculados:[{label:"Todos",value:"all"},{label:"Si",value:"S"},{label:"No",value:"N"}],perfiles:[],arrHmnoubi:[{label:"Hijo mayor",value:"P"},{label:"Hijo menor",value:"U"}],anos:[],famcod:"",instrucod:"",gradocod:"",seccioncod:"",matriculado:"all",tipo:"",hmnoubi:"P",fecha:new Date,anoing:"",search:"",datosCartaTemp:[],columns:[{name:"INSTRUCOD",label:"N",field:"INSTRUCOD",align:"center",sortable:!0},{name:"GRADOCOD",label:"G",field:"GRADOCOD",align:"center",sortable:!0},{name:"SECCIONCOD",label:"S",field:"SECCIONCOD",align:"center",sortable:!0},{name:"CODIGO",label:this.$t("codigo"),field:"CODIGO",align:"center",sortable:!0},{name:"NOMCOMP",label:this.$t("nombres"),field:"NOMCOMP",align:"left",sortable:!0}],pagination:{rowsPerPage:0},selection:"multiple",selected:[],colegio:"",openModelEtiquetas:!1,etiquetas:[],editable:!1,narchivoManual:null}},computed:{narchivo:{get:function(){return null!==this.narchivoManual?this.narchivoManual:"Carta".concat(we["default"].formatDate(this.fecha,"YYYYMMDD"))},set:function(e){this.narchivoManual=e}},botones:function(){return[{icon:"folder",label:"Folder",click:this.comprimir},{icon:"insert_drive_file",label:"Archivo",click:this.archivoUnico}]},datosCarta:function(){return this.datosCartaTemp}},methods:{init:function(){var e=this;return x()(V()().m(function n(){var t,o,a,r,c,i,l,u,s,d,f,m;return V()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,J.obtAnos();case 1:return t=n.v,o=t.json,e.anos=(0,ge["default"])(o,function(e){return{label:e.ANO,value:e.ANO}}),e.anos.unshift({label:"Todos",value:"all"}),e.anoing=(0,ve["default"])().ano.toString(),n.n=2,J.obtenerDatosDeColegio({$cache:!0});case 2:return a=n.v,r=a.json,e.colegio=r,n.n=3,J.obtFamilias();case 3:return c=n.v,i=c.json,i.unshift({FAMCOD:"all",FAMDES:"Todos"}),e.familias=i,e.famcod=i[0],n.n=4,J.obtInstru();case 4:return l=n.v,u=l.json,u.unshift({INSTRUCOD:"all",INSTRUDES:"Todos"}),e.niveles=(0,ge["default"])(u,function(e){return{label:e.INSTRUDES,value:e.INSTRUCOD}}),e.instrucod=u[0].INSTRUCOD,n.n=5,J.obtPerfilesCartaIngreso();case 5:return s=n.v,d=s.json,f=d.perfiles,m=d.etiquetas,e.perfiles=(0,ge["default"])(f,function(e){return{label:e.TIPNOM,value:e.TIPCOD}}),e.tipo=f[0].TIPCOD,e.etiquetas=m,n.n=6,e.getDatosCarta();case 6:return n.a(2)}},n)}))()},getDatosCarta:function(){var e=this;return x()(V()().m(function n(){var t,o,a;return V()().w(function(n){while(1)switch(n.n){case 0:return t={},""!==e.famcod.FAMCOD&&"all"!==e.famcod.FAMCOD&&(t["famcod"]=e.famcod.FAMCOD),""!==e.instrucod&&"all"!==e.instrucod&&(t["instrucod"]=e.instrucod),""!==e.gradocod&&"all"!==e.gradocod&&(t["gradocod"]=e.gradocod),""!==e.seccioncod&&"all"!==e.seccioncod&&(t["seccioncod"]=e.seccioncod),""!==e.matriculado&&"all"!==e.matriculado&&(t["matriculado"]=e.matriculado),""!==e.anoing&&"all"!==e.anoing&&(t["anoing"]=parseInt(e.anoing)),""!==e.hmnoubi&&(t["hmnoubi"]=e.hmnoubi),t["tipo"]=e.tipo,n.n=1,J.obtenerDatosCarta({parametros:t});case 1:o=n.v,a=o.json,e.datosCartaTemp=a;case 2:return n.a(2)}},n)}))()},cambiarNivel:function(e){var n=this;return x()(V()().m(function t(){var o,a;return V()().w(function(t){while(1)switch(t.n){case 0:return n.grados=[],n.secciones=[],n.gradocod="",n.seccioncod="",t.n=1,J.obtGrados({instru:e});case 1:return o=t.v,a=o.json,a.unshift({GRADOCOD:"all",GRADODES:"Todos"}),n.grados=(0,ge["default"])(a,function(e){return{label:e.GRADODES,value:e.GRADOCOD}}),n.gradocod=a[0].GRADOCOD,t.n=2,n.getDatosCarta();case 2:return t.a(2)}},t)}))()},cambiarGrado:function(e){var n=this;return x()(V()().m(function t(){var o,a;return V()().w(function(t){while(1)switch(t.n){case 0:if(n.secciones=[],n.seccioncod="","all"===n.gradocod){t.n=2;break}return t.n=1,J.obtSecciones({gradocod:e,instrucod:n.instrucod});case 1:o=t.v,a=o.json,a.unshift({SECCIONCOD:"all",SECCIONDES:"Todos"}),n.secciones=(0,ge["default"])(a,function(e){return{label:e.SECCIONDES,value:e.SECCIONCOD}}),n.seccioncod=a[0].SECCIONCOD;case 2:return t.n=3,n.getDatosCarta();case 3:return t.a(2)}},t)}))()},uploadFile:function(e){var n=this;return x()(V()().m(function t(){return V()().w(function(t){while(1)switch(t.n){case 0:n.editable=!0;try{n.archivo=e[0]}catch(e){n.archivo=null}case 1:return t.a(2)}},t)}))()},clearFile:function(){this.editable=!1,this.archivo=null},generarArreglo:function(){var e=this;return x()(V()().m(function n(){var t,o,a,r,c,i,l,u,s,d,f,m,p;return V()().w(function(n){while(1)switch(n.p=n.n){case 0:if(t=e.selected,o=e.tipo,a=function(e){return e?e.toLowerCase():""},r=function(e){return e?e.toLowerCase().replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()}):""},c=function(e){var n=["all",void 0,null];return!(n.indexOf(e)+1)},i={},e.niveles.forEach(function(e){i[e.value]=e.label}),l={colegio:e.colegio.colname,fecha:we["default"].formatearFechaLargaEspanol(e.fecha),director:r(e.colegio.DIRECTOR),distrito:r(e.colegio.UBGNOM),email:a(e.colegio.CORREO),pagweb:a(e.colegio.PAGWEB),hijos:""},u={},"004"!==o){n.n=4;break}return s=t.map(function(e){return e.FAMCOD}),d=e.matriculado,d=c(d)?d:"N",n.p=1,n.n=2,J.obtHijosArreglo({arrFamcod:s,ano:e.anoing,matricula:d,noFretd:!0,usupas:!0});case 2:f=n.v,m=f.json,u=m,n.n=4;break;case 3:n.p=3,n.v,u={};case 4:return p=t.map(function(e){for(var n=Object.assign({famcod:e.USUCODF||e.USUCOD,famdes:e.FAMDES,nomcomp:e.NOMCOMP,usupasf:e.USUPASF||e.PASSWORD,usupas:e.PASSWORD,usucod:e.USUCOD,profcod:e.USUCOD,pernom:e.NOMCOMP,usupasp:e.PASSWORD,ngs:e.INSTRUCOD+e.GRADOCOD+e.SECCIONCOD,nivel:i[e.INSTRUCOD],grado:e.GRADODES,seccion:e.SECCIONDES,padnom:e.PADNOM,madnom:e.MADNOM,famdir:e.FAMDIR,house:e.HOUSE},l),t=u[e.FAMCOD],a=0;a<6;a++){var r=t&&Array.isArray(t)&&t[a]?t[a]:{};"005"===o&&0===a&&(r=e);var c=a+1;n["alumno"+c]=r.NOMBRES,n["alunomcomp"+c]=r.NOMCOMP,n["codbanco"+c]=r.ALUCODANT,n["alucod"+c]=r.USUCOD,n["usupasa"+c]=r.PASSWORD,n["nemodes"+c]=r.NEMODES,n["docide"+c]=r.DOCIDENRO,n["codalu"+c]=r.ALUCOD,n["salon"+c]=r.NEMODES,n["email"+c]=r.EMAIL||""}return n}),n.a(2,p)}},n,null,[[1,3]])}))()},verificarArreglo:function(){var e=this;return x()(V()().m(function n(){var t,o,a,r;return V()().w(function(n){while(1)switch(n.n){case 0:if(!e.archivo){n.n=6;break}if(t=M()(e.selected),o=e.tipo,!(t&&Array.isArray(t)&&t.length)){n.n=1;break}return n.a(2,!0);case 1:a="un usuario",r=o,n.n="004"===r?2:"005"===r?3:4;break;case 2:return a="una familia",n.a(3,4);case 3:return a="un alumno",n.a(3,4);case 4:return e.$notify("Debe seleccionar al menos ".concat(a),"warning"),n.a(2);case 5:n.n=7;break;case 6:return e.$notify("Debe subir un archivo .docx","warning"),n.a(2);case 7:return n.a(2)}},n)}))()},generarCarta:function(e,n){var t=this;return x()(V()().m(function n(){var o,a,r,c,i;return V()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,t.verificarArreglo();case 1:if(o=n.v,o){n.n=2;break}return n.a(2);case 2:return a={archivo:t.archivo,delimitadores:["<",">"]},r=t.$q.dialog({title:"Procesando...",progress:{spinner:T.A,color:"amber"},persistent:!0,ok:!1}),n.n=3,t.generarArreglo();case 3:return c=n.v,i="".concat(t.narchivo),n.n=4,be[e](c,i,a);case 4:r.update({title:"¡Listo!",message:"Proceso completado.",progress:!1,ok:!0});case 5:return n.a(2)}},n)}))()},comprimir:function(){var e=this;return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.generarCarta("downloadZip");case 1:return n.a(2)}},n)}))()},archivoUnico:function(){var e=this;return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.generarCarta("download");case 1:return n.a(2)}},n)}))()},openEtiquetas:function(){this.openModelEtiquetas=!0}},created:function(){var e=this;return x()(V()().m(function n(){return V()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.init();case 1:return n.a(2)}},n)}))()}},Oe=t(12807);const De=(0,Oe.A)(Ce,[["render",N]]);var ye=De}}]);