"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[74872],{74872:function(e,t,o){o.r(t),o.d(t,{default:function(){return O}});o(71225),o(50310),o(5962),o(83190);var a=o(61758),n={class:"row items-center no-wrap"},i={class:"col-auto"},r={class:"row"},l={class:"col-xs-12 col-sm-3 q-pa-xs"},s={class:"col-xs-12 col-sm-3 q-pa-xs"};function c(e,t){var o=(0,a.g2)("q-btn"),c=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-separator"),u=(0,a.g2)("q-select"),f=(0,a.g2)("sie-grid"),h=(0,a.g2)("footer-grid"),p=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(p,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,a.k6)(function(){return[(0,a.bF)(c,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",n,[t[3]||(t[3]=(0,a.Lk)("div",{class:"col"},[(0,a.Lk)("div",{class:"text-h6"},"Asignaci칩n Categoria de Pago")],-1)),(0,a.Lk)("div",i,[e.nivelAcceso>=2?((0,a.uX)(),(0,a.Wv)(o,{key:0,class:"q-mr-sm",icon:"add",color:"primary",label:"Nuevo",size:"sm",onClick:e.nuevo},null,8,["onClick"])):(0,a.Q3)("v-if",!0)])])]}),_:1}),(0,a.bF)(d),(0,a.bF)(c,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",r,[(0,a.Lk)("div",l,[(0,a.bF)(u,{modelValue:e.selectPerfil,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectPerfil=t}),"option-value":"ID_PERFIL","option-label":"DESCRIPCION",options:e.perfil,label:"Perfil",onInput:e.getPersonaPerfil},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",s,[(0,a.bF)(u,{modelValue:e.selectAnio,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectAnio=t}),"option-value":"ANO","option-label":"ANO",options:e.anios,label:"A침o",onInput:e.getPersonaPerfil},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",null,[(0,a.bF)(f,{class:"fix-tab-height ag-theme-balham",columnDefs:e.columnDefs,rowData:e.rowData,frameworkComponents:e.frameworkComponents,onGridReady:e.onGridReady,rowSelection:"single"},null,8,["columnDefs","rowData","frameworkComponents","onGridReady"]),(0,a.bF)(h,{modelValue:e.pagina,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.pagina=t}),max:e.pages,onLoad:e.filter,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])])]}),_:1})]}),_:1})}o(10239),o(48426);var d=o(6123),u=o(88567),f=o(95718),h=o(53380),p=o(16648),m=o(80660),g=o(36408),C=o(27560),v=o(96330),A=o(42037),N=o(78840),P=o(54267),w=o(57668),b=o(10213),k={components:{headerGrid:v.A,sieGrid:g.A,footerGrid:C.A,QCard:u.A,QCardSection:f.A,QSelect:p.A,QSeparator:h.A,QBtn:d.Il},data:function(){return{nivelAcceso:(0,w["default"])().ruta.nivel,meses:[],selectMes:"",conceptos:[],selectConcepto:"",niveles:[],selectNivel:"",columnDefs:null,rowData:null,api:null,frameworkComponents:null,pages:1,selectPerfil:0,selectAnio:2020,anios:[],pagina:1,perfil:[]}},methods:{getPersonaPerfil:function(){var e=this;m.$http.get("api/personaController/getPersonaPerfil",{params:{params:{id_perfil:this.selectPerfil||1}}}).then(function(t){e.filter()})},nuevo:function(){this.$router.push({name:"tesoreria.asignacionCategoriaPagoPerfil.form"})},filter:function(){var e={ano:this.selectAnio};this.selectPerfil&&(e.id_perfil=this.selectPerfil),this.getCalendario(e)},getCalendario:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,w["default"])(),a={ano:o.ano};Object.assign(a,t),m.$http.get("api/cobroController/getCategoriaPersona",{params:{params:a}}).then(function(t){e.rowData=t,e.pages=t.pages})},onGridReady:function(e){this.api=e.api},getPerfil:function(){var e=this;return m.$http.get("api/personaController/getPerfiles").then(function(t){t.unshift({ID_PERFIL:0,DESCRIPCION:"Todos",ACCESO:2}),e.perfil=t})},getAnio:function(){var e=this;return console.log("a침os"),m.$http.get("api/anioController/getAnios").then(function(t){e.anios=t})}},beforeMount:function(){var e=this;this.getPerfil(),this.getAnio(),this.meses=(0,P.generarMeses)(),this.meses.unshift({label:"Todos",value:""}),m.$http.get("api/concobroController/getConceptos",{params:{parametros:{response:"combo"}}}).then(function(t){e.conceptos=t,e.conceptos.unshift({CONCOB:"",CONDES:"Todos"})}),m.$http.get("api/HyoInstrus/getNiveles").then(function(t){var o=t.json;e.niveles=o,e.niveles.unshift({INSTRUCOD:"",INSTRUDES:"Todos"})}),this.frameworkComponents={actionButton:N.A},this.columnDefs=[{headerName:"C칩digo",field:"ID_PERSONA",sortable:!0,width:80},{headerName:"Nombres",field:"NOMBRES",sortable:!0,width:300},{headerName:"Categoria",field:"CATEGORIA",width:100},{headerName:"Mes inicio",field:"MESINI",width:90},{headerName:"Mes Fin",field:"MESFIN",cellClass:"text-right",width:90},{headerName:"Moneda",field:"MONNOM",width:80},{headerName:"Monto",field:"MONTO",valueFormatter:A.toFixed,cellClass:"text-right",width:80},{headerName:"Descuento",field:"DESCUENTO",valueFormatter:A.toFixed,cellClass:"text-right",width:80},{headerName:"NGS",field:"NGS",width:80},{headerName:"",hide:this.nivelAcceso<2,width:40,cellRenderer:N.A,cellRendererParams:{title:"Editar",onClick:function(e){this.$router.push({name:"tesoreria.asignacionCategoriaPagoPerfil.form",params:{id:e.data.ID_CATEGORIA_PERSONA}})}}},{headerName:"",hide:this.nivelAcceso<2,width:40,cellRenderer:N.A,cellRendererParams:{icon:"delete",title:"Eliminar",onClick:function(e){var t=[e.data];(0,b.confirm)("Realmente desea eliminar este registro?","delete").onOk(function(){m.$http.delete("api/cobroController/deleteCategoriaPersona",{params:{id:t[0].ID_CATEGORIA_PERSONA}}).then(function(o){(0,b.alert)(o.message,"success"),e.api.updateRowData({remove:t})})})}}}],this.getCalendario()}},I=o(12807);const D=(0,I.A)(k,[["render",c]]);var O=D}}]);