"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[47707],{47707:function(e,a,t){t.r(a),t.d(a,{default:function(){return B}});t(56285);var n=t(61758),r={class:"row q-col-gutter-md"},o={class:"col-xs-12 col-sm-4 col-md-3"},i={class:"col-xs-12 sie-flat"},l={class:"row q-col-gutter-sm q-pa-md"},s={class:"col-xs-12 col-sm-4"},c={class:"col-xs-12 col-sm-4"},u={class:"col-xs-12 col-sm-4"},d={class:"col-xs-12 sie-flat"};function m(e,a){var t=this,m=(0,n.g2)("q-icon"),f=(0,n.g2)("header-btn"),b=(0,n.g2)("q-select"),p=(0,n.g2)("sie-table"),g=(0,n.g2)("q-card-section"),T=(0,n.g2)("q-input"),h=(0,n.g2)("sie-modal"),E=(0,n.g2)("tabla-de-tablas"),A=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.Wv)(A,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(f,{name:e.title,buttons:e.buttons,"font-size":"1.25rem !important",classTitle:e.classTitle},{beforeText:(0,n.k6)(function(){return[(0,n.bF)(m,{class:"text-primary cursor-pointer",name:"arrow_back",onClick:e.goRouteConfigPanel,style:{"font-size":"1.6rem"}},null,8,["onClick"])]}),_:1},8,["name","buttons","classTitle"]),(0,n.bF)(g,{class:"q-pt-none"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",r,[(0,n.Lk)("div",o,[(0,n.bF)(b,{modelValue:e.filterParams.siscod,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.filterParams.siscod=a}),options:e.sistemas,"option-value":"SISCOD","option-label":"SISNOM",label:"Sistema",placeholder:"Seleccione Sistema",onInput:e.getTabs},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",i,[(0,n.bF)(p,{data:e.rows,columns:e.fields,config:e.config,context:t,"show-search":!1,css:{height:"71vh"},onRowSelected:e.rowSelect},null,8,["data","columns","config","onRowSelected"])])])]}),_:1}),(0,n.bF)(h,{title:e.titleModalForm,modelValue:e.openModal,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.openModal=a}),css:{minWidth:"35vw"},onSubmit:e.guardar},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[(0,n.Lk)("div",s,[(0,n.bF)(T,{modelValue:e.formTab.codigo,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.formTab.codigo=a}),label:"Código tab",placeholder:"Ingrese Código",maxlength:e.ddl.CODIGO},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",c,[(0,n.bF)(T,{modelValue:e.formTab.name,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.formTab.name=a}),label:"Name",placeholder:"Ingrese Name",maxlength:e.ddl.NAME},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",u,[(0,n.bF)(T,{modelValue:e.formTab.label,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.formTab.label=a}),label:"Label",placeholder:"Ingrese Label",maxlength:e.ddl.LABEL},null,8,["modelValue","maxlength"])]),(0,n.Lk)("div",d,[(0,n.bF)(p,{ref:"refTableGrupo",data:e.rowsGrupo,columns:e.fieldsGrupo,config:e.configGrupo,context:t,"show-search":!1,selection:"multiple",css:{height:"50vh"}},null,8,["data","columns","config"])])])]}),_:1},8,["title","modelValue","onSubmit"]),(0,n.bF)(h,{title:"Grupo tab",modelValue:e.modalGrupoTab,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.modalGrupoTab=a}),maximized:!0,onSubmit:e.guardar},{default:(0,n.k6)(function(){return[(0,n.bF)(E,{"id-estado-tabla":e.idEstadoTabla,"codigo-estado-tabla":e.codigoEstadoTabla},null,8,["id-estado-tabla","codigo-estado-tabla"])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var f=t(76080),b=t.n(f),p=t(41562),g=t.n(p),T=t(57008),h=t.n(T),E=t(45254),A=t.n(E),v=(t(71225),t(39866),t(52133),t(10239),t(89571),t(50310),t(5962),t(6724),t(11777),t(83190),t(62692),t(6123)),w=t(74160),O=t(54489),D=t(64208),S=t(3112),L=(t(30683),{data:function(){return{config:{NAME:{component:"input",prevent:!0,autoFocus:!0,input:function(e,a,t){var n=this;return A()(b()().m(function r(){var o,i;return b()().w(function(r){while(1)switch(r.n){case 0:if(t===e.NAME){r.n=2;break}return o="¿Estás seguro modificar el Name <b>".concat(t,"</b> a <b>").concat(e.NAME,"</b>?"),r.n=1,n.$confirmar(o,"info",{okLabel:"Si",cancelLabel:"No",html:!0});case 1:if(i=r.v,i)try{n.editar(e.ID_TAB,{name:a.NAME})}catch(e){a.NAME=t,n.$notify(e.message,"warning")}else a.NAME=t;case 2:return r.a(2)}},r)}))()}},LABEL:{component:"input",prevent:!0,autoFocus:!0,input:function(e,a,t){var n=this;return A()(b()().m(function r(){var o,i;return b()().w(function(r){while(1)switch(r.n){case 0:if(t===e.LABEL){r.n=2;break}return o="¿Estás seguro modificar el Label <b>".concat(t,"</b> a <b>").concat(e.LABEL,"</b>?"),r.n=1,n.$confirmar(o,"info",{okLabel:"Si",cancelLabel:"No",html:!0});case 1:if(i=r.v,i)try{n.editar(e.ID_TAB,{label:a.LABEL})}catch(e){a.LABEL=t,n.$notify(e.message,"warning")}else a.LABEL=t;case 2:return r.a(2)}},r)}))()}},GRUPO_TAB:{component:"button",icon:["remove_red_eye as ver"],tooltip:{ver:function(e){return e.GRUPO}},flat:!0,dense:!0},EDITAR:{component:"button",icon:["edit as editar"],tooltip:{editar:"Editar"},editar:function(e,a){this.titleModalForm="Editar Tab ".concat(a.LABEL),this.action="editar",this.openModalEditarForm(e)},flat:!0,dense:!0}},rows:[],fields:[{name:"ID_TAB",label:"ID",field:"ID_TAB",align:"center"},{name:"CODIGO",label:"Código",field:"CODIGO",align:"center"},{name:"NAME",label:"Name",field:"NAME",align:"left"},{name:"LABEL",label:"Label",field:"LABEL",align:"left"},{name:"GRUPO_TAB",label:"Grupo(s)",field:"GRUPO_TAB",align:"center"},{name:"EDITAR",label:"Editar",field:"EDITAR",align:"center"}]}}}),R={data:function(){return{configGrupo:{ORDEN:{component:"input",type:"number",prevent:!0,autoFocus:!0},REQUERIDO:{component:"input",type:"number",prevent:!0,autoFocus:!0},ESTADO:{renderHtml:function(e,a,t){return e.ESTADO=e.ESTADO?e.ESTADO:0,t.icon({name:1===e.ESTADO?"check_circle":"remove_circle",color:1===e.ESTADO?"positive":"negative"})},renderAction:function(e,a){return A()(b()().m(function t(){return b()().w(function(t){while(1)switch(t.n){case 0:1===a.ESTADO?e.ESTADO=0:e.ESTADO=1,a.ESTADO=e.ESTADO;case 1:return t.a(2)}},t)}))()},tooltip:function(e){return 1===e.ESTADO?"Activo":"Inactivo"}}},rowsGrupo:[],fieldsGrupo:[{name:"ID_ESTADO_TABLA_VALOR",label:"ID Grupo",field:"ID_ESTADO_TABLA_VALOR",align:"center"},{name:"CLAVE",label:"Código Grupo",field:"CLAVE",align:"left"},{name:"VALOR",label:"Grupo",field:"VALOR",align:"left"},{name:"ORDEN",label:"Orden",field:"ORDEN",align:"center"},{name:"REQUERIDO",label:"Requerido",field:"REQUERIDO",align:"center"},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"}]}}},I=t(50425),G=t(94846),_={mixins:[L,R],components:{QSelect:O.S,QInput:D.A,QCheckbox:S.A,QTable:I.A,tablaDeTablas:G["default"],QCard:v.C$,QIcon:v.bP},props:{siscod:{type:[Number,String],default:26}},data:function(){var e=this;return{classTitle:{"text-primary":!1,"text-bold":!1,"text-h6":!0},title:"Configuración de tabs",buttons:[{icon:"addcircle",label:"Nuevo Grupo Tab",tooltip:"Nuevo Grupo Tab",click:function(){e.openModalGrupoTab()}},{icon:"addcircle",label:"Nuevo",tooltip:"Nuevo Tab",click:function(){e.openModalFrm()}}],filterParams:{siscod:String(this.siscod),clave:""},sistemas:[],grupos:[],rowSelected:{},rowRefSelected:{},action:"agregar",titleModalForm:"",modalGrupoTab:!1,openModal:!1,formTab:{codigo:"",name:"",label:""},ddl:{},dataSiscod:[],selectionSiscod:[],refTableGrupo:null,pagination:{rowsPerPage:10},idEstadoTabla:0,codigoEstadoTabla:""}},methods:{cleanForm:function(){this.formTab={codigo:"",name:"",label:""},this.dataSiscod=[],this.selectionSiscod=[]},openModalGrupoTab:function(){this.modalGrupoTab=!0},openModalFrm:function(){var e=this;return A()(b()().m(function a(){var t,n,r,o,i,l,s;return b()().w(function(a){while(1)switch(a.n){case 0:e.cleanForm(),t=e.grupos.map(function(e){return h()({},e)}),n=g()(t);try{for(n.s();!(r=n.n()).done;)o=r.value,o.ORDEN="",o.REQUERIDO="",o.ESTADO=!1}catch(e){n.e(e)}finally{n.f()}e.rowsGrupo=t,i=g()(e.rowsGrupo);try{for(i.s();!(l=i.n()).done;)s=l.value,s.ORDEN||(s.ORDEN="",s.REQUERIDO="")}catch(e){i.e(e)}finally{i.f()}return e.selectionSiscod=[e.filterParams.siscod],e.titleModalForm="Nuevo Registro",e.action="agregar",e.openModal=!0,a.n=1,e.$nextTick();case 1:e.$refs.refTableGrupo.selected=[];case 2:return a.a(2)}},a)}))()},openModalEditarForm:function(e){var a=this;return A()(b()().m(function t(){var n,r,o,i,l,s,c,u,d,m,f;return b()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.n=1,a.$http.get("api/TabController/getTab",{params:{params:{siscod:a.filterParams.siscod,id_tab:e.ID_TAB}}});case 1:n=t.v,a.formTab.codigo=e.CODIGO,a.formTab.name=e.NAME,a.formTab.label=e.LABEL,r=a.grupos.map(function(e){return h()({},e)}),o=g()(r),t.p=2,o.s();case 3:if((i=o.n()).done){t.n=12;break}l=i.value,s=g()(n),t.p=4,s.s();case 5:if((c=s.n()).done){t.n=7;break}if(u=c.value,u.ID_TAB_GRUPO!==l.ID_ESTADO_TABLA_VALOR){t.n=6;break}return l.ORDEN=u.ORDEN,l.REQUERIDO=u.REQUERIDO,l.ESTADO=u.ESTADO,t.a(3,7);case 6:t.n=5;break;case 7:t.n=9;break;case 8:t.p=8,m=t.v,s.e(m);case 9:return t.p=9,s.f(),t.f(9);case 10:l.ORDEN||(l.ORDEN="");case 11:t.n=3;break;case 12:t.n=14;break;case 13:t.p=13,f=t.v,o.e(f);case 14:return t.p=14,o.f(),t.f(14);case 15:return a.dataSiscod=[a.filterParams.siscod],a.selectionSiscod=a.dataSiscod,a.rowsGrupo=r,d=n.map(function(e){return e.ID_TAB_GRUPO}),a.openModal=!0,t.n=16,a.$nextTick();case 16:a.$refs.refTableGrupo.selected=r.filter(function(e){return d.includes(e.ID_ESTADO_TABLA_VALOR)});case 17:return t.a(2)}},t,null,[[4,8,9,10],[2,13,14,15]])}))()},getTabs:function(){var e=this;return A()(b()().m(function a(){var t,n;return b()().w(function(a){while(1)switch(a.n){case 0:return t={},t=e.filterParams.clave?{siscod:e.filterParams.siscod,clave:e.filterParams.clave}:{siscod:e.filterParams.siscod},a.n=1,e.$http.get("api/TabController/getTodosTabs",{params:{params:t}});case 1:return n=a.v,e.rows=n,a.a(2,n)}},a)}))()},getGrupoTabs:function(){var e=this;return A()(b()().m(function a(){var t,n;return b()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/EstadoTablaController/getEstadoTablaOriginal",{params:{parametros:{where:{NOMBRE:"Fichas Configurables"}}}});case 1:return t=a.v,e.idEstadoTabla=t[0].ID_ESTADO_TABLA,e.codigoEstadoTabla=t[0].CODIGO,a.n=2,e.$http.get("api/EstadoTablaController/getEstadoTablaValor",{params:{parametros:{ID_ESTADO_TABLA:e.idEstadoTabla,orderBy:"valor"}}});case 2:return n=a.v,e.grupos=n,a.a(2,n)}},a)}))()},validateForm:function(){return this.formTab.codigo?this.formTab.name?this.formTab.label?!(this.selectionSiscod.length<1)||(this.$alert("Selecciona mínimo un sistema","warning"),!1):(this.$alert("Ingresa label","warning"),!1):(this.$alert("Ingresa nombre","warning"),!1):(this.$alert("Ingresa Código","warning"),!1)},guardar:function(){var e=this;return A()(b()().m(function a(){return b()().w(function(a){while(1)switch(a.n){case 0:if(e.validateForm()){a.n=1;break}return a.a(2);case 1:"agregar"===e.action?e.agregar():"editar"===e.action&&e.editar(e.rowSelected.ID_TAB,e.formTab);case 2:return a.a(2)}},a)}))()},agregar:function(){var e=this;return A()(b()().m(function a(){var t,n,r,o;return b()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,e.formTab.siscod=e.filterParams.siscod,t=e.$refs.refTableGrupo.selected,!(t.length<1)){a.n=1;break}return e.$alert("Selecciona mínimo un grupo","warning"),a.a(2);case 1:return e.formTab.grupos=t,a.n=2,e.$http.post("api/TabController/postTab",{data:e.formTab});case 2:return n=a.v,r=n.data,e.selectionSiscod.includes(e.filterParams.siscod)&&e.rows.push({ID_TAB:r.ID_TAB,CODIGO:e.formTab.codigo,NAME:e.formTab.name,LABEL:e.formTab.label}),a.n=3,e.getTabs();case 3:e.openModal=!1,e.$alert(r.message,"success"),a.n=5;break;case 4:a.p=4,o=a.v,e.$alert(o,"warning");case 5:return a.a(2)}},a,null,[[0,4]])}))()},editar:function(e,a){var t=this;return A()(b()().m(function n(){var r,o;return b()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,t.openModal&&(a.siscod=t.filterParams.siscod),a.id_tab=e,Object.prototype.hasOwnProperty.call(t.$refs,"refTableGrupo")&&t.$refs.refTableGrupo&&(a.grupos=t.$refs.refTableGrupo.selected),n.n=1,t.$http.put("api/tabController/putTab",{params:a});case 1:return r=n.v,n.n=2,t.getTabs();case 2:t.openModal=!1,t.$alert(r.message,"success"),n.n=4;break;case 3:n.p=3,o=n.v,t.$alert(o,"warning");case 4:return n.a(2)}},n,null,[[0,3]])}))()},goRouteConfigPanel:function(){var e="tesoreria.configuracion.panel";this.$router.push({name:e})},rowSelect:function(e,a){this.rowSelected=e,this.rowRefSelected=a},changeTabSistema:function(){var e=this,a=[],t=[];return this.selectionSiscod.map(function(t){e.dataSiscod.indexOf(t)<0&&(a[t]?a.splice(t):a.push(t))}),this.dataSiscod.map(function(a){e.selectionSiscod.indexOf(a)<0&&(t[a]?t.splice(a):t.push(a))}),{agregar:a,eliminar:t}},obtenerDdl:function(){var e=this;return A()(b()().m(function a(){var t;return b()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,(0,w.n)(["tab"]);case 1:t=a.v,e.ddl=t.TAB;case 2:return a.a(2)}},a)}))()},getSistemasWeb:function(){var e=this;return A()(b()().m(function a(){var t;return b()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/FormManagerController/getSistemasWeb",{params:{params:{soloActivos:!0}}});case 1:t=a.v,e.sistemas=t;case 2:return a.a(2)}},a)}))()}},created:function(){var e=this;return A()(b()().m(function a(){var t;return b()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/TesoreriaServiciosController/getVerificarUserAdmin",{params:{params:{sieweb:!0}}});case 1:return t=a.v,t||e.$router.push({name:"tesoreria.home"}),a.n=2,e.obtenerDdl();case 2:e.getSistemasWeb(),e.getTabs(),e.getGrupoTabs();case 3:return a.a(2)}},a)}))()}},k=t(12807);const N=(0,k.A)(_,[["render",m]]);var B=N}}]);