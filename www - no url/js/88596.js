"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[88596],{88596:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var a=n(8445),r=n.n(a),o=n(61758),i={class:"row q-gutter-sm q-pb-md"},s={class:"col-xs-12 col-md-3"},u={class:"row q-gutter-sm"},l={class:"col"},c={class:"col-auto"},d={class:"col-xs-12 col-md-5"},m={class:"col-xs-12 col-md-3"},p={class:"row q-pa-sm q-col-gutter-sm"},f={class:"col-xs-12"},h={class:"col-xs-12"},v={class:"row q-pa-xs q-col-gutter-xs"},g={class:"col-2"};function b(e,t){var n=(0,o.g2)("header-btn"),a=(0,o.g2)("q-input"),b=(0,o.g2)("q-tooltip"),x=(0,o.g2)("q-btn"),E=(0,o.g2)("q-card-title"),k=(0,o.g2)("formularioCovid"),w=(0,o.g2)("sie-vacio"),P=(0,o.g2)("q-card-main"),F=(0,o.g2)("q-card"),C=(0,o.g2)("sie-modal"),I=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(I,{class:"ingresoExterno bg-white overflow-auto full-height q-my-sm q-pl-sm"},{default:(0,o.k6)(function(){return[(0,o.bF)(F,null,{default:(0,o.k6)(function(){return[(0,o.bF)(n,{name:"",buttons:e.buttons},null,8,["buttons"]),(0,o.bF)(E,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",i,[(0,o.Lk)("div",s,[(0,o.Lk)("div",u,[(0,o.Lk)("div",l,[(0,o.bF)(a,{outlined:"",modelValue:e.dniExterno,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.dniExterno=t}),maxlength:"20",label:"DNI","float-label":"DNI",onKeyup:e.getExternoDniEnter},null,8,["modelValue","onKeyup"])]),(0,o.Lk)("div",c,[(0,o.bF)(x,{icon:"search",size:"sm",color:"primary",onClick:e.getExternoDni},{default:(0,o.k6)(function(){return[(0,o.bF)(b,{anchor:"bottom middle",self:"top middle"},{default:(0,o.k6)(function(){return r()(t[5]||(t[5]=[(0,o.eW)("Buscar Persona",-1)]))}),_:1})]}),_:1},8,["onClick"])])])]),(0,o.Lk)("div",d,[(0,o.bF)(a,{outlined:"",modelValue:e.nomcompExterno,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.nomcompExterno=t}),maxlength:"100",label:"Nombre","float-label":"Nombre"},null,8,["modelValue"])]),(0,o.Lk)("div",m,[(0,o.bF)(a,{outlined:"",modelValue:e.telefonoExterno,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.telefonoExterno=t}),maxlength:"100",label:e.$t("telefono"),"float-label":e.$t("telefono")},null,8,["modelValue","label","float-label"])])])]}),_:1}),(0,o.bF)(P,null,{default:(0,o.k6)(function(){return[e.ficha.ID_FORMULARIO?((0,o.uX)(),(0,o.Wv)(k,{key:0,class:"full-height full-width overflow-auto",ref:"formulario",onPostSave:e.postSave,personaExterna:!0,ficha:e.ficha,persona:e.datosPersona,preview:!1},null,8,["onPostSave","ficha","persona"])):((0,o.uX)(),(0,o.Wv)(w,{key:1,title:e.mensajeVacio},null,8,["title"]))]}),_:1})]}),_:1}),(0,o.bF)(C,{class:"full-height",title:"Temperatura",modelValue:e.openModalCovidTemperatura,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.openModalCovidTemperatura=t}),css:{height:"70vh",width:"500px"},onSubmit:e.saveControlTemperatura},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",p,[(0,o.Lk)("div",f,[(0,o.bF)(a,{modelValue:e.temperatura,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.temperatura=t}),type:"number",label:"Temperatura"},null,8,["modelValue"])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",v,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.temperaturas,function(t){return(0,o.uX)(),(0,o.CE)("div",g,[(0,o.bF)(x,{class:"full-width bg-primary text-white",label:t,flat:"",onClick:function(n){return e.setTemperatura(t)}},null,8,["label","onClick"])])}),256))])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var x=n(76080),E=n.n(x),k=n(45254),w=n.n(k),P=(n(10239),n(15547),n(6123)),F=n(11654),C=n(9736),I=n(16648),A=n(88567),D=n(40102),S=n(95718),T=n(80340),V=n(30640),_=n(57668),L=n(65229),M=n(81288),O=n(982),q=n(92173),y={directives:{sieActive:L.A},components:{QBtn:F.A,QSelect:I.A,QInput:C.A,QPageSticky:P._U,QFab:P.l6,QCard:A.A,QFabAction:P.B$,QCardSection:S.A,QInnerLoading:P.SQ,QSpinnerOval:P.VA,sieVacio:T.A,sieModal:V.A,formularioCovid:D.A,sieEstudiantes:q.Ay,QPage:P.Tu,QCardTitle:P.u0,QTooltip:P.nC,QCardMain:P.d1},data:function(){return{sie:(0,_["default"])(),ficha:{},persona:"",datosPersona:{},dniExterno:"",idPersona:"",nomcompExterno:"",telefonoExterno:"",mensajeVacio:"Ficha sintomatologica",temperaturas:[],temperatura:"",buttons:[],openModalCovidTemperatura:!1}},computed:{isLess:function(){return(0,M.isLess)()}},methods:{postSave:function(e,t){var n=this;this.ficha["ID_FRM_USUARIO"]=e.ID_FRM_USUARIO,e.ID_FRM_USUARIO?this.buttons=[{icon:"print",label:"IMPRIMIR",click:function(){n.imprimir()}}]:this.buttons=[{icon:"save",label:"Enviar",permisos:" >= 2",click:function(){n.guardar()}}],this.buttons.unshift({icon:"edit",label:"Editar Persona",permisos:" >= 2",click:function(){n.registrarPersonaExterna(2)}}),t&&(this.temperatura="",this.openModalCovidTemperatura=!0)},createBoxTemperatura:function(){var e=36,t=e+40,n=e;this.temperaturas.push(e.toFixed(1));for(var a=e;a<=t;a++)n+=.1,this.temperaturas.push(n.toFixed(1))},setTemperatura:function(e){this.temperatura=e},saveControlTemperatura:function(){var e=this;return w()(E()().m(function t(){var n;return E()().w(function(t){while(1)switch(t.p=t.n){case 0:if(n={id_persona:e.idPersona,temperatura:e.temperatura<0?0:e.temperatura,opcion_registro:2},n.id_persona){t.n=1;break}return e.$notify("Debe registrar una persona.","warning"),t.a(2);case 1:if(!(e.temperatura<1)){t.n=2;break}return e.$notify("Debe agregar temperatura.","warning"),t.a(2);case 2:return t.p=2,t.n=3,e.$http.post("api/CovidTemperatura/createCovidTemperatura",{params:n});case 3:e.$notify("Se registr칩 la temperatura.","success"),e.openModalCovidTemperatura=!1,t.n=5;break;case 4:t.p=4,t.v,e.$notify("Ha ocurrido un problema de conexi칩n, vuelve a intenralo m치s tarde.","warning");case 5:return t.a(2)}},t,null,[[2,4]])}))()},imprimir:function(){this.$refs.formulario.imprimir()},guardar:function(){this.$refs.formulario.savePreguntas()},getExternoDniEnter:function(e){var t=this;return w()(E()().m(function n(){return E()().w(function(n){while(1)switch(n.n){case 0:13===e.keyCode&&t.dniExterno.length>7&&t.getExternoDni();case 1:return n.a(2)}},n)}))()},getExternoDni:function(){var e=this;return w()(E()().m(function t(){return E()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.$http.get("api/FichaSintomatologica/getPersonaExternaDni",{params:{dni:e.dniExterno}});case 1:e.datosPersona=t.v,e.datosPersona.DNI?(e.idPersona=e.datosPersona.ID_PERSONA,e.getFicha(),e.buttons=[{icon:"edit",label:"Editar Persona",permisos:" >= 2",click:function(){e.registrarPersonaExterna(2)}}]):(e.nomcompExterno="",e.telefonoExterno="",e.buttons=[{icon:"save",label:"Registrar Persona",permisos:" >= 2",click:function(){e.registrarPersonaExterna(1)}}]),e.nomcompExterno=e.datosPersona.NOMCOMP,e.telefonoExterno=e.datosPersona.TELEFONO;case 2:return t.a(2)}},t)}))()},registrarPersonaExterna:function(e){var t=this;return w()(E()().m(function n(){var a,r,o,i,s;return E()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,a={DNI:t.dniExterno,NOMCOMP:t.nomcompExterno,TELEFONO:t.telefonoExterno,ACCION:e},2===e&&(a["ID_PERSONA"]=t.idPersona),n.n=1,t.$http.post("api/FichaSintomatologica/savePersonaExterna",{data:a});case 1:r=n.v,o=r.message,(0,O["default"])(o,"success"),1===e&&t.getExternoDni(),n.n=3;break;case 2:n.p=2,s=n.v,i=s.error,(0,O["default"])(i.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])}))()},getFicha:function(){var e=this;return w()(E()().m(function t(){var n;return E()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,e.ficha={},t.n=1,e.$http.get("api/FichaSintomatologica/getFichaPaseExternos",{params:{dni:e.datosPersona.DNI}});case 1:n=t.v,n.data.length>0?e.ficha=n.data[0]:e.mensajeVacio=n.message,t.n=3;break;case 2:t.p=2,t.v,(0,O["default"])("Ha ocurrido un problema de conexi칩n vuelve a intentarlo","warning");case 3:return t.a(2)}},t,null,[[0,2]])}))()}},created:function(){var e=this;return w()(E()().m(function t(){return E()().w(function(t){while(1)switch(t.n){case 0:e.createBoxTemperatura();case 1:return t.a(2)}},t)}))()}},Q=n(12807);const N=(0,Q.A)(y,[["render",b]]);var R=N}}]);