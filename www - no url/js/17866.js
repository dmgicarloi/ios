"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[17866],{95485:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var o=t(61758),l=t(58790),a={key:0,class:"column col items-center justify-center"},u={class:"row q-px-sm q-pt-sm"},i={class:"col-xs-12"},r={class:"col column scroll-y"};function s(e,n){var t=(0,o.g2)("sie-salones"),s=(0,o.g2)("sie-vacio"),c=(0,o.g2)("q-search"),d=(0,o.g2)("q-checkbox"),f=(0,o.g2)("q-item-tile"),b=(0,o.g2)("q-item-side"),m=(0,o.g2)("q-item-main"),v=(0,o.g2)("q-item"),h=(0,o.g2)("q-list"),p=(0,o.g2)("sie-usuario"),O=(0,o.g2)("q-spinner-oval"),k=(0,o.g2)("q-inner-loading"),C=(0,o.g2)("verQR"),g=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(g,{class:"estudiantes bg-white"},{default:(0,o.k6)(function(){return[(0,o.bF)(t,{modelValue:e.nemo,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.nemo=n}),onSeleccionar:e.loadEstudiantes,label:e.label,campos:["NEMO","NEMODES","INSTRUCOD","GRADOCOD","SECCIONCOD"],todos:!1},null,8,["modelValue","onSeleccionar","label"]),e.vacio?((0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(s,{subtitle:"validaciones.seleccioneSalon",icon:"person"})])):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",u,[(0,o.Lk)("div",i,[(0,o.bF)(c,{class:"q-if-outlined",modelValue:e.buscar,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.buscar=n}),clearable:"",debounce:300},null,8,["modelValue"])])]),(0,o.bF)(h,{class:"bg-white"},{default:(0,o.k6)(function(){return[(0,o.bF)(v,null,{default:(0,o.k6)(function(){return[(0,o.bF)(b,null,{default:(0,o.k6)(function(){return[(0,o.bF)(f,null,{default:(0,o.k6)(function(){return[(0,o.bF)(d,{modelValue:e.all,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.all=n}),color:"secondary",onInput:e.seleccionarTodos,disable:e.disabled},null,8,["modelValue","onInput","disable"])]}),_:1})]}),_:1}),(0,o.bF)(b,null,{default:(0,o.k6)(function(){return[(0,o.bF)(f,null,{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.$t(e.all?"desSeleccionarTodos":"seleccionarTodos")),1)]}),_:1})]}),_:1}),e.objEnviar.length>0?((0,o.uX)(),(0,o.Wv)(m,{key:0},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"float-right hidden","text-color":"faded"},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.objEnviar.length)+" "+(0,l.v_)(e.$t(e.objEnviar.length>1?"contactosSeleccionados":"contactoSeleccionado")),1)]}),_:1})]}),_:1})):((0,o.uX)(),(0,o.Wv)(m,{key:1},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"float-right hidden","text-color":"faded"},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(e.objActual.length)+" "+(0,l.v_)(e.$t("intranet.contactos")),1)]}),_:1})]}),_:1})),e.objEnviar.length>0?((0,o.uX)(),(0,o.Wv)(b,{key:2,right:""},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"cursor-pointer",icon:"email",color:"primary",onClick:n[3]||(n[3]=function(n){return e.enviarMensaje(e.objEnviar)})})]}),_:1})):(0,o.Q3)("v-if",!0)]}),_:1})]}),_:1}),(0,o.Lk)("div",r,[(0,o.bF)(h,{"inset-separator":""},{default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.objActual,function(t,a){return(0,o.uX)(),(0,o.Wv)(v,{key:a},{default:(0,o.k6)(function(){return[(0,o.bF)(b,null,{default:(0,o.k6)(function(){return[(0,o.bF)(f,null,{default:(0,o.k6)(function(){return[(0,o.bF)(d,{modelValue:e.objEnviar,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.objEnviar=n}),val:t,color:"secondary",onInput:n[5]||(n[5]=function(n){return e.marcar(e.objEnviar)})},null,8,["modelValue","val"])]}),_:2},1024)]}),_:2},1024),(0,o.bF)(b,null,{default:(0,o.k6)(function(){return[(0,o.bF)(p,{usucod:t.USUCOD},null,8,["usucod"])]}),_:2},1024),(0,o.bF)(m,null,{default:(0,o.k6)(function(){return[(0,o.bF)(f,{label:""},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(t.NOMCOMP),1)]}),_:2},1024),(0,o.bF)(f,{sublabel:""},{default:(0,o.k6)(function(){return[(0,o.eW)((0,l.v_)(t.CURSONOM),1)]}),_:2},1024)]}),_:2},1024),e.showQR?((0,o.uX)(),(0,o.Wv)(b,{key:0,right:""},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"cursor-pointer",icon:"apps_line",color:"primary",onClick:function(n){return e.goQR(t)}},null,8,["onClick"])]}),_:2},1024)):(0,o.Q3)("v-if",!0),e.objEnviar.length<1?((0,o.uX)(),(0,o.Wv)(b,{key:1,right:""},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{class:"cursor-pointer",icon:"email",color:"primary",onClick:function(n){return e.enviarMensaje(t)}},null,8,["onClick"])]}),_:2},1024)):(0,o.Q3)("v-if",!0)]}),_:2},1024)}),128))]}),_:1}),(0,o.bF)(k,{visible:e.visible},{default:(0,o.k6)(function(){return[(0,o.bF)(O,{size:"50px",color:"primary"})]}),_:1},8,["visible"])])],64)),(0,o.bF)(C,{modelValue:e.openModalQR,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.openModalQR=n}),alucod:e.alucodSelect,nomcomp:e.nomcompSelect},null,8,["modelValue","alucod","nomcomp"])]}),_:1})}t(10239),t(70199);var c=t(6123),d=t(88275),f=t(80340),b=t(24974),m=t(57668),v=t(80660),h=t(33001),p=t(99637),O=t(81288),k=t(73126),C={components:{QInnerLoading:c.SQ,QSpinnerOval:c.VA,QSearch:c.Ks,QCheckbox:c.vZ,sieSalones:d.Ay,sieVacio:f.A,sieUsuario:b.A,verQR:k.A,QPage:c.Tu,QList:c.Mb,QItem:c.H0,QItemSide:c.n1,QItemTile:c.lp,QItemMain:c.mF},data:function(){return{vacio:!0,dataContactos:[],tutor:{},buscar:"",all:!1,disabled:!1,objEnviar:[],nemo:"",sieInfo:(0,m["default"])(),visible:!1,showQR:(0,m["default"])().esOtros,openModalQR:!1,alucodSelect:null,nomcompSelect:null}},computed:{objActual:function(){var e=this.dataContactos;return""!==this.buscar?(this.disabled=!0,e=(0,h.filterArray)(this.buscar,{field:"NOMCOMP",list:e})):this.disabled=!1,e},label:function(){var e="salon";return this.tutor&&!this.tutor.NOMCOMP?e="salon":this.tutor&&this.tutor.NOMCOMP&&(e="Tutor: "+this.tutor.NOMCOMP),e},isLess:function(){return(0,O.isLess)()}},methods:{goQR:function(e){this.alucodSelect=e.ALUCOD,this.nomcompSelect=e.NOMCOMP,this.openModalQR=!0},loadEstudiantes:function(e){var n=this;this.visible=!0,v.$http.get("api/HyoSalones/retornaAlumnosSalon",{params:{nemo:e.NEMO}}).then(function(e){var t=e.json;n.vacio=0===t.length,n.dataContactos=t,n.visible=!1}),v.$http.get("api/HyoSalones/obtTutor",{params:{nemo:e.NEMO}}).then(function(e){var t=e.json;n.tutor=t[0]})},seleccionarTodos:function(){this.objEnviar=this.all?this.dataContactos:[]},marcar:function(e){this.all=e.length===this.dataContactos.length},enviarMensaje:function(e){if(Array.isArray(e)){var n=[];(0,p["default"])(e,function(e){n.push({USUCOD:e.USUCOD,USUNOM:e.NOMCOMP,ALUCODP:e.ALUCOD,checked:!0})}),this.$router.push({name:"intranet.mensajeria.redactar",params:{folder:1,type:3},query:{send:JSON.stringify(n)}})}else{var t=[{label:e.NOMCOMP,TIPO:"P",value:e.USUCOD,USUCOD:e.USUCOD,USUNOM:e.NOMCOMP,ALUCODP:e.ALUCOD,checked:!0}];this.$router.push({name:"intranet.mensajeria.redactar",params:{folder:1,type:3},query:{send:JSON.stringify(t)}})}}},created:function(){if("005"===this.sieInfo.tipcod){var e={ALUCOD:this.sieInfo.alucod};this.loadEstudiantes(e)}}},g=t(12807);const M=(0,g.A)(C,[["render",s]]);var S=M}}]);