"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[81822],{81822:function(e,o,t){t.r(o),t.d(o,{default:function(){return Me}});var n=t(8445),a=t.n(n),l=t(61758),i=t(58790),s={class:"row q-pa-md q-gutter-sm"},c={class:"col-12"},u={class:"col"},r={class:"row q-col-gutter-sm"},d={key:0,class:"col-xs-12"},f={class:"row full-height q-pt-sm"},m={class:"col column items-center justify-start"},h={class:"col-xs-12 col-md-6"},p={class:"col-xs-12 col-sm-6 col-md-3"},b={class:"col-xs-12 col-sm-6 col-md-3"},g={class:"col-xs-12 col-sm-6 col-md-6"},F={class:"col-xs-12 col-sm-6 col-md-6"},v={class:"row q-gutter-sm"},C={class:"col"},k={key:0},I={class:"row full-height"},w={class:"col column items-center justify-start"},D={class:"col-12 q-py-md"},q={class:"row q-col-gutter q-pa-sm"},V={class:"col-12"},x={style:{"font-size":"16px","padding-left":"4px"}},O={class:"col-12"},S={class:"col-xs-12 col-md-12 row q-pa-sm class-ligth-grey"},B={class:"col-xs-12 col-md-12",style:{"padding-right":"4px"}},E={class:"col-12"},L={class:"row"},P={class:"col"},_={class:"row q-col-gutter-sm q-pa-sm"},M={key:0,class:"col-xs-12"},R={class:"row full-height q-pt-sm"},A={class:"col column items-center justify-start"},N={class:"col-xs-12 col-md-2"},T={class:"col-xs-12 col-md-4"},U={class:"col-xs-12 col-md-2"},y={class:"col-xs-12 col-sm-6 col-md-2"},H={class:"col-xs-12 col-sm-6 col-md-2"},Y={class:"col-xs-12 col-sm-6 col-md-3"},Q={class:"col-xs-12 col-sm-6 col-md-3"},W={class:"col-xs-12 col-sm-12 col-md-6"},$={class:"row q-gutter-sm"},X={class:"col"},j={key:0},z={class:"row full-height"},G={class:"col column items-center justify-start"},J={class:"row q-col-gutter-xs"},K={class:"col-xs-12 col-sm-12"},Z={class:"row sie-flat"},ee={class:"col-xs-12"},oe={class:"col-xs-12"},te={class:"col-xs-12"},ne={class:"col-12"};function ae(e,o){var t=this,n=(0,l.g2)("header-btn"),ae=(0,l.g2)("q-img"),le=(0,l.g2)("autocomplete"),ie=(0,l.g2)("q-date"),se=(0,l.g2)("q-popup-proxy"),ce=(0,l.g2)("q-icon"),ue=(0,l.g2)("q-input"),re=(0,l.g2)("q-select"),de=(0,l.g2)("q-tooltip"),fe=(0,l.g2)("q-btn"),me=(0,l.g2)("sie-table"),he=(0,l.g2)("q-card"),pe=(0,l.g2)("box-imagen"),be=(0,l.g2)("sie-modal"),ge=(0,l.g2)("q-separator"),Fe=(0,l.g2)("q-card-section"),ve=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(ve,{class:"movimiento-operaciones q-pa-sm sie-flat"},{default:(0,l.k6)(function(){return[(0,l.bF)(he,{flat:""},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",s,[(0,l.Lk)("div",c,[(0,l.bF)(n,{name:"Bloqueo de Usuarios ",buttons:e.modalButtons},null,8,["buttons"])]),(0,l.Lk)("div",u,[(0,l.Lk)("div",r,[e.getWidth<=699?((0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",f,[(0,l.Lk)("div",m,[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFoto,width:"100px",height:"100px",onClick:e.openBoxImagen},{error:(0,l.k6)(function(){return[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFotoDefault,width:"100px",height:"100px"},null,8,["src"])]}),_:1},8,["src","onClick"])])])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",h,[(0,l.bF)(le,{class:"q-ma-none",modelValue:e.nombreConsulta,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.nombreConsulta=o}),data:e.listaSolicitantes,label:"Codigo / Nombre",keys:e.llaveSolicitante,onSelected:e.asignaSolicitanteConsulta},null,8,["modelValue","data","keys","onSelected"])]),(0,l.Lk)("div",p,[(0,l.bF)(ue,{label:"Desde",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaInicioConsulta,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.fechaInicioConsulta=o}),mask:"##/##/####",readonly:""},{append:(0,l.k6)(function(){return[(0,l.bF)(ce,{class:"cursor-pointer",name:"date_range"},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{ref:"fechaInicio","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)(function(){return[(0,l.bF)(ie,{mask:"DD/MM/YYYY",modelValue:e.fechaInicioConsulta,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.fechaInicioConsulta=o}),onInput:o[2]||(o[2]=function(o){return e.ingresarFechaConsulta("fechaInicio")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,l.Lk)("div",b,[(0,l.bF)(ue,{label:"Hasta",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaFinConsulta,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.fechaFinConsulta=o}),mask:"##/##/####",readonly:""},{append:(0,l.k6)(function(){return[(0,l.bF)(ce,{class:"cursor-pointer",name:"date_range"},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{ref:"fechaFin","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)(function(){return[(0,l.bF)(ie,{mask:"DD/MM/YYYY",modelValue:e.fechaFinConsulta,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.fechaFinConsulta=o}),onInput:o[5]||(o[5]=function(o){return e.ingresarFechaConsulta("fechaFin")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,l.Lk)("div",g,[(0,l.bF)(re,{options:e.listaBibliotecas,modelValue:e.bibliotecaConsulta,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.bibliotecaConsulta=o}),label:"Bibliotecas","option-value":"BIBCOD","option-label":"BIBDESC",onInput:e.bibliotecaSelecionadaConsulta},null,8,["options","modelValue","onInput"])]),(0,l.Lk)("div",F,[(0,l.Lk)("div",v,[(0,l.Lk)("div",C,[(0,l.bF)(re,{options:e.listaTiposConsulta,modelValue:e.tipoConsulta,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.tipoConsulta=o}),label:"Mostrar","option-value":"value","option-label":"label",onInput:e.tipoSeleccionadoConsulta},null,8,["options","modelValue","onInput"])]),(0,l.bF)(fe,{class:"q-pa-sm",icon:"broom",size:"10px",color:"primary",onClick:e.limpiarConsulta},{default:(0,l.k6)(function(){return[(0,l.bF)(de,null,{default:(0,l.k6)(function(){return a()(o[27]||(o[27]=[(0,l.eW)("Limpiar",-1)]))}),_:1})]}),_:1},8,["onClick"])])])])]),e.getWidth>=700?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("div",I,[(0,l.Lk)("div",w,[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFoto,width:"76px",height:"76px",onClick:e.openBoxImagen},{error:(0,l.k6)(function(){return[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFotoDefault,width:"76px",height:"76px"},null,8,["src"])]}),_:1},8,["src","onClick"])])])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",D,[(0,l.bF)(me,{ref:"tablaBloqueos","show-search":!1,columns:e.fieldsConsulta,data:e.listaBloqueos,selection:"single",config:e.configConsulta,context:t,css:{height:"calc(70vh - 45px)"},onRowSelectedDbl:e.selecionaConsulta},null,8,["columns","data","config","onRowSelectedDbl"])])])]}),_:1}),e.openModalImagen?((0,l.uX)(),(0,l.Wv)(pe,{key:0,modelValue:e.openModalImagen,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.openModalImagen=o}),urlImage:e.urlImagenBox,urlImageDefault:e.rutaFotoDefault,titulo:e.nombreConsulta},null,8,["modelValue","urlImage","urlImageDefault","titulo"])):(0,l.Q3)("v-if",!0),(0,l.bF)(be,{modelValue:e.modalDatosPago,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.modalDatosPago=o}),title:"Datos Pago",ok:"Grabar",onSubmit:e.grabarReposicion,css:{height:"calc(50vh - 20px)",width:"40%"}},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",q,[(0,l.Lk)("div",V,[(0,l.bF)(ue,{class:"q-if-outlined",modelValue:e.monto,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.monto=o}),label:"Monto",disable:""},{prepend:(0,l.k6)(function(){return[(0,l.Lk)("span",x,(0,i.v_)(e.moneda),1)]}),_:1},8,["modelValue"])]),(0,l.Lk)("div",O,[(0,l.bF)(ue,{class:"q-if-outlined",modelValue:e.nroRecibo,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.nroRecibo=o}),label:"Numero Recibo"},null,8,["modelValue"])]),(0,l.Lk)("div",S,[(0,l.Lk)("div",B,[(0,l.bF)(ue,{label:"Fecha Pago",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaPago,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.fechaPago=o}),mask:"##/##/####",readonly:""},{append:(0,l.k6)(function(){return[(0,l.bF)(ce,{class:"cursor-pointer",name:"date_range"},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{ref:"fechaPago","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)(function(){return[(0,l.bF)(ie,{mask:"DD/MM/YYYY",modelValue:e.fechaPago,"onUpdate:modelValue":o[12]||(o[12]=function(o){return e.fechaPago=o})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])]),(0,l.Lk)("div",E,[(0,l.bF)(ue,{class:"q-if-outlined",type:"textarea",modelValue:e.observacionesDeuda,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.observacionesDeuda=o}),label:"Observaciones",height:"100px","max-height":150,rows:"5",ref:"obs"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,l.bF)(be,{esc:"","esc-click":"",modelValue:e.openModalDetalle,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.openModalDetalle=o}),title:"",footer:!1,maximized:"",onClose:e.closeModalDetalle},{default:(0,l.k6)(function(){return[(0,l.bF)(he,{flat:""},{default:(0,l.k6)(function(){return[(0,l.bF)(n,{name:"Bloqueo de Usuarios ",buttons:e.headerButtons},null,8,["buttons"]),(0,l.bF)(ge),(0,l.bF)(Fe,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",L,[(0,l.Lk)("div",P,[(0,l.Lk)("div",_,[e.getWidth<=699?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.Lk)("div",R,[(0,l.Lk)("div",A,[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFoto,width:"100px",height:"100px",onClick:e.openBoxImagen},{error:(0,l.k6)(function(){return[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFotoDefault,width:"100px",height:"100px"},null,8,["src"])]}),_:1},8,["src","onClick"])])])])):(0,l.Q3)("v-if",!0),(0,l.Lk)("div",N,[(0,l.bF)(le,{class:"q-ma-none",modelValue:e.solicitante,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.solicitante=o}),data:e.listaSolicitantes,label:"Codigo / Nombre",keys:e.llaveSolicitante,onSelected:e.asignaSolicitante},null,8,["modelValue","data","keys","onSelected"])]),(0,l.Lk)("div",T,[(0,l.bF)(ue,{modelValue:e.nombre,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.nombre=o}),label:"Nombre",readonly:""},null,8,["modelValue"])]),(0,l.Lk)("div",U,[(0,l.bF)(ue,{modelValue:e.ngs,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.ngs=o}),label:"NGS",readonly:""},null,8,["modelValue"])]),(0,l.Lk)("div",y,[(0,l.bF)(re,{options:e.listaBibliotecas,modelValue:e.biblioteca,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.biblioteca=o}),label:"Bibliotecas","option-value":"BIBCOD","option-label":"BIBDESC"},null,8,["options","modelValue"])]),(0,l.Lk)("div",H,[(0,l.bF)(re,{options:e.listaTipos,modelValue:e.tipo,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.tipo=o}),label:"Mostrar","option-value":"value","option-label":"label",onInput:e.tipoSeleccionado},null,8,["options","modelValue","onInput"])]),(0,l.Lk)("div",Y,[(0,l.bF)(ue,{label:"Desde",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaInicio,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.fechaInicio=o}),mask:"##/##/####",readonly:""},{append:(0,l.k6)(function(){return[(0,l.bF)(ce,{class:"cursor-pointer",name:"date_range"},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{ref:"fechaInicio","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)(function(){return[(0,l.bF)(ie,{mask:"DD/MM/YYYY",modelValue:e.fechaInicio,"onUpdate:modelValue":o[21]||(o[21]=function(o){return e.fechaInicio=o})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,l.Lk)("div",Q,[(0,l.bF)(ue,{label:"Hasta",debounce:"500",maxlength:"10",format:"##/##/####",modelValue:e.fechaFin,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.fechaFin=o}),mask:"##/##/####",readonly:""},{append:(0,l.k6)(function(){return[(0,l.bF)(ce,{class:"cursor-pointer",name:"date_range"},{default:(0,l.k6)(function(){return[(0,l.bF)(se,{ref:"fechaFin","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)(function(){return[(0,l.bF)(ie,{mask:"DD/MM/YYYY",modelValue:e.fechaFin,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.fechaFin=o})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,l.Lk)("div",W,[(0,l.Lk)("div",$,[(0,l.Lk)("div",X,[(0,l.bF)(ue,{type:"textarea",modelValue:e.observaciones,"onUpdate:modelValue":o[25]||(o[25]=function(o){return e.observaciones=o}),label:"Observaciones y/o motivo de bloqueo",ref:"obs",rows:"1",wrap:""},{default:(0,l.k6)(function(){return[(0,l.bF)(de,null,{default:(0,l.k6)(function(){return a()(o[28]||(o[28]=[(0,l.eW)("Buscar",-1)]))}),_:1})]}),_:1},8,["modelValue"])]),(0,l.bF)(fe,{class:"q-pa-sm",icon:"broom",size:"10px",color:"primary",onClick:e.limpiar},{default:(0,l.k6)(function(){return[(0,l.bF)(de,null,{default:(0,l.k6)(function(){return a()(o[29]||(o[29]=[(0,l.eW)("Limpiar",-1)]))}),_:1})]}),_:1},8,["onClick"])])])])]),e.getWidth>=700?((0,l.uX)(),(0,l.CE)("div",j,[(0,l.Lk)("div",z,[(0,l.Lk)("div",G,[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFoto,width:"76px",height:"76px",onClick:e.openBoxImagen},{error:(0,l.k6)(function(){return[(0,l.bF)(ae,{class:"foto-alumno",src:e.rutaFotoDefault,width:"76px",height:"76px"},null,8,["src"])]}),_:1},8,["src","onClick"])])])])):(0,l.Q3)("v-if",!0)])]}),_:1}),(0,l.bF)(Fe,null,{default:(0,l.k6)(function(){return[(0,l.Lk)("div",J,[(0,l.Lk)("div",K,[(0,l.Lk)("div",Z,[(0,l.Lk)("div",ee,[(0,l.bF)(n,{auto:!1,name:"Deudas / Pagos","font-size":"14px",border:!1})]),(0,l.Lk)("div",oe,[(0,l.bF)(me,{ref:"deudasPagos","show-search":!1,columns:e.fields,data:e.listaReposiciones,selection:"single",context:t,config:e.config,css:{height:"calc(42vh - 45px)"}},null,8,["columns","data","config"])]),(0,l.Lk)("div",te,[(0,l.bF)(n,{auto:!1,name:"Historial de bloqueos","font-size":"14px",border:!1})]),(0,l.Lk)("div",ne,[(0,l.bF)(me,{ref:"tablaHistorial","show-search":!1,columns:e.fieldsHistorial,data:e.historial,selection:"single",config:e.configConsulta,context:t,css:{height:"calc(30vh - 25px)"}},null,8,["columns","data","config"])])])])])]}),_:1})]}),_:1})]}),_:1},8,["modelValue","onClose"])]}),_:1})}var le=t(57008),ie=t.n(le),se=t(76080),ce=t.n(se),ue=t(45254),re=t.n(ue),de=(t(30683),t(77507),t(52133),t(10239),t(50310),t(6724),t(83190),t(2369),t(6123)),fe=t(88567),me=t(95718),he=t(53380),pe=t(16648),be=t(982),ge=t(57668),Fe=t(30640),ve=t(93616),Ce=t(78840),ke=t(95477),Ie={data:function(){var e=this;return{config:{FECHA:{component:"date",edit:!1},FECHAREP:{component:"date",edit:!1},EDITAR:{component:"button",icon:["edit as editar"],tooltip:{editar:"Editar"},editar:function(){var o=re()(ce()().m(function o(t){return ce()().w(function(o){while(1)switch(o.n){case 0:e.modalDatosPago=!0,e.idRegistro=t.ID,e.fechaPago=t.FECHAREP?t.FECHAREP:e.formatearFecha(),e.monto=t.MONTO,e.moneda=t.MONEDA,e.nroRecibo=t.NUM_RECIBO,e.observacionesDeuda=t.OBSERVACION;case 1:return o.a(2)}},o)}));function t(e){return o.apply(this,arguments)}return t}(),flat:!0,dense:!0}},configConsulta:{FECHAINI:{component:"date",edit:!1},FECHAFIN:{component:"date",edit:!1},EDITAR:{component:"button",icon:["remove_red_eye as editar"],tooltip:{editar:"Ver detalle"},editar:function(){var o=re()(ce()().m(function o(t){return ce()().w(function(o){while(1)switch(o.n){case 0:e.tipo=1,e.selecionaConsulta(t);case 1:return o.a(2)}},o)}));function t(e){return o.apply(this,arguments)}return t}(),flat:!0,dense:!0}},fields:[{name:"NUMINGRESO",label:"Nro Ingreso",field:"NUMINGRESO",align:"left"},{name:"TITULO",label:"Título",field:"TITULO",align:"left"},{name:"MONTO",label:"Monto",field:"MONTO",align:"center"},{name:"NUM_RECIBO",label:"Nro Recibo",field:"NUM_RECIBO",align:"center"},{name:"OBSERVACION",label:"Observación",field:"OBSERVACION",align:"center"},{name:"FECHA",label:"Fecha Deuda",field:"FECHA",align:"center"},{name:"FECHAREP",label:"Fecha Pago",field:"FECHAREP",align:"center"},{name:"EDITAR",label:"Editar",field:"EDITAR",align:"center"}],fieldsConsulta:[{name:"SOLCOD",label:"Codigo",field:"SOLCOD",align:"left"},{name:"NOMCOMP",label:"Nombre de Solicitante",field:"NOMCOMP",align:"left",wrap:!0},{name:"DESCRIPTOR",label:"NGS / Cargo",field:"DESCRIPTOR",align:"center"},{name:"MOTIVO",label:"Motivo",field:"MOTIVO",align:"left",wrap:!0},{name:"FECHAINI",label:"Fecha Bloqueo",field:"FECHAINI",align:"center"},{name:"FECHAFIN",label:"Fecha Dsbloqueo",field:"FECHAFIN",align:"center"},{name:"EDITAR",label:"Ver",field:"EDITAR",align:"center"}],fieldsHistorial:[{name:"FECHAINI",label:"Bloqueo",field:"FECHAINI",align:"center",width:150},{name:"FECHAFIN",label:"Desbloqueo",field:"FECHAFIN",align:"center",width:150},{name:"MOTIVO",label:"Motivo",field:"MOTIVO",align:"left",wrap:!0}]}}},we=t(3042),De=t(4437),qe=t(9736),Ve=t(10213),xe=t(57343),Oe=t(2819),Se=t(53399),Be=t(21103),Ee=t(98361),Le={mixins:[Ie],components:{QCard:fe.A,QCardSection:me.A,QSeparator:he.A,sieSelect:ve.A,notify:be["default"],QSelect:pe.A,sieModal:Fe.A,actionButton:Ce.A,QPopupProxy:ke.A,autocomplete:we.A,QDate:De.A,QInput:qe.A,QImg:Se.A,boxImagen:Ee.A,QPage:de.Tu,QIcon:de.bP,QBtn:de.Il,QTooltip:de.nC},computed:{getWidth:function(){return Be.A.width},rutaFotoDefault:function(){var e=(0,xe.getImageDefault)(this.sie,this.sexo);return e},rutaFoto:function(){var e=(0,xe.imgEstudiante)(this.sie,this.codigoFoto);return e}},data:function(){var e=this;return{sie:(0,ge["default"])(),permiso:(0,ge["default"])().ruta.nivel,headerButtons:[{icon:"arrow_back",permiso:">2",label:"Atras",click:function(){var o=re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:e.closeModalDetalle();case 1:return o.a(2)}},o)}));function t(){return o.apply(this,arguments)}return t}()},{icon:"lock_outline",permiso:">2",label:"Bloquear",click:function(){var o=re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:if(e.solicitante){o.n=1;break}return(0,Ve.confirm)("Debe indicar un usuario a bloquear","info"),o.a(2,1);case 1:if(e.biblioteca){o.n=2;break}return(0,Ve.confirm)("Debe indicar la biblioteca","info"),o.a(2,1);case 2:if(e.observaciones){o.n=3;break}return(0,Ve.confirm)("Debe indicar el motivo del bloqueo","info"),o.a(2,1);case 3:return o.n=4,e.bloquearUsuario();case 4:return o.a(2)}},o)}));function t(){return o.apply(this,arguments)}return t}()},{icon:"lock_open",permiso:">2",label:"Desbloquear",click:function(){return e.solicitante?e.bloqueos.length<1?((0,Ve.confirm)("El usuario no esta bloqueado","info"),1):void e.desbloquearUsuario():((0,Ve.confirm)("Debe indicar un usuario a desbloquear","info"),1)}}],modalButtons:[{icon:"print",permiso:">2",label:"Imprimir",tooltip:"Relación de usuarios bloqueados",click:function(){var o=e.solicitanteConsulta,t=e.fechaInicioConsulta,n=e.fechaFinConsulta,a=e.bibliotecaConsulta,l=e.tipoConsulta,i={solcod:o||null,desde:t||null,hasta:n||null,sel_biblioteca:a||null},s={1:"V",2:"N"};i.estado=s[l]||"",(0,Oe.exportFilePhp)(i,"biblioteca/reportes/relacion-usuarios-bloqueados")}},{icon:"block",permiso:">2",label:"Nuevo Bloqueo",click:function(){e.limpiar(),e.openModalDetalle=!0}}],llaveSolicitante:["TEXT"],llaveTitulo:["CATALOGO","TITULO","FICHACOD"],listaBloqueos:[],listaSolicitantes:[],listaTitulos:[],listaBibliotecas:[{BIBCOD:"",BIBDESC:"Seleccione"}],listaTipos:[{value:1,label:"Deudas"},{value:2,label:"Pagos"},{value:3,label:"Todos"}],listaTiposConsulta:[{value:1,label:"Bloqueados"},{value:2,label:"Desbloqueados"},{value:3,label:"Todos"}],listaReposiciones:[],bloqueos:[],historial:[],solicitante:null,codigoFoto:"",titulo:null,biblioteca:null,fechaInicio:null,fechaFin:null,tipo:1,nombre:null,nombreConsulta:null,ngs:null,fichacod:null,solicitanteConsulta:null,bibliotecaConsulta:null,fechaInicioConsulta:null,fechaFinConsulta:null,tipoConsulta:1,id_deuda:null,id_persona:null,id_perfil:null,tipoSolicita:null,modalDatosPago:null,monto:null,moneda:null,nroRecibo:null,observaciones:null,observacionesDeuda:null,fechaPago:null,sexo:"M",idRegistro:null,openModalDetalle:null,openModalImagen:!1,urlImagenBox:""}},methods:{closeModalDetalle:function(){this.openModalDetalle=!1,this.codigoFoto=this.solicitanteConsulta},openBoxImagen:function(){this.urlImagenBox=this.codigoFoto?this.rutaFoto:this.rutaFotoDefault,this.openModalImagen=!0},consultaSolicitante:function(e){var o=this;return re()(ce()().m(function t(){var n;return ce()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,o.$http.get("api/BloqueosController/getBloqueosSolicitante",{params:{params:e}});case 1:return n=t.v,t.a(2,n)}},t)}))()},getHistorialSolicitante:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.consultaSolicitante({solcod:e.solicitante});case 1:e.historial=o.v;case 2:return o.a(2)}},o)}))()},getBloqueoSolicitante:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.consultaSolicitante({solcod:e.solicitante,activo:1});case 1:e.bloqueos=o.v,e.bloqueos.length>0?(e.observaciones=e.bloqueos[0].MOTIVO,e.fechaInicio=e.formatearFecha(e.bloqueos[0].FECHAINI),e.fechaFin=e.bloqueos[0].FECHAFIN?e.formatearFecha(e.bloqueos[0].FECHAFIN):""):(e.observaciones="",e.fechaFin="");case 2:return o.a(2)}},o)}))()},getlistaDeudas:function(e){var o=this;return re()(ce()().m(function t(){var n;return ce()().w(function(t){while(1)switch(t.n){case 0:return n=e||{},t.n=1,o.$http.get("api/ReposicionesController/getlistaDeudas",{params:{params:n}});case 1:o.listaReposiciones=t.v;case 2:return t.a(2)}},t)}))()},getBloqueos:function(e){var o=this;return re()(ce()().m(function t(){var n;return ce()().w(function(t){while(1)switch(t.n){case 0:return n=e||{},t.n=1,o.$http.get("api/BloqueosController/getBloqueos",{params:{params:n}});case 1:o.listaBloqueos=t.v;case 2:return t.a(2)}},t)}))()},getlistaSolcitantes:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/OperacionesController/getPersonasBiblioteca");case 1:e.listaSolicitantes=o.v;case 2:return o.a(2)}},o)}))()},getlistaTitulos:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/MantenimientosController/getTitulos");case 1:e.listaTitulos=o.v;case 2:return o.a(2)}},o)}))()},getlistaReposiciones:function(e){var o=this;return re()(ce()().m(function t(){var n;return ce()().w(function(t){while(1)switch(t.n){case 0:return n=e||{tipo:o.tipo},t.n=1,o.$http.get("api/ReposicionesController/getlistaReposiciones",{params:{params:n}});case 1:o.listaReposiciones=t.v;case 2:return t.a(2)}},t)}))()},getBibliotecas:function(){var e=this;return re()(ce()().m(function o(){var t;return ce()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.$http.get("api/ReposicionesController/getBibliotecas");case 1:t=o.v,t.map(function(o){e.listaBibliotecas.push(o)});case 2:return o.a(2)}},o)}))()},bloquearUsuario:function(){var e=this;return re()(ce()().m(function o(){var t,n;return ce()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={solcod:e.solicitante,bibcod:e.biblioteca,idtiposolicita:e.tipoSolicita,motivo:e.observaciones,id_perfil:e.id_perfil,id_persona:e.id_persona,fechafin:e.fechaFin.split("/").reverse().join("/"),fechaini:e.fechaInicio.split("/").reverse().join("/")},t.id=e.bloqueos.length>0?e.bloqueos[0].ID:null,o.p=1,o.n=2,e.$http.post("api/BloqueosController/bloquear",{params:ie()({},t)});case 2:return o.n=3,e.consultaPorFiltro();case 3:e.getHistorialSolicitante(),(0,be["default"])("Proceso completado","success"),o.n=5;break;case 4:o.p=4,n=o.v,(0,be["default"])(n.message,"warning");case 5:return o.a(2)}},o,null,[[1,4]])}))()},desbloquearUsuario:function(){var e=this;return re()(ce()().m(function o(){var t,n;return ce()().w(function(o){while(1)switch(o.p=o.n){case 0:return t={solcod:e.solicitante,id:e.bloqueos[0].ID},o.p=1,o.n=2,e.$http.post("api/BloqueosController/desbloquear",{params:ie()({},t)});case 2:setTimeout(re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:return e.getBloqueoSolicitante(),e.getHistorialSolicitante(),o.n=1,e.consultaPorFiltro();case 1:return o.a(2)}},o)})),2e3),(0,be["default"])("Usuario Desbloqueado","success"),o.n=4;break;case 3:o.p=3,n=o.v,(0,be["default"])(n.message,"warning");case 4:return o.a(2)}},o,null,[[1,3]])}))()},pagarDeuda:function(e){var o=this;return re()(ce()().m(function t(){return ce()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,o.$http.post("api/ReposicionesController/pagarReposicion",{params:e});case 1:return t.a(2)}},t)}))()},selecionaConsulta:function(e,o){this.bloqueos=[e],this.solicitante=e.SOLCOD,this.codigoFoto=e.SOLCOD,this.observaciones=e.MOTIVO,this.nombre=e.NOMCOMP,this.ngs=e.DESCRIPTOR,this.fechaInicio=this.formatearFecha(e.FECHAINI),this.fechaFin=e.FECHAFIN?this.formatearFecha(e.FECHAFIN):"",this.biblioteca=e.BIBCOD,this.id_deuda=e.ID,this.busquedaPorFiltro(),this.getHistorialSolicitante(),this.openModalDetalle=!0},busquedaPorFiltro:function(){this.getlistaDeudas({solcod:this.solicitante,tipodeuda:this.tipo}),this.getBloqueoSolicitante()},consultaPorFiltro:function(){var e={solcod:this.solicitanteConsulta?this.solicitanteConsulta:null,bibcod:this.bibliotecaConsulta?this.bibliotecaConsulta:null,fechaInicio:this.fechaInicioConsulta?this.fechaInicioConsulta.split("/").join("."):null,fechaFin:this.fechaFinConsulta?this.fechaFinConsulta.split("/").join("."):null,tipo:this.tipoConsulta};this.getBloqueos(e)},bibliotecaSelecionadaConsulta:function(){this.consultaPorFiltro()},asignaSolicitante:function(e){var o=this;return re()(ce()().m(function t(){return ce()().w(function(t){while(1)switch(t.n){case 0:o.tipoSolicita=e.TIPO_SOLICITA,o.id_persona=e.ID_PERSONA,o.id_perfil=e.ID_PERFIL,o.nombre=e.NOMCOMP,o.sexo=e.SEXO,o.ngs=e.DESCRIPTOR,o.solicitante=e.SOLCOD,o.codigoFoto=1===e.ID_PERFIL?e.SOLCOD:"",o.busquedaPorFiltro(),o.getBloqueoSolicitante(),o.getHistorialSolicitante(),o.getlistaDeudas({solcod:e.SOLCOD,tipodeuda:o.tipo}),o.fechaInicio=o.formatearFecha(new Date);case 1:return t.a(2)}},t)}))()},asignaSolicitanteConsulta:function(e){var o=this;return re()(ce()().m(function t(){return ce()().w(function(t){while(1)switch(t.n){case 0:o.codigoFoto=1===e.ID_PERFIL?e.SOLCOD:"",o.sexo=e.SEXO,o.solicitanteConsulta=e.SOLCOD,o.nombreConsulta=e.NOMCOMP,o.consultaPorFiltro();case 1:return t.a(2)}},t)}))()},ingresarFechaConsulta:function(e){this.consultaPorFiltro()},tipoSeleccionado:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:if(e.solicitante){o.n=1;break}return(0,be["default"])("Seleccione un usuario","warning"),o.a(2,!1);case 1:e.busquedaPorFiltro();case 2:return o.a(2)}},o)}))()},tipoSeleccionadoConsulta:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:e.consultaPorFiltro();case 1:return o.a(2)}},o)}))()},formatearFecha:function(e){var o=e?new Date(e):new Date,t=String(o.getDate()).padStart(2,"0"),n=String(o.getMonth()+1).padStart(2,"0"),a=o.getFullYear();return"".concat(t,"/").concat(n,"/").concat(a)},limpiar:function(e){this.solicitante="",this.codigoFoto="",this.nombre="",this.ngs="",this.titulo="",this.sexo="M",this.biblioteca="",this.fichacod="",this.fechaInicio="",this.fechaFin="",this.tipo=1,this.observaciones="",this.bloqueos=[],this.historial=[],this.listaReposiciones=[]},limpiarConsulta:function(e){this.codigoFoto="",this.nombreConsulta="",this.solicitanteConsulta="",this.bibliotecaConsulta="",this.fechaInicioConsulta="",this.fechaFinConsulta="",this.tipoConsulta=1,this.consultaPorFiltro()},grabarReposicion:function(e){var o=this;return re()(ce()().m(function e(){var t,n;return ce()().w(function(e){while(1)switch(e.p=e.n){case 0:if(o.fechaPago){e.n=1;break}return(0,be["default"])("Debe ingresar la fecha de pago","warning"),e.a(2,1);case 1:if(t={id:o.idRegistro,fechaPago:o.fechaPago,monto:o.monto,nroRecibo:o.nroRecibo,observaciones:o.observacionesDeuda,usucod:o.sie.usucod},null!==t.monto&&""!==t.monto){e.n=2;break}return(0,Ve.confirm)("No hay un monto especificado para la reposicion","info"),e.a(2,1);case 2:return e.p=2,e.n=3,o.pagarDeuda(ie()({},t));case 3:o.busquedaPorFiltro(),o.modalDatosPago=!1,(0,be["default"])("Proceso completado","success"),e.n=5;break;case 4:e.p=4,n=e.v,(0,be["default"])(n.msg,"warning");case 5:return e.a(2)}},e,null,[[2,4]])}))()},cargarDatosPrincipales:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,e.consultaPorFiltro();case 1:return o.n=2,e.getBibliotecas();case 2:return o.n=3,e.getlistaSolcitantes();case 3:return o.n=4,e.getlistaTitulos();case 4:e.codigoFoto="";case 5:return o.a(2)}},o)}))()}},created:function(){var e=this;return re()(ce()().m(function o(){return ce()().w(function(o){while(1)switch(o.n){case 0:e.cargarDatosPrincipales();case 1:return o.a(2)}},o)}))()}},Pe=t(12807);const _e=(0,Pe.A)(Le,[["render",ae]]);var Me=_e}}]);