"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[7394],{7394:function(e,n,r){r.r(n),r.d(n,{default:function(){return w}});var t=r(61758),o={class:"row q-col-gutter-md"},i={class:"col-xs-12"};function a(e,n){var r=(0,t.g2)("header-btn"),a=(0,t.g2)("formulario"),u=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-card"),s=(0,t.g2)("sie-modal"),l=(0,t.g2)("q-select"),d=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(d,{class:"q-pa-sm sie-flat"},{default:(0,t.k6)(function(){return[(0,t.bF)(c,{flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{name:e.tituloForm,auto:!0,buttons:e.botonesForm},null,8,["name","buttons"]),(0,t.bF)(u,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",o,[(0,t.Lk)("div",i,[(0,t.bF)(a,{schema:e.schemas.viewPeriodosAccesos,ref:"formApp",key:"formApp",onClickIconGrid:e.clickIconGrid,onChangeInput:e.changeInput,onClickBtn:e.clickBtn},null,8,["schema","onClickIconGrid","onChangeInput","onClickBtn"])])])]}),_:1})]}),_:1}),(0,t.bF)(s,{title:e.configModalSel.titulo,modelValue:e.openModal,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.openModal=n}),ok:"GRABAR",onSubmit:e.submit},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{class:"cont-modal-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{schema:e.schemaModal,ref:"formModal",key:"formModal",modal:!0},null,8,["schema"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"]),(0,t.bF)(s,{title:e.periodos.titulo,modelValue:e.periodos.open,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.periodos.open=n}),footer:!1},{default:(0,t.k6)(function(){return[(0,t.bF)(u,{class:"cont-modal-sm"},{default:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"q-if-outlined",modelValue:e.periodos.itemSel,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.periodos.itemSel=n}),options:e.periodos.items,"float-label":"Periodo",onInput:n[2]||(n[2]=function(n){return e.selPeriodo()})},null,8,["modelValue","options"])]}),_:1})]}),_:1},8,["title","modelValue"])]}),_:1})}var u=r(76080),c=r.n(u),s=r(45254),l=r.n(s),d=(r(71225),r(83077),r(52133),r(10239),r(50310),r(5962),r(90095),r(6724),r(83190),r(13715),r(80660)),f=r(10213),p=r(6123),m=r(65848),h={components:{QSelect:p.Si,QPage:p.Tu,QCard:p.C$},mixins:[m.A],data:function(){var e=this.init();return e.periodos={open:!1,titulo:"Periodos de accesos",items:[],itemSel:null},e},methods:{updateGrid:function(){var e=arguments,n=this;return l()(c()().m(function r(){var t,o,i,a,u,s,l,d;return c()().w(function(r){while(1)switch(r.n){case 0:return t=e.length>0&&void 0!==e[0]?e[0]:null,r.n=1,n.getInputValue("formApp","OPCION");case 1:return o=r.v,r.n=2,n.getInputValue("formApp","INPUT_1");case 2:return i=r.v,r.n=3,n.getInputValue("formApp","INPUT_2");case 3:return a=r.v,r.n=4,n.getInputValue("formApp","ID_MODALIDAD");case 4:return u=r.v,r.n=5,n.getInputValue("formApp","INPUT_3");case 5:return s=r.v,r.n=6,n.getInputValue("formApp","ID_CONDICION");case 6:l=r.v,d={opcion:o,anoadm:i},2===a.length&&("%"!==a[0]&&(d.nivel=a[0]),"%"!==a[1]&&(d.grado=a[1])),u>0&&(d.id_modalidad=u),s.length>0&&(d.textoBusqueda=s),l>0&&(d.id_condicion=l),t&&(d.periodo=t),n.reloadGrid("formApp","GRID_1",d);case 7:return r.a(2)}},r)}))()},filtrarDatos:function(e,n,r){var t=this;return l()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:t.$nextTick(l()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.updateGrid();case 1:return e.a(2)}},e)})));case 1:return e.a(2)}},e)}))()},selPeriodo:function(){var e=this;return l()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.updateGrid(e.periodos.itemSel);case 1:e.periodos.open=!1;case 2:return n.a(2)}},n)}))()},modalPeriodos:function(e,n,r){var t=this;return l()(c()().m(function e(){var n,r,o;return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.$refs["formApp"].rows["GRID_1"];case 1:n=e.v,r=[],n.forEach(function(e){e.FH_INICIO&&e.FH_FINAL&&r.push({value:e.FH_INICIO+"_"+e.FH_FINAL,label:e.FH_INICIO_FORMAT+" - "+e.FH_FINAL_FORMAT})}),o=r.filter(function(e,n){return n===r.findIndex(function(n){return n.value===e.value})}),o.push({value:"SIN_PERIODO",label:"Sin periodo asignado"}),t.periodos.items=t.sieSelectOptions(o,"value","label"),t.periodos.itemSel=null,t.periodos.open=!0;case 2:return e.a(2)}},e)}))()},modalAsignarPeriodos:function(e){var n=this;return l()(c()().m(function r(){var t,o,i;return c()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,n.$refs["formApp"].$refs["GRID_1"].selected;case 1:if(t=r.v,!(t.length>0)){r.n=4;break}return o=t.map(function(e){return e.ID_PERFAM}),r.n=2,n.getInputValue("formApp","OPCION");case 2:return i=r.v,r.n=3,n.runModal({familias:o,opcion:i},e.params.view,"I");case 3:r.n=5;break;case 4:n.$notify("Debe seleccionar al menos un(1) registro","warning");case 5:return r.a(2)}},r)}))()},eliminarPeriodosAccesos:function(e){var n=this;return l()(c()().m(function e(){var r;return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,n.$refs["formApp"].$refs["GRID_1"].selected;case 1:r=e.v,r.length>0?(0,f.confirm)("¿Está seguro de realizar la eliminación?","add").onOk(l()(c()().m(function e(){var t,o,i;return c()().w(function(e){while(1)switch(e.n){case 0:return t=r.map(function(e){return e.ID_PERFAM}),e.n=1,n.getInputValue("formApp","OPCION");case 1:o=e.v,i={familias:t,opcion:o,FH_INICIO:null,FH_FINAL:null},d.$http.post("api/postulacionController/procesarPeriodosAccesos",{data:i}).then(function(){var e=l()(c()().m(function e(r){return c()().w(function(e){while(1)switch(e.n){case 0:return n.$notify(r.message,"success"),e.n=1,n.updateGrid();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){n.$notify(e.error.message,"warning")});case 2:return e.a(2)}},e)}))):n.$notify("Debe seleccionar al menos un(1) registro","warning");case 2:return e.a(2)}},e)}))()},postSubmit:function(e){var n=this;return l()(c()().m(function e(){var r;return c()().w(function(e){while(1)switch(e.n){case 0:r=n.configModalSel.codigoFormulario,e.n="admProcPeriodoAcceso"===r?1:3;break;case 1:return e.n=2,n.updateGrid();case 2:return e.a(3,3);case 3:return e.a(2)}},e)}))()}},created:function(){var e=this;return l()(c()().m(function n(){var r;return c()().w(function(n){while(1)switch(n.n){case 0:r=[{id:"viewPeriodosAccesos",ref:"formApp"}],e.loadSchemas(r);case 1:return n.a(2)}},n)}))()}},I=r(12807);const v=(0,I.A)(h,[["render",a]]);var w=v}}]);