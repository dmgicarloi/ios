"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[5460],{5460:function(e,t,o){o.r(t),o.d(t,{default:function(){return X}});o(56285);var n=o(61758),l=o(58790),a={class:"intranet--actividades-x-profesor q-pa-sm"},i={class:"row"},r={class:"col-12 body-2"},d={class:"row q-col-gutter-sm"},s={class:"col-12"},u={class:"col-xs-6 col-sm-4 col-md-2"},c={class:"col-xs-6 col-sm-4 col-md-2"},f={class:"col-xs-6 col-sm-4 col-md-2"},p={class:"col-xs-6 col-sm-4 col-md-3"},b={key:0,class:"col-xs-12 col-sm-4 col-md-3"},m={key:1,class:"col-xs-12 col-sm-4 col-md-3"},C={class:"col-12"},I={key:0},h=["innerHTML"];function _(e,t){var o=(0,n.g2)("header-btn"),_=(0,n.g2)("q-option-group"),k=(0,n.g2)("q-datetime"),v=(0,n.g2)("q-select"),O=(0,n.g2)("q-td"),D=(0,n.g2)("q-tr"),F=(0,n.g2)("q-table"),E=(0,n.g2)("q-card-section"),N=(0,n.g2)("q-card"),y=(0,n.g2)("q-item-side"),g=(0,n.g2)("q-item-main"),A=(0,n.g2)("q-item"),T=(0,n.g2)("q-list"),P=(0,n.g2)("q-list-header"),L=(0,n.g2)("q-item-separator"),M=(0,n.g2)("sie-modal"),S=(0,n.g2)("contenido-detalle"),U=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(U,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",a,[(0,n.bF)(N,{flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(o,{name:"Actividades por Profesor",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(E,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",i,[t[11]||(t[11]=(0,n.Lk)("div",{class:"body-1"},null,-1)),(0,n.Lk)("div",r,[(0,n.Lk)("div",d,[(0,n.Lk)("div",s,[(0,n.bF)(_,{color:"secondary",type:"radio",modelValue:e.orden,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.orden=t}),options:e.tOrden,onInput:e.loadListaContenido,inline:""},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",u,[(0,n.bF)(k,{modelValue:e.desde,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.desde=t}),type:"date",label:e.$t("desde"),onInput:e.loadListaContenido,format:"DD/MM/YYYY"},null,8,["modelValue","label","onInput"])]),(0,n.Lk)("div",c,[(0,n.bF)(k,{modelValue:e.hasta,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.hasta=t}),type:"date",label:e.$t("hasta"),onInput:e.loadListaContenido,format:"DD/MM/YYYY"},null,8,["modelValue","label","onInput"])]),(0,n.Lk)("div",f,[(0,n.bF)(v,{modelValue:e.contenido,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.contenido=t}),options:e.tipoContenido,"option-label":"DESCRIPCION","option-value":"ID_CONTENIDO_TIPO",label:"Contenido",onInput:e.loadListaContenido},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",p,[(0,n.bF)(v,{modelValue:e.filtro,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.filtro=t}),options:e.tipoFiltros,label:e.$t("agenda.titFiltros"),onInput:e.loadListaContenido},null,8,["modelValue","options","label","onInput"])]),"P"===e.filtro?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.bF)(v,{modelValue:e.profesor,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.profesor=t}),options:e.profesores,"option-label":"USUNOM","option-value":"USUCOD",label:"Profesor",onInput:e.loadListaContenido},null,8,["modelValue","options","onInput"])])):(0,n.Q3)("v-if",!0),"S"===e.filtro?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.bF)(v,{modelValue:e.salon,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.salon=t}),options:e.salones,"option-label":"NEMODES","option-value":"NEMO",label:"Aula",onInput:e.loadListaContenido},null,8,["modelValue","options","onInput"])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",C,[(0,n.bF)(F,{class:"sie-table_alto",dense:"",bordered:"",flat:"","wrap-cells":"","rows-per-page-options":[0],"virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":t[7]||(t[7]=function(t){return e.pagination=t}),data:e.listadoContenido,columns:e.columnas,"row-key":"name"},{body:(0,n.k6)(function(t){return[(0,n.bF)(D,{class:"cursor-pointer",props:t,onClick:function(o){return e.abrirDetalle(t.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(O,{key:"NEMODES",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.NEMODES),1)]}),_:2},1032,["props"]),(0,n.bF)(O,{key:"CURSONOM",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.CURSONOM),1)]}),_:2},1032,["props"]),(0,n.bF)(O,{key:"TITULO",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.TITULO),1)]}),_:2},1032,["props"]),(0,n.bF)(O,{key:"DESCRIPCION",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(t.row.DESCRIPCION),1)]}),_:2},1032,["props"]),(0,n.bF)(O,{key:"FH_PUBLICACION",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.date(t.row.FH_PUBLICACION,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,n.bF)(O,{key:"FH_ENTREGA",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.date(t.row.FH_ENTREGA,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,n.bF)(O,{key:"FH_CREACION",props:t},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.date(t.row.FH_CREACION,"DD/MM/YYYY")),1)]}),_:2},1032,["props"]),(0,n.bF)(O,{key:"ADJUNTO",props:t},{default:(0,n.k6)(function(){return[0===t.row.ADJUNTO.length?((0,n.uX)(),(0,n.CE)("div",I,"Sin adjuntos")):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(t.row.ADJUNTO,function(t){return(0,n.uX)(),(0,n.CE)("div",null,(0,l.v_)(t.NOMBRE+" (")+" "+(0,l.v_)(e.date(t.FH_REGISTRO,"DD/MM/YYYY"))+" "+(0,l.v_)(")"),1)}),256))]}),_:2},1032,["props"])]}),_:2},1032,["props","onClick"])]}),_:1},8,["pagination","data","columns"])])])])])]}),_:1})]}),_:1})]),(0,n.bF)(M,{class:"activXProfe-detalle-modal",title:e.detalle.TITULO,modelValue:e.openDetalle,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.openDetalle=t}),footer:!0,ok:e.$t("botones.verDetalles"),ref:"modal",header:!0,loading:!1,onSubmit:e.verClase,icon_ok:"remove_red_eye"},{default:(0,n.k6)(function(){return[(0,n.bF)(T,{class:"no-border"},{default:(0,n.k6)(function(){return[(0,n.bF)(A,null,{default:(0,n.k6)(function(){return[(0,n.bF)(y,{class:"text-bold text-black q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("salon"))+":",1)]}),_:1}),(0,n.bF)(g,{class:"q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.detalle.NEMODES),1)]}),_:1})]}),_:1}),(0,n.bF)(A,null,{default:(0,n.k6)(function(){return[(0,n.bF)(y,{class:"text-bold text-black q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("curso"))+":",1)]}),_:1}),(0,n.bF)(g,{class:"q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.detalle.CURSONOM),1)]}),_:1})]}),_:1}),(0,n.bF)(A,null,{default:(0,n.k6)(function(){return[(0,n.bF)(y,{class:"text-bold text-black q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("publicadoPor"))+":",1)]}),_:1}),(0,n.bF)(g,{class:"q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.detalle.USUNOM),1)]}),_:1})]}),_:1}),(0,n.bF)(A,null,{default:(0,n.k6)(function(){return[(0,n.bF)(y,{class:"text-bold text-black q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("fechaDePublicacion"))+":",1)]}),_:1}),(0,n.bF)(g,{class:"q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.detalle.FH_PUBLICACION),1)]}),_:1})]}),_:1}),1===e.detalle.ID_CONTENIDO_TIPO?((0,n.uX)(),(0,n.Wv)(A,{key:0},{default:(0,n.k6)(function(){return[(0,n.bF)(y,{class:"text-bold text-black q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("fechaDeEntrega"))+":",1)]}),_:1}),(0,n.bF)(g,{class:"q-body-1"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.detalle.FH_ENTREGA),1)]}),_:1})]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1}),e.detalle.DESCRIPCION?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"sie-editor q-mx-md",innerHTML:e.detalle.DESCRIPCION},null,8,h)):(0,n.Q3)("v-if",!0),e.verDocument?((0,n.uX)(),(0,n.Wv)(T,{key:1,class:"no-border",multiline:""},{default:(0,n.k6)(function(){return[(0,n.bF)(P,null,{default:(0,n.k6)(function(){return[(0,n.eW)((0,l.v_)(e.$t("matricula.documentos")),1)]}),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.adjuntos,function(t,o){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(A,{link:"",onClick:function(o){return e.downloadApi(t.url,t.name)}},{default:(0,n.k6)(function(){return[(0,n.bF)(y,{icon:"file",color:"blue"}),(0,n.bF)(g,{label:t.name,"label-lines":"3"},null,8,["label"])]}),_:2},1032,["onClick"]),(0,n.bF)(L)],64)}),256)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.enlaces,function(t,o){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(A,{link:"",onClick:function(o){return e.openLink(t.ENLACE)}},{default:(0,n.k6)(function(){return[(0,n.bF)(y,{icon:"link",color:"cyan"}),(0,n.bF)(g,{label:t.TITULO,"label-lines":"1"},null,8,["label"])]}),_:2},1032,["onClick"]),(0,n.bF)(L)],64)}),256))]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1},8,["title","modelValue","ok","onSubmit"]),(0,n.bF)(S,{modelValue:e.contenidoDetalle.modal,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.contenidoDetalle.modal=t}),outsite:"",idContenido:e.detalle.ID_CONTENIDO,"onUpdate:idContenido":t[10]||(t[10]=function(t){return e.detalle.ID_CONTENIDO=t})},null,8,["modelValue","idContenido"])]}),_:1})}var k=o(8445),v=o.n(k),O=(o(30683),o(23825),o(10239),o(83190),o(27153),o(66307),o(24066),o(6123)),D=o(30640),F=o(6083),E=o(93616),N=o(96945),y=o(18105),g=o(57668),A=o(13813),T=o(982),P=o(47035),L=o(78131),M=o(81288),S=o(2819),U=o(80660),Y=o(54760),H=o(84569),R=o(88567),q=o(95718),$=o(50425),x=o(82351),V=o(94509),w=o(16648),Q=o(50304),W={components:{QDatetime:Q.A,QInput:O.ie,QFab:O.l6,QFabAction:O.B$,QPageSticky:O._U,QOptionGroup:O.EX,QSelect:w.S,QTable:$.A,QTr:x.A,QTd:V.A,QToolbar:O.ZV,sieModal:D.A,sieInfo:g["default"],sieSelect:E.A,sieEditor:F.A,contenidoDetalle:N.A,QCard:R.A,QCardSection:q.A,QPage:O.Tu,QList:O.Mb,QItem:O.H0,QItemSide:O.n1,QItemMain:O.mF,QListHeader:O.XR,QItemSeparator:O.CL},data:function(){return{tipoContenido:[],contenido:"%",formato:"",profesores:[],profesor:"%",salones:[],salon:"%",listadoContenido:[],columnas:[{name:"NEMODES",label:this.$t("salon"),field:"NEMODES",align:"left",sortable:!0},{name:"CURSONOM",label:this.$t("curso"),field:"CURSONOM",align:"left",sortable:!0},{name:"TITULO",label:this.$t("titulo"),field:"TITULO",align:"left",sortable:!0},{name:"DESCRIPCION",label:this.$t("intranet.clase.contenido"),field:"DESCRIPCION",align:"left",sortable:!0},{name:"FH_PUBLICACION",label:this.$t("fechaDePublicacion"),field:"FH_PUBLICACION",align:"center",sortable:!0},{name:"FH_ENTREGA",label:this.$t("fechaDeEntrega"),field:"FH_ENTREGA",align:"center",sortable:!0},{name:"FH_CREACION",label:"Fecha de creaciÃ³n",field:"FH_CREACION",align:"center",sortable:!0},{name:"ADJUNTO",label:this.$t("banners.adjunto"),field:"ADJUNTO",align:"left",sortable:!0}],pagination:{rowsPerPage:0},tipoFiltros:[{label:"Profesores",value:"P"},{label:"Salones",value:"S"}],filtro:"P",desde:new Date((new Date).setDate(1)),hasta:new Date,tOrden:[{label:this.$t("fechaDePublicacion"),value:"P"},{label:this.$t("fechaDeEntrega"),value:"E"},{label:"Con adjuntos",value:"A"}],orden:"P",openDetalle:!1,detalle:{},enlaces:[],adjuntos:[],verDocument:!1,contenidoDetalle:{modal:!1}}},computed:{url:function(){var e=(0,g["default"])().url+"/intranet/reporte-node/reporte",t={USUCOD:(0,g["default"])().usucod,fechaDesde:(0,y.Ay)(this.desde,"DD/MM/YYYY"),fechaHasta:(0,y.Ay)(this.hasta,"DD/MM/YYYY"),profcod:this.profesor,repcod:"usoIntranetProfesores",salon:this.salon,tOrden:this.orden,tipoContenido:this.contenido,tipoFiltro:this.filtro,token:(0,g["default"])().token,formato:this.formato};return e+"?"+(0,Y.stringify)(t)},isLess:function(){return(0,M.isLess)()},buttons:function(){var e=this,t=[];return this.listadoContenido.length>0&&(t=[{icon:"file_pdf",label:"Generar Pdf",click:function(){e.imprimir("pdf")}},{icon:"file_excel",label:"Generar Excel",click:function(){e.imprimir("xlsx")}}]),t.unshift({icon:"print",label:"Profesores sin actividad",click:function(){e.printProfesoresSinActividad()}}),t}},methods:{date:y.Ay,init:function(){var e=this;U.$http.get("api/HyoContenidoTipo/obtContenidoTipo").then(function(t){var o=t.json;o.unshift({ID_CONTENIDO_TIPO:"%",DESCRIPCION:"Todos"}),["0023","0078"].indexOf((0,g["default"])().colcod)>=0&&o.push({ID_CONTENIDO_TIPO:99,DESCRIPCION:"Silabus"}),e.tipoContenido=o}),U.$http.get("api/HyoProfes/obtListadoProfecActivos").then(function(t){var o=t.json;o.unshift({USUCOD:"%",USUNOM:"Todos"}),e.profesores=o}),U.$http.get("api/HyoSalones/cboListaNemodes").then(function(t){var o=t.cboNemodes;o.unshift({NEMODES:"Todos",NEMO:"%"}),e.salones=o}),this.loadListaContenido()},loadListaContenido:function(){var e=this,t={fechaHasta:this.hasta,fechaDesde:this.desde,tipoContenido:this.contenido,tipoFiltro:this.filtro,profcod:this.profesor,salon:this.salon,tOrden:this.orden},o=[U.$http.post("api/HyoContenido/obtListadoContenido",{parametros:t})];["0023"].indexOf((0,g["default"])().colcod)>=0&&["%",99].indexOf(this.contenido)>=0&&o.push(U.$http.post("api/HyoSilabus/obtListadoContenido",{parametros:t})),Promise.all(o).then(function(t){var o=t[0].json;["0023"].indexOf((0,g["default"])().colcod)>=0&&["%",99].indexOf(e.contenido)>=0&&(o=[].concat(v()(t[0].json),v()(t[1].json)));var n="P"===e.orden?"FH_PUBLICACION":"FH_ENTREGA";e.listadoContenido=(0,P["default"])(o,"asc",n)})},abrirDetalle:function(e){6!==e.TIPOC&&(this.openDetalle=!0,this.obtContenidoById(e.ID),this.obtEnlacesAdjuntosById(e.ID,e.TIPCOD))},obtEnlacesAdjuntosById:function(e,t){var o=this;this.verDocument=!1,U.$http.get("api/HyoContenido/obtEnlacesAdjuntosById",{params:{idContenido:e,tipo:t}}).then(function(e){var t=e.json;(t["adjuntos"].length>0||t["enlaces"].length>0)&&(o.verDocument=!0),o.enlaces=t["enlaces"],o.adjuntos=(0,A["default"])(t["adjuntos"],function(e){return e.esEnlace||(e.url=(0,g["default"])().url+"/".concat(U.API_LMS,"/api/HyoContenido/archivo/")+e.id+"/"+e.name+"?access_token="+(0,g["default"])().token),e.ICONO="",e})})},obtContenidoById:function(e){var t=this;U.$http.get("api/HyoContenido/obtContenidoById",{params:{idTarea:e}}).then(function(e){var o=e.json,n=(0,A["default"])(o,function(e){return e.FH_PUBLICACION=(0,y.Ay)(e.FH_PUBLICACION,"dddd, D MMMM YYYY HH:mm aa"),e.FH_ENTREGA=(0,y.Ay)(e.FH_ENTREGA,"dddd, D MMMM YYYY HH:mm aa"),e})[0];t.detalle=n||{}})},verClase:function(){var e=(0,H.yy)("intranet.clase2");e?(this.contenidoDetalle.modal=!0,this.openDetalle=!1):this.$router.push({name:"intranet.clase.contenidoDetalle",params:{id:this.detalle.ID_CONTENIDO},query:{alucod:this.alucod}})},imprimir:function(e){this.formato=e,this.listadoContenido.length>0?(0,O.KN)(this.url):(0,T["default"])(this.$t("cobros.datosvacio"),"warning")},downloadApi:function(e,t){(0,L["default"])(e,t)},openLink:function(e){(0,O.KN)(e)},printProfesoresSinActividad:function(){var e={formato:"pdf",repcod:"profesoresSinActividad",ano:g["default"].ano};(0,S.exportFilePhp)(e,"webservice/reportes/reporte")}},created:function(){this.init()}},j=o(12807);const B=(0,j.A)(W,[["render",_]]);var X=B}}]);