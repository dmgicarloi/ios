"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[47093],{47093:function(e,o,a){a.r(o),a.d(o,{default:function(){return W}});var t=a(61758),i=a(58790),n={class:"q-card q-mt-sm"},l={class:"row q-mx-sm wrap"},s={class:"row q-mx-sm"},d={class:"row q-mx-sm"},c={class:"row justify-center flex-center fit"},u={class:"row"},r={class:"col q-ma-xs"},f={class:"col row"},h={class:"col row"},m={class:"q-ma-sm"},p={class:"row q-mx-sm"},A={class:"row q-mx-sm"},b={class:"row q-mx-sm"},E={class:"row q-mx-sm"},D={class:"row q-mx-sm"};function O(e,o){var a=(0,t.g2)("header-btn"),O=(0,t.g2)("sie-salones"),v=(0,t.g2)("q-select"),g=(0,t.g2)("q-search"),S=(0,t.g2)("q-datetime"),C=(0,t.g2)("q-btn"),T=(0,t.g2)("q-td"),V=(0,t.g2)("q-tooltip"),R=(0,t.g2)("q-icon"),F=(0,t.g2)("q-download-file"),M=(0,t.g2)("q-table"),I=(0,t.g2)("q-input"),k=(0,t.g2)("q-field"),y=(0,t.g2)("sie-modal"),q=(0,t.g2)("sie-upload"),L=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(L,{class:"column q-pa-md"},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{name:"Justificaciones de Asistencia",buttons:e.buttons},null,8,["buttons"]),(0,t.Lk)("div",n,[(0,t.Lk)("div",l,[(0,t.bF)(O,{class:"col-12 col-sm no-border",style:{padding:"0 !important"},modelValue:e.filtros.nemo,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.filtros.nemo=o}),onSeleccionar:o[1]||(o[1]=function(o){return e.tipBusqueda(1)}),label:e.$t("salon"),campos:["NEMO","NEMODES","INSTRUCOD","GRADOCOD","SECCIONCOD"],todos:!0},null,8,["modelValue","label"]),(0,t.bF)(v,{class:"q-if-outlined",options:e.estadoJustificacion,multiple:"",chips:"",modelValue:e.filtros.estados,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.filtros.estados=o}),"float-label":"Estado",color:"secondary",onInput:o[3]||(o[3]=function(o){return e.filtrar()})},null,8,["options","modelValue"])]),(0,t.Lk)("div",s,[(0,t.bF)(v,{class:"q-if-outlined col",options:e.niveles,modelValue:e.instrucod,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.instrucod=o}),"float-label":"Nivel",onInput:o[5]||(o[5]=function(o){return e.tipBusqueda(2)})},null,8,["options","modelValue"]),(0,t.bF)(v,{class:"q-if-outlined col",options:e.grados,modelValue:e.gradocod,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.gradocod=o}),"float-label":"Grado",onInput:o[7]||(o[7]=function(o){return e.tipBusqueda(2)})},null,8,["options","modelValue"]),(0,t.bF)(v,{class:"q-if-outlined col",options:e.secciones,modelValue:e.seccioncod,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.seccioncod=o}),"float-label":"Sección",onInput:e.filtrar},null,8,["options","modelValue","onInput"])]),(0,t.Lk)("div",d,[(0,t.bF)(g,{class:"q-if-outlined col-12 col-sm",modelValue:e.filtros.alumno,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.filtros.alumno=o}),"float-label":"Alumno"},null,8,["modelValue"]),(0,t.bF)(S,{class:"q-if-outlined",modelValue:e.filtros.fIni,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.filtros.fIni=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechainicio"),onInput:e.cargaInicial},null,8,["modelValue","float-label","onInput"]),(0,t.bF)(S,{class:"q-if-outlined",modelValue:e.filtros.fFin,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.filtros.fFin=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechafin"),onInput:e.cargaInicial},null,8,["modelValue","float-label","onInput"])])]),(0,t.bF)(M,{class:"q-mt-xs",style:{height:"75vh"},data:e.data,columns:e.columns,"row-key":"KEY",filter:e.filtros.alumno,selection:"multiple",selected:e.listSelect,"onUpdate:selected":o[12]||(o[12]=function(o){return e.listSelect=o})},{bottom:(0,t.k6)(function(o){return[(0,t.Lk)("div",c,[(0,t.bF)(C,{icon:"refresh",flat:"",dense:"",round:"",onClick:e.cargaInicial},null,8,["onClick"])])]}),"body-cell-FECHA":(0,t.k6)(function(o){return[(0,t.bF)(T,{props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,i.v_)(e.date(o.row.FECHA,"DD/MM/YYYY")),1)]}),_:2},1032,["props"])]}),"body-cell-FECREG":(0,t.k6)(function(o){return[(0,t.bF)(T,{props:o},{default:(0,t.k6)(function(){return[(0,t.eW)((0,i.v_)(e.date(o.row.FECREG,"DD/MM/YYYY HH:mm")),1)]}),_:2},1032,["props"])]}),"body-cell-ESTADO":(0,t.k6)(function(o){return[(0,t.bF)(T,{props:o,style:(0,i.Tr)({"background-color":e.estados[o.row.ESTADO].color})},{default:(0,t.k6)(function(){return[(0,t.eW)((0,i.v_)(e.estados[o.row.ESTADO].abr),1),(0,t.bF)(V,null,{default:(0,t.k6)(function(){return[(0,t.eW)((0,i.v_)(e.estados[o.row.ESTADO].titulo),1)]}),_:2},1024)]}),_:2},1032,["props","style"])]}),"body-cell-DETALLE":(0,t.k6)(function(e){return[(0,t.bF)(T,{props:e},{default:(0,t.k6)(function(){return[(0,t.bF)(R,{name:"info"}),(0,t.bF)(V,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",u,[o[33]||(o[33]=(0,t.Lk)("div",{class:"text-bold"},"Detalle:  ",-1)),(0,t.Lk)("span",null,(0,i.v_)(e.row.DETALLE),1)])]}),_:2},1024)]}),_:2},1032,["props"])]}),"body-cell-ARCHIVO":(0,t.k6)(function(o){return[(0,t.bF)(T,{props:o},{default:(0,t.k6)(function(){return[o.row.EXTENSION?((0,t.uX)(),(0,t.Wv)(F,{key:0,src:e.devuelveUrl(o.row),item:o.row,name:o.row.ARCHIVO,extension:o.row.EXTENSION,inline:!1},null,8,["src","item","name","extension"])):(0,t.Q3)("v-if",!0)]}),_:2},1032,["props"])]}),"body-cell-ESTADO_ASIS":(0,t.k6)(function(o){return[(0,t.bF)(T,{class:"items-center",props:o},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",{class:"items-center asistencia",style:(0,i.Tr)({"background-color":e.estadoAsistencia[o.row.ESTADOCOD].color})},[(0,t.Lk)("span",null,(0,i.v_)(e.estadoAsistencia[o.row.ESTADOCOD].etk),1)],4)]}),_:2},1032,["props"])]}),_:1},8,["data","columns","filter","selected"]),(0,t.bF)(y,{modelValue:e.modalRechazar,"onUpdate:modelValue":o[20]||(o[20]=function(o){return e.modalRechazar=o}),title:e.dataRechazo.TIPO+" Justificación",labelButtonOk:e.dataRechazo.TIPO,onSubmit:o[21]||(o[21]=function(o){return e.rechazarJustificacion(e.dataRechazo.MODO)}),cancel:e.$t("cancelar")},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.bF)(I,{class:"q-if-outlined",modelValue:e.dataRechazo.NOMCOMP,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.dataRechazo.NOMCOMP=o}),readonly:"","float-label":"Estudiante"},null,8,["modelValue"]),(0,t.Lk)("div",f,[(0,t.bF)(I,{class:"col q-if-outlined",modelValue:e.dataRechazo.NEMODES,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.dataRechazo.NEMODES=o}),readonly:"","float-label":"Salón"},null,8,["modelValue"]),(0,t.bF)(I,{class:"col q-if-outlined",modelValue:e.dataRechazo.FECHAMOD,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.dataRechazo.FECHAMOD=o}),readonly:"","float-label":"Fecha asistencia"},null,8,["modelValue"])]),(0,t.Lk)("div",h,[(0,t.bF)(I,{class:"col q-if-outlined",modelValue:e.dataRechazo.MOTIVOS,"onUpdate:modelValue":o[16]||(o[16]=function(o){return e.dataRechazo.MOTIVOS=o}),readonly:"","float-label":"Tipo de justificación"},null,8,["modelValue"]),(0,t.bF)(I,{class:"col q-if-outlined",modelValue:e.dataRechazo.FECREGMOD,"onUpdate:modelValue":o[17]||(o[17]=function(o){return e.dataRechazo.FECREGMOD=o}),readonly:"","float-label":"Fecha justificación"},null,8,["modelValue"])]),(0,t.bF)(I,{class:"q-if-outlined col",type:"textarea",rows:"3",readonly:"",modelValue:e.dataRechazo.DETALLE,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.dataRechazo.DETALLE=o}),"float-label":"Detalle de la justificación"},null,8,["modelValue"]),(0,t.bF)(k,{error:e.v$.dataRechazo.DETALLE_RECHAZO.$error,"error-label":e.$t("validaciones.requerido")},{default:(0,t.k6)(function(){return[(0,t.bF)(I,{class:"q-if-outlined col",type:"textarea",rows:"3",modelValue:e.v$.dataRechazo.DETALLE_RECHAZO.$model,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.v$.dataRechazo.DETALLE_RECHAZO.$model=o}),"float-label":"Motivo del "+e.dataRechazo.MOTIVO,maxlength:"250"},null,8,["modelValue","float-label"])]}),_:1},8,["error","error-label"])])]}),_:1},8,["modelValue","title","labelButtonOk","cancel"]),(0,t.bF)(y,{modelValue:e.modalAddJusitificacion,"onUpdate:modelValue":o[32]||(o[32]=function(o){return e.modalAddJusitificacion=o}),title:"Agregar Justificacion",onSubmit:e.saveModal},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",m,[(0,t.Lk)("div",p,[(0,t.bF)(v,{class:"q-if-outlined col",options:e.nivelesAdd,modelValue:e.infoAdd.instrucod,"onUpdate:modelValue":o[22]||(o[22]=function(o){return e.infoAdd.instrucod=o}),"float-label":"Nivel",onInput:e.obtenerAlunosModal},null,8,["options","modelValue","onInput"]),(0,t.bF)(v,{class:"q-if-outlined col",options:e.gradosAdd,modelValue:e.infoAdd.gradocod,"onUpdate:modelValue":o[23]||(o[23]=function(o){return e.infoAdd.gradocod=o}),"float-label":"Grado",onInput:e.obtenerAlunosModal},null,8,["options","modelValue","onInput"]),(0,t.bF)(v,{class:"q-if-outlined col",options:e.seccionesAdd,modelValue:e.infoAdd.seccioncod,"onUpdate:modelValue":o[24]||(o[24]=function(o){return e.infoAdd.seccioncod=o}),"float-label":"Sección",onInput:e.obtenerAlunosModal},null,8,["options","modelValue","onInput"])]),(0,t.Lk)("div",A,[(0,t.bF)(v,{class:"q-if-outlined col",filter:"",options:e.alumnos,modelValue:e.infoAdd.alucod,"onUpdate:modelValue":o[25]||(o[25]=function(o){return e.infoAdd.alucod=o}),"float-label":"Estudiante"},null,8,["options","modelValue"])]),(0,t.Lk)("div",b,[(0,t.bF)(S,{class:"q-if-outlined col",modelValue:e.infoAdd.fecIni,"onUpdate:modelValue":o[26]||(o[26]=function(o){return e.infoAdd.fecIni=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechainicio")},null,8,["modelValue","float-label"]),(0,t.bF)(S,{class:"q-if-outlined col",modelValue:e.infoAdd.fecFin,"onUpdate:modelValue":o[27]||(o[27]=function(o){return e.infoAdd.fecFin=o}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechafin")},null,8,["modelValue","float-label"])]),(0,t.Lk)("div",E,[(0,t.bF)(v,{class:"q-if-outlined col",options:e.infoEstados,modelValue:e.infoAdd.estado,"onUpdate:modelValue":o[28]||(o[28]=function(o){return e.infoAdd.estado=o}),"float-label":"Asistencia"},null,8,["options","modelValue"]),(0,t.bF)(v,{class:"q-if-outlined col",options:e.tipoJustificacion,modelValue:e.infoAdd.justificacion,"onUpdate:modelValue":o[29]||(o[29]=function(o){return e.infoAdd.justificacion=o}),"float-label":"Justificación"},null,8,["options","modelValue"])]),(0,t.Lk)("div",D,[(0,t.bF)(I,{class:"q-if-outlined col",type:"textarea",modelValue:e.infoAdd.detalleJustificacion,"onUpdate:modelValue":o[30]||(o[30]=function(o){return e.infoAdd.detalleJustificacion=o}),"float-label":"Detalle",rows:"3"},null,8,["modelValue"])]),(0,t.bF)(q,{class:"q-mx-sm",onUpload:e.addFile,icon:"file",modelValue:e.infoAdd.dataArchivo,"onUpdate:modelValue":o[31]||(o[31]=function(o){return e.infoAdd.dataArchivo=o}),onlyButton:!0,preview:!0,title:"Subir Archivos"},null,8,["onUpload","modelValue"])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var v=a(8445),g=a.n(v),S=(a(10239),a(50310),a(90095),a(83190),a(27153),a(13715),a(83972)),C=a(6123),T=a(30545),V=a(62006),R=a(88275),F=a(13813),M=a(80660),I=a(57668),k=a(80340),y=a(34858),q=a(51082),L=a(69027),U=a(2819),w=a(30640),z=a(93616),H=a(24974),Y=a(65818),G=a(78131),j=a(18105),N=a(982),$=a(33001),J=a(82640),_=a(59089),Q=a(33950),x={setup:function(){var e=(0,S.fG)();return{v$:e}},components:{sieSalones:R.Ay,QSelect:C.Si,sieUsuario:H.A,sieModal:w.A,sieVacio:k.A,QToggle:C.c5,QCheckbox:C.vZ,QBtnToggle:C.QL,sieSelect:z.A,QRadio:C.$,QClock:Y.A,QTable:T.A,QTh:C.EJ,QTr:C.qh,QTd:C.Ef,QTableColumns:C.$s,virtualList:y.Ay,QPopupEdit:C.GT,QChip:C.wQ,sieDate:q.A,QFabAction:C.B$,QPageSticky:C._U,QFab:C.l6,QDatetime:C.T5,QDownloadFile:V.A,sieUpload:_.A,QPage:C.Tu,QSearch:C.Ks,QBtn:C.Il,QTooltip:C.nC,QIcon:C.bP,QInput:C.ie,QField:C.Om},data:function(){return{sie:(0,I["default"])(),nemo:null,modalRechazar:!1,data:[],filtros:{fIni:new Date,fFin:new Date,nemo:"T",estados:["P"],alumno:null},baseGrados:{},instrucod:"T",gradocod:"T",seccioncod:"T",preData:[],estadoAsistencia:{},listSelect:[],estados:{P:{titulo:"Pendiente",abr:"Pen",color:"#ffa50021"},A:{titulo:"Aceptado",abr:"Acep",color:"#0080002b"},R:{titulo:"Rechazado",abr:"Rech",color:"#ff000030"}},modoBusqueda:1,alumnos:[],columns:[{name:"NOMCOMP",label:"Estudiante",field:"NOMCOMP",align:"left",sortable:!0},{name:"NEMODES",label:"Salón",field:"NEMODES",align:"left",sortable:!0},{name:"ESTADO_ASIS",label:"Asistencia",field:"ESTADO_ASIS",align:"center",sortable:!0},{name:"FECHAMOD",label:"F. Asistencia",field:"FECHAMOD",align:"left",sortable:!0},{name:"FECREGMOD",label:"F. Justificacion",field:"FECREGMOD",align:"left",sortable:!0},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center",sortable:!0},{name:"MOTIVOS",label:"Justificación",field:"MOTIVOS",align:"center",sortable:!0},{name:"ARCHIVO",label:"Archivo",field:"ARCHIVO",align:"left",sortable:!0},{name:"DETALLE",label:"Detalle",field:"DETALLE",align:"left",sortable:!0}],estadoJustificacion:[{label:"Pendiente",value:"P"},{label:"Aceptado",value:"A"},{label:"Rechazado",value:"R"}],dataRechazo:{},tipoJustificacion:[],modalAddJusitificacion:!1,infoEstados:[],infoAdd:{instrucod:null,gradocod:null,seccioncod:null,alucod:null,fecIni:new Date,fecFin:new Date,estado:null,justificacion:null,detalleJustificacion:null,dataArchivo:{}}}},methods:{date:j.Ay,handleResize:function(){this.alto=window.innerHeight-105},cargaInicial:function(){var e=this;M.$http.get("api/HyoWjustifica/getJustificacionesFecha",{params:this.filtros}).then(function(o){var a=o.json;e.listSelect=[],a.forEach(function(e){e.FECHAMOD=(0,j.Ay)(e.FECHA,"DD/MM/YYYY"),e.FECREGMOD=(0,j.Ay)(e.FECREG,"DD/MM/YYYY HH:mm")}),e.preData=a,e.filtrar()})},tipBusqueda:function(e){this.modoBusqueda=e,this.filtrar()},addFile:function(e){var o=this;this.cerrarModal=!0,this.infoAdd.dataArchivo={},(0,Q.Upload)({url:"api/HyoArchivo/tmp/upload",file:e[0]}).then(function(e){o.infoAdd.dataArchivo.file=e}).catch(function(){})},saveModal:function(){var e=this;this.infoAdd.alucod?this.infoAdd.estado?this.infoAdd.justificacion?this.infoAdd.detalleJustificacion?this.infoAdd.dataArchivo.file?M.$http.post("api/HyoWjustifica/saveInfoMultiple",this.infoAdd).then(function(o){var a=o.json;(0,N["default"])(e.$t("mensajes."+a.msg),a.type),a.type||(e.modalAddJusitificacion=!1,e.cargaInicial())}):(0,N["default"])("Debe subir un archivo","error"):(0,N["default"])("Seleccione un Detalle para la justificación","error"):(0,N["default"])("Seleccione un tipo de justificación","error"):(0,N["default"])("Seleccione un estado de asistencia","error"):(0,N["default"])("Seleccione un Estudiante de la lista","error")},filtrar:function(){var e=this,o=g()(this.preData);switch(this.modoBusqueda){case 1:"T"!==this.filtros.nemo&&(o=(0,$.filterArray)(this.filtros.nemo,{field:"NEMO",list:o||[]}));break;case 2:if("T"!==this.instrucod){var a=[];o.forEach(function(o){var t=0;o.INSTRUCOD!==e.instrucod?t=1:"T"!==e.gradocod?o.GRADOCOD!==e.gradocod&&(t=1):"T"!==e.seccioncod&&o.SECCIONCOD!==e.seccioncod&&(t=1),0===t&&a.push(o)}),o=a}break}3!==this.filtros.estados.length&&(o=(0,$.filterArray)(this.filtros.estados,{field:"ESTADO",list:o||[]})),this.data=g()(o)},imprimir:function(e){var o=this.sie.api+"/HyoWjustifica/descargar/"+e.ALUCOD+"/"+e.FECHA+"?access_token="+this.sie.token;(0,G["default"])(o,e.ARCHIVO)},imprimirReporte:function(){var e="intranet/reporte-node/reporte",o={repcod:"listadoJustificacionesNew",fecini:(0,j.Ay)(this.filtros.fIni,"DD/MM/YYYY"),fecfin:(0,j.Ay)(this.filtros.fFin,"DD/MM/YYYY"),chkestjus:this.filtros.estados,modoBusqueda:this.modoBusqueda};1===this.modoBusqueda?o.nemo=this.filtros.nemo:"T"!==this.instrucod&&(o.instrucod=this.instrucod,"T"!==this.gradocod&&(o.gradocod=this.gradocod)),(0,L.dialogConfirm)({message:"Seleccione el formato de impresion",cancel:"PDF",ok:"Excel"}).then(function(a){a&&(o.formato="xlsx"),(0,U["default"])(o,e,"Reporte ")})},procesarData:function(){var e=this;return new Promise(function(o,a){var t=[];e.listSelect.forEach(function(e){var o=e.NEMO,a=e.ALUCOD,i=e.FECHA,n=e.NOMCOMP,l=e.ESTADOCOD,s=e.ESTADO,d=e.ESTJUSCOD,c=e.ID_CONTROL,u=e.DETALLE_RECHAZO,r=e.FAMDES,f=e.USUCODFAM,h=e.ESTADODES;"P"===s&&t.push({NEMO:o,ALUCOD:a,FECHA:i,NOMCOMP:n,ESTADOCOD:l,ESTADO:s,ESTJUSCOD:d,ID_CONTROL:c,DETALLE_RECHAZO:u,FAMDES:r,USUCODFAM:f,ESTADODES:h})}),o(t)})},aceptarJus:function(){var e=this,o="A";this.procesarData().then(function(a){(0,L.dialogConfirm)({title:e.$t("confirmacion"),message:e.$t("mensajes.m0007")}).then(function(t){t&&M.$http.post("api/HyoWjustifica/changeState",{lista:a,estado:o}).then(function(o){var a=o.json;(0,N["default"])(e.$t("mensajes."+a.msg),a.type),a.type&&"success"!==a.type||e.cargaInicial()})})})},aceptar:function(){1===this.listSelect.length?this.openModalRechazar(!0):this.listSelect.length>1&&this.aceptarJus()},openModalRechazar:function(e){e=!0===e;var o=this.listSelect,a=e?"aceptar":"rechazar";o.length>1?(0,N["default"])("Solo puede ".concat(a," un registro a la vez"),"error"):"P"===o[0].ESTADO&&(this.dataRechazo={},this.dataRechazo=o[0],this.dataRechazo.DETALLE_RECHAZO=null,this.dataRechazo.TIPO=e?"Aceptar":"Rechazar",this.dataRechazo.MOTIVO=e?"Aceptación":"Rechazo",this.dataRechazo.MODO=e,this.modalRechazar=!0)},eliminarJus:function(){var e=this;this.procesarData().then(function(o){o.length>0?(0,L.dialogConfirm)({title:e.$t("mensajes.m0006.confirmacion"),message:e.$t("mensajes.m0010")}).then(function(a){a&&M.$http.post("api/HyoWjustifica/deleteJustificacion",{lista:o}).then(function(o){var a=o.json;(0,N["default"])(e.$t("mensajes.m0006."+a.msg),a.type),a.type&&"success"!==a.type||e.cargaInicial()})}):(0,L.dialogConfirm)({title:"¡Atención!",message:"Solo se pueden eliminar justificaciones pendientes",cancel:!1})})},rechazarJustificacion:function(e){var o=this;if(this.v$.dataRechazo.$touch(),!this.v$.$invalid){var a=e?"A":"R";M.$http.post("api/HyoWjustifica/changeState",{lista:[this.dataRechazo],estado:a}).then(function(e){var a=e.json;(0,N["default"])(o.$t("mensajes."+a.msg),a.type),a.type&&"success"!==a.type||(o.cargaInicial(),o.modalRechazar=!1)})}},addJustificacion:function(){this.infoAdd={instrucod:null,gradocod:null,seccioncod:null,alucod:null,fecIni:new Date,fecFin:new Date,estado:null,justificacion:null,detalleJustificacion:null,dataArchivo:{}},this.modalAddJusitificacion=!0},devuelveUrl:function(e){var o=e.ID_CONTROL,a=this.sie.api+"/HyoWjustifica/archivo/"+o+"?access_token="+this.sie.token;return a},obtenerAlunosModal:function(){var e=this;this.infoAdd.alucod=null;var o=this.infoAdd;this.infoAdd.instrucod&&this.infoAdd.gradocod&&this.infoAdd.seccioncod?M.$http.get("api/HyoSalonAl/getAlumnosNGS",{params:o}).then(function(o){var a=o.json;e.alumnos=(0,F["default"])(a,function(e){return{label:e.NOMCOMP,value:e.ALUCOD}})}):(this.alumnos=[],this.infoAdd.alucod=null)}},computed:{niveles:function(){var e=[{label:"Todos",value:"T"}];return this.baseGrados.niveles&&this.baseGrados.niveles.length>0&&this.baseGrados.niveles.forEach(function(o){e.push({value:o.INSTRUCOD,label:o.INSTRUDES})}),e},grados:function(){var e=[{label:"Todos",value:"T"}];return"T"!==this.instrucod&&this.baseGrados.grados&&this.baseGrados.grados[this.instrucod].length>0&&this.baseGrados.grados[this.instrucod].forEach(function(o){e.push({value:o.GRADOCOD,label:o.GRADODES})}),e},secciones:function(){var e=[{label:"Todos",value:"T"}];return"T"===this.gradocod&&(this.seccioncod="T"),"T"!==this.instrucod&&"T"!==this.gradocod&&this.baseGrados.secciones&&this.baseGrados.secciones[this.instrucod+this.gradocod].length>0&&this.baseGrados.secciones[this.instrucod+this.gradocod].forEach(function(o){e.push({value:o.SECCIONCOD,label:o.SECCIONCOD})}),e},nivelesAdd:function(){var e=[];return this.baseGrados.niveles&&this.baseGrados.niveles.length>0&&this.baseGrados.niveles.forEach(function(o){e.push({value:o.INSTRUCOD,label:o.INSTRUDES})}),e},gradosAdd:function(){var e=[];return this.infoAdd.instrucod&&this.baseGrados.grados&&this.baseGrados.grados[this.infoAdd.instrucod].length>0&&this.baseGrados.grados[this.infoAdd.instrucod].forEach(function(o){e.push({value:o.GRADOCOD,label:o.GRADODES})}),e},seccionesAdd:function(){var e=[];return this.infoAdd.instrucod&&this.infoAdd.gradocod&&this.baseGrados.secciones&&this.baseGrados.secciones[this.infoAdd.instrucod+this.infoAdd.gradocod].length>0&&this.baseGrados.secciones[this.infoAdd.instrucod+this.infoAdd.gradocod].forEach(function(o){e.push({value:o.SECCIONCOD,label:o.SECCIONCOD})}),e},maxLista:function(){var e=this.alto-200;return e/20},buttons:function(){var e=[{label:"Imprimir",icon:"print",click:this.imprimirReporte}];return 3===this.sie.ruta.nivel&&e.unshift({label:"Agregar",icon:"add",click:this.addJustificacion}),this.listSelect.length>0&&3===this.sie.ruta.nivel&&(e.unshift({label:"Aceptar",icon:"done_all",click:this.aceptar}),1===this.listSelect.length&&e.unshift({label:"Rechazar",icon:"call_missed",click:this.openModalRechazar}),e.unshift({label:"Eliminar",icon:"delete",click:this.eliminarJus})),e}},unmounted:function(){window.removeEventListener("resize",this.handleResize)},validations:function(){var e={dataRechazo:{DETALLE_RECHAZO:{required:J.mw}}};return e},watch:{"infoAdd.instrucod":function(e){this.infoAdd.gradocod=null,this.infoAdd.seccioncod=null,this.alumnos=[],this.infoAdd.alucod=null},"this.infoAdd.gradocod":function(e){this.infoAdd.seccioncod=null,this.alumnos=[],this.infoAdd.alucod=null}},created:function(){var e=this;window.addEventListener("resize",this.handleResize),this.handleResize(),M.$http.get("api/HyoHorasisEstado/listarHorasisEstadoConducta",{params:{soloInjustificada:!0}}).then(function(o){var a=o.json;e.infoEstados=(0,F["default"])(a,function(e){return{label:e.ESTADODES,value:e.ESTADOCOD}})}),M.$http.get("api/HyoInstrus/obtGradosAsignados").then(function(o){var a=o.json;e.baseGrados=a}),M.$http.get("api/HyoTablaSe/obtArrayDatos",{params:{princods:["tJustificacion"],objOrden:{campos:"SECUDES",orden:"asc"}}}).then(function(o){var a=o.json;e.tipoJustificacion=(0,F["default"])(a.tJustificacion,function(e){var o=e.SECUCOD,a=e.SECUDES;return{label:a,value:o}})}),M.$http.get("api/HyoHorasisEstado/listarHorasisEstado",{params:{momento:1}}).then(function(o){var a=o.json;a.forEach(function(o){e.estadoAsistencia[o.ESTADOCOD]={},e.estadoAsistencia[o.ESTADOCOD].color=o.COLORHEXF,e.estadoAsistencia[o.ESTADOCOD].etk=o.ESTADOETI,e.estadoAsistencia[o.ESTADOCOD].descripcion=o.ESTADODES}),e.cargaInicial()})}},P=a(12807);const B=(0,P.A)(x,[["render",O]]);var W=B}}]);