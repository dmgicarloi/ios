"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[12077],{12077:function(e,n,r){r.r(n),r.d(n,{default:function(){return b}});var o=r(61758),a={class:"sie-img-to-pdf float-right q-px-md"};function t(e,n){var r=(0,o.g2)("sie-estudiantes"),t=(0,o.g2)("sie-vacio"),i=(0,o.g2)("q-btn"),l=(0,o.g2)("q-card"),u=(0,o.g2)("q-iframe"),s=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(s,{class:"ver-horario column"},{default:(0,o.k6)(function(){return[!0!==e.sie.esEstudiante?((0,o.uX)(),(0,o.Wv)(r,{key:0,modelValue:e.alucod,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.alucod=n}),onInput:e.onChange},null,8,["modelValue","onInput"])):(0,o.Q3)("v-if",!0),e.error||""===e.url?((0,o.uX)(),(0,o.Wv)(t,{key:1,class:"col",subtitle:"intranet.horario.msjImagen",icon:"wallpaper"})):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.bF)(l,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.bF)(i,{color:"primary",icon:"print",onClick:e.onPrint,flat:""},null,8,["onClick"])])]}),_:1}),(0,o.bF)(l,{class:"bg-grey-12 no-shadow q-pa-md text-center col column"},{default:(0,o.k6)(function(){return[(0,o.bF)(u,{class:"full-width col",src:e.url,onLoad:e.onLoad,onError:e.onError},null,8,["src","onLoad","onError"])]}),_:1})],64))]}),_:1})}var i=r(76080),l=r.n(i),u=r(45254),s=r.n(u),c=(r(30683),r(56285),r(6123)),d=r(80660),g=r(92173),m=r(80340),f=r(56089),h=r(57668),p=r(78131),v=r(47206),k={components:{QSelect:c.Si,QPageSticky:c._U,QField:c.Om,QInnerLoading:c.SQ,QSpinnerOval:c.VA,QCard:c.C$,QCardMedia:c.wy,sieEstudiantes:g.Ay,sieVacio:m.A,QIframe:f.A,QPage:c.Tu,QBtn:c.Il},data:function(){var e=(0,h["default"])();return{loading:!1,error:!1,alucod:"",url:"",sie:e,objImage:{}}},methods:{generateUrl:function(e){var n=this;return s()(l()().m(function e(){var r,o,a,t,i;return l()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.$http.get("api/HyowImgHorario/getImagen",{params:{alucod:n.alucod}});case 1:return n.url=(0,v.linkPreview)("".concat(n.sie.api,"/HyowImgHorario/getImagen?alucod=").concat(n.alucod),n.sie),e.n=2,n.$http.get("api/HyowImgHorario/getInfoAlumno",{params:{alucod:n.alucod}});case 2:return r=e.v,e.n=3,n.$http.get("api/HyowImgHorario/horario/info/".concat(r));case 3:o=e.v,a=o.file,t=o.name,i={origin:"".concat((0,d.getBase)(),"/api/HyowImgHorario/horario/").concat(a),type:-1===t.indexOf(".pdf")?"image":"pdf",name:t},n.url=(0,v.linkPreview)(i.origin,n.sie),n.objImage=i,e.n=5;break;case 4:e.p=4,e.v,n.url="",n.error=!0;case 5:return e.a(2)}},e,null,[[0,4]])}))()},onChange:function(){this.error=!1,this.loading=!0,this.generateUrl()},onError:function(){this.error=!0},onLoad:function(){this.error=!1,this.loading=!1},onPrint:function(){if(this.url){var e=(0,v.linkDownload)(this.objImage.origin,this.sie);(0,p["default"])(e,this.objImage.name)}else this.$q.dialog({title:"Advertencia",message:"No existe el horario"})}},mounted:function(){this.sie.esEstudiante&&(this.alucod=this.sie.alucod,this.generateUrl())}},I=r(12807);const w=(0,I.A)(k,[["render",t]]);var b=w}}]);