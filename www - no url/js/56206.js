"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[56206],{56206:function(o,e,t){t.r(e),t.d(e,{default:function(){return Oo}});var a=t(8445),n=t.n(a),l=t(61758),r=t(58790),i={class:"row q-px-sm q-pt-sm"},s={class:"col-xs-12 col-md-2"},c={class:"col-xs-12 col-md-4"},u={class:"col-xs-12 col-md-6"},d={class:"row q-px-sm col"},f={class:"col-xs-12 listaDetalle"},p={class:"col-10"},m={class:"col-2 text-right"},g={key:0},h={key:1},v={key:1},b={key:1,class:"column"},D={class:"row border-bottom-xs q-pa-lg-md text-bold"},S={class:"col"},O={class:"row q-px-md"},C={class:"col-xs-12 col-md-7"},T={class:"col-xs-12 col-md-5"},P={key:0,class:"row"},E={class:"col"},N={class:"row"},R={class:"col"},k={class:"row"},A={class:"col"},_={class:"row"},F={class:"col"},I={class:"col"},B={class:"q-pt-sm"},U={class:"row q-px-sm q-pt-sm"},y={class:"col-xs-12 col-md-6"},M={class:"col-xs-12 col-md-6"},L={class:"col-xs-12 col-md-6"},x={class:"col-xs-12 col-md-6"},V={class:"row q-px-sm col"},w={class:"col-xs-12 listaDetalle"},$={key:1,class:"column"},q={class:"row q-pa-sm"},G={class:"col-xs-12"};function Q(o,e){var t=this,a=(0,l.g2)("q-toolbar-title"),Q=(0,l.g2)("q-toolbar"),j=(0,l.g2)("q-select"),H=(0,l.g2)("selectMultiple"),X=(0,l.g2)("q-spinner-oval"),W=(0,l.g2)("q-inner-loading"),J=(0,l.g2)("q-search"),z=(0,l.g2)("q-tooltip"),Z=(0,l.g2)("q-btn"),K=(0,l.g2)("q-icon"),Y=(0,l.g2)("q-td"),oo=(0,l.g2)("q-table"),eo=(0,l.g2)("sie-vacio"),to=(0,l.g2)("q-fab-action"),ao=(0,l.g2)("q-fab"),no=(0,l.g2)("q-page-sticky"),lo=(0,l.g2)("q-toggle"),ro=(0,l.g2)("q-tab"),io=(0,l.g2)("sie-select"),so=(0,l.g2)("sie-table"),co=(0,l.g2)("q-tab-pane"),uo=(0,l.g2)("q-tabs"),fo=(0,l.g2)("sie-modal"),po=(0,l.g2)("q-option-group"),mo=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(mo,{class:"bg-white"},{default:(0,l.k6)(function(){return[(0,l.bF)(Q,{class:"shadow-2 z-fab",inverted:""},{default:(0,l.k6)(function(){return[(0,l.bF)(a,{class:"q-pa-none"},{default:(0,l.k6)(function(){return n()(e[22]||(e[22]=[(0,l.eW)("Asignar Banco de Datos",-1)]))}),_:1})]}),_:1}),(0,l.Lk)("div",i,[(0,l.Lk)("div",s,[(0,l.bF)(j,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:o.vmFiltro.instrucod,options:o.dataSelect.nivel,"float-label":o.$t("ngs.nivel"),onChange:o.seleccionaInstru,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,l.Lk)("div",c,[(0,l.bF)(j,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:o.vmFiltro.gradocod,options:o.grados,"float-label":o.$t("ngs.grado"),onChange:o.seleccionaGrado,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,l.Lk)("div",u,[(0,l.bF)(H,{options:o.dataSalones,modelValue:o.vmFiltro.salones,labelSelect:o.$t("ambito"),onChange:o.seleccionaSalones},null,8,["options","modelValue","labelSelect","onChange"])])]),(0,l.Lk)("div",d,[(0,l.Lk)("div",f,[(0,l.bF)(W,{visible:o.loadingDetalle},{default:(0,l.k6)(function(){return[(0,l.bF)(X,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),o.dataDetalle.length>0?((0,l.uX)(),(0,l.Wv)(oo,{key:0,style:{height:"57vh"},selection:o.configTblSalon.tipoSeleccion,"row-key":"NEMO",color:"secondary",data:o.dataDetalle,columns:o.configTblSalon.columnas,selected:o.configTblSalon.registrosSeleccionados,"onUpdate:selected":e[1]||(e[1]=function(e){return o.configTblSalon.registrosSeleccionados=e}),pagination:o.configTblSalon.paginacion,"onUpdate:pagination":e[2]||(e[2]=function(e){return o.configTblSalon.paginacion=e}),filter:o.filtroTabla},{top:(0,l.k6)(function(t){return[(0,l.Lk)("div",p,[(0,l.bF)(J,{"hide-underline":"",color:"secondary",modelValue:o.filtroTabla,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.filtroTabla=e})},null,8,["modelValue"])]),(0,l.Lk)("div",m,[o.dataDetalle.length&&o.sie.ruta.nivel>=2?((0,l.uX)(),(0,l.Wv)(Z,{key:0,flat:"",icon:"edit",class:(0,r.C4)(o.claseBtn),onClick:o.modalEditarTutor},{default:(0,l.k6)(function(){return[(0,l.bF)(z,{anchor:"center left",self:"center right"},{default:(0,l.k6)(function(){return n()(e[23]||(e[23]=[(0,l.eW)("Editar",-1)]))}),_:1})]}),_:1},8,["class","onClick"])):(0,l.Q3)("v-if",!0)])]}),"body-cell-TUTOR":(0,l.k6)(function(t){return[(0,l.bF)(Y,{class:"cursor-pointer",width:"40%",props:t,onClick:function(e){return o.modalEditarTutor(t.row)}},{default:(0,l.k6)(function(){return[1===t.row.ORIGEN_REPLICA?((0,l.uX)(),(0,l.CE)("span",g,[(0,l.bF)(K,{color:"green",name:"pesos_criterios"},{default:(0,l.k6)(function(){return[(0,l.bF)(z,{anchor:"center left",self:"center right"},{default:(0,l.k6)(function(){return n()(e[24]||(e[24]=[(0,l.eW)("Origen de replica",-1)]))}),_:1})]}),_:1})])):((0,l.uX)(),(0,l.CE)("span",h,[(0,l.bF)(K,{color:"white",name:"close"})])),(0,l.Lk)("span",null,(0,r.v_)(t.row.TUTOR),1)]}),_:2},1032,["props","onClick"])]}),"body-cell-ANUAL_REPLICA":(0,l.k6)(function(o){return[(0,l.bF)(Y,{props:o},{default:(0,l.k6)(function(){return[1==o.value?((0,l.uX)(),(0,l.Wv)(K,{key:0,name:"calendar_check_o"})):((0,l.uX)(),(0,l.CE)("p",v,"-"))]}),_:2},1032,["props"])]}),_:1},8,["selection","data","columns","selected","pagination","filter"])):((0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(eo,{icon:"settings_applications"})]))])]),(0,l.bF)(no,{position:"bottom-right",offset:[20,20]},{default:(0,l.k6)(function(){return[(0,l.bF)(ao,{icon:"more_vert",direction:"up",color:"secondary"},{default:(0,l.k6)(function(){return[o.sie.ruta.nivel>=2?((0,l.uX)(),(0,l.Wv)(to,{key:0,color:"secondary",icon:"plus",onClick:o.boxAsignarBancoDatos},{default:(0,l.k6)(function(){return[(0,l.bF)(z,{anchor:"center left",self:"center right",offset:[5,0]},{default:(0,l.k6)(function(){return n()(e[25]||(e[25]=[(0,l.eW)("Asignar Banco Datos",-1)]))}),_:1})]}),_:1},8,["onClick"])):(0,l.Q3)("v-if",!0),(0,l.bF)(to,{color:"secondary",icon:"print",onClick:o.openReportes},{default:(0,l.k6)(function(){return[(0,l.bF)(z,{anchor:"center left",self:"center right"},{default:(0,l.k6)(function(){return n()(e[26]||(e[26]=[(0,l.eW)("Reportes",-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:1})]}),_:1}),(0,l.bF)(fo,{class:"modal-editar",modelValue:o.openModal.editar,"onUpdate:modelValue":e[11]||(e[11]=function(e){return o.openModal.editar=e}),title:"Editar",header:!0,footer:o.sie.ruta.nivel>=2,ok:o.$t("botones.guardar"),loading:o.loadingModal,onSubmit:o.editarDocenteConducta},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",D,[(0,l.Lk)("div",S,[(0,l.bF)(K,{class:"text-primary q-pr-lg-xs",name:"clases",size:"26px"}),(0,l.Lk)("span",null,(0,r.v_)(o.vmEditar.descripcion),1)])]),(0,l.Lk)("div",O,[(0,l.Lk)("div",C,[(0,l.bF)(lo,{class:"q-if-outlined",modelValue:o.vmEditar.replica,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.vmEditar.replica=e}),"true-value":1,"false-value":0,label:o.$t("clase.replicaAnual"),color:"secondary"},null,8,["modelValue","label"])]),(0,l.Lk)("div",T,[(0,l.bF)(lo,{class:"q-if-outlined",modelValue:o.vmEditar.origenReplica,"onUpdate:modelValue":e[4]||(e[4]=function(e){return o.vmEditar.origenReplica=e}),"true-value":1,"false-value":0,label:"Origen replica",color:"secondary"},null,8,["modelValue"])])]),(0,l.bF)(uo,{inverted:"",ref:"tabs",animated:""},{title:(0,l.k6)(function(){return[(0,l.bF)(ro,{default:"",name:"tab-1",label:"Tutores","no-caps":""}),(0,l.bF)(ro,{name:"tab-2",label:"Tutores/usuarios por criterio"})]}),default:(0,l.k6)(function(){return[(0,l.bF)(co,{name:"tab-1"},{default:(0,l.k6)(function(){return[o.vmEditar.tutoresxPeriodo?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("div",P,[(0,l.Lk)("div",E,[(0,l.bF)(io,{type:"outlined",modelValue:o.vmEditar.profe,"onUpdate:modelValue":e[5]||(e[5]=function(e){return o.vmEditar.profe=e}),options:o.dataModal.profesores,label:"NOMCOMP",val:"ID_PERSONA",placeholder:"profesor",disable:o.vmEditar.tutoresxPeriodo},null,8,["modelValue","options","disable"])])])),(0,l.Lk)("div",N,[(0,l.Lk)("div",R,[(0,l.bF)(lo,{class:"q-if-outlined",modelValue:o.vmEditar.tutoresxPeriodo,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.vmEditar.tutoresxPeriodo=e}),label:"Tutores/Usuarios por periodo",color:"secondary"},null,8,["modelValue"])])]),o.vmEditar.tutoresxPeriodo?((0,l.uX)(),(0,l.Wv)(so,{key:1,class:"sticky",context:t,ref:"refGrillaTutPer",css:"height: calc(58vh - 200px)",columns:o.tableProfesores.columns,data:o.tableProfesores.data,config:o.tableProfesores.config},null,8,["columns","data","config"])):(0,l.Q3)("v-if",!0)]}),_:1}),(0,l.bF)(co,{name:"tab-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",k,[(0,l.Lk)("div",A,[(0,l.bF)(io,{type:"outlined",modelValue:o.critProfe.profe,"onUpdate:modelValue":e[7]||(e[7]=function(e){return o.critProfe.profe=e}),options:o.critProfe.profesores,label:"NOMCOMP",placeholder:"profesor"},null,8,["modelValue","options"])])]),(0,l.Lk)("div",_,[(0,l.Lk)("div",F,[(0,l.bF)(io,{type:"outlined",modelValue:o.critProfe.programa,"onUpdate:modelValue":e[8]||(e[8]=function(e){return o.critProfe.programa=e}),options:o.critProfe.programas,label:"DESCRIPCION",placeholder:"programa",onSelected:o.cambiarPrograma},null,8,["modelValue","options","onSelected"])]),(0,l.Lk)("div",I,[(0,l.bF)(io,{type:"outlined",modelValue:o.critProfe.indice,"onUpdate:modelValue":e[9]||(e[9]=function(e){return o.critProfe.indice=e}),options:o.critProfe.indices,label:"label",val:"value",placeholder:"indice"},null,8,["modelValue","options"])]),(0,l.Lk)("div",B,[(0,l.bF)(Z,{icon:"plus",round:"",dense:"",color:"primary",onClick:o.addCriterioTutorUsuario},null,8,["onClick"])])]),(0,l.bF)(oo,{"table-style":o.isLess?"height: 63vh":"height:30vh",pagination:o.critProfe.pag,"onUpdate:pagination":e[10]||(e[10]=function(e){return o.critProfe.pag=e}),data:o.critProfe.data,columns:o.critProfe.columns,"row-key":"__index","hide-bottom":""},{"body-cell-ELIMINAR":(0,l.k6)(function(e){return[(0,l.bF)(Y,{props:e},{default:(0,l.k6)(function(){return[(0,l.bF)(K,{class:"cursor-pointer",name:"delete",size:"17px",onClick:function(t){return o.removeCriterioTutorUsuario(e.row.__index)}},null,8,["onClick"])]}),_:2},1032,["props"])]}),_:1},8,["table-style","pagination","data","columns"])]}),_:1})]}),_:1},512)]}),_:1},8,["modelValue","footer","ok","loading","onSubmit"]),(0,l.bF)(fo,{class:"modal-plantilla",modelValue:o.openModal.verbancodatos,"onUpdate:modelValue":e[15]||(e[15]=function(e){return o.openModal.verbancodatos=e}),title:"Asignación de Banco de Datos a Salones",header:!0,footer:o.sie.ruta.nivel>=2,ok:o.$t("botones.guardar"),loading:o.loadingModal,onSubmit:o.asignarBancoDatos},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",U,[(0,l.Lk)("div",y,[(0,l.bF)(j,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltroBancoDatos.instrucod,options:o.dataSelectBancoDatos.nivel,"float-label":o.$t("ngs.nivel"),onChange:o.seleccionaInstruBancoDatos,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,l.Lk)("div",M,[(0,l.bF)(j,{class:"q-if-outlined",multiple:"",color:"secondary",modelValue:o.vmFiltroBancoDatos.gradocod,options:o.gradosBancoDatos,"float-label":o.$t("ngs.grado"),onChange:o.seleccionaGradoBancoDatos,filter:""},null,8,["modelValue","options","float-label","onChange"])]),(0,l.Lk)("div",L,[(0,l.bF)(H,{options:o.dataSalonesBancoDatos,modelValue:o.vmFiltroBancoDatos.salones,labelSelect:o.$t("ambito"),onChange:o.seleccionaSalonesBancoDatos},null,8,["options","modelValue","labelSelect","onChange"])]),(0,l.Lk)("div",x,[(0,l.bF)(io,{type:"outlined",modelValue:o.vmFiltroBancoDatos.plantilla,"onUpdate:modelValue":e[12]||(e[12]=function(e){return o.vmFiltroBancoDatos.plantilla=e}),options:o.datosBancoDatos,onSelected:o.seleccionaValorBancoDatos,label:"DESCRIPCION",val:"ID_CONTENIDO",placeholder:"Seleccione Banco de Datos"},null,8,["modelValue","options","onSelected"])])]),(0,l.Lk)("div",V,[(0,l.Lk)("div",w,[(0,l.bF)(W,{visible:o.loadingDetalle},{default:(0,l.k6)(function(){return[(0,l.bF)(X,{size:"50px",color:"primary"})]}),_:1},8,["visible"]),o.dataDetalleBancoDatos.length>0?((0,l.uX)(),(0,l.Wv)(oo,{key:0,style:{height:"57vh"},selection:o.configTblSalonBancoDatos.tipoSeleccion,"row-key":"NEMO",color:"secondary",data:o.dataDetalleBancoDatos,columns:o.configTblSalonBancoDatos.columnas,selected:o.configTblSalonBancoDatos.registrosSeleccionados,"onUpdate:selected":e[13]||(e[13]=function(e){return o.configTblSalonBancoDatos.registrosSeleccionados=e}),pagination:o.configTblSalonBancoDatos.paginacion,"onUpdate:pagination":e[14]||(e[14]=function(e){return o.configTblSalonBancoDatos.paginacion=e}),filter:o.filtroTabla},null,8,["selection","data","columns","selected","pagination","filter"])):((0,l.uX)(),(0,l.CE)("div",$,[(0,l.bF)(eo,{icon:"settings_applications"})]))])])]}),_:1},8,["modelValue","footer","ok","loading","onSubmit"]),(0,l.bF)(fo,{class:"modal-registro-grupos-reportes",modelValue:o.reporte.modal,"onUpdate:modelValue":e[21]||(e[21]=function(e){return o.reporte.modal=e}),title:"Reportes",header:!0,footer:o.sie.ruta.nivel>=1,ok:!1},{footer:(0,l.k6)(function(){return[(0,l.bF)(Q,{class:"justify-end",color:"grey-2"},{default:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(Z,{class:"q-mx-xs",icon:"file_pdf",label:"PDF",color:"primary",onClick:e[16]||(e[16]=function(e){return o.verReporte("pdf")})}),(0,l.bF)(Z,{class:"q-mx-xs",icon:"file_excel",label:"Excel",color:"primary",onClick:e[17]||(e[17]=function(e){return o.verReporte("xls")})})])]}),_:1})]}),footerMobile:(0,l.k6)(function(){return[(0,l.Lk)("div",null,[(0,l.bF)(Z,{flat:"",round:"",dense:"",icon:"file_pdf",onClick:e[18]||(e[18]=function(e){return o.verReporte("pdf")})}),(0,l.bF)(Z,{flat:"",round:"",dense:"",icon:"file_excel",onClick:e[19]||(e[19]=function(e){return o.verReporte("xls")})})])]}),default:(0,l.k6)(function(){return[(0,l.Lk)("div",q,[(0,l.Lk)("div",G,[(0,l.bF)(po,{color:"secondary",type:"radio",modelValue:o.reporte.repcod,"onUpdate:modelValue":e[20]||(e[20]=function(e){return o.reporte.repcod=e}),options:o.reporte.repcods},null,8,["modelValue","options"])])])]}),_:1},8,["modelValue","footer"])]}),_:1})}var j=t(99550),H=t.n(j),X=t(76080),W=t.n(X),J=t(45254),z=t.n(J),Z=(t(71225),t(23825),t(10239),t(89571),t(50310),t(5962),t(90095),t(92802),t(9240),t(70199),t(515),t(83190),t(27153),t(66307),t(7346),t(13715),t(24066),t(83972)),K=t(6123),Y=t(30545),oo=t(30640),eo=t(93616),to=t(80340),ao=t(6583),no=t(982),lo=t(33001),ro=t(95523),io=t(57668),so=t(13813),co=t(80660),uo={getNiveles:function(){return co.$http.get("api/HyoInstrus/obtInstru").then(function(o){var e=o.json;return e}).catch(function(){return[]})},getGrados:function(){return co.$http.get("api/HyoGradoNivs/obtGrados").then(function(o){var e=o.json;return e}).catch(function(){return[]})},getListaSalonesAnio:function(){var o=z()(W()().m(function o(e){var t,a,n;return W()().w(function(o){while(1)switch(o.n){case 0:return t={},e&&(t.params={ano:e}),o.n=1,co.$http.get("api/HyoConductaSalon/getListaSalonesAnio",t);case 1:return a=o.v,n=a.json,o.a(2,n)}},o)}));function e(e){return o.apply(this,arguments)}return e}(),getSalonesTutores:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return co.$http.get("api/HyoConductaSalon/getListaSalonesTutoresAnio",{params:{params:o}}).then(function(o){var e=o.json;return e}).catch(function(){return[]})},getProfesores:function(o){var e={};return o&&(e.siscod=o),co.$http.get("api/HyoClase/obtListadoProfecActivos",{params:e}).then(function(o){var e=o.json;return e}).catch(function(){return[]})},getPeriodos:function(o){return co.$http.get("api/HyoConductaSalon/periodos",{params:{idConductaSalon:o}})},editarConductaTutor:function(o,e,t,a,n,l,r,i,s,c){var u=!0;return t===a&&(u=!1),co.$http.post("api/HyoConductaPeriodo/editarConductaTutor",{idConductaSalon:o,idPersona:e,cambiarAnual:u,anual:a,arrObj:n,modo:l,origenReplica:r,dataCritProfe:i,nemo:s,profcod:c}).then(function(o){var e=o.json;return e})},getProgramaConducta:function(o,e,t){return co.$http.get("api/HyoConductaPeriodo/obtProgramaDeConducta",{params:{idConductaSalon:o,nivel:e,simbolo:t}}).then(function(o){return o})},obtTutoresUsuariosPorCriterio:function(o){return co.$http.get("api/HyoConductaPeriodo/obtTutoresUsuariosPorCriterio",{params:{idConductaSalon:o}}).then(function(o){return o})},getReportes:function(){return co.$http.get("api/HyoConductaPeriodo/getReportes")},obtBancoDatos:function(){return co.$http.get("api/HyoConductaSalon/obtBancoDatos",{})},obtBancoDatosGradoNiv:function(){return co.$http.get("api/HyoProgramaConductaContenido/obtBancoDatosGradoNiv",{}).then(function(o){var e=o.json;return e})},editarBancoDatos:function(o,e){return co.$http.post("api/HyoConductaSalon/editarBancoDatos",{params:{salones:o,idContenidoBase:e}}).then(function(o){var e=o.json;return e})}},fo=t(99637),po=t(81288),mo=t(65229),go=t(2819),ho=t(70512),vo=t(33777),bo={setup:function(){var o=(0,Z.fG)();return{v$:o}},directives:{sieActive:mo.A},components:{QCard:K.C$,QPopover:K.VM,QSearch:K.Ks,QModalLayout:K.hT,QCheckbox:K.vZ,QPageSticky:K._U,QInnerLoading:K.SQ,QSpinnerOval:K.VA,QToggle:K.c5,QFab:K.l6,QFabAction:K.B$,QSelect:K.Si,QTable:Y.A,QTh:K.EJ,QTr:K.qh,QTd:K.Ef,QTableColumns:K.$s,QPopupEdit:K.GT,QTabs:K.uw,QTab:K.zu,QTabPane:K.dg,QChip:K.wQ,QOptionGroup:K.EX,sieModal:oo.A,sieSelect:eo.A,sieVacio:to.A,selectMultiple:ro.A,ConductaContenido:ho.A,sieTable:vo.A,QPage:K.Tu,QToolbar:K.ZV,QToolbarTitle:K.r_,QBtn:K.Il,QTooltip:K.nC,QIcon:K.bP},data:function(){return{sie:(0,io["default"])(),vmFiltro:{salones:[],instrucod:[],gradocod:[],seccioncod:null},vmFiltroBancoDatos:{salones:[],instrucod:[],gradocod:[],seccioncod:null,plantilla:null,idsContenidoBD:""},dataSelect:{salones:[],nivel:[],grado:[],seccion:[]},dataSelectBancoDatos:{salones:[],nivel:[],grado:[],seccion:[]},gradosTemp:[],gradosTempBancoDatos:[],dataDetalleTemp:[],dataDetalleTempBancoDatos:[],datosBancoDatos:[],configTblSalon:{},configTblSalonBancoDatos:{},dataBancoDatosGradoNiv:{},loadingDetalle:!1,filtroTabla:"",filtroTablaBancoDatos:"",loadingModal:!1,openModal:{agregar:!1,replica:!1,editar:!1,verbancodatos:!1},vmEditar:{idConductaSalon:null,nemo:null,profe:null,replica:0,programa:null,periodos:[],tutoresxPeriodo:!1,origenReplica:0,descripcion:""},dataModal:{profesores:[],config:[],periodos:[],tablaProfeOpc:[]},tableProfesores:{data:[],showSearch:!1,columns:[{name:"PERIODO",label:this.$t("periodo"),field:"PERIODO",align:"center",sortable:!0},{name:"ID_PERSONA",label:this.$t("profesor"),field:"ID_PERSONA",align:"left",sortable:!0},{name:"TUTOR",label:"Tutor de Salón",field:"TUTOR",align:"center",sortable:!0}],config:{ID_PERSONA:{component:"select",label:"Seleccione",optionValue:"ID_PERSONA",optionLabel:"NOMCOMP",options:[],autoSelect:!0,input:function(o,e,t,a,n){var l=n[o.ID_PERSONA];l.PROFCOD===o.TUTOR_SALON?e.TUTOR=1:e.TUTOR=0;var r=[];this.$refs.refGrillaTutPer.data.forEach(function(o,e){l.ID_PERSONA===o.ID_PERSONA_TUTOR&&1===o.TUTOR&&r.push(o.ID_PERSONA)}),r.length>0&&this.$refs.refGrillaTutPer.data.forEach(function(o,e){o.ID_PERSONA===o.ID_PERSONA_TUTOR&&(o.TUTOR=1)})}},TUTOR:{renderHtml:function(o,e,t){return t.checkbox({value:o.TUTOR,trueValue:1,falseValue:0})},renderAction:function(o,e,t,a,n){1===e.TUTOR?o.PROFCOD===o.TUTOR_SALON?e.TUTOR=1:e.TUTOR=0:e.TUTOR=1,this.tableProfesores.data.forEach(function(t,a){o.ID_PERSONA!==t.ID_PERSONA?(e.TUTOR=1,t.TUTOR=0):t.PROFCOD===t.TUTOR_SALON&&(t.TUTOR=1)})}}},pag:{page:1,rowsPerPage:16}},critProfe:{profesores:[],profe:null,programas:[],programa:null,indices:[],indice:null,data:[],columns:[{name:"NOMCOMP",label:this.$t("profesor"),field:"NOMCOMP",align:"left",sortable:!0},{name:"DESCRIPCION",label:this.$t("matricula.descripcion"),field:"DESCRIPCION",align:"left",sortable:!0},{name:"INDICE",label:this.$t("indice"),field:"INDICE",align:"left",sortable:!0},{name:"ELIMINAR",label:"",field:"ELIMINAR",align:"center",sortable:!1}],pag:{page:1,rowsPerPage:16}},reporte:{modal:!1,repcods:[],repcod:"profesoresPorCLase"}}},computed:{claseBtn:function(){return this.configTblSalon.registrosSeleccionados.length>0?"text-secondary":"text-grey"},grados:function(){var o=this,e=this.gradosTemp;return this.vmFiltro["instrucod"].length>0?(e=e.filter(function(e){return o.vmFiltro["instrucod"].some(function(o){return e.INSTRUCOD===o})}),e=(0,so["default"])(e,function(o){return{label:o.GRADODES,value:o.INSTRUCOD+o.GRADOCOD}})):e=[],e},gradosBancoDatos:function(){var o=this,e=this.gradosTempBancoDatos;return this.vmFiltroBancoDatos["instrucod"].length>0?(e=e.filter(function(e){return o.vmFiltroBancoDatos.instrucod===e.INSTRUCOD}),e=(0,so["default"])(e,function(o){return{label:o.GRADODES,value:o.INSTRUCOD+o.GRADOCOD}})):e=[],e},dataSalones:function(){var o=this,e=this.dataSelect.salones;return this.vmFiltro.salones=[],this.vmFiltro.gradocod.length>0?e=e.filter(function(e){return o.vmFiltro["gradocod"].some(function(o){return 0===e.NG.indexOf(o)||e.NG.indexOf(","+o)>0})}):this.vmFiltro.instrucod.length>0&&(e=e.filter(function(e){return o.vmFiltro["instrucod"].some(function(o){return 0===e.INSTRUCOD.indexOf(o)||e.INSTRUCOD.indexOf(","+o)>0})})),e=(0,so["default"])(e,function(o){return{label:o.NEMODES,value:o.NEMO}}),e},dataSalonesBancoDatos:function(){var o=this,e=this.dataSelectBancoDatos.salones;return this.vmFiltroBancoDatos.salones=[],this.vmFiltroBancoDatos.gradocod.length>0?e=e.filter(function(e){return o.vmFiltroBancoDatos["gradocod"].some(function(o){return 0===e.NG.indexOf(o)||e.NG.indexOf(","+o)>0})}):this.vmFiltroBancoDatos.instrucod.length>0&&(e=e.filter(function(e){return o.vmFiltroBancoDatos.instrucod===e.INSTRUCOD})),e=(0,so["default"])(e,function(o){return{label:o.NEMODES,value:o.NEMO}}),e},dataDetalle:function(){var o=this,e=this.dataDetalleTemp;return this.loadingDetalle=!0,this.vmFiltro.salones.length>0&&(e=e.filter(function(e){return o.vmFiltro["salones"].some(function(o){return e.NEMO===o})})),e=e.filter(function(e){return o.dataSalones.some(function(o){if(e.NEMO===o.value)return!0})}),this.loadingDetalle=!1,e},dataDetalleBancoDatos:function(){var o=this,e=this.dataDetalleTempBancoDatos;return this.loadingDetalle=!0,this.vmFiltroBancoDatos.salones.length>0&&(e=e.filter(function(e){return o.vmFiltroBancoDatos["salones"].some(function(o){return e.NEMO===o})})),e=e.filter(function(e){return o.dataSalonesBancoDatos.some(function(o){if(e.NEMO===o.value)return!0})}),this.loadingDetalle=!1,this.configTblSalonBancoDatos.registrosSeleccionados=e,e},isLess:function(){return(0,po.isLess)()}},methods:{seleccionaInstru:function(o){this.vmFiltro.instrucod=o},seleccionaGrado:function(o){this.vmFiltro.gradocod=o},seleccionaSalones:function(o){this.vmFiltro.salones=o},seleccionaInstruBancoDatos:function(o){this.vmFiltroBancoDatos.instrucod=o},seleccionaGradoBancoDatos:function(o){this.vmFiltroBancoDatos.gradocod=o},seleccionaValorBancoDatos:function(o){this.vmFiltroBancoDatos.plantilla=o.ID_CONTENIDO,this.vmFiltroBancoDatos.idsContenidoBD=o.IDSCONTENIDO},seleccionaSalonesBancoDatos:function(o){this.vmFiltroBancoDatos.salones=o},loadSalones:function(){var o=z()(W()().m(function o(){return W()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,uo.getListaSalonesAnio();case 1:return this.dataSelect.salones=o.v,o.n=2,uo.getListaSalonesAnio();case 2:this.dataSelectBancoDatos.salones=o.v;case 3:return o.a(2)}},o,this)}));function e(){return o.apply(this,arguments)}return e}(),obtNGS:function(){var o=this;Promise.all([uo.getNiveles(),uo.getGrados()]).then(function(e){var t=H()(e,2),a=t[0],n=t[1];o.dataSelect.nivel=(0,so["default"])(a,function(o){return{label:o.INSTRUDES,value:o.INSTRUCOD}}),o.gradosTemp=n,o.dataSelectBancoDatos.nivel=(0,so["default"])(a,function(o){return{label:o.INSTRUDES,value:o.INSTRUCOD}}),o.gradosTempBancoDatos=n})},modalEditarTutor:function(o){var e=this,t=null;if(o.NEMO)t=o;else{var a=this.configTblSalon.registrosSeleccionados;if(0===a.length)return(0,no["default"])("Debe seleccionar un registro","warning"),!1;a.length>1&&(0,no["default"])("solo se edita de uno en uno","warning"),t=a[0]}this.openModal.editar=!0,this.vmEditar.profe=null,this.vmEditar.idConductaSalon=t.ID_CONDUCTA_SALON,this.vmEditar.nemo=t.NEMO,this.vmEditar.replica=t.ANUAL_REPLICA,this.vmEditar.anualReplicaOld=t.ANUAL_REPLICA,this.vmEditar.descripcion=t.NEMODES,this.vmEditar.origenReplica=t.ORIGEN_REPLICA,this.critProfe.profe=null,this.critProfe.programa=null,this.critProfe.indice=null;var n=[uo.getProfesores(),uo.getPeriodos(t.ID_CONDUCTA_SALON),uo.getProgramaConducta(t.ID_CONDUCTA_SALON,"2","="),uo.obtTutoresUsuariosPorCriterio(t.ID_CONDUCTA_SALON)];Promise.all(n).then(function(o){e.tableProfesores.data=(0,ao["default"])(o[1]);var a=[];(0,fo["default"])((0,ao["default"])(o[1]),function(o){(0===a.length||-1===a.indexOf(o.ID_PERSONA))&&a.push(o.ID_PERSONA)}),e.vmEditar.tutoresxPeriodo=a.length>1,o[0].unshift({ID_PERSONA:null,NOMCOMP:"Ninguno",PROFCOD:"000000",USUCOD:"",USUNOM:""}),e.dataModal.tablaProfeOpc=JSON.parse(JSON.stringify(o[0])),e.dataModal.profesores=o[0],e.tableProfesores.config.ID_PERSONA.options=JSON.parse(JSON.stringify(o[0])),o[0].some(function(o){if(o.NOMCOMP===t.TUTOR)return e.vmEditar.profe=o.ID_PERSONA,!0});var n=JSON.parse(JSON.stringify(o[0]));e.critProfe.profesores=n,e.critProfe.indices=[],e.critProfe.programas=(0,ao["default"])(o[2]),e.critProfe.data=(0,ao["default"])(o[3])})},configurarTablaConductaSalon:function(){var o={};o.columnas=[{name:"NGS",label:this.$t("ngs"),field:"NGS",align:"left",sortable:!0},{name:"NEMODES",label:this.$t("ambito"),field:"NEMODES",align:"left",sortable:!0},{name:"TUTOR",label:this.$t("tutor"),field:"TUTOR",align:"left",sortable:!0},{name:"ANUAL_REPLICA",label:"Replica anual",field:"ANUAL_REPLICA",align:"center"},{name:"BANCO_DATOS",label:"Banco de Datos",field:"BANCO_DATOS",align:"center"}],o.paginacion={page:1,rowsPerPage:500},o.registrosSeleccionados=[],o.tipoSeleccion="single",o.dataTipoSeleccion=[{label:"Individual",value:"single"},{label:"Multiple",value:"multiple"}],this.configTblSalon=o},configurarTablaSalonBancoDatos:function(){var o={};o.columnas=[{name:"NGS",label:this.$t("ngs"),field:"NGS",align:"left",sortable:!0},{name:"NEMODES",label:this.$t("ambito"),field:"NEMODES",align:"left",sortable:!0},{name:"BANCO_DATOS",label:"Banco de Datos",field:"BANCO_DATOS",align:"center"}],o.paginacion={page:1,rowsPerPage:500},o.registrosSeleccionados=[],o.tipoSeleccion="multiple",o.dataTipoSeleccion=[{label:"Individual",value:"single"},{label:"Multiple",value:"multiple"}],this.configTblSalonBancoDatos=o},modalEditarDocenteCond:function(o){this.openModal.editar=!0},eliminarDocenteCond:function(o){},cargarConductaSalon:function(){var o=this;return uo.getSalonesTutores().then(function(e){o.dataDetalleTemp=e,o.dataDetalleTempBancoDatos=e,o.configTblSalon.registrosSeleccionados=[]})},obtDatosBancoDatos:function(){var o=z()(W()().m(function o(){return W()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,uo.obtBancoDatos();case 1:this.datosBancoDatos=o.v;case 2:return o.a(2)}},o,this)}));function e(){return o.apply(this,arguments)}return e}(),editarDocenteConducta:function(){var o=this,e=this.vmEditar.idConductaSalon,t=this.vmEditar.profe,a=this.vmEditar.anualReplicaOld,n=this.vmEditar.replica,l=this.vmEditar.origenReplica,r=this.critProfe.data,i=this.vmEditar.nemo,s="",c=[],u=!1;if(this.loadingModal=!0,this.vmEditar.tutoresxPeriodo){var d=[];if((0,fo["default"])(this.tableProfesores.data,function(o){d.push({ID_CONDUCTA_PERIODO:o.ID_CONDUCTA_PERIODO,ID_PERSONA:o.ID_PERSONA,PROFCOD:o.PROFCOD,TUTOR:o.TUTOR})}),!(d.length>0))return this.loadingModal=!1,(0,no["default"])("Seleccione al menos un profesor","warning"),!1;c=d,u=!0}else{this.loadingModal=!0,c=[],u=!1;var f=this.dataModal.profesores.filter(function(o){return t===o.ID_PERSONA});s=f[0].PROFCOD}uo.editarConductaTutor(e,t,a,n,c,u,l,r,i,s).then(function(e){if(o.loadingModal=!1,1===e.estado)return(0,no["default"])(o.$t("mensajes.m0064"),"success"),o.openModal.editar=!1,o.cargarConductaSalon();(0,no["default"])(o.$t(e.mensaje),"error")}).then(function(){}).catch(function(e){(0,no["default"])(o.$t("mensajes."+e.error["message"]),"error"),o.loadingModal=!1})},addCriterioTutorUsuario:function(){if(null!==this.critProfe.profe&&"000000"!==this.critProfe.profe&&null!==this.critProfe.programa&&null!==this.critProfe.indice){var o=this.critProfe.data,e=this.vmEditar.idConductaSalon+""+this.critProfe.programa.ID_PROGRAMA+this.critProfe.indice,t={ID:e,ID_CONDUCTA_SALON:this.vmEditar.idConductaSalon,NOMCOMP:this.critProfe.profe.NOMCOMP,ID_PERSONA:this.critProfe.profe.ID_PERSONA,ID_PROGRAMA:this.critProfe.programa.ID_PROGRAMA,DESCRIPCION:this.critProfe.programa.DESCRIPCION,INDICE:this.critProfe.indice},a=0===(0,lo.filterArray)(e,{field:"ID",list:o}).length;a?o.push(t):(0,no["default"])("El índice ya fue agregado","warning"),this.critProfe.data=o}else(0,no["default"])("Debes seleccionar profesor, programa e índice","warning")},removeCriterioTutorUsuario:function(o){var e=this.critProfe.data;e.splice(o,1),this.critProfe.data=e},cambiarPrograma:function(){for(var o=this.critProfe.programa,e=[],t=1;t<=o.LIMITE;t++)e.push({label:t,value:t});this.critProfe.indices=e},boxAsignarBancoDatos:function(){this.openModal.verbancodatos=!0},asignarBancoDatos:function(){var o=this,e=this.configTblSalonBancoDatos.registrosSeleccionados,t=this.vmFiltroBancoDatos.plantilla,a=[];a=(0,so["default"])(e,function(o){return o.ID_CONDUCTA_SALON}),this.deshabilitar=!0;var n=[];""!==this.vmFiltroBancoDatos.idsContenidoBD&&(n=this.vmFiltroBancoDatos.idsContenidoBD.split(","));var l=e.reduce(function(o,e,a){return o.then(function(){var o=ho.A.procesoCopiarBD(t,e.ID_CONDUCTA_SALON,{limiteReplica:3,periodo:1},!0,!0,n).then(function(o){return o});return o})},Promise.resolve(1));l.then(function(){(0,no["default"])(o.$t("mensajes.m0008"),"success")}).catch(function(e){(0,no["default"])(o.$t("mensajes.m0009"),"error"),o.deshabilitar=!1}),uo.editarBancoDatos(a,t).then(function(e){if(o.loadingModal=!1,!0===e.message)return(0,no["default"])(o.$t("mensajes.m0064"),"success"),o.openModal.verbancodatos=!1,o.cargarConductaSalon();(0,no["default"])(o.$t(e.mensaje),"error")}).then(function(){}).catch(function(e){(0,no["default"])(o.$t("mensajes."+e.error["message"]),"error"),o.loadingModal=!1})},openReportes:function(){this.reporte.modal=!0},verReporte:function(o){var e={repcod:this.reporte.repcod,formato:o,ano:(0,io["default"])().ano};"profesoresPorCLase"===this.reporte.repcod&&(e.instrucod=this.vmFiltro["instrucod"],e.gradocod=this.vmFiltro["gradocod"]),(0,go.exportFilePhp)(e,"webservice/reportes/reporte")},init:function(){var o=this;Promise.all([uo.getSalonesTutores(),uo.getReportes()]).then(function(e){var t=H()(e,2),a=t[0],n=t[1];o.dataDetalleTemp=a,o.dataDetalleTempBancoDatos=a,o.reporte.repcods=n})}},validations:{vmEditar:{}},created:function(){this.init(),this.loadSalones(),this.obtNGS(),this.configurarTablaConductaSalon(),this.configurarTablaSalonBancoDatos(),this.obtDatosBancoDatos()}},Do=t(12807);const So=(0,Do.A)(bo,[["render",Q]]);var Oo=So}}]);