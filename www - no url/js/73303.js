"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[73303],{73303:function(e,a,t){t.r(a),t.d(a,{default:function(){return Se}});var o=t(8445),r=t.n(o),n=(t(71225),t(50310),t(5962),t(83190),t(61758)),l=t(58790),s={class:"row items-center no-wrap"},i={class:"col"},c={class:"text-h6"},u={class:"row q-ma-xs q-col-gutter-sm"},d={class:"col-xs-12 col-sm-4"},m={class:"col-xs-12 col-sm-4"},f={class:"col-xs-12 col-sm-4"},p={class:"row q-ma-xs q-col-gutter-sm"},b={class:"col-xs-12 col-sm-4"},h={class:"col-xs-12 col-sm-4"},A={class:"row q-ma-xs q-col-gutter-sm"},S={class:"col-xs-12 col-sm-4"},C={class:"col-xs-12 col-sm-4"},v={key:0,class:"row q-ma-xs q-col-gutter-sm"},E={class:"col-xs-8 col-lg-4"},O={class:"row gutter-xs",style:{width:"100%"}},x={class:"col-xs-12",style:{width:"100%"}},g={class:"col-xs-12",id:"form_upload",onsumit:"() => false"},I={class:"row q-ma-xs q-col-gutter-sm"},w={key:0,class:"col-xs-12 col-sm-5"},T={class:"row q-ma-xs q-col-gutter-sm"},N={class:"col-xs-12"},D={class:"col-xs-12"},k={class:"row q-ma-xs q-col-gutter-smp"},F={class:"text-h6"},L={class:"row q-ma-xs q-col-gutter-smp flex"},_={class:"row q-ma-xs q-col-gutter-smp"};function M(e,a){var t=(0,n.g2)("crearBotones"),o=(0,n.g2)("q-card-section"),M=(0,n.g2)("q-separator"),B=(0,n.g2)("tesoreriaLoading"),R=(0,n.g2)("q-select"),P=(0,n.g2)("q-date"),V=(0,n.g2)("q-popup-proxy"),U=(0,n.g2)("q-icon"),q=(0,n.g2)("q-input"),y=(0,n.g2)("q-card-main"),$=(0,n.g2)("q-card"),Y=(0,n.g2)("q-btn"),G=(0,n.g2)("sie-grid"),H=(0,n.g2)("footer-grid"),Q=(0,n.g2)("detalleContabilidadComprobantes"),X=(0,n.g2)("sie-modal"),j=(0,n.g2)("q-option-group"),z=(0,n.g2)("q-checkbox");return(0,n.uX)(),(0,n.Wv)($,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,n.k6)(function(){return[a[22]||(a[22]=(0,n.Lk)("form",{id:"form"},null,-1)),(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",s,[(0,n.Lk)("div",i,[(0,n.Lk)("div",c,(0,l.v_)(e.tituloOpcion),1)]),(0,n.bF)(t,{buttons:e.botones,nivelAcceso:e.nivelAcceso,option:e.nameOption},null,8,["buttons","nivelAcceso","option"])])]}),_:1}),(0,n.bF)(M),(0,n.bF)(B,{modelValue:e.loading.showLoading,total:e.loading.total,procesados:e.loading.procesados,label:e.loading.label},null,8,["modelValue","total","procesados","label"]),(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.bF)(R,{label:"Subdiario",modelValue:e.selectSubdiario,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.selectSubdiario=a}),"option-value":"value","option-label":"label",options:e.subDiario,onInput:e.getAsientosContables},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",m,[(0,n.bF)(R,{label:"Tipo de Proceso","option-value":"value","option-label":"label",options:e.objProceso,modelValue:e.selectProceso,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.selectProceso=a}),onInput:e.getAsientosContables},null,8,["options","modelValue","onInput"])]),(0,n.Lk)("div",f,[(0,n.bF)(R,{onInput:e.setDay,label:"Periodo","option-value":"value","option-label":"label",options:e.meses,modelValue:e.selectMes,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.selectMes=a})},null,8,["onInput","options","modelValue"])])]),(0,n.Lk)("div",p,[(0,n.Lk)("div",b,[(0,n.bF)(q,{"reverse-fill-mask":"",maxlength:"10",mask:"##/##/####",label:"Desde",modelValue:e.selectFecIni,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.selectFecIni=a}),onInput:e.getAsientosContables},{append:(0,n.k6)(function(){return[(0,n.bF)(U,{class:"cursor-pointer",name:"date_range"},{default:(0,n.k6)(function(){return[(0,n.bF)(V,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)(function(){return[(0,n.bF)(P,{mask:"DD/MM/YYYY",modelValue:e.selectFecIni,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.selectFecIni=a}),onInput:a[4]||(a[4]=function(a){return e.closeModalCalendar("qDateProxy1")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","onInput"])]),(0,n.Lk)("div",h,[(0,n.bF)(q,{"reverse-fill-mask":"",maxlength:"10",mask:"##/##/####",label:"Hasta",modelValue:e.selectFecFin,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.selectFecFin=a}),onInput:a[9]||(a[9]=function(a){return e.closeModalCalendar("qDateProxy1")})},{append:(0,n.k6)(function(){return[(0,n.bF)(U,{class:"cursor-pointer",name:"date_range"},{default:(0,n.k6)(function(){return[(0,n.bF)(V,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)(function(){return[(0,n.bF)(P,{mask:"DD/MM/YYYY",modelValue:e.selectFecFin,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.selectFecFin=a}),onInput:a[7]||(a[7]=function(a){return e.closeModalCalendar("qDateProxy2")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])]),(0,n.Lk)("div",A,[(0,n.Lk)("div",S,[(0,n.bF)(R,{placeholder:"Seleccione Talonario",label:"Talonario",modelValue:e.filter.talonario,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.filter.talonario=a}),options:e.talonario,"option-value":"value","option-label":"label",onInput:e.getAsientosContables},null,8,["modelValue","options","onInput"])]),(0,n.Lk)("div",C,[(0,n.bF)(q,{placeholder:"Ingrese Glosa",label:"Glosa",modelValue:e.filter.glosa,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.filter.glosa=a}),onInput:e.filterGlosa},null,8,["modelValue","onInput"])])]),e.mostrarCargarPlantilla?((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("div",E,[(0,n.bF)($,{class:"q-card-legend",style:{height:"100%"},title:"Seleccionar Plantila(XLS, XLSX)"},{default:(0,n.k6)(function(){return[(0,n.bF)(y,{style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",O,[(0,n.Lk)("div",x,[(0,n.Lk)("form",g,[(0,n.bF)(q,{type:"file",modelValue:e.archivoSeleccionado,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.archivoSeleccionado=a}),name:"arch1",id:"arch1",accept:".xlsx,.xls"},null,8,["modelValue"])])])])]}),_:1})]}),_:1})])])):(0,n.Q3)("v-if",!0),(0,n.Lk)("div",I,[e.showButtons?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.bF)(Y,{class:"q-mr-sm",icon:"vertical_align_bottom",color:"primary",label:e.textButtonCabecera,size:"sm",onClick:e.descargarCabecera},null,8,["label","onClick"]),e.showDetalle?((0,n.uX)(),(0,n.Wv)(Y,{key:0,class:"q-mr-sm",icon:"vertical_align_bottom",color:"primary",label:e.textButtonDetalle,size:"sm",onClick:e.descargarDetalle},null,8,["label","onClick"])):(0,n.Q3)("v-if",!0)])):(0,n.Q3)("v-if",!0)])]}),_:1}),(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.bF)(G,{class:"ag-theme-balham table-tablas",style:{width:"100%",height:"calc(100vh - 390px)"},columnDefs:e.columnDefs,rowData:e.rowData,frameworkComponents:e.frameworkComponents,onGridReady:e.onGridReady,rowSelection:"multiple",defaultColDef:e.defaultColDef,floatingFilter:"",enableCellTextSelection:""},null,8,["columnDefs","rowData","frameworkComponents","onGridReady","defaultColDef"]),(0,n.bF)(H,{modelValue:e.pagina,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.pagina=a}),max:e.max,onLoad:e.getAsientosContables,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])]}),_:1}),(0,n.bF)(X,{modelValue:e.openModal,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.openModal=a}),showButtonCancel:!1},{default:(0,n.k6)(function(){return[(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.bF)(Q,{idasiento:e.idasiento,modal:!0,comprobante:e.comprobante},null,8,["idasiento","comprobante"])]}),_:1})]}),_:1},8,["modelValue"]),(0,n.bF)(X,{modelValue:e.openModalAnexos,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.openModalAnexos=a}),onSubmit:e.exportarAnexos,labelButtonOk:"Aceptar"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,null,{default:(0,n.k6)(function(){return r()(a[21]||(a[21]=[(0,n.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,n.Lk)("div",{class:"text-h6"},"Exportar Anexos:")],-1)]))}),_:1}),(0,n.bF)(M),(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",T,[(0,n.Lk)("div",N,[(0,n.bF)(R,{label:"Filtros",placeholder:"Seleccione el filtro",modelValue:e.seleccionAnexo,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.seleccionAnexo=a}),options:e.opcionesAnexos},null,8,["modelValue","options"])]),(0,n.Lk)("div",D,[(0,n.bF)(j,{type:"radio",options:e.optionsAnexos,inline:"",modelValue:e.formatoAnexo,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.formatoAnexo=a})},null,8,["options","modelValue"])])])]}),_:1})]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(X,{modelValue:e.modalExportar,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.modalExportar=a}),onSubmit:e.exportarArchivo,labelButtonOk:"Aceptar",showButtonCancel:!1,iconButtonOk:"file_download"},{default:(0,n.k6)(function(){return[(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",k,[(0,n.Lk)("div",F,"¿Que tipo de archivo desea Exportar para "+(0,l.v_)(e.sistemaContable)+"?",1)])]}),_:1}),(0,n.bF)(M),(0,n.bF)(o,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",L,[(0,n.bF)(j,{inline:"",color:"primary",type:"radio",modelValue:e.seleccionarExportacion,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.seleccionarExportacion=a}),options:e.opcionesArchivos},null,8,["modelValue","options"])])]}),_:1}),e.CHECK_VERSION_COMPLETA?((0,n.uX)(),(0,n.Wv)(o,{key:0},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",_,[(0,n.bF)(z,{modelValue:e.PLANTILLA_VERSION_COMPLETA,"onUpdate:modelValue":a[19]||(a[19]=function(a){return e.PLANTILLA_VERSION_COMPLETA=a}),"true-value":1,"false-value":0,"left-label":"",label:"Versión Completa"},null,8,["modelValue"])])]}),_:1})):(0,n.Q3)("v-if",!0)]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var B=t(41562),R=t.n(B),P=t(99550),V=t.n(P),U=t(76080),q=t.n(U),y=t(45254),$=t.n(y),Y=(t(12563),t(34634),t(30683),t(39866),t(52133),t(10239),t(6724),t(56567),t(515),t(88390),t(62692),t(88567)),G=t(95718),H=t(53380),Q=t(54489),X=t(12143),j=t(80660),z=t(36408),K=t(27560),W=t(96330),J=t(57668),Z=t(18105),ee=t(42037),ae=t(54267),te=t(75053),oe=t(64208),re=t(6123),ne=t(95051),le=t(95477),se=t(3112),ie=t(41615),ce=t(78840),ue=t(98798),de=t(64303),me=t(17915),fe=t(33950),pe=t(59089),be={components:{sieUpload:pe.A,headerGrid:W.A,sieGrid:z.A,footerGrid:K.A,QCard:Y.A,QCardSection:G.A,QSelect:Q.S,QSeparator:H.A,sieModal:te.A,QInput:oe.A,QDate:X.A,QPopupProxy:le.A,QDatetime:re.T5,QCheckbox:se.A,QOptionGroup:re.EX,QChip:ne.A,detalleContabilidadComprobantes:ue.A,crearBotones:de.A,tesoreriaLoading:me.A,QIcon:re.bP,QCardMain:re.d1,QBtn:re.Il},data:function(){return{botones:[],nameOption:"AsientoContable",nivelAcceso:(0,J["default"])().ruta.nivel,columnDefs:[],rowData:[],api:{},frameworkComponents:{},procesosContables:[],subDiario:[],selectSubdiario:null,selectProceso:null,selectFecIni:ie["default"].CURRENT_DAY,selectFecFin:ie["default"].CURRENT_DAY,selectFecPro:ie["default"].CURRENT_DAY,objProceso:[],meses:[],selectMes:ie["default"].CURRENT_MONTH,tituloOpcion:"Asientos Contables "+(0,J["default"])().ano,openModal:!1,NumTal:"",NumPag:"",openModalAnexos:!1,seleccionAnexo:2,paramsExtraArchivo:{},PLANTILLA_VERSION_COMPLETA:0,CHECK_VERSION_COMPLETA:!1,opcionesAnexos:[{label:"Solo Nuevos",value:3},{label:"Todos del Periodo",value:2},{label:"Desde los Inicios",value:1}],dataCabeceraDbf:{filename:"",contenido:""},dataDetalleDbf:{filename:"",contenido:""},showButtons:!1,glosa:"",pagina:1,max:1,idasiento:0,comprobante:"",textButtonCabecera:"",textButtonDetalle:"",campos:["SUBDIARIO","ANOCOB","MESDES","NUMERO","NRODOC","GLOSA","FECHA","MONEDA","MONTOTPAG"],modalExportar:!1,opcionesArchivos:[{value:"dbf",label:"DBF"},{value:"xlsx",label:"EXCEL"}],seleccionarExportacion:"dbf",apiArchivos:{xlsx:"postArchivosSubdiariosExcel",dbf:"postArchivosSubdiariosDbf"},showDetalle:!1,filter:{glosa:"",talonario:""},talonario:[],sistemaContable:"",rowDataInitial:[],archivo:{cabecera:{ruta:"",filename:""},detalle:{ruta:"",filename:""}},mostrarCargarPlantilla:!1,archivoSeleccionado:null,archivoCargado:null,filename:"",loading:{showLoading:!1,procesados:0,total:0,label:"Eliminando"},defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0,suppressDragLeaveHidesColumns:!0},optionsAnexos:[{label:"xlsx",value:"xlsx"}],formatoAnexo:"xlsx"}},methods:{cargarPlantilla:function(e){var a=this;return $()(q()().m(function t(){var o,r;return q()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,(0,fe["default"])({file:e[0]});case 1:o=t.v,a.archivoCargado=o,a.filename=o.nameOrigin,t.n=3;break;case 2:return t.p=2,r=t.v,t.a(2,a.$alert(r.error?r.error.message:r.message,"warning"));case 3:return t.a(2)}},t,null,[[0,2]])}))()},exportar:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:if(e.archivoSeleccionado){a.n=1;break}return a.a(2,e.$alert("No se ha cargado la plantilla"));case 1:e.$confirm("¿Esta seguro de ejecutar el proceso?").onOk($()(q()().m(function a(){var t,o,r;return q()().w(function(a){while(1)switch(a.n){case 0:return t=document.getElementById("form_upload"),t.setAttribute("enctype","multipart/form-data"),o="/webservice/servicios-tesoreria/generar-archivo-contanet",a.n=1,e.getParams();case 1:r=a.v,ie["default"].FORMULARIO_REPORTES(t,r,o,!0),e.$alert("Archivo descargado satisfactoriamente","success");case 2:return a.a(2)}},a)})));case 2:return a.a(2)}},a)}))()},getParams:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,{tesoreria:!0,arch1:e.archivoSeleccionado,TIPO_PROCESO:e.selectProceso,FECINI:(0,ae.convertDateStandard)(e.selectFecIni),FECFIN:(0,ae.convertDateStandard)(e.selectFecFin),ID_SUBDIARIO:e.selectSubdiario,MESCOB:e.selectMes,ANOCOB:(0,J["default"])().ano})}},a)}))()},getOpcionesParaExportar:function(){var e=this;return $()(q()().m(function a(){var t,o,r,n,l;return q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,j.$http.get("api/empresaController/getEmpresas");case 1:t=a.v,o=V()(t,1),r=o[0],e.sistemaContable=r.SISCONTA,e.tituloOpcion=e.tituloOpcion+" ("+e.sistemaContable+")",e.opcionesArchivos=ie["default"].TIPO_EXPORTAR_ARCHIVO[e.sistemaContable.toLowerCase()]||[],[ie["default"].SISTEMAS_CONTABLES.SPRING,ie["default"].SISTEMAS_CONTABLES.SVPCHINCHA].includes(e.sistemaContable)&&e.optionsAnexos.push({label:"txt",value:"txt"}),e.opcionesArchivos.length>0&&(n=V()(e.opcionesArchivos,1),l=n[0],e.seleccionarExportacion=l.value);case 2:return a.a(2)}},a)}))()},getTalonarios:function(){var e=this;return $()(q()().m(function a(){var t;return q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ie["default"].API_TALONARIOS();case 1:t=a.v,t.unshift({label:"Todos",value:"T"}),e.talonario=t;case 2:return a.a(2)}},a)}))()},filterGlosa:function(){var e=this;return $()(q()().m(function a(){var t;return q()().w(function(a){while(1)switch(a.n){case 0:if(0!==e.rowDataInitial.length){a.n=1;break}return a.a(2);case 1:t=r()(e.rowDataInitial),e.filter.glosa.length>0&&(t=t.filter(function(a){return a.GLOSA.toLowerCase().includes(e.filter.glosa.toLowerCase())})),e.rowData=t;case 2:return a.a(2)}},a)}))()},crearBotones:function(){this.botones=[],this.selectProceso===ie["default"].PROCESOS_CONTABLES.VENTAS&&this.botones.push({label:"Anexos",icon:"users",click:this.openModelDeAnexos,minAcceso:ie["default"].LECTURA_ESCRITURA}),this.sistemaContable.toUpperCase()===ie["default"].SISTEMAS_CONTABLES.CONTANET?(this.mostrarCargarPlantilla=!0,this.botones.push({label:"Eliminar",icon:"delete",click:this.eliminarAsientosContables,minAcceso:ie["default"].ACCESO_TOTAL}),this.botones.push({label:"Descargar Archivo",icon:"settings",click:this.exportar,minAcceso:ie["default"].LECTURA_ESCRITURA})):(this.botones.push({label:"Exportar",icon:"file_download",click:this.openModalExportar,minAcceso:ie["default"].LECTURA_ESCRITURA}),this.botones.push({label:"Eliminar",icon:"delete",click:this.eliminarAsientosContables,minAcceso:ie["default"].ACCESO_TOTAL}))},openModelDeAnexos:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:e.openModalAnexos=!0,e.opcionesAnexos[1].label="Todo del periodo (".concat((0,J["default"])().ano,"-").concat(e.selectMes,")");case 1:return a.a(2)}},a)}))()},exportarAnexos:function(){var e=this;return $()(q()().m(function a(){var t,o;return q()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,e.selectSubdiario){a.n=1;break}throw new Error("Debe seleccionar un subdiario");case 1:return e.$q.loading.show(),a.n=2,j.$http.post("api/contabilidadController/postGenerarArchivoAnexos",{params:{ANIO:(0,J["default"])().ano,MES:e.selectMes,ID_SUBDIARIO:e.selectSubdiario,FLAT:e.seleccionAnexo,FORMATO:e.formatoAnexo}});case 2:return t=a.v,a.n=3,e.descargarArchivo({filename:t.fileName,ruta:t.ruta});case 3:e.$alert("Archivo Exportado Correctamente","success"),e.$q.loading.hide(),a.n=5;break;case 4:return a.p=4,o=a.v,e.$q.loading.hide(),a.a(2,e.$alert(o.error?o.error.message:o.message,"warnning"));case 5:return a.a(2)}},a,null,[[0,4]])}))()},descargarArchivo:function(e){return $()(q()().m(function a(){var t,o,r;return q()().w(function(a){while(1)switch(a.n){case 0:return t=e.filename,o=e.ruta,r='{"name":"'.concat(t,'","ruta":"').concat(o,'","tipo":"').concat(t.split(".").at(1),'"}'),a.n=1,ie["default"].DESCARGAR_ARCHIVO(r);case 1:return a.a(2)}},a)}))()},openModalExportar:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:if(1!==e.opcionesArchivos.length){a.n=2;break}return e.seleccionarExportacion=e.opcionesArchivos[0].value,a.n=1,e.exportarArchivo();case 1:a.n=3;break;case 2:e.modalExportar=!0;case 3:return a.a(2)}},a)}))()},descargarDetalle:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:if(!e.sistemaContable||![ie["default"].SISTEMAS_CONTABLES.EXACTUS,ie["default"].SISTEMAS_CONTABLES.SPRING,ie["default"].SISTEMAS_CONTABLES.SOFYA].includes(e.sistemaContable)){a.n=2;break}return a.n=1,e.exportForm(e.archivo.detalle.ruta);case 1:a.n=3;break;case 2:return a.n=3,e.descargarArchivo(e.archivo.detalle);case 3:return a.a(2)}},a)}))()},descargarCabecera:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:if(!e.sistemaContable||![ie["default"].SISTEMAS_CONTABLES.SOFYA,ie["default"].SISTEMAS_CONTABLES.SPRING,ie["default"].SISTEMAS_CONTABLES.SANTISIMOSALVADOR,ie["default"].SISTEMAS_CONTABLES.SVPCHINCHA,ie["default"].SISTEMAS_CONTABLES.EXACTUS].includes(e.sistemaContable)){a.n=2;break}return a.n=1,e.exportForm(e.archivo.cabecera.ruta,e.paramsExtraArchivo);case 1:a.n=5;break;case 2:if(!e.sistemaContable||e.sistemaContable!==ie["default"].SISTEMAS_CONTABLES.CONTANET){a.n=4;break}return a.n=3,e.exportFormularioReporte(e.archivo.cabecera.ruta);case 3:a.n=5;break;case 4:return a.n=5,e.descargarArchivo(e.archivo.cabecera);case 5:return a.a(2)}},a)}))()},createHidden:function(e){var a=document.createElement("input");return a.setAttribute("type","hidden"),a.setAttribute("name",e),a.setAttribute("id",e),a},exportarFormSubmit:function(e,a){var t=this,o=document.getElementById("form");o.setAttribute("target","_blank"),o.setAttribute("method","POST"),o.setAttribute("action",a),Object.entries(e).map(function(e){var a=V()(e,2),r=a[0],n=a[1];o.children[r.toLowerCase()]||o.appendChild(t.createHidden(r.toLowerCase())),o.children[r.toLowerCase()].value=n}),o.submit()},exportFormStartSoft:function(e){var a=this;return $()(q()().m(function t(){return q()().w(function(t){while(1)switch(t.n){case 0:a.exportarFormSubmit(e,"/webservice/servicios-tesoreria/archivo-contable");case 1:return t.a(2)}},t)}))()},exportForm:function(e){var a=arguments,t=this;return $()(q()().m(function o(){var r,n,l,s;return q()().w(function(o){while(1)switch(o.n){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},n={TIPO_PROCESO:t.selectProceso,FECINI:(0,ae.convertDateStandard)(t.selectFecIni),FECFIN:(0,ae.convertDateStandard)(t.selectFecFin),ID_SUBDIARIO:t.selectSubdiario,MESCOB:t.selectMes,ANOCOB:(0,J["default"])().ano},l=Object.keys(r),l.length>0)for(s=0;s<l.length;s++)n[l[s]]=r[l[s]];t.exportarFormSubmit(n,e);case 1:return o.a(2)}},o)}))()},exportFormularioReporte:function(e){var a=this;return $()(q()().m(function t(){var o;return q()().w(function(t){while(1)switch(t.n){case 0:o={TIPO_PROCESO:a.selectProceso,FECINI:(0,ae.convertDateStandard)(a.selectFecIni),FECFIN:(0,ae.convertDateStandard)(a.selectFecFin),ID_SUBDIARIO:a.selectSubdiario,MESCOB:a.selectMes,ANOCOB:(0,J["default"])().ano},a.exportarFormSubmit(o,e);case 1:return t.a(2)}},t)}))()},exportarArchivo:function(){var e=this;return $()(q()().m(function a(){var t,o,r,n,l,s,i,c,u,d,m,f,p,b,h,A,S,C,v,E;return q()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,e.selectSubdiario){a.n=1;break}throw new Error("No selecciono el subdiario");case 1:if(e.selectProceso){a.n=2;break}throw new Error("No seleccionó ningún proceso");case 2:return t={TIPO_PROCESO:e.selectProceso,FECINI:(0,ae.convertDateStandard)(e.selectFecIni),FECFIN:(0,ae.convertDateStandard)(e.selectFecFin),ID_SUBDIARIO:e.selectSubdiario,MESCOB:e.selectMes,ANOCOB:(0,J["default"])().ano,PLANTILLA_VERSION_COMPLETA:e.PLANTILLA_VERSION_COMPLETA},o={tipoArchivo:e.seleccionarExportacion,sistemaContable:e.sistemaContable,datos:t},a.n=3,j.$http.post("api/contabilidadController/postExportarArchivoContable",{params:o});case 3:if(r=a.v,e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.STARSOFT){a.n=5;break}if("text"!==o.tipoArchivo){a.n=4;break}return a.a(2,e.exportarFormSubmit(t,"/webservice/servicios-tesoreria/archivo-contable"));case 4:return n=r.ruta,e.archivo.cabecera.filename=e.archivo.cabecera.ruta=e.textButtonCabecera=n.split("/").at(-1),e.archivo.cabecera.ruta=n,e.showButtons=!0,e.modalExportar=!1,e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 5:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.CONTANET){a.n=6;break}return l=r.cabecera,e.archivo.cabecera.ruta=l.ruta,e.showButtons=!0,e.modalExportar=!1,e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 6:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.SOFYA){a.n=7;break}return s=r.cabecera,i=r.detalle,e.archivo.cabecera.filename=e.textButtonCabecera=s.fileName.split("/").at(-1),e.archivo.detalle.filename=e.textButtonDetalle=i.fileName.split("/").at(-1),e.archivo.cabecera.ruta=s.ruta,e.archivo.detalle.ruta=i.ruta,e.showButtons=!0,e.modalExportar=!1,e.showDetalle=[ie["default"].PROCESOS_CONTABLES.VENTAS,ie["default"].PROCESOS_CONTABLES.LETRAS].includes(o.datos.TIPO_PROCESO),e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 7:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.SPRING){a.n=8;break}return c=r.cabecera,u=r.detalle,e.archivo.cabecera.filename=e.textButtonCabecera=c.fileName.split("/").at(-1),e.archivo.detalle.filename=e.textButtonDetalle=u.fileName.split("/").at(-1),e.archivo.cabecera.ruta=c.ruta,e.archivo.detalle.ruta=u.ruta,e.showButtons=!0,e.modalExportar=!1,"txt_voucher"===e.seleccionarExportacion?(e.textButtonCabecera="VOUCHER",e.archivo.cabecera.ruta="/webservice/servicios-tesoreria/archivo-contable-spring-voucher",e.showDetalle=!1):e.showDetalle=t.ID_SUBDIARIO!==ie["default"].PROCESOS_CONTABLES.BANCO,e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 8:if(![ie["default"].SISTEMAS_CONTABLES.SANTISIMOSALVADOR,ie["default"].SISTEMAS_CONTABLES.SVPCHINCHA].includes(e.sistemaContable.toUpperCase())){a.n=9;break}return d=r.cabecera,e.archivo.cabecera.filename=e.textButtonCabecera=d.fileName.split("/").at(-1),e.archivo.cabecera.ruta=d.ruta,e.showButtons=!0,e.modalExportar=!1,d.formato&&(e.paramsExtraArchivo["FORMATO"]=d.formato),e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 9:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.CONCAR){a.n=10;break}return m=r.cabecera,f=r.detalle,e.archivo.cabecera.filename=e.textButtonCabecera=m.filename.split("/").at(-1),e.archivo.detalle.filename=e.textButtonDetalle=f.filename.split("/").at(-1),e.archivo.cabecera.ruta=m.filename,e.archivo.detalle.ruta=f.filename,e.showButtons=!0,e.modalExportar=!1,e.showDetalle=!0,e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 10:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.CONCARSQL){a.n=11;break}return p=r.archivo,e.archivo.cabecera.filename=e.archivo.cabecera.ruta=e.textButtonCabecera=p.filename.split("/").at(-1),e.archivo.cabecera.ruta=p.filename,e.showButtons=!0,e.modalExportar=!1,e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 11:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.ERPSYSTEMS){a.n=12;break}return b=r.archivo,e.archivo.cabecera.filename=e.archivo.cabecera.ruta=e.textButtonCabecera=b.filename.split("/").at(-1),e.archivo.cabecera.ruta=b.filename,e.showButtons=!0,e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 12:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.VCONT){a.n=14;break}return h=r.ruta,e.archivo.cabecera.filename=e.archivo.cabecera.ruta=e.textButtonCabecera=h.split("/").at(-1),e.archivo.cabecera.ruta=h,e.modalExportar=!1,a.n=13,e.descargarCabecera();case 13:return e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 14:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.AMERICA){a.n=16;break}return A=r.ruta,e.archivo.cabecera.filename=e.archivo.cabecera.ruta=e.textButtonCabecera=A.split("/").at(-1),e.archivo.cabecera.ruta=A,e.modalExportar=!1,a.n=15,e.descargarCabecera();case 15:return e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 16:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.ACONSYS){a.n=18;break}return S=r.ruta,e.archivo.cabecera.filename=e.archivo.cabecera.ruta=e.textButtonCabecera=S.split("/").at(-1),e.archivo.cabecera.ruta=S,e.modalExportar=!1,a.n=17,e.descargarCabecera();case 17:return e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 18:if(e.sistemaContable.toUpperCase()!==ie["default"].SISTEMAS_CONTABLES.EXACTUS){a.n=19;break}return C=r.cabecera,v=r.detalle,e.archivo.cabecera.filename=e.textButtonCabecera=C.fileName.split("/").at(-1),e.archivo.detalle.filename=e.textButtonDetalle=v.fileName.split("/").at(-1),e.archivo.cabecera.ruta=C.ruta,e.archivo.detalle.ruta=v.ruta,e.showButtons=!0,e.modalExportar=!1,e.showDetalle=[ie["default"].PROCESOS_CONTABLES.VENTAS].includes(o.datos.TIPO_PROCESO),e.$alert("Archivo Exportado Satisfactoriamente","success"),a.a(2,!0);case 19:a.n=21;break;case 20:a.p=20,E=a.v,e.$alert(E.error?E.error.message:E.message,"warning");case 21:return a.a(2)}},a,null,[[0,20]])}))()},onGridReady:function(e){this.api=e.api},eliminarAsientosContables:function(){var e=this,a=this.api.getSelectedRows();a.length>0?this.$confirm("¿Esta seguro de eliminar los elementos seleccionados?","delete").onOk($()(q()().m(function t(){var o,r,n,l,s,i,c,u,d,m;return q()().w(function(t){while(1)switch(t.p=t.n){case 0:t.p=0,e.loading.showLoading=!0,e.loading.total=a.length,e.loading.procesados=0,o=[],r=[],n="",l="",s=R()(a),t.p=1,s.s();case 2:if((i=s.n()).done){t.n=5;break}return c=i.value,t.n=3,j.$http.delete("api/contabilidadController/deleteAsientoContables",{params:{datos:{ID_ASIENTO:c.ID_ASIENTO}}});case 3:u=t.v,1===u.code?o.push(u):r.push(u),e.loading.procesados++;case 4:t.n=2;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,s.e(d);case 7:return t.p=7,s.f(),t.f(7);case 8:o.length>0&&(n="(".concat(o.length,") Asiento Contables Eliminados Satisfactoriamente"),r.length>0?n+=", pero con (".concat(r.length,") errores"):l="success"),r.length>0&&(n+="(".concat(r.length,") Asiento Contables No Eliminados"),l="warning"),e.$alert(n,l),e.getAsientosContables(),e.loading.showLoading=!1,t.n=10;break;case 9:t.p=9,m=t.v,e.loading.showLoading=!1,e.$alert(m.error.message);case 10:return t.a(2)}},t,null,[[1,6,7,8],[0,9]])}))):this.$alert("No selecciono ningun asiento","warning")},setDay:function(){var e=new Date((0,J["default"])().ano,this.selectMes,0).getDate();this.selectFecIni="01/".concat(this.selectMes,"/").concat((0,J["default"])().ano),this.selectFecFin="".concat(e,"/").concat(this.selectMes,"/").concat((0,J["default"])().ano),this.getAsientosContables()},getMeses:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ie["default"].MESES();case 1:e.meses=a.v;case 2:return a.a(2)}},a)}))()},getAsientosContables:function(){var e=this;return $()(q()().m(function a(){var t,o;return q()().w(function(a){while(1)switch(a.n){case 0:if(e.showButtons=!1,e.crearBotones(),!e.selectSubdiario||!e.selectProceso){a.n=2;break}return t={ID_SUBDIARIO:e.selectSubdiario,TIPO_PROCESO:e.selectProceso,FECINI:(0,Z.Ay)((0,ae.convertToYMD)(e.selectFecIni),"YYYY-MM-DD"),FECFIN:(0,Z.Ay)((0,ae.convertToYMD)(e.selectFecFin),"YYYY-MM-DD"),MESCOB:e.selectMes,ANOCOB:(0,J["default"])().ano,SISTEMA:e.sistemaContable,vjson:2,pagina:1,campos:e.campos},e.filter.talonario&&e.filter.talonario.length>0&&(t.numtal=e.filter.talonario),a.n=1,j.$http.get("api/ContabilidadController/getAsientosContables",{params:{datos:t}});case 1:o=a.v,e.rowData=o,e.rowDataInitial=o,e.filterGlosa();case 2:return a.a(2)}},a)}))()},getSubdiario:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ie["default"].API_SUBDIARIO();case 1:e.subDiario=a.v;case 2:return a.a(2)}},a)}))()},getProcesosContables:function(){for(var e=ie["default"].PROCESOS_CONTABLES,a=Object.keys(e),t=0,o=a;t<o.length;t++){var r=o[t];this.objProceso.push({label:"".concat(e[r],"- ").concat(r),value:e[r]})}this.sistemaContable===ie["default"].SISTEMAS_CONTABLES.STARSOFT&&this.objProceso.push({label:"I-TODOS LOS INGRESOS",value:"I"})},verdetalleComprobante:function(e){this.openModal=!0,this.idasiento=e.data.ID_ASIENTO,this.comprobante=e.data.NRODOC},columns:function(){this.frameworkComponents={actionButton:ce.A},this.campos=["SUBDIARIO","PERIODO","NUMERO","NRODOC","GLOSA","FECHA","MONEDA","MONTOTPAG","ID_ASIENTO"],this.columnDefs=[{headerName:"Asiento",width:80,field:"ID_ASIENTO"},{headerName:"Subdiario",width:120,field:"SUBDIARIO"},{headerName:"Periodo",width:100,field:"PERIODO"},{headerName:"Nro. Asiento",width:100,field:"NUMERO"},{headerName:"Nro Documento",width:180,field:"NRODOC"},{headerName:"Glosa",width:300,field:"GLOSA"},{headerName:"Fecha",width:90,field:"FECHA",valueFormatter:function(e){return(0,Z.Ay)(e.value,"DD/MM/YYYY")}},{headerName:"Mon.",width:65,field:"MONEDA"},{headerName:"Importe",width:100,field:"MONTOTPAG",cellClass:"text-right",valueFormatter:ee.toFixed},{cellRenderer:ce.A,width:40,cellRendererParams:{icon:"visibility",title:"Ver Detalle",onClick:this.verdetalleComprobante},hide:this.nivelAcceso<ie["default"].SOLO_LECTURA,filter:!1}]},closeModalCalendar:function(e){this.$refs[e].hide(),this.getAsientosContables()}},beforeMount:function(){var e=this;return $()(q()().m(function a(){return q()().w(function(a){while(1)switch(a.n){case 0:return e.getSubdiario(),e.columns(),e.getMeses(),e.setDay(),e.getTalonarios(),a.n=1,e.getOpcionesParaExportar();case 1:e.crearBotones(),e.getProcesosContables(),e.CHECK_VERSION_COMPLETA=e.sistemaContable==ie["default"].SISTEMAS_CONTABLES.STARSOFT;case 2:return a.a(2)}},a)}))()}},he=t(12807);const Ae=(0,he.A)(be,[["render",M]]);var Se=Ae}}]);