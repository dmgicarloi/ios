"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[11997],{11997:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var a=t(61758),i={class:"row q-col-gutter-sm"},o={class:"col-xs-12 col-sm-4"},r={class:"col-xs-12 col-sm-8"},l={class:"row q-pa-sm q-col-gutter-sm"},c={class:"col-xs-12"},s={class:"col-xs-12"},u={class:"col-xs-12"};function d(e,n){var t=this,d=(0,a.g2)("header-btn"),p=(0,a.g2)("sie-table"),f=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-input"),g=(0,a.g2)("q-form"),v=(0,a.g2)("sie-modal"),C=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(C,{class:"bg-white q-pa-sm sie-flat"},{default:(0,a.k6)(function(){return[(0,a.bF)(m,null,{default:(0,a.k6)(function(){return[(0,a.bF)(d,{name:"Mantenimiento de Tablas (Psicología)",buttons:e.buttons},null,8,["buttons"]),(0,a.bF)(f,null,{default:(0,a.k6)(function(){return[(0,a.Lk)("div",i,[(0,a.Lk)("div",o,[(0,a.bF)(p,{ref:"tabla",columns:e.fields,data:e.rows,onRowSelected:e.rowSelected,selection:"single",config:e.config,context:t,css:{height:"calc(100vh - 150px)"}},null,8,["columns","data","onRowSelected","config"])]),(0,a.Lk)("div",r,[(0,a.bF)(p,{ref:"tablaMantenimiento",columns:e.fieldsMantenimiento,data:e.rowsMantenimiento,config:e.configMantenimiento,context:t,css:{height:"calc(100vh - 150px)"}},null,8,["columns","data","config"])])])]}),_:1})]}),_:1}),(0,a.bF)(v,{modelValue:e.openModal,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.openModal=n}),title:"Agregar: Acción de entrevistas",onSubmit:e.submit},{default:(0,a.k6)(function(){return[(0,a.bF)(g,{class:"col",ref:"form"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",l,[(0,a.Lk)("div",c,[(0,a.bF)(b,{modelValue:e.codigo,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.codigo=n}),label:"Código",rules:[e.notNull],readonly:""},null,8,["modelValue","rules"])]),(0,a.Lk)("div",s,[(0,a.bF)(b,{modelValue:e.descripcion,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.descripcion=n}),label:"Descripción",rules:[e.notNull]},null,8,["modelValue","rules"])]),(0,a.Lk)("div",u,[(0,a.bF)(b,{modelValue:e.equivalencia,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.equivalencia=n}),label:"Equivalencia"},null,8,["modelValue"])])])]}),_:1},512)]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var p=t(76080),f=t.n(p),m=t(45254),b=t.n(m),g=(t(23513),t(6123)),v=t(95718),C={data:function(){return{config:{},rows:[],fields:[{name:"PRINCOD",label:"Código",field:"PRINCOD",align:"center"},{name:"PRINDES",label:"Descripción",field:"PRINDES",align:"left"}]}}},h=(t(89571),{data:function(){return{configMantenimiento:{SECUDES:{component:"input",prevent:!0,autoFocus:!0,input:function(e){var n=this;return b()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.$http.put("api/TablasController/putTablaPsse",{princod:e.PRINCOD,secucod:e.SECUCOD,secudes:e.SECUDES,secuequ:e.SECUEQU});case 1:return t.a(2,!0);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}))()}},SECUEQU:{component:"input",prevent:!0,autoFocus:!0,input:function(e){var n=this;return b()(f()().m(function t(){return f()().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.$http.put("api/TablasController/putTablaPsse",{princod:e.PRINCOD,secucod:e.SECUCOD,secudes:e.SECUDES,secuequ:e.SECUEQU});case 1:return t.a(2,!0);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}))()}},ACTION:{component:"button",icon:["delete"],delete:function(e,n){var t=this;return b()(f()().m(function a(){var i;return f()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.n=1,t.$confirmar("¿Desea Eliminar? El proceso sera irreversible.","delete");case 1:if(i=a.v,!i){a.n=5;break}return a.p=2,a.n=3,t.$http.delete("api/TablasController/deleteTablaPsse",{params:{princod:e.PRINCOD,secucod:e.SECUCOD}});case 3:t.rowsMantenimiento.splice(t.rowsMantenimiento.indexOf(n),1),t.$notify("Registro eliminado correctamente","success"),a.n=5;break;case 4:a.p=4,a.v,t.$notify("No ha sido posible eliminar el registro, inténtalo luego","warning");case 5:return a.a(2)}},a,null,[[2,4]])}))()},tooltip:{delete:"Eliminar"},flat:!0,dense:!0,round:!0}},rowsMantenimiento:[],fieldsMantenimiento:[{name:"SECUCOD",label:"Código",field:"SECUCOD",align:"center",sortable:!0},{name:"SECUDES",label:"Descripción",field:"SECUDES",align:"left"},{name:"SECUEQU",label:"Equivalencia",field:"SECUEQU",align:"left"},{name:"ACTION",label:"Acción",field:"ACTION",align:"center"}]}}}),w=t(30640),E=t(9736),S=t(2739),D=t(2819),U={components:{QCardSection:v.A,sieModal:w.A,QInput:E.A,QForm:S.A,QPage:g.Tu,QCard:g.C$},mixins:[C,h],data:function(){var e=this;return{buttons:[{icon:"print",label:"Imprimir",click:this.print},{icon:"add",label:"Agregar",click:function(){var n=e.$refs.tabla.rowsSelected();if(n.length<1)e.$notify("Seleccionar una opción de tabla","warning");else if(e.rowsMantenimiento.length<1){var t="0001";e.codigo=t,e.openModal=!0}else{var a=String(parseInt(e.rowsMantenimiento[e.rowsMantenimiento.length-1].SECUCOD)+1),i="000".concat(a).slice(-4);e.codigo=i,e.openModal=!0}}}],openModal:!1,codigo:"",descripcion:"",equivalencia:"",currentRowTabla:null}},methods:{print:function(){var e=this.$refs.tabla.rowsSelected();if(e.length<1)this.$notify("Seleccionar una opción de tabla","warning");else{var n={FORMATO:"pdf",codigo:this.currentRowTabla.PRINCOD,report_cod:"tablasTablasPs",repcod:"nuevoReporteAcademico"};(0,D.exportFilePhp)(n,"webservice/reportes/reporte")}},notNull:function(e){return!!e||"Este campo es requerido"},submit:function(){var e=this;return b()(f()().m(function n(){var t;return f()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.n=1,e.$refs.form.validate();case 1:if(t=n.v,!0!==t){n.n=5;break}return n.p=2,n.n=3,e.$http.post("api/TablasController/postTablaPsse",{princod:e.currentRowTabla.PRINCOD,secucod:e.codigo,secudes:e.descripcion,secuequ:e.equivalencia});case 3:e.$refs.tablaMantenimiento.createRow({PRINCOD:e.currentRowTabla.PRINCOD,SECUCOD:e.codigo,SECUDES:e.descripcion,SECUEQU:e.equivalencia},"last"),e.openModal=!1,e.codigo="",e.descripcion="",e.equivalencia="",n.n=5;break;case 4:n.p=4,n.v;case 5:return n.a(2)}},n,null,[[2,4]])}))()},rowSelected:function(e){var n=this;return b()(f()().m(function t(){var a;return f()().w(function(t){while(1)switch(t.n){case 0:return n.currentRowTabla=e,t.n=1,n.getTablaPsse(e.PRINCOD);case 1:a=t.v,n.rowsMantenimiento=a;case 2:return t.a(2)}},t)}))()},getTablaPspr:function(){return this.$http.get("api/TablasController/getTablaPspr")},getTablaPsse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$http.get("api/TablasController/getTablaPsse",{params:{princod:e}})}},created:function(){var e=this;return b()(f()().m(function n(){var t;return f()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getTablaPspr();case 1:t=n.v,e.rows=t;case 2:return n.a(2)}},n)}))()}},T=t(12807);const P=(0,T.A)(U,[["render",d]]);var M=P}}]);