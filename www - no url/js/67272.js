"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[67272],{67272:function(e,a,o){o.r(a),o.d(a,{default:function(){return pe}});var r=o(61758);function t(e,a){var o=(0,r.g2)("lista-personal-academico"),t=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(t,null,{default:(0,r.k6)(function(){return[(0,r.bF)(o,{perfilId:e.perfilId,siscod:e.siscod},null,8,["perfilId","siscod"])]}),_:1})}var l={class:"row q-mx-xs q-pt-sm q-col-gutter-sm"},n={class:"col-12 col-md-2"},i={class:"col-12 col-md-2"},s={class:"col-12 col-md-2"},c={class:"col-12 col-md-2"},u={class:"col-12 col-md-2"},d={class:"col-12 col-md-2"},m={class:"row"},f={class:"col-xs-12"},p={class:"row col-q-gutter-md q-pa-lg"},b={class:"col-xs-12"},O={id:"form"},v={class:"row q-ma-xs q-col-gutter-sm"},h={class:"col-xs-12"},E={class:"row q-ma-xs q-col-gutter-sm"},D={class:"col-xs-12"},g={class:"row q-ma-xs q-col-gutter-sm"},R={class:"col-xs-12 col-sm-4"},C={class:"col-xs-12 col-sm-4"},P={class:"col-xs-12 col-sm-4"},w={class:"row q-ma-xs q-col-gutter-sm"},A={key:0,class:"col-xs-4"},M={class:"q-gutter-sm"},k={class:"row q-pa-sm q-col-gutter-sm"},S={class:"col-xs-12 col-sm-6"},F={class:"col-xs-12 col-sm-6"};function I(e,a){var o=this,t=(0,r.g2)("header-btn"),I=(0,r.g2)("q-separator"),_=(0,r.g2)("q-select"),q=(0,r.g2)("q-input"),T=(0,r.g2)("q-card-section"),N=(0,r.g2)("sie-table"),L=(0,r.g2)("q-card"),V=(0,r.g2)("q-option-group"),x=(0,r.g2)("q-date"),U=(0,r.g2)("q-popup-proxy"),y=(0,r.g2)("q-icon"),B=(0,r.g2)("q-btn"),$=(0,r.g2)("sie-modal"),G=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(G,{class:"personal bg-white q-pa-sm sie-flat"},{default:(0,r.k6)(function(){return[(0,r.bF)(L,null,{default:(0,r.k6)(function(){return[(0,r.bF)(t,{name:e.titulo,buttons:e.buttons},null,8,["name","buttons"]),(0,r.bF)(I),(0,r.bF)(T,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",l,[(0,r.Lk)("div",n,[(0,r.bF)(_,{options:e.tipoEstado,label:"Filtrar por estado",modelValue:e.valorFiltroEstado,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.valorFiltroEstado=a}),outlined:""},null,8,["options","modelValue"])]),(0,r.Lk)("div",i,[(0,r.bF)(q,{label:"Codigo",placeholder:"Codigo",modelValue:e.params.CODIGO,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.params.CODIGO=a}),outlined:""},null,8,["modelValue"])]),(0,r.Lk)("div",s,[(0,r.bF)(q,{label:"Nombre",placeholder:"Nombre",modelValue:e.params.NOMBRE_COMPLETO,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.params.NOMBRE_COMPLETO=a}),outlined:""},null,8,["modelValue"])]),(0,r.Lk)("div",c,[(0,r.bF)(q,{label:"Cargo",placeholder:"Cargo",modelValue:e.params.CARGO,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.params.CARGO=a}),outlined:""},null,8,["modelValue"])]),(0,r.Lk)("div",u,[(0,r.bF)(q,{label:"N.Documento",placeholder:"N.Documento",modelValue:e.params.DOCUMENTO,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.params.DOCUMENTO=a}),outlined:""},null,8,["modelValue"])]),(0,r.Lk)("div",d,[(0,r.bF)(_,{options:e.tiposDocumentoOriginal,label:"Tipos Documento",modelValue:e.filtroDocumento,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.filtroDocumento=a}),outlined:""},null,8,["options","modelValue"])])])]}),_:1}),(0,r.bF)(T,null,{default:(0,r.k6)(function(){return[(0,r.Lk)("div",m,[(0,r.Lk)("div",f,[(0,r.bF)(N,{ref:"personal",data:e.listaPersonal,columns:e.fields,config:e.config,context:o,showSearch:!1,css:{height:"calc(100vh - 251px)"},showRefresh:!0,onRowSelected:e.rowSelect,onRefresh:e.getPersonal,selection:"multiple"},null,8,["data","columns","config","onRowSelected","onRefresh"])]),a[22]||(a[22]=(0,r.Lk)("div",{class:"col-12 content-leyenda"},[(0,r.Lk)("div",{class:"row q-gutter-sm"},[(0,r.Lk)("div",{class:"leyenda column items-center justify-center"},[(0,r.Lk)("div",{class:"leyenda-left q-pr-sm"},[(0,r.Lk)("div",{class:"leyenda-color bg-yellow-3"})]),(0,r.Lk)("div",{class:"leyenda-right"},[(0,r.Lk)("span",null,"Retirado")])])])],-1))])]}),_:1})]}),_:1}),(0,r.bF)($,{modelValue:e.abrirModalReporte,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.abrirModalReporte=a}),persistent:!1,title:"Ventana de Impresiones",footer:!0,ok:!1},{postButtonFooter:(0,r.k6)(function(){return[(0,r.Lk)("div",M,[(0,r.bF)(B,{color:"primary",onClick:a[14]||(a[14]=function(a){return e.imprimirReporte("pdf")}),label:"PDF",icon:"file_pdf",dense:"",style:{width:"100px"}}),(0,r.bF)(B,{color:"primary",onClick:a[15]||(a[15]=function(a){return e.imprimirReporte("xlsx")}),label:"EXCEL",icon:"file_excel",dense:"",style:{width:"100px"}})])]}),default:(0,r.k6)(function(){return[(0,r.Lk)("div",p,[(0,r.Lk)("div",b,[(0,r.Lk)("form",O,[a[26]||(a[26]=(0,r.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,r.Lk)("div",{class:"text-h6"},"Reportes Personal")],-1)),(0,r.Lk)("div",v,[(0,r.Lk)("div",h,[(0,r.bF)(V,{modelValue:e.selectReportes,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.selectReportes=a}),options:e.botonReportes,disable:!1,type:"radio",color:"primary",onInput:a[7]||(a[7]=function(a){return e.getReporte(e.selectReportes)})},null,8,["modelValue","options"])]),a[23]||(a[23]=(0,r.Lk)("div",{class:"col-xs-12"},null,-1))]),(0,r.Lk)("div",E,[(0,r.Lk)("div",D,[(0,r.bF)(I)]),a[24]||(a[24]=(0,r.Lk)("div",{class:"col-xs-12"},null,-1))]),a[27]||(a[27]=(0,r.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,r.Lk)("div",{class:"text-h6"},"Parámetros")],-1)),(0,r.Lk)("div",g,[a[25]||(a[25]=(0,r.Lk)("div",{class:"col-xs-12"},null,-1)),(0,r.Lk)("div",R,[(0,r.bF)(_,{modelValue:e.valorParametro,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.valorParametro=a}),options:e.parametroPersonal,label:"Docente",outlined:"",disable:e.bloquearDocente},null,8,["modelValue","options","disable"])]),(0,r.Lk)("div",C,[(0,r.bF)(_,{modelValue:e.valorOrden,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.valorOrden=a}),options:e.ordenAlfabetico,label:"Orden",outlined:"",disable:e.bloquearOrden},null,8,["modelValue","options","disable"])]),(0,r.Lk)("div",P,[(0,r.bF)(q,{modelValue:e.fecha,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.fecha=a}),debounce:"500",maxlength:"10",format:"##/##/####",mask:"##/##/####",label:"Fecha",disable:e.bloquearFecha},{append:(0,r.k6)(function(){return[(0,r.bF)(y,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(U,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(x,{mask:"DD/MM/YYYY",modelValue:e.fecha,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.fecha=a}),onInput:a[11]||(a[11]=function(a){return e.closeModalCalendar("qDateProxy1")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","disable"])])]),(0,r.Lk)("div",w,[e.mostrarMeses?((0,r.uX)(),(0,r.CE)("div",A,[(0,r.bF)(_,{label:"Meses",placeholder:"Seleccione un Mes","option-value":"value","option-label":"label",options:e.meses,modelValue:e.seleccionarMes,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.seleccionarMes=a})},null,8,["options","modelValue"])])):(0,r.Q3)("v-if",!0)])])])])]}),_:1},8,["modelValue"]),(0,r.bF)($,{modelValue:e.abrirModalRetirar,"onUpdate:modelValue":a[21]||(a[21]=function(a){return e.abrirModalRetirar=a}),showButtonCancel:!1,title:"Retirar Personal en Bloque",labelButtonOk:"Procesar",iconButtonOk:"cogs",onSubmit:e.retirarBloque},{default:(0,r.k6)(function(){return[(0,r.Lk)("div",k,[(0,r.Lk)("div",S,[(0,r.bF)(_,{modelValue:e.selectMotivos,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.selectMotivos=a}),options:e.motivos,label:"Motivo de Salida",outlined:""},null,8,["modelValue","options"])]),(0,r.Lk)("div",F,[(0,r.bF)(q,{modelValue:e.fecsal,"onUpdate:modelValue":a[20]||(a[20]=function(a){return e.fecsal=a}),debounce:"500",maxlength:"10",format:"##/##/####",mask:"##/##/####",label:"Fecha Salida"},{append:(0,r.k6)(function(){return[(0,r.bF)(y,{class:"cursor-pointer",name:"date_range"},{default:(0,r.k6)(function(){return[(0,r.bF)(U,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)(function(){return[(0,r.bF)(x,{mask:"DD/MM/YYYY",modelValue:e.fecsal,"onUpdate:modelValue":a[18]||(a[18]=function(a){return e.fecsal=a}),onInput:a[19]||(a[19]=function(a){return e.closeModalCalendar("qDateProxy2")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var _=o(99550),q=o.n(_),T=o(8445),N=o.n(T),L=o(76080),V=o.n(L),x=o(45254),U=o.n(x),y=(o(12563),o(30683),o(71225),o(74260),o(39866),o(77507),o(52133),o(10239),o(50310),o(5962),o(32203),o(6724),o(11777),o(83190),o(44264),o(62692),o(6235)),B=o(80660),$=o(88567),G=o(95718),Y=o(2739),Q=o(9736),X=o(53380),H=o(16648),j=o(4437),z=o(95477),J=o(18105),W=o(99515),K=o(93616),Z=o(33777),ee=o(41615),ae=o(30640),oe=o(38103),re={data:function(){return{config:{CODIGO:{renderHtml:function(e,a,o,r){return[0].includes(e.ESTADO)?r["$$background"]="yellow-3":r["$$background"]="white",a("span",e.PROFCOD)}},FECHA_NACIMIENTO:{component:"date",format:"DD/MM/YYYY",edit:!1},ACCIONES:{component:"button",icon:["edit as editar","delete as eliminar"],editar:function(e,a){var o=this;return U()(V()().m(function e(){return V()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.editar(a);case 1:return e.a(2)}},e)}))()},eliminar:function(e,a){var o=this;return U()(V()().m(function e(){return V()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.eliminar(a);case 1:return e.a(2)}},e)}))()},dense:!0,flat:!0,tooltip:{edit:"Editar",delete:"Eliminar"},permisos:{eliminar:"=== 3"}}},rows:[],fields:[{name:"CODIGO",label:"Código",field:"PROFCOD",align:"left",sortable:!0},{name:"NOMBRE_COMPLETO",label:"Apellidos y Nombres",field:"NOMBRE_COMPLETO",align:"left",sortable:!0},{name:"CARGO",label:"Cargo",field:"CARGODES",align:"left",sortable:!0},{name:"DOCENTE",label:"Docente",field:"ES_DOCENTE",align:"left",sortable:!0},{name:"FECHA_NACIMIENTO",label:"Fecha Nac.",field:"FECHA_NACIMIENTO",align:"left",sortable:!0},{name:"TIPO_DOCUMENTO",label:"Tipo Doc.",field:"TIPDOC",align:"left",sortable:!0},{name:"NUMERO_DOCUMENTO",label:"Nro. Doc",field:"NUMDOC",align:"left",sortable:!0},{name:"SEXO",label:"Sexo",field:"SEXODES",align:"center",sortable:!0},{name:"ACCIONES",label:"Acciones",field:"ACCIONES",align:"center"}],selectReportes:1,botonReportes:[{label:"Relación del Personal Activo",value:1},{label:"Relación del Personal Activo/Nombre",value:2},{label:"Relaci&oacute;n del Personal Retirado",value:3},{label:"Ficha del Personal",value:4},{label:"Ficha medica del Personal",value:5},{label:"Ficha del Personal en blanco",value:6},{label:"Consejeros por Salón",value:7},{label:"Directorio Telefónico",value:8},{label:"Fotos del Personal",value:9},{label:"Certificado de Trabajo",value:10},{label:"Constancia de Trabajo",value:11},{label:"Lista de Cumpleaños",value:12}],bloquearFecha:!0,bloquearOrden:!1,bloquearDocente:!1,mostrarMeses:!1,isPdf:!0,isXlsx:!0}},methods:{getReporte:function(e){var a=this.botonReportes.find(function(a){return a.value===e});return this.actualizarVisibilidadReporte(e),a},actualizarVisibilidadReporte:function(e){var a=this;return U()(V()().m(function o(){var r;return V()().w(function(o){while(1)switch(o.n){case 0:a.isPdf=!1,a.isXlsx=!1,r=e,o.n=1===r||2===r||3===r?1:4===r||5===r||6===r||7===r?2:8===r||9===r?3:10===r||11===r?4:12===r?5:6;break;case 1:return a.bloquearDocente=!1,a.bloquearFecha=!0,a.bloquearOrden=!1,o.a(3,6);case 2:return a.bloquearDocente=!0,a.bloquearFecha=!0,a.bloquearOrden=!0,o.a(3,6);case 3:return a.bloquearDocente=!1,a.bloquearFecha=!0,a.bloquearOrden=!0,o.a(3,6);case 4:return a.bloquearFecha=!1,a.bloquearDocente=!0,a.bloquearOrden=!0,o.a(3,6);case 5:a.verMeses=!0,a.bloquearFecha=!0,a.bloquearDocente=!0,a.bloquearOrden=!0;case 6:[5,9,10,11].includes(e)?a.isPdf=!0:(a.isPdf=!0,a.isXlsx=!0);case 7:return o.a(2)}},o)}))()}}},te=o(57668),le=o(2819),ne=o(11654),ie=o(34262),se={mixins:[re],props:{perfilId:{type:[Number,String],default:ee["default"].PERFIL_PERSONAL},siscod:{type:[Number,String],default:ee["default"].SISCOD_ACADEMICO}},components:{QInnerLoading:y.SQU,QOptionGroup:y.EXb,sieModal:ae.A,QSpinnerOval:y.VAU,sieTable:Z.A,QRadio:W.A,QSelect:H.A,sieSelect:K.A,QCard:$.A,QCardSection:G.A,QForm:Y.A,QInput:Q.A,QSeparator:X.A,QDate:j.A,date:J.Ay,QPopupProxy:z.A,QBtn:ne.A,QIcon:ie.A},data:function(){return{api:null,buttons:[{label:"Nuevo",icon:"add",click:this.agregar,permiso:"===3"},{label:"Imprimir",icon:"print",click:this.openModalReporte},{label:"Retirar en Bloque",icon:"user_cancel",click:this.openModalRetirar,permiso:"===3"},{label:"Eliminar en Bloque",icon:"user_del",click:this.eliminarBloque,permiso:"===3"}],rowFila:{},titulo:"Personal",valorFiltroEstado:"2",tipoEstado:[{label:"Todos",value:"2"},{label:"Activo",value:"1"},{label:"Inactivo",value:"0"}],ordenAlfabetico:[{label:"Código",value:"Código"},{label:"Alfabético",value:"Alfabético"}],valorOrden:"Código",parametroPersonal:[{label:"Todos",value:"%"},{label:"Docente",value:"S"},{label:"Otro Personal",value:"N"}],valorParametro:"%",params:{IDPERSONA:"",CODIGO:"",NOMBRE_COMPLETO:"",CARGO:"",ESTUDIO:this.valorFiltroEstado,DOCUMENTO:"",NUMERO_DOCUMENTO:""},rowSelected:{},tiposDocumentoOriginal:[],meses:[],selectAnio:String((0,te["default"])().ano),fecha:"",filtroDocumento:"Todos",seleccionarMes:"01",selectedReport:null,filaSeleccionada:null,abrirModalReporte:!1,abrirModalRetirar:!1,bloquearFecha:!0,selectMotivos:null,motivos:[],fecsal:null,isPdf:!0,isXlsx:!0}},computed:{listaPersonal:function(){var e=this,a=this.rows,o=[{label:"PROFCOD",value:this.params.CODIGO},{label:"NOMBRE_COMPLETO",value:this.params.NOMBRE_COMPLETO},{label:"CARGODES",value:this.params.CARGO},{label:"NUMDOC",value:this.params.DOCUMENTO},{label:"ID_TIPODOC",value:this.params.NUMERO_DOCUMENTO}];return o.forEach(function(e){e.value&&(a=a.filter(function(a){return a[e.label]&&a[e.label].toString().toLowerCase().includes(e.value.toLowerCase())}))}),"2"!==this.valorFiltroEstado&&(a=a.filter(function(a){return a.ESTADO.toString()===e.valorFiltroEstado})),"Todos"!==this.filtroDocumento&&(a=a.filter(function(a){return a.ID_TIPODOC===e.filtroDocumento})),a}},methods:{closeModalCalendar:function(e){this.$refs[e].hide()},getPersonal:function(){var e=this;return U()(V()().m(function a(){var o,r,t;return V()().w(function(a){while(1)switch(a.p=a.n){case 0:return o={ID_PERSONA:e.params.IDPERSONA||"",PROFCOD:e.params.CODIGO||"",NOMBRE:e.params.NOMBRE_COMPLETO||"",CARGO:e.params.CARGO||"",NUMDOC:e.params.DOCUMENTO||"",ESTADO:e.params.ESTADO||"",ID_TIPODOC:"Todos"===e.filtroDocumento?"":e.filtroDocumento||""},a.p=1,a.n=2,oe["default"].API_PERSONA_TRABAJADORES(o);case 2:r=a.v,console.log({data:r}),e.rows=r,a.n=4;break;case 3:a.p=3,t=a.v,Error.message("Error al obtener datos de personal:",t);case 4:return a.a(2)}},a,null,[[1,3]])}))()},getParametroPersonal:function(e){var a=this.parametroPersonal.find(function(a){return a.value===e});return a},getOrden:function(e){var a=this.ordenAlfabetico.find(function(a){return a.value===e});return a},rowSelect:function(e,a){this.rowSelected=e,this.rowFila=a},getEstado:function(e){var a=this.tipoEstado.find(function(a){return a.value===e});return a},getDocumento:function(){var e=this;return U()(V()().m(function a(){var o,r;return V()().w(function(a){while(1)switch(a.n){case 0:return o={IDENTIDAD:e.getDocumentoFiltro||""},a.n=1,B.$http.get("api/personaController/getTipoDocumentoIdentidad",{params:o});case 1:r=a.v,e.tiposDocumentoOriginal=[{label:"Todos",value:"Todos"}].concat(N()(r.map(function(e){return{label:e.ABREVIATURA,value:e.ID_TIPODOC}})));case 2:return a.a(2)}},a)}))()},getDocumentoFiltro:function(){var e=this;return U()(V()().m(function a(){return V()().w(function(a){while(1)switch(a.n){case 0:e.getPersonal();case 1:return a.a(2)}},a)}))()},agregar:function(){var e=this;return U()(V()().m(function a(){var o;return V()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ee["default"].OBTENER_ROUTER_AGREGAR_PERSONA_TRABAJADOR(e.siscod);case 1:o=a.v,e.$router.push({name:o});case 2:return a.a(2)}},a)}))()},editar:function(e){var a=this;return U()(V()().m(function o(){var r,t,l,n,i,s;return V()().w(function(o){while(1)switch(o.n){case 0:if(a.perfilId!==ee["default"].TODOS){o.n=2;break}return o.n=1,B.$http.get("api/personaController/getPerfilesPorPersona",{row:{row:{idPersona:e.ID_PERSONA}}});case 1:r=o.v,t=r.perfiles,l=q()(t,1),n=l[0],a.perfilId=n.ID_PERFIL;case 2:return i=e&&e.CODIGO?e.CODIGO:null,o.n=3,ee["default"].OBTENER_ROUTER_EDITAR_PERSONA(a.siscod);case 3:return s=o.v,o.n=4,a.$router.push({name:s,params:{personaId:e.ID_PERSONA,id_perfam:i,perfilId:e.ID_PERFIL},query:{esTaller:a.esTaller,siscod:a.siscod}});case 4:return o.a(2)}},o)}))()},eliminar:function(e){var a=this;return U()(V()().m(function o(){var r;return V()().w(function(o){while(1)switch(o.n){case 0:r=e.NOMBRE_COMPLETO?e.NOMBRE_COMPLETO:e.ID_PERSONA,a.$confirm("¿Está seguro de eliminar a: \n ".concat(r," ?"),"Confirmar eliminación").onOk(U()(V()().m(function o(){var t;return V()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,B.$http.delete("api/personaController/deletePersona",{params:{id:e.ID_PERSONA,id_perfil:e.ID_PERFIL}});case 1:return a.$notify("Personal eliminado satisfactoriamente","success"),o.n=2,a.getPersonal();case 2:o.n=4;break;case 3:o.p=3,t=o.v,a.$alert("No se puede eliminar a ".concat(r,". Error: ").concat(t.message),"Error");case 4:return o.a(2)}},o,null,[[0,3]])})));case 1:return o.a(2)}},o)}))()},openModalReporte:function(){var e=this;return U()(V()().m(function a(){return V()().w(function(a){while(1)switch(a.n){case 0:e.getMeses(),e.abrirModalReporte=!0;case 1:return a.a(2)}},a)}))()},openModalRetirar:function(){var e=this;return U()(V()().m(function a(){var o;return V()().w(function(a){while(1)switch(a.n){case 0:if(e.selectMotivos="",e.fecsal=(0,J.Ay)(new Date,"DD/MM/YYYY"),o=e.$refs.personal.rowsSelected(),0!==o.filter(function(e){return 1===e.ESTADO}).length){a.n=1;break}return e.$notify("Debe seleccionar registros activos","info"),a.a(2);case 1:e.abrirModalRetirar=!0;case 2:return a.a(2)}},a)}))()},retirarBloque:function(){var e=this;return U()(V()().m(function a(){var o,r,t;return V()().w(function(a){while(1)switch(a.n){case 0:if(""!==e.selectMotivos){a.n=1;break}return e.$notify("Debe seleccionar un Motivo","info"),a.a(2);case 1:o=e.$refs.personal.rowsSelected(),r=o.filter(function(e){return 1===e.ESTADO}),t=(e.fecsal||"").split("/").reverse().join("-"),e.$confirm("¿Está seguro de retirar en Bloque?","Confirmar retiro").onOk(U()(V()().m(function a(){var o,l;return V()().w(function(a){while(1)switch(a.p=a.n){case 0:a.p=0,o=0;case 1:if(!(o<r.length)){a.n=3;break}return a.n=2,B.$http.post("api/personaController/retirarPersonal",{params:{id_persona:r[o].ID_PERSONA,id_perfil:r[o].ID_PERFIL,motivo_salida:e.selectMotivos,fecha_fin:t}});case 2:o++,a.n=1;break;case 3:return e.$notify("Personal actualizado satisfactoriamente","success"),e.abrirModalRetirar=!1,a.n=4,e.getPersonal();case 4:a.n=6;break;case 5:a.p=5,l=a.v,e.$alert("No se puede actualizar en Bloque. Error: ".concat(l.message),"Error");case 6:return a.a(2)}},a,null,[[0,5]])})));case 2:return a.a(2)}},a)}))()},eliminarBloque:function(){var e=this;return U()(V()().m(function a(){var o;return V()().w(function(a){while(1)switch(a.n){case 0:if(o=e.$refs.personal.rowsSelected(),0!==o.length){a.n=1;break}return e.$notify("Debe seleccionar registros","info"),a.a(2);case 1:e.$confirm("¿Está seguro de eliminar en Bloque?","Confirmar eliminación").onOk(U()(V()().m(function a(){var r,t;return V()().w(function(a){while(1)switch(a.p=a.n){case 0:a.p=0,r=0;case 1:if(!(r<o.length)){a.n=3;break}return a.n=2,B.$http.delete("api/personaController/deletePersona",{params:{id:o[r].ID_PERSONA,id_perfil:o[r].ID_PERFIL}});case 2:r++,a.n=1;break;case 3:return e.$notify("Personal eliminado satisfactoriamente","success"),a.n=4,e.getPersonal();case 4:a.n=6;break;case 5:a.p=5,t=a.v,e.$alert("No se puede eliminar en Bloque. Error: ".concat(t.message),"Error");case 6:return a.a(2)}},a,null,[[0,5]])})));case 2:return a.a(2)}},a)}))()},getMeses:function(){var e=this;return U()(V()().m(function a(){return V()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,ee["default"].MESES();case 1:e.meses=a.v;case 2:return a.a(2)}},a)}))()},imprimirReporte:function(e){var a=this.getParametroPersonal(this.valorParametro),o=this.getOrden(this.valorOrden),r=this.getReporte(this.selectReportes),t=this.getEstado(this.valorFiltroEstado),l=this.rows.length>0?this.rows[0].PROFCOD:"",n=this.rowSelected?this.rowSelected.PROFCOD:l,i=this.rows.length>0?this.rows[0].CARGODES:"",s=this.rowSelected?this.rowSelected.CARGODES:i,c=this.meses,u={DOCEST:a.value,ESTADO:t.value,ORDEN:o.label,FECHAHOY:this.fecha,CARGODES:s||"Docente",FORMATO:e,TIPREPORT:this.selectReportes,REPORT:r?r.label:"",RADIO:r.value,PROFCOD:n,CUMPLE_MES:c,report_cod:"personal_activo",repcod:"nuevoReporteAcademico"};(0,le.exportFilePhp)(u,"webservice/reportes/reporte")},getMotivos:function(){var e=this;return U()(V()().m(function a(){var o;return V()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoTablaSe/getTablaSeAcademico",{params:{princod:"008"}});case 1:o=a.v,e.motivos=[{label:"- Motivo -",value:""}].concat(N()(o.map(function(e){return{label:e.SECUDES,value:e.SECUCOD}})));case 2:return a.a(2)}},a)}))()}},created:function(){var e=(0,te["default"])().colcod,a=["0166"],o=["0031","0055","0076"];a.includes(e)||(this.botonReportes=this.botonReportes.filter(function(e){return![10,11].includes(e.value)})),o.includes(e)||(this.botonReportes=this.botonReportes.filter(function(e){return 12!==e.value})),this.fecha=(0,J.Ay)(new Date,"DD/MM/YYYY"),this.getPersonal(),this.getDocumento(),this.getMotivos(),this.rowSelect()}},ce=o(12807);const ue=(0,ce.A)(se,[["render",I]]);var de=ue,me={components:{ListaPersonalAcademico:de},data:function(){return{siscod:ee["default"].SISCOD_INTRANET,perfilId:ee["default"].PERFIL_PERSONAL,agregarPersonalUrl:"intranet.mantenimientoPersonal.agregar",editarPersonalUrl:"intranet.mantenimientoPersonal.editar",backUrl:"intranet.mantenimientoPersonal.listar"}}};const fe=(0,ce.A)(me,[["render",t]]);var pe=fe}}]);