"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[87840],{87840:function(e,a,t){t.r(a),t.d(a,{default:function(){return Fe}});var i=t(8445),n=t.n(i),o=(t(30683),t(61758)),r=t(29104),l=t(58790),u={class:"intranet--galeria-editar q-pa-sm col column"},s={class:"row col scroll-y"},d={key:1,class:"col-12 bg-white"},c={class:"row q-gutter-sm items-center q-pa-sm"},m={class:"col"},p={key:0,class:"absolute",style:{top:"0",left:"0",right:"0",bottom:"0",margin:"auto",height:"50px"},version:"1.1",viewBox:"0 0 68 48",width:"100%"},f={class:"row q-col-gutter-sm items-center q-pa-sm"},g={class:"col-12",style:{"font-size":"13px","font-variant":"all-small-caps"}},h={class:"col-12"},b={class:"row q-gutter-sm items-center"},v={class:"col",style:{"font-size":"12px"}},k={class:"text-bold"},C={key:0,class:"col-12",style:{"font-size":"13px"}},I={key:2,class:"col-12"},y={class:"row"},L={class:"col-12"},q={class:"column col items-center justify-center",style:{"min-height":"calc(100vh - 160px)"}},w={class:"col column justify-center items-center"},F={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-xs"},U={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-xs"},_={key:0},S={key:1},E={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-md"},A={class:"row"},Q={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-xs"},V={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-xs"},T={class:"row col column"},x={class:"q-pa-sm col column"};function X(e,a){var t=(0,o.g2)("header-btn"),i=(0,o.g2)("sie-upload"),X=(0,o.g2)("q-spinner-oval"),O=(0,o.g2)("q-inner-loading"),D=(0,o.g2)("sie-usuario"),M=(0,o.g2)("q-icon"),$=(0,o.g2)("q-item-main"),N=(0,o.g2)("q-item"),P=(0,o.g2)("q-list"),R=(0,o.g2)("q-popover"),G=(0,o.g2)("q-btn"),z=(0,o.g2)("q-card-media"),j=(0,o.g2)("q-card"),K=(0,o.g2)("elegant-grid"),W=(0,o.g2)("q-card-section"),Y=(0,o.g2)("crear-categoria"),B=(0,o.g2)("q-input"),H=(0,o.g2)("sie-modal"),J=(0,o.g2)("sie-vacio"),Z=(0,o.g2)("q-card-main"),ee=(0,o.g2)("sie-slider"),ae=(0,o.g2)("q-item-side"),te=(0,o.g2)("q-modal"),ie=(0,o.g2)("q-search"),ne=(0,o.g2)("q-table"),oe=(0,o.gN)("close-overlay"),re=(0,o.gN)("download"),le=(0,o.gN)("lazy");return(0,o.uX)(),(0,o.CE)("div",u,[(0,o.bF)(j,{class:"col column",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(t,{name:"Galería - ".concat(e.params.DESCRIPCION),buttons:e.buttons},null,8,["name","buttons"]),(0,o.bF)(W,{class:"col column"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",s,[(0,o.bo)((0,o.bF)(i,{ref:"upload",title:"Arrastre una imagen o pdf, o haga clic para agregar",preview:!1,onUpload:e.uploadImageTmp,multiple:"",allow:["jpeg","jpg","gif","png"]},{delete:(0,o.k6)(function(){return n()(a[11]||(a[11]=[(0,o.Lk)("div",null,null,-1)]))}),_:1},8,["onUpload"]),[[r.aG,!1]]),"S"===e.stepLoading?((0,o.uX)(),(0,o.Wv)(O,{key:0,visible:"S"===e.stepLoading},{default:(0,o.k6)(function(){return[(0,o.bF)(X,{size:"50px",color:"primary"})]}),_:1},8,["visible"])):"Y"===e.stepLoading?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.bF)(K,{data:e.multimediaCards},{default:(0,o.k6)(function(t){var i=t.item,r=t.index;return[(0,o.Lk)("div",null,[(0,o.bF)(j,{flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",c,[(0,o.bF)(D,{usucod:i.USUCOD,size:"xs"},null,8,["usucod"]),(0,o.Lk)("div",m,(0,l.v_)(i.USUNOM),1),e.sieInfo.ruta.nivel>=2?((0,o.uX)(),(0,o.Wv)(G,{key:0,dense:"",round:"",flat:"",icon:"more_horiz"},{default:(0,o.k6)(function(){return[(0,o.bF)(R,{anchor:"top right",self:"top right"},{default:(0,o.k6)(function(){return[(0,o.bF)(P,{class:"no-border",link:""},{default:(0,o.k6)(function(){return[(0,o.bo)(((0,o.uX)(),(0,o.Wv)(N,{onClick:function(a){return e.editarImagen(r,i.IDGALERIA)}},{default:(0,o.k6)(function(){return[(0,o.bF)(M,{class:"qicon",name:"edit"}),(0,o.bF)($,{class:"qitemmain",label:e.$t("botones.editar")},null,8,["label"])]}),_:1},8,["onClick"])),[[oe]]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(N,null,{default:(0,o.k6)(function(){return[(0,o.bF)(M,{class:"qicon",name:"cloud_download"}),(0,o.bF)($,{class:"qitemmain",label:e.$t("botones.descargar")},null,8,["label"])]}),_:1})),[[oe],[re,{filename:"".concat(i.TITULO,".").concat(i.EXTENSION),url:"video"===i.TIPO?i.ARCHIVO:i.src}]]),3==e.sieInfo.ruta.nivel?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(N,{key:0,onClick:function(a){return e.eliminarImagen(r,i.IDGALERIA)}},{default:(0,o.k6)(function(){return[(0,o.bF)(M,{class:"qicon",name:"delete"}),(0,o.bF)($,{class:"qitemmain",label:e.$t("botones.eliminar")},null,8,["label"])]}),_:1},8,["onClick"])),[[oe]]):(0,o.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,o.Q3)("v-if",!0)]),(0,o.bF)(z,{class:"intranet-galeria-editar--video-height cursor-pointer",onClick:function(a){e.number=r,e.openSlider=!0}},{default:(0,o.k6)(function(){return[(0,o.bo)((0,o.Lk)("img",null,null,512),[[le,i.src]]),"video"===i.TIPO?((0,o.uX)(),(0,o.CE)("svg",p,n()(a[12]||(a[12]=[(0,o.Lk)("path",{class:"ytp-large-play-button-bg",d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#212121","fill-opacity":"0.8"},null,-1),(0,o.Lk)("path",{d:"M 45,24 27,14 27,34",fill:"#fff"},null,-1)])))):(0,o.Q3)("v-if",!0)]}),_:2},1032,["onClick"]),(0,o.Lk)("div",f,[(0,o.Lk)("div",g,(0,l.v_)(i.TITULO),1),(0,o.Lk)("div",h,[(0,o.Lk)("div",b,[(0,o.bF)(M,{name:"calendar",color:"primary",size:"17px"}),(0,o.Lk)("div",v,[(0,o.Lk)("div",k,(0,l.v_)(e.date(i.FH_PUBLICACION,"DD/MM/YYYY")),1)])])]),i.DESCRIPCION?((0,o.uX)(),(0,o.CE)("div",C,(0,l.v_)(i.DESCRIPCION),1)):(0,o.Q3)("v-if",!0)])]}),_:2},1024)])]}),_:1},8,["data"])])):(0,o.Q3)("v-if",!0),e.multimediaCards.length<1?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",y,[(0,o.Lk)("div",L,[(0,o.Lk)("div",q,[(0,o.Lk)("div",w,[(0,o.bF)(M,{class:"wallpaper",name:"wallpaper"}),a[13]||(a[13]=(0,o.Lk)("span",{class:"title"},[(0,o.Lk)("b",null,"No se encontraron resultados")],-1)),a[14]||(a[14]=(0,o.Lk)("span",{class:"subtitle"},"Al crear una galería se podrá apreciar aquí",-1))])])])])])):(0,o.Q3)("v-if",!0)])]}),_:1})]}),_:1}),(0,o.bF)(Y,{modelValue:e.opened,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.opened=a}),onSave:e.modifyCategoria,name:e.category,"onUpdate:name":a[1]||(a[1]=function(a){return e.category=a}),id:e.params.IDCATEGORIA,aulas:e.params.salones,anio:e.params.ID_PROMOCION,"onUpdate:anio":a[2]||(a[2]=function(a){return e.params.ID_PROMOCION=a})},null,8,["modelValue","onSave","name","id","aulas","anio"]),(0,o.bF)(H,{class:"sieModal",modelValue:e.openedEditar,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.openedEditar=a}),title:"Editando imagen",onSubmit:e.saveEditarImagen},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",F,[(0,o.bF)(B,{modelValue:e.editarImg.titulo,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.editarImg.titulo=a}),"float-label":"Título"},null,8,["modelValue"])]),(0,o.Lk)("div",U,[(0,o.bF)(B,{type:"textarea",modelValue:e.editarImg.descripcion,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.editarImg.descripcion=a}),"float-label":"Descripción"},null,8,["modelValue"])])]}),_:1},8,["modelValue","onSubmit"]),(0,o.bF)(H,{column:e.multimediaTmp.length<1,modelValue:e.showImages,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.showImages=a}),title:"Nueva Imagen",onSubmit:e.saveMultimediaTmp},{customButtons:(0,o.k6)(function(){return[(0,o.Lk)("div",null,[3===e.sieInfo.ruta.nivel?((0,o.uX)(),(0,o.Wv)(G,{key:0,flat:"",round:"",dense:""},{default:(0,o.k6)(function(){return[(0,o.bF)(M,{name:"plus",onClick:e.loadActionSheet},null,8,["onClick"])]}),_:1})):(0,o.Q3)("v-if",!0)])]}),default:(0,o.k6)(function(){return[e.multimediaTmp.length<1?((0,o.uX)(),(0,o.Wv)(J,{key:0,icon:"wallpaper",title:"No se encontraron resultados"})):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},["Y"===e.uploadLoading?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.bF)(O,{visible:"Y"===e.uploadLoading},{default:(0,o.k6)(function(){return[(0,o.bF)(X,{size:"50px",color:"primary"})]}),_:1},8,["visible"])])):((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",E,[(0,o.Lk)("div",A,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.multimediaTmp,function(a,t){return(0,o.uX)(),(0,o.CE)("div",{key:t,class:"col-12 q-pa-xs"},[(0,o.bF)(j,null,{default:(0,o.k6)(function(){return["img"===a.tipo?((0,o.uX)(),(0,o.Wv)(z,{key:0},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",{class:"img",style:(0,l.Tr)({"background-image":"url("+a.image+")"})},[(0,o.bF)(M,{class:"delete-icon bg-secondary",name:"delete",onClick:function(a){return e.deleteImageTmp(t)}},null,8,["onClick"])],4)]}),_:2},1024)):((0,o.uX)(),(0,o.Wv)(z,{key:1},{default:(0,o.k6)(function(){return[(0,o.bo)((0,o.Lk)("img",null,null,512),[[le,a.ARCHIVO]]),(0,o.bF)(M,{class:"delete-icon bg-secondary",name:"delete",onClick:function(a){return e.deleteImageTmp(t)}},null,8,["onClick"])]}),_:2},1024)),(0,o.bF)(Z,{style:{height:"200px"}},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",Q,[(0,o.bF)(B,{modelValue:a.titulo,"onUpdate:modelValue":function(e){return a.titulo=e},"float-label":"Título"},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Lk)("div",V,[(0,o.bF)(B,{modelValue:a.descripcion,"onUpdate:modelValue":function(e){return a.descripcion=e},type:"textarea","float-label":"Descripción","max-height":60},null,8,["modelValue","onUpdate:modelValue"])])]}),_:2},1024)]}),_:2},1024)])}),128))])])]))],64))]}),_:1},8,["column","modelValue","onSubmit"]),(0,o.bF)(ee,{images:e.slider,opened:e.openSlider,"onUpdate:opened":a[7]||(a[7]=function(a){return e.openSlider=a}),move:e.number},null,8,["images","opened","move"]),(0,o.bF)(te,{modelValue:e.openAction,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.openAction=a}),position:"bottom"},{default:(0,o.k6)(function(){return[(0,o.bF)(P,null,{default:(0,o.k6)(function(){return[(0,o.bF)(N,{class:"cursor-pointer",onClick:e.setVideoTmp},{default:(0,o.k6)(function(){return[(0,o.bF)(ae,null,{default:(0,o.k6)(function(){return[(0,o.bF)(M,{class:"q-headline",name:"switch_video"})]}),_:1}),(0,o.bF)($,{label:"Agregar video"})]}),_:1},8,["onClick"]),(0,o.bF)(N,{class:"cursor-pointer",onClick:e.openUpload},{default:(0,o.k6)(function(){return[(0,o.bF)(ae,null,{default:(0,o.k6)(function(){return[(0,o.bF)(M,{class:"q-headline",name:"cloud_upload"})]}),_:1}),(0,o.bF)($,{label:"Subir imagen"})]}),_:1},8,["onClick"])]}),_:1})]}),_:1},8,["modelValue"]),(0,o.bF)(H,{class:"galeria-usuario-lectura",modelValue:e.modalUsuarioLectura,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.modalUsuarioLectura=a}),title:e.titleUsuarioLectura,column:""},{preButtonFooter:(0,o.k6)(function(){return[(0,o.bF)(G,{icon:"print",label:"Imprimir",color:"primary",onClick:e.imprimirReporteLectura},null,8,["onClick"])]}),footerMobile:(0,o.k6)(function(){return[(0,o.bF)(G,{icon:"print",dense:"",flat:"",round:"",onClick:e.imprimirReporteLectura},null,8,["onClick"])]}),default:(0,o.k6)(function(){return[(0,o.Lk)("div",T,[(0,o.Lk)("div",x,[(0,o.bF)(ne,{class:"col",data:e.galeriaUsuarioLectura.data,columns:e.galeriaUsuarioLectura.columns,"rows-per-page-options":[0],pagination:e.galeriaUsuarioLectura.pagination,"row-key":e.galeriaUsuarioLectura.rowKey,filter:e.filterUsuarioLectura,dense:"",flat:"",bordered:"","virtual-scroll":""},{"top-right":(0,o.k6)(function(t){return[(0,o.bF)(ie,{"hide-underline":"",color:"primary",modelValue:e.filterUsuarioLectura,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.filterUsuarioLectura=a})},null,8,["modelValue"])]}),_:1},8,["data","columns","pagination","row-key","filter"])])])]}),_:1},8,["modelValue","title"])])}var O=t(76080),D=t.n(O),M=t(45254),$=t.n(M),N=(t(10239),t(6123)),P={key:0,style:{width:"100%"}},R={key:1,style:{height:"100%",margin:"0px auto",display:"block"}},G=["src"],z={key:1,class:"items-center justify-center",style:{width:"100%"}},j=["href"],K={class:"absolute",style:{top:"0",left:"0",right:"0",bottom:"0",margin:"auto",height:"50px"},version:"1.1",viewBox:"0 0 68 48",width:"100%"};function W(e,a){var t=(0,o.g2)("q-carousel-slide"),i=(0,o.g2)("q-btn"),r=(0,o.g2)("q-carousel-control"),l=(0,o.g2)("q-carousel"),u=(0,o.g2)("q-modal"),s=(0,o.gN)("lazy");return(0,o.uX)(),(0,o.Wv)(u,{modelValue:e.open,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.open=a}),maximized:""},{default:(0,o.k6)(function(){return[(0,o.bF)(l,{class:"text-white full-height",infinite:"",color:"white",arrows:"",ref:"slider"},{"control-full":(0,o.k6)(function(t){return[(0,o.bF)(r,{position:"top-right",offset:[18,22]},{default:(0,o.k6)(function(){return[(0,o.bF)(i,{round:"",color:"primary",icon:"close",onClick:a[0]||(a[0]=function(a){return e.open=!1})})]}),_:1})]}),default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.images,function(i,r){return(0,o.uX)(),(0,o.Wv)(t,{key:"full-".concat(r),class:"flex bg-white q-pa-none"},{default:(0,o.k6)(function(){return[i&&"string"===typeof i?(0,o.bo)(((0,o.uX)(),(0,o.CE)("img",P,null,512)),[[s,i]]):(0,o.Q3)("v-if",!0),i&&"image"===i.type?(0,o.bo)(((0,o.uX)(),(0,o.CE)("img",R,null,512)),[[s,i.src]]):(0,o.Q3)("v-if",!0),i&&"video"===i.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[e.isMobil?((0,o.uX)(),(0,o.CE)("div",z,[(0,o.Lk)("a",{class:"q-link",href:i.src,target:"_blank"},[((0,o.uX)(),(0,o.CE)("svg",K,n()(a[2]||(a[2]=[(0,o.Lk)("path",{class:"ytp-large-play-button-bg",d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"var(--q-color-primary)","fill-opacity":"0.8"},null,-1),(0,o.Lk)("path",{d:"M 45,24 27,14 27,34",fill:"#fff"},null,-1)]))))],8,j)])):((0,o.uX)(),(0,o.CE)("iframe",{key:0,src:i.src,style:{width:"100%",border:"none"}},null,8,G))],64)):(0,o.Q3)("v-if",!0)]}),_:2},1024)}),128))]}),_:1},512)]}),_:1},8,["modelValue"])}t(11777);var Y=t(81288),B={emits:["update:opened"],name:"sieSlider",props:{images:{type:Array,default:[]},opened:{type:Boolean,default:!1},move:{type:Number,default:0}},data:function(){return{isMobil:Y.isMobil}},components:{QCarousel:N.ci,QCarouselSlide:N.xp,QModal:N.tU,QCarouselControl:N.rG,QBtn:N.Il},computed:{isGreater:function(){return(0,Y.isGreater)()},open:{get:function(){return this.opened},set:function(e){this.$emit("update:opened",e)}}},updated:function(){this.$refs.slider&&this.$refs.slider.goToSlide(this.move)}},H=t(12807);const J=(0,H.A)(B,[["render",W]]);var Z=J,ee=t(30640),ae=(t(12982),t(3110),t(56285),{class:"row q-col-gutter-sm"}),te={class:"row q-col-gutter-sm"},ie={key:0},ne={key:1};function oe(e,a){var t=(0,o.g2)("q-card-title"),i=(0,o.g2)("q-card-separator"),r=(0,o.g2)("q-card-main"),u=(0,o.g2)("q-card");return(0,o.uX)(),(0,o.CE)("div",ae,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.newData,function(s,d){return(0,o.uX)(),(0,o.CE)("div",{key:d,class:"col"},[(0,o.Lk)("div",te,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s,function(s,d){return(0,o.uX)(),(0,o.CE)("div",{key:d,class:"col-12"},[(0,o.RG)(e.$slots,"default",{item:s,index:s.$$key},function(){return[(0,o.bF)(u,null,{default:(0,o.k6)(function(){return[(0,o.bF)(t,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,l.v_)(s.name),1)]}),_:2},1024),(0,o.bF)(i),(0,o.bF)(r,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,l.v_)(s.description),1),0==d?((0,o.uX)(),(0,o.CE)("div",ie,n()(a[0]||(a[0]=[(0,o.Lk)("img",{src:"statics/images/p1.jpg",width:"100%"},null,-1)])))):(0,o.Q3)("v-if",!0),1==d?((0,o.uX)(),(0,o.CE)("div",ne,n()(a[1]||(a[1]=[(0,o.Lk)("img",{src:"statics/images/p2.jpg",width:"100%"},null,-1)])))):(0,o.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]},!0)])}),128))])])}),128))])}var re={props:{data:{type:Array,default:[],require:!0}},methods:{redimensionar:function(e){return this.horizontData(e,this.data)},generateCols:function(e){for(var a=[],t=0;t<e;t++)a.push([]);return a},horizontData:function(e,a){for(var t=this.generateCols(e),i=0,n=0;n<a.length;++n)a[n].$$key=n,(n+1)%e===0?(t[i].push(a[n]),i=0):(t[i].push(a[n]),i+=1);return t}},computed:{newData:function(){var e=3;return this.$q.screen.xs?e=1:this.$q.screen.sm?e=2:this.$q.screen.md?e=3:this.$q.screen.xl&&(e=4),this.redimensionar(e)}},components:{QCard:N.C$,QCardTitle:N.u0,QCardSeparator:N.d6,QCardMain:N.d1}};const le=(0,H.A)(re,[["render",oe],["__scopeId","data-v-adf76fc8"]]);var ue=le,se=t(59089),de=t(80340),ce=t(24974),me=t(88477),pe=t(50425),fe=t(88567),ge=t(95718),he=t(88865),be=t(57668),ve=t(19434),ke=t(982),Ce=t(69027),Ie=t(18105),ye=t(2819),Le=t(80660),qe={components:{QModal:N.tU,ActionSheet:N.Ee,QPageSticky:N._U,QPopover:N.VM,QVideo:N.d7,QCarousel:N.ci,QCarouselSlide:N.xp,QInnerLoading:N.SQ,QSpinnerOval:N.VA,QList:N.Mb,QItem:N.H0,QItemMain:N.mF,QItemSide:N.n1,SieSlider:Z,SieModal:ee.A,ElegantGrid:ue,SieUpload:se.A,SieVacio:de.A,sieUsuario:ce.A,CrearCategoria:me.A,QTable:pe.A,QCard:fe.A,QCardSection:ge.A,QItemSection:he.A,QBtn:N.Il,QIcon:N.bP,QCardMedia:N.wy,QInput:N.ie,QCardMain:N.d1,QSearch:N.Ks},directives:{download:ve.A},props:["id"],data:function(){return{openAction:!1,number:0,opened:!1,openedEditar:!1,openSlider:!1,params:{},editarImg:{idgaleria:"",titulo:"",descripcion:""},category:"",showImages:!1,stepLoading:"S",uploadLoading:"N",sieInfo:(0,be["default"])(),galeriaUsuarioLectura:{data:[],columns:[],pagination:{},rowKey:""},modalUsuarioLectura:!1,titleUsuarioLectura:"Control de lectura",filterUsuarioLectura:null,modulo:"intranet"}},methods:{date:Ie.Ay,modifyCategoria:function(e){var a=this;return $()(D()().m(function t(){return D()().w(function(t){while(1)switch(t.n){case 0:a.params.DESCRIPCION=e,a.getData();case 1:return t.a(2)}},t)}))()},getData:function(){var e=this;this.galeria.clearMultimediaTmp(),this.galeria.clearCards(),this.galeria.clearSilder(),Le.$http.get("api/HyoGaleria/listaCategorias",{params:{id:this.$route.params.id}}).then(function(a){var t=a.json;e.category=t.DESCRIPCION,e.params=t,e.galeria.getCards({data:e.params,xfunction:function(a){e.stepLoading=a?"Y":"N"}})})},uploadImage:function(){},editarImagen:function(e,a){var t=this;Le.$http.post("api/HyoGaleria/obtenerImagenById",{parametros:{codimagen:a}}).then(function(e){var a=e.json;Object.prototype.hasOwnProperty.call(a,"error")||(t.editarImg.idgaleria=a[0].IDGALERIA,t.editarImg.titulo=a[0].TITULO,t.editarImg.descripcion=a[0].DESCRIPCION,t.openedEditar=!0)})},saveEditarImagen:function(){var e=this;Le.$http.post("api/HyoGaleria/updateDatoImage",{parametros:{DESCRIPCION:this.editarImg.descripcion,TITULO:this.editarImg.titulo,codimagen:this.editarImg.idgaleria}}).then(function(a){var t=a.json;"OK"===t&&(e.openedEditar=!1,e.getData(),(0,ke["default"])("Se guardó correctamente."))})},eliminarImagen:function(e,a){var t=this;(0,Ce.eliminar)("Este cambio no se podrá revertir",function(){Le.$http.post("api/HyoGaleria/eliminarImagen",{parametros:{codcategoria:t.params.IDCATEGORIA,codimagen:a}}).then(function(a){var i=a.json;Object.prototype.hasOwnProperty.call(i,"error")||(t.galeria.deleteCards(e),t.galeria.deleteSlider(e),(0,ke["default"])("Eliminado"))})})},agregarImagen:function(){this.$router.push({name:"".concat(this.modulo,".galeria.agregar"),params:{id:this.$route.params.id}})},showImgs:function(){var e=this;this.showImages=!0,setTimeout(function(){e.loadActionSheet()},100)},loadActionSheet:function(){this.openAction=!0},uploadImageTmp:function(e){var a=this;this.uploadLoading="Y",this.galeria.uploadImageTmp({files:e,xfunction:function(){a.showImages=!0,a.uploadLoading="N"}})},deleteImageTmp:function(e){this.galeria.deleteMultimediaTmp(e)},setVideoTmp:function(){var e=this;this.openAction=!1,this.galeria.setVideoTmp(function(){e.showImages=!0})},saveMultimediaTmp:function(){var e=this;this.uploadLoading="Y",this.galeria.saveMultimediaTmp({data:this.params,xfunction:function(a){a?(e.uploadLoading="N",e.showImages=!1,e.getData()):e.uploadLoading="N"}})},openUpload:function(){this.$refs.upload.click(),this.openAction=!1},goLista:function(){this.$router.push({name:"".concat(this.modulo,".galeria.listado")})},abrirListadoUsuarios:function(){var e=this;return $()(D()().m(function a(){var t,i,n,o,r;return D()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Le.$http.get("api/HyoGaleria/getGaleriaUsuarioLectura",{params:{idCategoria:e.$route.params.id}});case 1:t=a.v,i=t.data,n=t.columns,o=t.pagination,r=t.rowKey,e.galeriaUsuarioLectura={data:i,columns:n,pagination:o,rowKey:r},e.modalUsuarioLectura=!0;case 2:return a.a(2)}},a)}))()},imprimirReporteLectura:function(){var e=this;return $()(D()().m(function a(){var t;return D()().w(function(a){while(1)switch(a.n){case 0:t={repcod:"reporteGaleriaUsuarioLectura",formato:"pdf",idCategoria:e.$route.params.id},(0,ye.exportFilePhp)(t,"webservice/reportes/reporte");case 1:return a.a(2)}},a)}))()}},computed:{isDesktop:function(){return(0,Y.isGreater)()},buttons:function(){var e=this,a=[{icon:"arrow_back",label:"Atrás",click:function(){e.goLista()}}];return"005"!==this.sieInfo.tipcod&&"004"!==this.sieInfo.tipcod&&3===this.sieInfo.ruta.nivel&&a.push({icon:"plus",label:"Añadir Imágenes",click:function(){e.agregarImagen()}}),this.sieInfo.ruta.nivel>=2&&this.params.PROPIA&&a.push({icon:"edit",label:"Editar Galería",click:function(){e.opened=!0}}),(this.params.PROPIA||this.sieInfo.esAdministrador)&&a.push({icon:"users",label:"Control de lectura",click:function(){e.abrirListadoUsuarios()}}),a},multimediaTmp:function(){return window.galeria.multimediaTmp},multimediaCards:function(){return window.galeria.multimediaCards},slider:function(){return window.galeria.slider},galeria:function(){return window.galeria}},created:function(){this.modulo=this.sieInfo.modulo,this.getData()}};const we=(0,H.A)(qe,[["render",X]]);var Fe=we}}]);