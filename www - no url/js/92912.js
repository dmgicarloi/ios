"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[92912],{92912:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var o=r(61758),a={class:"row q-col-gutter-sm"},t={class:"col-xs-12"},i={class:"row q-pa-sm"},u={class:"col-xs-12"},l={class:"col-xs-12"},c={class:"col-xs-12"},s={class:"col-xs-12"},d={class:"col-xs-12"};function f(e,n){var r=this,f=(0,o.g2)("header-btn"),m=(0,o.g2)("sie-table"),p=(0,o.g2)("q-card-section"),C=(0,o.g2)("q-card"),g=(0,o.g2)("q-input"),O=(0,o.g2)("q-field"),v=(0,o.g2)("q-checkbox"),b=(0,o.g2)("sie-modal"),h=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(h,{class:"q-pa-sm sie-flat"},{default:(0,o.k6)(function(){return[(0,o.bF)(C,{flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(f,{name:"Configurador de biblioteca",auto:!1,buttons:e.buttons},null,8,["buttons"]),(0,o.bF)(p,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",a,[(0,o.Lk)("div",t,[(0,o.bF)(m,{columns:e.fields,config:e.config,data:e.rows,css:"height:calc(100vh - 160px)",context:r,selection:"single",permiso:"===3"},null,8,["columns","config","data"])])])]}),_:1})]}),_:1}),(0,o.bF)(b,{css:{maxWidth:"30vw"},modelValue:e.openModal,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.openModal=n}),title:"Agregar nueva configuración",ok:"Agregar",onSubmit:e.addConfig},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",i,[(0,o.Lk)("div",u,[(0,o.bF)(O,{error:e.v$.nuevo.CODIGO.$error,"error-label":"Campo requerido"},{default:(0,o.k6)(function(){return[(0,o.bF)(g,{class:"q-if-outlined","float-label":"Código",modelValue:e.nuevo.CODIGO,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.nuevo.CODIGO=n})},null,8,["modelValue"])]}),_:1},8,["error"])]),(0,o.Lk)("div",l,[(0,o.bF)(O,{error:e.v$.nuevo.DESCRIPCION.$error,"error-label":"Campo requerido"},{default:(0,o.k6)(function(){return[(0,o.bF)(g,{class:"q-if-outlined","float-label":"Descripción",modelValue:e.nuevo.DESCRIPCION,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.nuevo.DESCRIPCION=n})},null,8,["modelValue"])]}),_:1},8,["error"])]),(0,o.Lk)("div",c,[(0,o.Q3)('q-field(:error="v$.nuevo.VALOR1.$error" error-label="Campo requerido")'),(0,o.bF)(g,{class:"q-if-outlined","float-label":"Valor 1",modelValue:e.nuevo.VALOR1,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.nuevo.VALOR1=n})},null,8,["modelValue"])]),(0,o.Lk)("div",s,[(0,o.Q3)('q-field(:error="v$.nuevo.VALOR2.$error" error-label="Campo requerido")'),(0,o.bF)(g,{class:"q-if-outlined","float-label":"Valor 2",modelValue:e.nuevo.VALOR2,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.nuevo.VALOR2=n})},null,8,["modelValue"])]),(0,o.Lk)("div",d,[(0,o.bF)(v,{modelValue:e.nuevo.ESTADO,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.nuevo.ESTADO=n}),label:"Estado"},null,8,["modelValue"])])])]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var m=r(76080),p=r.n(m),C=r(57008),g=r.n(C),O=r(45254),v=r.n(O),b=r(83972),h=r(6123),D=r(82640),A=r(10213),V=r(982),E=r(57668),I=r(80660),w=r(30640),L=r(88567),k=r(95718),R={data:function(){return{rows:[{CODIGO:"DEFAULT",DESCRIPCION:"DEFAULT",VALOR1:"DEFAULT",VALOR2:"DEFAULT",ESTADO:"S"}],config:{CODIGO:{component:"input",upper:!1,maxlength:10,input:function(e,n,r){var o=this.validaCambio(n.CODIGO,r);if(!o)return 0;this.updateConfig({CODIGO:n.CODIGO},r,r)}},DESCRIPCION:{component:"input",upper:!1,maxlength:50,input:function(e,n,r){var o=this.validaCambio(n.DESCRIPCION,r);if(!o)return 0;this.updateConfig({DESCRIPCION:n.DESCRIPCION},n.CODIGO)}},VALOR1:{component:"input",upper:!1,maxlength:20,input:function(e,n,r){var o=this.validaCambio(n.VALOR1,r);if(!o)return 0;this.updateConfig({VALOR1:n.VALOR1},n.CODIGO)}},VALOR2:{component:"input",upper:!1,maxlength:20,input:function(e,n,r){var o=this.validaCambio(n.VALOR2,r);if(!o)return 0;this.updateConfig({VALOR2:n.VALOR2},n.CODIGO)}},DELETE:{component:"button",icon:["delete as eliminar"],permisos:{eliminar:">2"},tooltip:{eliminar:"Eliminar"},eliminar:function(e,n){var r=this;return v()(p()().m(function e(){return p()().w(function(e){while(1)switch(e.n){case 0:r.deleteConfig(n);case 1:return e.a(2)}},e)}))()},flat:!0,dense:!0},ESTADO:{renderHtml:function(e,n,r,o){return r.checkbox({value:o.ESTADO,trueValue:1,checkedIcon:"check_box",uncheckedIcon:"check_box_outline_blank",color:"primary"})},renderAction:function(e,n){3===this.permiso&&(n.ESTADO=1===n.ESTADO?0:1,this.updateConfig({ESTADO:n.ESTADO},n.CODIGO))}}},fields:[{name:"CODIGO",label:"Código",field:"CODIGO",align:"center",sortable:!0,wrap:!0},{name:"DESCRIPCION",label:"Descripción",field:"DESCRIPCION",align:"left",sortable:!0,wrap:!0},{name:"VALOR1",label:"Valor 1",field:"VALOR1",align:"left",sortable:!0,wrap:!0},{name:"VALOR2",label:"Valor 2",field:"VALOR2",align:"left",sortable:!0,wrap:!0},{name:"ESTADO",label:"Estado",field:"ESTADO",align:"center"},{name:"DELETE",label:"",field:"DELETE",align:"center"}]}}},S={setup:function(){var e=(0,b.fG)();return{v$:e}},mixins:[R],components:{confirm:A.confirm,QSelect:h.Si,sieModal:w.A,QCheckbox:h.vZ,QCard:L.A,QCardSection:k.A,QPage:h.Tu,QField:h.Om,QInput:h.ie},data:function(){var e=this;return{permiso:(0,E["default"])().ruta.nivel,openModal:!1,nuevo:{ESTADO:!1},buttons:[{label:"NUEVO",icon:"plus",permiso:">2",click:function(){return e.openModal=!0,e.openModal}}]}},methods:{addConfig:function(){var e=this;return v()(p()().m(function n(){var r;return p()().w(function(n){while(1)switch(n.p=n.n){case 0:if(e.v$.nuevo.$touch(),!e.v$.nuevo.$error){n.n=1;break}return(0,V["default"])("Complete los Campos requeridos","warning"),n.a(2,0);case 1:return n.p=1,n.n=2,I.$http.post("api/BmConfiguracionController/addBmConfiguracion",{data:g()({},e.nuevo)});case 2:return(0,V["default"])("Registro agregado exitosamente: ","success"),n.n=3,e.getConfiguraciones();case 3:e.cleanModal(),n.n=5;break;case 4:n.p=4,r=n.v,(0,V["default"])(r.message,"warning");case 5:e.openModal=!1;case 6:return n.a(2)}},n,null,[[1,4]])}))()},getConfiguraciones:function(){var e=this;return v()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,I.$http.get("api/BmConfiguracionController/getBmConfiguracion");case 1:e.rows=n.v;case 2:return n.a(2)}},n)}))()},cleanModal:function(){this.nuevo={ESTADO:!1}},deleteConfig:function(e){var n=this;return v()(p()().m(function r(){return p()().w(function(r){while(1)switch(r.n){case 0:(0,A.confirm)("Este proceso es irreversible ¿Desea continuar?","warning",!1,!1,"Eliminar registro").onOk(function(){var r=v()(p()().m(function r(o){var a;return p()().w(function(r){while(1)switch(r.p=r.n){case 0:return r.p=0,r.n=1,I.$http.delete("api/BmConfiguracionController/deleteBmConfiguracion",{params:{codigo:e.CODIGO}});case 1:return r.n=2,n.getConfiguraciones();case 2:(0,V["default"])("Registro eliminado exitosamente","success"),r.n=4;break;case 3:r.p=3,a=r.v,(0,V["default"])(a.message,"warning");case 4:return r.a(2)}},r,null,[[0,3]])}));return function(e){return r.apply(this,arguments)}}());case 1:return r.a(2)}},r)}))()},validaCambio:function(e,n){return e!==n},updateConfig:function(e,n){var r=this;return v()(p()().m(function o(){var a;return p()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,I.$http.post("api/BmConfiguracionController/updateBmConfiguracion",{params:{fields:e,codigo:n}});case 1:return o.n=2,r.getConfiguraciones();case 2:(0,V["default"])("Datos actualizados exitosamente","success"),o.n=4;break;case 3:o.p=3,a=o.v,(0,V["default"])(a.message,"warning");case 4:return o.a(2)}},o,null,[[0,3]])}))()}},validations:function(){var e={nuevo:{CODIGO:{required:D.mw},DESCRIPCION:{required:D.mw}}};return e},created:function(){var e=this;return v()(p()().m(function n(){return p()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.getConfiguraciones();case 1:return n.a(2)}},n)}))()}},q=r(12807);const x=(0,q.A)(S,[["render",f]]);var T=x}}]);