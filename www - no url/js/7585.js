"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[7585],{7585:function(e,r,t){t.r(r),t.d(r,{default:function(){return N}});t(52776),t(53113);var n=t(61758),a=t(58790),o={class:"q-pa-sm"},c={class:"row q-col-gutter-x-sm"},i={class:"col-12"},s={class:"col"},l={class:"q-pa-sm"},u={key:1,class:"row col items-center justify-center"},d={class:"row"},p={class:"col-12 text-center"},f={class:"row q-pt-md q-col-gutter-sm"},m={class:"col-12"},g={class:"absolute-full flex flex-center"};function b(e,r){var t=(0,n.g2)("header-btn"),b=(0,n.g2)("q-search"),v=(0,n.g2)("q-table"),h=(0,n.g2)("q-card-section"),k=(0,n.g2)("q-card"),w=(0,n.g2)("q-item-label"),_=(0,n.g2)("q-item-section"),L=(0,n.g2)("q-item"),A=(0,n.g2)("q-list"),q=(0,n.g2)("q-scroll-area"),F=(0,n.g2)("q-icon"),x=(0,n.g2)("sie-upload"),D=(0,n.g2)("q-badge"),I=(0,n.g2)("q-linear-progress"),C=(0,n.g2)("sie-modal"),Q=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(Q,{class:"reprocesar-medicamentos"},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",o,[(0,n.bF)(k,{dense:"",flat:"",bordered:""},{default:(0,n.k6)(function(){return[(0,n.bF)(t,{name:"Reprocesar stock de medicamento",buttons:e.buttons},null,8,["buttons"]),(0,n.bF)(h,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",c,[(0,n.Lk)("div",i,[(0,n.bF)(v,{class:"sie-table_alto",data:e.data,columns:e.columns,"rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":r[1]||(r[1]=function(r){return e.pagination=r}),filter:e.search,selected:e.selected,"onUpdate:selected":r[2]||(r[2]=function(r){return e.selected=r}),"row-key":"MEDCOD",selection:"multiple",color:"secondary",dense:"",flat:"",bordered:""},{top:(0,n.k6)(function(t){return[(0,n.Lk)("div",s,[(0,n.bF)(b,{"hide-underline":"",color:"primary",modelValue:e.search,"onUpdate:modelValue":r[0]||(r[0]=function(r){return e.search=r})},null,8,["modelValue"])])]}),_:1},8,["data","columns","pagination","filter","selected"])])])]}),_:1})]}),_:1})]),(0,n.bF)(C,{title:"Importar Medicamentos",modelValue:e.abrirVentanaImprimir,"onUpdate:modelValue":r[3]||(r[3]=function(r){return e.abrirVentanaImprimir=r}),ok:"Importar",onSubmit:e.importar,"btn-load":e.procesarImportacion},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",l,[e.complete?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[e.errores.length?((0,n.uX)(),(0,n.Wv)(q,{key:0,class:"col"},{default:(0,n.k6)(function(){return[(0,n.bF)(A,null,{default:(0,n.k6)(function(){return[(0,n.bF)(w,{header:""},{default:(0,n.k6)(function(){return[(0,n.eW)((0,a.v_)("".concat(e.errores.length," Errores.")),1)]}),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.errores,function(e,r){return(0,n.uX)(),(0,n.Wv)(L,{key:r},{default:(0,n.k6)(function(){return[(0,n.bF)(_,{side:""},{default:(0,n.k6)(function(){return[(0,n.eW)((0,a.v_)("Fila ".concat(e.fila)),1)]}),_:2},1024),(0,n.bF)(_,{class:"bg-negative text-white round-borders q-pa-sm"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,a.v_)(e.mensaje),1)]}),_:2},1024)]}),_:2},1024)}),128))]}),_:1})]}),_:1})):((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",d,[(0,n.Lk)("div",p,[(0,n.bF)(F,{name:"check_circle",color:"positive",size:"150px"})]),r[4]||(r[4]=(0,n.Lk)("div",{class:"col-12 text-center"},"Se proceso correctamente",-1))])]))],64)):((0,n.uX)(),(0,n.Wv)(x,{key:1,title:"Adjuntar",icon:"file_excel_new",onUpload:e.cargarArchivo},null,8,["onUpload"])),(0,n.Lk)("div",f,[(0,n.Lk)("div",m,[(0,n.bF)(I,{size:"50px",value:e.progress,color:"positive",rounded:"",stripe:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",g,[(0,n.bF)(D,{color:"white","text-color":"positive",label:e.progressLabel},null,8,["label"])])]}),_:1},8,["value"])])])])]}),_:1},8,["modelValue","onSubmit","btn-load"])]}),_:1})}var v=t(76080),h=t.n(v),k=t(45254),w=t.n(k),_=(t(52133),t(56285),t(50310),t(6724),t(15547),t(83190),t(6123)),L=t(88567),A=t(95718),q=t(50425),F=t(82351),x=t(94509),D=t(62565),I=t(34963),C=t(65673),Q=t(82327),E=t(88865),M=t(66824),S=t(12205),y=t(34262),T=t(30640),V=t(59089),U=t(80660),W=t(33950),X=t(982),P=t(57008),O=t.n(P),R=t(57668),j=t(2819),K={configGrid:function(){return{columns:[{name:"MEDCOD",label:"Código",field:"MEDCOD",align:"left",sortable:!0},{name:"MEDDES",label:"Medicamento",field:"MEDDES",align:"left",sortable:!0}]}},getListarDatosTabla:function(){var e=this;return w()(h()().m(function r(){var t;return h()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,U.$http.get("api/ReprocesarMedicamentosController/getListarDatosTabla");case 1:return t=r.v,r.a(2,O()({data:t},e.configGrid()))}},r)}))()},procesar:function(e){return w()(h()().m(function r(){return h()().w(function(r){while(1)switch(r.n){case 0:return r.a(2,U.$http.post("api/ReprocesarMedicamentosController/procesar",{parametros:e}))}},r)}))()},exportar:function(){return w()(h()().m(function e(){var r,t;return h()().w(function(e){while(1)switch(e.n){case 0:r=(0,R["default"])(),t="".concat(r.host,"/api/ReprocesarMedicamentosController/exportar"),(0,j.open)({action:t});case 1:return e.a(2)}},e)}))()}},$=null,z={components:{QCard:L.A,QCardSection:A.A,QTable:q.A,QTr:F.A,QTd:x.A,QBadge:D.A,QLinearProgress:I.A,QList:C.A,QItem:Q.A,QItemSection:E.A,QItemLabel:M.A,QScrollArea:S.A,QIcon:y.A,SieModal:T.A,SieUpload:V.A,QPage:_.Tu,QSearch:_.Ks},data:function(){var e=this;return{buttons:[{icon:"cogs",label:"Procesar",loading:!1,click:function(){e.procesar()}},{icon:"f_excel",label:"Exportar",loading:!1,click:function(){e.exportar()}},{icon:"file_import",label:"Importar",loading:!1,click:function(){e.abrirVentanaImprimir=!0,e.tempFile=null,e.complete=!1,e.errores=[],e.progress=0}}],data:[],columns:[],pagination:{rowsPerPage:0},selected:[],search:null,abrirVentanaImprimir:!1,procesarImportacion:!1,progress:0,errores:[],complete:!1}},computed:{progressLabel:function(){return(100*this.progress).toFixed(2)+"%"}},methods:{getListarDatosTabla:function(){var e=this;return w()(h()().m(function r(){var t,n,a;return h()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,K.getListarDatosTabla();case 1:t=r.v,n=t.data,a=t.columns,e.data=n,e.columns=a;case 2:return r.a(2)}},r)}))()},procesar:function(){var e=this;return w()(h()().m(function r(){var t,n,a,o;return h()().w(function(r){while(1)switch(r.p=r.n){case 0:return e.buttons[0].loading=!0,t=e.selected.map(function(e){return e.MEDCOD}),r.p=1,r.n=2,K.procesar(t);case 2:n=r.v,(0,X["default"])(n,"success"),r.n=4;break;case 3:r.p=3,o=r.v,a=o.error,(0,X["default"])(a.message,"warning");case 4:e.buttons[0].loading=!1;case 5:return r.a(2)}},r,null,[[1,3]])}))()},exportar:function(){return w()(h()().m(function e(){return h()().w(function(e){while(1)switch(e.n){case 0:K.exportar();case 1:return e.a(2)}},e)}))()},cargarArchivo:function(e){return w()(h()().m(function r(){var t;return h()().w(function(r){while(1)switch(r.p=r.n){case 0:return $="",r.p=1,r.n=2,(0,W["default"])({file:e[0]});case 2:t=r.v,$=t.name,r.n=4;break;case 3:r.p=3,r.v,(0,X["default"])("No se cargó el archivo","warning");case 4:return r.a(2)}},r,null,[[1,3]])}))()},importar:function(){var e=this;return w()(h()().m(function r(){return h()().w(function(r){while(1)switch(r.n){case 0:if(e.procesarImportacion=!0,!$){r.n=2;break}return r.n=1,(0,U.streamFetch)("api/ReprocesarMedicamentosController/importar",{method:"POST",data:{parametros:{file:$}}},function(r){if(r&&"progress"in r){var t=r.progress;e.progress=t.progress/t.total}if(r&&"final"in r){var n=r.final;e.errores=n.errores,$=null,e.complete=!0,e.progress=1}});case 1:r.n=3;break;case 2:e.$notify("Seleccione un archivo","warning");case 3:e.procesarImportacion=!1;case 4:return r.a(2)}},r)}))()}},created:function(){var e=this;return w()(h()().m(function r(){return h()().w(function(r){while(1)switch(r.n){case 0:return r.n=1,e.getListarDatosTabla();case 1:return r.a(2)}},r)}))()}},G=t(12807);const B=(0,G.A)(z,[["render",b],["__scopeId","data-v-47d18149"]]);var N=B}}]);