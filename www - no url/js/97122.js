"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[97122],{97122:function(e,n,o){o.r(n),o.d(n,{default:function(){return G}});var t=o(61758),r=o(58790),a={class:"row"},l={class:"col-xs-12 col-sm-6 row"},i={class:"text-h6"},s={class:"col-xs-12 col-sm-6 column"},c={class:"col"},u={class:"col-12 column items-end justify-center"},f={class:"flex"},m={class:"flex-item"},C={class:"flex-item"},d={class:"flex-item"},O={class:"flex-item margin-top"},p={class:"flex-item"},E={class:"flex-item"},h={class:"col-12"};function A(e,n){var o=(0,t.g2)("q-icon"),A=(0,t.g2)("q-btn"),N=(0,t.g2)("q-card-section"),D=(0,t.g2)("q-separator"),v=(0,t.g2)("q-select"),I=(0,t.g2)("q-date"),g=(0,t.g2)("q-popup-proxy"),b=(0,t.g2)("q-input"),F=(0,t.g2)("q-checkbox"),L=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(L,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(N,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",a,[(0,t.Lk)("div",l,[(0,t.bF)(o,{class:"cursor-pointer back",name:"arrow_back",onClick:e.volver},null,8,["onClick"]),(0,t.Lk)("div",i,(0,r.v_)(e.titleForm),1)]),(0,t.Lk)("div",s,[(0,t.Lk)("div",c,[(0,t.Lk)("div",u,[(0,t.Lk)("div",null,[(0,t.bF)(A,{class:"q-mb-xs q-mr-sm",size:"sm",icon:"save",label:"Guardar",color:"primary",onClick:e.submitEvent},null,8,["onClick"])])]),n[15]||(n[15]=(0,t.Lk)("div",{class:"col-12 column items-end justify-center"},null,-1))])])])]}),_:1}),(0,t.bF)(D),(0,t.bF)(N,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",f,[(0,t.Lk)("div",m,[(0,t.bF)(v,{class:"margin-top",style:{width:"40%"},"option-value":"ANO","option-label":"ANO",label:"Año",options:e.opAnios,modelValue:e.form.ANOCAL,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.form.ANOCAL=n}),onInput:e.prueba},null,8,["options","modelValue","onInput"]),(0,t.bF)(v,{class:"margin-top",modelValue:e.form.MESCAL,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.form.MESCAL=n}),style:{width:"40%"},"option-value":"CLAVE","option-label":"VALOR",options:e.monthsOptions,label:"Mes",onInput:e.selectMont},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",C,[(0,t.bF)(v,{style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.CONCOB,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.form.CONCOB=n}),options:e.concepOpt,label:"Concepto"},null,8,["modelValue","options"]),(0,t.bF)(v,{style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.ID_PERFIL,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.form.ID_PERFIL=n}),options:e.perfil,label:"Pérfil"},null,8,["modelValue","options"])]),(0,t.Lk)("div",d,[(0,t.bF)(v,{class:"width",style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.INSTRUCOD,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.form.INSTRUCOD=n}),options:e.nivOption,label:"Nivel",onInput:e.getGrados},null,8,["modelValue","options","onInput"]),(0,t.bF)(v,{class:"width",style:{width:"40%"},"option-value":"value","option-label":"label",modelValue:e.form.GRADOCOD,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.form.GRADOCOD=n}),options:e.gradOption,label:"Grado"},null,8,["modelValue","options"])]),(0,t.Lk)("div",O,[(0,t.bF)(b,{style:{width:"40%"},"reverse-fill-mask":"",modelValue:e.form.FECEMI,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.form.FECEMI=n}),maxlength:"10",mask:"####/##/##",label:"Fecha"},{append:(0,t.k6)(function(){return[(0,t.bF)(o,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(I,{mask:"YYYY/MM/DD",modelValue:e.form.FECEMI,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.form.FECEMI=n})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"]),(0,t.bF)(b,{style:{width:"40%"},"reverse-fill-mask":"",modelValue:e.form.FECVEN,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.form.FECVEN=n}),maxlength:"10",mask:"####/##/##",label:"Fecha"},{append:(0,t.k6)(function(){return[(0,t.bF)(o,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(g,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(I,{mask:"YYYY/MM/DD",modelValue:e.form.FECVEN,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.form.FECVEN=n})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])]),(0,t.Lk)("div",p,[(0,t.bF)(v,{style:{width:"40%"},"option-value":"value","option-label":"label",options:e.monOption,label:"Moneda",modelValue:e.form.MONCOD,"onUpdate:modelValue":n[10]||(n[10]=function(n){return e.form.MONCOD=n})},null,8,["options","modelValue"]),(0,t.bF)(b,{class:"margin-top",style:{width:"40%"},type:"number",label:"Monto",placeholder:"Ingrese Monto",modelValue:e.form.MONTO,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.form.MONTO=n})},null,8,["modelValue"])]),(0,t.Lk)("div",E,[(0,t.bF)(v,{style:{width:"40%"},"option-value":"value","option-label":"label",options:e.afecOption,label:"Afectación",modelValue:e.form.TIPAFE,"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.form.TIPAFE=n})},null,8,["options","modelValue"]),(0,t.bF)(v,{style:{width:"40%"},"option-value":"value","option-label":"label",options:e.tipOption,label:"Período",modelValue:e.form.PERCOB,"onUpdate:modelValue":n[13]||(n[13]=function(n){return e.form.PERCOB=n})},null,8,["options","modelValue"])]),(0,t.Lk)("div",h,[(0,t.bF)(F,{modelValue:e.repetir,"onUpdate:modelValue":n[14]||(n[14]=function(n){return e.repetir=n}),label:"Continuar registrando?"},null,8,["modelValue"])])])]}),_:1})]}),_:1})}var N=o(76080),D=o.n(N),v=o(45254),I=o.n(v),g=(o(30683),o(71225),o(52133),o(10239),o(50310),o(5962),o(6724),o(83190),o(52776),o(81813),o(68017),o(88567)),b=o(95718),F=o(20456),L=o(53380),w=o(3112),R=o(19852),M=o(57668),V=o(54489),P=o(80660),k=o(64208),T=o(4437),S=o(6123),_=o(95477),U=o(41615),y={components:{QCheckbox:w.A,QCard:g.A,QCardSection:b.A,QCardActions:F.A,QSeparator:L.A,formulario:R.A,QInput:k.A,QSelect:V.S,QDate:T.A,QDatetime:S.T5,QPopupProxy:_.A,QIcon:S.bP,QBtn:S.Il},data:function(){return{schema:null,repetir:!1,title:"",titleForm:"Agregar Calendario",monthsOptions:[],filled:!0,concepOpt:[],nivOption:[],gradOption:[],monOption:[],afecOption:[],tipOption:[],opAnios:[],perfil:[],ID_CALENDAR:this.$route.params.id||0,selectAnio:"",selectMes:"",selectNivel:"",selectGrado:"",selectConcepto:"",selectPerfil:"",selectAfectacion:"",selectPeriodo:"",selectMoneda:"",form:{ID_PERFIL:"",ANOCAL:"",MESCAL:"",CONCOB:"",INSTRUCOD:"",GRADOCOD:"",MONCOD:"",FECEMI:"",FECVEN:"",MONTO:0,TIPAFE:"",PERCOB:"",DEUDACOD:"",SECCIONCOD:"T",TIPO_CALENDARIO:1,CONDICION:""}}},methods:{volver:function(){this.$router.push({name:"tesoreria.asignacionCalendario.listar"})},getAnio:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,P.$http.get("api/anioController/getAnios");case 1:o=n.v,o=o.map(function(e){return e.ANO}),e.opAnios=o,e.form.ANOCAL=2022;case 2:return n.a(2)}},n)}))()},prueba:function(e){console.log(e)},selectMont:function(e){var n=new Date(this.form.ANOCAL,e,0).getDate();this.form.FECEMI="".concat(this.form.ANOCAL,"/").concat(e,"/01"),this.form.FECVEN="".concat(this.form.ANOCAL,"/").concat(e,"/").concat(n)},submitEvent:function(){0!==this.ID_CALENDAR?this.updateCalendario():this.nuevoCalendario()},probar:function(e){console.log(e)},getPerfiles:function(){var e=this;return I()(D()().m(function n(){return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,U["default"].API_PERFILES();case 1:e.perfil=n.v;case 2:return n.a(2)}},n)}))()},validate:function(e){var n="";return e.MESCAL?e.CONCOB?e.ID_PERFIL?e.INSTRUCOD?e.GRADOCOD?e.FECEMI?e.FECVEN?e.MONCOD?"number"!==typeof e.MONTO?n="No se registro correctamente el monto del calendario":e.TIPAFE?e.PERCOB||(n=" No se seleccseleccionóono el periodo del calendario"):n=" No se seleccionó el tipo de afectacion del calendario":n="No se seleccionó el tipo de moneda del calendario":n="No se seleccionó la fecha de vencimiento del calendario":n=" No seleccionó la fecha de emision del calendario":n=" No seleccionó el grado del concepto":n=" No seleccionó el nivel del concepto":n=" No seleccionó el perfil del concepto":n="No seleccionó el concepto del calendario":n=" No seleccionó el mes del calendario",n.trim().length>0?{status:"error",exception:n}:{status:"ok"}},updateCalendario:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.validate(e.form);case 1:o=n.v,"error"===o.status?e.$alert(o.exception,"warning"):e.$confirm("Desea realemente editar este calendario ?","info").onOk(I()(D()().m(function n(){return D()().w(function(n){while(1)switch(n.n){case 0:console.log(e.form.ANOCAL);try{e.$http.post("api/calendarController/updateCalendar",{params:{ID_CALENDAR:e.ID_CALENDAR,ID_PERFIL:e.form.ID_PERFIL,ANOCAL:e.form.ANOCAL,MESCAL:e.form.MESCAL,CONCOB:e.form.CONCOB,INSTRUCOD:e.form.INSTRUCOD,GRADOCOD:e.form.GRADOCOD,MONCOD:e.form.MONCOD,FECEMI:e.form.FECEMI,FECVEN:e.form.FECVEN,MONTO:e.form.MONTO,TIPAFE:e.form.TIPAFE,PERCOB:e.form.PERCOB,DEUDACOD:"",SECCIONCOD:"T",TIPO_CALENDARIO:1,CONDICION:""}}),e.$alert("Calendario Actualizado Satisfactoriamente","success")}catch(n){e.$alert(n.error.message,"warning")}case 1:return n.a(2)}},n)})));case 2:return n.a(2)}},n)}))()},nuevoCalendario:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,e.validate(e.form);case 1:o=n.v,"error"===o.status?e.$alert(o.exception,"warning"):e.$confirm("Desea agregar el calendario ?","info").onOk(I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.$http.post("api/calendarController/addCalendar",{data:{ID_PERFIL:e.form.ID_PERFIL,ANOCAL:e.form.ANOCAL,MESCAL:e.form.MESCAL,CONCOB:e.form.CONCOB,INSTRUCOD:e.form.INSTRUCOD,GRADOCOD:e.form.GRADOCOD,MONCOD:e.form.MONCOD,FECEMI:e.form.FECEMI,FECVEN:e.form.FECVEN,MONTO:e.form.MONTO,TIPAFE:e.form.TIPAFE,PERCOB:e.form.PERCOB,DEUDACOD:"",SECCIONCOD:"T",TIPO_CALENDARIO:1,CONDICION:""}});case 1:e.$alert("Calendario Registrado Sastifactoriamente","success"),e.repetir||0!==e.ID_CALENDAR||e.clear(),n.n=3;break;case 2:n.p=2,o=n.v,e.$alert(o.error.message,"warning");case 3:return n.a(2)}},n,null,[[0,2]])})));case 2:return n.a(2)}},n)}))()},getAno:function(){return(0,M["default"])().ano},getPeriodo:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,P.$http.get("api/CalendarController/getPeriodos");case 1:o=n.v,o.map(function(n){return e.tipOption.push({label:n.VALOR,value:n.CLAVE})});case 2:return n.a(2)}},n)}))()},getAfectacion:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,P.$http.get("api/CalendarController/getAfectacion");case 1:o=n.v,o.map(function(n){return e.afecOption.push({label:n.VALOR,value:n.CLAVE})});case 2:return n.a(2)}},n)}))()},getConceptos:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,P.$http.get("api/CalendarController/getConceptos");case 1:o=n.v,o.map(function(n){return e.concepOpt.push({label:n.CONDES,value:n.CONCOB})});case 2:return n.a(2)}},n)}))()},getNivel:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,P.$http.get("api/CalendarController/getNivel");case 1:o=n.v,o.map(function(n){return e.nivOption.push({label:n.INSTRUDES,value:n.INSTRUCOD})});case 2:return n.a(2)}},n)}))()},getMonedas:function(){var e=this;return I()(D()().m(function n(){return D()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,U["default"].API_MONEDAS();case 1:e.monOption=n.v;case 2:return n.a(2)}},n)}))()},getGrados:function(e){var n=this;return I()(D()().m(function e(){var o,t;return D()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,P.$http.get("api/CalendarController/getGrado");case 1:o=e.v,t=o.filter(function(e){return e.INSTRUCOD===n.form.INSTRUCOD}),n.gradOption=[],t.map(function(e){return n.gradOption.push({label:e.GRADODES,value:e.GRADOCOD})});case 2:return e.a(2)}},e)}))()},dayConverter:function(e){return console.log(e),e.replace("T"," ").split(" ")[0].replace(/-/g,"/")},getCalendarupdate:function(){var e=this;return I()(D()().m(function n(){var o;return D()().w(function(n){while(1)switch(n.n){case 0:if(0===e.ID_CALENDAR){n.n=2;break}return n.n=1,e.$http.get("api/CalendarController/getCalendar",{params:{parametros:{ID_CALENDAR:e.ID_CALENDAR}}});case 1:o=n.v,console.log(o),e.form.ID_PERFIL=o[0]["ID_PERFIL"],e.form.MESCAL=o[0]["MESCOB"],e.form.ANOCAL=o[0]["ANOCOB"],e.form.CONCOB=o[0]["CONCOB"],e.form.INSTRUCOD=o[0]["INSTRUCOD"],e.form.GRADOCOD=o[0]["GRADOCOD"],e.form.MONCOD=o[0]["MONCOD"],e.form.FECEMI=e.dayConverter(o[0]["FECEMI"]),e.form.FECVEN=e.dayConverter(o[0]["FECVEN"]),e.form.MONTO=o[0]["MONTO"],e.form.TIPAFE=o[0]["TIPAFE"],e.form.PERCOB=o[0]["PERCOB"],e.form.SECCIONCOD=o[0]["SECCIONCOD"],e.getGrados();case 2:return n.a(2)}},n)}))()},clear:function(){this.form.ID_PERFIL="",this.form.MESCAL="",this.form.CONCOB="",this.form.INSTRUCOD="",this.form.GRADOCOD="",this.form.MONCOD="",this.form.FECEMI="",this.form.FECVEN="",this.form.MONTO="",this.form.TIPAFE="",this.form.PERCOD="",this.form.DEUDACOD="",this.form.SECCIONCOD="",this.form.ANOCAL="",this.form.PERCOB=""},getMonth:function(){var e=this;return I()(D()().m(function n(){var o,t;return D()().w(function(n){while(1)switch(n.p=n.n){case 0:return n.p=0,n.n=1,P.$http.get("api/CalendarController/getMeses");case 1:o=n.v,e.monthsOptions=o,n.n=3;break;case 2:n.p=2,t=n.v,e.$alert(t.error.message);case 3:return n.a(2)}},n,null,[[0,2]])}))()}},mounted:function(){this.getConceptos(),this.getNivel(),this.getGrados(),this.getMonedas(),this.getPeriodo(),this.getAfectacion(),this.getMonth(),this.getPerfiles(),this.getAnio(),this.searchCalendar()}},B=o(12807);const x=(0,B.A)(y,[["render",A]]);var G=x}}]);