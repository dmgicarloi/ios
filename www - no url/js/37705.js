"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[37705],{37705:function(e,o,t){t.r(o),t.d(o,{default:function(){return w}});var i=t(8445),n=t.n(i),a=(t(39866),t(61758)),l={class:"row col"},s={class:"col-2 q-pr-sm corporativo"},r={class:"row justify-between"},c={class:"col-10 column corporativo"};function u(e,o){var t=(0,a.g2)("q-card-title"),i=(0,a.g2)("q-card-separator"),u=(0,a.g2)("sie-ano"),d=(0,a.g2)("sie-colegio"),p=(0,a.g2)("q-select"),m=(0,a.g2)("sie-select"),f=(0,a.g2)("sie-nivel"),h=(0,a.g2)("sie-grado"),g=(0,a.g2)("sie-date"),v=(0,a.g2)("q-btn"),C=(0,a.g2)("q-card-main"),b=(0,a.g2)("q-card"),V=(0,a.g2)("sie-reportes"),A=(0,a.g2)("sie-pdf"),O=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(O,{class:"q-pa-md"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",l,[(0,a.Lk)("div",s,[(0,a.bF)(b,null,{default:(0,a.k6)(function(){return[(0,a.bF)(t,{class:"text-weight-bold"},{default:(0,a.k6)(function(){return n()(o[15]||(o[15]=[(0,a.eW)("Corporativo",-1)]))}),_:1}),(0,a.bF)(i),(0,a.bF)(C,{class:"q-pa-sm"},{default:(0,a.k6)(function(){return[e.sieanio?((0,a.uX)(),(0,a.Wv)(u,{key:0,class:"q-pa-sm-none",modelValue:e.ano,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.ano=o}),onSeleccionar:e.selectedAno},null,8,["modelValue","onSeleccionar"])):(0,a.Q3)("v-if",!0),e.siecolegio?((0,a.uX)(),(0,a.Wv)(d,{key:1,modelValue:e.colegios,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.colegios=o}),onSeleccionar:e.selectedGrado},null,8,["modelValue","onSeleccionar"])):(0,a.Q3)("v-if",!0),["0031","0032","0033","0034"].includes(e.codigoreporte)?((0,a.uX)(),(0,a.Wv)(p,{key:2,class:"q-if-outlined",onInput:e.selectedColegio,modelValue:e.grupo,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.grupo=o}),options:e.optionsAiec},null,8,["onInput","modelValue","options"])):(0,a.Q3)("v-if",!0),1===e.parametrosForm.anocob.ACTIVO?((0,a.uX)(),(0,a.Wv)(p,{key:3,class:"q-if-outlined",modelValue:e.anocob,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.anocob=o}),options:e.optionAnios,"float-label":"Año 2"},null,8,["modelValue","options"])):(0,a.Q3)("v-if",!0),1===e.parametrosForm.mescod.ACTIVO?((0,a.uX)(),(0,a.Wv)(p,{key:4,class:"q-if-outlined",modelValue:e.mescod,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.mescod=o}),options:e.optionMes,"float-label":"Meses"},null,8,["modelValue","options"])):(0,a.Q3)("v-if",!0),1===e.parametrosForm.concob.ACTIVO?((0,a.uX)(),(0,a.Wv)(p,{key:5,class:"q-if-outlined",modelValue:e.concob,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.concob=o}),options:e.optionConceptos,"float-label":"Conceptos"},null,8,["modelValue","options"])):(0,a.Q3)("v-if",!0),1===e.parametrosForm.moncod.ACTIVO?((0,a.uX)(),(0,a.Wv)(p,{key:6,class:"q-if-outlined",modelValue:e.moncod,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.moncod=o}),options:e.optionMonedas,"float-label":"Moneda"},null,8,["modelValue","options"])):(0,a.Q3)("v-if",!0),1===e.parametrosForm.famcod.ACTIVO?((0,a.uX)(),(0,a.Wv)(m,{key:7,type:"outlined",modelValue:e.famcod,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.famcod=o}),options:e.optionFamilia,placeholder:"Familia",label:"FAMDES",val:"FAMCOD"},null,8,["modelValue","options"])):(0,a.Q3)("v-if",!0),e.sienivel?((0,a.uX)(),(0,a.Wv)(f,{key:8,modelValue:e.nivel,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.nivel=o}),onSeleccionar:e.selectedNivel},null,8,["modelValue","onSeleccionar"])):(0,a.Q3)("v-if",!0),e.siegrado?((0,a.uX)(),(0,a.Wv)(h,{key:9,modelValue:e.grado,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.grado=o}),onSeleccionar:e.selectedGrado,filtro:e.nivel},null,8,["modelValue","onSeleccionar","filtro"])):(0,a.Q3)("v-if",!0),e.siefecha1?((0,a.uX)(),(0,a.Wv)(g,{key:10,modelValue:e.fecha1,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.fecha1=o}),placeholder:"Fecha 1",onSelected:e.selectedFecha1},null,8,["modelValue","onSelected"])):(0,a.Q3)("v-if",!0),(0,a.Lk)("div",r,[e.sieword?((0,a.uX)(),(0,a.Wv)(v,{key:0,icon:"file_word",size:"md",color:"blue",label:"Word",onClick:o[11]||(o[11]=function(o){return e.imprimir("docx")})})):(0,a.Q3)("v-if",!0),e.sieexcel?((0,a.uX)(),(0,a.Wv)(v,{key:1,icon:"file_excel",size:"md",color:"green",label:"Excel",onClick:o[12]||(o[12]=function(o){return e.imprimir("xlsx")})})):(0,a.Q3)("v-if",!0),e.siepdf?((0,a.uX)(),(0,a.Wv)(v,{key:2,class:"nolink",icon:"file_pdf",size:"md",color:"red",label:"Pdf",onClick:o[13]||(o[13]=function(o){return e.imprimir("pdf")})})):(0,a.Q3)("v-if",!0)])]}),_:1})]}),_:1})]),(0,a.Lk)("div",c,[(0,a.bF)(V,{modelValue:e.codigoreporte,"onUpdate:modelValue":o[14]||(o[14]=function(o){return e.codigoreporte=o}),onSeleccionar:e.selectedReport},null,8,["modelValue","onSeleccionar"]),e.urlreporte?((0,a.uX)(),(0,a.Wv)(A,{key:0,class:"col",src:e.urlreporte},null,8,["src"])):(0,a.Q3)("v-if",!0)])])]}),_:1})}t(30683),t(71225),t(52133),t(10239),t(50310),t(5962),t(90095),t(6724),t(70199),t(83190),t(49089),t(62692),t(13715);var d=t(6123),p=t(80660),m={class:"sie-select-general"};function f(e,o){var t=(0,a.g2)("sie-select");return(0,a.uX)(),(0,a.CE)("div",m,[(0,a.bF)(t,{modelValue:e.selected,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.selected=o}),type:"outlined",options:e.listaReportes,label:"NOMBRE",val:"CODIGO",onSelected:e.seleccionar,placeholder:e.label,"no-bottom":""},null,8,["modelValue","options","onSelected","placeholder"])])}var h=t(93616),g={emits:["update:todos","update:modelValue","input","seleccionar"],name:"sieReportes",components:{sieSelect:h.A},props:{modelValue:{String:String,default:""},todos:{type:Boolean,default:!0},campos:{type:Array},label:{type:String,default:"reporte"}},data:function(){return{listaReportes:[]}},computed:{all:{get:function(){return this.todos},set:function(e){this.$emit("update:todos",e)}},selected:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},methods:{getListaReportes:function(){var e=this;p.$http.get("api/HyoReportescased/getReportes").then(function(o){e.listaReportes=o})},seleccionar:function(e){this.$emit("seleccionar",e)},onInput:function(e){}},created:function(){this.getListaReportes()}},v=t(12807);const C=(0,v.A)(g,[["render",f]]);var b=C,V=t(73890),A=t(12547),O=t(84603),S=t(72453),R=t(96529),E={class:"sie-select-general"};function M(e,o){var t=(0,a.g2)("q-select");return(0,a.uX)(),(0,a.CE)("div",E,[(0,a.bF)(t,{class:"q-if-outlined",multiple:"",modelValue:e.multipleSelect,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.multipleSelect=o}),options:e.listaColegios},null,8,["modelValue","options"])])}var F={emits:["update:modelValue","input"],name:"sieColegio",components:{QSelect:d.Si},props:{modelValue:{String:String,default:""}},data:function(){return{listaColegios:[]}},computed:{multipleSelect:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e),this.$emit("input",e)}}},methods:{getListaColegios:function(){var e=this;p.$http.get("api/HyoColegios/getColegios").then(function(o){var t=[];e.listaColegios=o.map(function(o){var i=o.COLCOD,n=o.COLDES;return t.push(i),e.multipleSelect=t,{value:i,label:n}})})}},created:function(){this.getListaColegios()}};const y=(0,v.A)(F,[["render",M]]);var k=y,P=t(51082),D=t(10270),Q=t(982),T=t(57668),I=t(19434),U={components:{sieSelect:h.A,sieColegio:k,sieAno:S.A,sieFamilia:R.A,sieGrado:A.A,sieNivel:V.A,siePdf:O.A,sieReportes:b,sieDate:P.A,sieChart:D.A,QSelect:d.Si,QItem:d.H0,QItemMain:d.mF,QTr:d.qh,QTd:d.Ef,QPage:d.Tu,QCard:d.C$,QCardTitle:d.u0,QCardSeparator:d.d6,QCardMain:d.d1,QBtn:d.Il},directives:{download:I.A},data:function(){return{sieanio:!1,sienivel:!1,siegrado:!1,siecolegio:!1,siefecha1:!1,sieword:!1,siepdf:!1,sieexcel:!1,urlreporte:"",list:[],chartOptions:{maintainAspectRatio:!1},chart:{data:[[8],[8],[2],[3],[3],[3],[3],[3],[3],[3],[3],[3],[4],[3],[4]],series:["polo","quinones","cesarfaura","franciscosecada","josevelarde","renanelias","renegarcia","raulleguia","samuelordonez","camacho","seman","sangabino","santamercedes","virgendeloreto","oscarmunoz"],categories:["P2"],type:"bar",colors:["#4bae4f","#d32f2f","#3F51B5","#4BAE4F","#9B26AF","#00BBD3","#FEC006","#009587","#5F7C8A"]},sie:(0,T["default"])(),codigoreporte:"0000",grupo:1,nivel:"",grado:"",mescod:"",concob:"",anocob:"",famcod:"",moncod:"",colegios:[],optionMes:[],optionConceptos:[],optionAnios:[],optionFamilia:[],optionMonedas:[{label:"Soles",value:"001"},{label:"Dolares",value:"002"}],seccion:"",ano:String((0,T["default"])().ano),parametros:[],parametrosForm:{moncod:{CAMPO:"moncod",NOMBRE:"Moneda",REPORTES:["0010","0012","0013","0015","0025","0026","0027"],ACTIVO:0},mescod:{CAMPO:"mescod",NOMBRE:"Mes",REPORTES:["0025"],ACTIVO:0},concob:{CAMPO:"concob",NOMBRE:"Concepto de Cobro",REPORTES:["0025","0026","0027"],ACTIVO:0},anocob:{CAMPO:"anocob",NOMBRE:"Año",REPORTES:["0026"],ACTIVO:0},famcod:{CAMPO:"famcod",NOMBRE:"Familia",REPORTES:["0028"],ACTIVO:0}},fecha1:d.p6.formatDate(new Date,"YYYY-MM-DD"),fecha2:d.p6.formatDate(new Date,"YYYY-MM-DD"),colcod:"0136",multipleSelect:["instrucod","gradocod","famtip"],tempUrlReporte:"",selectOptions:[{label:"Nivel",value:"instrucod"},{label:"Grado",value:"gradocod"},{label:"tipo familia",value:"famtip"}],optionsAiec:[{label:"Colegios Privados",value:1},{label:"Colegios de financiación mixta",value:2},{label:"Estatal",value:3}]}},methods:{cambiaUrlReporte:function(e){this.urlreporte=!1;var o=this.codigoreporte,t=this.nivel,i=this.grado,n=this.colcod,a=this.seccion,l=this.ano,s=this.fecha1,r=this.mescod,c=this.concob,u=this.anocob,p=this.moncod,m=this.famcod,f=this.grupo,h=JSON.stringify({codigoreporte:o,GRUPO:f,nivel:t,grado:i,colcod:n,seccion:a,ano:l,fecha1:d.p6.formatDate(s,"YYYY-MM-DD"),tipo:e,mescod:r,concob:c,anocob:u,moncod:p,famcod:m});this.tempUrlReporte="".concat(this.sie.url,"/corporativo/reportes/params/").concat(h,"/").concat(e)},selectedReport:function(e){this.sieanio=!1,this.sienivel=!1,this.siegrado=!1,this.siecolegio=!1,this.siefecha1=!1,this.siefecha2=!1,this.sieword=!!e.WORD,this.siepdf=!!e.PDF,this.sieexcel=!!e.EXCEL,this.getParametros(e.REPORTE_ID),this.cambiaUrlReporte()},selectedAno:function(e){},selectedNivel:function(e){},selectedGrado:function(e){},selectedSeccion:function(e){},selectedColegio:function(e){},selectedFecha1:function(e){var o=this;this.$nextTick(function(){o.cambiaUrlReporte()})},getParametros:function(e){var o=this;p.$http.post("api/HyoReportescased/getParametros",{reporte_id:e}).then(function(e){o.parametros=e,e.map(function(e){o[e.COMPONENTE.toLowerCase()]=!0});var t=Object.values(o.parametrosForm);t.forEach(function(e){e.REPORTES.includes(o.codigoreporte)?(o.parametros.push(e),o.parametrosForm[e.CAMPO].ACTIVO=1):o.parametrosForm[e.CAMPO].ACTIVO=0})})},imprimir:function(e){if("0000"===this.reporte)return(0,Q["default"])("Elija un reporte","warning"),!1;for(var o="",t=0;t<this.parametros.length;t++)if(!this[this.parametros[t].CAMPO]){o=this.parametros[t].NOMBRE;break}return o&&"0024"!==this.codigoreporte?((0,Q["default"])("Falta seleccionar el parametro "+o,"warning"),!1):"0026"===this.codigoreporte&&this.ano>this.anocob?((0,Q["default"])("El Año 1 no puede ser mayor al Año 2","warning"),!1):(this.cambiaUrlReporte(e),void("pdf"===e?this.urlreporte=this.tempUrlReporte:window.open(this.tempUrlReporte)))},getColegios:function(){var e=this;p.$http.get("api/HyoColegios/getColegios").then(function(o){e.colegios=o.map(function(e){var o=e.COLCOD,t=e.COLDES;return{value:o,label:t}}).filter(function(e){return"C001"!==e.value})})},getMeses:function(){var e=this;p.$http.get("api/HyoMeses/obtMeses").then(function(o){var t=o.json;e.optionMes=t.map(function(e){var o=e.MESCOD,t=e.MESDES;return{value:o,label:t}})})},getConceptos:function(){var e=this;p.$http.get("api/HyoConcobro/obtConceptos").then(function(o){var t=o.json;e.optionConceptos=t.map(function(e){var o=e.VALOR,t=e.DESCRIPCION;return{value:o,label:t}})})},getAnios:function(){var e=this;p.$http.get("api/HyoAnos/getAnios").then(function(o){e.optionAnios=o.map(function(e){var o=e.ANO,t=e.ANO;return{value:o,label:t}})})},getFamilia:function(){var e=this;p.$http.get("api/HyoFamilias/listarFamiliasPorSectorista").then(function(o){e.optionFamilia=o})}},computed:{height:function(){return Array.isArray(this.list)&&this.list.length>=10?350*Math.ceil(this.list.length/20)+"px":"600px"}},created:function(){this.getColegios(),this.getConceptos(),this.getMeses(),this.getAnios(),this.getFamilia()}};const q=(0,v.A)(U,[["render",u],["__scopeId","data-v-6a12e04d"]]);var w=q}}]);