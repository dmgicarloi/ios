"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[12950],{12950:function(a,e,i){i.r(e),i.d(e,{default:function(){return U}});var n=i(8445),t=i.n(n),o=i(61758),l=i(58790),r={class:"intranet--galeria-agregar q-pa-sm col column"},u={key:1,class:"col column"},d={class:"col scroll-y"},c={class:"row q-col-gutter-sm"},s={class:"col column justify-center"},m={class:"column items-center"},p={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-xs"},g={class:"layout-padding q-pt-md q-pl-md q-pr-md q-pb-xs"};function f(a,e){var i=(0,o.g2)("header-btn"),n=(0,o.g2)("q-spinner-oval"),f=(0,o.g2)("q-inner-loading"),h=(0,o.g2)("sie-upload"),v=(0,o.g2)("q-icon"),b=(0,o.g2)("q-card-media"),k=(0,o.g2)("q-input"),C=(0,o.g2)("q-card-main"),y=(0,o.g2)("q-card"),I=(0,o.g2)("q-card-section"),L=(0,o.g2)("crear-categoria");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(y,{class:"col column",flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(i,{name:"Galería - ".concat(a.params.DESCRIPCION),buttons:a.buttons},null,8,["name","buttons"]),(0,o.bF)(I,{class:"col column"},{default:(0,o.k6)(function(){return["Y"===a.uploadLoading?((0,o.uX)(),(0,o.Wv)(f,{key:0,visible:"Y"===a.uploadLoading},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{size:"50px",color:"primary"})]}),_:1},8,["visible"])):((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.Lk)("div",{class:(0,l.C4)(["col-xs-12",{"row col-sm-6 col-md-4 col-lg-3 col-xl-2":a.multimediaTmp.length>0}])},[(0,o.Lk)("div",s,[(0,o.Lk)("div",m,[(0,o.bF)(h,{onUvideo:a.setVideoTmp,multimedia:!0,title:"Arrastre una imagen o pdf, o haga clic para agregar",preview:!1,onUpload:a.uploadImageTmp,multiple:"",allow:["png","jpg","jpeg","gif"]},{delete:(0,o.k6)(function(){return t()(e[3]||(e[3]=[(0,o.Lk)("div",null,null,-1)]))}),_:1},8,["onUvideo","onUpload"])])])],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.multimediaTmp,function(e,i){return(0,o.uX)(),(0,o.CE)("div",{key:i,class:"col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},[(0,o.bF)(y,{flat:"",bordered:""},{default:(0,o.k6)(function(){return[(0,o.bF)(b,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",{class:"img",style:(0,l.Tr)({"background-image":"url("+e.image+")"})},[(0,o.bF)(v,{class:"delete-icon bg-secondary",name:"delete",onClick:function(e){return a.deleteImageTmp(i)}},null,8,["onClick"])],4)]}),_:2},1024),(0,o.bF)(C,{style:{height:"200px"}},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",p,[(0,o.bF)(k,{modelValue:e.titulo,"onUpdate:modelValue":function(a){return e.titulo=a},"float-label":"Título"},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Lk)("div",g,[(0,o.bF)(k,{modelValue:e.descripcion,"onUpdate:modelValue":function(a){return e.descripcion=a},type:"textarea","float-label":"Descripción","max-height":60},null,8,["modelValue","onUpdate:modelValue"])])]}),_:2},1024)]}),_:2},1024)])}),128))])])]))]}),_:1}),(0,o.bF)(L,{modelValue:a.opened,"onUpdate:modelValue":e[0]||(e[0]=function(e){return a.opened=e}),onSave:a.modifyCategoria,name:a.category,"onUpdate:name":e[1]||(e[1]=function(e){return a.category=e}),id:a.params.IDCATEGORIA,aulas:a.params.salones,anio:a.params.ANO,"onUpdate:anio":e[2]||(e[2]=function(e){return a.params.ANO=e})},null,8,["modelValue","onSave","name","id","aulas","anio"])]}),_:1})])}var h=i(76080),v=i.n(h),b=i(45254),k=i.n(b),C=(i(10239),i(6123)),y=i(96122),I=i(59089),L=i(30640),T=i(88477),q=i(88567),w=i(95718),A=i(57668),V=i(80660),x={components:{QPageSticky:C._U,QVideo:C.d7,QScrollArea:y.A,QInnerLoading:C.SQ,QSpinnerOval:C.VA,SieUpload:I.A,SieModal:L.A,CrearCategoria:T.A,QCard:q.A,QCardSection:w.A,QCardMedia:C.wy,QIcon:C.bP,QCardMain:C.d1,QInput:C.ie},data:function(){return{visible:!1,opened:!1,params:{},category:"",images:[],uploadLoading:"N",show:!1,sieInfo:(0,A["default"])(),modulo:"intranet"}},methods:{modifyCategoria:function(a){var e=this;return k()(v()().m(function i(){return v()().w(function(i){while(1)switch(i.n){case 0:e.params.DESCRIPCION=a,e.getData();case 1:return i.a(2)}},i)}))()},getData:function(){var a=this;this.galeria.clearMultimediaTmp(),this.galeria.clearCards(),this.galeria.clearSilder(),V.$http.get("api/HyoGaleria/listaCategorias",{params:{id:this.$route.params.id}}).then(function(e){var i=e.json;a.category=i.DESCRIPCION,a.params=i,a.galeria.getCards({data:a.params,xfunction:function(e){a.stepLoading=e?"Y":"N"}})})},uploadImageTmp:function(a){var e=this;this.uploadLoading="Y",this.galeria.uploadImageTmp({files:a,xfunction:function(){e.uploadLoading="N"}})},deleteImageTmp:function(a){this.galeria.deleteMultimediaTmp(a)},setVideoTmp:function(){this.galeria.setVideoTmp(function(){})},saveMultimediaTmp:function(){var a=this;this.uploadLoading="Y",this.galeria.saveMultimediaTmp({data:this.params,xfunction:function(e){e?(a.uploadLoading="N",a.$router.push({name:"".concat(a.modulo,".galeria.editar"),params:{id:a.$route.params.id}})):a.uploadLoading="N"}})},goLista:function(){this.$router.push({name:"".concat(this.modulo,".galeria.editar"),params:{id:this.$route.params.id}})}},computed:{buttons:function(){var a=this,e=[{icon:"arrow_back",label:"Atrás",click:function(){a.goLista()}},{icon:"save",label:"Grabar multimedia",click:function(){a.saveMultimediaTmp()},permiso:"===3"}];return this.sieInfo.ruta.nivel>=2&&this.params.PROPIA&&e.push({icon:"edit",label:"Editar Galería",click:function(){a.opened=!0}}),e},multimediaTmp:function(){return window.galeria.multimediaTmp},galeria:function(){return window.galeria}},created:function(){this.modulo=this.sieInfo.modulo,this.getData()}},F=i(12807);const S=(0,F.A)(x,[["render",f]]);var U=S}}]);