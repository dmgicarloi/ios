"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[26447],{26447:function(e,a,n){n.r(a),n.d(a,{default:function(){return Y}});var t=n(8445),r=n.n(t),o=(n(39866),n(61758)),i=n(58790),s=n(29104),l={class:"col"},c={style:{"min-height":"120px"}},u=["src"],d={key:1,class:"col-12 column items-center q-py-md"},m={class:"col"},p={class:"row q-pa-md"},f={class:"col-xs-12"},g={class:"q-pa-sm",align:"right"};function h(e,a){var n=this,t=(0,o.g2)("sie-estudiantes"),h=(0,o.g2)("q-card-title"),b=(0,o.g2)("q-tab"),A=(0,o.g2)("q-tabs"),v=(0,o.g2)("q-btn"),F=(0,o.g2)("q-tab-panel"),C=(0,o.g2)("sie-table"),_=(0,o.g2)("q-tab-panels"),k=(0,o.g2)("q-card-main"),T=(0,o.g2)("formularioCovid"),w=(0,o.g2)("q-toolbar"),y=(0,o.g2)("sie-modal"),H=(0,o.g2)("q-card"),S=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(S,{class:"sie-flat pasebrae bg-white q-pa-sm"},{default:(0,o.k6)(function(){return[(0,o.bF)(H,null,{default:(0,o.k6)(function(){return[e.isFamAlu?((0,o.uX)(),(0,o.Wv)(h,{key:0},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",l,[(0,o.bF)(t,{modelValue:e.persona,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.persona=a}),onSelected:e.cambiarAlumno},null,8,["modelValue","onSelected"])])]}),_:1})):(0,o.Q3)("v-if",!0),(0,o.bF)(k,null,{default:(0,o.k6)(function(){return[(0,o.bF)(A,{class:"text-teal",align:"left",dense:!0,modelValue:e.tabType,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.tabType=a})},{default:(0,o.k6)(function(){return[(0,o.bF)(b,{class:"text-primary","no-caps":"",name:"pase",label:"Pase"}),e.isFamAlu?((0,o.uX)(),(0,o.Wv)(b,{key:0,class:"text-primary","no-caps":"",name:"cronograma",label:"Cronograma"})):(0,o.Q3)("v-if",!0),(0,o.bF)(b,{class:"text-primary","no-caps":"",name:"historial",label:"Historial"}),(0,o.bF)(b,{class:"text-primary","no-caps":"",name:"temperatura",label:"Temperatura"})]}),_:1},8,["modelValue"]),(0,o.bF)(_,{modelValue:e.tabType,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.tabType=a}),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,o.k6)(function(){return[(0,o.bF)(F,{name:"pase"},{default:(0,o.k6)(function(){return[n.persona?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"qr-pase",style:(0,i.Tr)({"background-color":e.pase.fondo})},[(0,o.Lk)("div",c,[e.pase.qr?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"qrAlumno",src:e.pase.qr,alt:""},null,8,u)):(0,o.Q3)("v-if",!0)]),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"q-pt-md text-bold",style:(0,i.Tr)({color:e.pase.color})},(0,i.v_)(e.pase.nomcomp),5),(0,o.bo)((0,o.Lk)("p",{class:"q-pt-md text-bold",style:(0,i.Tr)({color:e.pase.color})},(0,i.v_)(e.pase.nemodes),5),[[s.aG,e.pase.nemodes]]),(0,o.bo)((0,o.Lk)("p",{class:"q-pt-md text-bold q-pl-md q-pr-md",style:(0,i.Tr)({color:e.pase.color})},(0,i.v_)(e.pase.estado),5),[[s.aG,e.pase.estado]]),(0,o.Lk)("p",{class:"q-pt-md text-bold",style:(0,i.Tr)({color:e.pase.color})},(0,i.v_)(e.pase.fecha),5),(0,o.Lk)("p",{class:"text-bold",style:(0,i.Tr)({color:e.pase.color})},(0,i.v_)(e.pase.dia),5)])],4)):(0,o.Q3)("v-if",!0),[0,1].includes(e.pase.estado_pase)?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.bF)(v,{label:"Imprimir",icon:"print",color:"primary",onClick:e.imprimirPase},null,8,["onClick"])])):(0,o.Q3)("v-if",!0)]}),_:1}),(0,o.bF)(F,{name:"cronograma"},{default:(0,o.k6)(function(){return[(0,o.bF)(h,{class:"text-weight-bold"},{default:(0,o.k6)(function(){return r()(a[4]||(a[4]=[(0,o.eW)("Próximos Ingresos",-1)]))}),_:1}),(0,o.Lk)("div",m,[(0,o.bF)(C,{data:e.rowsCronograma,columns:e.fieldsCronograma,config:e.configCronograma,"put-text":"",context:n,css:{height:"78vh"}},null,8,["data","columns","config"])])]}),_:1}),(0,o.bF)(F,{name:"historial"},{default:(0,o.k6)(function(){return[(0,o.bF)(C,{data:e.rows,columns:e.fields,config:e.config,"put-text":"",context:n,css:{height:"78vh"}},null,8,["data","columns","config"])]}),_:1}),(0,o.bF)(F,{name:"temperatura"},{default:(0,o.k6)(function(){return[(0,o.bF)(C,{data:e.rowsTemperatura,columns:e.fieldsTemperatura,config:e.configTemperatura,context:n,css:{height:"78vh"}},null,8,["data","columns","config"])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1}),(0,o.bF)(y,{class:"full-height",ok:!1,title:"Ficha Sintomatológica",modelValue:e.modalFicha,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.modalFicha=a}),footer:!0,css:{height:"100vh",width:"60vw"}},{footer:(0,o.k6)(function(){return[(0,o.Lk)("div",g,[(0,o.bF)(w,{class:"justify-end",color:"grey-2"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",null,[(0,o.bF)(v,{class:"q-mx-xs",icon:"print",label:"Imprimir",onClick:e.imprimirForm,color:"primary"},null,8,["onClick"])])]}),_:1})])]}),default:(0,o.k6)(function(){return[(0,o.Lk)("div",p,[(0,o.Lk)("div",f,[e.fichaSelected.ID_FRM_USUARIO?((0,o.uX)(),(0,o.Wv)(T,{key:0,class:"full-height full-width overflow-auto",ref:"frmReg",ficha:e.fichaSelected,preview:!1,previewConsultas:!0},null,8,["ficha"])):(0,o.Q3)("v-if",!0)])])]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})}var b=n(76080),A=n.n(b),v=n(45254),F=n.n(v),C=(n(30683),n(6123)),_=n(26697),k=n(53093),T=n(53811),w=n(43346),y=n(11654),H=n(9736),S=n(16648),E=n(88567),P=n(40102),I=n(95718),q=n(80340),Q=n(57668),L=n(65229),x=n(982),R=n(92173),D=n(80660),O={getPase:function(e){return D.$http.get("api/FichaSintomatologica/getPase",{params:{data:e}})},historialPases:function(e){return D.$http.get("api/FichaSintomatologica/historialPases",{params:{codigoPersona:e}})}},U=n(2819),V=n(18105),N={data:function(){return{config:{FH_PASE:{component:"date",format:"DD/MM/YYYY",edit:!1},FH_AST_CONTROL:{renderHtml:function(e,a){return a("span",{},(0,V.Ay)(e.FH_AST_CONTROL,"HH:mm a"))}},FH_AST_SALIDA:{renderHtml:function(e,a){return a("span",{},(0,V.Ay)(e.FH_AST_SALIDA,"HH:mm a"))}},ACCION:{component:"button",icon:["remove_red_eye as ver"],ver:function(e){var a=this;return F()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:a.fichaSelected=e,a.modalFicha=!0;case 1:return n.a(2)}},n)}))()},flat:!0,color:"primary",dense:!1}},rows:[],fields:[{name:"FECHA_DIA",label:"Día",field:"FECHADIA",align:"left"},{name:"FH_PASE",label:"Fecha del Pase de ingreso",field:"FH_PASE",align:"center"},{name:"RESULTADO",label:"Estado",field:"RESULTADO",align:"center"},{name:"FH_AST_CONTROL",label:"Control de Ingreso",field:"FH_AST_CONTROL",align:"center"},{name:"FH_AST_SALIDA",label:"Control de salida",field:"FH_AST_SALIDA",align:"center"},{name:"ACCION",label:"Acciones",field:"ACCION",align:"center",width:50}]}}},M={data:function(){return{configTemperatura:{FECHA:{component:"datetime",edit:!1}},rowsTemperatura:[],fieldsTemperatura:[{name:"FECHA",label:"Fecha",field:"FECHA",align:"center"},{name:"TEMPERATURA",label:"Temperatura",field:"TEMPERATURA",align:"center"}]}}},X={data:function(){return{configCronograma:{FH_PASE:{component:"datetime",edit:!1},FH_INICIO:{component:"datetime",edit:!1},FH_CIERRE:{component:"datetime",edit:!1}},rowsCronograma:[],fieldsCronograma:[{name:"FECHA_DIA",label:"Día de ingreso",field:"FECHADIA",align:"left"},{name:"FH_PASE",label:"Ingreso al colegio",field:"FH_PASE",align:"center"},{name:"FH_INICIO",label:"Inicio de registro",field:"FH_CIERRE",align:"center"},{name:"FH_CIERRE",label:"Cierre de registro",field:"FH_CIERRE",align:"center"}]}}},$=n(30640),B={directives:{sieActive:L.A},components:{QToolbar:C.ZV,QTabs:_.A,QTab:k.A,QTabPanels:T.A,QTabPanel:w.A,QBtn:y.A,QSelect:S.A,QInput:H.A,QPageSticky:C._U,QFab:C.l6,QCard:E.A,QFabAction:C.B$,QCardSection:I.A,QInnerLoading:C.SQ,QSpinnerOval:C.VA,sieVacio:q.A,formularioCovid:P.A,sieEstudiantes:R.Ay,sieModal:$.A,QPage:C.Tu,QCardTitle:C.u0,QCardMain:C.d1},mixins:[N,M,X],data:function(){return{tabType:"pase",sie:(0,Q["default"])(),pase:this.paseDefault(),questions:[],fichaHead:"",fichaFooter:"",persona:"",datosPersona:{},alumno:{alucod:"",nemo:""},modalFicha:!1,fichaSelected:{},profesores:[],alumnos:[],isFamAlu:(0,Q["default"])().esFamilia||(0,Q["default"])().esEstudiante}},methods:{paseDefault:function(e){var a={};return a=e||{qr:"",estado:"SIN REGISTRO",fecha:"",dia:"",fondo:"white",color:"black",nemodes:"",nomcomp:""},a},getPase:function(){var e=this;return F()(A()().m(function a(){var n,t;return A()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,O.getPase(e.datosPersona);case 1:n=a.v,e.pase=e.paseDefault(n||null),e.pase.qr=n.estado_pase>=0?"".concat(e.sie.api,"/HyoQr/generarQr/").concat(e.persona):"",a.n=3;break;case 2:a.p=2,t=a.v,(0,x["default"])(t.error.message||t.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])}))()},historialPases:function(){var e=this;return F()(A()().m(function a(){return A()().w(function(a){while(1)switch(a.p=a.n){case 0:if(a.p=0,e.persona){a.n=1;break}return a.a(2,!1);case 1:return a.n=2,O.historialPases(e.persona);case 2:e.rows=a.v,a.n=4;break;case 3:a.p=3,a.v,(0,x["default"])("Ha ocurrido un problema de conexión vuelve a intentarlo","warning");case 4:return a.a(2)}},a,null,[[0,3]])}))()},loadCovidTemperaturaByUsuario:function(){var e=this;return F()(A()().m(function a(){return A()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/covidtemperatura/getCovidTemperaturaByUsuarios",{params:{codigo:e.persona}});case 1:e.rowsTemperatura=a.v;case 2:return a.a(2)}},a)}))()},loadCronogramaAlumno:function(){var e=this;return F()(A()().m(function a(){var n,t;return A()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.$http.get("api/HyoCovidProceso/getCovidCronogramaAlumno",{params:{alucod:e.persona}});case 1:n=a.v,t=n.json,e.rowsCronograma=t;case 2:return a.a(2)}},a)}))()},cambiarAlumno:function(e){var a=this;return F()(A()().m(function n(){return A()().w(function(n){while(1)switch(n.n){case 0:return a.persona=e.ALUCOD,a.alumno.alucod=e.ALUCOD,a.alumno.nemo=e.NEMO,a.datosPersona=a.alumno,n.n=1,a.cargarData();case 1:return n.a(2)}},n)}))()},cargarData:function(){var e=this;return F()(A()().m(function a(){return A()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getPase();case 1:if(!e.isFamAlu){a.n=2;break}return a.n=2,e.loadCronogramaAlumno();case 2:return a.n=3,e.historialPases();case 3:return a.n=4,e.loadCovidTemperaturaByUsuario();case 4:return a.a(2)}},a)}))()},imprimirPase:function(){var e={repcod:"reportesPaseIngreso",formato:"pdf",qr:this.pase.qr,estado:this.pase.estado,fecha:this.pase.fecha,dia:this.pase.dia,fondo:this.pase.fondo,color:this.pase.color,nemodes:this.pase.nemodes,nomcomp:this.pase.nomcomp};(0,U.exportFilePhp)(e,"webservice/reportes/reporte")},imprimirForm:function(){this.$refs.frmReg.imprimir()}},created:function(){this.sie.esOtros&&(this.persona=this.sie.profcod,this.datosPersona={profcod:this.persona},this.cargarData())}},W=n(12807);const j=(0,W.A)(B,[["render",h]]);var Y=j}}]);