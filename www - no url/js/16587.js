"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[16587],{16587:function(n,e,a){a.r(e),a.d(e,{default:function(){return v}});var r=a(61758),t={class:"row col q-mt-lg"},i={class:"col-sm-12"};function o(n,e){var a=(0,r.g2)("header-btn"),o=(0,r.g2)("formulario"),u=(0,r.g2)("q-card-section"),c=(0,r.g2)("sie-modal"),s=(0,r.g2)("q-card"),l=(0,r.g2)("q-page");return(0,r.uX)(),(0,r.Wv)(l,{class:"q-pa-sm"},{default:(0,r.k6)(function(){return[(0,r.bF)(s,{class:"col column"},{default:(0,r.k6)(function(){return[(0,r.bF)(u,null,{default:(0,r.k6)(function(){return[(0,r.bF)(a,{name:n.tituloForm,buttons:n.botonesForm},null,8,["name","buttons"]),(0,r.Lk)("div",t,[(0,r.Lk)("div",i,[(0,r.bF)(o,{schema:n.schemas[n.vista],ref:"formApp",key:"formApp",onClickIconGrid:n.clickIconGrid,onChangeInput:n.changeInput},null,8,["schema","onClickIconGrid","onChangeInput"])])]),(0,r.bF)(c,{title:n.configModalSel.titulo,modelValue:n.openModal,"onUpdate:modelValue":e[0]||(e[0]=function(e){return n.openModal=e}),onSubmit:n.submit},{default:(0,r.k6)(function(){return[(0,r.bF)(u,null,{default:(0,r.k6)(function(){return[(0,r.bF)(o,{schema:n.schemaModal,ref:"formModal",key:"formModal",onClickIconGrid:n.clickIconGrid,onChangeInput:n.changeInput,onInputBlur:n.inputBlur,modal:!0},null,8,["schema","onClickIconGrid","onChangeInput","onInputBlur"])]}),_:1})]}),_:1},8,["title","modelValue","onSubmit"])]}),_:1})]}),_:1})]}),_:1})}var u=a(76080),c=a.n(u),s=a(45254),l=a.n(s),f=(a(83190),a(76921),a(13600),a(52776),a(37406),a(84433),a(44264),a(6123)),m=a(65848),d={mixins:[m.A],data:function(){var n=this.init();return n.vista="",n},methods:{evaluarExpresion:function(n,e){var a=new RegExp(n);return!!a.test(e)},validarDocumento:function(n,e){var a="01"!==e?/^[-a-zA-Z0-9]{5,12}$/:/^[0-9]{8}$/,r=this.evaluarExpresion(a,n);return r},validarCorreo:function(n){var e=this.evaluarExpresion(/^([\w\.\-_]+)?\w+@[\w-_]+(\.\w+){1,}$/,n);return e},getIntegrantesFamiliasExternas:function(n,e,a){var r=this;return l()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:r.reloadGrid("formApp","GRID_1",{famcod:n[a],url:"api/inscripcionVacacionesController/getIntegrantesFamiliasExternas"});case 1:return e.a(2)}},e)}))()},seleccionarAlumno:function(n,e,a,r){var t=this;return l()(c()().m(function n(){return c()().w(function(n){while(1)switch(n.n){case 0:return n.n=1,t.setInputValue("formApp","INPUT_1",r.FAMCOD);case 1:return n.a(2)}},n)}))()},nombreApellidoMayuscula:function(n,e,a){var r=this;return l()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:r.$nextTick(l()(c()().m(function e(){return c()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,r.setInputValue("formModal",a,n[a].toUpperCase());case 1:return e.a(2)}},e)})));case 1:return e.a(2)}},e)}))()},agregarFamiliar:function(n){var e=this;return l()(c()().m(function a(){var r,t,i;return c()().w(function(a){while(1)switch(a.n){case 0:if(!e.sie.esFamiliaExterna){a.n=1;break}i=e.sie.usucod,a.n=3;break;case 1:return a.n=2,e.getInputValue("formApp","INPUT_1");case 2:i=a.v;case 3:if(r=i,0!==r.toString().length){a.n=4;break}e.$notify("Debe seleccionar una familia","warning"),a.n=5;break;case 4:return t={operacion:"agregar",FAMCOD:r},a.n=5,e.runModal(t,n.params.view,"I");case 5:return a.a(2)}},a)}))()},editarFamiliar:function(n,e,a){var r=this;return l()(c()().m(function e(){var t,i,o;return c()().w(function(e){while(1)switch(e.n){case 0:return n.operacion="editar",n.DOCIDECOD_ORIG=n.DOCIDECOD,n.DOCIDENRO_ORIG=n.DOCIDENRO,e.n=1,n.PARENTESCO;case 1:if(i=e.v,4!==i){e.n=2;break}o="familiaExternaHijo",e.n=3;break;case 2:o="familiaExternaFamiliar";case 3:return t=o,e.n=4,r.editModal(n,t,a);case 4:return e.a(2)}},e)}))()},preSubmit:function(n){var e=!0;0===n.APEPAT.length&&0===n.APEMAT.length&&(this.$notify("Debe indicar un apellido","warning"),e=!1);var a=this.validarDocumento(n.DOCIDENRO,n.DOCIDECOD);if(e&&!a&&(this.$notify("El documento de identidad no tiene un formato válido","warning"),e=!1),e&&"familiaExternaFamiliar"===this.configModalSel.codigoFormulario){var r=this.validarCorreo(n.CORREO);r||(this.$notify("El correo electrónico no tiene un formato válido","warning"),e=!1)}return{res:e,data:n}},postSubmit:function(n){var e=this;return l()(c()().m(function n(){var a,r;return c()().w(function(n){while(1)switch(n.n){case 0:if(!e.sie.esFamiliaExterna){n.n=1;break}r=e.sie.usucod,n.n=3;break;case 1:return n.n=2,e.getInputValue("formApp","INPUT_1");case 2:r=n.v;case 3:a=r,e.getIntegrantesFamiliasExternas({famcod:a},null,"famcod");case 4:return n.a(2)}},n)}))()},postModal:function(n,e,a){switch(this.configModalSel.codigoFormulario){case"familiaExternaHijo":"U"===this.currentAction&&this.$refs.formModal.loadModel(n);break}}},created:function(){var n=this;return l()(c()().m(function e(){var a;return c()().w(function(e){while(1)switch(e.n){case 0:n.vista=n.sie.esFamiliaExterna?"viewDatosFamiliaExterna":"viewDatosFamiliaExternaCol",["0005","A018"].indexOf(n.sie.colcod)>=0&&["001"].indexOf(n.sie.tipcod)>=0&&"viewDatosFamiliaExternaCol"===n.vista&&(n.vista="viewDatosFamiliaExternaColUsuario"),a=[{id:n.vista,ref:"formApp"}],n.loadSchemas(a);case 1:return e.a(2)}},e)}))()},components:{QPage:f.Tu,QCard:f.C$}},h=a(12807);const p=(0,h.A)(d,[["render",o]]);var v=p}}]);