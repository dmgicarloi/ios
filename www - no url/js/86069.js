"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[86069],{86069:function(o,e,t){t.r(e),t.d(e,{default:function(){return he}});var a=t(61758),n={class:"row q-px-sm q-pt-sm"},i={class:"col-2"},l={class:"col-xs-12 col-md-3"},r={class:"row"},s={class:"col-10"},c={class:"col-xs-12 col-md-3"},u={class:"row"},d={class:"col-xs-12 col-md-2"},m={class:"col-xs-12 col-md-2"},f={class:"col-xs-12 col-md-2"},p={class:"col-xs-12 col-md-2"},v={class:"col-xs-12 col-md-4"},h={class:"row"},g={class:"col-xs-12 col-md-4"},C={class:"col-xs-12 col-md-4"},S={class:"col-xs-12 col-md-4"},O={class:"row q-px-sm q-pt-sm"},A={class:"col-xs-12"},F={class:"row q-px-sm q-pt-sm"},b={class:"col-xs-12"};function D(o,e){var t=this,D=(0,a.g2)("header-btn"),N=(0,a.g2)("q-radio"),I=(0,a.g2)("q-select"),R=(0,a.g2)("selectMultiple"),w=(0,a.g2)("sie-table"),q=(0,a.g2)("q-card-section"),E=(0,a.g2)("q-card"),k=(0,a.g2)("imprimir"),V=(0,a.g2)("registro-carpeta"),U=(0,a.g2)("reprocesar-carpeta"),L=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(L,{class:"registroCarpetaRecuperacion q-px-sm q-pt-sm"},{default:(0,a.k6)(function(){return[(0,a.bF)(E,null,{default:(0,a.k6)(function(){return[(0,a.bF)(D,{name:"Carpeta de Recuperación",buttons:o.buttons},null,8,["buttons"]),(0,a.bF)(q,{style:{height:"calc(100vh - 125px)"}},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",l,[(0,a.Lk)("div",r,[(0,a.bF)(N,{class:"q-if-outlined",modelValue:o.vmFiltro.filtroLista,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.vmFiltro.filtroLista=e}),val:"P",label:"Pendientes"},null,8,["modelValue"])])])]),(0,a.Lk)("div",s,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("div",d,[(0,a.bF)(I,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.ano,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.vmFiltro.ano=e}),options:o.dataSelect.ano,label:"Año",filter:""},null,8,["modelValue","options"])]),(0,a.Lk)("div",m,[(0,a.bF)(I,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.instrucod,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.vmFiltro.instrucod=e}),"option-value":"INSTRUCOD","option-label":"INSTRUDES",options:o.dataSelect.instrucod,label:"Nivel",onInput:o.seleccionaInstru,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",f,[(0,a.bF)(I,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.gradocod,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.vmFiltro.gradocod=e}),"option-value":"GRADOCOD","option-label":"GRADODES",options:o.dataSelect.gradocod,label:"Grado",filter:""},null,8,["modelValue","options"])]),(0,a.Lk)("div",p,[(0,a.bF)(R,{options:o.dataSelect.turnocod,modelValue:o.vmFiltro.turnocod,labelSelect:"Turno",onChange:o.seleccionaTurno,filter:""},null,8,["options","modelValue","onChange"])]),(0,a.Lk)("div",v,[(0,a.bF)(R,{options:o.dataSelect.cursocod,modelValue:o.vmFiltro.cursocod,labelSelect:"Curso",onChange:o.seleccionaCurso,filter:""},null,8,["options","modelValue","onChange"])])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",g,[(0,a.bF)(R,{options:o.dataSelect.alucod,modelValue:o.vmFiltro.alucod,labelSelect:"Alumno",onChange:o.seleccionaAlumno,filter:""},null,8,["options","modelValue","onChange"])]),(0,a.Lk)("div",C,[(0,a.bF)(R,{options:o.dataSelect.estado,modelValue:o.vmFiltro.estado,labelSelect:"Estado",onChange:o.seleccionaEstado,filter:""},null,8,["options","modelValue","onChange"])]),(0,a.Lk)("div",S,[(0,a.bF)(R,{options:o.dataSelect.origen,modelValue:o.vmFiltro.origen,labelSelect:"Origen",onChange:o.seleccionaOrigen,filter:""},null,8,["options","modelValue","onChange"])])])])])]),(0,a.Lk)("div",O,[(0,a.Lk)("div",A,[(0,a.bF)(w,{selection:"single",showSearch:!1,context:t,onRowSelected:o.getDataExamenesCarp,css:"height:calc(50vh - 100px)",columns:o.fields,data:o.getDatos,config:o.config},null,8,["onRowSelected","columns","data","config"])])]),(0,a.Lk)("div",F,[(0,a.Lk)("div",b,[(0,a.bF)(w,{selection:"single",showSearch:!1,context:t,css:"height:calc(30vh - 10px)",columns:o.fieldsDetalle,data:o.rowsDetalle,config:o.configDetalle},null,8,["columns","data","config"])])])]}),_:1})]}),_:1}),o.vmModal.reporte?((0,a.uX)(),(0,a.Wv)(k,{key:0,ngs:o.ngs,estado:o.dataConfigInit.estado,arrAnio:o.dataConfigInit.dataAnios,arrOrigen:o.dataConfigInit.origen,dataCursosAnoNGS:o.dataCursosAnoNGS,onCerrarModalReporte:o.cerrarModalReporte},null,8,["ngs","estado","arrAnio","arrOrigen","dataCursosAnoNGS","onCerrarModalReporte"])):(0,a.Q3)("v-if",!0),o.vmModal.registroCarpeta?((0,a.uX)(),(0,a.Wv)(V,{key:1,ngs:o.ngs,arrAnio:o.dataConfigInit.dataAnios,dataCursosAnoNGS:o.dataCursosAnoNGS,dataPgEtapa:o.dataPgEtapa,onCerrarModalRegistroCarpeta:o.cerrarModalRegistroCarpeta},null,8,["ngs","arrAnio","dataCursosAnoNGS","dataPgEtapa","onCerrarModalRegistroCarpeta"])):(0,a.Q3)("v-if",!0),o.vmModal.reprocesarCarpeta?((0,a.uX)(),(0,a.Wv)(U,{key:2,ngs:o.ngs,arrAnio:o.dataConfigInit.dataAnios,onCerrarModalReprocesarCarpeta:o.cerrarModalReprocesarCarpeta},null,8,["ngs","arrAnio","onCerrarModalReprocesarCarpeta"])):(0,a.Q3)("v-if",!0)]}),_:1})}var N=t(76080),I=t.n(N),R=t(45254),w=t.n(R),q=(t(71225),t(39866),t(52133),t(10239),t(50310),t(5962),t(6724),t(70199),t(515),t(83190),t(62692),t(7346),t(6123)),E=t(80660),k=t(57668),V=t(2739),U=t(30640),L=t(16648),G=t(9736),T=t(95523),x=t(99515),M={data:function(){return{config:{ACTION:{flat:!0,dense:!0}},rows:[],fields:[{name:"ANO",label:"Ano",field:"ANO",align:"center"},{name:"NGS",label:"NGS",field:"NGS",align:"left"},{name:"ALUCOD",label:"Cod. Alumno",field:"ALUCOD",align:"left"},{name:"NOMCOMP",label:"Alumno",field:"NOMCOMP",align:"left"},{name:"CURSONOM",label:"Curso",field:"CURSONOM",align:"left"},{name:"INDICE",label:"Indice Evaluación",field:"INDICE",align:"right"},{name:"CRITDES",label:"Descripción",field:"CRITDES",align:"left"},{name:"ORIGENDES",label:"Origen",field:"ORIGENDES",align:"left"},{name:"NOTA",label:"Nota",field:"NOTA",align:"right"}],configDetalle:{ACTION:{flat:!0,dense:!0}},rowsDetalle:[],fieldsDetalle:[{name:"FECHA_EXAMEN",label:"Fecha Examen",field:"FECHA_EXAMEN",align:"center"},{name:"DESCRIPCION",label:"Etapa Evaluación",field:"DESCRIPCION",align:"left"},{name:"NOTA",label:"Nota",field:"NOTA",align:"left"}]}}},B=t(8445),y=t.n(B),P={class:"row q-ma-md"},$={class:"col-xs-12"},Q={class:"col",style:{"max-height":"60vh","overflow-y":"auto"}},_={class:"row"},J={class:"col-xs-6"},X={class:"col-xs-6"},W={class:"row"},j={class:"col-xs-12"},H={class:"row"},K={class:"col-xs-12"},Z={class:"row"},z={class:"col-xs-12"},Y={class:"row"},oo={class:"col-xs-12"},eo={class:"row"},to={class:"col-xs-12"},ao={class:"row"},no={class:"col-xs-12"};function io(o,e){var t=(0,a.g2)("q-radio"),n=(0,a.g2)("q-select"),i=(0,a.g2)("q-btn"),l=(0,a.g2)("q-toolbar"),r=(0,a.g2)("sie-modal");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:o.openModal,"onUpdate:modelValue":e[11]||(e[11]=function(e){return o.openModal=e}),css:{"min-width":"400px","max-width":"900px","min-height":"590px"},header:!0,ok:!1,title:"Reportes",onClose:o.cerrarModal},{footer:(0,a.k6)(function(){return[(0,a.bF)(l,{class:"justify-end",color:"grey-2"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",null,[(0,a.bF)(i,{class:"q-mx-xs",color:"primary",icon:"file_pdf",onClick:e[9]||(e[9]=function(e){return o.imprimir("pdf")})},{default:(0,a.k6)(function(){return y()(e[12]||(e[12]=[(0,a.eW)("PDF",-1)]))}),_:1}),(0,a.bF)(i,{class:"q-mx-xs",color:"primary",icon:"file_excel",onClick:e[10]||(e[10]=function(e){return o.imprimir("xls")})},{default:(0,a.k6)(function(){return y()(e[13]||(e[13]=[(0,a.eW)("Excel",-1)]))}),_:1})])]}),_:1})]}),default:(0,a.k6)(function(){return[(0,a.Lk)("div",P,[(0,a.Lk)("div",$,[(0,a.Lk)("div",Q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.tipoReportes,function(n,i){return(0,a.uX)(),(0,a.Wv)(t,{class:"q-mx-sm q-py-sm",modelValue:o.reporte,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.reporte=e}),val:n.value,label:n.label},null,8,["modelValue","val","label"])}),256))])])]),(0,a.Lk)("div",_,[(0,a.Lk)("div",J,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.ano,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.vmFiltro.ano=e}),options:o.dataSelect.ano,label:"Año",onInput:o.seleccionaAno,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",X,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.origen,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.vmFiltro.origen=e}),options:o.dataSelect.origen,label:"Origen",filter:""},null,8,["modelValue","options"])])]),(0,a.Lk)("div",W,[(0,a.Lk)("div",j,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.instrucod,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.vmFiltro.instrucod=e}),"option-value":"INSTRUCOD","option-label":"INSTRUDES",options:o.dataSelect.instrucod,label:"Nivel",onInput:o.seleccionaInstru,filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",H,[(0,a.Lk)("div",K,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.gradocod,"onUpdate:modelValue":e[4]||(e[4]=function(e){return o.vmFiltro.gradocod=e}),"option-value":"GRADOCOD","option-label":"GRADODES",options:o.dataSelect.gradocod,label:"Grado",onInput:o.seleccionaGrado,filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",Z,[(0,a.Lk)("div",z,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.seccioncod,"onUpdate:modelValue":e[5]||(e[5]=function(e){return o.vmFiltro.seccioncod=e}),"option-value":"SECCIONCOD","option-label":"SECCIONDES",options:o.dataSelect.seccioncod,label:"Seccion",onInput:o.seleccionaSeccion,filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",Y,[(0,a.Lk)("div",oo,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.cursocod,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.vmFiltro.cursocod=e}),"option-value":"CURSOCOD","option-label":"CURSONOM",options:o.dataSelect.cursocod,onInput:o.seleccionaCurso,label:"Curso",filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",eo,[(0,a.Lk)("div",to,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.estado,"onUpdate:modelValue":e[7]||(e[7]=function(e){return o.vmFiltro.estado=e}),options:o.dataSelect.estado,label:"Estado",filter:""},null,8,["modelValue","options"])])]),(0,a.Lk)("div",ao,[(0,a.Lk)("div",no,[(0,a.bF)(n,{class:"q-if-outlined",modelValue:o.vmFiltro.matricula,"onUpdate:modelValue":e[8]||(e[8]=function(e){return o.vmFiltro.matricula=e}),options:o.dataSelect.matricula,label:"Matricula",filter:""},null,8,["modelValue","options"])])])]}),_:1},8,["modelValue","onClose"])}var lo=t(91134),ro=t.n(lo),so=t(81288),co=t(2819),uo={emits:["cerrarModalReporte"],props:{ngs:{type:Object,default:function(){return{}}},dataCursosAnoNGS:{type:Object,default:function(){return{}}},estado:{type:Array,default:function(){return[]}},arrAnio:{type:Array,default:function(){return[]}},arrOrigen:{type:Array,default:function(){return[]}}},components:{sieModal:U.A,QSelect:L.A,QInput:G.A,QForm:V.A,QRadio:x.A,QToolbar:q.ZV,QBtn:q.Il},data:function(){return{vmFiltro:{formato:"pdf",filtroLista:"P",ano:"",instrucod:"",gradocod:null,seccioncod:null,turnocod:null,cursocod:null,estado:"",origen:"",matricula:""},dataSelect:ro()(ro()({ano:[],instrucod:[],gradocod:[],seccioncod:[],turnocod:[],cursocod:[],estado:[],origen:[],alucod:[]},"seccioncod",[]),"matricula",[{value:"",label:"Todos"},{value:"S",label:"Si"},{value:"N",label:"No"}]),openModal:!1,reporte:1,tipoReportes:[{label:"Alumnos con Carpeta de Recuperación",value:1}],defaultNiveles:{INSTRUDES:"Todos",INSTRUCOD:""},defaultGrados:{GRADODES:"Todos",GRADOCOD:""},defaultSecciones:{SECCIONDES:"Todos",SECCIONCOD:""},defaultTodos:{label:"Todos",value:""},defaultCursos:{CURSONOM:"Todos",CURSOCOD:""}}},computed:{isLess:function(){return(0,so.isLess)()}},methods:{seleccionaAno:function(o){this.vmFiltro.ano=o,this.seleccionaSeccion(this.vmFiltro.seccioncod)},seleccionaInstru:function(o){if(this.dataSelect.gradocod=[],o){var e=this.ngs[o].GRADOS;for(var t in e)this.dataSelect.gradocod.push(e[t])}this.dataSelect.gradocod.unshift(this.defaultGrados),this.vmFiltro.gradocod=this.dataSelect.gradocod[0].GRADOCOD,this.seleccionaGrado(this.vmFiltro.gradocod)},seleccionaGrado:function(o){this.vmFiltro.gradocod=o;var e=this.vmFiltro.instrucod;if(this.dataSelect.seccioncod=[],o){var t=this.ngs[e].GRADOS[o].SECCIONES;for(var a in t)this.dataSelect.seccioncod.push(t[a])}this.dataSelect.seccioncod.unshift(this.defaultSecciones),this.vmFiltro.seccioncod="",this.seleccionaSeccion(this.vmFiltro.seccioncod)},seleccionaSeccion:function(o){this.vmFiltro.seccioncod=o;var e=this.vmFiltro.ano,t=this.vmFiltro.instrucod,a=this.vmFiltro.gradocod,n=t+""+a+o;if(this.dataSelect.cursocod=[],o&&this.dataCursosAnoNGS[e]&&this.dataCursosAnoNGS[e][n]){var i=this.dataCursosAnoNGS[e][n];for(var l in i)this.dataSelect.cursocod.push(i[l])}this.dataSelect.cursocod.unshift(this.defaultCursos),this.vmFiltro.cursocod=""},seleccionaCurso:function(o){this.vmFiltro.cursocod=o},getNiveles:function(){for(var o in this.dataSelect.instrucod=[],this.ngs)this.dataSelect.instrucod.push(this.ngs[o]);this.dataSelect.instrucod.unshift(this.defaultNiveles)},init:function(){var o=this;return w()(I()().m(function e(){return I()().w(function(e){while(1)switch(e.n){case 0:o.dataSelect.estado=JSON.parse(JSON.stringify(o.estado)),o.dataSelect.estado.unshift(o.defaultTodos),o.dataSelect.ano=JSON.parse(JSON.stringify(o.arrAnio)),o.dataSelect.ano.unshift(o.defaultTodos),o.dataSelect.origen=JSON.parse(JSON.stringify(o.arrOrigen)),o.dataSelect.origen.unshift(o.defaultTodos),o.getNiveles(),o.seleccionaInstru(""),o.openModal=!0;case 1:return e.a(2)}},e)}))()},cerrarModal:function(){this.openModal=!1,this.$emit("cerrarModalReporte")},imprimir:function(o){var e=ro()({ano:this.vmFiltro.ano?this.vmFiltro.ano:"",instrucod:this.vmFiltro.instrucod?this.vmFiltro.instrucod:"",gradocod:this.vmFiltro.gradocod?this.vmFiltro.gradocod:"",seccioncod:this.vmFiltro.seccioncod?this.vmFiltro.seccioncod:"",alucod:this.vmFiltro.alucod?this.vmFiltro.alucod:"",matricula:this.vmFiltro.matricula?this.vmFiltro.matricula:"",cursocod:this.vmFiltro.cursocod?this.vmFiltro.cursocod:"",estado:this.vmFiltro.estado?this.vmFiltro.estado:"",origen:this.vmFiltro.origen?this.vmFiltro.origen:"",orden:this.vmFiltro.orden?this.vmFiltro.orden:"",retorno:"select",formato:this.vmFiltro.formato,repcod:"alumnosCarpetaRecuperacion",usucod:(0,k["default"])().usucod},"formato",o);(0,co.exportFilePhp)(e,"webservice/reportes/reporte")}},created:function(){var o=this;return w()(I()().m(function e(){return I()().w(function(e){while(1)switch(e.n){case 0:o.init();case 1:return e.a(2)}},e)}))()}},mo=t(12807);const fo=(0,mo.A)(uo,[["render",io]]);var po=fo,vo={class:"row"},ho={class:"col-xs-3"},go={class:"col-xs-3"},Co={class:"col-xs-3"},So={class:"col-xs-3"},Oo={class:"row"},Ao={class:"col-xs-12"},Fo={class:"row"},bo={class:"col-xs-12"},Do={class:"row"},No={class:"col-xs-12"},Io={class:"row"},Ro={class:"col-xs-12"},wo={class:"row"},qo={class:"col-xs-3"},Eo={class:"col-xs-3"},ko={class:"col-xs-3"},Vo={class:"col-xs-3"},Uo={class:"row"},Lo={class:"col-xs-12"},Go={class:"row"},To={class:"col-xs-12"},xo={class:"row"},Mo={class:"col-xs-12"},Bo={class:"row"},yo={class:"col-xs-12"};function Po(o,e){var t=this,n=(0,a.g2)("q-tab"),i=(0,a.g2)("q-tabs"),l=(0,a.g2)("q-separator"),r=(0,a.g2)("q-select"),s=(0,a.g2)("sie-table"),c=(0,a.g2)("q-tab-panel"),u=(0,a.g2)("q-tab-panels"),d=(0,a.g2)("sie-modal");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:o.openModal,"onUpdate:modelValue":e[16]||(e[16]=function(e){return o.openModal=e}),css:{"min-width":"600px","max-width":"1200px","min-height":"590px"},title:"Agregar Registro",onClose:o.cerrarModal,onSubmit:e[17]||(e[17]=function(e){return o.guardarCarpeta()})},{default:(0,a.k6)(function(){return[(0,a.bF)(i,{inverted:"",animated:"",modelValue:o.tab,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.tab=e}),swipeable:o.isLess},{default:(0,a.k6)(function(){return[(0,a.bF)(n,{default:"",name:"tab-1",label:"Registro por Alumno"}),(0,a.bF)(n,{name:"tab-2",label:"Registro en Bloque"})]}),_:1},8,["modelValue","swipeable"]),(0,a.bF)(l),(0,a.bF)(u,{modelValue:o.tab,"onUpdate:modelValue":e[15]||(e[15]=function(e){return o.tab=e})},{default:(0,a.k6)(function(){return[(0,a.bF)(c,{name:"tab-1"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",vo,[(0,a.Lk)("div",ho,[(0,a.bF)(r,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.ano,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.vmFiltro.ano=e}),options:o.dataSelect.ano,label:"Año",onInput:o.seleccionaAno,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",go,[(0,a.bF)(r,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.instrucod,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.vmFiltro.instrucod=e}),"option-value":"INSTRUCOD","option-label":"INSTRUDES",options:o.dataSelect.instrucod,label:"Nivel",onInput:o.seleccionaInstru,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",Co,[(0,a.bF)(r,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.gradocod,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.vmFiltro.gradocod=e}),"option-value":"GRADOCOD","option-label":"GRADODES",options:o.dataSelect.gradocod,onInput:o.seleccionaGrado,label:"Grado",filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",So,[(0,a.bF)(r,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.seccioncod,"onUpdate:modelValue":e[4]||(e[4]=function(e){return o.vmFiltro.seccioncod=e}),"option-value":"SECCIONCOD","option-label":"SECCIONCOD",options:o.dataSelect.seccioncod,onInput:o.seleccionaSeccion,label:"Seccion",filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",Oo,[(0,a.Lk)("div",Ao,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltro.alucod,"onUpdate:modelValue":e[5]||(e[5]=function(e){return o.vmFiltro.alucod=e}),options:o.dataSelect.alucod,"option-value":"ALUCOD","option-label":"NOMCOMP",label:"Alumno",filter:""},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Fo,[(0,a.Lk)("div",bo,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltro.cursocod,"onUpdate:modelValue":e[6]||(e[6]=function(e){return o.vmFiltro.cursocod=e}),options:o.dataSelect.cursocod,"option-value":"CURSOCOD","option-label":"CURSONOM",onInput:o.seleccionaCurso,label:"Curso",filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",Do,[(0,a.Lk)("div",No,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltro.etapa,"onUpdate:modelValue":e[7]||(e[7]=function(e){return o.vmFiltro.etapa=e}),options:o.dataSelect.etapa,"option-value":"ID_ETAPA","option-label":"DESCRIPCION",label:"Calificar desde la Etapa",filter:""},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Io,[(0,a.Lk)("div",Ro,[(0,a.bF)(s,{selection:"multiple",showSearch:!1,context:t,ref:"rowsCompetencias",css:"height:calc(30vh)",columns:o.fields,data:o.rows,config:o.config},null,8,["columns","data","config"])])])]}),_:1}),(0,a.bF)(c,{name:"tab-2"},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",wo,[(0,a.Lk)("div",qo,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltroBloque.ano,"onUpdate:modelValue":e[8]||(e[8]=function(e){return o.vmFiltroBloque.ano=e}),options:o.dataSelectBloque.ano,label:"Año",onInput:o.seleccionaAno,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",Eo,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltroBloque.instrucod,"onUpdate:modelValue":e[9]||(e[9]=function(e){return o.vmFiltroBloque.instrucod=e}),"option-value":"INSTRUCOD","option-label":"INSTRUDES",options:o.dataSelectBloque.instrucod,label:"Nivel",onInput:o.seleccionaInstru,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",ko,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltroBloque.gradocod,"onUpdate:modelValue":e[10]||(e[10]=function(e){return o.vmFiltroBloque.gradocod=e}),"option-value":"GRADOCOD","option-label":"GRADODES",options:o.dataSelectBloque.gradocod,label:"Grado",onInput:o.seleccionaGrado,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",Vo,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltroBloque.seccioncod,"onUpdate:modelValue":e[11]||(e[11]=function(e){return o.vmFiltroBloque.seccioncod=e}),"option-value":"SECCIONCOD","option-label":"SECCIONCOD",options:o.dataSelectBloque.seccioncod,label:"Seccion",onInput:o.seleccionaSeccion,filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",Uo,[(0,a.Lk)("div",Lo,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltroBloque.cursocod,"onUpdate:modelValue":e[12]||(e[12]=function(e){return o.vmFiltroBloque.cursocod=e}),"option-value":"CURSOCOD","option-label":"CURSONOM",options:o.dataSelectBloque.cursocod,onInput:o.seleccionaCurso,label:"Curso",filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",Go,[(0,a.Lk)("div",To,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltroBloque.indice,"onUpdate:modelValue":e[13]||(e[13]=function(e){return o.vmFiltroBloque.indice=e}),"option-value":"INDICE","option-label":"EVALUACION",options:o.dataSelectBloque.indice,label:"Competencia",filter:""},null,8,["modelValue","options"])])]),(0,a.Lk)("div",xo,[(0,a.Lk)("div",Mo,[(0,a.bF)(r,{class:"q-if-outlined",modelValue:o.vmFiltroBloque.etapa,"onUpdate:modelValue":e[14]||(e[14]=function(e){return o.vmFiltroBloque.etapa=e}),"option-value":"ID_ETAPA","option-label":"DESCRIPCION",options:o.dataSelectBloque.etapa,label:"Calificar desde la Etapa",filter:""},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Bo,[(0,a.Lk)("div",yo,[(0,a.bF)(s,{selection:"multiple",showSearch:!1,context:t,ref:"rowsAlumnos",css:"height:calc(30vh)",columns:o.fieldsBloque,data:o.rowsBloque,config:o.configBloque},null,8,["columns","data","config"])])])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1},8,["modelValue","onClose"])}t(11777);var $o={data:function(){return{config:{ACTION:{flat:!0,dense:!0},NOTA:{component:"input",type:"accept",upper:!0,autoSelect:!0,maxlength:2,accept:["0-9","C","backspace"],input:function(o,e,t){Number(o.NOTA)>10&&(e.NOTA=t)}}},rows:[],fields:[{name:"INDICE",label:"Indice",field:"INDICE",align:"right"},{name:"EVALUACION",label:"Competencia",field:"EVALUACION",align:"left"},{name:"NOTA",label:"Nota",field:"NOTA",align:"center"}],configBloque:{ACTION:{flat:!0,dense:!0},NOTA:{component:"input",type:"accept",upper:!0,autoSelect:!0,maxlength:2,accept:["0-9","C","backspace"],input:function(o,e,t){Number(o.NOTA)>10&&(e.NOTA=t)}}},rowsBloque:[],fieldsBloque:[{name:"ALUCOD",label:"Codigo",field:"ALUCOD",align:"center"},{name:"NOMCOMP",label:"Alumno",field:"NOMCOMP",align:"left"},{name:"NOTA",label:"Nota",field:"NOTA",align:"center"}]}}},Qo=t(53093),_o=t(26697),Jo=t(53811),Xo=t(43346),Wo=t(53380),jo={emits:["cerrarModalRegistroCarpeta"],props:{ngs:{type:Object,default:function(){return{}}},dataCursosAnoNGS:{type:Object,default:function(){return{}}},arrAnio:{type:Array,default:function(){return[]}},dataPgEtapa:{type:Object,default:function(){return[]}}},components:{sieModal:U.A,QSelect:L.A,QInput:G.A,QForm:V.A,selectMultiple:T.A,QTab:Qo.A,QTabs:_o.A,QTabPanels:Jo.A,QTabPanel:Xo.A,QSeparator:Wo.A},data:function(){return{openModal:!1,vmFiltro:{filtroLista:"P",ano:"",instrucod:"",gradocod:"",cursocod:"",etapa:"",alucod:""},dataSelect:{ano:[],instrucod:[],gradocod:[],cursocod:[],alucod:[],seccioncod:[],etapa:[]},vmFiltroBloque:{filtroLista:"P",ano:"",instrucod:"",gradocod:"",cursocod:"",origen:"",indice:"",etapa:""},dataSelectBloque:{ano:[],instrucod:[],gradocod:[],cursocod:[],estado:[],etapa:[],seccioncod:[]},tab:"tab-1"}},mixins:[$o],computed:{isLess:function(){return(0,so.isLess)()}},methods:{getNiveles:function(){for(var o in this.dataSelect.instrucod=[],this.dataSelectBloque.instrucod=[],this.ngs)this.dataSelect.instrucod.push(this.ngs[o]),this.dataSelectBloque.instrucod.push(this.ngs[o])},initTab:function(){var o=this;return w()(I()().m(function e(){return I()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,o.$nextTick();case 1:return e.a(2)}},e)}))()},seleccionaAno:function(o){var e=[];switch(this.tab){case"tab-1":if(this.vmFiltro.ano=o,this.dataSelect.etapa=[],o)for(var t in e=this.dataPgEtapa[o],e)this.dataSelect.etapa.push(e[t]);this.seleccionaSeccion(this.vmFiltro.seccioncod);break;case"tab-2":if(this.vmFiltroBloque.ano=o,this.dataSelectBloque.etapa=[],o)for(var a in e=this.dataPgEtapa[o],e)this.dataSelectBloque.etapa.push(e[a]);this.seleccionaSeccion(this.vmFiltroBloque.seccioncod);break}},seleccionaInstru:function(o){switch(this.tab){case"tab-1":if(this.dataSelect.gradocod=[],this.vmFiltro.instrucod=o,o){var e=this.ngs[o].GRADOS;for(var t in e)this.dataSelect.gradocod.push(e[t])}this.vmFiltro.gradocod="",this.seleccionaGrado(this.vmFiltro.gradocod);break;case"tab-2":if(this.dataSelectBloque.gradocod=[],this.vmFiltroBloque.instrucod=o,o){var a=this.ngs[o].GRADOS;for(var n in a)this.dataSelectBloque.gradocod.push(a[n])}this.vmFiltroBloque.gradocod="",this.seleccionaGrado(this.vmFiltroBloque.gradocod);break}},seleccionaGrado:function(o){var e="",t=[];switch(this.tab){case"tab-1":if(this.vmFiltro.gradocod=o,e=this.vmFiltro.instrucod,this.dataSelect.seccioncod=[],o)for(var a in t=this.ngs[e].GRADOS[o].SECCIONES,t)this.dataSelect.seccioncod.push(t[a]);this.vmFiltro.seccioncod="",this.seleccionaSeccion(this.vmFiltro.seccioncod);break;case"tab-2":if(this.vmFiltroBloque.gradocod=o,e=this.vmFiltroBloque.instrucod,this.dataSelectBloque.seccioncod=[],o)for(var n in t=this.ngs[e].GRADOS[o].SECCIONES,t)this.dataSelectBloque.seccioncod.push(t[n]);this.vmFiltroBloque.seccioncod="",this.seleccionaSeccion(this.vmFiltroBloque.seccioncod);break}},seleccionaSeccion:function(o){var e="",t="",a="",n="",i=[];switch(this.tab){case"tab-1":if(this.vmFiltro.seccioncod=o,e=this.vmFiltro.ano,t=this.vmFiltro.instrucod,a=this.vmFiltro.gradocod,n=t+""+a+o,this.dataSelect.cursocod=[],o&&this.dataCursosAnoNGS[e]&&this.dataCursosAnoNGS[e][n])for(var l in i=this.dataCursosAnoNGS[e][n],i)this.dataSelect.cursocod.push(i[l]);this.vmFiltro.cursocod="";break;case"tab-2":if(this.vmFiltroBloque.seccioncod=o,e=this.vmFiltroBloque.ano,t=this.vmFiltroBloque.instrucod,a=this.vmFiltroBloque.gradocod,n=t+""+a+o,this.dataSelectBloque.cursocod=[],o&&this.dataCursosAnoNGS[e]&&this.dataCursosAnoNGS[e][n])for(var r in i=this.dataCursosAnoNGS[e][n],i)this.dataSelectBloque.cursocod.push(i[r]);this.vmFiltroBloque.cursocod="";break}},seleccionaCurso:function(o){var e=this;return w()(I()().m(function t(){var a,n,i,l;return I()().w(function(t){while(1)switch(t.n){case 0:a=[],n={},i=[],l=e.tab,t.n="tab-1"===l?1:"tab-2"===l?3:6;break;case 1:return e.rows=[],e.vmFiltro.cursocod=o,n={ano:e.vmFiltro.ano,instrucod:e.vmFiltro.instrucod,gradocod:e.vmFiltro.gradocod,seccioncod:e.vmFiltro.seccioncod,cursocod:e.vmFiltro.cursocod},t.n=2,E.$http.get("api/RegistroCarpetaRecuperacionController/getDatosCompetenciasAnualesVUE",{params:{params:n}});case 2:return a=t.v,e.rows=a,t.a(3,6);case 3:return e.vmFiltroBloque.cursocod=o,n={ano:e.vmFiltroBloque.ano,instrucod:e.vmFiltroBloque.instrucod,gradocod:e.vmFiltroBloque.gradocod,seccioncod:e.vmFiltroBloque.seccioncod,cursocod:e.vmFiltroBloque.cursocod},t.n=4,E.$http.get("api/RegistroCarpetaRecuperacionController/getDatosCompetenciasAnualesVUE",{params:{params:n}});case 4:return a=t.v,t.n=5,E.$http.get("api/RegistroCarpetaRecuperacionController/getDatosAlumnosCarpeta",{params:{params:n}});case 5:return i=t.v,e.dataSelectBloque.indice=a,e.rowsBloque=i,t.a(3,6);case 6:return t.a(2)}},t)}))()},guardarCarpeta:function(){switch(this.tab){case"tab-1":this.guardarAlumno();break;case"tab-2":this.guardarAlumnoBloque();break}},guardarAlumnoBloque:function(){if(""==this.vmFiltroBloque.ano)return this.$notify("Seleccionar el año","warning"),!1;if(""==this.vmFiltroBloque.instrucod)return this.$notify("Seleccionar el nivel","warning"),!1;if(""==this.vmFiltroBloque.gradocod)return this.$notify("Seleccionar el grado","warning"),!1;if(""==this.vmFiltroBloque.seccioncod)return this.$notify("Seleccionar la sección","warning"),!1;if(""==this.vmFiltroBloque.cursocod)return this.$notify("Seleccionar el curso","warning"),!1;if(""==this.vmFiltroBloque.indice)return this.$notify("Seleccionar la competencia","warning"),!1;if(""==this.vmFiltroBloque.etapa)return this.$notify("Seleccionar la etapa de Carpeta de Recuperación","warning"),!1;var o=this.$refs.rowsAlumnos.rowsSelected();return o.length<=0?(this.$notify("Seleccionar, al menos, a un alumno","warning"),!1):void 0},guardarAlumno:function(){var o=this;return w()(I()().m(function e(){var t,a,n;return I()().w(function(e){while(1)switch(e.n){case 0:if(""!=o.vmFiltro.ano){e.n=1;break}return o.$notify("Seleccionar el año","warning"),e.a(2,!1);case 1:if(""!=o.vmFiltro.instrucod){e.n=2;break}return o.$notify("Seleccionar el nivel","warning"),e.a(2,!1);case 2:if(""!=o.vmFiltro.gradocod){e.n=3;break}return o.$notify("Seleccionar el grado","warning"),e.a(2,!1);case 3:if(""!=o.vmFiltro.seccioncod){e.n=4;break}return o.$notify("Seleccionar la sección","warning"),e.a(2,!1);case 4:if(""!=o.vmFiltro.alucod){e.n=5;break}return o.$notify("Seleccionar al alumno","warning"),e.a(2,!1);case 5:if(""!=o.vmFiltro.cursocod){e.n=6;break}return o.$notify("Seleccionar el curso","warning"),e.a(2,!1);case 6:if(""!=o.vmFiltro.etapa){e.n=7;break}return o.$notify("Seleccionar la etapa de Carpeta de Recuperación","warning"),e.a(2,!1);case 7:if(t=o.$refs.rowsCompetencias.rowsSelected(),!(t.length<=0)){e.n=8;break}return o.$notify("Seleccionar, al menos, una competencia","warning"),e.a(2,!1);case 8:return a={ano:o.vmFiltro.ano,instrucod:o.vmFiltro.instrucod,gradocod:o.vmFiltro.gradocod,seccioncod:o.vmFiltro.seccioncod,cursocod:o.vmFiltro.cursocod,etapa:o.vmFiltro.etapa},e.n=9,o.$http.post("api/RegistroCarpetaRecuperacionController/crearCursoCarpeta",{params:{registros:t,parametros:a}});case 9:n=e.v,n.message;case 10:return e.a(2)}},e)}))()},init:function(){var o=this;return w()(I()().m(function e(){var t;return I()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,E.$http.get("api/AlumnoController/getListadoGeneralAlumnos");case 1:t=e.v,o.dataSelect.alucod=t,o.dataSelect.ano=JSON.parse(JSON.stringify(o.arrAnio)),o.dataSelectBloque.ano=JSON.parse(JSON.stringify(o.arrAnio)),o.getNiveles(),o.seleccionaInstru(""),o.openModal=!0;case 2:return e.a(2)}},e)}))()},cerrarModal:function(){this.openModal=!1,this.$emit("cerrarModalRegistroCarpeta")}},created:function(){var o=this;return w()(I()().m(function e(){return I()().w(function(e){while(1)switch(e.n){case 0:o.init();case 1:return e.a(2)}},e)}))()}};const Ho=(0,mo.A)(jo,[["render",Po]]);var Ko=Ho,Zo={class:"row"},zo={class:"col-xs-3"},Yo={class:"col-xs-3"},oe={class:"col-xs-3"},ee={class:"col-xs-3"},te={class:"row"},ae={class:"col-6 text-right"},ne={class:"col-6 text-left"},ie={class:"row"},le={class:"col-xs-6"},re={class:"col-xs-6"};function se(o,e){var t=this,n=(0,a.g2)("q-select"),i=(0,a.g2)("q-btn"),l=(0,a.g2)("sie-table"),r=(0,a.g2)("sie-modal");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:o.openModal,"onUpdate:modelValue":e[4]||(e[4]=function(e){return o.openModal=e}),css:{"min-width":"1000px","max-width":"1800px","min-height":"590px"},title:"Reprocesar Carpeta de Recuperación",onClose:o.cerrarModal,onSubmit:e[5]||(e[5]=function(e){return o.reprocesar()})},{default:(0,a.k6)(function(){return[(0,a.Lk)("div",Zo,[(0,a.Lk)("div",zo,[(0,a.bF)(n,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.ano,"onUpdate:modelValue":e[0]||(e[0]=function(e){return o.vmFiltro.ano=e}),options:o.dataSelect.ano,label:"Año",onInput:o.seleccionaAno,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",Yo,[(0,a.bF)(n,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.instrucod,"onUpdate:modelValue":e[1]||(e[1]=function(e){return o.vmFiltro.instrucod=e}),"option-value":"INSTRUCOD","option-label":"INSTRUDES",options:o.dataSelect.instrucod,label:"Nivel",onInput:o.seleccionaInstru,filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",oe,[(0,a.bF)(n,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.gradocod,"onUpdate:modelValue":e[2]||(e[2]=function(e){return o.vmFiltro.gradocod=e}),"option-value":"GRADOCOD","option-label":"GRADODES",options:o.dataSelect.gradocod,onInput:o.seleccionaGrado,label:"Grado",filter:""},null,8,["modelValue","options","onInput"])]),(0,a.Lk)("div",ee,[(0,a.bF)(n,{class:"q-if-outlined",color:"secondary",modelValue:o.vmFiltro.seccioncod,"onUpdate:modelValue":e[3]||(e[3]=function(e){return o.vmFiltro.seccioncod=e}),"option-value":"SECCIONCOD","option-label":"SECCIONCOD",options:o.dataSelect.seccioncod,onInput:o.seleccionaSeccion,label:"Seccion",filter:""},null,8,["modelValue","options","onInput"])])]),(0,a.Lk)("div",te,[(0,a.Lk)("div",ae,[(0,a.bF)(i,{round:"",icon:"keyboard_arrow_right",color:"primary",onClick:o.agregar},null,8,["onClick"])]),(0,a.Lk)("div",ne,[(0,a.bF)(i,{round:"",icon:"keyboard_arrow_left",color:"primary",onClick:o.quitar},null,8,["onClick"])])]),(0,a.Lk)("div",ie,[(0,a.Lk)("div",le,[(0,a.bF)(l,{selection:"multiple",showSearch:!1,context:t,ref:"grillaAlumnos",css:"height:calc(45vh)",columns:o.fields,onRowSelected:o.rowSelected,data:o.rowsAlumnosIsquierda,config:o.config},null,8,["columns","onRowSelected","data","config"])]),(0,a.Lk)("div",re,[(0,a.bF)(l,{selection:"multiple",showSearch:!1,context:t,ref:"grillaAlumnosSel",css:"height:calc(45vh)",columns:o.fieldsAlumnos,onRowSelected:o.rowSelected,data:o.rowsAlumnos,config:o.configAlumnos},null,8,["columns","onRowSelected","data","config"])])])]}),_:1},8,["modelValue","onClose"])}t(30683),t(90095),t(13715);var ce=t(11654),ue={data:function(){return{config:{ACTION:{flat:!0,dense:!0}},rows:[],fields:[{name:"INSTRUCOD",label:"Nivel",field:"INSTRUCOD",align:"center"},{name:"GRADOCOD",label:"Grado",field:"GRADOCOD",align:"center"},{name:"SECCIONCOD",label:"Sección",field:"SECCIONCOD",align:"center"},{name:"NOMCOMP",label:"Alumno",field:"NOMCOMP",align:"left"}],configAlumnos:{ACTION:{flat:!0,dense:!0}},rowsAlumnos:[],fieldsAlumnos:[{name:"INSTRUCOD",label:"Nivel",field:"INSTRUCOD",align:"center"},{name:"GRADOCOD",label:"Grado",field:"GRADOCOD",align:"center"},{name:"SECCIONCOD",label:"Sección",field:"SECCIONCOD",align:"center"},{name:"NOMCOMP",label:"Alumno",field:"NOMCOMP",align:"left"}]}}},de={emits:["cerrarModalReprocesarCarpeta"],props:{ngs:{type:Object,default:function(){return{}}},arrAnio:{type:Array,default:function(){return[]}}},components:{sieModal:U.A,QSelect:L.A,QInput:G.A,QForm:V.A,QBtn:ce.A},data:function(){return{openModal:!1,dataSelect:{ano:[],instrucod:[],gradocod:[],seccioncod:[]},vmFiltro:{ano:"",instrucod:"",gradocod:"",seccioncod:""},dataAlumnos:[],rowsAlumnos:[],rowsAlumnosIsquierda:[],defaultNiveles:{INSTRUDES:"Todos",INSTRUCOD:""},defaultGrados:{GRADODES:"Todos",GRADOCOD:""},defaultSecciones:{SECCIONDES:"Todos",SECCIONCOD:""},keySelectedAlu:[],alucodsDerecha:[]}},mixins:[ue],computed:{isLess:function(){return(0,so.isLess)()},datosAlumnosCarpeta:function(){var o=this,e=this.dataAlumnos;return""!==this.vmFiltro.instrucod&&(e=e.filter(function(e){return e.INSTRUCOD===o.vmFiltro.instrucod})),""!==this.vmFiltro.gradocod&&(e=e.filter(function(e){return e.GRADOCOD===o.vmFiltro.gradocod})),""!==this.vmFiltro.seccioncod&&(e=e.filter(function(e){return e.SECCIONCOD===o.vmFiltro.seccioncod})),e}},methods:{agregar:function(){var o=this,e=this.$refs.grillaAlumnos.rowsSelected();this.rowsAlumnos=[].concat(y()(this.rowsAlumnos),y()(e));var t=y()(this.rowsAlumnosIsquierda);e.forEach(function(e){o.alucodsDerecha.push(e.ALUCOD),t=t.filter(function(o){return o.ALUCOD!==e.ALUCOD})}),this.rowsAlumnosIsquierda=t},quitar:function(){var o=this,e=this.$refs.grillaAlumnosSel.rowsSelected();this.rowsAlumnosIsquierda=[].concat(y()(this.rowsAlumnosIsquierda),y()(e));var t=y()(this.rowsAlumnos);e.forEach(function(e){o.alucodsDerecha=o.alucodsDerecha.filter(function(o){return o!==e.ALUCOD}),t=t.filter(function(o){return o.ALUCOD!==e.ALUCOD})}),this.rowsAlumnos=t},rowSelected:function(o){},getNiveles:function(){for(var o in this.dataSelect.instrucod=[],this.ngs)this.dataSelect.instrucod.push(this.ngs[o]);this.dataSelect.instrucod.unshift(this.defaultNiveles)},seleccionaAno:function(o){var e=this;return w()(I()().m(function t(){var a,n;return I()().w(function(t){while(1)switch(t.n){case 0:return e.vmFiltro.ano=o,e.rows=[],e.seleccionaSeccion(e.vmFiltro.seccioncod),a={ano:e.vmFiltro.ano},t.n=1,E.$http.get("api/RegistroCarpetaRecuperacionController/getAlumnosConCarpeta",{params:{params:a}});case 1:n=t.v,e.dataAlumnos=n,e.rowsAlumnosIsquierda=y()(n);case 2:return t.a(2)}},t)}))()},seleccionaInstru:function(o){var e=this;if(this.dataSelect.gradocod=[],this.vmFiltro.instrucod=o,o){var t=this.ngs[o].GRADOS;for(var a in t)this.dataSelect.gradocod.push(t[a])}if(this.dataSelect.gradocod.unshift(this.defaultGrados),this.vmFiltro.gradocod="",""!==o){var n=this.dataAlumnos.filter(function(o){return o.INSTRUCOD===e.vmFiltro.instrucod});this.rowsAlumnosIsquierda=y()(n.filter(function(o){return!e.alucodsDerecha.includes(o.ALUCOD)}))}else this.rowsAlumnosIsquierda=y()(this.dataAlumnos.filter(function(o){return!e.alucodsDerecha.includes(o.ALUCOD)}));this.seleccionaGrado(this.vmFiltro.gradocod)},seleccionaGrado:function(o){var e=this,t="",a=[];if(this.vmFiltro.gradocod=o,t=this.vmFiltro.instrucod,this.dataSelect.seccioncod=[],o)for(var n in a=this.ngs[t].GRADOS[o].SECCIONES,a)this.dataSelect.seccioncod.push(a[n]);if(this.dataSelect.seccioncod.unshift(this.defaultSecciones),this.vmFiltro.seccioncod="",""!==o){var i=this.dataAlumnos.filter(function(o){return o.GRADOCOD===e.vmFiltro.gradocod&&o.INSTRUCOD===e.vmFiltro.instrucod});this.rowsAlumnosIsquierda=y()(i.filter(function(o){return!e.alucodsDerecha.includes(o.ALUCOD)}))}else{var l=this.dataAlumnos;""!==this.vmFiltro.instrucod&&(l=this.dataAlumnos.filter(function(o){return o.INSTRUCOD===e.vmFiltro.instrucod})),this.rowsAlumnosIsquierda=y()(l.filter(function(o){return!e.alucodsDerecha.includes(o.ALUCOD)}))}this.seleccionaSeccion(this.vmFiltro.seccioncod)},seleccionaSeccion:function(o){var e=this;if(this.vmFiltro.seccioncod=o,""!==o){var t=this.dataAlumnos.filter(function(o){return o.GRADOCOD===e.vmFiltro.gradocod&&o.INSTRUCOD===e.vmFiltro.instrucod&&o.SECCIONCOD===e.vmFiltro.seccioncod});this.rowsAlumnosIsquierda=y()(t.filter(function(o){return!e.alucodsDerecha.includes(o.ALUCOD)}))}else{var a=this.dataAlumnos;""!==this.vmFiltro.instrucod&&(a=this.dataAlumnos.filter(function(o){return o.INSTRUCOD===e.vmFiltro.instrucod})),""!==this.vmFiltro.gradocod&&(a=this.dataAlumnos.filter(function(o){return o.INSTRUCOD===e.vmFiltro.instrucod&&o.GRADOCOD===e.vmFiltro.gradocod})),this.rowsAlumnosIsquierda=y()(a.filter(function(o){return!e.alucodsDerecha.includes(o.ALUCOD)}))}},init:function(){var o=this;return w()(I()().m(function e(){return I()().w(function(e){while(1)switch(e.n){case 0:o.dataSelect.ano=JSON.parse(JSON.stringify(o.arrAnio)),o.getNiveles(),o.seleccionaInstru(""),o.openModal=!0;case 1:return e.a(2)}},e)}))()},cerrarModal:function(){this.openModal=!1,this.$emit("cerrarModalReprocesarCarpeta")},reprocesar:function(){if(this.rowsAlumnos.length<=0)return this.$notify("Seleccionar, al menos, un alumno para el reproceso","warning"),!1}},created:function(){var o=this;return w()(I()().m(function e(){return I()().w(function(e){while(1)switch(e.n){case 0:o.init();case 1:return e.a(2)}},e)}))()}};const me=(0,mo.A)(de,[["render",se]]);var fe=me,pe={components:{QSelect:L.A,QInput:G.A,QForm:V.A,sieModal:U.A,selectMultiple:T.A,QRadio:x.A,imprimir:po,registroCarpeta:Ko,reprocesarCarpeta:fe,QPage:q.Tu,QCard:q.C$},data:function(){return{buttons:[{label:"Agregar",permiso:"> 1",icon:"plus",click:this.agregarRegistroCarpeta},{label:"Eliminar",icon:"delete",click:this.eliminarRegistroCarpeta},{label:"Imprimir",icon:"print",click:this.openModalReporte},{label:"Reprocesar",icon:"cogs",click:this.agregarReprocesarCarpeta}],vmFiltro:{filtroLista:"P",ano:"",instrucod:"",gradocod:[],turnocod:[],cursocod:[],estado:[],origen:[],alucod:[],indice:[]},dataSelect:{ano:[],instrucod:[],gradocod:[],turnocod:[],cursocod:[],estado:[],origen:[],alucod:[],indice:[]},vmModal:{reporte:!1,registroCarpeta:!1,reprocesarCarpeta:!1},ngs:[],dataCarpeta:[],sie:(0,k["default"])(),defaultNiveles:{INSTRUDES:"Todos",INSTRUCOD:""},defaultGrados:{GRADODES:"Todos",GRADOCOD:""},defaultTodos:{label:"Todos",value:""},dataCursosAnoNGS:[],dataConfigInit:[],dataPgEtapa:[],dataRowCabecera:[]}},mixins:[M],computed:{isLess:function(){return(0,so.isLess)()},getDatos:function(){var o=this;this.rowsDetalle=[];var e=this.dataCarpeta;return""!==this.vmFiltro.ano&&(e=e.filter(function(e){return e.ANO===o.vmFiltro.ano})),""!==this.vmFiltro.instrucod&&(e=e.filter(function(e){return e.INSTRUCOD===o.vmFiltro.instrucod})),""!==this.vmFiltro.gradocod&&(e=e.filter(function(e){return e.GRADOCOD===o.vmFiltro.gradocod})),this.vmFiltro.turnocod.length>0&&(e=e.filter(function(e){return o.vmFiltro.turnocod.includes(e.TURNOCOD)})),this.vmFiltro.cursocod.length>0&&(e=e.filter(function(e){return o.vmFiltro.cursocod.includes(e.CURSOCOD)})),this.vmFiltro.alucod.length>0&&(e=e.filter(function(e){return o.vmFiltro.alucod.includes(e.ALUCOD)})),this.vmFiltro.estado.length>0&&(e=e.filter(function(e){return o.vmFiltro.estado.includes(e.ESTADOFILTRO)})),this.vmFiltro.origen.length>0&&(e=e.filter(function(e){return o.vmFiltro.origen.includes(e.ORIGEN)})),e}},methods:{seleccionaInstru:function(o){if(this.dataSelect.gradocod=[],o){var e=this.ngs[o].GRADOS;for(var t in e)this.dataSelect.gradocod.push(e[t])}this.dataSelect.gradocod.unshift(this.defaultGrados),this.vmFiltro.gradocod=this.dataSelect.gradocod[0].GRADOCOD},seleccionaGrado:function(o){this.vmFiltro.gradocod=o},seleccionaCurso:function(o){this.vmFiltro.cursocod=o},seleccionaTurno:function(o){this.vmFiltro.turnocod=o},seleccionaAlumno:function(o){this.vmFiltro.alucod=o},seleccionaEstado:function(o){this.vmFiltro.estado=o},seleccionaOrigen:function(o){this.vmFiltro.origen=o},generarCursosAnoNGS:function(o){var e={};o.map(function(o){var t=o.INSTRUCOD+""+o.GRADOCOD+o.SECCIONCOD;e[o.ANO]||(e[o.ANO]={}),e[o.ANO][t]||(e[o.ANO][t]={}),e[o.ANO][t][o.CURSOCOD]||(e[o.ANO][t][o.CURSOCOD]={CURSOCOD:o.CURSOCOD,CURSONOM:o.CURSOCOD+" - "+o.CURSONOM})}),this.dataCursosAnoNGS=e},generarPgEtapaAno:function(o){var e={};o.map(function(o){e[o.ANO]||(e[o.ANO]={}),e[o.ANO][o.ETAPA]||(e[o.ANO][o.ETAPA]={ID_ETAPA:o.ID_ETAPA,DESCRIPCION:o.DESCRIPCION2})}),this.dataPgEtapa=e},generarNgs:function(o){var e={};o.map(function(o){e[o.INSTRUCOD]||(e[o.INSTRUCOD]={INSTRUCOD:o.INSTRUCOD,INSTRUDES:o.INSTRUDES,GRADOS:{}}),e[o.INSTRUCOD]["GRADOS"][o.GRADOCOD]||(e[o.INSTRUCOD]["GRADOS"][o.GRADOCOD]={GRADOCOD:o.GRADOCOD,GRADODES:o.GRADODES,SECCIONES:{}}),e[o.INSTRUCOD]["GRADOS"][o.GRADOCOD]["SECCIONES"][o.SECCIONCOD]||(e[o.INSTRUCOD]["GRADOS"][o.GRADOCOD]["SECCIONES"][o.SECCIONCOD]={SECCIONCOD:o.SECCIONCOD,SECCIONDES:o.SECCIONDES,NEMO:o.NEMO})}),this.ngs=e,this.getNiveles()},getNiveles:function(){for(var o in this.dataSelect.instrucod=[],this.ngs)this.dataSelect.instrucod.push(this.ngs[o]);this.dataSelect.instrucod.unshift(this.defaultNiveles)},getDataExamenesCarp:function(o){var e=this;return w()(I()().m(function t(){var a;return I()().w(function(t){while(1)switch(t.n){case 0:return e.rowsDetalle=[],t.n=1,E.$http.get("api/PgAlumnoAnualController/getDatosExamenesCarp",{params:{params:o}});case 1:a=t.v,e.rowsDetalle=a,e.dataRowCabecera=o;case 2:return t.a(2)}},t)}))()},agregarRegistroCarpeta:function(){this.vmModal.registroCarpeta=!0},cerrarModalRegistroCarpeta:function(){this.vmModal.registroCarpeta=!1},agregarReprocesarCarpeta:function(){this.vmModal.reprocesarCarpeta=!0},cerrarModalReprocesarCarpeta:function(){this.vmModal.reprocesarCarpeta=!1},eliminarRegistroCarpeta:function(){if(this.dataRowCabecera.length<0)return this.$notify("Seleccionar un registro","warning"),!1;if("R"===this.dataRowCabecera.ORIGEN)this.procesoEliminarRegCarpeta();else{var o=this.dataRowCabecera.INSTRUCOD+""+this.dataRowCabecera.GRADOCOD;if("S5"!=o)return this.$notify("No es posible eliminar, el registro proviene del Cierre de Año Escolar","warning"),!1;this.procesoEliminarRegCarpeta()}},cargarDatosCarpeta:function(){return w()(I()().m(function o(){return I()().w(function(o){while(1)switch(o.n){case 0:return o.a(2)}},o)}))()},procesoEliminarRegCarpeta:function(){var o=this;return w()(I()().m(function e(){return I()().w(function(e){while(1)switch(e.n){case 0:o.$confirm("¿Desea eliminar este registro?, el proceso es irreversible","delete").onOk(w()(I()().m(function e(){var t,a,n;return I()().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,t=o.dataRowCabecera,e.n=1,o.$http.post("api/RegistroCarpetaRecuperacionController/eliminarRegistroCarpeta",{params:{params:t}});case 1:return a=e.v,n=a.message,o.$notify(n,"success"),e.n=2,o.getDataCarpeta();case 2:e.n=4;break;case 3:e.p=3,e.v,o.$notify("Ocurrió un problema de conexión.","warning");case 4:return e.a(2)}},e,null,[[0,3]])})));case 1:return e.a(2)}},e)}))()},openModalReporte:function(){this.vmModal.reporte=!0},cerrarModalReporte:function(){this.vmModal.reporte=!1}},created:function(){var o=this;return w()(I()().m(function e(){var t,a,n;return I()().w(function(e){while(1)switch(e.n){case 0:return e.n=1,E.$http.get("api/PgAlumnoAnualController/getConfiguracion");case 1:return t=e.v,e.n=2,E.$http.get("api/ProcesosController/getConfiguracion");case 2:return a=e.v,e.n=3,E.$http.get("api/PgEtapaController/getDatos");case 3:n=e.v,o.generarNgs(a.infoSalones),o.generarPgEtapaAno(n),o.dataConfigInit=t,o.dataSelect.ano=JSON.parse(JSON.stringify(t.dataAnios)),o.dataSelect.ano.unshift(o.defaultTodos),o.dataSelect.turnocod=t.turnos,o.dataSelect.alucod=t.alumnos,o.dataSelect.estado=t.estado,o.dataSelect.origen=t.origen,o.dataSelect.cursocod=t.cursos,o.dataCarpeta=t.dataCarpeta,o.vmFiltro.instrucod="P",o.seleccionaInstru("P"),o.generarCursosAnoNGS(t.dataCursosAnoNGS);case 4:return e.a(2)}},e)}))()}};const ve=(0,mo.A)(pe,[["render",D]]);var he=ve}}]);