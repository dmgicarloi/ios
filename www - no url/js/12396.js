"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[12396],{12396:function(e,a,o){o.r(a),o.d(a,{default:function(){return Ee}});var t=o(61758),n=o(58790),r={class:"row items-center no-wrap"},i={class:"col"},l={class:"text-h6"},s={class:"col-auto"},c={class:"row q-ma-xs q-col-gutter-sm"},u={class:"col-xs-12 col-sm-2"},d={class:"col-xs-12 col-sm-6"},m={class:"col-xs-12 col-sm-4"},p={class:"row q-ma-xs q-col-gutter-sm"},A={class:"col-xs-12"},g={class:"row q-ma-xs q-col-gutter-sm"},f={class:"col-xs-6"},h={class:"col-xs-6"},C={class:"col-xs-12"},b={class:"col-xs-4"},v={class:"col-xs-4"},I={class:"col-xs-4"},E={class:"row q-ma-xs q-col-gutter-sm"},w={class:"col-xs-12"},R={class:"text-h6"},N={class:"col-xs-12 col-lg-12"},O={class:"row q-ma-xs q-col-gutter-sm"},S={class:"col-xs-12"},_={class:"col-xs-6"},M={class:"col-xs-6"},D={class:"col-xs-12"};function k(e,a){var o=(0,t.g2)("crearBotones"),k=(0,t.g2)("q-card-section"),L=(0,t.g2)("q-separator"),F=(0,t.g2)("q-select"),V=(0,t.g2)("sie-grid"),G=(0,t.g2)("footer-grid"),T=(0,t.g2)("q-option-group"),U=(0,t.g2)("sie-modal"),x=(0,t.g2)("q-checkbox"),P=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(P,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(k,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",r,[(0,t.Lk)("div",i,[(0,t.Lk)("div",l,(0,n.v_)(e.title),1)]),(0,t.Lk)("div",s,[(0,t.bF)(o,{buttons:e.botones,nivelAcceso:e.nivelAcceso,option:e.nameOption},null,8,["buttons","nivelAcceso","option"])])])]}),_:1}),(0,t.bF)(L),(0,t.bF)(k,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",c,[(0,t.Lk)("div",u,[(0,t.bF)(F,{modelValue:e.selectAnio,"onUpdate:modelValue":a[0]||(a[0]=function(a){return e.selectAnio=a}),"option-value":"value","option-label":"label",options:e.anio,label:"Año",onInput:e.getCategoriasALumno},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",d,[(0,t.bF)(F,{modelValue:e.selectAlumno,"onUpdate:modelValue":a[1]||(a[1]=function(a){return e.selectAlumno=a}),"option-value":"value","option-label":"label",options:e.persona,label:"Alumno",onInput:e.getCategoriasALumno},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",m,[(0,t.bF)(F,{modelValue:e.selectCategoria,"onUpdate:modelValue":a[2]||(a[2]=function(a){return e.selectCategoria=a}),"option-value":"value","option-label":"label",options:e.catAnioFilter,onInput:e.getCategoriasALumno,label:"Categoría de Cobro"},null,8,["modelValue","options","onInput"])])])]}),_:1}),(0,t.bF)(k,null,{default:(0,t.k6)(function(){return[(0,t.bF)(V,{class:"fix-table-global ag-theme-balham",columnDefs:e.columnDefs,frameworkComponents:e.frameworkComponents,rowData:e.rowData,onRowSelected:e.rowSelected,onGridReady:e.onGridReady,rowSelection:"multiple",onCellValueChanged:e.cellValueChanged,style:{height:"calc(100vh - 300px)",width:"100%"}},null,8,["columnDefs","frameworkComponents","rowData","onRowSelected","onGridReady","onCellValueChanged"]),(0,t.bF)(G,{modelValue:e.pagina,"onUpdate:modelValue":a[3]||(a[3]=function(a){return e.pagina=a}),max:e.max,onLoad:e.getCategoriasALumno,rows:e.rowData},null,8,["modelValue","max","onLoad","rows"])]}),_:1}),(0,t.bF)(U,{modelValue:e.openModalFormatos,"onUpdate:modelValue":a[12]||(a[12]=function(a){return e.openModalFormatos=a}),showButtonCancel:!1,labelButtonOk:"Imprimir",iconButtonOk:"print",onSubmit:e.imprimirReporte},{default:(0,t.k6)(function(){return[a[18]||(a[18]=(0,t.Lk)("form",{id:"form"},null,-1)),a[19]||(a[19]=(0,t.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,t.Lk)("div",{class:"text-h6"},"Reportes Categorias")],-1)),(0,t.Lk)("div",p,[(0,t.Lk)("div",A,[(0,t.bF)(T,{color:"primary",type:"radio",modelValue:e.selectReporte,"onUpdate:modelValue":a[4]||(a[4]=function(a){return e.selectReporte=a}),options:e.reportes,onInput:e.changeReporte},null,8,["modelValue","options","onInput"])])]),a[20]||(a[20]=(0,t.Lk)("div",{class:"row q-ma-xs q-col-gutter-sm"},[(0,t.Lk)("div",{class:"text-h6"},"Parámetros")],-1)),(0,t.Lk)("div",g,[(0,t.Lk)("div",f,[(0,t.bF)(F,{label:"Años",placeholder:"Seleccione un Año","option-value":"value","option-label":"label",options:e.anio,modelValue:e.selectAnio,"onUpdate:modelValue":a[5]||(a[5]=function(a){return e.selectAnio=a})},null,8,["options","modelValue"])]),(0,t.Lk)("div",h,[(0,t.bF)(F,{label:"Meses",placeholder:"Seleccione un Mes","option-value":"value","option-label":"label",options:e.meses,modelValue:e.seleccionarMes,"onUpdate:modelValue":a[6]||(a[6]=function(a){return e.seleccionarMes=a}),disable:e.visibileInputs.meses},null,8,["options","modelValue","disable"])]),(0,t.Lk)("div",C,[(0,t.bF)(F,{label:"Categoria",placeholder:"Seleccione una Categoria","option-value":"value","option-label":"label",options:e.catAnioFilter,modelValue:e.seleccionarCategoria,"onUpdate:modelValue":a[7]||(a[7]=function(a){return e.seleccionarCategoria=a}),disable:e.visibileInputs.categoria},null,8,["options","modelValue","disable"])]),(0,t.Lk)("div",b,[(0,t.bF)(F,{label:"Niveles",placeholder:"Seleccione un Nivel","option-value":"value","option-label":"label",options:e.niveles,modelValue:e.seleccionarNivel,"onUpdate:modelValue":a[8]||(a[8]=function(a){return e.seleccionarNivel=a}),disable:e.visibileInputs.nivel},null,8,["options","modelValue","disable"])]),(0,t.Lk)("div",v,[(0,t.bF)(F,{label:"Grados",placeholder:"Seleccione un Grado","option-value":"value","option-label":"label",options:e.grados,modelValue:e.seleccionarGrado,"onUpdate:modelValue":a[9]||(a[9]=function(a){return e.seleccionarGrado=a}),disable:e.visibileInputs.grado},null,8,["options","modelValue","disable"])]),(0,t.Lk)("div",I,[(0,t.bF)(F,{label:"Sección",placeholder:"Seleccione un sección","option-value":"value","option-label":"label",options:e.secciones,modelValue:e.seleccionarSeccion,"onUpdate:modelValue":a[10]||(a[10]=function(a){return e.seleccionarSeccion=a}),disable:e.visibileInputs.seccion},null,8,["options","modelValue","disable"])])]),(0,t.Lk)("div",E,[(0,t.Lk)("div",w,[(0,t.bF)(T,{color:"primary",inline:!0,type:"radio",modelValue:e.selectFormatoReporte,"onUpdate:modelValue":a[11]||(a[11]=function(a){return e.selectFormatoReporte=a}),options:e.reporteFormatos},null,8,["modelValue","options"])])])]}),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(U,{modelValue:e.openModalCategorias,"onUpdate:modelValue":a[17]||(a[17]=function(a){return e.openModalCategorias=a}),onSubmit:e.updateCategoriaAlumno,labelButtonOk:"Cambiar",iconButtonOk:"save"},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",R,"Cambiar Categoría: "+(0,n.v_)(e.selectRow.NOMCOMP),1),(0,t.bF)(k,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",N,[(0,t.Lk)("div",O,[(0,t.Lk)("div",S,[(0,t.bF)(F,{modelValue:e.formCambiar.ID_CATEGORIA_NUEVA,"onUpdate:modelValue":a[13]||(a[13]=function(a){return e.formCambiar.ID_CATEGORIA_NUEVA=a}),"option-label":"CATEGORIA","option-value":"ID_CATEGORIA_ANO",label:"Nueva Categoria de Cobro",options:e.catPersona},null,8,["modelValue","options"])]),(0,t.Lk)("div",_,[(0,t.bF)(F,{modelValue:e.formCambiar.MES_INI,"onUpdate:modelValue":a[14]||(a[14]=function(a){return e.formCambiar.MES_INI=a}),"option-label":"label","option-value":"value",label:"Mes inicio",options:e.mes},null,8,["modelValue","options"])]),(0,t.Lk)("div",M,[(0,t.bF)(F,{modelValue:e.formCambiar.MES_FIN,"onUpdate:modelValue":a[15]||(a[15]=function(a){return e.formCambiar.MES_FIN=a}),"option-label":"label","option-value":"value",label:"Mes fin",options:e.mes},null,8,["modelValue","options"])]),(0,t.Lk)("div",D,[(0,t.bF)(x,{modelValue:e.formCambiar.GENERAR_DEU,"onUpdate:modelValue":a[16]||(a[16]=function(a){return e.formCambiar.GENERAR_DEU=a}),label:"Generar nuevas deudas"},null,8,["modelValue"])])])])]}),_:1})]}),_:1},8,["modelValue","onSubmit"])]}),_:1})}var L=o(41562),F=o.n(L),V=o(57008),G=o.n(V),T=o(76080),U=o.n(T),x=o(45254),P=o.n(x),y=(o(30683),o(74260),o(39866),o(52133),o(10239),o(50310),o(32203),o(6724),o(70199),o(11777),o(515),o(83190),o(62692),o(7346),o(36408)),$=o(96330),q=o(27560),Q=o(80660),B=o(42037),z=o(19852),J=o(7729),X=o(75053),H=o(26697),K=o(53093),W=o(2739),j=o(43346),Y=o(53811),Z=o(88567),ee=o(95718),ae=o(53380),oe=o(99515),te=o(3112),ne=o(93616),re=o(80340),ie=o(6123),le=o(78840),se=o(8445),ce=o.n(se),ue=o(33001),de=o(16648),me={components:{QSelect:de.A},data:function(){return{options:[],value:null}},beforeMount:function(){var e=this;return P()(U()().m(function a(){var o;return U()().w(function(a){while(1)switch(a.n){case 0:if(o=[],"string"!==typeof e.params.api){a.n=2;break}return a.n=1,Q.$http.get(e.params.api,{params:{response:"combo"}});case 1:o=a.v,a.n=3;break;case 2:o=e.params.options||[];case 3:e.options=ce()(o),e.value=e.params.value||e.params.defaultvalue;case 4:return a.a(2)}},a)}))()},render:function(){var e=this;return(0,t.h)(de.A,{modelValue:e.value,options:e.options,"hide-selected":!0,"fill-input":!0,"use-input":!0,disable:e.params.disable,onInput:function(a){e.value=a,e.params.setValue(a)},onFilter:function(a,o){o(function(){var o=ce()(e.params.options);e.options=(0,ue.filterArray)(a,{field:e.params.dLabel||"label",list:o})})}})}},pe=o(54267),Ae=o(54489),ge=o(57668),fe=o(64208),he=o(41615),Ce=o(64303),be={components:{actionButton:le.A,sieGrid:y.A,sieVacio:re.A,headerGrid:$.A,footerGrid:q.A,sieSelect:ne.A,QRadio:oe.A,QForm:W.A,QCheckbox:te.A,createGrid:J.A,formulario:z.A,QCard:Z.A,QCardSection:ee.A,QSeparator:ae.A,QTabs:H.A,QTab:K.A,QTabPanels:Y.A,QTabPanel:j.A,QPagination:ie.ao,sieModal:X.A,QSearch:ie.Ks,QSelect:Ae.S,QInput:fe.A,QOptionGroup:ie.EX,crearBotones:Ce.A},data:function(){return{nameOption:"CategoriaPersonas",nivelAcceso:(0,ge["default"])().ruta.nivel,title:"Asignación de Categorías de Cobro",max:1,pagina:1,api:{},columnDefs:[],frameworkComponents:{},currentRow:[],rowData:[],arrayMeses:[],mes:(0,pe.generarMeses)(),persona:[],anio:[],categoriasAlumno:[],selectAnio:String((0,ge["default"])().ano),selectCategoria:"",selectAlumno:"",repetir:!1,alum:[],perfi:[],catAnio:[],catPersona:[],catAnioFilter:[],columnDefsModal:[],frameworkComponentsModal:[],rowDataModal:[],apiModal:null,paramtrosAlumno:{},ano:"",seccion:"",grado:"",nivel:"",moneda:"",monto:0,descuento:0,ID_CATEGORIA_ANO:0,indexs:[],parametrosAlumnos:{},storeCategoriaAnio:[],infoCaregoria:{INSTRUDES:"",GRADODES:"",SECCIONDES:"",MONTO:0,DESCUENTO:0,MONEDA:"",ANIO:""},form:{ID_CATEGORIA_ALUMNO:this.$route.params.id||0,ID_CATEGORIA_ANO:0,ALUCOD:"",MESINI:"03",MESFIN:"12",FECHA_CREACION:"",ID_PERFIL:he["default"].PERFIL_ALUMNO,ID_PERSONA:""},openModal:!1,openModalCategorias:!1,alumnoSearchModal:"",openModalFormatos:!1,reportes:[{value:1,label:"Relación de Categoria"},{value:2,label:"Relación de Categoria por Año"},{value:3,label:"Relación de Alumnos con Categoria por Nivel y Grado"},{value:4,label:"Relación de Alumnos con Categoria por Mes"}],selectReporte:1,reporteFormatos:[{value:"pdf",label:"PDF"},{value:"xlsx",label:"Excel"}],selectFormatoReporte:"pdf",anios:[],niveles:[],grados:[],meses:[],secciones:[],seleccionarAnio:"",seleccionarMes:"01",seleccionarCategoria:"",seleccionarNivel:he["default"].TODOS,seleccionarGrado:he["default"].TODOS,seleccionarSeccion:he["default"].TODOS,visibileInputs:{anio:!0,meses:!0,categoria:!0,nivel:!0,grado:!0,seccion:!0},formCambiar:{ID_CATEGORIA_NUEVA:0,MES_INI:0,MES_FIN:0,GENERAR_DEU:!1},selectRow:{},bkRowData:[]}},methods:{abrirModelReportes:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,e.getMeses();case 1:return a.n=2,e.getNiveles();case 2:return a.n=3,e.getGrados();case 3:return a.n=4,e.getSecciones();case 4:e.openModalFormatos=!0;case 5:return a.a(2)}},a)}))()},changeReporte:function(){1===this.selectReporte&&(this.visibileInputs={anio:!0,meses:!0,categoria:!0,nivel:!0,grado:!0,seccion:!0}),2===this.selectReporte&&(this.visibileInputs={anio:!1,meses:!0,categoria:!1,nivel:!0,grado:!0,seccion:!0}),3===this.selectReporte&&(this.visibileInputs={anio:!1,meses:!0,categoria:!1,nivel:!1,grado:!1,seccion:!1}),4===this.selectReporte&&(this.visibileInputs={anio:!1,meses:!1,categoria:!1,nivel:!0,grado:!0,seccion:!0})},imprimirReporte:function(){var e=document.getElementById("form"),a={FORMAT:this.selectFormatoReporte,TIPREPORT:"categorias",REPORT:this.selectReporte,ANO:this.selectAnio};this.visibileInputs.meses||(a.MES=this.seleccionarMes),this.visibileInputs.categoria||(a.ID_CATEGORIA_ANO=this.seleccionarCategoria),this.visibileInputs.nivel||(a.INSTRUCOD=this.seleccionarNivel),this.visibileInputs.grado||(a.GRADOCOD=this.seleccionarGrado),this.visibileInputs.seccion||(a.SECCIONCOD=this.seleccionarSeccion),he["default"].FORMULARIO_REPORTES(e,a)},getMeses:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,he["default"].MESES();case 1:e.meses=a.v;case 2:return a.a(2)}},a)}))()},getNiveles:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,he["default"].API_NIVELES();case 1:e.niveles=a.v;case 2:return a.a(2)}},a)}))()},getGrados:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,he["default"].API_GRADOS(e.seleccionarNivel);case 1:e.grados=a.v;case 2:return a.a(2)}},a)}))()},getSecciones:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,he["default"].API_SECCIONES(e.seleccionarGrado,e.seleccionarNivel);case 1:e.secciones=a.v;case 2:return a.a(2)}},a)}))()},crearBotones:function(){this.botones=[{label:"Reportes",icon:"print",click:this.abrirModelReportes,minAcceso:he["default"].LECTURA_ESCRITURA},{label:"Eliminar",icon:"delete",click:this.eliminarCategoriasAlumnos,minAcceso:he["default"].ACCESO_TOTAL},{label:"Actualizar",icon:"update",click:this.updateCategoriaAlumnos,minAcceso:he["default"].LECTURA_ESCRITURA},{label:"Agregar",icon:"add",click:this.nuevaCategoriaALumno,minAcceso:he["default"].LECTURA_ESCRITURA}]},rowSelected:function(e){this.currentRow=e.data},onGridReady:function(e){this.api=e.api},getMonth:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,he["default"].MESES();case 1:e.arrayMeses=a.v;case 2:return a.a(2)}},a)}))()},nuevaCategoriaALumno:function(){this.$router.push({name:"tesoreria.categoriasPersonas.form"})},cellValueChanged:function(e){var a=e.data,o=this.bkRowData.find(function(e){return Number(e.ID_CATEGORIA_ALUMNO)===Number(a.ID_CATEGORIA_ALUMNO)});a.change=JSON.stringify(G()(G()({},o),{},{change:!1}))!==JSON.stringify(G()(G()({},a),{},{change:!1})),e.api.refreshCells({rowNodes:[e.node],force:!0})},updateCategoriaAlumnos:function(){var e=this;return P()(U()().m(function a(){var o;return U()().w(function(a){while(1)switch(a.n){case 0:if(o=e.api.getSelectedRows(),0!==o.length){a.n=1;break}return a.a(2,e.$alert("No se encontro datos para actualizar","warning"));case 1:e.$confirm("¿Esta seguro de actualizar las (".concat(o.length,") categorias modificadas ?"),"info").onOk(P()(U()().m(function a(){var t,n,r,i,l,s,c;return U()().w(function(a){while(1)switch(a.p=a.n){case 0:t={correctamente:[],errores:[]},n=F()(o),a.p=1,n.s();case 2:if((r=n.n()).done){a.n=7;break}return i=r.value,a.p=3,a.n=4,Q.$http.post("api/CategoriaCobroController/updateCategoriaAlumno",{params:{ID_CATEGORIA_ALUMNO:i.ID_CATEGORIA_ALUMNO,MESINI:i.MESINI,MESFIN:i.MESFIN}});case 4:l=a.v,t.correctamente.push(l),a.n=6;break;case 5:a.p=5,s=a.v,t.errores.push(s.error.message);case 6:a.n=2;break;case 7:a.n=9;break;case 8:a.p=8,c=a.v,n.e(c);case 9:return a.p=9,n.f(),a.f(9);case 10:if(e.api.refreshCells({force:!0}),!(0===t.errores.length&&t.correctamente.length>0)){a.n=11;break}return e.$alert("(".concat(t.correctamente.length,") Categorias Actualizadas Satisfactoriamente"),"success"),a.a(2,e.getCategoriasALumno());case 11:if(!(t.errores.length>0&&t.correctamente.length>0)){a.n=12;break}return e.$alert("(".concat(t.correctamente.length,") Categorias Actualizadas pero (").concat(t.errores.length," Categorias con problemas)"),"success"),a.a(2,e.getCategoriasALumno());case 12:if(!(t.errores.length>0)){a.n=13;break}return a.a(2,1===o.length?e.$alert(t.errores[0],"warning"):e.$alert("(".concat(t.errores.length,") Categorias con problemas para actualizar"),"warning"));case 13:return a.a(2)}},a,null,[[3,5],[1,8,9,10]])})));case 2:return a.a(2)}},a)}))()},eliminarCategoriasAlumnos:function(){var e=this;return P()(U()().m(function a(){var o;return U()().w(function(a){while(1)switch(a.n){case 0:o=e.api.getSelectedRows(),o.length>0?e.$confirm("¿Esta seguro de eliminar las (".concat(o.length,") categorías seleccionadas ?"),"delete").onOk(P()(U()().m(function a(){var t,n,r,i,l,s,c;return U()().w(function(a){while(1)switch(a.p=a.n){case 0:t={procesados:[],errores:[]},n=F()(o),a.p=1,n.s();case 2:if((r=n.n()).done){a.n=7;break}return i=r.value,a.p=3,a.n=4,Q.$http.delete("api/CategoriaCobroController/deleteCategoriaAlumno",{params:{id_categoria:i.ID_CATEGORIA_ALUMNO}});case 4:l=a.v,t.procesados.push(l),a.n=6;break;case 5:a.p=5,s=a.v,t.errores.push(s.error.message);case 6:a.n=2;break;case 7:a.n=9;break;case 8:a.p=8,c=a.v,n.e(c);case 9:return a.p=9,n.f(),a.f(9);case 10:t.procesados.length>0&&0===t.errores.length?(e.$alert("(".concat(t.procesados.length,") Categorias Eliminadas Satisfactoriamente"),"success"),e.getCategoriasALumno()):t.procesados.length>0&&t.errores.length>0?(e.$alert("(".concat(t.procesados.length,") Categorias Eliminadas y (").concat(t.errores.length,") Categorias con problemas"),"success"),e.getCategoriasALumno()):1===o.length?e.$alert(t.errores[0],"warning"):e.$alert("(".concat(t.errores.length,") Categorias con problemas"),"warning");case 11:return a.a(2)}},a,null,[[3,5],[1,8,9,10]])}))):e.$alert("No seleccionó ninguna categoría para eliminar","warning");case 1:return a.a(2)}},a)}))()},getAlumnosBuscar:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,he["default"].API_PERSONAS();case 1:e.persona=a.v,e.persona.unshift({label:"Todos",value:""});case 2:return a.a(2)}},a)}))()},getAnios:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,he["default"].API_ANIOS();case 1:e.anio=a.v;case 2:return a.a(2)}},a)}))()},getCategoriaAlumno:function(){var e=this;return P()(U()().m(function a(){var o;return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Q.$http.get("api/CategoriaCobroController/getCategoriaAlumno",{params:{parametros:{}}});case 1:return o=a.v,o.map(function(){var a=P()(U()().m(function a(o){return U()().w(function(a){while(1)switch(a.n){case 0:o.MESINI=e.arrayMeses[Number(o.MESINI)-1]["VALOR"],o.MESFIN=e.arrayMeses[Number(o.MESFIN)-1]["VALOR"];case 1:return a.a(2)}},a)}));return function(e){return a.apply(this,arguments)}}()),e.dataaaaa=o,a.a(2,o)}},a)}))()},getCategoriasALumno:function(){var e=this;return P()(U()().m(function a(){var o,t;return U()().w(function(a){while(1)switch(a.n){case 0:return o={ANO:e.selectAnio,ID_PERSONA:e.selectAlumno,ID_CATEGORIA_ANO:e.selectCategoria},a.n=1,Q.$http.get("api/CategoriaCobroController/getCategoriaAlumno",{params:{parametros:o}});case 1:t=a.v,e.rowData=t.map(function(e){return G()(G()({},e),{},{change:!1})}),e.bkRowData=JSON.parse(JSON.stringify(e.rowData));case 2:return a.a(2)}},a)}))()},validarCambio:function(e){return{backgroundColor:e.data.change?"#FFCC80":"#fff",color:"#000"}},create:function(){var e=this;return P()(U()().m(function a(){var o;return U()().w(function(a){while(1)switch(a.n){case 0:o=e,e.frameworkComponents={actionButton:le.A,select:me},e.columnDefs=[{headerName:"Código",field:"ALUCOD",width:85,cellStyle:e.validarCambio},{headerName:"Apellidos y Nombres",field:"NOMCOMP",width:320,cellStyle:e.validarCambio},{headerName:"NGS",field:"NGS",width:50,cellStyle:e.validarCambio},{headerName:"Categoría",field:"DESCRIPCION",width:150,cellStyle:e.validarCambio},{headerName:"Año",field:"ANO",width:65,hide:!0,cellStyle:e.validarCambio},{headerName:"Mes Inicio",field:"MESINI",cellRenderer:me,cellRendererParams:{options:e.mes},width:140,cellStyle:e.validarCambio},{headerName:"Mes Fin",field:"MESFIN",cellRenderer:me,cellRendererParams:{options:e.mes},width:140,cellStyle:e.validarCambio},{headerName:"",field:"MONSIG",width:50,cellClass:"text-right",cellStyle:e.validarCambio},{headerName:"Monto",field:"MONTO",width:100,valueFormatter:B.toFixed,cellClass:"text-right",cellStyle:e.validarCambio},{cellRenderer:le.A,cellRendererParams:{icon:"file_restore",onClick:function(e){var a=[e.data],t=a[0];o.abrirModalCategorias(t)}},width:40,cellStyle:e.validarCambio},{headerName:"Desc.",field:"DESCUENTO",width:80,valueFormatter:B.toFixed,cellClass:"text-right",hide:!0,cellStyle:e.validarCambio}],e.getCategoriasALumno();case 1:return a.a(2)}},a)}))()},abrirModalCategorias:function(e){var a=this;return P()(U()().m(function o(){var t;return U()().w(function(o){while(1)switch(o.n){case 0:a.openModalCategorias=!0,a.formCambiar={ID_CATEGORIA_NUEVA:a.formCambiar.ID_CATEGORIA_NUEVA,MES_INI:e.MESINI,MES_FIN:e.MESFIN,GENERAR_DEU:!0},t={alucod:e.ALUCOD,anocob:e.ANO},a.getCatPersona(t),a.selectRow=e;case 1:return o.a(2)}},o)}))()},cerrarModalCategoria:function(){this.clear(),this.openModalCategorias=!1},updateCategoriaAlumno:function(){var e=this,a={ID_CATEGORIA_ALUMNO:this.selectRow.ID_CATEGORIA_ALUMNO,ID_CATEGORIA_NUEVA:this.formCambiar.ID_CATEGORIA_NUEVA,ID_PERSONA:this.selectRow.ID_PERSONA,ID_PERFIL:this.selectRow.ID_PERFIL,MES_INI:this.formCambiar.MES_INI,MES_FIN:this.formCambiar.MES_FIN,GENERAR_DEU:this.formCambiar.GENERAR_DEU,CURRET_ANIO:this.selectRow.ANO};this.$confirm("¿Está seguro de cambiar la categoria de cobro?").onOk(P()(U()().m(function o(){return U()().w(function(o){while(1)switch(o.n){case 0:0!=a.ID_CATEGORIA_NUEVA?(e.$q.loading.show(),Q.$http.post("api/CategoriaCobroController/updateCategoriaIndividual",{params:a}).then(function(a){e.$q.loading.hide(),e.cerrarModalCategoria(),e.getCategoriasALumno(),e.$alert(a.message,"success")}).catch(function(a){e.$q.loading.hide(),e.$alert(a.error.message,"error")})):e.$alert("Debe de selecionar nueva categoria","error");case 1:return o.a(2)}},o)})))},onGridReadyModal:function(e){this.apiModal=e.api},clear:function(){this.ID_CATEGORIA_ANO="",this.form.MESINI="",this.form.MESFIN="",this.ano="",this.seccion="",this.nivel="",this.grado="",this.moneda="",this.monto="",this.descuento="",this.rowDataModal=[],this.alumnoSearchModal="",this.formCambiar={ID_CATEGORIA_NUEVA:0,MES_INI:0,MES_FIN:0,GENERAR_DEU:!1}},getCategorias:function(){var e=this;return P()(U()().m(function a(){var o;return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Q.$http.get("api/CategoriaCobroController/getAlumnosCategoria");case 1:o=a.v,o.length>0?e.form.ID_CATEGORIA_ALUMNO=Number(o[o.length-1]["ID_CATEGORIA_ALUMNO"]):e.form.ID_CATEGORIA_ALUMNO=1;case 2:return a.a(2)}},a)}))()},updateCategoria:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:e.$confirm("¿ Esta seguro de actualizar las categorías ?").onOk(P()(U()().m(function a(){var o;return U()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,Q.$http.post("api/CategoriaCobroController/updateCategoriaAlumno",{params:e.form});case 1:e.$alert("Categoria actualizada","success"),a.n=3;break;case 2:a.p=2,o=a.v,e.$alert(o.error.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])})));case 1:return a.a(2)}},a)}))()},getPerPerfil:function(e){var a=this;return P()(U()().m(function e(){return U()().w(function(e){while(1)switch(e.n){case 0:return a.persona=[],a.selectPersona="",e.a(2,Q.$http.get("api/personaController/getPersonaPerfil",{params:{params:{id_perfil:a.form.ID_PERFIL}}}))}},e)}))()},getAlumnos:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:return a.a(2,Q.$http.get("api/CategoriaCobroController/getAlumnos",{params:{parametros:{ID_CATEGORIA_ANO:e.ID_CATEGORIA_ANO,GRADOCOD:e.parametrosAlumnos.GRADOCOD,SECCIONCOD:e.parametrosAlumnos.SECCIONCOD,INSTRUCOD:e.parametrosAlumnos.INSTRUCOD,ALUMNO:e.alumnoSearchModal}}}))}},a)}))()},getCatAnio:function(){var e=this;return P()(U()().m(function a(){var o,t;return U()().w(function(a){while(1)switch(a.n){case 0:return a.n=1,Q.$http.get("api/CategoriaCobroController/getCategoriaAnio",{params:{params:{response:"list",ano:(0,ge["default"])().ano}}});case 1:o=a.v,e.storeCategoriaAnio=o,t=[],e.catAnioFilter.push({label:"Todos",value:""}),o.map(function(a){t.includes(a.ID_CATEGORIA_ANO)||(e.catAnioFilter.push({value:a.ID_CATEGORIA_ANO,label:a.CATEGORIA_ANIO}),e.catAnio.push({value:a.ID_CATEGORIA_ANO,label:a.CATEGORIA_ANIO}),e.indexs.push(a),t.push(a.CATEGORIA_ANIO))});case 2:return a.a(2)}},a)}))()},getCatPersona:function(e){var a=this;return P()(U()().m(function o(){var t;return U()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,Q.$http.get("api/CategoriaCobroController/getCategoriasPorPersona",{params:{params:e}});case 1:t=o.v,a.catPersona=t;case 2:return o.a(2)}},o)}))()}},beforeMount:function(){var e=this;return P()(U()().m(function a(){return U()().w(function(a){while(1)switch(a.n){case 0:e.crearBotones(),e.getMonth(),e.getCatAnio(),e.getCategorias(),e.getMonth(),e.create(),e.getAnios(),e.getAlumnosBuscar();case 1:return a.a(2)}},a)}))()}},ve=o(12807);const Ie=(0,ve.A)(be,[["render",k]]);var Ee=Ie}}]);