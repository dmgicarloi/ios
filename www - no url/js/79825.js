"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[79825],{79825:function(e,o,a){a.r(o),a.d(o,{default:function(){return be}});var t=a(61758),r=a(29104),n={class:"row q-ma-xs q-col-gutter-sm"},l={class:"col-xs-12 col-lg-6"},i={class:"col-xs-12 col-md-6 col-lg-2"},s={class:"col-xs-12 col-md-6 col-lg-2"},c={class:"col-xs-12 col-lg-2"},u={class:"row q-ma-xs q-col-gutter-sm"},d={class:"col-xs-12 col-lg-4"},m={class:"col-xs-12 col-lg-8"},f={class:"row q-ma-xs q-col-gutter-sm"},p={class:"col-xs-12"},h={class:"row q-ma-xs q-col-gutter-sm",style:{padding:"0",margin:"0"}},g={class:"col-xs-12"};function b(e,o){var a=(0,t.g2)("page-header"),b=(0,t.g2)("q-separator"),v=(0,t.g2)("q-select"),w=(0,t.g2)("q-input"),A=(0,t.g2)("q-date"),k=(0,t.g2)("q-popup-proxy"),S=(0,t.g2)("q-icon"),R=(0,t.g2)("sie-grid"),C=(0,t.g2)("q-card-section"),D=(0,t.g2)("q-option-group"),F=(0,t.g2)("consultarResolucion"),E=(0,t.g2)("consultar"),B=(0,t.g2)("resolucionBecas"),x=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(x,{class:"layout-v1 my-card",flat:"",bordered:""},{default:(0,t.k6)(function(){return[(0,t.bF)(a,{botones:e.pageHeader.botones,nivelAcceso:e.pageHeader.nivelAcceso,title:e.pageHeader.title,componente:e.pageHeader.componente,tabs:e.pageHeader.tabs,useTab:"",onActionTab:e.changeTab},null,8,["botones","nivelAcceso","title","componente","tabs","onActionTab"]),(0,t.bF)(b),(0,t.bo)((0,t.bF)(C,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",n,[(0,t.Lk)("div",l,[(0,t.bF)(v,{label:"Familia",modelValue:e.formulario.familia,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.formulario.familia=o}),options:e.options.familia,onInput:e.getAlumnosConImporte},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",i,[(0,t.bF)(w,{label:"Nro. Solicitud",modelValue:e.formulario.numsol,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.formulario.numsol=o}),disable:"",readonly:""},null,8,["modelValue"])]),(0,t.Lk)("div",s,[(0,t.bF)(v,{label:"Año",placeholder:"Seleccione un Año",modelValue:e.formulario.anio,"onUpdate:modelValue":o[2]||(o[2]=function(o){return e.formulario.anio=o}),options:e.options.anio,onInput:e.getNumeroSolicitud},null,8,["modelValue","options","onInput"])]),(0,t.Lk)("div",c,[(0,t.bF)(w,{"reverse-fill-mask":"",maxlegth:"10",mask:"##/##/####",hint:"Mask: ##/##/####",label:"Fecha Solicitud",modelValue:e.formulario.fecha_resolucion,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.formulario.fecha_resolucion=o})},{append:(0,t.k6)(function(){return[(0,t.bF)(S,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(k,{ref:"qDateProxy","transition-show":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(A,{mask:"DD/MM/YYYY",modelValue:e.formulario.fecha_resolucion,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.formulario.fecha_resolucion=o}),onInput:o[4]||(o[4]=function(o){return e.closeData("qDateProxy")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue"])])]),(0,t.Lk)("div",u,[(0,t.Lk)("div",d,[(0,t.bF)(v,{label:"Motivo",modelValue:e.formulario.motivo,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.formulario.motivo=o}),options:e.options.motivoBecas,"option-label":"MOTBECDES","option-value":"MOTBECCOD"},null,8,["modelValue","options"])]),(0,t.Lk)("div",m,[(0,t.bF)(w,{label:"Observación",modelValue:e.formulario.observacion,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.formulario.observacion=o})},null,8,["modelValue"])])]),(0,t.Lk)("div",f,[(0,t.Lk)("div",p,[(0,t.bF)(R,{class:"fix-table-global ag-theme-balham",style:{height:"calc(100vh - 360px)"},columnDefs:e.grid.columns,frameworkComponents:e.grid.frameworkComponents,rowData:e.grid.rowData,onGridReady:e.onGridReady,defaultColDef:e.grid.defaultColDef,floatingFilter:"",rowSelection:"multiple"},null,8,["columnDefs","frameworkComponents","rowData","onGridReady","defaultColDef"])])])]}),_:1},512),[[r.aG,e.pageHeader.tabActive===e.models.tabs.index]]),(0,t.bo)((0,t.bF)(C,{style:{padding:"0",margin:"0"}},{default:(0,t.k6)(function(){return[(0,t.Lk)("div",h,[(0,t.Lk)("div",g,[(0,t.bF)(D,{modelValue:e.models.consultar,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.models.consultar=o}),options:e.options.consultar,type:"radio",inline:""},null,8,["modelValue","options"])])])]}),_:1},512),[[r.aG,e.pageHeader.tabActive===e.models.tabs.consultar]]),(0,t.bo)((0,t.bF)(F,{ref:"consultarResolucion"},null,512),[[r.aG,e.pageHeader.tabActive===e.models.tabs.consultar&&2===e.models.consultar]]),(0,t.bo)((0,t.bF)(E,{ref:"consultar",onUpdatePageHeader:e.changeTab,onAbrirModalResolucion:e.abrirModalResolucion},null,8,["onUpdatePageHeader","onAbrirModalResolucion"]),[[r.aG,e.pageHeader.tabActive===e.models.tabs.consultar&&1===e.models.consultar]]),e.models.modalResolucion?((0,t.uX)(),(0,t.Wv)(B,{key:0,modelValue:e.models.modalResolucion,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.models.modalResolucion=o}),alucod:e.resolucion.alucod,numsol:e.resolucion.numsol,onRegistrarResolucion:e.registrarResolucion},null,8,["modelValue","alucod","numsol","onRegistrarResolucion"])):(0,t.Q3)("v-if",!0)]}),_:1})}var v=a(57008),w=a.n(v),A=a(76080),k=a.n(A),S=a(45254),R=a.n(S),C=(a(12563),a(88567)),D=a(95718),F=a(53380),E=a(54489),B=a(80660),x=a(36408),N=a(27560),V=a(96330),L=a(75053),O=a(95477),y=a(4437),M=a(64208),U=a(3112),_=a(41615),I=a(64303),T=a(54267),q=a(42037),P=a(21334),H=a(38739),$=a(26697),Q=a(53093),G=a(8445),Y=a.n(G),X={key:0,class:"row q-ma-xs q-col-gutter-sm"},W={class:"col-xs-4"},j={class:"col-xs-4"},z={class:"col-xs-4"},J={key:1,class:"row q-ma-xs q-col-gutter-sm"},K={class:"col-xs-12"},Z={class:"col-auto"},ee={class:"col-auto"},oe={class:"row q-ma-xs q-col-gutter-sm"},ae={class:"col-xs-6"},te={class:"col-xs-6"};function re(e,o){var a=(0,t.g2)("q-select"),r=(0,t.g2)("q-date"),n=(0,t.g2)("q-popup-proxy"),l=(0,t.g2)("q-icon"),i=(0,t.g2)("q-input"),s=(0,t.g2)("sie-grid"),c=(0,t.g2)("footer-grid"),u=(0,t.g2)("q-card-section"),d=(0,t.g2)("q-separator"),m=(0,t.g2)("q-option-group"),f=(0,t.g2)("sie-modal");return(0,t.uX)(),(0,t.Wv)(u,null,{default:(0,t.k6)(function(){return[o[15]||(o[15]=(0,t.Lk)("form",{class:"form",id:"form-ficha"},null,-1)),1===e.models.consultar?((0,t.uX)(),(0,t.CE)("div",X,[(0,t.Lk)("div",W,[(0,t.bF)(a,{placeholder:"Año",options:e.options.anios,label:"Año",modelValue:e.filtros.anio,"onUpdate:modelValue":o[0]||(o[0]=function(o){return e.filtros.anio=o}),onInput:e.getBecasSolicitadas},null,8,["options","modelValue","onInput"])]),(0,t.Lk)("div",j,[(0,t.bF)(i,{"reverse-fill-mask":"",modelValue:e.filtros.desde,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.filtros.desde=o}),maxlength:"10",mask:"##/##/####",label:"Desde",onInput:e.getBecasSolicitadas},{append:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{mask:"DD/MM/YYYY",modelValue:e.filtros.desde,"onUpdate:modelValue":o[1]||(o[1]=function(o){return e.filtros.desde=o}),onInput:o[2]||(o[2]=function(o){return e.closeModalCalendar("qDateProxy2")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","onInput"])]),(0,t.Lk)("div",z,[(0,t.bF)(i,{"reverse-fill-mask":"",modelValue:e.filtros.hasta,"onUpdate:modelValue":o[6]||(o[6]=function(o){return e.filtros.hasta=o}),maxlength:"10",mask:"##/##/####",label:"Hasta",onInput:e.getBecasSolicitadas},{append:(0,t.k6)(function(){return[(0,t.bF)(l,{class:"cursor-pointer",name:"date_range"},{default:(0,t.k6)(function(){return[(0,t.bF)(n,{ref:"qDateProxy3","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)(function(){return[(0,t.bF)(r,{mask:"DD/MM/YYYY",modelValue:e.filtros.hasta,"onUpdate:modelValue":o[4]||(o[4]=function(o){return e.filtros.hasta=o}),onInput:o[5]||(o[5]=function(o){return e.closeModalCalendar("qDateProxy3")})},null,8,["modelValue"])]}),_:1},512)]}),_:1})]}),_:1},8,["modelValue","onInput"])])])):(0,t.Q3)("v-if",!0),1===e.models.consultar?((0,t.uX)(),(0,t.CE)("div",J,[(0,t.Lk)("div",K,[(0,t.bF)(s,{class:"fix-table-global ag-theme-balham",style:{height:"calc(100vh - 360px)"},columnDefs:e.grid.columns,frameworkComponents:e.grid.frameworkComponents,rowData:e.grid.rowData,onGridReady:e.onGridReady,defaultColDef:e.grid.defaultColDef,floatingFilter:""},null,8,["columnDefs","frameworkComponents","rowData","onGridReady","defaultColDef"]),(0,t.bF)(c,{style:{width:"100%"},modelValue:e.grid.footer.pagina,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.grid.footer.pagina=o}),max:e.grid.footer.pages,onLoad:e.getBecasSolicitadas,rows:e.grid.rowData},null,8,["modelValue","max","onLoad","rows"])])])):(0,t.Q3)("v-if",!0),(0,t.bF)(f,{modelValue:e.reporte.show,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.reporte.show=o}),labelButtonOk:"Imprimir",iconButtonOk:"print",showButtonsReporte:"",onExportar:e.generarReporte},{default:(0,t.k6)(function(){return[o[14]||(o[14]=(0,t.Lk)("form",{class:"form",id:"form"},null,-1)),(0,t.bF)(u,null,{default:(0,t.k6)(function(){return Y()(o[12]||(o[12]=[(0,t.Lk)("div",{class:"row items-center no-wrap"},[(0,t.Lk)("div",{class:"col"},[(0,t.Lk)("div",{class:"text-h6"},"Reporte Becas Solicitud")])],-1)]))}),_:1}),(0,t.bF)(d),(0,t.bF)(u,null,{default:(0,t.k6)(function(){return[(0,t.Lk)("div",Z,[(0,t.bF)(m,{color:"primary",type:"radio",modelValue:e.reporte.seleccionado,"onUpdate:modelValue":o[8]||(o[8]=function(o){return e.reporte.seleccionado=o}),options:e.reporte.reportes},null,8,["modelValue","options"])])]}),_:1}),(0,t.bF)(d),(0,t.bF)(u,null,{default:(0,t.k6)(function(){return[o[13]||(o[13]=(0,t.Lk)("div",{class:"row items-center no-wrap"},[(0,t.Lk)("div",{class:"col"},[(0,t.Lk)("div",{class:"text-h4",style:{"text-align":"center","font-weight":"bolder"}},"Parámetros")])],-1)),(0,t.Lk)("div",ee,[(0,t.Lk)("div",oe,[(0,t.Lk)("div",ae,[(0,t.bF)(a,{placeholder:"Seleccione Año",label:"Año",options:e.options.anios,modelValue:e.reporte.anio,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.reporte.anio=o}),"option-label":"label","option-value":"value"},null,8,["options","modelValue"])]),(0,t.Lk)("div",te,[(0,t.bF)(a,{placeholder:"Ordenar Por",label:"Orden Por:","option-label":"label","option-value":"value",options:e.reporte.ordernar,modelValue:e.reporte.orden,"onUpdate:modelValue":o[10]||(o[10]=function(o){return e.reporte.orden=o})},null,8,["options","modelValue"])])])])]}),_:1})]}),_:1},8,["modelValue","onExportar"])]}),_:1})}var ne=a(6123),le=a(78840),ie=a(18105),se={emits:["abrirModalResolucion","updatePageHeader"],components:{headerGrid:V.A,sieGrid:x.A,footerGrid:N.A,QCard:C.A,QCardSection:D.A,QSelect:E.S,QSeparator:F.A,sieModal:L.A,QPopupProxy:O.A,QDate:y.A,QInput:M.A,QCheckbox:U.A,crearBotones:I.A,QOptionGroup:H.A,QTabs:$.A,QTab:Q.A,QIcon:ne.bP},data:function(){return{botones:[],componente:"ConsultarBecasResolucion",nivelAcceso:3,check:!1,grid:{columns:[],api:null,rowData:[],frameworkComponents:{actionButton:le.A},defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0,suppressDragLeaveHidesColumns:!0},footer:{pagina:1,pages:10}},options:{anios:[],familias:[]},models:{consultar:1},filtros:{anio:String(_["default"].CURRENT_YEAR),desde:_["default"].CURRENT_DAY,hasta:_["default"].CURRENT_DAY},modals:{modalEditar:!0},reporte:{show:!1,reportes:[{value:"002",label:"Relación de solicitudes de Becas"},{value:"004",label:"Relación de solicitudes de Becas por Grados"},{value:"005",label:"Relación de alumnos con solicitud de Becas"}],seleccionado:"002",anio:String(_["default"].CURRENT_YEAR),ordernar:[{label:"Alfabético",value:"A"},{label:"Código",value:"C"},{label:"Número",value:"N"}],orden:"A"}}},methods:{generarFicha:function(e){var o=document.getElementById("form-ficha"),a={tipReport:"beca-solicitud",orden:this.reporte.orden,reporte:"001",anobec:e.data.ANOBEC,numsol:e.data.NUMSOL,famcod:e.data.FAMCOD,formato:"pdf"};console.log("parametros: ",a),_["default"].FORMULARIO_REPORTES(o,a,"")},generarReporte:function(e){var o=document.getElementById("form"),a={tipReport:"beca-solicitud",orden:this.reporte.orden,reporte:this.reporte.seleccionado,anobec:this.reporte.anio,numsol:"",famcod:"",formato:e};_["default"].FORMULARIO_REPORTES(o,a,"")},getBecasSolicitadas:function(){var e=this;return R()(k()().m(function o(){var a,t;return k()().w(function(o){while(1)switch(o.n){case 0:return a={fechaini:(0,T.convertToYMD)(e.filtros.desde),fechafin:(0,T.convertToYMD)(e.filtros.hasta),anio:e.filtros.anio},o.n=1,B.$http.get("api/becaController/getSolicitantesBecas",{params:{parametros:a}});case 1:t=o.v,e.grid.rowData=t;case 2:return o.a(2)}},o)}))()},init:function(){var e=this;return R()(k()().m(function o(){return k()().w(function(o){while(1)switch(o.n){case 0:e.getBecasSolicitadas(),e.getAnios();case 1:return o.a(2)}},o)}))()},crearBotones:function(){return this.check?[]:(this.botones=[{click:this.formatos,label:"Formatos",minAcceso:1,icon:"printer"}],this.botones)},onGridReady:function(e){this.grid.api=e.api},getAnios:function(){var e=this;return R()(k()().m(function o(){return k()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,_["default"].API_ANIOS();case 1:e.options.anios=o.v;case 2:return o.a(2)}},o)}))()},columns:function(){var e=this;this.grid.columns=[{headerName:"Nro Solicitud",width:100,field:"NUMSOL",cellStyle:this.validarEstado},{headerName:"Fam. Cod",width:100,field:"FAMCOD",cellStyle:this.validarEstado},{headerName:"Familia",width:150,field:"FAMDES",cellStyle:this.validarEstado},{headerName:"Código",field:"ALUCOD",width:100,cellStyle:this.validarEstado},{headerName:"Nombre",width:325,field:"NOMBRE",cellStyle:this.validarEstado},{headerName:"Fecha Solicitud",field:"FECSOL",width:140,valueFormatter:function(e){return(0,ie.Ay)(e.value,"DD/MM/YYYY")},cellStyle:this.validarEstado},{headerName:"Estado",width:140,field:"ESTADODES",cellStyle:this.validarEstado},{headerName:"Beca",width:150,field:"MOTBECDES",cellStyle:this.validarEstado},{cellRendererSelector:function(o){var a={component:le.A,params:{icon:"content_paste",title:"Resolución",onClick:e.registrarResolucion}};return o.data.ANUSOL!==_["default"].ESTADO_SOLICITUD.PENDIENTE||a},width:40,filter:!1},{cellRendererSelector:function(o){var a={component:le.A,params:{icon:"do_not_disturb_alt",title:"Anular solicitud",onClick:e.anularSolicitud}};return o.data.ANUSOL!==_["default"].ESTADO_SOLICITUD.PENDIENTE||a},width:40,filter:!1},{cellRenderer:le.A,filter:!1,cellRendererParams:{icon:"file_pdf",onClick:this.generarFicha},width:40}]},validarEstado:function(e){var o=e.data,a={R:"#f26d6d",S:"#f2b068"},t={R:"#ffffff",S:"#ffffff"};return{backgroundColor:a[o.ANUSOL]||"#ffffff",color:t[o.ANUSOL]||"#000000",fontWeight:t[o.ANUSOL]?"bolder":"#ffffff"}},registrarResolucion:function(e){this.$emit("abrirModalResolucion",e.data)},anularSolicitud:function(e){var o=this;this.$confirm("¿Esta seguro de anular la solicitud de beca?").onOk(R()(k()().m(function a(){var t,r,n,l;return k()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,t=e.data.NUMSOL,r=e.data.ALUCOD,a.n=1,B.$http.post("api/becaController/anularSolicitudBeca",{params:{numsol:t,alucod:r}});case 1:n=a.v,o.$alert(n.message,"success"),o.getBecasSolicitadas(),a.n=3;break;case 2:a.p=2,l=a.v,o.$alert(l.error?l.error.message:l.message,"warning");case 3:return a.a(2)}},a,null,[[0,2]])})))},editarSolicitud:function(){},visableButtons:function(){this.$emit("updatePageHeader")},configButton:function(){return{componente:this.componente,nivelAcceso:this.nivelAcceso,botones:this.crearBotones(),title:"Consultar Becas Resolución"}},formatos:function(){this.reporte.show=!0},closeModalCalendar:function(e){this.$refs[e].hide(),this.getBecasSolicitadas()}},beforeCreate:function(){return R()(k()().m(function e(){return k()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()},beforeMount:function(){var e=this;return R()(k()().m(function o(){return k()().w(function(o){while(1)switch(o.n){case 0:e.columns(),e.init();case 1:return o.a(2)}},o)}))()}},ce=a(12807);const ue=(0,ce.A)(se,[["render",re]]);var de=ue,me=a(2652),fe=a(85303),pe=a(16855),he={components:{headerGrid:V.A,sieGrid:x.A,footerGrid:N.A,QCard:C.A,QCardSection:D.A,QSelect:E.S,QSeparator:F.A,sieModal:L.A,QPopupProxy:O.A,QDate:y.A,QInput:M.A,QCheckbox:U.A,crearBotones:I.A,AgregarDeuda:P.A,QOptionGroup:H.A,QTabs:$.A,QTab:Q.A,consultar:de,pageHeader:me.A,QTabPane:ne.dg,resolucionBecas:fe["default"],consultarResolucion:pe["default"],QIcon:ne.bP},data:function(){return{options:{anio:[],familia:[],consultar:[{label:"Solicitud",value:1},{label:"Resolución",value:2}]},pageHeader:{tabs:[],title:"Solicitud de Becas",tabActive:"index",botones:[],nivelAcceso:3,componente:""},grid:{columns:[],api:null,rowData:[],frameworkComponents:{},defaultColDef:{suppressHeaderMenuButton:!0,filter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},resizable:!0,sortable:!0,suppressDragLeaveHidesColumns:!0}},models:{componente:"resolucionBecas",nivelAcceso:3,tabs:{index:"index",consultar:"consultar"},title:"Solicitud Becas",modalResolucion:!1,consultar:1},resolucion:{alucod:"",numsol:""},formulario:{anio:String(_["default"].CURRENT_YEAR),fecha_resolucion:_["default"].CURRENT_DAY,familia:"",motivo:"",observacion:"",numsol:""}}},methods:{registrarResolucion:function(e){var o=this;this.$confirm("¿Esta seguro de ejecutar el proceso?").onOk(R()(k()().m(function a(){var t,r;return k()().w(function(a){while(1)switch(a.p=a.n){case 0:return a.p=0,a.n=1,B.$http.post("api/becaController/registrarResolucionBeca",{parametros:e});case 1:t=a.v,o.$alert(t.message,"success"),o.models.modalResolucion=!1,o.$refs.consultar.getBecasSolicitadas(),o.$refs.consultarResolucion.getResoluciones(),o.getNumeroSolicitud(),a.n=3;break;case 2:return a.p=2,r=a.v,a.a(2,o.$alert(r.error?r.error.message:r.message,"warning"));case 3:return a.a(2)}},a,null,[[0,2]])})))},abrirModalResolucion:function(e){this.models.modalResolucion=!0,this.resolucion.numsol=e.NUMSOL,this.resolucion.alucod=e.ALUCOD},getAnios:function(){var e=this;return R()(k()().m(function o(){return k()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,_["default"].API_ANIOS();case 1:e.options.anio=o.v;case 2:return o.a(2)}},o)}))()},formatos:function(){1===this.models.consultar&&this.$refs.consultar.formatos(),2===this.models.consultar&&this.$refs.consultarResolucion.formatos()},changeTab:function(e){try{if(e=e||this.pageHeader.tabActive,this.pageHeader.botones=[],this.pageHeader.tabActive=e,"index"===e){var o=this.configButton();return this.pageHeader.botones=o.botones,this.pageHeader.componente=o.componente,this.pageHeader.nivelAcceso=o.nivelAcceso,!0}if(!this.$refs.hasOwnProperty(e))throw new Error("No existe la referencia para la tab ".concat(e));if(!Object.prototype.hasOwnProperty.call(this.$refs[e],"configButton"))throw new Error("No existe la configuración de los botones para el componente ".concat(e));var a=this.$refs[e].configButton();return this.pageHeader.botones=this.configButton().botones,this.pageHeader.componente=a.componente,this.pageHeader.nivelAcceso=a.nivelAcceso,!0}catch(e){return this.$alert(e.error?e.error.message:e.message,"warning")}},validarSolicitud:function(){var e=this;return R()(k()().m(function o(){var a,t;return k()().w(function(o){while(1)switch(o.p=o.n){case 0:if(o.p=0,e.formulario.motivo){o.n=1;break}throw new Error("No selecciono el motivo de la beca");case 1:if(e.formulario.familia){o.n=2;break}throw new Error("No selecciono la familia");case 2:if(e.formulario.anio){o.n=3;break}throw new Error("No selecciono el año de la solicitud");case 3:if(a=e.grid.api.getSelectedRows(),0!==a.length){o.n=4;break}throw new Error("No selecciono ningun registro","warning");case 4:return o.a(2,a);case 5:throw o.p=5,t=o.v,new Error(t.message);case 6:return o.a(2)}},o,null,[[0,5]])}))()},grabar:function(){var e=this;return R()(k()().m(function o(){var a,t;return k()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,o.n=1,e.validarSolicitud();case 1:a=o.v,e.$confirm("¿Esta seguro de registrar la solicitud?").onOk(R()(k()().m(function o(){var t,r,n;return k()().w(function(o){while(1)switch(o.p=o.n){case 0:return o.p=0,t=w()(w()({},e.formulario),{},{fecres:(0,T.convertToYMD)(e.formulario.fecha_resolucion)}),o.n=1,B.$http.post("api/becaController/registrarBecaSolicitud",{params:{datos:t,registros:a}});case 1:return r=o.v,e.$alert(r.message,"success"),o.n=2,e.getNumeroSolicitud();case 2:e.grid.rowData=[],e.formulario.familia="",e.$refs.consultar.getBecasSolicitadas(),o.n=4;break;case 3:return o.p=3,n=o.v,o.a(2,e.$alert(n.error?n.error.message:n.message,"warning"));case 4:return o.a(2)}},o,null,[[0,3]])}))),o.n=3;break;case 2:return o.p=2,t=o.v,o.a(2,e.$alert(t.error?t.error.message:t.message,"warning"));case 3:return o.a(2)}},o,null,[[0,2]])}))()},getNumeroSolicitud:function(){var e=this;return R()(k()().m(function o(){var a,t;return k()().w(function(o){while(1)switch(o.n){case 0:return a={anio:e.formulario.anio},o.n=1,B.$http.get("api/becaController/getBecaNumeroSolicitud",{params:{params:a}});case 1:t=o.v,e.formulario.numsol=t.data.numsol;case 2:return o.a(2)}},o)}))()},getAlumnosConImporte:function(){var e=this;return R()(k()().m(function o(){var a,t;return k()().w(function(o){while(1)switch(o.n){case 0:return a={famcod:e.formulario.familia},o.n=1,B.$http.get("api/becaController/getAlumnosConImporte",{params:{params:a}});case 1:t=o.v,e.grid.rowData=t;case 2:return o.a(2)}},o)}))()},onGridReady:function(e){this.grid.api=e.api},crearBotones:function(){return this.pageHeader.tabActive===this.models.tabs.consultar?[{click:this.formatos,label:"Formatos",minAcceso:1,icon:"printer"}]:(this.options.botones=[{icon:"save",click:this.grabar,label:"Grabar",minAcceso:_["default"].LECTURA_ESCRITURA}],this.options.botones)},configButton:function(){return{componente:this.models.componente,nivelAcceso:this.models.nivelAcceso,botones:this.crearBotones(),title:this.models.title}},crearTabs:function(){this.pageHeader.tabs=[{label:"Registrar",name:"index",active:1},{label:"Consultar",name:"consultar"}],this.changeTab()},closeData:function(e){this.$refs[e].hide()},columns:function(){this.grid.columns=[{headerName:"Código",field:"CODIGO",width:150},{headerName:"Nombres",field:"NOMBRE",width:350},{headerName:"NGS",field:"NGS",width:150},{headerName:"Monto",field:"MONTO",valueFormatter:q.toFixed,decimales:2,cellStyle:{textAlign:"right"},width:150}]},getFamilias:function(){var e=this;return R()(k()().m(function o(){return k()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,_["default"].API_FAMILIAS(!1);case 1:e.options.familia=o.v;case 2:return o.a(2)}},o)}))()},getMotivosBecas:function(){var e=this;return R()(k()().m(function o(){var a;return k()().w(function(o){while(1)switch(o.n){case 0:return o.n=1,B.$http.get("api/becaController/getMotivosDeBeca",{params:{parametros:{response:"combo"}}});case 1:a=o.v,e.options.motivoBecas=a;case 2:return o.a(2)}},o)}))()},init:function(){this.columns(),this.crearTabs(),this.getAnios(),this.getFamilias(),this.getMotivosBecas(),this.getNumeroSolicitud()}},beforeCreate:function(){return R()(k()().m(function e(){return k()().w(function(e){while(1)switch(e.n){case 0:return e.a(2)}},e)}))()},beforeMount:function(){var e=this;return R()(k()().m(function o(){return k()().w(function(o){while(1)switch(o.n){case 0:e.init();case 1:return o.a(2)}},o)}))()}};const ge=(0,ce.A)(he,[["render",b]]);var be=ge}}]);