"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[36577],{36577:function(e,i,t){t.r(i),t.d(i,{default:function(){return ze}});var a=t(8445),n=t.n(a),o=(t(56285),t(68017),t(61758)),s=t(58790),l={class:"q-ma-xs"},r={key:0,class:"row"},c={key:1,class:"row"},u={class:"column q-pa-xs q-mb-sm col",style:{border:"1px solid black !important","border-radius":"3px"}},d={class:"row col wrap"},f={class:"row"},p={key:0,class:"column col items-center justify-center"},m={key:0,class:"column col items-center justify-center"},h={key:0,class:"row justify-end"},C={class:"row"},b={key:0,class:"text-bold",style:{color:"#616161"}},E={key:0,class:"row text-grey-8",style:{"font-size":"12px"}},A={class:"row"},v={class:"text-bold"},k={key:0,class:"row"},D={key:1,class:"row text-grey-8",style:{"font-size":"12.5px"}},g={class:"row"},O={class:"text-bold"},T={key:0,class:"row"},F={key:0,class:"column",style:{"font-size":"10px"}},I={class:"row"},S={key:0,class:"text-bold"},y={key:1},L=["onClick"],w={class:"row"},M={key:0,class:"row"},_={class:"text-bold"},R={class:"row"},J={key:0,class:"text-bold"},x={class:"col row items-center leyenda-alto"},U={class:"col row justify-center"},X={class:"q-mx-sm"},j={key:0,class:"row q-ma-xs"},H={class:"text-bold"},V={key:1,class:"q-pa-sm"},Y={class:"row wrap"},q={key:2,class:"q-pa-sm q-col-gutter-y-sm"},P={key:0},Q={key:0},$={key:1},z={key:1,class:"row"},N={key:3,class:"q-pa-sm"},W={class:"row"},B={class:"text-bold"},K={key:4,class:"row"},G={key:0,class:"col colum"},Z={key:1,class:"col colum"},ee={class:"row q-px-sm q-pt-sm"},ie={class:"col"},te={class:"row q-px-sm"},ae={class:"col"},ne={class:"row"},oe={class:"row"},se={key:1,class:"column col items-center justify-center"};function le(e,i){var t=(0,o.g2)("sie-date"),a=(0,o.g2)("q-btn"),le=(0,o.g2)("q-chip"),re=(0,o.g2)("sie-select"),ce=(0,o.g2)("q-input"),ue=(0,o.g2)("sie-upload"),de=(0,o.g2)("sie-modal"),fe=(0,o.g2)("header-btn"),pe=(0,o.g2)("sie-estudiantes"),me=(0,o.g2)("sie-vacio"),he=(0,o.g2)("q-tab"),Ce=(0,o.g2)("q-list-header"),be=(0,o.g2)("q-item-side"),Ee=(0,o.g2)("q-item-main"),Ae=(0,o.g2)("q-icon"),ve=(0,o.g2)("q-item-tile"),ke=(0,o.g2)("q-tooltip"),De=(0,o.g2)("q-item"),ge=(0,o.g2)("q-list"),Oe=(0,o.g2)("q-spinner-oval"),Te=(0,o.g2)("q-inner-loading"),Fe=(0,o.g2)("q-tab-pane"),Ie=(0,o.g2)("q-tabs"),Se=(0,o.g2)("q-th"),ye=(0,o.g2)("q-tr"),Le=(0,o.g2)("q-td"),we=(0,o.g2)("q-table"),Me=(0,o.g2)("q-select"),_e=(0,o.g2)("q-checkbox"),Re=(0,o.g2)("q-form"),Je=(0,o.g2)("q-page"),xe=(0,o.gN)("download");return(0,o.uX)(),(0,o.Wv)(Je,{class:"page-asistencia"},{default:(0,o.k6)(function(){return[(0,o.bF)(de,{class:"model-responsable",loading:e.modalLoad,modelValue:e.modalAnticip,"onUpdate:modelValue":i[6]||(i[6]=function(i){return e.modalAnticip=i}),title:e.title,footer:"A"!==e.estado&&!e.sieInfo.esEstudiante&&!e.bloqJustif,onSubmit:e.grabarAnticipo,ok:e.$t("botones.guardar")},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",l,[e.infoAnticipo.add?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(t,{class:"col",modelValue:e.infoAnticipo.fecha,"onUpdate:modelValue":i[0]||(i[0]=function(i){return e.infoAnticipo.fecha=i}),options:e.dispAnticip,placeholder:"fecha"},null,8,["modelValue","options"]),(0,o.bF)(a,{flat:"",dense:"",round:"",icon:"save",onClick:i[1]||(i[1]=function(i){return e.addFechaClose(!0)})}),(0,o.bF)(a,{flat:"",dense:"",round:"",icon:"close",onClick:i[2]||(i[2]=function(i){return e.addFechaClose(!1)})})])):((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("fieldset",u,[i[26]||(i[26]=(0,o.Lk)("legend",{style:{"font-size":"0.8rem"}},"Fechas :",-1)),(0,o.Lk)("div",{class:(0,s.C4)(["row col",{"justify-between":e.infoAnticipo.arrFechas.length>0,"justify-end":0===e.infoAnticipo.arrFechas.length}])},[(0,o.Lk)("div",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.infoAnticipo.arrFechas,function(i,t){return(0,o.uX)(),(0,o.Wv)(le,{class:"text-center",closable:"",onHide:function(i){return e.delFecha(t)}},{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(e.dateF(i,"DD/MM/YYYY")),1)]}),_:2},1032,["onHide"])}),256))]),(0,o.bF)(a,{flat:"",dense:"",round:"",icon:"add",onClick:e.addFecha},null,8,["onClick"])],2)])])),(0,o.bF)(re,{type:"outlined",modelValue:e.infoAnticipo.justificacion,"onUpdate:modelValue":i[3]||(i[3]=function(i){return e.infoAnticipo.justificacion=i}),options:e.justificacion,label:"SECUDES",val:"SECUCOD",placeholder:e.$t("justificacion")},null,8,["modelValue","options","placeholder"]),(0,o.bF)(re,{type:"outlined",modelValue:e.infoAnticipo.tipoAsistencia,"onUpdate:modelValue":i[4]||(i[4]=function(i){return e.infoAnticipo.tipoAsistencia=i}),options:e.tipoAsistencia,label:"label",val:"value",placeholder:e.$t("asistencia")},null,8,["modelValue","options","placeholder"]),(0,o.bF)(ce,{class:"q-if-outlined",type:"textarea",rows:"3",modelValue:e.infoAnticipo.detalle,"onUpdate:modelValue":i[5]||(i[5]=function(i){return e.infoAnticipo.detalle=i}),modelModifiers:{trim:!0},"float-label":e.$t("intranet.clase.contenidoDetalle")+"*",onKeyup:e.maxLength},null,8,["modelValue","float-label","onKeyup"]),e.sieInfo.esEstudiante?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(ue,{key:2,class:"no-wrap imagen",onUpload:e.added,botones:!1,icon:"wallpaper",src:e.imagen,allow:["jpg","png","jpeg","bmp","pdf","doc","docx","ppt","pptx","xls","xlsx","zip","rar"]},null,8,["onUpload","src"]))])]}),_:1},8,["loading","modelValue","title","footer","onSubmit","ok"]),(0,o.bF)(fe,{name:"Asistencia de Estudiantes"}),(0,o.Lk)("div",f,["005"!==e.sieInfo.tipcod?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,s.C4)(e.ver?"col-xs-12 col-md-8":"col")},[(0,o.bF)(pe,{modelValue:e.alucod,"onUpdate:modelValue":i[7]||(i[7]=function(i){return e.alucod=i}),onSelected:e.selectAlumno},null,8,["modelValue","onSelected"])],2)):(0,o.Q3)("v-if",!0),e.ver?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,s.C4)(["q-pt-sm-c q-pr-sm q-pl-xs-sm q-bb-sm","005"!==e.sieInfo.tipcod?"A"===e.option?"q-pl-md-none col-xs-12 col-md-4":"q-pl-md-none col-xs-5 col-md-2":"q-pl-md-sm col"])},[(0,o.bF)(re,{noBottom:"",type:"outlined",modelValue:e.option,"onUpdate:modelValue":i[8]||(i[8]=function(i){return e.option=i}),options:e.options,label:"label",val:"value",placeholder:"Por",disable:!e.alucod&&"005"!==e.sieInfo.tipcod,onInput:e.initFecha},null,8,["modelValue","options","disable","onInput"])],2)):(0,o.Q3)("v-if",!0),!e.ver||"C"!==e.option&&"T"!==e.option?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,s.C4)(["q-pt-sm-c q-pr-sm q-bb-sm","005"!==e.sieInfo.tipcod?"col-xs-7 col-md-2":"col"])},[(0,o.bF)(t,{modelValue:e.fechaA,"onUpdate:modelValue":i[9]||(i[9]=function(i){return e.fechaA=i}),options:e.diasDispo,placeholder:"fecha"},null,8,["modelValue","options"])],2))]),e.alucod?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[e.vacio&&e.nocursos?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.bF)(me,{subtitle:"mensajes.e0096",icon:"person"})])):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.bF)(Ie,{class:"q-tabs-horizontal q-tabs-horizontal-reverse col",modelValue:e.selectTipo,"onUpdate:modelValue":i[15]||(i[15]=function(i){return e.selectTipo=i}),animated:"",swipeable:""},{title:(0,o.k6)(function(){return[e.tabCursoPrimero?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[e.showCurso?((0,o.uX)(),(0,o.Wv)(he,{key:0,name:"C",label:"Curso"})):(0,o.Q3)("v-if",!0),(0,o.bF)(he,{name:"S",label:"Salón"})],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.bF)(he,{name:"S",label:"Salón"}),e.showCurso?((0,o.uX)(),(0,o.Wv)(he,{key:0,name:"C",label:"Curso"})):(0,o.Q3)("v-if",!0)],64))]}),default:(0,o.k6)(function(){return[(0,o.bF)(Fe,{name:"S"},{default:(0,o.k6)(function(){return[e.vacio?((0,o.uX)(),(0,o.CE)("div",m,[(0,o.bF)(me,{subtitle:"mensajes.e0096",icon:"person"})])):((0,o.uX)(),(0,o.Wv)(Ie,{key:1,class:"q-tabs-horizontal q-tabs-horizontal-reverse col",modelValue:e.selectedTab,"onUpdate:modelValue":i[10]||(i[10]=function(i){return e.selectedTab=i}),inverted:"",animated:"",swipeable:""},{title:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.periodos,function(i,t){return(0,o.uX)(),(0,o.Wv)(he,{key:t,class:"tab",label:e.getPeriodo(i.PERIODO),name:t,icon:i.BIMECOD<=i.PERICIE?"lock":""},null,8,["label","name","icon"])}),128))]}),default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.listAsistencia,function(t,n){return(0,o.uX)(),(0,o.Wv)(Fe,{key:n,class:"no-border tab-pane",name:n},{default:(0,o.k6)(function(){return[e.isAnticipada?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.bF)(a,{color:"secondary",onClick:function(i){return e.openModalAddJus(n)},label:e.title,size:"sm"},null,8,["onClick","label"])])):(0,o.Q3)("v-if",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t,function(t,n){return(0,o.uX)(),(0,o.Wv)(ge,{key:n,class:"no-border list",highlight:"","inset-separator":""},{default:(0,o.k6)(function(){return[(0,o.bF)(Ce,{class:"uppercase list-header"},{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(n),1)]}),_:2},1024),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t,function(t,n){return(0,o.uX)(),(0,o.Wv)(De,{key:n,class:"item"},{default:(0,o.k6)(function(){return[(0,o.bF)(be,null,{default:(0,o.k6)(function(){return[(0,o.bF)(le,{class:"text-center",color:e.getColor(t.DESCR)},{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(e.getLabel(t.DESCR)),1)]}),_:2},1032,["color"])]}),_:2},1024),(0,o.bF)(Ee,{"label-lines":"2"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",C,[(0,o.Lk)("span",{class:(0,s.C4)({"text-bold":e.isDirecto})},(0,s.v_)(t.DESCR),3),e.isDirecto&&e.detalleData(t)?((0,o.uX)(),(0,o.CE)("span",b," ("+(0,s.v_)(e.detalleData(t))+")",1)):(0,o.Q3)("v-if",!0)]),e.showInfoRegistro&&t.FH_INGRESO&&e.isDirecto?((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("div",A,[(0,o.Lk)("div",v,"F/H "+(0,s.v_)(e.showI?"ingreso":"marcación")+": ",1),(0,o.Lk)("span",null,(0,s.v_)(e.dateF(t.FECREG,e.showI?"hh:mm A":"DD/MM/YYYY hh:mm A")),1)]),e.showS&&t.FH_SALIDA?((0,o.uX)(),(0,o.CE)("div",k,[i[27]||(i[27]=(0,o.Lk)("div",{class:"text-bold"}," - F/H Salida: ",-1)),(0,o.Lk)("span",null,(0,s.v_)(e.dateF(t.FH_SALIDA,"hh:mm A")),1)])):(0,o.Q3)("v-if",!0)])):(0,o.Q3)("v-if",!0),t.TEXTO?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[e.isDirecto?((0,o.uX)(),(0,o.CE)("div",D,[i[28]||(i[28]=(0,o.Lk)("div",{class:"text-bold"},"Comentario: ",-1)),(0,o.Lk)("span",null,(0,s.v_)(t.TEXTO),1)])):((0,o.uX)(),(0,o.Wv)(a,{key:0,label:"Ver comentario",color:"secondary",size:"sm",onClick:function(i){return e.mostrarComentario(t)}},null,8,["onClick"]))],64)):(0,o.Q3)("v-if",!0)]}),_:2},1024),t.ESTJUS&&t.JUSTIFICA&&"S"===t.JUSTIFICA.trim()&&e.validarFecha(t)?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[e.isLess&&e.acceso&&!e.isEstudiante?((0,o.uX)(),(0,o.Wv)(be,{key:0,class:"text-center",rigth:""},{default:(0,o.k6)(function(){return[("0065"===e.sieInfo.colcod?["T"].indexOf(t.ESTADOETI)<0:[].indexOf(t.ESTADOETI)<0)?((0,o.uX)(),(0,o.Wv)(Ae,{key:0,size:"20px",name:t.ICONO,color:t.COLOR,class:(0,s.C4)("green"===t.COLOR?"":"cursor-pointer"),onClick:function(i){return e.validaAsistencia(t,parseInt(t.BIMECOD)<=t.PERICIE,i)}},null,8,["name","color","class","onClick"])):(0,o.Q3)("v-if",!0)]}),_:2},1024)):(0,o.Q3)("v-if",!0),e.isLess||!e.acceso||e.isEstudiante?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(be,{key:1,class:"text-center",rigth:""},{default:(0,o.k6)(function(){return[("0065"===e.sieInfo.colcod?["T"].indexOf(t.ESTADOETI)<0:[].indexOf(t.ESTADOETI)<0)?((0,o.uX)(),(0,o.Wv)(a,{key:0,color:t.COLOR,label:e.$t(t.TOOLTIP),size:"sm",onClick:function(i){return e.validaAsistencia(t,parseInt(t.BIMECOD)<=t.PERICIE,i)}},null,8,["color","label","onClick"])):(0,o.Q3)("v-if",!0)]}),_:2},1024))],64)):(0,o.Q3)("v-if",!0),(0,o.bF)(be,{class:"text-center"},{default:(0,o.k6)(function(){return[(0,o.bF)(ve,{class:"num uppercase"},{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(e.dateNum(t.FECHA)),1)]}),_:2},1024),(0,o.bF)(ve,{class:"dia uppercase"},{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(e.dateDia(t.FECHA)),1)]}),_:2},1024)]}),_:2},1024),e.showInfoRegistro&&t.FH_INGRESO&&!e.isDirecto?((0,o.uX)(),(0,o.Wv)(be,{key:1,class:"text-center"},{default:(0,o.k6)(function(){return[(0,o.bF)(ve,null,{default:(0,o.k6)(function(){return[(0,o.bF)(Ae,{name:"info_outline",style:{"font-size":"18px"}},{default:(0,o.k6)(function(){return[(0,o.bF)(ke,{class:"column"},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",g,[(0,o.Lk)("div",O,"F/H "+(0,s.v_)(e.showI?"ingreso":"marcación")+" ",1),(0,o.Lk)("span",null,(0,s.v_)(e.dateF(t.FECREG,e.showI?"hh:mm A":"DD/MM/YYYY hh:mm A")),1)]),e.showS&&t.FH_SALIDA?((0,o.uX)(),(0,o.CE)("div",T,[i[29]||(i[29]=(0,o.Lk)("div",{class:"text-bold"},"F/H Salida ",-1)),(0,o.Lk)("span",null,(0,s.v_)(e.dateF(t.FH_SALIDA,"hh:mm A")),1)])):(0,o.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)]}),_:2},1024)):(0,o.Q3)("v-if",!0)]}),_:2},1024)}),128))]}),_:2},1024)}),128)),(0,o.bF)(Te,{visible:e.visible},{default:(0,o.k6)(function(){return[(0,o.bF)(Oe,{size:"50px",color:"primary"})]}),_:1},8,["visible"])]}),_:2},1032,["name"])}),128))]}),_:1},8,["modelValue"]))]}),_:1}),(0,o.bF)(Fe,{name:"C"},{default:(0,o.k6)(function(){return[(0,o.bF)(Ie,{class:"q-tabs-horizontal q-tabs-horizontal-reverse col",modelValue:e.tabSelectCurso,"onUpdate:modelValue":i[12]||(i[12]=function(i){return e.tabSelectCurso=i}),inverted:"",animated:"",swipeable:""},{title:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.asistenciaCurso.cabecera,function(i,t){return(0,o.uX)(),(0,o.Wv)(he,{key:t,class:"tab",label:e.getPeriodo("Periodo "+t),name:t},null,8,["label","name"])}),128))]}),default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.asistenciaCurso.cabecera,function(t,n){return(0,o.uX)(),(0,o.Wv)(Fe,{key:n,class:"no-border tab-pane",name:n},{default:(0,o.k6)(function(){return[(0,o.bF)(we,{class:"my-sticky-column-table q-card",separator:"cell","max-style":"height: 70vh","row-key":"CURSOCOD",data:e.asistenciaCurso.info[n],columns:e.dataAsistenciaCurso.columns},{header:(0,o.k6)(function(t){return[(0,o.bF)(ye,null,{default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cols,function(a){return(0,o.uX)(),(0,o.Wv)(Se,{key:a.name,props:t,style:(0,s.Tr)({"text-decoration":e.feriados.indexOf(a.name)>=0?"line-through":"none"})},{default:(0,o.k6)(function(){return[a.fecha?((0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("span",null,(0,s.v_)(e.dateDia(a.label)),1),(0,o.Lk)("span",null,(0,s.v_)(e.dateCorta(a.label)),1)])):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"row justify-around items-center",style:(0,s.Tr)(a.style)},[(0,o.Lk)("span",null,(0,s.v_)(a.label),1),e.showTurno?((0,o.uX)(),(0,o.Wv)(re,{key:0,noBottom:"",type:"outlined",modelValue:e.turnoSelect,"onUpdate:modelValue":i[11]||(i[11]=function(i){return e.turnoSelect=i}),options:e.dataTurnos,label:"DESCRIPCION",val:"ID",placeholder:"Turno"},null,8,["modelValue","options"])):(0,o.Q3)("v-if",!0)],4))]}),_:2},1032,["props","style"])}),128))]}),_:2},1024)]}),body:(0,o.k6)(function(t){return[(0,o.bF)(ye,{props:t,class:(0,s.C4)({retirado:t.row.RETIRADO})},{default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cols,function(n){return(0,o.uX)(),(0,o.CE)(o.FK,null,[n.fecha?((0,o.uX)(),(0,o.Wv)(Le,{key:0},{default:(0,o.k6)(function(){return[t.row[n.name]?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[t.row[n.name]["coment"].length>0?((0,o.uX)(),(0,o.Wv)(Ae,{key:0,class:"comentario",name:"comment"},{default:(0,o.k6)(function(){return[(0,o.bF)(ke,null,{default:(0,o.k6)(function(){return[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.row[n.name]["coment"],function(i){return(0,o.uX)(),(0,o.CE)("div",I,[t.row[n.name]["inform"].length>1&&t.row[n.name]["coment"].length>1&&"T"==e.turnoSelect?((0,o.uX)(),(0,o.CE)("span",S,(0,s.v_)(e.objTurnos[i.turno])+":  ",1)):(0,o.Q3)("v-if",!0),"T"==e.turnoSelect||i.turno===e.turnoSelect?((0,o.uX)(),(0,o.CE)("span",y,(0,s.v_)(i.comentario),1)):(0,o.Q3)("v-if",!0)])}),256))]}),_:2},1024)]}),_:2},1024)):(0,o.Q3)("v-if",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.row[n.name]["inform"],function(l){return(0,o.uX)(),(0,o.CE)(o.FK,null,[!t.row[n.name]["inform"]||"T"!=e.turnoSelect&&l.TURNO!==e.turnoSelect?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,s.C4)(["row justify-center col q-mb-xs",{"cursor-pointer":e.validarJustificable(l)}]),onClick:function(i){return e.validarJustificable(l)?e.justificarCurso(l):null}},[l.JUSEST||0===l.JUSEST?((0,o.uX)(),(0,o.Wv)(Ae,{key:0,class:"justificacion",name:"done_all",color:e.justColor[l.JUSEST].color},{default:(0,o.k6)(function(){return[(0,o.bF)(ke,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",w,[i[30]||(i[30]=(0,o.Lk)("span",{class:"text-bold"},"Estado: ",-1)),(0,o.Lk)("span",null,(0,s.v_)(e.justColor[l.JUSEST].descripcion),1)]),2===l.JUSTEST?((0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("span",_,(0,s.v_)(e.labelMotivoRechazo)+": ",1),(0,o.Lk)("span",null,(0,s.v_)(l.RECHAZO_DETALLE),1)])):(0,o.Q3)("v-if",!0)]}),_:2},1024)]}),_:2},1032,["color"])):(0,o.Q3)("v-if",!0),(0,o.bF)(a,{class:"leyenda-icono leyenda-alto leyenda-icono-texto",style:(0,s.Tr)({"background-color":e.iconoColor[l.ESTADO]}),onClick:function(i){return e.justificarCurso(l)}},{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(e.iconoTipo[l.ESTADO]),1),(0,o.bF)(ke,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",R,[t.row[n.name]["inform"].length>1&&"T"==e.turnoSelect?((0,o.uX)(),(0,o.CE)("span",J,(0,s.v_)(e.objTurnos[l.TURNO])+":  ",1)):(0,o.Q3)("v-if",!0),(0,o.Lk)("span",null,(0,s.v_)(e.iconoDesc[l.ESTADO]),1)])]}),_:2},1024)]}),_:2},1032,["style","onClick"])],10,L))],64)}),256))],64)):(0,o.Q3)("v-if",!0)]}),_:2},1024)):((0,o.uX)(),(0,o.Wv)(Le,{key:1,style:(0,s.Tr)(n.style)},{default:(0,o.k6)(function(){return[(0,o.Lk)("span",null,(0,s.v_)(t.row[n.name]),1)]}),_:2},1032,["style"]))],64)}),256))]}),_:2},1032,["props","class"])]}),bottom:(0,o.k6)(function(){return[(0,o.Lk)("div",x,[(0,o.Lk)("div",U,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.estados,function(e){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:"q-ml-sm leyenda-icono leyenda-icono-texto",style:(0,s.Tr)({"background-color":e.COLORHEXF})},(0,s.v_)(e.ESTADOETI),5),(0,o.Lk)("div",X,(0,s.v_)(e.ESTADODES),1)],64)}),256))])])]}),_:1},8,["data","columns"])]}),_:2},1032,["name"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),(0,o.Q3)("v-if",!0)]}),_:1},8,["modelValue"]),(0,o.bF)(de,{class:"model-responsable",loading:e.modalLoad,modelValue:e.modalJustificacion,"onUpdate:modelValue":i[20]||(i[20]=function(i){return e.modalJustificacion=i}),title:e.tituloModal,footer:"A"!==e.estado&&!e.sieInfo.esEstudiante&&!e.bloqJustif,onSubmit:e.grabarJustificacion,ok:e.$t("botones.guardar")},{default:(0,o.k6)(function(){return[(0,o.bF)(Re,{ref:"formModal"},{default:(0,o.k6)(function(){return[e.bloqJustif?((0,o.uX)(),(0,o.CE)("div",j,[(0,o.Lk)("div",H,(0,s.v_)(e.labelMotivoRechazo)+": ",1),(0,o.Lk)("span",null,(0,s.v_)(e.dataModal.DETALLE_RECHAZO),1)])):(0,o.Q3)("v-if",!0),e.dataModal.FECHAS.length>1?((0,o.uX)(),(0,o.CE)("div",V,[i[31]||(i[31]=(0,o.Lk)("b",{style:{"font-size":"11px"}},"Fechas",-1)),(0,o.Lk)("div",Y,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.dataModal.FECHAS,function(i){return(0,o.uX)(),(0,o.Wv)(le,null,{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(""+e.sDate(i)),1)]}),_:2},1024)}),256))])])):(0,o.Q3)("v-if",!0),"R"!==e.estado||e.bloqJustif?((0,o.uX)(),(0,o.CE)("div",q,[(0,o.bF)(Me,{class:"q-ma-none",label:e.$t("justificacion"),"float-label":e.$t("justificacion"),type:"outlined","option-value":"SECUCOD","option-label":"SECUDES",modelValue:e.dataModal.TIPJUSCOD,"onUpdate:modelValue":i[16]||(i[16]=function(i){return e.dataModal.TIPJUSCOD=i}),options:e.justificacion,disable:e.sieInfo.esEstudiante||"A"===e.estado||e.bloqJustif||"P"===e.estado,rules:[e.required]},null,8,["label","float-label","modelValue","options","disable","rules"]),e.justificaMDias&&["A","P"].indexOf(e.estado)<0?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.bF)(we,{class:"my-sticky-column-table q-card q-my-md q-mx-xs","max-style":"height: 70vh",data:e.infoInjus,columns:e.columns,"hide-bottom":"","row-key":"ID_CONTROL",selection:"multiple",selected:e.listSelect,"onUpdate:selected":i[17]||(i[17]=function(i){return e.listSelect=i})},{body:(0,o.k6)(function(i){return[(0,o.bF)(ye,{props:i},{default:(0,o.k6)(function(){return[(0,o.bF)(Le,{"auto-width":""},{default:(0,o.k6)(function(){return[(0,o.bF)(_e,{color:"primary",modelValue:i.selected,"onUpdate:modelValue":function(e){return i.selected=e},disable:e.dataModal.FECHA==i.row.FECHA},null,8,["modelValue","onUpdate:modelValue","disable"])]}),_:2},1024),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cols,function(t){return(0,o.uX)(),(0,o.Wv)(Le,{key:t.name,props:i},{default:(0,o.k6)(function(){return["FECHA"==t.name?((0,o.uX)(),(0,o.CE)("span",Q,(0,s.v_)(e.dateLarga(t.value)),1)):((0,o.uX)(),(0,o.CE)("span",$,(0,s.v_)(t.value),1))]}),_:2},1032,["props"])}),128))]}),_:2},1032,["props"])]}),_:1},8,["data","columns","selected"])])):(0,o.Q3)("v-if",!0),(0,o.bF)(ce,{class:"q-if-outlined",type:"textarea",rows:"3",modelValue:e.dataModal.DETALLE,"onUpdate:modelValue":i[18]||(i[18]=function(i){return e.dataModal.DETALLE=i}),modelModifiers:{trim:!0},"float-label":e.$t("intranet.clase.contenidoDetalle")+"*",disable:e.sieInfo.esEstudiante||"A"===e.estado||e.bloqJustif||"P"===e.estado,rules:[e.required,e.maximoCaracteres]},null,8,["modelValue","float-label","disable","rules"]),e.dataModal.FECREG?((0,o.uX)(),(0,o.CE)("div",z,[(0,o.bF)(De,null,{default:(0,o.k6)(function(){return[(0,o.bF)(Ee,null,{default:(0,o.k6)(function(){return n()(i[32]||(i[32]=[(0,o.Lk)("b",null,"F. Justificación:",-1)]))}),_:1}),(0,o.bF)(be,null,{default:(0,o.k6)(function(){return[(0,o.bF)(le,null,{default:(0,o.k6)(function(){return[(0,o.eW)((0,s.v_)(""+e.fDate(e.dataModal.FECREG)),1)]}),_:1})]}),_:1})]}),_:1})])):(0,o.Q3)("v-if",!0)])):((0,o.uX)(),(0,o.CE)("div",N,[(0,o.Lk)("div",W,[(0,o.Lk)("div",B,(0,s.v_)(e.labelMotivoRechazo)+": ",1),(0,o.Lk)("span",null,(0,s.v_)(e.dataModal.DETALLE_RECHAZO),1)]),(0,o.bF)(ce,{class:"q-if-outlined",type:"textarea",rows:"3",modelValue:e.dataModal.DETALLE,"onUpdate:modelValue":i[19]||(i[19]=function(i){return e.dataModal.DETALLE=i}),modelModifiers:{trim:!0},"float-label":e.$t("intranet.clase.contenidoDetalle")+"*",disable:e.sieInfo.esEstudiante,rules:[e.maximoCaracteres]},null,8,["modelValue","float-label","disable","rules"])])),"P"===e.estado||"F"===e.estado?((0,o.uX)(),(0,o.CE)("div",K,[e.dataModal.RUTA?((0,o.uX)(),(0,o.CE)("div",Z,[(0,o.bF)(ge,{class:"no-border",highlight:""},{default:(0,o.k6)(function(){return[(0,o.bF)(De,{class:"q-pr-none"},{default:(0,o.k6)(function(){return[(0,o.bF)(Ee,{label:e.dataModal.NOMBRE_ARCHIVO},null,8,["label"]),(0,o.bF)(be,null,{default:(0,o.k6)(function(){return[(0,o.bo)(((0,o.uX)(),(0,o.CE)("a",null,[(0,o.bF)(Ae,{name:"file_download",color:"primary",size:"1.5rem"})])),[[xe,{filename:e.dataModal.NOMBRE_ARCHIVO,url:e.dataModal.URL}]])]}),_:1}),e.sieInfo.esEstudiante?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(be,{key:0,rigth:""},{default:(0,o.k6)(function(){return[(0,o.bF)(Ae,{name:"close",color:"red",size:"1.5rem",onClick:e.eliminaDocumento},null,8,["onClick"])]}),_:1}))]}),_:1})]}),_:1})])):((0,o.uX)(),(0,o.CE)("div",G,[e.sieInfo.esEstudiante?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(ue,{key:0,class:"no-wrap imagen",onUpload:e.added,botones:!1,icon:"wallpaper",src:e.imagen,allow:["jpg","png","jpeg","bmp","pdf","doc","docx","ppt","pptx","xls","xlsx","zip","rar"]},null,8,["onUpload","src"]))]))])):(0,o.Q3)("v-if",!0)]}),_:1},512)]}),_:1},8,["loading","modelValue","title","footer","onSubmit","ok"]),(0,o.bF)(de,{class:"model-responsable",loading:e.modalLoad,modelValue:e.modalJustificacionCurso,"onUpdate:modelValue":i[23]||(i[23]=function(i){return e.modalJustificacionCurso=i}),title:e.tituloModal,ok:e.$t("botones.guardar"),footer:(2===e.infoJustificacion.JUSEST||!e.infoJustificacion.JUSEST||0!==e.infoJustificacion.JUSEST)&&!e.sieInfo.esEstudiante,onSubmit:e.saveAsistenciaCJustificacion},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",ee,[(0,o.Lk)("div",ie,[(0,o.bF)(re,{type:"outlined",modelValue:e.infoJustificacion.TIPJUS,"onUpdate:modelValue":i[21]||(i[21]=function(i){return e.infoJustificacion.TIPJUS=i}),options:e.justificacion,label:"SECUDES",val:"SECUCOD",placeholder:e.$t("justificacion"),disable:e.sieInfo.esEstudiante||(e.infoJustificacion.JUSEST||0===e.infoJustificacion.JUSEST)&&2!==e.infoJustificacion.JUSEST},null,8,["modelValue","options","placeholder","disable"])])]),(0,o.Lk)("div",te,[(0,o.Lk)("div",ae,[(0,o.bF)(ce,{class:"q-if-outlined",type:"textarea",rows:"3","max-height":300,modelValue:e.infoJustificacion.DETALLE,"onUpdate:modelValue":i[22]||(i[22]=function(i){return e.infoJustificacion.DETALLE=i}),modelModifiers:{trim:!0},"float-label":e.$t("intranet.clase.contenidoDetalle")+"*",disable:e.sieInfo.esEstudiante||(e.infoJustificacion.JUSEST||0===e.infoJustificacion.JUSEST)&&2!==e.infoJustificacion.JUSEST},null,8,["modelValue","float-label","disable"])])]),e.sieInfo.esEstudiante?(0,o.Q3)("v-if",!0):((0,o.uX)(),(0,o.Wv)(ue,{key:0,class:"no-wrap imagen",onUpload:e.added,botones:!1,icon:"wallpaper",src:e.imagen,allow:["jpg","png","jpeg","bmp","pdf","doc","docx","ppt","pptx","xls","xlsx","zip","rar"]},null,8,["onUpload","src"]))]}),_:1},8,["loading","modelValue","title","ok","footer","onSubmit"]),(0,o.bF)(de,{class:"model-responsable",modelValue:e.modalComentario,"onUpdate:modelValue":i[25]||(i[25]=function(i){return e.modalComentario=i}),title:"Comentario de Asistencia",footer:!1},{default:(0,o.k6)(function(){return[(0,o.Lk)("div",ne,[(0,o.bF)(ge,{class:"no-border",highlight:""},{default:(0,o.k6)(function(){return[(0,o.bF)(De,{class:"q-pr-none"},{default:(0,o.k6)(function(){return[(0,o.bF)(Ee,null,{default:(0,o.k6)(function(){return[(0,o.Lk)("div",oe,[i[33]||(i[33]=(0,o.Lk)("b",null,"Fecha:",-1)),(0,o.Lk)("span",null,(0,s.v_)(e.dateCorta(""+e.infoComentario.FECHA)),1)])]}),_:1})]}),_:1}),(0,o.bF)(De,{class:"q-pr-none"},{default:(0,o.k6)(function(){return[(0,o.bF)(ce,{type:"textarea",modelValue:e.infoComentario.TEXTO,"onUpdate:modelValue":i[24]||(i[24]=function(i){return e.infoComentario.TEXTO=i}),readonly:"","float-label":"Comentario"},null,8,["modelValue"])]}),_:1})]}),_:1})])]}),_:1},8,["modelValue"])],64))],64)):((0,o.uX)(),(0,o.CE)("div",se,[(0,o.bF)(me,{subtitle:"mensajes.m0014",icon:"person"})]))]}),_:1})}var re=t(99550),ce=t.n(re),ue=t(57008),de=t.n(ue),fe=t(76080),pe=t.n(fe),me=t(45254),he=t.n(me),Ce=(t(74260),t(23825),t(52133),t(10239),t(89571),t(50310),t(32203),t(90095),t(6724),t(515),t(83190),t(27153),t(76921),t(13600),t(52776),t(37406),t(84433),t(44264),t(66307),t(81813),t(13715),t(24066),t(6123)),be=t(30545),Ee=t(16648),Ae=t(39893),ve=t(92173),ke=t(51082),De=t(80340),ge=t(81288),Oe=t(57668),Te=t(80660),Fe=t(30640),Ie=t(59089),Se=t(93616),ye=t(982),Le=t(33950),we=t(19434),Me={defaultOption:function(){return[{label:"Colegio",value:"A"},{label:"Curso",value:"C"}]},getAsistencias:function(e){return Te.$http.get("api/HyoAsistenciacurso/obtAsistencias",{params:{alucod:e}})},getAsistenciasTalleres:function(e){return Te.$http.get("api/HyoTalleres/obtAsistencias",{params:{alucod:e}})},getAsistenciasConfig:function(){return Te.$http.get("api/HyoAsistenciacurso/getConfig")}},_e=t(6583),Re=t(99637),Je=t(18105),xe=t(33001),Ue=t(13813),Xe=t(10452),je=t(66469),He={getLabelRechazado:function(){var e="Rechazado";switch((0,Oe["default"])().colcod){case"0500":case"0098":e="Justificación no autorizada";break}return e},getLabelMotivoRechazo:function(){var e="Detalle Rechazo";switch((0,Oe["default"])().colcod){case"0500":case"0098":e="Motivo no autorizado";break}return e}},Ve=t(78786),Ye=t(9736),qe=t(2739),Pe={components:{QForm:qe.A,QTable:be.A,QSelect:Ee.A,sieSelect:Se.A,sieModal:Fe.A,sieUpload:Ie.A,QCheckbox:Ce.vZ,QTabs:Ce.uw,QTab:Ce.zu,QTabPane:Ce.dg,QRouteTab:Ce.Eh,QChip:Ce.wQ,QInnerLoading:Ce.SQ,QSpinnerOval:Ce.VA,sieEstudiantes:ve.Ay,sieVacio:De.A,sieDate:ke.A,QInput:Ye.A,QTd:Ce.Ef,QTr:Ce.qh,QTh:Ce.EJ,QPageSticky:Ce._U,QFab:Ce.l6,QFabAction:Ce.B$,QPage:Ce.Tu,QBtn:Ce.Il,QList:Ce.Mb,QListHeader:Ce.XR,QItem:Ce.H0,QItemSide:Ce.n1,QItemMain:Ce.mF,QIcon:Ce.bP,QItemTile:Ce.lp,QTooltip:Ce.nC},directives:{download:we.A},data:function(){return{file$:null,listAsistencia:[],periodos:[],control:[],labels:[{id:1,descripcion:"Periodo 1",label:"I Periodo"},{id:2,descripcion:"Periodo 2",label:"II Periodo"},{id:3,descripcion:"Periodo 3",label:"III Periodo"},{id:4,descripcion:"Periodo 4",label:"IV Periodo"}],detalleAdicional:{},sieInfo:(0,Oe["default"])(),showInfoRegistro:!1,acceso:(0,Oe["default"])().ruta.nivel>=2,isEstudiante:(0,Oe["default"])().esEstudiante,vacio:!0,selectedTab:"1",nemo:null,tabCursoPrimero:"",selectTipo:"",tipoAsistencia:[{label:"Inasistencia",value:"W"},{label:"Tardanza",value:"X"}],nocursos:!0,visible:!1,alucod:null,modalJustificacion:!1,justificacion:[],estado:"",TIPJUSCOD:"",DETALLE:"",imagen:"",tituloModal:"",currentItem:{},dataModal:{TIPJUSCOD:"",DETALLE:"",FECHAS:[]},mesCierre:null,modalLoad:!1,eliminar:!1,title:"Anticipar Asistencia",ver:["0015"].indexOf((0,Oe["default"])().colcod)>=0,options:Me.defaultOption(),option:"A",fechaA:null,listaAsisCursosTemp:[],listaAsisTalleresTemp:[],diasAsisCursoTemp:[],diasAsisTalleresTemp:[],asistenciaCurso:{},tabSelectCurso:1,dataAsistenciaCurso:{},dataSeleccionada:[],listSelect:[],iconoColor:{},iconoTipo:{},iconoDesc:{},estados:[],showCurso:!1,modalEnviar:!1,listSemanas:{},semana:{},indiceSemana:null,modalComentario:!1,infoComentario:{},cargaAnterior:!1,showTurno:!1,dataTurnos:[{ID:"T",DESCRIPCION:"Todos"}],turnoSelect:"T",objTurnos:{},justificaCurso:!1,estadosJustificar:["F","R"],justificaMDias:!1,showI:!1,showS:!1,columns:[{name:"FECHA",label:this.$t("fecha"),align:"left",field:"FECHA"},{name:"DESCR",label:this.$t("estado"),align:"left",field:"DESCR"}],justColor:[{color:"warning",descripcion:"En revisión"},{color:"positive",descripcion:"Aprobado"},{color:"negative",descripcion:He.getLabelRechazado()}],labelMotivoRechazo:He.getLabelMotivoRechazo(),modalJustificacionCurso:!1,infoJustificacion:{},infoAlumno:{},configAsistencia:{},configuracion:{},isAnticipada:!1,alto:"",modalAnticip:!1,fechasPercales:{},fechasAnticipo:[],infoAnticipo:{fecha:null,arrFechas:[],add:!1,justificacion:null,detalle:null,tipoAsistencia:null},feriados:[],feriadosBase:[],isDirecto:!1}},computed:{bloqJustif:function(){return this.configuracion["B_JUSTIF"]&&"R"===this.estado},isLess:function(){return(0,ge.isLess)()},infoInjus:function(){var e=this,i=[];return Object.keys(this.listAsistencia[this.selectedTab]).forEach(function(t){e.listAsistencia[e.selectedTab][t].forEach(function(t){"S"===t.JUSTIFICA.trim()&&["A","P"].indexOf(t.ESTJUS)<0&&t.ESTADOCOD===e.dataModal.ESTADOCOD&&e.validarFecha(t)&&i.push(t)})}),i},diasAsis:function(){var e=[];return"C"===this.option&&(e=this.diasAsisCursoTemp),"T"===this.option&&(e=this.diasAsisTalleresTemp),e},listaAsis:function(){var e=[],i=(0,Je.Ay)(this.fechaA,"DD/MM/YYYY");return i&&("C"===this.option&&(e=this.listaAsisCursosTemp),"T"===this.option&&(e=this.listaAsisTalleresTemp),e=(0,xe.filterArray)(i,{field:"FECHA",list:e})),e},fechasEditadas:function(){var e=[];return this.infoAnticipo.arrFechas.forEach(function(i){e.push((0,Je.Ay)(i,"YYYY/MM/DD"))}),e}},methods:{required:Ae.required,getAsistencia:function(e){var i=this;return he()(pe()().m(function t(){var a,n,o,s,l;return pe()().w(function(t){while(1)switch(t.n){case 0:return a={alucod:e},t.n=1,Te.$http.get("api/HyoHorasis/obtAsistenciasNew",{params:a});case 1:return n=t.v,o={},(0,Re["default"])(n,function(e,i){o.hasOwnProperty(e.BIMECOD)||(o[e.BIMECOD]={BIMECOD:e.BIMECOD,PERIODO:"Periodo "+e.BIMECOD,PERICIE:e.PERICIE,TAB:"Tab-"+e.BIMECOD})}),s={},l=He.getLabelRechazado(),(0,Re["default"])(n,function(e,i){var t=new Date(e.FECHA),a=Ce.p6.formatDate(t,"MMMM YYYY");if(Object.prototype.hasOwnProperty.call(e,"ESTJUS"))switch(e.ESTJUS){case"P":e.ICONO="error",e.COLOR="amber",e.TOOLTIP="pendiente";break;case"A":e.ICONO="check_circle",e.COLOR="green",e.TOOLTIP="justificado";break;case"R":e.ICONO="check_circle",e.COLOR="red-6",e.TOOLTIP=l;break;default:e.ICONO="check_circle",e.COLOR="deep-orange-14",e.TOOLTIP="editorhtml.justifyFull",e.ESTJUS="F";break}s.hasOwnProperty(e.BIMECOD)&&0!==s.length?s[e.BIMECOD].hasOwnProperty(a)?s[e.BIMECOD][a].push(e):s[e.BIMECOD][a]=[e]:(s[e.BIMECOD]={},s[e.BIMECOD][a]=[e])}),i.listAsistencia=s,i.periodos=o,t.a(2,[o])}},t)}))()},loadControl:function(){var e=this;return he()(pe()().m(function i(){var t,a,n;return pe()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,Te.$http.get("api/HyoHorasisEstado/listarHorasisEstado");case 1:t=i.v,a=t.json,n=(0,Ue["default"])(a,function(e){return{id:e.ESTADOETI,descripcion:e.ESTADODES,color:e.COLORVUE}}),e.control=n;case 2:return i.a(2)}},i)}))()},maximoCaracteres:function(e){return(0,Ae.maxCaracteres)(e,450)},dateNum:function(e){var i=new Date(e);return i=Ce.p6.formatDate(i,"DD"),i},dateDia:function(e){var i=new Date(e);return i=Ce.p6.formatDate(i,"ddd"),i},dateF:Je.Ay,dateCorta:function(e){var i=new Date(e);return i=Ce.p6.formatDate(i,"DD/MM"),i},dateLarga:function(e){var i=new Date(e);return i=Ce.p6.formatDate(i,"DD/MM/YYYY"),i},detalleData:function(e){var i=e.FECHA,t=(0,Je.Ay)(i,"DD/MM");return this.detalleAdicional[t]},validarFecha:function(e){var i=e.FECHA,t=new Date(i).getMonth()+1,a=this.mesCierre||0;return t>a},addFecha:function(){this.infoAnticipo.add=!0;var e=new Date,i=this.dispAnticip(e);while(!i)e.setDate(e.getDate()+1),i=this.dispAnticip(e);this.infoAnticipo.fecha=e},addFechaClose:function(e){this.infoAnticipo.add=!1,e&&this.infoAnticipo.arrFechas.push(this.infoAnticipo.fecha)},dispAnticip:function(e){var i=(0,Je.Ay)(e,"YYYY/MM/DD");return(0,Ve["default"])(this.fechasAnticipo,i)>=0&&(0,Ve["default"])(this.feriados,i)<0&&(0,Ve["default"])(this.fechasEditadas,i)<0},delFecha:function(e){this.infoAnticipo.arrFechas.splice(e,1)},handleResize:function(){this.alto=window.innerHeight-305},fDate:function(e){return(0,Je.Ay)(e,"DD MMMM YYYY hh:mm:ss aa")},sDate:function(e){return(0,Je.Ay)(e,"DD/MM/YY")},mostrarComentario:function(e){this.modalComentario=!0,this.infoComentario=e},seleccionaSemana:function(e){this.semana=e},enviarResumen:function(){var e=de()({},this.semana);e.fechaIni=null,e.fechaFin=null,e.alucod=this.alucod,Te.$http.post("api/HyoAsistencia/sendAsistenciaCursoResumen",e).then(function(e){e.json})},grabarJustificacion:function(){var e=this;return he()(pe()().m(function i(){var t,a,n,o;return pe()().w(function(i){while(1)switch(i.n){case 0:return i.n=1,e.$refs.formModal.validate();case 1:if(t=i.v,t){i.n=2;break}return(0,ye["default"])("Complete los campos requeridos","error"),i.a(2,!1);case 2:if(a=de()({},e.dataModal),a.porDia=e.configuracion["J_DIA"],e.listSelect.length>1?a.listFechas=(0,Ue["default"])(e.listSelect,function(e){var i=e.ID_CONTROL;return i}):a.FECHA=e.listSelect[0].ID_CONTROL,!e.file$){i.n=4;break}if(a.nombreTemporal=e.file$.name,a.ARCHIVO=e.file$.originalFilename.replace(/ /g,"_"),n=a.ARCHIVO.length,!(n>100)){i.n=3;break}return(0,ye["default"])("El nombre del archivo es demasiado largo","warning"),i.a(2,!1);case 3:i.n=6;break;case 4:if(!e.configuracion["A_OPCIONAL"]&&"R"!==e.estado){i.n=5;break}i.n=6;break;case 5:return(0,ye["default"])("Seleccione un archivo","warning"),i.a(2,!1);case 6:o=e.configuracion["J_DIA"]?Te.$http.post("api/HyoJustificacionasistencias/saveDiaDia",{data:a}):Te.$http.post("api/HyoJustificacionasistencias/grabaInformacion",{data:a}),o.then(function(i){i.json;return e.file$=null,e.modalJustificacion=!1,e.getAsistencia(a.ALUCOD)}).then(function(i){if(e.eliminar){var t={alucod:a.ALUCOD,fecha:e.dataModal.FECHA,nemo:a.NEMO};return Te.$http.post("api/HyoWjustifica/eliminaDocumento",t)}return!0}).then(function(i){i&&(e.eliminar=!1),(0,ye["default"])(e.$t("mensajes.m0064"))}).catch(function(i){(0,ye["default"])(e.$t("mensajes.m0089","error"))});case 7:return i.a(2)}},i)}))()},eliminaDocumento:function(){this.eliminar=!0,this.dataModal.ARCHIVO=null,this.dataModal.URL=null,this.dataModal.RUTA=null},added:function(e){var i=this,t=ce()(e,1),a=t[0],n=(0,Le.Basic)({url:"api/HyoArchivo/tmp/upload",file:a,onProgress:function(e,i){}});this.modalLoad=!0,n.then(function(e){var t=e.result.files.file;i.file$=t[0],i.modalLoad=!1}).catch(function(e){i.modalLoad=!1,(0,ye["default"])("error al subir archivo","error")})},validaAsistencia:function(e,i,t){var a=this;return he()(pe()().m(function n(){var o;return pe()().w(function(n){while(1)switch(n.n){case 0:if(!i||"F"!==e.ESTJUS){n.n=1;break}return(0,ye["default"])("No se puede justificar cuando el periodo está cerrado.","warning"),t.stopPropagation(),n.a(2);case 1:a.listSelect=[e],a.tituloModal=e.DESCR+" "+(0,Je.Ay)(e.FECHA,"DD/MM/YYYY"),"F"!==e.ESTJUS?(o={ID:e.ID},Te.$http.get("api/HyoJustificacionasistencias/obtDatosJustificacion",{params:o}).then(function(e){e&&(e.URL=a.sieInfo.url+"/".concat(Te.API_LMS,"/api/HyoJustificacionasistencias/descargar/")+e.ID+"?access_token="+a.sieInfo.token,a.dataModal=e,a.estado=e.ESTADO.trim()),a.modalJustificacion=!0})):(a.dataModal={TIPJUSCOD:"",DETALLE:"",FECHAS:[],ALUCOD:e.ALUCOD,FECHA:e.FECHA,NEMO:e.NEMO,ESTADOCOD:e.ESTADOCOD},a.estado="F",a.modalJustificacion=!0);case 2:return n.a(2)}},n)}))()},selectAlumno:function(e){this.infoAlumno=e,this.loadAsistencia(e)},loadAsistencia:function(e){var i=this;return he()(pe()().m(function t(){var a,o,s,l;return pe()().w(function(t){while(1)switch(t.n){case 0:return t.n=1,i.$http.get("api/JustificacionController/getJustificacion",{params:{params:{nemo:e.NEMO}}});case 1:return a=t.v,o=a.MESCOD,i.mesCierre=parseInt(o),t.n=2,i.$http.get("api/HorasisDetalleController/getHorasisDetalle",{params:{parametros:{ALUCOD:e.ALUCOD,NEMO:e.NEMO}}});case 2:i.detalleAdicional=t.v,s="005"===i.sieInfo.tipcod?i.sieInfo.alucod:i.alucod,i.nemo=e.NEMO,l=function(){if(i.showCurso){var t={alucod:s,nemo:e.NEMO||null,instrucod:e.INSTRUCOD||null,gradocod:e.GRADOCOD||null,justificacion:i.justificaCurso};Promise.all([Te.$http.get("api/HyoHorasisEstado/listarHorasisEstado",{params:{momento:2}}),Te.$http.get("api/HyoAsistenciacurso/obtAsistenciaCursoGeneral",{params:t}),Te.$http.get("api/HyoPercales/devolverHorarioSemanas",{params:t})]).then(function(e){i.listSemanas=e[2].json;var t=Object.keys(e[1].json.cabecera);t=t.map(function(e){return parseInt(e)}),t=Math.max.apply(Math,n()(t)),i.tabSelectCurso=t.toString(),i.asistenciaCurso=e[1].json,i.nocursos=!Object.keys(e[1].json.info).length>0,i.estados=e[0].json,e[0].json.forEach(function(e){i.iconoColor[e.ESTADOCOD]=e.COLORHEXF,i.iconoTipo[e.ESTADOCOD]=e.ESTADOETI,i.iconoDesc[e.ESTADOCOD]=e.ESTADODES})})}i.getAsistencia(s).then(function(e){Object.keys(i.listAsistencia).length>0?i.vacio=!1:i.vacio=!0;var t=Object.keys(i.periodos);t=t.map(function(e){return parseInt(e)}),t=Math.max.apply(Math,n()(t)),i.selectedTab=t.toString()}),Te.$http.get("api/HyoPercales/getCalendarioPeriodos",{params:{nemo:e.NEMO}}).then(function(e){i.fechasPercales=e}),i.ver&&(i.options=Me.defaultOption(),i.option="A",i.fechaA=null,i.diasAsisCursoTemp=[],i.diasAsisTalleresTemp=[],Me.getAsistencias(s).then(function(e){var t=(0,_e["default"])(e);if(t.length>0){i.vacio=!1,i.listaAsisCursosTemp=(0,Ue["default"])(t,function(e){return e.FECHA=(0,Je.Ay)(e.FECHA,"DD/MM/YYYY"),e}),i.options.push({label:"Cursos",value:"C"});var a=[];(0,Re["default"])(t,function(e){(0===a.length||a.indexOf(e.FECHA)<0)&&a.push(e.FECHA)}),i.diasAsisCursoTemp=a}}),Me.getAsistenciasTalleres(s).then(function(e){var t=(0,_e["default"])(e);if(t.length>0){i.vacio=!1,i.listaAsisTalleresTemp=(0,Ue["default"])(t,function(e){return e.FECHA=(0,Je.Ay)(e.FECHA,"DD/MM/YYYY"),e}),i.options.push({label:"Talleres",value:"T"});var a=[];(0,Re["default"])(t,function(e){(0===a.length||a.indexOf(e.FECHA)<0)&&a.push(e.FECHA)}),i.diasAsisTalleresTemp=a}}))},i.cargaAnterior?l():Te.$http.get("api/HyoUsumenu/obtEstadoMenu",{params:{url:"intranet.asistenciaCursoNew"}}).then(function(e){var t=e.json;i.cargaAnterior=!0,i.showCurso=!!i.configuracion["OCULTAR_CURSO"]&&t,l()});case 3:return t.a(2)}},t)}))()},getColor:function(e){var i=this.control.find(function(i){return i.descripcion.toLowerCase()===e.toLowerCase()}),t=i?new RegExp(i.descripcion.toLowerCase()):new RegExp("");if(t.test(e.toLowerCase()))return i?i.color:"#FFFFFF"},getLabel:function(e){var i=this.control.find(function(i){return i.descripcion.toLowerCase()===e.toLowerCase()}),t=i?new RegExp(i.descripcion.toLowerCase()):new RegExp("");if(t.test(e.toLowerCase()))return i?i.id:""},getPeriodo:function(e){var i=this.labels.find(function(i){return i.descripcion===e.toString()}),t=i?new RegExp(i.descripcion):new RegExp("");if(t.test(e))return i?i.label:""},diasDispo:function(e){var i=(0,Je.Ay)(e,"DD/MM/YYYY"),t=this.diasAsis.indexOf(i)>=0;return t},initFecha:function(){var e=null,i=n()(this.diasAsisCursoTemp),t=n()(this.diasAsisTalleresTemp);"C"===this.option&&i.length>0&&(e=(0,Xe._x)(i.pop(),"DD/MM/YYYY")),"T"===this.option&&t.length>0&&(e=(0,Xe._x)(t.pop(),"DD/MM/YYYY")),this.fechaA=e},errorLabel:function(e){return this.$t((0,je["default"])(e))},maxLength:function(){if(this.dataModal.DETALLE&&this.dataModal.DETALLE.length>450)return this.dataModal.DETALLE=this.dataModal.DETALLE.substr(0,450),!1},generarCabecera:function(e){this.feriados=this.asistenciaCurso.cabecera[e]?this.asistenciaCurso.cabecera[e].feriados:[];var i={columns:[{name:"CURSONOM",field:"CURSONOM",align:"left",label:this.$t("curso"),style:"min-width: 250px; font-size: 11px;"}]};this.asistenciaCurso.cabecera[e]&&this.asistenciaCurso.cabecera[e].diasDisp.forEach(function(e){i.columns.push({name:e,field:e,align:"center",label:e,fecha:!0})}),i.data=this.asistenciaCurso.info[e],this.dataAsistenciaCurso=i},justificarCurso:function(e){this.estadosJustificar.indexOf(e.ESTADO)>=0&&this.acceso&&(this.modalJustificacionCurso=!0,this.infoJustificacion=e,this.info={},this.tituloModal=this.iconoDesc[e.ESTADO])},saveAsistenciaCJustificacion:function(){var e=this;if(this.infoJustificacion.DETALLE&&0!==this.infoJustificacion.DETALLE.length)if(this.infoJustificacion.TIPJUS)if(this.configAsistencia.ADJUNTO_OBLIGATORIO&&(!this.file$||this.file$&&0===Object.keys(this.file$))&&!this.configuracion["A_OPCIONAL"])(0,ye["default"])("Debe adjuntar un Archivo","error");else{var i={info:this.infoJustificacion};this.configAsistencia.ADJUNTO_OBLIGATORIO&&(i.archivo=this.file$),Te.$http.post("api/HyoJustificacursos/saveJustificacion",i).then(function(i){var t=i.json;"yes"===t?(e.infoJustificacion.JUSEST=0,e.modalJustificacionCurso=!1,e.info={},e.loadAsistencia(e.infoAlumno),(0,ye["default"])("Se guardó correctamente la justificacion.")):(0,ye["default"])("No se pudó guardar la justificacion, intente nuevamente.","error")})}else(0,ye["default"])("Debe colocar un Tipo","error");else(0,ye["default"])("Debe colocar un Detalle","error")},validarJustificable:function(e){return this.estadosJustificar.indexOf(e.ESTADO)>=0&&this.acceso&&[0,1].indexOf(e.JUSEST)<0&&this.justificaCurso},openModalAddJus:function(e){var i=this,t=e,a=[];if(!(this.fechasPercales[t].indexOf((0,Je.Ay)(new Date,"YYYY/MM/DD"))>=0))return this.openModalAddJus((parseInt(t)+1).toString()),!1;a=n()(this.fechasPercales[t]);var o=[];this.listAsistencia[t]>0&&Object.keys(this.listAsistencia[t]).forEach(function(e){i.listAsistencia[t][e].forEach(function(e){var i=e.FECHA;a.indexOf((0,Je.Ay)(i,"YYYY/MM/DD"))>=0&&o.indexOf(a.indexOf((0,Je.Ay)(i,"YYYY/MM/DD")))<0&&o.push(a.indexOf((0,Je.Ay)(i,"YYYY/MM/DD")))})}),o.forEach(function(e){a.splice(e,1)}),this.fechasAnticipo=a,this.infoAnticipo={fecha:"",arrFechas:[],add:!1,justificacion:null,detalle:null,tipoAsistencia:null,alucod:this.alucod,nemo:this.nemo},this.modalAnticip=!0},grabarAnticipo:function(){var e=this;if(0===this.infoAnticipo.arrFechas.length)return(0,ye["default"])("Debe seleccionar al menos una fecha","error"),!1;if(!this.infoAnticipo.justificacion)return(0,ye["default"])("Debe seleccionar un motivo","error"),!1;if(!this.infoAnticipo.tipoAsistencia)return(0,ye["default"])("Debe seleccionar un tipo de asistencia","error"),!1;if(!this.infoAnticipo.detalle)return(0,ye["default"])("Debe llenar el detalle","error"),!1;var i={TIPJUSCOD:this.infoAnticipo.justificacion,ASISTENCIA:this.infoAnticipo.tipoAsistencia,listaFechas:this.infoAnticipo.arrFechas,NEMO:this.nemo,ALUCOD:this.alucod,DETALLE:this.infoAnticipo.detalle,ESTADOCOD:"X"===this.infoAnticipo.tipoAsistencia?"R":"F"};if(this.file$)i.nombreTemporal=this.file$.name,i.ARCHIVO=this.file$.originalFilename.replace(/ /g,"_");else if(!this.configuracion["A_OPCIONAL"])return(0,ye["default"])("Debe subir un archivo","error"),!1;Te.$http.post("api/HyoJustificacionasistencias/saveJustificacionAnticipada",{data:i}).then(function(t){"Ok"===t.json&&(i.listFechas=t.fechas,Te.$http.post("api/HyoJustificacionasistencias/grabaInformacion",{data:i}).then(function(t){var a=t.json;"Ok"===a&&(e.file$=null,e.infoAnticipo={fecha:new Date,arrFechas:[],add:!1,justificacion:null,detalle:null,tipoAsistencia:null},e.modalAnticip=!1,e.getAsistencia(i.ALUCOD))}))})}},created:function(){var e=this;return he()(pe()().m(function i(){var t,a;return pe()().w(function(i){while(1)switch(i.n){case 0:a=(0,Oe["default"])().colcod,i.n="0331"===a?1:2;break;case 1:return e.title="Justificación Anticipada",i.a(3,2);case 2:return window.addEventListener("resize",e.handleResize),e.handleResize(),i.n=3,Te.$http.get("api/HyoFeriados/obtFeriados");case 3:return e.feriadosBase=i.v,e.feriadosBase.json.forEach(function(i){e.feriados.push((0,Je.Ay)(i.FECFER,"YYYY/MM/DD"))}),i.n=4,Te.$http.get("api/HyoConfigurajustificaciones/getJustificaciones",{params:{agrupado:!0}});case 4:return e.configuracion=i.v,e.tabCursoPrimero=e.configuracion["PRIMER_REGISTRO"],e.selectTipo=e.configuracion["PRIMER_REGISTRO"]?"C":"S",e.justificaMDias=e.configuracion["J_VDIAS"],e.showInfoRegistro=e.configuracion["VER_IS"],e.showI=e.configuracion["VER_I"]&&e.configuracion["VER_IS"],e.showS=e.configuracion["VER_S"]&&e.configuracion["VER_IS"],e.isAnticipada=(e.sieInfo.esFamilia||e.sieInfo.esOtros)&&e.configuracion["ANTICIPADO"]&&e.acceso,e.isDirecto=(e.sieInfo.esFamilia||e.sieInfo.esOtros)&&e.configuracion["DETALLE_DIRECTO"],Te.$http.get("api/HyoAturno/obtTurnos").then(function(i){var t=i.json;t.length>1&&(e.showTurno=!0,t.forEach(function(i){e.dataTurnos.push(i),e.objTurnos[i.ID]=i.DESCRIPCION}))}),Te.$http.get("api/HyoControl/obtCodigoActualPorCampo",{params:{campo:"jcurso"}}).then(function(i){var t=i.json;e.justificaCurso="1"===t}),"005"===e.sieInfo.tipcod&&(e.alucod=e.sieInfo.alucod,Te.$http.get("api/HyoSalonal/obtSalonAlumno",{params:{alucod:e.sieInfo.alucod}}).then(function(i){var t=i.json;e.loadAsistencia(t)})),i.n=5,e.loadControl();case 5:return t={princods:["tJustificacion"],objOrden:{campos:"SECUDES",orden:"asc"}},Te.$http.get("api/HyoTablaSe/obtArrayDatos",{params:t}).then(function(i){var t=i.json.tJustificacion;e.justificacion=t}),i.n=6,Me.getAsistenciasConfig();case 6:e.configAsistencia=i.v;case 7:return i.a(2)}},i)}))()},unmounted:function(){window.removeEventListener("resize",this.handleResize)},watch:{tabSelectCurso:function(e){this.generarCabecera(e)}}},Qe=t(12807);const $e=(0,Qe.A)(Pe,[["render",le]]);var ze=$e}}]);