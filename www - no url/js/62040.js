"use strict";(self["webpackChunklms"]=self["webpackChunklms"]||[]).push([[62040],{62040:function(e,l,t){t.r(l),t.d(l,{default:function(){return fe}});var o=t(8445),a=t.n(o),n=(t(71225),t(50310),t(5962),t(83190),t(61758)),i=t(58790),r={class:"column q-pa-sm"},s={class:"q-gutter-sm"},u={class:"row q-gutter-sm"},c={class:"row q-gutter-sm"},d={class:"row q-gutter-sm"},f={class:"row wrap"},p={class:"row q-gutter-sm"},m={class:"row q-gutter-sm"},h={class:"q-ma-sm"},b={class:"q-ma-xs"},O={class:"q-card q-mt-sm"},I={class:"row"},v={class:"row"},F={class:"row col"},E={key:0},D={class:"row col justify-center"},C={class:"row col justify-end"},T={class:"column"},k={class:"row"},g={class:"row wrap"},A={class:"column"},S={key:0};function M(e,l){var t=(0,n.g2)("q-input1"),o=(0,n.g2)("q-chip"),M=(0,n.g2)("sie-modal"),V=(0,n.g2)("q-item-side"),N=(0,n.g2)("q-item-main"),_=(0,n.g2)("q-item"),w=(0,n.g2)("q-checkbox"),y=(0,n.g2)("q-item-separator"),R=(0,n.g2)("q-scroll-area"),q=(0,n.g2)("q-list"),Q=(0,n.g2)("q-input"),P=(0,n.g2)("reportes"),L=(0,n.g2)("header-btn"),H=(0,n.g2)("q-select"),J=(0,n.g2)("q-search"),U=(0,n.g2)("q-datetime"),X=(0,n.g2)("q-btn"),Y=(0,n.g2)("q-download-file"),j=(0,n.g2)("q-td"),x=(0,n.g2)("q-tooltip"),W=(0,n.g2)("q-table"),$=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)($,{class:"column q-pa-md"},{default:(0,n.k6)(function(){return[(0,n.bF)(M,{class:"modal-detalles",modelValue:e.modalDetalle,"onUpdate:modelValue":l[7]||(l[7]=function(l){return e.modalDetalle=l}),title:"Detalle Justificación",footer:!1},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",r,[(0,n.Lk)("div",s,[(0,n.Lk)("div",u,[(0,n.bF)(t,{class:"col",modelValue:e.infoDetalle.NOMCOMP,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.infoDetalle.NOMCOMP=l}),label:"Personal",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",c,[(0,n.bF)(t,{class:"col",modelValue:e.infoDetalle.FH_REGISTRO,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.infoDetalle.FH_REGISTRO=l}),label:"Fecha de Registro",readonly:""},null,8,["modelValue"]),e.infoDetalle.ESTADOINFO?((0,n.uX)(),(0,n.Wv)(t,{key:0,class:"col",style:(0,i.Tr)({"background-color":e.infoDetalle.ESTADOINFO.color}),modelValue:e.infoDetalle.ESTADOINFO.titulo,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.infoDetalle.ESTADOINFO.titulo=l}),label:"Estado",readonly:""},null,8,["style","modelValue"])):(0,n.Q3)("v-if",!0)]),(0,n.Lk)("div",d,[(0,n.bF)(t,{class:"col",modelValue:e.infoDetalle.TIPO,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.infoDetalle.TIPO=l}),label:"Tipo",readonly:""},null,8,["modelValue"]),(0,n.bF)(t,{class:"col",modelValue:e.infoDetalle.MOTIVO,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.infoDetalle.MOTIVO=l}),label:"Motivo",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",f,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.infoDetalle.FECHAS,function(l,t){return(0,n.uX)(),(0,n.CE)(n.FK,null,[t<5&&e.infoDetalle.FECHAS.length>6||6===e.infoDetalle.FECHAS.length||e.infoDetalle.FECHAS.length<=5?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"shadow-1 chipUnico",color:"secondary",dense:""},{default:(0,n.k6)(function(){return[(0,n.eW)((0,i.v_)(e.date(l.FECHA,"DD/MM")),1)]}),_:2},1024)):(0,n.Q3)("v-if",!0)],64)}),256))]),(0,n.Lk)("div",p,[(0,n.bF)(t,{class:"col",modelValue:e.infoDetalle.COMENTARIO,"onUpdate:modelValue":l[5]||(l[5]=function(l){return e.infoDetalle.COMENTARIO=l}),label:"Comentario",type:"textarea",readonly:""},null,8,["modelValue"])]),(0,n.Lk)("div",m,[e.infoDetalle.COMENTARIO_MODIFICACION?((0,n.uX)(),(0,n.Wv)(t,{key:0,class:"col",modelValue:e.infoDetalle.COMENTARIO_MODIFICACION,"onUpdate:modelValue":l[6]||(l[6]=function(l){return e.infoDetalle.COMENTARIO_MODIFICACION=l}),label:"Comentario de Modificación",type:"textarea",readonly:""},null,8,["modelValue"])):(0,n.Q3)("v-if",!0)])])])]}),_:1},8,["modelValue"]),(0,n.bF)(M,{modelValue:e.modalNotificaciones,"onUpdate:modelValue":l[8]||(l[8]=function(l){return e.modalNotificaciones=l}),title:"Configurar Notificaciones",onSubmit:e.grabarNotificacion},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",h,[(0,n.bF)(q,{class:"q-ma-sm"},{default:(0,n.k6)(function(){return[(0,n.bF)(_,{class:"q-list-header text-primary"},{default:(0,n.k6)(function(){return[(0,n.bF)(V,{class:"text-primary"},{default:(0,n.k6)(function(){return a()(l[18]||(l[18]=[(0,n.Lk)("span",null,"Estado",-1)]))}),_:1}),(0,n.bF)(N,null,{default:(0,n.k6)(function(){return a()(l[19]||(l[19]=[(0,n.Lk)("span",null,"Perfil",-1)]))}),_:1})]}),_:1}),(0,n.bF)(R,{class:"tabla-tamano"},{default:(0,n.k6)(function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.listaNotificaciones,function(e,l){return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(_,null,{default:(0,n.k6)(function(){return[(0,n.bF)(V,null,{default:(0,n.k6)(function(){return[(0,n.bF)(w,{modelValue:e.ESTADO,"onUpdate:modelValue":function(l){return e.ESTADO=l}},null,8,["modelValue","onUpdate:modelValue"])]}),_:2},1024),(0,n.bF)(N,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,i.v_)(e.TIPNOM),1)]}),_:2},1024)]}),_:2},1024),(0,n.bF)(y)],64)}),256))]}),_:1})]}),_:1})])]}),_:1},8,["modelValue","onSubmit"]),(0,n.bF)(M,{modelValue:e.modalModificar,"onUpdate:modelValue":l[10]||(l[10]=function(l){return e.modalModificar=l}),title:e.modalTitulo,onSubmit:e.grabarModificacion},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",b,[(0,n.bF)(Q,{class:"q-if-outlined",modelValue:e.COMENTARIO_MODIFICACION,"onUpdate:modelValue":l[9]||(l[9]=function(l){return e.COMENTARIO_MODIFICACION=l}),type:"textarea",rows:"3","float-label":"Comentario"},null,8,["modelValue"])])]}),_:1},8,["modelValue","title","onSubmit"]),(0,n.bF)(M,{modelValue:e.modalReportes,"onUpdate:modelValue":l[11]||(l[11]=function(l){return e.modalReportes=l}),title:"Reportes",footer:!1},{default:(0,n.k6)(function(){return[(0,n.bF)(P)]}),_:1},8,["modelValue"]),(0,n.bF)(L,{name:"Justificaciones de Asistencia",buttons:e.buttons},null,8,["buttons"]),(0,n.Lk)("div",O,[(0,n.Lk)("div",I,[(0,n.bF)(H,{class:"q-if-outlined col",noBottom:"",modelValue:e.filtro.JEFE,"onUpdate:modelValue":l[12]||(l[12]=function(l){return e.filtro.JEFE=l}),options:e.listaJefes,"float-label":"Encargado",onInput:e.init},null,8,["modelValue","options","onInput"]),(0,n.bF)(H,{class:"q-if-outlined",options:e.listaEstados,multiple:"",chips:"",modelValue:e.filtro.estados,"onUpdate:modelValue":l[13]||(l[13]=function(l){return e.filtro.estados=l}),"float-label":"Estado",color:"secondary",onInput:e.filtrar},null,8,["options","modelValue","onInput"])]),(0,n.Lk)("div",v,[(0,n.bF)(J,{class:"col q-if-outlined",modelValue:e.filtro.filter,"onUpdate:modelValue":l[14]||(l[14]=function(l){return e.filtro.filter=l})},null,8,["modelValue"]),(0,n.bF)(U,{class:"q-if-outlined",modelValue:e.filtro.F_INI,"onUpdate:modelValue":l[15]||(l[15]=function(l){return e.filtro.F_INI=l}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechainicio"),onInput:e.init},null,8,["modelValue","float-label","onInput"]),(0,n.bF)(U,{class:"q-if-outlined",modelValue:e.filtro.F_FIN,"onUpdate:modelValue":l[16]||(l[16]=function(l){return e.filtro.F_FIN=l}),type:"date",format:"DD/MM/YYYY","float-label":e.$t("fechafin"),onInput:e.init},null,8,["modelValue","float-label","onInput"])]),(0,n.bF)(W,{columns:e.campos,data:e.relacionJustificaciones,style:{height:"65vh"},"row-key":"ID",filter:e.filtro.filter,selected:e.listaSelect,"onUpdate:selected":l[17]||(l[17]=function(l){return e.listaSelect=l}),selection:e.isSelected},{bottom:(0,n.k6)(function(l){return[(0,n.Lk)("div",F,[e.listaSelect.length>0?((0,n.uX)(),(0,n.CE)("span",E,(0,i.v_)(e.listaSelect.length)+" fila seleccionada",1)):(0,n.Q3)("v-if",!0)]),(0,n.Lk)("div",D,[(0,n.bF)(X,{icon:"refresh",flat:"",dense:"",round:"",onClick:e.init},null,8,["onClick"])]),(0,n.Lk)("div",C,[(0,n.Lk)("span",null,"Total "+(0,i.v_)(e.relacionJustificaciones.length),1)])]}),"body-cell-DOCUMENTOS":(0,n.k6)(function(l){return[(0,n.bF)(j,{props:l},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",T,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.row.ADJUNTOS,function(l){return(0,n.uX)(),(0,n.CE)("div",k,[l.EXTENSION?((0,n.uX)(),(0,n.Wv)(Y,{key:0,class:"col",src:e.devuelveUrl(l),item:l,name:l.NOMBRE_REAL,extension:l.EXTENSION,inline:!1},null,8,["src","item","name","extension"])):(0,n.Q3)("v-if",!0)])}),256))])]}),_:2},1032,["props"])]}),"body-cell-DETALLE":(0,n.k6)(function(t){return[(0,n.bF)(j,{props:t},{default:(0,n.k6)(function(){return[(0,n.bF)(X,{flat:"",dense:"",round:"",icon:"info",onClick:function(l){return e.verDetalle(t.row)}},{default:(0,n.k6)(function(){return[(0,n.bF)(x,null,{default:(0,n.k6)(function(){return a()(l[20]||(l[20]=[(0,n.Lk)("div",{class:"row"},[(0,n.Lk)("div",{class:"text-bold"},"Ver Detalles")],-1)]))}),_:1})]}),_:1},8,["onClick"])]}),_:2},1032,["props"])]}),"body-cell-ESTADO":(0,n.k6)(function(e){return[(0,n.bF)(j,{props:e,style:(0,i.Tr)({"background-color":e.row.ESTADOINFO.color})},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,i.v_)(e.row.ESTADOINFO.abr),1)]}),_:2},1032,["props","style"])]}),"body-cell-FH_REGISTRO":(0,n.k6)(function(l){return[(0,n.bF)(j,{props:l},{default:(0,n.k6)(function(){return[(0,n.Lk)("span",null,(0,i.v_)(e.date(l.row.FH_REGISTRO,"DD/MM/YYYY")),1)]}),_:2},1032,["props"])]}),"body-cell-FECHAS":(0,n.k6)(function(t){return[(0,n.bF)(j,{props:t},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.row.FECHAS,function(l,a){return(0,n.uX)(),(0,n.CE)(n.FK,null,[a<5&&t.row.FECHAS.length>6||6===t.row.FECHAS.length||t.row.FECHAS.length<=5?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"shadow-1 chipUnico",color:"secondary",dense:""},{default:(0,n.k6)(function(){return[(0,n.eW)((0,i.v_)(e.date(l.FECHA,"DD/MM")),1)]}),_:2},1024)):(0,n.Q3)("v-if",!0)],64)}),256)),t.row.FECHAS&&t.row.FECHAS.length>6?((0,n.uX)(),(0,n.Wv)(o,{key:0,class:"shadow-1",color:"secondary",dense:""},{default:(0,n.k6)(function(){return[l[21]||(l[21]=(0,n.eW)("...",-1)),(0,n.bF)(x,null,{default:(0,n.k6)(function(){return[(0,n.Lk)("div",A,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.row.FECHAS,function(l,t){return(0,n.uX)(),(0,n.CE)(n.FK,null,[t>=5?((0,n.uX)(),(0,n.CE)("span",S,(0,i.v_)(e.date(l.FECHA,"DD/MM")),1)):(0,n.Q3)("v-if",!0)],64)}),256))])]}),_:2},1024)]}),_:2},1024)):(0,n.Q3)("v-if",!0)])]}),_:2},1032,["props"])]}),_:1},8,["columns","data","filter","selected","selection"])])]}),_:1})}var V=t(76080),N=t.n(V),_=t(45254),w=t.n(_),y=t(57008),R=t.n(y),q=(t(10239),t(90095),t(13715),t(6123)),Q=t(96122),P=t(93616),L=t(80660),H=t(982),J=t(30545),U=t(57668),X=t(13813),Y=t(33001),j=t(18105),x=t(62006),W=t(30640),$=t(69027),K={class:"row q-ma-sm"},G={class:"col q-px-xs q-mx-xs q-mb-sm border-field"},B={class:"leyenda"},z={class:"column"},Z={class:"column"},ee={class:"row"},le={class:"row"},te={class:"row"};function oe(e,l){var t=(0,n.g2)("q-radio"),o=(0,n.g2)("q-datetime"),r=(0,n.g2)("sie-select"),s=(0,n.g2)("q-btn"),u=(0,n.g2)("q-toolbar");return(0,n.uX)(),(0,n.CE)("div",K,[(0,n.Lk)("fieldset",G,[(0,n.Lk)("legend",B,(0,i.v_)(e.$t("Reportes")),1),(0,n.Lk)("div",z,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.reportes,function(o){return(0,n.uX)(),(0,n.Wv)(t,{modelValue:e.reporteSelect,"onUpdate:modelValue":l[0]||(l[0]=function(l){return e.reporteSelect=l}),val:o.value},{default:(0,n.k6)(function(){return[(0,n.eW)((0,i.v_)(o.label),1)]}),_:2},1032,["modelValue","val"])}),256))])]),(0,n.Lk)("div",Z,[(0,n.Lk)("div",ee,[(0,n.bF)(o,{class:"q-if-outlined",modelValue:e.params.F_INI,"onUpdate:modelValue":l[1]||(l[1]=function(l){return e.params.F_INI=l}),"float-label":"Desde",format:"DD/MM/YYYY"},null,8,["modelValue"]),(0,n.bF)(o,{class:"q-if-outlined",modelValue:e.params.F_FIN,"onUpdate:modelValue":l[2]||(l[2]=function(l){return e.params.F_FIN=l}),"float-label":"Hasta",format:"DD/MM/YYYY"},null,8,["modelValue"])]),(0,n.Lk)("div",le,[e.showProfes?((0,n.uX)(),(0,n.Wv)(r,{key:0,class:"col",type:"outlined",modelValue:e.params.PROFCOD,"onUpdate:modelValue":l[3]||(l[3]=function(l){return e.params.PROFCOD=l}),placeholder:"Personal",options:e.infoProfes,label:"NOMCOMP",val:"PROFCOD"},null,8,["modelValue","options"])):(0,n.Q3)("v-if",!0),e.showTipos?((0,n.uX)(),(0,n.Wv)(r,{key:1,class:"col",type:"outlined",modelValue:e.params.TIPO,"onUpdate:modelValue":l[4]||(l[4]=function(l){return e.params.TIPO=l}),placeholder:"Tipo",options:e.tiposJusti,label:"DESCRIPCION",val:"ID_TIPO"},null,8,["modelValue","options"])):(0,n.Q3)("v-if",!0),e.showEstados?((0,n.uX)(),(0,n.Wv)(r,{key:2,class:"col",type:"outlined",modelValue:e.params.ESTADO,"onUpdate:modelValue":l[5]||(l[5]=function(l){return e.params.ESTADO=l}),placeholder:"Estado",options:e.listaEstados,label:"label",val:"value"},null,8,["modelValue","options"])):(0,n.Q3)("v-if",!0)]),(0,n.Lk)("div",te,[(0,n.bF)(r,{class:"col",type:"outlined",modelValue:e.params.ORDEN,"onUpdate:modelValue":l[6]||(l[6]=function(l){return e.params.ORDEN=l}),placeholder:"Orden",options:e.orden,label:"label",val:"value"},null,8,["modelValue","options"])])]),(0,n.bF)(u,{class:"justify-center",inverted:""},{default:(0,n.k6)(function(){return[(0,n.bF)(s,{dense:"",onClick:e.imprimir,color:"secondary"},{default:(0,n.k6)(function(){return a()(l[7]||(l[7]=[(0,n.eW)("Imprimir",-1)]))}),_:1},8,["onClick"])]}),_:1})])}var ae=t(2819),ne={components:{QDatetime:q.T5,QList:q.Mb,QItem:q.H0,QItemMain:q.mF,QItemSide:q.n1,QToolbar:q.ZV,QToolbarTitle:q.r_,QSelect:q.Si,QSearch:q.Ks,QTr:q.qh,QTd:q.Ef,QChip:q.wQ,QScrollArea:Q.A,QCheckbox:q.vZ,QRadio:q.$,sieSelect:P.A,QBtn:q.Il},data:function(){return{reporteSelect:1,sie:(0,U["default"])(),listaEstados:[{value:"T",label:"Todos"},{value:0,label:"Pendiente"},{value:1,label:"Aprobado"},{value:2,label:"Rechazado"}],orden:[{value:0,label:"Alfabetico"},{value:1,label:"Fecha de Justificacion"}],reportes:[{value:1,label:"Reporte General"},{value:2,label:"Reporte por personal"},{value:3,label:"Reporte por tipo"},{value:4,label:"Reporte por estado"}],tiposJusti:[],infoProfes:[],params:{F_INI:new Date,F_FIN:new Date,ESTADO:"T",TIPO:"T",PROFCOD:"T",ORDEN:0}}},methods:{imprimir:function(){var e="intranet/reporte-node/reporte";this.params.repcod="justificacionesPersonal",this.params.repid=this.reporteSelect,this.params.generador=this.sie.usucod,(0,ae.exportFilePhp)(this.params,e,"Reporte ")}},computed:{showProfes:function(){return 2===this.reporteSelect},showEstados:function(){return 4===this.reporteSelect},showTipos:function(){return 3===this.reporteSelect}},mounted:function(){var e=this;return w()(N()().m(function l(){return N()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,L.$http.get("api/HyoApjustificaciontipo/getTipos");case 1:return e.tiposJusti=l.v,e.tiposJusti.unshift({ID_TIPO:"T",DESCRIPCION:"Todos"}),l.n=2,L.$http.get("api/HyoJefaturapersona/getPersonal");case 2:e.infoProfes=l.v,e.infoProfes.unshift({PROFCOD:"T",NOMCOMP:"Todos"});case 3:return l.a(2)}},l)}))()}},ie=t(12807);const re=(0,ie.A)(ne,[["render",oe]]);var se=re,ue=t(9736),ce={components:{QDatetime:q.T5,QList:q.Mb,QItem:q.H0,QItemMain:q.mF,QItemSide:q.n1,QToolbar:q.ZV,QToolbarTitle:q.r_,sieSelect:P.A,QSelect:q.Si,QSearch:q.Ks,QTable:J.A,QTr:q.qh,QTd:q.Ef,QChip:q.wQ,QDownloadFile:x.A,sieModal:W.A,QScrollArea:Q.A,QCheckbox:q.vZ,reportes:se,QInput1:ue.A,QPage:q.Tu,QItemSeparator:q.CL,QInput:q.ie,QBtn:q.Il,QTooltip:q.nC},data:function(){return{sie:(0,U["default"])(),listaJefes:[],jefeSelect:null,filtro:{estados:[0],filter:null,F_INI:new Date,F_FIN:new Date,JEFE:"T"},isSelected:3===(0,U["default"])().ruta.nivel?"multiple":"none",modalNotificaciones:!1,modalModificar:!1,modalTipo:!1,modalTitulo:"",modalDetalle:!1,infoDetalle:{},listaEstados:[{value:0,label:"Pendiente"},{value:1,label:"Aprobado"},{value:2,label:"Rechazado"}],campos:[{name:"NOMCOMP",label:"Personal",align:"left",field:"NOMCOMP"},{name:"TIPO",label:"Tipo",align:"left",field:"TIPO"},{name:"ESTADO",label:"Estado",align:"center",field:"ESTADO"},{name:"FH_REGISTRO",label:"Fecha",align:"left",field:"FH_REGISTRO"},{name:"MOTIVO",label:"Motivo",align:"left",field:"MOTIVO"},{name:"FECHAS",label:"F. Asistencia",align:"left",field:"FECHAS"},{name:"DOCUMENTOS",label:"Adjuntos",align:"left",field:"DOCUMENTOS"},{name:"DETALLE",align:"right",field:"DETALLE"}],relacionJustificaciones:[],relacionJustificacionesBase:[],listaSelect:[],COMENTARIO_MODIFICACION:null,listaNotificaciones:[],modalReportes:!1}},methods:{date:j.Ay,verDetalle:function(e){this.infoDetalle=R()({},e),this.infoDetalle.FH_REGISTRO=(0,j.Ay)(this.infoDetalle.FH_REGISTRO,"DD/MM/YYYY HH:mm"),this.modalDetalle=!0},filtrar:function(){this.relacionJustificaciones=this.relacionJustificacionesBase,this.relacionJustificaciones=(0,Y.filterArray)(this.filtro.estados,{field:"ESTADO",list:this.relacionJustificaciones||[]})},grabarNotificacion:function(){var e=this;return w()(N()().m(function l(){var t,o;return N()().w(function(l){while(1)switch(l.n){case 0:if(t={add:[],del:[]},e.listaNotificaciones.forEach(function(e){var l=e.ESTADO,o=e.TIPCOD,a=e.ID;l?a||t.add.push(o):a&&t.del.push(a)}),0!==t.add.length||0!==t.del.length){l.n=1;break}(0,H["default"])("No hay cambios por guardar","error"),l.n=3;break;case 1:return l.n=2,L.$http.post("api/HyoApjustificanotificaciones/saveNotificaciones",{info:t});case 2:o=l.v,o.type||(e.modalNotificaciones=!1),(0,H["default"])(e.$t("mensajes."+o.msg),o.type);case 3:return l.a(2)}},l)}))()},aceptar:function(){this.modalModificar=!0,this.modalTipo=1,this.modalTitulo="Aceptar Justificación",this.COMENTARIO_MODIFICACION=null},rechazar:function(){this.modalModificar=!0,this.modalTipo=2,this.modalTitulo="Rechazar Justificación",this.COMENTARIO_MODIFICACION=null},devuelveUrl:function(e){var l=e.ID,t=this.sie.api+"/HyoApjustificacion/descargar/"+l+"?access_token="+this.sie.token;return t},imprimirReporte:function(){this.modalReportes=!0},init:function(){var e=this;return w()(N()().m(function l(){return N()().w(function(l){while(1)switch(l.n){case 0:return l.n=1,L.$http.get("api/HyoApjustificacion/getJustificacionesJefe",{params:{info:e.filtro}});case 1:e.relacionJustificacionesBase=l.v,e.filtrar();case 2:return l.a(2)}},l)}))()},grabarModificacion:function(){var e=this,l={lista:[],COMENTARIO_MODIFICACION:this.COMENTARIO_MODIFICACION,ESTADO:this.modalTipo};this.listaSelect.forEach(function(e){var t=e.ID;l.lista.push(t)}),this.COMENTARIO_MODIFICACION?(0,$.dialogConfirm)({message:"¿Está seguro de guardar esta información?"}).then(function(){var t=w()(N()().m(function t(o){var a;return N()().w(function(t){while(1)switch(t.n){case 0:if(!o){t.n=2;break}return t.n=1,L.$http.post("api/HyoApjustificacion/editJustificacion",{info:l});case 1:a=t.v,(0,H["default"])(e.$t("mensajes."+a.msg),a.type),"m0001"===a.msg&&(e.init(),e.listaSelect=[],e.modalModificar=!1);case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()):(0,H["default"])("Debe ingresar un comentario","error")},eliminarJustificacion:function(){var e=this,l=[];this.listaSelect.forEach(function(e){0===e.ESTADO&&l.push(e.ID)}),l.length>0&&(0,$.dialogDelete)().then(function(){var t=w()(N()().m(function t(o){var a;return N()().w(function(t){while(1)switch(t.n){case 0:if(!o){t.n=2;break}return t.n=1,L.$http.post("api/HyoApjustificacion/deleteJustificacion",{info:l});case 1:a=t.v,(0,H["default"])(e.$t("mensajes."+a.mensaje),a.type),a.type||(e.init(),e.listaSelect=[]);case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},configurarJustificaciones:function(){var e=this;return w()(N()().m(function l(){return N()().w(function(l){while(1)switch(l.n){case 0:return e.modalNotificaciones=!0,l.n=1,L.$http.get("api/HyoApjustificanotificaciones/getConfig");case 1:e.listaNotificaciones=l.v;case 2:return l.a(2)}},l)}))()}},computed:{buttons:function(){var e=[];return 3===this.sie.ruta.nivel&&(this.listaSelect.length>0&&(e.push({label:"Eliminar",icon:"delete",click:this.eliminarJustificacion}),e.push({label:"Rechazar",icon:"call_missed",click:this.rechazar}),e.push({label:"Aceptar",icon:"done_all",click:this.aceptar})),["001"].indexOf(this.sie.tipcod)>=0&&e.push({label:"Configurar",icon:"cogs",click:this.configurarJustificaciones})),e.push({label:"Imprimir",icon:"print",click:this.imprimirReporte}),e}},mounted:function(){var e=this;L.$http.get("api/HyoUsuario/obtAccesoPersonal",{params:{usucod:this.sie.usucod}}).then(function(l){var t=l.json;t?L.$http.get("api/HyoJefaturapersona/obtJefes",{params:{soloAsignados:!0}}).then(function(l){var t=l.json;t.unshift({PROFCOD:"T",NOMCOMP:"Todos"}),e.filtro.JEFE="T",e.init(),e.listaJefes=(0,X["default"])(t,function(e){return{label:e.NOMCOMP,value:e.PROFCOD}})}):(e.listaJefes=[{value:e.sie.profcod,label:e.sie.nombre}],e.filtro.JEFE=e.sie.profcod,e.init())})}};const de=(0,ie.A)(ce,[["render",M]]);var fe=de}}]);